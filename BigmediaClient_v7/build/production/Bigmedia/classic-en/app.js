var Bigmedia=Bigmedia||{};if(!Bigmedia.carousel){Bigmedia.carousel={}}if(!Bigmedia.component){Bigmedia.component={}}if(!Bigmedia.lib){Bigmedia.lib={}}if(!Bigmedia.lib.provider){Bigmedia.lib.provider={}}if(!Bigmedia.lib.validator){Bigmedia.lib.validator={}}if(!Bigmedia.locale){Bigmedia.locale={}}if(!Bigmedia.locale.en){Bigmedia.locale.en={}}if(!Bigmedia.model){Bigmedia.model={}}if(!Bigmedia.proxy){Bigmedia.proxy={}}if(!Bigmedia.store){Bigmedia.store={}}if(!Bigmedia.view){Bigmedia.view={}}if(!Bigmedia.view.authentication){Bigmedia.view.authentication={}}if(!Bigmedia.view.autoselectfaces){Bigmedia.view.autoselectfaces={}}if(!Bigmedia.view.campaign){Bigmedia.view.campaign={}}if(!Bigmedia.view.campaign.dashboard){Bigmedia.view.campaign.dashboard={}}if(!Bigmedia.view.carousel){Bigmedia.view.carousel={}}if(!Bigmedia.view.cart){Bigmedia.view.cart={}}if(!Bigmedia.view.chart){Bigmedia.view.chart={}}if(!Bigmedia.view.det){Bigmedia.view.det={}}if(!Bigmedia.view.dialog){Bigmedia.view.dialog={}}if(!Bigmedia.view.drag){Bigmedia.view.drag={}}if(!Bigmedia.view.error){Bigmedia.view.error={}}if(!Bigmedia.view.field){Bigmedia.view.field={}}if(!Bigmedia.view.grid){Bigmedia.view.grid={}}if(!Bigmedia.view.main){Bigmedia.view.main={}}if(!Bigmedia.view.map){Bigmedia.view.map={}}if(!Bigmedia.view.monitoring){Bigmedia.view.monitoring={}}if(!Bigmedia.view.pivot){Bigmedia.view.pivot={}}if(!Bigmedia.view.profile){Bigmedia.view.profile={}}if(!Bigmedia.view.user){Bigmedia.view.user={}}if(!Bigmedia.view.wizard){Bigmedia.view.wizard={}}var Ext=Ext||{};if(!Ext.Toolbar){Ext.Toolbar={}}if(!Ext.app){Ext.app={}}if(!Ext.app.bind){Ext.app.bind={}}if(!Ext.app.domain){Ext.app.domain={}}if(!Ext.button){Ext.button={}}if(!Ext.chart){Ext.chart={}}if(!Ext.chart.axis){Ext.chart.axis={}}if(!Ext.chart.axis.layout){Ext.chart.axis.layout={}}if(!Ext.chart.axis.segmenter){Ext.chart.axis.segmenter={}}if(!Ext.chart.axis.sprite){Ext.chart.axis.sprite={}}if(!Ext.chart.grid){Ext.chart.grid={}}if(!Ext.chart.interactions){Ext.chart.interactions={}}if(!Ext.chart.label){Ext.chart.label={}}if(!Ext.chart.legend){Ext.chart.legend={}}if(!Ext.chart.legend.sprite){Ext.chart.legend.sprite={}}if(!Ext.chart.legend.store){Ext.chart.legend.store={}}if(!Ext.chart.modifier){Ext.chart.modifier={}}if(!Ext.chart.overrides){Ext.chart.overrides={}}if(!Ext.chart.series){Ext.chart.series={}}if(!Ext.chart.series.sprite){Ext.chart.series.sprite={}}if(!Ext.chart.sprite){Ext.chart.sprite={}}if(!Ext.chart.theme){Ext.chart.theme={}}if(!Ext.container){Ext.container={}}if(!Ext.core){Ext.core={}}if(!Ext.data){Ext.data={}}if(!Ext.data.field){Ext.data.field={}}if(!Ext.data.flash){Ext.data.flash={}}if(!Ext.data.identifier){Ext.data.identifier={}}if(!Ext.data.matrix){Ext.data.matrix={}}if(!Ext.data.operation){Ext.data.operation={}}if(!Ext.data.proxy){Ext.data.proxy={}}if(!Ext.data.reader){Ext.data.reader={}}if(!Ext.data.request){Ext.data.request={}}if(!Ext.data.schema){Ext.data.schema={}}if(!Ext.data.session){Ext.data.session={}}if(!Ext.data.validator){Ext.data.validator={}}if(!Ext.data.writer){Ext.data.writer={}}if(!Ext.dd){Ext.dd={}}if(!Ext.dom){Ext.dom={}}if(!Ext.dom.Element){Ext.dom.Element={}}if(!Ext.drag){Ext.drag={}}if(!Ext.draw){Ext.draw={}}if(!Ext.draw.engine){Ext.draw.engine={}}if(!Ext.draw.engine.SvgContext){Ext.draw.engine.SvgContext={}}if(!Ext.draw.gradient){Ext.draw.gradient={}}if(!Ext.draw.modifier){Ext.draw.modifier={}}if(!Ext.draw.overrides){Ext.draw.overrides={}}if(!Ext.draw.overrides.hittest){Ext.draw.overrides.hittest={}}if(!Ext.draw.overrides.hittest.sprite){Ext.draw.overrides.hittest.sprite={}}if(!Ext.draw.plugin){Ext.draw.plugin={}}if(!Ext.draw.sprite){Ext.draw.sprite={}}if(!Ext.event){Ext.event={}}if(!Ext.event.gesture){Ext.event.gesture={}}if(!Ext.event.publisher){Ext.event.publisher={}}if(!Ext.exporter){Ext.exporter={}}if(!Ext.form){Ext.form={}}if(!Ext.form.Action){Ext.form.Action={}}if(!Ext.form.action){Ext.form.action={}}if(!Ext.form.field){Ext.form.field={}}if(!Ext.form.trigger){Ext.form.trigger={}}if(!Ext.fx){Ext.fx={}}if(!Ext.fx.animation){Ext.fx.animation={}}if(!Ext.fx.easing){Ext.fx.easing={}}if(!Ext.fx.runner){Ext.fx.runner={}}if(!Ext.fx.target){Ext.fx.target={}}if(!Ext.grid){Ext.grid={}}if(!Ext.grid.column){Ext.grid.column={}}if(!Ext.grid.feature){Ext.grid.feature={}}if(!Ext.grid.filters){Ext.grid.filters={}}if(!Ext.grid.filters.filter){Ext.grid.filters.filter={}}if(!Ext.grid.header){Ext.grid.header={}}if(!Ext.grid.locking){Ext.grid.locking={}}if(!Ext.grid.plugin){Ext.grid.plugin={}}if(!Ext.grid.selection){Ext.grid.selection={}}if(!Ext.layout){Ext.layout={}}if(!Ext.layout.boxOverflow){Ext.layout.boxOverflow={}}if(!Ext.layout.component){Ext.layout.component={}}if(!Ext.layout.component.field){Ext.layout.component.field={}}if(!Ext.layout.container){Ext.layout.container={}}if(!Ext.layout.container.border){Ext.layout.container.border={}}if(!Ext.layout.container.boxOverflow){Ext.layout.container.boxOverflow={}}if(!Ext.list){Ext.list={}}if(!Ext.locale){Ext.locale={}}if(!Ext.locale.en){Ext.locale.en={}}if(!Ext.locale.en.data){Ext.locale.en.data={}}if(!Ext.locale.en.data.validator){Ext.locale.en.data.validator={}}if(!Ext.locale.en.form){Ext.locale.en.form={}}if(!Ext.locale.en.form.field){Ext.locale.en.form.field={}}if(!Ext.locale.en.grid){Ext.locale.en.grid={}}if(!Ext.locale.en.grid.filters){Ext.locale.en.grid.filters={}}if(!Ext.locale.en.grid.filters.filter){Ext.locale.en.grid.filters.filter={}}if(!Ext.locale.en.grid.header){Ext.locale.en.grid.header={}}if(!Ext.locale.en.grid.plugin){Ext.locale.en.grid.plugin={}}if(!Ext.locale.en.picker){Ext.locale.en.picker={}}if(!Ext.locale.en.toolbar){Ext.locale.en.toolbar={}}if(!Ext.locale.en.view){Ext.locale.en.view={}}if(!Ext.locale.en.window){Ext.locale.en.window={}}if(!Ext.menu){Ext.menu={}}if(!Ext.mixin){Ext.mixin={}}if(!Ext.override){Ext.override={}}if(!Ext.override.sparkline){Ext.override.sparkline={}}if(!Ext.overrides){Ext.overrides={}}if(!Ext.overrides.app){Ext.overrides.app={}}if(!Ext.overrides.app.domain){Ext.overrides.app.domain={}}if(!Ext.overrides.dom){Ext.overrides.dom={}}if(!Ext.overrides.event){Ext.overrides.event={}}if(!Ext.overrides.event.publisher){Ext.overrides.event.publisher={}}if(!Ext.overrides.exporter){Ext.overrides.exporter={}}if(!Ext.overrides.exporter.util){Ext.overrides.exporter.util={}}if(!Ext.overrides.form){Ext.overrides.form={}}if(!Ext.overrides.form.field){Ext.overrides.form.field={}}if(!Ext.overrides.layout){Ext.overrides.layout={}}if(!Ext.overrides.layout.container){Ext.overrides.layout.container={}}if(!Ext.overrides.list){Ext.overrides.list={}}if(!Ext.overrides.mixin){Ext.overrides.mixin={}}if(!Ext.overrides.plugin){Ext.overrides.plugin={}}if(!Ext.overrides.selection){Ext.overrides.selection={}}if(!Ext.overrides.util){Ext.overrides.util={}}if(!Ext.overrides.ux){Ext.overrides.ux={}}if(!Ext.overrides.ux.rating){Ext.overrides.ux.rating={}}if(!Ext.panel){Ext.panel={}}if(!Ext.parse){Ext.parse={}}if(!Ext.parse.symbol){Ext.parse.symbol={}}if(!Ext.perf){Ext.perf={}}if(!Ext.picker){Ext.picker={}}if(!Ext.pivot){Ext.pivot={}}if(!Ext.pivot.axis){Ext.pivot.axis={}}if(!Ext.pivot.dimension){Ext.pivot.dimension={}}if(!Ext.pivot.feature){Ext.pivot.feature={}}if(!Ext.pivot.filter){Ext.pivot.filter={}}if(!Ext.pivot.matrix){Ext.pivot.matrix={}}if(!Ext.pivot.result){Ext.pivot.result={}}if(!Ext.plugin){Ext.plugin={}}if(!Ext.promise){Ext.promise={}}if(!Ext.resizer){Ext.resizer={}}if(!Ext.route){Ext.route={}}if(!Ext.scroll){Ext.scroll={}}if(!Ext.selection){Ext.selection={}}if(!Ext.slider){Ext.slider={}}if(!Ext.sparkline){Ext.sparkline={}}if(!Ext.state){Ext.state={}}if(!Ext.tab){Ext.tab={}}if(!Ext.theme){Ext.theme={}}if(!Ext.theme.material){Ext.theme.material={}}if(!Ext.theme.material.button){Ext.theme.material.button={}}if(!Ext.theme.material.form){Ext.theme.material.form={}}if(!Ext.theme.material.form.field){Ext.theme.material.form.field={}}if(!Ext.theme.material.menu){Ext.theme.material.menu={}}if(!Ext.theme.material.tab){Ext.theme.material.tab={}}if(!Ext.theme.material.tree){Ext.theme.material.tree={}}if(!Ext.theme.material.view){Ext.theme.material.view={}}if(!Ext.theme.material.window){Ext.theme.material.window={}}if(!Ext.theme.neptune){Ext.theme.neptune={}}if(!Ext.theme.neptune.form){Ext.theme.neptune.form={}}if(!Ext.theme.neptune.form.field){Ext.theme.neptune.form.field={}}if(!Ext.theme.neptune.grid){Ext.theme.neptune.grid={}}if(!Ext.theme.neptune.grid.column){Ext.theme.neptune.grid.column={}}if(!Ext.theme.neptune.layout){Ext.theme.neptune.layout={}}if(!Ext.theme.neptune.layout.component){Ext.theme.neptune.layout.component={}}if(!Ext.theme.neptune.menu){Ext.theme.neptune.menu={}}if(!Ext.theme.neptune.panel){Ext.theme.neptune.panel={}}if(!Ext.theme.neptune.picker){Ext.theme.neptune.picker={}}if(!Ext.theme.neptune.resizer){Ext.theme.neptune.resizer={}}if(!Ext.theme.neptune.toolbar){Ext.theme.neptune.toolbar={}}if(!Ext.theme.triton){Ext.theme.triton={}}if(!Ext.theme.triton.form){Ext.theme.triton.form={}}if(!Ext.theme.triton.form.field){Ext.theme.triton.form.field={}}if(!Ext.theme.triton.grid){Ext.theme.triton.grid={}}if(!Ext.theme.triton.grid.column){Ext.theme.triton.grid.column={}}if(!Ext.theme.triton.grid.plugin){Ext.theme.triton.grid.plugin={}}if(!Ext.theme.triton.grid.selection){Ext.theme.triton.grid.selection={}}if(!Ext.theme.triton.list){Ext.theme.triton.list={}}if(!Ext.theme.triton.menu){Ext.theme.triton.menu={}}if(!Ext.theme.triton.picker){Ext.theme.triton.picker={}}if(!Ext.theme.triton.resizer){Ext.theme.triton.resizer={}}if(!Ext.theme.triton.selection){Ext.theme.triton.selection={}}if(!Ext.theme.triton.toolbar){Ext.theme.triton.toolbar={}}if(!Ext.tip){Ext.tip={}}if(!Ext.toolbar){Ext.toolbar={}}if(!Ext.tree){Ext.tree={}}if(!Ext.tree.plugin){Ext.tree.plugin={}}if(!Ext.util){Ext.util={}}if(!Ext.util.paintmonitor){Ext.util.paintmonitor={}}if(!Ext.util.sizemonitor){Ext.util.sizemonitor={}}if(!Ext.util.translatable){Ext.util.translatable={}}if(!Ext.ux){Ext.ux={}}if(!Ext.ux.colorpick){Ext.ux.colorpick={}}if(!Ext.ux.form){Ext.ux.form={}}if(!Ext.ux.layout){Ext.ux.layout={}}if(!Ext.ux.overrides){Ext.ux.overrides={}}if(!Ext.ux.overrides.rating){Ext.ux.overrides.rating={}}if(!Ext.ux.rating){Ext.ux.rating={}}if(!Ext.ux.statusbar){Ext.ux.statusbar={}}if(!Ext.view){Ext.view={}}if(!Ext.window){Ext.window={}}var GeoExt=GeoExt||{};if(!GeoExt.component){GeoExt.component={}}if(!GeoExt.data){GeoExt.data={}}if(!GeoExt.data.model){GeoExt.data.model={}}if(!GeoExt.data.store){GeoExt.data.store={}}if(!GeoExt.mixin){GeoExt.mixin={}}if(!GeoExt.util){GeoExt.util={}}var Mz=Mz||{};if(!Mz.aggregate){Mz.aggregate={}}if(!Mz.aggregate.axis){Mz.aggregate.axis={}}if(!Mz.aggregate.dimension){Mz.aggregate.dimension={}}if(!Mz.aggregate.filter){Mz.aggregate.filter={}}if(!Mz.aggregate.matrix){Mz.aggregate.matrix={}}if(!Mz.pivot){Mz.pivot={}}if(!Mz.pivot.feature){Mz.pivot.feature={}}var OccupancyStateWidget=OccupancyStateWidget||{};(function(q){var e,p=['constructor','toString','valueOf','toLocaleString'],n={},m={},k=0,l,j,a,b,o,f,c,d,g,h,i,t=function(){var s,t;j=Ext.Base;a=Ext.ClassManager;b=Ext.Class;for(s=p.length;s-->0;){t=1<<s;m[n[t]=p[s]]=t}for(s in m){k|=m[s]}k=~k;Function.prototype.$isFunction=1;i=!!a.addAlias;o=b.getPreprocessor('config').fn;f=b.getPreprocessor('cachedConfig');f=f&&f.fn;h=b.getPreprocessor('privates');h=h&&h.fn;d=b.getPreprocessor('platformConfig');d=d&&d.fn;c=a.postprocessors.platformConfig;c=c&&c.fn;g=a.postprocessors.deprecated;g=g&&g.fn;e=j.$staticMembers;if(!e){e=[];for(l in j){if(j.hasOwnProperty(l)){e.push(l)}}}q.derive=r;return r.apply(this,arguments)},s=function(f,d,o){var l=o.enumerableMembers,j=f.prototype,b,h,k,e,m;if(!d){return}if(i){f.addMembers(d)}else {for(b in d){e=d[b];if(e&&e.$isFunction&&!e.$isClass&&e!==Ext.emptyFn&&e!==Ext.identityFn){m=j.hasOwnProperty(b)&&j[b];if(m){e.$previous=m}j[b]=h=e;h.$owner=f;h.$name=b}else {j[b]=e}}for(k=1;l;k<<=1){if(l&k){l&=~k;b=n[k];j[b]=h=d[b];h.$owner=f;h.$name=b}}}if(d.platformConfig&&c){c.call(a,f.$className,f,d)}if(d.deprecated&&g){g.call(a,f.$className,f,d)}},r=function(u,Q,c,L,E,M,O,B,D,G,N){var g=function ctor(){return this.constructor.apply(this,arguments)||null},m=g,v={enumerableMembers:L&k,onCreated:N,onBeforeCreated:s,aliases:B},p=c.alternateClassName||[],P=Ext.global,F,z,l,K,y,C,H,r,x,w,n,I,t,J=a.alternateToName||a.maps.alternateToName,A=a.nameToAlternates||a.maps.nameToAlternates;for(l=e.length;l-->0;){H=e[l];g[H]=j[H]}if(c.$isFunction){c=c(g)}v.data=c;x=c.statics;delete c.statics;c.$className=u;if('$className' in c){g.$className=c.$className}g.extend(Q);r=g.prototype;if(E){g.xtype=c.xtype=E[0];r.xtypes=E}r.xtypesChain=M;r.xtypesMap=O;c.alias=B;m.triggerExtended(g,c,v);if(c.onClassExtended){g.onExtended(c.onClassExtended,g);delete c.onClassExtended}if(c.privates&&h){h.call(b,g,c)}if(x){if(i){g.addStatics(x)}else {for(w in x){if(x.hasOwnProperty(w)){t=x[w];if(t&&t.$isFunction&&!t.$isClass&&t!==Ext.emptyFn&&t!==Ext.identityFn){g[w]=I=t;I.$owner=g;I.$name=w}g[w]=t}}}}if(c.inheritableStatics){g.addInheritableStatics(c.inheritableStatics);delete c.inheritableStatics}if(r.onClassExtended){m.onExtended(r.onClassExtended,m);delete r.onClassExtended}if(c.platformConfig&&d){d.call(b,g,c);delete c.platformConfig}if(c.config){o.call(b,g,c)}if(c.cachedConfig&&f){f.call(b,g,c);delete c.cachedConfig}v.onBeforeCreated(g,v.data,v);for(l=0,y=D&&D.length;l<y;++l){g.mixin.apply(g,D[l])}for(l=0,y=B.length;l<y;l++){F=B[l];a.setAlias?a.setAlias(g,F):a.addAlias(g,F)}if(c.singleton){m=new g()}if(!(p instanceof Array)){p=[p]}n=a.getName(m);for(l=0,K=p.length;l<K;l++){z=p[l];a.classes[z]=m;if(i){a.addAlternate(g,z)}else {if(n){J[z]=n;p=A[n]||(A[n]=[]);p.push(z)}}}for(l=0,y=G.length;l<y;l+=2){C=G[l];if(!C){C=P}C[G[l+1]]=m}a.classes[u]=m;if(!i){if(n&&n!==u){J[u]=n;p=A[n]||(A[n]=[]);p.push(u)}}delete r.alternateClassName;if(v.onCreated){v.onCreated.call(m,m)}if(u){a.triggerCreated(u)}return m};q.derive=t})(Ext.cmd={});var Ext=Ext||{};(function(){var d=this,l=Object.prototype,c=l.toString,b=['valueOf','toLocaleString','toString','constructor'],a=Ext.fireIdle=function(){},f=function(){},e=function(a){return a},k=function(){var a=k.caller.caller;return a.$owner.prototype[a.$name].apply(this,arguments)},o=Ext.manifest||{},m=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,n=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/,h,j,i,g,p;Ext.global=d;Ext.$nextIid=0;Ext.now=Date.now||(Date.now=function(){return +new Date()});Ext.ticks=d.performance&&d.performance.now?function(){return performance.now()}:Ext.now;Ext._startTime=Ext.ticks();a.$nullFn=e.$nullFn=a.$emptyFn=e.$identityFn=f.$nullFn=!0;f.$privacy='framework';a.$noClearOnDestroy=e.$noClearOnDestroy=!0;f.$noClearOnDestroy=!0;Ext['suspendLayouts']=Ext['resumeLayouts']=a;for(p in {toString:1}){b=null}Ext.enumerables=b;Ext.apply=function(c,a,g){var e,f,d;if(c){if(g){Ext.apply(c,g)}if(a&&typeof a==='object'){for(e in a){c[e]=a[e]}if(b){for(f=b.length;f--;){d=b[f];if(a.hasOwnProperty(d)){c[d]=a[d]}}}}}return c};function addInstanceOverrides(d,e,c){var a,b;for(a in c){if(c.hasOwnProperty(a)){b=c[a];if(typeof b==='function'){b.$name=a;b.$owner=e;b.$previous=d.hasOwnProperty(a)?d[a]:k}d[a]=b}}}Ext.buildSettings=Ext.apply({baseCSSPrefix:'x-'},Ext.buildSettings||{});Ext.apply(Ext,{idSeed:0,idPrefix:'ext-',isRobot:!1,isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:!1,enableListenerCollection:!0,name:Ext.sandboxName||'Ext',privateFn:f,emptyFn:a,identityFn:e,frameStartTime:Ext.now(),manifest:o,enableAria:!0,startsWithHashRe:/^#/,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,BLANK_IMAGE_URL:'data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==',makeIdSelector:function(a){return '#'+a},id:function(a,c){if(a&&a.id){return a.id}var b=(c||Ext.idPrefix)+ ++Ext.idSeed;if(a){a.id=b}return b},returnId:function(a){return a.getId()},returnTrue:function(){return !0},emptyString:new String(),emptyArray:Object.freeze?Object.freeze([]):[],baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(DOMMouse|Moz.+|MS.+|webkit.+)/,canonicalEventName:function(a){return Ext.$eventNameMap[a]||(Ext.$eventNameMap[a]=Ext.$vendorEventRe.test(a)?a:a.toLowerCase())},applyIf:function(c,b){var a;if(c&&b&&typeof b==='object'){for(a in b){if(c[a]===undefined){c[a]=b[a]}}}return c},destroy:function(){var c=arguments.length,b,a;for(b=0;b<c;b++){a=arguments[b];if(a){if(Ext.isArray(a)){this.destroy.apply(this,a)}else {if(Ext.isFunction(a.destroy)&&!a.destroyed){a.destroy()}}}}return null},destroyMembers:function(c){for(var a,d,b=1,e=arguments,f=e.length;b<f;b++){a=c[d=e[b]];if(a!=null){c[d]=Ext.destroy(a)}}},override:function(a,b){if(a.$isClass){a.override(b)}else {if(typeof a==='function'){Ext.apply(a.prototype,b)}else {var c=a.self,d;if(c&&c.$isClass){d=b.privates;if(d){b=Ext.apply({},b);delete b.privates;addInstanceOverrides(a,c,d)}addInstanceOverrides(a,c,b)}else {Ext.apply(a,b)}}}return a},valueFrom:function(a,b,c){return Ext.isEmpty(a,c)?b:a},isEmpty:function(a,b){return a==null||(!b?a==='':!1)||Ext.isArray(a)&&a.length===0},isArray:'isArray' in Array?Array.isArray:function(a){return c.call(a)==='[object Array]'},isDate:function(a){return c.call(a)==='[object Date]'},isMSDate:function(a){if(!Ext.isString(a)){return !1}return n.test(a)},isObject:c.call(null)==='[object Object]'?function(a){return a!=null&&c.call(a)==='[object Object]'&&a.ownerDocument===undefined}:function(a){return c.call(a)==='[object Object]'},isSimpleObject:function(a){return a instanceof Object&&a.constructor===Object},isPrimitive:function(b){var a=typeof b;return a==='string'||a==='number'||a==='boolean'},isFunction:typeof document!=='undefined'&&typeof document.getElementsByTagName('body')==='function'?function(a){return !!a&&c.call(a)==='[object Function]'}:function(a){return !!a&&typeof a==='function'},isNumber:function(a){return typeof a==='number'&&isFinite(a)},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},isString:function(a){return typeof a==='string'},isBoolean:function(a){return typeof a==='boolean'},isElement:function(a){return a?a.nodeType===1:!1},isTextNode:function(a){return a?a.nodeName==='#text':!1},isDefined:function(a){return typeof a!=='undefined'},isIterable:function(a){if(!a||typeof a.length!=='number'||typeof a==='string'||Ext.isFunction(a)){return !1}if(!a.propertyIsEnumerable){return !!a.item}if(a.hasOwnProperty('length')&&!a.propertyIsEnumerable('length')){return !0}return m.test(c.call(a))},isDebugEnabled:a,clone:function(a,g){if(a==null){return a}if(g!==!1&&a.nodeType&&a.cloneNode){return a.cloneNode(!0)}var h=c.call(a),e,j,f,d,i;if(h==='[object Date]'){return new Date(a.getTime())}if(h==='[object Array]'){e=a.length;d=[];while(e--){d[e]=Ext.clone(a[e],g)}}else {if(h==='[object Object]'&&a.constructor===Object){d={};for(i in a){d[i]=Ext.clone(a[i],g)}if(b){for(j=b.length;j--;){f=b[j];if(a.hasOwnProperty(f)){d[f]=a[f]}}}}}return d||a},getUniqueGlobalNamespace:function(){var a=this.uniqueGlobalNamespace,b;if(a===undefined){b=0;do{a='ExtBox'+ ++b}while(d[a]!==undefined);d[a]=Ext;this.uniqueGlobalNamespace=a}return a},functionFactoryCache:{},cacheableFunctionFactory:function(){var f=this,a=Array.prototype.slice.call(arguments),e=f.functionFactoryCache,d,b,c;if(Ext.isSandboxed){c=a.length;if(c>0){c--;a[c]='var Ext=window.'+Ext.name+';'+a[c]}}d=a.join('');b=e[d];if(!b){b=Function.prototype.constructor.apply(Function.prototype,a);e[d]=b}return b},functionFactory:function(){var b=Array.prototype.slice.call(arguments),a;if(Ext.isSandboxed){a=b.length;if(a>0){a--;b[a]='var Ext=window.'+Ext.name+';'+b[a]}}return Function.prototype.constructor.apply(Function.prototype,b)},Logger:{verbose:a,log:a,info:a,warn:a,error:function(a){throw new Error(a)},deprecate:a},ariaWarn:function(a,b){if(Ext.enableAria&&!Ext.slicer){if(!Ext.ariaWarn.first){Ext.ariaWarn.first=!0;Ext.log.warn('WAI-ARIA compatibility warnings can be suppressed '+'by adding the following to application startup code:');Ext.log.warn('    Ext.ariaWarn = Ext.emptyFn;')}Ext.log.warn({msg:b,dump:a})}},getElementById:function(a){return document.getElementById(a)},splitAndUnescape:function(){var a={};return function(e,c){if(!e){return []}else {if(!c){return [e]}}var g=a[c]||(a[c]=new RegExp('\\\\'+c,'g')),f=[],d,b;d=e.split(c);while((b=d.shift())!==undefined){while(b.charAt(b.length-1)==='\\'&&d.length>0){b=b+c+d.shift()}b=b.replace(g,c);f.push(b)}return f}}(),doElevate:function(){var c=j,b=h,a=g;j=h=g=null;i=b?c.apply(a,b):c.call(a);Ext.fireIdle()},elevate:function(d,b,a){var c;if(a&&!a.length){a=null}Ext._suppressIdle=!1;if(Ext.elevateFunction){j=d;g=b;h=a;Ext.elevateFunction(Ext.doElevate);c=i;i=null}else {c=a?d.apply(b,a):d.call(b);Ext.fireIdle()}return c},getExpando:function(b,c){var a=b.$expandos;return a&&a[c]||null},setExpando:function(c,d,b){var a=c.$expandos;if(b!==undefined){(a||(c.$expandos={}))[d]=b}else {if(a){delete a[d]}}return b}});Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=!0})();Ext.platformTags.modern=!(Ext.platformTags.classic=Ext.isClassic=!0);(function(){function toString(){var d=this,b=d.sourceClass,a=d.sourceMethod,c=d.msg;if(a){if(c){a+='(): ';a+=c}else {a+='()'}}if(b){a=a?b+'.'+a:b}return a||c||''}Ext.Error=function(b){var a=new Error();if(Ext.isString(b)){b={msg:b}}Ext.apply(a,b);a.message=a.message||a.msg;a.toString=toString;return a};Ext.apply(Ext.Error,{ignore:!1,raise:function(a){var d=this,b=d.raise.caller,e,c;a=a||{};if(Ext.isString(a)){a={msg:a}}if(b===Ext.raise){b=b.caller}if(b){if(!a.sourceMethod&&(c=b.$name)){a.sourceMethod=c}if(!a.sourceClass&&(c=b.$owner)&&(c=c.$className)){a.sourceClass=c}}if(d.handle(a)!==!0){e=toString.call(a);throw new Ext.Error(a)}},handle:function(){return this.ignore}})})();Ext.deprecated=function(a){return Ext.emptyFn};Ext.raise=function(){Ext.Error.raise.apply(Ext.Error,arguments)};Ext.Array=function(){var c=Array.prototype,b=c.slice,f=function(){var a=[],b,c=20;if(!a.splice){return !1}while(c--){a.push('A')}a.splice(15,0,'F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F');b=a.length;a.splice(13,0,'XXX');if(b+1!==a.length){return !1}return !0}(),i='indexOf' in c,h=!0;function stableSort(b,e){var d=b.length,c=new Array(d),a;for(a=0;a<d;a++){c[a]=a}c.sort(function(a,c){return e(b[a],b[c])||a-c});for(a=0;a<d;a++){c[a]=b[c[a]]}for(a=0;a<d;a++){b[a]=c[a]}return b}try{if(typeof document!=='undefined'){b.call(document.getElementsByTagName('body'))}}catch(q){h=!1}var g=function(b,a){return a<0?Math.max(0,b.length+a):Math.min(b.length,a)},e=function(a,n,m,d){var e=d?d.length:0,i=a.length,f=g(a,n);if(f===i){if(e){a.push.apply(a,d)}}else {var k=Math.min(m,i-f),c=f+k,h=c+e-k,l=i-c,j=i-k,b;if(h<c){for(b=0;b<l;++b){a[h+b]=a[c+b]}}else {if(h>c){for(b=l;b--;){a[h+b]=a[c+b]}}}if(e&&f===j){a.length=j;a.push.apply(a,d)}else {a.length=j+e;for(b=0;b<e;++b){a[f+b]=d[b]}}}return a},k=function(a,c,d,b){if(b&&b.length){if(c===0&&!d){a.unshift.apply(a,b)}else {if(c<a.length){a.splice.apply(a,[c,d].concat(b))}else {a.push.apply(a,b)}}}else {a.splice(c,d)}return a},o=function(b,c,a){return e(b,c,a)},m=function(a,c,b){a.splice(c,b);return a},n=function(a,h,c){var i=arguments.length,d=g(a,h),f;if(i<3){c=a.length-d}f=a.slice(h,g(a,d+c));if(i<4){e(a,d,c)}else {e(a,d,c,b.call(arguments,3))}return f},l=function(a){return a.splice.apply(a,b.call(arguments,1))},d=f?m:o,j=f?k:e,p=f?l:n,a={binarySearch:function(h,i,c,b,d){var g=h.length,e,f;if(c instanceof Function){d=c;c=0;b=g}else {if(b instanceof Function){d=b;b=g}else {if(c===undefined){c=0}if(b===undefined){b=g}d=d||a.lexicalCompare}}--b;while(c<=b){e=c+b>>1;f=d(i,h[e]);if(f>=0){c=e+1}else {if(f<0){b=e-1}}}return c},defaultCompare:function(a,b){return a<b?-1:a>b?1:0},lexicalCompare:function(a,b){a=String(a);b=String(b);return a<b?-1:a>b?1:0},each:function(c,f,e,g){var b,d;c=a.from(c);d=c.length;if(g!==!0){for(b=0;b<d;b++){if(f.call(e||c[b],c[b],b,c)===!1){return b}}}else {for(b=d-1;b>-1;b--){if(f.call(e||c[b],c[b],b,c)===!1){return b}}}return !0},findInsertionIndex:function(e,d,c,b){var h=d.length,f,g;c=c||a.lexicalCompare;if(0<=b&&b<h){f=b>0?c(e,d[b-1]):0;g=b<h?c(e,d[b]):0;if(0<=f&&g<1){return b}}return a.binarySearch(d,e,c)},forEach:'forEach' in c?function(a,c,b){a.forEach(c,b)}:function(b,e,d){var a,c;for(a=0,c=b.length;a<c;a++){e.call(d,b[a],a,b)}},indexOf:i?function(a,d,b){return a?c.indexOf.call(a,d,b):-1}:function(b,e,c){var a,d=b?b.length:0;for(a=c<0?Math.max(0,d+c):c||0;a<d;a++){if(b[a]===e){return a}}return -1},contains:i?function(a,b){return c.indexOf.call(a,b)!==-1}:function(b,d){var a,c;for(a=0,c=b.length;a<c;a++){if(b[a]===d){return !0}}return !1},toArray:function(a,d,c){var f=[],e;if(!a||!a.length){return f}if(typeof a==='string'){a=a.split('')}if(h){return b.call(a,d||0,c||a.length)}d=d||0;c=c?c<0?a.length+c:c:a.length;for(e=d;e<c;e++){f.push(a[e])}return f},pluck:function(b,f){var d=[],a,e,c;for(a=0,e=b.length;a<e;a++){c=b[a];d.push(c[f])}return d},map:'map' in c?function(a,c,b){return a.map(c,b)}:function(b,f,e){var d=b.length,c=new Array(d),a;for(a=0;a<d;a++){c[a]=f.call(e,b[a],a,b)}return c},every:'every' in c?function(a,c,b){return a.every(c,b)}:function(b,e,d){var a,c;for(a=0,c=b.length;a<c;++a){if(!e.call(d,b[a],a,b)){return !1}}return !0},some:'some' in c?function(a,c,b){return a.some(c,b)}:function(b,e,d){var a,c;for(a=0,c=b.length;a<c;++a){if(e.call(d,b[a],a,b)){return !0}}return !1},equals:function(b,c){var d=b.length,e=c.length,a;if(b===c){return !0}if(d!==e){return !1}for(a=0;a<d;++a){if(b[a]!==c[a]){return !1}}return !0},clean:function(d){var c=[],a,e,b;for(a=0,e=d.length;a<e;a++){b=d[a];if(!Ext.isEmpty(b)){c.push(b)}}return c},unique:function(e){var c=[],b,f,d;for(b=0,f=e.length;b<f;b++){d=e[b];if(a.indexOf(c,d)===-1){c.push(d)}}return c},filter:'filter' in c?function(a,c,b){return a.filter(c,b)}:function(b,f,e){var c=[],a,d;for(a=0,d=b.length;a<d;a++){if(f.call(e,b[a],a,b)){c.push(b[a])}}return c},findBy:function(b,e,d){var a,c;for(a=0,c=b.length;a<c;a++){if(e.call(d||b,b[a],a)){return b[a]}}return null},from:function(c,e){var d;if(c===undefined||c===null){return []}if(Ext.isArray(c)){return e?b.call(c):c}d=typeof c;if(c&&c.length!==undefined&&d!=='string'&&(d!=='function'||!c.apply)){return a.toArray(c)}return [c]},remove:function(b,e){var c=a.indexOf(b,e);if(c!==-1){d(b,c,1)}return b},removeAt:function(c,b,a){var e=c.length;if(b>=0&&b<e){a=a||1;a=Math.min(a,e-b);d(c,b,a)}return c},include:function(b,c){if(!a.contains(b,c)){b.push(c)}},clone:function(a){return b.call(a)},merge:function(){var e=b.call(arguments),d=[],c,f;for(c=0,f=e.length;c<f;c++){d=d.concat(e[c])}return a.unique(d)},intersect:function(){var m=[],f=b.call(arguments),g,o,r,e,k,j,q,n,p,l,c,h,i;if(!f.length){return m}g=f.length;for(c=k=0;c<g;c++){j=f[c];if(!e||j.length<e.length){e=j;k=c}}e=a.unique(e);d(f,k,1);q=e.length;g=f.length;for(c=0;c<q;c++){n=e[c];l=0;for(h=0;h<g;h++){o=f[h];r=o.length;for(i=0;i<r;i++){p=o[i];if(n===p){l++;break}}}if(l===g){m.push(n)}}return m},difference:function(i,f){var c=b.call(i),h=c.length,e,a,g;for(e=0,g=f.length;e<g;e++){for(a=0;a<h;a++){if(c[a]===f[e]){d(c,a,1);a--;h--}}}return c},reduce:Array.prototype.reduce?function(b,a,c){if(arguments.length===3){return Array.prototype.reduce.call(b,a,c)}return Array.prototype.reduce.call(b,a)}:function(a,f,e){a=Object(a);var b=0,d=a.length>>>0,c=e;if(arguments.length<3){while(!0){if(b in a){c=a[b++];break}if(++b>=d){throw new TypeError('Reduce of empty array with no initial value')}}}for(;b<d;++b){if(b in a){c=f(c,a[b],b,a)}}return c},slice:[1,2].slice(1,undefined).length?function(a,c,d){return b.call(a,c,d)}:function(a,c,d){if(typeof c==='undefined'){return b.call(a)}if(typeof d==='undefined'){return b.call(a,c)}return b.call(a,c,d)},sort:function(c,b){return stableSort(c,b||a.lexicalCompare)},flatten:function(b){var a=[];function rFlatten(f){var c,e,d;for(c=0,e=f.length;c<e;c++){d=f[c];if(Ext.isArray(d)){rFlatten(d)}else {a.push(d)}}return a}return rFlatten(b)},min:function(d,e){var b=d[0],c,f,a;for(c=0,f=d.length;c<f;c++){a=d[c];if(e){if(e(b,a)===1){b=a}}else {if(a<b){b=a}}}return b},max:function(d,e){var b=d[0],c,f,a;for(c=0,f=d.length;c<f;c++){a=d[c];if(e){if(e(b,a)===-1){b=a}}else {if(a>b){b=a}}}return b},mean:function(b){return b.length>0?a.sum(b)/b.length:undefined},sum:function(b){var d=0,a,e,c;for(a=0,e=b.length;a<e;a++){c=b[a];d+=c}return d},toMap:function(b,d,e){var c,a;if(!b){return null}c={};a=b.length;if(typeof b==='string'){c[b]=1}else {if(!d){while(a--){c[b[a]]=a+1}}else {if(typeof d==='string'){while(a--){c[b[a][d]]=a+1}}else {while(a--){c[d.call(e,b[a])]=a+1}}}}return c},toValueMap:function(g,d,k,f){var b={},e=g.length,j,i,h,l,c,a;if(!d){while(e--){a=g[e];b[a]=a}}else {if(!(l=typeof d!=='string')){f=k}i=f===1;j=f===2;while(e--){a=g[e];c=l?d.call(k,a):a[d];if(i){if(c in b){b[c].push(a)}else {b[c]=[a]}}else {if(j&&c in b){if((h=b[c]) instanceof Array){h.push(a)}else {b[c]=[h,a]}}else {b[c]=a}}}}return b},erase:d,insert:function(a,b,c){return j(a,b,0,c)},move:function(c,b,d){if(d===b){return}var f=c[b],e=d>b?1:-1,a;for(a=b;a!==d;a+=e){c[a]=c[a+e]}c[d]=f},replace:j,splice:p,push:function(a){var d=arguments,e=d.length,b,c;if(a===undefined){a=[]}else {if(!Ext.isArray(a)){a=[a]}}for(b=1;b<e;b++){c=d[b];Array.prototype.push[Ext.isIterable(c)?'apply':'call'](a,c)}return a},numericSortFn:function(a,b){return a-b}};Ext.each=a.each;a.union=a.merge;Ext.min=a.min;Ext.max=a.max;Ext.sum=a.sum;Ext.mean=a.mean;Ext.flatten=a.flatten;Ext.clean=a.clean;Ext.unique=a.unique;Ext.pluck=a.pluck;Ext.toArray=function(){return a.toArray.apply(a,arguments)};return a}();Ext.String=function(){var n=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,o=/('|\\)/g,i=/([-.*+?\^${}()|\[\]\/\\])/g,l=/^\s+|\s+$/g,k=/\s+/,m=/(^[^a-z]*|[^\w])/gi,c,a,b,d,h=function(b,a){return c[a]},g=function(c,b){return b in a?a[b]:String.fromCharCode(parseInt(b.substr(2),10))},e=function(b,a){if(b===null||b===undefined||a===null||a===undefined){return !1}return a.length<=b.length},j=String.fromCharCode,f;return f={fromCodePoint:String.fromCodePoint||function(){var a,e='',b=[],c=-1,d=arguments.length;while(++c<d){a=Number(arguments[c]);if(!isFinite(a)||a<0||a>1114111||Math.floor(a)!==a){Ext.raise('Invalid code point: '+a)}if(a<=65535){b.push(a)}else {a-=65536;b.push((a>>10)+55296,a%1024+56320)}if(c+1===d){e+=j(b);b.length=0}}return e},insert:function(b,c,a){var d;if(!b){return c}if(!c){return b}d=b.length;if(!a&&a!==0){a=d}if(a<0){a*=-1;if(a>=d){a=0}else {a=d-a}}if(a===0){b=c+b}else {if(a>=b.length){b+=c}else {b=b.substr(0,a)+c+b.substr(a)}}return b},startsWith:function(b,a,d){var c=e(b,a);if(c){if(d){b=b.toLowerCase();a=a.toLowerCase()}c=b.lastIndexOf(a,0)===0}return c},endsWith:function(b,a,d){var c=e(b,a);if(c){if(d){b=b.toLowerCase();a=a.toLowerCase()}c=b.indexOf(a,b.length-a.length)!==-1}return c},createVarName:function(a){return a.replace(m,'')},htmlEncode:function(a){return !a?a:String(a).replace(b,h)},htmlDecode:function(a){return !a?a:String(a).replace(d,g)},hasHtmlCharacters:function(a){return b.test(a)},addCharacterEntities:function(g){var i=[],h=[],e,f;for(e in g){f=g[e];a[e]=f;c[f]=e;i.push(f);h.push(e)}b=new RegExp('('+i.join('|')+')','g');d=new RegExp('('+h.join('|')+'|&#[0-9]{1,5};'+')','g')},resetCharacterEntities:function(){c={};a={};this.addCharacterEntities({'&amp;':'&','&gt;':'>','&lt;':'<','&quot;':'"','&#39;':"'"})},urlAppend:function(a,b){if(!Ext.isEmpty(b)){return a+(a.indexOf('?')===-1?'?':'&')+b}return a},trim:function(a){if(a){a=a.replace(n,'')}return a||''},capitalize:function(a){if(a){a=a.charAt(0).toUpperCase()+a.substr(1)}return a||''},uncapitalize:function(a){if(a){a=a.charAt(0).toLowerCase()+a.substr(1)}return a||''},ellipsis:function(b,c,e){var a,d;if(b&&b.length>c){if(e){a=b.substr(0,c-2);d=Math.max(a.lastIndexOf(' '),a.lastIndexOf('.'),a.lastIndexOf('!'),a.lastIndexOf('?'));if(d!==-1&&d>=c-15){return a.substr(0,d)+'...'}}return b.substr(0,c-3)+'...'}return b},escapeRegex:function(a){return a.replace(i,'\\$1')},createRegex:function(b,d,e,c){var a=b;if(b!=null&&!b.exec){a=f.escapeRegex(String(b));if(d!==!1){a='^'+a}if(e!==!1){a+='$'}a=new RegExp(a,c!==!1?'i':'')}return a},escape:function(a){return a.replace(o,'\\$1')},toggle:function(b,a,c){return b===a?c:a},leftPad:function(c,d,b){var a=String(c);b=b||' ';while(a.length<d){a=b+a}return a},repeat:function(d,a,e){var b=[],c;if(a<1){a=0}for(c=a;c--;){b.push(d)}return b.join(e||'')},splitWords:function(a){if(a&&typeof a==='string'){return a.replace(l,'').split(k)}return a||[]}}}();Ext.String.resetCharacterEntities();Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;Ext.Date=function(){var a,b=Date,e=/(\\.)/g,k=/([gGhHisucUOPZ]|MS)/,j=/([djzmnYycU]|MS)/,m=/\\/gi,g=/\{(\d+)\}/g,i=new RegExp('\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/'),h=/^(?:(\d{1,4})|(\w{3,}))[/\-.\\\s](?:(\d{1,2})|(\w{3,}))[/\-.\\\s](\d{1,4})$/,c=Ext.String.leftPad,l={d:!0,j:!0},f={F:!0,m:!0,M:!0,n:!0},d={o:!0,Y:!0,y:!0},n=['var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,','def = me.defaults,','from = Ext.Number.from,','results = String(input).match(me.parseRegexes[{0}]);','if(results){','{1}','if(u != null){','v = new Date(u * 1000);','}else{','dt = me.clearTime(new Date);','y = from(y, from(def.y, dt.getFullYear()));','m = from(m, from(def.m - 1, dt.getMonth()));','dayMatched = d !== undefined;','d = from(d, from(def.d, dt.getDate()));','if (!dayMatched) {','dt.setDate(1);','dt.setMonth(m);','dt.setFullYear(y);','daysInMonth = me.getDaysInMonth(dt);','if (d > daysInMonth) {','d = daysInMonth;','}','}','h  = from(h, from(def.h, dt.getHours()));','i  = from(i, from(def.i, dt.getMinutes()));','s  = from(s, from(def.s, dt.getSeconds()));','ms = from(ms, from(def.ms, dt.getMilliseconds()));','if(z >= 0 && y >= 0){','v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);','v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);','}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){','v = null;','}else{','if (W) {','year = y || (new Date()).getFullYear();','jan4 = new Date(year, 0, 4, 0, 0, 0);','d = jan4.getDay();','week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));','v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));','} else {','v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);','}','}','}','}','if(v){','if(zz != null){','v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);','}else if(o){',"v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));",'}','}','return (v != null) ? v : null;'].join('\n');if(!Date.prototype.toISOString){Date.prototype.toISOString=function(){var a=this;return c(a.getUTCFullYear(),4,'0')+'-'+c(a.getUTCMonth()+1,2,'0')+'-'+c(a.getUTCDate(),2,'0')+'T'+c(a.getUTCHours(),2,'0')+':'+c(a.getUTCMinutes(),2,'0')+':'+c(a.getUTCSeconds(),2,'0')+'.'+c(a.getUTCMilliseconds(),3,'0')+'Z'}}function xf(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(g,function(d,c){return b[c]})}a={now:b.now,toString:function(a){if(!a){a=new b()}return a.getFullYear()+'-'+c(a.getMonth()+1,2,'0')+'-'+c(a.getDate(),2,'0')+'T'+c(a.getHours(),2,'0')+':'+c(a.getMinutes(),2,'0')+':'+c(a.getSeconds(),2,'0')},getElapsed:function(b,c){return Math.abs(b-(c||a.now()))},useStrict:!1,formatCodeToRegex:function(c,d){var b=a.parseCodes[c];if(b){b=typeof b==='function'?b():b;a.parseCodes[c]=b}return b?Ext.applyIf({c:b.c?xf(b.c,d||'{0}'):b.c},b):{g:0,c:null,s:Ext.String.escapeRegex(c)}},parseFunctions:{'MS':function(c,d){var a=(c||'').match(i);return a?new b(((a[1]||'')+a[2])*1):null},'time':function(c,d){var a=parseInt(c,10);if(a||a===0){return new b(a)}return null},'timestamp':function(c,d){var a=parseInt(c,10);if(a||a===0){return new b(a*1000)}return null}},parseRegexes:[],formatFunctions:{'MS':function(){return '\\/Date('+this.getTime()+')\\/'},'time':function(){return this.getTime().toString()},'timestamp':function(){return a.format(this,'U')}},y2kYear:50,MILLI:'ms',SECOND:'s',MINUTE:'mi',HOUR:'h',DAY:'d',MONTH:'mo',YEAR:'y',DAYS_IN_WEEK:7,MONTHS_IN_YEAR:12,MAX_DAYS_IN_MONTH:31,SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,defaults:{},dayNames:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],monthNames:['January','February','March','April','May','June','July','August','September','October','November','December'],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:'m/d/Y',defaultTimeFormat:'h:i A',firstDayOfWeek:0,weekendDays:[0,6],getShortMonthName:function(b){return a.monthNames[b].substring(0,3)},getShortDayName:function(b){return a.dayNames[b].substring(0,3)},getMonthNumber:function(b){return a.monthNumbers[b.substring(0,1).toUpperCase()+b.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(a){return k.test(a.replace(e,''))},formatContainsDateInfo:function(a){return j.test(a.replace(e,''))},isMonthFormat:function(a){return !!f[a]},isYearFormat:function(a){return !!d[a]},unescapeFormat:function(a){return a.replace(m,'')},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:'Ext.Date.getShortDayName(m.getDay())',j:'m.getDate()',l:'Ext.Date.dayNames[m.getDay()]',N:'(m.getDay() ? m.getDay() : 7)',S:'Ext.Date.getSuffix(m)',w:'m.getDay()',z:'Ext.Date.getDayOfYear(m)',W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:'Ext.Date.monthNames[m.getMonth()]',m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:'Ext.Date.getShortMonthName(m.getMonth())',n:'(m.getMonth() + 1)',t:'Ext.Date.getDaysInMonth(m)',L:'(Ext.Date.isLeapYear(m) ? 1 : 0)',o:'(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))',Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:'((m.getHours() % 12) ? m.getHours() % 12 : 12)',G:'m.getHours()',h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:'Ext.Date.getGMTOffset(m)',P:'Ext.Date.getGMTOffset(m, true)',T:'Ext.Date.getTimezone(m)',Z:'(m.getTimezoneOffset() * -60)',c:function(){var e='Y-m-dTH:i:sP',d=[],f=e.length,b,c;for(b=0;b<f;++b){c=e.charAt(b);d.push(c==='T'?"'T'":a.getFormatCode(c))}return d.join(' + ')},C:function(){return 'm.toISOString()'},U:'Math.round(m.getTime() / 1000)'},isValid:function(d,i,j,h,f,g,e){var c;h=h||0;f=f||0;g=g||0;e=e||0;c=a.add(new b(d<100?100:d,i-1,j,h,f,g,e),a.YEAR,d<100?d-100:0);return d===c.getFullYear()&&i===c.getMonth()+1&&j===c.getDate()&&h===c.getHours()&&f===c.getMinutes()&&g===c.getSeconds()&&e===c.getMilliseconds()},parse:function(e,b,d){var c;if(!b){return a.flexParse(e)}c=a.parseFunctions;if(c[b]==null){a.createParser(b)}return c[b].call(a,e,Ext.isDefined(d)?d:a.useStrict)},parseDate:function(d,b,c){return a.parse(d,b,c)},getFormatCode:function(c){var b=a.formatCodes[c];if(b){b=typeof b==='function'?b():b;a.formatCodes[c]=b}return b||"'"+Ext.String.escape(c)+"'"},createFormat:function(f){var d=[],c=!1,b='',e;for(e=0;e<f.length;++e){b=f.charAt(e);if(!c&&b==='\\'){c=!0}else {if(c){c=!1;d.push("'"+Ext.String.escape(b)+"'")}else {if(b==='\n'){d.push("'\\n'")}else {d.push(a.getFormatCode(b))}}}}a.formatFunctions[f]=Ext.functionFactory('var m = this; return '+d.join('+'))},createParser:function(f){var j=a.parseRegexes.length,i=1,d=[],g=[],c=!1,e='',h=0,l=f.length,k=[],b;for(;h<l;++h){e=f.charAt(h);if(!c&&e==='\\'){c=!0}else {if(c){c=!1;g.push(Ext.String.escape(e))}else {b=a.formatCodeToRegex(e,i);i+=b.g;g.push(b.s);if(b.g&&b.c){if(b.calcAtEnd){k.push(b.c)}else {d.push(b.c)}}}}}d=d.concat(k);a.parseRegexes[j]=new RegExp('^'+g.join('')+'$','i');a.parseFunctions[f]=Ext.functionFactory('input','strict',xf(n,j,d.join('')))},parseCodes:{d:{g:1,c:'d = parseInt(results[{0}], 10);\n',s:'(3[0-1]|[1-2][0-9]|0[1-9])'},j:{g:1,c:'d = parseInt(results[{0}], 10);\n',s:'(3[0-1]|[1-2][0-9]|[1-9])'},D:function(){var c=[],b;for(b=0;b<7;b++){c.push(a.getShortDayName(b))}return {g:0,c:null,s:'(?:'+c.join('|')+')'}},l:function(){return {g:0,c:null,s:'(?:'+a.dayNames.join('|')+')'}},N:{g:0,c:null,s:'[1-7]'},S:{g:0,c:null,s:'(?:st|nd|rd|th)'},w:{g:0,c:null,s:'[0-6]'},z:{g:1,c:'z = parseInt(results[{0}], 10);\n',s:'(\\d{1,3})'},W:{g:1,c:'W = parseInt(results[{0}], 10);\n',s:'(\\d{2})'},F:function(){return {g:1,c:'m = parseInt(me.getMonthNumber(results[{0}]), 10);\n',s:'('+a.monthNames.join('|')+')'}},M:function(){var c=[],b;for(b=0;b<12;b++){c.push(a.getShortMonthName(b))}return Ext.applyIf({s:'('+c.join('|')+')'},a.formatCodeToRegex('F'))},m:{g:1,c:'m = parseInt(results[{0}], 10) - 1;\n',s:'(1[0-2]|0[1-9])'},n:{g:1,c:'m = parseInt(results[{0}], 10) - 1;\n',s:'(1[0-2]|[1-9])'},t:{g:0,c:null,s:'(?:\\d{2})'},L:{g:0,c:null,s:'(?:1|0)'},o:{g:1,c:'y = parseInt(results[{0}], 10);\n',s:'(\\d{4})'},Y:{g:1,c:'y = parseInt(results[{0}], 10);\n',s:'(\\d{4})'},y:{g:1,c:'var ty = parseInt(results[{0}], 10);\n'+'y = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n',s:'(\\d{2})'},a:{g:1,c:'if (/(am)/i.test(results[{0}])) {\n'+'if (!h || h == 12) { h = 0; }\n'+'} else { if (!h || h < 12) { h = (h || 0) + 12; }}',s:'(am|pm|AM|PM)',calcAtEnd:!0},A:{g:1,c:'if (/(am)/i.test(results[{0}])) {\n'+'if (!h || h == 12) { h = 0; }\n'+'} else { if (!h || h < 12) { h = (h || 0) + 12; }}',s:'(AM|PM|am|pm)',calcAtEnd:!0},g:{g:1,c:'h = parseInt(results[{0}], 10);\n',s:'(1[0-2]|[1-9])'},G:{g:1,c:'h = parseInt(results[{0}], 10);\n',s:'(2[0-3]|1[0-9]|[0-9])'},h:{g:1,c:'h = parseInt(results[{0}], 10);\n',s:'(1[0-2]|0[1-9])'},H:{g:1,c:'h = parseInt(results[{0}], 10);\n',s:'(2[0-3]|[0-1][0-9])'},i:{g:1,c:'i = parseInt(results[{0}], 10);\n',s:'([0-5][0-9])'},s:{g:1,c:'s = parseInt(results[{0}], 10);\n',s:'([0-5][0-9])'},u:{g:1,c:'ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n',s:'(\\d+)'},O:{g:1,c:['o = results[{0}];','var sn = o.substring(0,1),','hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),','mn = o.substring(3,5) % 60;',"o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join('\n'),s:'([+-]\\d{4})'},P:{g:1,c:['o = results[{0}];','var sn = o.substring(0,1),','hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),','mn = o.substring(4,6) % 60;',"o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join('\n'),s:'([+-]\\d{2}:\\d{2})'},T:{g:0,c:null,s:'[A-Z]{1,5}'},Z:{g:1,c:'zz = results[{0}] * 1;\n'+'zz = (-43200 <= zz && zz <= 50400)? zz : null;\n',s:'([+-]?\\d{1,5})'},c:function(){var d=[],b=[a.formatCodeToRegex('Y',1),a.formatCodeToRegex('m',2),a.formatCodeToRegex('d',3),a.formatCodeToRegex('H',4),a.formatCodeToRegex('i',5),a.formatCodeToRegex('s',6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:['if (results[8]) {',"if (results[8] == 'Z') {",'zz = 0;','}',"else if (results[8].indexOf(':') > -1) {",a.formatCodeToRegex('P',8).c,'}','else {',a.formatCodeToRegex('O',8).c,'}','}'].join('\n')}],c,e;for(c=0,e=b.length;c<e;++c){d.push(b[c].c)}return {g:1,c:d.join(''),s:[b[0].s,'(?:','-',b[1].s,'(?:','-',b[2].s,'(?:','(?:T| )?',b[3].s,':',b[4].s,'(?::',b[5].s,')?','(?:(?:\\.|,)(\\d+))?','(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?',')?',')?',')?'].join('')}},U:{g:1,c:'u = parseInt(results[{0}], 10);\n',s:'(-?\\d+)'}},compare:function(c,d,e){var a,b;if(typeof c==='string'){c=Ext.Date.parse(c)}if(typeof d==='string'){d=Ext.Date.parse(d)}a=Ext.Date.format(c,'C');b=Ext.Date.format(d,'C');if(!e){a=a.substr(0,10);b=b.substr(0,10)}return a<b?-1:b<a?1:0},dateFormat:function(c,b){return a.format(c,b)},isEqual:function(a,b){if(a&&b){return +a===+b}return !(a||b)},format:function(d,b){var c=a.formatFunctions;if(!Ext.isDate(d)){return ''}if(c[b]==null){a.createFormat(b)}return c[b].call(d)+''},getTimezone:function(a){return a.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,'$1$2').replace(/[^A-Z]/g,'')},getGMTOffset:function(c,b){var a=c.getTimezoneOffset();return (a>0?'-':'+')+Ext.String.leftPad(Math.floor(Math.abs(a)/60),2,'0')+(b?':':'')+Ext.String.leftPad(Math.abs(a%60),2,'0')},getDayOfYear:function(c){var e=0,b=a.clone(c),f=c.getMonth(),d;for(d=0,b.setDate(1),b.setMonth(0);d<f;b.setMonth(++d)){e+=a.getDaysInMonth(b)}return e+c.getDate()-1},getWeekOfYear:function(){var a=86400000,c=7*a;return function(d){var f=b.UTC(d.getFullYear(),d.getMonth(),d.getDate()+3)/a,e=Math.floor(f/7),g=(new b(e*c)).getUTCFullYear();return e-Math.floor(b.UTC(g,0,7)/c)+1}}(),isLeapYear:function(b){var a=b.getFullYear();return !!((a&3)===0&&(a%100||a%400===0&&a))},getFirstDayOfMonth:function(b){var a=(b.getDay()-(b.getDate()-1))%7;return a<0?a+7:a},getLastDayOfMonth:function(b){return a.getLastDateOfMonth(b).getDay()},getFirstDateOfMonth:function(a){return new b(a.getFullYear(),a.getMonth(),1)},getLastDateOfMonth:function(c){return new b(c.getFullYear(),c.getMonth(),a.getDaysInMonth(c))},getDaysInMonth:function(){var b=[31,28,31,30,31,30,31,31,30,31,30,31];return function(c){var d=c.getMonth();return d===1&&a.isLeapYear(c)?29:b[d]}}(),getSuffix:function(a){switch(a.getDate()){case 1:case 21:case 31:return 'st';case 2:case 22:return 'nd';case 3:case 23:return 'rd';default:return 'th';}},clone:function(a){return new b(a.getTime())},isDST:function(a){return (new b(a.getFullYear(),0,1)).getTimezoneOffset()!==a.getTimezoneOffset()},clearTime:function(b,f){var e,c,d;if(isNaN(b.getTime())){return b}if(f){return a.clearTime(a.clone(b))}e=b.getDate();b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);if(b.getDate()!==e){for(c=1,d=a.add(b,a.HOUR,c);d.getDate()!==e;c++,d=a.add(b,a.HOUR,c)){}b.setDate(e);b.setHours(d.getHours())}return b},add:function(f,i,c,g){var b=a.clone(f),e=0,d,h;if(!i||c===0){return b}h=c-parseInt(c,10);c=parseInt(c,10);if(c){switch(i.toLowerCase()){case a.MILLI:if(g){b.setMilliseconds(b.getMilliseconds()+c)}else {b.setTime(b.getTime()+c)};break;case a.SECOND:if(g){b.setSeconds(b.getSeconds()+c)}else {b.setTime(b.getTime()+c*1000)};break;case a.MINUTE:if(g){b.setMinutes(b.getMinutes()+c)}else {b.setTime(b.getTime()+c*60*1000)};break;case a.HOUR:if(g){b.setHours(b.getHours()+c)}else {b.setTime(b.getTime()+c*60*60*1000)};break;case a.DAY:if(g===!1){b.setTime(b.getTime()+c*24*60*60*1000)}else {b.setDate(b.getDate()+c)};break;case a.MONTH:d=f.getDate();if(d>28){d=Math.min(d,a.getLastDateOfMonth(a.add(a.getFirstDateOfMonth(f),a.MONTH,c)).getDate())};b.setDate(d);b.setMonth(f.getMonth()+c);break;case a.YEAR:d=f.getDate();if(d>28){d=Math.min(d,a.getLastDateOfMonth(a.add(a.getFirstDateOfMonth(f),a.YEAR,c)).getDate())};b.setDate(d);b.setFullYear(f.getFullYear()+c);break;}}if(h){switch(i.toLowerCase()){case a.MILLI:e=1;break;case a.SECOND:e=1000;break;case a.MINUTE:e=1000*60;break;case a.HOUR:e=1000*60*60;break;case a.DAY:e=1000*60*60*24;break;case a.MONTH:d=a.getDaysInMonth(b);e=1000*60*60*24*d;break;case a.YEAR:d=a.isLeapYear(b)?366:365;e=1000*60*60*24*d;break;}if(e){b.setTime(b.getTime()+e*h)}}return b},subtract:function(e,c,d,b){return a.add(e,c,-d,b)},between:function(c,b,d){var a=c.getTime();return b.getTime()<=a&&a<=d.getTime()},isWeekend:function(a){return Ext.Array.indexOf(this.weekendDays,a.getDay())>-1},utcToLocal:function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())},localToUtc:function(b){return a.utc(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds())},utc:function(c,a,d,b,e,g,f){return new Date(Date.UTC(c,a,d,b||0,e||0,g||0,f||0))},compat:function(){var c,g=['useStrict','formatCodeToRegex','parseFunctions','parseRegexes','formatFunctions','y2kYear','MILLI','SECOND','MINUTE','HOUR','DAY','MONTH','YEAR','defaults','dayNames','monthNames','monthNumbers','getShortMonthName','getShortDayName','getMonthNumber','formatCodes','isValid','parseDate','getFormatCode','createFormat','createParser','parseCodes'],h=['dateFormat','format','getTimezone','getGMTOffset','getDayOfYear','getWeekOfYear','isLeapYear','getFirstDayOfMonth','getLastDayOfMonth','getDaysInMonth','getSuffix','clone','isDST','clearTime','add','between'],j=g.length,i=h.length,f,e,d;for(d=0;d<j;d++){f=g[d];b[f]=a[f]}for(c=0;c<i;c++){e=h[c];b.prototype[e]=function(){var b=Array.prototype.slice.call(arguments);b.unshift(this);return a[e].apply(a,b)}}},diff:function(e,d,f){var c=+d-e,b;switch(f){case a.MILLI:return c;case a.SECOND:return Math.floor(c/1000);case a.MINUTE:return Math.floor(c/60000);case a.HOUR:return Math.floor(c/3600000);case a.DAY:return Math.floor(c/86400000);case 'w':return Math.floor(c/604800000);case a.MONTH:b=d.getFullYear()*12+d.getMonth()-(e.getFullYear()*12+e.getMonth());if(a.add(e,f,b)>d){return b-1};return b;case a.YEAR:b=d.getFullYear()-e.getFullYear();if(a.add(e,f,b)>d){return b-1}else {return b};}},align:function(e,f,d){var c=new b(+e);switch(f.toLowerCase()){case a.MILLI:return c;case a.SECOND:c.setUTCSeconds(c.getUTCSeconds()-c.getUTCSeconds()%d);c.setUTCMilliseconds(0);return c;case a.MINUTE:c.setUTCMinutes(c.getUTCMinutes()-c.getUTCMinutes()%d);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return c;case a.HOUR:c.setUTCHours(c.getUTCHours()-c.getUTCHours()%d);c.setUTCMinutes(0);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return c;case a.DAY:if(d===7||d===14){c.setUTCDate(c.getUTCDate()-c.getUTCDay()+1)};c.setUTCHours(0);c.setUTCMinutes(0);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return c;case a.MONTH:c.setUTCMonth(c.getUTCMonth()-(c.getUTCMonth()-1)%d,1);c.setUTCHours(0);c.setUTCMinutes(0);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return c;case a.YEAR:c.setUTCFullYear(c.getUTCFullYear()-c.getUTCFullYear()%d,1,1);c.setUTCHours(0);c.setUTCMinutes(0);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return e;}},flexParse:function(m,k){var b=h.exec(m),i,g,c,e,j;if(!b){return Ext.Date.parse(m,'C')}if(!k){k=Ext.Date.defaultFormat}if(!(b[2]||b[4])){i=k[0];if(!d[i]&&(l[i]||b[1]>12&&b[3]<13)){g=parseInt(b[1]);c=parseInt(b[3])-1;e=parseInt(b[5])}else {if(!d[i]&&(f[i]||b[3]>12&&b[1]<13)){c=parseInt(b[1])-1;g=parseInt(b[3]);e=parseInt(b[5])}else {e=parseInt(b[1]);c=parseInt(b[3])-1;g=parseInt(b[5])}}}else {if(b[2]&&b[4]){return null}if(b[2]){c=a.monthNumbers[Ext.String.capitalize(b[2].substr(0,3))];g=parseInt(b[3]);e=parseInt(b[5])}else {g=parseInt(b[1]);c=a.monthNumbers[Ext.String.capitalize(b[4].substr(0,3))];e=parseInt(b[5])}}if(isNaN(c)||(c<0||c>11)){return null}if(e<a.y2kYear){e+=2000}j=new Date(e,c,1,0,0,0);if(g<1||g>Ext.Date.getDaysInMonth(j)){return null}j.setDate(g);return j}};a.parseCodes.C=a.parseCodes.c;return a}();Ext.Function=function(){var i=0,g,d=[],l=[],n=0,f={},b=Array.prototype.slice,e=window,c=Ext.global,h=!Ext.disableImmediate&&!!(c.setImmediate&&c.clearImmediate),k=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||function(d){var b=Ext.now(),a=Math.max(0,16-(b-i)),f=function(){d(b+a)},c;c=e.setTimeout(f,a);i=b+a;return c},m=function(){var h=d.length,e,b,a;g=null;for(b=0;b<h;b++){a=d[b];e=a[3];if(f[e]){delete f[e];a[0].apply(a[1]||c,a[2]||l)}}d=d.slice(h)},j=function(){Ext.elevate(m)},a={flexSetter:function(a){return function(b,e){var c,d;if(b!==null){if(typeof b!=='string'){for(c in b){if(b.hasOwnProperty(c)){a.call(this,c,b[c])}}if(Ext.enumerables){for(d=Ext.enumerables.length;d--;){c=Ext.enumerables[d];if(b.hasOwnProperty(c)){a.call(this,c,b[c])}}}}else {a.call(this,b,e)}}return this}},bind:function(f,e,d,a){if(arguments.length<=2){return f.bind(e)}var g=f;return function(){var h=d||arguments;if(a===!0){h=b.call(arguments,0);h=h.concat(d)}else {if(typeof a==='number'){h=b.call(arguments,0);Ext.Array.insert(h,a,d)}}return g.apply(e||c,h)}},bindCallback:function(c,f,a,e,d){return function(){var g=b.call(arguments);return Ext.callback(c,f,a?a.concat(g):g,e,d)}},pass:function(c,a,b){if(!Ext.isArray(a)){if(Ext.isIterable(a)){a=Ext.Array.clone(a)}else {a=a!==undefined?[a]:[]}}return function(){var d=a.slice();d.push.apply(d,arguments);return c.apply(b||this,d)}},alias:function(a,b){return function(){return a[b].apply(a,arguments)}},clone:function(a){var c,b;c=function(){return a.apply(this,arguments)};for(b in a){if(a.hasOwnProperty(b)){c[b]=a[b]}}return c},createInterceptor:function(b,d,e,a){if(!Ext.isFunction(d)){return b}else {a=Ext.isDefined(a)?a:null;return function(){var g=this,f=arguments;return d.apply(e||g||c,f)!==!1?b.apply(g||c,f):a}}},createDelayed:function(e,g,c,d,f){var a=e;if(c||d){a=Ext.Function.bind(e,c,d,f)}return function(){var k=this,j=b.call(arguments),h,i;h=function(){Ext.elevate(a,k,j)};i=setTimeout(h,g)}},defer:function(h,e,f,g,b){var d=0,c,a;if(!f&&!g&&!b){a=h}else {a=Ext.Function.bind(h,f,g,b)}if(e>0){c=function(){Ext.elevate(a)};d=setTimeout(c,e)}else {a()}return d},interval:function(h,e,f,g,d){var b,c,a;a=Ext.Function.bind(h,f,g,d);b=function(){Ext.elevate(a)};c=setInterval(b,e);return c},createSequence:function(a,b,c){if(!b){return a}else {return function(){var d=a.apply(this,arguments);b.apply(c||this,arguments);return d}}},createBuffered:function(g,d,e,f){var a,c=function(){var i=f||b.call(arguments,0),j=e||this,h;if(a){Ext.undefer(a)}h=function(){Ext.elevate(g,j,i)};c.timer=a=setTimeout(h,d)};return c},createAnimationFrame:function(h,f,g,d){var e,c;d=d||3;e=function(){var i,j=g||b.call(arguments,0);f=f||this;if(d===3&&c){a.cancelAnimationFrame(c)}if(d&1||!c){i=function(){c=e.timerId=null;h.apply(f,j)};c=e.timerId=a.requestAnimationFrame(i)}};return e},requestAnimationFrame:function(i,e,h){var a=++n,c=b.call(arguments,0);c[3]=a;f[a]=1;d.push(c);if(!g){g=k(j)}return a},cancelAnimationFrame:function(a){delete f[a]},createThrottled:function(h,f,d){var e=0,c,b,a,g=function(){h.apply(d,b);e=Ext.now();b=a=null};return function(){if(!d){d=this}c=Ext.now()-e;b=Ext.Array.slice(arguments);if(c>=f){Ext.undefer(a);g()}else {if(!a){a=Ext.defer(g,f-c)}}}},createBarrier:function(b,d,c){var a=function(){if(!--b){d.apply(c,arguments)}};return a},interceptBefore:function(b,a,e,d){var c=b[a]||Ext.emptyFn;return b[a]=function(){var f=e.apply(d||this,arguments);c.apply(this,arguments);return f}},interceptAfter:function(b,a,e,d){var c=b[a]||Ext.emptyFn;return b[a]=function(){c.apply(this,arguments);return e.apply(d||this,arguments)}},interceptAfterOnce:function(d,a,f,e){var b=d[a],c;c=function(){var g;if(b){b.apply(this,arguments)}g=f.apply(e||this,arguments);d[a]=b;d=a=f=e=b=c=null;return g};d[a]=c;return c},makeCallback:function(b,a){return function(){return a[b].apply(a,arguments)}},memoize:function(e,c,a){var b={},d=a&&Ext.isFunction(a);return function(g){var f=d?a.apply(c,arguments):g;if(!(f in b)){b[f]=e.apply(c,arguments)}return b[f]}},toCode:function(a){var b=a?a.toString():'';return b}};Ext.asap=h?function(g,f,b){var c=g,d,e;if(f!=null||b!=null){c=a.bind(g,f,b)}d=function(){Ext.elevate(c)};e=setImmediate(d);return e}:function(g,f,b){var c=g,d,e;if(f!=null||b!=null){c=a.bind(g,f,b)}d=function(){Ext.elevate(c)};e=setTimeout(d,0,!0);return e};Ext.unasap=h?function(a){if(a){clearImmediate(a)}return null}:function(a){return Ext.undefer(a)};Ext.asapCancel=function(a){return Ext.unasap(a)};Ext.defer=a.defer;Ext.undefer=function(a){if(a){clearTimeout(a)}return null};Ext.interval=a.interval;Ext.uninterval=function(a){if(a){clearInterval(a)}return null};Ext.pass=a.pass;Ext.bind=a.bind;Ext.raf=function(){return a.requestAnimationFrame.apply(a,arguments)};Ext.unraf=function(b){a.cancelAnimationFrame(b)};return a}();Ext.Number=new function(){var b=this,d=(0.9).toFixed()!=='1',a=Math,c={count:!1,inclusive:!1,wrap:!0};Number.MIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER||-(a.pow(2,53)-1);Number.MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||a.pow(2,53)-1;Ext.apply(b,{MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,MAX_32BIT_INTEGER:a.pow(2,31)-1,floatRe:/^[-+]?(?:\d+|\d*\.\d*)(?:[Ee][+-]?\d+)?$/,intRe:/^[-+]?\d+(?:[Ee]\+?\d+)?$/,Clip:{DEFAULT:c,COUNT:Ext.applyIf({count:!0},c),INCLUSIVE:Ext.applyIf({inclusive:!0},c),NOWRAP:Ext.applyIf({wrap:!1},c)},parseFloat:function(a){if(a===undefined){a=null}if(a!==null&&typeof a!=='number'){a=String(a);a=b.floatRe.test(a)?+a:null;if(isNaN(a)){a=null}}return a},parseInt:function(a){if(a===undefined){a=null}if(typeof a==='number'){a=Math.floor(a)}else {if(a!==null){a=String(a);a=b.intRe.test(a)?+a:null}}return a},binarySearch:function(e,f,a,b){var c,d;if(a===undefined){a=0}if(b===undefined){b=e.length}--b;while(a<=b){c=a+b>>>1;d=e[c];if(f===d){return c}if(d<f){a=c+1}else {b=c-1}}return a},bisectTuples:function(e,f,g,a,b){var c,d;if(a===undefined){a=0}if(b===undefined){b=e.length}--b;while(a<=b){c=a+b>>>1;d=e[c][g];if(f===d){return c}if(d<f){a=c+1}else {b=c-1}}return a},clipIndices:function(d,b,f){var h=0,i,g,a,e;f=f||c;i=f.wrap;b=b||[];for(e=0;e<2;++e){g=a;a=b[e];if(a==null){a=h}else {if(e&&f.count){a+=g;a=a>d?d:a}else {if(i){a=a<0?d+a:a}if(e&&f.inclusive){++a}a=a<0?0:a>d?d:a}}h=d}b[0]=g;b[1]=a<g?g:a;return b},constrain:function(c,b,a){var d=parseFloat(c);if(b===null){b=c}if(a===null){a=c}return d<b?b:d>a?a:d},snap:function(a,c,e,f){var d;if(a===undefined||a<e){return e||0}if(c){d=a%c;if(d!==0){a-=d;if(d*2>=c){a+=c}else {if(d*2<-c){a-=c}}}}return b.constrain(a,e,f)},snapInRange:function(a,d,c,e){var f;c=c||0;if(a===undefined||a<c){return c}if(d&&(f=(a-c)%d)){a-=f;f*=2;if(f>=d){a+=d}}if(e!==undefined){if(a>(e=b.snapInRange(e,d,c))){a=e}}return a},roundToNearest:function(c,b){b=b||1;return b*a.round(c/b)},roundToPrecision:function(d,c){var b=a.pow(10,c||1);return a.round(d*b)/b},truncateToPrecision:function(d,c){var b=a.pow(10,c||1);return parseInt(d*b,10)/b},sign:a.sign||function(a){a=+a;if(a===0||isNaN(a)){return a}return a>0?1:-1},log10:a.log10||function(b){return a.log(b)*a.LOG10E},isEqual:function(c,d,b){return a.abs(c-d)<b},isFinite:Number.isFinite||function(a){return typeof a==='number'&&isFinite(a)},isInteger:Number.isInteger||function(a){return ~~(a+0)===a},toFixed:d?function(d,b){var c;b=b||0;c=a.pow(10,b);return (a.round(d*c)/c).toFixed(b)}:function(b,a){return b.toFixed(a)},from:function(a,b){if(isFinite(a)){a=parseFloat(a)}return !isNaN(a)?a:b},randomInt:function(b,c){return a.floor(a.random()*(c-b+1)+b)},correctFloat:function(a){return parseFloat(a.toPrecision(14))}});Ext.num=function(){return b.from.apply(this,arguments)}}();(function(){var b=function(){},d=/^\?/,f=/(\[):?([^\]]*)\]/g,e=/^([^\[]+)/,c=/\+/g,a;a=Ext.Object={chain:Object.create||function(c){var a;b.prototype=c;a=new b();b.prototype=null;return a},clear:function(a){var b;for(b in a){delete a[b]}return a},freeze:Object.freeze?function(b,c){var d;if(b&&typeof b==='object'&&!Object.isFrozen(b)){Object.freeze(b);if(c){for(d in b){a.freeze(b[d],c)}}}return b}:Ext.identityFn,toQueryObjects:function(e,c,f){var g=a.toQueryObjects,d=[],b,h;if(Ext.isArray(c)){for(b=0,h=c.length;b<h;b++){if(f){d=d.concat(g(e+'['+b+']',c[b],!0))}else {d.push({name:e,value:c[b]})}}}else {if(Ext.isObject(c)){for(b in c){if(c.hasOwnProperty(b)){if(f){d=d.concat(g(e+'['+b+']',c[b],!0))}else {d.push({name:e,value:c[b]})}}}}else {d.push({name:e,value:c})}}return d},toQueryString:function(g,j){var c=[],h=[],d,e,i,f,b;for(d in g){if(g.hasOwnProperty(d)){c=c.concat(a.toQueryObjects(d,g[d],j))}}for(e=0,i=c.length;e<i;e++){f=c[e];b=f.value;if(Ext.isEmpty(b)){b=''}else {if(Ext.isDate(b)){b=Ext.Date.toString(b)}}h.push(encodeURIComponent(f.name)+'='+encodeURIComponent(String(b)))}return h.join('&')},fromQueryString:function(u,v){var s=u.replace(d,'').split('&'),i={},j,o,a,g,n,t,q,h,l,m,r,k,b,p;for(n=0,t=s.length;n<t;n++){q=s[n];if(q.length>0){o=q.split('=');a=o[0];a=a.replace(c,'%20');a=decodeURIComponent(a);g=o[1];if(g!==undefined){g=g.replace(c,'%20');g=decodeURIComponent(g)}else {g=''}if(!v){if(i.hasOwnProperty(a)){if(!Ext.isArray(i[a])){i[a]=[i[a]]}i[a].push(g)}else {i[a]=g}}else {m=a.match(f);r=a.match(e);a=r[0];k=[];if(m===null){i[a]=g;continue}for(h=0,l=m.length;h<l;h++){b=m[h];b=b.length===2?'':b.substring(1,b.length-1);k.push(b)}k.unshift(a);j=i;for(h=0,l=k.length;h<l;h++){b=k[h];if(h===l-1){if(Ext.isArray(j)&&b===''){j.push(g)}else {j[b]=g}}else {if(j[b]===undefined||typeof j[b]==='string'){p=k[h+1];j[b]=Ext.isNumeric(p)||p===''?[]:{}}j=j[b]}}}}}return i},each:function(a,f,c){var d=Ext.enumerables,e,b;if(a){c=c||a;for(b in a){if(a.hasOwnProperty(b)){if(f.call(c,b,a[b],a)===!1){return}}}if(d){for(e=d.length;e--;){if(a.hasOwnProperty(b=d[e])){if(f.call(c,b,a[b],a)===!1){return}}}}}},eachValue:function(a,f,c){var d=Ext.enumerables,e,b;c=c||a;for(b in a){if(a.hasOwnProperty(b)){if(f.call(c,a[b])===!1){return}}}if(d){for(e=d.length;e--;){if(a.hasOwnProperty(b=d[e])){if(f.call(c,a[b])===!1){return}}}}},merge:function(d){var g=1,h=arguments,k=h.length,j=a.merge,i=Ext.clone,f,c,b,e;for(;g<k;g++){f=h[g];for(c in f){b=f[c];if(b&&b.constructor===Object){e=d[c];if(e&&e.constructor===Object){j(e,b)}else {d[c]=i(b)}}else {d[c]=b}}}return d},mergeIf:function(c){var e=1,g=arguments.length,f=Ext.clone,d,b,a;for(;e<g;e++){d=arguments[e];for(b in d){if(!(b in c)){a=d[b];if(a&&a.constructor===Object){c[b]=f(a)}else {c[b]=a}}}}return c},getAllKeys:function(c){var b=[],a;for(a in c){b.push(a)}return b},getKey:function(b,c){var a;for(a in b){if(b.hasOwnProperty(a)&&b[a]===c){return a}}return null},getValues:function(b){var c=[],a;for(a in b){if(b.hasOwnProperty(a)){c.push(b[a])}}return c},getKeys:typeof Object.keys==='function'?function(a){if(!a){return []}return Object.keys(a)}:function(b){var c=[],a;for(a in b){if(b.hasOwnProperty(a)){c.push(a)}}return c},getSize:function(b){var c=0,a;for(a in b){if(b.hasOwnProperty(a)){c++}}return c},isEmpty:function(a){var b;for(b in a){if(a.hasOwnProperty(b)){return !1}}return !0},equals:function(){var a=function(b,c){var a;for(a in b){if(b.hasOwnProperty(a)){if(b[a]!==c[a]){return !1}}}return !0};return function(b,c){if(b===c){return !0}if(b&&c){return a(b,c)&&a(c,b)}else {if(!b&&!c){return b===c}else {return !1}}}}(),fork:function(c){var d,e,b;if(c&&c.constructor===Object){d=a.chain(c);for(e in c){b=c[e];if(b){if(b.constructor===Object){d[e]=a.fork(b)}else {if(b instanceof Array){d[e]=Ext.Array.clone(b)}}}}}else {d=c}return d},defineProperty:'defineProperty' in Object?Object.defineProperty:function(b,c,a){if(!Object.prototype.__defineGetter__){return}if(a.get){b.__defineGetter__(c,a.get)}if(a.set){b.__defineSetter__(c,a.set)}},classify:function(c){var h=c,e=[],g={},f,b,d;f=function(){var b,a,d;for(a=0,d=e.length;a<d;a++){b=e[a];this[b]=new g[b]()}};for(b in c){if(c.hasOwnProperty(b)){d=c[b];if(d&&d.constructor===Object){e.push(b);g[b]=a.classify(d)}}}f.prototype=h;return f}};Ext.merge=Ext.Object.merge;Ext.mergeIf=Ext.Object.mergeIf})();Ext.apply(Ext,{_namedScopes:{'this':{isThis:1},controller:{isController:1},owner:{isOwner:1},up:{isUp:1},self:{isSelf:1},'self.controller':{isSelf:1,isController:1}},scrollbar:{_size:null,size:function(g){var e=Ext.scrollbar,b=e._size;if(g||!b){var f=document.body,a=document.createElement('div'),c,d;a.style.width=a.style.height='100px';a.style.overflow='scroll';a.style.position='absolute';f.appendChild(a);e._size=b={width:d=a.offsetWidth-a.clientWidth,height:c=a.offsetHeight-a.clientHeight};b.reservedWidth=d?'calc(100% - '+d+'px)':'';b.reservedHeight=c?'calc(100% - '+c+'px)':'';f.removeChild(a)}return b},height:function(a){return Ext.scrollbar.size(a).height},width:function(a){return Ext.scrollbar.size(a).width}},escapeId:function(){var c=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,e=/([\W]{1})/g,a=/^(\d)/g,d=function(b,a){return '\\'+a},b=function(b,a){return '\\00'+a.charCodeAt(0).toString(16)+' '};return function(f){return c.test(f)?f:f.replace(e,d).replace(a,b)}}(),lookUpFn:function(d,c){var b,a;for(a=d.up();a&&!a[c];a=a.up()){b=a.controller;if(b&&b[c]){a=b;break}}return a},callback:function(b,a,e,g,c,f){if(!b){return}var d=a in Ext._namedScopes,h;if(b.charAt){if(b[2]==='.'){a=Ext.lookUpFn(c,b=b.substr(3))}else {if(c){if(d&&d.isUp){a=Ext.lookUpFn(c,b)}else {if(!a||d){a=c.resolveListenerScope(d?a:f)}}}}b=a[b]}else {if(d){a=f||c}else {if(!a){a=c}}}if(b&&Ext.isFunction(b)){a=a||Ext.global;if(g){Ext.defer(b,g,a,e)}else {h=e?b.apply(a,e):b.call(a)}}return h},coerce:function(a,e){var d=Ext.typeOf(a),c=Ext.typeOf(e),b=typeof a==='string';if(d!==c){switch(c){case 'string':return String(a);case 'number':return Number(a);case 'boolean':return b&&(!a||a==='false'||a==='0')?!1:Boolean(a);case 'null':return b&&(!a||a==='null')?null:!1;case 'undefined':return b&&(!a||a==='undefined')?undefined:!1;case 'date':return b&&isNaN(a)?Ext.Date.parse(a,Ext.Date.defaultFormat):Date(Number(a));}}return a},copyTo:function(e,d,a,g){var b,c,f;if(typeof a==='string'){a=a.split(Ext.propertyNameSplitRe)}for(c=0,f=a?a.length:0;c<f;c++){b=a[c];if(g||d.hasOwnProperty(b)){e[b]=d[b]}}return e},copy:function(e,d,a,g){var b,c,f;if(typeof a==='string'){a=a.split(Ext.propertyNameSplitRe)}for(c=0,f=a?a.length:0;c<f;c++){b=a[c];if(d.hasOwnProperty(b)||g&&b in d){e[b]=d[b]}}return e},propertyNameSplitRe:/[,;\s]+/,copyToIf:function(d,f,a){var b,c,e;if(typeof a==='string'){a=a.split(Ext.propertyNameSplitRe)}for(c=0,e=a?a.length:0;c<e;c++){b=a[c];if(d[b]===undefined){d[b]=f[b]}}return d},copyIf:function(d,e,a){var b,c,f;if(typeof a==='string'){a=a.split(Ext.propertyNameSplitRe)}for(c=0,f=a?a.length:0;c<f;c++){b=a[c];if(!(b in d)&&b in e){d[b]=e[b]}}return d},extend:function(){var a=Object.prototype.constructor,b=function(b){var a;for(a in b){if(!b.hasOwnProperty(a)){continue}this[a]=b[a]}};return function(c,d,g){if(Ext.isObject(d)){g=d;d=c;c=g.constructor!==a?g.constructor:function(){d.apply(this,arguments)}}var h=function(){},f=d.prototype,e;h.prototype=f;e=c.prototype=new h();e.constructor=c;c.superclass=f;if(f.constructor===a){f.constructor=d}c.override=function(a){Ext.override(c,a)};e.override=b;e.proto=e;c.override(g);c.extend=function(a){return Ext.extend(c,a)};return c}}(),isOnline:function(){return Ext.global.navigator.onLine},iterate:function(a,c,b){if(Ext.isEmpty(a)){return}if(b===undefined){b=a}if(Ext.isIterable(a)){Ext.Array.each.call(Ext.Array,a,c,b)}else {Ext.Object.each.call(Ext.Object,a,c,b)}},_resourcePoolRe:/^[<]([^<>@:]*)(?:[@]([^<>@:]+))?[>](.+)$/,resolveResource:function(b){var c=b,a;if(b&&b.charAt(0)==='<'){a=Ext._resourcePoolRe.exec(b);if(a){c=Ext.getResourcePath(a[3],a[1],a[2])}}return c},urlEncode:function(){var a=Ext.Array.from(arguments),b='';if(Ext.isString(a[1])){b=a[1]+'&';a[1]=!1}return b+Ext.Object.toQueryString.apply(Ext.Object,a)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(a){return Ext.scrollbar.size(a)},typeOf:function(){var a=/\S/,d=Object.prototype.toString,c={number:1,string:1,'boolean':1,'undefined':1},b={'[object Array]':'array','[object Date]':'date','[object Boolean]':'boolean','[object Number]':'number','[object RegExp]':'regexp'};return function(e){if(e===null){return 'null'}var f=typeof e,g,h;if(c[f]){return f}g=b[h=d.call(e)];if(g){return g}if(f==='function'){return 'function'}if(f==='object'){if(e.nodeType!==undefined){if(e.nodeType===3){return a.test(e.nodeValue)?'textnode':'whitespace'}else {return 'element'}}return 'object'}return h}}(),factory:function(a,f,b,d){var e=Ext.ClassManager,c;if(!a||a.isInstance){if(b&&b!==a){b.destroy()}return a}if(d){if(typeof a==='string'){return e.instantiateByAlias(d+'.'+a)}else {if(Ext.isObject(a)&&'type' in a){return e.instantiateByAlias(d+'.'+a.type,a)}}}if(a===!0){return b||Ext.create(f)}if('xtype' in a){c=e.instantiateByAlias('widget.'+a.xtype,a)}else {if('xclass' in a){c=Ext.create(a.xclass,a)}}if(c){if(b){b.destroy()}return c}if(b){return b.setConfig(a)}return Ext.create(f,a)},convertKeyedItems:function(b,g,f){if(b&&!b.isInstance&&Ext.isObject(b)){var c=b,a,e,d;b=[];if(c.xtype||c.xclass||c.itemId||c.id){b.push(c)}else {for(e in c){a=c[e];if(a){if(a===!0){a={}}else {if(typeof a==='function'){d=a;a={};a[f]=d}else {if(typeof a==='string'){d=a;a={};a[g||'xtype']=d}else {a=Ext.apply({},a)}}}a.itemId=e;b.push(a)}}}}return b},sortByWeight:function(a){if(a){Ext.Array.sort(a,Ext.weightSortFn)}},weightSortFn:function(a,b){return (a.weight||0)-(b.weight||0)},concat:function(a,c){var d=c==null,b=Ext.emptyArray;return a==null?d?a:b.concat(c):d?b.concat(a):b.concat(a,c)},log:function(){var a=function(){};a.info=a.warn=a.error=Ext.emptyFn;return a}()});(function(){var b=[''],c=/([^\d.])/,f=/[^\d]/g,g=/[-+]/g,h=/\s/g,e=/_/g,d={classic:1,modern:1},a;Ext.Version=a=function(k,p){var b=this,n=b.padModes,o,m,d,h,j,l,i;if(k.isVersion){k=k.version}b.version=i=String(k).toLowerCase().replace(e,'.').replace(g,'');o=i.charAt(0);if(o in n){i=i.substring(1);d=n[o]}else {d=p?n[p]:0}b.pad=d;l=i.search(c);b.shortVersion=i;if(l!==-1){b.release=j=i.substr(l,k.length);b.shortVersion=i.substr(0,l);j=a.releaseValueMap[j]||j}b.releaseValue=j||d;b.shortVersion=b.shortVersion.replace(f,'');b.parts=h=i.split('.');for(m=h.length;m--;){h[m]=parseInt(h[m],10)}if(d===Infinity){h.push(d)}b.major=h[0]||d;b.minor=h[1]||d;b.patch=h[2]||d;b.build=h[3]||d;return b};a.prototype={isVersion:!0,padModes:{'~':NaN,'^':Infinity},release:'',compareTo:function(f){var g=this,m=g.pad,j=g.parts,h=j.length,e=f.isVersion?f:new a(f),n=e.pad,k=e.parts,i=k.length,l=Math.max(h,i),b,c,d;for(b=0;b<l;b++){c=b<h?j[b]:m;d=b<i?k[b]:n;if(c<d){return -1}if(c>d){return 1}}c=g.releaseValue;d=e.releaseValue;if(c<d){return -1}if(c>d){return 1}return 0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(a){return this.compareTo(a)>0},isGreaterThanOrEqual:function(a){return this.compareTo(a)>=0},isLessThan:function(a){return this.compareTo(a)<0},isLessThanOrEqual:function(a){return this.compareTo(a)<=0},equals:function(a){return this.compareTo(a)===0},match:function(a){a=String(a);return this.version.substr(0,a.length)===a},toArray:function(){var a=this;return [a.getMajor(),a.getMinor(),a.getPatch(),a.getBuild(),a.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(a){return this.compareTo(a)>0},lt:function(a){return this.compareTo(a)<0},gtEq:function(a){return this.compareTo(a)>=0},ltEq:function(a){return this.compareTo(a)<=0}};Ext.apply(a,{aliases:{from:{extjs:'ext',core:'core',touch:'modern'},to:{ext:['extjs'],'core':['core'],modern:['touch']}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,'#':-2,p:-1,pl:-1},getComponentValue:function(a){return !a?0:isNaN(a)?this.releaseValueMap[a]||a:parseInt(a,10)},compare:function(b,c){var d=b.isVersion?b:new a(b);return d.compareTo(c)},set:function(g,f,c){var b=a.aliases.to[f],d=c.isVersion?c:new a(c),e;g[f]=d;if(b){for(e=b.length;e-->0;){g[b[e]]=d}}return d}});Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(b){var c=Ext.compatVersions,d;if(!b){d=c.ext||c.touch||c.core}else {d=c[a.aliases.from[b]||b]}return d||Ext.getVersion(b)},setCompatVersion:function(b,c){a.set(Ext.compatVersions,b,c)},setVersion:function(b,c){if(b in d){Ext.toolkit=b}Ext.lastRegisteredVersion=a.set(Ext.versions,b,c);return this},getVersion:function(c){var b=Ext.versions;if(!c){return b.ext||b.touch||b.core}return b[a.aliases.from[c]||c]},checkVersion:function(o,j){var p=Ext.isArray(o),s=a.aliases.from,q=p?o:b,t=q.length,n=Ext.versions,r=n.ext||n.touch,l,c,f,i,g,m,d,e,k;if(!p){b[0]=o}for(l=0;l<t;++l){if(!Ext.isString(d=q[l])){f=Ext.checkVersion(d.and||d.or,!d.or);if(d.not){f=!f}}else {if(d.indexOf(' ')>=0){d=d.replace(h,'')}c=d.indexOf('@');if(c<0){e=d;k=r}else {m=d.substring(0,c);if(!(k=n[s[m]||m])){if(j){return !1}continue}e=d.substring(c+1)}c=e.indexOf('-');if(c<0){if(e.charAt(c=e.length-1)==='+'){i=e.substring(0,c);g=null}else {i=g=e}}else {if(c>0){i=e.substring(0,c);g=e.substring(c+1)}else {i=null;g=e.substring(c+1)}}f=!0;if(i){i=new a(i,'~');f=i.ltEq(k)}if(f&&g){g=new a(g,'~');f=g.gtEq(k)}}if(f){if(!j){return !0}}else {if(j){return !1}}}return !!j},deprecate:function(b,e,c,d){if(a.compare(Ext.getVersion(b),e)<1){c.call(d)}}})})();(function(c){var d=c&&c.packages||{},b=c&&c.compatibility,a,e;for(a in d){e=d[a];if(e&&e.version){Ext.setVersion(a,e.version)}}if(b){if(Ext.isString(b)){Ext.setCompatVersion('core',b)}else {for(a in b){Ext.setCompatVersion(a,b[a])}}}if(!d.ext&&!d.touch){Ext.setVersion('ext','7.3.1.27');Ext.setVersion('core','7.3.1.27')}})(Ext.manifest);Ext.Config=function(b){var c=this,a=b.charAt(0).toUpperCase()+b.substr(1);c.name=b;c.names={internal:'_'+b,initializing:'is'+a+'Initializing',apply:'apply'+a,update:'update'+a,get:'get'+a,set:'set'+a,initGet:'initGet'+a,changeEvent:b.toLowerCase()+'change'};c.root=c};Ext.Config.map={};Ext.Config.get=function(a){var b=Ext.Config.map,c=b[a]||(b[a]=new Ext.Config(a));return c};Ext.Config.prototype={self:Ext.Config,isConfig:!0,combine:function(a,b,e,c){var d=this;if(d.merge){a=d.merge(c?Ext.clone(a):a,b,e)}else {if(a&&a.constructor===Object&&b&&b.constructor===Object){a=Ext.merge({},b,a)}else {if(c&&a){a=Ext.clone(a)}}}return a},equals:function(a,b){return a===b},getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getEventedSetter:function(){return this.eventedSetter||(this.root.eventedSetter=this.makeEventedSetter())},getInternalName:function(a){return a.$configPrefixed?this.names.internal:this.name},mergeNew:function(b,d,f,e){var a,c;if(!d){a=b}else {if(!b){a=d}else {a=Ext.Object.chain(d);for(c in b){if(!e||!(c in a)){a[c]=b[c]}}}}return a},mergeSets:function(a,f,e){var b=f?Ext.Object.chain(f):{},c,d;if(a instanceof Array){for(c=a.length;c--;){d=a[c];if(!e||!(d in b)){b[d]=!0}}}else {if(a){if(a.constructor===Object){for(c in a){d=a[c];if(!e||!(c in b)){b[c]=d}}}else {if(!e||!(a in b)){b[a]=!0}}}}return b},makeGetter:function(){var b=this.name,a=this.names.internal;return function(){var c=this.$configPrefixed?a:b;return this[c]}},makeInitGetter:function(){var e=this.name,a=this.names,d=a.set,c=a.get,b=a.initializing;return function(){var a=this;a[b]=!0;delete a[c];a[d](a.config[e]);delete a[b];return a[c].apply(a,arguments)}},makeSetter:function(){var c=this.name,a=this.names,f=a.internal,g=a.get,e=a.apply,d=a.update,b;b=function(b){var a=this,h=a.$configPrefixed?f:c,i=a[h],j;delete a[g];if(!a[e]||(b=a[e](b,i))!==undefined){if(b!==(i=a[h])){a[h]=b;if(a[d]){a[d](b,i)}j=a.$configWatch;if(j&&!a.isConfiguring){j.fire(c,[a,c,a[h],i])}}}return a};b.$isDefault=!0;return b},makeEventedSetter:function(){var d=this.name,a=this.names,g=a.internal,i=a.get,e=a.apply,b=a.update,f=a.changeEvent,h=function(a,c,e,g){a[g]=c;if(a[b]){a[b](c,e)}var f=a.$configWatch;if(f){f.fire(d,[a,d,c,e])}},c;c=function(c){var a=this,k=a.$configPrefixed?g:d,j=a[k];delete a[i];if(!a[e]||(c=a[e](c,j))!==undefined){if(c!==(j=a[k])){if(a.isConfiguring){a[k]=c;if(a[b]){a[b](c,j)}}else {a.fireEventedAction(f,[a,c,j],h,a,[a,c,j,k])}}}return a};c.$isDefault=!0;return c}};(function(){var c=Ext.Config,b=c.map,a=Ext.Object;Ext.Configurator=function(d){var b=this,e=d.prototype,c=d.superclass?d.superclass.self.$config:null;b.cls=d;b.superCfg=c;if(c){b.configs=a.chain(c.configs);b.cachedConfigs=a.chain(c.cachedConfigs);b.initMap=a.chain(c.initMap);b.values=a.chain(c.values);b.needsFork=c.needsFork}else {b.configs={};b.cachedConfigs={};b.initMap={};b.values={}}e.config=e.defaultConfig=b.values;d.$config=b};Ext.Configurator.prototype={self:Ext.Configurator,needsFork:!1,initList:null,add:function(s,k){var h=this,m=h.cls,j=h.configs,u=h.cachedConfigs,p=h.initMap,f=m.prototype,r=k&&k.$config.configs,t=h.values,l,e,o,g,a,i,d,q,n,b;for(d in s){b=s[d];l=b&&b.constructor===Object;e=l&&'$value' in b?b:null;o=!1;if(e){o=!!e.cached;b=e.$value;l=b&&b.constructor===Object}g=e&&e.merge;a=j[d];if(a){if(k){g=a.merge;if(!g){continue}e=null}else {g=g||a.merge}i=t[d];if(g){b=g.call(a,b,i,m,k)}else {if(l){if(i&&i.constructor===Object){b=Ext.merge({},i,b)}}}}else {if(r){a=r[d];e=null}else {a=c.get(d)}j[d]=a;if(a.cached||o){u[d]=!0}q=a.names;if(!f[n=q.get]){f[n]=a.getter||a.getGetter()}if(!f[n=q.set]){f[n]=e&&e.evented?a.eventedSetter||a.getEventedSetter():a.setter||a.getSetter()}}if(e){if(a.owner!==m){j[d]=a=Ext.Object.chain(a);a.owner=m}Ext.apply(a,e);delete a.$value}if(!h.needsFork&&b&&(b.constructor===Object||b instanceof Array)){h.needsFork=!0}if(b!==null){p[d]=!0}else {if(f.$configPrefixed){f[j[d].names.internal]=null}else {f[j[d].name]=null}if(d in p){p[d]=!1}}t[d]=b}},configure:function(b,i){var j=this,v=j.configs,x=j.initMap,s=j.initListMap,p=j.initList,m=j.cls.prototype,l=j.values,t=0,w=!p,o,c,n,d,q,f,g,e,h,u,r,y,k;l=j.needsFork?a.fork(l):a.chain(l);b.isConfiguring=!0;if(w){j.initList=p=[];j.initListMap=s={};b.isFirstInstance=!0;for(e in x){c=v[e];u=c.cached;if(x[e]){g=c.names;h=l[e];if(!m[g.set].$isDefault||m[g.apply]||m[g.update]||typeof h==='object'){if(u){(o||(o=[])).push(c)}else {p.push(c);s[e]=!0}b[g.get]=c.initGetter||c.getInitGetter()}else {m[c.getInternalName(m)]=h}}else {if(u){m[c.getInternalName(m)]=undefined}}}}f=o&&o.length;if(f){for(d=0;d<f;++d){q=o[d].getInternalName(m);b[q]=null}for(d=0;d<f;++d){g=(c=o[d]).names;n=g.get;if(b.hasOwnProperty(n)){b[g.set](l[c.name]);delete b[n]}}for(d=0;d<f;++d){q=o[d].getInternalName(m);m[q]=b[q];delete b[q]}}if(i&&i.platformConfig){i=j.resolvePlatformConfig(b,i)}if(w){if(b.afterCachedConfig&&!b.afterCachedConfig.$nullFn){b.afterCachedConfig(i)}}b.config=l;for(d=0,f=p.length;d<f;++d){c=p[d];b[c.names.get]=c.initGetter||c.getInitGetter()}if(!(k=b.self.$configTransforms)){b.self.$configTransforms=k=[];f=b.$configTransforms;for(e in f){k.push([e,f[e]])}f=k.length;if(f>1){k.sort(j.transformSorter);for(d=0;d<f;++d){k[d]=k[d][0]}}else {if(f){k[0]=k[0][0]}}}for(d=0;d<k.length;++d){e=k[d];if(b[e]){i=b[e](i,j)}}if(i){for(e in i){h=i[e];c=v[e];if(!c){b[e]=h}else {if(!c.lazy){++t}if(!s[e]){b[c.names.get]=c.initGetter||c.getInitGetter()}r=l[e];if(c.merge){h=c.merge(h,r,b)}else {if(h&&h.constructor===Object){if(r&&r.constructor===Object){h=Ext.merge(l[e],h)}else {h=Ext.clone(h,!1)}}}}l[e]=h}}if(b.beforeInitConfig&&!b.beforeInitConfig.$nullFn){if(b.beforeInitConfig(i)===!1){return}}if(i){for(e in i){if(!t){break}c=v[e];if(c&&!c.lazy){--t;g=c.names;n=g.get;if(b.hasOwnProperty(n)){b[g.set](l[e]);delete b[g.get]}}}}for(d=0,f=p.length;d<f;++d){c=p[d];g=c.names;n=g.get;if(!c.lazy&&b.hasOwnProperty(n)){b[g.set](l[c.name]);delete b[n]}}delete b.isConfiguring},getCurrentConfig:function(c){var e=c.defaultConfig,d={},a;for(a in e){d[a]=c[b[a].names.get]()}return d},hoistConfigs:function(e,d,g){var f=e.config,j=this.configs,i=this.initListMap,h=!1,b,c,a;for(c=0;c<g.length;++c){a=g[c];if(d&&a in d){b=j[a];f[a]=b.combine(d[a],f[a],e);if(!i[a]){e[b.names.get]=b.initGetter||b.getInitGetter()}}if(f[a]!=null){h=!0}}return h},merge:function(g,b,f,i){var h=this.configs,d,a,c,e;if(i){b=Ext.clone(b,!1)}for(d in f){a=f[d];e=h[d];if(e){c=b[d];if(e.merge){a=e.merge(a,c,g)}else {if(a&&a.constructor===Object){if(c&&c.constructor===Object){a=Ext.merge(c,a)}else {a=Ext.clone(a,!1)}}}}b[d]=a}return b},reconfigure:function(c,f,g){var n=c.config,i=[],p=c.$configStrict&&!(g&&g.strict===!1),l=this.configs,o=g&&g.defaults,d,j,h,m,a,e,k;for(a in f){d=l[a];if(o&&c.hasOwnProperty(d&&c.$configPrefixed?d.names.internal:a)){continue}n[a]=f[a];if(d){c[d.names.get]=d.initGetter||d.getInitGetter()}else {k=c.self.prototype[a];if(p){if(typeof k==='function'&&!k.$nullFn){continue}}}i.push(a)}for(h=0,m=i.length;h<m;h++){a=i[h];d=l[a];if(d){e=d.names;j=e.get;if(c.hasOwnProperty(j)){c[e.set](f[a]);delete c[j]}}else {d=b[a]||Ext.Config.get(a);e=d.names;if(c[e.set]){c[e.set](f[a])}else {c[a]=f[a]}}}},resolvePlatformConfig:function(g,e){var f=e&&e.platformConfig,b=e,c,a,d;if(f){a=Ext.getPlatformConfigKeys(f);d=a.length;if(d){b=Ext.merge({},b);for(c=0,d=a.length;c<d;++c){this.merge(g,b,f[a[c]])}}}return b},transformSorter:function(a,b){return a[1]-b[1]}}})();Ext.Base=function(l){var d=[],e,h=[],i=function(a,b){if(!a.hasOwnProperty(b)){a[b]=Ext.Object.chain(i(a.superclass,b))}return a[b]},k=function(a){return function(){return this[a].apply(this,arguments)}},m=Ext.Version,j=/^\d/,g={},f={},b=function(){},c=b.prototype,a;Ext.Reaper=a={delay:100,queue:[],timer:null,add:function(b){if(!a.timer){a.timer=Ext.defer(a.tick,a.delay)}a.queue.push(b)},flush:function(){if(a.timer){Ext.undefer(a.timer);a.timer=null}var d=a.queue,e=d.length,c,b;a.queue=[];for(c=0;c<e;++c){b=d[c];if(b&&b.$reap){b.$reap()}}},tick:function(){a.timer=null;a.flush()}};Ext.apply(b,{$className:'Ext.Base',$isClass:!0,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addConfigTransform:function(a,c){var b=i(this.prototype,'$configTransforms');b[a]=c},addDeprecations:function(o){var s=this,n=[],t=Ext.getCompatVersion(o.name),c,g,r,u,e,h,p,f,i,b,v,a,q,d;for(g in o){if(j.test(g)){d=new Ext.Version(g);d.deprecations=o[g];n.push(d)}}n.sort(m.compare);for(r=n.length;r--;){c=(d=n[r]).deprecations;e=s.prototype;q=c.statics;h=t&&t.lt(d);if(!h){break}while(c){i=c.methods;if(i){for(b in i){a=i[b];f=null;if(!a){}else {if(Ext.isString(a)){if(h){f=k(a)}}else {u='';if(a.message||a.fn){a=a.fn}p=e.hasOwnProperty(b)&&e[b];if(h&&a){a.$owner=s;a.$name=b;if(p){a.$previous=p}f=a}}}if(f){e[b]=f}}}c=q;q=null;e=s}}},extend:function(d){var b=this,f=d.prototype,e,a,g;e=b.prototype=Ext.Object.chain(f);e.self=b;b.superclass=e.superclass=f;if(!d.$isClass){for(a in c){if(a in e){e[a]=c[a]}}}g=f.$inheritableStatics;if(g){for(a in g){if(!b.hasOwnProperty(a)){b[a]=d[a]}}}if(d.$onExtended){b.$onExtended=d.$onExtended.slice()}b.getConfigurator()},$onExtended:[],triggerExtended:function(){var c=this.$onExtended,d=c.length,a,b;if(d>0){for(a=0;a<d;a++){b=c[a];b.fn.apply(b.scope||this,arguments)}}},onExtended:function(b,a){this.$onExtended.push({fn:b,scope:a});return this},addStatics:function(a){this.addMembers(a,!0);return this},addInheritableStatics:function(e){var b=this,g=b.prototype,d=b.$inheritableStatics,a,f,c;if(!d){d=Ext.apply({},g.$inheritableStatics);b.$inheritableStatics=g.$inheritableStatics=d}for(a in e){if(e.hasOwnProperty(a)){f=e[a];c=b[a];if(typeof c==='function'&&!c.$isClass&&!c.$nullFn){f.$previous=c}b[a]=f;d[a]=!0}}return b},addMembers:function(d,f,q){var e=this,m=Ext.Function.clone,c=f?e:e.prototype,n=!f&&c.defaultConfig,k=Ext.enumerables,g=d.privates,h,i,p,a,b,o,j;if(g){delete d.privates;if(!f){j=g.statics;delete g.statics}e.addMembers(g,f,o);if(j){e.addMembers(j,!0,o)}}for(b in d){if(d.hasOwnProperty(b)){a=d[b];if(typeof a==='function'&&!a.$isClass&&!a.$nullFn){if(a.$owner){a=m(a)}if(c.hasOwnProperty(b)){a.$previous=c[b]}a.$owner=e;a.$name=b}else {if(n&&b in n&&!c.config.hasOwnProperty(b)){(h||(h={}))[b]=a;continue}}c[b]=a}}if(h){e.addConfig(h)}if(k){for(i=0,p=k.length;i<p;++i){if(d.hasOwnProperty(b=k[i])){a=d[b];if(a&&!a.$nullFn){if(a.$owner){a=m(a)}a.$owner=e;a.$name=b;if(c.hasOwnProperty(b)){a.$previous=c[b]}}c[b]=a}}}return this},addMember:function(a,c,b){g[a]=c;this.addMembers(g,!1,b);delete g[a];return this},hookMember:function(b,c){var a=this.prototype[b];return this.addMember(b,c,a&&a.$privacy)},borrow:function(f,a){var g=f.prototype,d={},b,e,c;a=Ext.Array.from(a);for(b=0,e=a.length;b<e;b++){c=a[b];d[c]=g[c]}return this.addMembers(d)},override:function(a){var b=this,d=a.statics,c=a.inheritableStatics,e=a.config,g=a.mixins,f=a.cachedConfig;if(d||c||e){a=Ext.apply({},a)}if(d){b.addMembers(d,!0);delete a.statics}if(c){b.addInheritableStatics(c);delete a.inheritableStatics}if(a.platformConfig){b.addPlatformConfig(a)}if(e){b.addConfig(e);delete a.config}if(f){b.addCachedConfig(f);delete a.cachedConfig}delete a.mixins;b.addMembers(a);if(g){b.mixin(g)}return b},addPlatformConfig:function(n){var m=this,j=m.prototype,h=n.platformConfig,a,i,e,d,g,b,f,c,k;delete j.platformConfig;d=m.getConfigurator();i=d.configs;g=Ext.getPlatformConfigKeys(h);for(c=0,k=g.length;c<k;++c){e=h[g[c]];a=null;for(b in e){f=e[b];if(b in i){(a||(a={}))[b]=f}else {j[b]=f}}if(a){d.add(a)}}},callParent:function(b){var a;return (a=this.callParent.caller)&&(a.$previous||(a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name]).apply(this,b||d)},callSuper:function(b){var a;return (a=this.callSuper.caller)&&((a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name]).apply(this,b||d)},mixin:function(n,f){var c=this,a,b,d,m,h,o,k,j,e,i,g;if(typeof n!=='string'){e=n;if(e instanceof Array){for(h=0,o=e.length;h<o;h++){a=e[h];c.mixin(a.prototype.mixinId||a.$className,a)}}else {for(k in e){c.mixin(k,e[k])}}return}a=f.prototype;b=c.prototype;if(a.onClassMixedIn){a.onClassMixedIn.call(f,c)}if(!b.hasOwnProperty('mixins')){if('mixins' in b){b.mixins=Ext.Object.chain(b.mixins)}else {b.mixins={}}}for(d in a){j=a[d];if(d==='mixins'){Ext.applyIf(b.mixins,j)}else {if(!(d==='mixinId'||d==='config'||d==='$inheritableStatics')&&b[d]===undefined){b[d]=j}}}m=a.$inheritableStatics;if(m){i={};for(g in m){if(!c.hasOwnProperty(g)){i[g]=f[g]}}c.addInheritableStatics(i)}if('config' in a){c.addConfig(a.config,f)}b.mixins[n]=a;if(a.afterClassMixedIn){a.afterClassMixedIn.call(f,c)}return c},addConfig:function(b,a){var c=this.$config||this.getConfigurator();c.add(b,a)},addCachedConfig:function(c,d){var b={},a;for(a in c){b[a]={cached:!0,$value:c[a]}}this.addConfig(b,d)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:l(function(a,b){f[a]=function(){return this[b].apply(this,arguments)};this.override(f);delete f[a]})});for(e in b){if(b.hasOwnProperty(e)){h.push(e)}}b.$staticMembers=h;b.getConfigurator();b.addMembers({$className:'Ext.Base',$configTransforms:{},isInstance:!0,$configPrefixed:!0,$configStrict:!0,isConfiguring:!1,isFirstInstance:!1,destroyed:!1,clearPropertiesOnDestroy:!0,clearPrototypeOnDestroy:!1,statics:function(){var a=this.statics.caller,b=this.self;if(!a){return b}return a.$owner},callParent:function(c){var a,b=(a=this.callParent.caller)&&(a.$previous||(a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name]);return b.apply(this,c||d)},callSuper:function(c){var a,b=(a=this.callSuper.caller)&&((a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name]);return b.apply(this,c||d)},self:b,constructor:function(){return this},initConfig:function(b){var a=this,c=a.self.getConfigurator();a.initConfig=Ext.emptyFn;a.initialConfig=b||{};c.configure(a,b);return a},beforeInitConfig:Ext.emptyFn,getConfig:function(d,g,f){var a=this,b,e,c;if(d){e=a.self.$config.configs[d];if(e){c=a.$configPrefixed?e.names.internal:d;if(f){b=a.hasOwnProperty(c)?a[c]:null}else {if(g){b=a.hasOwnProperty(c)?a[c]:a.config[d]}else {b=a[e.names.get]()}}}else {b=a[d]}}else {b=a.getCurrentConfig()}return b},destroyMembers:function(){var b=this,f=b.self.$config.configs,g=arguments.length,e,a,d,c;for(c=0;c<g;c++){a=arguments[c];e=f[a];a=e&&b.$configPrefixed?e.names.internal:a;d=b.hasOwnProperty(a)&&b[a];if(d){Ext.destroy(d);b[a]=null}}},freezeConfig:function(d){var a=this,c=Ext.Config.get(d),b=c.names,e=a[b.get]();a[b.set]=function(b){return a}},setConfig:function(b,e,g){var a=this,d,c,f;if(b){d=a.self.getConfigurator();if(typeof b==='string'){c=d.configs[b];if(!c){if(a.$configStrict){f=a.self.prototype[b];if(typeof f==='function'&&!f.$nullFn){return a}}c=Ext.Config.map[b]||Ext.Config.get(b)}if(a[c.names.set]){a[c.names.set](e)}else {a[b]=e}}else {d.reconfigure(a,b,g||e)}}return a},getConfigWatcher:function(){return this.$configWatch||(this.$configWatch=new Ext.mixin.Watchable())},watchConfig:function(c,d,b){var a=this.getConfigWatcher();return a.on.apply(a,arguments)},$configWatch:null,getCurrentConfig:function(){var a=this.self.getConfigurator();return a.getCurrentConfig(this)},hasConfig:function(a){return a in this.defaultConfig},getInitialConfig:function(b){var a=this.config;if(!b){return a}return a[b]},$links:null,link:function(c,b){var a=this,d=a.$links||(a.$links={});d[c]=!0;a[c]=b;return b},unlink:function(e){var d=this,b,f,c,a;for(b=0,f=e.length;b<f;b++){c=e[b];a=d[c];if(a){if(a.isInstance&&!a.destroyed){a.destroy()}else {if(a.parentNode&&'nodeType' in a){a.parentNode.removeChild(a)}}}d[c]=null}return d},$reap:function(){var a=this,g=a.$noClearOnDestroy,e,b,c,f,d,h;e=Ext.Object.getKeys(a);for(d=0,h=e.length;d<h;d++){b=e[d];c=a[b];if(c&&!(g&&g[b])){f=typeof c;if(f==='object'||f==='function'&&!c.$noClearOnDestroy){a[b]=null}}}a.$nulled=!0},destroy:function(){var b=this,d=b.$links,c=b.clearPropertiesOnDestroy;if(d){b.$links=null;b.unlink(Ext.Object.getKeys(d))}b.destroy=Ext.emptyFn;b.isDestroyed=b.destroyed=!0;if(c===!0){if(!b.isObservable){b.$reap()}}else {if(c){a.add(b)}}}});c.callOverridden=c.callParent;return b}(Ext.Function.flexSetter);(function(b,a){(Ext.util||(Ext.util={})).LRU=b=function(e){var d=this,c;if(e){Ext.apply(d,e)}d.head=c={key:null,value:null};d.map={};c.next=c.prev=c};b.prototype=a={count:0,add:function(e,g){var d=this,f=d.map,c=f[e];if(c){d.unlink(c);--d.count}f[e]=c={key:e,value:g};d.link(c);++d.count;return c},clear:function(e,g){var f=this,d=f.head,c=d.next;d.next=d.prev=d;f.count=0;if(e&&!e.$nullFn){for(;c!==d;c=c.next){e.call(g||f,c.key,c.value)}}},each:function(f,d){var e,c;d=d||this;for(e=this.head,c=e.next;c!==e;c=c.next){if(f.call(d,c.key,c.value)){break}}},prune:function(f,g){var c=this,d=c.head.prev,e;if(c.count){e=d.value;c.unlink(d);--c.count;if(f){f.call(g||c,d.key,e)}}return e},remove:function(f){var d=this,g=d.map,c=g[f],e;if(c){d.unlink(c);e=c.value;delete g[f];--d.count}return e},touch:function(f){var d=this,e=d.head,c=d.map[f];if(c&&c.prev!==e){d.unlink(c);d.link(c)}},trim:function(d,e,c){while(this.count>d){this.prune(e,c)}},link:function(c){var d=this.head,e=d.next;c.next=e;c.prev=d;d.next=c;e.prev=c},unlink:function(c){var d=c.next,e=c.prev;e.next=d;d.prev=e}};a.destroy=function(){this.clear.apply(this,arguments)}})();(function(a,c,b){Ext.util.Cache=b=function(d){a.call(this,d)};c.prototype=a.prototype;b.prototype=Ext.apply(new c(),{maxSize:100,clear:function(){a.prototype.clear.call(this,this.evict)},get:function(f){var d=this,g=d.map[f],e;if(g){e=g.value;d.touch(f)}else {e=d.miss.apply(d,arguments);d.add(f,e);d.trim(d.maxSize,d.evict)}return e},evict:Ext.emptyFn})})(Ext.util.LRU,function(){});(function(){var a,d=Ext.Base,b=d.$staticMembers,c=function(a,b){return a.length-b.length||(a<b?-1:a>b?1:0)};function makeCtor(a){function constructor(){return this.constructor.apply(this,arguments)||null}return constructor}Ext.Class=a=function(b,c,d){if(typeof b!=='function'){d=c;c=b;b=null}if(!c){c={}}b=a.create(b,c);a.process(b,c,d);return b};Ext.apply(a,{makeCtor:makeCtor,onBeforeCreated:function(a,c,b){a.addMembers(c);b.onCreated.call(a,a)},create:function(a,f){var e=b.length,c;if(!a){a=makeCtor()}while(e--){c=b[e];a[c]=d[c]}return a},process:function(l,f,k){var j=f.preprocessors||a.defaultPreprocessors,o=this.preprocessors,e={onBeforeCreated:this.onBeforeCreated},d=[],b,c,g,n,h,m,i;delete f.preprocessors;l._classHooks=e;for(g=0,n=j.length;g<n;g++){b=j[g];if(typeof b==='string'){b=o[b];c=b.properties;if(c===!0){d.push(b.fn)}else {if(c){for(h=0,m=c.length;h<m;h++){i=c[h];if(f.hasOwnProperty(i)){d.push(b.fn);break}}}}}else {d.push(b)}}e.onCreated=k?k:Ext.emptyFn;e.preprocessors=d;this.doProcess(l,f,e)},doProcess:function(f,g,b){var c=this,d=b.preprocessors,a=d.shift(),e=c.doProcess;for(;a;a=d.shift()){if(a.call(c,f,g,b,e)===!1){return}}b.onBeforeCreated.apply(c,arguments)},preprocessors:{},registerPreprocessor:function(a,e,b,c,d){if(!c){c='last'}if(!b){b=[a]}this.preprocessors[a]={name:a,properties:b||!1,fn:e};this.setDefaultPreprocessorPosition(a,c,d);return this},getPreprocessor:function(a){return this.preprocessors[a]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(a){this.defaultPreprocessors=Ext.Array.from(a);return this},setDefaultPreprocessorPosition:function(d,a,e){var b=this.defaultPreprocessors,c;if(typeof a==='string'){if(a==='first'){b.unshift(d);return this}else {if(a==='last'){b.push(d);return this}}a=a==='after'?1:-1}c=Ext.Array.indexOf(b,e);if(c!==-1){Ext.Array.splice(b,Math.max(0,c+a),0,d)}return this}});a.registerPreprocessor('extend',function(b,c,i){var h=Ext.Base,g=h.prototype,f=c.extend,a,e,d;delete c.extend;if(f&&f!==Object){a=f}else {a=h}e=a.prototype;if(!a.$isClass){for(d in g){if(!e[d]){e[d]=g[d]}}}b.extend(a);b.triggerExtended.apply(b,arguments);if(c.onClassExtended){b.onExtended(c.onClassExtended,b);delete c.onClassExtended}},!0);a.registerPreprocessor('privates',function(d,e){var a=e.privates,c=a.statics,b=a.privacy||!0;delete e.privates;delete a.statics;d.addMembers(a,!1,b);if(c){d.addMembers(c,!0,b)}});a.registerPreprocessor('statics',function(b,a){b.addStatics(a.statics);delete a.statics});a.registerPreprocessor('inheritableStatics',function(b,a){b.addInheritableStatics(a.inheritableStatics);delete a.inheritableStatics});Ext.createRuleFn=function(a){return new Function('$c','with($c) { try { return ('+a+'); } catch(e) { return false;}}')};Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn});Ext.ruleKeySortFn=c;Ext.getPlatformConfigKeys=function(e){var b=[],a,d;for(a in e){d=Ext.expressionCache.get(a);if(d(Ext.platformTags)){b.push(a)}}b.sort(c);return b};a.registerPreprocessor('config',function(b,a){if(a.hasOwnProperty('$configPrefixed')){b.prototype.$configPrefixed=a.$configPrefixed}b.addConfig(a.config);delete a.config});a.registerPreprocessor('cachedConfig',function(b,a){if(a.hasOwnProperty('$configPrefixed')){b.prototype.$configPrefixed=a.$configPrefixed}b.addCachedConfig(a.cachedConfig);delete a.cachedConfig});a.registerPreprocessor('mixins',function(e,b,a){var d=b.mixins,c=a.onCreated;delete b.mixins;a.onCreated=function(){a.onCreated=c;e.mixin(d);return a.onCreated.apply(this,arguments)}});Ext.extend=function(d,c,b){var e,f;if(arguments.length===2&&Ext.isObject(c)){b=c;c=d;d=null}if(!c){throw new Error('[Ext.extend] Attempting to extend from a class which has not '+'been loaded on the page.')}b.extend=c;b.preprocessors=['extend','statics','inheritableStatics','mixins','config'];if(d){e=new a(d,b);e.prototype.constructor=d}else {e=new a(b)}e.prototype.override=function(a){for(f in a){if(a.hasOwnProperty(f)){this[f]=a[f]}}};return e}})();Ext.Inventory=function(){var a=this;a.names=[];a.paths={};a.alternateToName={};a.aliasToName={};a.nameToAliases={};a.nameToAlternates={};a.nameToPrefix={}};Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(a,c,b){return this.addMapping(a,c,this.aliasToName,this.nameToAliases,b)},addAlternate:function(b,a){return this.addMapping(b,a,this.alternateToName,this.nameToAlternates)},addMapping:function(h,m,k,j,n){var f=h.$className||h,c=f,l=this._array1,d,a,b,e,i,g;if(Ext.isString(f)){c={};c[f]=m}for(b in c){a=c[b];if(Ext.isString(a)){l[0]=a;a=l}i=a.length;g=j[b]||(j[b]=[]);for(e=0;e<i;++e){if(!(d=a[e])){continue}if(k[d]!==b){k[d]=b;g.push(d)}}}},getAliasesByName:function(a){return this.nameToAliases[a]||null},getAlternatesByName:function(a){return this.nameToAlternates[a]||null},getNameByAlias:function(a){return this.aliasToName[a]||''},getNameByAlternate:function(a){return this.alternateToName[a]||''},getNamesByExpression:function(k,e,r){var g=this,q=g.aliasToName,p=g.alternateToName,m=g.nameToAliases,o=g.nameToAlternates,i=r?e:{},l=[],n=Ext.isString(k)?[k]:k,t=n.length,s=g.wildcardRe,f,j,c,b,d,a,h;for(j=0;j<t;++j){if((f=n[j]).indexOf('*')<0){if(!(a=q[f])){if(!(a=p[f])){a=f}}if(!(a in i)&&!(e&&a in e)){i[a]=1;l.push(a)}}else {h=new RegExp('^'+f.replace(s,'(.*?)')+'$');for(a in m){if(!(a in i)&&!(e&&a in e)){if(!(b=h.test(a))){d=(c=m[a]).length;while(!b&&d-->0){b=h.test(c[d])}c=o[a];if(c&&!b){d=c.length;while(!b&&d-->0){b=h.test(c[d])}}}if(b){i[a]=1;l.push(a)}}}}}return l},getPath:function(a){var c=this,e=c.paths,b='',d;if(a in e){b=e[a]}else {d=c.nameToPrefix[a]||(c.nameToPrefix[a]=c.getPrefix(a));if(d){a=a.substring(d.length+1);b=e[d];if(b){b+='/'}}b+=a.replace(c.dotRe,'/')+'.js'}return b},getPrefix:function(a){if(a in this.paths){return a}else {if(a in this.nameToPrefix){return this.nameToPrefix[a]}}var h=this.getPrefixes(),b=a.length,c,f,e,d,g;while(b-->0){c=h[b];if(c){f=a.charAt(b);if(f!=='.'){continue}for(d=0,g=c.length;d<g;d++){e=c[d];if(e===a.substring(0,b)){return e}}}}return ''},getPrefixes:function(){var f=this,a=f.prefixes,d,e,c,g,b,h;if(!a){d=f.names.slice(0);f.prefixes=a=[];for(b=0,h=d.length;b<h;b++){e=d[b];c=e.length;g=a[c]||(a[c]=[]);g.push(e)}}return a},removeName:function(a){var c=this,j=c.aliasToName,h=c.alternateToName,i=c.nameToAliases,g=c.nameToAlternates,f=i[a],e=g[a],b,d;delete i[a];delete g[a];delete c.nameToPrefix[a];if(f){for(b=f.length;b--;){if(a===j[d=f[b]]){delete j[d]}}}if(e){for(b=e.length;b--;){if(a===h[d=e[b]]){delete h[d]}}}},resolveName:function(a){var c=this,b;if(!(a in c.nameToAliases)){if(!(b=c.aliasToName[a])){b=c.alternateToName[a]}}return b||a},select:function(b,f){var e=this,a={},d={excludes:a,exclude:function(){e.getNamesByExpression(arguments[0],a,!0);return this}},c;for(c in b){d[c]=e.selectMethod(a,b[c],f||b)}return d},selectMethod:function(a,c,b){var d=this;return function(f){var e=Ext.Array.slice(arguments,1);e.unshift(d.getNamesByExpression(f,a));return c.apply(b,e)}},setPath:Ext.Function.flexSetter(function(b,c){var a=this;a.paths[b]=c;a.names.push(b);a.prefixes=null;a.nameToPrefix={};return a})};Ext.ClassManager=function(n,e,o,g,r){var q=Ext.Class.makeCtor,i=[],b={Ext:{name:'Ext',value:Ext}},a=Ext.apply(new Ext.Inventory(),{classes:{},classState:{},existCache:{},instantiators:[],isCreated:function(b){if(a.classes[b]||a.existCache[b]){return !0}if(!a.lookupName(b,!1)){return !1}a.triggerCreated(b);return !0},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(b,c){a.existCache[b]=c||1;a.classState[b]+=40;a.notify(b,a.createdListeners,a.nameCreatedListeners)},onCreated:function(d,c,b){a.addListener(d,c,b,a.createdListeners,a.nameCreatedListeners)},notify:function(k,c,m){var l=a.getAlternatesByName(k),f=[k],b,i,j,p,d,h;for(b=0,i=c.length;b<i;b++){d=c[b];d.fn.call(d.scope,k)}while(f){for(b=0,i=f.length;b<i;b++){h=f[b];c=m[h];if(c){for(j=0,p=c.length;j<p;j++){d=c[j];d.fn.call(d.scope,h)}delete m[h]}}f=l;l=null}},addListener:function(b,f,a,h,c){var d;if(Ext.isArray(a)){b=Ext.Function.createBarrier(a.length,b,f);for(d=0;d<a.length;d++){this.addListener(b,null,a[d],h,c)}return}var i={fn:b,scope:f};if(a){if(this.isCreated(a)){b.call(f,a);return}if(!c[a]){c[a]=[]}c[a].push(i)}else {h.push(i)}},$namespaceCache:b,addRootNamespaces:function(c){var a;for(a in c){b[a]={name:a,value:c[a]}}},clearNamespaceCache:function(){var a;i.length=0;for(a in b){if(!b[a].value){delete b[a]}}},getNamespaceEntry:function(c){var d,f;if(typeof c!=='string'){return c}d=b[c];if(!d){f=c.lastIndexOf('.');if(f<0){d={name:c}}else {d={name:c.substring(f+1),parent:a.getNamespaceEntry(c.substring(0,f))}}b[c]=d}return d},lookupName:function(j,h){var k=a.getNamespaceEntry(j),c=Ext.global,d=0,b,f;for(b=k;b;b=b.parent){i[d++]=b}while(c&&d-->0){b=i[d];f=c;c=b.value||c[b.name];if(!c&&h){f[b.name]=c={}}}return c},setNamespace:function(f,d){var b=a.getNamespaceEntry(f),c=Ext.global;if(b.parent){c=a.lookupName(b.parent,!0)}c[b.name]=d;return d},setXType:function(i,d){var f=i.$className,k=f?i:a.get(f=i),b=k.prototype,j=b.xtypes,c=b.xtypesChain,h=b.xtypesMap;if(!b.hasOwnProperty('xtypes')){b.xtypes=j=[];b.xtypesChain=c=c?c.slice(0):[];b.xtypesMap=h=Ext.apply({},h)}a.addAlias(f,'widget.'+d,!0);j.push(d);c.push(d);h[d]=!0},set:function(b,d){var c=a.getName(d);a.classes[b]=a.setNamespace(b,d);if(c&&c!==b){a.addAlternate(c,b)}return a},get:function(b){return a.classes[b]||a.lookupName(b,!1)},addNameAliasMappings:function(b){a.addAlias(b)},addNameAlternateMappings:function(b){a.addAlternate(b)},getByAlias:function(b){return a.get(a.getNameByAlias(b))},getByConfig:function(c,d){var f=c.xclass,b;if(f){b=f}else {b=c.xtype;if(b){d='widget.'}else {b=c.type}b=a.getNameByAlias(d+b)}return a.get(b)},getName:function(a){return a&&a.$className||''},getClass:function(a){return a&&a.self||null},create:function(c,b,f){var d;d=q(c);if(typeof b==='function'){b=b(d)}b.$className=c;return new n(d,b,function(){var m=b.postprocessors||a.defaultPostprocessors,s=a.postprocessors,i=[],d,j,q,k,p,h,l;delete b.postprocessors;for(j=0,q=m.length;j<q;j++){d=m[j];if(typeof d==='string'){d=s[d];h=d.properties;if(h===!0){i.push(d.fn)}else {if(h){for(k=0,p=h.length;k<p;k++){l=h[k];if(b.hasOwnProperty(l)){i.push(d.fn);break}}}}}else {i.push(d)}}b.postprocessors=i;b.createdFn=f;a.processCreate(c,this,b)})},processCreate:function(a,b,d){var c=this,f=d.postprocessors.shift(),h=d.createdFn;if(!f){if(a){c.set(a,b)}delete b._classHooks;if(h){h.call(b,b)}if(a){c.triggerCreated(a)}return}if(f.call(c,a,b,d,c.processCreate)!==!1){c.processCreate(a,b,d)}},createOverride:function(j,c,m){var h=this,f=c.override,p=c.requires,q=c.uses,b=c.mixins,l,d=1,k,i;i=function(){var a,s,d,t,u;if(!k){s=p?p.slice(0):[];if(b){if(!(l=b instanceof Array)){for(t in b){if(Ext.isString(a=b[t])){s.push(a)}}}else {for(d=0,u=b.length;d<u;++d){if(Ext.isString(a=b[d])){s.push(a)}}}}k=!0;if(s.length){Ext.require(s,i);return}}if(l){for(d=0,u=b.length;d<u;++d){if(Ext.isString(a=b[d])){b[d]=Ext.ClassManager.get(a)}}}else {if(b){for(t in b){if(Ext.isString(a=b[t])){b[t]=Ext.ClassManager.get(a)}}}}a=f.$isClass?f:h.get(f);delete c.override;delete c.compatibility;delete c.requires;delete c.uses;Ext.override(a,c);Ext.Loader.history.push(j);if(q){Ext['Loader'].addUsedClasses(q)}if(m){m.call(a,a)}};if(j){a.overrideMap[j]=!0}if('compatibility' in c){d=c.compatibility;if(!d){d=!1}else {if(typeof d==='number'){d=!0}else {if(typeof d!=='boolean'){d=Ext.checkVersion(d)}}}}if(d){if(f.$isClass){i()}else {h.onCreated(i,h,f)}}h.triggerCreated(j,2);return h},instantiateByAlias:function(){var c=arguments[0],a=o.call(arguments),b=this.getNameByAlias(c);a[0]=b;return Ext.create.apply(Ext,a)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(b,a){a=g(a,!0);a.unshift(b);return Ext.create.apply(Ext,a)},getInstantiator:function(c){var f=this.instantiators,b,d,a;b=f[c];if(!b){a=c;d=[];for(a=0;a<c;a++){d.push('a['+a+']')}b=f[c]=new Function('c','a','return new c('+d.join(',')+')')}return b},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(a,f,b,c,d){if(!c){c='last'}if(!b){b=[a]}this.postprocessors[a]={name:a,properties:b||!1,fn:f};this.setDefaultPostprocessorPosition(a,c,d);return this},setDefaultPostprocessors:function(a){this.defaultPostprocessors=g(a);return this},setDefaultPostprocessorPosition:function(d,a,f){var b=this.defaultPostprocessors,c;if(typeof a==='string'){if(a==='first'){b.unshift(d);return this}else {if(a==='last'){b.push(d);return this}}a=a==='after'?1:-1}c=Ext.Array.indexOf(b,f);if(c!==-1){Ext.Array.splice(b,Math.max(0,c+a),0,d)}return this}});a.registerPostprocessor('platformConfig',function(c,a,b){a.addPlatformConfig(b)});a.registerPostprocessor('alias',function(h,f,d){var b=Ext.Array.from(d.alias),a,c;for(a=0,c=b.length;a<c;a++){e=b[a];this.addAlias(f,e)}},['xtype','alias']);a.registerPostprocessor('singleton',function(b,c,a,d){if(a.singleton){d.call(this,b,new c(),a)}else {return !0}return !1});a.registerPostprocessor('alternateClassName',function(i,h,f){var a=f.alternateClassName,b,d,c;if(!(a instanceof Array)){a=[a]}for(b=0,d=a.length;b<d;b++){c=a[b];this.set(c,h)}});a.registerPostprocessor('debugHooks',function(d,a,c){var b;b=a.isInstance?a.self:a;delete b.prototype.debugHooks});a.registerPostprocessor('deprecated',function(d,b,c){var a;a=b.isInstance?b.self:b;a.addDeprecations(c.deprecated);delete a.prototype.deprecated});Ext.apply(Ext,{create:function(){var b=arguments[0],f=typeof b,c=o.call(arguments,1),d;if(f==='function'){d=b}else {if(f!=='string'&&c.length===0){c=[b];if(!(b=b.xclass)){b=c[0].xtype;if(b){b='widget.'+b}}}b=a.resolveName(b);d=a.get(b)}if(!d){Ext.syncRequire(b);d=a.get(b)}return a.getInstantiator(c.length)(d,c)},widget:function(i,b){var f=i,d,c,h;if(typeof f!=='string'){b=i;f=b.xtype;c=b.xclass}else {b=b||{}}if(b.isComponent){return b}if(!c){d='widget.'+f;c=a.getNameByAlias(d)}if(c){h=a.get(c)}if(!h){return Ext.create(c||d,b)}return new h(b)},createByAlias:e(a,'instantiateByAlias'),define:function(b,c,d){if(c.override){a.classState[b]=20;return a.createOverride.apply(a,arguments)}a.classState[b]=10;return a.create.apply(a,arguments)},undefine:function(b){var h=a.classes;delete h[b];delete a.existCache[b];delete a.classState[b];a.removeName(b);Ext.Factory.clearCaches();var d=a.getNamespaceEntry(b),f=d.parent?a.lookupName(d.parent,!1):Ext.global,c;if(f){c=d.name;try{delete f[c]}catch(t){f[c]=undefined}}},getClassName:e(a,'getName'),getDisplayName:function(a){if(a){if(a.displayName){return a.displayName}if(a.$name&&a.$class){return Ext.getClassName(a.$class)+'#'+a.$name}if(a.$className){return a.$className}}return 'Anonymous'},getClass:e(a,'getClass'),namespace:function(){var c=r,b;for(b=arguments.length;b-->0;){c=a.lookupName(arguments[b],!0)}return c}});Ext.addRootNamespaces=a.addRootNamespaces;Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;n.registerPreprocessor('className',function(b,a){if('$className' in a){b.$className=a.$className}},!0,'first');n.registerPreprocessor('alias',function(m,f){var q=m.prototype,c=g(f.xtype),i=g(f.alias),j='widget.',p=j.length,k=Array.prototype.slice.call(q.xtypesChain||[]),h=Ext.merge({},q.xtypesMap||{}),a,d,l,b;for(a=0,d=i.length;a<d;a++){l=i[a];if(l.substring(0,p)===j){b=l.substring(p);Ext.Array.include(c,b)}}m.xtype=f.xtype=c[0];f.xtypes=c;for(a=0,d=c.length;a<d;a++){b=c[a];if(!h[b]){h[b]=!0;k.push(b)}}f.xtypesChain=k;f.xtypesMap=h;Ext.Function.interceptAfterOnce(m,'onClassCreated',function(){var q=this,p=q.prototype,i=p.mixins,j,l;for(j in i){if(i.hasOwnProperty(j)){l=i[j];c=l.xtypes;if(c){for(a=0,d=c.length;a<d;a++){b=c[a];if(!h[b]){h[b]=!0;k.push(b)}}}}}});for(a=0,d=c.length;a<d;a++){b=c[a];Ext.Array.include(i,j+b)}f.alias=i},['xtype','alias']);if(Ext.manifest){var k=Ext.manifest,m=k.classes,d=k.paths,l={},j={},c,f,s,h,p;if(d){if(k.bootRelative){p=Ext.Boot.baseUrl;for(h in d){if(d.hasOwnProperty(h)){d[h]=p+d[h]}}}a.setPath(d)}if(m){for(c in m){j[c]=[];l[c]=[];f=m[c];if(f.alias){l[c]=f.alias}if(f.alternates){j[c]=f.alternates}}}a.addAlias(l);a.addAlternate(j)}return a}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global);Ext.define('Ext.mixin.Watchable',{on:function(b,c,a){return this._watchUpdate(!1,'_watchAdd',b,c,a)},fire:function(h,e){var i=this,g=i.watching,a=g&&g[h],c,d,f,b;if(a){++a.$firing;for(d=0;d<a.length;++d){b=a[d][0];c=a[d][1];if(c.charAt){f=e?b[c].apply(b,e):b[c]()}else {f=e?c.apply(b,e):c.call(b)}if(f===!1){return f}}--a.$firing}},fireEvent:function(){var a=Ext.Array.slice(arguments),b=a.shift();return this.fire(b,a)},un:function(b,c,a){return this._watchUpdate(!0,'_watchRemove',b,c,a)},privates:{watching:null,$watchOptions:{destroyable:1,scope:1},_watchAdd:function(d,b,i,f,h){var a=d[b],e=[f,i],g,c;if(!a){d[b]=a=[];a.$firing=0}else {for(g=a.length;g-->0;){c=a[g];if(i===c[1]){if(f?c[0]===f:!c[0]){return}}}if(a.$firing){d[b]=a=a.slice();a.$firing=0}}a.push(e);if(h){e.push(b);h.items.push(e)}},_watchRemove:function(c,d,f,e){var a=c[d],b;if(a){if(a.$firing){c[d]=a=a.slice();a.$firing=0}for(b=a.length;b-->0;){if(a[b][0]===e&&a[b][1]===f){a.splice(b,1)}}}},_watchUpdate:function(h,g,a,i,f){var b=this,d=a,c=b.watching,e;if(!c){if(h){return}b.watching=c={}}if(typeof a==='string'){b[g](c,a,i,f)}else {e=d.destroyable?{owner:b,items:[],destroy:b._watcherDestroyer}:null;f=d.scope;for(a in d){if(!b.$watchOptions[a]){b[g](c,a,d[a],f,e)}}}return e},_watcherDestroyer:function(){var d=this.owner,e=d.watching,c=this.items,a,b;for(b=0;b<c.length;++b){a=c[b];d._watchRemove(e,a[2],a[1],a[0])}}}});(Ext.env||(Ext.env={})).Browser=function(d,q){var m=this,r=Ext.Boot.browserPrefixes,i=Ext.Boot.browserNames,s=m.enginePrefixes,j=m.engineNames,f=d.match(new RegExp('((?:'+Ext.Object.getValues(r).join(')|(?:')+'))([\\w\\._]+)')),n=d.match(new RegExp('((?:'+Ext.Object.getValues(s).join(')|(?:')+'))([\\w\\._]+)')),a=i.other,g=j.other,e='',k='',b='',p=!1,t=/(Edge\/)([\w.]+)/,u='',c,o,h;m.userAgent=d;this.is=function(a){return !!this.is[a]};if(/Edge\//.test(d)){f=d.match(t);n=d.match(t)}if(f){a=i[Ext.Object.getKey(r,f[1])];if(a==='Safari'&&/^Opera/.test(d)){a='Opera'}e=new Ext.Version(f[2])}if(n){g=j[Ext.Object.getKey(s,n[1])];k=new Ext.Version(n[2])}if(g==='Trident'&&a!=='IE'){a='IE';var l=d.match(/.*rv:(\d+.\d+)/);if(l&&l.length){l=l[1];e=new Ext.Version(l)}}if(a&&e){Ext.setVersion(a,e)}if(d.match(/FB/)&&a==='Other'){a=i.safari;g=j.webkit}else {if(d.match(/Android.*Chrome/g)){a='ChromeMobile'}else {f=d.match(/OPR\/(\d+.\d+)/);if(f){a='Opera';e=new Ext.Version(f[1])}}}Ext.apply(this,{engineName:g,engineVersion:k,name:a,version:e});this.setFlag(a,!0,q);if(e){b=e.getMajor()||'';if(m.is.IE){b=document.documentMode||parseInt(b,10);for(c=7;c<=11;++c){o='isIE'+c;Ext[o]=b===c;Ext[o+'m']=b<=c;Ext[o+'p']=b>=c}}if(m.is.Opera&&parseInt(b,10)<=12){Ext.isOpera12m=!0}Ext.chromeVersion=Ext.isChrome?b:0;Ext.firefoxVersion=Ext.isFirefox?b:0;Ext.ieVersion=Ext.isIE?b:0;Ext.operaVersion=Ext.isOpera?b:0;Ext.safariVersion=Ext.isSafari?b:0;Ext.webKitVersion=Ext.isWebKit?b:0;this.setFlag(a+b,!0,q);this.setFlag(a+e.getShortVersion())}for(c in i){if(i.hasOwnProperty(c)){h=i[c];this.setFlag(h,a===h)}}this.setFlag(h);if(k){this.setFlag(g+(k.getMajor()||''));this.setFlag(g+k.getShortVersion())}for(c in j){if(j.hasOwnProperty(c)){h=j[c];this.setFlag(h,g===h,q)}}this.setFlag('Standalone',!!navigator.standalone);try{u=window.top.ripple}catch(v){}this.setFlag('Ripple',!!document.getElementById('tinyhippos-injected')&&!Ext.isEmpty(u));this.setFlag('WebWorks',!!window.blackberry);if(window.PhoneGap!==undefined||window.Cordova!==undefined||window.cordova!==undefined){p=!0;this.setFlag('PhoneGap');this.setFlag('Cordova')}if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(d)){p=!0}this.setFlag('WebView',p);this.isStrict=Ext.isStrict=document.compatMode==='CSS1Compat';this.isSecure=Ext.isSecure;this.identity=a+b+(this.isStrict?'Strict':'Quirks')};Ext.env.Browser.prototype={constructor:Ext.env.Browser,engineNames:{edge:'Edge',webkit:'WebKit',gecko:'Gecko',presto:'Presto',trident:'Trident',other:'Other'},enginePrefixes:{edge:'Edge/',webkit:'AppleWebKit/',gecko:'Gecko/',presto:'Presto/',trident:'Trident/'},styleDashPrefixes:{WebKit:'-webkit-',Gecko:'-moz-',Trident:'-ms-',Presto:'-o-',Other:''},stylePrefixes:{WebKit:'Webkit',Gecko:'Moz',Trident:'ms',Presto:'O',Other:''},propertyPrefixes:{WebKit:'webkit',Gecko:'moz',Trident:'ms',Presto:'o',Other:''},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(b,a,c){if(a===undefined){a=!0}this.is[b]=a;this.is[b.toLowerCase()]=a;if(c){Ext['is'+b]=a}return this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(b){var a=this.propertyPrefixes[this.engineName];if(a.length>0){return a+Ext.String.capitalize(b)}return b}};(function(a){Ext.browser=new Ext.env.Browser(a,!0);Ext.userAgent=a.toLowerCase();Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":'about:blank'})(Ext.global.navigator.userAgent);Ext.env.OS=function(e,i,b){var n=this,h=Ext.Boot.osNames,j=Ext.Boot.osPrefixes,a,c='',m=n.is,d,l,g,k,f;b=b||Ext.browser;for(d in j){if(j.hasOwnProperty(d)){l=j[d];g=e.match(new RegExp('(?:'+l+')([^\\s;]+)'));if(g){a=h[d];f=g[1];if(f&&f==='HTC_'){c=new Ext.Version('2.3')}else {if(f&&f==='Silk/'){c=new Ext.Version('2.3')}else {c=new Ext.Version(g[g.length-1])}}break}}}if(!a){a=h[(e.toLowerCase().match(/mac|win|linux/)||['other'])[0]];c=new Ext.Version('')}this.name=a;this.version=c;if(e.match(/ipad/i)||!e.match(/iphone/i)&&e.match(/Mac/)&&navigator.maxTouchPoints>2){a='iOS';i='iPad'}if(i){this.setFlag(i.replace(/ simulator$/i,''))}this.setFlag(a);if(c){this.setFlag(a+(c.getMajor()||''));this.setFlag(a+c.getShortVersion())}for(d in h){if(h.hasOwnProperty(d)){k=h[d];if(!m.hasOwnProperty(a)){this.setFlag(k,a===k)}}}if(this.name==='iOS'&&window.screen.height===568){this.setFlag('iPhone5')}if(b.is.Safari||b.is.Silk){if(this.is.Android2||this.is.Android3||b.version.shortVersion===501){b.setFlag('AndroidStock')}if(this.is.Android4){b.setFlag('AndroidStock');b.setFlag('AndroidStock4')}}};Ext.env.OS.prototype={constructor:Ext.env.OS,is:function(a){return !!this[a]},name:null,version:null,setFlag:function(b,a){if(a===undefined){a=!0}if(this.flags){this.flags[b]=a}this.is[b]=a;this.is[b.toLowerCase()]=a;return this}};(function(){var h=Ext.global.navigator,i=h.userAgent,e=Ext.env.OS,f=Ext.is||(Ext.is={}),a,c,b;e.prototype.flags=f;Ext.os=a=new e(i,h.platform);c=a.name;Ext['is'+c]=!0;Ext.isMac=f.Mac=f.MacOS;Ext.isApple=Ext.isMac||Ext.isiOS;var d=window.location.search.match(/deviceType=(Tablet|Phone)/),g=window.deviceType;if(d&&d[1]){b=d[1]}else {if(g==='iPhone'){b='Phone'}else {if(g==='iPad'){b='Tablet'}else {if(!a.is.Android&&!a.is.iOS&&!a.is.WindowsPhone&&/Windows|Linux|MacOS|ChromeOS/.test(c)){b='Desktop';Ext.browser.is.WebView=!!Ext.browser.is.Ripple}else {if(a.is.iPad||a.is.RIMTablet||a.is.Android3||Ext.browser.is.Silk||a.is.Android&&i.search(/mobile/i)===-1){b='Tablet'}else {b='Phone'}}}}}if(b==='Tablet'&&c==='MacOS'){Ext.isiOS=!0;Ext.isiPadOS=!0}a.setFlag(b,!0);a.deviceType=b;delete e.prototype.flags})();Ext.feature={has:function(a){return !!this.has[a]},testElements:{},getTestElement:function(a,b){if(a===undefined){a='div'}else {if(typeof a!=='string'){return a}}if(b){return document.createElement(a)}if(!this.testElements[a]){this.testElements[a]=document.createElement(a)}return this.testElements[a]},isStyleSupported:function(a,d){var b=this.getTestElement(d).style,c=Ext.String.capitalize(a);if(typeof b[a]!=='undefined'||typeof b[Ext.browser.getStylePrefix(a)+c]!=='undefined'){return !0}return !1},isStyleSupportedWithoutPrefix:function(b,c){var a=this.getTestElement(c).style;if(typeof a[b]!=='undefined'){return !0}return !1},isEventSupported:function(e,d){if(d===undefined){d=window}var a=this.getTestElement(d),b='on'+e.toLowerCase(),c=b in a;if(!c){if(a.setAttribute&&a.removeAttribute){a.setAttribute(b,'');c=typeof a[b]==='function';if(typeof a[b]!=='undefined'){a[b]=undefined}a.removeAttribute(b)}}return c},getStyle:function(a,c){var b=a.ownerDocument.defaultView,d=b?b.getComputedStyle(a,null):a.currentStyle;return (d||a.style)[c]},getSupportedPropertyName:function(c,a){var b=Ext.browser.getVendorProperyName(a);if(b in c){return b}else {if(a in c){return a}}return null},detect:function(h){var c=this,g=document,m=c.toRun||c.tests,i=m.length,f=g.createElement('div'),k=[],j=Ext.supports,n=c.has,a,e,b,l,d;f.innerHTML='<div style="height:30px;width:50px;">'+'<div style="height:20px;width:20px;"></div>'+'</div>'+'<div style="width: 200px; height: 200px; position: relative; padding: 5px;">'+'<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>'+'</div>'+'<div style="position: absolute; left: 10%; top: 10%;"></div>'+'<div style="float:left; background-color:transparent;"></div>';if(h){g.body.appendChild(f)}l=c.preDetected[Ext.browser.identity]||[];while(i--){b=m[i];d=l[i];a=b.name;e=b.names;if(d===undefined){if(!h&&b.ready){k.push(b);continue}d=b.fn.call(c,g,f)}if(a){j[a]=n[a]=d}else {if(e){while(e.length){a=e.pop();j[a]=n[a]=d}}}}if(h){g.body.removeChild(f)}c.toRun=k},report:function(){var b=[],c=this.tests.length,a;for(a=0;a<c;++a){b.push(this.has[this.tests[a].name]?1:0)}Ext.log(Ext.browser.identity+': ['+b.join(',')+']')},preDetected:{},tests:[{name:'CloneNodeCopiesExpando',fn:function(){var a=document.createElement('div');a.expandoProp={};return a.cloneNode().expandoProp===a.expandoProp}},{name:'CSSPointerEvents',fn:function(a){return 'pointerEvents' in a.documentElement.style}},{name:'CSS3BoxShadow',fn:function(a){return 'boxShadow' in a.documentElement.style||'WebkitBoxShadow' in a.documentElement.style||'MozBoxShadow' in a.documentElement.style}},{name:'CSS3NegationSelector',fn:function(a){try{a.querySelectorAll('foo:not(bar)')}catch(b){return !1}return !0}},{name:'ClassList',fn:function(a){return !!a.documentElement.classList}},{name:'Canvas',fn:function(){var a=this.getTestElement('canvas');return !!(a&&a.getContext&&a.getContext('2d'))}},{name:'Svg',fn:function(a){return !!(a.createElementNS&&!!a.createElementNS('http:/'+'/www.w3.org/2000/svg','svg').createSVGRect)}},{name:'Vml',fn:function(){var a=this.getTestElement(),b=!1;a.innerHTML='<!--[if vml]><br><![endif]-->';b=a.childNodes.length===1;a.innerHTML='';return b}},{name:'Touch',fn:function(){var a=navigator.msMaxTouchPoints||navigator.maxTouchPoints;if(Ext.browser.is.Chrome&&Ext.browser.version.isLessThanOrEqual(39)){return Ext.supports.TouchEvents&&a!==1||a>1}else {return Ext.supports.TouchEvents||a>0}}},{name:'PointerEvents',fn:function(){var b=window.PointerEvent,c=window.navigator,a=!!(b&&(c.pointerEnabled||!Ext.isIE));return a&&!Ext.supports.TouchEvents}},{name:'MSPointerEvents',fn:function(){return Ext.isIE10}},{name:'TouchEvents',fn:function(){return this.isEventSupported('touchend')}},{name:'TouchAction',ready:!0,fn:function(h,e){if(!window.getComputedStyle){return 0}var c=['pan-x','pan-y','pinch-zoom','double-tap-zoom'],f=[1,2,4,8],g=c.length,d=0,a,b;for(a=0;a<g;a++){b=c[a];e.style.touchAction=b;if(getComputedStyle(e).touchAction===b){d|=f[a]}}return d}},{name:'Orientation',fn:function(){return 'orientation' in window&&this.isEventSupported('orientationchange')}},{name:'OrientationChange',fn:function(){return this.isEventSupported('orientationchange')}},{name:'DeviceMotion',fn:function(){return this.isEventSupported('devicemotion')}},{names:['Geolocation','GeoLocation'],fn:function(){return 'geolocation' in window.navigator}},{name:'SqlDatabase',fn:function(){return 'openDatabase' in window}},{name:'WebSockets',fn:function(){return 'WebSocket' in window}},{name:'Range',fn:function(){return !!document.createRange}},{name:'CreateContextualFragment',fn:function(){var a=!!document.createRange?document.createRange():!1;return a&&!!a.createContextualFragment}},{name:'History',fn:function(){return 'history' in window&&'pushState' in window.history}},{name:'Css3dTransforms',fn:function(){return this.has('CssTransforms')&&this.isStyleSupported('perspective')}},{name:'CssTransforms',fn:function(){return this.isStyleSupported('transform')}},{name:'CssTransformNoPrefix',fn:function(){return this.isStyleSupportedWithoutPrefix('transform')}},{name:'CssAnimations',fn:function(){return this.isStyleSupported('animationName')}},{names:['CssTransitions','Transitions'],fn:function(){return this.isStyleSupported('transitionProperty')}},{names:['Audio','AudioTag'],fn:function(){return !!this.getTestElement('audio').canPlayType}},{name:'Video',fn:function(){return !!this.getTestElement('video').canPlayType}},{name:'LocalStorage',fn:function(){try{if('localStorage' in window&&window['localStorage']!==null){localStorage.setItem('sencha-localstorage-test','test success');localStorage.removeItem('sencha-localstorage-test');return !0}}catch(a){}return !1}},{name:'XmlQuerySelector',fn:function(){var b='<?xml version="1.0" encoding="UTF-8" standalone="yes" ?><root></root>',a;if(window.ActiveXObject){a=new ActiveXObject('Microsoft.xmlDOM');a.async=!1;a.loadXML(b)}else {if(window.DOMParser){var c=new DOMParser();a=c.parseFromString(b,'text/xml')}}return a?!!a.lastChild.querySelector:!1}},{name:'XHR2',fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&'withCredentials' in new XMLHttpRequest()}},{name:'XHRUploadProgress',fn:function(){var a;if(window.XMLHttpRequest&&!Ext.browser.is.AndroidStock){a=new XMLHttpRequest();return a&&'upload' in a&&'onprogress' in a.upload}return !1}},{name:'NumericInputPlaceHolder',fn:function(){return !(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:'matchesSelector',fn:function(){var a=document.documentElement,d='matches',e='webkitMatchesSelector',b='msMatchesSelector',c='mozMatchesSelector';return a[d]?d:a[e]?e:a[b]?b:a[c]?c:null}},{name:'RightMargin',ready:!0,fn:function(c,b){var a=c.defaultView;return !(a&&a.getComputedStyle(b.firstChild.firstChild,null).marginRight!=='0px')}},{name:'DisplayChangeInputSelectionBug',fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{name:'DisplayChangeTextAreaSelectionBug',fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{name:'TransparentColor',ready:!0,fn:function(c,b,a){a=c.defaultView;return !(a&&a.getComputedStyle(b.lastChild,null).backgroundColor!=='transparent')}},{name:'ComputedStyle',ready:!0,fn:function(b,c,a){a=b.defaultView;return !!(a&&a.getComputedStyle)}},{name:'Float',fn:function(a){return 'cssFloat' in a.documentElement.style}},{name:'CSS3BorderRadius',ready:!0,fn:function(d){var b=['borderRadius','BorderRadius','MozBorderRadius','WebkitBorderRadius','OBorderRadius','KhtmlBorderRadius'],c=!1,a;for(a=0;a<b.length;a++){if(d.documentElement.style[b[a]]!==undefined){c=!0}}return c&&!Ext.isIE9}},{name:'CSS3LinearGradient',fn:function(i,c){var a='background-image:',e='-webkit-gradient(linear, left top, right bottom, from(black), to(white))',b='linear-gradient(left top, black, white)',g='-moz-'+b,h='-ms-'+b,f='-o-'+b,d=[a+e,a+b,a+g,a+h,a+f];c.style.cssText=d.join(';');return (''+c.style.backgroundImage).indexOf('gradient')!==-1&&!Ext.isIE9}},{name:'MouseEnterLeave',fn:function(a){return 'onmouseenter' in a.documentElement&&'onmouseleave' in a.documentElement}},{name:'MouseWheel',fn:function(a){return 'onmousewheel' in a.documentElement}},{name:'Opacity',fn:function(b,a){if(Ext.isIE8){return !1}a.firstChild.style.cssText='opacity:0.73';return a.firstChild.style.opacity=='0.73'}},{name:'Placeholder',fn:function(a){return 'placeholder' in a.createElement('input')}},{name:'Direct2DBug',fn:function(a){return Ext.isString(a.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:'BoundingClientRect',fn:function(a){return 'getBoundingClientRect' in a.documentElement}},{name:'RotatedBoundingClientRect',ready:!0,fn:function(e){var d=e.body,c=!1,b=e.createElement('div'),a=b.style;if(b.getBoundingClientRect){a.position='absolute';a.top='0';a.WebkitTransform=a.MozTransform=a.msTransform=a.OTransform=a.transform='rotate(90deg)';a.width='100px';a.height='30px';d.appendChild(b);c=b.getBoundingClientRect().height!==100;d.removeChild(b)}return c}},{name:'ChildContentClearedWhenSettingInnerHTML',ready:!0,fn:function(){var a=this.getTestElement(),b;a.innerHTML='<div>a</div>';b=a.firstChild;a.innerHTML='<div>b</div>';return b.innerHTML!=='a'}},{name:'IncludePaddingInWidthCalculation',ready:!0,fn:function(b,a){return a.childNodes[1].firstChild.offsetWidth===210}},{name:'IncludePaddingInHeightCalculation',ready:!0,fn:function(b,a){return a.childNodes[1].firstChild.offsetHeight===210}},{name:'TextAreaMaxLength',fn:function(a){return 'maxlength' in a.createElement('textarea')}},{name:'GetPositionPercentage',ready:!0,fn:function(b,a){return Ext.feature.getStyle(a.childNodes[2],'left')==='10%'}},{name:'PercentageHeightOverflowBug',ready:!0,fn:function(d){var c=!1,b,a;if(Ext.getScrollbarSize().height){a=this.getTestElement('div',!0);b=a.style;b.height='50px';b.width='50px';b.overflow='auto';b.position='absolute';a.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>','</div>'].join('');d.body.appendChild(a);if(a.firstChild.offsetHeight===50){c=!0}d.body.removeChild(a)}return c}},{name:'xOriginBug',ready:!0,fn:function(e,b){b.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll">'+'<div id="b2" style="position:relative;width:100%;height:20px;"></div>'+'<div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div>'+'</div>';var a=document.getElementById('b1').getBoundingClientRect(),c=document.getElementById('b2').getBoundingClientRect(),d=document.getElementById('b3').getBoundingClientRect();return c.left!==a.left&&d.right!==a.right}},{name:'ScrollWidthInlinePaddingBug',ready:!0,fn:function(c){var d=!1,a,b;b=c.createElement('div');a=b.style;a.height='50px';a.width='50px';a.padding='10px';a.overflow='hidden';a.position='absolute';b.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>';c.body.appendChild(b);if(b.scrollWidth===70){d=!0}c.body.removeChild(b);return d}},{name:'rtlVertScrollbarOnRight',ready:!0,fn:function(d,c){c.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll">'+'<div style="width:20px;height:200px;"></div>'+'</div>';var a=c.firstChild,b=a.firstChild;return b.offsetLeft+b.offsetWidth!==a.offsetLeft+a.offsetWidth}},{name:'rtlVertScrollbarOverflowBug',ready:!0,fn:function(e,c){c.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto">'+'<div style="width:95px;height:200px;"></div>'+'</div>';var a=c.firstChild,b=c.style,d=b.position;b.position='absolute';a.offsetHeight;b.position=d;return a.clientHeight===a.offsetHeight}},{identity:'defineProperty',fn:function(){if(Ext.isIE8m){Ext.Object.defineProperty=Ext.emptyFn;return !1}return !0}},{identify:'nativeXhr',fn:function(){if(typeof XMLHttpRequest!=='undefined'){return !0}XMLHttpRequest=function(){try{return new ActiveXObject('MSXML2.XMLHTTP.3.0')}catch(a){return null}};return !1}},{name:'SpecialKeyDownRepeat',fn:function(){return Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!(!(Ext.isGecko||Ext.isIE||Ext.isEdge)||Ext.isOpera&&Ext.operaVersion<12)}},{name:'EmulatedMouseOver',fn:function(){return Ext.os.is.iOS}},{name:'Hashchange',fn:function(){var a=document.documentMode;return 'onhashchange' in window&&(a===undefined||a>7)}},{name:'FixedTableWidthBug',ready:!0,fn:function(){if(Ext.isIE8){return !1}var a=document.createElement('div'),b=document.createElement('div'),c;a.setAttribute('style','display:table;table-layout:fixed;');b.setAttribute('style','display:table-cell;min-width:50px;');a.appendChild(b);document.body.appendChild(a);a.offsetWidth;a.style.width='25px';c=a.offsetWidth;document.body.removeChild(a);return c===50}},{name:'FocusinFocusoutEvents',fn:function(){return !(Ext.isGecko&&Ext.firefoxVersion<52)}},{name:'AsyncFocusEvents',fn:function(){return Ext.asyncFocus=!!Ext.isIE}},{name:'accessibility',ready:!0,fn:function(f){var g=f.body,b,c,a,e,d;function getColor(a){var c=[],e=0,g,b;if(a.indexOf('rgb(')!==-1){c=a.replace('rgb(','').replace(')','').split(', ')}else {if(a.indexOf('#')!==-1){g=a.length===7?/^#(\S\S)(\S\S)(\S\S)$/:/^#(\S)(\S)(\S)$/;b=a.match(g);if(b){c=['0x'+b[1],'0x'+b[2],'0x'+b[3]]}}}for(var d=0;d<c.length;d++){e+=parseInt(c[d])}return e}b=f.createElement('div');c=f.createElement('img');a=b.style;Ext.apply(a,{width:'2px',position:'absolute',clip:'rect(1px,1px,1px,1px)',borderWidth:'1px',borderStyle:'solid',borderTopTolor:'#f00',borderRightColor:'#ff0',backgroundColor:'#fff',backgroundImage:'url('+Ext.BLANK_IMAGE_URL+')'});c.alt='';c.src=Ext.BLANK_IMAGE_URL;b.appendChild(c);g.appendChild(b);a=b.currentStyle||b.style;d=a.backgroundImage;e={Images:c.offsetWidth===1&&c.readyState!=='uninitialized',BackgroundImages:!(d!==null&&(d==='none'||d==='url(invalid-url:)')),BorderColors:a.borderTopColor!==a.borderRightColor,LightOnDark:getColor(a.color)-getColor(a.backgroundColor)>0};Ext.supports.HighContrastMode=!e.BackgroundImages;g.removeChild(b);b=c=null;return e}},{name:'ViewportUnits',ready:!0,fn:function(f){if(Ext.isIE8){return !1}var d=f.body,a=document.createElement('div'),e=a.currentStyle||a.style,c,b;d.appendChild(a);Ext.apply(e,{width:'50vw'});c=parseInt(window.innerWidth/2,10);b=parseInt((window.getComputedStyle?getComputedStyle(a,null):a.currentStyle).width,10);d.removeChild(a);a=null;return c===b}},{name:'CSSVariables',ready:!1,fn:function(){if(!window.getComputedStyle){return !1}return window.CSS&&window.CSS.supports&&window.CSS.supports('--test-var',0)}},{name:'Selectors2',ready:!1,fn:function(a){try{return !!a.querySelectorAll(':scope')}catch(b){return !1}}},{name:'CSSScrollSnap',ready:!1,fn:function(b){var a=b.documentElement.style;return 'scrollSnapType' in a||'webkitScrollSnapType' in a||'msScrollSnapType' in a}},{name:'TranslateYCausesHorizontalScroll',ready:!0,fn:function(b,a){a.innerHTML='<div style="position: relative; overflow: auto; height: 200px; width: 200px;">'+'<div>'+'<div style="transform: translateY(260px); width: 50px;">a</div>'+'</div>'+'</div>';return a.firstChild.scrollWidth>a.firstChild.clientWidth}},{name:'FlexBoxBasisBug',ready:!0,fn:function(){if(Ext.isIE11||Ext.os.is.iOS&&Ext.os.version.major<=10||Ext.isSafari&&Ext.browser.version.isLessThan(11)||Ext.os.is.Android&&Ext.os.version.isLessThan(6)){return !0}return !1}},{name:'PercentageSizeFlexBug',ready:!0,fn:function(c,b){if(Ext.isIE9m){return !1}var a=b.style;a.display='flex';a.flexDirection='column';a.height=a.width='100px';b.innerHTML='<div style="flex: 1 1;"><div style="height:50%"></div></div>';return b.firstChild.firstChild.offsetHeight!==50}},{name:'CannotScrollExactHeight',fn:function(){return Ext.isIE10p}},{name:'WebKitInputTableBoxModelBug',ready:!0,fn:function(i,j){var c=document.createElement('div'),d=document.createElement('div'),b=document.createElement('input'),e=c.style,h=d.style,a=b.style,g=i.body,f;b.type='text';e.display='table';e.height='100px';h.display='table-cell';a.border='0';a.padding='10px';a.boxSizing='border-box';a.height='100%';d.appendChild(b);c.appendChild(d);g.appendChild(c);f=b.offsetHeight===80;g.removeChild(c);return f}},{name:'PassiveEventListener',fn:function(d,c){var b=!1,a;try{a=Object.defineProperty({},'passive',{get:function(){b=!0}});window.addEventListener('e',null,a);window.removeEventListener('e',null,a)}catch(e){}return b}},{name:'CSSMinContent',ready:!0,fn:function(b,a){a.innerHTML='<div style="height:4px;width:4px;min-height:-webkit-min-content;min-height:-moz-min-content;min-height:min-content"><div style="height:8px;width:8px"></div></div>';return a.firstChild.offsetHeight===8}},{name:'ComputedSizeIncludesPadding',ready:!0,fn:function(f,e){var b=!1,c=document.body,a,d;if(window.getComputedStyle){a=document.createElement('div');a.style.cssText='width:10px;padding:2px;'+'-webkit-box-sizing:border-box;box-sizing:border-box;';c.appendChild(a);d=window.getComputedStyle(a,null).width;b=d==='10px';c.removeChild(a)}return b}},{name:'inputEventData',ready:!1,fn:function(){return !!(window.InputEvent&&'data' in new InputEvent('input'))}},0]};Ext.feature.tests.pop();Ext.supports={};Ext.feature.detect();Ext.env.Ready={blocks:(location.search||'').indexOf('ext-pauseReadyFire')>0?1:0,bound:0,delay:1,firing:!1,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var a=Ext.env.Ready,b=document;if(!a.bound){if(b.readyState==='complete'){a.onReadyEvent({type:b.readyState||'body'})}else {a.bound=1;if(Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop){a.bound=2;b.addEventListener('deviceready',a.onReadyEvent,!1)}b.addEventListener('DOMContentLoaded',a.onReadyEvent,!1);window.addEventListener('load',a.onReadyEvent,!1)}}},block:function(){++this.blocks;Ext.isReady=!1},fireReady:function(){var a=Ext.env.Ready;if(!a.state){Ext._readyTime=Ext.ticks();Ext.isDomReady=!0;a.state=1;Ext.feature.detect(!0);if(!a.delay){a.handleReady()}else {if(navigator.standalone){a.timer=Ext.defer(function(){a.timer=null;a.handleReadySoon()},1)}else {a.handleReadySoon()}}}},handleReady:function(){var a=this;if(a.state===1){a.state=2;Ext._beforeReadyTime=Ext.ticks();a.invokeAll();Ext._afterReadyTime=Ext.ticks()}},handleReadySoon:function(b){var a=this;if(!a.timer){a.timer=Ext.defer(function(){a.timer=null;a.handleReady()},b||a.delay)}},invoke:function(a){var b=a.delay;if(b){Ext.defer(a.fn,b,a.scope)}else {if(Ext.elevateFunction){Ext.elevateFunction(a.fn,a.scope)}else {a.fn.call(a.scope)}}},invokeAll:function(){if(Ext.elevateFunction){Ext.elevateFunction(this.doInvokeAll,this)}else {this.doInvokeAll()}},doInvokeAll:function(){var a=this,b=a.listeners,c;if(!a.blocks){Ext.isReady=!0}a.firing=!0;while(b.length){if(a.sortGeneration!==a.generation){a.sortGeneration=a.generation;b.sort(a.sortFn)}c=b.pop();if(a.blocks&&!c.dom){b.push(c);break}a.invoke(c)}a.firing=!1},makeListener:function(d,c,b){var a={fn:d,id:++this.nextId,scope:c,dom:!1,priority:0};if(b){Ext.apply(a,b)}a.phase=a.dom?0:1;return a},on:function(e,d,c){var a=Ext.env.Ready,b=a.makeListener(e,d,c);if(a.state===2&&!a.firing&&(b.dom||!a.blocks)){a.invoke(b)}else {a.listeners.push(b);++a.generation;if(!a.bound){a.bind()}}},onReadyEvent:function(b){var a=Ext.env.Ready;if(Ext.elevateFunction){Ext.elevateFunction(a.doReadyEvent,a,arguments)}else {a.doReadyEvent(b)}},doReadyEvent:function(b){var a=this;if(a.bound>0){a.unbind();a.bound=-1}if(!a.state){a.fireReady()}},sortFn:function(a,b){return -(a.phase-b.phase||b.priority-a.priority||a.id-b.id)},unblock:function(){var a=this;if(a.blocks){if(!--a.blocks){if(a.state===2&&!a.firing){a.invokeAll()}}}},unbind:function(){var a=this,b=document;if(a.bound>1){b.removeEventListener('deviceready',a.onReadyEvent,!1)}b.removeEventListener('DOMContentLoaded',a.onReadyEvent,!1);window.removeEventListener('load',a.onReadyEvent,!1)}};(function(){var a=Ext.env.Ready;if(Ext.isIE9m){Ext.apply(a,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var b=!0;try{document.documentElement.doScroll('left')}catch(c){b=!1}if(b&&document.body){a.onReadyEvent({type:'doScroll'})}else {a.scrollTimer=Ext.defer(a.pollScroll,20)}return b},bind:function(){var b=document,c;if(a.bound){return}try{c=window.frameElement===undefined}catch(d){}if(!c||!b.documentElement.doScroll){a.pollScroll=Ext.emptyFn}else {if(a.pollScroll()){return}}if(b.readyState==='complete'){a.onReadyEvent({type:'already '+(b.readyState||'body')})}else {b.attachEvent('onreadystatechange',a.onReadyStateChange);window.attachEvent('onload',a.onReadyEvent);a.bound=1}},unbind:function(){document.detachEvent('onreadystatechange',a.onReadyStateChange);window.detachEvent('onload',a.onReadyEvent);if(Ext.isNumber(a.scrollTimer)){Ext.undefer(a.scrollTimer);a.scrollTimer=null}},onReadyStateChange:function(){var b=document.readyState;if(a.readyStatesRe.test(b)){a.onReadyEvent({type:b})}}})}Ext.onDocumentReady=function(e,d,b){var c={dom:!0};if(b){Ext.apply(c,b)}a.on(e,d,c)};Ext.onReady=function(d,c,b){a.on(d,c,b)};Ext.onInternalReady=function(d,c,b){a.on(d,c,Ext.apply({priority:1000},b))};a.bind()})();Ext.Loader=new function(){var a=this,b=Ext.ClassManager,h=Ext.Boot,n=Ext.Class,c=Ext.env.Ready,j=Ext.Function.alias,g=['extend','mixins','requires'],i={},l=[],e=[],f=[],k={},d={enabled:!0,scriptChainDelay:!1,disableCaching:!0,disableCachingParam:'_dc',paths:b.paths,preserveScripts:!0,scriptCharset:undefined},m={disableCaching:!0,disableCachingParam:!0,preserveScripts:!0,scriptChainDelay:'loadDelay'};Ext.apply(a,{isInHistory:i,isLoading:!1,history:l,config:d,readyListeners:e,optionalRequires:f,requiresMap:k,hasFileLoadError:!1,scriptsLoading:0,classesLoading:{},missingCount:0,missingQueue:{},syncModeEnabled:!1,init:function(){var k=document.getElementsByTagName('script'),m=k[k.length-1].src,n=m.substring(0,m.lastIndexOf('/')+1),l=Ext._classPathMetadata,h=Ext.Microloader,g=Ext.manifest,d,i,j,f,e;if(!b.getPath('Ext')){b.setPath('Ext',n+'src')}if(l){Ext._classPathMetadata=null;a.addClassPathMappings(l)}if(g){d=g.loadOrder;i=Ext.Boot.baseUrl;if(d&&g.bootRelative){for(j=d.length,f=0;f<j;f++){e=d[f];e.path=i+e.path;e.canonicalPath=!0}}}if(h){c.block();h.onMicroloaderReady(function(){c.unblock()})}},setConfig:Ext.Function.flexSetter(function(b,e){var c=m[b];if(b==='paths'){a.setPath(e)}else {d[b]=e;if(c){h.setConfig(c===!0?b:c,e)}}return a}),getConfig:function(a){return a?d[a]:d},setPath:function(){b.setPath.apply(b,arguments);return a},addClassPathMappings:function(c){b.setPath(c);return a},addBaseUrlClassPathMappings:function(a){var b;for(b in a){a[b]=h.baseUrl+a[b]}Ext.Loader.addClassPathMappings(a)},getPath:function(a){return b.getPath(a)},require:function(c,g,f,e){var d;if(e){return a.exclude(e).require(c,g,f)}d=b.getNamesByExpression(c);return a.load(d,g,f)},syncRequire:function(){var c=a.syncModeEnabled,b;a.syncModeEnabled=!0;b=a.require.apply(a,arguments);a.syncModeEnabled=c;return b},exclude:function(d){var c=b.select({require:function(b,e,c){return a.load(b,e,c)},syncRequire:function(c,g,f){var e=a.syncModeEnabled,b;a.syncModeEnabled=!0;b=a.load(c,g,f);a.syncModeEnabled=e;return b}});c.exclude(d);return c},load:function(g,c,k){if(c){if(c.length){c=a.makeLoadCallback(g,c)}c=c.bind(k||Ext.global)}var n=b.classState,f=[],l=[],j={},m=g.length,e,h,i;for(h=0;h<m;++h){e=b.resolveName(g[h]);if(!b.isCreated(e)){f.push(e);if(!n[e]){j[e]=a.getPath(e);l.push(j[e])}}}i=f.length;if(i){a.missingCount+=i;b.onCreated(function(){if(c){Ext.callback(c,k,arguments)}a.checkReady()},a,f);if(!d.enabled){Ext.raise('Ext.Loader is not enabled, so dependencies cannot be resolved '+'dynamically. Missing required class'+(f.length>1?'es':'')+': '+f.join(', '))}if(l.length){a.loadScripts({url:l,_classNames:f,_urlByClass:j})}else {a.checkReady()}}else {if(c){c.call(k)}a.checkReady()}if(a.syncModeEnabled){if(m===1){return b.get(g[0])}}return a},makeLoadCallback:function(a,c){return function(){var e=[],d=a.length;while(d-->0){e[d]=b.get(a[d])}return c.apply(this,e)}},onLoadFailure:function(h){var d=this,f=h.entries||[],g=d.onError,b,e,c;a.hasFileLoadError=!0;--a.scriptsLoading;if(g){for(c=0;c<f.length;c++){e=f[c];if(e.error){b=new Error('Failed to load: '+e.url);break}}b=b||new Error('Failed to load');g.call(d.userScope,d,b,h)}a.checkReady()},onLoadSuccess:function(){var c=this,g=c.onLoad,f=c._classNames,j=c._urlByClass,k=b.classState,i=a.missingQueue,d,e,h;--a.scriptsLoading;if(g){g.call(c.userScope,c)}for(e=0,h=f.length;e<h;e++){d=f[e];if(!k[d]){i[d]=j[d]}}a.checkReady()},onReady:function(g,f,h,d){var b;if(h){c.on(g,f,d)}else {b=c.makeListener(g,f,d);if(a.isLoading){e.push(b)}else {c.invoke(b)}}},addUsedClasses:function(b){var c,d,e;if(b){b=typeof b==='string'?[b]:b;for(d=0,e=b.length;d<e;d++){c=b[d];if(typeof c==='string'&&!Ext.Array.contains(f,c)){f.push(c)}}}return a},triggerReady:function(){var d,b=f;if(a.isLoading&&b.length){f=[];a.require(b)}else {a.isLoading=!1;e.sort(c.sortFn);while(e.length&&!a.isLoading){d=e.pop();c.invoke(d)}c.unblock()}},historyPush:function(c){if(c&&!i[c]&&!b.overrideMap[c]){i[c]=!0;l.push(c)}return a},loadScripts:function(g){var c=Ext.manifest,f=c&&c.loadOrder,e=c&&c.loadOrderMap,b;++a.scriptsLoading;if(f&&!e){c.loadOrderMap=e=h.createLoadOrderMap(f)}a.checkReady();b=Ext.apply({loadOrder:f,loadOrderMap:e,charset:d.scriptCharset,success:a.onLoadSuccess,failure:a.onLoadFailure,sync:a.syncModeEnabled,_classNames:[]},g);b.userScope=b.scope;b.scope=b;h.load(b)},loadScriptsSync:function(c){var b=a.syncModeEnabled;a.syncModeEnabled=!0;a.loadScripts({url:c});a.syncModeEnabled=b},loadScriptsSyncBasePrefix:function(c){var b=a.syncModeEnabled;a.syncModeEnabled=!0;a.loadScripts({url:c,prependBaseUrl:!0});a.syncModeEnabled=b},loadScript:function(b){var d=typeof b==='string',e=b instanceof Array,c=!e&&!d,j=c?b.url:b,f=c&&b.onError,h=c&&b.onLoad,i=c&&b.scope,g={url:j,scope:i,onLoad:h,onError:f,_classNames:[]};a.loadScripts(g)},checkMissingQueue:function(){var d=a.missingQueue,e={},f=0,c;for(c in d){if(!(b.classState[c]||b.isCreated(c))){e[c]=d[c];f++}}a.missingCount=f;a.missingQueue=e},checkReady:function(){var d=a.isLoading,b;a.checkMissingQueue();b=a.missingCount+a.scriptsLoading;if(b&&!d){c.block();a.isLoading=!!b}else {if(!b&&d){a.triggerReady()}}}});Ext.require=j(a,'require');Ext.syncRequire=j(a,'syncRequire');Ext.exclude=j(a,'exclude');n.registerPreprocessor('loader',function(n,f,q,p){var r=this,i=[],t,j=b.getName(n),l,h,o,m,d,e,c,s;for(l=0,o=g.length;l<o;l++){e=g[l];if(f.hasOwnProperty(e)){c=f[e];if(typeof c==='string'){i.push(c)}else {if(c instanceof Array){for(h=0,m=c.length;h<m;h++){d=c[h];if(typeof d==='string'){i.push(d)}}}else {if(typeof c!=='function'){for(h in c){if(c.hasOwnProperty(h)){d=c[h];if(typeof d==='string'){i.push(d)}}}}}}}}if(i.length===0){return}if(j){k[j]=i}(j?a.exclude(j):a).require(i,function(){var h,k,a,j,i;for(h=0,k=g.length;h<k;h++){e=g[h];if(f.hasOwnProperty(e)){c=f[e];if(typeof c==='string'){f[e]=b.get(c)}else {if(c instanceof Array){for(a=0,j=c.length;a<j;a++){d=c[a];if(typeof d==='string'){f[e][a]=b.get(d)}}}else {if(typeof c!=='function'){for(i in c){if(c.hasOwnProperty(i)){d=c[i];if(typeof d==='string'){f[e][i]=b.get(d)}}}}}}}}p.call(r,n,f,q)});return !1},!0,'after','className');b.registerPostprocessor('uses',function(f,g,d){var e=d.uses,c;if(e){c=b.getNamesByExpression(d.uses);a.addUsedClasses(c)}});b.onCreated(a.historyPush);a.init()}();Ext._endTime=Ext.ticks();if(Ext._beforereadyhandler){Ext._beforereadyhandler()}Ext.define('Ext.Mixin',function(a){return {statics:{addHook:function(e,c,d,h){var g=Ext.isFunction(e),b=function(){var b=arguments,i=g?e:h[e],f=this.callParent(b);i.apply(this,b);return f},f=c.hasOwnProperty(d)&&c[d];if(g){e.$previous=Ext.emptyFn}b.$name=d;b.$owner=c.self;if(f){b.$previous=f.$previous;f.$previous=b}else {c[d]=b}}},onClassExtended:function(n,c){var b=c.mixinConfig,d=c.xhooks,m=n.superclass,l=c.onClassMixedIn,k=c.afterClassMixedIn,g,f,j,e,h,i;if(d){delete c.xhooks;(b||(c.mixinConfig=b={})).on=d}if(b){i=m.mixinConfig;if(i){c.mixinConfig=b=Ext.merge({},i,b)}c.mixinId=b.id;g=b.after;f=b.before;j=b.configs;e=b.extended;d=b.on;h=b.mixed}if(g||f||d||e){c.onClassMixedIn=function(b){var h=this.prototype,j=b.prototype,i;if(f){Ext.Object.each(f,function(e,d){b.hookMember(e,function(){if(h[d].apply(this,arguments)!==!1){return this.callParent(arguments)}})})}if(g){Ext.Object.each(g,function(e,d){b.hookMember(e,function(){var f=this.callParent(arguments);h[d].apply(this,arguments);return f})})}if(d){for(i in d){a.addHook(d[i],j,i,h)}}if(e){b.onExtended(function(){var d=Ext.Array.slice(arguments,0);d.unshift(b);return e.apply(this,d)},this)}if(l){l.apply(this,arguments)}}}if(j||h){c.afterClassMixedIn=function(g){if(j){var e=g.prototype,i=this.$config.configs,f,b,d;for(b in e){f=i[b];if(f&&f.isConfig&&e.hasOwnProperty(b)){(d||(d={}))[b]=e[b];delete e[b]}}if(d){g.$config.add(d)}}if(k){k.apply(this,arguments)}if(h){h.apply(this,arguments)}}}}}});Ext.util=Ext.util||{};Ext.util.DelayedTask=function(c,b,g,d,e){var a=this,f,h=function(){a.id=null;if(!(b&&b.destroyed)){if(g){c.apply(b,g)}else {c.call(b)}}if(e===!1){Ext._suppressIdle=!0}};d=typeof d==='boolean'?d:!0;a.id=null;a.delay=function(i,l,j,k){if(d){a.cancel()}if(typeof i==='number'){f=i}c=l||c;b=j||b;g=k||g;a.delayTime=f;if(!a.id){if(f===-1){a.id=Ext.raf(h)}else {a.id=Ext.defer(h,f||1)}}return a.id};a.cancel=function(){if(a.id){if(a.delayTime===-1){Ext.unraf(a.id)}else {Ext.undefer(a.id)}a.id=null}};a.flush=function(){var f;if(a.id){a.cancel();f=e;e=!0;h();e=f}};a.stop=function(h,f){if(h&&h===c&&(!f||f===b)){a.cancel()}}};Ext.define('Ext.util.Event',function(){var d=Array.prototype.slice,c=Ext.Array.insert,b=Ext.Array.toArray,a={};return {isEvent:!0,suspended:0,noOptions:{},constructor:function(a,b){this.name=b;this.observable=a;this.listeners=[]},addListener:function(p,o,b,u,j){var a=this,t=!1,m=a.observable,s=a.name,e,n,i,h,g,l,k,d,f,q,r;if(a.findListener(p,o)===-1){n=a.createListener(p,o,b,u,j);if(a.firing){a.listeners=a.listeners.slice(0)}e=a.listeners;d=k=e.length;i=b&&b.priority;g=a._highestNegativePriorityIndex;l=g!==undefined;if(i){h=i<0;if(!h||l){for(f=h?g:0;f<k;f++){q=e[f].o?e[f].o.priority||0:0;if(q<i){d=f;break}}}else {a._highestNegativePriorityIndex=d}}else {if(l){d=g}}if(!h&&d<=g){a._highestNegativePriorityIndex++}if(d===k){e[k]=n}else {c(e,d,[n])}if(m.isElement){m._getPublisher(s,b.translate===!1).subscribe(m,s,b.delegated!==!1,b.capture)}if(j){r=j.managedListeners||(j.managedListeners=[]);r.push({item:a.observable,ename:b&&b.managedName||a.name,fn:p,scope:o,options:b})}t=!0}return t},createListener:function(g,e,b,l,k){var f=this,i=Ext._namedScopes,j=i[e],a={fn:g,scope:e,ev:f,caller:l,manager:k,namedScope:j,defaultScope:j?e||f.observable:undefined,lateBound:typeof g==='string'},c=g,d=!1,h;if(a.lateBound&&g[2]==='.'){a.defaultScope=null;a.namedScope=i[a.scope=e='up'];a.fn=c=g.substr(3)}if(b){a.o=b;if(b.single){c=f.createSingle(c,a,b,e);d=!0}if(b.target){c=f.createTargeted(c,a,b,e,d);d=!0}if(b.onFrame){c=f.createAnimFrame(c,a,b,e,d);d=!0}if(b.delay){c=f.createDelayed(c,a,b,e,d);d=!0}if(b.buffer){c=f.createBuffered(c,a,b,e,d);d=!0}if(f.observable.isElement){h=b.type;if(h){a.type=h}}}a.fireFn=c;a.wrapped=d;return a},findListener:function(e,d){var c=this.listeners,b=c.length,a;while(b--){a=c[b];if(a){if(a.fn===e&&a.scope==d){return b}}}return -1},removeListener:function(m,l,c){var a=this,k=!1,h=a.observable,i=a.name,b,g,j,e,f,d;c=c!=null?c:a.findListener(m,l);if(c!==-1){b=a.listeners[c];if(a.firing){a.listeners=a.listeners.slice(0)}a.listeners.splice(c,1);if(a._highestNegativePriorityIndex){if(c<a._highestNegativePriorityIndex){a._highestNegativePriorityIndex--}else {if(c===a._highestNegativePriorityIndex&&c===a.listeners.length){delete a._highestNegativePriorityIndex}}}if(b){g=b.o;if(b.task){b.task.cancel();delete b.task}d=b.tasks&&b.tasks.length;if(d){while(d--){b.tasks[d].cancel()}delete b.tasks}b.fireFn.timerId=Ext.undefer(b.fireFn.timerId);j=b.manager;if(j){e=j.managedListeners;if(e){for(d=e.length;d--;){f=e[d];if(f.item===a.observable&&f.ename===i&&f.fn===m&&f.scope===l){e.splice(d,1)}}}}if(h.isElement){h._getPublisher(i,g.translate===!1).unsubscribe(h,i,g.delegated!==!1,g.capture)}}k=!0}return k},clearListeners:function(){var b=this.listeners,c=b.length,a;while(c--){a=b[c];this.removeListener(a.fn,a.scope)}},suspend:function(){++this.suspended},resume:function(){if(this.suspended){--this.suspended}},isSuspended:function(){return this.suspended>0},fireDelegated:function(a,b){this.firingObservable=a;return this.fire.apply(this,b)},fire:function(){var e=this,x=Ext.ComponentQuery,s=e.listeners,t=s.length,q=e.observable,n=q.isElement,w=q.isComponent,v=e.firingObservable,b,f,h,l,c,i,u,m,o,r,j,p,a,k,g;if(!e.suspended&&t>0){e.firing=!0;c=arguments.length?d.call(arguments,0):[];u=c.length;if(n){a=c[0]}for(l=0;l<t;l++){i=s[l];if(!i){continue}b=i.o;if(n){if(o){a.setCurrentTarget(o)}r=i.type;if(r){j=a;a=c[0]=j.chain({type:r,isGesture:!1})}Ext.EventObject=a}p=c;if(b){f=b.delegate;if(f){if(n){m=a.getTarget(typeof f==='function'?f:'#'+a.currentTarget.id+' '+f);if(m){c[1]=m;o=a.currentTarget;a.setCurrentTarget(m)}else {continue}}else {if(w&&!x.is(v,f,q)){continue}}}if(n){if(b.preventDefault){a.preventDefault()}if(b.stopPropagation){a.stopPropagation()}if(b.stopEvent){a.stopEvent()}}c[u]=b;if(b.args){p=b.args.concat(c)}}h=e.getFireInfo(i);k=h.fn;g=h.scope;h.fn=h.scope=null;if(g&&g.destroyed){e.removeListener(k,g,l);k=null}if(k&&k.apply(g,p)===!1){Ext.EventObject=null;return e.firing=!1}if(b){c.length--}if(j){a=c[0]=j;j=null}Ext.EventObject=null}}e.firing=!1;return !0},getFireInfo:function(b,h){var f=this.observable,i=b.fireFn,c=b.scope,d=b.namedScope,e,g;if(!h&&b.wrapped){a.fn=i;return a}e=h?b.fn:i;if(b.lateBound){g=b.caller||f;if(d&&d.isUp){c=Ext.lookUpFn(g,e)}else {if(!c||d){c=g.resolveListenerScope(b.defaultScope)}}e=c[e]}else {if(d&&d.isController){c=(b.caller||f).resolveListenerScope(b.defaultScope)}else {if(!c||d){c=f}}}a.fn=e;a.scope=c;return a},createAnimFrame:function(c,b,f,d,e){var a;if(!e){a=b.ev.getFireInfo(b,!0);c=a.fn;d=a.scope;a.fn=a.scope=null}return Ext.Function.createAnimationFrame(c,d,f.args)},createTargeted:function(b,a,e,c,d){return function(){var f;if(e.target===arguments[0]){if(!d){f=a.ev.getFireInfo(a,!0);b=f.fn;c=f.scope;f.fn=f.scope=null}return b.apply(c,arguments)}}},createBuffered:function(c,a,f,d,e){a.task=new Ext.util.DelayedTask();return function(){var g;if(a.task){if(!e){g=a.ev.getFireInfo(a,!0);c=g.fn;d=g.scope;g.fn=g.scope=null}a.task.delay(f.buffer,c,d,b(arguments))}}},createDelayed:function(c,a,f,d,e){return function(){var h=new Ext.util.DelayedTask(),g;if(!e){g=a.ev.getFireInfo(a,!0);c=g.fn;d=g.scope;g.fn=g.scope=null}if(!a.tasks){a.tasks=[]}a.tasks.push(h);h.delay(f.delay||10,c,d,b(arguments))}},createSingle:function(c,b,e,a,d){return function(){var g=b.ev,h=g.observable,i=b.fn,f;if(h){if(!h.destroyed){h.removeListener(g.name,i,a)}}else {g.removeListener(i,a)}if(!d){f=g.getFireInfo(b,!0);c=f.fn;a=f.scope;f.fn=f.scope=null}return c.apply(a,arguments)}}}});Ext.define('Ext.mixin.Identifiable',function(a){return {isIdentifiable:!0,mixinId:'identifiable',getId:function(){var c=this,b=c.id,d;if(!(b||b===0)){d=c.initialConfig;if(d&&d.id){b=d.id}else {b=c.generateAutoId();c.autoGenId=!0}c.setId(b)}c.getId=a._getId;return b},setId:function(b){this.id=this.id=b},privates:{statics:{_idCleanRe:/\.|[^\w-]/g,uniqueIds:{},_getId:function(){return this.id}},defaultIdPrefix:'ext-',defaultIdSeparator:'-',id:null,autoGenId:!1,generateAutoId:function(){var d=this,f=d.self.prototype,c=d.defaultIdSeparator,g=a.uniqueIds,h,e,b,i;if(!f.hasOwnProperty('identifiablePrefix')){h=a._idCleanRe;e=d.defaultIdPrefix;i=d.xtype;if(i){b=e+i.replace(h,c)+c}else {if(!(b=f.$className)){b=e+'anonymous'+c}else {b=b.replace(h,c).toLowerCase()+c}}f.identifiablePrefix=b}b=d.identifiablePrefix;if(!g.hasOwnProperty(b)){g[b]=0}return b+ ++g[b]}}}});Ext.define('Ext.mixin.Observable',function(d){var e=Ext.emptyFn,g=[],f=Array.prototype,b=f.slice,a=function(c){if(c instanceof a){return c}this.observable=c;if(arguments[1].isObservable){this.managedListeners=!0}this.args=b.call(arguments,1)},c=['events','hasListeners','managedListeners','eventedBeforeEventNames'];a.prototype.destroy=function(){var b=this,c=b.args,a=b.observable,e=c[0].element||c[3]&&c[3].element;if(e){a=a[e]}if(!a.destroyed){a[b.managedListeners?'mun':'un'].apply(a,b.args)}b.destroy=Ext.emptyFn};return {extend:Ext.Mixin,mixinConfig:{id:'observable',after:{destroy:'destroyObservable'}},mixins:[Ext.mixin.Identifiable],statics:{releaseCapture:function(a){a.fireEventArgs=this.prototype.fireEventArgs},capture:function(e,c,a){var b=function(b,f){return c.apply(a,[b].concat(f))};this.captureArgs(e,b,a)},captureArgs:function(a,c,b){a.fireEventArgs=Ext.Function.createInterceptor(a.fireEventArgs,c,b)},observe:function(a,b){if(a){if(!a.isObservable){Ext.applyIf(a,new this());this.captureArgs(a.prototype,a.fireEventArgs,a)}if(Ext.isObject(b)){a.on(b)}}return a},prepareClass:function(a,f,o){var k=a.listeners=[],l=o||a.prototype,e=l.listeners,i=f?f.listeners:a.superclass.self.listeners,b,h,g,m;if(i){k.push(i)}if(e){b=e.scope;if(!b){e.scope='self'}else {h=Ext._namedScopes[b];if(h&&h.isController){e.scope='self.controller'}}k.push(e);l.listeners=null}if(!a.HasListeners){var j=function(){},n=a.superclass.HasListeners||f&&f.HasListeners||d.HasListeners;a.prototype.HasListeners=a.HasListeners=j;j.prototype=a.hasListeners=new n()}b=a.prototype.$noClearOnDestroy||{};for(g=0,m=c.length;g<m;g++){b[c[g]]=!0}a.prototype.$noClearOnDestroy=b}},isObservable:!0,$vetoClearingPrototypeOnDestroy:!0,eventsSuspended:0,constructor:function(c){var a=this,h=a.self,f,b,g,i,e;if(a.$observableInitialized){return}a.$observableInitialized=!0;a.hasListeners=a.hasListeners=new a.HasListeners();a.eventedBeforeEventNames={};a.events=a.events||{};f=h.listeners;if(f&&!a._addDeclaredListeners(f)){h.listeners=null}b=c&&c.listeners||a.listeners;if(b){if(b instanceof Array){for(e=0,i=b.length;e<i;++e){a.addListener(b[e])}}else {a.addListener(b)}}g=c&&c.bubbleEvents||a.bubbleEvents;if(g){a.enableBubble(g)}if(a.$applyConfigs){if(c){Ext.apply(a,c)}}else {a.initConfig(c)}if(b){a.listeners=null}},onClassExtended:function(a,b){if(!a.HasListeners){d.prepareClass(a,a.prototype.$observableMixedIn?undefined:b)}},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(b){var a=this;if(b instanceof Array){Ext.each(b,a._addDeclaredListeners,a)}else {a._addedDeclaredListeners=!0;a.addListener(b)}return a._addedDeclaredListeners},addManagedListener:function(h,c,j,i,b,l){var f=this,g,k;f.managedListeners=f.managedListeners||[];if(typeof c!=='string'){k=arguments.length>4?b:c;b=c;for(c in b){if(b.hasOwnProperty(c)){g=b[c];if(!h.$eventOptions[c]){f.addManagedListener(h,c,g.fn||g,g.scope||b.scope||i,g.fn?g:k,!0)}}}if(b&&b.destroyable){return new a(f,h,b)}}else {if(j!==e){h.doAddListener(c,j,i,b,null,f,f);if(!l&&b&&b.destroyable){return new a(f,h,c,j,i)}}}},removeManagedListener:function(e,a,k,j){var f=this,b,c,h,i,g;if(e.$observableDestroyed){return}if(typeof a!=='string'){b=a;for(a in b){if(b.hasOwnProperty(a)){c=b[a];if(!e.$eventOptions[a]){f.removeManagedListener(e,a,c.fn||c,c.scope||b.scope||j)}}}}else {h=f.managedListeners?f.managedListeners.slice():[];a=Ext.canonicalEventName(a);for(g=0,i=h.length;g<i;g++){f.removeManagedListenerItem(!1,h[g],e,a,k,j)}}},fireEvent:function(a){return this.fireEventArgs(a,b.call(arguments,1))},resolveListenerScope:function(a){var b=Ext._namedScopes[a];if(b){if(b.isSelf||b.isThis){a=null}}return a||this},fireEventArgs:function(a,h){var c=this,e=c.events,f=!0,b;a=Ext.canonicalEventName(a);b=e&&e[a];if(c.hasListeners[a]){f=c.doFireEvent(a,h||g,b?b.bubble:!1)}return f},fireAction:function(c,g,b,e,a,f){if(typeof b==='string'&&!e){b=this[b]}a=a?Ext.Object.chain(a):{};a.single=!0;a.priority=f==='after'?-99.5:99.5;this.doAddListener(c,b,e,a);this.fireEventArgs(c,g)},$eventedController:{_paused:1,pause:function(){++this._paused},resume:function(){var a=this,b=a.fn,c=a.scope,g=a.fnArgs,e,f;if(!--a._paused){if(b){e=Ext.Array.slice(g||a.args);if(g===!1){e.shift()}a.fn=null;e.push(a);if(Ext.isFunction(b)){f=b.apply(c,e)}else {if(c&&Ext.isString(b)&&Ext.isFunction(c[b])){f=c[b].apply(c,e)}}if(f===!1){return !1}}if(!a._paused){return a.owner.fireEventArgs(a.eventName,a.args)}}}},fireEventedAction:function(a,b,k,j,i){var c=this,e=c.eventedBeforeEventNames,h=e[a]||(e[a]='before'+a),f=Ext.apply({owner:c,eventName:a,fn:k,scope:j,fnArgs:i,args:b},c.$eventedController),g;b.push(f);g=c.fireEventArgs(h,b);b.pop();if(g===!1){return !1}return f.resume()},doFireEvent:function(e,g,h){var a=this,f,b,c=!0;do{if(a.eventsSuspended){if(f=a.eventQueue){f.push([e,g])}return c}else {b=a.events&&a.events[e];if(b&&b!==!0){if((c=b.fire.apply(b,g))===!1){break}}}}while(h&&(a=a.getBubbleParent()));return c},getBubbleParent:function(){var b=this,a=b.getBubbleTarget&&b.getBubbleTarget();if(a&&a.isObservable){return a}return null},addListener:function(e,o,h,b,n,m){var c=this,l=Ext._namedScopes,g,f,j,i,k;if(typeof e!=='string'){b=e;h=b.scope;f=h&&l[h];j=f&&f.isSelf;k=(c.isComponent||c.isWidget)&&b.element?c.$elementEventOptions:c.$eventOptions;for(e in b){g=b[e];if(!k[e]){i=g.scope;if(i&&j){f=l[i];if(f&&f.isController){i='self.controller'}}c.doAddListener(e,g.fn||g,i||h,g.fn?g:b,n,m)}}if(b&&b.destroyable){return new a(c,b)}}else {c.doAddListener(e,o,h,b,n,m);if(b&&b.destroyable){return new a(c,e,o,h,b)}}return c},removeListener:function(a,h,g,f){var c=this,e,b;if(typeof a!=='string'){b=a;f=f||c.$eventOptions;for(a in b){if(b.hasOwnProperty(a)){e=b[a];if(!c.$eventOptions[a]){c.doRemoveListener(a,e.fn||e,e.scope||b.scope)}}}}else {c.doRemoveListener(a,h,g)}return c},onBefore:function(a,e,c,b){return this.addListener(a,e,c,b,'before')},onAfter:function(a,e,c,b){return this.addListener(a,e,c,b,'after')},unBefore:function(a,e,c,b){return this.removeListener(a,e,c,b,'before')},unAfter:function(a,e,c,b){return this.removeListener(a,e,c,b,'after')},addBeforeListener:function(){return this.onBefore.apply(this,arguments)},addAfterListener:function(){return this.onAfter.apply(this,arguments)},removeBeforeListener:function(){return this.unBefore.apply(this,arguments)},removeAfterListener:function(){return this.unAfter.apply(this,arguments)},clearListeners:function(){var c=this,a=c.events,f=c.hasListeners,e,b;if(a){for(b in a){if(a.hasOwnProperty(b)){e=a[b];if(e.isEvent){delete f[b];e.clearListeners()}}}c.events=null}c.clearManagedListeners()},clearManagedListeners:function(){var b=this,a=b.managedListeners,c,e;if(a){b.managedListeners=null;for(c=0,e=a.length;c<e;c++){b.removeManagedListenerItem(!0,a[c])}a.length=0}b.managedListeners=a},removeManagedListenerItem:function(b,a,g,f,e,c){if(b||a.item===g&&a.ename===f&&(!e||a.fn===e)&&(!c||a.scope===c)){if(!a.item.destroyed){a.item.doRemoveListener(a.ename,a.fn,a.scope,a.options)}if(!b){Ext.Array.remove(this.managedListeners,a)}}},hasListener:function(a){a=Ext.canonicalEventName(a);return !!this.hasListeners[a]},isSuspended:function(a){var b=this.eventsSuspended>0,c=this.events;if(!b&&a&&c){a=c[a];if(a&&a.isEvent){return a.isSuspended()}}return b},suspendEvents:function(a){++this.eventsSuspended;if(a&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(){var e=this,f=e.events,g=arguments.length,c,b,a;for(c=0;c<g;c++){a=arguments[c];a=Ext.canonicalEventName(a);b=f[a];if(!b||!b.isEvent){b=e._initEvent(a)}b.suspend()}},resumeEvent:function(){var c=this.events||0,f=c&&arguments.length,b,a,e;for(b=0;b<f;b++){e=Ext.canonicalEventName(arguments[b]);a=c[e];if(a&&a.resume){a.resume()}}},resumeEvents:function(f){var a=this,c=a.eventQueue,e,b;if(a.eventsSuspended&&!--a.eventsSuspended){delete a.eventQueue;if(!f&&c){e=c.length;for(b=0;b<e;b++){a.fireEventArgs.apply(a,c[b])}}}},relayEvents:function(i,c,j){var g=this,k=c.length,b=0,f,h,e={};if(Ext.isObject(c)){for(b in c){h=c[b];e[b]=g.createRelayer(h)}}else {for(;b<k;b++){f=c[b];e[f]=g.createRelayer(j?j+f:f)}}g.mon(i,e,null,null,undefined);return new a(g,i,e)},createRelayer:function(e,a){var c=this;return function(){return c.fireEventArgs.call(c,e,a?b.apply(arguments,a):arguments)}},enableBubble:function(e){if(e){var f=this,h=typeof e==='string'?arguments:e,g=f.events,i=g&&h.length,a,b,c;for(c=0;c<i;++c){a=h[c];a=Ext.canonicalEventName(a);b=g[a];if(!b||!b.isEvent){b=f._initEvent(a)}f.hasListeners._incr_(a);b.bubble=!0}}},destroy:function(){this.clearListeners();this.callParent();this.destroyObservable(!0)},destroyObservable:function(c){var a=this,b=a.clearPropertiesOnDestroy;if(a.$observableDestroyed){return}if(!c){a.clearListeners()}if(a.destroyed){if(b){if(b===!0&&!a.$nulled){a.$reap()}if(!a.clearPrototypeOnDestroy){a.fireEvent=a.fireEventArgs=a.fireAction=a.fireEventedAction=Ext.emptyFn}a.events=a.managedListeners=a.eventedBeforeEventNames=null;a.$observableDestroyed=!0}}},privates:{doAddListener:function(c,l,g,a,h,m,i){var b=this,k=!1,f,j;h=h||a&&a.order;if(h){j=a&&a.priority;if(!j){a=a?Ext.Object.chain(a):{};a.priority=b.$orderToPriority[h]}}c=Ext.canonicalEventName(c);f=(b.events||(b.events={}))[c];if(!f||!f.isEvent){f=b._initEvent(c)}if(l!==e){if(!i&&(g&&g.isObservable&&g!==b)){i=g}if(f.addListener(l,g,a,m,i)){b.hasListeners._incr_(c);k=!0}}return k},doRemoveListener:function(a,h,g){var f=this,e=!1,c=f.events,b;a=Ext.canonicalEventName(a);b=c&&c[a];if(b&&b.isEvent){if(b.removeListener(h,g)){f.hasListeners._decr_(a);e=!0}}return e},_initEvent:function(a){return this.events[a]=new Ext.util.Event(this,a)}},deprecated:{'5.0':{methods:{addEvents:null}}}}},function(){var a=this,c=a.prototype,d=function(){},b=function(c){var d=c.prototype;if(!c.HasListeners){d.$observableMixedIn=1;a.prepareClass(c,this);c.onExtended(function(d,b){a.prepareClass(d,null,b)});if(d.onClassMixedIn){Ext.override(c,{onClassMixedIn:function(a){b.call(this,a);this.callParent(arguments)}})}else {d.onClassMixedIn=function(a){b.call(this,a)}}}e.call(this,c)},e=c.onClassMixedIn;d.prototype={_decr_:function(b,a){if(a==null){a=1}if(!(this[b]-=a)){delete this[b]}},_incr_:function(a){if(this.hasOwnProperty(a)){++this[a]}else {this[a]=1}}};c.HasListeners=a.HasListeners=d;a.createAlias({on:'addListener',un:'removeListener',mon:'addManagedListener',mun:'removeManagedListener',setListeners:'addListener'});a.observeClass=a.observe;function getMethodEvent(e){var a=(this.methodEvents=this.methodEvents||{})[e],c,b,d,f=this,g;if(!a){f.methodEvents[e]=a={};a.originalFn=f[e];a.methodName=e;a.before=[];a.after=[];g=function(g,a,h){a=a||f;if(typeof g==='string'){g=a[g]}if((b=g.apply(a,h))!==undefined){if(typeof b==='object'){if(b.returnValue!==undefined){c=b.returnValue}else {c=b}d=!!b.cancel}else {if(b===!1){d=!0}else {c=b}}}};f[e]=function(){var i=Array.prototype.slice.call(arguments,0),l=i.length,h,j,k;c=b=undefined;d=!1;for(j=0,k=a.before.length;j<k;j++){h=a.before[j];if(h.extraArgs){i.push.apply(i,h.extraArgs)}g(h.fn,h.scope,i);i.length=l;if(d||h.preventDefault){return c}}if((b=a.originalFn.apply(f,i))!==undefined){c=b}for(j=0,k=a.after.length;j<k;j++){h=a.after[j];if(h.extraArgs){i.push.apply(i,h.extraArgs)}g(h.fn,h.scope,i);i.length=l;if(d||h.preventDefault){return c}}return c}}return a}Ext.apply(c,{onClassMixedIn:b,beforeMethod:function(c,e,d,a,b){getMethodEvent.call(this,c).before.push({fn:e,scope:d,extraArgs:b,preventDefault:a})},afterMethod:function(c,e,d,a,b){getMethodEvent.call(this,c).after.push({fn:e,scope:d,extraArgs:b,preventDefault:a})},removeMethodListener:function(f,e,d){var b=getMethodEvent.call(this,f),a,c;for(a=0,c=b.before.length;a<c;a++){if(b.before[a].fn==e&&b.before[a].scope==d){Ext.Array.erase(b.before,a,1);return}}for(a=0,c=b.after.length;a<c;a++){if(b.after[a].fn==e&&b.after[a].scope==d){Ext.Array.erase(b.after,a,1);return}}},toggleEventLogging:function(a){Ext.util.Observable[a?'capture':'releaseCapture'](this,function(b){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(b,arguments)}})}})});Ext.define('Ext.util.HashMap',{mixins:[Ext.mixin.Observable],generation:0,config:{keyFn:null},constructor:function(c){var a=this,b;a.mixins.observable.constructor.call(a,c);a.clear(!0);b=a.getKeyFn();if(b){a.getKey=b}},getCount:function(){return this.length},getData:function(b,a){if(a===undefined){a=b;b=this.getKey(a)}return [b,a]},getKey:function(a){return a.id},add:function(c,b){var a=this;if(arguments.length===1){b=c;c=a.getKey(b)}if(a.containsKey(c)){return a.replace(c,b)}a.map[c]=b;++a.length;a.generation++;if(a.hasListeners.add){a.fireEvent('add',a,c,b)}return b},replace:function(b,c){var a=this,d=a.map,e;if(arguments.length===1){c=b;b=a.getKey(c)}if(!a.containsKey(b)){a.add(b,c)}e=d[b];d[b]=c;a.generation++;if(a.hasListeners.replace){a.fireEvent('replace',a,b,c,e)}return c},remove:function(b){var a=this.findKey(b);if(a!==undefined){return this.removeAtKey(a)}return !1},removeAtKey:function(b){var a=this,c;if(a.containsKey(b)){c=a.map[b];delete a.map[b];--a.length;a.generation++;if(a.hasListeners.remove){a.fireEvent('remove',a,b,c)}return !0}return !1},get:function(a){var b=this.map;return b.hasOwnProperty(a)?b[a]:undefined},clear:function(b){var a=this;if(b||a.generation){a.map={};a.length=0;a.generation=b?0:a.generation+1}if(b!==!0&&a.hasListeners.clear){a.fireEvent('clear',a)}return a},containsKey:function(a){var b=this.map;return b.hasOwnProperty(a)&&b[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(!0)},getValues:function(){return this.getArray(!1)},getArray:function(d){var c=[],a,b=this.map;for(a in b){if(b.hasOwnProperty(a)){c.push(d?a:b[a])}}return c},each:function(e,c){var b=Ext.apply({},this.map),a,d=this.length;c=c||this;for(a in b){if(b.hasOwnProperty(a)){if(e.call(c,a,b[a],d)===!1){break}}}return this},clone:function(){var a=new this.self(this.initialConfig),c=this.map,b;a.suspendEvents();for(b in c){if(c.hasOwnProperty(b)){a.add(b,c[b])}}a.resumeEvents();return a},findKey:function(c){var a,b=this.map;for(a in b){if(b.hasOwnProperty(a)&&b[a]===c){return a}}return undefined}},function(b){var a=b.prototype;a.removeByKey=a.removeAtKey});Ext.define('Ext.promise.Consequence',function(a){return {promise:null,deferred:null,onFulfilled:null,onRejected:null,onProgress:null,constructor:function(c,e,d){var b=this;b.onFulfilled=c;b.onRejected=e;b.onProgress=d;b.deferred=new Ext.promise.Deferred();b.promise=b.deferred.promise},trigger:function(e,d){var b=this,c=b.deferred;switch(e){case 'fulfill':b.propagate(d,b.onFulfilled,c,c.resolve);break;case 'reject':b.propagate(d,b.onRejected,c,c.reject);break;}},update:function(b){if(Ext.isFunction(this.onProgress)){b=this.onProgress(b)}this.deferred.update(b)},propagate:function(d,b,c,e){if(Ext.isFunction(b)){this.schedule(function(){try{c.resolve(b(d))}catch(f){c.reject(f)}})}else {e.call(this.deferred,d)}},schedule:function(c){var b=a.queueSize++;a.queue[b]=c;if(!b){Ext.asap(a.dispatch)}},statics:{queue:new Array(10000),queueSize:0,dispatch:function(){var c=a.queue,d,b;for(b=0;b<a.queueSize;++b){d=c[b];c[b]=null;d()}a.queueSize=0}}}});Ext.define('Ext.promise.Deferred',{promise:null,consequences:[],completed:!1,completionAction:null,completionValue:null,constructor:function(){var a=this;a.promise=new Ext.promise.Promise(a);a.consequences=[];a.completed=!1;a.completionAction=null;a.completionValue=null},then:function(c,e,d){var a=this,b=new Ext.promise.Consequence(c,e,d);if(a.completed){b.trigger(a.completionAction,a.completionValue)}else {a.consequences.push(b)}return b.promise},resolve:function(a){var b=this,c,d;if(b.completed){return}try{if(a===b.promise){throw new TypeError('A Promise cannot be resolved with itself.')}if(a!=null&&(typeof a==='object'||Ext.isFunction(a))&&Ext.isFunction(d=a.then)){c=!1;try{d.call(a,function(d){if(!c){c=!0;b.resolve(d)}},function(d){if(!c){c=!0;b.reject(d)}})}catch(e){if(!c){b.reject(e)}}}else {b.complete('fulfill',a)}}catch(f){b.reject(f)}},reject:function(a){if(this.completed){return}this.complete('reject',a)},update:function(e){var b=this.consequences,c,a,d;if(this.completed){return}for(a=0,d=b.length;a<d;a++){c=b[a];c.update(e)}},complete:function(f,g){var a=this,c=a.consequences,d,b,e;a.completionAction=f;a.completionValue=g;a.completed=!0;for(b=0,e=c.length;b<e;b++){d=c[b];d.trigger(a.completionAction,a.completionValue)}a.consequences=null}});Ext.define('Ext.promise.Promise',function(a){var b;return {statics:{CancellationError:Ext.global.CancellationError||Error,_ready:function(){b=Ext.promise.Deferred},all:function(c){return a.when(c).then(function(f){var g=new b(),e=f.length,h=new Array(e),d,j,k,i,l;if(!e){g.resolve(h)}else {k=function(d,b){return a.when(d).then(function(i){h[b]=i;if(!--e){g.resolve(h)}return i},function(e){return g.reject(e)})};for(d=i=0,l=f.length;i<l;d=++i){j=f[d];if(d in f){k(j,d)}else {e--}}}return g.promise})},is:function(b){return b!=null&&(typeof b==='object'||Ext.isFunction(b))&&Ext.isFunction(b.then)},race:function(e){var d=new b(),f=e.length,c;for(c=0;c<f;++c){d.resolve(e[c])}return d.promise},rethrowError:function(b){Ext.asap(function(){throw b})},when:function(d){var c=new b();c.resolve(d);return c.promise}},owner:null,constructor:function(b){this.owner=b},then:function(b,d,c,e){var f;if(arguments.length===1&&Ext.isObject(arguments[0])){f=arguments[0];b=f.success;d=f.failure;c=f.progress;e=f.scope}if(e){if(b){b=b.bind(e)}if(d){d=d.bind(e)}if(c){c=c.bind(e)}}return this.owner.then(b,d,c)},'catch':function(b,c){var d;if(arguments.length===1&&Ext.isObject(arguments[0])){d=arguments[0];b=d.fn;c=d.scope}if(c!=null){b=b.bind(c)}return this.owner.then(null,b)},otherwise:function(b,c){return this['catch'].apply(this,arguments)},always:function(b,c){var d;if(arguments.length===1&&Ext.isObject(arguments[0])){d=arguments[0];b=d.fn;c=d.scope}if(c!=null){b=b.bind(c)}return this.owner.then(function(d){try{b()}catch(e){a.rethrowError(e)}return d},function(d){try{b()}catch(e){a.rethrowError(e)}throw d})},done:function(){this.owner.then(null,a.rethrowError)},cancel:function(b){if(b==null){b=null}this.owner.reject(new this.self.CancellationError(b))},log:function(b){if(b==null){b=''}return this.owner.then(function(c){Ext.log(''+(b||'Promise')+' resolved with value: '+c);return c},function(c){Ext.log(''+(b||'Promise')+' rejected with reason: '+c);throw c})}}},function(a){a._ready()});Ext.define('Ext.Promise',function(){var a;return {statics:{_ready:function(){a=Ext.promise.Promise},all:function(){return a.all.apply(a,arguments)},race:function(){return a.race.apply(a,arguments)},reject:function(b){var a=new Ext.promise.Deferred();a.reject(b);return a.promise},resolve:function(b){var a=new Ext.promise.Deferred();a.resolve(b);return a.promise}},constructor:function(b){var a=new Ext.promise.Deferred();b(a.resolve.bind(a),a.reject.bind(a));return a.promise}}},function(b){var a=Ext.global.Promise;if(a&&a.resolve&&!Ext.useExtPromises){Ext.Promise=a}else {b._ready()}});Ext.define('Ext.Deferred',function(a){var b,c,d,e;return {extend:Ext.promise.Deferred,statics:{_ready:function(){b=Ext.promise.Promise;e=Ext.Promise.resolve},all:function(){return b.all.apply(b,arguments)},any:function(b){return a.some(b,1).then(function(c){return c[0]},function(c){if(c instanceof Error&&c.message==='Too few Promises were resolved.'){Ext.raise('No Promises were resolved.')}else {throw c}})},delay:function(d,c){var b;if(arguments.length===1){c=d;d=undefined}c=Math.max(c,1);b=new a();b.timeoutId=Ext.defer(function(){delete b.timeoutId;b.resolve(d)},c);return b.promise},getCachedRejected:function(){if(!c){c=Ext.Promise.reject()}return c},getCachedResolved:function(){if(!d){d=Ext.Promise.resolve()}return d},map:function(b,c){return a.resolved(b).then(function(d){var e,g,j,h,k,f,i,l;h=d.length;f=new Array(d.length);e=new a();if(!h){e.resolve(f)}else {k=function(i,g){return a.resolved(i).then(function(e){return c(e,g,f)}).then(function(j){f[g]=j;if(!--h){e.resolve(f)}return j},function(f){return e.reject(f)})};for(g=i=0,l=d.length;i<l;g=++i){j=d[g];if(g in d){k(j,g)}else {h--}}}return e.promise})},memoize:function(e,b,d){var c=Ext.Function.memoize(e,b,d);return function(){return a.all(Ext.Array.slice(arguments)).then(function(f){return c.apply(b,f)})}},parallel:function(d,b){var c;if(b==null){b=null}c=Ext.Array.slice(arguments,2);return a.map(d,function(e){if(!Ext.isFunction(e)){throw new Error('Invalid parameter: expected a function.')}return e.apply(b,c)})},pipeline:function(d,c,b){if(b==null){b=null}return a.reduce(d,function(f,e){if(!Ext.isFunction(e)){throw new Error('Invalid parameter: expected a function.')}return e.call(b,f)},c)},race:function(){return b.race.apply(b,arguments)},reduce:function(e,d,c){var b;b=arguments.length===3;return a.resolved(e).then(function(f){var g=[f,function(b,g,h){return a.resolved(b).then(function(i){return a.resolved(g).then(function(j){return d(i,j,h,f)})})}];if(b){g.push(c)}return Ext.Array.reduce.apply(Ext.Array,g)})},rejected:function(c){var b=new Ext.Deferred();b.reject(c);return b.promise},resolved:function(c){var b=new Ext.Deferred();b.resolve(c);return b.promise},sequence:function(d,b){var c;if(b==null){b=null}c=Ext.Array.slice(arguments,2);return a.reduce(d,function(e,f){if(!Ext.isFunction(f)){throw new Error('Invalid parameter: expected a function.')}return a.resolved(f.apply(b,c)).then(function(c){e.push(c);return e})},[])},some:function(c,b){return a.resolved(c).then(function(e){var f,g,m,l,k,h,d,i,j,n;i=[];d=b;h=e.length-d+1;f=new a();if(e.length<b){f.reject(new Error('Too few Promises were resolved.'))}else {l=function(g){if(d>0){i.push(g)}d--;if(d===0){f.resolve(i)}return g};m=function(d){h--;if(h===0){f.reject(new Error('Too few Promises were resolved.'))}return d};for(g=j=0,n=e.length;j<n;g=++j){k=e[g];if(g in e){a.resolved(k).then(l,m)}}}return f.promise})},timeout:function(d,e){var c=new a(),b;b=Ext.defer(function(){if(b){c.reject(new Error('Promise timed out.'))}},e);a.resolved(d).then(function(f){Ext.undefer(b);b=null;c.resolve(f)},function(f){Ext.undefer(b);b=null;c.reject(f)});return c.promise}}}},function(a){a._ready()});Ext.Factory=function(b){var a=this;a.aliasPrefix=b+'.';a.cache={};a.name=b.replace(a.fixNameRe,a.fixNameFn);a.type=b;a.creator='create'+Ext.String.capitalize(a.name)};Ext.Factory.prototype={defaultProperty:'type',instanceProp:'isInstance',typeProperty:'type',create:function(a,f){var e=this,g=Ext.ClassManager,j=e.cache,i=e.typeProperty,h,d,b,c;if(a){if(a[e.instanceProp]){return a}if(typeof a==='string'){c=a;a={};a[e.defaultProperty]=c}d=a.xclass;c=a[i]}if(f&&f.constructor===Object){a=Ext.apply({},a,f);f=f[i]}if(d){if(!(b=g.get(d))){return g.instantiate(d,a)}}else {if(!(c=c||f||e.defaultType)){b=e.defaultClass}if(!b&&!(b=j[c])){h=e.aliasPrefix+c;d=g.getNameByAlias(h);if(!(b=d&&g.get(d))){return g.instantiateByAlias(h,a)}j[c]=b}}return b.isInstance?b:new b(a)},fixNameRe:/\.[a-z]/ig,fixNameFn:function(a){return a.substring(1).toUpperCase()},clearCache:function(){this.cache={};this.instanceCache={}},hook:function(c){var a=this,b=a.create;a.create=function(f,e){var d=c.call(a,b,f,e);if(d===undefined){d=b.call(a,f,e)}return d}},update:function(c,a,h,g,j){var f=this,d,e,i,b;if(!a||a.isInstance){if(c&&c!==a){c.destroy()}return a}if(typeof a==='string'){b=a;a={};a[f.defaultProperty]=b}if(c){if(a===!0){return c}if(!(b=a.xclass)){if(!(b=a.xtype)){b=a[f.typeProperty];if(b){b=f.aliasPrefix+b;d=c.self.prototype;if(d.hasOwnProperty('alias')){d=d.alias;if(d){i=d===b||d.indexOf(b)>-1}}}}else {i=c.isXType(b,!0)}}else {i=c.$className===b}if(i){c.setConfig(a);return c}c.destroy()}if(a===!0){a={}}if(h){if(j){e=Ext.Config.map[j];e=h[e.names.get]();if(e){a=Ext.merge(Ext.clone(e),a)}}g=g||f.creator;if(h[g]){a=h[g](a)}}return f.create(a)}};Ext.Factory.define=function(e,b){var d=Ext.Factory,g=b&&b.cacheable,f,a,c;if(e.constructor===Object){Ext.Object.each(e,d.define,d)}else {a=new Ext.Factory(e);if(b){if(b.constructor===Object){Ext.apply(a,b);if(typeof (f=a.xclass)==='string'){a.defaultClass=Ext.ClassManager.get(f)}}else {a.defaultType=b}}d[a.name]=c=function(d,c){return a.create(d,c)};if(g){a.instanceCache={};a.hook(function(g,c,f){var d=this.instanceCache,a;if(typeof c==='string'&&!(a=d[c])){a=g.call(this,c,f);if(a.cacheable!==!1){d[c]=a}}return a})}c.instance=a;c.update=function(f,h,g,d,c){return a.update(f,h,g,d,c)}}return c};Ext.Factory.clearCaches=function(){var b=Ext.Factory,c,a;for(c in b){a=b[c];a=a.instance;if(a){a.clearCache()}}};Ext.Factory.on=function(a,b){Ext.Factory[a].instance.hook(b)};Ext.define('Ext.mixin.Factoryable',{mixinId:'factoryable',onClassMixedIn:function(c){var d=c.prototype,f=d.factoryConfig,a=d.alias,b={},e,g;a=a&&a.length&&a[0];if(a&&(e=a.lastIndexOf('.'))>0){b.type=a.substring(0,e);b.defaultType=a.substring(e+1)}if(f){delete d.factoryConfig;Ext.apply(b,f)}g=Ext.Factory.define(b.type,b);if(c.create===Ext.Base.create){c.create=g}}});Ext.define('Ext.data.request.Base',{mixins:[Ext.mixin.Factoryable],factoryConfig:{type:'request',defaultType:'ajax'},result:null,success:null,timer:null,constructor:function(a){var b=this;Ext.apply(b,a.options||{},a.ownerConfig);b.id=++Ext.data.Connection.requestId;b.owner=a.owner;b.options=a.options;b.requestOptions=a.requestOptions},start:function(){var a=this,b=a.getTimeout();if(b&&a.async){a.timer=Ext.defer(a.onTimeout,b,a)}},abort:function(){var a=this;a.clearTimer();if(!a.timedout){a.aborted=!0}a.abort=Ext.emptyFn},createDeferred:function(){var a=this,c=a.result,b=new Ext.Deferred();if(a.completed){if(a.success){b.resolve(c)}else {b.reject(c)}}a.deferred=b;return b},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var a=this.getPromise();return a.then.apply(a,arguments)},onComplete:function(){var a=this,b=a.deferred,c=a.result;a.clearTimer();if(b){if(a.success){b.resolve(c)}else {b.reject(c)}}a.completed=!0},onTimeout:function(){var a=this;a.timedout=!0;a.timer=null;a.abort(!0)},getTimeout:function(){return this.timeout},clearTimer:function(){this.timer=Ext.undefer(this.timer)},destroy:function(){var a=this;a.abort();a.owner=a.options=a.requestOptions=a.result=null;a.callParent()},privates:{createException:function(){var a=this,b;b={request:a,requestId:a.id,status:a.aborted?-1:0,statusText:a.aborted?'transaction aborted':'communication failure',getResponseHeader:a._getHeader,getAllResponseHeaders:a._getHeaders};if(a.aborted){b.aborted=!0}if(a.timedout){b.timedout=!0}return b},_getHeader:function(b){var a=this.headers;return a&&a[b.toLowerCase()]},_getHeaders:function(){return this.headers}}});Ext.define('Ext.data.flash.BinaryXhr',{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=!0;Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById('ext-flash-polyfill');Ext.GlobalEvents.fireEvent('flashready')},flashPluginActive:!1,flashPluginInjected:!1,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(b,c,d){var a;a=this.liveConnections[Number(b)];if(a){a.onFlashStateChange(c,d)}},registerConnection:function(b){var a=this.connectionIndex;this.conectionIndex=this.connectionIndex+1;this.liveConnections[a]=b;return a},injectFlashPlugin:function(){var c=this,b,a;c.flashPolyfillEl=Ext.getBody().appendChild({id:'ext-flash-polyfill',cn:[{tag:'p',html:'To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed.'},{tag:'a',href:'http://www.adobe.com/go/getflashplayer',cn:[{tag:'img',src:window.location.protocol+'//www.adobe.com/images/shared/download_buttons/get_flash_player.gif',alt:'Get Adobe Flash player'}]}]});b=[Ext.Loader.getPath('Ext.data.Connection'),'../../../plugins/flash/swfobject.js'].join('/');a='/plugins/flash/FlashPlugin.swf';if(Ext.flashPluginPath){a=Ext.flashPluginPath}Ext.Loader.loadScript({url:b,onLoad:function(){var d='11.4.0',e='playerProductInstall.swf',f={},b={},c={};b.quality='high';b.bgcolor='#ffffff';b.allowscriptaccess='sameDomain';b.allowfullscreen='true';c.id='ext-flash-polyfill';c.name='polyfill';c.align='middle';swfobject.embedSWF(a,'ext-flash-polyfill','0','0',d,e,f,b,c)},onError:function(){},scope:c});Ext.data.flash.BinaryXhr.flashPluginInjected=!0}},readyState:0,status:0,statusText:'',responseBytes:null,javascriptId:null,constructor:function(b){var a=this;if(!Ext.data.flash.BinaryXhr.flashPluginInjected){Ext.data.flash.BinaryXhr.injectFlashPlugin()}Ext.apply(a,b);a.requestHeaders={}},abort:function(){var a=this;if(a.readyState===4){return}a.aborted=!0;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.removeListener('flashready',a.onFlashReady,a);return}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(a.javascriptId);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]},getAllResponseHeaders:function(){var a=[];Ext.Object.each(this.responseHeaders,function(c,b){a.push(c+': '+b)});return a.join('\r\n')},getResponseHeader:function(b){var a=this.responseHeaders;return a&&a[b]||null},open:function(d,f,c,e,b){var a=this;a.method=d;a.url=f;a.async=c!==!1;a.user=e;a.password=b},overrideMimeType:function(a){this.mimeType=a},send:function(b){var a=this;a.body=b;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.addListener('flashready',a.onFlashReady,a)}else {this.onFlashReady()}},onFlashReady:function(){var a=this,b;a.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(a);b={method:a.method,url:a.url,user:a.user,password:a.password,mimeType:a.mimeType,requestHeaders:a.requestHeaders,body:a.body,javascriptId:a.javascriptId};Ext.data.flash.BinaryXhr.flashPlugin.postBinary(b)},setReadyState:function(b){var a=this;if(a.readyState!==b){a.readyState=b;a.onreadystatechange()}},setRequestHeader:function(a,b){this.requestHeaders[a]=b},onreadystatechange:Ext.emptyFn,parseData:function(a){var b=this;this.status=a.status||0;b.responseHeaders={};if(b.mimeType){b.responseHeaders['content-type']=b.mimeType}if(a.reason==='complete'){this.responseBytes=a.data;b.responseHeaders['content-length']=a.data.length}else {if(a.reason==='error'||a.reason==='securityError'){this.statusText=a.text;b.responseHeaders['content-length']=0}}},onFlashStateChange:function(b,c){var a=this;if(b===4){a.parseData(c);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]}a.setReadyState(b)}});Ext.define('Ext.data.request.Ajax',{extend:Ext.data.request.Base,alias:'request.ajax',statics:{parseStatus:function(a,c){var b,d,f,e;if(c){b=c.responseType;if(b==='arraybuffer'){d=c.byteLength}else {if(b==='blob'){d=c.response.size}else {if((b==='json'||b==='document')&&c.response){d=0}else {if((b==='text'||b===''||!b)&&c.responseText){d=c.responseText.length}}}}}a=a===1223?204:a;e=!1;f=a>=200&&a<300||a===304||a===0&&Ext.isNumber(d);if(!f){switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:e=!0;break;}}return {success:f,isException:e}}},start:function(f){var a=this,e=a.options,c=a.requestOptions,d=a.isXdr,b;b=a.xhr=a.openRequest(e,c,a.async,a.username,a.password);if(!d){a.setupHeaders(b,e,c.data,c.params)}if(a.async){if(!d){b.onreadystatechange=a.bindStateChange()}}if(d){a.processXdrRequest(a,b)}a.callParent([f]);b.send(f);if(!a.async){return a.onComplete()}return a},abort:function(c){var a=this,b=a.xhr;if(c||a.isLoading()){try{b.onreadystatechange=null}catch(d){b.onreadystatechange=Ext.emptyFn}b.abort();a.callParent([c]);a.onComplete();a.cleanup()}},cleanup:function(){this.xhr=null;delete this.xhr},isLoading:function(){var c=this,a=c.xhr,b=a&&a.readyState,d=Ext.data.flash&&Ext.data.flash.BinaryXhr;if(!a||c.aborted||c.timedout){return !1}if(d&&a instanceof d){return b!==4}return b!==0&&b!==4},openRequest:function(c,b,f,e,g){var d=this,a=d.newRequest(c);if(e){a.open(b.method,b.url,f,e,g)}else {if(d.isXdr){a.open(b.method,b.url)}else {a.open(b.method,b.url,f)}}if(c.binary||d.binary){if(window.Uint8Array){a.responseType='arraybuffer'}else {if(a.overrideMimeType){a.overrideMimeType('text/plain; charset=x-user-defined')}}}if(c.responseType){a.responseType=c.responseType}if(c.withCredentials||d.withCredentials){a.withCredentials=!0}return a},newRequest:function(c){var a=this,b;if(c.binaryData){if(window.Uint8Array){b=a.getXhrInstance()}else {b=new Ext.data.flash.BinaryXhr()}}else {if(a.cors&&Ext.isIE9m){b=a.getXdrInstance();a.isXdr=!0}else {b=a.getXhrInstance();a.isXdr=!1}}return b},setupHeaders:function(m,f,j,l){var d=this,a=Ext.apply({},f.headers||{},d.defaultHeaders),e=d.defaultPostHeader,h=f.jsonData,i=f.xmlData,b='Content-Type',k=d.useDefaultXhrHeader,c,g;if(!a.hasOwnProperty(b)&&(j||l)){if(j){if(f.rawData){e='text/plain'}else {if(i&&Ext.isDefined(i)){e='text/xml'}else {if(h&&Ext.isDefined(h)){e='application/json'}}}}a[b]=e}if(k&&!a['X-Requested-With']){a['X-Requested-With']=d.defaultXhrHeader}if(a[b]===undefined||a[b]===null){delete a[b]}try{for(c in a){if(a.hasOwnProperty(c)){g=a[c];m.setRequestHeader(c,g)}}}catch(n){d.owner.fireEvent('exception',c,g)}return a},getXdrInstance:function(){var a;if(Ext.ieVersion>=8){a=new XDomainRequest()}else {Ext.raise({msg:'Your browser does not support CORS'})}return a},getXhrInstance:function(){return new XMLHttpRequest()},processXdrRequest:function(a,b){var c=this;delete a.headers;a.contentType=a.options.contentType||c.defaultXdrContentType;b.onload=c.bindStateChange(!0);b.onerror=b.ontimeout=c.bindStateChange(!1)},processXdrResponse:function(a,b){a.getAllResponseHeaders=function(){return []};a.getResponseHeader=function(){return ''};a.contentType=b.contentType||this.defaultXdrContentType},bindStateChange:function(a){var b=this;return function(){Ext.elevate(function(){b.onStateChange(a)})}},onStateChange:function(c){var a=this,b=a.xhr;if(b&&b.readyState===4||a.isXdr){a.clearTimer();a.onComplete(c);a.cleanup()}},onComplete:function(h){var a=this,d=a.owner,b=a.options,e=a.xhr,i={success:!1,isException:!1},f,g,c;if(!e||a.destroyed){return a.result=i}try{f=Ext.data.request.Ajax.parseStatus(e.status,e);if(f.success){f.success=e.readyState===4}}catch(j){f=i}g=a.success=a.isXdr?h:f.success;if(g){c=a.createResponse(e);if(d.hasListeners.requestcomplete){d.fireEvent('requestcomplete',d,c,b)}if(b.success){Ext.callback(b.success,b.scope,[c,b])}}else {if(f.isException||a.aborted||a.timedout){c=a.createException(e)}else {c=a.createResponse(e)}if(d.hasListeners.requestexception){d.fireEvent('requestexception',d,c,b)}if(b.failure){Ext.callback(b.failure,b.scope,[c,b])}}a.result=c;if(b.callback){Ext.callback(b.callback,b.scope,[b,g,c])}d.onRequestComplete(a);a.callParent([h]);return c},createResponse:function(a){var d=this,h=d.isXdr,f={},i=h?[]:a.getAllResponseHeaders().replace(/\r\n/g,'\n').split('\n'),g=i.length,e,c,j,b;while(g--){e=i[g];c=e.indexOf(':');if(c>=0){j=e.substr(0,c).toLowerCase();if(e.charAt(c+1)===' '){++c}f[j]=e.substr(c+1)}}b={request:d,requestId:d.id,status:a.status,statusText:a.statusText,getResponseHeader:function(b){return f[b.toLowerCase()]},getAllResponseHeaders:function(){return f}};if(h){d.processXdrResponse(b,a)}if(d.binary){b.responseBytes=d.getByteArray(a)}else {if(a.responseType){b.responseType=a.responseType}if(a.responseType==='blob'){b.responseBlob=a.response}else {if(a.responseType==='json'){b.responseJson=a.response}else {if(a.responseType==='document'){b.responseXML=a.response}else {b.responseText=a.responseText;b.responseXML=a.responseXML}}}}return b},destroy:function(){this.xhr=null;this.callParent()},privates:{getByteArray:function(b){var e=b.response,g=b.responseBody,h=Ext.data.flash&&Ext.data.flash.BinaryXhr,a,d,f,c;if(b instanceof h){a=b.responseBytes}else {if(window.Uint8Array){a=e?new Uint8Array(e):[]}else {if(Ext.isIE9p){try{a=(new VBArray(g)).toArray()}catch(i){a=[]}}else {if(Ext.isIE){if(!this.self.vbScriptInjected){this.injectVBScript()}getIEByteArray(b.responseBody,a=[])}else {a=[];d=b.responseText;f=d.length;for(c=0;c<f;c++){a.push(d.charCodeAt(c)&255)}}}}}return a},injectVBScript:function(){var a=document.createElement('script');a.type='text/vbscript';a.text=['Function getIEByteArray(byteArray, out)','Dim len, i','len = LenB(byteArray)','For i = 1 to len','out.push(AscB(MidB(byteArray, i, 1)))','Next','End Function'].join('\n');Ext.getHead().dom.appendChild(a);this.self.vbScriptInjected=!0}}});Ext.define('Ext.data.request.Form',{extend:Ext.data.request.Base,alias:'request.form',start:function(d){var a=this,c=a.options,b=a.requestOptions;a.callParent([d]);a.form=a.upload(c.form,b.url,b.data,c);return a},abort:function(c){var a=this,b;if(a.isLoading()){try{b=a.frame.dom;if(b.stop){b.stop()}else {b.document.execCommand('Stop')}}catch(d){}}a.callParent([c]);a.onComplete();a.cleanup()},cleanup:function(){var a=this,b=a.frame;if(b){b.un('load',a.onComplete,a);Ext.removeNode(b)}a.frame=a.form=null},isLoading:function(){return !!this.frame},upload:function(a,s,o,n){a=Ext.getDom(a);n=n||{};var m=document.createElement('iframe'),e=Ext.get(m),g=e.id,j=[],l='multipart/form-data',r={target:a.target,method:a.method,encoding:a.encoding,enctype:a.enctype,action:a.action},k=function(c,b){d=document.createElement('input');Ext.fly(d).set({type:'hidden',value:b,name:c});a.appendChild(d);j.push(d)},d,f,b,c,q,i,p,h;e.set({name:g,cls:Ext.baseCSSPrefix+'hidden-display',src:Ext.SSL_SECURE_URL,tabIndex:-1});document.body.appendChild(m);document.body.appendChild(a);if(document.frames){document.frames[g].name=g}Ext.fly(a).set({target:g,method:'POST',enctype:l,encoding:l,action:s||r.action});if(o){f=Ext.Object.fromQueryString(o)||{};for(c in f){if(f.hasOwnProperty(c)){b=f[c];if(Ext.isArray(b)){q=b.length;for(i=0;i<q;i++){k(c,b[i])}}else {k(c,b)}}}}this.frame=e;e.on({load:this.onComplete,scope:this,single:!Ext.isOpera});a.submit();document.body.removeChild(a);Ext.fly(a).set(r);for(p=j.length,h=0;h<p;h++){Ext.removeNode(j[h])}return a},getDoc:function(){var a=this.frame.dom;return a&&(a.contentWindow.document||a.contentDocument)||(window.frames[a.id]||{}).document},getTimeout:function(){return this.options.timeout},onComplete:function(){var b=this,h=b.frame,i=b.owner,d=b.options,g,c,f,e,a;if(!h){return}if(b.aborted||b.timedout){b.result=a=b.createException();a.responseXML=null;a.responseText=Ext.encode({success:!1,message:Ext.String.trim(a.statusText)});a.request=b;g=d.failure;f=!1}else {try{c=b.getDoc();b.result=a={responseText:'',responseXML:null,request:b};if(c){if(Ext.isOpera&&c.location===Ext.SSL_SECURE_URL){return}if(c.body){if((e=c.body.firstChild)&&/pre/i.test(e.tagName)){a.responseText=e.textContent||e.innerText}else {if(e=c.getElementsByTagName('textarea')[0]){a.responseText=e.value}else {a.responseText=c.body.textContent||c.body.innerText}}}a.responseXML=c.XMLDocument||c;g=d.success;f=!0;a.status=200}else {Ext.raise('Could not acquire a suitable connection for the '+'file upload service.')}}catch(j){b.result=a=b.createException();a.status=400;a.statusText=(j.message||j.description)+'';a.responseText=Ext.encode({success:!1,message:Ext.String.trim(a.statusText)});a.responseXML=null;g=d.failure;f=!1}}b.frame=null;b.success=f;i.fireEvent(f?'requestcomplete':'requestexception',i,a,d);Ext.callback(g,d.scope,[a,d]);Ext.callback(d.callback,d.scope,[d,f,a]);i.onRequestComplete(b);Ext.asap(h.destroy,h);b.callParent()},destroy:function(){this.cleanup();this.callParent()}});Ext.define('Ext.data.Connection',{mixins:{observable:Ext.mixin.Observable},statics:{requestId:0},enctypeRe:/multipart\/form-data/i,config:{url:null,async:!0,username:'',password:'',disableCaching:!0,withCredentials:!1,binary:!1,cors:!1,isXdr:!1,defaultXdrContentType:'text/plain',disableCachingParam:'_dc',timeout:30000,extraParams:null,autoAbort:!1,method:null,defaultHeaders:null,defaultPostHeader:'application/x-www-form-urlencoded; charset=UTF-8',useDefaultXhrHeader:!0,defaultXhrHeader:'XMLHttpRequest'},constructor:function(a){this.mixins.observable.constructor.call(this,a);this.requests={}},request:function(a){var c=this,d,b;a=a||{};if(c.fireEvent('beforerequest',c,a)!==!1){d=c.setOptions(a,a.scope||Ext.global);b=c.createRequest(a,d);return b.start(d.data)}b={status:-1,statusText:'Request cancelled in beforerequest event handler'};Ext.callback(a.callback,a.scope,[a,!1,b]);return Ext.Deferred.rejected([a,!1,b])},createRequest:function(c,e){var a=this,d=c.type||e.type,b;if(!d){d=a.isFormUpload(c)?'form':'ajax'}if(c.autoAbort||a.getAutoAbort()){a.abort()}b=Ext.Factory.request({type:d,owner:a,options:c,requestOptions:e,ownerConfig:a.getConfig()});a.requests[b.id]=b;a.latestId=b.id;return b},isFormUpload:function(a){var b=this.getForm(a);if(b){return a.isUpload||this.enctypeRe.test(b.getAttribute('enctype'))}return !1},getForm:function(a){return Ext.getDom(a.form)},setOptions:function(a,k){var e=this,b=a.params||{},g=e.getExtraParams(),f=a.urlParams,c=a.url||e.getUrl(),l=a.cors,i=a.jsonData,h,j,d;if(l!==undefined){e.setCors(l)}if(Ext.isFunction(b)){b=b.call(k,a)}if(Ext.isFunction(c)){c=c.call(k,a)}c=this.setupUrl(a,c);d=a.rawData||a.binaryData||a.xmlData||i||null;if(i&&!Ext.isPrimitive(i)){d=Ext.encode(d)}if(a.binaryData){if(e.nativeBinaryPostSupport()){d=new Uint8Array(a.binaryData);if(Ext.isChrome&&Ext.chromeVersion<22||Ext.isSafari||Ext.isGecko){d=d.buffer}}}if(Ext.isObject(b)){b=Ext.Object.toQueryString(b)}if(Ext.isObject(g)){g=Ext.Object.toQueryString(g)}b=b+(g?(b?'&':'')+g:'');f=Ext.isObject(f)?Ext.Object.toQueryString(f):f;b=this.setupParams(a,b);h=(a.method||e.getMethod()||(b||d?'POST':'GET')).toUpperCase();this.setupMethod(a,h);j=a.disableCaching!==!1?a.disableCaching||e.getDisableCaching():!1;if(h==='GET'&&j){c=Ext.urlAppend(c,(a.disableCachingParam||e.getDisableCachingParam())+'='+(new Date()).getTime())}if((h==='GET'||d)&&b){c=Ext.urlAppend(c,b);b=null}if(f){c=Ext.urlAppend(c,f)}return {url:c,method:h,data:d||b||null}},setupUrl:function(c,a){var b=this.getForm(c);if(b){a=a||b.action}return a},setupParams:function(c,a){var d=this.getForm(c),b;if(d&&!this.isFormUpload(c)){b=Ext.Element.serializeForm(d);a=a?a+'&'+b:b}return a},setupMethod:function(a,b){if(this.isFormUpload(a)){return 'POST'}return b},isLoading:function(a){if(!a){a=this.getLatest()}return a?a.isLoading():!1},abort:function(a){if(!a){a=this.getLatest()}if(a&&a.isLoading()){a.abort()}},abortAll:function(){var a=this.requests,b;for(b in a){this.abort(a[b])}},getLatest:function(){var b=this.latestId,a;if(b){a=this.requests[b]}return a||null},clearTimeout:function(a){if(!a){a=this.getLatest()}if(a){a.clearTimer()}},onRequestComplete:function(a){delete this.requests[a.id]},nativeBinaryPostSupport:function(){return Ext.isChrome||Ext.isSafari&&Ext.isDefined(window.Uint8Array)||Ext.isGecko&&Ext.isDefined(window.Uint8Array)}});Ext.define('Ext.Ajax',{extend:Ext.data.Connection,singleton:!0,autoAbort:!1});Ext.define('Ext.AnimationQueue',{singleton:!0,constructor:function(){var a=this;a.queue=[];a.taskQueue=[];a.runningQueue=[];a.idleQueue=[];a.isRunning=!1;a.isIdle=!0;a.run=a.run.bind(a);if(Ext.os.is.iOS){a.watchdogTimer=Ext.interval(a.watch,500,a)}},start:function(d,b,c){var a=this;a.queue.push(arguments);if(!a.isRunning){if(a.hasOwnProperty('idleTimer')){Ext.undefer(a.idleTimer);delete a.idleTimer}if(a.hasOwnProperty('idleQueueTimer')){Ext.undefer(a.idleQueueTimer);delete a.idleQueueTimer}a.isIdle=!1;a.isRunning=!0;a.doStart()}},clear:function(){var a=this;Ext.undefer(a.idleTimer);Ext.undefer(a.idleQueueTimer);Ext.unraf(a.animationFrameId);a.idleTimer=a.idleQueueTimer=a.animationFrameId=null;a.queue.length=a.taskQueue.length=a.runningQueue.length=a.idleQueue.length=0;a.isRunning=!1;a.isIdle=!0},watch:function(){if(this.isRunning&&Ext.now()-this.lastRunTime>=500){this.run()}},run:function(){var a=this,c=a.runningQueue,f,d,e,b,g;a.animationFrameId=null;if(!a.isRunning){return}f=Ext.now();a.lastRunTime=f;a.frameStartTime=f;b=a.queue.length;while(b--){d=a.queue[b];e=d[1]&&d[1].getElement&&d[1].getElement();if(e&&e.destroyed){a.queue.splice(b,1)}}c.push.apply(c,a.queue);for(b=0,g=c.length;b<g;b++){a.invoke(c[b])}c.length=0;if(!a.queue.length){a.stop()}if(a.isRunning){a.doIterate()}},doStart:function(){if(!this.animationFrameId){this.animationFrameId=Ext.raf(this.run)}this.lastRunTime=Ext.now()},doIterate:function(){if(!this.animationFrameId){this.animationFrameId=Ext.raf(this.run)}},doStop:function(){if(this.animationFrameId){Ext.unraf(this.animationFrameId)}this.animationFrameId=null},stop:function(h,f,g){var a=this,d=a.queue,e=d.length,b,c;if(!a.isRunning){return}for(b=0;b<e;b++){c=d[b];if(c[0]===h&&c[1]===f&&c[2]===g){d.splice(b,1);b--;e--}}if(e===0){a.doStop();a.isRunning=!1;if(a.idleQueue.length&&!a.idleTimer){a.idleTimer=Ext.defer(a.whenIdle,100,a)}}},onIdle:function(h,f,g){var a=this,d=a.idleQueue,c,e,b;for(c=0,e=d.length;c<e;c++){b=d[c];if(h===b[0]&&f===b[1]&&g===b[2]){return}}d.push(arguments);if(a.isIdle){a.processIdleQueue()}else {if(!a.idleTimer){a.idleTimer=Ext.defer(a.whenIdle,100,a)}}},unIdle:function(h,f,g){var a=this,b=a.idleQueue,c,e,d;for(c=0,e=b.length;c<e;c++){d=b[c];if(h===d[0]&&f===d[1]&&g===d[2]){b.splice(c,1);return !0}}if(!b.length&&a.idleTimer){Ext.undefer(a.idleTimer);delete a.idleTimer}if(!b.length&&a.idleQueueTimer){Ext.undefer(a.idleQueueTimer);delete a.idleQueueTimer}return !1},queueTask:function(c,a,b){this.taskQueue.push(arguments);this.processTaskQueue()},dequeueTask:function(g,e,f){var c=this.taskQueue,a,d,b;for(a=0,d=c.length;a<d;a++){b=c[a];if(g===b[0]&&e===b[1]&&f===b[2]){c.splice(a,1);a--;d--}}},invoke:function(b){var a=b[0],c=b[1],d=b[2];a=typeof a==='string'?c[a]:a;if(Ext.isArray(d)){a.apply(c,d)}else {a.call(c,d)}},whenIdle:function(){delete this.idleTimer;this.isIdle=!0;this.processIdleQueue()},processIdleQueue:function(){if(!this.hasOwnProperty('idleQueueTimer')){this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this)}},processIdleQueueItem:function(){var a=this.idleQueue,b;delete this.idleQueueTimer;if(!this.isIdle){return}if(a.length>0){b=a.shift();this.invoke(b);this.processIdleQueue()}},processTaskQueue:function(){if(!this.hasOwnProperty('taskQueueTimer')){this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this)}},processTaskQueueItem:function(){var a=this.taskQueue,b;delete this.taskQueueTimer;if(a.length>0){b=a.shift();this.invoke(b);this.processTaskQueue()}}});Ext.define('Ext.mixin.Bufferable',function(a){return {extend:Ext.Mixin,mixinConfig:{id:'bufferable',after:{destroy:'cancelAllCalls'},before:{$reap:'cancelAllCalls'},extended:function(e,d,c){var b=c.bufferableMethods;if(b){delete c.bufferableMethods;a.processClass(d,b)}}},afterClassMixedIn:function(b){a.processClass(b)},privates:{cancelAllCalls:function(){var b=this.bufferables,c;if(b){for(c in b){b[c].cancel();delete b[c]}}},cancelBufferedCall:function(e,d){var c=this.bufferables,b=c&&c[e];if(b){b[d?'invoke':'cancel']()}return !!b},flushBufferedCall:function(b){return this.cancelBufferedCall(b,!0)},initBufferables:function(){var b=this,c=b.hasOwnProperty('bufferableMethods')&&b.bufferableMethods,d;if(c){a._canonicalize(c);d=b.self.prototype.bufferableMethods;b.bufferableMethods=Ext.merge(Ext.clone(d),c)}return b.bufferables={}},isCallPending:function(d){var b=this.bufferables,c=b&&b[d];return !!c},statics:{SINGLE:{single:!0},_canonicalize:function(f){var d,b,e,c;for(c in f){e=Ext.String.capitalize(c);b=f[c];d=typeof b;if(d==='number'||d==='string'){f[c]=b={delay:b}}if(typeof (d=b.delay)==='string'){b[d]=!0;delete b.delay}b.capitalized=e;b.name=c;if(!b.fn){b.fn='do'+e}if(!b.flag){b.flag='is'+e+'Pending'}}},_canceller:function(){var b=this,c=b.id;if(c){if(b.delay){Ext.undefer(c)}else {if(b.asap){Ext.unasap(c)}else {if(b.idle){Ext.un('idle',c,null,a.SINGLE)}else {if(b.raf){Ext.unraf(c)}}}}b.id=null}b.args=null;b.target[b.flag]=!1},_invoker:function(){var b=this,d=b.args||Ext.emptyArray,c=b.target;b.cancel();c[b.fn].apply(c,d)},delayCall:function(d,c,i){if(d.destroying){return}var f=d.bufferables||d.initBufferables(),h=c.name,b=f[h]||(f[h]=Ext.apply({args:null,cancel:a._canceller,id:null,target:d,invoke:a._invoker},c)),g=c.delay,e=function(){if(b.id){b.id=null;b.invoke()}};if(b.id){b.cancel()}b.args=i;d[b.flag]=!0;if(g){b.id=Ext.defer(e,g)}else {if(c.asap){b.id=Ext.asap(e)}else {if(c.idle){b.id=e;Ext.on('idle',e,null,a.SINGLE)}else {if(c.raf){b.id=Ext.raf(e)}else {b.invoke()}}}}},processClass:function(g,b){var d=g.prototype,c=d.bufferableMethods,f,e;if(b){a._canonicalize(b);if(c){c=Ext.merge(Ext.clone(c),b)}d.bufferableMethods=c||b}else {b=c;a._canonicalize(b);d.bufferables=null}if(b){for(e in b){if(!d[e]){f=b[e];a.processMethod(d,f,Array.prototype.slice)}}}},processMethod:function(b,d,f){var c=d.name,e=d.capitalized;b[c]=function(){return a.delayCall(this,d,f.call(arguments))};b['cancel'+e]=function(){return this.cancelBufferedCall(c)};b['flush'+e]=function(){return this.flushBufferedCall(c)}}}}}});Ext.define('Ext.ComponentManager',{alternateClassName:'Ext.ComponentMgr',singleton:!0,mixins:[Ext.mixin.Bufferable],count:0,fixReferencesTimer:null,referenceRepairs:0,typeName:'xtype',bufferableMethods:{handleDocumentMouseDown:'asap'},constructor:function(b){var a=this;Ext.apply(a,b);a.all={};a.byInstanceId={};a.holders={};a.onAvailableCallbacks={}},create:function(a,b){if(typeof a==='string'){return Ext.widget(a)}if(a.isComponent){return a}if('xclass' in a){return Ext.create(a.xclass,a)}return Ext.widget(a.xtype||b,a)},get:function(a){return this.all[a]},register:function(a){var b=this,d=a.getId(),c=b.onAvailableCallbacks;b.all[d]=a;b.byInstanceId[a.$iid]=a;if(a.nameHolder||a.referenceHolder){b.holders[d]=a}++b.count;if(!b.hasFocusListener){b.installFocusListener()}c=c&&c[d];if(c&&c.length){b.notifyAvailable(a)}},unregister:function(e){var b=this,f=b.all,d=b.byInstanceId,c=b.holders,a=e.getId();if(a in c){c[a]=null;delete c[a]}f[a]=null;delete f[a];a=e.$iid;d[a]=null;delete d[a];--b.count},markReferencesDirty:function(){var b=this,c=b.holders,a,d;if(!Ext.referencesDirty){for(d in c){a=c[d];a.refs=a.nameRefs=null;if(a.invalidateChildDirty){a.invalidateChildDirty()}}Ext.referencesDirty=!0;b.fixReferencesTimer=Ext.asap(function(){b.fixReferencesTimer=null;b.fixReferences()})}},fixReferences:function(){var c=this,e=c.all,d=c.holders,a,b;if(Ext.referencesDirty){c.fixReferencesTimer=Ext.unasap(c.fixReferencesTimer);Ext.referencesDirty=0;++c.referenceRepairs;for(b in d){a=d[b];if(a.beginSyncChildDirty){a.beginSyncChildDirty()}}for(b in e){e[b]._fixReference()}for(b in d){a=d[b];if(a.finishSyncChildDirty){a.finishSyncChildDirty()}}Ext.referencesDirty=!1}},onAvailable:function(a,f,d){var g=this,b=g.onAvailableCallbacks,e=g.all,c;if(a in e){c=e[a];f.call(d||c,c)}else {if(a){if(!Ext.isArray(b[a])){b[a]=[]}b[a].push(function(b){f.call(d||b,b)})}}},notifyAvailable:function(a){var b=this.onAvailableCallbacks[a&&a.getId()]||[];while(b.length){b.shift()(a)}},each:function(b,a){Ext.Object.each(this.all,b,a)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.from(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(g){var h=this,d=g.event.chain(),e=Ext.applyIf({event:d},g),c,b,f,a;c=d.toComponent=e.toComponent=Ext.Component.from(g.toElement);b=d.fromComponent=e.fromComponent=Ext.Component.from(g.fromElement);f=h.getCommonAncestor(b,c);if(c!==b){if(b&&!b.destroyed&&!b.isDestructing()){if(b.handleBlurEvent){b.handleBlurEvent(e)}for(a=b;a&&a!==f;a=a.getRefOwner()){if(!(a.destroyed||a.destroying)){d.type='focusleave';a.onFocusLeave(d)}}}if(c&&!c.destroyed&&!c.isDestructing()){if(c.handleFocusEvent){c.handleFocusEvent(e)}for(a=c;a&&a!==f;a=a.getRefOwner()){d.type='focusenter';a.onFocusEnter(d)}}}for(a=f;a;a=a.getRefOwner()){if(!(a.destroying||a.destroyed)){a.onFocusMove(e)}}},getCommonAncestor:function(a,b){if(a===b){return a}while(a&&!(a.isAncestor(b)||a===b)){a=a.getRefOwner()}return a},privates:{doHandleDocumentMouseDown:function(c){var b=Ext.Widget.prototype.floatedSelector,a;if(b){a=Ext.Component.from(c.getTarget(b,Ext.getBody()));if(a&&!a.activeAnimation){a.toFront(!0)}}},installFocusListener:function(){var a=this;Ext.on('focus',a.onGlobalFocus,a);a.hasFocusListener=!0},clearAll:function(){var a=this;a.all={};a.byInstanceId={};a.holders={};a.onAvailableCallbacks={}},from:function(b,c,f){var i=this.all,h=0,a,g,e,d;if(b&&b.isEvent){b=b.target}a=Ext.getDom(b);if(typeof c!=='number'){g=Ext.getDom(c);c=Number.MAX_VALUE}while(a&&a.nodeType===1&&h<c&&a!==g){e=a.getAttribute('data-componentid')||a.id;if(e){d=i[e];if(d&&(!f||Ext.ComponentQuery.is(d,f))){return d}h++}a=a.parentNode}return null}}},function(a){a.fromElement=a.from;Ext.referencesDirty=!1;Ext.fixReferences=function(){a.fixReferences()};Ext.markReferencesDirty=function(){a.markReferencesDirty()};Ext.getCmp=function(b){return a.get(b)};Ext.iidToCmp=function(b){return a.byInstanceId[b]||null};Ext.doEv=function(f,d){var b,c,e;b=Ext.Component.from(d.target);if(b&&!b.destroying&&!b.destroyed&&b.getEventHandlers){c=b.getEventHandlers()[d.type];if(c&&b[c]){e=new Ext.event.Event(d);return b[c](e)}}return !0}});Ext.ns('Ext.util').Operators={'=':function(a,b){return a==b},'!=':function(a,b){return a!=b},'^=':function(a,b){return a&&a.substr(0,b.length)==b},'$=':function(a,b){return a&&a.substr(a.length-b.length)==b},'*=':function(a,b){return a&&a.indexOf(b)!==-1},'%=':function(a,b){return a%b===0},'|=':function(a,b){return a&&(a==b||a.substr(0,b.length+1)==b+'-')},'~=':function(a,b){return a&&(' '+a+' ').indexOf(' '+b+' ')!=-1}};Ext.define('Ext.util.LruCache',{extend:Ext.util.HashMap,config:{maxSize:null},add:function(d,e){var a=this,b,c;a.removeAtKey(d);c=a.last;b={prev:c,next:null,key:d,value:e};if(c){c.next=b}else {a.first=b}a.last=b;a.callParent([d,b]);a.prune();return e},insertBefore:function(f,d,a){var c=this,e,b;if(a=this.map[this.findKey(a)]){e=c.findKey(d);if(e){c.unlinkEntry(b=c.map[e])}else {b={prev:a.prev,next:a,key:f,value:d}}if(a.prev){b.prev.next=b}else {c.first=b}b.next=a;a.prev=b;c.prune();return d}else {return c.add(f,d)}},get:function(b){var a=this.map[b];if(a){if(a.next){this.moveToEnd(a)}return a.value}},removeAtKey:function(a){this.unlinkEntry(this.map[a]);return this.callParent(arguments)},clear:function(a){this.first=this.last=null;return this.callParent([a])},unlinkEntry:function(a){if(a){if(a.next){a.next.prev=a.prev}else {this.last=a.prev}if(a.prev){a.prev.next=a.next}else {this.first=a.next}a.prev=a.next=null}},moveToEnd:function(a){this.unlinkEntry(a);if(a.prev=this.last){this.last.next=a}else {this.first=a}this.last=a},getArray:function(c){var b=[],a=this.first;while(a){b.push(c?a.key:a.value);a=a.next}return b},each:function(f,c,d){var b=this,a=d?b.last:b.first,e=b.length;c=c||b;while(a){if(f.call(c,a.key,a.value,e)===!1){break}a=d?a.prev:a.next}return b},findKey:function(c){var a,b=this.map;for(a in b){if(b.hasOwnProperty(a)&&b[a].value===c){return a}}return undefined},clone:function(){var a=new this.self(this.initialConfig),c=this.map,b;a.suspendEvents();for(b in c){if(c.hasOwnProperty(b)){a.add(b,c[b].value)}}a.resumeEvents();return a},prune:function(){var a=this,c=a.getMaxSize(),b=c?a.length-c:0;if(b>0){for(;a.first&&b;b--){a.removeAtKey(a.first.key)}}}});Ext.define('Ext.ComponentQuery',{singleton:!0},function(){var a=this,h=Ext.util.Operators,r=/(\d*)n\+?(\d*)/,q=/\D/,d=/^(\s)+/,c=/\\(.)/g,j=new Ext.util.LruCache({maxSize:100}),m=['var r = [],','i = 0,','it = items,','l = it.length,','c;','for (; i < l; i++) {','c = it[i];','if (c.{0}) {','r.push(c);','}','}','return r;'].join(''),b=function(b,a){return a.method.apply(this,[b].concat(a.args))},g=function(d,g){var b=[],c=0,e=d.length,a,f=g!=='>';for(;c<e;c++){a=d[c];if(a.getRefItems){b=b.concat(a.getRefItems(f))}}return b},e=function(d){var c=[],b=0,e=d.length,a;for(;b<e;b++){a=d[b];while(!!(a=a.getRefOwner())){c.push(a)}}return c},i=function(b,e,f){if(e==='*'){return b.slice()}else {var d=[],c=0,g=b.length,a;for(;c<g;c++){a=b[c];if(!a.destroyed&&a.isXType(e,f)){d.push(a)}}return d}},l=function(n,c,f,d){var e=[],o=n.length,j,l,b,a,k,g,i,m;if(c.charAt(0)==='@'){j=!0;c=c.substr(1)}if(c.charAt(0)==='?'){j=!0;l=!0;c=c.substr(1)}for(g=0;g<o;g++){b=n[g];k=b.self&&b.self.getConfigurator&&b.self.$config.configs[c];if(k){a=b[k.names.get]()}else {if(j&&!b.hasOwnProperty(c)){continue}else {a=b[c]}}if(l){e.push(b)}else {if(f==='~='){if(a){if(!Ext.isArray(a)){a=a.split(' ')}for(i=0,m=a.length;i<m;i++){if(h[f](Ext.coerce(a[i],d),d)){e.push(b);break}}}}else {if(f==='/='){if(a!=null&&d.test(a)){e.push(b)}}else {if(!d?!!a:h[f](Ext.coerce(a,d),d)){e.push(b)}}}}}return e},f=function(e,h,f){var c=[],b=0,g=e.length,a,d;for(;b<g;b++){a=e[b];d=f?a.id:a.getItemId();if(d===h){c.push(a)}}return c},n=function(b,d,c){return a.pseudos[d](b,c)},p=/^(\s?([>\^])\s?|\s|$)/,o=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,k=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:i,argTransform:function(a){if(a[1]!==undefined){a[1]=a[1].replace(c,'$1')}return a.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:l,argTransform:function(b){var g=b[0],f=b[1],e=b[2],a=b[4],d;if(a!==undefined){a=a.replace(c,'$1')}if(e==='/='){d=j.get(a);if(d){a=d}else {a=j.add(a,new RegExp(a))}}return [f,e,a]}},{re:/^#((?:\\\.|[\w\-])+)/,method:f},{re:/^:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:n,argTransform:function(a){if(a[2]!==undefined){a[2]=a[2].replace(c,'$1')}return a.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:m}];a.Query=Ext.extend(Object,{constructor:function(a){a=a||{};Ext.apply(this,a)},execute:function(f){var c=this.operations,b=[],e,a,d;for(a=0,d=c.length;a<d;a++){e=c[a];b=b.concat(this._execute(f,e))}return b},_execute:function(c,h){var f=0,i=h.length,d,a;if(!c){a=Ext.ComponentManager.getAll()}else {if(Ext.isIterable(c)){a=c}else {if(c.isMixedCollection){a=c.items}}}for(;f<i;f++){d=h[f];if(d.mode==='^'){a=e(a||[c])}else {if(d.mode){a=g(a||[c],d.mode)}else {a=b(a||g([c]),d)}}if(f===i-1){return a}}return []},is:function(f,g){var c=this.operations,b=!1,d=c.length,e,a;if(d===0){return !0}for(a=0;a<d;a++){e=c[a];b=this._is(f,g,e);if(b){return b}}return !1},_is:function(o,n,m){var l=m.length,a=[o],i,d,h,c,j,k;for(d=l-1;d>=0;--d){i=m[d];c=i.mode;if(c){if(c==='^'){a=g(a,' ')}else {if(c==='>'){j=[];for(h=0,l=a.length;h<l;++h){k=a[h].getRefOwner();if(k){j.push(k)}}a=j}else {a=e(a)}}}else {a=b(a,i)}if(a.length===0){return !1}}if(n){if(!c){a=e(a)}if(a.length>0){a=b(a,{method:f,args:[n.id,!0]})}if(a.length===0){return !1}}return !0},getMatches:function(a,d){var e=d.length,c;for(c=0;c<e;++c){a=b(a,d[c]);if(a.length===0){break}}return a},isMultiMatch:function(){return this.operations.length>1}});Ext.apply(a,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(d,f){var c=0,g=d.length,e=[],h=-1,b;for(;c<g;++c){b=d[c];if(!a.is(b,f)){e[++h]=b}}return e},first:function(a){var b=[];if(a.length>0){b.push(a[0])}return b},last:function(a){var b=a.length,c=[];if(b>0){c.push(a[b-1])}return c},focusable:function(d){var e=d.length,c=[],b=0,a;for(;b<e;b++){a=d[b];if(a.isFocusable&&a.isFocusable()){c.push(a)}}return c},canfocus:function(d,e){var f=d.length,c=[],b=0,a;for(;b<f;b++){a=d[b];if(a.canFocus&&a.canFocus(!1,e)){c.push(a)}}return c},'nth-child':function(i,a){var e=[],g,f,c,b,h,d;g=r.exec(a==='even'&&'2n'||a==='odd'&&'2n+1'||!q.test(a)&&'n+'+a||a);f=(g[1]||1)-0;b=g[2]-0;for(c=0;h=i[c];c++){d=c+1;if(f===1){if(b===0||d===b){e.push(h)}}else {if((d+b)%f===0){e.push(h)}}}return e},scrollable:function(d){var e=d.length,c=[],b=0,a;for(;b<e;b++){a=d[b];if(a.scrollable||a._scrollable){c.push(a)}}return c},visible:function(e,a){var f=e.length,d=[],c=0,b;a=a==='true';for(;c<f;c++){b=e[c];if(b.isVisible(a)){d.push(b)}}return d}},query:function(c,j){if(!c){return Ext.ComponentManager.getAll()}var b=[],g=[],h={},d=a.cache.get(c),i,e,f;if(!d){d=a.cache.add(c,a.parse(c))}b=d.execute(j);if(d.isMultiMatch()){i=b.length;for(f=0;f<i;f++){e=b[f];if(!h[e.id]){g.push(e);h[e.id]=!0}}b=g}return b},visitPreOrder:function(c,e,f,d,b){a._visit(!0,c,e,f,d,b)},visitPostOrder:function(c,e,f,d,b){a._visit(!1,c,e,f,d,b)},_visit:function(i,c,b,l,k,e){var j=a.cache.get(c),g=[b],h,m=0,d,f;if(!j){j=a.cache.add(c,a.parse(c))}f=j.is(b);if(b.getRefItems){h=b.getRefItems();m=h.length}if(e){Ext.Array.push(g,e)}if(i){if(f){if(l.apply(k||b,g)===!1){return !1}}}for(d=0;d<m;d++){if(a._visit.call(a,i,c,h[d],l,k,e)===!1){return !1}}if(!i){if(f){if(l.apply(k||b,g)===!1){return !1}}}},is:function(d,b,e){var c;if(!b){return !0}if(typeof b==='function'){return b(d)}else {c=a.cache.get(b);if(!c){c=a.cache.add(b,a.parse(b))}return c.is(d,e)}},parse:function(g){var d=[],c,f,b,e;c=Ext.splitAndUnescape(g,',');for(b=0,e=c.length;b<e;b++){f=Ext.String.trim(c[b]);d.push(a._parse(f))}return new a.Query({operations:d})},_parse:function(a){var h=[],v=Ext.String.trim,t=k.length,r,e,n,s,j,b,m,l,g,u,q;while(a&&r!==a){r=a;e=a.match(o);if(e){s=e[1];n=v(e[2]).replace(c,'$1');if(s==='#'){h.push({method:f,args:[n]})}else {h.push({method:i,args:[n,Boolean(e[3])]})}a=a.replace(e[0],'').replace(d,'$1')}while(!(j=a.match(p))){for(l=0;a&&l<t;l++){g=k[l];b=a.match(g.re);u=g.method;m=g.argTransform;if(b){if(m){q=m(b)}else {q=b.slice(1)}h.push({method:Ext.isString(g.method)?Ext.functionFactory('items',Ext.String.format.apply(Ext.String,[u].concat(b.slice(1)))):g.method,args:q});a=a.replace(b[0],'').replace(d,'$1');break}if(l===t-1){Ext.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(j[1]){h.push({mode:j[2]||j[1]});a=a.replace(j[0],'').replace(d,'')}}return h}});Ext.all=function(){return a.query.apply(a,arguments)};Ext.first=function(){var b=a.query.apply(a,arguments);return b&&b[0]||null}});Ext.define('Ext.Evented',{alternateClassName:'Ext.EventedBase',mixins:[Ext.mixin.Observable],initialized:!1,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.initialized=!0},onClassExtended:function(f,b){if(!b.hasOwnProperty('eventedConfig')){return}var e=b.config,a=b.eventedConfig,d,c;if(e){Ext.applyIf(e,a)}else {f.addConfig(a)}for(d in a){if(a.hasOwnProperty(d)){c=Ext.Config.get(d);b[c.names.set]=c.eventedSetter||c.getEventedSetter()}}}});Ext.define('Ext.util.Positionable',{mixinId:'positionable',_positionTopLeft:['position','top','left'],clippedCls:Ext.baseCSSPrefix+'clipped',afterSetPosition:Ext.emptyFn,adjustForConstraints:function(a,c){var b=this.getConstrainVector(c,a);if(b){a[0]+=b[0];a[1]+=b[1]}return a},alignTo:function(e,d,f,b){var a=this,c=a.el;return a.setXY(a.getAlignToXY(e,d,f),c.anim&&!!b?c.anim(b):!1)},calculateAnchorXY:function(c,d,e,b){var a=this.getRegion();a.setPosition(0,0);a.translateBy(d||0,e||0);if(b){a.setWidth(b.width);a.setHeight(b.height)}return a.getAnchorPoint(c)},convertPositionSpec:function(a){return Ext.util.Region.getAlignInfo(a)},getAlignToXY:function(b,c,d){var a=this.getAlignToRegion(b,c,d);return [a.x,a.y]},getAlignToRegion:function(a,c,d,i){var e=this,b,h,f,g;a=Ext.fly(a.el||a);if(!a||!a.dom){}c=e.convertPositionSpec(c);if(c.constrain){if(c.constrain==='!'){b=a}else {b=e.constrainTo||e.container||e.el.parent()}b=Ext.fly(b.el||b).getConstrainRegion()}if(a===Ext.getBody()){f=a.getScroll();g=d&&d.length===2?d:[0,0];d=[f.left+g[0],f.top+g[1]]}h=e.getRegion().alignTo({target:a.getRegion(),inside:b,minHeight:i,offset:d,align:c,axisLock:!0});return h},getAnchorXY:function(g,h,b){var e=this,a=e.getRegion(),c=e.el,f=c.dom.nodeName==='BODY'||c.dom.nodeType===9,d=c.getScroll();if(h){a.setPosition(0,0)}else {if(f){a.setPosition(d.left,d.top)}}if(b){a.setWidth(b.width);a.setHeight(b.height)}return a.getAnchorPoint(g)},getBox:function(j,k){var a=this,i=k?a.getLocalXY():a.getXY(),e=i[0],f=i[1],d,c,b,g,h;if(a.el.dom.nodeName==='BODY'||a.el.dom.nodeType===9){d=Ext.Element.getViewportWidth();c=Ext.Element.getViewportHeight()}else {d=a.getWidth();c=a.getHeight()}if(j){b=a.getBorderPadding();g=b.beforeX;h=b.beforeY;e+=g;f+=h;d-=g+b.afterX;c-=h+b.afterY}return {x:e,left:e,0:e,y:f,top:f,1:f,width:d,height:c,right:e+d,bottom:f+c}},calculateConstrainedPosition:function(h,c,j,l){var a=this,e,k=a.floatParent,i=k?k.getTargetEl():null,d,g,b,f=!1;if(j&&k){d=i.getXY();g=i.getBorderPadding();d[0]+=g.beforeX;d[1]+=g.beforeY;if(c){b=[c[0]+d[0],c[1]+d[1]]}}else {b=c}h=h||a.constrainTo||i||a.container||a.el.parent();if(j&&b){b=a.reverseTranslateXY(b)}e=(a.constrainHeader&&a.header.rendered?a.header:a).getConstrainVector(h,b,l);if(e){f=c||a.getPosition(j);f[0]+=e[0];f[1]+=e[1]}return f},getConstrainRegion:function(){var k=this,a=k.el,j=a.dom.nodeName==='BODY',h=a.dom,g=a.getBorders(),i=a.getXY(),e=i[0]+g.beforeX,f=i[1]+g.beforeY,c,d,b;if(j){c=a.getScroll();e=c.left;f=c.top;d=Ext.Element.getViewportWidth();b=Ext.Element.getViewportHeight()}else {d=h.clientWidth;b=h.clientHeight}return new Ext.util.Region(f,e+d,f+b,e)},getConstrainVector:function(a,h,i){var e=this,b=e.getRegion(),d=[0,0],g=e.shadow&&e.constrainShadow&&!e.shadowDisabled?e.el.shadow.getShadowSize():undefined,f=!1,c=e.constraintInsets;if(!(a instanceof Ext.util.Region)){a=Ext.get(a.el||a);a=a.getConstrainRegion()}if(c){c=Ext.isObject(c)?c:Ext.Element.parseBox(c);a.adjust(c.top,c.right,c.bottom,c.left)}if(h){b.translateBy(h[0]-b.x,h[1]-b.y)}if(i){b.right=b.left+i[0];b.bottom=b.top+i[1]}if(g){a.adjust(g[0],-g[1],-g[2],g[3])}if(b.right>a.right){f=!0;d[0]=a.right-b.right}if(b.left+d[0]<a.left){f=!0;d[0]=a.left-b.left}if(b.bottom>a.bottom){f=!0;d[1]=a.bottom-b.bottom}if(b.top+d[1]<a.top){f=!0;d[1]=a.top-b.top}return f?d:!1},getOffsetsTo:function(a){var c=this.getXY(),b=a.isRegion?[a.x,a.y]:Ext.fly(a.el||a).getXY();return [c[0]-b[0],c[1]-b[1]]},getRegion:function(b,c){var a=this.getBox(b,c);return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getClientRegion:function(){var i=this,d=i.el,f=d.dom,b=i.getBox(!0),e=f.offsetHeight>f.clientHeight,c=f.offsetWidth>f.clientWidth,a,g,h;if(e||c){g=Ext.getScrollbarSize();if(c){c=g.width;h=d.getStyle('direction')==='rtl'&&!Ext.supports.rtlVertScrollbarOnRight;if(h){a=d.getPadding('l');b.left-=a+Math.max(a,c)}else {a=d.getPadding('r');b.right+=a-Math.max(a,c)}}if(e){e=g.height;a=d.getPadding('b');b.bottom+=a-Math.max(a,e)}}return new Ext.util.Region(b.top,b.right,b.bottom,b.left)},getViewRegion:function(){var a=this,i=a.el,j=i.dom.nodeName==='BODY',d,f,h,c,b,g,e;if(j){f=i.getScroll();b=f.left;c=f.top;g=Ext.Element.getViewportWidth();e=Ext.Element.getViewportHeight()}else {d=a.getBorderPadding();h=a.getXY();b=h[0]+d.beforeX;c=h[1]+d.beforeY;g=a.getWidth(!0);e=a.getHeight(!0)}return new Ext.util.Region(c,b+g,c+e,b)},move:function(a,b,l){var j=this,k=j.getXY(),c=k[0],d=k[1],i=[c-b,d],g=[c+b,d],f=[c,d-b],e=[c,d+b],h={l:i,left:i,r:g,right:g,t:f,top:f,up:f,b:e,bottom:e,down:e};a=a.toLowerCase();j.setXY([h[a][0],h[a][1]],l)},setBox:function(a){var b=this,c,d;if(a.isRegion){a={x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top}}b.constrainBox(a);c=a.x;d=a.y;b.setXY([c,d]);b.setSize(a.width,a.height);b.afterSetPosition(c,d);return b},constrainBox:function(a){var c=this,b,d,e;if(c.constrain||c.constrainHeader){d='x' in a?a.x:a.left;e='y' in a?a.y:a.top;b=c.calculateConstrainedPosition(null,[d,e],!1,[a.width,a.height]);if(b){a.x=b[0];a.y=b[1]}}},translatePoints:function(b,c){var a=this.translateXY(b,c);return {left:a.x,top:a.y}},translateXY:function(a,g){var f=this,e=f.el,d=e.getStyle(f._positionTopLeft),h=d.position==='relative',b=parseFloat(d.left),c=parseFloat(d.top),i=f.getXY();if(Ext.isArray(a)){g=a[1];a=a[0]}if(isNaN(b)){b=h?0:e.dom.offsetLeft}if(isNaN(c)){c=h?0:e.dom.offsetTop}b=typeof a==='number'?a-i[0]+b:undefined;c=typeof g==='number'?g-i[1]+c:undefined;return {x:b,y:c}},reverseTranslateXY:function(d){var h=d,b=this.el,i=b.dom,a=i.offsetParent,g,c,e,f;if(a){g=b.isStyle('position','relative');c=Ext.fly(a).getXY();e=d[0]+c[0]+a.clientLeft;f=d[1]+c[1]+a.clientTop;if(g){e+=b.getPadding('l');f+=b.getPadding('t')}h=[e,f]}return h},privates:{clipTo:function(h,g){var f,b=this.el,j=b.getRegion(),e,c,a=[],l=this.clippedCls,d,i,k;if(h.isRegion){f=h}else {f=(h.isComponent?h.el:Ext.fly(h)).getConstrainRegion()}if(!g){g=15}if(g&1&&(e=f.top-j.top)>0){a[0]=e;i=!0}else {a[0]=-10000}if(g&2&&(e=j.right-f.right)>0){a[1]=Math.max(0,b.getWidth()-e);i=!0}else {a[1]=10000}if(g&4&&(e=j.bottom-f.bottom)>0){a[2]=Math.max(0,b.getHeight()-e);i=!0}else {a[2]=10000}if(g&8&&(e=f.left-j.left)>0){a[3]=e;i=!0}else {a[3]=-10000}d='rect(';for(c=0;c<4;++c){d+=Ext.Element.addUnits(a[c],'px');d+=c===3?')':','}b.dom.style.clip=d;b.addCls(l);if((k=b.shadow)&&(b=k.el)&&b.dom){a[2]-=k.offsets.y;a[3]-=k.offsets.x;d='rect(';for(c=0;c<4;++c){d+=Ext.Element.addUnits(a[c],'px');d+=c===3?')':','}b.dom.style.clip=d;if(i&&!Ext.supports.CSS3BoxShadow){b.dom.style.display='none'}else {b.dom.style.display='';b.addCls(l)}}},clearClip:function(){var a=this.el,b=this.clippedCls;a.dom.style.clip=Ext.isIE8?'auto':'';a.removeCls(b);if(a.shadow&&a.shadow.el&&a.shadow.el.dom){a.shadow.el.dom.style.clip=Ext.isIE8?'auto':'';if(!Ext.supports.CSS3BoxShadow){a.dom.style.display='';a.removeCls(b)}}}}});Ext.define('Ext.overrides.util.Positionable',{override:'Ext.util.Positionable',anchorTo:function(e,f,i,h,c,g){var a=this,d=!Ext.isEmpty(c),b=function(){a.mixins.positionable.alignTo.call(a,e,f,i,h);Ext.callback(g,a)},j=a.getAnchor();a.removeAnchor();Ext.apply(j,{fn:b,scroll:d});Ext.on('resize',b,null);if(d){Ext.getWin().on('scroll',b,null,{buffer:!isNaN(c)?c:50})}b();return a},getAnchor:function(){var c=this.el,b,a;if(!c||!c.dom){return}b=c.getData();a=b._anchor;if(!a){a=b._anchor={}}return a},alignTo:function(g,f,h,d){var a=this,e=a.el,b,c;if(a.isComponent&&a.getSizeModel().height.shrinkWrap){if(a.maxHeight){a.setMaxHeight(null)}b=!0}c=a.getAlignToRegion(g,f,h,a.minHeight||150);a.setXY([c.x,c.y],e.anim&&!!d?e.anim(d):!1);if(b&&(b=c.getHeight())!==a.getHeight()){a.setMaxHeight(b)}return a},removeAnchor:function(){var a=this.getAnchor();if(a&&a.fn){Ext.un('resize',a.fn);if(a.scroll){Ext.getWin().on('scroll',a.fn)}delete a.fn}return this},setBox:function(a,c){var b=this;if(a.isRegion){a={x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top}}if(c){b.constrainBox(a);b.animate(Ext.applyIf({to:a,listeners:{afteranimate:Ext.Function.bind(b.afterSetPosition,b,[a.x,a.y])}},c))}else {b.callParent([a])}return b}});Ext.define('Ext.dom.UnderlayPool',{constructor:function(a){this.elementConfig=a;this.cache=[]},checkOut:function(){var a=this.cache.shift();if(!a){a=Ext.Element.create(this.elementConfig);a.setVisibilityMode(2)}return a},checkIn:function(a){this.cache.push(a);Ext.getDetachedBody().dom.appendChild(a.dom)},reset:function(){var a=this.cache,b=a.length;while(b--){a[b].destroy()}this.cache=[]}});Ext.define('Ext.dom.Underlay',{constructor:function(a){Ext.apply(this,a)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var b=this,a=b.el;if(a){if(a.dom){a.hide();b.getPool().checkIn(a)}b.el=null}b.hidden=!0},realign:function(d,e,c,b){var h=this,g=h.el,f=h.target,a=h.offsets,i=Math.max;if(g){if(d==null){d=f.getX()}if(e==null){e=f.getY()}if(c==null){c=f.getWidth()}if(b==null){b=f.getHeight()}if(a){d=d+a.x;e=e+a.y;c=i(c+a.w,0);b=i(b+a.h,0)}g.setXY([d,e]);g.setSize(c,b)}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle('z-index',a)}},show:function(){var a=this,f=a.target,c=a.zIndex,b=a.el,e=a.getInsertionTarget().dom,d;if(!b){b=a.el=a.getPool().checkOut()}a.beforeShow();if(c==null){c=parseInt(f.getStyle('z-index'),10)}if(c){b.setStyle('z-index',c)}b.setStyle('position',a.fixed?'fixed':'');d=b.dom;if(d.nextSibling!==e){f.dom.parentNode.insertBefore(d,e)}b.show();a.realign();a.hidden=!1}});Ext.define('Ext.dom.Shadow',{extend:Ext.dom.Underlay,alternateClassName:'Ext.Shadow',mode:'drop',offset:4,cls:Ext.baseCSSPrefix+(!Ext.supports.CSS3BoxShadow?'ie':'css')+'-shadow',constructor:function(f){var d=this,e,c,a,b;d.callParent([f]);d.elementConfig={cls:d.cls,role:'presentation'};a=d.offset;b=Math.floor(a/2);d.opacity=50;switch(d.mode.toLowerCase()){case 'drop':e={x:0,y:0,w:a,h:a};if(Ext.supports.CSS3BoxShadow){c={x:a,y:a,h:-a,w:-a}}else {c={x:-b,y:-b,h:-b,w:-b}};break;case 'sides':e={x:-a,y:0,w:a*2,h:a};if(Ext.supports.CSS3BoxShadow){c={x:0,y:a,h:-a,w:0}}else {c={x:1+b-2*a,y:-(1+b),h:-1,w:b-1}};break;case 'frame':e={x:-a,y:-a,w:a*2,h:a*2};if(Ext.supports.CSS3BoxShadow){c={x:0,y:0,h:0,w:0}}else {c={x:1+b-2*a,y:1+b-2*a,h:a-b-1,w:a-b-1}};break;case 'bottom':e={x:-a,y:0,w:a*2,h:a};if(Ext.supports.CSS3BoxShadow){c={x:0,y:a,h:-a,w:0}}else {c={x:0,y:a,h:0,w:0}};break;}d.offsets=c;d.outerOffsets=e},getShadowSize:function(){var b=this,a=b.el?b.offset:0,c=[a,a,a,a],d=b.mode.toLowerCase();if(b.el&&d!=='frame'){c[0]=0;if(d==='drop'){c[3]=0}}return c},boxShadowProperty:function(){var a='boxShadow',b=document.documentElement.style;if(!('boxShadow' in b)){if('WebkitBoxShadow' in b){a='WebkitBoxShadow'}else {if('MozBoxShadow' in b){a='MozBoxShadow'}}}return a}(),beforeShow:function(){var a=this,b=a.el.dom.style,c=a.shim;if(Ext.supports.CSS3BoxShadow){b[a.boxShadowProperty]='0 0 '+(a.offset+2)+'px #888'}else {b.filter='progid:DXImageTransform.Microsoft.alpha(opacity='+a.opacity+') progid:DXImageTransform.Microsoft.Blur(pixelradius='+a.offset+')'}if(c){c.realign()}},setOpacity:function(a){var b=this.el;if(b){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){a=Math.floor(a*100/2)/100}this.opacity=a;b.setOpacity(a)}}});Ext.define('Ext.dom.Shim',{extend:Ext.dom.Underlay,cls:Ext.baseCSSPrefix+'shim',constructor:function(a){this.callParent([a]);this.elementConfig={tag:'iframe',cls:this.cls,role:'presentation',frameBorder:'0',src:Ext.SSL_SECURE_URL,tabindex:'-1'}},getInsertionTarget:function(){var a=this.shadow;return a&&a.el||this.target}});Ext.define('Ext.dom.ElementEvent',{extend:Ext.util.Event,addListener:function(h,f,a,e,d){var b=this,c=!1,g=b.name,j=Ext.event.publisher.Dom.instance.directEvents[g],k,l,i;a=a||{};if(a.delegated===!1||j){if(j&&a.delegate){a.capture=!0}if(a.capture){i=b.directCaptures||(b.directCaptures=new Ext.util.Event(b.observable,g));c=i.addListener(h,f,a,e,d)}else {l=b.directs||(b.directs=new Ext.util.Event(b.observable,g));c=l.addListener(h,f,a,e,d)}}else {if(a.capture){k=b.captures||(b.captures=new Ext.util.Event(b.observable,g));c=k.addListener(h,f,a,e,d)}else {c=b.callParent([h,f,a,e,d])}}return c},removeListener:function(c,b){var e=this,g=e.captures,h=e.directs,f=e.directCaptures,d=!1,a=e.findListener(c,b);if(a!==-1){d=e.callParent([c,b,a])}else {if(h){a=h.findListener(c,b)}if(a!==-1){d=h.removeListener(c,b,a)}else {if(g){a=g.findListener(c,b)}if(a!==-1){d=g.removeListener(c,b,a)}else {if(f){a=f.findListener(c,b);if(a!==-1){d=f.removeListener(c,b,a)}}}}}return d},clearListeners:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;if(b){b.clearListeners()}if(d){d.clearListeners()}if(c){c.clearListeners()}a.callParent()},suspend:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;if(b){b.suspend()}if(d){d.suspend()}if(c){c.suspend()}a.callParent()},resume:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;if(b){b.resume()}if(d){d.resume()}if(c){c.resume()}a.callParent()}});Ext.define('Ext.event.publisher.Publisher',{isEventPublisher:!0,$vetoClearingPrototypeOnDestroy:!0,handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var a=this,b=a.type;a.handles={};a.registerEvents();Ext.event.publisher.Publisher.publishers[b]=a},registerEvents:function(f){var c=this,e=Ext.event.publisher.Publisher.publishersByEvent,d=f||c.handledEvents,g=d.length,b,a;for(a=0;a<g;a++){b=d[a];c.handles[b]=1;e[b]=c}},fire:function(c,b,d){var a;if(c.hasListeners[b]){a=c.events[b];if(a){a.fire.apply(a,d)}}}});Ext.define('Ext.util.Offset',{statics:{fromObject:function(a){if(a instanceof this){return a}if(typeof a==='number'){return new this(a,a)}if(a.length){return new this(a[0],a[1])}return new this(a.x,a.y)}},constructor:function(a,b){this.x=a!=null&&!isNaN(a)?a:0;this.y=b!=null&&!isNaN(b)?b:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x;this.y=a.y},toString:function(){return 'Offset['+this.x+','+this.y+']'},equals:function(a){return this.x===a.x&&this.y===a.y},add:function(a){this.x+=a.x;this.y+=a.y},round:function(b){var a;if(!isNaN(b)){a=Math.pow(10,b);this.x=Math.round(this.x*a)/a;this.y=Math.round(this.y*a)/a}else {this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x===0&&this.y===0}});Ext.define('Ext.util.Region',function(){var a=Ext.util,j=/([^\?!]*)(!|\?)?$/,p=/^(?:(?:([trbl])(\d+))|(tl|t|tc|tr|l|c|r|bl|b|bc|br))(?:-(?:(?:([trbl])(\d+))|(tl|t|tc|tr|l|c|r|bl|b|bc|br)))?$/i,e={l:0,r:100,t:0,b:100,c:50},f={l:100,r:0,t:0,b:100,c:50},d={b:0,l:1,t:2,r:3},o={'tl-tr':'l0-r0','tl-r':'l0-r50','bl-r':'l100-r50','bl-br':'l100-r100','tr-tl':'r0-l0','tr-l':'r0-l50','br-l':'r100-l50','br-bl':'r100-l100'},l={'tl-tr':'r0-l0','tl-r':'r0-l50','bl-r':'r100-l50','bl-br':'r100-l100','tr-tl':'l0-r0','tr-l':'l0-r50','br-l':'l100-r50','br-bl':'l100-r100'},b=[],m=new a.Offset(0,0),k=function(b){var g=a.Region,h=typeof b,f,d,c,e;if(b==null){return g.EMPTY}if(b.isRegion){return b}if(b.isElement||b.nodeType===1){return this.getRegion(b)}if(h==='string'){b=b.split(' ');switch(b.length){case 1:b[1]=b[2]=b[3]=b[0];break;case 2:b[2]=b[0];b[3]=b[1];break;case 3:b[3]=b[1];}f=parseInt(b[0],10)||0;d=parseInt(b[1],10)||0;c=parseInt(b[2],10)||0;e=parseInt(b[3],10)||0}else {if(h==='number'){f=d=c=e=b}else {if(typeof b.x==='number'){f=b.y;e=b.x;if(typeof b.right==='number'){d=b.right;c=b.bottom}else {d=e+b.width;c=f+b.height}}}}return new g(f,d,c,e)},n=[-1,1,1,-1],g=function(c,e,d){if(d!=null&&e){b[0]=b[1]=b[2]=b[3]=0;b[d]=e.y*n[d];c=a.Region.from(c);c.adjust.apply(c,b)}return c},c=function(d,b,i,m,l){var h=Math.ceil(m.x),k=Math.ceil(h/2)+3,g,f,c,e,j,n,o;if(l&&!l.intersect(d)){return}if(i!=null){if(i&1){if(b.getHeight()<h+4){return}g=d.top+k-b.height;f=d.bottom-k-1;b.setPosition(b.x,Math.min(Math.max(b.y,g),f));g=b.top+2;f=b.bottom-(h+2);e=i===3;n=e?b.right:b.left;j=new a.Region(Math.max(b.top,d.top),n,Math.min(b.bottom,d.bottom),n);c=(new a.Region(0,0,0,0)).setWidth(m.y).setHeight(h).alignTo({target:j,align:e?'l-r':'r-l',overlap:!0});c.setPosition(c.x,Math.min(Math.max(c.y,g),f));c.position=e?'right':'left'}else {if(b.getWidth()<h+4){return}g=d.left+k-b.width;f=d.right-k-1;b.setPosition(Math.min(Math.max(b.x,g),f),b.y);g=b.left+2;f=b.right-(h+2);e=i===0;o=e?b.bottom:b.top;j=new a.Region(o,Math.min(b.right,d.right),o,Math.max(b.left,d.left));c=(new a.Region(0,0,0,0)).setWidth(h).setHeight(m.y).alignTo({target:j,align:e?'t-b':'b-t',overlap:!0});c.setPosition(Math.min(Math.max(c.x,g),f),c.y);c.position=e?'bottom':'top'}if(l&&!l.contains(c)){return}b.anchor=c;b.anchor.align=i}},h=function(c,a,e,b){var d;if(c&&b){if(a.top>=e.bottom&&a.bottom>b.bottom){a.setHeight(Math.max(a.getHeight()+b.bottom-a.bottom,c));a.constrainHeight=!0}else {if(a.bottom<=e.top&&a.top<b.top){d=Math.max(a.getHeight()+a.top-b.top,c);a.adjust(a.getHeight()-d);a.constrainHeight=!0}else {if(a.getHeight()>b.getHeight()){a.setHeight(Math.max(c,b.getHeight()));a.setPosition(a.x,0);a.constrainHeight=!0}}}}},i=function(c,a,e,b){var d;if(c&&b){if(a.left>=e.right&&a.right>b.right){a.setWidth(Math.max(a.getWidth()+b.right-a.right,c));a.constrainWidth=!0}else {if(a.right<=e.left&&a.left<b.left){d=Math.max(a.getWidth()+a.left-b.left,c);a.adjust(0,0,0,a.getWidth()-d);a.constrainWidth=!0}else {if(a.getWidth()>b.getWidth()){a.setWidth(Math.max(c,b.getWidth()));a.setPosition(0,a.y);a.constrainWidth=!0}}}}};return {isRegion:!0,statics:{getRegion:function(a){return Ext.fly(a).getRegion()},from:function(a){return new this(a.top,a.right,a.bottom,a.left)},getAlignInfo:function(a,i){if(typeof a==='object'){return a}a=a?a.indexOf('-')<0?'tl-'+a:a:'tl-bl';g=j.exec(a);a=g[1];a=(i?l:o)[a]||a;var h=i?f:e,g,c=p.exec(a),b;b={myEdge:c[1],myOffset:c[2],otherEdge:c[4],otherOffset:c[5],constrain:g[2]};if(c[3]){b.myEdge=c[3][0];b.myOffset=h[c[3][1]];if(b.myOffset==null){b.myOffset=50}}if(c[6]){b.otherEdge=c[6][0];b.otherOffset=h[c[6][1]];if(b.otherOffset==null){b.otherOffset=50}}b.position=d[b.myEdge];return b}},constructor:function(e,c,b,d){var a=this;a.y=a.top=a[1]=e;a.right=c;a.bottom=b;a.x=a.left=a[0]=d;a.height=a.bottom-a.top;a.width=a.right-a.left},setPosition:function(a,b){if(arguments.length===1){b=a[1];a=a[0]}return this.translateBy(a-this.x,b-this.y)},contains:function(a){var b=this;return a.x>=b.x&&(a.right||a.x)<=b.right&&a.y>=b.y&&(a.bottom||a.y)<=b.bottom},intersect:function(a){var b=this,f=Math.max(b.y,a.y),e=Math.min(b.right,a.right),c=Math.min(b.bottom,a.bottom),d=Math.max(b.x,a.x);if(c>f&&e>d){return new this.self(f,e,c,d)}else {return !1}},union:function(a){var b=this,f=Math.min(b.y,a.y),e=Math.max(b.right,a.right),c=Math.max(b.bottom,a.bottom),d=Math.min(b.x,a.x);return new this.self(f,e,c,d)},constrainTo:function(b){var a=this,c=Ext.Number.constrain;a.top=a.y=c(a.top,b.y,b.bottom);a.bottom=c(a.bottom,b.y,b.bottom);a.left=a.x=c(a.left,b.x,b.right);a.right=c(a.right,b.x,b.right);a.height=a.bottom-a.top;a.width=a.right-a.left;return a},adjust:function(e,c,b,d){var a=this;a.top=a.y+=e||0;a.left=a.x+=d||0;a.right+=c||0;a.bottom+=b||0;a.height=a.bottom-a.top;a.width=a.right-a.left;return a},getOutOfBoundOffset:function(d,b){var c;if(!Ext.isObject(d)){if(d==='x'){return this.getOutOfBoundOffsetX(b)}else {return this.getOutOfBoundOffsetY(b)}}else {b=d;c=new a.Offset();c.x=this.getOutOfBoundOffsetX(b.x);c.y=this.getOutOfBoundOffsetY(b.y);return c}},getOutOfBoundOffsetX:function(a){if(a<=this.x){return this.x-a}else {if(a>=this.right){return this.right-a}}return 0},getOutOfBoundOffsetY:function(a){if(a<=this.y){return this.y-a}else {if(a>=this.bottom){return this.bottom-a}}return 0},isOutOfBound:function(b,a){if(!Ext.isObject(b)){if(b==='x'){return this.isOutOfBoundX(a)}else {return this.isOutOfBoundY(a)}}else {a=b;return this.isOutOfBoundX(a.x)||this.isOutOfBoundY(a.y)}},isOutOfBoundX:function(a){return a<this.x||a>this.right},isOutOfBoundY:function(a){return a<this.y||a>this.bottom},restrict:function(d,a,b){var c;if(Ext.isObject(d)){b=a;a=d;if(a.copy){c=a.copy()}else {c={x:a.x,y:a.y}}c.x=this.restrictX(a.x,b);c.y=this.restrictY(a.y,b);return c}else {if(d==='x'){return this.restrictX(a,b)}else {return this.restrictY(a,b)}}},restrictX:function(a,b){if(!b){b=1}if(a<=this.x){a-=(a-this.x)*b}else {if(a>=this.right){a-=(a-this.right)*b}}return a},restrictY:function(a,b){if(!b){b=1}if(a<=this.y){a-=(a-this.y)*b}else {if(a>=this.bottom){a-=(a-this.bottom)*b}}return a},alignTo:function(h){var l=this,r=l.self,x=a.Offset,w=Ext.Element,e=k(h.target),p,o=h.rtl,q=h.overlap,f=h.align,i=h.anchorSize,m=h.offset,d=h.inside,j=h.position,t=h.allowXTranslate,u=h.allowYTranslate,n,b,v,s;if(m){m=x.fromObject(m)}if(i){i=x.fromObject(i)}if(d&&!d.isRegion){if(Ext.getDom(d)===document.body){d=new r(0,w.getDocumentWidth(),w.getDocumentHeight(),0)}else {d=Ext.fly(d).getRegion()}}if(j){if(j.length===2){j=new a.Point(j[0],j[1])}b=(new r()).copyFrom(l).setPosition(j.x,j.y)}else {f=l.getAlignInfo(f,o);if(d){if(e.x>=d.right){e.setPosition(d.right-1,e.y);if(f.position!==3){f=l.getAlignInfo('r-l',o)}}else {if(e.right<d.x){e.setPosition(d.x-e.getWidth()+1,e.y);if(f.position!==1){f=l.getAlignInfo('l-r',o)}}}if(e.y>=d.bottom){e.setPosition(e.x,d.bottom-1);if(f.position!==0){f=l.getAlignInfo('b-t',o)}}else {if(e.bottom<d.y){e.setPosition(e.x,d.y-e.getHeight()+1);if(f.position!==2){f=l.getAlignInfo('t-b',o)}}}}p=i?g(e,i,f.position):e;b=r.from(l).translateBy(l.getAlignToVector(p,f));q=!!b.intersect(p);if(m&&(q||!i)){b.translateBy(m)}if(i){c(e,b,f.position,i,d)}}if(d){v=b.copy();if(b.left<d.left){b.translateBy(d.left-b.left,0);n=!0}if(b.right>d.right&&b.left>d.left){b.translateBy(d.right-b.right,0);n=!0}if(b.top<d.top){b.translateBy(0,d.top-b.top);n=!0}if(b.bottom>d.bottom&&b.top>d.top){b.translateBy(0,d.bottom-b.bottom);n=!0}if(n&&!q){b.anchor=null;if(h.axisLock){if(f.position&1){u=!1}else {t=!1}}if(j){if(b.contains(j)){j.exclude(b,{inside:d,centerOnSideChange:!1})}}else {s=b.copy();if(b.intersect(p)){f.position=e.exclude(b,{initialPosition:v,defaultPosition:f.position,inside:d,minHeight:h.minHeight,minWidth:h.minWidth,allowX:t,allowY:u,offset:m,anchorHeight:i?i.y:0,centerOnSideChange:!!i})}else {if(h.minWidth&&b.getWidth()>d.getWidth()){b.setPosition(0,b.y);b.setWidth(Math.max(d.getWidth(),h.minWidth));b.constrainWidth=!0}else {if(h.minHeight&&b.getHeight()>d.getHeight()){b.setPosition(b.x,0);b.setHeight(Math.max(d.getHeight(),h.minHeight));b.constrainHeight=!0}}}b.align=f;if(d.contains(b)){if(i){c(e,b,f.position,i,d)}}else {b=s}}}}return b},exclude:function(d,e){e=e||{};var j=this,s=e.initialPosition||d,n=e.inside,r=e.defaultPosition,u=e.centerOnSideChange,v=e.minHeight,w=e.minWidth,x=e.allowX!==!1,y=e.allowY!==!1,k=e.anchorHeight,g=e.offset,l=[],c,b,t,f,q,p,o;if(!g){g=m}if(y){l.push([0,j.top-d.bottom-k+g.y,'b-t',0,Math.abs(j.top-s.bottom-k+g.y)]);l.push([0,j.bottom-d.top+k+g.y,'t-b',2,Math.abs(j.bottom-s.top+k+g.y)])}else {u=!1}if(x){l.push([j.left-d.right-k+g.x,0,'r-l',3,Math.abs(j.left-s.right-k+g.x)]);l.push([j.right-d.left+k+g.x,0,'l-r',1,Math.abs(j.right-s.left+k+g.x)])}else {u=!1}Ext.Array.sort(l,function(b,c){var a=b[4]-c[4];if(!a){if(b[3]===r){return -1}if(c[3]===r){return 1}}return a});if(n){for(t=0;t<l.length;t++){b=l[t];c=a.Region.from(d);c.translateBy.apply(c,b);if(n.contains(c)){d.copyFrom(c);o={align:b[2],position:b[3],distance:b[4]};break}if(v){h(v,c,j,n);if(n.contains(c)){if(!f||c.getArea()>f.region.getArea()){f={region:c,align:b[2],position:b[3],distance:b[4]}}}}if(w){i(w,c,j,n);if(n.contains(c)){if(!f||c.getArea()>f.region.getArea()){f={region:c,align:b[2],position:b[3],distance:b[4]}}}}p=n.intersect(c);if(p){p=p.getArea();if(!q||p&&q.area<p){q={region:c,align:b[2],position:b[3],distance:b[4],area:p}}}}if(!o){if(f){d.copyFrom(f.region);o=f;d.constrainWidth=f.region.constrainWidth;d.constrainHeight=f.region.constrainHeight}else {if(q){d.copyFrom(q.region);o=q}}}if(o){if((o.position&1)!==(r&1)){if(o.distance&&u){b=d.alignTo({align:o.align,target:j,anchorSize:k,offset:g,axisLock:!0,inside:n,minHeight:e.minHeight,minWidth:e.minWidth});if(n.contains(b)){d.setPosition(b.x,b.y)}}}return o.position}}else {d.translateBy.apply(d,l[0]);return l[0][3]}return r},getAlignToXY:function(b,c,d){var a=this.getAlignToVector(b,c,d);return [this.x+a[0],this.y+a[1]]},getAnchorPoint:function(a,b){a=typeof a==='string'?this.getAlignInfo(a+'-tl',b):a;return this['getAnchorPoint_'+a.myEdge](a.myOffset)},getAlignToVector:function(d,a,e){a=typeof a==='string'?this.getAlignInfo(a,e):a;var c=this['getAnchorPoint_'+a.myEdge](a.myOffset),b=d['getAnchorPoint_'+a.otherEdge](a.otherOffset);return [b[0]-c[0],b[1]-c[1]]},getAnchorPoint_t:function(a){return [this.x+Math.round(this.getWidth()*(a/100)),this.y]},getAnchorPoint_b:function(a){return [this.x+Math.round(this.getWidth()*(a/100)),this.bottom]},getAnchorPoint_l:function(a){return [this.x,this.y+Math.round(this.getHeight()*(a/100))]},getAnchorPoint_r:function(a){return [this.right,this.y+Math.round(this.getHeight()*(a/100))]},getAnchorPoint_c:function(){return [this.x+Math.round(this.getWidth()/2),this.y+Math.round(this.getHeight()/2)]},getCenter:function(){return [this.x+this.width/2,this.y+this.height/2]},getHeight:function(){return this.bottom-this.y},getWidth:function(){return this.right-this.x},getArea:function(){return this.getHeight()*this.getWidth()},setHeight:function(a){this.height=a;this.bottom=this.top+a;return this},setWidth:function(a){this.width=a;this.right=this.left+a;return this},getSize:function(){return {width:this.right-this.x,height:this.bottom-this.y}},setSize:function(b,a){if(a===undefined){a=b}this.setWidth(b);return this.setHeight(a)},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(b){var a=this;a.top=a.y=a[1]=b.y;a.right=b.right;a.bottom=b.bottom;a.left=a.x=a[0]=b.x;return a},toString:function(){return 'Region['+this.top+','+this.right+','+this.bottom+','+this.left+']'},translateBy:function(a,c){var b=this;if(a.length){c=a[1];a=a[0]}else {if(arguments.length===1){c=a.y;a=a.x}}b.top=b.y+=c;b.right+=a;b.bottom+=c;b.left=b.x+=a;return b},round:function(){var a=this;a.top=a.y=Math.round(a.y);a.right=Math.round(a.right);a.bottom=Math.round(a.bottom);a.left=a.x=Math.round(a.x);return a},equals:function(a){return this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left},getOffsetsTo:function(a){return {x:this.x-a.x,y:this.y-a.y}}}},function(a){a.prototype.getAlignInfo=a.getAlignInfo;a.EMPTY=new a(0,0,0,0)});Ext.define('Ext.util.Point',{extend:Ext.util.Region,isPoint:!0,radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(b){var a=b.changedTouches,c=a&&a.length>0?a[0]:b;return this.fromTouch(c)},fromTouch:function(a){return new this(a.pageX,a.pageY)},from:function(a){if(!a){return new this(0,0)}if(!(a instanceof this)){return new this(a.x,a.y)}return a}},constructor:function(a,b){if(a==null){a=0}if(b==null){b=0}this.callParent([b,a,b,a])},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(a){this.x=a.x;this.y=a.y;return this},toString:function(){return 'Point['+this.x+','+this.y+']'},equals:function(a){return this.x===a.x&&this.y===a.y},isCloseTo:function(b,a){if(typeof a==='number'){return this.getDistanceTo(b)<=a}var e=b.x,f=b.y,c=a.x,d=a.y;return this.x<=e+c&&this.x>=e-c&&this.y<=f+d&&this.y>=f-d},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(a){if(!(a instanceof Ext.util.Region)){a=Ext.get(a.el||a).getRegion()}return a.contains(this)},roundedEquals:function(a){if(!a||typeof a!=='object'){a=this.origin}return Math.round(this.x)===Math.round(a.x)&&Math.round(this.y)===Math.round(a.y)},getDistanceTo:function(a){if(!a||typeof a!=='object'){a=this.origin}var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)},getAngleTo:function(a){if(!a||typeof a!=='object'){a=this.origin}var b=this.x-a.x,c=this.y-a.y;return Math.atan2(c,b)*this.radianToDegreeConstant}},function(){this.prototype.translate=this.prototype.translateBy});Ext.define('Ext.event.Event',{alternateClassName:'Ext.EventObjectImpl',stopped:!1,claimed:!1,defaultPrevented:!1,isEvent:!0,geckoRelatedTargetEvents:{blur:1,dragenter:1,dragleave:1,focus:1},statics:{resolveTextNode:function(a){return a&&a.nodeType===3?a.parentNode:a},gestureEvents:{},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,focusin:1,focusenter:1},blurEvents:{blur:1,focusout:1,focusleave:1},wheelEvents:{wheel:1},pointerTypeMap:{2:'touch',3:'pen',4:'mouse',touch:'touch',pen:'pen',mouse:'mouse'},keyEventRe:/^key/,keyFlags:{CTRL:'ctrlKey',CONTROL:'ctrlKey',ALT:'altKey',SHIFT:'shiftKey',CMD:'metaKey',COMMAND:'metaKey',CMDORCTRL:Ext.isMac?'metaKey':'ctrlKey',COMMANDORCONTROL:Ext.isMac?'metaKey':'ctrlKey',META:'metaKey'},modifierGlyphs:{ctrlKey:'',altKey:'',metaKey:Ext.isMac?'':'',shiftKey:''},specialKeyGlyphs:{BACKSPACE:'',TAB:'',ENTER:'',RETURN:'',SPACE:'',PAGE_UP:'',PAGE_DOWN:'',END:'',HOME:'',LEFT:'',UP:'',RIGHT:'',DOWN:'',PRINT_SCREEN:'',INSERT:'',DELETE:'',CONTEXT_MENU:''},_hyphenRe:/^[a-z]+\-/i,getKeyId:function(b){if(typeof b==='number'){b=this.keyCodes[b]}else {b=b.toUpperCase()}var c=this,e=c._hyphenRe.test(b)?'-':'+',f=b===e?[e]:b.split(e),g=f.length-1,i=f[g],a=[],h,d;for(d=0;d<g;d++){h=c.keyFlags[f[d]];a[h]=!0}if(a.ctrlKey){a.push(c.modifierGlyphs.ctrlKey)}if(a.altKey){a.push(c.modifierGlyphs.altKey)}if(a.shiftKey){a.push(c.modifierGlyphs.shiftKey)}if(a.metaKey){a.push(c.modifierGlyphs.metaKey)}a.push(this.specialKeyGlyphs[i]||i);return a.join('')},globalTabKeyDown:function(a){if(a.keyCode===9){Ext.event.Event.forwardTab=!a.shiftKey}},globalTabKeyUp:function(a){if(a.keyCode===9){delete Ext.event.Event.forwardTab}}},constructor:function(b){var a=this,c=a.self,g=a.self.resolveTextNode,i=b.changedTouches,f=i?i[0]:b,d=b.type,e,h;a.timeStamp=a.time=Ext.ticks();a.pageX=f.pageX;a.pageY=f.pageY;a.clientX=f.clientX;a.clientY=f.clientY;a.target=a.delegatedTarget=g(b.target);a.currentTarget=g(b.currentTarget);h=b.relatedTarget;if(h){if(Ext.isGecko&&a.geckoRelatedTargetEvents[d]){try{a.relatedTarget=g(h)}catch(j){a.relatedTarget=null}}else {a.relatedTarget=g(h)}}a.browserEvent=a.event=b;a.type=d;a.button=b.button||0;a.shiftKey=b.shiftKey;a.ctrlKey=b.ctrlKey||b.metaKey||!1;a.altKey=b.altKey;a.charCode=b.charCode;a.keyCode=b.keyCode;a.buttons=b.buttons;if(a.button===0&&a.buttons===0){a.buttons=1}if(c.focusEvents[d]||c.blurEvents[d]){if(c.forwardTab!==undefined){a.forwardTab=c.forwardTab}if(c.focusEvents[d]){a.fromElement=b.relatedTarget;a.toElement=b.target}else {a.fromElement=b.target;a.toElement=b.relatedTarget}}else {if(d!=='keydown'){delete c.forwardTab}}if(c.mouseEvents[d]){e='mouse'}else {if(c.clickEvents[d]){e=c.pointerTypeMap[b.pointerType]||(Ext.now()-Ext.event.publisher.Dom.lastTouchEndTime<1000?'touch':'mouse')}else {if(c.pointerEvents[d]){e=c.pointerTypeMap[b.pointerType]||'mouse'}else {if(c.touchEvents[d]){e='touch'}}}}if(e){a.pointerType=e}a.isMultitouch=b.isPrimary===!1||b.touches&&b.touches.length>1;if(c.wheelEvents[d]){a.getWheelDeltas()}},chain:function(b){var a=Ext.Object.chain(this);a.parentEvent=this;return Ext.apply(a,b)},correctWheelDelta:function(b){var c=this,d=c.browserEvent.deltaMode,a=b;if(d===0){a=b*c.WHEEL_PIXEL_SIZE}else {if(d===1){a=b*c.WHEEL_LINE_SIZE}else {if(d===2){a=b*c.WHEEL_PAGE_SIZE}}}return Math.round(a)},getChar:function(){var a=this.which();return String.fromCharCode(a)},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getKeyName:function(){return this.type==='keypress'?String.fromCharCode(this.getCharCode()):this.keyCodes[this.keyCode]},key:function(){return this.browserEvent.key},which:function(){var c=this,b=c.browserEvent,a=b.which;if(a==null){if(c.self.keyEventRe.test(b.type)){a=b.charCode||b.keyCode}else {if((a=b.button)!==undefined){a=a&1?1:a&4?2:a&2?3:0}}}return a},getClipboardData:function(a){var b=this.browserEvent.clipboardData,c=Ext.global.clipboardData,d=null,e;a=a||'text/plain';if(b&&b.getData){d=b.getData(a)}else {if(c&&c.getData){e=this.ieMimeType[a];if(e){d=c.getData(e)}}}return d},getPoint:function(){var b=this,a=b.point,c;if(!a){c=b.getXY();a=b.point=new Ext.util.Point(c[0],c[1])}return a},getRelatedTarget:function(d,e,c){var a=this.relatedTarget,b=null;if(a&&a.nodeType){if(d){b=Ext.fly(a).findParent(d,e,c)}else {b=c?Ext.get(a):a}}return b},getTarget:function(b,c,a){return b?Ext.fly(this.target).findParent(b,c,a):a?Ext.get(this.target):this.target},getTime:function(){return this.time},getWheelDelta:function(){var a=this.getWheelDeltas();return a.y},getWheelDeltas:function(){var a=this,d=a.wheelDeltas,c,e,b;if(!d){c=a.browserEvent;e=a.correctWheelDelta(c.deltaX||0);b=c.deltaY;b=a.correctWheelDelta(b==null?-c.wheelDelta:b);a.deltaX=e;a.deltaY=b;a.wheelDeltas=d={x:e,y:b}}return d},getX:function(){return this.getXY()[0]},getXY:function(){var d=this,c=d.xy;if(!c){c=d.xy=[d.pageX,d.pageY];var g=c[0],e,f,a,b;if(!g&&g!==0){e=d.browserEvent;f=document;a=f.documentElement;b=f.body;c[0]=e.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||0)-(a&&a.clientLeft||b&&b.clientLeft||0);c[1]=e.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a&&a.clientTop||b&&b.clientTop||0)}}return c},getLocalXY:function(f){var e=this.getXY(),d=Ext.fly(this.currentTarget).getXY(),a=e[0]-d[0],b=e[1]-d[1],c;if(f){c=Ext.fly(this.currentTarget).getSize();a=Math.max(0,Math.min(a,c.width));b=Math.max(0,Math.min(b,c.height))}return [a,b]},getY:function(){return this.getXY()[1]},hasModifier:function(){var a=this;return !!(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)},isNavKeyPress:function(c){var a=this,b=a.keyCode,d=a.type==='keypress';return (!d||Ext.isGecko)&&b>=33&&b<=40||!c&&(b===a.RETURN||b===a.TAB||b===a.ESC)},isSpecialKey:function(){var b=this,a=b.keyCode,d=Ext.isGecko,c=b.type==='keypress';return d&&c&&b.charCode===0||this.isNavKeyPress()||a===b.BACKSPACE||a===b.ENTER||a>=16&&a<=20||(!c||d)&&a>=44&&a<=46},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var a=this,b=a.parentEvent;a.defaultPrevented=!0;if(b){b.defaultPrevented=!0}a.browserEvent.preventDefault();return a},setCurrentTarget:function(a){this.currentTarget=this.delegatedTarget=a},stopEvent:function(){return this.preventDefault().stopPropagation()},mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},mouseupEvents:{mouseup:1,pointerup:1,touchend:1},stopPropagation:function(){var a=this,b=a.browserEvent,c=a.parentEvent;if(a.mousedownEvents[a.type]){Ext.GlobalEvents.fireMouseDown(a)}if(a.mouseupEvents[a.type]){Ext.GlobalEvents.fireMouseUp(a)}a.stopped=!0;if(c&&!a.isGesture){c.stopped=!0}if(!b.stopPropagation){b.cancelBubble=!0;return a}b.stopPropagation();return a},claimGesture:function(){var a=this,b=a.parentEvent;a.claimed=!0;if(b&&!a.isGesture){b.claimGesture()}else {a.preventDefault()}return a},within:function(b,d,c){var a;if(b){a=d?this.getRelatedTarget():this.getTarget()}if(!a||c===!1&&a===Ext.getDom(b)){return !1}return Ext.fly(b).contains(a)},privates:{ieMimeType:{'text/plain':'Text'}},deprecated:{'4.0':{methods:{getPageX:'getX',getPageY:'getY'}}}},function(b){var d={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_PIXEL_SIZE:1,WHEEL_LINE_SIZE:20,WHEEL_PAGE_SIZE:600},h={},f=b.gestureEvents,c=b.prototype,a,g,i,e;Ext.apply(f,b.mouseEvents);Ext.apply(f,b.pointerEvents);Ext.apply(f,b.touchEvents);Ext.apply(b,d);Ext.apply(c,d);delete d.RETURN;for(g in d){i=d[g];h[i]=g}b.keyCodes=c.keyCodes=h;if(!Ext.isIE9m){document.addEventListener('keydown',b.globalTabKeyDown,!0);document.addEventListener('keyup',b.globalTabKeyUp,!0)}c.getTrueXY=c.getXY;if(typeof KeyboardEvent!=='undefined'&&!('key' in KeyboardEvent.prototype)){c._keys=e={3:'Cancel',6:'Help',8:'Backspace',9:'Tab',12:'Clear',13:'Enter',16:'Shift',17:'Control',18:'Alt',19:'Pause',20:'CapsLock',27:'Escape',28:'Convert',29:'NonConvert',30:'Accept',31:'ModeChange',32:' ',33:'PageUp',34:'PageDown',35:'End',36:'Home',37:'ArrowLeft',38:'ArrowUp',39:'ArrowRight',40:'ArrowDown',41:'Select',42:'Print',43:'Execute',44:'PrintScreen',45:'Insert',46:'Delete',48:['0',')'],49:['1','!'],50:['2','@'],51:['3','#'],52:['4','$'],53:['5','%'],54:['6','^'],55:['7','&'],56:['8','*'],57:['9','('],91:'OS',93:'ContextMenu',144:'NumLock',145:'ScrollLock',181:'VolumeMute',182:'VolumeDown',183:'VolumeUp',186:[';',':'],187:['=','+'],188:[',','<'],189:['-','_'],190:['.','>'],191:['/','?'],192:['`','~'],219:['[','{'],220:['\\','|'],221:[']','}'],222:["'",'"'],224:'Meta',225:'AltGraph',246:'Attn',247:'CrSel',248:'ExSel',249:'EraseEof',250:'Play',251:'ZoomOut'};for(a=1;a<25;++a){e[a+111]='F'+a}for(a=0;a<26;++a){e[a]=[String.fromCharCode(a+97),String.fromCharCode(a+65)]}c.key=function(){var a=e[this.browserEvent.which||this.keyCode];if(a&&typeof a!=='string'){a=a[+this.shiftKey]}return a}}});Ext.define('Ext.overrides.event.Event',{override:'Ext.event.Event',injectEvent:function(){var a,b={},c;if(!Ext.isIE9m&&document.createEvent){a={createHtmlEvent:function(e,d,c,b){var a=e.createEvent('HTMLEvents');a.initEvent(d,c,b);return a},createMouseEvent:function(d,n,h,f,m,b,c,i,k,g,j,l,e){var a=d.createEvent('MouseEvents'),o=d.defaultView||window;if(a.initMouseEvent){a.initMouseEvent(n,h,f,o,m,b,c,b,c,i,k,g,j,l,e)}else {a=d.createEvent('UIEvents');a.initEvent(n,h,f);a.view=o;a.detail=m;a.screenX=b;a.screenY=c;a.clientX=b;a.clientY=c;a.ctrlKey=i;a.altKey=k;a.metaKey=j;a.shiftKey=g;a.button=l;a.relatedTarget=e}return a},createUIEvent:function(b,f,d,c,e){var a=b.createEvent('UIEvents'),g=b.defaultView||window;a.initUIEvent(f,d,c,g,e);return a},fireEvent:function(a,c,b){a.dispatchEvent(b)}}}else {if(document.createEventObject){c={0:1,1:4,2:2};a={createHtmlEvent:function(d,e,c,b){var a=d.createEventObject();a.bubbles=c;a.cancelable=b;return a},createMouseEvent:function(n,o,i,g,m,b,d,j,l,h,k,e,f){var a=n.createEventObject();a.bubbles=i;a.cancelable=g;a.detail=m;a.screenX=b;a.screenY=d;a.clientX=b;a.clientY=d;a.ctrlKey=j;a.altKey=l;a.shiftKey=h;a.metaKey=k;a.button=c[e]||e;a.relatedTarget=f;return a},createUIEvent:function(d,f,c,b,e){var a=d.createEventObject();a.bubbles=c;a.cancelable=b;return a},fireEvent:function(a,c,b){a.fireEvent('on'+c,b)}}}}Ext.Object.each({load:[!1,!1],unload:[!1,!1],select:[!0,!1],change:[!0,!1],submit:[!0,!0],reset:[!0,!1],resize:[!0,!1],scroll:[!0,!1]},function(c,d){var f=d[0],e=d[1];b[c]=function(b,h){var g=a.createHtmlEvent(c,f,e);a.fireEvent(b,c,g)}});function createMouseEventDispatcher(b,d){var c=b!=='mousemove';return function(f,e){var g=e.getXY(),h;h=a.createMouseEvent(f.ownerDocument,b,!0,c,d,g[0],g[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget);a.fireEvent(f,b,h)}}Ext.each(['click','dblclick','mousedown','mouseup','mouseover','mousemove','mouseout'],function(a){b[a]=createMouseEventDispatcher(a,1)});Ext.Object.each({focusin:[!0,!1],focusout:[!0,!1],activate:[!0,!0],focus:[!1,!1],blur:[!1,!1]},function(c,d){var f=d[0],e=d[1];b[c]=function(b,h){var g=a.createUIEvent(b.ownerDocument,c,f,e,1);a.fireEvent(b,c,g)}});if(!a){b={};a={}}function cannotInject(b,a){}return function(a){var c=this,d=b[c.type]||cannotInject,e=a?a.dom||a:c.getTarget();d(e,c)}}(),preventDefault:function(g){var c=this,a=c.browserEvent,e=c.parentEvent,d,b,f;if(typeof a.type!=='unknown'){if(!g){c.defaultPrevented=!0}if(e){e.defaultPrevented=!0}if(a.preventDefault){a.preventDefault()}else {if(a.type==='mousedown'){b=a.target;d=b.getAttribute('unselectable');if(d!=='on'){b.setAttribute('unselectable','on');f=function(){b.setAttribute('unselectable',d)};Ext.defer(f,1)}}a.returnValue=!1;if(a.ctrlKey||a.keyCode>111&&a.keyCode<124){a.keyCode=-1}}}return c},deprecated:{'5.0':{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){var b=this,a;if(Ext.isIE9m){a={0:0,1:0,4:1,2:2};b.override({statics:{enableIEAsync:function(b){var a,c={};for(a in b){c[a]=b[a]}return c}},constructor:function(b,f,e,d){var c=this;c.callParent([b,f,e,d]);c.button=a[b.button];if(b.type==='contextmenu'){c.button=2}c.toElement=b.toElement;c.fromElement=b.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(a){this.browserEvent=this.self.enableIEAsync(a)},getRelatedTarget:function(f,d,e){var a=this,c,b;if(!a.relatedTarget){c=a.type;if(a.mouseLeaveRe.test(c)){b=a.toElement}else {if(a.mouseEnterRe.test(c)){b=a.fromElement}}if(b){a.relatedTarget=a.self.resolveTextNode(b)}}return a.callParent([f,d,e])}});document.attachEvent('onkeydown',Ext.event.Event.globalTabKeyDown);document.attachEvent('onkeyup',Ext.event.Event.globalTabKeyUp);window.attachEvent('onunload',function(){document.detachEvent('onkeydown',Ext.event.Event.globalTabKeyDown);document.detachEvent('onkeyup',Ext.event.Event.globalTabKeyUp)})}});Ext.define('Ext.event.publisher.Dom',{extend:Ext.event.publisher.Publisher,type:'dom',handledDomEvents:[],reEnterCount:0,captureEvents:{animationstart:1,animationend:1,resize:1,focus:1,blur:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1,scroll:1,online:1,offline:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var a=this,b=Ext.supports.PassiveEventListener;a.listenerOptions=b?{passive:!1}:!1;a.captureOptions=b?{passive:!1,capture:!0}:!0;a.bubbleSubscribers={};a.captureSubscribers={};a.directSubscribers={};a.directCaptureSubscribers={};a.delegatedListeners={};a.initHandlers();Ext.onInternalReady(a.onReady,a);a.callParent();a.registerDomEvents()},registerDomEvents:function(){var c=this,e=Ext.event.publisher.Publisher.publishersByEvent,d=c.handledDomEvents,f=d.length,a,b;for(a=0;a<f;a++){b=d[a];c.handles[b]=1;e[b]=c}},onReady:function(){var a=this,c=a.handledDomEvents,d,b;if(c){for(b=0,d=c.length;b<d;b++){a.addDelegatedListener(c[b])}}Ext.getWin().on('unload',a.destroy,a,{priority:-10000})},initHandlers:function(){var a=this;a.onDelegatedEvent=Ext.bind(a.onDelegatedEvent,a);a.onDirectEvent=Ext.bind(a.onDirectEvent,a);a.onDirectCaptureEvent=Ext.bind(a.onDirectCaptureEvent,a)},addDelegatedListener:function(b){var a=this;a.delegatedListeners[b]=1;a.target.addEventListener(b,a.onDelegatedEvent,a.captureEvents[b]?a.captureOptions:a.listenerOptions)},removeDelegatedListener:function(b){var a=this;delete a.delegatedListeners[b];a.target.removeEventListener(b,a.onDelegatedEvent,a.captureEvents[b]?a.captureOptions:a.listenerOptions)},addDirectListener:function(c,d,b){var a=this;d.dom.addEventListener(c,b?a.onDirectCaptureEvent:a.onDirectEvent,b?a.captureOptions:a.listenerOptions)},removeDirectListener:function(c,d,b){var a=this;d.dom.removeEventListener(c,b?a.onDirectCaptureEvent:a.onDirectEvent,b?a.captureOptions:a.listenerOptions)},subscribe:function(f,b,g,e){var c=this,a,d;if(g&&!c.directEvents[b]){a=e?c.captureSubscribers:c.bubbleSubscribers;if(!c.handles[b]&&!c.delegatedListeners[b]){c.addDelegatedListener(b)}if(a[b]){++a[b]}else {a[b]=1}}else {a=e?c.directCaptureSubscribers:c.directSubscribers;d=f.id;a=a[b]||(a[b]={});if(a[d]){++a[d]}else {a[d]=1;c.addDirectListener(b,f,e)}}},unsubscribe:function(h,b,i,g){var c=this,e,f,a,d;if(i&&!c.directEvents[b]){e=c.captureSubscribers;f=c.bubbleSubscribers;a=g?e:f;if(a[b]){--a[b]}if(!c.handles[b]&&!f[b]&&!e[b]){this.removeDelegatedListener(b)}}else {a=g?c.directCaptureSubscribers:c.directSubscribers;d=h.id;a=a[b];if(a[d]){--a[d]}if(!a[d]){delete a[d];c.removeDirectListener(b,h,g)}}},getPropagatingTargets:function(d){var a=d,c=[],b;while(a){c.push(a);b=a.parentNode;if(!b){b=a.defaultView}a=b}return c},publish:function(a,i,h){var f=this,j=!1,k=!1,c,m,l,e,d,n,b,g;h=h||!1;if(!i){l=a.target;if(f.captureEvents[a.type]){e=Ext.cache[l.id];i=e?[e]:[]}else {i=f.getPropagatingTargets(l)}}c=Ext.Array.from(a);n=i.length;g=c.length;for(d=0;d<g;d++){m=c[d].type;if(!j&&f.captureSubscribers[m]){j=!0}if(!k&&f.bubbleSubscribers[m]){k=!0}}if(j){for(d=n;d--;){e=Ext.cache[i[d].id];if(e){for(b=0;b<g;b++){a=c[b];f.fire(e,a.type,a,!1,!0);if(!h&&a.claimed){h=!0;b=f.filterClaimed(c,a);g=c.length}if(a.stopped){c.splice(b,1);b--;g--}}}}}if(k&&!a.stopped){for(d=0;d<n;d++){e=Ext.cache[i[d].id];if(e){for(b=0;b<g;b++){a=c[b];f.fire(e,a.type,a,!1,!1);if(!h&&a.claimed&&f.filterClaimed){h=!0;b=f.filterClaimed(c,a);g=c.length}if(a.stopped){c.splice(b,1);b--;g--}}}}}},publishDelegatedDomEvent:function(a){this.publish(a)},fire:function(b,d,c,f,e){var a;if(b.hasListeners[d]){a=b.events[d];if(a){if(e&&f){a=a.directCaptures}else {if(e){a=a.captures}else {if(f){a=a.directs}}}if(a){c.setCurrentTarget(b.dom);a.fire(c,c.target)}}}},onDelegatedEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDelegatedEvent,this,[a])}else {this.doDelegatedEvent(a)}},doDelegatedEvent:function(b){var a=this,c;b=new Ext.event.Event(b);c=b.time;if(!a.isEventBlocked(b)){a.beforeEvent(b);Ext.frameStartTime=c;a.reEnterCountAdjusted=!1;a.reEnterCount++;a.publishDelegatedDomEvent(b);if(!a.reEnterCountAdjusted){a.reEnterCount--}a.afterEvent(b)}},onDirectEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a,!1])}else {this.doDirectEvent(a,!1)}},onDirectCaptureEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a,!0])}else {this.doDirectEvent(a,!0)}},doDirectEvent:function(a,f){var b=this,e=a.currentTarget,d,c;a=new Ext.event.Event(a);d=a.time;if(b.isEventBlocked(a)){return}b.beforeEvent(a);Ext.frameStartTime=d;c=Ext.cache[e.id];if(c){b.reEnterCountAdjusted=!1;b.reEnterCount++;b.fire(c,a.type,a,!0,f);if(!b.reEnterCountAdjusted){b.reEnterCount--}}b.afterEvent(a)},beforeEvent:function(e){var c=e.browserEvent,d=Ext.event.publisher.Dom,a,b;if(c.type==='touchstart'){a=c.touches;if(a.length===1){b=a[0];d.lastTouchStartX=b.pageX;d.lastTouchStartY=b.pageY}}},afterEvent:function(b){var e=b.browserEvent,a=e.type,c=Ext.event.publisher.Dom,d=Ext.GlobalEvents;if(b.self.pointerEvents[a]&&b.pointerType!=='mouse'){c.lastScreenPointerEventTime=Ext.now()}if(a==='touchend'){c.lastTouchEndTime=Ext.now()}if(!this.reEnterCount&&!d.idleEventMask[a]){Ext.fireIdle()}},isEventBlocked:function(a){var d=this,c=a.type,b=Ext.event.publisher.Dom,e=Ext.now();if(Ext.isGecko&&a.type==='click'&&a.button===2){return !0}return d.blockedPointerEvents[c]&&a.pointerType!=='mouse'||d.blockedCompatibilityMouseEvents[c]&&e-b.lastScreenPointerEventTime<1000||Ext.supports.TouchEvents&&a.self.mouseEvents[a.type]&&Math.abs(a.pageX-b.lastTouchStartX)<15&&Math.abs(a.pageY-b.lastTouchStartY)<15&&Ext.now()-b.lastTouchEndTime<1000},destroy:function(){var b=Ext.dom['GarbageCollector'],a;for(a in this.delegatedListeners){this.removeDelegatedListener(a)}Ext.Reaper.flush();if(b){b.collect()}this.callParent()},reset:function(){var a=Ext.event.publisher.Dom;this.reEnterCount=0;a.lastScreenPointerEventTime=a.lastTouchEndTime=a.lastTouchStartX=a.lastTouchStartY=undefined}},function(b){var d=document,a=d.defaultView,c=b.prototype;if(Ext.os.is.iOS&&window.self!==window.top||Ext.browser.is.AndroidStock||!(a&&a.addEventListener)){c.target=d}else {c.target=a}b.instance=new b()});Ext.define('Ext.overrides.event.publisher.Dom',{override:'Ext.event.publisher.Dom'},function(b){var g={focus:!0,focusin:!0,focusout:!0,blur:!0};if(Ext.isIE10m){b.override({isEventBlocked:function(d){if(!g[d.type]){return this.callParent([d])}var e=document.body,a=d.browserEvent,c=Ext.synchronouslyFocusing;if(c&&(a.type==='focusout'&&(a.srcElement===c||a.srcElement===window)&&a.toElement===e||a.type==='focusin'&&(a.srcElement===e||a.srcElement===window)&&a.fromElement===c&&a.toElement===null)){return !0}return !1}})}if(Ext.isIE9m){var d=document.documentElement,e=document.body,a=b.prototype,c,f;a.target=document;a.directBoundListeners={};c=function(a,c,d){a.target=a.srcElement||window;a.currentTarget=this;if(d){c.onDirectCaptureEvent(a)}else {c.onDirectEvent(a)}};f=function(a,c){a.target=a.srcElement||window;a.currentTarget=this;c.onDirectCaptureEvent(a)};b.override({addDelegatedListener:function(a){this.delegatedListeners[a]=1;this.target.attachEvent('on'+a,this.onDelegatedEvent)},removeDelegatedListener:function(a){delete this.delegatedListeners[a];this.target.detachEvent('on'+a,this.onDelegatedEvent)},addDirectListener:function(a,i,h){var e=this,d=i.dom,g=Ext.Function.bind(c,d,[e,h],!0),f=e.directBoundListeners,j=f[a]||(f[a]={});j[d.id]=g;if(d.attachEvent){d.attachEvent('on'+a,g)}else {e.callParent([a,i,h])}},removeDirectListener:function(a,d,e){var c=d.dom;if(c.detachEvent){c.detachEvent('on'+a,this.directBoundListeners[a][c.id])}else {this.callParent([a,d,e])}},doDelegatedEvent:function(a){a.target=a.srcElement||window;if(a.type==='focusin'){a.relatedTarget=a.fromElement===e||a.fromElement===d?null:a.fromElement}else {if(a.type==='focusout'){a.relatedTarget=a.toElement===e||a.toElement===d?null:a.toElement}}return this.callParent([a])}});Ext.apply(a.directEvents,a.captureEvents);Ext.apply(a.directEvents,{change:1,input:1,paste:1});a.captureEvents={}}});Ext.define('Ext.event.publisher.Gesture',{extend:Ext.event.publisher.Dom,type:'gesture',isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},isEndEvent:{mouseup:1,touchend:1,pointerup:1,MSPointerUp:1},handledEvents:[],handledDomEvents:[],constructor:function(h){var a=this,c=a.handledDomEvents,g=Ext.supports,f=g.TouchEvents,d=a.onTouchStart,e=a.onTouchMove,b=a.onTouchEnd;a.handlers={touchstart:d,touchmove:e,touchend:b,touchcancel:b,pointerdown:d,pointermove:e,pointerup:b,pointercancel:b,MSPointerDown:d,MSPointerMove:e,MSPointerUp:b,MSPointerCancel:b,mousedown:d,mousemove:e,mouseup:b};a.activeTouchesMap={};a.activeTouches=[];a.changedTouches=[];a.recognizers=[];a.eventToRecognizer={};a.cancelEvents=[];if(f){a.onTargetTouchMove=a.onTargetTouchMove.bind(a);a.onTargetTouchEnd=a.onTargetTouchEnd.bind(a)}if(g.PointerEvents){c.push('pointerdown','pointermove','pointerup','pointercancel');a.mousePointerType='mouse'}else {if(g.MSPointerEvents){c.push('MSPointerDown','MSPointerMove','MSPointerUp','MSPointerCancel');a.mousePointerType=4}else {if(f){c.push('touchstart','touchmove','touchend','touchcancel')}}}if(!c.length||f&&Ext.os.is.Desktop){c.push('mousedown','mousemove','mouseup')}a.initConfig(h);return a.callParent()},onReady:function(){this.callParent();Ext.Array.sort(this.recognizers,function(c,d){var a=c.priority,b=d.priority;return a>b?1:a<b?-1:0})},registerRecognizer:function(b){var a=this,d=b.handledEvents,f=d.length,e,c;b.setOnRecognized(a.onRecognized);b.setCallbackScope(a);for(c=0;c<f;c++){e=d[c];a.handledEvents.push(e);a.eventToRecognizer[e]=b}a.registerEvents(d);a.recognizers.push(b)},onRecognized:function(n,o,b,a,p){var c=this,h=b.touches,d=b.changedTouches,k=d.length,i=c.events,l=!i.length,m=c.cancelEvents,f,g,e,j;a=a||{};a.type=o;a.target=d[0].target;a.stopped=!1;a.claimed=!1;a.isGesture=!0;b=b.chain(a);if(!c.gestureTargets){if(k>1){f=[];for(e=0;e<k;e++){j=d[e];f.push(j.targets)}g=c.getCommonTargets(f)}else {g=d[0].targets}c.gestureTargets=g}if(p&&n.isSingleTouch&&h.length>1){b.target=h[0].target;m.push(b)}else {i.push(b)}if(l){c.publishGestures()}},getCommonTargets:function(e){var d=e[0],h=e.length,a=[],g=1,b,f,c;if(h===1){return d}while(!0){b=d[d.length-g];if(!b){return a}for(c=1;c<h;c++){f=e[c];if(f[f.length-g]!==b){return a}}a.unshift(b);g++}return a},invokeRecognizers:function(d,f){var c=this.recognizers,e=c.length,a,b;if(d==='onStart'){for(a=0;a<e;a++){c[a].isActive=!0}}for(a=0;a<e;a++){b=c[a];if(b.isActive&&b[d].call(b,f)===!1){b.isActive=!1}}},filterClaimed:function(c,j){var i=this,g=i.eventToRecognizer,h=j.type,d=g[h],b,e,f,a;for(a=c.length;a--;){f=c[a].type;if(f===h){b=a}else {e=g[f];if(!d||e&&e!==d){c.splice(a,1);if(b){b--}}}}i.claimRecognizer(d,c[0]);return b},claimRecognizer:function(f,g){var c=this,d=c.recognizers,b,e,a;for(b=0,e=d.length;b<e;b++){a=d[b];if(a!==f){a.isActive=!1;a.cancel(g)}}if(c.events.length){c.publishGestures(!0)}},publishGestures:function(e){var a=this,b=a.cancelEvents,c=a.events,d=a.gestureTargets;if(b.length){a.cancelEvents=[];a.publish(b,a.getPropagatingTargets(b[0].target),!0)}if(c.length){a.events=[];a.gestureTargets=null;a.publish(c,d||a.getPropagatingTargets(c[0].target),e)}},updateTouches:function(e){var d=this,m=e.browserEvent,o=e.type,n=m.changedTouches||[m],h=d.activeTouches,g=d.activeTouchesMap,l=[],b,c,a,i,f,p,j,k;for(f=0,p=n.length;f<p;f++){b=n[f];if('identifier' in b){c=b.identifier}else {if('pointerId' in b){c=b.pointerId}else {c=1}}a=g[c];if(!a){i=Ext.event.Event.resolveTextNode(b.target);a=g[c]={identifier:c,target:i,targets:d.getPropagatingTargets(i)};h.push(a)}if(d.isEndEvent[o]||d.isCancelEvent[o]){delete g[c];Ext.Array.remove(h,a)}j=Math.round(b.pageX);k=Math.round(b.pageY);a.pageX=j;a.pageY=k;a.point=new Ext.util.Point(j,k);l.push(a)}e.touches=Ext.Array.clone(h);e.changedTouches=l},publishDelegatedDomEvent:function(a){var b=this;if(!a.button||a.button<1){b.events=[a];a.browserEvent.$extHandled=!0;b.handlers[a.type].call(b,a)}else {b.callParent([a])}},onTouchStart:function(b){var a=this,d=b.target,c=b.browserEvent.touches;if(b.browserEvent.type==='touchstart'){d.addEventListener('touchmove',a.onTargetTouchMove);d.addEventListener('touchend',a.onTargetTouchEnd);d.addEventListener('touchcancel',a.onTargetTouchEnd)}if(c&&c.length<=a.activeTouches.length){a.removeGhostTouches(c)}a.updateTouches(b);if(!a.isStarted){if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.pause()}a.isStarted=!0;a.invokeRecognizers('onStart',b)}a.invokeRecognizers('onTouchStart',b);a.publishGestures()},onTouchMove:function(a){var b=this,c=b.mousePointerType,d=b.isStarted;if(d||a.pointerType!=='mouse'){b.updateTouches(a)}if(d){if(c&&a.browserEvent.pointerType===c&&a.buttons===0){a.type=Ext.dom.Element.prototype.eventMap.touchend;a.button=0;b.onTouchEnd(a);return}if(a.changedTouches.length>0){b.invokeRecognizers('onTouchMove',a)}}b.publishGestures()},onTouchEnd:function(b){var a=this,d=a.isStarted,c;if(d||b.pointerType!=='mouse'){a.updateTouches(b)}if(!d){a.publishGestures();return}c=a.activeTouches.length;try{a.invokeRecognizers(a.isCancelEvent[b.type]?'onTouchCancel':'onTouchEnd',b)}finally{try{if(!c){a.isStarted=!1;a.invokeRecognizers('onEnd',b)}}finally{try{a.publishGestures()}finally{if(!c){if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.resume()}}a.reEnterCountAdjusted=!0;a.reEnterCount--}}}},onTargetTouchMove:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchMove,this,[a])}else {this.doTargetTouchMove(a)}},doTargetTouchMove:function(b){var a=this;if(!Ext.getBody().contains(b.target)){a.reEnterCountAdjusted=!1;a.reEnterCount++;this.onTouchMove(new Ext.event.Event(b));if(!a.reEnterCountAdjusted){a.reEnterCount--}}},onTargetTouchEnd:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchEnd,this,[a])}else {this.doTargetTouchEnd(a)}},doTargetTouchEnd:function(c){var a=this,b=c.target;b.removeEventListener('touchmove',a.onTargetTouchMove);b.removeEventListener('touchend',a.onTargetTouchEnd);b.removeEventListener('touchcancel',a.onTargetTouchEnd);if(!Ext.getBody().contains(b)){a.reEnterCountAdjusted=!1;a.reEnterCount++;a.onTouchEnd(new Ext.event.Event(c));if(!a.reEnterCountAdjusted){a.reEnterCount--}}},reset:function(){var a=this,d=a.recognizers,e=d.length,b,c;a.activeTouchesMap={};a.activeTouches=[];a.changedTouches=[];a.isStarted=!1;a.gestureTargets=null;a.events=[];a.cancelEvents=[];for(b=0;b<e;b++){c=d[b];c.reset();c.isActive=!1}this.callParent()},privates:{removeGhostTouches:function(c){var f={},g=c.length,b=this.activeTouches,h=this.activeTouchesMap,a,e,d;for(a=0;a<g;++a){f[c[a].identifier]=!0}a=b.length;while(a--){d=b[a];e=d.identifier;if(!c[e]){Ext.Array.remove(b,d);delete h[e]}}}}},function(a){var c=Event.prototype,b=c.stopPropagation;if(b){c.stopPropagation=function(){var d=this,c=a.instance,f=d.type,e;if(!d.$extHandled&&c.handles[f]){e=new Ext.event.Event(d);c.updateTouches(e);c.invokeRecognizers('onTouchCancel',e);c.reset();c.reEnterCountAdjusted=!0}b.apply(d,arguments)}}a.instance=Ext.$gesturePublisher=new a()});Ext.define('Ext.overrides.event.publisher.Gesture',{override:'Ext.event.publisher.Gesture'},function(){if(Ext.isIE9m){this.override({updateTouches:function(a,d){var b=a.browserEvent,c=a.getXY();b.pageX=c[0];b.pageY=c[1];this.callParent([a,d])},doDelegatedEvent:function(a){this.callParent([Ext.event.Event.enableIEAsync(a)])}})}});Ext.define('Ext.mixin.Templatable',{extend:Ext.Mixin,mixinConfig:{id:'templatable'},referenceAttributeName:'reference',referenceSelector:'[reference]',getElementConfig:function(){return {reference:'element'}},getElementTemplate:function(){var a=document.createDocumentFragment();a.appendChild(Ext.Element.create(this.getElementConfig(),!0));return a},initElement:function(){var a=this.self.prototype;a.elementTemplate=this.getElementTemplate();a.initElement=a.doInitElement;this.initElement.apply(this,arguments)},linkElement:function(a,b){this.link(a,b)},doInitElement:function(){var d=this.referenceAttributeName,e,c,b,g,a,f;e=this.elementTemplate.cloneNode(!0);c=e.querySelectorAll(this.referenceSelector);for(b=0,g=c.length;b<g;b++){a=c[b];f=a.getAttribute(d);a.removeAttribute(d);this.linkElement(f,a)}}});Ext.define('Ext.TaskQueue',{singleton:!0,pending:!1,mode:!0,readQueue:[],writeQueue:[],readRequestId:0,writeRequestId:0,timer:null,constructor:function(){var a=this;a.run=a.run.bind(a);if(Ext.os.is.iOS){a.watchdogTimer=Ext.interval(this.watch,500,this)}},requestRead:function(d,b,c){var a={id:++this.readRequestId,fn:d,scope:b,args:c};this.readQueue.push(a);this.request(!0);return a.id},cancelRead:function(a){this.cancelRequest(this.readQueue,a,!0)},requestWrite:function(e,c,d){var a=this,b={id:++a.writeRequestId,fn:e,scope:c,args:d};a.writeQueue.push(b);a.request(!1);return b.id},cancelWrite:function(a){this.cancelRequest(this.writeQueue,a,!1)},request:function(c,b){var a=this;if(!a.pending){a.pendingTime=Date.now();a.pending=!0;a.mode=c;if(c){a.timer=Ext.defer(a[b]||a.run,1)}else {a.timer=Ext.raf(a[b]||a.run)}}},cancelRequest:function(b,d,c){var a;for(a=0;a<b.length;a++){if(b[a].id===d){b.splice(a,1);break}}if(!b.length&&this.mode===c&&this.timer){Ext.undefer(this.timer)}},watch:function(){if(this.pending&&Date.now()-this.pendingTime>=500){this.run()}},run:function(e,d,m){var b=this,h=null,f,g,i,c,a,k,j,l;e=e||b.readQueue;d=d||b.writeQueue;b.pending=!1;b.pending=b.timer=!1;if(b.mode){f=e;if(d.length>0){h=!1}}else {f=d;if(e.length>0){h=!0}}g=f.slice();f.length=0;for(j=0,l=g.length;j<l;j++){i=g[j];c=i.fn;a=i.scope;k=i.args;if(a&&(a.destroying||a.destroyed)){continue}if(typeof c==='string'){c=a[c]}if(k){c.apply(a,k)}else {c.call(a)}}g.length=0;if(h!==null){b.request(h,m)}},clear:function(){var a=this,b=a.timer;if(b){if(a.mode){Ext.undefer(b)}else {Ext.unraf(b)}}a.readQueue.length=a.writeQueue.length=0;a.pending=a.timer=!1;a.mode=!0}});Ext.define('Ext.util.sizemonitor.Abstract',{mixins:[Ext.mixin.Templatable],config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:null,height:null,contentWidth:null,contentHeight:null,constructor:function(b){var a=this;a.refresh=a.refresh.bind(a);a.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0};a.initElement();a.initConfig(b);a.bindListeners(!0)},bindListeners:Ext.emptyFn,applyElement:function(a){if(a){return Ext.get(a)}},updateElement:function(a){a.append(this.detectorsContainer,!0);a.addCls(Ext.baseCSSPrefix+'size-monitored')},applyArgs:function(a){return a.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead('refresh',this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.clientWidth},getContentHeight:function(){return this.detectorsContainer.clientHeight},refreshSize:function(){var e=this.getElement();if(!e||e.destroyed){return !1}var a=this,j=e.measure(),i=j.width,h=j.height,d=a.getContentWidth(),c=a.getContentHeight(),l=a.contentWidth,k=a.contentHeight,b=a.info,g=!1,f;a.width=i;a.height=h;a.contentWidth=d;a.contentHeight=c;f=(l!==d?1:0)+(k!==c?2:0);if(f>0){b.width=i;b.height=h;b.contentWidth=d;b.contentHeight=c;b.flag=f;g=!0;a.getCallback().apply(a.getScope(),a.getArgs())}return g},refresh:function(){if(this.destroying||this.destroyed){return}this.refreshSize();Ext.TaskQueue.requestWrite('refreshMonitors',this)},destroy:function(){var a=this,b=a.getElement();a.bindListeners(!1);if(b&&!b.destroyed){b.removeCls(Ext.baseCSSPrefix+'size-monitored')}delete a._element;a.refresh=null;a.callParent()}});Ext.define('Ext.util.sizemonitor.Scroll',{extend:Ext.util.sizemonitor.Abstract,getElementConfig:function(){return {reference:'detectorsContainer',classList:[Ext.baseCSSPrefix+'size-monitors','scroll'],children:[{reference:'expandMonitor',className:'expand'},{reference:'shrinkMonitor',className:'shrink'}]}},constructor:function(a){this.onScroll=this.onScroll.bind(this);this.callParent(arguments)},bindListeners:function(b){var a=b?'addEventListener':'removeEventListener';this.expandMonitor[a]('scroll',this.onScroll,!0);this.shrinkMonitor[a]('scroll',this.onScroll,!0)},onScroll:function(a){if(!this.destroyed){if(this.hasExpandMonitorScrollChanged&&a.target===this.expandMonitor){delete this.hasExpandMonitorScrollChanged}else {if(this.hasShrinkMonitorScrollChanged&&a.target===this.shrinkMonitor){delete this.hasShrinkMonitorScrollChanged}else {Ext.TaskQueue.requestRead('refresh',this)}}}},refreshMonitors:function(){var a=this.expandMonitor,b=this.shrinkMonitor,c=1000000;if(a&&!a.destroyed){if(Ext.isiOS){this.hasExpandMonitorScrollChanged=!0}a.scrollLeft=c;a.scrollTop=c}if(b&&!b.destroyed){if(Ext.isiOS){this.hasShrinkMonitorScrollChanged=!0}b.scrollLeft=c;b.scrollTop=c}},destroy:function(){this.onScroll=null;this.callParent()}});Ext.define('Ext.util.SizeMonitor',{constructor:function(a){return new Ext.util.sizemonitor.Scroll(a)}});Ext.define('Ext.event.publisher.ElementSize',{extend:Ext.event.publisher.Publisher,type:'size',handledEvents:['resize'],constructor:function(){this.monitors={};this.subscribers={};this.callParent(arguments)},subscribe:function(b){var a=b.id,c=this.subscribers,d=this.monitors;if(c[a]){++c[a]}else {c[a]=1;d[a]=new Ext.util.SizeMonitor({element:b,callback:this.onElementResize,scope:this,args:[b]})}b.on('painted','forceRefresh',d[a]);return !0},unsubscribe:function(b){var a=b.id,d=this.subscribers,e=this.monitors,c;if(d[a]&&!--d[a]){delete d[a];c=e[a];b.un('painted','forceRefresh',c);c.destroy();delete e[a]}if(b.activeRead){Ext.TaskQueue.cancelRead(b.activeRead)}},fireElementResize:function(a,b){delete a.activeRead;this.fire(a,'resize',[a,b])},onElementResize:function(a,b){if(!a.activeRead){a.activeRead=Ext.TaskQueue.requestRead('fireElementResize',this,[a,b])}}},function(a){a.instance=new a()});Ext.define('Ext.util.paintmonitor.Abstract',{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:'',monitorClass:'',constructor:function(a){this.onElementPainted=this.onElementPainted.bind(this);this.initConfig(a)},bindListeners:function(a){this.monitorElement[a?'addEventListener':'removeEventListener'](this.eventName,this.onElementPainted,!0)},applyElement:function(a){if(a){return Ext.get(a)}},updateElement:function(a){this.monitorElement=Ext.Element.create({classList:[Ext.baseCSSPrefix+'paint-monitor',this.monitorClass]},!0);a.appendChild(this.monitorElement,!0);a.addCls(Ext.baseCSSPrefix+'paint-monitored');this.bindListeners(!0)},onElementPainted:function(){},destroy:function(){var a=this,c=a.monitorElement,d=c.parentNode,b=a.getElement();a.bindListeners(!1);delete a.monitorElement;if(b&&!b.destroyed){b.removeCls(Ext.baseCSSPrefix+'paint-monitored');delete a._element}if(d){d.removeChild(c)}a.callParent()}});Ext.define('Ext.util.paintmonitor.CssAnimation',{extend:Ext.util.paintmonitor.Abstract,eventName:Ext.browser.is.WebKit?'webkitAnimationEnd':'animationend',monitorClass:'cssanimation',onElementPainted:function(a){if(a.animationName===Ext.baseCSSPrefix+'paint-monitor-helper'){this.getCallback().apply(this.getScope(),this.getArgs())}}});Ext.define('Ext.util.PaintMonitor',{constructor:function(a){return new Ext.util.paintmonitor.CssAnimation(a)}});Ext.define('Ext.event.publisher.ElementPaint',{extend:Ext.event.publisher.Publisher,type:'paint',handledEvents:['painted'],constructor:function(){this.monitors={};this.subscribers={};this.callParent(arguments)},subscribe:function(d){var b=this,a=d.id,c=b.subscribers;if(c[a]){++c[a]}else {c[a]=1;b.monitors[a]=new Ext.util.PaintMonitor({element:d,callback:b.onElementPainted,scope:b,args:[d]})}},unsubscribe:function(c){var a=c.id,b=this.subscribers,d=this.monitors;if(b[a]&&!--b[a]){delete b[a];d[a].destroy();delete d[a]}if(c.activeRead){Ext.TaskQueue.cancelRead(c.activeRead)}},fireElementPainted:function(a){delete a.activeRead;this.fire(a,'painted',[a])},onElementPainted:function(a){if(!a.activeRead){a.activeRead=Ext.TaskQueue.requestRead('fireElementPainted',this,[a])}}},function(a){a.instance=new a()});Ext.define('Ext.dom.Element',function(a){var j=window,b=document,i=b.documentElement,l=j.top,P=[],m,z,x,Q='width',O='height',aa='min-width',Z='min-height',_='max-width',Y='max-height',ao='top',aj='right',af='bottom',am='left',$='visibility',ag='hidden',M='display',C='none',ai='z-index',y='position',ab='relative',ah='static',ae=/\w/g,q=/\s+/,S=/[\s]+/,W=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,U=/\?$/,al=/top/i,ak={},d={t:'border-top-width',r:'border-right-width',b:'border-bottom-width',l:'border-left-width'},h={t:'padding-top',r:'padding-right',b:'padding-bottom',l:'padding-left'},A={t:'margin-top',r:'margin-right',b:'margin-bottom',l:'margin-left'},L={b:'backward',back:'backward',f:'forward'},X=[h.l,h.r,h.t,h.b],I=[d.l,d.r,d.t,d.b],ac=/\d+$/,B=/\d+(px|r?em|%|vh|vw|vmin|vmax|en|ch|ex|pt|in|cm|mm|pc)$/i,J='px',an=/^-ms-/,ad=/(-[a-z])/gi,R=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,v=/^\d+(?:\.\d*)?px$/i,V=/(%|r?em|auto|vh|vw|vmin|vmax|ch|ex)$/i,H={},F='originalDisplay',T=function(c,b){return b.charAt(1).toUpperCase()},K=function(d,e){var c,b,f;if(d.nodeType===1){d._extData=null;if(e){c=d.childNodes;for(b=0,f=c.length;b<f;++b){K(c[b],e)}}}},e=function(b){return parseFloat(b)||0},p=Ext.baseCSSPrefix+'hidden-opacity',n=Ext.baseCSSPrefix+'hidden-visibility',k=Ext.baseCSSPrefix+'hidden-display',o=Ext.baseCSSPrefix+'hidden-offsets',r=Ext.baseCSSPrefix+'hidden-clip',G=0,D=0,E=!1,t=!1,w=/text|password|search|tel|url/i,s,c,f,N,g,u;try{m=l.__elementIdCounter__;l.__elementIdCounter__=m}catch(ap){l=j}l.__elementIdCounter__=m=(l.__elementIdCounter__||0)+1;z='ext-window-'+m;x='ext-document-'+m;return {alternateClassName:['Ext.Element'],mixins:[Ext.util.Positionable,Ext.mixin.Observable],observableType:'element',isElement:!0,skipGarbageCollection:!0,$applyConfigs:!0,identifiablePrefix:'ext-element-',_selectDir:L,styleHooks:{transform:{set:function(e,b,f){var d='',c;if(typeof b!=='string'){for(c in b){if(d){d+=' '}if(c.indexOf('translate')===0){d+=c+'('+a.addUnits(b[c],'px')+')'}else {d+=c+'('+b[c]+')'}}b=d}e.style.transform=b}}},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(d){var c=this,e;if(typeof d==='string'){d=b.getElementById(d)}if(!d){return null}c.dom=d;if(!(e=d.id)){d.id=e=c.generateAutoId()}c.id=e;c.el=c;Ext.cache[e]=c;c.longpressListenerCount=0;c.mixins.observable.constructor.call(c)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,OPACITY:5,minKeyboardHeight:100,unitRe:B,useDelegatedEvents:!0,validNodeTypes:{1:1,9:1},namespaceURIs:{html:'http://www.w3.org/1999/xhtml',svg:'http://www.w3.org/2000/svg'},selectableCls:Ext.baseCSSPrefix+'selectable',unselectableCls:Ext.baseCSSPrefix+'unselectable',maxRippleDiameter:75,addUnits:function(b,c){if(typeof b==='number'){return b+(c||J)}if(b===''||b==='auto'||b==null){return b||''}if(ac.test(b)){return b+(c||J)}if(!B.test(b)){return b||''}return b},create:function(d,l,r){var n=this,e,f,o,i,c,g,h,p,m,j;d=d||{};if(d.isElement){return l?d.dom:d}else {if('nodeType' in d){return l?d:Ext.get(d)}}if(typeof d==='string'){return b.createTextNode(d)}i=d.tag;if(!i){i='div'}j=d.namespace||r;if(j){f=b.createElementNS(n.namespaceURIs[j]||j,i)}else {f=b.createElement(i)}o=f.style;for(g in d){if(g!=='tag'&&g!=='namespace'){c=d[g];switch(g){case 'style':if(typeof c==='string'){f.setAttribute(g,c)}else {for(h in c){o[h]=c[h]}};break;case 'className':case 'cls':m=c.split(q);e=e?e.concat(m):m;break;case 'classList':e=e?e.concat(c):c;break;case 'text':f.textContent=c;break;case 'html':f.innerHTML=c;break;case 'hidden':if(e){e.push(k)}else {e=[k]};break;case 'children':if(c!=null){for(h=0,p=c.length;h<p;h++){f.appendChild(n.create(c[h],!0,j))}};break;default:if(c!=null){f.setAttribute(g,c)};}}}if(e){f.className=e.join(' ')}if(l){return f}else {return n.get(f)}},fly:function(c,b){return Ext.fly(c,b)},fromPoint:function(){var c;if(Ext.isIE||Ext.isEdge){try{c=window.self!==window.top}catch(aq){c=!0}}return function(e,f,g){var d=null;d=b.elementFromPoint(e,f);if(!d&&c){d=b.elementFromPoint(e,f)}return g?d:Ext.get(d)}}(),fromPagePoint:function(d,e,c){var b=Ext.getDoc().getScroll();return a.fromPoint(d-b.left,e-b.top,c)},get:function(c){var m=this,g=Ext.cache,f,i,d,e,l,h,k;if(!c){return null}if(c.isFly){c=c.dom}if(typeof c==='string'){d=c;if(g.hasOwnProperty(d)){e=g[d];if(e.skipGarbageCollection||!Ext.isGarbage(e.dom)){return e}else {e.destroy()}}if(d===z){return a.get(j)}else {if(d===x){return a.get(b)}}i=Ext.getElementById?Ext.getElementById(d):b.getElementById(d);if(i){return new a(i)}}f=c.nodeType;if(f){l=f===9;k=m.validNodeTypes[f]}else {h=c.window==c}if(k||h){d=c.id;if(c===b){c.id=d=x}else {if(c==j){c.id=d=z}}if(g.hasOwnProperty(d)){e=g[d];if(e.skipGarbageCollection||c===e.dom||!Ext.isGarbage(e.dom)){return e}else {e.destroy()}}c=new a(c);if(h||l){c.skipGarbageCollection=!0}return c}if(c.isElement){return c}if(c.isComposite){return c}if(Ext.isIterable(c)){return m.select(c)}return null},getActiveElement:function(d){var c=b.activeElement;if(!c||!c.focus){c=b.body}return d?Ext.get(c):c},getDocumentHeight:function(){return Math.max(!Ext.isStrict?b.body.scrollHeight:i.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?b.body.scrollWidth:i.scrollWidth,this.getViewportWidth())},getOrientation:function(){if(Ext.supports.OrientationChange){return j.orientation==0?'portrait':'landscape'}return j.innerHeight>j.innerWidth?'portrait':'landscape'},getViewportHeight:function(){var c=a._viewportHeight;if(Ext.isIE9m){return b.documentElement.clientHeight}return c!=null?c:i.clientHeight},getViewportWidth:function(){var c=a._viewportWidth;if(Ext.isIE9m){return b.documentElement.clientWidth}return c!=null?c:i.clientWidth},getViewportScale:function(){var b=l;return (Ext.isiOS||Ext.isAndroid?1:b.devicePixelRatio||b.screen.deviceXDPI/b.screen.logicalXDPI)*this.getViewportTouchScale()},getViewportTouchScale:function(e){var c=1,d=l,b;if(!e){b=this._viewportTouchScale;if(b){return b}}if(Ext.isIE10p||Ext.isEdge||Ext.isiOS){c=i.offsetWidth/j.innerWidth}else {if(Ext.isChromeMobile){c=d.outerWidth/d.innerWidth}}return c},getViewSize:function(){return {width:a.getViewportWidth(),height:a.getViewportHeight()}},hasUnit:function(b){return !!(b&&B.test(b))},isRelativeUnit:function(b){return !b||V.test(b)},maskIframes:function(){var b=document.getElementsByTagName('iframe'),c=new Ext.dom.Fly();Ext.each(b,function(d){var b;b=c.attach(d.parentNode).mask();b.setStyle('background-color','transparent')})},normalize:function(b){return H[b]||(H[b]=b.replace(an,'ms-').replace(ad,T))},_onWindowFocusChange:function(b){if(Ext.fly(b.target).is(a.editableSelector)){G=new Date();E=b.type==='focusin'||b.type==='pointerup'}},_onWindowResize:function(){var c=i.clientWidth,b=i.clientHeight,g=new Date(),f=1000,d,e;d=c-a._documentWidth;e=b-a._documentHeight;a._documentWidth=c;a._documentHeight=b;if(g-G<f||g-D<f){if(d===0&&(E&&e<=-a.minKeyboardHeight)){t=!0;return}}if(t&&d===0&&e>=a.minKeyboardHeight){t=!1;D=new Date()}if(t){return}a._viewportWidth=c;a._viewportHeight=b},parseBox:function(c){var e,b,d;c=c||0;e=typeof c;if(e==='number'){return {top:c,right:c,bottom:c,left:c}}else {if(e!=='string'){return c}}b=c.split(' ');d=b.length;if(d===1){b[1]=b[2]=b[3]=b[0]}else {if(d===2){b[2]=b[0];b[3]=b[1]}else {if(d===3){b[3]=b[1]}}}return {top:parseFloat(b[0])||0,right:parseFloat(b[1])||0,bottom:parseFloat(b[2])||0,left:parseFloat(b[3])||0}},parseStyles:function(c){var d={},b;if(c){R.lastIndex=0;while(b=R.exec(c)){d[b[1]]=b[2]||''}}return d},select:function(d,c,e){return Ext.fly(e||b).select(d,c)},query:function(c,d,e){return Ext.fly(e||b).query(c,d)},unitizeBox:function(b,d){var c=this;b=c.parseBox(b);return c.addUnits(b.top,d)+' '+c.addUnits(b.right,d)+' '+c.addUnits(b.bottom,d)+' '+c.addUnits(b.left,d)},unmaskIframes:function(){var b=document.getElementsByTagName('iframe'),c=new Ext.dom.Fly();Ext.each(b,function(b){c.attach(b.parentNode).unmask()})},serializeForm:function(l){var m=l.elements||(b.forms[l]||Ext.getDom(l)).elements,n=!1,f=encodeURIComponent,g='',q=m.length,c,h,d,k,o,i,j,p,e;for(i=0;i<q;i++){c=m[i];h=c.name;d=c.type;k=c.options;if(!c.disabled&&h){if(/select-(one|multiple)/i.test(d)){p=k.length;for(j=0;j<p;j++){e=k[j];if(e.selected){o=e.hasAttribute('value');g+=Ext.String.format('{0}={1}&',f(h),f(o?e.value:e.text))}}}else {if(!/file|undefined|reset|button/i.test(d)){if(!(/radio|checkbox/i.test(d)&&!c.checked)&&!(d==='submit'&&n)){g+=f(h)+'='+f(c.value)+'&';n=/submit/i.test(d)}}}}}return g.substr(0,g.length-1)},getCommonAncestor:function(d,e,c){f=f||new Ext.dom.Fly();f.attach(Ext.getDom(d));while(!f.isAncestor(e)){if(f.dom.parentNode){f.attach(f.dom.parentNode)}else {f.attach(b.body);break}}return c?f.dom:Ext.get(f)}},selectable:function(){var b=this;b.dom.unselectable='';b.removeCls(a.unselectableCls);b.addCls(a.selectableCls);return b},unselectable:function(){var b=this;if(Ext.isOpera){b.dom.unselectable='on'}b.removeCls(a.selectableCls);b.addCls(a.unselectableCls);return b},statics:{tabbableSelector:Ext.supports.CSS3NegationSelector?'a[href],button,iframe,input,select,textarea,[tabindex]:not([tabindex="-1"]),[contenteditable="true"]':'a[href],button,iframe,input,select,textarea,[tabindex],[contenteditable="true"]',naturallyFocusableTags:{BUTTON:!0,IFRAME:!0,EMBED:!0,INPUT:!0,OBJECT:!0,SELECT:!0,TEXTAREA:!0,HTML:Ext.isIE?!0:!1,BODY:Ext.isIE?!1:!0},naturallyTabbableTags:{BUTTON:!0,IFRAME:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0,OBJECT:Ext.isIE8m?!0:!1},inputTags:{INPUT:!0,TEXTAREA:!0},tabbableSavedCounterAttribute:'data-tabindex-counter',tabbableSavedValueAttribute:'data-tabindex-value',splitCls:function(b){if(typeof b==='string'){b=b.split(q)}return b}},_init:function(b){b.tabbableSelector+=',['+b.tabbableSavedCounterAttribute+']'},addCls:function(d,b,c){return this.replaceCls(null,d,b,c)},addClsOnClick:function(c,d,f){var b=this,e=Ext.isFunction(d);b.on('mousedown',function(){if(e&&d.call(f||b,b)===!1){return !1}b.addCls(c);Ext.getDoc().on({mouseup:function(){if(b.dom){b.removeCls(c)}},single:!0})});return b},addClsOnFocus:function(c,d,f){var b=this,e=Ext.isFunction(d);b.on('focus',function(){if(e&&d.call(f||b,b)===!1){return !1}b.addCls(c)});b.on('blur',function(){if(b.dom){b.removeCls(c)}});return b},addClsOnOver:function(c,d,f){var b=this,e=Ext.isFunction(d);b.hover(function(){if(e&&d.call(f||b,b)===!1){return}b.addCls(c)},function(){b.removeCls(c)});return b},addStyles:function(i,h){var g=0,d=(i||'').match(ae),c=[],f=d.length,e,b;if(f===1){g=parseFloat(this.getStyle(h[d[0]]))||0}else {if(f){for(b=0;b<f;b++){e=d[b];c.push(h[e])}c=this.getStyle(c);for(b=0;b<f;b++){e=d[b];g+=parseFloat(c[h[e]])||0}}}return g},addUnits:function(c,b){return a.addUnits(c,b)},animate:function(b){b=new Ext.fx.Animation(b);b.setElement(this);this._activeAnimation=b;b.on({animationend:this._onAnimationEnd,scope:this});Ext.Animator.run(b);return b},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){return this.appendChild.apply(this,arguments)},appendChild:function(c,d){var g=this,e,h,f;if(c.nodeType||c.dom||typeof c==='string'){c=Ext.getDom(c);g.dom.appendChild(c);return !d?Ext.get(c):c}else {if(c.length){e=Ext.fly(b.createDocumentFragment());h=c.length;for(f=0;f<h;f++){e.appendChild(c[f],d)}c=Ext.Array.toArray(e.dom.childNodes);g.dom.appendChild(e.dom);return d?c:new Ext.dom.CompositeElementLite(c)}else {return g.createChild(c,null,d)}}},appendTo:function(b){Ext.getDom(b).appendChild(this.dom);return this},applyStyles:function(b){if(b){if(typeof b==='function'){b=b.call()}if(typeof b==='string'){b=a.parseStyles(b)}if(typeof b==='object'){this.setStyle(b)}}return this},blur:function(){var d=this,c=d.dom;if(c!==b.body){try{c.blur()}catch(aq){}return d}else {return d.focus(undefined,c)}},cacheScrollValues:function(){var i=this,g=[],e=[],f,b,d,h;c=c||new Ext.dom.Fly();f=i.query('*');for(d=0,h=f.length;d<h;d++){b=f[d];if(b.scrollTop>0||b.scrollLeft!==0){e.push(b);g.push(c.attach(b).getScroll())}}return function(){var d,b,f;for(b=0,f=e.length;b<f;b++){d=g[b];c.attach(e[b]);c.setScrollLeft(d.left);c.setScrollTop(d.top)}}},center:function(c){return this.alignTo(c||b,'c-c')},child:function(d,c){var b=this,e;if(Ext.supports.Selectors2){return b.selectNode(':scope>'+d,!!c)}else {e=b.id!=null?b.id:Ext.get(b).id;return b.selectNode(Ext.makeIdSelector(e)+' > '+d,!!c)}},clone:function(c,d){var b=this.dom.cloneNode(c);if(Ext.supports.CloneNodeCopiesExpando){K(b,c)}return d?b:Ext.get(b)},constrainScrollLeft:function(c){var b=this.dom;return Math.max(Math.min(c,b.scrollWidth-b.clientWidth),0)},constrainScrollTop:function(c){var b=this.dom;return Math.max(Math.min(c,b.scrollHeight-b.clientHeight),0)},createChild:function(b,c,d){b=b||{tag:'div'};if(c){return Ext.DomHelper.insertBefore(c,b,d!==!0)}else {return Ext.DomHelper.append(this.dom,b,d!==!0)}},contains:function(b){if(!b){return !1}var d=this,c=Ext.getDom(b);return c===d.dom||d.isAncestor(c)},destroy:function(){var c=this,b=c.dom;if(b&&b.parentNode){b.parentNode.removeChild(b)}if(c.$ripples){c.destroyAllRipples()}c.collect()},detach:function(){var b=this.dom,c=this.component;if(b&&b.parentNode&&b.tagName!=='BODY'){if(c){c.revertFocus()}b.parentNode.removeChild(b)}return this},disableShadow:function(){var b=this.shadow;if(b){b.hide();b.disabled=!0}},disableShim:function(){var b=this.shim;if(b){b.hide();b.disabled=!0}},doReplaceWith:function(c){var b=this.dom;b.parentNode.replaceChild(Ext.getDom(c),b)},doScrollIntoView:function(b,o,d,m,l,n){c=c||new Ext.dom.Fly();var e=this,k=e.dom,i=c.attach(b)[l](),j=b.scrollTop,h=e.getScrollIntoViewXY(b,i,j),f=h.x,g=h.y;if(m){if(d){d=Ext.apply({listeners:{afteranimate:function(){c.attach(k).highlight()}}},d)}else {c.attach(k).highlight()}}if(g!==j){c.attach(b).scrollTo('top',g,d)}if(o!==!1&&f!==i){c.attach(b)[n]('left',f,d)}return e},down:function(c,b){return this.selectNode(c,!!b)},enableShadow:function(f,e){var c=this,b=c.shadow||(c.shadow=new Ext.dom.Shadow(Ext.apply({target:c},f))),d=c.shim;if(d){d.offsets=b.outerOffsets;d.shadow=b;b.shim=d}if(e===!0||e!==!1&&c.isVisible()){b.show()}else {b.hide()}b.disabled=!1},enableShim:function(f,e){var c=this,b=c.shim||(c.shim=new Ext.dom.Shim(Ext.apply({target:c},f))),d=c.shadow;if(d){b.offsets=d.outerOffsets;b.shadow=d;d.shim=b}if(e===!0||e!==!1&&c.isVisible()){b.show()}else {b.hide()}b.disabled=!1;return b},findParent:function(f,c,g){var h=this,b=h.dom,d=i,e=0;if(c||c===0){if(typeof c!=='number'){d=Ext.getDom(c);c=Number.MAX_VALUE}}else {c=50}while(b&&b.nodeType===1&&e<c&&b!==d){if(Ext.fly(b).is(f)){return g?Ext.get(b):b}e++;b=b.parentNode}return null},findParentNode:function(c,e,d){var b=Ext.fly(this.dom.parentNode);return b?b.findParent(c,e,d):null},first:function(c,b){return this.matchNode('nextSibling','firstChild',c,b)},focus:function(d,b){var c=this;b=b||c.dom;if(Number(d)){Ext.defer(c.focus,d,c,[null,b])}else {Ext.fireEvent('beforefocus',b);b.focus()}return c},collect:function(){var b=this,e=b.dom,c=b.shadow,d=b.shim;if(!b.isFly){b.mixins.observable.destroy.call(b);delete Ext.cache[b.id];b.el=null}if(e){e._extData=b.dom=null}if(c){c.hide();b.shadow=null}if(d){d.hide();b.shim=null}},getAnchorToXY:function(e,b,d,c){return e.getAnchorXY(b,d,c)},getAttribute:function(b,d){var c=this.dom;return d?c.getAttributeNS(d,b)||c.getAttribute(d+':'+b):c.getAttribute(b)||c[b]||null},getAttributes:function(){var d=this.dom.attributes,e={},c,b,f;for(b=0,f=d.length;b<f;b++){c=d[b];e[c.name]=c.value}return e},getBottom:function(b){return (b?this.getLocalY():this.getY())+this.getHeight()},getById:function(d,e){var c=b.getElementById(d)||this.dom.querySelector(Ext.makeIdSelector(d));return e?c:c?Ext.get(c):null},getBorderPadding:function(){var c=this.getStyle(X),b=this.getStyle(I);return {beforeX:(parseFloat(b[d.l])||0)+(parseFloat(c[h.l])||0),afterX:(parseFloat(b[d.r])||0)+(parseFloat(c[h.r])||0),beforeY:(parseFloat(b[d.t])||0)+(parseFloat(c[h.t])||0),afterY:(parseFloat(b[d.b])||0)+(parseFloat(c[h.b])||0)}},getBorders:function(){var b=this.getStyle(I);return {beforeX:parseFloat(b[d.l])||0,afterX:parseFloat(b[d.r])||0,beforeY:parseFloat(b[d.t])||0,afterY:parseFloat(b[d.b])||0}},getBorderWidth:function(b){return this.addStyles(b,d)},getClassMap:function(c){var b=this.getData();if(b){b=b.classMap;if(c!==!1){b=Ext.apply({},b)}}return b},getData:function(d){var c=this.dom,b;if(c){b=c._extData||(c._extData={});if(d!==!1&&!b.isSynchronized){this.synchronize()}}return b||null},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getLastChild:function(){return Ext.get(this.dom.lastElementChild)},getHeight:function(g,f){var c=this,e=c.dom,h=c.isStyle('display','none'),b,d;if(h){return 0}if(e.nodeName==='BODY'){b=a.getViewportHeight()}else {if(f){b=e.getBoundingClientRect().height}else {b=e.offsetHeight;if(b==null){b=e.getBoundingClientRect().height}}}if(Ext.supports.Direct2DBug){d=c.adjustDirect2DDimension(O);if(f){b+=d}else {if(d>0&&d<0.5){b++}}}if(g){b-=c.getBorderWidth('tb')+c.getPadding('tb')}return b<0?0:b},getHtml:function(){return this.dom?this.dom.innerHTML:''},getLeft:function(b){return b?this.getLocalX():this.getX()},getLocalX:function(){var d=this,c,b=d.getStyle('left');if(!b||b==='auto'){b=0}else {if(v.test(b)){b=parseFloat(b)}else {b=d.getX();c=d.dom.offsetParent;if(c){b-=Ext.fly(c).getX()}}}return b},getLocalXY:function(){var e=this,d,f=e.getStyle(['left','top']),b=f.left,c=f.top;if(!b||b==='auto'){b=0}else {if(v.test(b)){b=parseFloat(b)}else {b=e.getX();d=e.dom.offsetParent;if(d){b-=Ext.fly(d).getX()}}}if(!c||c==='auto'){c=0}else {if(v.test(c)){c=parseFloat(c)}else {c=e.getY();d=e.dom.offsetParent;if(d){c-=Ext.fly(d).getY()}}}return [b,c]},getLocalY:function(){var d=this,c,b=d.getStyle('top');if(!b||b==='auto'){b=0}else {if(v.test(b)){b=parseFloat(b)}else {b=d.getY();c=d.dom.offsetParent;if(c){b-=Ext.fly(c).getY()}}}return b},getMargin:function(){var c={t:'top',l:'left',r:'right',b:'bottom'},b=['margin-top','margin-left','margin-right','margin-bottom'];return function(g){var h=this,e,f,d;if(!g){e=h.getStyle(b);d={};if(e&&typeof e==='object'){d={};for(f in A){d[f]=d[c[f]]=parseFloat(e[A[f]])||0}}}else {d=h.addStyles(g,A)}return d}}(),getPadding:function(b){return this.addStyles(b,h)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(b){return (b?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var h=this,d=h.dom,g=i,e,f,c=b.body;if(d===b||d===c){e=g.scrollLeft||(c?c.scrollLeft:0);f=g.scrollTop||(c?c.scrollTop:0)}else {e=d.scrollLeft;f=d.scrollTop}return {left:e,top:f}},getScrollIntoViewXY:function(b,h,i,c){var d=this,j=d.dom,g,f,e;c=c||ak;if(b.isRegion){e=b.height;f=b.width}else {b=Ext.getDom(b);e=b.clientHeight;f=b.clientWidth}g=d.getOffsetsTo(b);return {y:d.calcScrollPos(g[1]+i,j.offsetHeight,i,e,c.y),x:d.calcScrollPos(g[0]+h,j.offsetWidth,h,f,c.x)}},calcScrollPos:function(e,h,g,c,b){var i=e+h,j=g+c,d=b&&!U.test(b),f=g;if(!d){if(b){b=b.slice(0,-1)}if(h>c||e<g){b=b||'start';d=!0}else {if(i>j){b=b||'end';d=!0}}}if(d){if(b==='start'){f=e}else {if(b==='center'){f=Math.max(0,e-Math.floor(c/2))}else {if(b==='end'){f=Math.max(0,i-c)}}}}return f},getScrollLeft:function(){var c=this.dom;if(c===b||c===b.body){return this.getScroll().left}else {return c.scrollLeft}},getScrollTop:function(){var c=this.dom;if(c===b||c===b.body){return this.getScroll().top}else {return c.scrollTop}},getSize:function(b){return {width:this.getWidth(b),height:this.getHeight(b)}},getStyle:function(n,i){var k=this,e=k.dom,m=typeof n!=='string',p=k.styleHooks,b=n,j=b,q=1,h,o,f,d,g,c,l;if(m){f={};b=j[0];l=0;if(!(q=j.length)){return f}}if(!e||e.documentElement){return f||''}h=e.style;if(i){c=h}else {c=e.ownerDocument.defaultView.getComputedStyle(e,null);if(!c){i=!0;c=h}}do{d=p[b];if(!d){p[b]=d={name:a.normalize(b)}}if(d.get){g=d.get(e,k,i,c)}else {o=d.name;g=c[o]}if(!m){return g}f[b]=g;b=j[++l]}while(l<q);return f},getStyleValue:function(b){return this.dom.style.getPropertyValue(b)},getCaretPos:function(){var d=this.dom,b,c;if(w.test(d.type)){b=d.selectionStart;c=typeof b!=='number'&&this.getTextSelection();if(c){b=c[0]}}return b},setCaretPos:function(b){this.selectText(b,b)},getTextSelection:function(){var b=this.dom;if(w.test(b.type)){return [b.selectionStart,b.selectionEnd,b.selectionDirection]}else {return []}},selectText:function(c,d,e){var h=this,f,b=h.dom,g;if(b&&w.test(b.type)){c=c||0;g=b.value.length;if(d===undefined){d=g}e=L[e]||e||'forward';if(b.setSelectionRange){b.setSelectionRange(c,d,e)}else {if(b.createTextRange){if(c>d){c=d}f=b.createTextRange();f.moveStart('character',c);f.moveEnd('character',-(g-d));f.select()}}}return h},getTop:function(b){return b?this.getLocalY():this.getY()},getTouchAction:function(){return Ext.dom.TouchAction.get(this.dom)},getValue:function(c){var b=this.dom.value;return c?parseInt(b,10):b},getViewSize:function(){var c=this.dom;if(c===b||c===b.body){return {width:a.getViewportWidth(),height:a.getViewportHeight()}}else {return {width:c.clientWidth,height:c.clientHeight}}},getVisibilityMode:function(){var d=this,c=d.getData(),b=c.visibilityMode;if(b===undefined){c.visibilityMode=b=a.DISPLAY}return b},getWidth:function(h,f){var c=this,g=c.dom,i=c.isStyle('display','none'),d,b,e;if(i){return 0}if(Ext.supports.BoundingClientRect){d=g.getBoundingClientRect();b=c.vertical&&!Ext.supports.RotatedBoundingClientRect?d.bottom-d.top:d.right-d.left;b=f?b:Math.ceil(b)}else {b=g.offsetWidth}if(Ext.supports.Direct2DBug&&!c.vertical){e=c.adjustDirect2DDimension(Q);if(f){b+=e}else {if(e>0&&e<0.5){b++}}}if(h){b-=c.getBorderWidth('lr')+c.getPadding('lr')}return b<0?0:b},getX:function(){return this.getXY()[0]},getXY:function(){var f=Math.round,e=this.dom,g=b.body,h=0,i=0,c,d;if(e!==b&&e!==g){try{c=g.getBoundingClientRect();d=e.getBoundingClientRect();h=d.left-c.left;i=d.top-c.top}catch(aq){}}return [f(h),f(i)]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle('z-index'),10)},hasCls:function(c){var b=this.getClassMap();return b.hasOwnProperty(c)},hide:function(){return this.setVisible(!1)},hover:function(e,f,d,c){var b=this;b.on('mouseenter',e,d||b.dom,c);b.on('mouseleave',f,d||b.dom,c);return b},indexOf:function(c){var b=this.dom,d=c&&Ext.getDom(c);b=b&&b.childNodes;return d&&b?Array.prototype.indexOf.call(b,d):-1},insertAfter:function(b){b=Ext.getDom(b);b.parentNode.insertBefore(this.dom,b.nextSibling);return this},insertBefore:function(b){b=Ext.getDom(b);b.parentNode.insertBefore(this.dom,b);return this},insertFirst:function(b,c){b=b||{};if(b.nodeType||b.dom||typeof b==='string'){b=Ext.getDom(b);this.dom.insertBefore(b,this.dom.firstChild);return !c?Ext.get(b):b}else {return this.createChild(b,this.dom.firstChild,c)}},insertHtml:function(d,e,c){var b=Ext.DomHelper.insertHtml(d,this.dom,e);return c?Ext.get(b):b},insertSibling:function(c,l,g){var e=this,k=Ext.DomHelper,i=(l||'before').toLowerCase()==='after',d,h,j,f;if(Ext.isIterable(c)){j=c.length;h=Ext.fly(b.createDocumentFragment());if(Ext.isArray(c)){for(f=0;f<j;f++){d=h.appendChild(c[f],g)}}else {for(f=0;f<j;f++){h.dom.appendChild(d=c[0])}if(g===!1){d=Ext.get(d)}}e.dom.parentNode.insertBefore(h.dom,i?e.dom.nextSibling:e.dom);return d}c=c||{};if(c.nodeType||c.dom){d=e.dom.parentNode.insertBefore(Ext.getDom(c),i?e.dom.nextSibling:e.dom);if(!g){d=Ext.get(d)}}else {if(i&&!e.dom.nextSibling){d=k.append(e.dom.parentNode,c,!g)}else {d=k[i?'insertAfter':'insertBefore'](e.dom,c,!g)}}return d},is:function(c){var d=this.dom,b;if(!c){b=!0}else {if(!d.tagName){b=!1}else {if(Ext.isFunction(c)){b=c(d)}else {b=d[Ext.supports.matchesSelector](c)}}}return b},isAncestor:function(e){var d=!1,c=this.dom,b=Ext.getDom(e);if(c&&b){if(!b.nodeType){return !1}if(c.contains){return c.contains(b)}else {if(c.compareDocumentPosition){return !!(c.compareDocumentPosition(b)&16)}else {while(b=b.parentNode){d=b===c||d}}}}return d},isPainted:function(){return !Ext.browser.is.IE?function(){var b=this.dom;return Boolean(b&&b.offsetParent)}:function(){var b=this.dom;return Boolean(b&&(b.offsetHeight!==0||b.offsetWidth!==0))}}(),isScrollable:function(){var b=this.dom;return b.scrollHeight>b.clientHeight||b.scrollWidth>b.clientWidth},isStyle:function(b,c){return this.getStyle(b)===c},isVisible:function(f,d){var b=this.dom,c=!0,e;if(!b){return !1}d=d||3;if(!s){s=new Ext.dom.Fly()}for(e=b.ownerDocument.documentElement;b!==e;b=b.parentNode){if(!b||b.nodeType===11){c=!1}if(c){s.attach(b);if(d&1){c=!s.isStyle(M,C)}if(c&&d&2){c=!s.isStyle($,ag)}}if(!c||!f){break}}return c},last:function(c,b){return this.matchNode('previousSibling','lastChild',c,b)},matchNode:function(g,f,c,e){var d=this.dom,b;if(!d){return null}b=d[f];while(b){if(b.nodeType===1&&(!c||Ext.fly(b,'_matchNode').is(c))){return !e?Ext.get(b):b}b=b[g]}return null},measure:function(f){var m=this,g=m.dom,h=f!=='h',j=f!=='w',d=0,c=0,i=!Ext.supports.ComputedSizeIncludesPadding,b,l,k;if(g.nodeName==='BODY'){c=j&&a.getViewportHeight();d=h&&a.getViewportWidth()}else {k=g.offsetParent;b=g.ownerDocument.defaultView.getComputedStyle(g,null);i|=b.boxSizing==='content-box';if(k!==null||b.position==='fixed'){if(j){c=e(b.height);if(i){c+=e(b.paddingTop)+e(b.paddingBottom)+e(b.borderTopWidth)+e(b.borderBottomWidth)}}if(h){d=e(b.width);if(i){d+=e(b.paddingLeft)+e(b.paddingRight)+e(b.borderLeftWidth)+e(b.borderRightWidth)}}}}l=f?null:{width:d,height:c};return f?h?d:c:l},measureContent:function(b){var c=this,g=b!=='h',d=c.measure(b),e=b?d:d.height,f=b?d:d.width;if(b!=='w'){e-=c.getBorderWidth('tb')+c.getPadding('tb')}if(g){f-=c.getBorderWidth('lr')+c.getPadding('lr')}return b?g?f:e:{width:f,height:e}},monitorMouseLeave:function(f,e,g){var b=this,d,c={mouseleave:function(c){if(Ext.isIE9m){c.enableIEAsync()}d=Ext.defer(e,f,g||b,[c])},mouseenter:function(){Ext.undefer(d)},destroy:function(){Ext.undefer(d);if(!b.destroyed){b.un(c)}}};b.on(c);return c},next:function(c,b){return this.matchNode('nextSibling','nextSibling',c,b)},parent:function(c,b){return this.matchNode('parentNode','parentNode',c,b)},peekData:function(){var b=this.dom;return b&&b._extData||null},position:function(c,d,e,f){var b=this;if(b.dom.tagName!=='BODY'){if(!c&&b.isStyle(y,ah)){b.setStyle(y,ab)}else {if(c){b.setStyle(y,c)}}if(d){b.setStyle(ai,d)}if(e||f){b.setXY([e||!1,f||!1])}}},prev:function(c,b){return this.matchNode('previousSibling','previousSibling',c,b)},query:function(b,e,j){var i=this.dom,g,l,k,h,f,c,d;if(!i){return null}e=e!==!1;b=b.split(',');if(!j){g=[]}for(c=0,l=b.length;c<l;c++){if(typeof b[c]==='string'){if(j){h=i.querySelector(b[c]);return e?h:Ext.get(h)}f=i.querySelectorAll(b[c]);for(d=0,k=f.length;d<k;d++){g.push(e?f[d]:Ext.get(f[d]))}}}return g},radioCls:function(b){var f=this.dom.parentNode.childNodes,d,c,e;b=Ext.isArray(b)?b:[b];for(c=0,e=f.length;c<e;c++){d=f[c];if(d&&d.nodeType===1){Ext.fly(d).removeCls(b)}}return this.addCls(b)},redraw:function(){var c=this.dom,b=c.style;b.display='none';c.offsetHeight;b.display=''},remove:function(){this.destroy()},removeChild:function(b){this.dom.removeChild(Ext.getDom(b));return this},removeCls:function(d,b,c){return this.replaceCls(d,null,b,c)},repaint:function(c,d){var b=this,e,f;if(!c){c=Ext.baseCSSPrefix+'repaint';f=!(e=!1)}else {if(d!=null){f=d;e=!d}}b.toggleCls(c,f);if(!b.repaintTimer){b.repaintTimer=Ext.defer(function(){b.repaintTimer=null;if(b.dom){b.toggleCls(c,e)}},1)}return b},replace:function(b,f){b=Ext.getDom(b);var c=b.parentNode,e=b.id,d=this.dom;if(f!==!1&&e&&Ext.cache[e]){c.insertBefore(d,b);Ext.get(b).destroy()}else {c.replaceChild(d,b)}return this},replaceCls:function(o,e,c,d){var j=this,n=j.dom,p=0,l=0,g=o,m=(e||o)&&j.getData(),h,i,f,k,b;if(m){h=m.classList;i=m.classMap;e=e?typeof e==='string'?e.split(q):e:P;g=g?typeof g==='string'?g.split(q):g:P;c=c||'';if(c&&c[c.length-1]!=='-'){c+='-'}d=d||'';if(d&&d[0]!=='-'){d='-'+d}for(f=0,k=g.length;f<k;f++){if(!(b=g[f])){continue}b=c+b+d;if(i[b]){delete i[b];++l}}for(f=0,k=e.length;f<k;f++){if(!(b=e[f])){continue}b=c+b+d;if(!i[b]){i[b]=!0;if(!l){h.push(b);++p}}}if(l){j.setClassMap(i,!0)}else {if(p){h=h.join(' ');if(!Ext.isIE8&&n instanceof SVGElement){n.setAttribute('class',h)}else {n.className=h}}}}return j},replaceWith:function(c){var b=this,e=b.dom,f=e.parentNode,g=Ext.cache,d;b.clearListeners();if(c.nodeType||c.dom||typeof c==='string'){c=Ext.get(c);d=f.insertBefore(c.dom,e)}else {d=Ext.DomHelper.insertBefore(e,c)}f.removeChild(e);b.dom=d;if(!b.isFly){delete g[b.id];g[b.id=Ext.id(d)]=b}return b},resolveListenerScope:function(c){var b=this.component;return b?b.resolveListenerScope(c):this},scroll:function(b,e,j){if(!this.isScrollable()){return !1}b=b.charAt(0);var f=this,i=f.dom,h=b==='r'||b==='l'?'left':'top',g=!1,c,d;if(b==='l'||b==='t'||b==='u'){e=-e}if(h==='left'){c=i.scrollLeft;d=f.constrainScrollLeft(c+e)}else {c=i.scrollTop;d=f.constrainScrollTop(c+e)}if(d!==c){this.scrollTo(h,d,j);g=!0}return g},scrollBy:function(b,c,e){var d=this,f=d.dom;if(b.length){e=c;c=b[1];b=b[0]}else {if(typeof b!=='number'){e=c;c=b.y;b=b.x}}if(b){d.scrollTo('left',d.constrainScrollLeft(f.scrollLeft+b),e)}if(c){d.scrollTo('top',d.constrainScrollTop(f.scrollTop+c),e)}return d},scrollChildIntoView:function(c,b){Ext.fly(c).scrollIntoView(this,b)},scrollIntoView:function(b,e,d,c){b=Ext.getDom(b)||Ext.getBody().dom;return this.doScrollIntoView(b,e,d,c,'getScrollLeft','scrollTo')},scrollTo:function(h,e,d){var i=al.test(h),c=this,f=i?'scrollTop':'scrollLeft',g=c.dom,b;if(!d||!c.anim){g[f]=e;g[f]=e}else {b={to:{}};b.to[f]=e;if(Ext.isObject(d)){Ext.applyIf(b,d)}c.animate(b)}return c},select:function(c,e){var d,b;if(typeof c==='string'){b=this.query(c,!e)}else {b=c;d=!0}return e?new Ext.CompositeElement(b,!d):new Ext.CompositeElementLite(b,!0)},selectNode:function(b,c){return this.query(b,c,!0)},set:function(e,g){var f=this,d=f.dom,b,c;for(b in e){if(e.hasOwnProperty(b)){c=e[b];if(b==='style'){f.applyStyles(c)}else {if(b==='cls'){d.className=c}else {if(g!==!1){if(c===undefined){d.removeAttribute(b)}else {d.setAttribute(b,c)}}else {d[b]=c}}}}}return f},setBottom:function(b){this.dom.style[af]=a.addUnits(b);return this},setClassMap:function(b,e){var c=this.getData(!1),d;if(c){b=e&&b||Ext.apply({},b);c.classMap=b;c.classList=d=Ext.Object.getKeys(b);c.isSynchronized=!0;this.dom.className=d.join(' ')}},setCls:function(c){var h=this,e=h.getData(!1),d,g,f,b;if(typeof c==='string'){c=c.split(q)}e.classList=b=c.slice();e.classMap=f={};for(d=0,g=b.length;d<g;d++){f[b[d]]=!0}h.dom.className=b.join(' ')},setDisplayed:function(c){var b=this;if(typeof c==='boolean'){c=c?b._getDisplay():C}b.setStyle(M,c);if(b.shadow||b.shim){b.setUnderlaysVisible(c!==C)}return b},setHeight:function(c){var b=this;b.dom.style[O]=a.addUnits(c);if(b.shadow||b.shim){b.syncUnderlays()}return b},setHtml:function(b){if(this.dom){this.dom.innerHTML=b}return this},setId:function(c){var b=this,d=b.id,e=Ext.cache;if(d){delete e[d]}b.dom.id=c;b.id=c;e[c]=b;return b},setLeft:function(c){var b=this;b.dom.style[am]=a.addUnits(c);if(b.shadow||b.shim){b.syncUnderlays()}return b},setLocalX:function(d){var b=this,c=b.dom.style;c.right='';c.left=d===null?'auto':d+'px';if(b.shadow||b.shim){b.syncUnderlays()}return b},setLocalXY:function(b,e){var d=this,c=d.dom.style;c.right='';if(b&&b.length){e=b[1];b=b[0]}if(b===null){c.left='auto'}else {if(b!==undefined){c.left=b+'px'}}if(e===null){c.top='auto'}else {if(e!==undefined){c.top=e+'px'}}if(d.shadow||d.shim){d.syncUnderlays()}return d},setLocalY:function(c){var b=this;b.dom.style.top=c===null?'auto':c+'px';if(b.shadow||b.shim){b.syncUnderlays()}return b},setMargin:function(b){var d=this,c=d.dom.style;if(b||b===0){b=d.self.unitizeBox(b===!0?5:b);c.setProperty('margin',b,'important')}else {c.removeProperty('margin-top');c.removeProperty('margin-right');c.removeProperty('margin-bottom');c.removeProperty('margin-left')}},setMaxHeight:function(b){this.dom.style[Y]=a.addUnits(b);return this},setMaxWidth:function(b){this.dom.style[_]=a.addUnits(b);return this},setMinHeight:function(b){this.dom.style[Z]=a.addUnits(b);return this},setMinWidth:function(b){this.dom.style[aa]=a.addUnits(b);return this},setOpacity:function(c){var b=this;if(b.dom){b.setStyle('opacity',c)}return b},setPadding:function(b){var d=this,c=d.dom.style;if(b||b===0){b=d.self.unitizeBox(b===!0?5:b);c.setProperty('padding',b,'important')}else {c.removeProperty('padding-top');c.removeProperty('padding-right');c.removeProperty('padding-bottom');c.removeProperty('padding-left')}},setRight:function(b){this.dom.style[aj]=a.addUnits(b);return this},setScrollLeft:function(b){this.dom.scrollLeft=b;return this},setScrollTop:function(b){this.dom.scrollTop=b;return this},setSize:function(b,d){var c=this,e=c.dom.style;if(Ext.isObject(b)){d=b.height;b=b.width}if(b!==undefined){e.width=a.addUnits(b)}if(d!==undefined){e.height=a.addUnits(d)}if(c.shadow||c.shim){c.syncUnderlays()}return c},setStyle:function(h,c){var e=this,f=e.dom,g=e.styleHooks,i=f.style,d=h,b;if(typeof d==='string'){b=g[d];if(!b){g[d]=b={name:a.normalize(d)}}c=c==null?'':c;if(b.set){b.set(f,c,e)}else {i[b.name]=c}if(b.afterSet){b.afterSet(f,c,e)}}else {for(d in h){b=g[d];if(!b){g[d]=b={name:a.normalize(d)}}c=h[d];c=c==null?'':c;if(b.set){b.set(f,c,e)}else {i[b.name]=c}if(b.afterSet){b.afterSet(f,c,e)}}}return e},setText:function(b){this.dom.textContent=b},getText:function(){return this.dom.textContent},setTop:function(c){var b=this;b.dom.style[ao]=a.addUnits(c);if(b.shadow||b.shim){b.syncUnderlays()}return b},setTouchAction:function(b){Ext.dom.TouchAction.set(this.dom,b)},setUnderlaysVisible:function(d){var b=this.shadow,c=this.shim;if(b&&!b.disabled){if(d){b.show()}else {b.hide()}}if(c&&!c.disabled){if(d){c.show()}else {c.hide()}}},setVisibility:function(c){var b=this.dom.style;if(c){b.removeProperty('visibility')}else {b.setProperty('visibility','hidden','important')}},setVisibilityMode:function(b){this.getData().visibilityMode=b;return this},setVisible:function(d){var b=this,e=b.getVisibilityMode(),c=d?'removeCls':'addCls';switch(e){case a.DISPLAY:b.removeCls([n,o,r,p]);b[c](k);break;case a.VISIBILITY:b.removeCls([k,o,r,p]);b[c](n);break;case a.OFFSETS:b.removeCls([n,k,r,p]);b[c](o);break;case a.CLIP:b.removeCls([n,k,o,p]);b[c](r);break;case a.OPACITY:b.removeCls([n,k,o,r]);b[c](p);break;}if(b.shadow||b.shim){b.setUnderlaysVisible(d)}if(!d&&b.$ripples){b.destroyAllRipples()}return b},setWidth:function(c){var b=this;b.dom.style[Q]=a.addUnits(c);if(b.shadow||b.shim){b.syncUnderlays()}return b},setX:function(b){return this.setXY([b,!1])},setXY:function(f){var b=this,d=b.translatePoints(f),e=b.dom.style,c;b.position();e.right='';for(c in d){if(!isNaN(d[c])){e[c]=d[c]+'px'}}if(b.shadow||b.shim){b.syncUnderlays()}return b},setY:function(b){return this.setXY([!1,b])},setZIndex:function(c){var b=this;if(b.shadow){b.shadow.setZIndex(c)}if(b.shim){b.shim.setZIndex(c)}return b.setStyle('z-index',c)},show:function(){return this.setVisible(!0)},swallowEvent:function(b,g){var h=this,c,e,d={destroyable:!0},f=function(c){c.stopPropagation();if(g){c.preventDefault()}};if(Ext.isArray(b)){e=b.length;for(c=0;c<e;c++){d[b[c]]=f}}else {d[b]=f}return h.on(d)},swapCls:function(h,g,c,b){if(c===undefined){c=!0}var f=this,e=c?h:g,d=c?g:h;if(d){f.removeCls(b?b+'-'+d:d)}if(e){f.addCls(b?b+'-'+e:e)}return f},synchronize:function(){var e=this,i=e.dom,f={},g=i.className,b,c,j,h,d=e.getData(!1);if(g&&g.length>0){b=i.className.split(S);for(c=0,j=b.length;c<j;c++){h=b[c];f[h]=!0}}else {b=[]}d.classList=b;d.classMap=f;d.isSynchronized=!0;return e},syncUnderlays:function(){var b=this,c=b.shadow,d=b.shim,j=b.dom,e,h,i,g,f;if(b.isVisible()){e=b.getXY();h=e[0];i=e[1];g=j.offsetWidth;f=j.offsetHeight;if(c&&!c.hidden){c.realign(h,i,g,f)}if(d&&!d.hidden){d.realign(h,i,g,f)}}},toggleCls:function(b,c){if(c==null){c=!this.hasCls(b)}return c?this.addCls(b):this.removeCls(b)},toggle:function(){this.setVisible(!this.isVisible());return this},translate:function(){var c='webkitTransform' in b.createElement('div').style?'webkitTransform':'transform';return function(b,d,e){b=Math.round(b);d=Math.round(d);e=Math.round(e);this.dom.style[c]='translate3d('+(b||0)+'px, '+(d||0)+'px, '+(e||0)+'px)'}}(),unwrap:function(){var i=this.dom,f=i.parentNode,e=(u||(u=new Ext.dom.Fly())).attach(Ext.Element.getActiveElement()),d,c,h,j;g=g||new Ext.dom.Fly();c=Ext.cache[e.dom.id];if(c){e=c}if(this.contains(e)){if(c){c.suspendFocusEvents()}h=!0}if(f){d=f.parentNode;if(h){j=d.getAttribute('tabIndex');g.attach(d);g.set({tabIndex:-1});g.suspendFocusEvents();g.focus()}d.insertBefore(i,f);d.removeChild(f)}else {d=b.createDocumentFragment();d.appendChild(i)}if(h){if(c){c.focus();c.resumeFocusEvents()}else {e.focus()}if(g){g.resumeFocusEvents();g.set({tabIndex:j})}}return this},up:function(b,d,c){return this.findParentNode(b,d,!c)},update:function(b){return this.setHtml(b)},wrap:function(m,g,h){var l=this,k=l.dom,j=Ext.DomHelper.insertBefore(k,m||{tag:'div'},!g),c=(N||(N=new Ext.dom.Fly())).attach(Ext.getDom(j)),e=c,d=(u||(u=new Ext.dom.Fly())).attach(Ext.Element.getActiveElement()),b,f,i;b=Ext.cache[d.dom.id];if(b){d=b}if(h){e=c.selectNode(h,g)}if(l.contains(d)){if(b){b.suspendFocusEvents()}i=Ext.getDom(c).getAttribute('tabIndex');c.set({tabIndex:-1});c.suspendFocusEvents();c.focus();f=!0}(e.dom||e).appendChild(k);if(f){if(b){b.focus();b.resumeFocusEvents()}else {d.focus()}c.resumeFocusEvents();c.set({tabIndex:i})}return j},isFocusable:function(e){var b=this.dom,c=!1,d;if(b&&!b.disabled){d=b.nodeName;c=!!Ext.Element.naturallyFocusableTags[d]||(d==='A'||d==='LINK')&&!!b.href||b.getAttribute('tabIndex')!=null||b.contentEditable==='true';if(Ext.isIE8&&d==='INPUT'&&b.type==='hidden'){c=!1}c=c&&(e||this.isVisible(!0))}return c},isInputField:function(){var b=this.dom,c=b.contentEditable;if(Ext.Element.inputTags[b.tagName]&&b.type!=='button'||(c===''||c==='true')){return !0}return !1},isTabbable:function(g){var d=this.dom,b=!1,f,e,c;if(d&&!d.disabled){f=d.nodeName;c=d.getAttribute('tabIndex');e=c!=null;c-=0;if(f==='A'||f==='LINK'){if(d.href){b=e&&c<0?!1:!0}else {if(d.contentEditable==='true'){b=!e||e&&c>=0?!0:!1}else {b=e&&c>=0?!0:!1}}}else {if(d.contentEditable==='true'||Ext.Element.naturallyTabbableTags[f]){b=e&&c<0?!1:!0}else {if(e&&c>=0){b=!0}}}if(Ext.isIE8&&f==='INPUT'&&d.type==='hidden'){b=!1}b=b&&(g||(!this.component||this.component.isVisible(!0))&&this.isVisible(!0))}return b},ripplingCls:Ext.baseCSSPrefix+'rippling',ripplingTransitionCls:Ext.baseCSSPrefix+'ripple-transition',ripplingUnboundCls:Ext.baseCSSPrefix+'rippling-unbound',rippleBubbleCls:Ext.baseCSSPrefix+'ripple-bubble',rippleContainerCls:Ext.baseCSSPrefix+'ripple-container',rippleWrapperCls:Ext.baseCSSPrefix+'ripple-wrapper',noRippleDisplayMap:{table:1,'table-row':1,'table-row-group':1},noRippleTagMap:{TABLE:1,TR:1,TBODY:1},ripple:function(e,b){if(b===!0||!b){b={}}else {if(Ext.isString(b)){b={color:b}}}var d=this,c=Ext.isString(b.delegate)?d.down(b.delegate):d,t=Ext.isString(b.measureSelector)?d.down(b.measureSelector):null,J=window.getComputedStyle(c.dom).color,k=b.bound===!1,D=b.position,v=d.ripplingCls,z=d.ripplingTransitionCls,H=d.ripplingUnboundCls,B=d.rippleBubbleCls,l=d.rippleContainerCls,I=d.rippleWrapperCls,j,r,q,f,E,C,A,n,x,F,G,i,h,g,s,u,y,o,p,m,w;if(c){j=c.getXY();r=c.getWidth();q=c.getHeight();w=c.$rippleClearTimeout;if(w){c.$rippleClearTimeout=Ext.undefer(w)}if(t){C=t.getWidth();A=t.getHeight();f=Math.max(C,A)}else {f=r>q?r:q}if(b.diameterLimit===undefined||b.diameterLimit===!0){f=Math.min(f,a.maxRippleDiameter)}else {if(b.diameterLimit&&b.diameterLimit!==!1&&b.diameterLimit!==0){f=Math.min(f,b.diameterLimit)}}E=[j[0]+r/2,j[1]+q/2];if(k){if(b.fit!==!1){n=f*2.15;o=c.getRegion();o.setPosition(o.getCenter()).setSize(n).translateBy(-n/2,-n/2);p=d.up(function(c){var f=Ext.fly(c,'ripple');return !(c.tagName in d.noRippleTagMap)&&!(f.getStyle('display') in d.noRippleDisplayMap)&&f.getRegion().contains(o)})||Ext.getBody()}else {p=c}}if(Ext.isString(e)){b.color=e;e=null}else {if(e&&!e.isEvent){e=new Ext.event.Event(e)}}if(e&&e.isEvent){if(e.browserEvent.$preventRipple){return}D=e.getXY();e.browserEvent.$preventRipple=!0}x=!k&&!b.centered&&D||E;F=x[0]-j[0]-f/2;G=x[1]-j[1]-f/2;c.addCls(z);if(!k){c.addCls(v);h=c.child('.'+l)}else {m=p.getData();i=m.rippleWrapper;if(!i){m.rippleWrapper=i=p.insertFirst({style:'position: absolute; top: 0; left: 0',cls:I+' '+v+' '+H})}}if(!h){if(k){h=i.append({cls:l});h.setXY(j)}else {h=c.append({cls:l})}}g=h.append({cls:B});if(b.color!=='default'){g.setStyle('backgroundColor',b.color||J)}g.setWidth(f);g.setHeight(f);g.setTop(G);g.setLeft(F);u=function(){if(!c.destroyed){c.$rippleClearTimeout=Ext.defer(function(){c.removeCls([v,z]);c.$rippleClearTimeout=null},50)}};s=function(){var f,j;g.destroy();if(d.$ripples){delete d.$ripples[g.id]}j=c.$rippleClearTimeout;if(j){c.$rippleClearTimeout=Ext.undefer(j)}if(k){h.destroy();f=i.child('.'+l);if(!f){m.rippleWrapper=null;i.destroy();u()}}else {f=h.child('.'+B);if(!f){h.destroy();u()}}};y=Ext.defer(s,b.destroyTime||1000,d);if(!d.$ripples){d.$ripples={}}d.$ripples[g.id]={timerId:y,destructor:s};g.addCls(Ext.baseCSSPrefix+'ripple')}},destroyAllRipples:function(){var c=this,d,b;for(d in c.$ripples){b=c.$ripples[d];Ext.undefer(b.timerId);if(b.destructor){b.destructor()}}c.$ripples=null},privates:{findTabbableElements:function(e){var m,l,b,i,h,f=this.dom,o=Ext.Element.tabbableSavedCounterAttribute,c=[],q=0,j,d,p,g,k,n;if(!f){return c}if(e){m=e.skipSelf;l=e.skipChildren;b=e.excludeRoot;i=e.includeSaved;h=e.includeHidden}b=b&&Ext.getDom(b);if(b&&b.contains(f)){return c}if(!m&&(i&&f.hasAttribute(o)||this.isTabbable(h))){c[q++]=f}if(l){return c}j=f.querySelectorAll(Ext.Element.tabbableSelector);k=j.length;if(!k){return c}p=new Ext.dom.Fly();for(g=0;g<k;g++){d=j[g];n=+d.getAttribute('tabIndex');if((i&&d.hasAttribute(o)||!(n<0)&&p.attach(d).isTabbable(h))&&!(b&&(b===d||b.contains(d)))){c[q++]=d}}return c},saveTabbableState:function(c){var f=Ext.Element.tabbableSavedCounterAttribute,h=Ext.Element.tabbableSavedValueAttribute,g,d,b,e,i;if(!c||c.includeSaved==null){c=Ext.Object.chain(c||null);c.includeSaved=!0}d=this.findTabbableElements(c);for(e=0,i=d.length;e<i;e++){b=d[e];g=+b.getAttribute(f);if(g>0){b.setAttribute(f,++g)}else {if(b.hasAttribute('tabIndex')){b.setAttribute(h,b.getAttribute('tabIndex'))}else {b.setAttribute(h,'none')}b.setAttribute('tabIndex','-1');b.setAttribute(f,'1')}}return d},restoreTabbableState:function(c){var i=this.dom,d=Ext.Element.tabbableSavedCounterAttribute,g=Ext.Element.tabbableSavedValueAttribute,e=[],m=c&&c.skipSelf,l=c&&c.skipChildren,n=c&&c.reset,j,h,b,f,k;if(!i){return this}if(!l){e=Ext.Array.from(i.querySelectorAll('['+d+']'))}if(!m){e.unshift(i)}for(f=0,k=e.length;f<k;f++){b=e[f];if(!b.hasAttribute(d)||!b.hasAttribute(g)){continue}h=+b.getAttribute(d);if(!n&&h>1){b.setAttribute(d,--h);continue}j=b.getAttribute(g);if(j==='none'){b.removeAttribute('tabIndex')}else {b.setAttribute('tabIndex',j)}b.removeAttribute(g);b.removeAttribute(d)}return e},setTabIndex:function(c){var b=this.dom,d=Ext.Element.tabbableSavedValueAttribute;if(b.hasAttribute(d)){if(c==null){b.setAttribute(d,'none');b.removeAttribute('tabIndex')}else {b.setAttribute(d,c)}}else {if(c==null){b.removeAttribute('tabIndex')}else {b.setAttribute('tabIndex',c)}}},doAddListener:function(b,l,k,c,j,i,f){var d=this,m=b,g,h,e;b=Ext.canonicalEventName(b);if(!d.blockedEvents[b]){g=d.mixins.observable.doAddListener;c=c||{};if(a.useDelegatedEvents===!1){c.delegated=c.delegated||!1}if(c.translate!==!1){h=d.additiveEvents[b];if(h){c.type=b;b=h;g.call(d,b,l,k,c,j,i,f)}e=d.eventMap[b];if(e){c.type=c.type||b;if(f){c.managedName=m}b=e}}if(g.call(d,b,l,k,c,j,i,f)){if(d.longpressEvents[b]&&++d.longpressListenerCount===1){d.on('MSHoldVisual','preventMsHoldVisual',d)}}if(f&&e){delete c.managedName}delete c.type}},doRemoveListener:function(c,i,h){var b=this,d,f,g,e;c=Ext.canonicalEventName(c);if(!b.blockedEvents[c]){d=b.mixins.observable.doRemoveListener;g=b.additiveEvents[c];if(g){c=g;d.call(b,c,i,h)}f=b.eventMap[c];if(f){e=d.call(b,f,i,h)}e=d.call(b,c,i,h)||e;if(e){if(b.longpressEvents[c]&&!--b.longpressListenerCount){b.un('MSHoldVisual','preventMsHoldVisual',b)}}}},_initEvent:function(b){return this.events[b]=new Ext.dom.ElementEvent(this,b)},_getDisplay:function(){var c=this.getData(),b=c[F];if(b===undefined){c[F]=b=''}return b},_getPublisher:function(b,e){var d=Ext.event.publisher.Publisher,c=d.publishersByEvent[b],f=e&&!Ext.event.Event.gestureEvents[b];if(f||!c||this.dom===window&&b==='resize'){c=d.publishers.dom}return c},isFocusSuspended:function(){var b=this.peekData();return b&&b.suspendFocusEvents},preventMsHoldVisual:function(b){b.preventDefault()},suspendFocusEvents:function(){if(!this.isFly){this.suspendEvent('focus','blur')}this.getData().suspendFocusEvents=!0},resumeFocusEvents:function(){function resumeFn(){var b;if(!this.destroyed){b=this.getData();if(b){b.suspendFocusEvents=!1}if(!this.isFly){this.resumeEvent('focus','blur')}}}if(!this.destroyed&&this.getData().suspendFocusEvents){if(Ext.isIE&&!this.isFly){this.resumeFocusEventsTimer=Ext.asap(resumeFn,this)}else {resumeFn.call(this)}}}},deprecated:{'5.0':{methods:{getHTML:'getHtml',getPageBox:function(l){var e=this,c=e.dom,d=c.nodeName==='BODY',k=d?a.getViewportWidth():c.offsetWidth,g=d?a.getViewportHeight():c.offsetHeight,b=e.getXY(),j=b[1],i=b[0]+k,f=b[1]+g,h=b[0];if(l){return new Ext.util.Region(j,i,f,h)}else {return {left:h,top:j,width:k,height:g,right:i,bottom:f}}},isTransparent:function(c){var b=this.getStyle(c);return b?W.test(b):!1},purgeAllListeners:'clearListeners',removeAllListeners:'clearListeners',setHTML:'setHtml'}}}}},function(b){var e=document,y=e.documentElement,i=b.prototype,n=Ext.supports,o='pointerdown',p='pointermove',q='pointerup',r='pointercancel',s='MSPointerDown',t='MSPointerMove',u='MSPointerUp',v='MSPointerCancel',g='mousedown',h='mousemove',c='mouseup',w='mouseover',x='mouseout',A='mouseenter',B='mouseleave',j='touchstart',k='touchmove',l='touchend',m='touchcancel',E='click',D='dblclick',F='tap',C='doubletap',a=i.eventMap={},d=i.additiveEvents={},z=Ext.id,f;i._init(b);delete i._init;Ext.id=function(c,f){var d=c&&Ext.getDom(c,!0),e,a;if(!d){a=z(c,f)}else {if(!(a=d.id)){a=z(null,f||b.prototype.identifiablePrefix);if(Ext.isSandboxed){e=Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+'-');a=e+a}d.id=a}}return a};if(n.PointerEvents){a[g]=o;a[h]=p;a[c]=q;a[j]=o;a[k]=p;a[l]=q;a[m]=r;a[w]='pointerover';a[x]='pointerout';a[A]='pointerenter';if(!Ext.isIE11){a[B]='pointerleave'}}else {if(n.MSPointerEvents){a[o]=s;a[p]=t;a[q]=u;a[r]=v;a[g]=s;a[h]=t;a[c]=u;a[j]=s;a[k]=t;a[l]=u;a[m]=v;a[w]='MSPointerOver';a[x]='MSPointerOut'}else {if(n.TouchEvents){a[o]=j;a[p]=k;a[q]=l;a[r]=m;a[g]=j;a[h]=k;a[c]=l;a[E]=F;a[D]=C;if(Ext.os.is.Desktop){a[j]=g;a[k]=h;a[l]=c;a[m]=c;d[g]=g;d[h]=h;d[c]=c;d[j]=j;d[k]=k;d[l]=l;d[m]=m;d[o]=g;d[p]=h;d[q]=c;d[r]=c}}else {a[o]=g;a[p]=h;a[q]=c;a[r]=c;a[j]=g;a[k]=h;a[l]=c;a[m]=c}}}if(Ext.isWebKit){a.transitionend=Ext.browser.getVendorProperyName('transitionEnd');a.animationstart=Ext.browser.getVendorProperyName('animationStart');a.animationend=Ext.browser.getVendorProperyName('animationEnd')}if(!Ext.supports.MouseWheel&&!Ext.isOpera){a.mousewheel='DOMMouseScroll'}f=i.$eventOptions=Ext.Object.chain(i.$eventOptions);f.translate=f.capture=f.delegate=f.delegated=f.stopEvent=f.preventDefault=f.stopPropagation=f.element=1;i.styleHooks.opacity={name:'opacity',afterSet:function(e,c,d){var a=d.shadow;if(a){a.setOpacity(c)}}};i.getTrueXY=i.getXY;Ext.getViewportHeight=b.getViewportHeight;Ext.getViewportWidth=b.getViewportWidth;Ext.select=b.select;Ext.query=b.query;Ext.apply(Ext,{get:function(a){return b.get(a)},getDom:function(a){if(!a||!e){return null}return typeof a==='string'?Ext.getElementById(a):'dom' in a?a.dom:a},getBody:function(){if(!Ext._bodyEl){if(!e.body){throw new Error('[Ext.getBody] document.body does not yet exist')}Ext._bodyEl=Ext.get(e.body);Ext._bodyEl.skipGarbageCollection=!0}return Ext._bodyEl},getHead:function(){if(!Ext._headEl){Ext._headEl=Ext.get(e.head||e.getElementsByTagName('head')[0]);Ext._headEl.skipGarbageCollection=!0}return Ext._headEl},getDoc:function(){if(!Ext._docEl){Ext._docEl=Ext.get(e);Ext._docEl.skipGarbageCollection=!0}return Ext._docEl},getWin:function(){if(!Ext._winEl){Ext._winEl=Ext.get(window);Ext._winEl.skipGarbageCollection=!0}return Ext._winEl},removeNode:function(a){a=a.dom||a;var e=a&&a.id,d=Ext.cache[e],c;if(d){d.destroy()}else {if(a&&(a.nodeType===3||a.tagName.toUpperCase()!=='BODY')){c=a.parentNode;if(c){c.removeChild(a)}}}}});Ext.isGarbage=function(a){return a&&a.nodeType===1&&a.tagName!=='BODY'&&a.tagName!=='HTML'&&(!a.parentNode||a.offsetParent===null&&(Ext.isIE8?e.all[a.id]:e.getElementById(a.id))!==a&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(a)))};Ext.onInternalReady(function(){var a=[],c;Ext.getDoc().on('selectstart',function(h,a){var g=b.selectableCls,f=b.unselectableCls,c=a&&a.tagName,d=new Ext.dom.Fly();c=c&&c.toLowerCase();if(c==='input'||c==='textarea'){return}while(a&&a.nodeType===1&&a!==e.documentElement){d.attach(a);if(d.hasCls(g)){return}if(d.hasCls(f)){h.stopEvent();return}a=a.parentNode}});if(Ext.os.is.Android||Ext.os.is.Windows&&Ext.supports.Touch){var d=Ext.getWin();b._documentWidth=b._viewportWidth=y.clientWidth;b._documentHeight=b._viewportHeight=y.clientHeight;d.on({focusin:'_onWindowFocusChange',focusout:'_onWindowFocusChange',pointerup:'_onWindowFocusChange',capture:!0,delegated:!1,delay:1,scope:b});d.on({resize:'_onWindowResize',priority:2000,scope:b})}if(n.Touch){a.push(Ext.baseCSSPrefix+'touch')}if(Ext.isIE&&Ext.isIE9m){a.push(Ext.baseCSSPrefix+'ie',Ext.baseCSSPrefix+'ie9m');a.push(Ext.baseCSSPrefix+'ie8p');if(Ext.isIE8){a.push(Ext.baseCSSPrefix+'ie8')}else {a.push(Ext.baseCSSPrefix+'ie9',Ext.baseCSSPrefix+'ie9p')}if(Ext.isIE8m){a.push(Ext.baseCSSPrefix+'ie8m')}}if(Ext.isIE10){a.push(Ext.baseCSSPrefix+'ie10')}if(Ext.isIE10p){a.push(Ext.baseCSSPrefix+'ie10p')}if(Ext.isIE11){a.push(Ext.baseCSSPrefix+'ie11')}if(Ext.isEdge){a.push(Ext.baseCSSPrefix+'edge')}if(Ext.isGecko){a.push(Ext.baseCSSPrefix+'gecko')}if(Ext.isOpera){a.push(Ext.baseCSSPrefix+'opera')}if(Ext.isOpera12m){a.push(Ext.baseCSSPrefix+'opera12m')}if(Ext.isWebKit){a.push(Ext.baseCSSPrefix+'webkit')}if(Ext.isSafari){a.push(Ext.baseCSSPrefix+'safari')}if(Ext.isSafari9){a.push(Ext.baseCSSPrefix+'safari9')}if(Ext.isSafari10){a.push(Ext.baseCSSPrefix+'safari10')}if(Ext.isSafari){if(Ext.browser.version.isLessThan(11)){a.push(Ext.baseCSSPrefix+'safari10m')}if(Ext.browser.version.isLessThan(9)){a.push(Ext.baseCSSPrefix+'safari8m')}}if(Ext.isChrome){a.push(Ext.baseCSSPrefix+'chrome')}if(Ext.isChromeMobile){a.push(Ext.baseCSSPrefix+'chromemobile')}if(Ext.isMac){a.push(Ext.baseCSSPrefix+'mac')}if(Ext.isWindows){a.push(Ext.baseCSSPrefix+'windows')}if(Ext.isLinux){a.push(Ext.baseCSSPrefix+'linux')}if(!n.CSS3BorderRadius){a.push(Ext.baseCSSPrefix+'nbr')}if(!n.CSS3LinearGradient){a.push(Ext.baseCSSPrefix+'nlg')}if(n.Touch){a.push(Ext.baseCSSPrefix+'touch')}if(Ext.os.deviceType){a.push(Ext.baseCSSPrefix+Ext.os.deviceType.toLowerCase())}if(Ext.os.is.BlackBerry){a.push(Ext.baseCSSPrefix+'bb');if(Ext.browser.userAgent.match(/Kbd/gi)){a.push(Ext.baseCSSPrefix+'bb-keyboard')}}if(Ext.os.is.iOS&&Ext.isSafari){a.push(Ext.baseCSSPrefix+'mobile-safari')}if(Ext.os.is.iOS&&Ext.browser.is.WebView&&!Ext.browser.is.Standalone){a.push(Ext.baseCSSPrefix+'ios-native')}if(Ext.supports.FlexBoxBasisBug){a.push(Ext.baseCSSPrefix+'has-flexbasis-bug')}Ext.getBody().addCls(a);c=Ext.theme;if(c&&c.getDocCls){Ext.fly(document.documentElement).addCls(c.getDocCls())}},null,{priority:1500})});Ext.define('Ext.util.BasicFilter',{isFilter:!0,config:{id:null,disabled:!1,serializer:null},generation:0,constructor:function(a){this.initConfig(a)},updateDisabled:function(){if(!this.isConfiguring){++this.generation}}});Ext.define('Ext.util.Filter',{extend:Ext.util.BasicFilter,config:{property:null,root:null,value:null,filterFn:null,anyMatch:!1,exactMatch:!1,caseSensitive:!1,disableOnEmpty:!1,operator:null,convert:null},scope:null,$configStrict:!1,statics:{createFilterFn:function(a){if(!a){return Ext.returnTrue}return function(f){var e=a.isCollection?a.items:a,g=e.length,d=!0,b,c;for(b=0;d&&b<g;b++){c=e[b];if(!c.getDisabled()){d=c.filter(f)}}return d}},isEqual:function(a,b){if(a.getProperty()!==b.getProperty()){return !1}if(a.getOperator()!==b.getOperator()){return !1}if(a.getValue()===b.getValue()){return !0}if(Ext.isArray(a)&&Ext.isArray(b)){return Ext.Array.equals(a,b)}return !1},isInvalid:function(a){if(!a.filterFn){if(!a.property){return 'A Filter requires either a property or a filterFn to be set'}if(!a.hasOwnProperty('value')&&!a.operator){return 'A Filter requires either a property and value, or a filterFn to be set'}}return !1}},preventConvert:{'in':1,notin:1},filter:function(e){var a=this,d=a._filterFn||a.getFilterFn(),c=a.getConvert(),b=a._value;a._filterValue=b;a.isDateValue=Ext.isDate(b);if(a.isDateValue){a.dateValue=b.getTime()}if(c&&!a.preventConvert[a.getOperator()]){a._filterValue=c.call(a.scope||a,b)}return d.call(a.scope||a,e)},getId:function(){var b=this,a=b._id;if(!a){a=b.getProperty();if(!a){a=Ext.id(null,'ext-filter-')}b._id=a}return a},getFilterFn:function(){var a=this,b=a._filterFn,c;if(!b){c=a.getOperator();if(c){b=a.operatorFns[c]}else {b=a.createRegexFilter()}a._filterFn=b;a.generatedFilterFn=!0}return b},createRegexFilter:function(){var a=this,b=!!a.getAnyMatch(),d=!!a.getExactMatch(),e=a.getValue(),c=Ext.String.createRegex(e,!b,!b&&d,!a.getCaseSensitive());return function(d){var b=a.getPropertyValue(d);return c?c.test(b):b==null}},getPropertyValue:function(a){var b=this._root,c=b==null?a:a[b];return c[this._property]},getState:function(){var c=this.getInitialConfig(),a={},b;for(b in c){if(c.hasOwnProperty(b)){a[b]=c[b]}}delete a.root;a.value=this.getValue();return a},getScope:function(){return this.scope},serialize:function(){var a=this.getState(),c=this.getSerializer(),b;delete a.id;delete a.serializer;if(c){b=c.call(this,a);if(b){a=b}}return a},serializeTo:function(d){var a=this,c,b;a.getFilterFn();if(a.generatedFilterFn){d.push(b=a.serialize());c=a.primitiveRe.test(typeof b)}return !c},updateOperator:function(){this.onConfigMutation()},updateConvert:function(){this.onConfigMutation()},updateProperty:function(){this.onConfigMutation()},updateAnyMatch:function(){this.onConfigMutation()},updateExactMatch:function(){this.onConfigMutation()},updateCaseSensitive:function(){this.onConfigMutation()},updateValue:function(a){this.onConfigMutation();if(this.getDisableOnEmpty()){this.setDisabled(Ext.isEmpty(a))}},updateFilterFn:function(a){delete this.generatedFilterFn},onConfigMutation:function(){this.generation++;if(this.generatedFilterFn){this._filterFn=null}},updateDisableOnEmpty:function(a){if(a){this.setDisabled(Ext.isEmpty(this.getValue()))}},privates:{primitiveRe:/string|number|boolean/,getCandidateValue:function(e,f,d){var b=this,c=b._convert,a=b.getPropertyValue(e);if(c){a=c.call(b.scope||b,a)}else {if(!d){a=Ext.coerce(a,f)}}return a}}},function(c){var b=c.prototype,a=b.operatorFns={'<':function(b){var a=this._filterValue;return this.getCandidateValue(b,a)<a},'<=':function(b){var a=this._filterValue;return this.getCandidateValue(b,a)<=a},'=':function(a){var b=this,d=b._filterValue;a=b.getCandidateValue(a,d);if(b.isDateValue&&a instanceof Date){a=a.getTime();d=b.dateValue}return a==d},'===':function(a){var b=this,d=b._filterValue;a=b.getCandidateValue(a,d,!0);if(b.isDateValue&&a instanceof Date){a=a.getTime();d=b.dateValue}return a===d},'>=':function(b){var a=this._filterValue;return this.getCandidateValue(b,a)>=a},'>':function(b){var a=this._filterValue;return this.getCandidateValue(b,a)>a},'!=':function(a){var b=this,d=b._filterValue;a=b.getCandidateValue(a,d);if(b.isDateValue&&a instanceof Date){a=a.getTime();d=b.dateValue}return a!=d},'!==':function(a){var b=this,d=b._filterValue;a=b.getCandidateValue(a,d,!0);if(b.isDateValue&&a instanceof Date){a=a.getTime();d=b.dateValue}return a!==d},'in':function(b){var a=this._filterValue;return Ext.Array.contains(a,this.getCandidateValue(b,a))},notin:function(b){var a=this._filterValue;return !Ext.Array.contains(a,this.getCandidateValue(b,a))},like:function(b){var a=this._filterValue;return a&&this.getCandidateValue(b,a).toLowerCase().indexOf(a.toLowerCase())>-1},'/=':function(d){var a=this,b=a._filterValue;d=a.getCandidateValue(d,b);if(b!==a.lastRegExpSource){a.lastRegExpSource=b;try{a.regex=new RegExp(b,'i')}catch(e){a.regex=null}}return a.regex?a.regex.test(d):!1}};a['==']=a['='];a.gt=a['>'];a.ge=a['>='];a.lt=a['<'];a.le=a['<='];a.eq=a['='];a.ne=a['!=']});Ext.define('Ext.util.Observable',{extend:Ext.mixin.Observable,$applyConfigs:!0},function(a){var b=Ext.mixin.Observable;a.releaseCapture=b.releaseCapture;a.capture=b.capture;a.captureArgs=b.captureArgs;a.observe=a.observeClass=b.observe});Ext.define('Ext.util.AbstractMixedCollection',{mixins:{observable:Ext.util.Observable},isMixedCollection:!0,generation:0,indexGeneration:0,constructor:function(b,c){var a=this;if(arguments.length===1&&Ext.isObject(b)){a.initialConfig=b;Ext.apply(a,b)}else {a.allowFunctions=b===!0;if(c){a.getKey=c}a.initialConfig={allowFunctions:a.allowFunctions,getKey:a.getKey}}a.items=[];a.map={};a.keys=[];a.indexMap={};a.length=0;a.mixins.observable.constructor.call(a)},destroy:function(){var a=this;a.items=a.map=a.keys=a.indexMap=null;a.callParent()},allowFunctions:!1,add:function(b,d){var c=this.length,a;if(arguments.length===1){a=this.insert(c,b)}else {a=this.insert(c,b,d)}return a},getKey:function(a){return a.id},replace:function(b,c){var a=this,d,e;if(arguments.length===1){c=arguments[0];b=a.getKey(c)}d=a.map[b];if(typeof b==='undefined'||b===null||typeof d==='undefined'){return a.add(b,c)}a.generation++;e=a.indexOfKey(b);a.items[e]=c;a.map[b]=c;if(a.hasListeners.replace){a.fireEvent('replace',b,d,c)}return c},reorder:function(e){var b=this,f=b.items,a=0,h=f.length,c=[],g=[],d;b.suspendEvents();for(d in e){c[e[d]]=f[d]}for(a=0;a<h;a++){if(e[a]==undefined){g.push(f[a])}}for(a=0;a<h;a++){if(c[a]==undefined){c[a]=g.shift()}}b.clear();b.addAll(c);b.resumeEvents()},updateKey:function(b,c){var a=this,e=a.map,d=a.indexOfKey(b),f=a.indexMap,g;if(d>-1){g=e[b];delete e[b];delete f[b];e[c]=g;f[c]=d;a.keys[d]=c;a.indexGeneration=++a.generation}},addAll:function(a){var c=this,b;if(arguments.length>1||Ext.isArray(a)){c.insert(c.length,arguments.length>1?arguments:a)}else {for(b in a){if(a.hasOwnProperty(b)){if(c.allowFunctions||typeof a[b]!=='function'){c.add(b,a[b])}}}}},each:function(f,e){var c=Ext.Array.push([],this.items),a=0,d=c.length,b;for(;a<d;a++){b=c[a];if(f.call(e||b,b,a,d)===!1){break}}},eachKey:function(f,e){var b=this.keys,d=this.items,a=0,c=b.length;for(;a<c;a++){f.call(e||window,b[a],d[a],a,c)}},findBy:function(f,c){var d=this.keys,b=this.items,a=0,e=b.length;for(;a<e;a++){if(f.call(c||window,b[a],d[a])){return b[a]}}return null},insert:function(c,b,d){var a;if(Ext.isIterable(b)){a=this.doInsert(c,b,d)}else {if(arguments.length>2){a=this.doInsert(c,[b],[d])}else {a=this.doInsert(c,[b])}a=a[0]}return a},doInsert:function(f,e,d){var b=this,c,i,a,g=e.length,j=g,o=b.hasListeners.add,k,h={},l,n,m;if(d!=null){b.useLinearSearch=!0}else {d=e;e=new Array(g);for(a=0;a<g;a++){e[a]=this.getKey(d[a])}}b.suspendEvents();for(a=0;a<g;a++){c=e[a];i=b.indexOfKey(c);if(i!==-1){if(i<f){f--}b.removeAt(i)}if(c!=null){if(h[c]!=null){l=!0;j--}h[c]=a}}b.resumeEvents();if(l){n=e;m=d;e=new Array(j);d=new Array(j);a=0;for(c in h){e[a]=n[h[c]];d[a]=m[h[c]];a++}g=j}k=f===b.length&&b.indexGeneration===b.generation;Ext.Array.insert(b.items,f,d);Ext.Array.insert(b.keys,f,e);b.length+=g;b.generation++;if(k){b.indexGeneration=b.generation}for(a=0;a<g;a++,f++){c=e[a];if(c!=null){b.map[c]=d[a];if(k){b.indexMap[c]=f}}if(o){b.fireEvent('add',f,d[a],c)}}return d},remove:function(d){var a=this,c,b;if(!a.useLinearSearch&&(c=a.getKey(d))){b=a.indexOfKey(c)}else {b=Ext.Array.indexOf(a.items,d)}return b===-1?!1:a.removeAt(b)},removeAll:function(b){var a=this,c;if(b||a.hasListeners.remove){if(b){for(c=b.length-1;c>=0;--c){a.remove(b[c])}}else {while(a.length){a.removeAt(0)}}}else {a.length=a.items.length=a.keys.length=0;a.map={};a.indexMap={};a.generation++;a.indexGeneration=a.generation}},removeAt:function(b){var a=this,d,c;if(b<a.length&&b>=0){a.length--;d=a.items[b];Ext.Array.erase(a.items,b,1);c=a.keys[b];if(typeof c!=='undefined'){delete a.map[c]}Ext.Array.erase(a.keys,b,1);if(a.hasListeners.remove){a.fireEvent('remove',d,c)}a.generation++;return d}return !1},removeRange:function(c,b){var a=this,i,f,d,e,g,h;if(c<a.length&&c>=0){if(!b){b=1}e=Math.min(c+b,a.length);b=e-c;h=e===a.length;g=h&&a.indexGeneration===a.generation;for(d=c;d<e;d++){f=a.keys[d];if(f!=null){delete a.map[f];if(g){delete a.indexMap[f]}}}i=a.items[d-1];a.length-=b;a.generation++;if(g){a.indexGeneration=a.generation}if(h){a.items.length=a.keys.length=a.length}else {a.items.splice(c,b);a.keys.splice(c,b)}return i}return !1},removeAtKey:function(d){var b=this,c=b.keys,a;if(d==null){for(a=c.length-1;a>=0;a--){if(c[a]==null){b.removeAt(a)}}}else {return b.removeAt(b.indexOfKey(d))}},getCount:function(){return this.length},indexOf:function(b){var a=this,c;if(b!=null){if(!a.useLinearSearch&&(c=a.getKey(b))){return this.indexOfKey(c)}return Ext.Array.indexOf(a.items,b)}return -1},indexOfKey:function(a){if(!this.map.hasOwnProperty(a)){return -1}if(this.indexGeneration!==this.generation){this.rebuildIndexMap()}return this.indexMap[a]},rebuildIndexMap:function(){var b=this,d=b.indexMap={},c=b.keys,e=c.length,a;for(a=0;a<e;a++){d[c[a]]=a}b.indexGeneration=b.generation},get:function(a){var b=this,d=b.map[a],c=d!==undefined?d:typeof a==='number'?b.items[a]:undefined;return typeof c!=='function'||b.allowFunctions?c:null},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:function(a){var c=this,b;if(a!=null){if(!c.useLinearSearch&&(b=c.getKey(a))){return this.map[b]!=null}return Ext.Array.indexOf(this.items,a)!==-1}return !1},containsKey:function(a){return this.map.hasOwnProperty(a)},clear:function(){var a=this;if(a.generation){a.length=0;a.items=[];a.keys=[];a.map={};a.indexMap={};a.generation++;a.indexGeneration=a.generation}if(a.hasListeners.clear){a.fireEvent('clear')}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(f,h,c,a){var d=this.extractValues(f,h),g=d.length,e=0,b;c=c||0;a=a||a===0?a:g-1;for(b=c;b<=a;b++){e+=d[b]}return e},collect:function(h,j,g){var e=this.extractValues(h,j),i=e.length,f={},d=[],a,c,b;for(b=0;b<i;b++){a=e[b];c=String(a);if((g||!Ext.isEmpty(a))&&!f[c]){f[c]=!0;d.push(a)}}return d},extractValues:function(c,b){var a=this.items;if(b){a=Ext.Array.pluck(a,b)}return Ext.Array.pluck(a,c)},hasRange:function(b,a){return a<this.length},getRange:function(b,a){var h=this,f=h.items,c=[],d=f.length,g,e;if(d<1){return c}if(b>a){e=!0;g=b;b=a;a=g}if(b<0){b=0}if(a==null||a>=d){a=d-1}c=f.slice(b,a+1);if(e&&c.length){c.reverse()}return c},filter:function(a,e,d,c){var b=[];if(Ext.isString(a)){b.push(new Ext.util.Filter({property:a,value:e,anyMatch:d,caseSensitive:c}))}else {if(Ext.isArray(a)||a instanceof Ext.util.Filter){b=b.concat(a)}}return this.filterBy(Ext.util.Filter.createFilterFn(b))},filterBy:function(h,g){var a=this,c=new a.self(a.initialConfig),e=a.keys,d=a.items,f=d.length,b;c.getKey=a.getKey;for(b=0;b<f;b++){if(h.call(g||a,d[b],e[b])){c.add(e[b],d[b])}}c.useLinearSearch=a.useLinearSearch;return c},findIndex:function(d,a,e,c,b){if(Ext.isEmpty(a,!1)){return -1}a=this.createValueMatcher(a,c,b);return this.findIndexBy(function(f){return f&&a.test(f[d])},null,e)},findIndexBy:function(h,d,e){var b=this,f=b.keys,c=b.items,a=e||0,g=c.length;for(;a<g;a++){if(h.call(d||b,c[a],f[a])){return a}}return -1},createValueMatcher:function(a,e,c,d){var b;if(!a.exec){b=Ext.String.escapeRegex;a=String(a);if(e===!0){a=b(a)}else {a='^'+b(a);if(d===!0){a+='$'}}a=new RegExp(a,c?'':'i')}return a},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.keys,a.items);b.useLinearSearch=a.useLinearSearch;return b}});Ext.define('Ext.util.Sorter',{isSorter:!0,config:{property:null,sorterFn:null,root:null,transform:null,direction:'ASC',id:undefined},statics:{createComparator:function(b,a){a=a||0;return function(f,g){var e=b.isCollection?b.items:b,h=e.length,d,c;for(c=0;c<h;++c){d=e[c].sort(f,g);if(d){return d}}return a&&a(f,g)}}},multiplier:1,constructor:function(a){this.initConfig(a)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,'ext-sorter-')}this._id=a}return a},sort:function(a,b){return this.multiplier*this.sortFn(a,b)},sortFn:function(d,e){var g=this,c=g._transform,f=g._root,h=g._property,a,b;if(f){d=d[f];e=e[f]}a=d[h];b=e[h];if(c){a=c(a);b=c(b)}return a>b?1:a<b?-1:0},applyDirection:function(a){return a?a:'ASC'},updateDirection:function(a){this.multiplier=a.toUpperCase()==='DESC'?-1:1},updateProperty:function(a){if(a){delete this.sortFn}},updateSorterFn:function(a){this.sortFn=a},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),'ASC','DESC'))},getState:function(){var a=this,b={root:a.getRoot(),property:a.getProperty(),direction:a.getDirection()};if(a._id){b.id=a._id}return b},serialize:function(){return {property:this.getProperty(),direction:this.getDirection()}}});Ext.define('Ext.util.Sortable',{isSortable:!0,$configPrefixed:!1,$configStrict:!1,config:{sorters:null},defaultSortDirection:'ASC',multiSortLimit:3,statics:{createComparator:function(a){return a&&a.length?function(d,e){var c=a[0].sort(d,e),f=a.length,b=1;for(;!c&&b<f;b++){c=a[b].sort.call(a[b],d,e)}return c}:function(){return 0}}},applySorters:function(b){var c=this,a;a=c.getSorters()||new Ext.util.MixedCollection(!1,Ext.returnId);if(b){a.addAll(c.decodeSorters(b))}return a},sort:function(a,f,e,h){var b=this,d,g,c=b.getSorters();if(!c){b.setSorters(null);c=b.getSorters()}if(Ext.isArray(a)){h=e;e=f}else {if(Ext.isObject(a)){a=[a];h=e;e=f}else {if(Ext.isString(a)){d=c.get(a);if(!d){d={property:a,direction:f}}else {if(f==null){d.toggle()}else {d.setDirection(f)}}a=[d]}}}if(a&&a.length){a=b.decodeSorters(a);switch(e){case 'multi':c.insert(0,a[0]);g=c.getCount()-b.multiSortLimit;if(g>0){c.removeRange(b.multiSortLimit,g)};break;case 'prepend':c.insert(0,a);break;case 'append':c.addAll(a);break;case undefined:case null:case 'replace':c.clear();c.addAll(a);break;default:}}if(h!==!1){b.fireEvent('beforesort',b,a);b.onBeforeSort(a);if(b.getSorterCount()){b.doSort(b.generateComparator())}}return a},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var a=this.getSorters().getRange();return a.length?this.createComparator(a):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(b){if(!Ext.isArray(b)){if(b===undefined){b=[]}else {b=[b]}}var g=b.length,f=Ext.util.Sorter,e=this.getModel?this.getModel():this.model,d,a,c;for(c=0;c<g;c++){a=b[c];if(!(a instanceof f)){if(Ext.isString(a)){a={property:a}}Ext.applyIf(a,{root:this.sortRoot,direction:'ASC'});if(a.fn){a.sorterFn=a.fn}if(typeof a==='function'){a={sorterFn:a}}if(e&&!a.transform){d=e.getField(a.property);a.transform=d&&d.sortType!==Ext.identityFn?d.sortType:undefined}b[c]=new Ext.util.Sorter(a)}}return b},getFirstSorter:function(){var c=this.getSorters().items,d=c.length,b=0,a;for(;b<d;++b){a=c[b];if(!a.isGrouper){return a}}return null}},function(){this.prototype.createComparator=this.createComparator});Ext.define('Ext.util.MixedCollection',{extend:Ext.util.AbstractMixedCollection,mixins:{sortable:Ext.util.Sortable},constructor:function(){this.initConfig();this.callParent(arguments)},doSort:function(a){this.sortBy(a)},_sort:function(h,j,g){var b=this,a,d,k=String(j).toUpperCase()==='DESC'?-1:1,c=[],i=b.keys,f=b.items,e;g=g||function(a,b){return a-b};for(a=0,d=f.length;a<d;a++){c[c.length]={key:i[a],value:f[a],index:a}}Ext.Array.sort(c,function(a,b){return g(a[h],b[h])*k||(a.index<b.index?-1:1)});for(a=0,d=c.length;a<d;a++){e=c[a];f[a]=e.value;i[a]=e.key;b.indexMap[e.key]=a}b.generation++;b.indexGeneration=b.generation;b.fireEvent('sort',b)},sortBy:function(h){var b=this,c=b.items,d,g=b.keys,e,f=c.length,a;for(a=0;a<f;a++){c[a].$extCollectionIndex=a}Ext.Array.sort(c,function(a,b){return h(a,b)||(a.$extCollectionIndex<b.$extCollectionIndex?-1:1)});for(a=0;a<f;a++){d=c[a];e=b.getKey(d);g[a]=e;b.indexMap[e]=a;delete d.$extCollectionIndex}b.generation++;b.indexGeneration=b.generation;b.fireEvent('sort',b,c,g)},findInsertionIndex:function(h,d){var g=this,f=g.items,b=0,e=f.length-1,a,c;if(!d){d=g.generateComparator()}while(b<=e){a=b+e>>1;c=d(h,f[a]);if(c>=0){b=a+1}else {if(c<0){e=a-1}}}return b},reorder:function(a){this.callParent([a]);this.fireEvent('sort',this)},sortByKey:function(a,b){this._sort('key',a,b||function(e,f){var c=String(e).toUpperCase(),d=String(f).toUpperCase();return c>d?1:c<d?-1:0})}});Ext.define('Ext.util.TaskRunner',{fireIdleEvent:null,interval:10,timerId:null,constructor:function(b){var a=this;if(typeof b==='number'){a.interval=b}else {if(b){Ext.apply(a,b)}}a.tasks=[];a.timerFn=a.onTick.bind(a)},newTask:function(b){var a=new Ext.util.TaskRunner.Task(b);a.manager=this;return a},start:function(a){var b=this,c=Ext.Date.now();if(!a.pending){b.tasks.push(a);a.pending=!0}a.stopped=!1;a.taskStartTime=c;a.taskRunTime=a.fireOnStart!==!1?0:a.taskStartTime;a.taskRunCount=0;if(!b.firing){if(a.fireOnStart!==!1){b.startTimer(0,c)}else {b.startTimer(a.interval,c)}}return a},stop:function(a,f){var e=this,d=e.tasks,c=0,b;if(!a.stopped){a.stopped=!0;a.pending=!1;if(a.onStop){a.onStop.call(a.scope||a,a)}}if(f){Ext.Array.remove(d,a)}for(b=0;!c&&b<d.length;b++){if(!d[b].stopped){c++}}if(!c){Ext.undefer(e.timerId);e.timerId=null}return a},stopAll:function(a){var b=this;Ext.each(this.tasks,function(c){b.stop(c,a)},null,!0)},firing:!1,nextExpires:1.0E99,onTick:function(){var b=this,i=b.tasks,f=b.fireIdleEvent,h=Ext.Date.now(),k=1.0E99,m=i.length,g,c,e,a,j,d,l;b.timerId=null;b.firing=!0;for(e=0;e<m||e<(m=i.length);++e){a=i[e];if(!(d=a.stopped)){g=a.taskRunTime+a.interval;if(g<=h){j=1;if(f===null&&a.fireIdleEvent!==!1){f=!0}a.taskRunCount++;if(a.args){l=a.addCountToArgs?a.args.concat([a.taskRunCount]):a.args}else {l=[a.taskRunCount]}try{j=a.run.apply(a.scope||a,l)}catch(n){try{if(a.onError){j=a.onError.call(a.scope||a,a,n)}}catch(o){}}a.taskRunTime=h;if(j===!1||a.taskRunCount===a.repeat){b.stop(a);d=!0}else {d=a.stopped;g=h+a.interval}}if(!d&&a.duration&&a.duration<=h-a.taskStartTime){b.stop(a);d=!0}}if(d){a.pending=!1;if(!c){c=i.slice(0,e)}}else {if(c){c.push(a)}if(k>g){k=g}}}if(c){b.tasks=c}b.firing=!1;if(b.tasks.length){b.startTimer(k-h,Ext.Date.now())}if(f===null){f=!1}Ext._suppressIdle=!f},startTimer:function(b,e){var a=this,d=e+b,c=a.timerId;if(c&&a.nextExpires-d>a.interval){c=Ext.undefer(c)}if(!c){if(b<a.interval){b=a.interval}a.timerId=Ext.defer(a.timerFn,b);a.nextExpires=d}}},function(){var b=this,a=b.prototype;a.destroy=a.stopAll;b.Task=new Ext.Class({isTask:!0,stopped:!0,fireOnStart:!1,constructor:function(a){Ext.apply(this,a)},restart:function(a){if(a!==undefined){this.interval=a}this.manager.start(this)},start:function(a){if(this.stopped){this.restart(a)}},stop:function(a){this.manager.stop(this,a)},destroy:function(){this.stop(!0)}});a=b.Task.prototype;a.destroy=a.stop});Ext.define('Ext.fx.target.Target',{isAnimTarget:!0,constructor:function(a){this.target=a;this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}});Ext.define('Ext.fx.target.Element',{extend:Ext.fx.target.Target,type:'element',constructor:function(a){this.callParent([a]);this.isAbsoluteOnPage=this.target.dom.parentNode===document.body&&this.target.isStyle('position','absolute')},getElVal:function(c,b,a){if(a===undefined){if(b==='x'){a=c.getX()}else {if(b==='y'){a=c.getY()}else {if(b==='scrollTop'){a=c.getScroll().top}else {if(b==='scrollLeft'){a=c.getScroll().left}else {if(b==='height'){a=c.getHeight()}else {if(b==='width'){a=c.getWidth()}else {a=c.getStyle(b)}}}}}}}return a},getAttr:function(b,c){var a=this.target;return [[a,this.getElVal(a,b,c)]]},setAttr:function(f){var h=f.length,a,b,e,c,d,g;for(c=0;c<h;c++){a=f[c].attrs;for(b in a){if(a.hasOwnProperty(b)){g=a[b].length;for(d=0;d<g;d++){e=a[b][d];this.setElVal(e[0],b,e[1])}}}}},setElVal:function(a,c,b){if(c==='x'){if(this.isAbsoluteOnPage){a.setLocalX(b)}else {a.setXY([b,null])}}else {if(c==='y'){if(this.isAbsoluteOnPage){a.setLocalY(b)}else {a.setXY([null,b])}}else {if(c==='scrollTop'){a.scrollTo('top',b)}else {if(c==='scrollLeft'){a.scrollTo('left',b)}else {if(c==='width'){a.setWidth(b)}else {if(c==='height'){a.setHeight(b)}else {a.setStyle(c,b)}}}}}}}});Ext.define('Ext.fx.target.ElementCSS',{extend:Ext.fx.target.Element,setAttr:function(j,f){var d={attrs:[],duration:[],easing:[]},m=j.length,n=function(){this.setStyle(Ext.supports.CSS3Prefix+'TransitionProperty',null);this.setStyle(Ext.supports.CSS3Prefix+'TransitionDuration',null);this.setStyle(Ext.supports.CSS3Prefix+'TransitionTimingFunction',null)},o={single:!0},k,a,e,h,g,b,c,i,l;for(c=0;c<m;c++){a=j[c];g=a.duration;h=a.easing;a=a.attrs;for(e in a){if(Ext.Array.indexOf(d.attrs,e)===-1){d.attrs.push(e.replace(/[A-Z]/g,function(a){return '-'+a.toLowerCase()}));d.duration.push(g+'ms');d.easing.push(h)}}}k=d.attrs.join(',');g=d.duration.join(',');h=d.easing.join(', ');for(c=0;c<m;c++){a=j[c].attrs;for(e in a){l=a[e].length;for(i=0;i<l;i++){b=a[e][i];b[0].setStyle(Ext.supports.CSS3Prefix+'TransitionProperty',f?'':k);b[0].setStyle(Ext.supports.CSS3Prefix+'TransitionDuration',f?'':g);b[0].setStyle(Ext.supports.CSS3Prefix+'TransitionTimingFunction',f?'':h);b[0].setStyle(e,b[1]);if(f){b=b[0].dom.offsetWidth}else {b[0].on(Ext.supports.CSS3TransitionEnd,n,b[0],o)}}}}}});Ext.define('Ext.fx.target.CompositeElement',{extend:Ext.fx.target.Element,isComposite:!0,constructor:function(a){a.id=a.id||Ext.id(null,'ext-composite-');this.callParent([a])},getAttr:function(g,h){var e=[],d=this.target,c=d.elements,f=c.length,b,a;for(b=0;b<f;b++){a=c[b];if(a){a=d.getElement(a);e.push([a,this.getElVal(a,g,h)])}}return e},setAttr:function(g){var i=this.target,m=g.length,h=i.elements,l=h.length,j,f,a,b,c,d,e,k;for(d=0;d<m;d++){a=g[d].attrs;for(b in a){if(a.hasOwnProperty(b)){k=a[b].length;for(e=0;e<k;e++){j=a[b][e][1];for(f=0;f<l;++f){c=h[f];if(c){c=i.getElement(c);this.setElVal(c,b,j)}}}}}}},remove:function(){this.target.destroy()}});Ext.define('Ext.fx.target.CompositeElementCSS',{extend:Ext.fx.target.CompositeElement,setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}});Ext.define('Ext.fx.target.Sprite',{extend:Ext.fx.target.Target,type:'draw',getFromPrim:function(b,c){var a;switch(c){case 'rotate':case 'rotation':a=b.attr.rotation;return {x:a.x||0,y:a.y||0,degrees:a.degrees||0};case 'scale':case 'scaling':a=b.attr.scaling;return {x:a.x||1,y:a.y||1,cx:a.cx||0,cy:a.cy||0};case 'translate':case 'translation':a=b.attr.translation;return {x:a.x||0,y:a.y||0};default:return b.attr[c];}},getAttr:function(b,a){return [[this.target,a!==undefined?a:this.getFromPrim(this.target,b)]]},setAttr:function(n){var m=n.length,f=[],k,a,i,b,l,j,g,c,h,d,e,o;for(c=0;c<m;c++){k=n[c].attrs;for(a in k){i=k[a];o=i.length;for(h=0;h<o;h++){l=i[h][0];b=i[h][1];if(a==='translate'||a==='translation'){g={x:b.x,y:b.y}}else {if(a==='rotate'||a==='rotation'){d=b.x;if(isNaN(d)){d=null}e=b.y;if(isNaN(e)){e=null}g={degrees:b.degrees,x:d,y:e}}else {if(a==='scale'||a==='scaling'){d=b.x;if(isNaN(d)){d=null}e=b.y;if(isNaN(e)){e=null}g={x:d,y:e,cx:b.cx,cy:b.cy}}else {if(a==='width'||a==='height'||a==='x'||a==='y'){g=parseFloat(b)}else {g=b}}}}j=Ext.Array.indexOf(f,l);if(j===-1){f.push([l,{}]);j=f.length-1}f[j][1][a]=g}}}m=f.length;for(c=0;c<m;c++){f[c][0].setAttributes(f[c][1])}this.target.redraw()}});Ext.define('Ext.fx.target.CompositeSprite',{extend:Ext.fx.target.Sprite,getAttr:function(g,e){var d=[],c=[].concat(this.target.items),f=c.length,a,b;for(a=0;a<f;a++){b=c[a];d.push([b,e!==undefined?e:this.getFromPrim(b,g)])}return d}});Ext.define('Ext.fx.target.Component',{extend:Ext.fx.target.Target,type:'component',getPropMethod:{top:function(){return this.getPosition(!0)[1]},left:function(){return this.getPosition(!0)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle('opacity')}},setMethods:{top:'setPosition',left:'setPosition',x:'setPagePosition',y:'setPagePosition',height:'setSize',width:'setSize',opacity:'setOpacity'},getAttr:function(b,a){return [[this.target,a!==undefined?a:this.getPropMethod[b].call(this.target)]]},setAttr:function(k,q,o){var h=this,p=k.length,d,c,a,e,f,l,m,n,j,i,b={},g;for(e=0;e<p;e++){d=k[e].attrs;for(c in d){l=d[c].length;for(f=0;f<l;f++){a=d[c][f];g=b[h.setMethods[c]]||(b[h.setMethods[c]]={});g.target=a[0];g[c]=a[1]}}if(b.setPosition){a=b.setPosition;m=a.left===undefined?undefined:parseFloat(a.left);n=a.top===undefined?undefined:parseFloat(a.top);a.target.setPosition(m,n)}if(b.setPagePosition){a=b.setPagePosition;a.target.setPagePosition(a.x,a.y)}if(b.setSize){a=b.setSize;j=a.width===undefined?a.target.getWidth():parseFloat(a.width);i=a.height===undefined?a.target.getHeight():parseFloat(a.height);a.target.el.setSize(j,i);if(o||h.dynamic){Ext.GlobalEvents.on({idle:Ext.Function.bind(a.target.setSize,a.target,[j,i]),single:!0})}}if(b.setOpacity){a=b.setOpacity;a.target.el.setStyle('opacity',a.opacity)}}}});Ext.define('Ext.fx.Queue',{constructor:function(){this.targets=new Ext.util.HashMap();this.fxQueue={}},getFxDefaults:function(b){var a=this.targets.get(b);if(a){return a.fxDefaults}return {}},setFxDefaults:function(b,c){var a=this.targets.get(b);if(a){a.fxDefaults=Ext.apply(a.fxDefaults||{},c)}},stopAnimation:function(e,d){var f=this,c=f.getFxQueue(e),b=c.length,a;while(b){a=c[b-1];if(a){a.end(d)}b--}},getActiveAnimation:function(b){var a=this.getFxQueue(b);return a&&!!a.length?a[0]:!1},hasFxBlock:function(b){var a=this.getFxQueue(b);return a&&a[0]&&a[0].block},getFxQueue:function(a){if(!a){return !1}var c=this,b=c.fxQueue,e=b[a],d=c.targets.get(a);if(!d){return !1}if(!e){c.fxQueue[a]=b[a]=[];if(d.type!=='element'){d.target.on('destroy',function(){b[a]=null;delete b[a]})}}return c.fxQueue[a]},clearFxQueue:function(){Ext.Object.clear(this.fxQueue)},queueFx:function(a){var c=this,e=a.target,d=e.getId(),b,f;if(!e){return}b=c.getFxQueue(d);f=b.length;if(f){if(a.concurrent){a.paused=!1}else {b[f-1].on('afteranimate',function(){a.paused=!1})}}else {a.paused=!1}a.on('afteranimate',function(){var f;Ext.Array.remove(b,a);if(b.length===0){c.targets.remove(a.target);c.fxQueue[d]=null;delete c.fxQueue[d]}if(a.remove){if(e.type==='element'){f=Ext.get(d);if(f){f.destroy()}}}},c,{single:!0});b.push(a)}});Ext.define('Ext.fx.Manager',{singleton:!0,mixins:{queue:Ext.fx.Queue},constructor:function(){var a=this;a.items=new Ext.util.MixedCollection();a.targetArr={};a.mixins.queue.constructor.call(a);a.taskRunner=new Ext.util.TaskRunner()},interval:16,forceJS:!0,createTarget:function(a){var d=this,c=!d.forceJS&&Ext.supports.Transitions,b;d.useCSS3=c;if(a){if(a.tagName||Ext.isString(a)||a.isFly){a=Ext.get(a);b=new Ext.fx.target['Element'+(c?'CSS':'')](a)}else {if(a.dom){b=new Ext.fx.target['Element'+(c?'CSS':'')](a)}else {if(a.isComposite){b=new Ext.fx.target['CompositeElement'+(c?'CSS':'')](a)}else {if(a.isSprite){b=new Ext.fx.target.Sprite(a)}else {if(a.isCompositeSprite){b=new Ext.fx.target.CompositeSprite(a)}else {if(a.isComponent){b=new Ext.fx.target.Component(a)}else {if(a.isAnimTarget){return a}else {return null}}}}}}}d.targets.add(b);return b}else {return null}},addAnim:function(d){var a=this,c=a.items,b=a.task;c.add(d.id,d);if(!b&&c.length){b=a.task={run:a.runner,interval:a.interval,scope:a};a.taskRunner.start(b)}},removeAnim:function(d){var a=this,b=a.items,c=a.task;b.removeAtKey(d.id);if(c&&!b.length){a.taskRunner.stop(c);delete a.task}},runner:function(){var a=this,d=a.items.getRange(),b=0,e=d.length,c;a.targetArr={};a.timestamp=new Date();for(;b<e;b++){c=d[b];if(c.isReady()){a.startAnim(c)}}for(b=0;b<e;b++){c=d[b];if(c.isRunning()){a.runAnim(c)}}a.applyPendingAttrs();a.targetArr=null},startAnim:function(a){a.start(this.timestamp)},runAnim:function(a,h){if(!a){return}var d=this,g=d.useCSS3&&a.target.type==='element',e=d.timestamp-a.startTime,f=e>=a.duration,b,c;if(h){e=a.duration;f=!0}b=d.collectTargetData(a,e,g,f);if(g){a.target.setAttr(b.anims[a.id].attributes,!0);d.collectTargetData(a,a.duration,g,f);a.paused=!0;b=a.target.target;if(a.target.isComposite){b=a.target.target.last()}c={};c[Ext.supports.CSS3TransitionEnd]=a.lastFrame;c.scope=a;c.single=!0;b.on(c)}return b},jumpToEnd:function(d){var a=this,b,c;if(!a.targetArr){a.targetArr={};c=!0}b=a.runAnim(d,!0);a.applyAnimAttrs(b,b.anims[d.id]);if(c){a.targetArr=null}},collectTargetData:function(a,d,f,e){var c=a.target.getId(),b=this.targetArr[c];if(!b){b=this.targetArr[c]={id:c,el:a.target,anims:{}}}b.anims[a.id]={id:a.id,anim:a,elapsed:d,isLastFrame:e,attributes:[{duration:a.duration,easing:f&&a.reverse?a.easingFn.reverse().toCSS3():a.easing,attrs:a.runAnim(d)}]};return b},applyAnimAttrs:function(c,a){var b=a.anim;if(a.attributes&&b.isRunning()){c.el.setAttr(a.attributes,!1,a.isLastFrame);if(a.isLastFrame){b.lastFrame()}}},applyPendingAttrs:function(){var c=this.targetArr,b,d,a,f,e;for(d in c){if(c.hasOwnProperty(d)){b=c[d];for(e in b.anims){if(b.anims.hasOwnProperty(e)){a=b.anims[e];f=a.anim;if(a.attributes&&f.isRunning()){b.el.setAttr(a.attributes,!1,a.isLastFrame);if(a.isLastFrame){f.lastFrame()}}}}}}},clear:function(){var a=this;if(a.taskRunner){a.taskRunner.stopAll(!0)}a.targetArr={};a.items.clear();a.targets.clear();a.clearFxQueue()}});Ext.define('Ext.fx.Animator',{mixins:{observable:Ext.util.Observable},isAnimator:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:'ease',running:!1,paused:!1,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(b){var a=this;b=Ext.apply(a,b||{});a.config=b;a.id=Ext.id(null,'ext-animator-');a.mixins.observable.constructor.call(a,b);a.timeline=[];a.createTimeline(a.keyframes);if(a.target){a.applyAnimator(a.target);Ext.fx.Manager.addAnim(a)}},sorter:function(a,b){return a.pct-b.pct},createTimeline:function(e){var d=this,b=[],k=d.to||{},g=d.duration,h,j,c,i,a,f;for(a in e){if(e.hasOwnProperty(a)&&d.animKeyFramesRE.test(a)){f={attrs:Ext.apply(e[a],k)};if(a==='from'){a=0}else {if(a==='to'){a=100}}f.pct=parseInt(a,10);b.push(f)}}Ext.Array.sort(b,d.sorter);i=b.length;for(c=0;c<i;c++){h=b[c-1]?g*(b[c-1].pct/100):0;j=g*(b[c].pct/100);d.timeline.push({duration:j-h,attrs:b[c].attrs})}},applyAnimator:function(j){var b=this,e=[],g=b.timeline,f=g.length,a,i,h,d,c;if(b.fireEvent('beforeanimate',b)!==!1){for(c=0;c<f;c++){a=g[c];d=a.attrs;i=d.easing||b.easing;h=d.damper||b.damper;delete d.easing;delete d.damper;a=new Ext.fx.Anim({target:j,easing:i,damper:h,duration:a.duration,paused:!0,to:d});e.push(a)}b.animations=e;b.target=a.target;for(c=0;c<f-1;c++){a=e[c];a.nextAnim=e[c+1];a.on('afteranimate',function(){this.nextAnim.paused=!1});a.on('afteranimate',function(){this.fireEvent('keyframe',this,++this.keyframeStep)},b)}e[f-1].on('afteranimate',function(){this.lastFrame()},b)}},start:function(b){var a=this,d=a.delay,c=a.delayStart,e;if(d){if(!c){a.delayStart=b;return}else {e=b-c;if(e<d){return}else {b=new Date(c.getTime()+d)}}}if(a.fireEvent('beforeanimate',a)!==!1){a.startTime=b;a.running=!0;a.animations[a.keyframeStep].paused=!1}},lastFrame:function(){var a=this,c=a.iterations,b=a.currentIteration;b++;if(b<c){a.startTime=new Date();a.currentIteration=b;a.keyframeStep=0;a.applyAnimator(a.target);a.animations[a.keyframeStep].paused=!1}else {a.currentIteration=0;a.end()}},end:function(){var a=this;a.fireEvent('afteranimate',a,a.startTime,new Date()-a.startTime)},isReady:function(){return this.paused===!1&&this.running===!1&&this.iterations>0},isRunning:function(){return !1}});Ext.define('Ext.fx.CubicBezier',{singleton:!0,cubicBezierAtTime:function(l,d,e,i,j,h){var a=3*d,b=3*(i-d)-a,f=1-a-b,c=3*e,g=3*(j-e)-c,k=1-c-g;function sampleCurveX(c){return ((f*c+b)*c+a)*c}function solve(f,b){var a=solveCurveX(f,b);return ((k*a+g)*a+c)*a}function solveCurveX(n,q){var g,k,c,m,o,p;for(c=n,p=0;p<8;p++){m=sampleCurveX(c)-n;if(Math.abs(m)<q){return c}o=(3*f*c+2*b)*c+a;if(Math.abs(o)<1.0E-6){break}c=c-m/o}g=0;k=1;c=n;if(c<g){return g}if(c>k){return k}while(g<k){m=sampleCurveX(c);if(Math.abs(m-n)<q){return c}if(n>m){g=c}else {k=c}c=(k-g)/2+g}return c}return solve(l,1/(200*h))},cubicBezier:function(b,d,c,e){var a=function(a){return Ext.fx.CubicBezier.cubicBezierAtTime(a,b,d,c,e,1)};a.toCSS3=function(){return 'cubic-bezier('+[b,d,c,e].join(',')+')'};a.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-c,1-e,1-b,1-d)};return a}});Ext.define('Ext.fx.Easing',function(){var b=Math,g=b.PI,a=b.pow,f=b.sin,e=b.sqrt,d=b.abs,c=1.70158;return {singleton:!0,linear:Ext.identityFn,ease:function(k){var c=0.07813-k/2,f=e(0.0066+c*c),g=f-c,i=a(d(g),1/3)*(g<0?-1:1),h=-f-c,j=a(d(h),1/3)*(h<0?-1:1),b=i+j+0.25;return a(1-b,2)*3*b*0.1+(1-b)*3*b*b+b*b*b},easeIn:function(b){return a(b,1.7)},easeOut:function(b){return a(b,0.48)},easeInOut:function(k){var c=0.48-k/1.04,f=e(0.1734+c*c),g=f-c,i=a(d(g),1/3)*(g<0?-1:1),h=-f-c,j=a(d(h),1/3)*(h<0?-1:1),b=i+j+0.5;return (1-b)*3*b*b+b*b*b},backIn:function(a){return a*a*((c+1)*a-c)},backOut:function(a){a=a-1;return a*a*((c+1)*a+c)+1},elasticIn:function(b){var c=0.3,d=c/4;if(b===0||b===1){return b}return a(2,-10*b)*f((b-d)*(2*g)/c)+1},elasticOut:function(a){return 1-Ext.fx.Easing.elasticIn(1-a)},bounceIn:function(a){return 1-Ext.fx.Easing.bounceOut(1-a)},bounceOut:function(a){var d=7.5625,b=2.75,c;if(a<1/b){c=d*a*a}else {if(a<2/b){a-=1.5/b;c=d*a*a+0.75}else {if(a<2.5/b){a-=2.25/b;c=d*a*a+0.9375}else {a-=2.625/b;c=d*a*a+0.984375}}}return c}}},function(c){var b=c.self,a=b.prototype;b.addMembers({'back-in':a.backIn,'back-out':a.backOut,'ease-in':a.easeIn,'ease-out':a.easeOut,'elastic-in':a.elasticIn,'elastic-out':a.elasticOut,'bounce-in':a.bounceIn,'bounce-out':a.bounceOut,'ease-in-out':a.easeInOut})});Ext.define('Ext.fx.DrawPath',{singleton:!0,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(b,a){a=String(a).toLowerCase();return a=='object'&&b===Object(b)||a=='undefined'&&typeof b==a||a=='null'&&b===null||a=='array'&&Array.isArray&&Array.isArray(b)||Object.prototype.toString.call(b).toLowerCase().slice(8,-1)==a},path2string:function(){return this.join(',').replace(Ext.fx.DrawPath.pathToStringRE,'$1')},pathToString:function(a){return a.join(',').replace(Ext.fx.DrawPath.pathToStringRE,'$1')},parsePathString:function(c){if(!c){return null}var b=this,d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},a=[];if(b.is(c,'array')&&b.is(c[0],'array')){a=b.pathClone(c)}if(!a.length){String(c).replace(b.pathCommandRE,function(i,g,h){var e=[],f=g.toLowerCase();h.replace(b.pathValuesRE,function(b,a){if(a){e.push(+a)}});if(f==='m'&&e.length>2){a.push([g].concat(Ext.Array.splice(e,0,2)));f='l';g=g==='m'?'l':'L'}while(e.length>=d[f]){a.push([g].concat(Ext.Array.splice(e,0,d[f])));if(!d[f]){break}}})}a.toString=b.path2string;return a},pathClone:function(a){var d=[],c,f,b,e;if(!this.is(a,'array')||!this.is(a&&a[0],'array')){a=this.parsePathString(a)}for(b=0,e=a.length;b<e;b++){d[b]=[];for(c=0,f=a[b].length;c<f;c++){d[b][c]=a[b][c]}}d.toString=this.path2string;return d},pathToAbsolute:function(d){if(!this.is(d,'array')||!this.is(d&&d[0],'array')){d=this.parsePathString(d)}var i=[],f=0,g=0,j=0,k=0,h=0,l=d.length,b,a,c,e;if(l&&d[0][0]==='M'){f=+d[0][1];g=+d[0][2];j=f;k=g;h++;i[0]=['M',f,g]}for(;h<l;h++){b=i[h]=[];a=d[h];if(a[0]!==a[0].toUpperCase()){b[0]=a[0].toUpperCase();switch(b[0]){case 'A':b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=+(a[6]+f);b[7]=+(a[7]+g);break;case 'V':b[1]=+a[1]+g;break;case 'H':b[1]=+a[1]+f;break;case 'M':j=+a[1]+f;k=+a[2]+g;default:c=1;e=a.length;for(;c<e;c++){b[c]=+a[c]+(c%2?f:g)};}}else {c=0;e=a.length;for(;c<e;c++){i[h][c]=a[c]}}switch(b[0]){case 'Z':f=j;g=k;break;case 'H':f=b[1];break;case 'V':g=b[1];break;case 'M':a=i[h];e=a.length;j=a[e-2];k=a[e-1];default:a=i[h];e=a.length;f=a[e-2];g=a[e-1];}}i.toString=this.path2string;return i},interpolatePaths:function(o,n){var k=this,c=k.pathToAbsolute(o),b=k.pathToAbsolute(n),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=function(a,d){var e;if(a[d].length>7){a[d].shift();e=a[d];while(e.length){Ext.Array.splice(a,d++,0,['C'].concat(Ext.Array.splice(e,0,6)))}Ext.Array.erase(a,d,1);j=Math.max(c.length,b.length||0)}},m=function(d,f,e,g,a){if(d&&f&&d[a][0]==='M'&&f[a][0]!=='M'){Ext.Array.splice(f,a,0,['M',g.x,g.y]);e.bx=0;e.by=0;e.x=d[a][1];e.y=d[a][2];j=Math.max(c.length,b.length||0)}},a,j,g,f,i,h;for(a=0,j=Math.max(c.length,b.length||0);a<j;a++){c[a]=k.command2curve(c[a],e);l(c,a);b[a]=k.command2curve(b[a],d);l(b,a);m(c,b,e,d,a);m(b,c,d,e,a);g=c[a];f=b[a];i=g.length;h=f.length;e.x=g[i-2];e.y=g[i-1];e.bx=parseFloat(g[i-4])||e.x;e.by=parseFloat(g[i-3])||e.y;d.bx=parseFloat(f[h-4])||d.x;d.by=parseFloat(f[h-3])||d.y;d.x=f[h-2];d.y=f[h-1]}return [c,b]},command2curve:function(b,a){var c=this;if(!b){return ['C',a.x,a.y,a.x,a.y,a.x,a.y]}if(b[0]!=='T'&&b[0]!=='Q'){a.qx=a.qy=null}switch(b[0]){case 'M':a.X=b[1];a.Y=b[2];break;case 'A':b=['C'].concat(c.arc2curve.apply(c,[a.x,a.y].concat(b.slice(1))));break;case 'S':b=['C',a.x+(a.x-(a.bx||a.x)),a.y+(a.y-(a.by||a.y))].concat(b.slice(1));break;case 'T':a.qx=a.x+(a.x-(a.qx||a.x));a.qy=a.y+(a.y-(a.qy||a.y));b=['C'].concat(c.quadratic2curve(a.x,a.y,a.qx,a.qy,b[1],b[2]));break;case 'Q':a.qx=b[1];a.qy=b[2];b=['C'].concat(c.quadratic2curve(a.x,a.y,b[1],b[2],b[3],b[4]));break;case 'L':b=['C'].concat(a.x,a.y,b[1],b[2],b[1],b[2]);break;case 'H':b=['C'].concat(a.x,a.y,b[1],a.y,b[1],a.y);break;case 'V':b=['C'].concat(a.x,a.y,a.x,b[1],a.x,b[1]);break;case 'Z':b=['C'].concat(a.x,a.y,a.X,a.Y,a.X,a.Y);break;}return b},quadratic2curve:function(g,h,c,d,e,f){var a=1/3,b=2/3;return [a*g+b*c,a*h+b*d,a*e+b*c,a*f+b*d,e,f]},rotate:function(d,e,b){var a=Math.cos(b),c=Math.sin(b),f=d*a-e*c,g=d*c+e*a;return {x:f,y:g}},arc2curve:function(m,n,d,c,K,X,v,e,f,o){var s=this,k=Math.PI,Y=s.radian,Q=k*120/180,w=Y*(+K||0),g=[],p=Math,B=p.cos,C=p.sin,N=p.sqrt,R=p.abs,M=p.asin,t,i,j,u,x,y,I,q,r,b,a,z,S,V,T,W,J,D,E,F,l,G,H,A,h,U,L,O,P;if(!o){t=s.rotate(m,n,-w);m=t.x;n=t.y;t=s.rotate(e,f,-w);e=t.x;f=t.y;i=(m-e)/2;j=(n-f)/2;u=i*i/(d*d)+j*j/(c*c);if(u>1){u=N(u);d=u*d;c=u*c}x=d*d;y=c*c;I=(X==v?-1:1)*N(R((x*y-x*j*j-y*i*i)/(x*j*j+y*i*i)));q=I*d*j/c+(m+e)/2;r=I*-c*i/d+(n+f)/2;b=M(((n-r)/c).toFixed(7));a=M(((f-r)/c).toFixed(7));b=m<q?k-b:b;a=e<q?k-a:a;if(b<0){b=k*2+b}if(a<0){a=k*2+a}if(v&&b>a){b=b-k*2}if(!v&&a>b){a=a-k*2}}else {b=o[0];a=o[1];q=o[2];r=o[3]}z=a-b;if(R(z)>Q){L=a;O=e;P=f;a=b+Q*(v&&a>b?1:-1);e=q+d*B(a);f=r+c*C(a);g=s.arc2curve(e,f,d,c,K,0,v,O,P,[a,L,q,r])}z=a-b;S=B(b);V=C(b);T=B(a);W=C(a);J=p.tan(z/4);D=4/3*d*J;E=4/3*c*J;F=[m,n];l=[m+D*V,n-E*S];G=[e+D*W,f-E*T];H=[e,f];l[0]=2*F[0]-l[0];l[1]=2*F[1]-l[1];if(o){return [l,G,H].concat(g)}else {g=[l,G,H].concat(g).join().split(',');A=[];U=g.length;for(h=0;h<U;h++){A[h]=h%2?s.rotate(g[h-1],g[h],w).y:s.rotate(g[h],g[h+1],w).x}return A}}});Ext.define('Ext.fx.PropertyHandler',{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(c,d,e,f,i){var g=this.unitRE,a=g.exec(c),h,b;e=typeof e==='number'?e:1;if(a){c=a[1];b=a[2];if(!this.scrollRE.test(i)&&!b&&this.pixelDefaultsRE.test(i)){b='px'}}c=+c||0;a=g.exec(d);if(a){d=a[1];b=a[2]||b}d=+d||0;h=f!=null?f:c;return {from:c,delta:(d-h)*e,units:b}},get:function(b,e,i,h,j){var l=b.length,f=[],a,d,g,c,k;for(a=0;a<l;a++){if(h){d=h[a][1].from}if(Ext.isArray(b[a][1])&&Ext.isArray(e)){g=[];c=0;k=b[a][1].length;for(;c<k;c++){g.push(this.computeDelta(b[a][1][c],e[c],i,d,j))}f.push([b[a][0],g])}else {f.push([b[a][0],this.computeDelta(b[a][1],e,i,d,j)])}}return f},set:function(d,g){var i=d.length,e=[],b,a,f,h,c;for(b=0;b<i;b++){a=d[b][1];if(Ext.isArray(a)){f=[];c=0;h=a.length;for(;c<h;c++){f.push(a[c].from+a[c].delta*g+(a[c].units||0))}e.push([d[b][0],f])}else {e.push([d[b][0],a.from+a.delta*g+(a.units||0)])}}return e}},stringHandler:{computeDelta:function(a,b,d,c,e){return {from:a,delta:b}},get:function(b,g,e,i,f){var h=b.length,c=[],a,d;for(a=0;a<h;a++){c.push([b[a][0],this.computeDelta(b[a][1],g,e,d,f)])}return c},set:function(b,f){var e=b.length,c=[],a,d;for(a=0;a<e;a++){d=b[a][1];c.push([b[a][0],d.delta])}return c}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(f,d){var g=!1,e=[this.hexRE,this.rgbRE,this.hex3RE],i=e.length,a,c,h,b;d=typeof d==='number'?d:1;for(b=0;b<i;b++){h=e[b];c=b%2===0?16:10;a=h.exec(f);if(a&&a.length===4){if(b===2){a[1]+=a[1];a[2]+=a[2];a[3]+=a[3]}g={red:parseInt(a[1],c),green:parseInt(a[2],c),blue:parseInt(a[3],c)};break}}return g||f},computeDelta:function(d,a,c,e){d=this.parseColor(d);a=this.parseColor(a,c);var b=e?e:d,f=typeof b,g=typeof a;if(f==='string'||f==='undefined'||g==='string'||g==='undefined'){return a||b}return {from:d,delta:{red:Math.round((a.red-b.red)*c),green:Math.round((a.green-b.green)*c),blue:Math.round((a.blue-b.blue)*c)}}},get:function(b,g,f,c){var h=b.length,e=[],a,d;for(a=0;a<h;a++){if(c){d=c[a][1].from}e.push([b[a][0],this.computeDelta(b[a][1],g,f,d)])}return e},set:function(f,e){var i=f.length,h=[],b,a,g,d,c;for(b=0;b<i;b++){a=f[b][1];if(a){d=a.from;c=a.delta;a=typeof a==='object'&&'red' in a?'rgb('+a.red+', '+a.green+', '+a.blue+')':a;a=typeof a==='object'&&a.length?a[0]:a;if(typeof a==='undefined'){return []}g=typeof a==='string'?a:'rgb('+[(d.red+Math.round(c.red*e))%256,(d.green+Math.round(c.green*e))%256,(d.blue+Math.round(c.blue*e))%256].join(',')+')';h.push([f[b][0],g])}}return h}},object:{interpolate:function(c,a){var d={},b;a=typeof a==='number'?a:1;for(b in c){d[b]=parseFloat(c[b])*a}return d},computeDelta:function(a,b,f,d){a=this.interpolate(a);b=this.interpolate(b,f);var g=d?d:a,e={},c;for(c in b){e[c]=b[c]-g[c]}return {from:a,delta:e}},get:function(b,g,f,c){var h=b.length,e=[],a,d;for(a=0;a<h;a++){if(c){d=c[a][1].from}e.push([b[a][0],this.computeDelta(b[a][1],g,f,d)])}return e},set:function(c,i){var j=c.length,h=[],f={},a,d,g,e,b;for(a=0;a<j;a++){e=c[a][1];d=e.from;g=e.delta;for(b in d){f[b]=d[b]+g[b]*i}h.push([c[a][0],f])}return h}},path:{computeDelta:function(b,c,a,d){var e;a=typeof a==='number'?a:1;b=+b||0;c=+c||0;e=d!=null?d:b;return {from:b,delta:(c-e)*a}},forcePath:function(a){if(!Ext.isArray(a)&&!Ext.isArray(a[0])){a=Ext.fx.DrawPath.parsePathString(a)}return a},get:function(g,p,o,i){var f=this.forcePath(p),m=[],n=g.length,j,k,e,c,l,a,d,h,b;for(e=0;e<n;e++){b=this.forcePath(g[e][1]);c=Ext.fx.DrawPath.interpolatePaths(b,f);b=c[0];f=c[1];j=b.length;h=[];for(a=0;a<j;a++){c=[b[a][0]];k=b[a].length;for(d=1;d<k;d++){l=i&&i[0][1][a][d].from;c.push(this.computeDelta(b[a][d],f[a][d],o,l))}h.push(c)}m.push([g[e][0],h])}return m},set:function(g,k){var l=g.length,j=[],c,a,d,f,e,b,h,i;for(c=0;c<l;c++){b=g[c][1];f=[];h=b.length;for(a=0;a<h;a++){e=[b[a][0]];i=b[a].length;for(d=1;d<i;d++){e.push(b[a][d].from+b[a][d].delta*k)}f.push(e.join(','))}j.push([g[c][0],f.join(',')])}return j}}}},function(){var b=['outlineColor','backgroundColor','borderColor','borderTopColor','borderRightColor','borderBottomColor','borderLeftColor','fill','stroke'],d=b.length,a=0,c;for(;a<d;a++){c=b[a];this[c]=this.color}b=['cursor'];d=b.length;a=0;for(;a<d;a++){c=b[a];this[c]=this.stringHandler}});Ext.define('Ext.fx.Anim',{mixins:{observable:Ext.util.Observable},isAnimation:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:'ease',damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^)]+)\)/,reverse:!1,running:!1,paused:!1,iterations:1,autoEnd:!1,alternate:!1,currentIteration:0,startTime:0,frameCount:0,constructor:function(b){var a=this,c;b=b||{};if(b.keyframes){return new Ext.fx.Animator(b)}Ext.apply(a,b);if(a.from===undefined){a.from={}}a.propHandlers={};a.config=b;a.target=Ext.fx.Manager.createTarget(a.target);a.easingFn=Ext.fx.Easing[a.easing];a.target.dynamic=a.dynamic;if(!a.easingFn){a.easingFn=String(a.easing).match(a.bezierRE);if(a.easingFn&&a.easingFn.length===5){c=a.easingFn;a.easingFn=Ext.fx.CubicBezier.cubicBezier(+c[1],+c[2],+c[3],+c[4])}}a.id=Ext.id(null,'ext-anim-');a.mixins.observable.constructor.call(a);Ext.fx.Manager.addAnim(a);if(b.autoEnd){a.running=!0;a.jumpToEnd()}},setAttr:function(b,a){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,b,a)},initAttrs:function(){var b=this,i=b.from,e=b.to,h=b.initialFrom||{},g={},f,d,c,a;for(a in e){if(e.hasOwnProperty(a)){f=b.target.getAttr(a,i[a]);d=e[a];if(!Ext.fx.PropertyHandler[a]){if(Ext.isObject(d)){c=b.propHandlers[a]=Ext.fx.PropertyHandler.object}else {c=b.propHandlers[a]=Ext.fx.PropertyHandler.defaultHandler}}else {c=b.propHandlers[a]=Ext.fx.PropertyHandler[a]}g[a]=c.get(f,d,b.damper,h[a],a)}}b.currentAttrs=g},start:function(b){var a=this,d=a.delay,c=a.delayStart,e;if(d){if(!c){a.delayStart=b;return}else {e=b-c;if(e<d){return}else {b=new Date(c.getTime()+d)}}}if(a.fireEvent('beforeanimate',a)!==!1){a.startTime=b;if(!a.paused&&!a.currentAttrs){a.initAttrs()}a.running=!0;a.frameCount=0}},jumpToEnd:function(b){var a=this;if(!a.endWasCalled){if(!a.currentAttrs){a.initAttrs()}Ext.fx.Manager.jumpToEnd(a);a.end(b)}},runAnim:function(b){var a=this,e=a.currentAttrs,d=a.duration,k=a.easingFn,j=a.propHandlers,i={},g,h,c,f;if(b>=d){b=d;f=!0}if(a.reverse){b=d-b}for(c in e){if(e.hasOwnProperty(c)){h=e[c];g=f?1:k(b/d);i[c]=j[c].set(h,g)}}a.frameCount++;return i},lastFrame:function(){var a=this,c=a.iterations,b=a.currentIteration;b++;if(b<c){if(a.alternate){a.reverse=!a.reverse}a.startTime=new Date();a.currentIteration=b;a.paused=!1}else {a.currentIteration=0;a.end();a.fireEvent('lastframe',a,a.startTime)}},endWasCalled:0,end:function(b){var a=this;if(a.endWasCalled++){return}a.startTime=0;a.paused=!1;a.running=!1;Ext.fx.Manager.removeAnim(a);if(!b){a.fireEvent('afteranimate',a,a.startTime);Ext.callback(a.callback,a.scope,[a,a.startTime])}if(a.remove){a.target.destroy()}},isReady:function(){return this.paused===!1&&this.running===!1&&this.iterations>0},isRunning:function(){return this.paused===!1&&this.running===!0&&this.isAnimator!==!0}});Ext.enableFx=!0;Ext.define('Ext.util.Animate',{mixinId:'animate',isAnimate:!0,animate:function(b){var a=this;if(Ext.fx.Manager.hasFxBlock(a.id)){return a}Ext.fx.Manager.queueFx(new Ext.fx.Anim(a.anim(b)));return this},anim:function(a){var b=this;if(!Ext.isObject(a)){return a?{}:!1}if(a.stopAnimation){b.stopAnimation()}Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id));return Ext.apply({target:b,paused:!0},a)},getAnimationProps:function(){var b=this,a=b.layout;return a&&a.animate?a.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,'stopAnimation'),stopAnimation:function(a){Ext.fx.Manager.stopAnimation(this.id,a);return this},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!0});return this},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!1});return this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,'getActiveAnimation'),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}});Ext.define('Ext.dom.Fly',{extend:Ext.dom.Element,alternateClassName:'Ext.dom.Element.Fly',validNodeTypes:{1:1,9:1,11:1},isFly:!0,constructor:function(a){this.dom=a;this.el=this},attach:function(c){var a=this,b;if(!c){return a.detach()}a.dom=Ext.getDom(c);if(!Ext.cache[c.id]){b=a.peekData();if(b){b.isSynchronized=!1}}return a},detach:function(){return this.dom=null},addListener:null,removeListener:null},function(b){var c={},a;b.cache=c;Ext.fly=function(a,e){var d=null,h=Ext.fly,f,g;e=e||h.caller&&(h.caller.$name||h.caller.name)||'_global';a=Ext.getDom(a);if(a){f=a.nodeType;if(b.prototype.validNodeTypes[f]||!f&&a.window==a){d=Ext.cache[a.id];if(!d||d.dom!==a){if(e==='constructor'){e='$constructor'}d=c[e]||(c[e]=new b());d.dom=a;g=d.peekData();if(g){g.isSynchronized=!1}}}}return d};Ext.getDetachedBody=function(){if(!a){Ext.detachedBodyEl=a=new b(document.createElement('div'));a.isDetachedBody=!0}return a}});Ext.define('Ext.dom.CompositeElementLite',{alternateClassName:['Ext.CompositeElementLite'],isComposite:!0,isLite:!0,statics:{importElementMethods:function(){var b=Ext.dom.Element,a=this.prototype;Ext.Object.each(b.prototype,function(b,c){if(typeof c==='function'&&!a[b]){a[b]=function(){return this.invoke(b,arguments)}}})}},constructor:function(a,b){if(b){this.elements=a||[]}else {this.elements=[];this.add(a)}},getElement:function(b){var a=this._fly||(this._fly=new Ext.dom.Fly());return a.attach(b)},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(a,e){var d=this.elements,b,c;if(!a){return this}if(typeof a==='string'){a=Ext.fly(e||document).query(a)}else {if(a.isComposite){a=a.elements}else {if(!Ext.isIterable(a)){a=[a]}}}for(b=0,c=a.length;b<c;++b){d.push(this.transformElement(a[b]))}return this},invoke:function(g,f){var b=this,e=b.elements,h=e.length,d,c,a;if(a!==0){d=(b.isLite?Ext.dom.Fly:Ext.dom.Element).prototype;for(a=0;a<h;a++){c=e[a];if(c){d[g].apply(b.getElement(c),f)}}}return b},item:function(c){var b=this.elements[c],a=null;if(b){a=this.getElement(b)}return a},slice:function(a,b){return Ext.Array.slice(this.elements,a,b)},each:function(g,e){var c=this,d=c.elements,f=d.length,b,a;for(b=0;b<f;b++){a=d[b];if(a){a=this.getElement(a);if(g.call(e||a,a,c,b)===!1){break}}}return c},fill:function(b){var a=this;a.elements=[];a.add(b);return a},insert:function(a,b){Ext.Array.insert(this.elements,a,b)},filter:function(e){var b=this,f=b.elements,i=f.length,g=[],d=0,h=typeof e==='function',c,a;for(;d<i;d++){a=f[d];c=!1;if(a){a=b.getElement(a);if(h){c=e.call(a,a,b,d)!==!1}else {c=a.is(e)}if(c){g.push(b.transformElement(a))}}}b.elements=g;return b},indexOf:function(a){return Ext.Array.indexOf(this.elements,this.transformElement(a))},replaceElement:function(d,a,e){var c=!isNaN(d)?d:this.indexOf(d),b;if(c>-1){a=Ext.getDom(a);if(e){b=this.elements[c];b.parentNode.insertBefore(a,b);Ext.removeNode(b)}Ext.Array.splice(this.elements,c,1,a)}return this},clear:function(c){var d=this,b=d.elements,a=b.length-1;if(c){for(;a>=0;a--){Ext.removeNode(b[a])}}this.elements=[]},addElements:function(a,d){if(!a){return this}if(typeof a==='string'){a=Ext.dom.Element.selectorFunction(a,d)}var e=this.elements,c=a.length,b;for(b=0;b<c;b++){e.push(Ext.get(a[b]))}return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!==-1},removeElement:function(b,h){var f=this,e=f.elements,a,c,d,g;b=[].concat(b);for(d=0,g=b.length;d<g;d++){a=b[d];if(c=e[a]||e[a=f.indexOf(a)]){if(h){if(c.dom){c.destroy()}else {Ext.removeNode(c)}}Ext.Array.erase(e,a,1)}}return f},destroy:function(){this.invoke('destroy',arguments);this.callParent()}},function(a){var b=a.prototype;a.importElementMethods();b.on=b.addListener});Ext.define('Ext.overrides.dom.Element',function(){var a,w=window,b=document,e='hidden',g='isClipped',j='overflow',h='overflow-x',i='overflow-y',o='originalClip',L='height',u='width',q='visibility',d='display',v='none',J='offsets',P='clip',z='originalDisplay',s='visibilityMode',H='isVisible',C=Ext.baseCSSPrefix+'hidden-offsets',G=Ext.baseCSSPrefix+'hidden-clip',I=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>','</div>','</div>','<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>','</div>','</div>','<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>','</div>','</div>'].join(''),D=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,y=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,O=/\ssrc=(['"])(.*?)\1/i,F=/\S/,N=/\stype=(['"])(.*?)\1/i,x=/table-row|table-.*-group/,Q=/^-ms-/,K=/(-[a-z])/gi,A=function(b,a){return a.charAt(1).toUpperCase()},t=Ext.baseCSSPrefix+'masked',l=Ext.baseCSSPrefix+'masked-relative',n=Ext.baseCSSPrefix+'mask-msg',M=/^body/i,m={},E=function(d){var c=d.getData(),b=c[s];if(b===undefined){c[s]=b=a.VISIBILITY}return b},f=b.createRange?b.createRange():null,k;if(Ext.isIE8){var r=b.createElement('div'),c=[],p,B=function(){var b=c.length,a;for(a=0;a<b;a++){r.appendChild(c[a])}r.innerHTML='';c.length=0};p=Ext.Function.createBuffered(B,10)}return {override:'Ext.dom.Element',mixins:[Ext.util.Animate],skipGarbageCollection:!1,_init:function(b){a=b},statics:{normalize:function(a){if(a==='float'){a=Ext.supports.Float?'cssFloat':'styleFloat'}return m[a]||(m[a]=a.replace(Q,'ms-').replace(K,A))}},addKeyListener:function(a,d,c){var b;if(typeof a!=='object'||Ext.isArray(a)){b={target:this,key:a,fn:d,scope:c}}else {b={target:this,key:a.key,shift:a.shift,ctrl:a.ctrl,alt:a.alt,fn:d,scope:c}}return new Ext.util.KeyMap(b)},addKeyMap:function(a){return new Ext.util.KeyMap(Ext.apply({target:this},a))},adjustDirect2DDimension:function(d){var f=this,a=f.dom,b=f.getStyle('display'),h=a.style.display,g=a.style.position,i=d===u?0:1,c=a.currentStyle,e;if(b==='inline'){a.style.display='inline-block'}a.style.position=b.match(x)?'absolute':'static';e=(parseFloat(c[d])||parseFloat(c.msTransformOrigin.split(' ')[i])*2)%1;a.style.position=g;if(b==='inline'){a.style.display=h}return e},afterAnimate:function(){var a=this.shadow;if(a&&!a.disabled&&!a.animate){a.show()}},anchorAnimX:function(a){var b=a==='l'?'right':'left';this.dom.style[b]='0px'},anim:function(b){if(!Ext.isObject(b)){return b?{}:!1}var c=this,d=b.duration||Ext.fx.Anim.prototype.duration,e=b.easing||'ease',a;if(b.stopAnimation){c.stopAnimation()}Ext.applyIf(b,Ext.fx.Manager.getFxDefaults(c.id));Ext.fx.Manager.setFxDefaults(c.id,{delay:0});a={target:c.dom,remove:b.remove,alternate:b.alternate||!1,duration:d,easing:e,callback:b.callback,listeners:b.listeners,iterations:b.iterations||1,scope:b.scope,block:b.block,concurrent:b.concurrent,delay:b.delay||0,paused:!0,keyframes:b.keyframes,from:b.from||{},to:Ext.apply({},b),userConfig:b};Ext.apply(a.to,b.to);delete a.to.to;delete a.to.from;delete a.to.remove;delete a.to.alternate;delete a.to.keyframes;delete a.to.iterations;delete a.to.listeners;delete a.to.target;delete a.to.paused;delete a.to.callback;delete a.to.scope;delete a.to.duration;delete a.to.easing;delete a.to.concurrent;delete a.to.block;delete a.to.stopAnimation;delete a.to.delay;return a},animate:function(a){this.addAnimation(a);return this},addAnimation:function(a){var c=this,f=c.dom.id||Ext.id(c.dom),d,b,e;if(!Ext.fx.Manager.hasFxBlock(f)){if(a.listeners){d=a.listeners;delete a.listeners}if(a.internalListeners){a.listeners=a.internalListeners;delete a.internalListeners}e=a.autoEnd;delete a.autoEnd;b=new Ext.fx.Anim(c.anim(a));b.on({afteranimate:'afterAnimate',beforeanimate:'beforeAnimate',scope:c,single:!0});if(d){b.on(d)}Ext.fx.Manager.queueFx(b);if(e){b.jumpToEnd()}}return b},beforeAnimate:function(){var a=this.shadow;if(a&&!a.disabled&&!a.animate){a.hide()}},boxWrap:function(a){var b;a=a||Ext.baseCSSPrefix+'box';b=Ext.get(this.insertHtml('beforeBegin',"<div class='"+a+"' role='presentation'>"+Ext.String.format(I,a)+'</div>'));b.selectNode('.'+a+'-mc').appendChild(this.dom);return b},clean:function(g){var c=this,d=c.dom,e=c.getData(),a=d.firstChild,f=-1,b;if(e.isCleaned&&g!==!0){return c}while(a){b=a.nextSibling;if(a.nodeType===3){if(!F.test(a.nodeValue)){d.removeChild(a)}else {if(b&&b.nodeType===3){a.appendData(Ext.String.trim(b.data));d.removeChild(b);b=a.nextSibling;a.nodeIndex=++f}}}else {Ext.fly(a,'_clean').clean();a.nodeIndex=++f}a=b}e.isCleaned=!0;return c},empty:f?function(){var a=this.dom;if(a.firstChild){f.setStartBefore(a.firstChild);f.setEndAfter(a.lastChild);f.deleteContents()}}:function(){var a=this.dom;while(a.lastChild){a.removeChild(a.lastChild)}},clearListeners:function(){this.removeAnchor();this.callParent()},clearPositioning:function(a){a=a||'';return this.setStyle({left:a,right:a,top:a,bottom:a,'z-index':'',position:'static'})},createProxy:function(b,e,f){b=typeof b==='object'?b:{tag:'div',role:'presentation',cls:b};var d=this,c=e?Ext.DomHelper.append(e,b,!0):Ext.DomHelper.insertBefore(d.dom,b,!0);c.setVisibilityMode(a.DISPLAY);c.hide();if(f&&d.setBox&&d.getBox){c.setBox(d.getBox())}return c},clearOpacity:function(){return this.setOpacity('')},clip:function(){var a=this,c=a.getData(),b;if(!c[g]){c[g]=!0;b=a.getStyle([j,h,i]);c[o]={o:b[j],x:b[h],y:b[i]};a.setStyle(j,e);a.setStyle(h,e);a.setStyle(i,e)}return a},destroy:function(){var a=this,b=a.dom,f=a.peekData(),e,d;if(b){if(a.isAnimate){a.stopAnimation(!0)}a.removeAnchor()}if(a.deferredFocusTimer){Ext.undefer(a.deferredFocusTimer);a.deferredFocusTimer=null}a.callParent();if(b&&Ext.isIE8&&b.window!=b&&b.nodeType!==9&&b.tagName!=='BODY'&&b.tagName!=='HTML'){c[c.length]=b;p()}if(f){e=f.maskEl;d=f.maskMsg;if(e){e.destroy()}if(d){d.destroy()}}},enableDisplayMode:function(c){var b=this;b.setVisibilityMode(a.DISPLAY);if(c!==undefined){b.getData()[z]=c}return b},fadeIn:function(c){var b=this,d=b.dom,a=new Ext.dom.Fly();b.animate(Ext.apply({},c,{opacity:1,internalListeners:{beforeanimate:function(b){a.attach(d);if(a.isStyle('display','none')){a.setDisplayed('')}else {a.show()}}}}));return this},fadeOut:function(b){var c=this,d=c.dom,a=new Ext.dom.Fly();b=Ext.apply({opacity:0,internalListeners:{afteranimate:function(c){if(c.to.opacity===0){a.attach(d);a.attach(d);if(b.useDisplay){a.setDisplayed(!1)}else {a.hide()}}}}},b);c.animate(b);return c},fixDisplay:function(){var a=this;if(a.isStyle(d,v)){a.setStyle(q,e);a.setStyle(d,a._getDisplay());if(a.isStyle(d,v)){a.setStyle(d,'block')}}},frame:function(c,d,a){var e=this,g=e.dom,b=new Ext.dom.Fly(),f;c=c||'#C3DAF9';d=d||1;a=a||{};f=function(){var i=this,e,f,h;b.attach(g);b.show();e=b.getBox();f=Ext.getBody().createChild({role:'presentation',id:b.dom.id+'-anim-proxy',style:{position:'absolute','pointer-events':'none','z-index':35000,border:'0px solid '+c}});h=new Ext.fx.Anim({target:f,duration:a.duration||1000,iterations:d,from:{top:e.y,left:e.x,borderWidth:0,opacity:1,height:e.height,width:e.width},to:{top:e.y-20,left:e.x-20,borderWidth:10,opacity:0,height:e.height+40,width:e.width+40}});h.on('afteranimate',function(){f.destroy();i.end()})};e.animate({duration:Math.max(a.duration,500)*2||2000,listeners:{beforeanimate:{fn:f}},callback:a.callback,scope:a.scope});return e},getColor:function(h,f,d){var a=this.getStyle(h),b=d||d===''?d:'#',e,g,c;if(!a||/transparent|inherit/.test(a)){return f}if(/^r/.test(a)){a=a.slice(4,a.length-1).split(',');g=a.length;for(c=0;c<g;c++){e=parseInt(a[c],10);b+=(e<16?'0':'')+e.toString(16)}}else {a=a.replace('#','');b+=a.length===3?a.replace(/^(\w)(\w)(\w)$/,'$1$1$2$2$3$3'):a}return b.length>5?b.toLowerCase():f},getLoader:function(){var c=this,b=c.getData(),a=b.loader;if(!a){b.loader=a=new Ext.ElementLoader({target:c})}return a},getPositioning:function(c){var a=this.getStyle(['left','top','position','z-index']),b=this.dom;if(c){if(a.left==='auto'){a.left=b.offsetLeft+'px'}if(a.top==='auto'){a.top=b.offsetTop+'px'}}return a},ghost:function(b,f){var c=this,e=c.dom,a=new Ext.dom.Fly(),d;b=b||'b';d=function(){a.attach(e);var h=a.getWidth(),g=a.getHeight(),d=a.getXY(),i=a.getPositioning(),c={opacity:0};switch(b){case 't':c.y=d[1]-g;break;case 'l':c.x=d[0]-h;break;case 'r':c.x=d[0]+h;break;case 'b':c.y=d[1]+g;break;case 'tl':c.x=d[0]-h;c.y=d[1]-g;break;case 'bl':c.x=d[0]-h;c.y=d[1]+g;break;case 'br':c.x=d[0]+h;c.y=d[1]+g;break;case 'tr':c.x=d[0]+h;c.y=d[1]-g;break;}this.to=c;this.on('afteranimate',function(){a.attach(e);if(a){a.hide();a.clearOpacity();a.setPositioning(i)}})};c.animate(Ext.applyIf(f||{},{duration:500,easing:'ease-out',listeners:{beforeanimate:d}}));return c},getTextSelection:function(){var a,d,e,c,b;a=this.callParent();if(typeof a[0]!=='number'){d=this.dom;e=d.ownerDocument;c=e.selection.createRange();b=d.createTextRange();b.setEndPoint('EndToStart',c);a[0]=b.text.length;a[1]=a[0]+c.text.length}return a},hide:function(a){if(typeof a==='string'){this.setVisible(!1,a);return this}this.setVisible(!1,this.anim(a));return this},highlight:function(l,b){var g=this,e=g.dom,k={},i=new Ext.dom.Fly(),j,h,c,d,a,f;b=b||{};d=b.listeners||{};c=b.attr||'backgroundColor';k[c]=l||'ffff9c';if(!b.to){h={};h[c]=b.endColor||g.getColor(c,'ffffff','')}else {h=b.to}b.listeners=Ext.apply(Ext.apply({},d),{beforeanimate:function(){i.attach(e);j=e.style[c];i.clearOpacity();i.show();a=d.beforeanimate;if(a){f=a.fn||a;return f.apply(a.scope||d.scope||w,arguments)}},afteranimate:function(){if(e){e.style[c]=j}a=d.afteranimate;if(a){f=a.fn||a;f.apply(a.scope||d.scope||w,arguments)}}});g.animate(Ext.apply({},b,{duration:1000,easing:'ease-in',from:k,to:h}));return g},initDD:function(c,b,a){var d=new Ext.dd.DD(Ext.id(this.dom),c,b);return Ext.apply(d,a)},initDDProxy:function(c,b,a){var d=new Ext.dd.DDProxy(Ext.id(this.dom),c,b);return Ext.apply(d,a)},initDDTarget:function(c,b,a){var d=new Ext.dd.DDTarget(Ext.id(this.dom),c,b);return Ext.apply(d,a)},isMasked:function(g){var b=this,f=b.getData(),e=f.maskEl,d=f.maskMsg,c=!1,a;if(e&&e.isVisible()){if(d){d.center(b)}c=!0}else {if(g){a=b.findParentNode();if(a){return Ext.fly(a).isMasked(g)}}}return c},load:function(a){this.getLoader().load(a);return this},mask:function(h,f,i){var c=this,d=c.dom,g=c.getData(),a=g.maskEl,e;if(!(M.test(d.tagName)&&c.getStyle('position')==='static')){c.addCls(l)}if(a){a.destroy()}a=Ext.DomHelper.append(d,{role:'presentation',cls:Ext.baseCSSPrefix+'mask '+Ext.baseCSSPrefix+'border-box',children:{role:'presentation',cls:f?n+' '+f:n,cn:{tag:'div',role:'presentation',cls:Ext.baseCSSPrefix+'mask-msg-inner',cn:{tag:'div',role:'presentation',cls:Ext.baseCSSPrefix+'mask-msg-text',html:h||''}}}},!0);e=Ext.fly(a.dom.firstChild);g.maskEl=a;c.addCls(t);a.setDisplayed(!0);if(typeof h==='string'){e.setDisplayed(!0);e.center(c)}else {e.setDisplayed(!1)}if(d===b.body){a.addCls(Ext.baseCSSPrefix+'mask-fixed')}c.saveTabbableState({skipSelf:d===b.body});if(Ext.isIE9m&&d!==b.body&&c.isStyle('height','auto')){a.setSize(undefined,i||c.getHeight())}return a},puff:function(b){var d=this,g=d.dom,a=new Ext.dom.Fly(),f,c=d.getBox(),e;e=d.getStyle(['width','height','left','right','top','bottom','position','z-index','font-size','opacity'],!0);b=Ext.applyIf(b||{},{easing:'ease-out',duration:500,useDisplay:!1});f=function(){a.attach(g);a.clearOpacity();a.show();this.to={width:c.width*2,height:c.height*2,x:c.x-c.width/2,y:c.y-c.height/2,opacity:0,fontSize:'200%'};this.on('afteranimate',function(){a.attach(g);if(b.useDisplay){a.setDisplayed(!1)}else {a.hide()}a.setStyle(e);Ext.callback(b.callback,b.scope)})};d.animate({duration:b.duration,easing:b.easing,listeners:{beforeanimate:{fn:f}}});return d},setCapture:function(){var a=this.dom;if(Ext.isIE9m&&a.setCapture){a.setCapture()}},setHeight:function(c,a){var b=this;if(!a||!b.anim){b.callParent(arguments)}else {if(!Ext.isObject(a)){a={}}b.animate(Ext.applyIf({to:{height:c}},a))}return b},setHorizontal:function(){var a=this,b=a.verticalCls;delete a.vertical;if(b){delete a.verticalCls;a.removeCls(b)}delete a.setWidth;delete a.setHeight;if(!Ext.isIE8){delete a.getWidth;delete a.getHeight}delete a.styleHooks},updateText:function(d){var e=this,c,a;if(c){a=c.firstChild;if(!a||(a.nodeType!==3||a.nextSibling)){a=b.createTextNode();e.empty();c.appendChild(a)}if(d){a.data=d}}},setHtml:function(c,i,g,e){var a=this,f,d,h;if(!a.dom){return a}c=c||'';d=a.dom;if(i!==!0){if(Ext.isIE){while(d.firstChild){d.removeChild(d.firstChild)}}d.innerHTML=c;Ext.callback(g,a);return a}f=Ext.id();c+='<span id="'+f+'" role="presentation"></span>';h=Ext.interval(function(){var o,d,l,k,j,n,m;if(!(n=b.getElementById(f))){return !1}Ext.uninterval(h);Ext.removeNode(n);o=Ext.getHead().dom;while(d=D.exec(c)){l=d[1];k=l?l.match(O):!1;if(k&&k[2]){m=b.createElement('script');m.src=k[2];j=l.match(N);if(j&&j[2]){m.type=j[2]}o.appendChild(m)}else {if(d[2]&&d[2].length>0){if(e){Ext.functionFactory(d[2]).call(e)}else {Ext.globalEval(d[2])}}}}Ext.callback(g,e||a)},20);d.innerHTML=c.replace(y,'');return a},setOpacity:function(c,b){var a=this;if(!a.dom){return a}if(!b||!a.anim){a.setStyle('opacity',c)}else {if(typeof b!=='object'){b={duration:350,easing:'ease-in'}}a.animate(Ext.applyIf({to:{opacity:c}},b))}return a},setPositioning:function(a){return this.setStyle(a)},setVertical:function(e,d){var b=this,c=a.prototype;b.vertical=!0;if(d){b.addCls(b.verticalCls=d)}b.setWidth=c.setHeight;b.setHeight=c.setWidth;if(!Ext.isIE8){b.getWidth=c.getHeight;b.getHeight=c.getWidth}b.styleHooks=e===270?c.verticalStyleHooks270:c.verticalStyleHooks90},setSize:function(c,e,d){var b=this;if(Ext.isObject(c)){d=e;e=c.height;c=c.width}if(!d||!b.anim){b.dom.style.width=a.addUnits(c);b.dom.style.height=a.addUnits(e);if(b.shadow||b.shim){b.syncUnderlays()}}else {if(d===!0){d={}}b.animate(Ext.applyIf({to:{width:c,height:e}},d))}return b},setVisible:function(f,g){var b=this,i=b.dom,h,c=E(b);if(typeof g==='string'){switch(g){case d:c=a.DISPLAY;break;case q:c=a.VISIBILITY;break;case J:c=a.OFFSETS;break;case P:c=a.CLIP;break;}b.setVisibilityMode(c);g=!1}if(!g||!b.anim){if(c===a.DISPLAY){return b.setDisplayed(f)}else {if(c===a.OFFSETS){b[f?'removeCls':'addCls'](C)}else {if(c===a.CLIP){b[f?'removeCls':'addCls'](G)}else {if(c===a.VISIBILITY){b.fixDisplay();i.style.visibility=f?'':e}}}}}else {if(f){b.setOpacity(0.01);b.setVisible(!0)}if(!Ext.isObject(g)){g={duration:350,easing:'ease-in'}}h=new Ext.dom.Fly();b.animate(Ext.applyIf({callback:function(){if(!f){h.attach(i).setVisible(!1).setOpacity(1)}},to:{opacity:f?1:0}},g))}b.getData()[H]=f;if(b.shadow||b.shim){b.setUnderlaysVisible(f)}return b},setWidth:function(c,a){var b=this;if(!a||!b.anim){b.callParent(arguments)}else {if(!Ext.isObject(a)){a={}}b.animate(Ext.applyIf({to:{width:c}},a))}return b},setX:function(b,a){return this.setXY([b,this.getY()],a)},setXY:function(c,a){var b=this;if(!a||!b.anim){b.callParent([c])}else {if(!Ext.isObject(a)){a={}}b.animate(Ext.applyIf({to:{x:c[0],y:c[1]}},a))}return this},setY:function(b,a){return this.setXY([this.getX(),b],a)},show:function(a){if(typeof a==='string'){this.setVisible(!0,a);return this}this.setVisible(!0,this.anim(a));return this},slideIn:function(b,d,f){var c=this,e=c.dom,i=e.style,a=new Ext.dom.Fly(),k,g,h,j;b=b||'t';d=d||{};k=function(){var p=this,o=d.listeners,k,n,m,l;a.attach(e);if(!f){a.fixDisplay()}k=a.getBox();if((b==='t'||b==='b')&&k.height===0){k.height=e.scrollHeight}else {if((b==='l'||b==='r')&&k.width===0){k.width=e.scrollWidth}}n=a.getStyle(['width','height','left','right','top','bottom','position','z-index'],!0);a.setSize(k.width,k.height);if(d.preserveScroll){h=a.cacheScrollValues()}l=a.wrap({role:'presentation',id:Ext.id()+'-anim-wrap-for-'+e.id,style:{visibility:f?'visible':'hidden'}});j=l.dom.parentNode;l.setPositioning(a.getPositioning());if(l.isStyle('position','static')){l.position('relative')}a.clearPositioning('auto');l.clip();if(h){h()}a.setStyle({visibility:'',position:'absolute'});if(f){l.setSize(k.width,k.height)}switch(b){case 't':m={from:{width:k.width+'px',height:'0px'},to:{width:k.width+'px',height:k.height+'px'}};i.bottom='0px';break;case 'l':m={from:{width:'0px',height:k.height+'px'},to:{width:k.width+'px',height:k.height+'px'}};c.anchorAnimX(b);break;case 'r':m={from:{x:k.x+k.width,width:'0px',height:k.height+'px'},to:{x:k.x,width:k.width+'px',height:k.height+'px'}};c.anchorAnimX(b);break;case 'b':m={from:{y:k.y+k.height,width:k.width+'px',height:'0px'},to:{y:k.y,width:k.width+'px',height:k.height+'px'}};break;case 'tl':m={from:{x:k.x,y:k.y,width:'0px',height:'0px'},to:{width:k.width+'px',height:k.height+'px'}};i.bottom='0px';c.anchorAnimX('l');break;case 'bl':m={from:{y:k.y+k.height,width:'0px',height:'0px'},to:{y:k.y,width:k.width+'px',height:k.height+'px'}};c.anchorAnimX('l');break;case 'br':m={from:{x:k.x+k.width,y:k.y+k.height,width:'0px',height:'0px'},to:{x:k.x,y:k.y,width:k.width+'px',height:k.height+'px'}};c.anchorAnimX('r');break;case 'tr':m={from:{x:k.x+k.width,width:'0px',height:'0px'},to:{x:k.x,width:k.width+'px',height:k.height+'px'}};i.bottom='0px';c.anchorAnimX('r');break;}l.show();g=Ext.apply({},d);delete g.listeners;g=new Ext.fx.Anim(Ext.applyIf(g,{target:l,duration:500,easing:'ease-out',from:f?m.to:m.from,to:f?m.from:m.to}));g.on('afteranimate',function(){a.attach(e);a.setStyle(n);if(f){if(d.useDisplay){a.setDisplayed(!1)}else {a.hide()}}if(l.dom){if(l.dom.parentNode){l.dom.parentNode.insertBefore(e,l.dom)}else {j.appendChild(e)}l.destroy()}if(h){h()}p.end()});if(o){g.on(o)}};c.animate({duration:d.duration?Math.max(d.duration,500)*2:1000,listeners:{beforeanimate:k}});return c},slideOut:function(b,a){return this.slideIn(b,a,!0)},switchOff:function(b){var d=this,c=d.dom,a=new Ext.dom.Fly(),e;b=Ext.applyIf(b||{},{easing:'ease-in',duration:500,remove:!1,useDisplay:!1});e=function(){a.attach(c);var h=this,d=a.getSize(),g=a.getXY(),e,f;a.clearOpacity();a.clip();f=a.getPositioning();e=new Ext.fx.Animator({target:c,duration:b.duration,easing:b.easing,keyframes:{33:{opacity:0.3},66:{height:1,y:g[1]+d.height/2},100:{width:1,x:g[0]+d.width/2}}});e.on('afteranimate',function(){a.attach(c);if(b.useDisplay){a.setDisplayed(!1)}else {a.hide()}a.clearOpacity();a.setPositioning(f);a.setSize(d);h.end()})};d.animate({duration:Math.max(b.duration,500)*2,listeners:{beforeanimate:{fn:e}},callback:b.callback,scope:b.scope});return d},syncContent:function(d){d=Ext.getDom(d);var j=d.childNodes,m=j.length,e=this.dom,l=e.childNodes,q=l.length,a,c,b,h,i,f,n,g,p,o=e._extData;if(!k){k=new Ext.dom.Fly()}f=d.attributes;n=f.length;for(a=0;a<n;a++){g=f[a].name;p=f[a].value;if(g!=='id'&&e.getAttribute(g)!==p){e.setAttribute(g,f[a].value)}}if(o){o.isSynchronized=!1}if(m!==q){e.innerHTML=d.innerHTML;return}for(a=0;a<m;a++){b=j[a];c=l[a];i=b.nodeType;h=b.style;if(i!==c.nodeType||i===1&&b.tagName!==c.tagName){e.innerHTML=d.innerHTML;return}if(!h){c.data=b.data}else {if(b.id&&c.id!==b.id){c.id=b.id}c.style.cssText=h.cssText;c.className=b.className;k.attach(c).syncContent(b)}}},toggle:function(b){var a=this;a.setVisible(!a.isVisible(),a.anim(b));return a},unmask:function(){var d=this,e=d.getData(),a=e.maskEl,c;if(a){c=a.dom.style;if(c.clearExpression){c.clearExpression('width');c.clearExpression('height')}if(a){a.destroy();delete e.maskEl}d.removeCls([t,l])}d.restoreTabbableState(d.dom===b.body)},unclip:function(){var b=this,c=b.getData(),a;if(c[g]){c[g]=!1;a=c[o];if(a.o){b.setStyle(j,a.o)}if(a.x){b.setStyle(h,a.x)}if(a.y){b.setStyle(i,a.y)}}return b},translate:function(a,b,c){if(Ext.supports.CssTransforms&&!Ext.isIE9m){this.callParent(arguments)}else {if(a!=null){this.dom.style.left=a+'px'}if(b!=null){this.dom.style.top=b+'px'}}},deprecated:{'4.0':{methods:{pause:function(b){var a=this;Ext.fx.Manager.setFxDefaults(a.id,{delay:b});return a},scale:function(c,b,a){this.animate(Ext.apply({},a,{width:c,height:b}));return this},shift:function(a){this.animate(a);return this}}},'4.2':{methods:{moveTo:function(b,c,a){return this.setXY([b,c],a)},setBounds:function(d,e,c,b,a){return this.setBox({x:d,y:e,width:c,height:b},a)},setLeftTop:function(d,e){var b=this,c=b.dom.style;c.left=a.addUnits(d);c.top=a.addUnits(e);if(b.shadow||b.shim){b.syncUnderlays()}return b},setLocation:function(b,c,a){return this.setXY([b,c],a)}}},'5.0':{methods:{getAttributeNS:function(a,b){return this.getAttribute(b,a)},getCenterXY:function(){return this.getAlignToXY(b,'c-c')},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle(L))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle(u))||0},getStyleSize:function(){var d=this,e=this.dom,h=e===b||e===b.body,c,g,f;if(h){return {width:a.getViewportWidth(),height:a.getViewportHeight()}}c=d.getStyle(['height','width'],!0);if(c.width&&c.width!=='auto'){g=parseFloat(c.width)}if(c.height&&c.height!=='auto'){f=parseFloat(c.height)}return {width:g||d.getWidth(!0),height:f||d.getHeight(!0)}},isBorderBox:function(){return !0},isDisplayed:function(){return !this.isStyle('display','none')},focusable:'isFocusable'}}}}}(),function(){var g=Ext.dom.Element,a=g.prototype,t=!Ext.isIE8,f=document,q=f.defaultView,p=/alpha\(opacity=(.*)\)/i,w=/^\s+|\s+$/g,d=a.styleHooks,e=Ext.supports,c,b,l,m,i,j,n;a._init(g);delete a._init;Ext.plainTableCls=Ext.baseCSSPrefix+'table-plain';Ext.plainListCls=Ext.baseCSSPrefix+'list-plain';if(Ext.CompositeElementLite){Ext.CompositeElementLite.importElementMethods()}if(!e.Opacity&&Ext.isIE){Ext.apply(d.opacity,{get:function(d){var c=d.style.filter,b,a;if(c.match){b=c.match(p);if(b){a=parseFloat(b[1]);if(!isNaN(a)){return a?a/100:0}}}return 1},set:function(d,a){var b=d.style,c=b.filter.replace(p,'').replace(w,'');b.zoom=1;if(typeof a==='number'&&a>=0&&a<1){a*=100;b.filter=c+(c.length?' ':'')+'alpha(opacity='+a+')'}else {b.filter=c}}})}if(!e.matchesSelector){var r=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,v=/-/g,h,s=function(a,c){var b=new RegExp('(?:^|\\s+)'+c.replace(v,'\\-')+'(?:\\s+|$)');if(a&&a!=='*'){a=a.toUpperCase();return function(d){return d.tagName===a&&b.test(d.className)}}return function(d){return b.test(d.className)}},u=function(a){a=a.toUpperCase();return function(b){return b.tagName===a}},k={};a.matcherCache=k;a.is=function(a){var b=this.dom,g,e,d,c,j,l,i;if(!a){return !0}if(b.nodeType!==1){return !1}if(!(d=Ext.isFunction(a)?a:k[a])){if(!(e=a.match(r))){c=b.parentNode;if(!c){j=!0;c=h||(h=f.createDocumentFragment());h.appendChild(b)}l=Ext.Array.indexOf(Ext.fly(c,'_is').query(a),b)!==-1;if(j){h.removeChild(b)}return l}i=e[1];g=e[2];k[a]=d=g?s(i,g):u(i)}return d(b)}}if(!q||!q.getComputedStyle){a.getStyle=function(o,p){var j=this,e=j.dom,n=typeof o!=='string',a=o,i=a,r=1,m=p,l=j.styleHooks,q,h,d,c,f,b,k;if(n){d={};a=i[0];k=0;if(!(r=i.length)){return d}}if(!e||e.documentElement){return d||''}h=e.style;if(p){b=h}else {b=e.currentStyle;if(!b){m=!0;b=h}}do{c=l[a];if(!c){l[a]=c={name:g.normalize(a)}}if(c.get){f=c.get(e,j,m,b)}else {q=c.name;f=b[q]}if(!n){return f}d[a]=f;a=i[++k]}while(k<r);return d}}if(Ext.isIE8){n=function(c,d,b,a){if(a[this.styleName]==='none'){return '0px'}return a[this.name]};l=['Top','Right','Bottom','Left'];m=l.length;while(m--){i=l[m];j='border'+i+'Width';d['border-'+i.toLowerCase()+'-width']=d[j]={name:j,styleName:'border'+i+'Style',get:n}}var o=Ext.baseCSSPrefix+'sync-repaint';a.syncRepaint=function(){this.addCls(o);this.getWidth();this.removeCls(o)}}if(Ext.isIE10m){Ext.override(g,{focus:function(c,a){var b=this,d;a=a||b.dom;if(b.deferredFocusTimer){Ext.undefer(b.deferredFocusTimer)}b.deferredFocusTimer=null;if(Number(c)){b.deferredFocusTimer=Ext.defer(b.focus,c,b,[null,a])}else {Ext.GlobalEvents.fireEvent('beforefocus',a);if(a&&(a.tagName==='INPUT'||a.tagname==='TEXTAREA')){Ext.synchronouslyFocusing=document.activeElement}try{a.focus()}catch(x){d=x}if(Ext.synchronouslyFocusing&&document.activeElement!==a&&!d){a.focus()}Ext.synchronouslyFocusing=null}return b}})}Ext.apply(Ext,{enableGarbageCollector:!0,isBorderBox:!0,useShims:!1,getElementById:function(c){var a=f.getElementById(c),b;if(!a&&(b=Ext.detachedBodyEl)){a=b.dom.querySelector(Ext.makeIdSelector(c))}return a},addBehaviors:function(d){var b={},c,e,a;if(!Ext.isReady){Ext.onInternalReady(function(){Ext.addBehaviors(d)})}else {for(e in d){if((c=e.split('@'))[1]){a=c[0];if(!b[a]){b[a]=Ext.fly(document).select(a,!0)}b[a].on(c[1],d[e])}}b=null}}});if(Ext.isIE9m){Ext.getElementById=function(c){var a=f.getElementById(c),b;if(!a&&(b=Ext.detachedBodyEl)){a=b.dom.all[c]}return a};a.getById=function(d,g){var e=this.dom,b=null,a,c;if(e){c=t&&f.getElementById(d)||e.all[d];if(c){if(g){b=c}else {a=Ext.cache[d];if(a){if(a.skipGarbageCollection||!Ext.isGarbage(a.dom)){b=a}else {a.destroy()}}b=b||new Ext.Element(c)}}}return b}}else {if(!f.querySelector){Ext.getDetachedBody=Ext.getBody;Ext.getElementById=function(a){return f.getElementById(a)};a.getById=function(c,b){var a=f.getElementById(c);return b?a:a?Ext.get(a):null}}}if(Ext.isIE&&!(Ext.isIE9p&&f.documentMode>=9)){a.getAttribute=function(a,c){var d=this.dom,b;if(c){b=typeof d[c+':'+a];if(b!=='undefined'&&b!=='unknown'){return d[c+':'+a]||null}return null}if(a==='for'){a='htmlFor'}return d[a]||null}}Ext.onInternalReady(function(){var n=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,o=a.setWidth,m=a.setHeight,k=a.setSize,l=a.unselectable,p=/^\d+(?:\.\d*)?px$/i,f,j,i,h;if(e.FixedTableWidthBug){d.width={name:'width',set:function(c,e,f){var a=c.style,b=f._needsTableWidthFix,d=a.display;if(b){a.display='none'}a.width=e;if(b){c.scrollWidth;a.display=d}}};a.setWidth=function(g,b){var a=this,e=a.dom,c=e.style,d=a._needsTableWidthFix,f=c.display;if(d&&!b){c.display='none'}o.call(a,g,b);if(d&&!b){e.scrollWidth;c.display=f}return a};a.setSize=function(h,g,b){var a=this,e=a.dom,c=e.style,d=a._needsTableWidthFix,f=c.display;if(d&&!b){c.display='none'}k.call(a,h,g,b);if(d&&!b){e.scrollWidth;c.display=f}return a}}if(Ext.isIE8){d.height={name:'height',set:function(f,b,e){var a=e.component,d,c;if(a&&a._syncFrameHeight&&e===a.el){c=a.frameBody.dom.style;if(p.test(b)){d=a.getFrameInfo();if(d){c.height=parseInt(b,10)-d.height+'px'}}else {if(!b||b==='auto'){c.height=''}}}f.style.height=b}};a.setHeight=function(b,e){var a=this.component,d,c;if(a&&a._syncFrameHeight&&this===a.el){c=a.frameBody.dom.style;if(!b||b==='auto'){c.height=''}else {d=a.getFrameInfo();if(d){c.height=b-d.height+'px'}}}return m.call(this,b,e)};a.setSize=function(f,b,e){var a=this.component,d,c;if(a&&a._syncFrameHeight&&this===a.el){c=a.frameBody.dom.style;if(!b||b==='auto'){c.height=''}else {d=a.getFrameInfo();if(d){c.height=b-d.height+'px'}}}return k.call(this,f,b,e)};a.setText=function(b){var a=this.dom;if(!(a.childNodes.length===1&&a.firstChild.nodeType===3)){while(a.lastChild&&a.lastChild.nodeType!==3){a.removeChild(a.lastChild)}a.appendChild(document.createTextNode())}a.firstChild.data=b};a.unselectable=function(){l.call(this);this.dom.onselectstart=function(){return !1}}}function fixTransparent(d,e,c,b){var a=b[this.name]||'';return n.test(a)?'transparent':a}function makeSelectionRestoreFn(a,b,c){return function(){a.selectionStart=b;a.selectionEnd=c}}function getRightMarginFixCleaner(i){var h=e.DisplayChangeInputSelectionBug,f=e.DisplayChangeTextAreaSelectionBug,a,d,b,c;if(h||f){a=g.getActiveElement();d=a&&a.tagName;if(f&&d==='TEXTAREA'||h&&d==='INPUT'&&a.type==='text'){if(Ext.fly(i).isAncestor(a)){b=a.selectionStart;c=a.selectionEnd;if(Ext.isNumber(b)&&Ext.isNumber(c)){return makeSelectionRestoreFn(a,b,c)}}}}return Ext.emptyFn}function fixRightMargin(c,g,f,e){var b=e.marginRight,a,d;if(b!=='0px'){a=c.style;d=a.display;a.display='inline-block';b=(f?e:c.ownerDocument.defaultView.getComputedStyle(c,null)).marginRight;a.display=d}return b}function fixRightMarginAndInputFocus(b,h,g,f){var c=f.marginRight,a,d,e;if(c!=='0px'){a=b.style;d=getRightMarginFixCleaner(b);e=a.display;a.display='inline-block';c=(g?f:b.ownerDocument.defaultView.getComputedStyle(b,'')).marginRight;a.display=e;d()}return c}if(!e.RightMargin){d.marginRight=d['margin-right']={name:'marginRight',get:e.DisplayChangeInputSelectionBug||e.DisplayChangeTextAreaSelectionBug?fixRightMarginAndInputFocus:fixRightMargin}}if(!e.TransparentColor){f=['background-color','border-color','color','outline-color'];for(j=f.length;j--;){i=f[j];h=g.normalize(i);d[i]=d[h]={name:h,get:fixTransparent}}}a.verticalStyleHooks90=c=Ext.Object.chain(d);a.verticalStyleHooks270=b=Ext.Object.chain(d);c.width=d.height||{name:'height'};c.height=d.width||{name:'width'};c['margin-top']={name:'marginLeft'};c['margin-right']={name:'marginTop'};c['margin-bottom']={name:'marginRight'};c['margin-left']={name:'marginBottom'};c['padding-top']={name:'paddingLeft'};c['padding-right']={name:'paddingTop'};c['padding-bottom']={name:'paddingRight'};c['padding-left']={name:'paddingBottom'};c['border-top']={name:'borderLeft'};c['border-right']={name:'borderTop'};c['border-bottom']={name:'borderRight'};c['border-left']={name:'borderBottom'};b.width=d.height||{name:'height'};b.height=d.width||{name:'width'};b['margin-top']={name:'marginRight'};b['margin-right']={name:'marginBottom'};b['margin-bottom']={name:'marginLeft'};b['margin-left']={name:'marginTop'};b['padding-top']={name:'paddingRight'};b['padding-right']={name:'paddingBottom'};b['padding-bottom']={name:'paddingLeft'};b['padding-left']={name:'paddingTop'};b['border-top']={name:'borderRight'};b['border-right']={name:'borderBottom'};b['border-bottom']={name:'borderLeft'};b['border-left']={name:'borderTop'};if(!Ext.scopeCss){Ext.getBody().addCls(Ext.baseCSSPrefix+'body')}},null,{priority:1500})});Ext.define('Ext.GlobalEvents',{extend:Ext.mixin.Observable,alternateClassName:'Ext.globalEvents',observableType:'global',singleton:!0,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},windowListeners:{resize:{fn:'fireResize'}},constructor:function(){var a=this;a.callParent();Ext.onInternalReady(function(){a.attachListeners()})},setPressedComponent:function(c,d){var a=this,b=a.pressedComponent;if(b&&b.onRelease){b.onRelease(d)}a.pressedComponent=c;if(c){a.pressedScrollStart=Ext.on({scrollstart:function(){a.setPressedComponent(null,d)},destroyable:!0})}else {a.pressedScrollStart=Ext.destroy(a.pressedScrollStart)}},attachListeners:function(){var a=this,c=Ext.getWin(),b=a.windowListeners;a.onlineState=Ext.isOnline();a.curHeight=Ext.Element.getViewportHeight();a.curWidth=Ext.Element.getViewportWidth();c.on({scope:a,online:'handleOnlineChange',offline:'handleOnlineChange'});if(b){b.scope=a;if(Ext.isModern){b.resize.onFrame=!0}else {b.resize.buffer=a.resizeBuffer}c.on(b)}Ext.getDoc().on({touchstart:'fireMouseDown',mousedown:'fireMouseDown',mouseup:'fireMouseUp',touchend:'fireMouseUp',drop:'fireMouseUp',dragend:'fireMouseUp',scope:a})},fireMouseDown:function(a){this.fireEvent('mousedown',a);Ext.ComponentManager.handleDocumentMouseDown(a)},fireMouseUp:function(a){this.fireEvent('mouseup',a);this.setPressedComponent(null,a)},fireResize:function(){var a=this,d=Ext.Element,c=d.getViewportWidth(),b=d.getViewportHeight();if(a.curHeight!==b||a.curWidth!==c){a.curHeight=b;a.curWidth=c;if(a.hasListeners.resize){a.fireEvent('resize',c,b)}}},handleOnlineChange:function(){var a=Ext.isOnline();if(a!==this.onlineState){this.onlineState=a;this.fireEvent('onlinechange',a)}}},function(a){Ext.hasListeners=a.hasListeners;Ext.on=function(){return a.addListener.apply(a,arguments)};Ext.un=function(){return a.removeListener.apply(a,arguments)};Ext.fireEvent=function(){return a.fireEvent.apply(a,arguments)};Ext.fireIdle=function(){if(a.hasListeners.idle&&!Ext._suppressIdle){a.fireEventArgs('idle')}Ext._suppressIdle=!1};Ext._suppressIdle=!1});Ext.define('Ext.overrides.GlobalEvents',{override:'Ext.GlobalEvents',attachListeners:function(){var a=this,b,c;if(Ext.isIE8){b=Ext.getDoc().dom.documentElement;c=Ext.Function.createBuffered(a.fireResize,a.resizeBuffer,a);Ext.getWin().dom.attachEvent('onresize',function(){if(b.clientWidth!==Ext.GlobalEvents.curWidth||b.clientHeight!==Ext.GlobalEvents.curHeight){c()}})}a.callParent()},deprecated:{5:{methods:{addListener:function(a,d,i,f,h,g,e){var c,b;if(a==='ready'){b=d}else {if(typeof a!=='string'){for(c in a){if(c==='ready'){b=a[c]}}}}if(b){Ext.onReady(b)}this.callParent([a,d,i,f,h,g,e])}}}}});Ext.define('Ext.Glyph',{isGlyph:!0,constructor:function(a){if(a){this.setGlyph(a)}},setGlyph:function(a){var b;this.glyphConfig=a;if(typeof a==='string'){b=a.split('@');a=isNaN(b[0])?parseInt('0'+b[0],16):parseInt(b[0],10);if(isNaN(a)||!a){a=b[0].charCodeAt(0)}this.fontFamily=b[1]||Ext._glyphFontFamily}else {this.fontFamily=Ext._glyphFontFamily}this.codepoint=a;this.character=Ext.String.fromCodePoint(this.codepoint);return this},getStyle:function(){return {'font-family':this.fontFamily}},isEqual:function(a){return a&&a.isGlyph&&a.codepoint===this.codepoint&&a.fontFamily===this.fontFamily},statics:function(){var a;return {fly:function(b){return b.isGlyph?b:(a||(a=new Ext.Glyph())).setGlyph(b)}}}()});Ext.USE_NATIVE_JSON=!0;Ext.JSON=new function(){var me=this,hasNative=window.JSON&&JSON.toString()==='[object JSON]',useHasOwn=!!{}.hasOwnProperty,pad=function(a){return a<10?'0'+a:a},doDecode=function(json){return eval('('+json+')')},doEncode=function(a,b){if(a===null||a===undefined){return 'null'}else {if(Ext.isDate(a)){return me.encodeDate(a)}else {if(Ext.isString(a)){if(Ext.isMSDate(a)){return me.encodeMSDate(a)}else {return me.encodeString(a)}}else {if(typeof a==='number'){return isFinite(a)?String(a):'null'}else {if(Ext.isBoolean(a)){return String(a)}else {if(typeof a.toJSON==='function'){return doEncode(a.toJSON())}else {if(Ext.isArray(a)){return encodeArray(a,b)}else {if(Ext.isObject(a)){return encodeObject(a,b)}else {if(typeof a==='function'){return 'null'}}}}}}}}}return 'undefined'},m={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\','\v':'\\u000b'},charToReplace=/[\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(a){return '"'+a.replace(charToReplace,function(b){var c=m[b];return typeof c==='string'?c:'\\u'+('0000'+b.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(a){return '"'+a+'"'},encodeArrayPretty=function(e,d){var f=e.length,c=d+'   ',g=','+c,a=['[',c],b;for(b=0;b<f;b+=1){a.push(me.encodeValue(e[b],c),g)}a[a.length-1]=d+']';return a.join('')},encodeObjectPretty=function(e,f){var d=f+'   ',g=','+d,b=['{',d],c,a;for(c in e){a=e[c];if(!useHasOwn||e.hasOwnProperty(c)){if(typeof a==='function'||a===undefined||a.isInstance){continue}b.push(me.encodeValue(c)+': '+me.encodeValue(a,d),g)}}b[b.length-1]=f+'}';return b.join('')},encodeArray=function(c,d){if(d){return encodeArrayPretty(c,d)}var a=['[',''],e=c.length,b;for(b=0;b<e;b+=1){a.push(me.encodeValue(c[b]),',')}a[a.length-1]=']';return a.join('')},encodeObject=function(d,e){if(e){return encodeObjectPretty(d,e)}var b=['{',''],c,a;for(c in d){a=d[c];if(!useHasOwn||d.hasOwnProperty(c)){if(typeof a==='function'||a===undefined){continue}b.push(me.encodeValue(c),':',me.encodeValue(a),',')}}b[b.length-1]='}';return b.join('')};me.encodeString=encodeString;me.encodeValue=doEncode;me.encodeDate=function(a){return '"'+a.getFullYear()+'-'+pad(a.getMonth()+1)+'-'+pad(a.getDate())+'T'+pad(a.getHours())+':'+pad(a.getMinutes())+':'+pad(a.getSeconds())+'"'};me.encode=function(a){if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.stringify(a)}return me.encodeValue(a)};me.decode=function(a,b){try{if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.parse(a)}return doDecode(a)}catch(c){if(b){return null}Ext.raise({sourceClass:'Ext.JSON',sourceMethod:'decode',msg:"You're trying to decode an invalid JSON String: "+a})}};me.encodeMSDate=encodeMSDate;if(!Ext.util){Ext.util={}}Ext.util.JSON=me;Ext.encode=me.encode;Ext.decode=me.decode}();Ext.define('Ext.mixin.Inheritable',{extend:Ext.Mixin,mixinConfig:{id:'inheritable'},getInherited:function(i){var a=this,b=i&&a.inheritedStateInner||a.inheritedState,h=a.getRefOwner(),f=a.isContainer,d,e,g,c;if(!b||b.invalid){d=a.getRefOwner();c=a.ownerLayout;if(h){g=c?c===h.layout:!0}a.inheritedState=b=Ext.Object.chain(d?d.getInherited(g):Ext.rootInheritedState);if(f){a.inheritedStateInner=e=Ext.Object.chain(b)}a.initInheritedState(b,e);b=f&&i?a.inheritedStateInner:a.inheritedState}return b},getInheritedConfig:function(b,e){var a=this.inheritedState,d,c;if(!a||a.invalid){a=this.getInherited()}c=a[b];if(e&&a.hasOwnProperty(b)){d=c;delete a[b];c=a[b];a[b]=d}return c},resolveListenerScope:function(f,d){var a=this,e=typeof d==='boolean',b=Ext._namedScopes[f],c;if(!b){c=a.getInheritedConfig('defaultListenerScope',e?d:!0)||f||a}else {if(b.isController){c=a.getInheritedConfig('controller',e?d:!b.isSelf)}else {if(b.isOwner){c=a.getRefOwner()}else {if(b.isSelf){c=a.getInheritedConfig('defaultListenerScope',e&&d)||a}else {if(b.isThis){c=a}}}}}return c||null},resolveSatelliteListenerScope:function(e,d){var c=this,b=Ext._namedScopes[d],a;if(!b){a=c.getInheritedConfig('defaultListenerScope')||d||c}else {if(b.isController){a=c.getInheritedConfig('controller')}else {if(b.isSelf){a=c.getInheritedConfig('defaultListenerScope')||e}else {if(b.isThis){a=e}}}}return a||null},lookupNameHolder:function(a){return this.getInheritedConfig('nameHolder',a!==!1)||null},lookupReferenceHolder:function(a){return this.getInheritedConfig('referenceHolder',a!==!1)||null},getRefOwner:function(){var a=this;return a.ownerCmp||a.ownerCt||a.parent||a.$initParent||a.floatParent},bubble:function(d,b,c){var a;for(a=this;a;a=a.getRefOwner()){if(d.apply(b||a,c||[a])===!1){break}}},isDescendantOf:function(a){return a?a.isAncestor(this):!1},isAncestor:function(a){while(a){if(a.getRefOwner()===this){return !0}a=a.getRefOwner()}return !1},invalidateInheritedState:function(){var a=this.inheritedState;if(a){a.invalid=!0;delete this.inheritedState}},privates:{_fixReference:function(){var b=this,a;if(b.name&&b.nameable){a=b.lookupNameHolder();if(a&&!a.destroyed){a.attachNameRef(b)}}if(b.reference){a=b.lookupReferenceHolder();if(a&&!a.destroyed){a.attachReference(b)}}},onInheritedAdd:function(c,b){var a=this;if(a.inheritedState&&b){a.invalidateInheritedState()}Ext.ComponentManager.markReferencesDirty()},onInheritedRemove:function(b){var a=this;Ext.ComponentManager.markReferencesDirty();if(a.inheritedState&&!b){a.invalidateInheritedState()}}}},function(){Ext.rootInheritedState={}});Ext.define('Ext.mixin.Bindable',{mixinId:'bindable',config:{bind:{$value:null,lazy:!0},controller:null,defaultListenerScope:!1,publishes:{$value:null,lazy:!0,merge:function(a,b){return this.mergeSets(a,b)}},session:{$value:null,lazy:!0},twoWayBindable:{$value:null,lazy:!0,merge:function(a,b){return this.mergeSets(a,b)}},viewModel:{$value:null,lazy:!0}},defaultBindProperty:null,nameable:!1,shareableName:!1,reference:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,getReference:function(){return this.reference},initInheritedState:function(b){var a=this,f=a.reference,c=a.getController(),d=a.getConfig('viewModel',!0),e=a.getConfig('session',!0),g=a.getDefaultListenerScope();if(c){b.controller=c}if(g){b.defaultListenerScope=a}else {if(c){b.defaultListenerScope=c}}if(d){if(!d.isViewModel){d=a}b.viewModel=d}if(e){if(!e.isSession){e=a}b.session=e}if(f){a.referenceKey=(b.referencePath||'')+f;a.viewModelKey=(b.viewModelPath||'')+f}},isBound:function(b){var a=this.getBind();return !!(a&&a[b||this.defaultBindProperty])},lookupController:function(a){return this.getInheritedConfig('controller',a)||null},lookupSession:function(b){var a=b?null:this.getSession();if(!a){a=this.getInheritedConfig('session',b);if(a&&!a.isSession){a=a.getInherited().session=a.getSession()}}return a||null},lookupViewModel:function(b){var a=b?null:this.getViewModel();if(!a){a=this.getInheritedConfig('viewModel',b);if(a&&!a.isViewModel){a=a.getInherited().viewModel=a.getViewModel()}}return a||null},publishState:function(c,a){var b=this,e=b.publishedState,i=b.getBind(),d=i&&c&&i[c],j=0,h,g,k,f;if(d&&!d.syncing&&!d.isReadOnly()){if(d.calls||!(a==null||a===b.getInitialConfig()[c])){d.setValue(a)}}if(!(g=b.getPublishes())){return}if(!(k=b.lookupViewModel())){return}if(!(f=b.viewModelKey)){return}e=e||(b.publishedState={});if(c){if(!g[c]){return}if(!(a&&a.constructor===Object)&&!(a instanceof Array)){if(e[c]===a){return}}f+='.';f+=c}else {for(h in g){++j;e[h]=b.getConfig(h)}if(!j){return}a=e}k.set(f,a)},privates:{applyBind:function(e,c){if(!e){return c}var b=this,j=b.lookupViewModel(),h=b.getTwoWayBindable(),i=b._getBindTemplateScope,a,f,d,g;if(typeof e==='string'){a=e;e={};e[b.defaultBindProperty]=a}for(d in e){g=e[d];a=c&&c[d];if(a){a.destroy();delete c[d]}if(g){if(!a&&h&&h[d]){(f||(f={}))[d]='_onConfigPropChange'}a=j.bind(g,b.onBindNotify,b);a._config=Ext.Config.get(d);a.getTemplateScope=i;(c||(c={}))[d]=a}}if(f){f.scope=b;b.watchConfig(f)}b.$bindings=c;return c},applyController:function(a){if(a){a=Ext.Factory.controller(a);a.setView(this)}this.controller=a;return a},updatePublishes:function(b){var d=this,c,a;if(b&&d.lookupViewModel()){for(c in b){if(b[c]){(a||(a={}))[c]='_onConfigPropChange'}}if(a){a.scope=d;d.watchConfig(a)}}return b},applySession:function(a){var b,c;if(!a){return null}if(!a.isSession){b=this.lookupSession(!0);c=a===!0?{}:a;if(b){a=b.spawn(c)}else {a=new Ext.data['Session'](c)}}return a},applyViewModel:function(a){var c=this,b,d;if(!a){return null}if(!a.isViewModel){b={parent:c.lookupViewModel(!0),view:c};b.session=c.getSession();if(!d&&!b.parent){b.session=c.lookupSession()}if(a){if(a.constructor===Object){Ext.apply(b,a)}else {if(typeof a==='string'){b.type=a}}}a=Ext.Factory.viewModel(b)}return a},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},destroyBindable:function(){var a=this,c=a.getConfig('viewModel',!0),b=a.getConfig('session',!0),d=a.getController();if(c&&c.isViewModel){c.destroy();a.setViewModel(null)}if(b&&b.isSession){if(b.getAutoDestroy()){b.destroy()}a.setSession(null)}if(d){a.setController(null);d.destroy()}},initBindable:function(){var a=this,b=a.controller;a.initBindable=Ext.emptyFn;a.getBind();a.getPublishes();if(!a.viewModel){a.getViewModel()}if(b){b.initBindings()}if(a.reference){a.publishState()}},isSyncing:function(d){var b=this.getBind(),c=!1,a;if(b){a=b[d];if(a){c=a.syncing>0}}return c},notifyIf:function(b){var a=this.lookupViewModel(b);if(a){a.notify()}},onBindNotify:function(b,c,a){a.syncing=a.syncing+1||1;this[a._config.names.set](b);--a.syncing},_onConfigPropChange:function(c,b,a){c.publishState(b,a)},removeBindings:function(){var d=this,b=d.$bindings,a,c;if(b){for(c in b){a=b[c];if(a){a.destroy();a._config=a.getTemplateScope=null;b[c]=null}}}},updateSession:function(a){var b=this.getInherited();if(a){b.session=a}else {delete b.session}},updateViewModel:function(a,e){var b=this,d=b.getInherited(),c=b.getController();if(a){b.hasVM=!0;d.viewModel=a;a.setView(b);if(c){c.initViewModel(a)}}else {delete d.viewModel}b.viewModel=a}}});Ext.define('Ext.mixin.ComponentDelegation',{extend:Ext.Mixin,mixinConfig:{id:'componentDelegation'},privates:{addDelegatedListener:function(b,k,j,a,d,i,h){var c=this,e,g,f;b=Ext.canonicalEventName(b);d=d||a.order;if(d){f=a&&a.priority;if(!f){a=a?Ext.Object.chain(a):{};a.priority=c.$orderToPriority[d]}}e=c.$delegatedEvents||(c.$delegatedEvents={});g=e[b]||(e[b]=new Ext.util.Event(c,b));if(g.addListener(k,j,a,i,h)){c.$hasDelegatedListeners._incr_(b)}},clearDelegatedListeners:function(){var e=this,a=e.$delegatedEvents,b,c,d;if(a){for(b in a){c=a[b];d=c.listeners.length;c.clearListeners();e.$hasDelegatedListeners._decr_(b,d);delete a[b]}}},doFireDelegatedEvent:function(f,g){var e=this,d=!0,a,b,c;if(e.$hasDelegatedListeners[f]){a=e.getRefOwner();while(a){b=a.$delegatedEvents;if(b){c=b[f];if(c){d=c.fireDelegated(e,g);if(d===!1){break}}}a=a.getRefOwner()}}return d},removeDelegatedListener:function(c,f,e){var d=this,b=d.$delegatedEvents,a;if(b){a=b[c];if(a&&a.removeListener(f,e)){d.$hasDelegatedListeners._decr_(c);if(a.listeners.length===0){delete b[c]}}}},destroyComponentDelegation:function(){if(this.clearPropertiesOnDestroy){this.$delegatedEvents=null}}},onClassMixedIn:function(a){function HasListeners(){}a.prototype.HasListeners=a.HasListeners=HasListeners;HasListeners.prototype=a.hasListeners=new Ext.mixin.ComponentDelegation.HasDelegatedListeners()}},function(a){function HasDelegatedListeners(){}a.HasDelegatedListeners=HasDelegatedListeners;HasDelegatedListeners.prototype=a.prototype.$hasDelegatedListeners=new Ext.mixin.Observable.HasListeners()});Ext.define('Ext.plugin.Abstract',{alternateClassName:'Ext.AbstractPlugin',mixins:[Ext.mixin.Identifiable],isPlugin:!0,constructor:function(a){if(a){this.cmp=a.cmp;this.pluginConfig=a;this.initConfig(a)}},init:Ext.emptyFn,destroy:function(){var a=this;a.destroy=Ext.emptyFn;a.destroying=!0;a.cmp=a.pluginConfig=null;a.doDestroy();a.callParent()},doDestroy:Ext.emptyFn,clonePlugin:function(a){return new this.self(Ext.apply({},a,this.pluginConfig))},getCmp:function(){return this.cmp},setCmp:function(a){this.cmp=a},getStatefulOwner:function(){return [this.cmp,'plugins']},onClassExtended:function(d,b,e){var a=b.alias,c=d.prototype;if(a&&!b.ptype){if(Ext.isArray(a)){a=a[0]}c.ptype=a.split('plugin.')[1]}},resolveListenerScope:function(b){var a=this,d=a.getCmp(),c;if(d){c=d.resolveSatelliteListenerScope(a,b)}return c||a.mixins.observable.resolveListenerScope.call(a,b)},statics:{decode:function(a,e,f){if(a){var h=Ext.typeOf(a),c,d,b,g;if(h==='string'){b={};b[e]=a;a=[b]}else {if(a.isInstance){a=[a]}else {if(h==='object'){if(a[e]){a=[a]}else {b=f?Ext.merge(Ext.clone(f),a):a;a=[];for(d in b){if(!(g=b[d])){continue}c={id:d};c[e]=d;Ext.apply(c,g);a.push(c)}Ext.sortByWeight(a)}}else {a=a.slice()}}}}return a}}});Ext.define('Ext.overrides.plugin.Abstract',{override:'Ext.plugin.Abstract',$configStrict:!1,$configPrefixed:!1,disabled:!1,getState:null,applyState:null,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}});Ext.define('Ext.mixin.Pluggable',function(a){return {mixinId:'pluggable',config:{plugins:null},addPlugin:function(b){var c=this,d=c.getPlugins();if(d){b=c.createPlugin(b);b.init(c);d.push(b)}else {c.setPlugins(b);b=c.getPlugins()[0]}return b},destroyPlugin:function(b){return this.removePlugin(b,!0)},findPlugin:function(f){var d=this.getPlugins(),g=d&&d.length,c,b,e;for(c=0;c<g&&!e;c++){b=d[c];if(b.type===f||b.ptype===f){e=b}}return e||null},getPlugin:function(f){var d=this.getPlugins(),g=d&&d.length,c,b,e;for(c=0;c<g&&!e;c++){b=d[c];if(b.id===f||b.pluginId===f){e=b}}return e||null},removePlugin:function(e,f){var c=this.getPlugins(),d=c&&c.length||0,b;while(d-->0){b=c[d];if(b===e||b.id===e){c.splice(d,1);if(f){if(b.destroy){b.destroy()}}else {if(b.detachCmp){b.detachCmp();if(b.setCmp){b.setCmp(null)}}}break}b=null}return b},privates:{statics:{idSeed:0},activatePlugin:function(h){var e=this,d=e.initialConfig,b=d&&d.plugins,i=null,f,c,g;if(b){c=e.config.plugins;c=c&&typeof c==='object'?c:null;b=Ext.plugin.Abstract.decode(b,'type',c);for(f=b.length;f-->0;){g=b[f];if(g===h||g.type===h){e.initialConfig=d=Ext.apply({},d);d.plugins=b;b[f]=i=e.createPlugin(g);break}}}return i},applyPlugins:function(c,e){var h=this,g=e&&e.length||0,f,b,d;if(c){c=Ext.plugin.Abstract.decode(c,'type')}for(b=0;b<g;++b){e[b].$dead=!0}f=c&&c.length||0;for(b=0;b<f;++b){c[b]=h.createPlugin(c[b])}for(b=0;b<f;++b){d=c[b];if(d.$dead){delete d.$dead}else {d.init(h)}}for(b=0;b<g;++b){if((d=e[b]).$dead){delete d.$dead;Ext.destroy(d)}}return c},createPlugin:function(b){var c;if(typeof b==='string'){b={type:b}}c=b;if(!b.isInstance){b.cmp=this;c=Ext.factory(b,null,null,'plugin');delete b.cmp}if(!c.id){c.id=++a.idSeed}if(c.setCmp){c.setCmp(this)}return c}}}});Ext.define('Ext.mixin.Keyboard',function(a){return {extend:Ext.Mixin,mixinConfig:{id:'keyboard'},config:{keyMap:{$value:null,cached:!0,merge:function(c,h,j,i){var e,d,f,b,g;if(c===null){return c}e=h&&!j.isInstance?Ext.Object.chain(h):{};for(d in c){if(d!=='scope'){f=d.toUpperCase();if(!i||e[f]===undefined){b=c[d];if(b){if(typeof b==='string'||typeof b==='function'){b={handler:b}}else {b=Ext.apply({handler:b.fn},b)}g=b.scope||c.scope||'self';b.scope=g==='controller'?'self.controller':g}e[f]=b}}}return e}},keyMapEnabled:null},keyMapTarget:'el',applyKeyMap:function(d,c){var b=this,e=b.hasOwnProperty('config');if(e&&c&&c.$owner!==b){c=Ext.apply({},c)}d=d?a.combineKeyMaps(c,d,e&&b):null;if(b._keyMapReady){b.setKeyMapListener(d&&b.getKeyMapEnabled())}return d},initKeyMap:function(){var b=this,c=b.getKeyMapEnabled();b._keyMapReady=!0;if(c===null){b.setKeyMapEnabled(!0)}else {b.setKeyMapListener(c&&b.getKeyMap())}},disableKeyMapGroup:function(b){this.setKeyMapGroupEnabled(b,!1)},enableKeyMapGroup:function(b){this.setKeyMapGroupEnabled(b,!0)},setKeyMapGroupEnabled:function(d,e){var b=this,c=b.disabledKeyMapGroups||(b.disabledKeyMapGroups={});c[d]=!e},updateKeyMapEnabled:function(b){this.setKeyMapListener(b&&this._keyMapReady&&this.getKeyMap())},privates:{_keyMapReady:!1,comparePriorities:function(b,c){return (c.priority||0)-(b.priority||0)},findKeyMapEntries:function(j){var e=this,f=e.disabledKeyMapGroups,g=e.getKeyMap(),b=g&&a.getKeyName(j),h=[],c,i,d;b=b&&g[b];if(b){if(!b.sorted){Ext.Array.sort(b,e.comparePriorities);b.sorted=!0}i=b.length;for(d=0;d<i;d++){c=b[d];if(!f||!f[c.group]){if(a.matchEntry(c,j)){h.push(c)}}}}return h},onKeyMapEvent:function(g){var f=this,c=f.getKeyMapEnabled()?f.findKeyMapEntries(g):null,h=c&&c.length,b,e,d;f.lastKeyMapEvent=g;for(b=0;b<h&&d!==!1;b++){e=c[b];d=Ext.callback(e.handler,e.scope,[g,this],0,this)}return d},setKeyMapListener:function(e){var b=this,d=b._keyMapListener,c;if(d){d.destroy();d=null}if(e){if(e){c=b[b.keyMapTarget];if(typeof c==='function'){c=c.call(b)}d=c.on({destroyable:!0,scope:b,keydown:'onKeyMapEvent',keypress:'onKeyMapEvent'})}}b._keyMapListener=d||null},statics:{_charCodeRe:/^#([\d]+)$/,_keySpecRe:/^(?:(?:(\*)[\+\-])|(?:([a-z\+\-]*)[\+\-]))?(?:([a-z0-9_]+|[\+\-]|(?:#?\d+))(?::([a-z]+))?)$/i,_delimiterRe:/-|\+/,_keyMapEvents:{charCode:'keypress',keyCode:'keydown'},combineKeyMaps:function(d,h,e){var i=h.scope||'controller',f,g,b,c;for(g in h){if(g==='scope'){continue}if(!(b=h[g])){if(!d){continue}}else {if(typeof b==='string'||typeof b==='function'){b={handler:b,scope:i}}else {if(b){b=Ext.apply({handler:b.fn,scope:i},b)}}d=d||{}}if(a.parseEntry(g,f=b||{})){c=d[f.name];if(c){if(e&&c.$owner!==e){d[f.name]=c=c.slice();c.$owner=e}c.push(b);c.sorted=!1}else {c=d[f.name]=[b];c.$owner=e;c.sorted=!0}}}if(d&&e){d.$owner=e}return d||null},getKeyName:function(b){var c;if(b.isEvent){c=b.keyCode||b.charCode;b=b.browserEvent;if(c===229&&'code' in b){if(Ext.String.startsWith(b.code,'Key')){return b.key.substr(3)}if(Ext.String.startsWith(b.code,'Digit')){return b.key.substr(5)}}}else {c=b}return Ext.event.Event.keyCodes[c]||String.fromCharCode(c)},matchEntry:function(b,d){var c=d.browserEvent,e;if(d.type!==b.event){return !1}if(!(e=b.charCode)){if(b.keyCode!==d.keyCode||!b.ignoreModifiers&&!b.shiftKey!==!c.shiftKey){return !1}}else {if(d.getCharCode()!==e){return !1}}return b.ignoreModifiers||!b.ctrlKey===!c.ctrlKey&&!b.altKey===!c.altKey&&!b.metaKey===!c.metaKey&&!b.shiftKey===!c.shiftKey},parseEntry:function(i,c){i=i.toUpperCase();var f=this,j=Ext.event.Event,m=j.keyFlags,b=f._keySpecRe.exec(i),h='keyCode',e,d,g,k,l;if(b){e=b[3];if(b[4]){c.group=b[4]}if(!(c.ignoreModifiers=!!b[1])&&b[2]){b=b[2].split(f._delimiterRe);l=b.length;for(g=0;g<l;g++){c[m[b[g]]]=!0}}c.name=e;if(isNaN(d=j[e])){if(!(k=f._charCodeRe.exec(e))){if(e.length===1){d=e.charCodeAt(0)}}else {d=+k[1]}if(d){h='charCode'}else {d=+e}c.name=a.getKeyName(d)}c.event=c.event||f._keyMapEvents[h];return !isNaN(d)&&(c[h]=d)}}}}}});Ext.define('Ext.mixin.Focusable',{mixinId:'focusable',$isFocusableEntity:!0,focusable:!1,hasFocus:!1,containsFocus:!1,focusCls:Ext.baseCSSPrefix+'focused',focusEl:'el',getFocusEl:function(){var a=this.focusEl;return a&&a.dom?a:null},getFocusClsEl:function(){return this.getFocusEl()},initFocusable:Ext.emptyFn,initFocusableEvents:function(a){this.initFocusableElement(a)},enableFocusable:Ext.emptyFn,disableFocusable:function(){var a=this;if(a.hasFocus){a.revertFocus()}a.removeFocusCls()},destroyFocusable:function(){var a=this;Ext.destroy(a.focusListeners);a.focusListeners=a.focusEnterEvent=a.focusTask=null;a.focusEl=a.ariaEl=null},isFocusable:function(c){var b=this,a;if(!b.focusable&&(!b.isContainer||!c)){return !1}a=b.getFocusEl();if(a&&b.canFocus()){return a&&!a.destroyed&&a.isFocusable(c)}return !1},isDestructing:function(){var a;for(a=this;a;a=a.getRefOwner()){if(a.destroying||a.destroyed){return !0}}return !1},canFocus:function(f,e){var a=this,c=a.ownerFocusableContainer,d=c&&c.allowFocusingDisabledChildren,b;b=!a.destroyed&&a.rendered&&!a.isDestructing()&&(a.isContainer||a.focusable)&&(!a.isDisabled()||d)&&(f||a.isVisible(!0));return b||e&&!!a.findFocusTarget()},focus:function(d){var b=this,a,c;if(!b.focusable&&!b.isContainer||b.destroyed||b.destroying){return !1}if(b.canFocus()&&(a=b.getFocusEl())){if(a.$isFocusableEntity){return a.focus.apply(a,arguments)}c=a.dom;if(c){a.focus();if(d&&(b.selectText||c.select)){if(b.selectText){if(Ext.isArray(d)){b.selectText.apply(b,d)}else {b.selectText()}}else {c.select()}}}else {if(a.focus){a.focus()}else {return !1}}}else {a=b.findFocusTarget();if(a&&a!==b){return a.focus.apply(a,arguments)}else {return !1}}return !0},onBlur:function(b){var a=this,c=a.ownerFocusableContainer;a.hasFocus=!1;if(a.beforeBlur&&!a.beforeBlur.$emptyFn){a.beforeBlur(b)}if(c){c.beforeFocusableChildBlur(a,b)}a.removeFocusCls(b);if(a.hasListeners.blur){a.fireEvent('blur',a,b)}if(a.postBlur&&!a.postBlur.$emptyFn){a.postBlur(b)}if(c){c.afterFocusableChildBlur(a,b)}},onFocus:function(b){var a=this,c=a.ownerFocusableContainer;if(a.canFocus()){if(a.beforeFocus&&!a.beforeFocus.$emptyFn){a.beforeFocus(b)}if(c){c.beforeFocusableChildFocus(a,b)}a.addFocusCls(b);if(!a.hasFocus){a.hasFocus=!0;a.fireEvent('focus',a,b)}if(a.postFocus&&!a.postFocus.$emptyFn){a.postFocus(b)}if(c){c.afterFocusableChildFocus(a,b)}}},getTabIndex:function(){var c=this,b,a;if(!c.focusable){return}b=c.getFocusEl();if(b){if(b.$isFocusableEntity){a=b.getTabIndex()}else {if(b.isElement&&b.dom){a=b.dom.getAttribute('tabIndex');if(a!==null){a-=0}}else {return}}}if(typeof a!=='number'){a=c.tabIndex}return a},setTabIndex:function(c,g){var a=this,e=a.ownerFocusableContainer,f=e&&e.allowFocusingDisabledChildren,d=a.focusable,b;if(!d&&!(a.forceTabIndex||c==null)){return}a.tabIndex=c;if(a.destroying||a.destroyed||a.isDisabled()&&!f){return}a.focusable=!0;b=g||a.getFocusEl();a.focusable=d;if(b){if(b.$isFocusableEntity){b.setTabIndex(c)}else {if(b.isElement&&b.dom){b.setTabIndex(c)}}}},onFocusEnter:function(b){var a=this;if(a.destroying||a.destroyed){return}a.focusEnterEvent=b;a.containsFocus=!0;if(a.hasListeners.focusenter){a.fireEvent('focusenter',a,b)}},onFocusLeave:function(b){var a=this;if(a.destroying||a.destroyed){return}a.focusEnterEvent=null;a.containsFocus=!1;if(a.hasListeners.focusleave){a.fireEvent('focusleave',a,b)}},onFocusMove:Ext.emptyFn,privates:{forceTabIndex:!1,revertFocus:function(){var d=this,c=d.focusEnterEvent,e=Ext.Element.getActiveElement(),a,b,f;if(c&&!d.preventRefocus&&d.el.contains(e)){b=c.fromComponent;if(b&&(b.destroyed||b.isDestructing())){a=document.body}else {a=c.relatedTarget}if(a===document.body){b=d.findFocusTarget();if(b){a=b.getFocusEl()}}if(a&&a.$isFocusableEntity){if(!a.destroyed&&a.isFocusable()){a.focus()}}else {if(Ext.getDoc().contains(a)&&Ext.fly(a).isFocusable()){b=Ext.Component.from(a);if(b){b.revertFocusTo(a)}else {a.focus()}}else {if(c.fromComponent&&c.fromComponent.focus){f=c.fromComponent.focus();if(!f){e.blur()}}}}}},revertFocusTo:function(a){a.focus()},findFocusTarget:function(){var g=this,c,a,f,b,d,e;if(g.preventRefocus){return null}for(c=[],a=g.getRefOwner();a;a=a.getRefOwner()){if(!a.isDisabled()){c.unshift(a)}}for(b=0,f=c.length;b<f;b++){a=c[b];if(a.destroying||!a.isVisible()){c.length=b;break}}for(b=c.length-1;b>=0;b--){a=c[b];d=Ext.ComponentQuery.query(':canfocus()',a);if(d.length){e=Ext.Array.indexOf(d,Ext.ComponentManager.getActiveComponent());return d[e+1]||d[e-1]||d[0]}if(a.isFocusable&&a.isFocusable()){return a}}},initFocusableElement:function(d){var b=this,c=b.getTabIndex(),a=b.getFocusEl();if(a&&!a.$isFocusableEntity){if(c!=null&&(d||b.canFocus(!0))){b.setTabIndex(c,a)}if(!a.dom.hasAttribute('data-componentid')){a.dom.setAttribute('data-componentid',b.id)}}},addFocusCls:function(c){var b=this.focusCls,a;a=this.getFocusClsEl();if(b){a=this.getFocusClsEl(c);if(a){a.addCls(b)}}},removeFocusCls:function(c){var b=this.focusCls,a;if(b){a=this.getFocusClsEl(c);if(a){a.removeCls(b)}}},handleFocusEvent:function(c){var b=this,a;if(!b.focusable||b.destroying||b.destroyed){return}if(b.isFocusing(c)){a=new Ext.event.Event(c.event);a.type='focus';a.relatedTarget=c.fromElement;a.target=c.toElement;b.onFocus(a)}},handleBlurEvent:function(b){var c=this,a;if(!c.focusable||c.destroying||c.destroyed){return}if(b.toElement===document.body||c.isBlurring(b)){a=new Ext.event.Event(b.event);a.type='blur';a.target=b.fromElement;a.relatedTarget=b.toElement;c.onBlur(a)}},isFocusing:function(b){var a=this.getFocusEl();if(a){if(a.isFocusing){return a.isFocusing(b)}else {return a.dom===document.activeElement&&b.toElement===a.dom&&b.fromElement!==b.toElement}}return !1},isBlurring:function(b){var a=this.getFocusEl();if(a){if(a.isFocusing){return a.isBlurring(b)}else {return a.dom!==document.activeElement&&b.fromElement===a.dom&&b.fromElement!==b.toElement}}return !1},blur:function(){var a=this,b;if(!a.focusable||!a.canFocus()){return}b=a.getFocusEl();if(b){a.blurring=!0;b.blur();delete a.blurring}},isTabbable:function(){var b=this,a;if(b.focusable){a=b.getFocusEl();if(a&&a.isTabbable()){return a.isTabbable()}}return !1},disableTabbing:function(){var c=this,b=c.el,a;if(c.destroying||c.destroyed){return}if(b){b.saveTabbableState()}a=c.getFocusEl();if(a){if(a.$isFocusableEntity){a.disableTabbing()}else {if(a.isElement&&b&&!b.contains(a)){a.saveTabbableState()}}}},enableTabbing:function(d){var c=this,b=c.el,a;if(c.destroying||c.destroyed){return}a=c.getFocusEl();if(a){if(a.$isFocusableEntity){a.enableTabbing()}else {if(a.isElement&&b&&!b.contains(a)){a.restoreTabbableState()}}}if(b){b.restoreTabbableState({reset:d})}}}},function(){var b=Ext.baseCSSPrefix+'keyboard-mode',a=!1;Ext.enableKeyboardMode=Ext.isModern||!Ext.os.is.Desktop;Ext.setKeyboardMode=Ext.setKeyboardMode||function(a){Ext.keyboardMode=a;Ext.getBody().toggleCls(b,a)};Ext.isTouchMode=function(){return Ext.now()-Ext.lastTouchTime<500};Ext.syncKeyboardMode=function(c){var b;if(!Ext.enableKeyboardMode){return}b=c.type;if(b==='pointermove'){a=!1}else {a=b==='keydown';Ext.lastTouchTime=c.pointerType==='touch'&&Ext.now();Ext.setKeyboardMode(a)}};function keyboardModeFocusHandler(){if(a!==Ext.getBody().hasCls(b)){Ext.setKeyboardMode(a)}}Ext.getEnableKeyboardMode=function(){return Ext.enableKeyboardMode};Ext.setEnableKeyboardMode=function(b){var a={pointerdown:Ext.syncKeyboardMode,pointermove:Ext.syncKeyboardMode,keydown:Ext.syncKeyboardMode,capture:!0,delegated:!1};Ext.enableKeyboardMode=!!b;if(Ext.enableKeyboardMode){Ext.getWin().on(a);Ext.on('focus',keyboardModeFocusHandler)}else {Ext.getWin().un(a);Ext.un('focus',keyboardModeFocusHandler)}};Ext.onReady(function(){if(!Ext.enableKeyboardMode){Ext.getBody().addCls(b)}Ext.setEnableKeyboardMode(Ext.enableKeyboardMode)})});Ext.define('Ext.mixin.Accessible',{extend:Ext.Mixin,mixinConfig:{id:'accessible'},config:{ariaAttributes:{$value:null,lazy:!0}},ariaEl:'el',privates:{getAriaLabelEl:function(a){var e=[],c,b,f,d;if(a){if(Ext.isFunction(a)){return a.call(this)}else {if(!Ext.isArray(a)){a=[a]}c=this.lookupReferenceHolder();if(c){for(b=0,f=a.length;b<f;b++){d=c.lookupReference(a[b]);if(d){e.push(d.ariaEl.id)}}}}}return e.length?e.join(' '):null}}});Ext.define('Ext.Widget',{extend:Ext.Evented,xtype:'widget',alternateClassName:'Ext.Gadget',mixins:[Ext.mixin.Inheritable,Ext.mixin.Bindable,Ext.mixin.ComponentDelegation,Ext.mixin.Pluggable,Ext.mixin.Keyboard,Ext.mixin.Factoryable,Ext.mixin.Focusable,Ext.mixin.Accessible],isWidget:!0,factoryConfig:{creator:null,defaultProperty:'xtype',defaultType:'component',typeProperty:'xtype'},element:{reference:'element'},observableType:'component',cachedConfig:{cls:null,margin:null,style:null,border:null,touchAction:null,eventHandlers:{focus:'handleFocusEvent',blur:'handleBlurEvent'}},name:null,config:{renderTo:null,ui:null,userCls:null,ripple:null,hideMode:null,instanceCls:null},eventedConfig:{width:null,height:null,hidden:null,disabled:null},template:[],baseCls:null,classCls:null,classClsRoot:!0,classClsList:[],clearPropertiesOnDestroy:'async',focusEl:'element',ariaEl:'element',spaceRe:/\s+/,noBorderCls:Ext.baseCSSPrefix+'noborder-trbl',borderedCls:Ext.baseCSSPrefix+'bordered',disabledCls:Ext.baseCSSPrefix+'disabled',heightedCls:Ext.baseCSSPrefix+'heighted',widthedCls:Ext.baseCSSPrefix+'widthed',constructor:function(b){var a=this,e=a.baseCls,d=b&&b.renderTo,c;a.$iid=++Ext.$nextIid;if(e==null||e===!0){a.baseCls=a.classCls||Ext.baseCSSPrefix+a.xtype}if(b&&b.controller||a.config.controller){a.referenceHolder=!0}a.initId(b);a.initElement();if(d){b=Ext.apply({},b);delete b.renderTo}a.mixins.observable.constructor.call(a,b);if(a.focusable){a.initFocusableEvents(!0)}a.syncUiCls();Ext.ComponentManager.register(a);c=a.getController();if(c){c.init(a)}if(d){a.setRenderTo(d)}},afterCachedConfig:function(){var c=this,j=c.self.prototype,f=c.referenceList,i=c.renderElement,d,h,a,b,g,e;j.renderTemplate=d=document.createDocumentFragment();d.appendChild(i.clone(!0,!0));e=d.querySelectorAll('[id]');for(a=0,b=e.length;a<b;a++){h=e[a];h.removeAttribute('id')}for(a=0,b=f.length;a<b;a++){g=f[a];c[g].dom.removeAttribute('reference')}},applyHidden:function(a){return !!a},applyDisabled:function(a){return !!a},updateDisabled:function(c){var b=this,a=b.ownerFocusableContainer;if(a){if(c){if(!a.beforeFocusableChildDisable.$nullFn){a.beforeFocusableChildDisable(b)}}else {if(!a.beforeFocusableChildEnable.$nullFn){a.beforeFocusableChildEnable(b)}}}b.element.toggleCls(b.disabledCls,c);if(b.focusable){if(c){b.disableFocusable()}else {b.enableFocusable()}}if(a){if(c){if(!a.onFocusableChildDisable.$nullFn){a.onFocusableChildDisable(b)}}else {if(!a.onFocusableChildEnable.$nullFn){a.onFocusableChildEnable(b)}}}},disable:function(){this.setDisabled(!0)},enable:function(){this.setDisabled(!1)},isDisabled:function(){return this.getDisabled()},isEnabled:function(){return !this.getDisabled()},applyTouchAction:function(a,b){if(b!=null){a=Ext.merge({},b,a)}return a},applyWidth:function(a){return this.filterLengthValue(a)},applyHeight:function(a){return this.filterLengthValue(a)},updateBorder:function(a){var b=this;a=a||a===null;b.toggleCls(b.noBorderCls,!a);b.toggleCls(b.borderedCls,!!a)},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a);a.mixins.componentDelegation.clearDelegatedListeners.call(a)},destroy:function(){var a=this;a.isDestroying=a.destroying=!0;a.destroy=Ext.emptyFn;a.doDestroy();a.clearListeners();a.mixins.componentDelegation.destroyComponentDelegation.call(a);a.callParent()},doDestroy:function(){var a=this,e=a.referenceList,d=a.ownerFocusableContainer,c,f,b;a.ownerCmp=null;if(d&&!d.onFocusableChildDestroy.$nullFn){d.onFocusableChildDestroy(a)}for(c=0,f=e.length;c<f;c++){b=e[c];if(a.hasOwnProperty(b)){a[b].destroy();a[b]=null}}a.destroyBindable();Ext.ComponentManager.unregister(a)},doFireEvent:function(c,e,f){var a=this,d,b;b=a.mixins.observable.doFireEvent.call(a,c,e,f);if(b!==!1&&!a.destroyed){d=a.events[c];if(!d||!d.suspended){b=a.mixins.componentDelegation.doFireDelegatedEvent.call(a,c,e)}}return b},getBubbleTarget:function(){return this.getRefOwner()},getElementConfig:function(){var b=this,a=b.element;if(!('children' in a)){a=Ext.apply({children:b.getTemplate()},a)}return a},getSize:function(){return this.el.getSize()},getTemplate:function(){return Ext.clone(this.template)},getClassCls:function(){var e=this.self.prototype,a=e,b,c,d,f;while(a){c=a.hasOwnProperty('classCls')?a.classCls:null;if(c){if(c instanceof Array){for(d=0,f=c.length;d<f;d++){(b||(b=[])).push(c[d])}}else {(b||(b=[])).push(c)}}if(a.classClsRoot&&a.hasOwnProperty('classClsRoot')){break}a=a.superclass}if(b){e.classClsList=b}return b},hide:function(){this.setHidden(!0)},initElement:function(){var a=this,i=a.self.prototype,q=a.getId(),s=a.referenceList=a.referenceList=[],k=!i.hasOwnProperty('renderTemplate'),p=i.hasOwnProperty('uiReferences')?i.uiReferences:i.uiReferences={element:''},f,g,o,h,e,d,m,b,c,n,j,l,r;if(k){f=document.createDocumentFragment();o=a.processElementConfig.call(i);g=Ext.Element.create(o,!0);f.appendChild(g);e=f.querySelectorAll('[uiCls]');for(d=0,m=e.length;d<m;d++){b=e[d];c=b.getAttribute('reference');j=b.getAttribute('uiCls');p[c]=j;b.removeAttribute('uiCls')}}else {f=a.renderTemplate.cloneNode(!0);g=f.firstChild}e=f.querySelectorAll('[reference]');for(d=0,m=e.length;d<m;d++){b=e[d];c=b.getAttribute('reference');if(!k){b.removeAttribute('reference')}if(c==='element'){b.id=q;h=a.el=a.addElementReference(c,b);h.dom.setAttribute('data-componentid',q);if(k){n=a.getClassCls();if(n){h.addCls(n)}l=a.baseCls;if(l&&l!==a.classCls){h.addCls(l)}}}else {j=p[c];if(j&&k){r=a.addElementReference(c,b);a.initUiReference(c,j,!1)}else {a.addElementReferenceOnDemand(c,b)}}if(c===a.focusEl){a.addElementReference('focusEl',b)}if(c===a.ariaEl){a.addElementReferenceOnDemand('ariaEl',b)}s.push(c)}if(g===h.dom){a.renderElement=h}else {a.addElementReferenceOnDemand('renderElement',g)}g.setAttribute(a.dataXid,a.$iid)},dataXid:'data-'+Ext.baseCSSPrefix.substr(0,Ext.baseCSSPrefix.length-1)+'id',is:function(a){return Ext.ComponentQuery.is(this,a)},isHidden:function(c){var b=!!this.getHidden(),a;if(!b&&c){a=this.getRefOwner();while(a&&a!==c&&!b){b=!!a.getHidden();a=a.getRefOwner()}}return b},isVisible:function(a){return this.rendered&&!this.destroyed&&!this.isHidden(a)},isXType:function(a,b){return b?Ext.Array.indexOf(this.xtypes,a)!==-1:!!this.xtypesMap[a]},lookupTpl:function(a){return Ext.XTemplate.getTpl(this,a)},owns:function(a){var c=!1,b;if(a.isEvent){a=a.target}else {if(a.isElement){a=a.dom}}b=Ext.Component.from(a);if(b){c=b===this||!!b.up(this)}return c},render:function(a,d){if(a&&a.isWidget){a=a.el}var e=this.renderElement.dom,c=Ext.getDom(a),b;if(Ext.isNumber(b)){d=c.childNodes[d]}b=Ext.getDom(d);if(c){if(b){c.insertBefore(e,b)}else {c.appendChild(e)}this.setRendered(Ext.getBody().contains(e),!0)}},toggleCls:function(a,b){this.element.toggleCls(a,b);return this},resolveListenerScope:function(a,b){return this.mixins.inheritable.resolveListenerScope.call(this,a,b)},setSize:function(a,b){if(a&&typeof a==='object'){return this.setSize(a.width,a.height)}if(a!==undefined){this.setWidth(a)}if(b!==undefined){this.setHeight(b)}},show:function(){this.setHidden(!1)},addCls:function(c,a,b){if(!this.destroyed){this.el.replaceCls(null,c,a,b)}},applyCls:function(a){return a&&Ext.dom.Element.splitCls(a)},applyUi:function(a){return this.parseUi(a,!0)},removeCls:function(c,a,b){if(!this.destroyed){this.el.replaceCls(c,null,a,b)}},replaceCls:function(b,a,c,d){if(!this.destroyed){this.el.replaceCls(b,a,c,d)}},hasCls:function(a){return this.el.hasCls(a)},updateCls:function(a,b){this.element.replaceCls(b,a)},updateHidden:function(c){var b=this,d=b.renderElement,a=b.ownerFocusableContainer;if(a){if(c){if(!a.beforeFocusableChildHide.$nullFn){a.beforeFocusableChildHide(b)}}else {if(!a.beforeFocusableChildShow.$nullFn){a.beforeFocusableChildShow(b)}}}else {if(c){b.revertFocus()}}if(d&&!d.destroyed){if(c){d.hide()}else {d.show()}}if(b.focusableContainer&&b.activateFocusableContainer){b.activateFocusableContainer(!c)}if(a){if(c){if(!a.onFocusableChildHide.$nullFn){a.onFocusableChildHide(b)}}else {if(!a.onFocusableChildShow.$nullFn){a.onFocusableChildShow(b)}}}},updateMargin:function(a){this.element.setMargin(a)},updateRipple:function(c){var b=this,a=b.el;if(a){a.un('touchstart','onRippleStart',b);a.un('touchend','onRippleStart',b);a.destroyAllRipples();if(c.release){a.on('touchend','onRippleStart',b)}else {a.on('touchstart','onRippleStart',b)}}},shouldRipple:function(e){var a=this,f=a.getDisabled&&a.getDisabled(),d=a.el,c=!f&&a.getRipple(),b;if(c&&e){b=e.getTarget(a.noRippleSelector);if(b){if(d.dom===b||d.contains(b)){c=null}}}return c},onRippleStart:function(a){var b=this.shouldRipple(a);if(a.button===0&&b){this.el.ripple(a,b)}},applyStyle:function(a,b){if(b&&a===b&&Ext.isObject(b)){a=Ext.apply({},a)}this.element.applyStyles(a);return null},updateRenderTo:function(a){this.render(a)},updateTouchAction:function(b){var c,a,e,d;for(c in b){a=this[c];e=b[c];if(a&&a.isElement){a.setTouchAction(e)}else {d=!0}}if(d){this.el.setTouchAction(b)}},updateUi:function(){if(!this.isConfiguring){this.syncUiCls()}},updateWidth:function(a){var b=this.el;b.setWidth(a);b.toggleCls(this.widthedCls,a!=null&&a!=='auto')},updateHeight:function(a){var b=this.el;b.setHeight(a);b.toggleCls(this.heightedCls,a!=null&&a!=='auto')},isWidthed:function(){var a=this.getWidth();return a!=null&&a!=='auto'},isHeighted:function(){var a=this.getHeight();return a!=null&&a!=='auto'},up:function(c,b){var a=this.getRefOwner(),f=typeof b==='string',g=typeof b==='number',e=b&&b.isComponent,d=0;if(c){for(;a;a=a.getRefOwner()){if(a.destroyed){return null}d++;if(c.isComponent||c.isWidget){if(a===c){return a}}else {if(Ext.ComponentQuery.is(a,c)){return a}}if(f&&a.is(b)){return}if(g&&d===b){return}if(e&&a===b){return}}}return a},updateLayout:Ext.emptyFn,updateInstanceCls:function(c,d){var a=this,m=a.el,l=a.classClsList,k=Ext.Array,h=a.uiReferences,e,g,b,j,f,i;if(d){m.removeCls(d);d=k.from(d);for(b=0,j=d.length;b<j;b++){f=d[b];k.remove(l,f);for(e in h){g=a[e];i=h[e];g.removeCls(f+'-'+i)}}}if(c){m.addCls(c);c=k.from(c);a.classClsList=l.concat(c);for(b=0,j=c.length;b<j;b++){f=c[b];for(e in h){g=a[e];i=h[e];g.addCls(f+'-'+i)}}}if(!a.isConfiguring){a.syncUiCls()}},getBaseCls:function(){return this.baseCls},privates:{_hideModes:{clip:'CLIP',display:'DISPLAY',offsets:'OFFSETS',opacity:'OPACITY',visibility:'VISIBILITY'},noRippleSelector:'.'+Ext.baseCSSPrefix+'no-ripple',addElementReferenceOnDemand:function(a,b){if(this._elementListeners[a]){this.addElementReference(a,b)}else {Ext.Object.defineProperty(this,a,{get:function(){if(this.destroyed){return null}delete this[a];return this.addElementReference(a,b)},configurable:!0})}},addElementReference:function(f,g){var b=this,c=b[f]=Ext.get(g),a=b._elementListeners[f],e,d;c.skipGarbageCollection=!0;c.component=b;if(a){a=Ext.clone(a);for(e in a){d=a[e];if(typeof d==='object'){d.scope=b}}a.scope=b;c.on(a)}return c},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element,!0);this.isDetached=!0},reattachToBody:function(){var a;if(this.isDetached){a=Ext.getDetachedBody();if(a.contains(this.element)){Ext.getBody().appendChild(this.element,!0)}}this.isDetached=!1},doAddListener:function(f,g,e,a,l,k,j){var c=this,i=a&&a.element,m=a&&a.delegate,b,h,d;if(i){b={};b[f]=g;if(e){b.scope=e}h=Ext.Element.prototype.$eventOptions;for(d in a){if(h[d]){b[d]=a[d]}}c.mon(c[i],b);return}else {if(m){c.mixins.componentDelegation.addDelegatedListener.call(c,f,g,e,a,l,k,j);return}}c.callParent([f,g,e,a,l,k,j])},doRemoveListener:function(b,d,c){var a=this;a.mixins.observable.doRemoveListener.call(a,b,d,c);a.mixins.componentDelegation.removeDelegatedListener.call(a,b,d,c)},filterLengthValue:function(a){if(!a&&a!==0){return null}return a},hasHiddenContent:function(){return this.getHidden()},initElementListeners:function(a){var c=this,k=c.self.superclass,d=k._elementListeners,h=a.reference,i=a.children,f,b,g,j,e;if(c.hasOwnProperty('_elementListeners')){f=c._elementListeners}else {f=c._elementListeners=d?Ext.Object.chain(d):{}}if(h){b=a.listeners;if(b){if(d){g=d[h];if(g){b=Ext.Object.chain(g);Ext.apply(b,a.listeners)}}f[h]=b;a.listeners=null}}if(i){for(e=0,j=i.length;e<j;e++){c.initElementListeners(i[e])}}},initId:function(d){var a=this,c=a.config,b=d&&d.id||c&&c.id;if(b){a.setId(b);a.id=b}else {a.getId()}},measure:function(a){return this.element.measure(a)},processElementConfig:function(){var a=this,c=a.self.superclass,b;if(a.hasOwnProperty('_elementConfig')){b=a._elementConfig}else {b=a._elementConfig=a.getElementConfig();if(c.isWidget){a.processElementConfig.call(c)}a.initElementListeners(b)}return b},parseUi:function(a,b){a=Ext.String.splitWords(a);if(b){a=a.join(' ')}return a},addUi:function(a){this.setUi(this.doAddUi(a,this.getUi()))},doAddUi:function(b,a){var g=this,e=null,c,d,f;if(b){b=g.parseUi(b);f=b.length;a=g.parseUi(a);for(c=0;c<f;c++){d=b[c];if(Ext.Array.indexOf(a,d)===-1){a.push(d)}}e=a.join(' ')}return e},removeUi:function(a){this.setUi(this.doRemoveUi(a,this.getUi()))},doRemoveUi:function(b,a){var g=this,e=null,c,h,d,f;if(b){b=g.parseUi(b);f=b.length;a=g.parseUi(a);for(c=0;c<f;c++){h=b[c];d=Ext.Array.indexOf(a,h);if(d!==-1){a.splice(d,1)}}e=a.join(' ')}return e},initUiReference:function(h,b,c){var a=this,j=a[h],f=a.baseCls,e=a.classClsList,g=[],d,i;c=c!==!1;if(c){if(!a.hasOwnProperty('uiReferences')){a.uiReferences=Ext.clone(a.uiReferences)}a.uiReferences[h]=b}b='-'+b;if(f&&f!==a.classCls){g.push(f+b)}if(e){for(d=0,i=e.length;d<i;d++){g.push(e[d]+b)}}j.addCls(g);if(c&&!a.isConfiguring){a.syncUiCls()}},syncUiCls:function(q){var a=this,b=a.getUi(),m=a.currentUiCls||(a.currentUiCls={}),k=a.baseCls,n=q||a.uiReferences,f=a.classClsList,p=f?f.length:0,e,o,c,g,l,d,j,h,i;if(b){b=a.parseUi(b);o=b.length}for(c in n){g=a[c];e=[];if(g){l=m[c];if(l){g.removeCls(l)}if(b){d=n[c];d=d?'-'+d:'';for(h=0;h<o;h++){j='-'+b[h]+d;if(k&&k!==a.classCls){e.push(k+j)}if(f){for(i=0;i<p;i++){e.push(f[i]+j)}}}g.addCls(e);m[c]=e}}}},applyHideMode:function(a){return a||'display'},updateHideMode:function(d){var a=this,c=a.el,b=a.getHidden();if(b){c.show()}a.renderElement.setVisibilityMode(Ext.Element[a._hideModes[d]]);if(b){c.hide()}},updateUserCls:function(a,b){this.element.replaceCls(b,a)}}},function(b){var a=b.prototype;(a.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(a.$eventOptions=Ext.Object.chain(a.$eventOptions)).delegate=1;Ext.updateWidget=Ext.Factory.widget.update});Ext.define('Ext.overrides.Widget',{override:'Ext.Widget',$configStrict:!1,isComponent:!0,liquidLayout:!0,rendered:!0,rendering:!0,config:{renderTo:null},constructor:function(c){var a=this,b;a.callParent([c]);a.getComponentLayout();b=a.getRenderTo();if(b){a.render(b)}},addClsWithUI:function(a){this.el.addCls(a)},afterComponentLayout:Ext.emptyFn,updateLayout:function(){var a=this.getRefOwner();if(a){a.updateLayout()}},destroy:function(){var b=this,a=b.ownerCt;if(a&&a.remove){a.remove(b,!1)}b.callParent()},finishRender:function(){this.rendering=!1;this.initBindable();this.initKeyMap()},getAnimationProps:function(){return {}},getComponentLayout:function(){var b=this,a=b.componentLayout;if(!a){a=b.componentLayout=new Ext.layout.component.Auto();a.setOwner(b)}return a},getEl:function(){return this.element},getTdCls:function(){return Ext.baseCSSPrefix+this.getTdType()+'-'+(this.ui||'default')+'-cell'},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(b,d,c){var a=this;a.ownerCt=b;a.onInheritedAdd(a,c);a.isDetached=!1},onRemoved:function(a){this.onInheritedRemove(a);this.ownerCt=this.ownerLayout=null},parseBox:function(a){return Ext.Element.parseBox(a)},removeClsWithUI:function(a){this.el.removeCls(a)},render:function(d,e){var b=this,a=b.element,f=Ext.Component.prototype,c;if(!b.ownerCt||b.floating){if(Ext.scopeCss){a.addCls(f.rootCls)}a.addCls(f.borderBoxCls)}if(e){c=d.childNodes[e];if(c){Ext.fly(d).insertBefore(a,c);return}}Ext.fly(d).appendChild(a);b.finishRender()},setPosition:function(a,b){this.el.setLocalXY(a,b)},up:function(){return Ext.Component.prototype.up.apply(this,arguments)},isAncestor:function(){return Ext.Component.prototype.isAncestor.apply(this,arguments)},onFocusEnter:function(){return Ext.Component.prototype.onFocusEnter.apply(this,arguments)},onFocusLeave:function(){return Ext.Component.prototype.onFocusLeave.apply(this,arguments)},isLayoutChild:function(b){var a=this.ownerCt;return a?a===b||a.isLayoutChild(b):!1},privates:{doAddListener:function(a,e,d,b,c,g,f){if(a==='painted'||a==='resize'){this.element.doAddListener(a,e,d||this,b,c)}this.callParent([a,e,d,b,c,g,f])},doRemoveListener:function(a,c,b){if(a==='painted'||a==='resize'){this.element.doRemoveListener(a,c,b)}this.callParent([a,c,b])}}},function(b){var a=b.prototype;if(Ext.isIE9m){a.addElementReferenceOnDemand=a.addElementReference}});Ext.define('Ext.mixin.Responsive',function(a){return {extend:Ext.Mixin,mixinConfig:{id:'responsive',after:{destroy:'destroy'}},config:{responsiveConfig:{$value:undefined,merge:function(e,f,i,h){var g,b,d,c;if(!e){return f}d=f?Ext.Object.chain(f):{};g=a.context;for(c in e){if(!h||!(c in d)){b=e[c];if(b.fn!==g){b={fn:g,config:b}}d[c]=b}}return d}},responsiveFormulas:{$value:null,merge:function(c,d,e,b){return this.mergeNew(c,d,e,b)}}},destroy:function(){a.unregister(this)},privates:{statics:{active:!1,all:{},_configNames:['responsiveConfig','responsiveFormulas'],context:Ext.Object.chain(Ext.platformTags),count:0,nextId:0,activate:function(){a.active=!0;a.updateContext();Ext.on('resize',a.onResize,a)},deactivate:function(){a.active=!1;Ext.un('resize',a.onResize,a)},notify:function(){var b=a.all,d=a.context,e=a.timer,c;if(e){a.timer=Ext.unasap(e)}a.updateContext();Ext.suspendLayouts();Ext.fireEvent('beforeresponsiveupdate',d);for(c in b){b[c].setupResponsiveContext()}Ext.fireEvent('beginresponsiveupdate',d);for(c in b){b[c].updateResponsiveState()}Ext.fireEvent('responsiveupdate',d);Ext.resumeLayouts(!0)},onResize:function(){if(!a.timer){a.timer=Ext.asap(a.onTimer)}},onTimer:function(){a.timer=null;a.notify()},register:function(b){var c=b.$responsiveId;if(!c){b.$responsiveId=c=++a.nextId;a.all[c]=b;if(++a.count===1){a.activate()}}},unregister:function(b){var c=b.$responsiveId;if(c in a.all){b.$responsiveId=null;delete a.all[c];if(--a.count===0){a.deactivate()}}},updateContext:function(){var e=Ext.Element,d=e.getViewportWidth(),c=e.getViewportHeight(),b=a.context;b.width=d;b.height=c;b.tall=d<c;b.wide=!b.tall;b.landscape=b.portrait=!1;if(!b.platform){b.platform=Ext.platformTags}b[Ext.dom.Element.getOrientation()]=!0}},afterClassMixedIn:function(f){var c=f.prototype,e=c.responsiveConfig,d=c.responsiveFormulas,b;if(e||d){b={};if(e){delete c.responsiveConfig;b.responsiveConfig=e}if(d){delete c.responsiveFormulas;b.responsiveFormulas=d}f.getConfigurator().add(b)}f.addConfigTransform('transformResponsiveConfig',10)},applyResponsiveConfig:function(b){var c;for(c in b){b[c].fn=Ext.createRuleFn(c)}return b},applyResponsiveFormulas:function(c){var b,d,e;if(c){e={};for(d in c){if(Ext.isString(b=c[d])){b=Ext.createRuleFn(b)}e[d]=b}}return e},getResponsiveState:function(){var f=a.context,c=this.getResponsiveConfig(),b,d,e;if(c){d={};for(e in c){b=c[e];if(b.fn.call(this,f)){Ext.merge(d,b.config)}}}return d},setupResponsiveContext:function(){var b=this.getResponsiveFormulas(),d=a.context,c;if(b){for(c in b){d[c]=b[c].call(this,d)}}},transformResponsiveConfig:function(d,f){var c=this,b=d,e;if(f.hoistConfigs(c,d,a._configNames)){a.register(c);c.setupResponsiveContext();e=c.getResponsiveState();if(e){b=Ext.merge({},d,e);delete b.responsiveConfig;delete b.responsiveFormulas}}return b},updateResponsiveState:function(){var b=this.getResponsiveState();this.setConfig(b)}}}});Ext.define('Ext.ResponsiveWidget',{override:'Ext.Widget',mixins:[Ext.mixin.Responsive]});Ext.define('Ext.ProgressBase',{mixinId:'progressbase',config:{value:0,textTpl:null},applyTextTpl:function(a){if(!a.isTemplate){a=new Ext.XTemplate(a)}return a},applyValue:function(a){return a||0}});Ext.define('Ext.Progress',{extend:Ext.Gadget,xtype:['progress','progressbarwidget'],alternateClassName:'Ext.ProgressBarWidget',mixins:[Ext.ProgressBase],config:{text:null,animate:!1},cachedConfig:{textCls:Ext.baseCSSPrefix+'progress-text',cls:null},baseCls:Ext.baseCSSPrefix+'progress',template:[{reference:'backgroundEl'},{reference:'barEl',cls:Ext.baseCSSPrefix+'progress-bar',children:[{reference:'textEl'}]}],defaultBindProperty:'value',updateCls:function(b,a){var c=this.element;if(a){c.removeCls(a)}if(b){c.addCls(b)}},updateUi:function(c,b){var d=this.element,e=this.barEl,a=this.baseCls+'-';this.callParent([c,b]);if(b){d.removeCls(a+b);e.removeCls(a+'bar-'+b)}d.addCls(a+c);e.addCls(a+'bar-'+c)},updateTextCls:function(a){this.backgroundEl.addCls(a+' '+a+'-back');this.textEl.addCls(a)},updateValue:function(b,d){var a=this,c=a.getTextTpl();if(c){a.setText(c.apply({value:b,percent:Math.round(b*100)}))}if(!a.isConfiguring&&a.getAnimate()){a.stopBarAnimation();a.startBarAnimation(Ext.apply({from:{width:d*100+'%'},to:{width:b*100+'%'}},a.animate))}else {a.barEl.setStyle('width',b*100+'%')}},updateText:function(a){this.backgroundEl.setHtml(a);this.textEl.setHtml(a)},doDestroy:function(){this.stopBarAnimation();this.callParent()},privates:{startBarAnimation:Ext.privateFn,stopBarAnimation:Ext.privateFn}});Ext.define('Ext.overrides.Progress',{override:'Ext.Progress',config:{ui:'default'},updateWidth:function(a,c){var b=this;b.callParent([a,c]);a-=b.element.getBorderWidth('lr');b.backgroundEl.setWidth(a);b.textEl.setWidth(a)},privates:{startBarAnimation:function(a){this.barEl.animate(a)},stopBarAnimation:function(){this.barEl.stopAnimation()}}});Ext.define('Ext.util.Format',function(){var a;return {singleton:!0,defaultDateFormat:'m/d/Y',thousandSeparator:',',decimalSeparator:'.',currencyPrecision:2,currencySign:'$',currencySpacer:'',percentSign:'%',currencyAtEnd:!1,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,.#]+/,formatCleanRe:/[^\d.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){a=this},nbsp:function(a,b){b=b!==!1;if(b?a===''||a==null:!a){a='\xa0'}return a},undef:function(a){return a!==undefined?a:''},defaultValue:function(a,b){return a!==undefined&&a!==''?a:b},substr:'ab'.substr(-1)!=='b'?function(d,a,c){var b=String(d);return a<0?b.substr(Math.max(b.length+a,0),c):b.substr(a,c)}:function(c,b,a){return String(c).substr(b,a)},lowercase:function(a){return String(a).toLowerCase()},uppercase:function(a){return String(a).toUpperCase()},usMoney:function(b){return a.currency(b,'$',2)},currency:function(b,g,c,i,d){var e='',f=',0',h=0;b=b-0;if(b<0){b=-b;e='-'}c=Ext.isDefined(c)?c:a.currencyPrecision;f+=c>0?'.':'';for(;h<c;h++){f+='0'}b=a.number(b,f);if(d==null){d=a.currencySpacer}if((i||a.currencyAtEnd)===!0){return Ext.String.format('{0}{1}{2}{3}',e,b,d,g||a.currencySign)}else {return Ext.String.format('{0}{1}{2}{3}',e,g||a.currencySign,d,b)}},date:function(a,b){if(!a){return ''}if(!Ext.isDate(a)){a=new Date(Date.parse(a))}return Ext.Date.dateFormat(a,b||Ext.Date.defaultFormat)},dateRenderer:function(b){return function(c){return a.date(c,b)}},hex:function(c,b){var a=parseInt(c||0,10).toString(16);if(b){if(b<0){b=-b;if(a.length>b){a=a.substring(a.length-b)}}while(a.length<b){a='0'+a}}return a},or:function(b,a){return b||a},pick:function(a,d,c){var b;if(Ext.isNumber(a)){b=arguments[a+1];if(b){return b}}return a?c:d},lessThanElse:function(h,e,g,a,b){var d=Ext.Number.from(h,0),c=Ext.Number.from(e,0),f=!Ext.isDefined(b);return d<c?g:d>c?a:f?a:b},sign:function(e,d,c,b){if(b===undefined){b=c}return a.lessThanElse(e,0,d,c,b)},stripTags:function(b){return !b?b:String(b).replace(a.stripTagsRe,'')},stripScripts:function(b){return !b?b:String(b).replace(a.stripScriptsRe,'')},fileSize:function(){var a=1024,b=1048576,c=1073741824;return function(d){var e;if(d<a){if(d===1){e='1 byte'}else {e=d+' bytes'}}else {if(d<b){e=Math.round(d*10/a)/10+' KB'}else {if(d<c){e=Math.round(d*10/b)/10+' MB'}else {e=Math.round(d*10/c)/10+' GB'}}}return e}}(),math:function(){var a={};return function(c,b){if(!a[b]){a[b]=Ext.functionFactory('v','return v '+b+';')}return a[b](c)}}(),round:function(c,a){var b=Number(c);if(typeof a==='number'){a=Math.pow(10,a);b=Math.round(c*a)/a}else {if(a===undefined){b=Math.round(b)}}return b},number:function(k,c){var h;if(!c){return k}if(isNaN(k)){return ''}h=a.formatFns[c];if(!h){var n=c,o=a.thousandSeparator,g=a.decimalSeparator,d=0,l='',i,e,j,f,b,m;if(c.substr(c.length-2)==='/i'){if(!a.I18NFormatCleanRe||a.lastDecimalSeparator!==g){a.I18NFormatCleanRe=new RegExp('[^\\d\\'+g+'#]','g');a.lastDecimalSeparator=g}c=c.substr(0,c.length-2);i=c.indexOf(o)!==-1;e=c.replace(a.I18NFormatCleanRe,'').split(g)}else {i=c.indexOf(',')!==-1;e=c.replace(a.formatCleanRe,'').split('.')}j=c.replace(a.formatPattern,'');if(e.length>2){}else {if(e.length===2){d=e[1].length;f=e[1].match(a.hashRe);if(f){m=f[0].length;l='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+m+'}$")'}}}b=['var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts'+(i?',thousandSeparator,thousands=[],j,n,i':'')+(j?',formatString="'+c+'",formatPattern=/[\\d,\\.#]+/':'')+',trailingZeroes;'+'return function(v){'+'if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";'+'neg=v<0;','absVal=Math.abs(v);','fnum=Ext.Number.toFixed(absVal, '+d+');',l,';'];if(i){if(d){b[b.length]='parts=fnum.split(".");';b[b.length]='fnum=parts[0];'}b[b.length]='if(absVal>=1000) {';b[b.length]='thousandSeparator=utilFormat.thousandSeparator;'+'thousands.length=0;'+'j=fnum.length;'+'n=fnum.length%3||3;'+'for(i=0;i<j;i+=n){'+'if(i!==0){'+'n=3;'+'}'+'thousands[thousands.length]=fnum.substr(i,n);'+'}'+'fnum=thousands.join(thousandSeparator);'+'}';if(d){b[b.length]='fnum += utilFormat.decimalSeparator+parts[1];'}}else {if(d){b[b.length]='if(utilFormat.decimalSeparator!=="."){'+'parts=fnum.split(".");'+'fnum=parts[0]+utilFormat.decimalSeparator+parts[1];'+'}'}}b[b.length]='if(neg&&fnum!=="'+(d?'0.'+Ext.String.repeat('0',d):'0')+'") { fnum="-"+fnum; }';if(f){b[b.length]='if(fnum.indexOf("e+") === -1)'+'fnum=fnum.replace(trailingZeroes,"");'}b[b.length]='return ';if(j){b[b.length]='formatString.replace(formatPattern, fnum);'}else {b[b.length]='fnum;'}b[b.length]='};';h=a.formatFns[n]=Ext.functionFactory('Ext',b.join(''))(Ext)}return h(k)},numberRenderer:function(b){return function(c){return a.number(c,b)}},percent:function(c,b){return a.number(c*100,b||'0')+a.percentSign},repeat:function(a,b,c){return Ext.String.repeat(b,a,c)},attributes:function(a){var c,b;if(typeof a==='object'){c=[];for(b in a){if(a.hasOwnProperty(b)){c.push(b,'="',b==='style'?Ext.DomHelper.generateStyles(a[b],null,!0):Ext.htmlEncode(a[b]),'" ')}}a=c.join('')}return a||''},plural:function(c,a,b){return c+' '+(c===1?a:b?b:a+'s')},nl2br:function(b){return Ext.isEmpty(b)?'':b.replace(a.nl2brRe,'<br/>')},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(b){b=b||0;if(typeof b==='number'){return {top:b,right:b,bottom:b,left:b}}var a=b.split(' '),c=a.length;if(c===1){a[1]=a[2]=a[3]=a[0]}else {if(c===2){a[2]=a[0];a[3]=a[1]}else {if(c===3){a[3]=a[1]}}}return {top:parseInt(a[0],10)||0,right:parseInt(a[1],10)||0,bottom:parseInt(a[2],10)||0,left:parseInt(a[3],10)||0}},resource:function(b,a){a=a||'';return Ext.resolveResource(a+b)},uri:function(a){return encodeURI(a)},uriCmp:function(a){return encodeURIComponent(a)},wordBreakRe:/[\W\s]+/,word:function(e,c,b){var f=b?typeof b==='string'?new RegExp(b):b:a.wordBreakRe,d=(e||'').split(f);return d[c||0]||''}}});Ext.define('Ext.overrides.exporter.util.Format',{override:'Ext.util.Format',decToHex:function(a,d){var c='',b;for(b=0;b<d;b++){c+=String.fromCharCode(a&255);a=a>>>8}return c}});Ext.define('Ext.Template',{inheritableStatics:{from:function(a,b){a=Ext.getDom(a);return new this(a.value||a.innerHTML,b||'')}},useEval:Ext.isGecko,constructor:function(g){var d=this,c=arguments,f=[],b=c.length,e,a;d.initialConfig={};if(b===1&&Ext.isArray(g)){c=g;b=c.length}if(b>1){for(e=0;e<b;e++){a=c[e];if(typeof a==='object'){Ext.apply(d.initialConfig,a);Ext.apply(d,a)}else {f.push(a)}}}else {f.push(g)}d.html=f.join('')},isTemplate:!0,disableFormats:!1,tokenRe:/\{(?:(?:(\d+)|([a-z_$][\w\-$]*))(?::([a-z_.]+)(?:\(([^)]*?)?\))?)?)\}/gi,apply:function(b){var a=this;if(a.compiled){if(!a.fn){a.compile()}return a.fn(b).join('')}return a.evaluate(b)},evaluate:function(a){var b=this,e=!b.disableFormats,c=Ext.util.Format,d=b;function fn(i,h,b,g,f){if(b==null||b===''){b=h}if(g&&e){if(f){f=[a[b]].concat(Ext.functionFactory('return ['+f+'];')())}else {f=[a[b]]}if(g.substr(0,5)==='this.'){return d[g.substr(5)].apply(d,f)}else {if(c[g]){return c[g].apply(c,f)}else {return i}}}else {return a[b]!==undefined?a[b]:''}}return b.html.replace(b.tokenRe,fn)},applyOut:function(c,b){var a=this;if(a.compiled){if(!a.fn){a.compile()}b.push.apply(b,a.fn(c))}else {b.push(a.apply(c))}return b},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(c,b){var a=this;a.html=c;a.compiled=!!b;a.fn=null;return a},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var a=this,b;b=a.html.replace(a.compileARe,'\\\\').replace(a.compileBRe,'\\n').replace(a.compileCRe,"\\'").replace(a.tokenRe,a.regexReplaceFn.bind(a));b=(this.disableFormats!==!0?'var fm=Ext.util.Format;':'')+(a.useEval?'$=':'return')+" function(v){return ['"+b+"'];};";a.fn=a.useEval?a.evalCompiled(b):(new Function('Ext',b))(Ext);a.compiled=!0;return a},evalCompiled:function($){eval($);return $},regexReplaceFn:function(d,b,e,a,c){if(b==null||b===''){b='"'+e+'"'}else {if(this.stringFormat){b=parseInt(b)+1}}if(a&&this.disableFormats!==!0){c=c?','+c:'';if(a.substr(0,5)==='this.'){a=a+'('}else {if(Ext.util.Format[a]){a='fm.'+a+'('}else {return d}}return "',"+a+'v['+b+']'+c+"),'"}else {return "',v["+b+"] == undefined ? '' : v["+b+"],'"}},insertFirst:function(c,b,a){return this.doInsert('afterBegin',c,b,a)},insertBefore:function(c,b,a){return this.doInsert('beforeBegin',c,b,a)},insertAfter:function(c,b,a){return this.doInsert('afterEnd',c,b,a)},append:function(c,b,a){return this.doInsert('beforeEnd',c,b,a)},doInsert:function(d,e,c,b){var a=Ext.DomHelper.insertHtml(d,Ext.getDom(e),this.apply(c));return b?Ext.get(a):a},overwrite:function(d,c,b){var a=Ext.DomHelper.overwrite(Ext.getDom(d),this.apply(c));return b?Ext.get(a):a}},function(d){var e=/\{\d+\}/,b=function(a){if(e.test(a)){a=new d(a,c);return function(){return a.apply(arguments)}}else {return function(){return a}}},c={useFormat:!1,compiled:!0,stringFormat:!0},a={};Ext.String.format=Ext.util.Format.format=function(c){var e=a[c]||(a[c]=b(c));return e.apply(this,arguments)};Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}});Ext.define('Ext.util.XTemplateParser',{constructor:function(a){Ext.apply(this,a)},doTpl:Ext.emptyFn,parse:function(g){var b=this,q=g.length,s={elseif:'elif'},p=b.topRe,r=b.actionsRe,j,e,d,c,h,n,l,m,i,f,a,k,o;b.level=0;b.stack=e=[];for(j=0;j<q;j=f){p.lastIndex=j;c=p.exec(g);if(!c){b.doText(g.substring(j,q));break}i=c.index;f=p.lastIndex;if(j<i){d=g.substring(j,i);if(!(o&&Ext.String.trim(d)==='')){b.doText(d)}}o=!1;if(c[1]){f=g.indexOf('%}',i+2);b.doEval(g.substring(i+2,f));f+=2}else {if(c[2]){f=g.indexOf(']}',i+2);b.doExpr(g.substring(i+2,f));f+=2}else {if(c[3]){b.doTag(c[3])}else {if(c[4]){a=null;while((m=r.exec(c[4]))!==null){d=m[2]||m[3];if(d){d=Ext.String.htmlDecode(d);h=m[1];h=s[h]||h;a=a||{};n=a[h];if(typeof n==='string'){a[h]=[n,d]}else {if(n){a[h].push(d)}else {a[h]=d}}}}if(!a){if(b.elseRe.test(c[4])){b.doElse()}else {if(b.defaultRe.test(c[4])){b.doDefault()}else {b.doTpl();e.push({type:'tpl'})}}}else {if(a['if']){b.doIf(a['if'],a);e.push({type:'if'})}else {if(a['switch']){b.doSwitch(a['switch'],a);e.push({type:'switch'});o=!0}else {if(a['case']){b.doCase(a['case'],a)}else {if(a['elif']){b.doElseIf(a['elif'],a)}else {if(a['for']){++b.level;if(k=b.propRe.exec(c[4])){a.propName=k[1]||k[2]}b.doFor(a['for'],a);e.push({type:'for',actions:a})}else {if(a['foreach']){++b.level;if(k=b.propRe.exec(c[4])){a.propName=k[1]||k[2]}b.doForEach(a['foreach'],a);e.push({type:'foreach',actions:a})}else {if(a.exec){b.doExec(a.exec,a);e.push({type:'exec',actions:a})}}}}}}}}}else {if(c[0].length===5){e.push({type:'tpl'})}else {l=e.pop();b.doEnd(l.type,l.actions);if(l.type==='for'||l.type==='foreach'){--b.level}}}}}}}},topRe:/(?:(\{%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/});Ext.define('Ext.util.XTemplateCompiler',{extend:Ext.util.XTemplateParser,useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:!0,propNameRe:/^[\w\d$]*$/,compile:function(c){var a=this,b=a.generate(c);return a.useEval?a.evalTpl(b):(new Function('Ext',b))(Ext)},generate:function(d){var a=this,b='var fm=Ext.util.Format,ts=Object.prototype.toString;',c;a.maxLevel=0;a.body=['var c0=values, a0='+a.createArrayTest(0)+', p0=parent, n0=xcount, i0=xindex, k0, v;\n'];if(a.definitions){if(typeof a.definitions==='string'){a.definitions=[a.definitions,b]}else {a.definitions.push(b)}}else {a.definitions=[b]}a.switches=[];a.parse(d);a.definitions.push((a.useEval?'$=':'return')+' function ('+a.fnArgs+') {',a.body.join(''),'}');c=a.definitions.join('\n');a.definitions.length=a.body.length=a.switches.length=0;a.definitions=a.body=a.switches=0;return c},doText:function(a){var b=this,c=b.body;a=a.replace(b.aposRe,"\\'").replace(b.newLineRe,'\\n');if(b.useIndex){c.push("out[out.length]='",a,"'\n")}else {c.push("out.push('",a,"')\n")}},doExpr:function(b){var a=this.body;a.push('if ((v='+b+') != null) out');if(this.useIndex){a.push('[out.length]=v\n')}else {a.push('.push(v)\n')}},doTag:function(b){var a=this.parseTag(b);if(a){this.doExpr(a)}else {this.doText('{'+b+'}')}},doElse:function(){this.body.push('} else {\n')},doEval:function(a){this.body.push(a,'\n')},doIf:function(b,c){var a=this;if(b==='.'){a.body.push('if (values) {\n')}else {if(a.propNameRe.test(b)){a.body.push('if (',a.parseTag(b),') {\n')}else {a.body.push('if (',a.addFn(b),a.callFn,') {\n')}}if(c.exec){a.doExec(c.exec)}},doElseIf:function(b,c){var a=this;if(b==='.'){a.body.push('else if (values) {\n')}else {if(a.propNameRe.test(b)){a.body.push('} else if (',a.parseTag(b),') {\n')}else {a.body.push('} else if (',a.addFn(b),a.callFn,') {\n')}}if(c.exec){a.doExec(c.exec)}},doSwitch:function(b){var a=this,c;if(b==='.'||b==='#'){c=b==='.'?'values':'xindex';a.body.push('switch (',c,') {\n')}else {if(a.propNameRe.test(b)){a.body.push('switch (',a.parseTag(b),') {\n')}else {a.body.push('switch (',a.addFn(b),a.callFn,') {\n')}}a.switches.push(0)},doCase:function(e){var a=this,c=Ext.isArray(e)?e:[e],d=a.switches.length-1,f,b;if(a.switches[d]){a.body.push('break;\n')}else {a.switches[d]++}for(b=0,d=c.length;b<d;++b){f=a.intRe.exec(c[b]);c[b]=f?f[1]:"'"+c[b].replace(a.aposRe,"\\'")+"'"}a.body.push('case ',c.join(': case '),':\n')},doDefault:function(){var a=this,b=a.switches.length-1;if(a.switches[b]){a.body.push('break;\n')}else {a.switches[b]++}a.body.push('default:\n')},doEnd:function(c,d){var a=this,b=a.level-1;if(c==='for'||c==='foreach'){if(d.exec){a.doExec(d.exec)}a.body.push('}\n');a.body.push('parent=p',b,';values=r',b+1,';xcount=n'+b+';xindex=i',b,'+1;xkey=k',b,';\n')}else {if(c==='if'||c==='switch'){a.body.push('}\n')}}},doFor:function(c,d){var b=this,f,a=b.level,e=a-1,g;if(c==='.'){f='values'}else {if(b.propNameRe.test(c)){f=b.parseTag(c)}else {f=b.addFn(c)+b.callFn}}if(b.maxLevel<a){b.maxLevel=a;b.body.push('var ')}if(c==='.'){g='c'+a}else {g='a'+e+'?c'+e+'[i'+e+']:c'+e}b.body.push('i',a,'=0,n',a,'=0,c',a,'=',f,',a',a,'=',b.createArrayTest(a),',r',a,'=values,p',a,',k',a,';\n','p',a,'=parent=',g,'\n','if (c',a,'){if(a',a,'){n',a,'=c',a,'.length;}else if (c',a,'.isMixedCollection){c',a,'=c',a,'.items;n',a,'=c',a,'.length;}else if(c',a,'.isStore){c',a,'=c',a,'.data.items;n',a,'=c',a,'.length;}else{c',a,'=[c',a,'];n',a,'=1;}}\n','for (xcount=n',a,';i',a,'<n'+a+';++i',a,'){\n','values=c',a,'[i',a,']');if(d.propName){b.body.push('.',d.propName)}b.body.push('\n','xindex=i',a,'+1\n');if(d.between){b.body.push('if(xindex>1){ out.push("',d.between,'"); } \n')}},doForEach:function(c,d){var b=this,a=b.level,e=a-1,f,g;if(c==='.'){f='values'}else {if(b.propNameRe.test(c)){f=b.parseTag(c)}else {f=b.addFn(c)+b.callFn}}if(b.maxLevel<a){b.maxLevel=a;b.body.push('var ')}if(c==='.'){g='c'+a}else {g='a'+e+'?c'+e+'[i'+e+']:c'+e}b.body.push('i',a,'=-1,n',a,'=0,c',a,'=',f,',a',a,'=',b.createArrayTest(a),',r',a,'=values,p',a,',k',a,';\n','p',a,'=parent=',g,'\n','for(k',a,' in c',a,'){\n','xindex=++i',a,'+1;\n','xkey=k',a,';\n','values=c',a,'[k',a,'];');if(d.propName){b.body.push('.',d.propName)}if(d.between){b.body.push('if(xindex>1){ out.push("',d.between,'"); } \n')}},createArrayTest:'isArray' in Array?function(a){return 'Array.isArray(c'+a+')'}:function(a){return 'ts.call(c'+a+')==="[object Array]"'},doExec:function(d,e){var a=this,c='f'+a.definitions.length,b=a.guards[a.strict?0:1];a.definitions.push('function '+c+'('+a.fnArgs+') {',b.doTry,' var $v = values; with($v) {','  '+d,' }',b.doCatch,'}');a.body.push(c+a.callFn+'\n')},guards:[{doTry:'',doCatch:''},{doTry:'try { ',doCatch:' } catch(e) {\n'+'}'}],addFn:function(c){var a=this,b='f'+a.definitions.length,d=a.guards[a.strict?0:1];if(c==='.'){a.definitions.push('function '+b+'('+a.fnArgs+') {',' return values','}')}else {if(c==='..'){a.definitions.push('function '+b+'('+a.fnArgs+') {',' return parent','}')}else {a.definitions.push('function '+b+'('+a.fnArgs+') {',d.doTry,' var $v = values; with($v) {','  return('+c+')',' }',d.doCatch,'}')}}return b},parseTag:function(h){var e=this,f=e.tagRe.exec(h),a,c,d,g,b;if(!f){return null}a=f[1];c=f[2];d=f[3];g=f[4];if(a==='.'){if(!e.validTypes){e.definitions.push('var validTypes={string:1,number:1,boolean:1};');e.validTypes=!0}b='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'}else {if(a==='#'){b='xindex'}else {if(a==='$'){b='xkey'}else {if(a.substr(0,7)==='parent.'){b=a}else {if(isNaN(a)&&a.indexOf('-')===-1&&a.indexOf('.')!==-1){b='values.'+a}else {b="values['"+a+"']"}}}}}if(g){b='('+b+g+')'}if(c&&e.useFormat){d=d?','+d:'';if(c.substr(0,5)!=='this.'){c='fm.'+c+'('}else {c+='('}}else {return b}return c+b+d+')'},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.#\$]+)(?::([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},function(){var a=this.prototype;a.fnArgs='out,values,parent,xindex,xcount,xkey';a.callFn='.call(this,'+a.fnArgs+')'});Ext.define('Ext.XTemplate',{extend:Ext.Template,isXTemplate:!0,emptyObj:{},fn:null,strict:!1,apply:function(c,b,e,d){var a=this.applyOut(c,[],b,e,d);return a.length===1?a[0]:a.join('')},applyOut:function(g,d,f,c,b){var a=this,e;if(!a.fn){e=new Ext.util.XTemplateCompiler({useFormat:a.disableFormats!==!0,definitions:a.definitions,strict:a.strict});a.fn=e.compile(a.html)}c=c||1;b=b||1;if(a.strict){a.fn(d,g,f||a.emptyObj,c,b)}else {try{a.fn(d,g,f||a.emptyObj,c,b)}catch(h){}}return d},compile:function(){return this},statics:{get:function(a,d,c){var b=a;if(a==null){if(d&&c){b=this.getTpl(d,c)}}else {if((a||a==='')&&!a.isTemplate){b=new this(a)}}return b},getTpl:function(c,d){var b=c[d],a;if(b){if(!b.isTemplate){b=Ext.XTemplate.get(b)}if(!b.owner){if(c.hasOwnProperty(d)){a=c}else {for(a=c.self.prototype;a&&!a.hasOwnProperty(d);a=a.superclass){}}a[d]=b;b.owner=a}}return b||null}}});Ext.define('Ext.app.EventDomain',{statics:{instances:{}},isEventDomain:!0,isInstance:!1,constructor:function(){var a=this;if(!a.isInstance){Ext.app.EventDomain.instances[a.type]=a}a.bus={};a.monitoredClasses=[]},dispatch:function(l,h,m){h=Ext.canonicalEventName(h);var j=this,n=j.bus,b=n[h],c,a,i,g,e,k,d,f;if(!b){return !0}for(c in b){if(b.hasOwnProperty(c)&&j.match(l,c,j.controller)){a=b[c];for(i in a){if(a.hasOwnProperty(i)){g=a[i];if(g.controller.isActive()){e=g.list;k=e.length;for(d=0;d<k;d++){f=e[d];if(f.fire.apply(f,m)===!1){return !1}}}}}}}return !0},listen:function(p,e){var i=this,r=i.bus,t=i.idProperty,n=i.monitoredClasses,s=n.length,o=e.getId(),m=i.type==='component',u=m?e.getRefMap():null,j,f,q,a,d,b,h,l,g,c,k;for(a in p){g=p[a];if(m){a=u[a]||a}if(g){if(t){a=a==='*'?a:a.substring(1)}for(c in g){d=null;b=g[c];h=e;c=Ext.canonicalEventName(c);l=new Ext.util.Event(e,c);if(Ext.isObject(b)){d=b;b=d.fn;h=d.scope||e;delete d.fn;delete d.scope}if(typeof b==='string'){b=h[b]}l.addListener(b,h,d);for(j=0;j<s;++j){k=n[j].hasListeners;if(k){k._incr_(c)}}f=r[c]||(r[c]={});f=f[a]||(f[a]={});q=f[o]||(f[o]={controller:e,list:[]});q.list.push(l)}}}},match:function(c,b){var a=this.idProperty;if(a){return b==='*'||c[a]===b}return !1},monitor:function(a){var c=this,b=a.isInstance?a:a.prototype,d=b.doFireEvent;c.monitoredClasses.push(a);b.doFireEvent=function(f,g){var e=this,b;b=d.apply(e,arguments);if(b!==!1&&!e.destroyed&&!e.isSuspended(f)){b=c.dispatch(e,f,g)}return b}},unlisten:function(f){var k=this.bus,l=f,m=this.monitoredClasses,p=m.length,g,a,b,o,j,n,h,c,d,i,e;if(f.isController){l=f.getId()}for(a in k){a=Ext.canonicalEventName(a);if(k.hasOwnProperty(a)&&(h=k[a])){for(n in h){g=h[n];i=g[l];if(i){b=i.list;if(b){for(c=0,o=b.length;c<o;++c){j=b[c];j.clearListeners();for(d=0;d<p;++d){e=m[d].hasListeners;if(e){e._decr_(j.name)}}}delete g[l]}}}}}},destroy:function(){this.monitoredClasses=this.bus=null;this.callParent()}});Ext.define('Ext.app.domain.Component',{extend:Ext.app.EventDomain,singleton:!0,type:'component',constructor:function(){this.callParent();this.monitor(Ext.Widget)},dispatch:function(c,f,e){var a=c.lookupController(!1),b,d;while(a){b=a.compDomain;if(b){if(b.dispatch(c,f,e)===!1){return !1}}d=a.getView();a=d?d.lookupController(!0):null}return this.callParent([c,f,e])},match:function(b,a){return b.is(a)}});Ext.define('Ext.util.ProtoElement',function(){var a=Ext.String.splitWords,b=Ext.Array.toMap;return {isProtoEl:!0,clsProp:'cls',styleProp:'style',removedProp:'removed',styleIsText:!1,constructor:function(f){var c=this,e,d;if(f){Ext.apply(c,f);e=c.cls;d=c.style;delete c.cls}c.classList=e?a(e):[];c.classMap=e?b(c.classList):{};if(d){if(typeof d==='string'){c.style=Ext.Element.parseStyles(d)}else {if(Ext.isFunction(d)){c.styleFn=d;delete c.style}else {c.style=Ext.apply({},d)}}}},flush:function(){this.flushClassList=[];this.removedClasses={};delete this.style;delete this.unselectableAttr},addCls:function(d){if(!d){return this}var c=this,g=typeof d==='string'?a(d):d,i=g.length,j=c.classList,h=c.classMap,f=c.flushClassList,e=0,b;for(;e<i;++e){b=g[e];if(!h[b]){h[b]=!0;j.push(b);if(f){f.push(b);delete c.removedClasses[b]}}}return c},hasCls:function(a){return a in this.classMap},removeCls:function(l){var d=this,g=d.classList,i=d.classList=[],k=b(a(l)),j=g.length,h=d.classMap,f=d.removedClasses,e,c;for(e=0;e<j;++e){c=g[e];if(k[c]){if(f){if(h[c]){f[c]=!0;Ext.Array.remove(d.flushClassList,c)}}delete h[c]}else {i.push(c)}}return d},setStyle:function(a,d){var b=this,c=b.style||(b.style={});if(typeof a==='string'){if(arguments.length===1){b.setStyle(Ext.Element.parseStyles(a))}else {c[a]=d}}else {Ext.apply(c,a)}return b},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls);if(Ext.isOpera){this.unselectableAttr=!0}},writeTo:function(d){var a=this,e=a.flushClassList||a.classList,c=a.removedClasses,b;if(a.styleFn){b=Ext.apply({},a.styleFn());Ext.apply(b,a.style)}else {b=a.style}d[a.clsProp]=e.join(' ');if(b){d[a.styleProp]=a.styleIsText?Ext.DomHelper.generateStyles(b,null,!0):b}if(c){c=Ext.Object.getKeys(c);if(c.length){d[a.removedProp]=c.join(' ')}}if(a.unselectableAttr){d.unselectable='on'}return d}}});Ext.define('Ext.dom.CompositeElement',{alternateClassName:'Ext.CompositeElement',extend:Ext.dom.CompositeElementLite,isLite:!1,getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}});Ext.define('Ext.plugin.Manager',{singleton:!0,alternateClassName:['Ext.PluginManager','Ext.PluginMgr'],typeName:'ptype',create:function(a,e,c){var b,d;if(a.init){b=a}else {if(c){a=Ext.apply({},a);a.cmp=c}else {c=a.cmp}if(a.xclass){b=Ext.create(a)}else {d='plugin.'+(a.ptype||e);b=Ext.ClassManager.instantiateByAlias(d,a)}}if(b&&c&&b.setCmp&&!b.setCmpCalled){b.setCmp(c);b.setCmpCalled=!0}return b}});Ext.define('Ext.util.CSS',function(){var a,b=null,c=document,e=/(-[a-z])/gi,d=function(b,a){return a.charAt(1).toUpperCase()};return {singleton:!0,rules:b,initialized:!1,constructor:function(){a=this},createStyleSheet:function(e,g){var d,f=c.getElementsByTagName('head')[0],b=c.createElement('style');b.setAttribute('type','text/css');if(g){b.setAttribute('id',g)}d=b.styleSheet;if(d){f.appendChild(b);d.cssText=e}else {b.appendChild(c.createTextNode(e));f.appendChild(b);d=b.sheet}a.cacheStyleSheet(d);return d},removeStyleSheet:function(a){var b=typeof a==='string'?c.getElementById(a):a.ownerNode;if(b){b.parentNode.removeChild(b)}},swapStyleSheet:function(d,e){var b;a.removeStyleSheet(d);b=c.createElement('link');b.setAttribute('rel','stylesheet');b.setAttribute('type','text/css');b.setAttribute('id',d);b.setAttribute('href',e);c.getElementsByTagName('head')[0].appendChild(b)},cacheStyleSheet:function(d){if(!b){b=a.rules={}}try{var h=d.cssRules||d.rules,g=h.length-1,f=d.imports,i=f?f.length:0,c,e;for(e=0;e<i;++e){a.cacheStyleSheet(f[e])}for(;g>=0;--g){c=h[g];if(c.styleSheet){a.cacheStyleSheet(c.styleSheet)}a.cacheRule(c,d)}}catch(j){}},cacheRule:function(d,g){var c,f,e;if(d.styleSheet){return a.cacheStyleSheet(d.styleSheet)}c=d.selectorText;if(c){c=c.split(',');f=c.length;for(e=0;e<f;e++){b[Ext.String.trim(c[e]).toLowerCase()]={parentStyleSheet:g,cssRule:d}}}},getRules:function(e){var d={},c;if(b===null||e){a.refreshCache()}for(c in b){d[c]=b[c].cssRule}return d},refreshCache:function(){var e=c.styleSheets,d=0,f=e.length;b=a.rules={};for(;d<f;d++){try{if(!e[d].disabled){a.cacheStyleSheet(e[d])}}catch(g){}}},getRule:function(c,g,f){var d,e;if(!b||g){a.refreshCache()}if(!Ext.isArray(c)){e=b[c.toLowerCase()];if(e&&!f){e=e.cssRule}return e||null}for(d=0;d<c.length;d++){if(b[c[d]]){return f?b[c[d].toLowerCase()]:b[c[d].toLowerCase()].cssRule}}return null},createRule:function(b,c,d){var f,e=b.cssRules||b.rules,g=e.length;if(b.insertRule){b.insertRule(c+' {'+d+'}',g)}else {b.addRule(c,d||' ')}a.cacheRule(f=e[g],b);return f},updateRule:function(c,b,i){var f,g,h;if(!Ext.isArray(c)){f=a.getRule(c);if(f){if(arguments.length===2){h=Ext.Element.parseStyles(b);for(b in h){f.style[b.replace(e,d)]=h[b]}}else {f.style[b.replace(e,d)]=i}return !0}}else {for(g=0;g<c.length;g++){if(a.updateRule(c[g],b,i)){return !0}}}return !1},deleteRule:function(f){var e=a.getRule(f,!1,!0),c,d;if(e){c=e.parentStyleSheet;d=Ext.Array.indexOf(c.cssRules||c.rules,e.cssRule);if(c.deleteRule){c.deleteRule(d)}else {c.removeRule(d)}delete b[f]}}}});Ext.define('Ext.fx.easing.Abstract',{config:{startTime:0,startValue:0},isEasing:!0,isEnded:!1,constructor:function(a){this.initConfig(a);return this},applyStartTime:function(a){if(!a){a=Ext.Date.now()}return a},updateStartTime:function(a){this.reset()},reset:function(){this.isEnded=!1},getValue:Ext.emptyFn});Ext.define('Ext.fx.easing.Linear',{extend:Ext.fx.easing.Abstract,alias:'easing.linear',config:{duration:0,endValue:0},updateStartValue:function(a){this.distance=this.getEndValue()-a},updateEndValue:function(a){this.distance=a-this.getStartValue()},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),b=this.getDuration();if(a>b){this.isEnded=!0;return this.getEndValue()}else {return this.getStartValue()+a/b*this.distance}}});Ext.define('Ext.util.translatable.Abstract',{extend:Ext.Evented,mixins:[Ext.mixin.Factoryable],factoryConfig:{type:'translatable',defaultType:'csstransform'},config:{easing:null,easingX:{duration:300},easingY:{duration:300},offsetX:0,offsetY:0},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:!1,isTranslatable:!0,constructor:function(a){this.callParent([a]);this.position={x:0,y:0}},factoryEasing:function(a){return Ext.factory(a,Ext.fx.easing.Linear,null,'easing')},applyEasing:function(a){if(!this.getEasingX()){this.setEasingX(this.factoryEasing(a))}if(!this.getEasingY()){this.setEasingY(this.factoryEasing(a))}},applyEasingX:function(a){return this.factoryEasing(a)},applyEasingY:function(a){return this.factoryEasing(a)},updateOffsetX:function(){var a=this;if(!a.isConfiguring&&!a.isAnimating){a.translateXY(a.x,a.y)}},updateOffsetY:function(){var a=this;if(!a.isConfiguring&&!a.isAnimating){a.translateXY(a.x,a.y)}},translate:function(b,c,d){var a=this;if(d){return a.translateAnimated(b,c,d)}if(a.isAnimating){a.stopAnimation()}if(!isNaN(b)&&typeof b==='number'){a.x=b}else {b=a.x}if(!isNaN(c)&&typeof c==='number'){a.y=c}else {c=a.y}a.translateXY(b,c)},translateXY:function(b,c){var a=this;if(!a.destroyed){a.doTranslate(b+a.getOffsetX(),c+a.getOffsetY());if(a.hasListeners.translate){a.fireEvent('translate',a,b,c)}}},translateAxis:function(e,a,d){var b,c;if(e==='x'){b=a}else {c=a}return this.translate(b,c,d)},getPosition:function(){var b=this,a=b.position;a.x=-b.x;a.y=-b.y;return a},animate:function(b,c){var a=this;a.activeEasingX=b;a.activeEasingY=c;a.isAnimating=!0;if(a.ownerCmp){a.ownerCmp.isTranslating=!0}a.lastX=null;a.lastY=null;Ext.AnimationQueue.start(a.doAnimationFrame,a);a.fireEvent('animationstart',a,a.x,a.y);return a},translateAnimated:function(g,h,a){var b=this,f,e,c,d;if(!Ext.isObject(a)){a={}}if(b.isAnimating){b.stopAnimation()}b.callback=a.callback;b.callbackScope=a.scope;f=Ext.Date.now();e=a.easing;c=typeof g==='number'?a.easingX||e||b.getEasingX()||!0:null;d=typeof h==='number'?a.easingY||e||b.getEasingY()||!0:null;if(c){c=b.factoryEasing(c);c.setStartTime(f);c.setStartValue(b.x);c.setEndValue(g);if('duration' in a){c.setDuration(a.duration)}}if(d){d=b.factoryEasing(d);d.setStartTime(f);d.setStartValue(b.y);d.setEndValue(h);if('duration' in a){d.setDuration(a.duration)}}return b.animate(c,d)},doAnimationFrame:function(){var a=this,d=a.activeEasingX,e=a.activeEasingY,f=Date.now(),b,c;if(!a.isAnimating){return}a.lastRun=f;if(d===null&&e===null){a.stopAnimation();return}if(d!==null){a.x=b=Math.round(d.getValue());if(d.isEnded){a.activeEasingX=null;a.fireEvent('axisanimationend',a,'x',b)}}else {b=a.x}if(e!==null){a.y=c=Math.round(e.getValue());if(e.isEnded){a.activeEasingY=null;a.fireEvent('axisanimationend',a,'y',c)}}else {c=a.y}if(a.lastX!==b||a.lastY!==c){a.translateXY(b,c);a.lastX=b;a.lastY=c}a.fireEvent('animationframe',a,b,c)},stopAnimation:function(){var a=this;if(!a.isAnimating){return}a.activeEasingX=null;a.activeEasingY=null;a.isAnimating=!1;if(a.ownerCmp){a.ownerCmp.isTranslating=!1}Ext.AnimationQueue.stop(a.doAnimationFrame,a);a.fireEvent('animationend',a,a.x,a.y);if(a.callback){a.callback.call(a.callbackScope);a.callback=null}},refresh:function(){this.translate(this.x,this.y)},resolveListenerScope:function(){var a=this.ownerCmp,b=arguments;if(a){return a.resolveListenerScope.apply(a,b)}return this.callParent(b)},destroy:function(){var a=this;a.destroying=!0;if(a.isAnimating){a.stopAnimation()}a.callParent();a.destroyed=!0}});Ext.define('Ext.util.translatable.Dom',{extend:Ext.util.translatable.Abstract,alias:'translatable.dom',config:{element:null},applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:function(){this.refresh()},translateXY:function(b,c){var a=this.getElement();if(a&&!a.destroyed){this.callParent([b,c])}}});Ext.define('Ext.util.translatable.ScrollPosition',{extend:Ext.util.translatable.Dom,alias:'translatable.scrollposition',constructor:function(a){if(a&&a.element){this.x=a.element.getScrollLeft();this.y=a.element.getScrollTop()}this.callParent([a])},translateAnimated:function(){var a=this.getElement();this.x=a.getScrollLeft();this.y=a.getScrollTop();this.callParent(arguments)},doTranslate:function(b,c){var a=this.getElement();a.setScrollLeft(Math.round(b));a.setScrollTop(Math.round(c))},getPosition:function(){var c=this,a=c.position,b=c.getElement();a.x=b.getScrollLeft();a.y=b.getScrollTop();return a}});Ext.define('Ext.scroll.Scroller',{extend:Ext.Evented,alias:'scroller.scroller',alternateClassName:'Ext.scroll.NativeScroller',mixins:[Ext.mixin.Factoryable,Ext.mixin.Bufferable],factoryConfig:{defaultType:'scroller'},bufferableMethods:{onDomScrollEnd:100},isScroller:!0,config:{direction:undefined,element:undefined,scrollbars:null,snapSelector:null,snapOffset:null,msSnapInterval:null,x:!0,y:!0,scrollElement:null,size:null,spacerXY:null,touchAction:null},snappableCls:Ext.baseCSSPrefix+'scroller-snappable',elementCls:Ext.baseCSSPrefix+'scroller',spacerCls:Ext.baseCSSPrefix+'scroller-spacer',noScrollbarsCls:Ext.baseCSSPrefix+'no-scrollbars',statics:{create:function(a,b){return Ext.Factory.scroller(a,b)},getScrollingElement:function(){var d=document,c=this.$standardScrollElement,e=d.scrollingElement,a,b;if(e){return e}if(c===undefined){a=document.createElement('iframe');a.style.height='1px';document.body.appendChild(a);b=a.contentWindow.document;b.write('<!DOCTYPE html><div style="height:9999em">x</div>');b.close();c=b.documentElement.scrollHeight>b.body.scrollHeight;a.parentNode.removeChild(a);this.$standardScrollElement=c}return c?d.documentElement:d.body},initViewportScroller:function(){var a=Ext.getViewportScroller();if(!a.getElement()){a.setElement(Ext.getBody())}}},constructor:function(b){var a=this;a.position={x:0,y:0};a.callParent([b])},destroy:function(){var a=this,b=a._partners,c;Ext.undefer(a.restoreTimer);a.setX(Ext.emptyString);a.setY(Ext.emptyString);if(a._spacer){a._spacer.destroy()}if(a.scrollListener){a.scrollListener.destroy()}if(b){for(c in b){a.removePartner(b[c].scroller)}}a.setElement(null);a._partners=a.component=null;if(a.translatable){a.translatable.destroy();a.translatable=null}a.removeSnapStylesheet();a.callParent()},addPartner:function(b,c){var a=this,e=a._partners||(a._partners={}),d=b._partners||(b._partners={});c=a.axisConfigs[c||'both'];e[b.getId()]={scroller:b,axes:c};d[a.getId()]={scroller:a,axes:c}},applyElement:function(a,c){var b=this;if(c&&b.scrollListener){b.scrollListener.destroy()}if(a){a=Ext.get(a)}return a},applySize:function(d,c){var a,b;if(d===null||typeof d==='number'){a=b=d}else {if(d){a=d.x;b=d.y}}if(a===null){a=0}else {if(a===undefined){a=c?c.x:0}}if(b===null){b=0}else {if(b===undefined){b=c?c.y:0}}if(!c||a!==c.x||b!==c.y){return {x:a,y:b}}},getClientSize:function(){var a=this.getElement().dom;return {x:a.clientWidth,y:a.clientHeight}},getScrollbarSize:function(){var h=this,j=0,i=0,g=h.getElement(),a,b,c,e,f,d;if(g&&!g.destroyed){b=h.getX();c=h.getY();a=g.dom;if(b||c){d=Ext.scrollbar.size()}if(b==='scroll'){e=!0}else {if(b){e=a.scrollWidth>a.clientWidth}}if(c==='scroll'){f=!0}else {if(c){f=a.scrollHeight>a.clientHeight}}if(e){i=d.height}if(f){j=d.width}}return {width:j,height:i}},getPosition:function(){var a=this;if(a.positionDirty){a.updateDomScrollPosition()}return a.position},getSize:function(){var a=this.getElement(),b,c;if(a&&!a.destroyed){c=a.dom;b={x:c.scrollWidth,y:c.scrollHeight}}else {b={x:0,y:0}}return b},getMaxPosition:function(){var b=this.getElement(),c=0,d=0,a;if(b&&!b.destroyed){a=b.dom;c=a.scrollWidth-a.clientWidth;d=a.scrollHeight-a.clientHeight}return {x:c,y:d}},getMaxUserPosition:function(){var c=this,b=c.getElement(),d=0,e=0,a;if(b&&!b.destroyed){a=b.dom;if(c.getX()){d=a.scrollWidth-a.clientWidth}if(c.getY()){e=a.scrollHeight-a.clientHeight}}return {x:d,y:e}},refresh:function(){this.positionDirty=!0;this.fireEvent('refresh',this);return this},removePartner:function(c){var b=this._partners,a=c._partners;if(b){delete b[c.getId()]}if(a){delete a[this.getId()]}},scrollBy:function(a,b,c){var d=this.getPosition();if(a){if(a.length){c=b;b=a[1];a=a[0]}else {if(typeof a!=='number'){c=b;b=a.y;a=a.x}}}a=typeof a==='number'?a+d.x:null;b=typeof b==='number'?b+d.y:null;return this.doScrollTo(a,b,c)},ensureVisible:function(a,b){var c=this,g=c.getPosition(),e,d,f;if(a){if(a&&a.element&&!a.isElement){b=a;a=b.element}b=b||{};e=b.highlight;d=c.getEnsureVisibleXY(a,b);if(d.y!==g.y||d.x!==g.x){if(e){c.on({scrollend:'doHighlight',scope:c,single:!0,args:[a,e]})}f=c.doScrollTo(d.x,d.y,b.animation)}else {if(e){c.doHighlight(a,e)}f=Ext.Deferred.getCachedResolved()}}else {f=Ext.Deferred.getCachedRejected()}return f},scrollIntoView:function(d,c,b,a){return this.ensureVisible(d,{animation:b,highlight:a,x:c})},isInView:function(a){return this.doIsInView(a)},scrollTo:function(a,b,d){var c;if(a){if(a.length){d=b;b=a[1];a=a[0]}else {if(typeof a!=='number'){d=b;b=a.y;a=a.x}}}if(a<0||b<0){c=this.getMaxPosition();if(a<0){a+=c.x}if(b<0){b+=c.y}}return this.doScrollTo(a,b,d)},updateDirection:function(a){var d=this,b,c;if(!a){b=d.getX();c=d.getY();if(b&&c){a=c==='scroll'&&b==='scroll'?'both':'auto'}else {if(c){a='vertical'}else {if(b){a='horizontal'}}}d._direction=a}else {if(a==='auto'){b=!0;c=!0}else {if(a==='vertical'){b=!1;c=!0}else {if(a==='horizontal'){b=!0;c=!1}else {if(a==='both'){b='scroll';c='scroll'}}}}d.setX(b);d.setY(c)}},updateScrollbars:function(b,a){this.syncScrollbarCls()},updateSize:function(e){var a=this,f=a.getElement(),b=e.x,c=e.y,d;if(f){a.positionDirty=!0;d=a.getSpacer();if(!b&&!c){d.hide()}else {if(b>0){b-=1}if(c>0){c-=1}a.setSpacerXY({x:b,y:c});d.show()}}},updateMsSnapInterval:function(){this.initMsSnapInterval()},updateSnapSelector:function(){this.initSnap()},updateSnapOffset:function(){this.initSnap()},updateTouchAction:function(b){var a=this.getElement();if(a){a.setTouchAction(b)}},updateElement:function(b,c){var a=this,g=a.getTouchAction(),f=a.scrollListener,h=a.elementCls,d,e;if(f){f.destroy();a.scrollListener=null;a.setScrollElement(null)}if(c&&!c.destroyed){c.setStyle('overflow','hidden');c.removeCls(h)}if(b){if(b.dom===document.documentElement||b.dom===document.body){d=Ext.getDoc();e=Ext.scroll.Scroller.getScrollingElement()}else {e=d=b}a.setScrollElement(Ext.get(e));a.scrollListener=d.on({scroll:a.onDomScroll,scope:a,destroyable:!0});if(g){b.setTouchAction(g)}a.initXStyle();a.initYStyle();b.addCls(h);a.initSnap();a.initMsSnapInterval();a.syncScrollbarCls()}},updateX:function(a){this.initXStyle()},updateY:function(a){this.initYStyle()},deprecated:{5:{methods:{getScroller:function(){return this}}},'5.1.0':{methods:{scrollToTop:function(a){return this.scrollTo(0,0,a)},scrollToEnd:function(a){return this.scrollTo(Infinity,Infinity,a)}}}},privates:{axisConfigs:{x:{x:!0},y:{y:!0},both:{x:!0,y:!0}},getEnsureVisibleXY:function(d,b){var e=this.getPosition(),f=this.component?this.component.getScrollableClientRegion():this.getElement(),c,a;if(d&&d.element&&!d.isElement){b=d;d=b.element}b=b||{};a=b.align;if(a){if(Ext.isString(a)){a={x:b.x===!1?null:a,y:b.y===!1?null:a}}else {if(Ext.isObject(a)){if(a.x&&b.x===!1){a.x=null}if(a.y&&b.y===!1){a.y=null}}}}c=Ext.fly(d).getScrollIntoViewXY(f,e.x,e.y,a);c.x=b.x===!1?e.x:c.x;c.y=b.y===!1?e.y:c.y;return c},getSpacer:function(){var c=this,a=c._spacer,b;if(!a){b=c.getElement();a=c._spacer=b.createChild({cls:c.spacerCls,role:'presentation'},b.dom.firstChild);a.setVisibilityMode(2);a.hide();b.position()}return a},applySpacerXY:function(a,b){if(b&&a.x===b.x&&a.y===b.y){a=undefined}return a},updateSpacerXY:function(e){var a=this,f=a.getSpacer(),b=f.dom.style,c=e.y,d;b.marginTop='';a.translateSpacer(e.x,a.constrainScrollRange(c));b.lineHeight=Number(!parseInt(b.lineHeight,10))+'px';if(c>1000000){d=c-a.getElement().dom.scrollHeight;if(d>0){b.marginTop=Math.min(d,a.maxSpacerMargin||0)+'px'}}},translateSpacer:function(a,b){this.getSpacer().translate(a,b)},doIsInView:function(c,h){var f=this,g=f.component,d={x:!1,y:!1},b,e=f.getElement(),a;if(c&&(h||(e.contains(c)||g&&g.owns(c)))){a=e.getRegion();b=Ext.fly(c).getRegion();d.x=b.right>a.left&&b.left<a.right;d.y=b.bottom>a.top&&b.top<a.bottom}return d},contains:function(b){var c=this.getElement(),a=b;while(a&&a!==Ext.Viewport){if(c.contains(a.el)){return !0}a=a.getRefOwner()}return !1},constrainScrollRange:function(g){var b,c,a,f,e,d;if(g<1000000){return g}if(!this.maxSpacerTranslate){b=Math.pow(2,32);c=b;a=500;f=Ext.getBody().createChild({style:{position:'absolute',left:'-10000px',top:'0',width:'500px',height:'500px'},cn:{cls:this.spacerCls}},null,!0);e=Ext.get(f.firstChild);d=e.dom.style;e.translate(0,b-1);d.lineHeight=Number(!parseInt(d.lineHeight,10))+'px';while(c!==a+1){e.translate(0,b=a+Math.floor((c-a)/2));d.lineHeight=Number(!parseInt(d.lineHeight,10))+'px';if(f.scrollHeight<b){c=b}else {a=b}}e.translate(0,Ext.scroll.Scroller.prototype.maxSpacerTranslate=a);c=a*2;while(c!==a+1){e.dom.style.marginTop=(b=a+Math.floor((c-a)/2))+'px';d.lineHeight=Number(!parseInt(d.lineHeight,10))+'px';if(f.scrollHeight<b){c=b}else {a=b}}Ext.fly(f).destroy();Ext.scroll.Scroller.prototype.maxSpacerMargin=a-Ext.scroll.Scroller.prototype.maxSpacerTranslate}return Math.min(g,this.maxSpacerTranslate)},convertX:function(a){return a},doHighlight:function(b,a){if(a!==!0){Ext.fly(b).highlight(a)}else {Ext.fly(b).highlight()}},doScrollTo:function(a,d,l){var b=this,f=b.getScrollElement(),h,k,i,j,g,c,e;if(f&&!f.destroyed){k=f.dom;i=a===Infinity;j=d===Infinity;if(i||j){h=b.getMaxPosition();if(i){a=h.x}if(j){d=h.y}}if(a!==null){a=b.convertX(a)}if(l){c=b.translatable;if(!c){b.translatable=c=new Ext.util.translatable.ScrollPosition({element:f})}e=new Ext.Deferred();c.on('animationend',function(){if(b.destroyed){e.reject()}else {e.resolve()}},Ext.global,{single:!0,onFrame:!0});c.translate(a,d,l);g=e.promise}else {if(d!=null){k.scrollTop=d}if(a!=null){k.scrollLeft=a}g=Ext.Deferred.getCachedResolved()}b.positionDirty=!0}else {g=Ext.Deferred.getCachedRejected()}return g},fireScrollStart:function(b,c,e,f){var a=this,d=a.component;a.invokePartners('onPartnerScrollStart',b,c,e,f);a.startX=b-e;a.startY=c-f;if(a.hasListeners.scrollstart){a.fireEvent('scrollstart',a,b,c)}if(d&&d.onScrollStart){d.onScrollStart(b,c)}Ext.GlobalEvents.fireEvent('scrollstart',a,b,c)},fireScroll:function(b,c,e,f){var a=this,d=a.component;a.invokePartners('onPartnerScroll',b,c,e,f);if(a.hasListeners.scroll){a.fireEvent('scroll',a,b,c,e,f)}if(d&&d.onScrollMove){d.onScrollMove(b,c)}Ext.GlobalEvents.fireEvent('scroll',a,b,c,e,f)},fireScrollEnd:function(b,c,g,h){var a=this,d=a.component,e=b-a.startX,f=c-a.startY;a.startX=a.startY=null;a.invokePartners('onPartnerScrollEnd',b,c,g,h);if(a.hasListeners.scrollend){a.fireEvent('scrollend',a,b,c,e,f)}if(d&&d.onScrollEnd){d.onScrollEnd(b,c)}Ext.GlobalEvents.fireEvent('scrollend',a,b,c,e,f)},getElementScroll:function(a){return a.getScroll()},initSnap:function(){var a=this,e=a.getSnapOffset(),g=a.getSnapSelector(),f=a.getElement(),b,c,d;if(f&&g){f.addCls(a.snappableCls);a.removeSnapStylesheet();if(e){b=e.x||0;c=e.y||0;if(b){b=-b+'px'}if(c){c=-c+'px'}}d=b+' '+c+';';a.snapStylesheet=Ext.util.CSS.createStyleSheet('#'+f.id+' '+g+'{-webkit-scroll-snap-coordinate:'+d+'scroll-snap-coordinate:'+d+'}')}},initMsSnapInterval:function(){var e=this.getElement(),a,c,d,b;if(e){a=this.getMsSnapInterval();if(a){c=a.x;d=a.y;b=e.dom.style;if(c){b['-ms-scroll-snap-points-x']='snapInterval(0px, '+c+'px)'}if(d){b['-ms-scroll-snap-points-y']='snapInterval(0px, '+d+'px)'}}}},initXStyle:function(){var b=this.getElement(),a=this.getX();if(b&&b.dom){if(!a){a='hidden'}else {if(a===!0){a='auto'}}b.setStyle('overflow-x',a)}},initYStyle:function(){var b=this.getElement(),a=this.getY();if(b&&b.dom){if(!a){a='hidden'}else {if(a===!0){a='auto'}}b.setStyle('overflow-y',a)}},invokePartners:function(h,i,j,f,g){var b=this,c=b._partners,d,e,a;if(!b.suspendSync){b.invokingPartners=!0;for(e in c){a=c[e].axes;d=c[e].scroller;if(!d.invokingPartners&&(f&&a.x||g&&a.y)){d[h](b,a.x?i:null,a.y?j:null,f,g)}}b.invokingPartners=!1}},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(c){var a=this,b;if(a.suspendSync){a.suspendSync--}if(!a.suspendSync&&c){b=a.getPosition();a.invokePartners('onPartnerScroll',b.x,b.y);a.invokePartners('onPartnerScrollEnd',b.x,b.y)}},readPosition:function(a){var d=this,c=d.getScrollElement(),b;a=a||{};if(c&&!c.destroyed){b=d.getElementScroll(c);a.x=b.left;a.y=b.top}return a},updateDomScrollPosition:function(g){var a=this,b=a.position,h=b.x,i=b.y,e,f,c,d;a.readPosition(b);e=b.x;f=b.y;a.positionDirty=!1;if(!g){c=e-h;d=f-i;if(c||d){if(!a.isScrolling){a.isScrolling=Ext.isScrolling=!0;a.fireScrollStart(e,f,c,d)}a.fireScroll(e,f,c,d);a.onDomScrollEnd(e,f,c,d)}}return b},syncWithPartners:function(){var a=this,d=a._partners,e,c,b;a.suspendPartnerSync();for(e in d){c=d[e].scroller;b=c.getPosition();a.onPartnerScroll(c,b.x,b.y)}a.resumePartnerSync()},syncScrollbarCls:function(){var a=this.getElement();if(a){a.toggleCls(this.noScrollbarsCls,this.getScrollbars()===!1)}},onDomScroll:function(){var a=!!this.restoreTimer;this.updateDomScrollPosition(a);if(a){Ext.undefer(this.onDomScrollEnd.timer);return}},doOnDomScrollEnd:function(b,c,d,e){var a=this;if(a.destroying||a.destroyed){return}a.isScrolling=Ext.isScrolling=!1;if(b===undefined){return}a.trackingScrollLeft=b;a.trackingScrollTop=c;a.fireScrollEnd(b,c,d,e)},onPartnerScrollStart:function(e,c,d,a,b){this.isScrolling=!0;this.fireScrollStart(c,d,a,b)},onPartnerScroll:function(e,a,b,c,d){this.doScrollTo(a,b,!1);this.updateDomScrollPosition(!0);this.fireScroll(a,b,c,d)},onPartnerScrollEnd:function(e,c,d,a,b){this.cancelOnDomScrollEnd();this.doOnDomScrollEnd(c,d,a,b)},removeSnapStylesheet:function(){var a=this.snapStylesheet;if(a){Ext.util.CSS.removeStyleSheet(a);this.snapStylesheet=null}},restoreState:function(){var a=this,b=a.getScrollElement();if(b){if(a.trackingScrollTop!==undefined){if(!a.restoreTimer){a.restoreTimer=Ext.defer(function(){a.restoreTimer=null},50)}a.doScrollTo(a.trackingScrollLeft,a.trackingScrollTop,!1)}}}}},function(a){Ext.getViewportScroller=function(){var b=a.viewport;if(!b){a.viewport=b=new a();a.initViewportScroller()}return b};Ext.setViewportScroller=function(b){if(a.viewport!==b){Ext.destroy(a.viewport);if(b&&!b.isScroller){b=new a(b)}a.viewport=b}};Ext.onReady(function(){a.initViewportScrollerTimer=Ext.defer(a.initViewportScroller,100)})});Ext.define('Ext.util.Floating',{mixinId:'floating',focusOnToFront:!0,shadow:'sides',animateShadow:!1,constrain:!1,alignOnScroll:!0,config:{activeCounter:0,alwaysOnTop:!1},preventDefaultAlign:!1,_visModeMap:{visibility:1,display:2,offsets:3},constructor:function(){var a=this,e=a.el,d=a.shadow,c,b;if(d){b={mode:d===!0?'sides':d};c=a.shadowOffset;if(c){b.offset=c}b.animate=a.animateShadow;b.fixed=a.fixed;e.enableShadow(b,!1)}if(a.shim||Ext.useShims){e.enableShim({fixed:a.fixed},!1)}e.setVisibilityMode(a._visModeMap[a.hideMode]);a.el.on({mousedown:a.onMouseDown,scope:a,capture:!0});a.registerWithOwnerCt();a.initHierarchyEvents()},alignTo:function(b,i,j,l,k){var a=this,c,d,h,g,f,e;if(b.isComponent){c=b.el;d=b.destroyed}else {a.alignTargetFly=a.alignTargetFly||new Ext.dom.Fly();c=b=a.alignTargetFly.attach(b);h=c.dom;d=!h||Ext.isGarbage(h)}if(d){a._lastAlignTarget=null;if(a.alignListeners){a.alignListeners.destroy()}return}a.mixins.positionable.alignTo.call(a,c,i,j,l,k!==!1);g=a.getXY();f=b.getXY();a.alignVector=[g[0]-f[0],g[1]-f[1]];a._lastAlignTarget=b;a._lastAlignToPos=i;a._lastAlignToOffsets=j;a._topAlignTarget=a.getTopAlignTarget();a.clearClip();if(!a.alignListeners){e={resize:{fn:a.alignOnResize,buffer:100},scope:a,destroyable:!0};if(a.alignOnScroll&&!c.contains(a.el)){e.scroll=a.doRealign}a.alignListeners=Ext.on(e)}},initFloatConstrain:function(){var a=this,b=a.floatParent;if((a.constrain||a.constrainHeader)&&!a.constrainTo){a.constrainTo=b?b.getTargetEl():a.container}},initHierarchyEvents:function(){var a=this;if(!a.hierarchyEventListeners){a.hierarchyEventListeners=Ext.on({hide:'syncHidden',collapse:'syncHidden',show:'syncHidden',expand:'syncHidden',added:'syncHidden',scope:a,destroyable:!0})}},moveFloatingDescendants:function(e){var d=this,b,c,a;if(d.floatingDescendants&&d.floatingDescendants.zIndexStack){b=d.floatingDescendants.zIndexStack.getSource();for(a=0;a<b.length;a++){c=b.getAt(a);if(c.up('#'+e.id)){c.registerWithOwnerCt()}}}},registerWithOwnerCt:function(){var a=this,c=a.ownerCt,b=a.zIndexParent;if(b){b.unregisterFloatingItem(a)}b=a.zIndexParent=a.up('[floating]');a.floatParent=c||b;a.initFloatConstrain();delete a.ownerCt;if(b){b.registerFloatingItem(a)}else {Ext.WindowManager.register(a)}},onMouseDown:function(e){var b=this,g=b.focusTask,h=b.getRefOwner(),c=e.pointerType==='touch',a,d,f;if(b.floating&&(!g||!g.id)){if(b.owns(Ext.Element.getActiveElement())){c={ownsFocus:!0}}a=e.target;d=b.el.dom;while(!c&&a&&a!==d){if(Ext.fly(a).isFocusable()){c={ownsFocus:!0}}a=a.parentNode}f=Ext.WindowManager.getActive()===b&&(a===d||c);if(!f){b.toFront(c)}if(!c&&h&&h.containsFocus){e.preventDefault()}}},onBeforeFloatLayout:function(){this.el.preventSync=!0},onAfterFloatLayout:function(){var a=this.el;if(a.shadow||a.shim){a.setUnderlaysVisible(a.getData().isVisible!==!1);a.syncUnderlays()}},syncHidden:function(){var a=this,d=a.hidden||!a.rendered,c=a.hierarchicallyHidden=a.isHierarchicallyHidden(),b=a.pendingShow;if(d!==c){if(c){a.hide();a.pendingShow=!0}else {if(b){delete a.pendingShow;if(b.length){a.show.apply(a,b)}else {a.show()}}}}},setZIndex:function(a){var b=this;b.el.setZIndex(a);a+=10;if(b.floatingDescendants){a=Math.floor(b.floatingDescendants.setBase(a)/100)*100+10000}return a},doConstrain:function(c){var a=this,b=a.calculateConstrainedPosition(c,null,!0);if(b){a.setPosition(b)}},updateActiveCounter:function(c){var b=this,a=b.zIndexParent;if(a&&a!==a.zIndexManager.front&&b.bringParentToFront!==!1){a.setActiveCounter(++Ext.ZIndexManager.activeCounter)}a=b.zIndexManager;if(a){a.onComponentUpdate(b)}},updateAlwaysOnTop:function(b){var a=this.zIndexManager;if(a){a.onComponentUpdate(this)}},toFront:function(b){var a=this;if(a.zIndexManager.bringToFront(a,b||!a.focusOnToFront)){if(a.hasListeners.tofront){a.fireEvent('tofront',a,a.el.getZIndex())}}return a},onZIndexChange:function(b){var a=this;if(b){if(a.el.shadow&&a.el.getData().isVisible!==!1&&!a.maximized){a.el.enableShadow(null,!0)}a.fireEvent('activate',a)}else {a.fireEvent('deactivate',a)}},onFocusTopmost:function(){var a=Ext.ComponentManager.getActiveComponent();if(!a||!a.up(this)){this.focus()}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var a=this,b=a.floatParent,c;if(a.isVisible()){c=a.getAlignToXY(b?b.getTargetEl():a.container,'c-c');a.setPagePosition(c)}else {a.needsCenter=!0}return a},onFloatShow:function(){var a=this,b=a._lastAlignTarget;if(a.needsCenter){a.center()}else {if(b){if(b.destroyed){a._lastAlignTarget=null}else {a.alignTo(b,a._lastAlignToPos,a._lastAlignToOffsets,!1,!a.fixed)}}}a.needsCenter=!1},fitContainer:function(f){var d=this,c=d.floatParent,a=c?c.getTargetEl():d.container,b=a.getViewSize(),e=c||a.dom!==document.body?[0,0]:a.getXY();b.x=e[0];b.y=e[1];d.setBox(b,f)},privates:{onFloatDestroy:function(){var a=this,b=a.alignTargetFly;if(a.hierarchyEventListeners){a.hierarchyEventListeners.destroy();a.hierarchyEventListeners=null}a.clearAlignEl();if(b){b.detach();b.destroy()}},getTopAlignTarget:function(){var a=this._lastAlignTarget,b=a;while(a&&(b=a)&&a.isComponent){if(b.isFloating()){a=b._lastAlignTarget}else {a=b.up('{isFloating()}');a=a&&a._lastAlignTarget}}return b},clearAlignEl:function(){var a=this;if(a._lastAlignTarget){a.alignListeners=Ext.destroy(a.alignListeners);Ext.un('scroll',a.doRealign,a);a._lastAlignToPos=a._lastAlignTarget=a._lastAlignToOffsets=a._topAlignTarget=null}},alignOnResize:function(){this.doRealign()},doRealign:function(b){var a=this,c=a._lastAlignTarget.el,d,f,e,g;if(c&&a.isVisible()){if(c.isComponent){d=c.destroyed}else {f=c.dom;d=!f||Ext.isGarbage(f)}if(d){a.clearAlignEl()}else {if(!b||b.getElement().contains(a._topAlignTarget.el)&&!b.getElement().contains(a.el)){e=c.getXY();g=[e[0]+a.alignVector[0],e[1]+a.alignVector[1]];a.setXY(g);if(b){a.clipToScroller(b)}}}}},clipToScroller:function(e){var d=this,c=d._topAlignTarget.getBox(),b=e.getElement().getConstrainRegion(),a=0;if(c.top<b.top){a=1}if(c.right>b.right){a=a|2}if(c.bottom>b.bottom){a=a|4}if(c.left<b.left){a=a|8}if(a){d.clipTo(b,a)}else {d.clearClip()}}}});Ext.define('Ext.util.ElementContainer',{mixinId:'elementCt',config:{childEls:{$value:{},cached:!0,lazy:!0,merge:function(d,f,g,e){var c=f?Ext.Object.chain(f):{},b,a;if(d instanceof Array){for(b=d.length;b--;){a=d[b];if(!e||!(a in c)){if(typeof a==='string'){c[a]={name:a,itemId:a}}else {c[a.name]=a}}}}else {if(d){if(d.constructor===Object){for(b in d){if(!e||!(b in c)){a=d[b];if(a===!0){c[b]={itemId:b}}else {if(typeof a==='string'){c[b]={itemId:a}}else {c[b]=a;if(!('itemId' in a)){a.itemId=b}}}c[b].name=b}}}else {if(!e||!(d in c)){c[d]={name:d,itemId:d}}}}}return c}}},destroy:function(){var c=this,d=c.getChildEls(),a,b;for(b in d){a=c[b];if(a){if(a.destroy){a.component=null;a.destroy()}c[b]=null}}},privates:{addChildEl:function(a){var c=this,b=c.getChildEls();if(!c.hasOwnProperty('childEls')){c.childEls=b=Ext.Object.chain(b)}if(typeof a==='string'){a={name:a,itemId:a}}b[a.name]=a},afterClassMixedIn:function(a){var c=a.prototype,b=c.childEls;if(b){delete c.childEls;a.getConfigurator().add({childEls:b})}},attachChildEls:function(h,n){var i=this,k=i.getChildEls(),e=n||i,m=e.id+'-',l=!e.frame,f,g,b,j,c,a,d;for(f in k){b=k[f];if(l&&b.frame){continue}c=b.select;if(c){a=h.select(c,!0)}else {if(!(c=b.selectNode)){if(!(d=b.id)){d=m+b.itemId;a=Ext.cache[d]}else {a=Ext.cache[d]||h.getById(d)}}else {a=h.selectNode(c,!1)}}if(a){if(a.isElement){a.component=e}else {if(a.isComposite&&!a.isLite){g=a.elements;for(j=g.length;j--;){g[j].component=e}}}}i[f]=a||null}}}});Ext.define('Ext.util.Renderable',{mixinId:'renderable',frameIdRegex:/[-]frame\d+[TMB][LCR]$/,frameCls:Ext.baseCSSPrefix+'frame',frameElNames:['TL','TC','TR','ML','MC','MR','BL','BC','BR','Table'],frameTpl:['<tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'before\'); %}</tpl>','<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','</tpl>','<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">','{%this.applyRenderTpl(out, values)%}','</div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','</tpl>','<tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'after\'); %}</tpl>'],frameTableTpl:['<tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'before\'); %}</tpl>','<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ',Ext.baseCSSPrefix+'table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>','</tr>','</tpl>','<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">','{%this.applyRenderTpl(out, values)%}','</td>','<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>','</tr>','<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>','</tr>','</tpl>','</table>','<tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'after\'); %}</tpl>'],_renderState:0,_layerCls:Ext.baseCSSPrefix+'layer',_fixedLayerCls:Ext.baseCSSPrefix+'fixed-layer',ariaStaticRoles:{presentation:!0,article:!0,definition:!0,directory:!0,document:!0,img:!0,heading:!0,math:!0,note:!0,banner:!0,complementary:!0,contentinfo:!0,navigation:!0,search:!0,'undefined':!0,'null':!0},statics:{makeRenderSetter:function(c,b){var a=c.name;return function(g){var d=this,f=d.renderConfigs||(d.renderConfigs={}),e=f[b];if(d._renderState>=b){(c.setter||c.getSetter()).call(d,g)}else {if(!e){f[b]=e={}}if(!(a in e)){e[a]=d[a]}d[a]=g}return d}},processRenderConfig:function(g,e,c){var h=this.prototype,j=this.getConfigurator(),k=Ext.util.Renderable,l=k.makeRenderSetter,d=g[e],b,a,i,f;for(i in d){a=Ext.Config.get(i);if(!h[f=a.names.set]){b=a.renderSetter||(a.renderSetter={});h[f]=b[c]||(b[c]=l(a,c))}}delete g[e];j.add(d)}},onClassMixedIn:function(a){var e=a.override,c=this.processRenderConfig,d=function(b){if(b.beforeRenderConfig){this.processRenderConfig(b,'beforeRenderConfig',1)}if(b.renderConfig){this.processRenderConfig(b,'renderConfig',3)}e.call(this,b)},b=function(e,b){e.override=d;e.processRenderConfig=c;if(b.beforeRenderConfig){e.processRenderConfig(b,'beforeRenderConfig',1)}if(b.renderConfig){e.processRenderConfig(b,'renderConfig',3)}};b(a,a.prototype);a.onExtended(b)},afterRender:function(){var a=this,c={},i=a.protoEl,g=a.el,d,b,h,f,e;a.finishRenderChildren();a._renderState=4;if(a.contentEl){h=Ext.baseCSSPrefix;f=h+'hidden-';e=a.contentEl=Ext.get(a.contentEl);e.component=a;e.removeCls([h+'hidden',f+'display',f+'offsets']);a.getContentTarget().appendChild(e.dom)}i.writeTo(c);b=c.removed;if(b){g.removeCls(b)}b=c.cls;if(b.length){g.addCls(b)}b=c.style;if(c.style){g.setStyle(b)}a.protoEl=null;if(!a.ownerCt&&!a.skipLayout){a.updateLayout()}if(!(a.x&&a.y)&&(a.pageX||a.pageY)){a.setPagePosition(a.pageX,a.pageY)}if(a.disableOnRender){a.onDisable()}d=a.controller;if(d&&d.afterRender){d.afterRender(a)}if(a.focusableContainer&&a.initFocusableContainer){a.initFocusableContainer()}},afterFirstLayout:function(l,k){var a=this,g=a.x,h=a.y,j=a.defaultAlign,i=a.alignOffset,f,d,e,b,c;if(!a.ownerLayout){d=g!==undefined;e=h!==undefined}if(a.floating&&!a.preventDefaultAlign&&(!d||!e)){if(a.floatParent){b=a.floatParent.getTargetEl().getViewRegion();c=a.el.getAlignToXY(a.alignTarget||a.floatParent.getTargetEl(),j,i);b.x=c[0]-b.x;b.y=c[1]-b.y}else {c=a.el.getAlignToXY(a.alignTarget||a.container,j,i);b=a.el.translateXY(c[0],c[1])}g=d?g:b.x;h=e?h:b.y;d=e=!0}if(d||e){a.setPosition(g,h)}a.onBoxReady(l,k);f=a.controller;if(f&&f.boxReady){f.boxReady(a,l,k)}},beforeRender:function(){var a=this,d=a.floating,e=a.getComponentLayout(),b=a.userCls,c;a._renderState=1;a.ariaUsesMainElement=a.ariaEl==='el';c=a.controller;if(c&&c.beforeRender){c.beforeRender(a)}a.initBindable();if(a.renderConfigs){a.flushRenderConfigs()}if(b){a.addCls(b)}if(d){a.addCls(a.fixed?a._fixedLayerCls:a._layerCls);b=d.cls;if(b){a.addCls(b)}}a.frame=a.frame||a.alwaysFramed;if(!e.initialized){e.initLayout()}a.initOverflow();a.setUI(a.ui)},doApplyRenderTpl:function(d,a){var c=a.$comp,b;if(!c.rendered){b=c.initRenderTpl();b.applyOut(a.renderData,d)}},getElConfig:function(){var a=this,e=a.autoEl,c=a.getFrameInfo(),b={tag:'div',tpl:c?a.initFramingTpl(c.table):a.initRenderTpl()},g=a.layoutTargetCls,d=a.protoEl,f=a.ariaRole,h;a.initStyles(d);if(g&&!c){d.addCls(g)}d.writeTo(b);d.flush();if(e){if(Ext.isString(e)){b.tag=e}else {Ext.apply(b,e)}}if(f&&a.ariaUsesMainElement){b.role=f;if(!a.ariaStaticRoles[f]){b['aria-hidden']=!!a.hidden;b['aria-disabled']=!!a.disabled;if(a.ariaLabel&&!a.ariaLabelledBy){b['aria-label']=a.ariaLabel}if(a.collapsible){b['aria-expanded']=!a.collapsed}if(a.ariaRenderAttributes){Ext.apply(b,a.ariaRenderAttributes)}if(a.config.ariaAttributes){Ext.apply(b,a.getAriaAttributes())}}}b.id=a.id;if(b.tpl){if(c){b.tplData=h=a.getFrameRenderData();h.renderData=a.initRenderData()}else {b.tplData=a.initRenderData()}}a.ariaRenderAttributes=null;return b},getInsertPosition:function(a){if(a!==undefined){if(Ext.isNumber(a)){a=this.container.dom.childNodes[a]}else {a=Ext.getDom(a)}}return a},getRenderTree:function(){var a=this,b=null;if(!a.hasListeners.beforerender||a.fireEvent('beforerender',a)!==!1){a._renderState=1;a.beforeRender();a.rendering=!0;a._renderState=2;b=a.getElConfig();if(a.el){b.id=a.$pid=Ext.id(null,a.el.identifiablePrefix)}}return b},initRenderData:function(){var a=this,c=a.ariaRole,d,b;d=Ext.apply({$comp:a,id:a.id,ui:a.ui,uiCls:a.uiCls,baseCls:a.baseCls,componentCls:a.componentCls,frame:a.frame,hasTabGuard:!!a.tabGuard,scrollerCls:a.scrollerCls,childElCls:'',ariaEl:a.ariaEl},a.renderData);if(c&&!a.ariaUsesMainElement){b={role:c};if(!a.ariaStaticRoles[c]){b['aria-hidden']=!!a.hidden;b['aria-disabled']=!!a.disabled;if(a.ariaLabel&&!a.ariaLabelledBy){b['aria-label']=a.ariaLabel}if(a.collapsible){b['aria-expanded']=!a.collapsed}if(a.ariaRenderAttributes){Ext.apply(b,a.ariaRenderAttributes)}if(a.config.ariaAttributes){Ext.apply(b,a.getAriaAttributes())}}d.ariaAttributes=b}return d},onRender:function(j,i){var a=this,f=a.x,g=a.y,b=null,h=a.el,c=a.scrollable,e,d;a.applyRenderSelectors();if(c&&c.isScroller){c.setElement(a.getOverflowEl());if(Ext.isIE){a.showListenerIE=Ext.on('show',a.onGlobalShow,a,{destroyable:!0})}}a.rendering=null;a.rendered=!0;a._renderState=3;if(a.renderConfigs){a.flushRenderConfigs()}if(f!=null){b={x:f}}if(g!=null){(b=b||{}).y=g}if(!a.getFrameInfo()){e=a.width;d=a.height;if(typeof e==='number'){b=b||{};b.width=e}if(typeof d==='number'){b=b||{};b.height=d}}a.lastBox=h.lastBox=b},render:function(c,g){var a=this,b=a.el,f=a.ownerLayout,h,d,e;if(b&&!b.isElement){a.wrapPrimaryEl(b);b=a.el}if(!a.skipLayout){Ext.suspendLayouts()}c=a.initContainer(c);e=a.getInsertPosition(g);if(!b){d=a.getRenderTree();if(f&&f.transformItemRenderTree){d=f.transformItemRenderTree(d)}if(d){if(e){b=Ext.DomHelper.insertBefore(e,d)}else {b=Ext.DomHelper.append(c,d)}a.wrapPrimaryEl(b);a.cacheRefEls(b)}}else {if(!a.hasListeners.beforerender||a.fireEvent('beforerender',a)!==!1){a.beforeRender();a.needsRenderTpl=a.rendering=!0;a._renderState=2;a.initStyles(b);if(a.allowDomMove!==!1){if(e){c.dom.insertBefore(b.dom,e)}else {c.dom.appendChild(b.dom)}}}else {h=!0}}if(b&&!h){a.finishRender(g)}if(!a.skipLayout){Ext.resumeLayouts(!a.hidden&&!c.isDetachedBody)}},ensureAttachedToBody:function(c){var a=this,b;while(a.ownerCt){a=a.ownerCt}if(a.container.isDetachedBody){a.container=b=Ext.getBody();b.appendChild(a.el.dom);if(c){a.updateLayout()}if(typeof a.x==='number'||typeof a.y==='number'){a.setPosition(a.x,a.y)}}},privates:{applyRenderSelectors:function(){var a=this,b=a.renderSelectors,e=a.el,d,c;a.attachChildEls(e);if(typeof a.focusEl==='string'){a.focusEl=a[a.focusEl]}a.ariaEl=a[a.ariaEl]||a.el;if(b){for(c in b){d=b[c];if(d){a[c]=e.selectNode(d,!1)}}}},cacheRefEls:function(a){a=a||this.el;var e=Ext.cache,h=Ext.dom.Element,f=a.isElement?a.dom:a,d=f.querySelectorAll('[data-ref]'),g=d.length,c,b;for(b=0;b<g;b++){c=d[b];if(!e[c.id]){new h(c)}}},doAutoRender:function(){var a=this;if(!a.rendered){if(a.floating){a.render(a.renderTo||document.body)}else {a.render(Ext.isBoolean(a.autoRender)?Ext.getBody():a.autoRender)}}},doRenderContent:function(c,d){var a=d.$comp,b=a.data;if(a.html){Ext.DomHelper.generateMarkup(a.html,c);delete a.html}if(a.tpl){if(!a.tpl.isTemplate){a.tpl=new Ext.XTemplate(a.tpl)}if(b){a.data=b=b.isEntity?b.getData(!0):b;a.tpl.applyOut(b,c)}}},doRenderFramingTabGuard:function(d,a,c){var b=a.$comp.layout;a.renderData.$skipTabGuards=!0;if(b&&b.doRenderTabGuard){b.doRenderTabGuard.call(this,d,a,c)}},flushRenderConfigs:function(){var b=this,f=b.renderConfigs,h=b._renderState,e,c,a,d,g;if(f){for(c=0;c<=h;++c){e=f[c];if(e){f[c]=null;for(a in e){g=e[a];(d||(d={}))[a]=b[a];b[a]=g}}}if(d){b.setConfig(d)}}},finishRender:function(j){var a=this,g=Ext.cache,d,h,f,e,i,b,c;if(!a.el||a.$pid){if(a.container){c=g[a.id];b=c?c.dom:a.container.getById(a.id,!0)}else {f=a.$pid||a.id;c=g[f];b=c?c.dom:Ext.getDom(f)}if(!a.el){a.wrapPrimaryEl(b)}else {delete a.$pid;if(!a.el.dom){a.wrapPrimaryEl(a.el)}b.parentNode.insertBefore(a.el.dom,b);d=b;b=a.el.dom;h=b.firstChild;while(d.firstChild){b.insertBefore(d.firstChild,h)}a.el.addCls(d.className);Ext.removeNode(d)}}else {if(a.needsRenderTpl){e=a.initRenderTpl();if(e){i=a.initRenderData();e.insertFirst(a.getTargetEl(),i)}a.cacheRefEls()}}a.el.component=a;if(!a.container){a.container=Ext.get(a.el.dom.parentNode)}if(a.ctCls){a.container.addCls(a.ctCls)}a.onRender(a.container,j);if(!a.overflowInited){a.initOverflow()}a.el.setVisibilityMode(Ext.Element[a.hideMode.toUpperCase()]);if(a.overCls){a.el.hover(a.addOverCls,a.removeOverCls,a)}if(a.hasListeners.render){a.fireEvent('render',a)}a.afterRender();if(a.hasListeners.afterrender){a.fireEvent('afterrender',a)}a.initEvents();if(a.hidden){a.el.hide()}},finishRenderChildren:function(){var a=this.getComponentLayout();a.finishRender()},getFrameRenderData:function(){var a=this,b=a.frameSize,c='';if(a._syncFrameHeight&&a.height){c='height:'+(a.height-b.height)+'px'}return {$comp:a,id:a.id,fgid:a.id+'-frame',ui:a.ui,uiCls:a.uiCls,frameCls:a.frameCls,frameBodyCls:a.layoutTargetCls||'',baseCls:a.baseCls,hasTabGuard:a.tabGuard,top:!!b.top,left:!!b.left,right:!!b.right,bottom:!!b.bottom,mcStyle:c,frameElCls:''}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return !1}var c=this,q=c.frameInfoCache,p=c.getFramingInfoCls()+'-frameInfo',b=q[p],r,a,o,l,j,n,g,e,d,f,m,i,h,k;if(b==null){r=Ext.fly(c.getStyleProxy(p),'frame-style-el');a=r.getStyle('font-family');a=a&&a.split('-');if(a&&a.length>=5){o=parseInt(a[1],10);l=parseInt(a[2],10);j=parseInt(a[3],10);n=parseInt(a[4],10);g=parseInt(a[5],10)||0;e=parseInt(a[6],10)||0;d=parseInt(a[7],10)||0;f=parseInt(a[8],10)||0;m=parseInt(a[9],10)||0;i=parseInt(a[10],10)||0;h=parseInt(a[11],10)||0;k=parseInt(a[12],10)||0;b={table:a[0].charAt(0)==='t',vertical:a[0].charAt(1)==='v',top:o,right:l,bottom:j,left:n,width:n+l,height:o+j,border:{top:g,right:e,bottom:d,left:f,width:f+e,height:g+d},padding:{top:m,right:i,bottom:h,left:k,width:k+i,height:m+h}}}else {b=!1}q[p]=b}c.frame=!!b;c.frameSize=b;return b},getFramingInfoCls:function(){return this.baseCls+'-'+this.ui},getStyleProxy:function(b){var a;a=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({role:'presentation',style:{position:'absolute',top:'-10000px'}},null,!0));a.className=b;return a},getFrameTpl:function(a){return this.lookupTpl(a?'frameTableTpl':'frameTpl')},initContainer:function(a){var b=this;if(!a&&b.el){a=b.el.dom.parentNode;b.allowDomMove=!1}b.container=a.dom?a:Ext.get(a);return b.container},initOverflow:function(){var a=this,d=a.getOverflowStyle(),c=a.scrollFlags,b=a.getOverflowEl(),e=c.y||c.x;if(!e||!b||!b.isElement){return}a.overflowInited=!0;b.setStyle(d)},initFramingTpl:function(b){var a=this.getFrameTpl(b);if(a&&!a.applyRenderTpl){this.setupFramingTpl(a)}return a},initRenderTpl:function(){var a=this.lookupTpl('renderTpl');if(a&&!a.renderContent){this.setupRenderTpl(a)}return a},setupFramingTpl:function(a){a.applyRenderTpl=this.doApplyRenderTpl;a.renderTabGuard=this.doRenderFramingTabGuard},setupRenderTpl:function(a){a.renderBody=a.renderContent=this.doRenderContent},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var a=this,p=a.el.dom,m=a.frameTable,h=a.frameBody,g=h.dom,q=a.getFrameInfo(),k,b,c,f,d,j,n,o,l,e,i;c=document.createElement('div');j=a.getFrameRenderData();j.hasTabGuard=!1;o=a.getFrameTpl(q.table);o.insertFirst(c,j);i=c.querySelectorAll('[data-ref]');e=c.querySelector('[data-ref="frameBody"]');for(d=g;d.parentNode!==p;){d=d.parentNode}while(c.firstChild){p.insertBefore(c.firstChild,d)}e.parentNode.replaceChild(g,e);g.className=e.className;h.setSize();k=a.getChildEls();if(m){m.destroy();a.frameTable=null}for(b in k){if(k[b].frame){f=a[b];if(f&&f!==h){f.destroy();a[b]=null}}}for(l=i.length;l--;){b=(n=i[l]).getAttribute('data-ref');if(b!=='frameBody'){a[b]=new Ext.dom.Element(n)}}},frameInfoCache:{}}});Ext.define('Ext.state.Provider',{mixins:{observable:Ext.util.Observable},prefix:'ext-',constructor:function(b){var a=this;Ext.apply(a,b);a.state={};a.mixins.observable.constructor.call(a)},get:function(c,b){var a=this.state[c];return a===undefined?b:a},clear:function(b){var a=this;delete a.state[b];a.fireEvent('statechange',a,b,null)},set:function(c,b){var a=this;a.state[c]=b;a.fireEvent('statechange',a,c,b)},decodeValue:function(a){var i=this,j=/^(a|n|d|b|s|o|e):(.*)$/,e=j.exec(unescape(a)),d,h,g,c,f,b;if(!e||!e[1]){return}h=e[1];a=e[2];switch(h){case 'e':return null;case 'n':return parseFloat(a);case 'd':return new Date(Date.parse(a));case 'b':return a==='1';case 'a':d=[];if(a){c=a.split('^');f=c.length;for(b=0;b<f;b++){a=c[b];d.push(i.decodeValue(a))}};return d;case 'o':d={};if(a){c=a.split('^');f=c.length;for(b=0;b<f;b++){a=c[b];g=a.split('=');d[g[0]]=i.decodeValue(g[1])}};return d;default:return a;}},encodeValue:function(a){var c='',e=0,b,f,d;if(a==null){return 'e:1'}else {if(typeof a==='number'){b='n:'+a}else {if(typeof a==='boolean'){b='b:'+(a?'1':'0')}else {if(Ext.isDate(a)){b='d:'+a.toUTCString()}else {if(Ext.isArray(a)){for(f=a.length;e<f;e++){c+=this.encodeValue(a[e]);if(e!==f-1){c+='^'}}b='a:'+c}else {if(typeof a==='object'){for(d in a){if(typeof a[d]!=='function'&&a[d]!==undefined){c+=d+'='+this.encodeValue(a[d])+'^'}}b='o:'+c.substring(0,c.length-1)}else {b='s:'+a}}}}}}return escape(b)}});Ext.define('Ext.state.Manager',{singleton:!0,constructor:function(){this.provider=new Ext.state.Provider()},setProvider:function(a){this.provider=a},get:function(b,a){return this.provider.get(b,a)},set:function(b,a){this.provider.set(b,a)},clear:function(a){this.provider.clear(a)},getProvider:function(){return this.provider}});Ext.define('Ext.state.Stateful',{mixinId:'state',config:{stateful:null},saveDelay:100,constructor:function(){var a=this;if(!a.stateEvents){a.stateEvents=[]}if(a.stateful){a.addStateEvents(a.stateEvents);a.initState()}},addStateEvents:function(f){var a=this,e,b,c,d;if(a.stateful&&a.getStateId()){d=typeof f==='string'?arguments:f;c=a.stateEventsByName||(a.stateEventsByName={});for(e=d.length;e--;){b=d[e];if(b&&!c[b]){c[b]=1;a.on(b,a.onStateChange,a)}}}},onStateChange:function(){var a=this,d=a.saveDelay,b,c;if(!a.stateful){return}if(d){if(!a.stateTask){b=Ext.state.Stateful;c=b.runner||(b.runner=new Ext.util.TaskRunner());a.stateTask=c.newTask({run:a.saveState,scope:a,interval:d,repeat:1,fireIdleEvent:!1})}a.stateTask.start()}else {a.saveState()}},saveState:function(){var a=this,e=a.getStateful(),l=e&&a.getStateId(),j=a.hasListeners,i,f,h,d,b,k,c,g;if(l){c=a.getState()||{};if(Ext.isObject(e)){f=a.self.getConfigurator();f=f.configs;for(b in e){if(e[b]){if(!(b in c)){i=f[b];c[b]=i?a[i.get]():a[b]}}else {delete c[b]}}}h=a.getPlugins()||[];for(b=0,k=h.length;b<k;b++){d=h[b];if(d&&d.getState){g=d.getState(c);if(g&&!c[d.ptype]){c[d.ptype]=g}}}if(!j.beforestatesave||a.fireEvent('beforestatesave',a,c)!==!1){Ext.state.Manager.set(l,c);if(j.statesave){a.fireEvent('statesave',a,c)}}}},getState:function(){return null},applyState:function(a){if(a){Ext.apply(this,a)}},getStateId:function(){var a=this;return a.stateId||(a.autoGenId?null:a.id)},initState:function(){var a=this,j=a.stateful&&a.getStateId(),h=a.hasListeners,d,b,e,i,g,c,f;if(j){b=Ext.state.Manager.get(j);if(b){d=Ext.apply({},b);if(!h.beforestaterestore||a.fireEvent('beforestaterestore',a,b)!==!1){g=a.getPlugins()||[];for(e=0,i=g.length;e<i;e++){c=g[e];if(c){f=c.ptype;if(c.applyState){c.applyState(d[f],b)}delete d[f]}}a.applyState(d);if(h.staterestore){a.fireEvent('staterestore',a,b)}}}}},savePropToState:function(a,d,f){var b=this,e=b[a],c=b.initialConfig;if(b.hasOwnProperty(a)){if(!c||c[a]!==e){if(d){d[f||a]=e}return !0}}return !1},savePropsToState:function(a,c){var d=this,b,e;if(typeof a==='string'){d.savePropToState(a,c)}else {for(b=0,e=a.length;b<e;++b){d.savePropToState(a[b],c)}}return c},destroy:function(){var a=this.stateTask;if(a){a.destroy();this.stateTask=null}}});Ext.define('Ext.Component',{alternateClassName:'Ext.AbstractComponent',xtype:['component','box'],mixins:[Ext.mixin.Inheritable,Ext.util.Floating,Ext.util.Positionable,Ext.util.Observable,Ext.mixin.ComponentDelegation,Ext.mixin.Bindable,Ext.util.Animate,Ext.util.ElementContainer,Ext.util.Renderable,Ext.state.Stateful,Ext.mixin.Focusable,Ext.mixin.Accessible,Ext.mixin.Keyboard],statics:{AUTO_ID:1000,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:'top',DIRECTION_RIGHT:'right',DIRECTION_BOTTOM:'bottom',DIRECTION_LEFT:'left',VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[.,\s]/g,ariaHighContrastModeCls:Ext.baseCSSPrefix+'aria-highcontrast',cancelLayout:function(c,b){var a=this.runningLayoutContext||this.pendingLayouts;if(a){a.cancelComponent(c,!1,b)}},from:function(c,b,a){return Ext.ComponentManager.from(c,b,a)},fromElement:function(c,b,a){return Ext.ComponentManager.from(c,b,a)},flushLayouts:function(){var b=this,a=b.pendingLayouts;if(a&&a.invalidQueue.length){b.pendingLayouts=null;b.runningLayoutContext=a;Ext.override(a,{runComplete:function(){var c=Ext.scroll.Scroller,a=Ext.GlobalEvents,d;b.runningLayoutContext=null;if(c.viewport){c.viewport.restoreState()}d=this.callParent();if(a.hasListeners.afterlayout){a.fireEvent('afterlayout')}return d}});a.run()}},resumeLayouts:function(a){if(this.layoutSuspendCount&&!--this.layoutSuspendCount){if(a){this.flushLayouts()}if(Ext.GlobalEvents.hasListeners.resumelayouts){Ext.GlobalEvents.fireEvent('resumelayouts')}}},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(b,e){var a=this,d=a.runningLayoutContext,c;if(d){d.queueInvalidate(b)}else {c=a.pendingLayouts||(a.pendingLayouts=new Ext.layout.Context());c.queueInvalidate(b);if(!e&&!a.layoutSuspendCount&&!b.isLayoutSuspended()){a.flushLayouts()}}}},$configPrefixed:!1,$configStrict:!1,clearPropertiesOnDestroy:'async',manageLayoutScroll:!0,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null,scrollable:null},renderConfig:{touchAction:null},defaultBindProperty:'html',alignTarget:null,autoRender:!1,autoShow:!1,baseCls:Ext.baseCSSPrefix+'component',childEls:{frameTable:{frame:!0},frameTL:{frame:'tl'},frameTC:{frame:'tc'},frameTR:{frame:'tr'},frameML:{frame:'ml'},frameBody:{frame:'mc'},frameMR:{frame:'mr'},frameBL:{frame:'bl'},frameBC:{frame:'bc'},frameBR:{frame:'br'}},componentLayout:'autocomponent',defaultAlign:'c-c',disabled:!1,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:function(){var a=['input','select','textarea','optgroup','option','table'];if(Ext.isIE9m&&!(Ext.isIE9&&!Ext.isIEQuirks)){a.push('p')}return new RegExp('^(?:'+a.join('|')+')$','i')}(),disabledCls:Ext.baseCSSPrefix+'item-disabled',draggable:!1,floating:!1,hidden:!1,hideMode:'display',maskElement:null,renderTpl:'{%this.renderContent(out,values)%}',resizeHandles:'all',shrinkWrap:2,toFrontOnShow:!0,synthetic:!1,tplWriteMode:'overwrite',ui:'default',uiCls:[],userCls:null,weight:null,allowDomMove:!0,autoGenId:!1,borderBoxCls:Ext.baseCSSPrefix+'border-box',componentLayoutCounter:0,contentPaddingProperty:'padding',deferLayouts:!1,frameSize:null,horizontalPosProp:'left',isComponent:!0,_isLayoutRoot:!1,layoutSuspendCount:0,liquidLayout:!1,maskOnDisable:!0,rendered:!1,rootCls:Ext.baseCSSPrefix+'body',scrollerCls:Ext.baseCSSPrefix+'scroll-scroller',_scrollFlags:{auto:{auto:{overflowX:'auto',overflowY:'auto',x:!0,y:!0,both:!0},'false':{overflowX:'auto',overflowY:'hidden',x:!0,y:!1,both:!1},scroll:{overflowX:'auto',overflowY:'scroll',x:!0,y:!0,both:!0}},'false':{auto:{overflowX:'hidden',overflowY:'auto',x:!1,y:!0,both:!1},'false':{overflowX:'hidden',overflowY:'hidden',x:!1,y:!1,both:!1},scroll:{overflowX:'hidden',overflowY:'scroll',x:!1,y:!0,both:!1}},scroll:{auto:{overflowX:'scroll',overflowY:'auto',x:!0,y:!0,both:!0},'false':{overflowX:'scroll',overflowY:'hidden',x:!0,y:!1,both:!1},scroll:{overflowX:'scroll',overflowY:'scroll',x:!0,y:!0,both:!0}},none:{overflowX:'',overflowY:'',x:!1,y:!1,both:!1}},_scrollableCfg:{x:{x:!0,y:!1},y:{x:!1,y:!0},horizontal:{x:!0,y:!1},vertical:{x:!1,y:!0},both:{x:!0,y:!0},'true':{x:!0,y:!0}},validIdRe:Ext.validIdRe,constructor:function(b){var a=this,e,j,i,h,g,c,d,f;b=b||{};if(b.initialConfig){if(b.isAction){a.baseAction=b}b=b.initialConfig}else {if(b.tagName||b.dom||Ext.isString(b)){b={applyTo:b,id:b.id||b}}}a.initialConfig=b;a.$iid=++Ext.$nextIid;if(b&&b.controller||a.config.controller){a.referenceHolder=!0}a.getId();a.protoEl=new Ext.util.ProtoElement();a.initConfig(b);if(a.scrollable==null){g=a.autoScroll;if(g){f=!!g}else {c=a.overflowX;d=a.overflowY;if(c||d){f={x:c&&c!=='hidden'?c:!1,y:d&&d!=='hidden'?d:!1}}}if(f){a.setScrollable(f)}}i=a.xhooks;if(i){delete a.xhooks;Ext.override(a,i)}a.mixins.elementCt.constructor.call(a);a.setupProtoEl();if(a.cls){a.initialCls=a.cls;a.protoEl.addCls(a.cls)}if(a.style){a.initialStyle=a.style;a.protoEl.setStyle(a.style)}a.renderData=a.renderData||{};a.initComponent();if(!a.preventRegister){Ext.ComponentManager.register(a)}a.mixins.state.constructor.call(a);a.addStateEvents('resize');h=a.getController();if(h){h.init(a)}if(a.plugins){for(e=0,j=a.plugins.length;e<j;e++){a.plugins[e]=a.initPlugin(a.plugins[e])}}a.loader=a.getLoader();if(a.disabled){a.disabled=!1;a.disable(!0)}if(a.renderTo){a.render(a.renderTo)}if(a.autoShow&&!a.$initParent){a.show()}if(a.baseAction){a.baseAction.addComponent(a)}},beforeInitConfig:function(){this.mixins.observable.constructor.call(this)},addCls:function(c){var a=this,b=a.rendered?a.el:a.protoEl;b.addCls.apply(b,arguments);return a},addClsWithUI:function(a,i){var b=this,d=[],e=0,h=b.uiCls=Ext.Array.clone(b.uiCls),f=b.activeUI,g,c;if(typeof a==='string'){a=a.indexOf(' ')<0?[a]:Ext.String.splitWords(a)}g=a.length;for(;e<g;e++){c=a[e];if(c&&!b.hasUICls(c)){h.push(c);if(f){d=d.concat(b.addUIClsToElement(c))}}}if(i!==!0&&f){b.addCls(d)}return d},afterComponentLayout:function(c,b,e,d){var a=this,f=a.scrollable;if(++a.componentLayoutCounter===1){a.afterFirstLayout(c,b)}else {if(a.manageLayoutScroll&&f){f.restoreState()}}if(c!==e||b!==d){a.onResize(c,b,e,d)}if(a.floating){a.onAfterFloatLayout()}},addPlugin:function(a){var b=this;a=b.constructPlugin(a);if(b.plugins){b.plugins.push(a)}else {b.plugins=[a]}if(b.pluginsInitialized){b.initPlugin(a)}return a},addPropertyToState:function(b,a,c){var d=this,e=arguments.length;if(e===3||d.hasOwnProperty(a)){if(e<3){c=d[a]}if(c!==d.initialConfig[a]){(b||(b={}))[a]=c}}return b},addUIClsToElement:function(f){var a=this,d=a.baseCls+'-'+a.ui+'-'+f,h=[Ext.baseCSSPrefix+f,a.baseCls+'-'+f,d],e,c,g,b;if(a.rendered&&a.frame&&!Ext.supports.CSS3BorderRadius){d+='-';e=a.getChildEls();for(c in e){b=e[c].frame;if(b&&b!==!0){g=a[c];if(g){g.addCls(d+b)}}}}return h},removeUIClsFromElement:function(f){var a=this,d=a.baseCls+'-'+a.ui+'-'+f,h=[Ext.baseCSSPrefix+f,a.baseCls+'-'+f,d],e,c,g,b;if(a.rendered&&a.frame&&!Ext.supports.CSS3BorderRadius){d+='-';e=a.getChildEls();for(c in e){b=e[c].frame;if(b&&b!==!0){g=a[c];if(g){g.removeCls(d+b)}}}}return h},adjustPosition:function(c,d){var b=this,a;if(b.isContainedFloater()){a=b.floatParent.getTargetEl().getViewRegion();c+=a.left;d+=a.top}return {x:c,y:d}},afterHide:function(c,d){var a=this,b=a.ownerFocusableContainer;delete a.getInherited().topmostFocusEvent;a.hiddenByLayout=null;if(a.ownerLayout){a.updateLayout({isRoot:!1})}if(b&&!b.onFocusableChildHide.$nullFn){b.onFocusableChildHide(a)}a.fireHierarchyEvent('hide');a.fireEvent('hide',a);Ext.callback(c,d||a)},afterSetPosition:function(b,c){var a=this;a.onPosition(b,c);if(a.hasListeners.move){a.fireEvent('move',a,b,c)}},afterShow:function(b,g,i){var a=this,d=a.el,e=a.zIndexManager,h,f,c;b=a.getAnimateTarget(b);if(e){e.suspendReflow()}if(!a.ghost){b=null}if(b){f={x:d.getX(),y:d.getY(),width:d.dom.offsetWidth,height:d.dom.offsetHeight};h={x:b.getX(),y:b.getY(),width:b.dom.offsetWidth,height:b.dom.offsetHeight};a.fireHierarchyEvent('show');c=a.ghost();c.el.stopAnimation();c.setX(-10000);a.ghostBox=f;c.el.animate({from:h,to:f,listeners:{beforeanimate:function(){if(a.modal){c.toFront()}},afteranimate:function(){if(!a.destroying){c.componentLayout.lastComponentSize=null;a.unghost();a.ghostBox=null;a.onShowComplete(g,i)}}}})}else {a.onShowComplete(g,i);a.fireHierarchyEvent('show')}if(e){e.resumeReflow(!0)}},animate:function(b){var a=this,e,d,j,k,c,r,q,i,p,h,o,f,n,l,m,g;b=b||{};c=b.to||{};if(Ext.fx.Manager.hasFxBlock(a.id)){return a}e=Ext.isDefined(c.width);if(e){k=Ext.Number.constrain(c.width,a.minWidth,a.maxWidth)}d=Ext.isDefined(c.height);if(d){j=Ext.Number.constrain(c.height,a.minHeight,a.maxHeight)}if(!b.dynamic&&(e||d)){i=(b.from?b.from.width:undefined)||a.getWidth();p=i;h=(b.from?b.from.height:undefined)||a.getHeight();o=h;f=!1;if(d&&j>h){o=j;f=!0}if(e&&k>i){p=k;f=!0}if(d||e){g=a.el.getStyle('overflow');if(g!=='hidden'){a.el.setStyle('overflow','hidden')}}if(f){r=!Ext.isNumber(a.width);q=!Ext.isNumber(a.height);a.setSize(p,o);a.el.setSize(i,h);if(r){delete a.width}if(q){delete a.height}}if(e){c.width=k}if(d){c.height=j}}n=a.constrain;l=a.constrainHeader;if(n||l){a.constrain=a.constrainHeader=!1;m=b.callback;b.callback=function(){a.constrain=n;a.constrainHeader=l;if(m){m.call(b.scope||a,arguments)}if(g!=='hidden'){a.el.setStyle('overflow',g)}}}return a.mixins.animate.animate.apply(a,arguments)},applyScrollable:function(a,c){var b=this,e=b.rendered,d;if(a){if(a===!0||typeof a==='string'){d=b._scrollableCfg[a];a=d}if(c){c.setConfig(a);a=c}else {a=Ext.Object.chain(a);if(e){a.element=b.getOverflowEl()}a=Ext.scroll.Scroller.create(a,b.scrollableType);a.component=b}}else {if(c){a=c;c.setConfig({x:!1,y:!1})}}if(b.rendered&&!b.destroying&&!b.destroyed){if(a){b.getOverflowStyle()}else {b.scrollFlags=b._scrollFlags.none}b.updateLayout()}return a},getScrollableClientRegion:function(){return this.getScrollable().getElement().getClientRegion()},applyTouchAction:function(a,b){if(b!=null){a=Ext.merge({},b,a)}return a},beforeDestroy:Ext.emptyFn,beforeLayout:function(){if(this.floating){this.onBeforeFloatLayout()}},beforeSetPosition:function(a,b,f){var d=this,c=null,e,g,h,i;if(a){if(Ext.isNumber(e=a[0])){f=b;b=a[1];a=e}else {if((e=a.x)!==undefined){f=b;b=a.y;a=e}}}if(d.constrain||d.constrainHeader){c=d.calculateConstrainedPosition(null,[a,b],!0);if(c){a=c[0];b=c[1]}}g=a!==undefined;h=b!==undefined;if(g||h){d.x=a;d.y=b;i=d.adjustPosition(a,b);c={x:i.x,y:i.y,anim:f,hasX:g,hasY:h}}return c},beforeShow:Ext.emptyFn,bubble:function(d,b,c){var a=this;while(a){if(d.apply(b||a,c||[a])===!1){break}a=a.getBubbleTarget()}return this},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a);a.mixins.componentDelegation.clearDelegatedListeners.call(a)},cloneConfig:function(a){a=a||{};var d=a.id||Ext.id(),c=Ext.applyIf(a,this.initialConfig),b;c.id=d;b=Ext.getClass(this);return new b(c)},destroy:function(){var a=this;if(!a.hasListeners.beforedestroy||a.fireEvent('beforedestroy',a)!==!1){a.isDestroying=a.destroying=!0;a.doDestroy();a.clearListeners();a.isDestroying=a.destroying=!1;a.callParent();a.mixins.componentDelegation.destroyComponentDelegation.call(a);a.mixins.observable.destroyObservable.call(a,!0)}},doDestroy:function(){var a=this,d=a.ownerFocusableContainer,e=a.container,f=a.renderSelectors,b,c,g;c=a.floatParent||a.ownerCt;if(a.floating){delete a.floatParent;if(a.zIndexManager&&!a.zIndexManager.destroyed){a.zIndexManager.unregister(a)}a.floating=!0}a.removeBindings();if(!a.beforeDestroy.$emptyFn){a.beforeDestroy()}a.destroyBindable();if(c&&c.remove){c.remove(a,{destroy:!1})}a.stopAnimation();if(a.rendered){Ext.destroy(a.loadMask,a.dd,a.resizer,a.proxy,a.proxyWrap,a.resizerComponent,a.scrollable,a.contentEl)}if(d&&!d.onFocusableChildDestroy.$nullFn){d.onFocusableChildDestroy(a)}if(a.focusable){a.destroyFocusable()}Ext.destroy(a.componentLayout,a.loadMask,a.floatingDescendants);if(!a.onDestroy.$emptyFn){a.onDestroy()}Ext.destroy(a.plugins);if(a.rendered){Ext.Component.cancelLayout(a,!0)}a.componentLayout=null;if(a.hasListeners.destroy){a.fireEvent('destroy',a)}if(!a.preventRegister){Ext.ComponentManager.unregister(a)}a.mixins.state.destroy.call(a);if(a.floating){a.onFloatDestroy()}if(a.rendered){if(a.showListenerIE){a.showListenerIE.destroy();a.showListenerIE=null}if(!a.preserveElOnDestroy){a.el.destroy()}if(a.collectContainerElement&&e){if(!e.destroyed){e.collect()}a.container=null}a.el.component=null;a.mixins.elementCt.destroy.call(a);if(f){for(b in f){if(f.hasOwnProperty(b)){g=a[b];if(g){delete a[b];g.destroy()}}}}a.rendered=!1}},disable:function(e,d){var a=this,b=a.ownerFocusableContainer,c=a.getInherited();if(!d){c.disabled=!0;a.savedDisabled=!0}if(a.maskOnDisable){c.disableMask=!0}if(!a.disabled){if(b&&!b.beforeFocusableChildDisable.$nullFn){b.beforeFocusableChildDisable(a)}a.addCls(a.disabledCls);if(a.rendered){a.onDisable()}else {a.disableOnRender=!0}a.disabled=!0;if(e!==!0){a.fireEvent('disable',a)}if(b&&!b.onFocusableChildDisable.$nullFn){b.onFocusableChildDisable(a)}}return a},doFireEvent:function(c,d,e){var a=this,b;b=a.mixins.observable.doFireEvent.call(a,c,d,e);if(b!==!1&&!a.destroyed){b=a.mixins.componentDelegation.doFireDelegatedEvent.call(a,c,d)}return b},enable:function(e,c){var a=this,b=a.ownerFocusableContainer,d=a.getInherited();if(!c){delete a.getInherited().disabled;a.savedDisabled=!1}if(a.maskOnDisable){delete d.disableMask}if(a.disabled){if(!(c&&d.hasOwnProperty('disabled'))){if(b&&!b.beforeFocusableChildEnable.$nullFn){b.beforeFocusableChildEnable(a)}a.disableOnRender=!1;a.removeCls(a.disabledCls);if(a.rendered){a.onEnable()}a.disabled=!1;if(e!==!0){a.fireEvent('enable',a)}if(b&&!b.onFocusableChildEnable.$nullFn){b.onFocusableChildEnable(a)}}}return a},findParentBy:function(b){var a;for(a=this.getRefOwner();a&&!b(a,this);a=a.getRefOwner()){}return a||null},findParentByType:function(a){return Ext.isFunction(a)?this.findParentBy(function(b){return b.self===a||b.constructor===a}):this.up(a)},findPlugin:function(c){var a,b=this.plugins,d=b&&b.length;for(a=0;a<d;a++){if(b[a].ptype===c){return b[a]}}},getAnimateTarget:function(a){a=a||this.animateTarget;if(a){a=a.isComponent?a.getEl():Ext.get(a)}return a||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){var a=this;if(!a.componentLayout||!a.componentLayout.isLayout){a.setComponentLayout(Ext.layout.Layout.create(a.componentLayout,'autocomponent'))}return a.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(b){var a=this,c=a.componentLayout;if(a.hidden){b.hidden=!0}if(a.collapseImmune){b.collapseImmune=!0}if(a.modelValidation!==undefined){b.modelValidation=a.modelValidation}if(a.savedDisabled){b.disabled=!0}a.mixins.bindable.initInheritedState.call(a,b);if(c&&c.initInheritedState){c.initInheritedState(b)}},getId:function(){var a=this,b;if(!(a.id||(a.id=a.initialConfig.id))){b=a.getXType();if(b){b=b.replace(Ext.Component.INVALID_ID_CHARS_Re,'-')}else {b=Ext.name.toLowerCase()+'-comp'}a.id=b+'-'+a.getAutoId()}return a.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var a=this,b=a.loader;if(b){if(!b.isLoader){a.loader=new Ext.ComponentLoader(Ext.apply({target:a},b))}else {b.setTarget(a)}return a.loader}return null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(d){var b,c=this.plugins,e=c&&c.length,a;for(b=0;b<e;b++){a=c[b];if(a.id===d||a.pluginId===d){return a}}return null},getPosition:function(e){var a=this,b,d=a.isContainedFloater(),c;if(e===!0&&!d){return [a.getLocalX(),a.getLocalY()]}b=a.getXY();if(e===!0&&d){c=a.floatParent.getTargetEl().getViewRegion();b[0]-=c.left;b[1]-=c.top}return b},getScrollX:function(){var a=this.getScrollable();return a?a.getPosition().x:0},getScrollY:function(){var a=this.getScrollable();return a?a.getPosition().y:0},getSize:function(a){return this.el.getSize(a)},getSizeModel:function(g){var c=this,a=Ext.layout.SizeModel,h=c.componentLayout.ownerContext,s=c.width,r=c.height,p,o,j,i,n,m,d,k,f,b,l,e,q=c.floating||c.floated;if(h){e=h.widthModel;d=h.heightModel}if(!e||!d){j=(p=typeof s)==='number';i=(o=typeof r)==='number';l=q||!(k=c.ownerLayout);if(l){f=Ext.layout.Layout.prototype.autoSizePolicy;b=q?3:c.shrinkWrap;if(j){e=a.configured}if(i){d=a.configured}}else {f=k.getItemSizePolicy(c,g);b=k.isItemShrinkWrap(c)}if(h){h.ownerSizePolicy=f}b=b===!0?3:b||0;if(l&&b){if(s&&p==='string'){b&=2;n=!0}if(r&&o==='string'){b&=1;m=!0}}if(b!==3){if(!g){g=c.ownerCt&&c.ownerCt.getSizeModel()}if(g){b|=(g.width.shrinkWrap?1:0)|(g.height.shrinkWrap?2:0)}}if(!e){if(!f.setsWidth&&!(c.frame&&n)){if(j){e=a.configured}else {e=b&1?a.shrinkWrap:a.natural}}else {if(f.readsWidth){if(j){e=a.calculatedFromConfigured}else {e=b&1?a.calculatedFromShrinkWrap:a.calculatedFromNatural}}else {e=a.calculated}}}if(!d){if(!f.setsHeight&&!(c.frame&&m)){if(i){d=a.configured}else {d=b&2?a.shrinkWrap:a.natural}}else {if(f.readsHeight){if(i){d=a.calculatedFromConfigured}else {d=b&2?a.calculatedFromShrinkWrap:a.calculatedFromNatural}}else {d=a.calculated}}}}return e.pairsByHeightOrdinal[d.ordinal]},getState:function(){var b=this,a=null,c=b.getSizeModel();if(c.width.configured){a=b.addPropertyToState(a,'width')}if(c.height.configured){a=b.addPropertyToState(a,'height')}return a},getUserCls:function(){return this.userCls},setUserCls:function(b){var a=this,c=a.userCls;if(b!==c){a.userCls=b;if(a.rendered){a.el.replaceCls(c,b)}}return c},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var c=this.self,b,a,d;if(!c.xtypes){b=[];a=this;while(a){d=a.xtypes;if(d!==undefined){b.unshift.apply(b,d)}a=a.superclass}c.xtypeChain=b;c.xtypes=b.join('/')}return c.xtypes},hasCls:function(b){var a=this.rendered?this.el:this.protoEl;return a.hasCls.apply(a,arguments)},hasUICls:function(b){var c=this,a=c.uiCls||[];return Ext.Array.contains(a,b)},hide:function(c,d,e){var a=this,b=a.ownerFocusableContainer;if(a.pendingShow){a.pendingShow=!1}if(!(a.rendered&&!a.isVisible())){if(!a.hasListeners.beforehide||a.fireEvent('beforehide',a)!==!1||a.hierarchicallyHidden){a.getInherited().hidden=a.hidden=!0;if(b&&!b.beforeFocusableChildHide.$nullFn){b.beforeFocusableChildHide(a)}a.fireHierarchyEvent('beforehide');if(a.rendered){a.onHide.apply(a,arguments)}}}return a},initComponent:function(){var a=this,c=a.width,b=a.height;if(a.plugins&&!a.plugins.processed){a.constructPlugins()}a.pluginsInitialized=!0;if(c!=null||b!=null){a.setSize(c,b)}if(a.listeners){a.on(a.listeners);a.listeners=null}if(a.focusable){a.initFocusable()}},initEvents:function(){var a=this,d=a.afterRenderEvents,e,c,f,b,g;if(d){for(f in d){c=a[f];if(c&&c.on){e=d[f];for(b=0,g=e.length;b<g;++b){a.mon(c,e[b])}}}}if(a.focusable){a.initFocusableEvents()}a.initKeyMap()},is:function(a){return Ext.ComponentQuery.is(this,a)},isDisabled:function(){return this.disabled},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},getHidden:function(){return this.hidden},isHierarchicallyHidden:function(){var a=this,b=!1,c,d;for(;c=a.ownerCt||a.floatParent;a=c){d=c.getInherited();if(d.hidden){b=!0;break}if(a.getInherited().collapseImmune){if(c.collapsed&&!a.collapseImmune){b=!0;break}}else {b=!!d.collapsed;break}}return b},isLayoutChild:function(a){return !this.floating&&!!this.up(a)},isLayoutRoot:function(){var a=this,b=a.ownerLayout;if(!b||a._isLayoutRoot||a.floating){return !0}return b.isItemLayoutRoot(a)},isLayoutSuspended:function(){var a=this,b;while(a){if(a.layoutSuspendCount||a.suspendLayout){return !0}b=a.ownerLayout;if(!b){break}a=b.owner}return !1},isVisible:function(c){var a=this,b;if(a.hidden||!a.rendered||a.destroyed){b=!0}else {if(c){b=a.isHierarchicallyHidden()}}return !b},isXType:function(a,b){return b?Ext.Array.indexOf(this.xtypes,a)!==-1:!!this.xtypesMap[a]},isMasked:function(b){var a=this;return !!(a.masked||a.loadMask&&a.loadMask.isVisible()||b&&a.getInherited().masked)},lookupTpl:function(a){return Ext.XTemplate.getTpl(this,a)},setMasked:function(c){var a=this,b=a.ownerFocusableContainer;if(c){a.masked=!0;a.getInherited().masked=c}else {a.masked=!1;delete a.getInherited().masked}if(b&&!b.onFocusableChildMasked.$nullFn){b.onFocusableChildMasked(a,c)}return a},mask:function(e,c,a){var b=this.lastBox,d=this.getMaskTarget()||this.el;if(b){a=b.height}d.mask(e,c,a);this.setMasked(!0)},nextNode:function(b,i){var c=this,f=c.ownerCt,g,d,h,e,a;if(i&&c.is(b)){return c}if(f){for(d=f.items.items,e=Ext.Array.indexOf(d,c)+1,h=d.length;e<h;e++){a=d[e];if(a.is(b)){return a}if(a.down){g=a.down(b);if(g){return g}}}return f.nextNode(b)}return null},nextSibling:function(c){var f=this.ownerCt,b,d,a,e;if(f){b=f.items;a=b.indexOf(this)+1;if(a){if(c){for(d=b.getCount();a<d;a++){if((e=b.getAt(a)).is(c)){return e}}}else {if(a<b.getCount()){return b.getAt(a)}}}}return null},onAdded:function(b,d,c){var a=this;a.ownerCt=b;a.onInheritedAdd(a,c);if(a.hasListeners&&a.hasListeners.added){a.fireEvent('added',a,b,d)}if(Ext.GlobalEvents.hasListeners.added){a.fireHierarchyEvent('added')}},onRemoved:function(d){var a=this,b,c=a.up('[floating]');if(!a.isLayoutMoving&&a.el&&a.el.contains(Ext.Element.getActiveElement())){b=a.findFocusTarget();if(b){b.focus()}}if(Ext.GlobalEvents.hasListeners.removed){a.fireHierarchyEvent('removed')}if(a.hasListeners.removed){a.fireEvent('removed',a,a.ownerCt)}a.onInheritedRemove(d);a.ownerCt=a.ownerLayout=null;if(c&&!d){c.moveFloatingDescendants(a)}},onBoxReady:function(d,c){var a=this,b;if(a.ariaLabelledBy||a.ariaDescribedBy){if(a.ariaLabelledBy){b=a.getAriaLabelEl(a.ariaLabelledBy);if(b){a.ariaEl.dom.setAttribute('aria-labelledby',b)}}if(a.ariaDescribedBy){b=a.getAriaLabelEl(a.ariaDescribedBy);if(b){a.ariaEl.dom.setAttribute('aria-describedby',b)}}}if(a.resizable){a.initResizable(a.resizable)}if(a.draggable){a.initDraggable()}if(a.hasListeners.boxready){a.fireEvent('boxready',a,d,c)}},onDestroy:Ext.emptyFn,onDisable:function(){var a=this,c,b;if(a.focusable){a.disableFocusable()}if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute('aria-disabled',!0)}if(a.maskOnDisable&&!a.getInheritedConfig('disableMask',!0)){c=a.el.dom;b=c.nodeName;if(a.disabledRe.test(b)){c.disabled=!0}if(!a.nonMaskableRe.test(b)){a.mask()}}},onEnable:function(){var a=this,c,b;if(a.focusable){a.enableFocusable()}if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute('aria-disabled',!1)}if(a.maskOnDisable&&a.getInherited().hasOwnProperty('masked')){c=a.el.dom;b=c.nodeName;if(a.disabledRe.test(b)){c.disabled=!1}if(!a.nonMaskableRe.test(b)){a.unmask()}}},onGlobalShow:function(a){if(this.up(a)){this.getScrollable().restoreState()}},onHide:function(b,d,f){var a=this,c,e,g;if(!a.ariaStaticRoles[a.ariaRole]&&!a.destroying&&!a.destroyed){a.ariaEl.dom.setAttribute('aria-hidden',!0)}a.revertFocus();b=a.getAnimateTarget(b);if(!a.ghost){b=null}if(b){g={x:b.getX(),y:b.getY(),width:b.dom.offsetWidth,height:b.dom.offsetHeight};c=a.ghost();c.el.stopAnimation();e=a.getSize();c.el.animate({to:g,listeners:{afteranimate:function(){if(!a.destroying){c.componentLayout.lastComponentSize=null;a.unghost(!1);c.el.setSize(e);a.afterHide(d,f)}}}})}else {a.el.hide()}if(!b){a.afterHide(d,f)}},onPosition:Ext.emptyFn,onResize:function(e,d,c,b){var a=this;if(a.floating&&a.constrain){a.doConstrain()}if(a.hasListeners.resize){a.fireEvent('resize',a,e,d,c,b)}},onShow:function(){var a=this;if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute('aria-hidden',!1)}a.el.show();a.updateLayout({isRoot:!1,context:a._showContext});if(a.floating){if(a.maximized){a.fitContainer()}else {if(a.constrain){a.doConstrain()}}}},_showContext:{show:!0},onShowComplete:function(c,d){var a=this,b=a.ownerFocusableContainer;if(a.floating){a.onFloatShow()}Ext.callback(c,d||a);a.fireEvent('show',a);if(b&&!b.onFocusableChildShow.$nullFn){b.onFocusableChildShow(a)}delete a.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(c,h){var d=this,f=d.ownerCt,a,g,e,b;if(h&&d.is(c)){return d}if(f){for(g=f.items.items,e=Ext.Array.indexOf(g,d)-1;e>-1;e--){b=g[e];if(b.query){a=b.query(c);a=a[a.length-1];if(a){return a}}if(b.is(c)){return b}}return f.previousNode(c,!0)}return null},previousSibling:function(c){var e=this.ownerCt,b,a,d;if(e){b=e.items;a=b.indexOf(this);if(a!==-1){if(c){for(--a;a>=0;a--){if((d=b.getAt(a)).is(c)){return d}}}else {if(a){return b.getAt(--a)}}}}return null},registerFloatingItem:function(b){var a=this;if(!a.floatingDescendants){a.floatingDescendants=new Ext.ZIndexManager(a)}a.floatingDescendants.register(b)},removeCls:function(c){var a=this,b=a.rendered?a.el:a.protoEl;b.removeCls.apply(b,arguments);return a},removeClsWithUI:function(a,k){var b=this,d=[],e=0,g=Ext.Array,i=g.remove,j=b.uiCls=g.clone(b.uiCls),f=b.activeUI,h,c;if(typeof a==='string'){a=a.indexOf(' ')<0?[a]:Ext.String.splitWords(a)}h=a.length;for(e=0;e<h;e++){c=a[e];if(c&&b.hasUICls(c)){i(j,c);if(f){d=d.concat(b.removeUIClsFromElement(c))}}}if(k!==!0&&f){b.removeCls(d)}return d},resumeLayouts:function(b){var a=this;if(!a.rendered){return}if(a.layoutSuspendCount&&!--a.layoutSuspendCount){a.suspendLayout=!1;if(b&&!a.isLayoutSuspended()){a.updateLayout(b)}}},scrollBy:function(c,d,b){var a=this.getScrollable();if(a){a.scrollBy(c,d,b)}},scrollTo:function(c,d,b){var a=this.getScrollable();if(a){a.scrollTo(c,d,b)}},setAutoScroll:function(a){this.setScrollable(!!a);return this},setBorder:function(a,c){var b=this,d=!!c;if(b.rendered||d){if(!d){c=b.el}if(!a){a=0}else {if(a===!0){a='1px'}else {a=this.unitizeBox(a)}}c.setStyle('border-width',a);if(!d){b.updateLayout()}}b.border=a},setDock:function(c){var a=this,b=a.ownerCt;if(c!==a.dock){if(b&&b.moveDocked){b.moveDocked(a,c)}else {a.dock=c}}return a},setDisabled:function(a){return this[a?'disable':'enable']()},setFlex:function(a){this.flex=a},setHeight:function(a){return this.setSize(undefined,a)},setLoading:function(c,d){var a=this,b={target:a};if(a.rendered){if(c!==!1){if(Ext.isString(c)){b.msg=c}else {Ext.apply(b,c,a.maskDefaults)}if(!a.loadMask||!a.loadMask.isLoadMask){if(d&&b.useTargetEl==null){b.useTargetEl=!0}a.loadMask=new Ext.LoadMask(b)}else {Ext.apply(a.loadMask,b)}if(a.loadMask.isVisible()){a.loadMask.syncMaskState()}else {a.loadMask.show()}}else {if(a.loadMask&&a.loadMask.isLoadMask){a.loadMask.hide()}}}return a.loadMask},setMargin:function(a,c){var b=this;if(b.rendered){if(!a&&a!==0){a=''}else {if(a===!0){a=5}a=this.unitizeBox(a)}b.margin=a;b.margin$=null;b.getEl().setStyle('margin',a);if(!c){b.updateLayout(b._notAsLayoutRoot)}}else {b.margin=a}},setOverflowXY:function(a,b){this.setScrollable({x:a&&a!=='hidden'?a:!1,y:b&&b!=='hidden'?b:!1});return this},setPagePosition:function(a,c,f){var b=this,d,e;if(Ext.isArray(a)){c=a[1];a=a[0]}b.pageX=a;b.pageY=c;if(b.floating){if(b.isContainedFloater()){e=b.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(a)&&Ext.isNumber(e.left)){a-=e.left}if(Ext.isNumber(c)&&Ext.isNumber(e.top)){c-=e.top}}else {d=b.el.translateXY(a,c);a=d.x;c=d.y}b.setPosition(a,c,f)}else {d=b.el.translateXY(a,c);b.setPosition(d.x,d.y,f)}return b},setPosition:function(b,c,e){var a=this,d=a.beforeSetPosition.apply(a,arguments);if(d&&a.rendered){b=d.x;c=d.y;if(e){if(b!==a.getLocalX()||c!==a.getLocalY()){a.stopAnimation();a.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(a.afterSetPosition,a,[b,c])},to:{left:b,top:c}},e))}}else {a.setLocalXY(b,c);a.afterSetPosition(b,c)}}return a},setScrollX:function(c,b){var a=this.getScrollable();if(a){a.scrollTo(c,null,b)}},setScrollY:function(c,b){var a=this.getScrollable();if(a){a.scrollTo(null,c,b)}},setSize:function(b,c){var a=this,g=a.width,f=a.height,e,d;if(b&&typeof b==='object'){c=b.height;b=b.width}if(typeof b==='number'){a.width=Ext.Number.constrain(b,a.minWidth,a.maxWidth)}else {if(b===null){delete a.width}else {if(typeof b==='string'){e=!0;a.width=b}}}if(typeof c==='number'){a.height=Ext.Number.constrain(c,a.minHeight,a.maxHeight)}else {if(c===null){delete a.height}else {if(typeof c==='string'){d=!0;a.height=c}}}if(a.rendered&&a.isVisible()){if(g!==a.width||f!==a.height){if(a.liquidLayout||e||d){a.el.setSize(a.width,a.height)}a.updateLayout(a._notAsLayoutRoot)}}return a},setStyle:function(a,b){var c=this.el||this.protoEl;c.setStyle(a,b);return this},setUI:function(c){var a=this,e=a.uiCls,d=a.activeUI,b;if(c===d){return}if(d){b=a.removeClsWithUI(e,!0);if(b.length){a.removeCls(b)}a.removeUIFromElement()}else {a.uiCls=[]}a.ui=c;a.activeUI=c;a.addUIToElement();b=a.addClsWithUI(e,!0);if(b.length){a.addCls(b)}if(a.rendered){a.updateLayout()}},setVisible:function(a){return this[a?'show':'hide']()},setHidden:function(a){return this.setVisible(!a)},setWidth:function(a){return this.setSize(a)},show:function(d,e,f){var a=this,b=a.rendered,c=a.ownerFocusableContainer;if(a.hierarchicallyHidden||a.floating&&!b&&a.isHierarchicallyHidden()){if(!b){a.initHierarchyEvents()}if(arguments.length>1){arguments[0]=null;a.pendingShow=arguments}else {a.pendingShow=!0}}else {if(b&&a.isVisible()){if(a.floating){a.onFloatShow();if(a.toFrontOnShow){a.toFront()}}}else {if(a.fireEvent('beforeshow',a)!==!1){a.hidden=!1;delete this.getInherited().hidden;if(c&&!c.beforeFocusableChildShow.$nullFn){c.beforeFocusableChildShow(a)}Ext.suspendLayouts();if(!b&&(a.autoRender||a.floating)){a.doAutoRender();b=a.rendered}if(b){a.beforeShow();Ext.resumeLayouts();a.onShow.apply(a,arguments);a.afterShow.apply(a,arguments)}else {Ext.resumeLayouts(!0)}}else {a.onShowVeto()}}}return a},showAt:function(b,c,d){var a=this;if(!a.rendered&&(a.autoRender||a.floating)){a.x=b;a.y=c;return a.show()}if(a.floating){a.setPosition(b,c,d)}else {a.setPagePosition(b,c,d)}return a.show()},showBy:function(c,d,b){var a=this;if(a.floating&&c){a._lastAlignTarget=c;a._lastAlignToPos=d||a.defaultAlign;if(!a.alignOffset||a.alignOffset!==b){a.alignOffset=b}a._lastAlignToOffsets=b||a.alignOffset;a.show()}return a},suspendLayouts:function(){var a=this;if(!a.rendered){return}if(++a.layoutSuspendCount===1){a.suspendLayout=!0}},toggleCls:function(b,a){if(a===undefined){a=!this.hasCls(b)}return this[a?'addCls':'removeCls'](b)},unitizeBox:function(a){return Ext.Element.unitizeBox(a)},unmask:function(){(this.getMaskTarget()||this.el).unmask();this.setMasked(!1)},unregisterFloatingItem:function(b){var a=this;if(a.floatingDescendants){a.floatingDescendants.unregister(b)}},up:function(c,b){var a=this.getRefOwner(),f=typeof b==='string',g=typeof b==='number',e=b&&b.isComponent,d=0;if(c){for(;a;a=a.getRefOwner()){if(a.destroyed){return null}d++;if(c.isComponent){if(a===c){return a}}else {if(Ext.ComponentQuery.is(a,c)){return a}}if(f&&a.is(b)){return}if(g&&d===b){return}if(e&&a===b){return}}}return a},update:function(b,h,j,i){var a=this,g=a.tpl&&!Ext.isString(b),e=a.ownerFocusableContainer,f,c,d;if(g){a.data=b&&b.isEntity?b.getData(!0):b}else {a.html=Ext.isObject(b)?Ext.DomHelper.markup(b):b}if(a.rendered){f=a.getSizeModel();c=f.width.shrinkWrap||f.height.shrinkWrap;if(a.isContainer){d=a.layout.getRenderTarget();c=c||a.items.items.length>0}else {d=a.getTargetEl()}if(g){a.tpl[a.tplWriteMode](d,a.data||{})}else {d.setHtml(a.html,h,j,i||a)}if(c){a.updateLayout()}if(e&&!e.onFocusableChildUpdate.$nullFn){e.onFocusableChildUpdate(a)}}},setHtml:function(c,a,d,b){this.update(c,a,null,b)},applyData:function(a){this.update(a)},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},_asLayoutRoot:{isRoot:!0},_notAsLayoutRoot:{isRoot:!1},updateLayout:function(b){var a=this,e,d=a.lastBox,c=b&&b.isRoot,f=b&&b.context;if(d){d.invalid=!0}if(!a.rendered||a.isDetached||a.layoutSuspendCount||a.suspendLayout){return}if(a.hidden){Ext.Component.cancelLayout(a)}else {if(typeof c!=='boolean'){c=a.isLayoutRoot()}}if(c||!a.ownerLayout||!a.ownerLayout.onContentChange(a,f)){if(!a.isLayoutSuspended()){e=b&&b.hasOwnProperty('defer')?b.defer:a.deferLayouts;Ext.Component.updateLayout(a,e)}}},updateMaxHeight:function(b,a){this.changeConstraint(b,a,'min','max-height','height')},updateMaxWidth:function(b,a){this.changeConstraint(b,a,'min','max-width','width')},updateMinHeight:function(b,a){this.changeConstraint(b,a,'max','min-height','height')},updateMinWidth:function(b,a){this.changeConstraint(b,a,'max','min-width','width')},updateTouchAction:function(b){var c,a,e,d;for(c in b){a=this[c];e=b[c];if(a&&a.isElement){a.setTouchAction(e)}else {d=!0}}if(d){this.el.setTouchAction(b)}},getAnchorToXY:function(d,a,c,b){return d.getAnchorXY(a,c,b)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(a){this.el.setLocalX(a)},setLocalXY:function(a,b){this.el.setLocalXY(a,b)},setLocalY:function(a){this.el.setLocalY(a)},setX:function(b,a){this.el.setX(b,a)},setXY:function(b,a){this.el.setXY(b,a)},setY:function(b,a){this.el.setY(b,a)},privates:{addOverCls:function(){var a=this;if(!a.disabled){a.el.addCls(a.overCls)}},addUIToElement:function(){var a=this,d=a.baseCls+'-'+a.ui,e,c,f,b;a.addCls(d);if(a.rendered&&a.frame&&!Ext.supports.CSS3BorderRadius){d+='-';e=a.getChildEls();for(c in e){b=e[c].frame;if(b&&b!==!0){f=a[c];if(f){f.addCls(d+b)}}}}},changeConstraint:function(b,g,f,c,d){var a=this,e=a[d];if(b!=null&&typeof e==='number'){a[d]=Math[f](e,b)}if(a.liquidLayout){if(b!=null){a.setStyle(c,b+'px')}else {if(g){a.setStyle(c,'')}}}if(a.rendered){a.updateLayout()}},constructPlugin:function(a){var c=this,b=Ext.plugin.Manager;if(typeof a==='string'){a=b.create({},a,c)}else {a=b.create(a,null,c)}return a},constructPlugins:function(){var c=this,d=c.plugins,a,b,e;if(d){c.plugins=a=Ext.plugin.Abstract.decode(d,'ptype');a.processed=!0;for(b=0,e=a.length;b<e;b++){a[b]=c.constructPlugin(a[b])}}c.pluginsInitialized=!0;return a},detachFromBody:function(){var a=this;if(!a.isDetached){Ext.getDetachedBody().appendChild(a.el,!0);Ext.Component.cancelLayout(a);a.isDetached=!0}},doAddListener:function(h,e,i,b,n,m,l){var a=this,c,g,j,d,f,k;if(Ext.isObject(e)||b&&b.element){if(b.element){d=b.element;c={};c[h]=e;if(i){c.scope=i}j=a.$elementEventOptions;for(g in b){if(j[g]){c[g]=b[g]}}}else {c=e;d=h}f=a[d];if(f&&f.isObservable){a.mon(f,c)}else {a.afterRenderEvents=a.afterRenderEvents||{};if(!a.afterRenderEvents[d]){a.afterRenderEvents[d]=[]}a.afterRenderEvents[d].push(c)}return}if(b){k=b.delegate;if(k){a.mixins.componentDelegation.addDelegatedListener.call(a,h,e,i,b,n,m,l);return}}a.mixins.observable.doAddListener.call(a,h,e,i,b,n,m,l)},doRemoveListener:function(b,d,c){var a=this;a.mixins.observable.doRemoveListener.call(a,b,d,c);a.mixins.componentDelegation.removeDelegatedListener.call(a,b,d,c)},fireHierarchyEvent:function(b){var a=Ext.GlobalEvents;if(a.hasListeners[b]){a.fireEvent(b,this)}},getActionEl:function(){return this.el},getAutoId:function(){this.autoGenId=!0;return ++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var e=this,d=e.getScrollable(),f=e._scrollFlags,b,c,a;if(d){b=d.getX();if(b===!0){b='auto'}c=d.getY();if(c===!0){c='auto'}a=f[b][c]}else {a=f.none}e.scrollFlags=a;return {overflowX:a.overflowX,overflowY:a.overflowY}},getPlugins:function(){var a=this.plugins;a=a&&a.processed?a:this.constructPlugins();return a||null},getProxy:function(){var a=this,b;if(!a.proxy){b=Ext.getBody();a.proxy=a.el.createProxy(Ext.baseCSSPrefix+'proxy-el',b,!0)}return a.proxy},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return Ext.baseCSSPrefix+this.getTdType()+'-'+this.ui+'-cell'},getTdType:function(){return this.xtype},getTpl:function(a){return this.lookupTpl(a)},initCls:function(){var a=this,b=[a.baseCls],c=a.getComponentLayout().targetCls;if(c){b.push(c)}if(a.componentCls){b.push(a.componentCls)}else {a.componentCls=a.baseCls}return b},initDraggable:function(){var a=this,c,b;c=a.resizer&&a.resizer.el!==a.el?a.resizerComponent=new Ext.Component({el:a.resizer.el,rendered:!0,container:a.container}):a;b=Ext.applyIf({el:c.getDragEl(),constrainTo:a.constrain||a.draggable.constrain?a.constrainTo||(a.floatParent?a.floatParent.getTargetEl():a.container):undefined},a.draggable);if(a.constrain||a.constrainDelegate){b.constrain=a.constrain;b.constrainDelegate=a.constrainDelegate}a.dd=new Ext.util.ComponentDragger(c,b)},initPadding:function(c){var a=this,b=a.padding;if(b!=null){if(a.layout&&a.layout.managePadding&&a.contentPaddingProperty==='padding'){c.setStyle('padding',0)}else {c.setStyle('padding',this.unitizeBox(b===!0?5:b))}}},initPlugin:function(a){a.init(this);return a},initResizable:function(b){var a=this;b=Ext.apply({target:a,dynamic:!1,constrainTo:a.constrain||b&&b.constrain?a.constrainTo||(a.floatParent?a.floatParent.getTargetEl():a.container):undefined,handles:a.resizeHandles},b);b.target=a;a.resizer=new Ext.resizer.Resizer(b)},initStyles:function(b){var a=this,g=a.margin,j=a.border,i=a.cls,h=a.style,e=a.x,f=a.y,k=a.liquidLayout,d,c;a.initPadding(b);if(g!=null){b.setStyle('margin',this.unitizeBox(g===!0?5:g))}if(j!=null){a.setBorder(j,b)}if(i&&i!==a.initialCls){b.addCls(i);a.cls=a.initialCls=null}if(h&&h!==a.initialStyle){b.setStyle(h);a.style=a.initialStyle=null}if(e!=null){b.setStyle(a.horizontalPosProp,typeof e==='number'?e+'px':e)}if(f!=null){b.setStyle('top',typeof f==='number'?f+'px':f)}if(!a.ownerCt||a.floating){if(Ext.scopeCss){b.addCls(a.rootCls)}b.addCls(a.borderBoxCls)}if(k||!a.getFrameInfo()){d=a.width;c=a.height;if(d!=null){if(typeof d==='number'){b.setStyle('width',d+'px')}else {b.setStyle('width',d)}}if(c!=null){if(typeof c==='number'){b.setStyle('height',c+'px')}else {b.setStyle('height',c)}}}},isContainedFloater:function(){return this.floating&&this.floatParent},isDescendant:function(b){var a;if(b.isContainer){for(a=this.ownerCt;a;a=a.ownerCt){if(a===b){return !0}}}return !1},owns:function(a){var c=!1,b;if(a.isEvent){a=a.target}else {if(a.isElement){a=a.dom}}b=Ext.Component.fromElement(a);if(b){c=b===this||!!b.up(this)}return c},parseBox:function(a){return Ext.Element.parseBox(a)},reattachToBody:function(){this.isDetached=!1},removeManagedListenerItem:function(d,a,h,g,f,e){var c=this,b=a.options?a.options.element:null;if(b){b=c[b];if(b&&b.un){if(d||a.item===h&&a.ename===g&&(!f||a.fn===f)&&(!e||a.scope===e)){b.un(a.ename,a.fn,a.scope);if(!d){Ext.Array.remove(c.managedListeners,a)}}}}else {return c.mixins.observable.removeManagedListenerItem.apply(c,arguments)}},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(a){Ext.Array.remove(this.plugins,a);a.destroy()},removeUIFromElement:function(){var a=this,d=a.baseCls+'-'+a.ui,e,c,f,b;a.removeCls(d);if(a.rendered&&a.frame&&!Ext.supports.CSS3BorderRadius){d+='-';e=a.getChildEls();for(c in e){b=e[c].frame;if(b&&b!==!0){f=a[c];if(f){f.removeCls(d+b)}}}}},setComponentLayout:function(b){var a=this.componentLayout;if(a&&a.isLayout&&a!==b){a.setOwner(null)}this.componentLayout=b;b.setOwner(this)},setHiddenState:function(d){var a=this,b=a.getInherited(),c=a.zIndexManager;a.hidden=d;if(d){b.hidden=!0}else {delete b.hidden}if(c){c.onComponentShowHide(a)}},setupProtoEl:function(){var a=this.initCls();this.protoEl.addCls(a)},wrapPrimaryEl:function(c){var a=this,b=a.el;if(!b||!b.isElement){a.el=Ext.get(c)}if(a.floating){this.mixins.floating.constructor.call(this)}}},deprecated:{5:{methods:{addClass:'addCls',doComponentLayout:function(){this.updateLayout();return this},removeClass:'removeCls',forceComponentLayout:'updateLayout',setDocked:'setDock'}}}},function(a){var b=a.prototype;(b.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(b.$eventOptions=Ext.Object.chain(b.$eventOptions)).delegate=1;a.createAlias({on:'addListener',prev:'previousSibling',next:'nextSibling',setUi:'setUI'});Ext.resumeLayouts=function(b){a.resumeLayouts(b)};Ext.suspendLayouts=function(){a.suspendLayouts()};Ext.batchLayouts=function(c,b){a.suspendLayouts();try{c.call(b)}finally{a.resumeLayouts(!0)}};Ext.setGlyphFontFamily=function(b){Ext._glyphFontFamily=b};a.hierarchyEventSource=b.hierarchyEventSource=Ext.GlobalEvents;Ext.onReady(function(){if(Ext.supports.HighContrastMode){Ext.getBody().addCls(a.ariaHighContrastModeCls)}})});Ext.define('Ext.overrides.mixin.Focusable',{override:'Ext.Component',focusCls:'focus',focus:function(f,d,c,e){var a=this,b;if(!a.focusable&&!a.isContainer||a.destroyed||a.destroying){return a}if(d){a.getFocusTask().delay(Ext.isNumber(d)?d:10,a.focus,a,[f,!1,c,e]);return a}a.cancelFocus();if(a.floating&&a.container&&a.container.dom){b=a.container.dom.scrollTop}if(a.mixins.focusable.focus.apply(a,arguments)!==!1){if(c){Ext.callback(c,e)}if(a.floating&&b!==undefined){a.container.dom.scrollTop=b}}return a},cancelFocus:function(){var b=this,a=b.getFocusTask();if(a){a.cancel()}},beforeBlur:Ext.emptyFn,postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,postFocus:Ext.emptyFn,onFocusEnter:function(b){var a=this;if(a.destroying||a.destroyed){return}if(a.floating&&a!==a.zIndexManager.getActive()){a.toFront(!0)}a.callParent([b])},destroyFocusable:function(){var a=this;if(a.focusTask){a.focusTask.stop(a.focus,a)}a.callParent()},privates:{addFocusCls:function(d){var b=this,c=b.focusCls,a;if(c){a=b.getFocusClsEl(d);if(a){a.addCls(b.addClsWithUI(c,!0))}}},removeFocusCls:function(d){var b=this,c=b.focusCls,a;if(c){a=b.getFocusClsEl(d);if(a){a.removeCls(b.removeClsWithUI(c,!0))}}},getFocusTask:function(){if(!this.focusTask){this.focusTask=Ext.focusTask}return this.focusTask},updateMaskState:function(f,e){var a=this,b=a.ariaEl.dom,d=a.getInherited().disabled&&a.getInherited().disableMask,c;if(f){a.disableTabbing();if(!d){a.setMasked(!0)}if(b){b.setAttribute('aria-busy','true');c=b.getAttribute('aria-describedby');if(c){a._savedAriaDescribedBy=c}b.setAttribute('aria-describedby',e.ariaEl.id)}}else {a.enableTabbing();if(!d){a.setMasked(!1)}if(b){b.removeAttribute('aria-busy');c=b.getAttribute('aria-describedby');b.removeAttribute('aria-describedby');if(c===e.ariaEl.id&&a._savedAriaDescribedBy){b.setAttribute('aria-describedby',a._savedAriaDescribedBy);delete a._savedAriaDescribedBy}}}}}},function(){if(!Ext.focusTask){Ext.focusTask=new Ext.util.DelayedTask()}});Ext.define('Ext.Responsive',{override:'Ext.Component',mixins:[Ext.mixin.Responsive]});Ext.define('Ext.layout.container.border.Region',{override:'Ext.Component',initBorderRegion:function(){var a=this;if(!a._borderRegionInited){a._borderRegionInited=!0;a.addStateEvents(['changeregion','changeweight']);Ext.override(a,{getState:function(){var b=a.callParent();b=a.addPropertyToState(b,'region');b=a.addPropertyToState(b,'weight');return b}})}},getOwningBorderContainer:function(){var a=this.getOwningBorderLayout();return a&&a.owner},getOwningBorderLayout:function(){var a=this.ownerLayout;return a&&a.isBorderLayout?a:null},setRegion:function(c){var a=this,f,g=a.region;if(c!==g){f=a.getOwningBorderLayout();if(f){var k=f.regionFlags[c],j=a.placeholder,b=a.splitter,i=f.owner,m=f.regionMeta,l=a.collapsed||a.floated,h,e,d;if(a.fireEventArgs('beforechangeregion',[a,c])===!1){return g}Ext.suspendLayouts();a.region=c;Ext.apply(a,k);if(a.updateCollapseTool){a.updateCollapseTool()}if(b){Ext.apply(b,k);b.updateOrientation();e=i.items;d=e.indexOf(a);if(d>=0){h=m[c].splitterDelta;if(e.getAt(d+h)!==b){e.remove(b);d=e.indexOf(a);if(h>0){++d}e.insert(d,b)}}}if(j){if(l){a.expand(!1)}i.remove(j);a.placeholder=null;if(l){a.collapse(null,!1)}}i.updateLayout();Ext.resumeLayouts(!0);a.fireEventArgs('changeregion',[a,g])}else {a.region=c}}return g},setWeight:function(b){var a=this,e=a.getOwningBorderContainer(),d=a.placeholder,c=a.weight;if(b!==c){if(a.fireEventArgs('beforechangeweight',[a,b])!==!1){a.weight=b;if(d){d.weight=b}if(e){e.updateLayout()}a.fireEventArgs('changeweight',[a,c])}}return c}},function(b){var a=b.prototype;a.setBorderRegion=a.setRegion;a.setRegionWeight=a.setWeight});Ext.define('Ext.theme.neptune.Component',{override:'Ext.Component',initComponent:function(){this.callParent();if(this.dock&&this.border===undefined){this.border=!1}},privates:{initStyles:function(){var a=this,b=a.hasOwnProperty('border'),c=a.border;if(a.dock){a.border=null}a.callParent(arguments);if(b){a.border=c}else {delete a.border}}}},function(){Ext.namespace('Ext.theme.is').Neptune=!0;Ext.theme.name='Neptune'});Ext.define('Ext.theme.triton.Component',{override:'Ext.Component'},function(){Ext.namespace('Ext.theme.is').Triton=!0;Ext.theme.name='Triton'});Ext.define('Ext.theme.material.Component',{override:'Ext.Component',config:{ripple:null,labelAlign:'top'},initComponent:function(){var a=this;a.callParent();if(a.ripple){a.on('afterrender',function(){a.updateRipple(a.getRipple())},a)}},updateRipple:function(c){var b=this,a=b.el;if(Ext.isIE9m){Ext.log({level:'warn'},'Ripple effect is not supported in IE9 and below!');return}if(a){a.un('touchstart','onRippleStart',b);a.un('touchend','onRippleStart',b);a.destroyAllRipples();a.on(c.release?'touchend':'touchstart','onRippleStart',b)}},shouldRipple:function(e){var a=this,f=a.getDisabled&&a.getDisabled(),d=a.el,c=!f&&a.getRipple(),b;if(c&&e){b=e.getTarget(a.noRippleSelector);if(b){if(d.dom===b||d.contains(b)){c=null}}}return c},onRippleStart:function(a){var c=this,b=this.shouldRipple(a);if(a.button===0&&b){c.el.ripple(a,b)}},privates:{noRippleSelector:'.'+Ext.baseCSSPrefix+'no-ripple',whenVisible:function(e,c){var a=this,f,b,d;c=c||Ext.emptyArray;f=a.visibleListener;b=a.pendingVisible;d=a.isVisible(!0);if(!d&&!f){a.visibleListener=Ext.on({scope:a,show:'handleGlobalShow',destroyable:!0})}if(d){if(b){b[e]=c;a.runWhenVisible()}else {a[e].apply(a,c)}}else {if(!b){a.pendingVisible=b={}}b[e]=c}return d},clearWhenVisible:function(c){var a=this,b=a.pendingVisible;if(b){delete b[c];if(Ext.Object.isEmpty(b)){a.pendingVisible=null;a.visibleListener=Ext.destroy(a.visibleListener)}}},runWhenVisible:function(){var a=this,c=a.pendingVisible,b;a.pendingVisible=null;a.visibleListener=Ext.destroy(a.visibleListener);for(b in c){a[b].apply(a,c[b])}},handleGlobalShow:function(b){var a=this;if(a.isVisible(!0)&&(b===a||a.isDescendantOf(b))){a.runWhenVisible()}}}},function(){Ext.namespace('Ext.theme.is').Material=!0;Ext.theme.name='Material'});Ext.define('Ext.data.SortTypes',function(){var a;return {singleton:!0,constructor:function(){a=this},none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\/?[^>]+>/gi,asText:function(b){return b!=null?String(b).replace(a.stripTagsRE,''):'\x00'},asUCText:function(b){return b!=null?String(b).toUpperCase().replace(a.stripTagsRE,''):'\x00'},asUCString:function(a){return a!=null?String(a).toUpperCase():'\x00'},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(c){var b=parseFloat(String(c).replace(a.stripCommasRe,''));return isNaN(b)?0:b},asInt:function(c){var b=parseInt(String(c).replace(a.stripCommasRe,''),10);return isNaN(b)?0:b}}});Ext.define('Ext.data.Types',{singleton:!0},function(a){var b=Ext.data.SortTypes;Ext.apply(a,{stripRe:/[$,%]/g,AUTO:{sortType:b.none,type:'auto'},STRING:{convert:function(b){var c=this.getAllowNull()?null:'';return b===undefined||b===null?c:String(b)},sortType:b.asUCString,type:'string'},INT:{convert:function(b){if(typeof b==='number'){return parseInt(b,10)}return b!==undefined&&b!==null&&b!==''?parseInt(String(b).replace(a.stripRe,''),10):this.getAllowNull()?null:0},sortType:b.none,type:'int'},FLOAT:{convert:function(b){if(typeof b==='number'){return b}return b!==undefined&&b!==null&&b!==''?parseFloat(String(b).replace(a.stripRe,''),10):this.getAllowNull()?null:0},sortType:b.none,type:'float'},BOOL:{convert:function(b){if(typeof b==='boolean'){return b}if(this.getAllowNull()&&(b===undefined||b===null||b==='')){return null}return b==='true'||b==1},sortType:b.none,type:'bool'},DATE:{convert:function(b){var d=this.getDateReadFormat()||this.getDateFormat(),c;if(!b){return null}if(b instanceof Date){return b}if(d){return Ext.Date.parse(b,d)}c=Date.parse(b);return c?new Date(c):null},sortType:b.asDate,type:'date'}});a.BOOLEAN=a.BOOL;a.INTEGER=a.INT;a.NUMBER=a.FLOAT});Ext.define('Ext.form.Labelable',{extend:Ext.Mixin,isLabelable:!0,mixinConfig:{id:'labelable',on:{beforeRender:'beforeLabelRender',onRender:'onLabelRender'}},config:{childEls:['labelEl','bodyEl','errorEl','errorWrapEl','ariaErrorEl','ariaStatusEl','ariaHelpEl','labelTextEl']},labelableRenderTpl:['{beforeLabelTpl}','<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{childElCls} {unselectableCls}" style="{labelStyle}"','<tpl if="inputId && !skipLabelForAttribute"> for="{inputId}"</tpl>',' {labelAttrTpl}>','<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">','{beforeLabelTextTpl}','<span id="{id}-labelTextEl" data-ref="labelTextEl" class="{labelTextCls}">','<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>','</tpl>','</span>','{afterLabelTextTpl}','</span>','</label>','{afterLabelTpl}','<div id="{id}-bodyEl" data-ref="bodyEl" role="presentation"',' class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>','{beforeBodyEl}','{beforeSubTpl}','{[values.$comp.getSubTplMarkup(values)]}','{afterSubTpl}','{afterBodyEl}','<tpl if="renderAriaElements">','<tpl if="ariaHelp">','<span id="{id}-ariaHelpEl" data-ref="ariaHelpEl"',' class="'+Ext.baseCSSPrefix+'hidden-offsets">','{ariaHelp}','</span>','</tpl>','<span id="{id}-ariaStatusEl" data-ref="ariaStatusEl" aria-hidden="true"',' class="'+Ext.baseCSSPrefix+'hidden-offsets">','{ariaStatus}','</span>','<span id="{id}-ariaErrorEl" data-ref="ariaErrorEl" aria-hidden="true" aria-live="assertive"',' class="'+Ext.baseCSSPrefix+'hidden-clip">','</span>','</tpl>','</div>','<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="presentation" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{tipAnchorTarget}">','</div>','</div>','</tpl>',{disableFormats:!0}],activeErrorsTpl:undefined,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl for="errors"><li>{.}</li></tpl>','</ul>','</tpl>'],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>','</tpl>'],ariaActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors" between=". ">{.}</tpl>','</tpl>'],isFieldLabelable:!0,formItemCls:Ext.baseCSSPrefix+'form-item',labelCls:Ext.baseCSSPrefix+'form-item-label',topLabelCls:Ext.baseCSSPrefix+'form-item-label-top',rightLabelCls:Ext.baseCSSPrefix+'form-item-label-right',labelInnerCls:Ext.baseCSSPrefix+'form-item-label-inner',labelTextCls:Ext.baseCSSPrefix+'form-item-label-text',topLabelSideErrorCls:Ext.baseCSSPrefix+'form-item-label-top-side-error',errorMsgCls:Ext.baseCSSPrefix+'form-error-msg',errorWrapCls:Ext.baseCSSPrefix+'form-error-wrap',errorWrapSideCls:Ext.baseCSSPrefix+'form-error-wrap-side',errorWrapUnderCls:Ext.baseCSSPrefix+'form-error-wrap-under',errorWrapUnderSideLabelCls:Ext.baseCSSPrefix+'form-error-wrap-under-side-label',baseBodyCls:Ext.baseCSSPrefix+'form-item-body',invalidIconCls:Ext.baseCSSPrefix+'form-invalid-icon',invalidUnderCls:Ext.baseCSSPrefix+'form-invalid-under',noLabelCls:Ext.baseCSSPrefix+'form-item-no-label',fieldBodyCls:'',extraFieldBodyCls:'',invalidCls:Ext.baseCSSPrefix+'form-invalid',fieldLabel:undefined,labelAlign:'left',labelWidth:100,labelPad:5,labelSeparator:':',hideLabel:!1,hideEmptyLabel:!0,preventMark:!1,autoFitErrors:!0,msgTarget:'qtip',msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:!0,ariaHelp:undefined,ariaErrorText:'Input error. {0}.',labelableInsertions:['beforeBodyEl','afterBodyEl','beforeLabelTpl','afterLabelTpl','beforeSubTpl','afterSubTpl','beforeLabelTextTpl','afterLabelTextTpl','labelAttrTpl'],statics:{initTip:function(){var b=this.tip,a,c;if(b){return}a={id:'ext-form-error-tip',ui:'form-invalid'};if(Ext.supports.Touch){a.dismissDelay=0;a.anchor='top';a.showDelay=0;a.showOnTap=!0;a.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.activeTarget.el).getWidth()}}}b=this.tip=Ext.create('Ext.tip.QuickTip',a);c=Ext.apply({},b.tagConfig);c.attribute='errorqtip';b.setTagConfig(c)},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var a=this,b=a.padding;if(b){a.padding=undefined;a.extraMargins=Ext.Element.parseBox(b)}if(Ext.isIE8){a.restoreDisplay=Ext.Function.createDelayed(a.doRestoreDisplay,0,a)}if(!a.activeErrorsTpl){if(a.msgTarget==='title'){a.activeErrorsTpl=a.plaintextActiveErrorsTpl}else {a.activeErrorsTpl=a.htmlActiveErrorsTpl}}a.addCls([a.formItemCls,a.formItemCls+'-'+a.ui]);a.lastActiveError='';a.enableBubble('errorchange')},trimLabelSeparator:function(){var b=this,c=b.labelSeparator,a=b.fieldLabel||'',d=a.substr(a.length-1);return d===c?a.slice(0,-1):a},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(b){var a=this,f=a.labelSeparator,c=a.errorWrapEl,g=a.labelAlign!=='top',e=a.noLabelCls,d=a.errorWrapUnderSideLabelCls;b=b||'';a.fieldLabel=b;if(a.rendered){if(Ext.isEmpty(b)&&a.hideEmptyLabel){a.addCls(e);if(g&&c){c.removeCls(d)}}else {if(f){b=a.trimLabelSeparator()+f}a.labelTextEl.dom.innerHTML=b;a.removeCls(e);if(g&&c){c.addCls(d)}}a.updateLayout()}},setHideLabel:function(b){var a=this;if(b!==a.hideLabel){a.hideLabel=b;if(a.rendered){a[b?'addCls':'removeCls'](a.noLabelCls);a.updateLayout()}}},setHideEmptyLabel:function(b){var a=this,c;if(b!==a.hideEmptyLabel){a.hideEmptyLabel=b;if(a.rendered&&!a.hideLabel){c=b&&!a.getFieldLabel();a[c?'addCls':'removeCls'](a.noLabelCls);a.updateLayout()}}},getInsertionRenderData:function(c,d){var e=d.length,b,a;while(e--){b=d[e];a=this[b];if(a){if(typeof a!=='string'){if(!a.isTemplate){a=Ext.XTemplate.getTpl(this,b)}a=a.apply(c)}}c[b]=a||''}return c},getLabelableRenderData:function(){var a=this,l=a.labelAlign,o=l==='top',r=l==='right',c=a.msgTarget==='side',i=a.msgTarget==='under',q=a.errorMsgCls,b=a.labelPad,m=a.labelWidth,d=a.labelClsExtra||'',j=c?a.errorWrapSideCls:a.errorWrapUnderCls,h='',g='',p=a.hasVisibleLabel(),k=a.autoFitErrors,f=a.defaultBodyWidth,n,e;if(o){d+=' '+a.topLabelCls;if(b){g='padding-bottom:'+b+'px;'}if(c&&!k){d+=' '+a.topLabelSideErrorCls}}else {if(r){d+=' '+a.rightLabelCls}if(b){h+=a.getHorizontalPaddingStyle()+b+'px;'}h+='width:'+(m+(b?b:0))+'px;';g='width:'+m+'px'}if(p){if(!o&&i){j+=' '+a.errorWrapUnderSideLabelCls}}if(f){n='min-width:'+f+'px;max-width:'+f+'px;'}e={id:a.id,inputId:a.getInputId(),labelCls:a.labelCls,labelClsExtra:d,labelStyle:h+(a.labelStyle||''),labelInnerStyle:g,labelInnerCls:a.labelInnerCls,labelTextCls:a.labelTextCls,skipLabelForAttribute:!!a.skipLabelForAttribute,unselectableCls:Ext.Element.unselectableCls,bodyStyle:n,baseBodyCls:a.baseBodyCls,fieldBodyCls:a.fieldBodyCls,extraFieldBodyCls:a.extraFieldBodyCls,errorWrapCls:a.errorWrapCls,errorWrapExtraCls:j,renderError:c||i,invalidMsgCls:c?a.invalidIconCls:i?a.invalidUnderCls:'',errorMsgCls:q,growCls:a.grow?a.growCls:'',tipAnchorTarget:a.id+'-inputEl',errorWrapStyle:c&&!k?'visibility:hidden':'display:none',fieldLabel:a.getFieldLabel(),labelSeparator:a.labelSeparator,renderAriaElements:!!a.renderAriaElements,ariaStatus:''};if(a.ariaHelp){e.ariaHelp=Ext.String.htmlEncode(a.ariaHelp)}a.getInsertionRenderData(e,a.labelableInsertions);return e},getHorizontalPaddingStyle:function(){return 'padding-right:'},beforeLabelRender:function(){var a=this;a.setFieldDefaults(a.getInherited().fieldDefaults);if(a.ownerLayout){a.addCls(Ext.baseCSSPrefix+a.ownerLayout.type+'-form-item')}if(!a.hasVisibleLabel()){a.addCls(a.noLabelCls)}},onLabelRender:function(){var a=this,f={},e=Ext.Element,d=a.errorWrapEl,c,b;if(d){d.setVisibilityMode(a.msgTarget==='side'&&!a.autoFitErrors?e.VISIBILITY:e.DISPLAY)}if(a.extraMargins){c=a.el.getMargin();for(b in c){if(c.hasOwnProperty(b)){f['margin-'+b]=c[b]+a.extraMargins[b]+'px'}}a.el.setStyle(f)}},hasVisibleLabel:function(){if(this.hideLabel){return !1}return !(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return ''},getInputId:function(){return ''},getActiveError:function(){return this.activeError||''},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(a){this.setActiveErrors(a)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(c){var a=this,k=a.errorWrapEl,b=a.msgTarget,j=b==='side',m=b==='qtip',e=a.ariaErrorEl,f,d,n,g,l,i,h;c=Ext.Array.from(c);n=a.lookupTpl('activeErrorsTpl');a.activeErrors=c;d=a.activeError=n.apply({fieldLabel:a.fieldLabel,errors:c,listCls:Ext.baseCSSPrefix+'list-plain'});a.renderActiveError();if(a.rendered){f=a.getActionEl();if(j){a.errorEl.dom.setAttribute('data-errorqtip',d)}else {if(m){f.dom.setAttribute('data-errorqtip',d)}else {if(b==='title'){f.dom.setAttribute('title',d)}}}if(b!=='title'&&e){l=a.lookupTpl('ariaActiveErrorsTpl');i=l.apply({errors:c});h=Ext.String.formatEncode(a.ariaErrorText,i,a.fieldLabel);if(e.dom.innerHTML!==h){e.dom.innerHTML=h}a.ariaStatusEl.dom.innerHTML=Ext.String.htmlEncode(i)}if(j||m){Ext.form.Labelable.initTip()}if(!a.msgTargets[b]){g=Ext.get(b);if(g){g.dom.innerHTML=d}}}if(k){k.setVisible(c.length>0);if(j&&a.autoFitErrors){a.labelEl.addCls(a.topLabelSideErrorCls)}a.updateLayout()}},unsetActiveError:function(){var a=this,f=a.errorWrapEl,e=a.ariaErrorEl,b=a.msgTarget,g=a.restoreDisplay,c,d;if(a.hasActiveError()){delete a.activeError;delete a.activeErrors;a.renderActiveError();if(a.rendered){c=a.getActionEl();if(b==='qtip'){c.dom.removeAttribute('data-errorqtip')}else {if(b==='title'){c.dom.removeAttribute('title')}}if(b!=='title'&&e){e.dom.innerHTML=a.ariaStatusEl.dom.innerHTML=''}if(!a.msgTargets[b]){d=Ext.get(b);if(d){d.dom.innerHTML=''}}if(f){f.hide();if(b==='side'&&a.autoFitErrors){a.labelEl.removeCls(a.topLabelSideErrorCls)}a.updateLayout();if(g){a.el.dom.style.display='block';a.restoreDisplay()}}}}},doRestoreDisplay:function(){var a=this.el;if(a&&a.dom){a.dom.style.display=''}},renderActiveError:function(){var a=this,b=a.getActiveError(),c=!!b;if(b!==a.lastActiveError){a.lastActiveError=b;a.fireEvent('errorchange',a,b)}if(a.rendered&&!a.destroyed&&!a.preventMark){a.toggleInvalidCls(c);if(a.errorEl){a.errorEl.dom.innerHTML=b}}},toggleInvalidCls:function(a){this.el[a?'addCls':'removeCls'](this.invalidCls)},setFieldDefaults:function(b){var a;for(a in b){if(!this.hasOwnProperty(a)){this[a]=b[a]}}}},function(){if(Ext.supports.Touch){this.prototype.msgTarget='side'}});Ext.define('Ext.form.field.Field',{mixinId:'field',isFormField:!0,config:{validation:null,validationField:null},disabled:!1,submitValue:!0,validateOnChange:!0,valuePublishEvent:'change',suspendCheckChange:0,dirty:!1,initField:function(){var a=this,b=a.valuePublishEvent,d,c;a.initValue();if(Ext.isString(b)){a.on(b,a.publishValue,a)}else {for(c=0,d=b.length;c<d;++c){a.on(b[c],a.publishValue,a)}}},initValue:function(){var a=this;if('value' in a){a.suspendCheckChange++;a.setValue(a.value);a.suspendCheckChange--}a.initialValue=a.originalValue=a.lastValue=a.getValue()},cleanupField:function(){delete this._ownerRecord},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(b){var a=this;a.value=b;a.checkChange();return a},isEqual:function(a,b){return String(a)===String(b)},isEqualAsString:function(a,b){return String(Ext.valueFrom(a,''))===String(Ext.valueFrom(b,''))},getSubmitData:function(){var a=this,b=null;if(!a.disabled&&a.submitValue){b={};b[a.getName()]=''+a.getValue()}return b},getModelData:function(d,c){var a=this,b=null;if(!a.disabled&&(a.submitValue||!c)){b={};b[a.getFieldIdentifier()]=a.getValue()}return b},reset:function(){var a=this;a.beforeReset();a.setValue(a.originalValue);a.clearInvalid();delete a.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){var a=this,b,c;if(!a.suspendCheckChange&&!a.destroying&&!a.destroyed){b=a.getValue();c=a.lastValue;if(a.didValueChange(b,c)){a.lastValue=b;a.fireEvent('change',a,b,c);a.onChange(b,c)}}},didValueChange:function(a,b){return !this.isEqual(a,b)},onChange:function(b){var a=this;if(a.validateOnChange){a.validate()}a.checkDirty()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState('value',a.getValue())}},isDirty:function(){var a=this;return !a.disabled&&!a.isEqual(a.getValue(),a.originalValue)},checkDirty:function(){var a=this,b=a.isDirty();if(b!==a.wasDirty){a.dirty=b;a.fireEvent('dirtychange',a,b);a.onDirtyChange(b);a.wasDirty=b}},onDirtyChange:Ext.emptyFn,getErrors:function(e){var b=[],d=this.getValidationField(),a=this.getValidation(),c;if(d){c=d.validate(e,null,null,this._ownerRecord);if(c!==!0){b.push(c)}}if(a&&a!==!0){b.push(a)}return b},isValid:function(){var a=this;return a.disabled||Ext.isEmpty(a.getErrors())},validate:function(){return this.checkValidityChange(this.isValid())},checkValidityChange:function(a){var b=this;if(a!==b.wasValid){b.wasValid=a;b.fireEvent('validitychange',b,a)}return a},setValidationField:function(b,a){this.callParent([b]);this._ownerRecord=a},batchChanges:function(a){try{this.suspendCheckChange++;a()}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return !1},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(b,a){if(a){this.validate()}},privates:{resetToInitialValue:function(){var a=this,b=a.originalValue;a.originalValue=a.initialValue;a.reset();a.originalValue=b}}});Ext.define('Ext.form.field.Base',{extend:Ext.Component,alternateClassName:['Ext.form.Field','Ext.form.BaseField'],xtype:'field',mixins:[Ext.form.Labelable,Ext.form.field.Field],focusable:!0,shrinkWrap:!0,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl if="ariaEl == \'inputEl\'">','<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>','</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls} {fixCls}" autocomplete="off"/>',{disableFormats:!0}],defaultBindProperty:'value',autoEl:{role:'presentation'},subTplInsertions:['inputAttrTpl'],childEls:['inputEl'],inputType:'text',isTextInput:!0,invalidText:'The value in this field is invalid',fieldCls:Ext.baseCSSPrefix+'form-field',focusCls:'form-focus',dirtyCls:Ext.baseCSSPrefix+'form-dirty',checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?['change','propertychange','keyup']:['change','input','textInput','keyup','dragdrop'],ignoreChangeRe:/data-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:!0,readOnly:!1,readOnlyCls:Ext.baseCSSPrefix+'form-readonly',validateOnBlur:!0,validateOnFocusLeave:!1,hasFocus:!1,baseCls:Ext.baseCSSPrefix+'field',fieldBodyCls:Ext.baseCSSPrefix+'field-body',webkitBorderBoxBugCls:Ext.baseCSSPrefix+'webkit-border-box-bug',maskOnDisable:!1,stretchInputElFixed:!0,ariaEl:'inputEl',focusEl:'inputEl',renderAriaElements:!0,initComponent:function(){var a=this;a.callParent();a.subTplData=a.subTplData||{};a.initLabelable();a.initField();a.initDefaultName();if(a.validateOnFocusLeave){a.validateOnBlur=!1}if(a.readOnly){a.addCls(a.readOnlyCls)}a.addCls(Ext.baseCSSPrefix+'form-type-'+a.inputType);if(a.format&&a.formatText&&!a.ariaHelp){a.ariaHelp=Ext.String.format(a.formatText,a.format)}},initDefaultName:function(){var a=this;if(!a.name){a.name=a.getInputId()}},getInputId:function(){return this.inputId||(this.inputId=this.id+'-inputEl')},getSubTplData:function(i){var a=this,e=a.id,h=a.inputType,f=a.getInputId(),j=a.inputCls||'',g='',c,b,d;if(Ext.supports.WebKitInputTableBoxModelBug){g+=a.webkitBorderBoxBugCls}c=Ext.apply({ui:a.ui,id:f,cmpId:e,name:a.name||f,disabled:a.disabled,readOnly:a.readOnly,value:a.getRawValue(),type:h,fieldCls:a.fieldCls,fieldStyle:a.getFieldStyle(),childElCls:i.childElCls,tabIdx:a.tabIndex,inputCls:j,typeCls:Ext.baseCSSPrefix+'form-'+(a.isTextInput?'text':h),fixCls:g,ariaEl:a.ariaEl},a.subTplData);if(a.ariaRole){b={};if(!a.ariaStaticRoles[a.ariaRole]){b['aria-hidden']=!!a.hidden;b['aria-disabled']=!!a.disabled;d={'aria-invalid':!1,'aria-readonly':!!a.readOnly};if(a.ariaLabel){b['aria-label']=Ext.String.htmlEncode(a.ariaLabel)}b=Ext.apply(b,a.getAriaAttributes());if(!b['aria-describedby']){if(a.ariaHelp){d['aria-describedby']=e+'-ariaStatusEl '+e+'-ariaHelpEl'}else {d['aria-describedby']=e+'-ariaStatusEl'}}c.inputElAriaAttributes=d}if(a.ariaRole!=='native'){b.role=a.ariaRole}if(a.ariaLabel){b['aria-label']=a.ariaLabel}if(a.format&&a.formatText&&!c.title){b.title=Ext.String.formatEncode(a.formatText,a.format)}c.ariaElAttributes=b}a.getInsertionRenderData(c,a.subTplInsertions);return c},getSubTplMarkup:function(f){var b=this,c=b.getSubTplData(f),e=b.lookupTpl('preSubTpl'),d=b.lookupTpl('postSubTpl'),a='';if(e){a+=e.apply(c)}a+=b.lookupTpl('fieldSubTpl').apply(c);if(d){a+=d.apply(c)}return a},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},setFieldStyle:function(b){var c=this,a=c.inputEl;if(a){a.applyStyles(b)}c.fieldStyle=b},getFieldStyle:function(){var a=this.fieldStyle;return Ext.isObject(a)?Ext.DomHelper.generateStyles(a,null,!0):a||''},onRender:function(){this.callParent(arguments);this.mixins.labelable.self.initTip();this.renderActiveError()},beforeBlur:function(a){if(this.validateOnBlur){this.validate()}},onFocusLeave:function(a){if(this.validateOnFocusLeave){this.validate()}this.callParent([a]);this.completeEdit()},completeEdit:Ext.emptyFn,isFileUpload:function(){return this.inputType==='file'},getSubmitData:function(){var a=this,b=null,c;if(!a.disabled&&a.submitValue){c=a.getSubmitValue();if(c!==null){b={};b[a.getName()]=c}}return b},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var a=this,b=a.inputEl?a.inputEl.getValue():Ext.valueFrom(a.rawValue,'');a.rawValue=b;return b},setRawValue:function(b){var a=this,c=a.rawValue;if(!a.transformRawValue.$nullFn){b=a.transformRawValue(b)}b=Ext.valueFrom(b,'');if(c===undefined||c!==b){a.rawValue=b;if(a.inputEl){a.bindChangeEvents(!1);a.inputEl.dom.value=b;a.bindChangeEvents(!0)}}if(a.rendered&&a.reference){a.publishState('rawValue',b)}return b},transformRawValue:Ext.identityFn,valueToRaw:function(a){return ''+Ext.valueFrom(a,'')},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var a=this,b=a.rawToValue(a.processRawValue(a.getRawValue()));a.value=b;return b},setValue:function(b){var a=this;a.setRawValue(a.valueToRaw(b));return a.mixins.field.setValue.call(a,b)},onBoxReady:function(){var a=this;a.callParent(arguments);if(a.setReadOnlyOnBoxReady){a.setReadOnly(a.readOnly)}},onDisable:function(){var a=this,b=a.inputEl;a.callParent();if(b){b.dom.disabled=!0;if(a.hasActiveError()){a.clearInvalid();a.hadErrorOnDisable=!0}}if(a.wasValid===!1){a.checkValidityChange(!0)}},onEnable:function(){var a=this,b=a.inputEl,d=a.preventMark,c;a.callParent();if(b){b.dom.disabled=!1}if(a.wasValid!==undefined){a.forceValidation=!0;a.preventMark=!a.hadErrorOnDisable;c=a.isValid();a.forceValidation=!1;a.preventMark=d;a.checkValidityChange(c)}delete a.hadErrorOnDisable},setReadOnly:function(b){var a=this,c=a.inputEl,d=a.readOnly;b=!!b;a[b?'addCls':'removeCls'](a.readOnlyCls);a.readOnly=b;if(c){c.dom.readOnly=b;c.dom.setAttribute('aria-readonly',b)}else {if(a.rendering){a.setReadOnlyOnBoxReady=!0}}if(b!==d){a.fireEvent('writeablechange',a,b)}},fireKey:function(a,b){if(a.isSpecialKey()){this.fireEvent('specialkey',this,a,b)}},initEvents:function(){var a=this,d=a.inputEl,f=a.onFieldMutation,e=a.checkChangeEvents,g=e.length,c,b;if(d){a.mon(d,Ext.supports.SpecialKeyDownRepeat?'keydown':'keypress',a.fireKey,a);for(c=0;c<g;++c){b=e[c];if(b==='propertychange'){a.usesPropertychange=!0}if(b==='textInput'){a.usesTextInput=!0}a.mon(d,b,f,a)}}a.callParent()},onFieldMutation:function(a){if(!this.readOnly&&!(a.type==='propertychange'&&this.ignoreChangeRe.test(a.browserEvent.propertyName))){this.startCheckChangeTask()}},startCheckChangeTask:function(){var a=this,b=a.checkChangeTask;if(!b){a.checkChangeTask=b=new Ext.util.DelayedTask(a.doCheckChangeTask,a)}if(!a.bindNotifyListener){a.bindNotifyListener=Ext.on('beforebindnotify',a.onBeforeNotify,a,{destroyable:!0})}b.delay(a.checkChangeBuffer)},doCheckChangeTask:function(){var a=this.bindNotifyListener;if(a){a.destroy();this.bindNotifyListener=null}this.checkChange()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState('value',a.getValue())}},onDirtyChange:function(b){var a=this;a[b?'addCls':'removeCls'](a.dirtyCls);if(a.rendered&&a.reference){a.publishState('dirty',b)}},isValid:function(){var a=this,b=a.disabled,c=a.forceValidation||!b;return c?a.validateValue(a.processRawValue(a.getRawValue())):b},validateValue:function(d){var a=this,c=a.getErrors(d),b=Ext.isEmpty(c);if(!a.preventMark){if(b){a.clearInvalid()}else {a.markInvalid(c)}}return b},markInvalid:function(c){var a=this,d=a.getActiveError(),b;a.setActiveErrors(Ext.Array.from(c));b=a.getActiveError();if(d!==b){a.setError(b);if(!a.ariaStaticRoles[a.ariaRole]&&a.inputEl){a.inputEl.dom.setAttribute('aria-invalid',!0)}}},clearInvalid:function(){var a=this,b=a.hasActiveError();delete a.hadErrorOnDisable;a.unsetActiveError();if(b){a.setError('');if(!a.ariaStaticRoles[a.ariaRole]&&a.inputEl){a.inputEl.dom.setAttribute('aria-invalid',!1)}}},setError:function(d){var a=this,b=a.msgTarget,c;if(a.rendered){if(b==='title'||b==='qtip'){c=b==='qtip'?'data-errorqtip':'title';a.getActionEl().dom.setAttribute(c,d||'')}else {a.updateLayout()}}},renderActiveError:function(){var a=this,c=a.hasActiveError(),b=a.invalidCls+'-field';if(a.inputEl){a.inputEl[c?'addCls':'removeCls']([b,b+'-'+a.ui])}a.mixins.labelable.renderActiveError.call(a)},doDestroy:function(){var a=this,b=a.checkChangeTask;if(b){b.cancel()}Ext.destroy(a.bindNotifyListener);a.cleanupField();a.callParent()},privates:{applyBind:function(f,c){var b=this,e=c&&c.value,a,d;a=b.callParent([f,c]);if(a){d=a.value;b.hasBindingValue=!!d;if(d!==e&&b.getInherited().modelValidation){b.updateValueBinding(a)}}return a},applyRenderSelectors:function(){var a=this;a.callParent();if(!a.inputEl){a.inputEl=a.el.getById(a.getInputId())}},bindChangeEvents:function(c){var b=c?'resumeEvent':'suspendEvent',a=this.inputEl;if(this.usesPropertychange){a[b]('propertychange')}if(this.usesTextInput){a[b]('textInput')}},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty('renderTpl')){a.renderTpl=a.lookupTpl('labelableRenderTpl')}return a.callParent()},onBeforeNotify:function(){this.checkChangeTask.cancel();this.checkChange()},updateValueBinding:function(b){var d=this,a=b.value,c=b.$fieldBinding;if(c){c.destroy();b.$fieldBinding=null}if(a&&a.bindValidationField){d.fieldBinding=a.bindValidationField('setValidationField',d)}}},deprecated:{5:{methods:{doComponentLayout:function(){this.bindChangeEvents(!1);this.callParent(arguments);this.bindChangeEvents(!0)}}}}});Ext.define('Ext.layout.SizeModel',{constructor:function(e){var a=this,b=a.self,d=b.sizeModelsArray,c;Ext.apply(a,e);a[c=a.name]=!0;a.fixed=!(a.auto=a.natural||a.shrinkWrap);d[a.ordinal=d.length]=b[c]=b.sizeModels[c]=a},statics:{sizeModelsArray:[],sizeModels:{}},calculated:!1,configured:!1,constrainedMax:!1,constrainedMin:!1,natural:!1,shrinkWrap:!1,calculatedFromConfigured:!1,calculatedFromNatural:!1,calculatedFromShrinkWrap:!1,names:null},function(){var a=this,d=a.sizeModelsArray,c,b,f,g,e;new a({name:'calculated'});new a({name:'configured',names:{width:'width',height:'height'}});new a({name:'natural'});new a({name:'shrinkWrap'});new a({name:'calculatedFromConfigured',configured:!0,calculatedFrom:!0,names:{width:'width',height:'height'}});new a({name:'calculatedFromNatural',natural:!0,calculatedFrom:!0});new a({name:'calculatedFromShrinkWrap',shrinkWrap:!0,calculatedFrom:!0});new a({name:'constrainedMax',configured:!0,constrained:!0,names:{width:'maxWidth',height:'maxHeight'}});new a({name:'constrainedMin',configured:!0,constrained:!0,names:{width:'minWidth',height:'minHeight'}});new a({name:'constrainedDock',configured:!0,constrained:!0,constrainedByMin:!0,names:{width:'dockConstrainedWidth',height:'dockConstrainedHeight'}});for(c=0,f=d.length;c<f;++c){e=d[c];e.pairsByHeightOrdinal=g=[];for(b=0;b<f;++b){g.push({width:e,height:d[b],ordinal:b})}}});Ext.define('Ext.layout.Layout',{mixins:[Ext.mixin.Factoryable],factoryConfig:{type:'layout',defaultType:'autocontainer',instanceProp:'isLayout'},isLayout:!0,initialized:!1,running:!1,needsItemSize:!0,setsItemSize:!0,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:!1,$configStrict:!1,constructor:function(b){var a=this;a.id=Ext.id(null,a.type+'-');a.initConfig(b);delete a.type;a.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(b){var a=this,d=a.context,c;if(a.lastWidthModel!==b.widthModel){if(a.lastWidthModel){c=!0}a.lastWidthModel=b.widthModel}if(a.lastHeightModel!==b.heightModel){if(a.lastWidthModel){c=!0}a.lastHeightModel=b.heightModel}if(c){(d=b.context).clearTriggers(a,!1);d.clearTriggers(a,!0);a.triggerCount=0}},finishedLayout:function(a){this.lastWidthModel=a.widthModel;this.lastHeightModel=a.heightModel;this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(a){return this.autoSizePolicy},isItemBoxParent:function(a){return !1},isItemLayoutRoot:function(d){var a=d.getSizeModel(),c=a.width,b=a.height;if(!d.componentLayout.lastComponentSize&&(c.calculated||b.calculated)){return !1}return !c.shrinkWrap&&!b.shrinkWrap},isItemShrinkWrap:function(a){return a.shrinkWrap},isRunning:function(){return !!this.ownerContext},getItemsRenderTree:function(g,c){var f=g.length,d,a,b,e;if(f){e=[];for(d=0;d<f;++d){a=g[d];if(!a.rendered){if(c&&c[a.id]!==undefined){b=c[a.id]}else {this.configureItem(a);b=a.getRenderTree();if(c){c[a.id]=b}}if(b){e.push(b)}}}}return e},finishRender:Ext.emptyFn,finishRenderItems:function(e,c){var d=c.length,a,b;for(a=0;a<d;a++){b=c[a];if(b.rendering){b.finishRender(a)}}},renderChildren:function(){var a=this,c=a.getLayoutItems(),b=a.getRenderTarget();a.renderItems(c,b)},renderItems:function(f,d){var c=this,g=f.length,e=0,b=0,a;if(g){Ext.suspendLayouts();for(;e<g;e++,b++){a=f[e];if(a&&!a.rendered){c.renderItem(a,d,b)}else {if(a.ignoreDomPosition){--b}else {if(!c.isValidParent(a,d,b)){c.moveItem(a,d,b)}else {c.configureItem(a)}}}}Ext.resumeLayouts(!0)}},isValidParent:function(e,d,a){var b=d&&d.dom||d,c=this.getItemLayoutEl(e);if(c&&b){if(typeof a==='number'){a=this.getPositionOffset(a);return c===b.childNodes[a]}return c.parentNode===b}return !1},getItemLayoutEl:function(c){var a=c.el?c.el.dom:Ext.getDom(c),d=a.parentNode,b;if(d){b=d.className;if(b&&b.indexOf(Ext.baseCSSPrefix+'resizable-wrap')!==-1){a=a.parentNode}}return a},getPositionOffset:function(a){return a},configureItem:function(a){a.ownerLayout=this},renderItem:function(a,c,b){var d=this;if(!a.rendered){d.configureItem(a);a.render(c,b)}},moveItem:function(d,b,c){var a=Ext.fly(document.activeElement);b=b.dom||b;if(typeof c==='number'){c=b.childNodes[c]}if(d.el.contains(a)){a.suspendFocusEvents()}else {a=null}b.insertBefore(d.el.dom,c||null);d.container=Ext.get(b);this.configureItem(d);if(a){a.focus();a.resumeFocusEvents()}},onContentChange:function(){this.owner.updateLayout();return !0},initLayout:function(){this.initialized=!0},setOwner:function(a){this.owner=a},getLayoutItems:function(){return []},onAdd:function(a){a.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(b){var d=this,e=b.el,c=d.owner,a;if(b.rendered){a=[].concat(d.itemCls||[]);if(c.itemCls){a=Ext.Array.push(a,c.itemCls)}if(a.length){e.removeCls(a)}}delete b.ownerLayout},afterCollapse:function(b,a){if(a){this.onContentChange(b)}},afterExpand:function(b,a){if(a){this.onContentChange(b)}},destroy:function(){var a=this,b;if(a.targetCls){b=a.getTarget();if(b){b.removeCls(a.targetCls)}}if(!a.onDestroy.$emptyFn){a.onDestroy()}a.callParent()},sortWeightedItems:function(b,d){var a,c;for(a=0,c=b.length;a<c;++a){b[a].$i=a}Ext.Array.sort(b,function(c,e){var a=e.weight-c.weight;if(!a){a=c.$i-e.$i;if(c[d]){a=-a}}return a});for(a=0;a<c;++a){delete b[a].$i}}},function(){var a=this;a.prototype.sizeModels=a.sizeModels=Ext.layout.SizeModel.sizeModels});Ext.define('Ext.layout.component.Component',{extend:Ext.layout.Layout,type:'component',isComponentLayout:!0,nullBox:{},usesContentHeight:!0,usesContentWidth:!0,usesHeight:!0,usesWidth:!0,widthCache:{},heightCache:{},beginLayoutCycle:function(a,j){var d=this,b=d.owner,q=a.ownerCtContext,e=a.heightModel,f=a.widthModel,p=b.el.dom===document.body,h=b.lastBox||d.nullBox,g=b.el.lastBox||d.nullBox,m=!p,k=a.isTopLevel,i,c,n,l,o;d.callParent([a,j]);if(j){o=b.getScrollable&&b.getScrollable();if(o){o.flushOnDomScrollEnd()}if(d.usesContentWidth){++a.consumersContentWidth}if(d.usesContentHeight){++a.consumersContentHeight}if(d.usesWidth){++a.consumersWidth}if(d.usesHeight){++a.consumersHeight}if(q&&!q.hasRawContent){i=b.ownerLayout;if(i){if(i.usesWidth){++a.consumersWidth}if(i.usesHeight){++a.consumersHeight}}}}if(f.configured){n=b[f.names.width];if(k&&f.calculatedFrom){n=h.width}if(!p){m=d.setWidthInDom||(j?n!==g.width:f.constrained)}a.setWidth(n,m)}else {if(k){if(f.calculated){c=h.width;a.setWidth(c,c!==g.width)}else {if(f.calculatedFromNatural){b.el.dom.style.width=b.width}}c=h.x;a.setProp('x',c,c!==g.x)}}if(e.configured){l=b[e.names.height];if(k&&e.calculatedFrom){l=h.height}if(!p){m=j?l!==g.height:e.constrained}a.setHeight(l,m)}else {if(k){if(e.calculated){c=h.height;a.setHeight(c,c!==g.height)}else {if(e.calculatedFromNatural){b.el.dom.style.height=b.height}}c=h.y;a.setProp('y',c,c!==g.y)}}},finishedLayout:function(c){var d=this,f=c.children,h=d.owner,i,e,g,a,b;if(f){i=f.length;for(e=0;e<i;e++){g=f[e];g.el.lastBox=g.props}}c.previousSize=d.lastComponentSize;d.lastComponentSize=h.el.lastBox=b=c.props;a=h.lastBox||(h.lastBox={});a.x=b.x;a.y=b.y;a.width=b.width;a.height=b.height;a.invalid=!1;d.callParent([c])},notifyOwner:function(d){var c=this,b=c.lastComponentSize,a=d.previousSize;c.owner.afterComponentLayout(b.width,b.height,a?a.width:undefined,a?a.height:undefined)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(d){var c=this,a=c.targetInfo,b;if(!a){b=d.getEl('getTarget',c);c.targetInfo=a={padding:b.getPaddingInfo(),border:b.getBorderInfo()}}return a},measureAutoDimensions:function(a,x){var i=this,v=i.owner,j=v.layout,u=a.heightModel,t=a.widthModel,h=a.boxParent,n=a.isBoxParent,e=a.target,r=a.props,s,b={gotWidth:!1,gotHeight:!1,isContainer:s=!a.hasRawContent},w=x||3,p,o,m=0,d=0,c,f,g,l,k,q;if(t.shrinkWrap&&a.consumersContentWidth){++m;p=!(w&1);if(s){if(p){b.contentWidth=0;b.gotWidth=!0;++d}else {if((b.contentWidth=a.getProp('contentWidth'))!==undefined){b.gotWidth=!0;++d}}}else {f=r.contentWidth;if(typeof f==='number'){b.contentWidth=f;b.gotWidth=!0;++d}else {if(p){c=!0}else {if(!a.hasDomProp('containerChildrenSizeDone')){c=!1}else {if(n||!h||h.widthModel.shrinkWrap){c=!0}else {c=h.hasDomProp('width')}}}if(c){if(p){g=0}else {if(j&&j.measureContentWidth){g=j.measureContentWidth(a)}else {if(e.cacheWidth){l=e.xtype+'-'+e.ui;k=i.widthCache;g=k[l]||(k[l]=i.measureContentWidth(a))}else {g=i.measureContentWidth(a)}}}if(!isNaN(b.contentWidth=g)){a.setContentWidth(g,!0);b.gotWidth=!0;++d}}}}}else {if(t.natural&&a.consumersWidth){++m;f=r.width;if(typeof f==='number'){b.width=f;b.gotWidth=!0;++d}else {if(n||!h){c=!0}else {c=h.hasDomProp('width')}if(c){if(!isNaN(b.width=i.measureOwnerWidth(a))){q=!!((e.minWidth||e.maxWidth)&&typeof e.width!=='number');a.setWidth(b.width,q);b.gotWidth=!0;++d}}}}}if(u.shrinkWrap&&a.consumersContentHeight){++m;o=!(w&2);if(s){if(o){b.contentHeight=0;b.gotHeight=!0;++d}else {if((b.contentHeight=a.getProp('contentHeight'))!==undefined){b.gotHeight=!0;++d}}}else {f=r.contentHeight;if(typeof f==='number'){b.contentHeight=f;b.gotHeight=!0;++d}else {if(o){c=!0}else {if(!a.hasDomProp('containerChildrenSizeDone')){c=!1}else {if(v.noWrap){c=!0}else {if(!t.shrinkWrap){c=(a.bodyContext||a).hasDomProp('width')}else {if(n||!h||h.widthModel.shrinkWrap){c=!0}else {c=h.hasDomProp('width')}}}}}if(c){if(o){g=0}else {if(j&&j.measureContentHeight){g=j.measureContentHeight(a)}else {if(e.cacheHeight){l=e.xtype+'-'+e.ui;k=i.heightCache;g=k[l]||(k[l]=i.measureContentHeight(a))}else {g=i.measureContentHeight(a)}}}if(!isNaN(b.contentHeight=g)){a.setContentHeight(g,!0);b.gotHeight=!0;++d}}}}}else {if(u.natural&&a.consumersHeight){++m;f=r.height;if(typeof f==='number'){b.height=f;b.gotHeight=!0;++d}else {if(n||!h){c=!0}else {c=h.hasDomProp('width')}if(c){if(!isNaN(b.height=i.measureOwnerHeight(a))){q=!!((e.minHeight||e.maxHeight)&&typeof e.height!=='number');a.setHeight(b.height,q);b.gotHeight=!0;++d}}}}}if(h){a.onBoxMeasured()}b.gotAll=d===m;return b},measureContentWidth:function(a){return a.el.getWidth()-a.getFrameInfo().width},measureContentHeight:function(a){return a.el.getHeight()-a.getFrameInfo().height},measureOwnerHeight:function(a){return a.el.getHeight()},measureOwnerWidth:function(a){return a.el.getWidth()}});Ext.define('Ext.layout.component.Auto',{alias:'layout.autocomponent',extend:Ext.layout.component.Component,type:'autocomponent',setHeightInDom:!1,setWidthInDom:!1,waitForOuterHeightInDom:!1,waitForOuterWidthInDom:!1,beginLayoutCycle:function(d,f){var a=this,c=a.lastWidthModel,b=a.lastHeightModel,e=a.owner.el;a.callParent(arguments);if(c&&c.fixed&&d.widthModel.shrinkWrap){e.setWidth(null)}if(b&&b.fixed&&d.heightModel.shrinkWrap){e.setHeight(null)}},calculate:function(b){var a=this,c=a.measureAutoDimensions(b),f=b.heightModel,g=b.widthModel,e,d;if(c.gotWidth){if(g.shrinkWrap){a.publishOwnerWidth(b,c.contentWidth)}else {if(a.publishInnerWidth){a.publishInnerWidth(b,c.width)}}}else {if(!g.auto&&a.publishInnerWidth){e=a.waitForOuterWidthInDom?b.getDomProp('width'):b.getProp('width');if(e===undefined){a.done=!1}else {a.publishInnerWidth(b,e)}}}if(c.gotHeight){if(f.shrinkWrap){a.publishOwnerHeight(b,c.contentHeight)}else {if(a.publishInnerHeight){a.publishInnerHeight(b,c.height)}}}else {if(!f.auto&&a.publishInnerHeight){d=a.waitForOuterHeightInDom?b.getDomProp('height'):b.getProp('height');if(d===undefined){a.done=!1}else {a.publishInnerHeight(b,d)}}}if(!c.gotAll){a.done=!1}},calculateOwnerHeightFromContentHeight:function(b,a){return a+b.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(b,a){return a+b.getFrameInfo().width},publishOwnerHeight:function(b,h){var c=this,g=c.owner,a=c.calculateOwnerHeightFromContentHeight(b,h),d,f,e;if(isNaN(a)){c.done=!1}else {d=Ext.Number.constrain(a,g.minHeight,g.maxHeight);if(d===a){f=c.setHeightInDom}else {e=c.sizeModels[d<a?'constrainedMax':'constrainedMin'];a=d;if(b.heightModel.calculatedFromShrinkWrap){b.heightModel=e}else {b.invalidate({heightModel:e})}}b.setHeight(a,f)}},publishOwnerWidth:function(b,h){var c=this,g=c.owner,a=c.calculateOwnerWidthFromContentWidth(b,h),d,f,e;if(isNaN(a)){c.done=!1}else {d=Ext.Number.constrain(a,g.minWidth,g.maxWidth);if(d===a){f=c.setWidthInDom}else {e=c.sizeModels[d<a?'constrainedMax':'constrainedMin'];a=d;if(b.widthModel.calculatedFromShrinkWrap){b.widthModel=e}else {b.invalidate({widthModel:e})}}b.setWidth(a,f)}}});Ext.define('Ext.layout.component.field.Text',{extend:Ext.layout.component.Auto,alias:'layout.textfield',beginLayoutCycle:function(a,c){var b=a.target;a.el.toggleCls(b.heightedCls,!a.heightModel.shrinkWrap||b.minHeight!=null);this.callParent([a,c])}});Ext.define('Ext.form.field.VTypes',function(){var b=/^[a-zA-Z_]+$/,a=/^[a-zA-Z0-9_]+$/,c=/^(")?(?:[^\."\s])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,d=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return {singleton:!0,alternateClassName:'Ext.form.VTypes',email:function(a){return c.test(a)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(a){return d.test(a)},urlText:'This field should be a URL in the format "http:/'+'/www.example.com"',alpha:function(a){return b.test(a)},alphaText:'This field should only contain letters and _',alphaMask:/[a-z_]/i,alphanum:function(b){return a.test(b)},alphanumText:'This field should only contain letters, numbers and _',alphanumMask:/[a-z0-9_]/i}});Ext.define('Bigmedia.Locales',{singleton:!0,getRefStoreData:function(a){var b=this;if(b[a]){var c=Object.keys(b[a]).map(function(c){return {id:c,name:b[a][c]}});return c}},getLocaleByCode:function(a){var b=a||this.currentLocale;var c=this.locales.find(c=>c.code==b);return c},getLocaleByShort:function(a){var b=this.locales.find(b=>b['short']==a);return b},getLocaleByFull:function(a){var b=this.locales.find(b=>b.full==a);return b},currentLocale:'en',sidesTitle:'Bigmedia Network',filtersTitle:'Filters',mapTitle:'Map',colSideNumber:'Side No.',colCity:'City',colAddress:'Address',colSize:'Size',colNetwork:'Network',colOccupancy:'Occupancy',filterCity:'Cities',filterSize:'Sizes',filterNetwork:'Formats',refTagTip:'Shown {addCount} from total {totalCount}',headerSelectLocale:'Select language',locales:[{code:'ukr','short':'',full:''},{code:'ru','short':'',full:''},{code:'en','short':'Eng',full:'English'}],localeUkr:'',localeRu:'',localeEn:'Eng',statusBarTotal:'Total: {0}',statusBarFiltered:'Filtered: {0}',statusBarChecked:'Selected: {0}',gridColumnStrFilterText:'Search for...',statusBarLoading:'Loading...',detSideTabTitlePhoto:'Photos',detSideTabTitleInfo:'Details',colCat:'A/B',colConstrtype:'Construction type',colSidetype:'Surface type',colFaceNum:'Face No.',facesTitle:'Bigmedia Network',filterStreet:'Streets',dlgPoiCategoriesTitle:"Filter by POI category(es) or object's name",dlgPoiCategoriesFieldSetCat:'Categories',dlgPoiCategoriesFieldSetPoiSearch:"Object's name",dlgPoiCategoriesDistanceLabel:'Max. distance (meters)',dlgPoiCategoriesBeforeLabel:'Faces must be in front of POI',filterPoi:'POI',dlgPoiCategoriesCreateBtnLabel:'Create filter',dlgPoiCategoriesCancelBtnLabel:'Cancel',dlgPoiCategoriesStatusDefault:'Select category or name',dlgPoiCategoriesStatusReady:"Press 'Create filter' button when you finish",dlgPoiCategoriesStatusSelText:'Selected: {} faces',dlgPoiCategoriesFieldSetParams:'Distance & position',poiFilterSetDescrCategories:'Categories({0}): ',poiFilterSetDescrObjects:'Objects({0}): ',poiFilterSetDescrParamLimits:'were limited by',poiFilterSetDescrParamDist:'distance {0} m.',poiFilterSetDescrParamBefore:'face position in front of object',poiFilterSetNameParamLimits:'(with limits)',colGRP:'GRP',colOTS:'OTS',colTRP:'TRP',filterAB:'A/B',filterMediaParams:'Media metrics',filterPeriod:'Free periods',dlgCustomPeriodTitle:'Custom period filter',dlgCustomPeriodPeriod:'Available period for reservation',dlgCustomPeriodFrom:'From',dlgCustomPeriodTo:'To',dlgCustomPeriodBegErrMsg:'From date must be less then or equal to End date',dlgCustomPeriodEndErrMsg:'End date must be greater then or equal to From date',dlgCustomPeriodAdditParams:'Additional parameters',dlgCustomPeriodWholePeriod:'Whole period',dlgCustomPeriodAllowParts:'Allow partitions',dlgCustomPeriodMinDaysAmount:'Min. avail. days amount in period',dlgCustomPeriodShowTempReserved:'Show faces for wish list (temporary reserved)',periodTagDescrPeriod:'Period: {0}',periodTagDescrWhole:'whole period',periodTagDescrParts:'allow parts of period with minimum {0} days',periodTagDescrFreeOnly:'only free boards',periodTagDescrAllowTempRes:'including temporary reserved',selectedFilterUnselected:'Unselected',selectedFilterSelected:'Selected',colRating:'Rating',filterSelection:'Selection',exportExcelSavingData:'Saving data, please wait...',exportExcelProgressText:'Saving...',exportExcelFileSaved:'Excel file was saved.',exportExcelDone:'Done',occSold:'Sold',occFree:'Free',occReserved:'Sold',occTempReserved:'Reserved',occUnknown:'Unknown',occDemounted:'Demounted',exportExcelStatusDescription:'Status description:',exportExcelDateGenerated:'Data saved from Bigmedia web site ',colDoorsNo:'Doors No.',headerShoppingCartEmpty:'Shopping cart is empty',headerShoppingCartNotEmpty:'You have {0} face(s) in shopping cart. Click here to checkout the order.',gridBtnAddToCartText:'Add to Cart',gridBtnExportToExcelText:'Export to Excel',cartTitle:'Shopping Cart',cartBtnRemoveItemTooltip:'Remove this face from shopping cart',cartRemoveItemToastText:'Selected item was removed from cart',facesPrepareItemsForCartMsg:'Prepare items for cart. Please, wait...',facesPrepareItemsProgressText:'Moving...',facesPrepareItemsAdded:'Selected items was added to cart.',cartBtnRemoveFromCart:'Remove from cart',cartRemoveItemsToastText:'Selected items were removed from cart',cartPrepareItemsRemoveFromCartMsg:'Prepare items for remove. Please, wait...',cartPrepareItemsRemoveProgressText:'Removing...',headerShoppingCartMenuShowText:'Show cart',headerShoppingCartMenuEmptyText:'Empty cart',cartBtnBackToFacesText:'Continue select faces',cartBtnCheckoutText:'Checkout order',checkoutTitle:'Checkout order',checkoutFormTitle:'Complete Check Out',checkoutFormFieldsetContactInfo:'Your Contact Information',checkoutFormFirstNameLabel:'First Name',checkoutFormFirstNameEmpty:'First',checkoutFormLastNameLabel:'Last Name',checkoutFormLastNameEmpty:'Last',checkoutFormNameLabel:'Name',checkoutFormEmailLabel:'Email Address',checkoutFormOrgLabel:'Company Name',checkoutFormPhoneLabel:'Phone',checkoutFormPhoneCodeLabel:'City or Operator code',checkoutFormPhoneNumberLabel:'Phone Number',checkoutFormPhoneNumberRegexText:'Must be in the format xxxxxxx',checkoutFormPeriodTitle:"Campaign's period",checkoutFormDescrTitle:'Order description',checkoutFormNoteLabel:'Note',checkoutFormNoteEmpty:'Enter your additional information here',checkoutFormBtnBackToCartText:'Back to cart',checkoutFormBtnClearFormText:'Reset form',checkoutFormBtnSendText:'Send order',checkoutFormMsgVerifyTitle:'Verification code',checkoutFormMsgVerifyText:'Please enter verification code that was sent to you on your mailbox:',checkoutFormToastCodeVerified:'The authorization code was verified',checkoutFormToastCodeWrong:'The authorization code is wrong. Please, try again.',checkoutFormToastCodeCanceled:'You canceled email verification.',checkoutFormToastSendSuccessfully:"Order was sent successfully. We'll contact you as soon as possible.",filterBusy:'Show All Network',gridBtnShowSelectedOnly:'Show selected only',dlgRegisterPasswordsErrMsg:'Entered passwords are not equal',dlgRegisterPasswordLengthErrMsg:'Entered password is too short. Must be at least 4 symbols',dlgRegisterLoginErrMsg:'Login field can contain only alphanumeric symbols',dlgRegisterAgreeBoxMsg:'I agree with the Terms and Conditions',headerCampaignsBtnText:'Campaigns',headerMonitoringBtnText:'Monitoring',refDocumentType:{347:'',348:'  ',349:'-',350:'  ',351:' '},refDocumentStatus:{363:'  . ',365:'  ',366:' ',367:'  ',368:'',369:' ',402:'  '},refServiceOperationType:{11:' ',7:'',8:'',9:' ',10:''},refServiceOperationStatus:{1:' ',2:' ',3:'',4:' ',5:' '},refPhotoType:{1:'',2:'',3:'',4:'',5:''},refSaleOpers:{1:'Proposed',2:'Reserved',3:'Sold',4:'Demounted',19:'Temporary reserved',21:'Added to wish list',22:'Wish-list expired',20:'Reserv has expired'},appHeaderBtnFacesText:'Faces',appHeaderBtnCampaignsText:'Campaigns',appHeaderBtnMyCampaignsText:'My Campaigns',appHeaderBtnMonitoringText:'Monitoring',appHeaderBtnLoginText:'Login',appHeaderBtnLogoutText:'Logout',campCardtabInfoTitle:'Info',campCardtabSubjectsTitle:'Subjects',campCardtabLiningProgressTitle:'Lining Progress',campCardtabPhotosTitle:'Photos',campCardtabDocumentsTitle:'Documents',cartBtnCampaignText:'Add to campaign',colZone:'Zone',refSideZone:{1:'VIP',2:'Zone III',3:'Zone II',4:'Zone I',5:'VIP',6:'Zone IV'},authLoginErrorAlertTitle:'Local login error',authLoginErrorAlertText:'Login and/or password are incorrect',authSignupSuccessAlertTitle:'Signup request was sent',authSignupSuccessAlertText:'Please, check your email box for further instructions',authSignupErrorAlertTitle:'Local signup error',authSignupErrorAlertText:'Unfortunately, entered username is already exists. Please, try another username',authLoginFormTitle:"Let's Log In",authLoginFormSignToAccountText:'Sign into your account',authLoginFormLoginEmptyText:'Login',authLoginFormPasswordEmptyText:'Password',authLoginFormRememberMeLabel:'Remember me',authLoginFormForgotPasswordText:'Forgot Password?',authLoginFormLoginBtnText:'Login',authFormFieldSeparatorOR:'OR',authLoginFormFacebookBtnText:'Login with Facebook',authLoginFormSignupBtnText:'Create Account',authResetPasswordFormTitle:'Login by email',authResetPasswordEmailLabel:'Enter your email address to obtain security code',authResetPasswordFormResetBtnText:'Send code',authRegisterFormTitle:'User Registration',authRegisterFormCreateAccountLabel:'Create an account',authRegisterFormFullnameEmptyText:'Fullname',authRegisterFormOrgNameEmptyText:'Your organization',authRegisterFormLoginEmptyText:'Login',authRegisterFormPasswordEmptyText:'Password',authRegisterFormConfirmPasswordEmptyText:'Confirm password',authRegisterFormSignupBtnText:'Signup',dashboardPhotosReceivedTitle:'Photos Received',dashboardPhotorepExecutionTitle:'Photoreport Execution',dashboardProposalsTitle:'Proposals',dashboardProposalsModeLabel:'Mode',dashboardProposalsModeCitiesText:'Cities',dashboardProposalsModeSizetypesText:'Sizetypes',dashboardProposalsModeNetworksText:'Networks',dashboardProposalsModeRatingsText:'Ratings',dashboardProposalsModePeriodsText:'Periods',dashboardFilterText:'Filter',dashboardFilterCityEmptyText:'City',dashboardFilterNetworkEmptyText:'Network',dashboardFilterPeriodEmptyText:'Period',dashboardProposalsTooltipSidesText:'sides',dashboardSidesTitle:'Sides',dashboardServiceActivityTitle:'Service Activity',dashboardServiceOperationsTitle:'Service Operations',dashboardFilterCoverDateEmptyText:'Cover date',campaignsCreateNewCampaignText:'Create new campaign',campaignsWithCustomPeriodText:'with custom period',campCardInformationTitle:'Information',campCardOnWriteToast:'Campaign was saved',campCardSaveBtnText:'Save',campCardCancelBtnText:'Cancel',campCardCampaignNameEmptyText:"Campaign's name",campCardPeriodLabel:'Period',campCardAddPosterBtnText:'Add subject',colImage:'Image',colPosterName:'Name',colServiceStatus:'Status',colCoverDate:'Cover Date',colNote:'Note',colServicePhoto:'Photo',campCardPhotosExportToZip:'Export to Zip',colPhotoType:'Type',colDeadline:'Deadline',colPhoto:'Photo',verifyDateRangeText:'Start date must be less than end date',colDocNum:'Doc.No',colDocType:'Type',colDocStatus:'Status',colCreatedAt:'Created',colModifiedAt:'Modified',colDownload:'Download',campCardProposalsTitle:'Proposals',colStartDate:'StartDate',colEndDate:'EndDate',colProposalStatus:'Status',campCardProposalsConfirmDeleteTitle:'Confirm delete proposal',campCardProposalsConfirmDeleteMessage:'Are you sure?',campViewTitle:'Your campaigns',campViewSearchCampEmptyText:'Search campaign by name',campViewDeleteCampaignBtnText:'Delete campaign',campViewConfirmDeleteCampaignTitle:'Confirm delete campaign',campViewConfirmDeleteCampaignMessage:'Are you sure?',campViewDashboardTitle:'Dashboard',campViewDetailsTitle:'Details',detFaceTitle:'Face No.',detPosterTitle:'Subject',detMotinoringTitle:'Brand',detPosterNameLabel:'Name',detMonitoringBrandName:'Brand',detPosterSelectImageEmptyText:'Select an image',btnCancelText:'Cancel',btnSaveText:'Save',dlgAddToCampaignTitle:'Add sides to campaign',dlgAddToCampaignSelectTitle:'Select campaign',dlgAddToCampaignEditTitle:'Edit campaign',dlgAddToCampaignNameLabel:'Name',dlgAddToCampaignNameEmptyText:"Campaign's name",dlgAddToCampaignPeriodLabel:'Period of campaign',dlgAddToCampaignSetPeriodLabel:'Set period',fieldStartDateLabel:'Start Date',fieldEndDateLabel:'End Date',dlgAddToCampaignFinishTitle:'Finish',dlgAddToCampaignReadyText:'Everything is almost done. Press button to save changes and show campaign.',dlgAddToCampaignSaveBtnText:'Save changes',dlgLoginTitle:'Login',fieldLoginLabel:'Login',fieldPasswordLabel:'Password',fieldConfirmPasswordLabel:'Confirm password',dlgLoginSuccessToastText:'User data were updated.',dlgLoginErrorIsSignupAlertMsg:'You cannot use entered login bacause this login is already occupied. Try another name.',dlgLoginErrorAlertMsg:'Error occured. Operation has not performed',dlgLoginErrorAlertTitle:'Error',dlgUserInfoTitle:'User details',fieldFirstNameLabel:'First Name',fieldFirstNameEmptyText:'First Name',fieldLastNameLabel:'Last Name',fieldLastNameEmptyText:'Last Name',fieldCityLabel:'City',fieldCityEmptyText:'Select a city...',fieldAddressLabel:'Address',fieldAddressEmptyText:'Address',dlgUserInfoErrorTitle:'Error',dlgUserInfoErrorMsg:'Error occured during saving user data',dragImageTitle:"Image Drag'n'Drop",dragImageDropText:'Drop image here<br>or<br>Select file from disk by pressing button below',mapViewPointText:'Point',mapViewRouteText:'Route',mapViewPolygonText:'Polygon',mapViewCircleText:'Circle',mapViewBufferText:'Buffer (m)',profileUkraineText:'Ukraine',profileMemberSinceText:'Member since',profileChangeInfoBtnText:'Change info',profileAddFacebookBtnText:'Add Facebook account',profileAddLocalBtnText:'Add Local account',profileCreateLocalBtnText:'Create Local account',profileRemoveFacebookBtnText:'Remove Facebook account',userContainerSaveCampaignConfirmTitle:'Save Changes?',userContainerSaveCampaignConfirmMsg:'You are closing the campaign that has unsaved changes. Would you like to save your changes?',wizardPreviousBtnText:'Previous',wizardNextBtnText:'Next',varsLoggedOutToastText:'You were logged out.',refAB:{1:'A',2:'B'},refNetwork:{522:'Bus Shelter',487:'Citylight',488:'Scroll',489:'Backlight',490:'Bridge',491:'Nonstandard',492:'Prizmavision',493:'Board',541:'Digital'},refSidetype:{1:'Normal',2:'Prizmavision',3:'Lightbox',4:'Neon',5:'Scroll',6:'Smart panel',7:'Digital'},refSize:{1:'3x6',2:'Nonstandard',3:'3x12',4:'5x12',5:'3x4',6:'4x10',7:'4x8',8:'6x3',9:'1.5x2.4',10:'3x11',11:'2x5',12:'7x4',13:'1.2x1.8',14:'2.3x3.5',15:'6x12',26:'2x21',27:'2x24',28:'3x24',29:'1.5x6',20:'1.5x3',31:'1.2x3.6',32:'3x21',33:'3x18',34:'2.3x3.14',25:'3x3',35:'2.6x1.17',36:'8x4',37:'1.8x1.2',38:'2.097x1.263',39:'4x12',40:'2x16',41:'2x4',42:'2x8',43:'1.2x1.7',44:'2x3'},refCity:{1:'Kyiv',3:'Kharkiv',4:'Lviv',5:'Odessa',6:'Zaporizhya',10:'Dnipro',11:'Kryviy Rig',12:'Ivano-Frankivsk',13:'Lutsk',14:'Sumy',15:'Chenivtsi',19:'Kherson',20:'Khmelnitskiy',21:'Kremenchug',22:'Mykolayiv',23:'Poltava',24:'Rivne',25:'Ternopil',26:'Vinnytsya',29:'Zhitomir',30:'Kropyvnytskiy',31:'Uzhgorod',32:'Mariupil',33:'Kyiv Region',36:'Chernigiv',38:'Cherkassy',39:'Bila Tserkva',41:'Kramatorsk',42:'Konstantynivka',43:'Illichivsk',48:'Slavyansk',49:'Pokrovsk',50:'Pavlograd',51:'Kamyanske',54:'Kyiv Routes',56:'Boryspil',57:'Melitopol',58:'Kamianets-Podilskyi',59:'Berdiansk',60:'Chop',61:'Mukachevo',62:'Kalush',63:'Shepetivka',64:'Oleksandriia',65:'Kovel',66:'Drohobych',67:'Truskavets',69:'Berdychiv',70:'Lubny',71:'Romny',72:'Pryluky',73:'Svitlovodsk',74:'Bershad',75:'Bratslav',76:'Wapnyarka',77:'Hnyvan',78:'Zhmerynka',79:'Illyintsi',80:'Kalynivka',81:'Kryzhopil',82:'Ladyzhin',83:'Luka-Meleshkovska',84:'Mohyliv-Podilskii',85:'Orativ',86:'Pohrebische',87:'Tyvriv',88:'Tomashpil',89:'Trostyanets',90:'Tulchyn',91:'Turbov',92:'Shargorod',93:'Shpykiv',94:'Bezpillya',95:'Borislav',96:'Brody',97:"Varash (Kuznetsovs'k)",98:'Dubno',99:'Zdolbuniv',100:'Kolomiya',101:'Korosten',102:'Kremenets',103:'Lviv Routes',104:'Malin',105:'Mogiliv-Podilsky',106:'Nikopol',107:'Nova Kakhovka',108:'Novovolynsk',109:'Odessa Routes',110:'Piryatin',111:'Putivl',112:'Rava-Ruska',113:'Sarni',114:'Smila',115:'Khorol',116:'Chervonograd',117:'Tyachiv',118:'Beregovo',119:'Bilopillya',120:'Lebedyn',121:'Nedrygayliv',122:'Okhtyrka',123:'Shostka',124:'Korostyshiv',126:'Chortkiv',128:'Bakhmut',129:'Lysychansk',130:'Pokrovsk',131:'Severodonetsk',132:'Stryy',133:'Morshyn',134:'Sambir',135:'Slavske',136:'Marhanets',138:'Vilnohirsk',139:'Vasylkivka',140:'Kharkiv routes',141:'Slavuta',142:'Khmelnitsky routes',143:'Tysmenytsya',144:'Bukovell',145:'Yaremche',146:'Nadvirna',147:'Bohorodchany',148:'Bolehiv',149:'Burshtyn',150:'Ivano-Frankivsk routes',151:'Halych',152:'Dolyna',153:'Rogatyn',154:'Kosiv',155:'Snyatyn',156:'Horodenka',157:'Vorokhta',158:'Slavutych',159:'Nizhyn',160:'Verkhovyna',161:'Tlumach',162:'Horyshni Plavni',163:'Poltava routes',167:'Vyshgorod',168:'Sofiivska Borschahivka',176:'Pershotravnevsk',177:'Izum',178:'Kreminna',179:'Vasylkiv',180:'Irpin',181:'Vyshneve',182:'Uman',183:'Izmayil',184:'Velykodolynske',185:'Mala Dolyna',186:'Koblevo',187:'Balta',188:'Bilohorodka',189:'Petropavlivska Borschahivka',190:'Boyarka',191:'Bucha',192:'Hostomel'},refPoiCategory:{1:' ',2:'HiFi ',3:'',4:', ',6:'',10:'',11:'',12:'',13:'',14:' ',15:'',16:'',17:' ',18:'',19:' ',162:'',163:'',164:'',165:', ',166:'',167:'',168:'',169:'',170:'',171:',  ',173:'',174:'  ',175:' ',176:' Lux',177:'',178:'',179:' , ',180:'',181:'   ',182:'  ',183:' ',184:'',185:'',186:'  ',187:' ',188:'',189:', ',190:', ',191:'  ',192:'',193:'',194:' ',195:'',196:' ',197:' ,   ',198:'',199:'',200:'',201:', ',202:' ',203:'',204:',  ',205:'',206:'-',207:'',208:'',209:'',210:' ',211:'',212:', ',213:'',214:'',215:'',216:', ',217:' ',218:', , , ',219:',  ',220:'   ',221:'',222:', ',223:'',224:'',225:'',226:' ',227:'',228:' ',229:'',230:', ',231:'',232:' ',233:'',234:'',235:' ',236:'',237:'',238:'',239:'  ()',240:' ',241:' ',242:' ',243:' ',244:' ',245:' ',246:'',247:'  ',248:'',249:'',250:' ',251:' ',252:'',253:'-',254:' ',255:'',256:' ',257:' ',258:'  ',259:' , , ',260:' ',261:' ',262:'',263:'',264:'',265:'/',266:'',267:'',268:'',269:'',270:'',271:'  ',272:'/ ',273:'/ ',274:' ',275:' ',276:'-',277:'',278:'',279:' ',280:', ',281:' ()',282:'',283:'',284:' ',285:'',286:'',287:'',288:'',289:' ',290:'',291:'-',292:' ',293:' ',294:'',295:'',296:' ',297:'',298:' ',299:'',300:'',301:' '},authLoginByCodeTitle:'Log in by code',authLoginByCodeEnterCodeLabel:'Code from email',authLoginByCodeEnterCodeEmptyText:'Paste code from email here',authLoginByCodeErrorTitle:'Error',authLoginByCodeErrorMsg:'You entered the wrong code. Do you want to resend a new request?',authPasswordResetErrorTitle:'Error',authPasswordResetErrorMsg:'Entered email not found in the database.',dlgChangePasswordTitle:'Change password',dlgChangePasswordSuccessToastText:'New password saved',dlgChangePasswordErrorAlertTitle:'Error',dlgChangePasswordErrorAlertMsg:'Operation has not performed',profileChangePasswordBtnText:'Change password',filterByNumber:'By number',dlgFilterByNumberTitle:'Filter by number',dlgFilterByNumberSearchColumnsLabel:'Search in columns',dlgFilterByNumberSideNoLabel:'SideNo',dlgFilterByNumberDoorsNoLabel:'DoorsNo',dlgFilterByNumberNameEmpty:'Filter name',dlgFilterByNumberNumbersEmpty:'Enter numbers with any delimiter: space, new line, semicolon, comma etc.',dlgFilterByNumberDefaultFilterName:'Filter #',dlgFilterByNumberFilterDescr:'Numbers: ',colLight:'Light',campCardtabPresentationTitle:'Presentation',campCardPresentationCreateBtn:'Create new',campCardPresentationOpenBtn:'Open',campCardPresentationEditBtn:'Edit',campCardPresentationCloseBtn:'Close access',campCardPresentationCloseConfirmTitle:'Close access to the presentation?',campCardPresentationCloseConfirmText:"You are closing access to the presentation for clients, but you will be able to see user's reaction. Are you sure?",campCardPresentationCloseToastTitle:'Data saved',campCardPresentationCloseToastText:'Access to the presentation has been closed',campCardPresentationOpenAccessBtn:'Open access',campCardPresentationOpenAccessConfirmTitle:'Open access to the presentation?',campCardPresentationOpenAccessConfirmText:'You are opening access to the presentation for clients. Are you sure?',campCardPresentationOpenAccessToastTitle:'Data saved',campCardPresentationOpenAccessToastText:'Presentation has been opened',campCardLinkSubjectBtn:'Link subject',exportServicePhotoText:'Service photo',colCusomerNote:"Customer's note",colPrice:'Price',colNote:'Note',campCardPresentationInviteBtn:'Send invitation',campCardPresentationInvitationSentTitle:'Invitation was sent',campCardPresentationInvitationSentText:'Email with link to the presentation was sent successfully',campCardPresentationInviteOpenAccessConfirmTitle:'Access to the presentation',campCardPresentationInviteOpenAccessConfirmText:'You cannot send invitation because the presentation is closed. Do you want to open it for your clients?',dlgImportPricesTitle:'Import prices',dlgImportPricesBindingColumnLabel:'Binding column',dlgImportPricesDataEmptyText:'Input data here in format: [BindingColumnValue][delimiter][PriceValue], where [delimiter] - any non alphanumeric symbols (space, tab, semicolon, colon, etc.)',btnImportText:'Import prices',campCardThirdPartyTabTitle:'Third party',campCardImportThirdPartyBtnText:'Import third-party boards',colSupplier:'Supplier',dlgImportThirdPartyFacesTitle:"Import third-party boards by Doors's numbers",dlgImportThirdPartyFacesPeriod:'Custom period of advertising campaign',dlgImportThirdPartyFacesNumbersEmptyText:"Input here Doors's numbers with any delimiter space, tab, semicolon, colon or enter each number from new line",btnImportThirdPartyText:'Import',tabFacesTitle:'Faces',tabCartTitle:'Cart',mapFacePopupSelectedLabel:'Selected',campViewFromDateLabel:'From date',dlgImportThirdPartyTitle:'Import third-party boards',dlgImportThirdPartyNumbersEmpty:"Paste here columns from Excel: Doors numbers and vendor' prices",btnSendText:'Send',dlgGiveMePromoCode:{title:'Get discount!',descrText:'Special promo code lets you have a discount from full price. Fill the form below to get a promo code.',nameLabel:'Your Name',emailLabel:'Your Email Address',orgLabel:'Your company',messageLabel:'Message',successTitle:'Thank you!',successText:'Your inquiry has been sent. We will respond as soon as possible.'},dlgAutoSelectFaces:{title:"Campaign's planner",wpPeriodTitle:'Campaign period',wpCitiesTitle:'Cities',additParameters:'Additional tuning',maxOnStreetLabel:'Maximum boards on the one street',minDistanceOnStreetLabel:'Minimum distance between boards on the street (meters)',minDistanceLabel:'Minimum distance between any boards (meters)',wpBudgetTitle:'Budget',planBudgetLabel:'Budget (UAH)',planBoardsLabel:'Max. boards count',promoCodeLabel:'Promo code',wpStartTitle:'Start',wpStartText:'Press "Next" to get variants of advertising campaign you want',wpResultTitle:'Result',smileTipText:{frown:'This code is a discount. Press here to get it',meh:'Your code is invalid. Please, use clipboard to prevent errors during typing',smile:'Congratulations! You have valid discount now'},btnStartSelectText:'Start planning',planCoverageLabel:'Coverage (%)',descrSelectedCampaignHtml:'<h3>You have chosen campaign with following properties: <ul><li>Boards: <b>{0}<b>.</li><li>Budget: <b>{1}</b> UAH.</li><li>Coverage: {2}% </li></ul></h3>',wpCampStat:'Statistics',wpAddToCampaign:'Save changes',mbBulkAddFacesToCampaign:'Save faces to campaign',mbBulkAddFacesToCampaignProgress:'Saving data...',multiselectGridTitle:'Splits by {0} for {1}',multiselectLimitsBySizesTitle:'Limits by sizes for ',startFromBlankBtnText:'Blank campaign',startFromBlankDescr:'Start from scratch.',startFromCartBtnText:'Extend cart',startFromCartDescr:'Extend your shopping cart. All boards in cart will be added as initial campaign for planning process. You can not use it until shopping cart is empty.',startFromCampaignBtnText:'Improve campaign',startFromCampaignDescr:"Select campaign from the list below. Planner will try to reach your goals that you'll enter on the next pages.",addThirdPartyTitle:'Third-party suppliers',addThirdPartyDescr:"You can add boards of other suppliers that exist in Doors&trade;. We don't collect data such occupancy and prices of third-party boards, so you have to obtain such information manually from your own sources. If you will add boards you could edit prices directly in the grid.",splitsTitle:'Splits',colLimits:'Limit (pcs)',colProgress:'Progress',planningInProgress:'Planning in progress ...',mediaPlan:'Media Plan',charts:'Charts',campaignNameEmptyText:"Enter campaign's name",createCampaignDescr:'Create new campaign.',createCampaignBtnText:'Create new campaign',saveToCampaignDescr:'Add faces to existed campaign',saveToCampaignBtnText:'Save to campaign',rgDiscountTypeLabel:'Discount type',discountForBigmediaLabel:'Fixed discount for all Bigmedia',flexibleDiscountLabel:'Flexible discount',fixedDiscountLabel:'Fixed discount (%)',selectDiscountGroup:'Select group',manageGroups:'Discount builder'},headerAutoPlanBtnText:"Campaign's Planner",simpleResult:{descrVariantsText:'Choose one of this alternatives and press "Next" to add boards to cart. Press "Back" if you want change options.',btnMinPriceName:'<b>Min. price</b>',btnOptimumName:'<b>Optimum</b>',btnDescription:'<b>{0}</b> boards, OTS<sub>sum</sub>: <b>{1}</b><br>Coverage: <b>{2}%</b>, CPT: <b>{3}</b><br>Budget: <b>{4}</b>',btnMaxCoverageName:'<b>Max. coverage</b>',tabListMapTitle:'List & Map',tabCoverageTitle:'Coverage',tabChartsTitle:'Charts',tabMediaPlanTitle:'Media Plan'},occupancyTooltip:{r:'Sold',t:'Reserved',s:'Sold',f:'Free',d:'Demounted'},gridBtnShowOccupancyText:'Show occupancy',gridBtnRemoveSidesText:'Remove',dashboardFilterSidetypeEmptyText:'Face type',dashboardProposalsModeSidetypesText:'Face types',dashboardProposalsModeSuppliersText:'Suppliers',mapBtnReplacementText:'Replacement Mode',mapBtnCoverageText:'Coverage',dlgReplaceTitle:'Replacement offer',refSupplierSidetype:{'':'Lightbox','':'Neon','':'Scroll',' ':'Smart panel','':'Prizmavision','':'Bridge','_':'Digital','':'Shelter','':'Unipole','_':'PLight','':'Backlight','':'Trihedron','':'Board','':'Stand','':'Flex','':'Kiosk','':'Monitor','':'Quadrahedron','':'Pylon','':'Stella','':'Arch','-':'Citylight','_':'Scroll_O','':'Pillar','':'Troll'},refSupplier:{1:'BIGMEDIA',20410:'Dneprovision',20509:'SV Outdoor',20575:'Luvers',20562:'Sean',20506:'Bioforce',20512:'Halytski Kontrakty',20582:'SAS',20583:'Vial Media',20586:'Bona Mente',20588:'A-Petrol',20591:'Perekhid Outdoor',20605:'Naruzhka',20685:'RTM-Ukraine',20777:'Commerce Evolution',20754:'Reklama Servis',21605:'ZGIA',21639:'Eliziya',21657:'Gold Future',23168:'Dovira Outdoor',23288:'CITY-RTM',23349:'Alkhor Outdoor',23562:'ST-Reklama',23730:'Boomerang',24377:'Billboard',24384:'Fabrika Reklamy',24410:'Wild West',24818:'KRASH',25124:'Bordy Ukraini Media',25957:'Technopark',25969:'Boyko',25979:'Big-Info',26377:'Art Radio',26529:'Namenanik',28516:'IDMedia',28590:'Media Group'},refDiscountType:{'fixedPricePerMonth':'Fixed Price per month (UAH)','fixedPricePerDay':'Fixed Price per day (UAH)','fixedPricePerWeek':'Fixed Price per week (UAH)','fixedPricePerTwoWeeks':'Fixed Price per 2 weeks (UAH)','fixedDiscount':'Discount (UAH)','percentDiscount':'Discount (%)'},refMarginType:{'zeroMarkup':"Don't use margin",'fixedMarkup':'Markup (UAH)','percentMarkup':'Markup (%)','percentMargin':'Margin (%)'},refMarginRoundType:{'ceilBy100':'Ceil by 100','ceilBy50':'Ceil by 50','withoutRound':'Without rounding'},discountBuilder:{descrSuppliers:'Suppliers',descrCities:'Cities',descrSizes:'Sizes',descrTypes:'Types',appliedConditions:'Applied conditions',forAll:'For all',dlgEditRuleTitle:'Edit discount rule',selSuppliersLabel:'Select suppliers',selCitiesLabel:'Select cities',selSizesLabel:'Select sizes',selTypesLabel:'Select types',discountTypeLabel:'Discount type',discountValueLabel:'Value',dlgEditGroupsTitle:'Discount Builder',rulesForTitle:'Rules for ',addGroupText:'Add group',importGroupsText:'Import groups',saveToFileText:'Save to file',colGroupName:'Group name',btnDeleteText:'Delete',newGroupName:'New Group',msgRemoveRuleTitle:'Remove rule',msgRemoveText:'Are you sure?',msgRemoveGroupTitle:'Remove group',addRuleTitle:'Add discount rule',dlgImportGroupsTitle:'Import groups from file',colCondition:'Condition',colValue:'Value',dlgImportRulesTitle:'Import rules from groups',btnCopyRulesFromTooltip:'Copy rules from existed groups',btnAddRuleTooltip:'Add new rule',btnEditRuleTooltip:'Edit rule',btnDeleteRuleTooltip:'Delete rule'},profileSelectDefaultDiscountLabel:'Select default discount group to get actual prices',profileManageGroupsText:'Discount builder',colOriginalNo:'Original No',exportExcelPhotoText:'Photo',exportExcelSchemaText:'Schema',colCityRegion:"City's region"});Ext.onReady(function(){if(Ext.util&&Ext.util.Format){Ext.apply(Ext.util.Format,{thousandSeparator:'&nbsp;',decimalSeparator:'.',currencySign:'',dateFormat:'d.m.Y'})}Ext.util.Format.currencySign='';Ext.Date.defaultFormat='d.m.Y'});Ext.define('Bigmedia.lib.AdvancedVType',{override:'Ext.form.field.VTypes',daterange:function(e,a){var b=a.parseDate(e);if(!b){return !1}if(a.startDateField&&(!this.dateRangeMax||b.getTime()!=this.dateRangeMax.getTime())){var c=a.up('form').down('#'+a.startDateField);c.setMaxValue(b);c.validate();if(a.endDateField){var d=a.up('form').down('#'+a.endDateField);if(d){d.validate()}}this.dateRangeMax=b}else {if(a.endDateField&&(!this.dateRangeMin||b.getTime()!=this.dateRangeMin.getTime())){var d=a.up('form').down('#'+a.endDateField);d.setMinValue(b);d.validate();if(a.startDateField){var c=a.up('form').down('#'+a.startDateField);if(c){c.validate()}}this.dateRangeMin=b}}return !0},daterangeText:Bigmedia.Locales.verifyDateRangeText,password:function(c,a){if(a.initialPassField){var b=a.up('form').down('#'+a.initialPassField);return b&&c==b.getValue()}return !0},passwordText:Bigmedia.Locales.dlgRegisterPasswordsErrMsg});Ext.define('Ext.util.ClickRepeater',{alternateClassName:'Ext.util.TapRepeater',mixins:[Ext.mixin.Observable],config:{el:null,target:null,disabled:null},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,handler:null,scope:null,constructor:function(a){var b=this;if(arguments.length===2){b.setEl(a);a=arguments[1]}b.mixins.observable.constructor.call(this,a)},destroy:function(){this.setEl(null);this.callParent()},privates:{fireClick:function(b){var a=this;a.fireEvent('click',a,b);Ext.callback(a.handler,a.scope,[a,b],0,a.getTarget())},updateDisabled:function(b){var a=this;if(b){a.savedEl=a.getEl();a.setEl(null)}else {if(a.savedEl){a.setEl(a.savedEl)}}},updateTarget:function(a){this.setEl(a.el)},updateEl:function(c,d){var a=this,b;if(d){d.selectable();Ext.undefer(a.timer);if(a.pressedCls){d.removeCls(a.pressedCls)}Ext.getDoc().un('mouseup',a.handleMouseUp,a);a.elListeners=Ext.destroy(a.elListeners)}if(c){c.unselectable();b={mousedown:a.handleMouseDown,scope:a,destroyable:!0};if(a.preventDefault||a.stopDefault){b.click=a.eventOptions}a.elListeners=c.on(b)}},eventOptions:function(a){if(this.preventDefault){a.preventDefault()}if(this.stopDefault){a.stopEvent()}},handleMouseDown:function(b){var a=this,c=a.getEl();Ext.undefer(a.timer);if(a.pressedCls){c.addCls(a.pressedCls)}a.mousedownTime=Ext.now();if(b.pointerType==='mouse'){c.on('mouseout',a.handleMouseOut,a)}Ext.getDoc().on('mouseup',a.handleMouseUp,a);a.fireEvent('mousedown',a,b);a.fireClick(b);if(a.accelerate){a.delay=400}a.timer=Ext.defer(a.click,a.delay||a.interval,a,[b]);if(a.mousedownPreventDefault){b.preventDefault()}if(a.mousedownStopEvent){b.stopEvent()}},click:function(b){var a=this;a.fireClick(b);a.timer=Ext.defer(a.click,a.accelerate?a.easeOutExpo(Ext.now()-a.mousedownTime,400,-390,12000):a.interval,a,[b])},easeOutExpo:function(d,a,b,c){return d===c?a+b:b*(-Math.pow(2,-10*d/c)+1)+a},handleMouseOut:function(){var a=this,b=a.getEl();Ext.undefer(a.timer);if(a.pressedCls){b.removeCls(a.pressedCls)}b.on('mouseover',a.handleMouseReturn,a)},handleMouseReturn:function(c){var a=this,b=a.getEl();b.un('mouseover',a.handleMouseReturn,a);if(a.pressedCls){b.addCls(a.pressedCls)}a.click(c)},handleMouseUp:function(c){var a=this,b=a.getEl();Ext.undefer(a.timer);b.un('mouseover',a.handleMouseReturn,a);b.un('mouseout',a.handleMouseOut,a);Ext.getDoc().un('mouseup',a.handleMouseUp,a);if(a.pressedCls){b.removeCls(a.pressedCls)}a.fireEvent('mouseup',a,c)}}});Ext.define('Ext.form.trigger.Trigger',{alias:'trigger.trigger',mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:'trigger'},repeatClick:!1,hidden:!1,hideOnReadOnly:undefined,tooltip:null,weight:0,preventMouseDown:!0,focusOnMousedown:!1,baseCls:Ext.baseCSSPrefix+'form-trigger',focusCls:Ext.baseCSSPrefix+'form-trigger-focus',overCls:Ext.baseCSSPrefix+'form-trigger-over',clickCls:Ext.baseCSSPrefix+'form-trigger-click',validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>','<tpl if="ariaRole"> role="{ariaRole}"<tpl else> role="presentation"</tpl>','>','{[values.$trigger.renderBody(values)]}','</div>'],constructor:function(c){var a=this,b;Ext.apply(a,c);if(a.compat4Mode){b=a.cls;a.focusCls=[a.focusCls,b+'-focus'];a.overCls=[a.overCls,b+'-over'];a.clickCls=[a.clickCls,b+'-click']}},afterFieldRender:function(){var a=this,b=a.tooltip;a.initEvents();if(b){a.tooltip=null;a.setTooltip(b)}},destroy:function(){var a=this;a.clickRepeater=a.el=Ext.destroy(a.clickRepeater,a.el);a.callParent()},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var b=this,a=b.el;b.hidden=!0;if(a){a.hide()}},initEvents:function(){var a=this,b=a.isFieldEnabled,c=a.getStateEl(),d=a.el;c.addClsOnOver(a.overCls,b,a);c.addClsOnClick(a.clickCls,b,a);if(a.repeatClick){a.clickRepeater=new Ext.util.ClickRepeater(d,{preventDefault:!0,handler:a.onClick,listeners:{mousedown:a.onClickRepeaterMouseDown,mouseup:a.onClickRepeaterMouseUp,scope:a},scope:a})}else {a.field.mon(d,{click:a.onClick,mousedown:a.onMouseDown,scope:a})}},isFieldEnabled:function(){return !this.field.disabled},isVisible:function(){var a=this,c=a.field,b=!1;if(a.hidden||!c||!a.rendered||a.destroyed){b=!0}return !b},onClick:function(){var a=this,c=arguments,e=a.clickRepeater?c[1]:c[0],d=a.handler,b=a.field;if(d&&!b.readOnly&&a.isFieldEnabled()){Ext.callback(a.handler,a.scope,[b,a,e],0,b)}},resolveListenerScope:function(a){return this.field.resolveSatelliteListenerScope(this,a)},onMouseDown:function(a){if(a.pointerType!=='touch'&&(!this.field.containsFocus||this.focusOnMousedown)){this.field.focus()}if(this.preventMouseDown){a.preventDefault()}},onClickRepeaterMouseDown:function(b,a){if(!a.parentEvent||a.parentEvent.type==='mousedown'){this.field.inputEl.focus()}a.preventDefault()},onClickRepeaterMouseUp:function(d,c){var a=this,b=a.field;Ext.callback(a.endHandler,a.scope,[b,a,c],0,b)},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){var a=this,b=a.el=a.field.triggerWrap.selectNode('#'+a.domId,!1);b.setVisibilityMode(Ext.Element.DISPLAY);a.rendered=!0},renderBody:function(b){var a=this,c=a.bodyTpl;Ext.apply(b,a.getBodyRenderData());return c?Ext.XTemplate.getTpl(a,'bodyTpl').apply(b):''},renderTrigger:function(b){var a=this,d=a.width,c=a.hidden?'display:none;':'';if(d){c+='width:'+d}return Ext.XTemplate.getTpl(a,'renderTpl').apply({$trigger:a,fieldData:b,ui:b.ui,childElCls:b.childElCls,triggerId:a.domId=a.field.id+'-trigger-'+a.id,cls:a.cls,triggerStyle:c,extraCls:a.extraCls,baseCls:a.baseCls,ariaRole:a.ariaRole})},setHidden:function(a){if(a!==this.hidden){this[a?'hide':'show']()}},setTooltip:function(a){var b=this,c=b.el,d=b.tooltip;if(a!==d){b.tooltip=a;if(c){c.dom.setAttribute('data-qtip',Ext.htmlEncode(a))}}},setVisible:function(a){this.setHidden(!a)},show:function(){var b=this,a=b.el;b.hidden=!1;if(a){a.show()}}});Ext.define('Ext.util.TextMetrics',{statics:{shared:null,measure:function(d,e,c){var b=this,a=b.shared||(b.shared=new b(d,c));a.bind(d);a.setFixedWidth(c||'auto');return a.getSize(e)},destroy:function(){this.shared=Ext.destroy(this.shared)}},constructor:function(b,a){var c=this,d=c.measure=Ext.getBody().createChild({role:'presentation',cls:Ext.baseCSSPrefix+'textmetrics',style:{position:'absolute',left:'-1000px',top:'-1000px',visibility:'hidden'}});if(b){c.bind(b)}if(a){d.setWidth(a)}},getSize:function(c){var a=this.measure,b;a.setHtml(c);b=a.getSize();a.setHtml('');return b},bind:function(a){this.measure.setStyle((this.el||(this.self.prototype.el=new Ext.dom.Fly())).attach(a).getStyle(['font-size','font-size-adjust','font-style','font-weight','font-family','font-kerning','font-stretch','line-height','text-transform','text-decoration','letter-spacing','word-break']))},setFixedWidth:function(a){this.measure.setWidth(a)},getWidth:function(a){this.measure.dom.style.width='auto';return this.getSize(a).width},getHeight:function(a){return this.getSize(a).height},destroy:function(){var a=this;a.el=a.measure=Ext.destroy(a.measure);a.callParent()}},function(){Ext.Element.override({getTextWidth:function(a,c,b){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(a,this.dom.innerHTML,!0)).width,c||0,b||1000000)}})});Ext.define('Ext.form.field.Text',{extend:Ext.form.field.Base,alias:'widget.textfield',alternateClassName:['Ext.form.TextField','Ext.form.Text'],componentLayout:'textfield',config:{hideTrigger:!1,autoHideInputMask:null,inputMask:null,triggers:undefined},renderConfig:{editable:!0},growMin:30,growMax:800,allowBlank:!0,validateBlank:!1,allowOnlyWhitespace:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:'The minimum length for this field is {0}',maxLengthText:'The maximum length for this field is {0}',blankText:'This field is required',regexText:'',emptyText:'',emptyCls:Ext.baseCSSPrefix+'form-empty-field',placeholderCoverCls:Ext.baseCSSPrefix+'placeholder-label',requiredCls:Ext.baseCSSPrefix+'form-required-field',ariaRole:'textbox',repeatTriggerClick:!1,triggerWrapCls:Ext.baseCSSPrefix+'form-trigger-wrap',triggerWrapFocusCls:Ext.baseCSSPrefix+'form-trigger-wrap-focus',triggerWrapInvalidCls:Ext.baseCSSPrefix+'form-trigger-wrap-invalid',fieldBodyCls:Ext.baseCSSPrefix+'form-text-field-body',inputWrapCls:Ext.baseCSSPrefix+'form-text-wrap',inputWrapFocusCls:Ext.baseCSSPrefix+'form-text-wrap-focus',inputWrapInvalidCls:Ext.baseCSSPrefix+'form-text-wrap-invalid',growCls:Ext.baseCSSPrefix+'form-text-grow',heightedCls:Ext.baseCSSPrefix+'form-text-heighted',emptyClsElements:null,needArrowKeys:!0,childEls:['triggerWrap','inputWrap','placeholderLabel'],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap"','<tpl if="ariaEl == \'triggerWrap\'">','<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>','<tpl else>',' role="presentation"','</tpl>',' class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap"',' role="presentation" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:['<tpl if="!Ext.supports.Placeholder">','<label id="{cmpId}-placeholderLabel" data-ref="placeholderLabel" for="{id}" class="{placeholderCoverCls} {placeholderCoverCls}-{ui}">{placeholder}</label>','</tpl>','</div>','<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>','</div>'],initComponent:function(){var a=this,b=a.emptyCls;if(a.allowOnlyWhitespace===!1){a.allowBlank=!1}if(a.grow){a.liquidLayout=!1}if(a.size){a.defaultBodyWidth=a.size*6.5+20}if(!a.onTrigger1Click){a.onTrigger1Click=a.onTriggerClick}a.callParent();if(a.readOnly){a.setReadOnly(a.readOnly)}a.fieldFocusCls=a.baseCls+'-focus';a.emptyUICls=b+' '+b+'-'+a.ui;a.addStateEvents('change')},initEvents:function(){var a=this,b=a.inputEl;a.callParent();if(a.maskRe||a.vtype&&a.disableKeyFilter!==!0&&(a.maskRe=Ext.form.field.VTypes[a.vtype+'Mask'])){a.mon(b,'keypress',a.filterKeys,a)}if(a.enableKeyEvents){a.mon(b,{scope:a,keyup:a.onKeyUp,keydown:a.onKeyDown,keypress:a.onKeyPress,paste:a.onPaste})}},isEqual:function(a,b){return this.isEqualAsString(a,b)},onChange:function(c,d){var a=this,b=a.getInputMask();a.callParent([c,d]);a.autoSize();if(b){b.onChange(a,c,d)}},getSubTplData:function(g){var a=this,f=a.getRawValue(),h=a.emptyText&&f.length<1,b=a.maxLength,e,d,c;if(a.enforceMaxLength){if(b===Number.MAX_VALUE){b=undefined}}else {b=undefined}if(a.emptyText){e=Ext.String.htmlEncode(a.emptyText)}d=Ext.apply(a.callParent([g]),{triggerWrapCls:a.triggerWrapCls,inputWrapCls:a.inputWrapCls,placeholderCoverCls:a.placeholderCoverCls,triggers:a.orderedTriggers,maxLength:b,readOnly:!a.editable||a.readOnly,placeholder:e,value:f,fieldCls:a.fieldCls+(a.allowBlank?'':' '+a.requiredCls)+(h?' '+a.emptyUICls:'')});c=d.inputElAriaAttributes;if(c){c['aria-required']=!a.allowBlank}return d},beforeRender:function(){var a=this,b;b=a.height!=null||a.minHeight!=null||!!(a.ownerLayout&&a.ownerLayout.getItemSizePolicy(a,a.fakeSizeModel).setsHeight);if(b){a.protoEl.addCls(a.heightedCls)}a.callParent()},onRender:function(){var a=this,b=a.getTriggers(),c=[],d;if(Ext.supports.FixedTableWidthBug){a.el._needsTableWidthFix=!0}a.callParent();a.emptyClsElements=[a.inputEl];if(b){a.invokeTriggers('onFieldRender');for(d in b){c.push(b[d].el)}a.triggerEl=a.triggerCell=new Ext.CompositeElement(c,!0)}a.inputCell=a.inputWrap;a.refreshEmptyText()},onResize:function(e,d,c,b){var a=this;if(a.rendered&&a.grow){a.autoSize()}a.callParent([e,d,c,b])},afterRender:function(){this.callParent();this.invokeTriggers('afterFieldRender')},onBoxReady:function(c,b){var a=this;a.callParent([c,b]);if(!a.liquidLayout){this.autoSize()}},applyInputMask:function(b,d){var a=Ext.field,c=a&&a['InputMask'];return b?c.from(b,d):null},applyTriggers:function(c){var a=this,j=a.getHideTrigger(),k=a.readOnly,f=a.orderedTriggers=[],i=a.repeatTriggerClick,e,b,h,g,d;if(!c){c={};if(a.triggerCls&&!a.trigger1Cls){a.trigger1Cls=a.triggerCls}for(d=1;g=a['trigger'+d+'Cls'];d++){c['trigger'+d]={cls:g,extraCls:Ext.baseCSSPrefix+'trigger-index-'+d,handler:'onTrigger'+d+'Click',compat4Mode:!0,scope:a}}}for(e in c){if(c.hasOwnProperty(e)){b=c[e];b.field=a;b.id=e;if(k&&b.hideOnReadOnly!==!1||j&&b.hidden!==!1){b.hidden=!0}if(i&&b.repeatClick!==!1){b.repeatClick=!0}h=c[e]=Ext.form.trigger.Trigger.create(b);f.push(h)}}Ext.sortByWeight(f);return c},invokeTriggers:function(d,e){var f=this,a=f.getTriggers(),c,b;if(a){for(c in a){if(a.hasOwnProperty(c)){b=a[c];b[d].apply(b,e||[])}}}},getTrigger:function(a){return this.getTriggers()[a]},updateMinHeight:function(a,b){this.callParent([a,b]);this.toggleCls(Ext.baseCSSPrefix+'has-min-height',!!a)},updateInputMask:function(b,a){if(a){a.release()}if(b){this.enableKeyEvents=!0}},updateHideTrigger:function(a){this.invokeTriggers(a?'hide':'show')},updateEditable:function(a,b){this.setReadOnlyAttr(!a||this.readOnly)},setReadOnly:function(b){var a=this,d=a.getTriggers(),f=a.getHideTrigger(),c,e;b=!!b;a.callParent([b]);if(a.rendered){a.setReadOnlyAttr(b||!a.editable)}if(d){for(e in d){c=d[e];if(c.hideOnReadOnly===!0||c.hideOnReadOnly!==!1&&!f){c.setVisible(!b)}}}},setReadOnlyAttr:function(c){var a=this,b='readonly',d=a.inputEl.dom;if(c){d.setAttribute(b,b)}else {d.removeAttribute(b)}if(!a.ariaStaticRoles[a.ariaRole]){a.inputEl.dom.setAttribute('aria-readonly',!!c)}},processRawValue:function(c){var e=this,a=e.stripCharsRe,d,b;if(a){if(!a.global){d='g';d+=a.ignoreCase?'i':'';d+=a.multiline?'m':'';a=new RegExp(a.source,d)}b=c.replace(a,'');if(b!==c){e.setRawValue(b);if(e.lastValue===c){e.lastValue=b}c=b}}return c},onDisable:function(){this.callParent();if(Ext.isIE){this.inputEl.dom.unselectable='on'}},onEnable:function(){this.callParent();if(Ext.isIE){this.inputEl.dom.unselectable=''}},onKeyDown:function(c){var a=this,b=a.getInputMask();if(b){b.onKeyDown(a,a.getValue(),c)}this.fireEvent('keydown',this,c)},onKeyUp:function(a){this.fireEvent('keyup',this,a)},onKeyPress:function(c){var a=this,b=a.getInputMask();if(b){b.onKeyPress(a,a.getValue(),c)}a.fireEvent('keypress',a,c)},onPaste:function(c){var a=this,b=a.getInputMask();if(b){b.onPaste(a,a.getValue(),c)}a.fireEvent('paste',a,c)},getEmptyText:function(){return this.emptyText},setEmptyText:function(a){var b=this,c=b.inputEl;a=a||'';b.emptyText=a;if(b.rendered){if(Ext.supports.Placeholder&&!b.simulatePlaceholder){if(a){c.dom.setAttribute('placeholder',a)}else {c.dom.removeAttribute('placeholder')}}else {b.placeholderLabel.setHtml(a)}b.refreshEmptyText()}return this},afterFirstLayout:function(){var a;this.callParent();if(Ext.isIE&&this.disabled){a=this.inputEl;if(a){a.dom.unselectable='on'}}},toggleInvalidCls:function(a){var b=a?'addCls':'removeCls';this.callParent([a]);this.triggerWrap[b](this.triggerWrapInvalidCls);this.inputWrap[b](this.inputWrapInvalidCls)},onFieldMutation:function(a){this.refreshEmptyText();this.callParent([a])},refreshEmptyText:function(){var a=this,f=a.inputEl,e=a.emptyClsElements,d,c,b;if(f){d=a.getValue();c=!(f.dom.value||Ext.isArray(d)&&d.length);if(a.placeholderLabel){a.placeholderLabel.setDisplayed(c)}for(b=0;b<e.length;b++){e[b].toggleCls(a.emptyUICls,c)}}},setValue:function(a){a=this.callParent([a]);this.refreshEmptyText();return a},onFocus:function(f){var a=this,b=a.inputEl.dom,c=a.getInputMask(),d,e;a.callParent([f]);if(a.emptyText){a.autoSize()}if(c){c.onFocus(a,b.value)}a.addCls(a.fieldFocusCls);a.triggerWrap.addCls(a.triggerWrapFocusCls);a.inputWrap.addCls(a.inputWrapFocusCls);a.invokeTriggers('onFieldFocus',[f]);if(a.selectOnFocus&&document.activeElement===b){d=b.value;e=d.length;Ext.asap(a.selectText,a,[0,e])}},onBlur:function(e){var a=this,c=a.inputEl.dom,b=a.getInputMask(),d;a.callParent([e]);d=c&&c.value;a.removeCls(a.fieldFocusCls);a.triggerWrap.removeCls(a.triggerWrapFocusCls);a.inputWrap.removeCls(a.inputWrapFocusCls);a.invokeTriggers('onFieldBlur',[e]);if(b&&a.getAutoHideInputMask()!==!1){b.onBlur(a,d)}},filterKeys:function(a){var b;if(a.ctrlKey&&!a.altKey||a.isSpecialKey()){return}b=String.fromCharCode(a.getCharCode());if(!this.maskRe.test(b)){a.stopEvent()}},getState:function(){return this.addPropertyToState(this.callParent(),'value')},applyState:function(a){this.callParent([a]);if(a.hasOwnProperty('value')){this.setValue(a.value)}},getErrors:function(b){b=arguments.length?b==null?'':b:this.processRawValue(this.getRawValue());var a=this,c=a.callParent([b]),f=a.validator,d=a.vtype,j=Ext.form.field.VTypes,k=a.regex,i=Ext.String.format,e,h,g;if(Ext.isFunction(f)){e=f.call(a,b);if(e!==!0){c.push(e)}}h=a.allowOnlyWhitespace?b:Ext.String.trim(b);if(h.length<1){if(!a.allowBlank){c.push(a.blankText)}if(!a.validateBlank){return c}g=!0}if(!g&&b.length<a.minLength){c.push(i(a.minLengthText,a.minLength))}if(b.length>a.maxLength){c.push(i(a.maxLengthText,a.maxLength))}if(d){if(!j[d](b,a)){c.push(a.vtypeText||j[d+'Text'])}}if(k&&!k.test(b)){c.push(a.regexText||a.invalidText)}return c},getCaretPos:function(){return this.inputEl.getCaretPos()},setCaretPos:function(a){this.inputEl.setCaretPos(a)},getTextSelection:function(){return this.inputEl.getTextSelection()},selectText:function(c,d,b){var a=this;Ext.defer(function(){if(!a.destroyed&&a.inputEl.isVisible(!0)){a.inputEl.selectText(c,d,b)}},Ext.isIE?10:0);return a},getGrowWidth:function(){return this.inputEl.dom.value},autoSize:function(){var a=this,e,g,d,f,b,c;if(a.grow&&a.rendered&&a.getSizeModel().width.auto){f=a.inputEl;e=a.getTriggers();d=0;c=Ext.util.Format.htmlEncode(a.getGrowWidth()||(a.hasFocus?'':a.emptyText)||'');c=c.replace(/\s/g,'&nbsp;');for(g in e){d+=e[g].el.getWidth()}b=f.getTextWidth(c)+d+a.inputWrap.getBorderWidth('lr')+a.triggerWrap.getBorderWidth('lr')+f.getPadding('lr');b=Math.min(Math.max(b,a.growMin),a.growMax);a.bodyEl.setWidth(b);a.updateLayout();a.fireEvent('autosize',a,b)}},doDestroy:function(){var a=this;a.invokeTriggers('destroy');Ext.destroy(a.triggerRepeater);a.setInputMask(null);a.callParent()},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return 'textfield'}},deprecated:{5:{methods:{getTriggerWidth:function(){var a=this.getTriggers(),c=0,b;if(a&&this.rendered){for(b in a){if(a.hasOwnProperty(b)){c+=a[b].el.getWidth()}}}return c}}}}},function(b){var a=Ext.layout.SizeModel.calculated;b.prototype.fakeSizeModel=a.pairsByHeightOrdinal[a.ordinal]});Ext.define('Ext.theme.material.form.field.Text',{override:'Ext.form.field.Text',labelSeparator:'',listeners:{change:function(a,b){if(a.el){a.el.toggleCls('not-empty',b||a.emptyText)}},render:function(a,d,b,c){if((a.getValue()||a.emptyText)&&a.el){a.el.addCls('not-empty')}}}});Ext.define('Ext.util.KeyMap',{alternateClassName:'Ext.KeyMap',eventName:'keydown',constructor:function(b){var a=this;Ext.apply(a,b);a.bindings=[];if(!a.target.isComponent){a.target=Ext.get(a.target)}if(a.binding){a.addBinding(a.binding)}else {if(b.key){a.addBinding(b)}}a.enable()},addBinding:function(b){var a=this,e=b.key,c,d;if(a.processing){a.bindings=a.bindings.slice(0)}if(Ext.isArray(b)){for(c=0,d=b.length;c<d;c++){a.addBinding(b[c])}return}a.bindings.push(Ext.apply({keyCode:a.processKeys(e)},b))},removeBinding:function(b){var c=this,e=c.bindings,g=e.length,d,a,f;if(c.processing){c.bindings=e.slice(0)}f=c.processKeys(b.key);for(d=0;d<g;d++){a=e[d];if((a.fn||a.handler)===(b.fn||b.handler)&&a.scope===b.scope){if(b.alt===a.alt&&b.ctrl===a.ctrl&&b.shift===a.shift){if(Ext.Array.equals(a.keyCode,f)){Ext.Array.erase(c.bindings,d,1);return}}}}},processKeys:function(a){var g=!1,f,e,d,c,b;if(a.test){return a}if(Ext.isString(a)){e=[];d=a.toUpperCase();for(b=0,c=d.length;b<c;b++){e.push(d.charCodeAt(b))}a=e;g=!0}if(!Ext.isArray(a)){a=[a]}if(!g){for(b=0,c=a.length;b<c;b++){f=a[b];if(Ext.isString(f)){a[b]=f.toUpperCase().charCodeAt(0)}}}return a},handleTargetEvent:function(b){var a=this,d,c,f,e;if(a.enabled){d=a.bindings;b=a.processEvent.apply(a.processEventScope||a,arguments);if(b){a.lastKeyEvent=b;if(a.ignoreInputFields&&Ext.fly(b.target).isInputField()){return}if(!b.getKey){return b}a.processing=!0;for(c=0,f=d.length;c<f;c++){e=a.processBinding(d[c],b);if(e===!1){a.processing=!1;return e}}a.processing=!1}}},processEvent:Ext.identityFn,processBinding:function(c,b){if(this.checkModifiers(c,b)){var g=b.getKey(),h=c.fn||c.handler,i=c.scope||this,d=c.keyCode,e=c.defaultEventAction,f,j,a;if(d.test){if(d.test(String.fromCharCode(b.getCharCode()))){a=h.call(i,g,b);if(a!==!0&&e){b[e]()}if(a===!1){return a}}}else {if(d.length){for(f=0,j=d.length;f<j;f++){if(g===d[f]){a=h.call(i,g,b);if(a!==!0&&e){b[e]()}if(a===!1){return a}break}}}}}},checkModifiers:function(f,g){var d=['shift','ctrl','alt'],a,e,c,b;for(a=0,e=d.length;a<e;a++){b=d[a];c=f[b];if(!(c===undefined||c===g[b+'Key'])){return !1}}return !0},on:function(a,g,f){var b,c,d,e;if(Ext.isObject(a)&&!Ext.isArray(a)){b=a.key;c=a.shift;d=a.ctrl;e=a.alt}else {b=a}this.addBinding({key:b,shift:c,ctrl:d,alt:e,fn:g,scope:f})},un:function(a,g,f){var b,c,d,e;if(Ext.isObject(a)&&!Ext.isArray(a)){b=a.key;c=a.shift;d=a.ctrl;e=a.alt}else {b=a}this.removeBinding({key:b,shift:c,ctrl:d,alt:e,fn:g,scope:f})},isEnabled:function(){return !!this.enabled},enable:function(){var a=this;if(!a.enabled){a.target.on(a.eventName,a.handleTargetEvent,a,{capture:a.capture,priority:a.priority});a.enabled=!0}},disable:function(){var a=this;if(a.enabled){if(!a.target.destroyed){a.target.removeListener(a.eventName,a.handleTargetEvent,a)}a.enabled=!1}},setDisabled:function(a){if(a){this.disable()}else {this.enable()}},destroy:function(b){var a=this,c=a.target;a.bindings=[];a.disable();a.target=null;if(b){c.destroy();Ext.raise('Using removeTarget argument in KeyMap destructor is not supported.')}a.callParent()}});Ext.define('Ext.util.KeyNav',{alternateClassName:'Ext.KeyNav',disabled:!1,defaultEventAction:!1,forceKeyDown:!1,eventName:'keypress',statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(a){var b=this,c,d;a=a||{};c={target:a.target,ignoreInputFields:a.ignoreInputFields,eventName:b.getKeyEvent('forceKeyDown' in a?a.forceKeyDown:b.forceKeyDown,a.eventName),capture:a.capture};if(b.map){b.map.destroy()}b.initConfig(a);if(a.processEvent){c.processEvent=a.processEvent;c.processEventScope=a.processEventScope||b}if(a.priority){c.priority=a.priority}if(a.keyMap){d=b.map=a.keyMap}else {d=b.map=new Ext.util.KeyMap(c);b.destroyKeyMap=!0}b.addBindings(a);d.disable();if(!a.disabled){d.enable()}},addBindings:function(d){var c=this,i=c.map,g=Ext.util.KeyNav.keyOptions,h=Ext.event.Event,f=d.scope||c,a,b,e;for(b in d){a=d[b];e=b.length===1?b.charCodeAt(0):g[b]||h[b.toUpperCase()];if(e!=null){b=e}if(a&&(b.length===1||!isNaN(b=parseInt(b,10)))){if(typeof a==='function'){a={handler:a,defaultEventAction:d.defaultEventAction!==undefined?d.defaultEventAction:c.defaultEventAction}}i.addBinding({key:b,ctrl:a.ctrl,shift:a.shift,alt:a.alt,handler:Ext.Function.bind(c.handleEvent,a.scope||f,[a.handler||a.fn,c],!0),defaultEventAction:a.defaultEventAction!==undefined?a.defaultEventAction:c.defaultEventAction})}}},handleEvent:function(d,a,b,c){c.lastKeyEvent=a;return b.call(this,a)},destroy:function(b){var a=this;if(b){Ext.raise('removeEl argument in KeyNav destructor is not supported anymore.')}if(a.destroyKeyMap){a.map.destroy(b)}a.map=null;a.callParent()},enable:function(){if(this.map){this.map.enable();this.disabled=!1}},disable:function(){if(this.map){this.map.disable()}this.disabled=!0},setDisabled:function(a){this.map.setDisabled(a);this.disabled=a},isEnabled:function(){return !this.disabled},getKeyEvent:function(b,a){if(b||Ext.supports.SpecialKeyDownRepeat&&!a){return 'keydown'}else {return a||this.eventName}}});Ext.define('Ext.form.field.Picker',{extend:Ext.form.field.Text,alias:'widget.pickerfield',alternateClassName:'Ext.form.Picker',config:{triggers:{picker:{handler:'onTriggerClick',scope:'this',focusOnMousedown:!0}}},renderConfig:{editable:!0},keyMap:{scope:'this',DOWN:'onDownArrow',ESC:'onEsc'},keyMapTarget:'inputEl',isPickerField:!0,matchFieldWidth:!0,pickerAlign:'tl-bl?',openCls:Ext.baseCSSPrefix+'pickerfield-open',isExpanded:!1,applyTriggers:function(a){var c=this,b=a.picker;if(!b.cls){b.cls=c.triggerCls}return c.callParent([a])},getSubTplData:function(d){var c=this,b,a;b=c.callParent([d]);if(!c.ariaStaticRoles[c.ariaRole]){a=b.ariaElAttributes;if(a){a['aria-haspopup']=!0;a['aria-expanded']=!1}}return b},initEvents:function(){this.callParent();if(Ext.isGecko){this.inputEl.dom.setAttribute('autocomplete','off')}},updateEditable:function(b,c){var a=this;if(!b){a.inputEl.on('click',a.onInputElClick,a)}else {a.inputEl.un('click',a.onInputElClick,a)}a.callParent([b,c])},onEsc:function(a){if(Ext.isIE){a.preventDefault()}if(this.isExpanded){this.collapse();a.stopEvent()}},onDownArrow:function(b){var a=this;if(b.time-a.lastDownArrow>150){delete a.lastDownArrow}if(!a.isExpanded){b.stopEvent();a.onTriggerClick(a,a.getPickerTrigger(),b);a.lastDownArrow=b.time}else {if(!b.stopped&&b.time-a.lastDownArrow<150){delete a.lastDownArrow}}},expand:function(){var a=this,c,b,d;if(a.rendered&&!a.isExpanded&&!a.destroyed){c=a.bodyEl;b=a.getPicker();d=Ext.getDoc();b.setMaxHeight(b.initialConfig.maxHeight);if(a.matchFieldWidth){b.setWidth(a.bodyEl.getWidth())}b.show();a.isExpanded=!0;a.alignPicker();c.addCls(a.openCls);if(!a.ariaStaticRoles[a.ariaRole]){if(!a.ariaEl.dom.hasAttribute('aria-owns')){a.ariaEl.dom.setAttribute('aria-owns',b.listEl?b.listEl.id:b.el.id)}a.ariaEl.dom.setAttribute('aria-expanded',!0)}a.touchListeners=d.on({translate:!1,touchstart:a.collapseIf,scope:a,delegated:!1,destroyable:!0});a.scrollListeners=Ext.on({scroll:a.onGlobalScroll,scope:a,destroyable:!0});Ext.on('resize',a.alignPicker,a,{buffer:1});a.fireEvent('expand',a);a.onExpand()}},onExpand:Ext.emptyFn,alignPicker:function(){var a=this,b;if(a.rendered&&!a.destroyed){b=a.getPicker();if(b.isVisible()&&b.isFloating()){a.doAlign()}}},doAlign:function(){var b=this,a=b.picker,e='-above',d,c;a.el.alignTo(b.triggerWrap,b.pickerAlign,b.pickerOffset);d=a.floatParent?a.getOffsetsTo(a.floatParent.getTargetEl()):a.getXY();a.x=d[0];a.y=d[1];c=a.el.getY()<b.inputEl.getY();b.bodyEl[c?'addCls':'removeCls'](b.openCls+e);a[c?'addCls':'removeCls'](a.baseCls+e)},collapse:function(){var a=this,d=a.openCls,c='-above',b;if(a.isExpanded&&!a.destroyed&&!a.destroying){b=a.picker;b.hide();a.isExpanded=!1;a.bodyEl.removeCls([d,d+c]);b.el.removeCls(b.baseCls+c);if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute('aria-expanded',!1)}a.touchListeners.destroy();a.scrollListeners.destroy();Ext.un('resize',a.alignPicker,a);a.fireEvent('collapse',a);a.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(b){var a=this;if(!a.destroyed&&!b.within(a.bodyEl,!1,!0)&&!a.owns(b.target)&&!Ext.fly(b.target).isFocusable()){a.collapse()}},getPicker:function(){var a=this,b=a.picker;if(!b){a.creatingPicker=!0;a.picker=b=a.createPicker();b.ownerCmp=a;delete a.creatingPicker}return a.picker},onFocusLeave:function(a){this.collapse();this.callParent([a])},getRefItems:function(){var a=[];if(this.picker){a[0]=this.picker}return a},getPickerTrigger:function(){return this.triggers&&this.triggers.picker},createPicker:Ext.emptyFn,onInputElClick:function(a){this.onTriggerClick(this,this.getPickerTrigger(),a)},onTriggerClick:function(c,b,d){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else {a.expand()}}},doDestroy:function(){var a=this,b=a.picker;Ext.un('resize',a.alignPicker,a);Ext.destroy(a.keyNav,b);if(b){a.picker=b.pickerField=null}a.callParent()},privates:{onGlobalScroll:function(b){var a=b.getElement();if(!this.picker.owns(a)&&a.isAncestor(this.el)){this.collapse()}}}});Ext.define('Ext.util.CollectionKey',{mixins:[Ext.mixin.Identifiable],isCollectionKey:!0,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:!0},generation:0,map:null,mapRebuilds:0,constructor:function(a){this.initConfig(a)},get:function(a){var b=this.map||this.getMap();return b[a]||null},clear:function(){this.map=null},getRootProperty:function(){var b=this,a=this.callParent();return a!==null?a:b.getCollection().getRootProperty()},indexOf:function(i,b){var j=this.map||this.getMap(),c=j[i],e=this.getCollection(),h=e.length,d,a,f,g;if(!c){return -1}if(b===undefined){b=-1}if(c instanceof Array){f=c;a=h;for(g=f.length;g-->0;){d=e.indexOf(f[g]);if(d<a&&d>b){a=d}}if(a===h){return -1}}else {a=e.indexOf(c)}return a>b?a:-1},updateKey:function(e,d){var f=this,c=f.map,a,b;if(c){a=c[d];if(a instanceof Array){b=Ext.Array.indexOf(a,e);if(b>=0){if(a.length>2){a.splice(b,1)}else {c[d]=a[1-b]}}}else {if(a){delete c[d]}}f.add([e])}},onCollectionAdd:function(b,a){if(this.map){this.add(a.items)}},onCollectionItemChange:function(a,b){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(g,h){var a=this,f=a.map,d=h.items,c=d.length,b,e;if(f){if(a.getUnique()&&c<g.length/2){for(b=0;b<c;++b){e=a.getKey(d[b]);delete f[e]}}else {a.map=null}}},add:function(i){var f=this,c=f.map,b,d,e,a,g,h;g=i.length;h=f.getUnique();for(d=0;d<g;++d){a=f.getKey(e=i[d]);if(h||!(a in c)){c[a]=e}else {if(!((b=c[a]) instanceof Array)){c[a]=b=[b]}b.push(e)}}},applyKeyFn:function(a){if(Ext.isString(a)){this.getKey=function(b){return b[a]()}}else {this.getKey=a}},updateProperty:function(b){var a=this.getRootProperty();this.getKey=function(c){return (a?c[a]:c)[b]}},getMap:function(){var a=this,b=a.map;if(!b){a.map=b={};a.keysByItemKey={};++a.mapRebuilds;a.add(a.getCollection().items)}return b},updateCollection:function(b,a){if(b){b.addObserver(this)}if(a){a.removeObserver(this)}},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())},destroy:function(){this.clear();this.getCollection().removeObserver(this);this.destroyed=!0}});Ext.define('Ext.util.Grouper',{extend:Ext.util.Sorter,isGrouper:!0,config:{groupFn:null,sortProperty:null},constructor:function(a){this.callParent(arguments)},getGroupString:function(a){return a.$collapsedGroupPlaceholder?a.$groupKey:this.getGroupValue(a).toString()},getGroupValue:function(a){var b=a.$collapsedGroupPlaceholder?a.$groupValue:this._groupFn(a);return b!=null?b:''},sortFn:function(d,e){var c=this,a=c.getGroupValue(d),b=c.getGroupValue(e),g=c._sortProperty,i=c._root,h=c._sorterFn,f=c._transform;if(a===b||Ext.Date.isEqual(a,b)){return 0}if(g||h){if(h){return h.call(this,d,e)}if(i){d=d[i];e=e[i]}a=d[g];b=e[g];if(f){a=f(a);b=f(b)}}return a>b?1:a<b?-1:0},standardGroupFn:function(a){var b=this._root;return (b?a[b]:a)[this._property]},updateSorterFn:function(){},updateProperty:function(){if(!this.getGroupFn()){this.setGroupFn(this.standardGroupFn)}}});Ext.define('Ext.util.Collection',{mixins:[Ext.mixin.Observable],isCollection:!0,config:{autoFilter:!0,autoSort:!0,autoGroup:!0,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,groupConfig:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:'ASC',source:null,trackGroups:!0},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:!1,sorted:!1,filtered:!1,$endUpdatePriority:1001,manageSorters:!0,constructor:function(b){var a=this;a.items=[];a.map={};a.length=0;if(b&&b.keyFn){a.getKey=b.keyFn}a.mixins.observable.constructor.call(a,b)},destroy:function(){var a=this,b=a._filters,c=a._sorters,d=a._groups;if(b){b.destroy();a._filters=null}if(c){a.grouped=a.sorted=!1;a.setSorters(null);if(a.manageSorters){c.destroy()}}if(d){d.destroy();a._groups=null}a.setSource(null);a.observers=a.items=a.map=null;a.callParent()},add:function(d){var b=this,a=b.decodeItems(arguments,0),c=a;if(a.length){b.splice(b.length,0,a);c=a.length===1?a[0]:a}return c},replaceAll:function(){var b=this,c,a;a=b.decodeItems(arguments,0);c=a;if(a.length){b.splice(0,b.length,a);c=a.length===1?a[0]:a}else {b.removeAll()}return c},aggregate:function(d,c,e,g,f){var a=this,b=Ext.Array.slice(arguments);b.unshift(a.items);return a.aggregateItems.apply(a,b)},aggregateByGroup:function(b,a,d){var c=this.getGroups();return this.aggregateGroups(c,b,a,d)},aggregateItems:function(a,m,b,c,d,p){var e=this,o=Ext.Number.clipIndices(a.length,[c,d]),k=c!==0&&d!==a.length,f,g,n,j,i,h,l;c=o[0];d=o[1];if(!Ext.isFunction(b)){b=e._aggregators[b];return b.call(e,a,c,d,m,e.getRootProperty())}j=e.getRootProperty();h=new Array(n);l=k?new Array(n):a;for(f=c,g=0;f<d;++f,g++){if(k){l[g]=i=a[f]}h[g]=(j?i[j]:i)[m]}return b.call(p||e,a,h,0)},aggregateGroups:function(i,e,c,j){var f=i.items,k=f.length,h=!Ext.isFunction(c),g={},b,a,d;for(b=0;b<k;++b){a=f[b];if(!h){d=this.aggregateItems(a.items,e,c,null,null,j)}else {d=a[c](e)}g[a.getGroupKey()]=d}return g},beginUpdate:function(){if(!this.updating++){this.notify('beginupdate')}},clear:function(){var a=this,c=a.generation,e=c?a.items:[],b,d;if(c){a.items.length=a.length=0;a.map={};a.indices={};a.generation++;b=a.getExtraKeys();if(b){for(d in b){b[d].clear()}}}return e},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.items);return b},collect:function(i,e,h){var d=this.items,j=d.length,f={},g=[],b,c,a;for(b=0;b<j;++b){a=d[b];a=(e?a[e]:a)[i];c=String(a);if((h||!Ext.isEmpty(a))&&!f[c]){f[c]=1;g.push(a)}}return g},contains:function(a){var c=!1,b;if(a!=null){b=this.getKey(a);c=this.map[b]===a}return c},containsAll:function(b){var c=Ext.isArray(b)?b:arguments,a;for(a=c.length;a-->0;){if(!this.contains(c[a])){return !1}}return !0},containsKey:function(a){return a in this.map},createFiltered:function(a,j,n,l,m){var d=this,k=new d.self(Ext.applyIf({source:null},d.initialConfig)),h=d.getRootProperty(),g=d.items,e,b,c,i,f;if(Ext.isFunction(a)){i=a;f=j}else {if(Ext.isString(a)){c=[new Ext.util.Filter({property:a,value:j,root:h,anyMatch:n,caseSensitive:l,exactMatch:m})]}else {if(a instanceof Ext.util.Filter){c=[a];a.setRoot(h)}else {if(Ext.isArray(a)){c=a.slice(0);for(b=0,e=c.length;b<e;++b){c[b].setRoot(h)}}}}i=Ext.util.Filter.createFilterFn(c)}f=f||d;for(b=0,e=g.length;b<e;b++){if(i.call(f,g[b])){k.add(g[b])}}return k},filterBy:function(b,a){return this.createFiltered(b,a)},each:function(f,c){var b=this.items,d=b.length,a,e;if(d){c=c||this;b=b.slice(0);for(a=0;a<d;a++){e=f.call(c,b[a],a,d);if(e===!1){break}}}return e},eachKey:function(i,c){var f=this,b=f.items,d=b.length,a,g,h,e;if(d){c=c||f;b=b.slice(0);for(a=0;a<d;a++){h=f.getKey(g=b[a]);e=i.call(c,h,g,a,d);if(e===!1){break}}}return e},endUpdate:function(){if(!--this.updating){this.notify('endupdate')}},find:function(g,c,h,e,f,d){var b,a;if(Ext.isEmpty(c,!1)){return null}b=Ext.String.createRegex(c,e,f,d);a=this.getRootProperty();return this.findBy(function(i){return i&&b.test((a?i[a]:i)[g])},null,h)},findBy:function(i,c,g){var d=this,b=d.items,h=b.length,a,e,f;c=c||d;for(a=g||0;a<h;a++){f=d.getKey(e=b[a]);if(i.call(c,e,f)){return b[a]}}return null},findIndex:function(e,g,f,c,d,b){var a=this.find(e,g,f,c,d,b);return a?this.indexOf(a):-1},findIndexBy:function(d,b,c){var a=this.findBy(d,b,c);return a?this.indexOf(a):-1},first:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,'first'):this.items[0]},last:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,'last'):this.items[this.length-1]},get:function(a){return this.map[a]},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},getCount:function(){return this.length},getKey:function(b){var a=b.id;return a===0||a?a:(a=b._id)===0||a?a:b.getId()},getRange:function(d,e){var c=this.items,b=c.length,a;if(!b){a=[]}else {a=Ext.Number.clipIndices(b,[d,e]);a=c.slice(a[0],a[1])}return a},getValues:function(h,f,i,c){var d=this.items,e=Ext.Number.clipIndices(d.length,[i,c]),g=[],b,a;for(b=e[0],c=e[1];b<c;++b){a=d[b];a=(f?a[f]:a)[h];g.push(a)}return g},indexOf:function(a){var b;if(!a){return -1}b=this.getKey(a);return this.indexOfKey(b)},indexOfKey:function(c){var b=this,a=b.indices;if(c in b.map){if(!a){a=b.getIndices()}return a[c]}return -1},insert:function(d,e){var c=this,a=c.decodeItems(arguments,1),b=a;if(a.length){c.splice(d,0,a);b=a.length===1?a[0]:a}return b},itemChanged:function(c,p,h,u){var a=this,j=h!==undefined,s=a.filtered&&a.getAutoFilter(),n=!1,g=0,i=a.items,t=a.length-1,v=a.sorted&&t>0&&a.getAutoSort(),r=a.getSource(),q=0,f=!1,o=!1,d,l,k,m,b,e;if(r&&!r.updating){a.sourceUpdating=!0;r.itemChanged(c,p,h,u);a.sourceUpdating=!1}else {l=a.getKey(c);if(s){b=a.indexOfKey(j?h:l);o=b<0;f=a.isItemFiltered(c);n=o!==f}if(n){if(f){q=[c];e=-1}else {m=[c];e=a.length}}else {if(v&&!f){if(!s){b=a.indexOfKey(j?h:l)}k=a.getSortFn();if(b!==-1){if(b&&k(i[b-1],i[b])>0){g=-1;e=Ext.Array.binarySearch(i,c,0,b,k)}else {if(b<t&&k(i[b],i[b+1])>0){g=1;e=Ext.Array.binarySearch(i,c,b+1,k)}}if(g){m=[c]}}}}d={item:c,key:l,index:e,filterChanged:n,keyChanged:j,indexChanged:!!g,filtered:f,oldIndex:b,newIndex:e,wasFiltered:o,meta:u};if(j){d.oldKey=h}if(p){d.modified=p}++a.generation;a.beginUpdate();a.notify('beforeitemchange',[d]);if(j){a.updateKey(c,h,d)}if(m||q){a.splice(e,q,m)}if(g>0){d.newIndex--}else {if(g<0){d.oldIndex++}}a.notify(f?'filtereditemchange':'itemchange',[d]);a.endUpdate()}},remove:function(d){var a=this,c=a.decodeRemoveItems(arguments,0),b=a.length;a.splice(0,c);return b-a.length},removeAll:function(){var a=this,b=a.length;if(a.generation&&b){a.splice(0,b)}return a},removeAt:function(j,f){var a=this,e=a.length,i=Ext.Number,g=i.clipIndices(e,[j,f===undefined?1:f],i.Clip.COUNT),c=g[0],d=g[1]-c,h=d===1&&a.getAt(c),b;a.splice(c,d);b=a.length-e;return h&&b?h:b},removeByKey:function(b){var a=this.getByKey(b);if(!a||!this.remove(a)){return !1}return a},replace:function(a){var b=this.indexOf(a);if(b===-1){this.add(a)}else {this.insert(b,a)}},splice:function(F,E,L){var b=this,D=b.sorted&&b.getAutoSort(),G=b.map,o=b.items,r=b.length,n=E instanceof Array?b.decodeRemoveItems(E):null,H=!n,K=Ext.Number,J=K.clipIndices(r,[F,H?E:0],K.Clip.COUNT),m=J[0],z=J[1],w=z-m,p=b.decodeItems(arguments,2),h=p?p.length:0,c,A,C,d=m,k=b.indices||(h||n?b.getIndices():null),e=null,i=w?[m]:null,l=null,t=b.getSource(),j,B,y,a,u,g,v,f,s,q,x,I;if(t&&!t.updating){if(H){n=[];for(a=0;a<w;++a){n.push(o[m+a])}}if(m<r){a=t.indexOf(o[m])}else {a=t.length}b.requestedIndex=F;t.splice(a,n,p);delete b.requestedIndex;return b}if(h){c=p;l=[];A={};if(D){I=b.getSorters();if(h>1){if(!c.$cloned){p=c=c.slice(0)}b.sortData(c)}}for(a=0;a<h;++a){f=b.getKey(u=p[a]);if((v=A[f])!==undefined){(x||(x={}))[v]=1}else {g=k[f];if(g<m||z<=g){(i||(i=[])).push(g)}}A[f]=a;l.push(f)}if(x){s=l;c=[];l=[];c.$cloned=!0;for(a=0;a<h;++a){if(!x[a]){u=p[a];c.push(u);l.push(s[a])}}h=c.length}e={items:c,keys:l}}for(a=n?n.length:0;a-->0;){f=b.getKey(n[a]);if((g=k[f])!==undefined){(i||(i=[])).push(g)}}if(!e&&!i){return b}b.beginUpdate();if(i){j=null;y=[];C={};if(i.length>1){i.sort(Ext.Array.numericSortFn)}for(a=0,q=i.length;a<q;++a){f=b.getKey(u=o[g=i[a]]);if(!(f in G)){continue}delete G[f];if(!j||g>j.at+B.length){y.push(j={at:g,items:B=[],keys:s=[],map:C,next:j,replacement:e});if(e){e.replaced=j}}B.push(C[f]=u);s.push(f);if(g<d){--d}if(w>1&&g===m){--w;i[a--]=++m}}if(e){e.at=d}for(v=y.length;v-->0;){j=y[v];a=j.at;q=j.items.length;if(a+q<r){b.indices=k=null}b.length=r-=q;o.splice(a,q);if(k){s=j.keys;for(a=0;a<q;++a){delete k[s[a]]}}++b.generation;b.notify('remove',[j])}}if(e){if(D&&h>1&&r){b.spliceMerge(c,l)}else {if(D){if(h>1){d=0;b.indices=k=null}else {d=I.findInsertionIndex(e.items[0],o,b.getSortFn(),F)}}if(d===r){z=d;for(a=c.length-1;a>=0;--a){o[z+a]=c[a]}k=b.indices;if(k){for(a=0;a<h;++a){k[l[a]]=d+a}}}else {b.indices=null;Ext.Array.insert(o,d,c)}for(a=0;a<h;++a){G[l[a]]=c[a]}b.length+=h;e.at=d;e.atItem=d===0?null:o[d-1];++b.generation;b.notify('add',[e])}}b.endUpdate();return b},update:function(c,b){var a=this;a.beginUpdate();try{return c.call(b||a,a)}catch(d){throw d}finally{a.endUpdate()}},updateKey:function(d,b,h){var a=this,f=a.map,e=a.indices,g=a.getSource(),c;if(g&&!g.updating){g.updateKey(d,b)}else {if((c=a.getKey(d))!==b){if(f[b]===d&&!(c in f)){delete f[b];a.updating++;a.generation++;f[c]=d;if(e){e[c]=e[b];delete e[b]}a.notify('updatekey',[Ext.apply({item:d,newKey:c,oldKey:b},h)]);a.updating--}}}},findInsertIndex:function(g,e){var d=this.getSource(),f=d.items,b=d.indexOf(g)-1,c,a;while(b>-1){c=f[b];a=this.indexOf(c);if(a>-1){return a+1}--b}return e},onCollectionAdd:function(l,h){var a=this,j=h.atItem,e=a.transformItems(h.items),i=a.requestedIndex,d,b,f,g,c,k;if(i!==undefined){b=i}else {c=j||l.items[1];b=c?a.indexOf(c):-1;if(b>-1){if(j){++b}}else {if(!a.sorted){b=a.findInsertIndex(e[0],h.at?a.length:0)}}}if(a.getAutoFilter()&&a.filtered){for(g=0,k=e.length;g<k;++g){c=e[g];if(a.isItemFiltered(c)){if(!f){f=e.slice(0,g)}if(!d){d=[]}d.push(c)}else {if(f){f.push(c)}}}}a.splice(b<0?a.length:b,0,f||e);if(d){a.notify('filteradd',[d])}},onCollectionBeforeItemChange:function(c,b){var a=this;a.onCollectionUpdateKey=null;if(!a.sourceUpdating){a.notify('beforeitemchange',[b])}},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){delete this.onCollectionUpdateKey;this.itemChanged(a.item,a.modified,a.oldKey,a.meta)},onCollectionFilteredItemChange:function(){delete this.onCollectionUpdateKey},onCollectionRefresh:function(l){var a=this,j={},h={},c=a.items,d=a.transformItems(l.items),k=a.getFilterFn(),b,i,g,e,f;if(a.filtered&&a.getAutoFilter()){for(b=0,f=0,e=d.length;b<e;b++){if(k(d[b])){c[f++]=d[b]}}c.length=f}else {c.length=0;c.push.apply(c,d)}if(a.sorted){a.sortData(c)}a.length=e=c.length;a.map=j;a.indices=h;for(b=0;b<e;++b){g=a.getKey(i=c[b]);j[g]=i;h[g]=b}++a.generation;a.notify('refresh')},onCollectionRemove:function(b,a){this.splice(0,a.items)},onCollectionUpdateKey:function(b,a){this.updateKey(a.item,a.oldKey,a)},_aggregators:{average:function(e,a,b,d,f){var c=b-a;return c&&this._aggregators.sum.call(this,e,a,b,d,f)/c},bounds:function(h,g,i,f,e){var a,c,d,b;for(b=g;b<i;++b){a=h[b];a=(e?a[e]:a)[f];if(!(a<c)){c=a}if(!(a>d)){d=a}}return [d,c]},count:function(a){return a.length},extremes:function(k,j,l,i,f){var e=null,d=null,c,b,g,h,a;for(c=j;c<l;++c){b=k[c];a=(f?b[f]:b)[i];if(!(a<g)){g=a;e=b}if(!(a>h)){h=a;d=b}}return [d,e]},max:function(c,b,e,a,d){var f=this._aggregators.bounds.call(this,c,b,e,a,d);return f[1]},maxItem:function(c,b,e,a,d){var f=this._aggregators.extremes.call(this,c,b,e,a,d);return f[1]},min:function(c,b,e,a,d){var f=this._aggregators.bounds.call(this,c,b,e,a,d);return f[0]},minItem:function(c,b,e,a,d){var f=this._aggregators.extremes.call(this,c,b,e,a,d);return f[0]},sum:function(g,f,h,e,d){var a,c,b;for(c=0,b=f;b<h;++b){a=g[b];a=(d?a[d]:a)[e];c+=a}return c}},_eventToMethodMap:{add:'onCollectionAdd',beforeitemchange:'onCollectionBeforeItemChange',beginupdate:'onCollectionBeginUpdate',endupdate:'onCollectionEndUpdate',itemchange:'onCollectionItemChange',filtereditemchange:'onCollectionFilteredItemChange',refresh:'onCollectionRefresh',remove:'onCollectionRemove',beforesort:'beforeCollectionSort',sort:'onCollectionSort',filter:'onCollectionFilter',filteradd:'onCollectionFilterAdd',updatekey:'onCollectionUpdateKey'},addObserver:function(c){var b=this,a=b.observers;if(!a){b.observers=a=[]}if(b.notifying){b.observers=a=a.slice(0)}a.push(c);if(a.length>1){Ext.Array.sort(a,b.prioritySortFn)}},prioritySortFn:function(a,b){var c=a.observerPriority||0,d=b.observerPriority||0;return c-d},applyExtraKeys:function(e,g){var d=this,f=g||{},b,c,a;for(c in e){a=e[c];if(!a.isCollectionKey){b={collection:d};if(Ext.isString(a)){b.property=a}else {b=Ext.apply(b,a)}a=new Ext.util.CollectionKey(b)}else {a.setCollection(d)}f[c]=d[c]=a;a.name=c}return f},applyGrouper:function(a){if(a){a=this.getSorters().decodeSorter(a,Ext.util.Grouper)}return a},decodeItems:function(e,d){var g=this,a=d===undefined?e:e[d],b,f,c;if(!a||!a.$cloned){b=e.length>d+1||!Ext.isIterable(a);if(b){a=Ext.Array.slice(e,d);if(a.length===1&&a[0]===undefined){a.length=0}}f=g.getDecoder();if(f){if(!b){a=a.slice(0);b=!0}for(c=a.length;c-->0;){if((a[c]=f.call(g,a[c]))===!1){a.splice(c,1)}}}if(b){a.$cloned=!0}}return a},getIndices:function(){var a=this,c=a.indices,d=a.items,f=d.length,b,e;if(!c){a.indices=c={};++a.indexRebuilds;for(b=0;b<f;++b){e=a.getKey(d[b]);c[e]=b}}return c},notify:function(d,b){var a=this,e=a.observers,g=a._eventToMethodMap[d],j=0,c,i,f,h;b=b||[];if(e&&g){a.notifying=!0;for(c=0,i=e.length;c<i;++c){f=(h=e[c])[g];if(f){if(!j++){b.unshift(a)}f.apply(h,b)}}a.notifying=!1}if(!a.hasListeners){return}if(a.hasListeners[d]){if(!j){b.unshift(a)}a.fireEventArgs(d,b)}},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(b){var a=this._filters;if(!a&&b!==!1){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},isItemFiltered:function(a){return !this.getFilters().filterFn(a)},onFilterChange:function(f){var a=this,b=a.getSource(),c,d,e;if(!b){c=a.getExtraKeys();if(c){d={};for(e in c){d[e]=c[e].clone(a)}}b=new Ext.util.Collection({keyFn:a.getKey,extraKeys:d,rootProperty:a.getRootProperty()});if(a.length){b.add(a.items)}a.setSource(b);a.autoSource=b}else {if(b.destroyed){return}if(b.length||a.length){a.onCollectionRefresh(b)}}a.notify('filter')},applyFilters:function(b,a){if(!b||b.isFilterCollection){return b}if(b){if(!a){a=this.getFilters()}a.splice(0,a.length,b)}return a},updateFilters:function(b,c){var a=this;if(c){c.un('endupdate','onEndUpdateFilters',a)}if(b){b.on({endupdate:'onEndUpdateFilters',scope:a,priority:a.$endUpdatePriority});b.$filterable=a}a.onEndUpdateFilters(b)},onEndUpdateFilters:function(a){var b=this,d=b.filtered,c=!!a&&a.getFilterCount()>0;if(d||c){b.filtered=c;b.onFilterChange(a)}},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(b){var a=this._sorters;if(!a&&b!==!1){a=new Ext.util.SorterCollection();this.setSorters(a)}return a},onSortChange:function(){if(this.sorted){this.sortItems()}},sort:function(c,b,d){var a=this.getSorters();a.addSort.apply(a,arguments);return this},sortData:function(a){Ext.Array.sort(a,this.getSortFn());return a},sortItems:function(b){var a=this;if(a.sorted){b=a.getSortFn()}a.indices=null;a.notify('beforesort',[a.getSorters(!1)]);if(a.length){Ext.Array.sort(a.items,b)}a.notify('sort')},sortBy:function(a){return this.sortItems(a)},findInsertionIndex:function(d,c,a,b){return Ext.Array.findInsertionIndex(d,c||this.items,a||this.getSortFn(),b)},applySorters:function(b,a){if(!b||b.isSorterCollection){return b}if(b){if(!a){a=this.getSorters()}a.splice(0,a.length,b)}return a},createSortFn:function(){var d=this,b=d.getGrouper(),c=d.getSorters(!1),a=c?c.getSortFn():null;if(!b){return a}return function(d,e){var c=b.sort(d,e);if(!c&&a){c=a(d,e)}return c}},updateGrouper:function(c){var a=this,b=a.getGroups(),e=a.getSorters(),d;a.onSorterChange();a.grouped=!!c;if(c){if(a.getTrackGroups()){if(!b){b=new Ext.util.GroupCollection({itemRoot:a.getRootProperty(),groupConfig:a.getGroupConfig()});b.$groupable=a;a.setGroups(b)}b.setGrouper(c);d=!0}}else {if(b){a.removeObserver(b);b.destroy()}a.setGroups(null)}if(!e.updating){a.onEndUpdateSorters(e)}if(d){b.onCollectionRefresh(a)}},updateSorters:function(b,c){var a=this;if(c&&!c.destroyed){c.un('endupdate','onEndUpdateSorters',a)}if(b){b.on({endupdate:'onEndUpdateSorters',scope:a,priority:a.$endUpdatePriority});if(a.manageSorters){b.$sortable=a}}a.onSorterChange();a.onEndUpdateSorters(b)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(b){var a=this,d=a.sorted,c=a.grouped&&a.getAutoGroup()||b&&b.length>0;if(d||c){a.sorted=!!c;a.onSortChange(b)}},removeObserver:function(b){var a=this.observers;if(a){Ext.Array.remove(a,b)}},spliceMerge:function(i,q){var f=this,r=f.map,k=i.length,g=0,n=f.items,m=n.length,h=[],c=0,a=[],p=f.getSortFn(),l,j,d,b,o,e;f.items=a;for(e=0;e<k;e=j){b=i[e];for(;g<m;++g){if(p(b,o=n[g])<0){break}a.push(o)}if(g===m){h[c++]={at:a.length,itemAt:a[a.length-1],items:l=[]};if(c>1){h[c-2].next=h[c-1]}for(;e<k;++e){l.push(b=i[e]);a.push(b)}break}h[c++]={at:a.length,itemAt:a[a.length-1],items:l=[b]};if(c>1){h[c-2].next=h[c-1]}a.push(b);for(j=e+1;j<k;++j){if(p(b=i[j],o)>=0){break}a.push(b);l.push(b)}}for(;g<m;++g){a.push(n[g])}for(d=0;d<k;++d){r[q[d]]=i[d]}f.length=a.length;++f.generation;f.indices=null;for(d=0;d<c;++d){f.notify('add',[h[d]])}},transformItems:Ext.identityFn,getGroups:function(){return this.callParent()||null},updateAutoGroup:function(b){var a=this.getGroups();if(a){a.setAutoGroup(b)}this.onEndUpdateSorters(this._sorters)},updateGroups:function(a,b){if(b){this.removeObserver(b)}if(a){this.addObserver(a)}},updateSource:function(b,c){var a=this,d=a.autoSource;if(c){if(!c.destroyed){c.removeObserver(a)}if(c===d){d.destroy();a.autoSource=null}}if(b){b.addObserver(a);if(b.length||a.length){a.onCollectionRefresh(b)}}}},function(){var a=this.prototype;a.removeAtKey=a.removeByKey;a.decodeRemoveItems=a.decodeItems;Ext.Object.each(a._aggregators,function(b){a[b]=function(a,c,d){return this.aggregate(a,b,c,d)};a[b+'ByGroup']=function(a){return this.aggregateByGroup(a,b)}})});Ext.define('Ext.data.Range',{isDataRange:!0,begin:0,buffer:0,end:0,length:0,store:null,waitTimeout:10000,activeWait:null,constructor:function(b){var a=this,c,d;Ext.apply(a,b);d=a.store;if(!(c=d.activeRanges)){d.activeRanges=c=[]}c.push(a);a.refresh();if('begin' in b){a.begin=a.end=0;a['goto'](b.begin,b.end)['catch'](function(){})}},destroy:function(){var a=this,c=a.store,b=c&&c.activeRanges;Ext.destroy(a.storeListeners);if(b){Ext.Array.remove(b,a)}a.cancelActiveWait();a.callParent()},'goto':function(b,d){var a=this,f=a.buffer,c=a.task,e;a.begin=b;a.end=d;a.length=d-b;a.cancelActiveWait();a.activeWait=a.setupWait(b,d);e=a.activeWait.promise;a.resolveWaitIfSatisfied();if(f>0){if(!c){a.task=c=new Ext.util.DelayedTask(a.doGoto,a)}c.delay(f)}else {a.doGoto()}return e},privates:{lastBegin:0,lastEnd:0,cancelActiveWait:function(){this.resolveWait(null)},doGoto:Ext.privateFn,refresh:function(){this.records=this.store.getData().items},resolveWait:function(a){var b=this.activeWait;if(b){b.deferred.resolve(a);this.activeWait=null}return a},resolveWaitIfSatisfied:function(){this.resolveWait(this)},setupWait:function(e,f){var d=this,c=d.waitTimeout,b=new Ext.Deferred(),a=b.promise;if(c){a=Ext.Deferred.timeout(a,c)['catch'](function(){return d.resolveWait(null)})}return {deferred:b,promise:a}}}});Ext.define('Ext.util.ObjectTemplate',{isObjectTemplate:!0,excludeProperties:{},valueRe:/^[{][a-z.]+[}]$/i,statics:{create:function(a,b){return a.isObjectTemplate?a:new Ext.util.ObjectTemplate(a,b)}},constructor:function(a,b){Ext.apply(this,b);this.template=a},apply:function(b){var a=this;delete a.apply;a.apply=a.compile(a.template);return a.apply(b)},privates:{compile:function(a){var e=this,g=e.excludeProperties,d,b,f,c;if(Ext.isString(a)){if(a.indexOf('{')<0){c=function(){return a}}else {if(e.valueRe.test(a)){a=a.substring(1,a.length-1).split('.');c=function(d){var b,c;for(b=d,c=0;b&&c<a.length;++c){b=b[a[c]]}return b}}else {a=new Ext.XTemplate(a);c=function(b){return a.apply(b)}}}}else {if(!a||Ext.isPrimitive(a)||Ext.isFunction(a)){c=function(){return a}}else {if(a instanceof Array){d=[];for(b=0,f=a.length;b<f;++b){d[b]=e.compile(a[b])}c=function(e){var c=[],b;for(b=0;b<f;++b){c[b]=d[b](e)}return c}}else {d={};for(b in a){if(!g[b]){d[b]=e.compile(a[b])}}c=function(f){var e={},b,c;for(b in a){c=g[b]?a[b]:d[b](f);if(c!==undefined){e[b]=c}}return e}}}}return c}}});Ext.define('Ext.data.schema.Role',{isRole:!0,left:!0,owner:!1,side:'left',isMany:!1,defaultReaderType:'json',_internalReadOptions:{recordsOnly:!0,asRoot:!0},constructor:function(c,d){var a=this,b=d.extra;Ext.apply(a,d);if(b){b=Ext.apply({},b);delete b.type;Ext.apply(a,b);delete a.extra}a.association=c;if(c.owner===a.side){c.owner=a;a.owner=!0}},processUpdate:function(){Ext.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(d,b,a,c){return a},checkMembership:Ext.emptyFn,adoptAssociated:function(c,b){var a=this.getAssociatedItem(c);if(a){b.adopt(a)}},$roleFilterId:'$associationRoleFilter',createAssociationStore:function(d,k,i,l){var a=this,g=a.association,e=g.getFieldName(),j=g.isManyToMany,h=a.storeConfig,f=k.getId(),c={asynchronousLoad:!1,model:a.cls,role:a,session:d,associatedEntity:k,disableMetaChangeEvent:!0,pageSize:null,remoteFilter:!0,trackRemoved:!d},b;if(j){c.filters=[{id:a.$roleFilterId,property:a.inverse.field,value:f,exactMatch:!0}]}else {if(e){c.filters=[{id:a.$roleFilterId,property:e,value:f,exactMatch:!0}];c.foreignKeyName=e}}if(h){Ext.apply(c,h)}b=Ext.Factory.store(c);a.onStoreCreate(b,d,f);if(!j||d){b.on({scope:a,add:'onAddToMany',remove:'onRemoveFromMany',clear:'onRemoveFromMany'})}if(i){b.loadData(i)}b.complete=!!l;return b},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(f,b,d,a,v){var k=this,o=k.getStoreName(),c=f[o],w=c,i=f.session,p=b&&b.reload,j=f.$source,h=!1,t=!1,s,e,l,u,q,r,g,m,n;if(!c){if(i){if(j){t=j.phantom}if(!a&&j){g=j[o];if(g&&!g.isLoading()){a=[];q=g.getData().items;for(l=0,u=q.length;l<u;++l){r=q[l];a.push(i.getRecord(r.self,r.id))}h=!!g.complete;s=!0}}if(!s){m=!!a;a=k.findRecords(i,f,a,v);if(!m&&(!a||!a.length)){a=null}h=t||m}}else {h=!!a}c=k.createAssociationStore(i,f,a,h||f.phantom);c.$source=g;if(!a&&(k.autoLoad||b)){p=!0}f[o]=c}if(b){if(p||c.isLoading()){c.on('load',function(h,i,c,g){e=[h,g];d=d||b.scope||f;if(c){Ext.callback(b.success,d,e)}else {Ext.callback(b.failure,d,e)}e.push(c);Ext.callback(b,d,e);Ext.callback(b.callback,d,e)},null,{single:!0})}else {e=[c,null];d=d||b.scope||f;Ext.callback(b.success,d,e);e.push(!0);Ext.callback(b,d,e);Ext.callback(b.callback,d,e)}}n=c.isLoading();if(p){if(!n){c.load()}}else {if(w&&a&&!n){c.loadData(a)}}return c},getAssociatedItem:function(b){var a=this.isMany?this.getStoreName():this.getInstanceName();return b[a]||null},onDrop:Ext.emptyFn,onIdChanged:Ext.emptyFn,getReaderRoot:function(){var a=this;return a.associationKey||(a.associationKey=a.association.schema.getNamer().readerRoot(a.role))},getReader:function(){var b=this,a=b.reader,d=b.cls,c=!b.associationKey,e=this.getReaderRoot();if(a&&!a.isReader){if(Ext.isString(a)){a={type:a}}Ext.applyIf(a,{model:d,rootProperty:e,useSimpleAccessors:c,type:b.defaultReaderType});a=b.reader=Ext.createByAlias('reader.'+a.type,a)}return a},getInstanceName:function(){var a=this;return a.instanceName||(a.instanceName=a.association.schema.getNamer().instanceName(a.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName='$old'+this.getInstanceName())},getStoreName:function(){var a=this;return a.storeName||(a.storeName=a.association.schema.getNamer().storeName(a.role))},constructReader:function(h){var b=this,a=b.getReader(),e=b.cls,g=!b.associationKey,f=b.getReaderRoot(),c,d;if(!a){d=e.getProxy();if(d){c=d.getReader();a=new c.self();a.copyFrom(c);a.setRootProperty(f)}else {a=new h.self({model:e,useSimpleAccessors:g,rootProperty:f})}b.reader=a}return a},read:function(f,e,d,c){var a=this.constructReader(d),b=a.getRoot(e);if(b){return a.readRecords(b,c,this._internalReadOptions)}},getCallbackOptions:function(a,c,b){if(typeof a==='function'){a={callback:a,scope:c||b}}else {if(a){a=Ext.apply({},a);a.scope=c||a.scope||b}}return a},doGetFK:function(d,b,f){var i=this,l=i.cls,j=i.association.getFieldName(),h=i.getInstanceName(),a=d[h],m=b&&b.reload,e=a!==undefined&&!m,k=d.session,c,g;if(!e){if(k){c=d.get(j);if(c||c===0){e=k.peekRecord(l,c,!0)&&!m;a=k.getRecord(l,c,!1)}else {e=!0;d[h]=a=null}}else {if(j){c=d.get(j);if(!c&&c!==0){e=!0;d[h]=a=null}else {if(!a){a=l.createWithId(c)}}}else {e=!0;a=null}}}else {if(a){e=!a.isLoading()}}if(e){if(b){g=[a,null];f=f||b.scope||d;Ext.callback(b.success,f,g);g.push(!0);Ext.callback(b,f,g);Ext.callback(b.callback,f,g)}}else {d[h]=a;b=i.getCallbackOptions(b,f,d);a.load(b)}return a},doSetFK:function(a,c,e,l){var f=this,i=f.association.getFieldName(),h=f.getInstanceName(),b=a[h],d=f.inverse,j=d.setterName,k,g;if(c&&c.isEntity){if(b!==c){g=f.getOldInstanceName();a[g]=b;a[h]=c;if(b&&b.isEntity){b[d.getInstanceName()]=undefined}if(i){a.set(i,c.getId())}delete a[g];a.onAssociatedRecordSet(c,f);if(j){c[j](a)}}}else {k=a.changingKey&&!d.isMany||a.set(i,c);if(k&&b&&b.isEntity&&!b.isEqual(b.getId(),c)){a[h]=undefined;if(!d.isMany){b[d.getInstanceName()]=undefined}}}if(e){if(Ext.isFunction(e)){e={callback:e,scope:l||a}}return a.save(e)}}});Ext.define('Ext.data.schema.Association',{isOneToOne:!1,isManyToOne:!1,isManyToMany:!1,owner:null,field:null,constructor:function(d){var a=this,c,b;Ext.apply(a,d);a.left=c=new a.Left(a,a.left);a.right=b=new a.Right(a,a.right);c.inverse=b;b.inverse=c},hasField:function(){return !!this.field},getFieldName:function(){var a=this.field;return a?a.name:''}});Ext.define('Ext.data.schema.OneToOne',{extend:Ext.data.schema.Association,isOneToOne:!0,isToOne:!0,kind:'one-to-one',Left:Ext.define(null,{extend:'Ext.data.schema.Role',onDrop:function(a,c){var b=this.getAssociatedItem(a);a[this.getInstanceName()]=null;if(b){b[this.inverse.getInstanceName()]=null}},onIdChanged:function(a,e,d){var b=this.getAssociatedItem(a),c=this.association.getFieldName();if(!a.session&&b&&c){b.set(c,d)}},createGetter:function(){var a=this;return function(){return a.doGet(this)}},createSetter:function(){var a=this;return function(b){return a.doSet(this,b)}},doGet:function(a){var c=this.getInstanceName(),b=a[c],d=a.session;if(!b&&d){}return b||null},doSet:function(a,b){var d=this.getInstanceName(),e=a[d],c=this.inverse.setterName;if(e!==b){a[d]=b;if(c){b[c](a)}a.onAssociatedRecordSet(b,this)}return e},read:function(a,g,f,e){var c=this,d=c.callParent([a,g,f,e]),b;if(d){b=d[0];if(b){b[c.inverse.getInstanceName()]=a;a[c.getInstanceName()]=b;delete a.data[c.role]}}}}),Right:Ext.define(null,{extend:'Ext.data.schema.Role',left:!1,side:'right',createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(d,b,c){return a.doSetFK(this,d,b,c)}},onDrop:function(c,f){var b=this,d=b.association.field,a=b.getAssociatedItem(c),e;if(b.inverse.owner){if(f&&d){e=c.get(d.name);if(e||e===0){a=f.getEntry(b.cls,e).record;if(a){a.drop()}}}else {if(a){a.drop()}}}if(d){c.set(d.name,null)}c[b.getInstanceName()]=null;if(a){a[b.inverse.getInstanceName()]=null}},onValueChange:function(b,f,c){var a=this,e=b[a.getOldInstanceName()]||a.getAssociatedItem(b),h=c||c===0,d=a.getInstanceName(),g=a.cls;b.changingKey=!0;a.doSetFK(b,c);if(!h){b[d]=null}else {if(f&&g){b[d]=f.peekRecord(g,c)||undefined}}if(a.inverse.owner&&e){a.association.schema.queueKeyCheck(e,a)}b.changingKey=!1},checkKeyForDrop:function(a){var b=this.inverse.getAssociatedItem(a);if(!b){a.drop()}},read:function(a,o,n,m){var f=this,l=f.callParent([a,o,n,m]),b,d,g,c,k,h,j,i,e;if(l){b=l[0];d=f.association.field;if(d){g=d.name}c=a.session;e=a.data;if(b){if(c){k=c.getRefs(b,this.inverse,!0);i=k&&k[a.id]||e[g]===undefined}else {i=!0}if(i){if(d){j=e[g];h=b.id;if(j!==h){e[g]=h;if(c){c.updateReference(a,d,h,j)}}}b[f.inverse.getInstanceName()]=a;a[f.getInstanceName()]=b}delete e[f.role]}}}})});Ext.define('Ext.data.schema.ManyToOne',{extend:Ext.data.schema.Association,isManyToOne:!0,isToOne:!0,kind:'many-to-one',Left:Ext.define(null,{extend:'Ext.data.schema.Role',isMany:!0,onDrop:function(d,f){var b=this,e=b.getAssociatedItem(d),a,g,c,h;if(e){a=e.removeAll();if(a&&b.inverse.owner){for(c=0,g=a.length;c<g;++c){a[c].drop()}}e.destroy();d[b.getStoreName()]=null}else {if(f){a=f.getRefs(d,b);if(a){for(h in a){a[h].drop()}}}}},onIdChanged:function(e,i,g){var f=this.association.getFieldName(),d=this.getAssociatedItem(e),b,a,h,c;if(d){c=d.getFilters().get(this.$roleFilterId);if(c){c.setValue(g)}if(!e.session&&f){b=d.getDataSource().items;for(a=0,h=b.length;a<h;++a){b[a].set(f,g)}}}},processUpdate:function(f,i){var d=this,h=d.inverse.cls,g=i.R,c,a,b,e;if(g){for(c in g){a=f.peekRecord(h,c);if(a){e=f.getEntityList(d.cls,g[c]);b=d.getAssociatedItem(a);if(b){b.loadData(e);b.complete=!0}else {a[d.getterName](null,null,e)}}else {f.onInvalidAssociationEntity(h,c)}}}},findRecords:function(l,h,e,k){var d=e,b=l.getRefs(h,this,!0),j=this.association.field,i,a,c,g,m,f;if(j&&(b||k)){i=j.name;d=[];if(e){f={};for(g=0,m=e.length;g<m;++g){a=e[g];c=a.id;if(b&&b[c]){d.push(a)}else {if(k&&a.data[i]===undefined){d.push(a);a.data[i]=h.id;l.updateReference(a,j,h.id,undefined)}}f[c]=!0}}if(b){for(c in b){if(!f||!f[c]){d.push(b[c])}}}}return d},processLoad:function(e,d,c,a){var b=c;if(a){b=this.findRecords(a,d,c,!0)}this.onLoadMany(d,b,a);return b},adoptAssociated:function(f,d){var c=this.getAssociatedItem(f),b,a,e;if(c){c.setSession(d);b=c.getData().items;for(a=0,e=b.length;a<e;++a){d.adopt(b[a])}}},createGetter:function(){var a=this;return function(c,d,b){return a.getAssociatedStore(this,c,d,b,!0)}},createSetter:null,onAddToMany:function(c,a){var b=c.getAssociatedEntity();if(this.association.field){this.syncFK(a,b,!1)}else {this.setInstances(b,a)}},onLoadMany:function(b,a,c){this.setInstances(b,a,c)},onRemoveFromMany:function(b,a){if(this.association.field){this.syncFK(a,b.getAssociatedEntity(),!0)}else {this.setInstances(null,a)}},read:function(b,j,i,h){var c=this,g=c.inverse.getInstanceName(),a=c.callParent([b,j,i,h]),e,f,d;if(a){e=b[c.getterName](null,null,a);delete b.data[c.role];a=e.getData().items;for(d=0,f=a.length;d<f;++d){a[d][g]=b}}},setInstances:function(c,i,j){var k=this.inverse.getInstanceName(),h=c?c.getId():null,d=this.association.field,l=i.length,b,a,e,f,g;for(b=0;b<l;++b){a=i[b];a[k]=c;if(d){g=d.name;f=a.data;e=f[g];if(e!==h){f[g]=h;if(j){j.updateReference(a,d,h,e)}}}}},syncFK:function(c,d,f){var i=this.association.getFieldName(),g=this.inverse,k=g.setterName,j=g.getInstanceName(),h=c.length,l=d.getId(),e,a,b;while(h-->0){a=c[h];e=!a.isEqual(l,a.get(i));b=f?null:d;if(e!==f){a.changingKey=!0;a[k](b);a.changingKey=!1}else {a[j]=b}}}}),Right:Ext.define(null,{extend:'Ext.data.schema.Role',left:!1,side:'right',onDrop:function(a,c){var b=this.association.field;if(b){a.set(b.name,null)}a[this.getInstanceName()]=null},createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(b,c,d){return a.doSetFK(this,b,c,d)}},checkMembership:function(d,b){var c=this.association.field,a;if(c){a=this.getSessionStore(d,b.get(c.name));if(a&&!a.contains(b)){a.add(b)}}},onValueChange:function(b,f,d,l){var c=this,j=c.getInstanceName(),m=c.cls,i,g,a,h,e,k;if(!b.changingKey){i=d||d===0;if(!i){b[j]=null}if(f){a=c.getSessionStore(f,l);if(a){a.remove(b)}if(i){a=c.getSessionStore(f,d);if(a&&!a.isLoading()){a.add(b)}if(m){k=f.peekRecord(m,d)}b[j]=k||undefined}}else {g=b.joined;if(g){for(h=g.length-1;h>=0;h--){a=g[h];if(a.isStore){e=a.getAssociatedEntity();if(e&&e.self===c.cls&&e.getId()===l){a.remove(b)}}}}}}if(c.owner&&d===null){c.association.schema.queueKeyCheck(b,c)}},checkKeyForDrop:function(a){var b=this.association.field;if(a.get(b.name)===null){a.drop()}},getSessionStore:function(c,d){var b=this.cls,a;if(b){a=c.peekRecord(b,d);if(a){return this.inverse.getAssociatedItem(a)}}},read:function(b,f,e,d){var c=this.callParent([b,f,e,d]),a;if(c){a=c[0];if(a){b[this.getInstanceName()]=a;delete b.data[this.role]}}}})});Ext.define('Ext.data.schema.ManyToMany',{extend:Ext.data.schema.Association,isManyToMany:!0,isToMany:!0,kind:'many-to-many',Left:Ext.define(null,{extend:'Ext.data.schema.Role',isMany:!0,digitRe:/^\d+$/,findRecords:function(i,k,f){var l=i.getMatrixSlice(this.inverse,k.id),g=l.members,h=[],m=this.cls,d,e,j,a,c,b;if(f){d={};for(e=0,j=f.length;e<j;++e){b=f[e];a=b.id;c=g[a];if(!(c&&c[2]===-1)){h.push(b)}d[a]=!0}}for(a in g){c=g[a];if(!d||!d[a]&&(c&&c[2]!==-1)){b=i.peekRecord(m,a);if(b){h.push(b)}}}return h},onIdChanged:function(b,d,c){var a=this.getAssociatedItem(b);if(a){a.getFilters().get(this.$roleFilterId).setValue(c)}},processLoad:function(e,d,b,c){var a=b;if(c){a=this.findRecords(c,d,b);this.onAddToMany(e,a,!0)}return a},processUpdate:function(b,f){var a=this,i=a.inverse.cls,h=f.R,e,c,d,g;if(h){for(e in h){c=b.peekRecord(i,e);if(c){g=b.getEntityList(a.cls,h[e]);d=a.getAssociatedItem(c);if(d){d.loadData(g);d.complete=!0}else {c[a.getterName](null,null,g)}}else {b.onInvalidAssociationEntity(i,e)}}}a.processMatrixBlock(b,f.C,1);a.processMatrixBlock(b,f.D,-1)},checkMembership:function(l,i){var d=l.getMatrix(this.association,!0),g,j,k,f,e,h,c,m,b,a;if(!d){return}g=this.left?d.right:d.left;j=g.inverse.role.cls;k=this.inverse;e=g.slices;if(e){f=e[i.id];if(f){c=f.members;for(h in c){m=c[h];if(m[2]!==-1){b=l.peekRecord(j,h);if(b){a=k.getAssociatedItem(b);if(a){a.matrixUpdate=1;a.add(i);a.matrixUpdate=0}}}}}}},onStoreCreate:function(d,c,e){var b=this,a;if(c){a=c.getMatrixSlice(b.inverse,e);a.attach(d);a.notify=b.onMatrixUpdate;a.scope=b}},processMatrixBlock:function(f,b,g){var e=this.inverse,d=this.digitRe,c,a;if(b){for(a in b){if(d.test(a)){a=parseInt(a,10)}c=f.getMatrixSlice(e,a);c.update(b[a],g)}}},createGetter:function(){var a=this;return function(c,d,b){return a.getAssociatedStore(this,c,d,b,!1)}},onAddToMany:function(a,b,c){if(!a.matrixUpdate){a.matrixUpdate=1;a.matrix.update(b,c===!0?0:1);a.matrixUpdate=0}},onRemoveFromMany:function(a,b){if(!a.matrixUpdate){a.matrixUpdate=1;a.matrix.update(b,-1);a.matrixUpdate=0}},read:function(a,f,e,d){var b=this,c=b.callParent([a,f,e,d]);if(c){a[b.getterName](null,null,c);delete a.data[b.role]}},onMatrixUpdate:function(f,e,g){var a=f.store,b,c,d;if(a&&!a.loading&&!a.matrixUpdate){a.matrixUpdate=1;b=a.indexOfId(e);if(g<0){if(b>=0){a.remove([b])}}else {if(b<0){d=a.getSession().getEntry(this.type,e);c=d&&d.record;if(c){a.add(c)}}}a.matrixUpdate=0}},adoptAssociated:function(e,d){var a=this.getAssociatedItem(e),c,b,f;if(a){a.setSession(d);this.onStoreCreate(a,d,e.getId());c=a.getData().items;for(b=0,f=c.length;b<f;++b){d.adopt(c[b])}}}},function(){var a=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:a,left:!1,side:'right'})},null,'Ext.data.schema.ManyToMany')})});Ext.define('Ext.util.Inflector',{singleton:!0,plurals:[[/(quiz)$/i,'$1zes'],[/^(ox)$/i,'$1en'],[/([m|l])ouse$/i,'$1ice'],[/(matr|vert|ind)ix|ex$/i,'$1ices'],[/(x|ch|ss|sh)$/i,'$1es'],[/([^aeiouy]|qu)y$/i,'$1ies'],[/(hive)$/i,'$1s'],[/(?:([^f])fe|([lr])f)$/i,'$1$2ves'],[/sis$/i,'ses'],[/([ti])um$/i,'$1a'],[/(buffal|tomat|potat)o$/i,'$1oes'],[/(bu)s$/i,'$1ses'],[/(alias|status|sex)$/i,'$1es'],[/(octop|vir)us$/i,'$1i'],[/(ax|test)is$/i,'$1es'],[/^(p)erson$/i,'$1eople'],[/^(m)an$/i,'$1en'],[/(.*)(child)(ren)?$/i,'$1$2ren'],[/s$/i,'s'],[/$/,'s']],singulars:[[/(address)$/i,'$1'],[/(quiz)zes$/i,'$1'],[/(matr)ices$/i,'$1ix'],[/(vert|ind)ices$/i,'$1ex'],[/^(ox)en/i,'$1'],[/(alias|status)es$/i,'$1'],[/(octop|vir)i$/i,'$1us'],[/(cris|ax|test)es$/i,'$1is'],[/(shoe)s$/i,'$1'],[/(o)es$/i,'$1'],[/(bus)es$/i,'$1'],[/([m|l])ice$/i,'$1ouse'],[/(x|ch|ss|sh)es$/i,'$1'],[/(m)ovies$/i,'$1ovie'],[/(s)eries$/i,'$1eries'],[/([^aeiouy]|qu)ies$/i,'$1y'],[/([lr])ves$/i,'$1f'],[/(tive)s$/i,'$1'],[/(hive)s$/i,'$1'],[/([^f])ves$/i,'$1fe'],[/(^analy)ses$/i,'$1sis'],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,'$1$2sis'],[/([ti])a$/i,'$1um'],[/(n)ews$/i,'$1ews'],[/(p)eople$/i,'$1erson'],[/s$/i,'']],uncountable:['sheep','fish','series','species','money','rice','information','equipment','grass','mud','offspring','deer','means'],singular:function(b,a){this.singulars.unshift([b,a])},plural:function(b,a){this.plurals.unshift([b,a])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(a){return Ext.Array.indexOf(this.uncountable,a)!==-1},pluralize:function(a){if(this.isTransnumeral(a)){return a}var e=this.plurals,f=e.length,d,b,c;for(c=0;c<f;c++){d=e[c];b=d[0];if(b==a||b.test&&b.test(a)){return a.replace(b,d[1])}}return a},singularize:function(a){if(this.isTransnumeral(a)){return a}var e=this.singulars,f=e.length,d,b,c;for(c=0;c<f;c++){d=e[c];b=d[0];if(b==a||b.test&&b.test(a)){return a.replace(b,d[1])}}return a},classify:function(a){return Ext.String.capitalize(this.singularize(a))},ordinalize:function(a){var c=parseInt(a,10),d=c%10,b=c%100;if(11<=b&&b<=13){return a+'th'}else {switch(d){case 1:return a+'st';case 2:return a+'nd';case 3:return a+'rd';default:return a+'th';}}}},function(){var a,b={alumnus:'alumni',cactus:'cacti',focus:'foci',nucleus:'nuclei',radius:'radii',stimulus:'stimuli',ellipsis:'ellipses',paralysis:'paralyses',oasis:'oases',appendix:'appendices',index:'indexes',beau:'beaux',bureau:'bureaux',tableau:'tableaux',woman:'women',child:'children',man:'men',corpus:'corpora',criterion:'criteria',curriculum:'curricula',genus:'genera',memorandum:'memoranda',phenomenon:'phenomena',foot:'feet',goose:'geese',tooth:'teeth',antenna:'antennae',formula:'formulae',nebula:'nebulae',vertebra:'vertebrae',vita:'vitae'};for(a in b){if(b.hasOwnProperty(a)){this.plural(a,b[a]);this.singular(b[a],a)}}});Ext.define('Ext.data.schema.Namer',{mixins:[Ext.mixin.Factoryable],alias:'namer.default',isNamer:!0,capitalize:function(a){return Ext.String.capitalize(a)},fieldRole:function(a){var b=a.match(this.endsWithIdRe,'');if(b){a=a.substr(0,a.length-(b[1]||b[2]).length)}return this.apply('uncapitalize',a)},idField:function(a){return this.apply('uncapitalize,singularize',a)+'Id'},instanceName:function(a){return this.apply('underscore',a)},multiRole:function(a){return this.apply('undotted,uncapitalize,pluralize',a)},pluralize:function(a){return Ext.util.Inflector.pluralize(a)},readerRoot:function(a){return this.apply('uncapitalize',a)},singularize:function(a){return Ext.util.Inflector.singularize(a)},storeName:function(a){return this.apply('underscore',a)},uncapitalize:function(a){return Ext.String.uncapitalize(a)},underscore:function(a){return '_'+a},uniRole:function(a){return this.apply('undotted,uncapitalize,singularize',a)},undotted:function(c){var a,b;if(c.indexOf('.')<0){return c}a=c.split('.');b=a.length;while(b-->1){a[b]=this.apply('capitalize',a[b])}return a.join('')},getterName:function(a){var b=a.role;if(a&&a.isMany){return b}return 'get'+this.apply('capitalize',b)},inverseFieldRole:function(e,f,c,d){var a=this,b=a.apply(f?'uniRole':'multiRole',e),g=a.apply('pluralize',c),h=a.apply('undotted,pluralize',d);if(g.toLowerCase()!==h.toLowerCase()){b=c+a.apply('capitalize',b)}return b},manyToMany:function(c,e,d){var b=this,a=b.apply('undotted,capitalize,singularize',e)+b.apply('undotted,capitalize,pluralize',d);if(c){a=b.apply('capitalize',c+a)}return a},manyToOne:function(d,b,a,c){return this.apply('capitalize,singularize',a)+this.apply('capitalize',b)},matrixRole:function(a,c){var b=this.apply(a?'multiRole,capitalize':'multiRole',c);return a?a+b:b},oneToOne:function(d,b,a,c){return this.apply('undotted,capitalize,singularize',a)+this.apply('capitalize',b)},setterName:function(a){return 'set'+this.apply('capitalize',a.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(b,c){var e=this,h=e.cache,i=h[c]||(h[c]={}),a=i[b],d,g,f;if(!a){if(b.indexOf(',')<0){a=e[b](c)}else {g=(f=b.split(',')).length;a=c;for(d=0;d<g;++d){a=e.apply(f[d],a)}}i[b]=a}return a}});Ext.define('Ext.data.schema.Schema',{mixins:[Ext.mixin.Factoryable],alias:'schema.default',aliasPrefix:'schema.',isSchema:!0,type:'default',statics:{instances:{},get:function(a){var f=this,g=f.instances,c='default',e=a&&Ext.isString(a),b,d;if(a){if(a.isSchema){return a}c=e?a:a.id||c}if(!(b=g[c])){g[c]=b=f.create(a);b.id=c}else {if(a&&!e){d=Ext.merge({},b.config);Ext.merge(d,a);b.setConfig(d);b.config=d}}return b},lookupEntity:function(b){var a=null,e=this.instances,c,d,f;if(b){if(b.isEntity){a=b.self}else {if(Ext.isFunction(b)){a=b}else {if(Ext.isString(b)){a=Ext.ClassManager.get(b);if(a&&(!a.prototype||!a.prototype.isEntity)){a=null}if(!a){for(d in e){f=e[d];c=f.getEntity(b);if(c){if(a){Ext.raise('Ambiguous entity name "'+b+'". Defined by schema "'+a.schema.type+'" and "'+d+'"')}a=c}}}if(!a){Ext.raise('No such Entity "'+b+'".')}}}}}return a}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:'default',namespace:null,proxy:{type:'ajax',url:'{prefix}/{entityName}'},urlPrefix:''},onClassExtended:function(c,b){var a=b.alias;if(a&&!b.type){if(!Ext.isString(a)){a=a[0]}c.prototype.type=a.substring(this.prototype.aliasPrefix.length)}},constructor:function(a){this.initConfig(a);this.clear()},applyDefaultIdentifier:function(a){return a&&Ext.Factory.dataIdentifier(a)},applyNamer:function(b){var a=Ext.data.schema.Namer.create(b);a.schema=this;return a},applyNamespace:function(a){var b;if(a){b=a.length-1;if(a.charAt(b)!=='.'){a+='.'}}return a},applyProxy:function(a){return Ext.util.ObjectTemplate.create(a)},eachAssociation:function(d,c){var b=this.associations,a;for(a in b){if(b.hasOwnProperty(a)){if(d.call(c,a,b[a])===!1){break}}}},eachEntity:function(d,c){var b=this.entities,a;for(a in b){if(b.hasOwnProperty(a)){if(d.call(c,a,b[a].cls)===!1){break}}}},getAssociation:function(b){var a=this.associations[b];return a||null},getEntity:function(b){var a=this.entityClasses[b]||this.entities[b];return a&&a.cls||null},getEntityName:function(c){var d=this.getNamespace(),b,a;if(typeof c==='string'){a=c}else {a=c.$className||null}if(a){if(d){b=d.length;if(a.substring(0,b)!==d){return a}}if(b){a=a.substring(b)}}return a},hasAssociations:function(a){a=a.entityName||a;return !!this.associationEntityMap[a]},hasEntity:function(b){var a=this.getEntityName(b);return !!(this.entities[a]||this.entityClasses[a])},addMatrix:function(n,k,l,j,i){var a=this,h=a.getNamer(),m=a.associations,g=a.entities,c=j.type,b=i.type,p=j.field||h.apply('idField',c),o=i.field||h.apply('idField',b),r=j.role||h.matrixRole(l,c),q=i.role||h.matrixRole(l,b),d,f,e;f=g[c]||(g[c]={cls:null,name:c,associations:{}});e=g[b]||(g[b]={cls:null,name:b,associations:{}});++a.assocCount;m[k]=d=new Ext.data.schema.ManyToMany({name:k,schema:a,definedBy:n,left:{cls:f.cls,type:c,role:r,field:p,associationKey:j.associationKey},right:{cls:e.cls,type:b,role:q,field:o,associationKey:i.associationKey}});f.associations[d.right.role]=d.right;e.associations[d.left.role]=d.left;if(f.cls){a.associationEntityMap[f.cls.entityName]=!0}if(e.cls){a.associationEntityMap[e.cls.entityName]=!0}a.decorateModel(d)},addReference:function(g,d,c,n,p){var f=this,j=f.getNamer(),q=f.entities,k=f.associations,l=g.entityName,a=c.association,s=c.child,r=c.parent,b=c.role,e=c.type||r||s,m=c.inverse,o=Ext.isString(m)?{role:m}:m,h=o&&o.role,i,t;if(!b){if(!d||c.legacy){b=j.apply('uncapitalize',e)}else {b=j.apply('fieldRole',d.name)}}if(!h){h=j.inverseFieldRole(l,n,b,e)}if(!a){if(n){a=j.oneToOne(g,h,e,b)}else {a=j.manyToOne(g,h,e,b)}}if(p&&a in k){if(p(k[a],a,h,b)!==!1){return}}i=q[e]||(q[e]={cls:null,name:e,associations:{}});t=n?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne;a=new t({name:a,owner:s?'left':r?'right':null,definedBy:g,schema:f,field:d,nullable:d?!!d.allowBlank:!0,left:{cls:g,type:l,role:h,extra:o},right:{cls:i.cls,type:e,role:b,extra:c},meta:c});g.associations[b]=a.right;i.associations[h]=a.left;if(d){d.reference=a.right;g.references.push(d)}++f.assocCount;f.associationEntityMap[l]=!0;if(i.cls){f.associationEntityMap[i.cls.entityName]=!0}k[a.name]=a;if(a.right.cls){f.decorateModel(a)}},privates:{addEntity:function(a){var c=this,i=c.entities,e=a.entityName,b=i[e],j=a.fields,d,g,f,k,h;if(!b){i[e]=b={name:e,associations:{}}}else {d=b.associations;for(h in d){d[h].inverse.cls=a;c.associationEntityMap[e]=!0;c.decorateModel(d[h].association)}}b.cls=a;a.prototype.associations=a.associations=b.associations;c.entityClasses[a.$className]=b;++c.entityCount;for(f=0,k=j.length;f<k;++f){g=j[f];if(g.reference){c.addReferenceDescr(a,g)}}},addMatrices:function(c,a){var e=this,b,f,d;if(Ext.isString(a)){e.addMatrixDescr(c,null,a)}else {if(a[0]){for(b=0,f=a.length;b<f;++b){e.addMatrixDescr(c,null,a[b])}}else {for(d in a){e.addMatrixDescr(c,d,a[d])}}}},addMatrixDescr:function(i,f,a){var h=this,d=i.entityName,k=h.associations,e=h.getNamer(),c=a.left,b=a.right,j,g;if(Ext.isString(a)){if(a.charAt(0)==='#'){c={type:d};b={type:a.substring(1)}}else {if(a.charAt(j=a.length-1)==='#'){c={type:a.substring(0,j)};b={type:d}}else {if(e.apply('multiRole',d)<e.apply('multiRole',a)){c={type:d};b={type:a}}else {c={type:a};b={type:d}}}}}else {g=a.relation;if(c||!b&&e.apply('multiRole',d)<e.apply('multiRole',a.type)){if(!c||c===!0){c={type:d}}else {c=Ext.apply({type:d},c)}b=a}else {if(!b||b===!0){b={type:d}}else {b=Ext.apply({type:d},b)}c=a}}if(!f){f=e.manyToMany(g,c.type,b.type)}if(!(f in k)){h.addMatrix(i,f,g,c,b)}},addReferenceDescr:function(c,b){var d=this,a=b.$reference;if(Ext.isString(a)){a={type:a}}else {a=Ext.apply({},a)}d.addReference(c,b,a,b.unique)},addBelongsTo:function(a,b){this.addKeylessSingle(a,b,!1)},addHasOne:function(a,b){this.addKeylessSingle(a,b,!0)},addKeylessSingle:function(c,a,e){var d,b;a=Ext.apply({},this.checkLegacyAssociation(c,a));a.type=this.getEntityName(a.child||a.parent||a.type);d=a.foreignKey||a.type.toLowerCase()+'_id';b=c.getField(d);a.fromSingle=!0;if(b){b.$reference=a;b.unique=!0;a.legacy=!0}this.addReference(c,b,a,e)},addHasMany:function(f,a){var i=this,m=i.entities,g=i.pending,e,b,d,h,k,c,l,j;a=Ext.apply({},this.checkLegacyAssociation(f,a));a.type=this.getEntityName(a.child||a.parent||a.type);b=a.type;h=m[b];e=h&&h.cls;if(e){b=f.entityName;k=a.foreignKey||b.toLowerCase()+'_id';delete a.foreignKey;j=Ext.apply({},a.inverse);delete a.inverse;c=Ext.apply({},a);delete c.type;a=Ext.apply({type:b,inverse:c},j);l=c.child;if(l){delete c.child;a.parent=b}d=e.getField(k);if(d){d.$reference=a;a.legacy=!0}i.addReference(e,d,a,!1)}else {if(!g[b]){g[b]=[]}g[b].push([f,a])}},checkLegacyAssociation:function(c,a){var b;if(Ext.isString(a)){a={type:a}}else {a=Ext.apply({},a)}if(a.model){a.type=a.model;delete a.model}b=a.associatedName||a.name;if(b){delete a.associatedName;delete a.name;a.role=b}return a},afterKeylessAssociations:function(f){var c=this.pending,d=f.entityName,b=c[d],a,e;if(b){for(a=0,e=b.length;a<e;++a){this.addHasMany.apply(this,b[a])}delete c[d]}},clear:function(c){var a=this,b=a.timer;delete a.setConfig;if(b){window.clearTimeout(b);a.timer=null}a.associations={};a.associationEntityMap={};a.entities={};a.entityClasses={};a.pending={};a.assocCount=a.entityCount=0;if(c){a.setNamespace(null)}},constructProxy:function(c){var b=this,a=Ext.Object.chain(c),d=b.getProxy();a.schema=b;a.prefix=b.getUrlPrefix();return d.apply(a)},applyDecoration:function(a){var g=this,f=a.inverse.cls,e=g.getNamer(),b,c,d;if(f&&!a.decorated){a.decorated=!0;d=f.prototype;if(!(b=a.getterName)){a.getterName=b=e.getterName(a)}d[b]=a.createGetter();if(a.createSetter){if(!(c=a.setterName)){a.setterName=c=e.setterName(a)}d[c]=a.createSetter()}}},decorateModel:function(a){this.applyDecoration(a.left);this.applyDecoration(a.right)},processKeyChecks:function(g){var a=this,b=a.keyCheckQueue,e=a.timer,f,c,d;if(e){window.clearTimeout(e);a.timer=null}if(!b){return}do{b=a.keyCheckQueue;a.keyCheckQueue=[];for(c=0,f=b.length;c<f;++c){d=b[c];d.role.checkKeyForDrop(d.record)}}while(g&&a.keyCheckQueue.length)},queueKeyCheck:function(d,e){var a=this,b=a.keyCheckQueue,c=a.timer;if(!b){a.keyCheckQueue=b=[]}b.push({record:d,role:e});if(!c){a.timer=c=Ext.defer(a.processKeyChecks,a.getKeyCheckDelay(),a)}},rankEntities:function(){var d=this,e=d.entities,b=Ext.Object.getKeys(e),f=b.length,c,a;d.nextRank=1;b.sort();for(a=0;a<f;++a){c=e[b[a]].cls;if(!c.rank){d.rankEntity(c)}}},rankEntity:function(d){var c=d.associations,b,a,e;for(e in c){a=c[e];if(!a.left&&a.association.field){b=a.cls;if(!b.rank){this.rankEntity(b)}}}d.rank=this.nextRank++}}});Ext.define('Ext.data.AbstractStore',{mixins:[Ext.mixin.Observable,Ext.mixin.Factoryable],factoryConfig:{defaultType:'store',type:'store'},$configPrefixed:!1,$configStrict:!1,config:{filters:null,autoDestroy:undefined,storeId:null,statefulFilters:!1,sorters:null,remoteSort:{lazy:!0,$value:!1},remoteFilter:{lazy:!0,$value:!1},groupField:undefined,groupDir:'ASC',grouper:null,pageSize:25,autoSort:null,reloadOnClearSorters:!1},currentPage:1,loading:!1,isStore:!0,updating:0,constructor:function(c){var a=this,b;a.isInitializing=!0;a.mixins.observable.constructor.call(a,c);a.isInitializing=!1;b=a.getStoreId();if(!b&&(c&&c.id)){a.setStoreId(b=c.id)}if(b){Ext.data.StoreManager.register(a)}},createActiveRange:function(a){var b=Ext.apply({store:this},a);return new Ext.data.Range(b)},syncActiveRanges:function(){var b=this.activeRanges,c=b&&b.length,a;for(a=0;a<c;a++){b[a].refresh()}},getCount:function(){var a=this.getData();return a?a.getCount():0},rangeCached:function(a,b){return this.getData().getCount()>=Math.max(a,b)},find:function(g,h,d,e,b,c){var a=!e,f=!!(a&&c);return this.getData().findIndex(g,h,d,a,f,!b)},findRecord:function(){var a=this,b=a.find.apply(a,arguments);return b!==-1?a.getAt(b):null},findExact:function(b,c,a){return this.getData().findIndexBy(function(d){return d.isEqual(d.get(b),c)},this,a)},findBy:function(c,a,b){return this.getData().findIndexBy(c,a,b)},getAt:function(a){return this.getData().getAt(a)||null},getRange:function(d,b,a){var c=this.getData().getRange(d,Ext.isNumber(b)?b+1:b);if(a&&a.callback){a.callback.call(a.scope||this,c,d,b,a)}return c},getFilters:function(c){var b=this,a=b.callParent();if(!a&&c!==!1){b.setFilters([]);a=b.callParent()}return a},applyFilters:function(b,a){var c=this,d=!a;if(d){a=c.createFiltersCollection()}if(b!==a){if(b&&b.isCollection){b=b.items.slice()}a.add(b);if(d){c.onRemoteFilterSet(a,c.getRemoteFilter())}}return a},getSorters:function(c){var b=this,a=b.callParent();if(!a&&c!==!1){b.setSorters([]);a=b.callParent()}return a},applySorters:function(d,a){var b=this,c;if(!a){a=b.createSortersCollection();c=!0}a.add(d);if(c){b.onRemoteSortSet(a,b.getRemoteSort())}return a},filter:function(a,c,b){if(Ext.isString(a)){a={property:a,value:c}}this.suppressNextFilter=!!b;this.getFilters().add(a);this.suppressNextFilter=!1},removeFilter:function(a,d){var b=this,c=b.getFilters();b.suppressNextFilter=!!d;if(a instanceof Ext.util.Filter){c.remove(a)}else {c.removeByKey(a)}b.suppressNextFilter=!1},updateAutoSort:function(a){this.getData().setAutoSort(a)},updateRemoteSort:function(a){this.onRemoteSortSet(this.getSorters(!1),a)},updateRemoteFilter:function(a){this.onRemoteFilterSet(this.getFilters(!1),a)},addFilter:function(b,a){this.suppressNextFilter=!!a;this.getFilters().add(b);this.suppressNextFilter=!1},filterBy:function(b,a){this.getFilters().add({filterFn:b,scope:a||this})},clearFilter:function(c){var b=this,a=b.getFilters(!1);if(!a||a.getCount()===0){return}b.suppressNextFilter=!!c;a.removeAll();b.suppressNextFilter=!1},isFiltered:function(){return this.getFilters().getCount()>0},isSorted:function(){var a=this.getSorters(!1);return !!(a&&a.length>0)||this.isGrouped()},addFieldTransform:function(b){if(b.getTransform()){return}var e=b.getProperty(),d=this.getModel(),c,a;if(d){c=d.getField(e);a=c?c.getSortType():null}if(a&&a!==Ext.identityFn){b.setTransform(a)}},beginUpdate:function(){if(!this.updating++&&this.hasListeners.beginupdate){this.fireEvent('beginupdate')}},endUpdate:function(){if(this.updating&&!--this.updating){if(this.hasListeners.endupdate){this.fireEvent('endupdate')}this.onEndUpdate()}},getState:function(){var c=this,e=[],g=c.getFilters(),f=c.getGrouper(),a,d,b;c.getSorters().each(function(a){e[e.length]=a.getState();d=!0});if(c.statefulFilters&&c.saveStatefulFilters){d=!0;a=[];g.each(function(b){a[a.length]=b.getState()})}if(f){d=!0}if(d){b={};if(e.length){b.sorters=e}if(a){b.filters=a}if(f){b.grouper=f.getState()}}return b},applyState:function(b){var a=this,e=b.sorters,c=b.filters,d=b.grouper;if(e){a.getSorters().replaceAll(e)}if(c){a.saveStatefulFilters=!0;a.getFilters().replaceAll(c)}if(d){a.setGrouper(d)}},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var a=this;if(a.hasListeners.beforedestroy){a.fireEvent('beforedestroy',a)}a.destroying=!0;if(a.getStoreId()){Ext.data.StoreManager.unregister(a)}a.doDestroy();if(a.hasListeners.destroy){a.fireEvent('destroy',a)}a.callParent()},doDestroy:Ext.emptyFn,sort:function(c,b,d){var a=this;if(arguments.length===0){if(a.getRemoteSort()){a.load()}else {a.forceLocalSort()}}else {a.getSorters().addSort(c,b,d)}},onBeforeCollectionSort:function(b,a){if(a){this.fireEvent('beforesort',this,a.getRange())}},onSorterEndUpdate:function(){var a=this,d=!0,b=a.getSorters(!1),c;if(a.settingGroups||!b){return}b=b.getRange();c=b.length;if(a.getRemoteSort()){if(b.length||a.getReloadOnClearSorters()){d=!1;a.load({callback:function(){a.fireEvent('sort',a,b)}})}}else {if(c){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}}if(d){a.fireEvent('sort',a,b)}},onFilterEndUpdate:function(){var a=this,b=a.suppressNextFilter,c=a.getFilters(!1);if(!c){return}if(a.getRemoteFilter()){a.currentPage=1;if(!b){a.load()}}else {if(!b){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}}if(a.trackStateChanges){a.saveStatefulFilters=!0}a.fireEvent('filterchange',a,a.getFilters().getRange())},updateGroupField:function(a){if(a){this.setGrouper({property:a,direction:this.getGroupDir()})}else {this.setGrouper(null)}},getGrouper:function(){return this.getData().getGrouper()},group:function(b,e){var a=this,d=a.getSorters(!1),f=b||d&&d.length,c=a.getData();if(b&&typeof b==='string'){b={property:b,direction:e||a.getGroupDir()}}a.settingGroups=!0;if(b===c.getGrouper()){c.updateGrouper(b)}else {c.setGrouper(b)}delete a.settingGroups;if(f){if(a.getRemoteSort()){if(!a.isInitializing){a.load({scope:a,callback:function(){a.fireGroupChange()}})}}else {a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.fireGroupChange()}}else {a.fireGroupChange()}},fireGroupChange:function(b){var a=this;if(!a.isConfiguring&&!a.destroying&&!a.destroyed){a.fireGroupChangeEvent(b||a.getGrouper())}},fireGroupChangeEvent:function(a){this.fireEvent('groupchange',this,a)},clearGrouping:function(){this.group(null)},getGroupField:function(){var a=this.getGrouper(),b='';if(a){b=a.getProperty()}return b},isGrouped:function(){return !!this.getGrouper()},applyGrouper:function(a){this.group(a);return this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{_metaProperties:{count:'getCount',first:'first',last:'last',loading:'hasPendingLoad',totalCount:'getTotalCount'},interpret:function(c){var b=this,a=b._metaProperties[c];return a&&b[a]()},loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(a,b){if(a){a[b?'on':'un']('endupdate','onFilterEndUpdate',this)}},onRemoteSortSet:function(d,c){var b=this,a;if(d){d[c?'on':'un']('endupdate','onSorterEndUpdate',b);a=b.getData();if(a){a[c?'un':'on']('beforesort','onBeforeCollectionSort',b)}}}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}});Ext.define('Ext.data.Error',{isError:!0,$configPrefixed:!1,config:{field:null,message:''},constructor:function(a){this.initConfig(a);this.msg=this.message}});Ext.define('Ext.data.ErrorCollection',{extend:Ext.util.MixedCollection,alternateClassName:'Ext.data.Errors',init:function(d){var b=this,h=d.fields,k=d.data,g,a,c,i,f,j,e;for(c=0,i=h.length;c<i;++c){a=h[c];e=a.name;j=k[e];if(a.validate&&!a.validate.$nullFn){g=b.length;f=a.validate(j,null,b,d);if(g===b.length&&f!==!0){b.add(e,f)}}}return b},add:function(b,f){var d=this,e=Ext.data.field.Field.defaultInvalidMessage,a=b,c;if(Ext.isString(b)){a=new Ext.data.Error({field:b,message:f||e})}else {if(!a.isError){a=new Ext.data.Error({field:a.field||a.name,message:a.error||a.message||a.msg||e})}b=a.field}c=d.get(b);if(c){if(Ext.isArray(c)){c.push(a);return c}d.removeAtKey(b);a=[c,a];a.field=b;a=[a]}return d.callParent([a])},getKey:function(a){return a.field},isValid:function(){return this.length===0},getByField:function(b){var a=this.get(b);if(a&&!Ext.isArray(a)){a=[a]}return a||[]}});Ext.define('Ext.data.operation.Operation',{alternateClassName:'Ext.data.Operation',isOperation:!0,config:{synchronous:!1,url:'',params:undefined,callback:undefined,scope:undefined,resultSet:null,response:null,request:null,records:null,id:undefined,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:!1,running:!1,complete:!1,success:undefined,exception:!1,error:undefined,idPrefix:'ext-operation-',constructor:function(a){var b=a&&a.scope;this.initConfig(a);if(a){a.scope=b}if(b){this.setScope(b);this.initialConfig.scope=b}this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var a=this,b;delete a.error;delete a.success;a.complete=a.exception=!1;a.setStarted();a.request=b=a.doExecute();if(b){b.setOperation(a)}return b},doExecute:Ext.emptyFn,abort:function(){var a=this,c=a.request,b;a.aborted=!0;if(a.running&&c){b=a.getProxy();if(b&&!b.destroyed){b.abort(c)}a.request=null}a.running=!1},process:function(c,e,d,b){var a=this;b=b!==!1;a.setResponse(d);a.setResultSet(c);if(c.getSuccess()){a.doProcess(c,e,d);a.setSuccessful(b)}else {if(b){a.setException(c.getMessage())}}},_commitSetOptions:{convert:!0,commit:!0},doProcess:function(l,n,m){var j=this,i=j._commitSetOptions,e=j.getRecords(),k=e.length,g=e[0].clientIdProperty,f=l.getRecords(),h=f?f.length:0,d,c,b,a;if(h&&g){d=Ext.Array.toValueMap(e,'id');for(a=0;a<h;++a){c=f[a];b=d[c[g]];if(b){delete d[b.id];delete c[g];b.set(c,i)}}for(a in d){d[a].commit()}}else {for(a=0;a<k;++a){b=e[a];if(h===0||!(c=f[a])){b.commit()}else {b.set(c,i)}}}},setStarted:function(){this.started=this.running=!0},setCompleted:function(){var a=this,b;a.complete=!0;a.running=!1;if(!a.destroying){a.triggerCallbacks()}if(a.destroyed){return}b=a.getProxy();if(b&&!b.destroyed){b.completeOperation(a)}},setSuccessful:function(a){this.success=!0;if(a){this.setCompleted()}},setException:function(b){var a=this;a.exception=!0;a.success=a.running=!1;a.error=b;a.setCompleted()},triggerCallbacks:function(){var a=this,b=a.getInternalCallback();if(b){b.call(a.getInternalScope()||a,a);if(a.destroyed){return}a.setInternalCallback(null);a.setInternalScope(null)}b=a.getCallback();if(b){b.call(a.getScope()||a,a.getRecords(),a,a.wasSuccessful());if(a.destroyed){return}a.setCallback(null);a.setScope(null)}},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var a;return this._records||((a=this.getResultSet())?a.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&this.success===!0},allowWrite:function(){return !0},destroy:function(){var a=this;a.destroying=!0;if(a.running){a.abort()}a._params=a._callback=a._scope=a._resultSet=a._response=null;a.request=a._request=a._records=a._proxy=a._batch=null;a._recordCreator=a._internalCallback=a._internalScope=null;a.callParent()}});Ext.define('Ext.data.operation.Create',{extend:Ext.data.operation.Operation,alias:'data.operation.create',action:'create',isCreateOperation:!0,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}});Ext.define('Ext.data.operation.Destroy',{extend:Ext.data.operation.Operation,alias:'data.operation.destroy',action:'destroy',isDestroyOperation:!0,order:30,foreignKeyDirection:-1,doProcess:function(){var b=this.getRecords(),c=b.length,a;for(a=0;a<c;++a){b[a].setErased()}},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(a,e){var b={},d=a.idField,c=this.getNameProperty()||'name';b[d[c]]=a.id;return b}});Ext.define('Ext.data.operation.Read',{extend:Ext.data.operation.Operation,alias:'data.operation.read',action:'read',isReadOperation:!0,config:{filters:undefined,sorters:undefined,grouper:undefined,start:undefined,limit:undefined,page:undefined,addRecords:!1},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return !1}});Ext.define('Ext.data.operation.Update',{extend:Ext.data.operation.Operation,alias:'data.operation.update',action:'update',isUpdateOperation:!0,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}});Ext.define('Ext.data.validator.Validator',{mixins:[Ext.mixin.Factoryable],alias:'data.validator.base',isValidator:!0,factoryConfig:{cacheable:!0},type:'base',constructor:function(a){if(typeof a==='function'){this.fnOnly=!0;this.validate=a}else {this.initConfig(a)}},validate:function(){return !0},clone:function(){var a=this;if(a.fnOnly){return new Ext.data.validator.Validator(a.validate)}return new a.self(a.getCurrentConfig())}},function(a){Ext.Factory.validator=Ext.Factory.dataValidator});Ext.define('Ext.data.field.Field',{mixins:[Ext.mixin.Factoryable],alternateClassName:'Ext.data.Field',alias:'data.field.auto',aliasPrefix:'data.field.',type:'auto',factoryConfig:{defaultProperty:'name'},isDataField:!0,isField:!0,allowBlank:!0,allowNull:!1,critical:!1,defaultInvalidMessage:'This field is invalid',defaultValue:undefined,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:undefined,persist:null,reference:null,summary:null,summaryField:'',unique:!1,rank:null,stripRe:/[$,%]/g,calculated:!1,evil:!1,identifier:!1,onClassExtended:function(g,d){var e=d.sortType,c=g.prototype,f=c.validators,a=d.validators,b=d.alias;if(b){if(typeof b!=='string'){b=b[0]}if(b){c.type=b.substr(b.lastIndexOf('.')+1)}}if(e&&Ext.isString(e)){c.sortType=Ext.data.SortTypes[e]}if(a){if(!Ext.isArray(a)){a=[a]}delete d.validators;if(f){a=f.concat(a)}c.validators=a}},argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,calculateRe:/[^.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(d){var a=this,n=a.calculateRe,c,l,f,h,b,j,e,m,k,i,g;if(d){if(Ext.isString(d)){a.name=d}else {g=d.validators;if(g){delete d.validators;a.instanceValidators=g}Ext.apply(a,d)}}if(!a.allowNull){a.allowNull=!!a.reference}c=a.calculate;b=a.depends;if(c){a.convert=a.doCalculate;if(!b){if(!(b=c.$depends)){j={};k=Ext.Function.toCode(c);c.$depends=b=[];e=a.argumentNamesRe.exec(k);m=e?e[1]:'data';while(e=n.exec(k)){if(m===e[1]&&!j[i=e[2]]){j[i]=1;b.push(i)}}}a.depends=b}}f=a.defaultValue;if(a.convert){a.calculated=l=a.convert.length>1;a.evil=l&&!b}if(a.persist===null){a.persist=!c}h=a.sortType;if(!a.sortType){a.sortType=Ext.data.SortTypes.none}else {if(Ext.isString(h)){a.sortType=Ext.data.SortTypes[h]}}if(b&&typeof b==='string'){a.depends=[b]}a.cloneDefaultValue=f!==undefined&&(Ext.isDate(f)||Ext.isArray(f)||Ext.isObject(f))},setModelValidators:function(a){this._validators=null;this.modelValidators=a},constructValidators:function(a){var g,f,d,b,c,e;if(a){if(!(a instanceof Array)){a=[a]}g=this._validators;for(d=0,f=a.length;d<f;++d){b=a[d];if(b.fn){b=b.fn}c=Ext.Factory.dataValidator(b);if(!c.isPresence){g.push(c)}else {e=c}}if(e){this.presence=[e]}}},collate:function(d,e){var c=this,a=d,b=e;if(c.sortType){a=c.sortType(a);b=c.sortType(b)}return a===b?0:a<b?-1:1},compare:function(a,b){return a===b?0:a<b?-1:1},isEqual:function(a,b){return this.compare(a,b)===0},convert:null,serialize:null,validate:function(a,e,f,g){var d=this,h=d.getValidators(),c,b;b=this.presence;if(b&&(a==null||a==='')){c=d.validateGroup(b,a,e,f,g);if(c!==!0){return c}}return d.validateGroup(h,a,e,f,g)},validateGroup:function(e,j,f,c,i){var b='',g,h,d,a;for(d=0,h=e.length;d<h;++d){g=e[d];a=g.validate(j,i);if(a!==!0){a=a||this.defaultInvalidMessage;if(c){if(c.isMixedCollection){c.add(this.name,a)}else {if(c.isCollection){c.add(a)}else {c.push(a)}}b=b||a}else {if(f){if(b){b+=f}b+=a}else {b=a;break}}}}return b||!0},doCalculate:function(b,a){return a?this.calculate(a.data):b},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var a=this.mapping;return !!(a||a===0)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getSummary:function(){var b=this,c=b.doneSummary,a=b.summary;if(!c){b.doneSummary=!0;if(a){b.summary=a=Ext.Factory.dataSummary(a)}}return a||null},getType:function(){return 'auto'},privates:{getValidators:function(){var a=this,b=a._validators;if(!b){a._validators=b=[];a.constructValidators(a.validators);a.constructValidators(a.modelValidators);a.constructValidators(a.instanceValidators)}return b}},deprecated:{'5.1':{methods:{getSortDir:function(){return this.sortDir}}}}});Ext.define('Ext.data.field.Array',{extend:Ext.data.field.Field,alias:'data.field.array',isArrayField:!0,itemType:{type:'auto'},getType:function(){return 'array'},collate:function(a,b){return this.collateOrCompare(a,b,'collate')},compare:function(a,b){return this.collateOrCompare(a,b,'compare')},convert:function(a){return this.doForEach((a||a===0)&&!Ext.isArray(a)?[a]:a,'convert')},serialize:function(a){return this.doForEach(a,'serialize')},getItemField:function(){var b=this,a=b.itemType;if(!b.itemField){if(typeof a==='string'){a={type:a}}else {if(!(a&&a.isDataField)){a=Ext.apply({type:'auto'},a)}}b.itemField=Ext.data.field.Field.create(a)}return b.itemField},doForEach:function(b,f){if(!b){return this.allowNull?null:[]}var d=b.length,e=Array(d),c=this.getItemField(),a;for(a=0;a<d;++a){e[a]=c[f]?c[f](b[a]):b[a]}return e},collateOrCompare:function(a,b,i){var h=this.getItemField(),c,d,e,g,f;if(!a&&!b||a===b){return 0}if(!a||!b){return a?1:-1}d=a.length;e=b.length;g=Math.min(d,e);for(c=0;c<g;++c){f=h[i](a[c],b[c]);if(f!==0){return f}}return d===e?0:d<e?-1:1}});Ext.define('Ext.data.field.Boolean',{extend:Ext.data.field.Field,alias:['data.field.bool','data.field.boolean'],isBooleanField:!0,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(a){if(typeof a==='boolean'){return a}if(this.allowNull&&(a===undefined||a===null||a==='')){return null}return this.trueRe.test(String(a))},getType:function(){return 'bool'}});Ext.define('Ext.data.field.Date',{extend:Ext.data.field.Field,alias:'data.field.date',sortType:'asDate',isDateField:!0,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(d,e){var b=d instanceof Date,c=e instanceof Date,a;if(c&&b){a=d.getTime()-e.getTime();if(a===0){a=0}else {a=a<0?-1:1}}else {if(b===c){a=0}else {a=b?1:-1}}return a},convert:function(a){if(!a){return null}if(a instanceof Date){return a}var c=this.dateReadFormat||this.dateFormat,b;if(c){return Ext.Date.parse(a,c,this.useStrict)}b=Date.parse(a);return b?new Date(b):null},serialize:function(b){var c=null,a;if(Ext.isDate(b)){a=this.getDateWriteFormat();c=a?Ext.Date.format(b,a):b}return c},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var a=this;if(a.hasOwnProperty('dateWriteFormat')){return a.dateWriteFormat}if(a.hasOwnProperty('dateFormat')){return a.dateFormat}return a.dateWriteFormat||a.dateFormat||'timestamp'},getType:function(){return 'date'}});Ext.define('Ext.data.field.Integer',{extend:Ext.data.field.Field,alias:['data.field.int','data.field.integer'],isNumeric:!0,isIntegerField:!0,numericType:'int',convert:function(b){if(typeof b==='number'){return this.getNumber(b)}var d=b==null||b==='',c=this.allowNull,a;if(d){a=c?null:0}else {a=this.parse(b);if(c&&isNaN(a)){a=null}}return a},getNumber:function(a){return parseInt(a,10)},getType:function(){return this.numericType},parse:function(a){return parseInt(String(a).replace(this.stripRe,''),10)},sortType:function(a){if(a==null){a=Infinity}return a}});Ext.define('Ext.data.field.Number',{extend:Ext.data.field.Integer,alias:['data.field.float','data.field.number'],isIntegerField:!1,isNumberField:!0,numericType:'float',getNumber:Ext.identityFn,parse:function(a){return parseFloat(String(a).replace(this.stripRe,''))}});Ext.define('Ext.data.field.String',{extend:Ext.data.field.Field,alias:'data.field.string',sortType:'asUCString',isStringField:!0,convert:function(a){var b=this.allowNull?null:'';return a===undefined||a===null?b:String(a)},getType:function(){return 'string'}});Ext.define('Ext.data.identifier.Generator',{'abstract':!0,mixins:[Ext.mixin.Factoryable],alias:'data.identifier.default',factoryConfig:{defaultType:'sequential'},isGenerator:!0,config:{id:null},constructor:function(c){var b=this,a;b.initConfig(c);a=b.getId();if(a){Ext.data.identifier.Generator.all[a]=b}},privates:{clone:function(b){var a=this.getInitialConfig();a=b?Ext.apply({},b,a):a;return new this.self(a)},statics:{all:{}}}},function(){var b=this,a=Ext.Factory,c=a.dataIdentifier;a.dataIdentifier=function(a){var d=Ext.isString(a)?a:a&&a.id,e=d&&b.all[d];return e||c(a)}});Ext.define('Ext.data.identifier.Sequential',{extend:Ext.data.identifier.Generator,alias:'data.identifier.sequential',config:{increment:1,prefix:null,seed:1},generate:function(){var a=this,c=a._seed,b=a._prefix;a._seed+=a._increment;return b!==null?b+c:c}});Ext.define('Ext.data.Model',{alternateClassName:'Ext.data.Record',isEntity:!0,isModel:!0,validIdRe:null,erasing:!1,loadOperation:null,loadCount:0,observableType:'record',crudState:'R',crudStateWas:null,constructor:function(b,g,p){var a=this,c=a.self,f=c.identifier,n=Ext.data.Model,k=n.identifier,l=a.idField.name,j,d,h,m,o,e,i;a.data=a.data=b||(b={});a.internalId=m=k.generate();if((j=b) instanceof Array){a.data=b={};i=a.getFields();o=Math.min(i.length,j.length);for(e=0;e<o;++e){b[i[e].name]=j[e]}}if(!(h=c.initializeFn)){c.initializeFn=h=n.makeInitializeFn(c)}if(!h.$nullFn){c.initializeFn(a)}if(!a.isSummaryModel){if(!(a.id=d=b[l])&&d!==0){if(g){f=g.getIdentifier(c);d=f.generate()}else {if(k===f){d=m}else {d=f.generate()}}b[l]=a.id=d;a.phantom=!0;a.crudState='C'}if(g&&!p){g.add(a)}if(a.phantom){a.crudStateWas='C'}}if(a.init&&Ext.isFunction(a.init)){a.init()}},editing:!1,dirty:!1,session:null,dropped:!1,erased:!1,clientIdProperty:null,evented:!1,phantom:!1,idProperty:'id',manyToMany:null,identifier:null,previousValues:undefined,proxy:undefined,schema:'default',summary:null,versionProperty:null,generation:1,validationSeparator:null,convertOnSet:!0,beginEdit:function(){var a=this,c=a.modified,b=a.previousValues;if(!a.editing){a.editing=!0;a.editMemento={dirty:a.dirty,data:Ext.apply({},a.data),generation:a.generation,modified:c&&Ext.apply({},c),previousValues:b&&Ext.apply({},b)}}},calculateSummary:function(f){var g=this.getFields(),j=g.length,i=f.length,c,a,d,h,e,b;for(c=0;c<j;++c){b=g[c];d=b.getSummary();if(d){a=a||{};e=b.name;h=b.summaryField||e;a[e]=d.calculate(f,h,'data',0,i)}}if(a){this.set(a,this._commitOptions)}},cancelEdit:function(){var a=this,c=a.editMemento,b=a.validation;if(c){a.editing=!1;Ext.apply(a,c);a.editMemento=null;if(b&&b.syncGeneration!==a.generation){b.syncGeneration=0}}},endEdit:function(d,b){var a=this,c=a.editMemento;if(c){a.editing=!1;a.editMemento=null;a.previousValues=c.previousValues;if(!d){if(!b){b=a.getModifiedFieldNames(c.data)}if(a.dirty||b&&b.length){a.callJoined('afterEdit',[b])}}}},getField:function(a){return this.self.getField(a)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(b,a){this.set(this.idProperty,b,a)},getPrevious:function(b){var a=this.previousValues;return a&&a[b]},isModified:function(b){var a=this.modified;return !!(a&&a.hasOwnProperty(b))},getModified:function(a){var b;if(this.isModified(a)){b=this.modified[a]}return b},get:function(a){return this.data[a]},_singleProp:{},_rejectOptions:{convert:!1,silent:!0},set:function(i,A,K){var a=this,G=a.self,v=a.data,f=a.modified,B=a.previousValues,u=a.session,n=Ext.isString(i),e=n?K:A,y=e?e.convert!==!1:a.convertOnSet,J=a.fieldsMap,E=e&&e.silent,D=e&&e.commit,I=!(e&&e.refs===!1)&&u,F=!(e&&e.dirty===!1&&!D),k=null,d=0,r=a.associations,j,b,z,H,c,q,p,w,s,x,t,o,l,m,h,g,C;if(n){g=a._singleProp;g[i]=A}else {g=i}if(!(l=G.rankedFields)){l=G.rankFields()}t=l.length;do{for(c in g){h=g[c];j=v[c];p=a;b=J[c];if(b){if(y&&b.convert){h=b.convert(h,a)}p=b;m=b.reference}else {m=null}if(p.isEqual(j,h)){continue}v[c]=h;(k||(k=[])).push(c);(B||(a.previousValues=B={}))[c]=j;if(m&&m.cls){if(I){u.updateReference(a,b,h,j)}m.onValueChange(a,u,h,j)}x=(s=b&&b.dependents)&&s.length;while(x-->0){(w=s[x]).dirty=!0;d=d?Math.min(d,w.rank):w.rank}if(!b||b.persist){if(f&&f.hasOwnProperty(c)){if(!F||p.isEqual(f[c],h)){delete f[c];a.dirty=-1}}else {if(F){if(!f){a.modified=f={}}a.dirty=!0;f[c]=j}}}if(c===a.idField.name){z=!0;q=j;o=h}}if(!d){break}b=l[d-1];b.dirty=!1;if(n){delete g[i]}else {g=a._singleProp;n=!0}i=b.name;g[i]=v[i];y=!0;for(;d<t;++d){if(l[d].dirty){break}}if(d<t){++d}else {d=0}}while(1);if(a.dirty<0){a.dirty=!1;for(H in f){if(f.hasOwnProperty(H)){a.dirty=!0;break}}}if(n){delete g[i]}++a.generation;if(z){a.id=o;a.onIdChanged(o,q);a.callJoined('onIdChanged',[q,o]);if(r){for(C in r){r[C].onIdChanged(a,q,o)}}}if(D){a.commit(E,k)}else {if(!E&&!a.editing&&k){a.callJoined('afterEdit',[k])}}return k},reject:function(c){var a=this,b=a.modified;if(b){a.set(b,a._rejectOptions)}a.dropped=!1;a.clearState();if(!c){a.callJoined('afterReject')}},commit:function(f,e){var a=this,b=a.versionProperty,d=a.data,c;a.clearState();if(b&&!a.phantom&&!isNaN(d[b])){++d[b]}a.phantom=!1;if(a.dropped){a.erased=c=!0}if(!f){if(c){a.callJoined('afterErase')}else {a.callJoined('afterCommit',[e])}}},clearState:function(){var a=this;a.dirty=a.editing=!1;a.editMemento=a.modified=null},drop:function(d){var a=this,b=a.associations,e=a.session,c;if(a.erased||a.dropped){return}a.dropped=!0;if(b&&d!==!1){for(c in b){b[c].onDrop(a,e)}}a.callJoined('afterDrop');if(a.phantom){a.setErased()}},join:function(b){var c=this,a=c.joined;if(!a){a=c.joined=[b]}else {if(!a.length){a[0]=b}else {Ext.Array.include(a,b)}}if(b.isStore&&!c.store){c.store=b}},unjoin:function(b){var c=this,a=c.joined,e=a&&a.length,d=c.store,f;if(b===c.session){c.session=null}else {if(e===1&&a[0]===b){a.length=0}else {if(e){Ext.Array.remove(a,b)}}if(d===b){d=null;if(a){for(f=0,e=a.length;f<e;++f){b=a[f];if(b.isStore){d=b;break}}}c.store=d}}},clone:function(d){var a=this,c=a.modified,b=a.copy(a.id,d);if(c){b.modified=Ext.apply({},c)}b.dirty=a.dirty;b.dropped=a.dropped;b.phantom=a.phantom;return b},copy:function(a,e){var c=this,b=Ext.apply({},c.data),d=c.idProperty,f=c.self;if(a||a===0){b[d]=a}else {if(a===null){delete b[d]}}return new f(b,e)},getProxy:function(){return this.self.getProxy()},getValidation:function(c){var b=this,a=b.validation;if(!a){b.validation=a=new Ext.data.Validation();a.attach(b)}if(c===!0||c!==!1&&a.syncGeneration!==b.generation){a.refresh(c)}return a},validate:function(){return (new Ext.data.ErrorCollection()).init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var a=this.$className.split('.'),b=a[a.length-1].toLowerCase();return b+'/'+this.getId()},erase:function(b){var a=this;a.erasing=!0;a.drop();a.erasing=!1;return a.save(b)},setErased:function(){this.erased=!0;this.callJoined('afterErase')},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var a=this.self,b=a.criticalFields;if(!b){a.rankFields();b=a.criticalFields}return b},getAssociatedData:function(g,a){var c=this,n=c.associations,i,j,b,m,f,o,e,p,l,d,h,k;g=g||{};c.$gathering=1;if(a){a=Ext.apply({},a)}for(l in n){p=n[l];b=p.getAssociatedItem(c);if(!b||b.$gathering){continue}if(b.isStore){b.$gathering=1;m=b.getData().items;o=m.length;f=[];for(j=0;j<o;++j){e=m[j];i=!e.$gathering;e.$gathering=1;if(a){k=a.associated;if(k===undefined){a.associated=i;h=!0}else {if(!i){a.associated=!1;h=!0}}d=a}else {d=i?c._getAssociatedOptions:c._getNotAssociatedOptions}f.push(e.getData(d));if(h){a.associated=k;h=!1}delete e.$gathering}delete b.$gathering}else {d=a||c._getAssociatedOptions;if(a&&a.associated===undefined){d.associated=!0}f=b.getData(d)}g[l]=f}delete c.$gathering;return g},getData:function(n){var a=this,f={},e=n===!0?a._getAssociatedOptions:n||f,h=a.data,j=e.associated,l=e.changes,p=l&&e.critical,m=l?a.modified:h,o=a.fieldsMap,q=e.persist,k=e.serialize,g,b,i,d,c;if(m){for(d in m){c=h[d];b=o[d];if(b){if(q&&!b.persist){continue}if(k&&b.serialize){c=b.serialize(c,a)}}f[d]=c}}if(p){g=a.self.criticalFields||a.getCriticalFields();for(i=g.length;i-->0;){d=(b=g[i]).name;if(!(d in f)){c=h[d];if(k&&b.serialize){c=b.serialize(c,a)}f[d]=c}}}if(j){if(typeof j==='object'){a.getNestedData(e,f)}else {a.getAssociatedData(f,e)}}return f},getNestedData:function(a,e){var m=this,n=m.associations,g=a.associated,f,b,h,c,j,k,l,d,i;e=e||{};for(d in g){l=n[d];i=g[d];if(i===!0){delete a.associated}else {a.associated=i}b=l.getAssociatedItem(m);if(!b){continue}if(b.isStore){h=b.getData().items;j=h.length;c=[];for(f=0;f<j;++f){k=h[f];c.push(k.getData(a))}}else {c=b.getData(a)}e[d]=c}a.associated=g;return e},getTransientFields:function(){var a=this.self,b=a.transientFields;if(!b){a.rankFields();b=a.transientFields}return b},isLoading:function(){return !!this.loadOperation},abort:function(){var a=this.loadOperation;if(a){a.abort()}},load:function(a){a=Ext.apply({},a);var b=this,d=a.scope||b,g=b.getProxy(),f=a.callback,c=b.loadOperation,h=b.getId(),e;if(c){e=c.extraCalls;if(!e){e=c.extraCalls=[]}e.push(a);return c}a.id=h;a.recordCreator=function(e,f,c){var d=b.session;if(c){c.recordCreator=d?d.recordCreator:null}b.set(e,b._commitOptions);return b};a.internalCallback=function(e){var h=e.wasSuccessful()&&e.getRecords().length>0,l=b.loadOperation,i=l.extraCalls,c=[b,e],j=[b,e,h],g,k;b.loadOperation=null;++b.loadCount;if(h){Ext.callback(a.success,d,c)}else {Ext.callback(a.failure,d,c)}Ext.callback(f,d,j);if(i){for(g=0,k=i.length;g<k;++g){a=i[g];if(h){Ext.callback(a.success,d,c)}else {Ext.callback(a.failure,d,c)}Ext.callback(a.callback,d,j)}}b.callJoined('afterLoad')};delete a.callback;b.loadOperation=c=g.createOperation('read',a);c.execute();return c},mergeData:function(a){if(!this.dirty){this.set(a,this._commitOptions)}},save:function(a){a=Ext.apply({},a);var b=this,f=b.phantom,e=b.dropped,h=e?'destroy':f?'create':'update',d=a.scope||b,g=a.callback,i=b.getProxy(),c;a.records=[b];a.internalCallback=function(e){var c=[b,e],f=e.wasSuccessful();if(f){Ext.callback(a.success,d,c)}else {Ext.callback(a.failure,d,c)}c.push(f);Ext.callback(g,d,c)};delete a.callback;c=i.createOperation(h,a);if(e&&f){c.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet);b.setErased();c.setSuccessful(!0)}else {c.execute()}return c},statics:{defaultProxy:'memory'},inheritableStatics:{_associatedReadOptions:{recordsOnly:!0,asRoot:!0},loadData:function(b,a){var c;if(b){c=this.getProxy().getReader().readRecords([b],a?{recordCreator:a.recordCreator}:undefined,this._associatedReadOptions)[0]}else {c=new this(b,a)}return c},getSummaryModel:function(){var b=this,c=b.prototype,a=b.summaryModel;if(!a){a=Ext.define(null,{extend:b,fields:c.summaryFields||[],isSummaryModel:!0});a.isSummaryModel=!0;b.summaryModel=c.summaryModel=a}return a||null},addFields:function(a){this.replaceFields(a)},replaceFields:function(k,i){var c=this,n=c.prototype,o=Ext.data.field.Field,d=c.fields,j=c.fieldsMap,f=c.fieldOrdinals,e,a,h,g,b,m,l;if(i===!0){d.length=0;c.fieldsMap=j={};c.fieldOrdinals=f={};l=!0}else {if(i){for(a=i.length;a-->0;){b=i[a];if(b in f){delete f[b];delete j[b]}}for(a=0,g=d.length;a<g;++a){b=(e=d[a]).name;if(b in f){f[b]=a}else {d.splice(a,1);--a;--g}}}}for(a=0,g=k?k.length:0;a<g;a++){b=(e=k[a]).name;if(!(b in f)){f[b]=m=d.length;d.push(e=o.create(e));j[b]=e;e.ordinal=m;e.definedBy=e.owner=this}}if(!l){for(a=0,g=d.length;a<g;++a){d[a].rank=null}}c.idField=n.idField=h=j[n.idProperty];if(h){h.allowNull=h.critical=h.identifier=!0;h.defaultValue=null}c.initializeFn=c.rankedFields=c.transientFields=c.criticalFields=null},removeFields:function(a){this.replaceFields(null,a)},getIdFromData:function(b){var c=this,a=c.idField,d=a.calculated?(new c(b)).id:b[a.name];return d},createWithId:function(c,b,e){var a=b,d=this;if(c||c===0){a={};if(b){Ext.apply(a,b)}a[d.idField.name]=c}return new d(a,e)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(a){return this.fieldsMap[a]||null},getProxy:function(){var b=this,a=b.proxy,d=b.defaultProxy,c;if(!a){a=b.proxyConfig;if(!a&&d){a=d}if(!a||!a.isProxy){if(typeof a==='string'){a={type:a}}c=Ext.merge(b.schema.constructProxy(b),a);if(a&&a.type){a=a.schema===!1?a:c}else {a=c}}a=b.setProxy(a)}return a},setProxy:function(a){var b=this,c;if(a){if(!a.isProxy){a=Ext.Factory.proxy(a)}else {c=a.getModel();if(c&&c!==b){a=a.clone()}}a.setModel(b)}return b.prototype.proxy=b.proxy=a},load:function(d,e,b){var c={},a;if(b){a=b.peekRecord(this,d)}if(!a){c[this.prototype.idProperty]=d;a=new this(c,b)}a.load(e);return a}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(c,d){var f=this,b=f.stores,e=b.length,a;for(a=0;a<e;++a){c.call(d,b[a])}},join:function(b){var a=this,d=a.stores,c=a.joined;if(!c){c=a.joined=[b]}else {c.push(b)}if(b.isStore){a.store=a.store||b;if(!d){d=a.stores=[]}d.push(b)}},unjoin:function(b){var c=this,d=c.stores,a=c.joined;if(a.length===1){a.length=0}else {Ext.Array.remove(a,b)}if(b.isStore){Ext.Array.remove(d,b);c.store=d[0]||null}}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:!0},_getChangesOptions:{changes:!0},_getAssociatedOptions:{associated:!0},_getNotAssociatedOptions:{associated:!1},_metaProperties:{dirty:'isDirty',phantom:'isPhantom',valid:'isValid'},copyFrom:function(c){var a=this,i=a.fields,k=i.length,g=[],l=a.idProperty,f=0,j,e,h,b,d;if(c){e=a.data;h=c.data;for(;f<k;f++){j=i[f];b=j.name;if(b!==l){d=h[b];if(d!==undefined&&!a.isEqual(e[b],d)){e[b]=d;g.push(b)}}}if(a.phantom&&!c.phantom){a.beginEdit();a.setId(c.getId());a.endEdit(!0);a.commit(!0)}}return g},callJoined:function(h,b){var a=this,e=a.joined,d=a.session,i=a.dropped?'D':a.phantom?'C':a.dirty?'U':'R',g,j,c,f;a.crudState=i;if(e||d){if(b){b.unshift(a)}else {b=[a]}c=d&&d[h];if(c){c.apply(d,b)}if(e){for(g=0,j=e.length;g<j;++g){f=e[g];if(f&&(c=f[h])){c.apply(f,b)}}}}a.crudStateWas=i},hasPendingLoad:function(){return this.isLoading()},interpret:function(b){var c=this,a=c._metaProperties[b];if(!a){a=c.associations;a=a&&a[b]&&a[b].getterName}if(a){return c[a]()}return c.data[b]},isDirty:function(){return this.dirty},isPhantom:function(){return this.phantom},onAssociatedRecordSet:function(a,b){this.callJoined('afterAssociatedRecordSet',[a,b])},onIdChanged:Ext.privateFn,setSession:function(a){this.session=a;if(a){a.add(this)}},getModifiedFieldNames:function(f){var c=this,b=c.data,d=[],e=f||c.editMemento.data,a;for(a in b){if(b.hasOwnProperty(a)){if(!c.isEqual(b[a],e[a],a)){d.push(a)}}}return d},isEqual:function(b,c,a){var d;if(a){d=a.isField?a:this.fieldsMap[a];if(d){return d.isEqual(b,c)}}if(b instanceof Date&&c instanceof Date){return b.getTime()===c.getTime()}return b===c},statics:{EDIT:'edit',REJECT:'reject',COMMIT:'commit',rankFields:function(){var d=this,g=d.prototype,h=d.fields,f=h.length,c=[],j=[],i=[],e,a,b;d.rankedFields=g.rankedFields=c;d.criticalFields=g.criticalFields=j;d.transientFields=g.transientFields=i;for(b=0;b<f;++b){a=h[b];if(a.critical){j.push(a)}if(!a.persist){i.push(a)}if(a.evil){(e||(e=[])).push(a)}else {if(!a.depends){c.push(a);a.rank=c.length}}}for(b=0;b<f;++b){if(!(a=h[b]).rank&&!a.evil){d.topoAdd(a)}}if(e){for(b=0,f=e.length;b<f;++b){c.push(a=e[b]);a.rank=c.length}}return c},topoAdd:function(b){var d=this,e=b.depends,g=e?e.length:0,f=d.rankedFields,c,a;for(c=0;c<g;++c){a=d.fieldsMap[e[c]];(a.dependents||(a.dependents=[])).push(b);if(!a.rank){d.topoAdd(a)}}f.push(b);b.rank=f.length},initFields:function(u,g,k){var t=Ext.data.field.Field,q=u.fields,e=[],h={},f={},w=[],r=k.fields,p=u.versionProperty||k.versionProperty,m=g.idProperty,d,a,b,o,i,c,n,j,l,v,s;g.fields=k.fields=e;g.fieldOrdinals=k.fieldOrdinals=h;g.fieldsMap=k.fieldsMap=f;g.references=k.references=w;if(r){for(b=0,o=r.length;b<o;++b){e[b]=a=Ext.Object.chain(r[b]);a.dependents=null;a.owner=g;h[i=a.name]=b;f[i]=a;a.rank=null;if(a.generated){j=a;l=a.name}}}delete u.fields;if(q){for(b=0,o=q.length;b<o;++b){a=q[b];n=a.reference;if(n&&typeof n!=='string'){n=Ext.merge({},n)}a.$reference=n;a=t.create(q[b]);i=a.name;c=h[i];if(c===undefined){h[i]=c=e.length}f[i]=a;e[c]=a;a.definedBy=a.owner=g;a.ordinal=c;if(i===m){s=a}if(i===l){v=!0}}}d=f[m];if(!d){if(j&&j.generated){c=j.ordinal}else {c=e.length}delete f[l];delete h[l];d=new t(m);e[c]=d;h[m]=c;f[m]=d;d.definedBy=g;d.ordinal=c;d.generated=!0}else {if(s&&!v&&j&&j.generated){Ext.Array.remove(e,j);delete f[l];delete h[l];f[m]=s;for(b=0,o=e.length;b<o;++b){a=e[b];e.ordinal=b;h[a.name]=b}}}d.allowNull=d.critical=d.identifier=!0;d.defaultValue=null;g.idField=k.idField=d;if(p){a=f[p];if(!a){c=e.length;a=new t({name:p,type:'int'});e[c]=a;h[p]=c;f[p]=a;a.definedBy=g;a.ordinal=c;a.generated=!0}a.defaultValue=1;a.critical=!0}},initSummaries:function(p,q,j){var g=p.summary,o=j.fields,l=j.summaryFields,b,n,c,i,h,k,f,d,e,a,m;if(l){d=[];e={};for(c=0,k=l.length;c<k;++c){a=l[c];d.push(a);e[a.name]=c}}for(c=0,k=o.length;c<k;++c){b=o[c];if(b.summary&&b.definedBy===q){h=h||{};h[b.name]=b.summary}}if(h){g=Ext.apply(h,g)}if(g){delete p.summary;d=d||[];e=e||{};for(f in g){m=typeof (a=g[f]);if(m==='function'||m==='string'){a={summary:a}}i=e[f];a=Ext.apply({name:f},a);b=a.field;if(b){delete a.field;a.summaryField=b}n=a.summaryField;b=j.fieldsMap[n||f];if(b&&!a.type){a.type=b.type}if(i===undefined){i=d.length;e[f]=i}d[i]=a}}if(d){j.summaryFields=d}},initValidators:function(k,n,m){var i=m.validators,b,e,g,c,h,l,d,a,j,f;if(i){b={};for(e in i){b[e]=Ext.Array.clone(i[e])}}c=k.validators||k.validations;if(c){delete k.validators;b=b||{};if(Ext.isArray(c)){g={};for(h=0,l=c.length;h<l;++h){f=c[h];a=f.field;if(!g[a]){g[a]=[]}f=f.fn||f;g[a].push(f)}c=g}for(a in c){d=c[a];if(!Ext.isArray(d)){d=[d]}j=b[a];if(j){Ext.Array.push(j,d)}else {b[a]=d}}}if(b){for(a in b){e=n.getField(a);if(e){e.setModelValidators(b[a])}}}n.validators=m.validators=b},initAssociations:function(d,b,e){var f=b.associations,g=b.belongsTo,h=b.hasMany,i=b.hasOne,l=b.manyToMany,a,c,k,j;delete b.associations;delete b.belongsTo;delete b.hasMany;delete b.hasOne;delete b.manyToMany;if(l){d.addMatrices(e,l)}if(f){f=Ext.isArray(f)?f:[f];for(a=0,c=f.length;a<c;++a){k=f[a];j=Ext.apply({},k);delete j.type;switch(k.type){case 'belongsTo':d.addBelongsTo(e,j);break;case 'hasMany':d.addHasMany(e,j);break;case 'hasOne':d.addHasOne(e,j);break;}}}if(g){g=Ext.isArray(g)?g:[g];for(a=0,c=g.length;a<c;++a){d.addBelongsTo(e,g[a])}}if(h){h=Ext.isArray(h)?h:[h];for(a=0,c=h.length;a<c;++a){d.addHasMany(e,h[a])}}if(i){i=Ext.isArray(i)?i:[i];for(a=0,c=i.length;a<c;++a){d.addHasOne(e,i[a])}}d.afterKeylessAssociations(e)},initIdentifier:function(d,e,f){var a=d.identifier||d.idgen,b=f.identifier||e.schema._defaultIdentifier,c;if(a){delete d.identifier;delete d.idgen;a=Ext.Factory.dataIdentifier(a)}else {if(b){if(b.clone&&!b.getId()){a=b.clone()}else {if(b.isGenerator){a=b}else {a=Ext.Factory.dataIdentifier(b)}}}}e.identifier=f.identifier=a;if(!a){c=e.entityName;if(!c){c=Ext.id(null,'extModel')}e.identifier=Ext.Factory.dataIdentifier({type:'sequential',prefix:c+'-'})}},findValidator:function(f,g,d){var h=d.type||d,b=f[g],e,a,c;if(b){for(a=0,e=b.length;a<e;++a){c=b[a];if(c.type===h){return c}}}return null},makeInitializeFn:function(o){var a=['var '],g=['\nreturn function (e) {\n    var data = e.data, v;\n'],n=0,i,j,h,b,l,f,e,d,k,c,m;if(!(e=o.rankedFields)){e=o.rankFields()}for(c=0,m=e.length;c<m;++c){f=e[c];d='f'+c;h=f.convert;if(c){a.push(',  \n    ')}a.push(d,' = $fields['+c+']');if((k=f.defaultValue!==undefined)||h){b='data["'+f.name+'"]';++n;i=j='';if(f.cloneDefaultValue){i='Ext.clone(';j=')'}g.push('\n');if(h&&k){g.push('    v = ',b,';\n'+'    if (v !== undefined) {\n'+'        v = ',d,'.convert(v, e);\n'+'    }\n'+'    if (v === undefined) {\n'+'        v = ',i,d,'.defaultValue',j,';\n'+'    }\n'+'    ',b,' = v;')}else {if(h){g.push('    v = ',d,'.convert(',b,',e);\n'+'    if (v !== undefined) {\n'+'        ',b,' = v;\n'+'    }\n')}else {if(k){g.push('    if (',b,' === undefined) {\n'+'        ',b,' = ',i,d,'.defaultValue',j,';\n'+'    }\n')}}}}}if(!n){return Ext.emptyFn}a.push(';\n');a.push.apply(a,g);a.push('}');a=a.join('');l=new Function('$fields','Ext',a);return l(e,Ext)}}}},function(){var a=this,b=a.prototype,c=Ext.data.schema.Schema,d;a.proxyConfig=b.proxy;delete b.proxy;a.fields=[];a.fieldsMap=b.fieldsMap={};a.schema=b.schema=c.get(b.schema);b.idField=new Ext.data.field.Field(b.idProperty);a.identifier=new Ext.data.identifier.Sequential();a.onExtended(function(b,e){var f=b.prototype,k=e.schema,j=f.superclass.self,g,h,i;b.idProperty=e.idProperty||f.idProperty;if(k){delete e.schema;g=c.get(k)}else {if(!(g=f.schema)){g=d||(d=c.get('default'))}}b.rankFields=a.rankFields;b.topoAdd=a.topoAdd;f.schema=b.schema=g;if(!(h=e.entityName)){f.entityName=h=g.getEntityName(b)}b.entityName=h;b.fieldExtractors={};a.initIdentifier(e,b,f);a.initFields(e,b,f);a.initValidators(e,b,f);if(!e.isSummaryModel){a.initSummaries(e,b,f)}b.fields.items=b.fields;if(h){g.addEntity(b);a.initAssociations(g,e,b)}i=e.proxy;if(i){delete e.proxy}else {if(j!==a){i=j.proxyConfig||j.proxy}}b.proxyConfig=i})});Ext.define('Ext.data.ResultSet',{isResultSet:!0,$configPrefixed:!1,config:{loaded:!0,count:null,total:null,remoteTotal:null,success:!1,records:null,message:null,metadata:null,groupData:null,summaryData:null},constructor:function(a){this.initConfig(a)},getCount:function(){var b=this.callParent(),a;if(!b){a=this.getRecords();if(a){b=a.length}}return b}});Ext.define('Ext.data.reader.Reader',{alternateClassName:['Ext.data.Reader','Ext.data.DataReader'],mixins:[Ext.mixin.Observable,Ext.mixin.Factoryable],alias:'reader.base',factoryConfig:{defaultType:null},config:{groupRootProperty:'',implicitIncludes:!0,keepRawData:null,messageProperty:'',model:null,proxy:null,readRecordsOnFailure:!0,rootProperty:'',successProperty:'success',summaryRootProperty:'',totalProperty:'total',transform:null,typeProperty:''},isReader:!0,constructor:function(a){var b=this;if(a&&a.hasOwnProperty('root')){a=Ext.apply({},a);a.rootProperty=a.root;delete a.root}b.duringInit=1;b.mixins.observable.constructor.call(b,a);--b.duringInit;b.buildExtractors()},forceBuildExtractors:function(){if(!this.duringInit){this.buildExtractors(!0)}},updateGroupRootProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},updateSuccessProperty:function(){this.forceBuildExtractors()},updateSummaryRootProperty:function(){this.forceBuildExtractors()},updateTotalProperty:function(){this.forceBuildExtractors()},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}else {if(a.charAt){a={fn:this[a]}}}return a.fn.bind(a.scope||this)}return a},read:function(a,e){var d,b,c;if(a){c=a.responseText;if(a.responseType||c){b=this.getResponseData(a);if(b&&b.__$isError){return new Ext.data.ResultSet({total:0,count:0,records:[],success:!1,message:b.msg})}else {d=this.readRecords(b,e)}}else {if(c!==''){d=this.readRecords(a,e)}}}return d||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(a){return {__$isError:!0,msg:a}},readRecords:function(b,q,h){var a=this,r=h&&h.recordsOnly,s=h&&h.asRoot,o=null,f=null,j,i,g,c,n,m,d,p,l,k,e;k=a.getMeta?a.getMeta(b):b.metaData;if(k){a.onMetaChange(k)}l=a.getTransform();if(l){b=l(b)}a.buildExtractors();if(a.getKeepRawData()){a.rawData=b}if(a.hasListeners.rawdata){a.fireEventArgs('rawdata',[b])}b=a.getData(b);j=!0;i=0;g=[];if(a.getSuccessProperty()){d=a.getSuccess(b);if(d===!1||d==='false'){j=!1}}if(a.getMessageProperty()){p=a.getMessage(b)}if(j||a.getReadRecordsOnFailure()){c=s||Ext.isArray(b)?b:a.getRoot(b);if(c){m=c.length}if(a.getTotalProperty()){d=parseInt(a.getTotal(b),10);if(!isNaN(d)){n=m=d}}if(c){g=a.extractData(c,q);i=g.length}if(a.getGroupRootProperty()){c=a.getGroupRoot(b);if(c){e={includes:!1,model:a.getModel().getSummaryModel()};o=a.extractData(c,e)||null}}if(a.getSummaryRootProperty()){c=a.getSummaryRoot(b);if(c){e=e||{includes:!1,model:a.getModel().getSummaryModel()};f=a.extractData(c,e)||null;if(f){f=f[0]}}}}return r?g:new Ext.data.ResultSet({total:m||i,remoteTotal:n,metadata:k,count:i,records:g,success:j,message:p,groupData:o,summaryData:f})},extractData:function(f,b){var c=this,h=b&&b.model?Ext.data.schema.Schema.lookupEntity(b.model):c.getModel(),k=h.schema,o=b&&'includes' in b?b.includes:k.hasAssociations(h)&&c.getImplicitIncludes(),n=c.getFieldExtractorInfo(h),i=f.length,m=new Array(i),l=c.getTypeProperty(),j,e,d,a,g;if(!i&&Ext.isObject(f)){f=[f];i=1}for(g=0;g<i;g++){a=f[g];if(!a.isModel){e=a;if(l&&(d=c.getChildType(k,e,l))){j=d.getProxy().getReader();a=j.extractRecord(e,b,d,k.hasAssociations(d)&&j.getImplicitIncludes(),j.getFieldExtractorInfo(d))}else {a=c.extractRecord(e,b,h,o,n)}if(a.isModel&&a.isNode){a.raw=e}}if(a.onLoad){a.onLoad()}m[g]=a}return m},getChildType:function(d,c,a){var b;switch(typeof a){case 'string':return d.getEntity(c[a]);case 'object':b=a.namespace;return d.getEntity((b?b+'.':'')+c[a.name]);case 'function':return d.getEntity(a(c));}},extractRecordData:function(d,a){var b=a&&a.model?Ext.data.schema.Schema.lookupEntity(a.model):this.getModel(),c=this.getFieldExtractorInfo(b);return this.extractRecord(d,a,b,!1,c)},extractRecord:function(e,b,g,i,f){var a=this,h=b&&b.recordCreator||a.defaultRecordCreator,d,c;d=a.extractModelData(e,f);c=h.call(a,d,g||a.getModel(),b);if(i&&c.isModel){a.readAssociated(c,e,b)}return c},getFieldExtractorInfo:function(d){var b=d.fieldExtractors,c,a;if(!b){return}c=this.$className;a=b[c];if(a===undefined){b[c]=a=this.buildFieldExtractors(d)}return a},buildFieldExtractors:function(j){var f=j.getFields(),k=f.length,c=[],e=[],i=null,h=0,d,g,a,b;for(a=0;a<k;++a){d=f[a];b=this.createFieldAccessor(d);if(b){g=d.name;c.push('val = extractors['+h+"](raw, self); if (val !== undefined) { data['"+g+"'] = val; }");e.push(b);++h}}if(c.length){i={extractors:e,fn:new Function('raw','data','extractors','self','var val;'+c.join('\n'))}}return i},defaultRecordCreator:function(b,a){return new a(b)},defaultRecordCreatorFromServer:function(c,b){var a=new b(c);a.phantom=!1;return a},getModelData:function(a){return {}},extractModelData:function(c,a){var b=this.getModelData(c),d;if(a){d=a.fn;d(c,b,a.extractors,this)}return b},readAssociated:function(b,g,a){var f=this,c=b.associations,e,d;for(e in c){if(c.hasOwnProperty(e)){d=c[e];if(!b.phantom&&a&&!a.recordCreator){Ext.apply(a,{recordCreator:f.defaultRecordCreatorFromServer})}if(d.cls){d.read(b,g,f,a)}}}},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(a){},onMetaChange:function(a){var b=this,g=a.fields,e,d,c,f;b.metaData=a;if(a.root){b.setRootProperty(a.root)}if(a.totalProperty){b.setTotalProperty(a.totalProperty)}if(a.successProperty){b.setSuccessProperty(a.successProperty)}if(a.messageProperty){b.setMessageProperty(a.messageProperty)}c=a.clientIdProperty;if(g){d=Ext.define(null,{extend:'Ext.data.Model',fields:g,clientIdProperty:c});b.setModel(d);f=b.getProxy();if(f){f.setModel(d)}}else {if(c){e=b.getModel();if(e){e.self.prototype.clientIdProperty=c}}}},buildExtractors:function(e){var a=this,d,c,b;if(e||!a.hasExtractors){d=a.getTotalProperty();c=a.getSuccessProperty();b=a.getMessageProperty();if(d){a.getTotal=a.getAccessor(d)}if(c){a.getSuccess=a.getAccessor(c)}if(b){a.getMessage=a.getAccessor(b)}a.hasExtractors=!0;return !0}},getAccessor:function(c){var d=this,e=d.extractorCache,a,b;if(typeof c==='string'){b=d.getAccessorKey(c);if(b){a=e.get(b)}if(!a){a=d.createAccessor(c);if(b){e.add(b,a)}}}else {a=d.createAccessor(c)}return a},getAccessorKey:function(b){var a=this.$className;return a?a+b:''},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var a=this;a.model=a.getTotal=a.getSuccess=a.getMessage=a.rawData=null;a.onMetaChange=null;a.transform=null;a.callParent()},privates:{copyFrom:function(b){var a=this;b.buildExtractors();a.getTotal=b.getTotal;a.getSuccess=b.getSuccess;a.getMessage=b.getMessage;++a.duringInit;a.setConfig(b.getConfig());--a.duringInit;a.hasExtractors=!0}}},function(b){var a=b.prototype;Ext.apply(a,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:!0,message:''})});a.extractorCache=new Ext.util.LruCache()});Ext.define('Ext.data.writer.Writer',{alias:'writer.base',alternateClassName:['Ext.data.DataWriter','Ext.data.Writer'],mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:null},isWriter:!0,config:{clientIdProperty:null,allDataOptions:{persist:!0},partialDataOptions:{changes:!0,critical:!0},writeAllFields:!1,dateFormat:null,nameProperty:'name',writeRecordId:!0,transform:null},constructor:function(a){this.initConfig(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}return a.fn.bind(a.scope||this)}return a},write:function(d){var b=d.getOperation(),c=b.getRecords()||[],f=c.length,e=[],a;for(a=0;a<f;a++){e.push(this.getRecordData(c[a],b))}return this.writeRecords(d,e)},writeRecords:Ext.emptyFn,getRecordData:function(f,p){var d=this,j=d.getNameProperty(),l=j!=='name',e=f.self.idField,b=e?e[j]||e.name:'id',a=f.id,q=d.getWriteAllFields(),c,k,n,m,i,o,g,h;if(e&&e.serialize){a=e.serialize(a)}if(!q&&p&&p.isDestroyOperation){c={};c[b]=a}else {k=d.getDateFormat();n=f.phantom;m=n||q?d.getAllDataOptions():d.getPartialDataOptions();i=n&&d.getClientIdProperty();o=f.getFieldsMap();m.serialize=!1;g=f.getData(m);c=l?{}:g;if(i){c[i]=a;delete g[b]}else {if(!d.getWriteRecordId()){delete g[b]}}for(b in g){a=g[b];if(!(h=o[b])){if(l){c[b]=a}}else {if(h.isDateField&&k&&Ext.isDate(a)){a=Ext.Date.format(a,k)}else {if(h.serialize){a=h.serialize(a,f)}}if(l){b=h[j]||b}c[b]=a}}}return c}});Ext.define('Ext.data.proxy.Proxy',{mixins:[Ext.mixin.Factoryable,Ext.mixin.Observable],$configPrefixed:!1,alias:'proxy.proxy',alternateClassName:['Ext.data.DataProxy','Ext.data.Proxy'],config:{batchOrder:'create,update,destroy',batchActions:!0,model:undefined,reader:{type:'json'},writer:{type:'json'}},isProxy:!0,isSynchronous:!1,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.pendingOperations={}},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},updateModel:function(b){var a;if(b){a=this.getReader();if(a&&!a.getModel()){a.setModel(b)}}},applyReader:function(a){if(this.isSynchronous){a=a||{};a.keepRawData=!0}return Ext.Factory.reader(a)},updateReader:function(b){var c=this,a;if(b){a=c.getModel();if(!a){a=b.getModel();if(a){c.setModel(a)}}else {b.setModel(a)}if(b.responseType!=null){c.responseType=b.responseType}}},applyWriter:function(b){var a=this.getReader();b=Ext.Factory.writer(b);if(b.getRecord&&!b.getRecord()&&a&&a.getRecord){a=a.getRecord();if(a){b.setRecord(a)}}return b},abort:Ext.emptyFn,onMetaChange:function(a){this.fireEvent('metachange',this,a)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(a,l){var c=this,m=c.getBatchActions(),b,d,h,j,e,f,g,k,i;if(a.operations===undefined){a={operations:a,listeners:l}}if(a.batch){if(Ext.isDefined(a.batch.runOperation)){b=Ext.applyIf(a.batch,{proxy:c,listeners:{}})}}else {a.batch={proxy:c,listeners:a.listeners||{}}}if(!b){b=new Ext.data.Batch(a.batch)}b.on('complete',Ext.bind(c.onBatchComplete,c,[a],0),null,{single:!0,priority:1000});b.$destroyOwner=a.$destroyOwner;h=c.getBatchOrder().split(',');j=h.length;for(f=0;f<j;f++){e=h[f];d=a.operations[e];if(d){if(m){b.add(c.createOperation(e,{records:d,params:a.params}))}else {k=d.length;for(g=0;g<k;g++){i=d[g];b.add(c.createOperation(e,{records:[i],params:a.params}))}}}}b.start();return b},onBatchComplete:function(a,b){var c=a.scope||this;if(b.hasException()){if(Ext.isFunction(a.failure)){Ext.callback(a.failure,c,[b,a])}}else {if(Ext.isFunction(a.success)){Ext.callback(a.success,c,[b,a])}}if(Ext.isFunction(a.callback)){Ext.callback(a.callback,c,[b,a])}if(!b.$destroyOwner){b.destroy()}},createOperation:function(b,c){var a=Ext.createByAlias('data.operation.'+b,c);a.setProxy(this);this.pendingOperations[a._internalId]=a;return a},completeOperation:function(a){delete this.pendingOperations[a._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var c=this.pendingOperations,b,a;for(b in c){a=c[b];if(a&&a.isRunning()){a.abort()}a.destroy()}this.pendingOperations=null;this.callParent()}});Ext.define('Ext.data.proxy.Client',{extend:Ext.data.proxy.Proxy,alternateClassName:'Ext.data.ClientProxy',isSynchronous:!0,clear:function(){}});Ext.define('Ext.data.proxy.Memory',{extend:Ext.data.proxy.Client,alias:'proxy.memory',alternateClassName:'Ext.data.MemoryProxy',isMemoryProxy:!0,config:{enablePaging:null,data:{$value:null,merge:function(a,b,d,c){return a?Ext.clone(a):a}},clearOnRead:null},finishOperation:function(b){var c=b.getRecords(),d=c.length,a;for(a=0;a<d;a++){c[a].dropped=!!b.isDestroyOperation;c[a].commit()}b.setSuccessful(!0)},create:function(a){this.finishOperation(a)},update:function(a){this.finishOperation(a)},erase:function(a){this.finishOperation(a)},read:function(b){var e=this,j=e.getReader(),a=j.read(e.getData(),{recordCreator:j.defaultRecordCreatorFromServer}),d=a.getRecords(),c=b.getSorters(),i=b.getGrouper(),g=b.getFilters(),f=b.getStart(),k=b.getLimit(),h;if(b.process(a,null,null,!1)!==!1){if(b.success&&e.getClearOnRead()){this.setData(null)}if(g&&g.length){a.setRecords(d=Ext.Array.filter(d,Ext.util.Filter.createFilterFn(g)));a.setTotal(d.length)}if(i){c=c?c.concat(i):c}if(c&&c.length){a.setRecords(d=Ext.Array.sort(d,Ext.util.Sortable.createComparator(c)))}if(e.getEnablePaging()&&f!==undefined&&k!==undefined){if(f>=a.getTotal()){a.setConfig({success:!1,records:[],total:0})}else {a.setRecords(Ext.Array.slice(d,f,f+k))}}b.setCompleted();h=a.getMetadata();if(h){e.onMetaChange(h)}}},clear:Ext.emptyFn});Ext.define('Ext.data.ProxyStore',{extend:Ext.data.AbstractStore,config:{model:undefined,fields:null,proxy:undefined,autoLoad:undefined,autoSync:!1,batchUpdateMode:'operation',sortOnLoad:!0,trackRemoved:!0,asynchronousLoad:undefined},onClassExtended:function(e,d,b){var c=d.model,a;if(typeof c==='string'){a=b.onBeforeCreated;b.onBeforeCreated=function(){var g=this,f=arguments;Ext.require(c,function(){a.apply(g,f)})}}},implicitModel:'Ext.data.Model',autoSyncSuspended:0,removed:null,constructor:function(b){var a=this;a.callParent(arguments);if(a.getAsynchronousLoad()===!1){a.flushLoad()}},doDestroy:function(){var a=this,b=a.getProxy();a.clearLoadTask();Ext.destroy(a.getData());a.data=null;a.setProxy(null);if(b.autoCreated){b.destroy()}a.setModel(null);a.callParent()},applyAsynchronousLoad:function(a){if(a==null){a=!this.loadsSynchronously()}return a},updateAutoLoad:function(a){this.getData();if(a){this.load(Ext.isObject(a)?a:undefined)}},getTotalCount:function(){return this.totalCount||0},applyFields:function(a){if(a){this.createImplicitModel(a)}},applyModel:function(a){if(a){a=Ext.data.schema.Schema.lookupEntity(a)}else {if(!this.destroying){this.getFields();a=this.getModel()||this.createImplicitModel()}}return a},applyProxy:function(a){var b=this.getModel();if(a!==null){if(a){if(a.isProxy){a.setModel(b)}else {if(Ext.isString(a)){a={type:a,model:b}}else {if(!a.model){a=Ext.apply({model:b},a)}}a=Ext.createByAlias('proxy.'+a.type,a);a.autoCreated=!0}}else {if(b){a=b.getProxy();this.useModelProxy=!0}}if(!a){a=Ext.createByAlias('proxy.memory');a.autoCreated=!0}}return a},applyState:function(b){var a=this;a.callParent([b]);if((a.getAutoLoad()||a.isLoaded())&&(a.getRemoteSort()||a.getRemoteFilter())){a.load()}},updateProxy:function(b,a){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(a){this.cleanRemoved();this.removed=a?[]:null},onMetaChange:function(b,a){this.fireEvent('metachange',this,a)},create:function(f,a){var b=this,e=b.getModel(),d=new e(f),c;a=Ext.apply({},a);if(!a.records){a.records=[d]}a.internalScope=b;a.internalCallback=b.onProxyWrite;c=b.createOperation('create',a);return c.execute()},read:function(){return this.load.apply(this,arguments)},update:function(a){var b=this,c;a=Ext.apply({},a);if(!a.records){a.records=b.getUpdatedRecords()}a.internalScope=b;a.internalCallback=b.onProxyWrite;c=b.createOperation('update',a);return c.execute()},onProxyWrite:function(a){var b=this,c=a.wasSuccessful(),d=a.getRecords();switch(a.getAction()){case 'create':b.onCreateRecords(d,a,c);break;case 'update':b.onUpdateRecords(d,a,c);break;case 'destroy':b.onDestroyRecords(d,a,c);break;}if(c){b.fireEvent('write',b,a);b.fireEvent('datachanged',b)}},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(c,b,a){if(a){this.cleanRemoved()}},erase:function(a){var b=this,c;a=Ext.apply({},a);if(!a.records){a.records=b.getRemovedRecords()}a.internalScope=b;a.internalCallback=b.onProxyWrite;c=b.createOperation('destroy',a);return c.execute()},onBatchOperationComplete:function(b,a){return this.onProxyWrite(a)},onBatchComplete:function(c,f){var a=this,d=c.operations,e=d.length,b;if(a.batchUpdateMode!=='operation'){a.suspendEvents();for(b=0;b<e;b++){a.onProxyWrite(d[b])}a.resumeEvents()}a.isSyncing=!1;if(c.$destroyOwner===a){c.destroy()}a.fireEvent('datachanged',a)},onBatchException:function(b,a){},filterNew:function(a){return a.phantom&&a.isValid()},getNewRecords:function(){return []},getUpdatedRecords:function(){return []},getModifiedRecords:function(){return [].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(a){return a.dirty&&!a.phantom&&a.isValid()},getRemovedRecords:function(){var a=this.getRawRemovedRecords();return a?Ext.Array.clone(a):[]},sync:function(d){var a=this,b={},f=a.getNewRecords(),g=a.getUpdatedRecords(),e=a.getRemovedRecords(),c=!1;a.needsSync=!1;if(f.length>0){b.create=f;c=!0}if(g.length>0){b.update=g;c=!0}if(e.length>0){b.destroy=e;c=!0}if(c&&a.fireEvent('beforesync',b)!==!1){a.isSyncing=!0;d=d||{};a.proxy.batch(Ext.apply(d,{operations:b,listeners:a.getBatchListeners(),$destroyOwner:a}))}return a},getBatchListeners:function(){var a=this,b={scope:a,exception:a.onBatchException,complete:a.onBatchComplete};if(a.batchUpdateMode==='operation'){b.operationcomplete=a.onBatchOperationComplete}return b},save:function(){return this.sync.apply(this,arguments)},load:function(b){var a=this;if(typeof b==='function'){b={callback:b}}else {b=b?Ext.Object.chain(b):{}}a.pendingLoadOptions=b;if(a.getAsynchronousLoad()){if(!a.loadTimer){a.loadTimer=Ext.asap(a.flushLoad,a)}}else {a.flushLoad()}return a},flushLoad:function(){var a=this,c=a.pendingLoadOptions,b;if(a.destroying||a.destroyed){return}a.clearLoadTask();if(!c){return}a.setLoadOptions(c);if(a.getRemoteSort()&&c.sorters){a.fireEvent('beforesort',a,c.sorters)}b=Ext.apply({internalScope:a,internalCallback:a.onProxyLoad,scope:a},c);a.lastOptions=b;b=a.createOperation('read',b);if(a.fireEvent('beforeload',a,b)!==!1){a.onBeforeLoad(b);a.loading=!0;if(a.hasListeners.beginload){a.fireEvent('beginload',a,b)}b.execute()}else {if(a.getAsynchronousLoad()){b.abort()}b.setCompleted()}},reload:function(a){return this.load(Ext.apply({},a,this.lastOptions))},onEndUpdate:function(){var a=this;if(a.needsSync&&a.autoSync&&!a.autoSyncSuspended){a.sync()}},afterReject:function(b){var a=this;if(a.contains(b)){a.onUpdate(b,Ext.data.Model.REJECT,null);a.fireEvent('update',a,b,Ext.data.Model.REJECT,null);a.fireEvent('datachanged',a)}},afterCommit:function(c,b){var a=this;if(!b){b=null}if(a.contains(c)){a.onUpdate(c,Ext.data.Model.COMMIT,b);a.fireEvent('update',a,c,Ext.data.Model.COMMIT,b);a.fireEvent('datachanged',a)}},afterErase:function(a){this.onErase(a)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,hasPendingLoad:function(){return !!this.pendingLoadOptions||this.isLoading()},isLoading:function(){return !!this.loading},isLoaded:function(){return this.loadCount>0},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(b){var a=this;if(a.autoSyncSuspended&&!--a.autoSyncSuspended){if(b){a.sync()}}},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{getRawRemovedRecords:function(){return this.removed},onExtraParamsChanged:function(){},clearLoadTask:function(){this.pendingLoadOptions=this.loadTimer=Ext.unasap(this.loadTimer)},cleanRemoved:function(){var a=this.getRawRemovedRecords(),c,b;if(a){for(b=0,c=a.length;b<c;++b){a[b].unjoin(this)}a.length=0}},createOperation:function(e,d){var a=this,c=a.getProxy(),b;if(!a.proxyListeners){b={scope:a,destroyable:!0,beginprocessresponse:a.beginUpdate,endprocessresponse:a.endUpdate};if(!a.disableMetaChangeEvent){b.metachange=a.onMetaChange}a.proxyListeners=c.on(b)}return c.createOperation(e,d)},createImplicitModel:function(e){var b=this,d={extend:b.implicitModel,statics:{defaultProxy:'memory'}},c,a;if(e){d.fields=e}a=Ext.define(null,d);b.setModel(a);c=b.getProxy();if(c){a.setProxy(c)}else {b.setProxy(a.getProxy())}},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(b){var a=this.getRawRemovedRecords();if(a){Ext.Array.remove(a,b);b.unjoin(this)}},setLoadOptions:function(d){var c=this,a,b;if(c.getRemoteFilter()){a=c.getFilters(!1);if(a&&a.getCount()){d.filters=a.getRange()}}if(c.getRemoteSort()){b=c.getSorters(!1);if(b&&b.getCount()){d.sorters=b.getRange()}}}}});Ext.define('Ext.util.Group',{extend:Ext.util.Collection,isGroup:!0,config:{groupKey:null,groupValue:null},$endUpdatePriority:2001,manageSorters:!1});Ext.define('Ext.data.Group',{extend:Ext.util.Group,isDataGroup:!0,store:null,getSummaryRecord:function(){var b=this,a=b.summaryRecord,d=b.store,c=d.getData().generation,e,f;if(!a){e=d.getModel();f=e.getSummaryModel();b.summaryRecord=a=new f()}if(!a.isRemote&&a.summaryGeneration!==c){a.calculateSummary(b.items);a.summaryGeneration=c}return a}});Ext.define('Ext.data.LocalStore',{extend:Ext.Mixin,mixinConfig:{id:'localstore',after:{fireGroupChangeEvent:'onGrouperChange'}},config:{extraKeys:null},applyExtraKeys:function(a){var b,c=this.getData();c.setExtraKeys(a);a=c.getExtraKeys();for(b in a){this[b]=a[b]}},add:function(a){return this.insert(this.getCount(),arguments.length===1?a:arguments)},constructDataCollection:function(){var a=new Ext.util.Collection({rootProperty:'data',groupConfig:{xclass:'Ext.data.Group',store:this}});a.addObserver(this);return a},createModel:function(a){var c=this.getSession(),b;if(!a.isModel){b=this.getModel();a=new b(a,c)}return a},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var a=this.getData().getSorters();a.setSorterConfigure(this.addFieldTransform,this);return a},getSummaryRecord:function(){var b=this,a=b.summaryRecord,d=b.getData(),c=d.generation,e;if(!a){e=b.getModel().getSummaryModel();b.summaryRecord=a=new e()}if(!a.isRemote&&a.summaryGeneration!==c){a.calculateSummary(d.items);a.summaryGeneration=c}return a},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},onGrouperChange:function(a){this.callObservers('GrouperChange',[a])},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){var a=this.getSorters();a.beginUpdate();a.endUpdate()},contains:function(a){return this.indexOf(a)>-1},each:function(h,g,c){var a=this.getData(),f=c,e,d,b;if(typeof c==='object'){f=c.filtered}if(f&&a.filtered){a=a.getSource()}a=a.items.slice(0);e=a.length;for(b=0;b<e;++b){d=a[b];if(h.call(g||d,d,b,e)===!1){break}}},collect:function(e,a,d){var f=this,c=a,b=f.getData();if(typeof a==='object'){d=a.filtered;c=a.allowNull}if(d&&b.filtered){b=b.getSource()}return b.collect(e,'data',c)},getById:function(b){var a=this.getData();if(a.filtered){a=a.getSource()}return a.get(b)||null},getByInternalId:function(c){var a=this.getData(),b;if(a.filtered){if(!a.$hasExtraKeys){b=this.makeInternalKeyCfg();a.setExtraKeys(b);a.$hasExtraKeys=!0}a=a.getSource()}if(!a.$hasExtraKeys){a.setExtraKeys(b||this.makeInternalKeyCfg());a.$hasExtraKeys=!0}return a.byInternalId.get(c)||null},getDataSource:function(){var a=this.getData();return a.getSource()||a},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},insert:function(e,a){var d=this,c,b;if(a){if(!Ext.isIterable(a)){a=[a]}else {a=Ext.Array.clone(a)}c=a.length}if(!c){return []}for(b=0;b<c;++b){a[b]=d.createModel(a[b])}d.getData().insert(e,a);return a},queryBy:function(c,b){var a=this.getData();return (a.getSource()||a).createFiltered(c,b)},query:function(e,f,d,b,c){var a=this.getData();return (a.getSource()||a).createFiltered(e,f,d,b,c)},first:function(a){return this.getData().first(a)||null},last:function(a){return this.getData().last(a)||null},sum:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.sumByGroup(a):b.sum(a)},count:function(b){var a=this.getData();return b&&this.isGrouped()?a.countByGroup():a.count()},min:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.minByGroup(a):b.min(a)},max:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.maxByGroup(a):b.max(a)},average:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.averageByGroup(a):b.average(a)},aggregate:function(i,g,j,f){var a=this,c,h,e,d,b;if(j&&a.isGrouped()){c=a.getGroups().items;h=c.length;e={};for(b=0;b<h;++b){d=c[b];e[d.getGroupKey()]=a.getAggregate(i,g||a,d.items,f)}return e}else {return a.getAggregate(i,g,a.getData().items,f)}},getAggregate:function(g,e,b,d){var c=[],f=b.length,a;for(a=0;a<f;++a){c[a]=b[a].get(d)}return g.call(e||this,b,c)},addObserver:function(b){var a=this.observers;if(!a){this.observers=a=new Ext.util.Collection()}a.add(b)},removeObserver:function(b){var a=this.observers;if(a){a.remove(b)}},callObservers:function(h,a){var f=this.observers,g,e,c,d,b;if(f){e=f.items;if(a){a.unshift(this)}else {a=[this]}for(c=0,g=e.length;c<g;++c){b=e[c];d='onSource'+h;if(b[d]){b[d].apply(b,a)}}}},queryRecordsBy:function(g,d){var a=this.getData(),e=[],f,b,c;a=(a.getSource()||a).items;d=d||this;for(b=0,f=a.length;b<f;++b){c=a[b];if(g.call(d,c)===!0){e.push(c)}}return e},queryRecords:function(f,g){var a=this.getData(),d=[],e,b,c;a=(a.getSource()||a).items;for(b=0,e=a.length;b<e;++b){c=a[b];if(c.get(f)===g){d.push(c)}}return d},privates:{isLast:function(a){return a===this.last()},makeInternalKeyCfg:function(){return {byInternalId:{property:'internalId',rootProperty:''}}}}});Ext.define('Ext.data.proxy.Server',{extend:Ext.data.proxy.Proxy,alias:'proxy.server',alternateClassName:'Ext.data.ServerProxy',isRemote:!0,config:{url:'',pageParam:'page',startParam:'start',limitParam:'limit',groupParam:'group',groupDirectionParam:'groupDir',sortParam:'sort',filterParam:'filter',directionParam:'dir',idParam:'id',simpleSortMode:!1,simpleGroupMode:!1,noCache:!0,cacheString:'_dc',timeout:30000,api:{create:undefined,read:undefined,update:undefined,destroy:undefined},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(c,b){var a=this.getExtraParams();a[c]=b;this.fireEvent('extraparamschanged',a)},updateExtraParams:function(a,b){this.fireEvent('extraparamschanged',a)},buildRequest:function(a){var c=this,g=Ext.apply({},a.getParams()),d=Ext.applyIf(g,c.getExtraParams()||{}),b,e,f;Ext.applyIf(d,c.getParams(a));e=a.getId();f=c.getIdParam();if(e!==undefined&&d[f]===undefined){d[f]=e}b=new Ext.data.Request({params:d,action:a.getAction(),records:a.getRecords(),url:a.getUrl(),operation:a,proxy:c});b.setUrl(c.buildUrl(b));a.setRequest(b);return b},processResponse:function(j,b,i,c){var a=this,g,f,e,h,d;if(a.destroying||a.destroyed){return}a.fireEvent('beginprocessresponse',a,c,b);if(j===!0){f=a.getReader();if(c.status===204){e=f.getNullResultSet()}else {e=f.read(a.extractResponseData(c),{recordCreator:b.getRecordCreator()||f.defaultRecordCreatorFromServer})}if(!b.$destroyOwner){b.$destroyOwner=a;d=!0}b.process(e,i,c);g=!b.wasSuccessful()}else {a.setException(b,c);g=!0}if(a.destroyed){if(!b.destroyed&&d&&b.$destroyOwner===a){b.destroy()}return}if(g){a.fireEvent('exception',a,c,b)}else {h=e.getMetadata();if(h){a.onMetaChange(h)}}if(a.destroyed){if(!b.destroyed&&d&&b.$destroyOwner===a){b.destroy()}return}a.afterRequest(i,j);a.fireEvent('endprocessresponse',a,c,b);if(!b.destroyed&&d&&b.$destroyOwner===a){b.destroy()}},setException:function(b,a){b.setException({status:a.status,statusText:a.statusText,response:a})},extractResponseData:Ext.identityFn,applyEncoding:function(a){return Ext.encode(a)},encodeSorters:function(c,d){var b=[],e=c.length,a;for(a=0;a<e;a++){b[a]=c[a].serialize()}return this.applyEncoding(d?b[0]:b)},encodeFilters:function(c){var b=[],e=c.length,d,a;for(a=0;a<e;a++){d|=c[a].serializeTo(b)}return d?this.applyEncoding(b):b},getParams:function(d){if(!d.isReadOperation){return {}}var b=this,a={},h=d.getGrouper(),c=d.getSorters(),k=d.getFilters(),s=d.getPage(),l=d.getStart(),r=d.getLimit(),u=b.getSimpleSortMode(),t=b.getSimpleGroupMode(),q=b.getPageParam(),p=b.getStartParam(),o=b.getLimitParam(),g=b.getGroupParam(),m=b.getGroupDirectionParam(),e=b.getSortParam(),n=b.getFilterParam(),i=b.getDirectionParam(),j,f;if(q&&s){a[q]=s}if(p&&(l||l===0)){a[p]=l}if(o&&r){a[o]=r}j=g&&h;if(j){if(t){a[g]=h.getProperty();if(m===g){a[g]+=' '+h.getDirection()}else {a[m]=h.getDirection()}}else {a[g]=b.encodeSorters([h],!0)}}if(e&&c&&c.length>0){if(u){for(f=c.length>1&&j?1:0;f<c.length;f++){if(i===e){a[e]=Ext.Array.push(a[e]||[],c[f].getProperty()+' '+c[f].getDirection())}else {a[e]=Ext.Array.push(a[e]||[],c[f].getProperty());a[i]=Ext.Array.push(a[i]||[],c[f].getDirection())}}}else {a[e]=b.encodeSorters(c)}}if(n&&k&&k.length>0){a[n]=b.encodeFilters(k)}return a},buildUrl:function(c){var b=this,a=b.getUrl(c);if(b.getNoCache()){a=Ext.urlAppend(a,Ext.String.format('{0}={1}',b.getCacheString(),Ext.Date.now()))}return a},getUrl:function(a){var b;if(a){b=a.getUrl()||this.getApi()[a.getAction()]}return b?b:this.callParent()},doRequest:function(a,b,c){},afterRequest:Ext.emptyFn,destroy:function(){var a=this;a.destroying=!0;a.reader=a.writer=Ext.destroy(a.reader,a.writer);a.callParent();a.destroyed=!0}});Ext.define('Ext.data.proxy.Ajax',{extend:Ext.data.proxy.Server,alias:'proxy.ajax',alternateClassName:['Ext.data.HttpProxy','Ext.data.AjaxProxy'],isAjaxProxy:!0,defaultActionMethods:{create:'POST',read:'GET',update:'POST',destroy:'POST'},config:{binary:!1,headers:undefined,paramsAsJson:!1,withCredentials:!1,useDefaultXhrHeader:!0,username:null,password:null,actionMethods:{create:'POST',read:'GET',update:'POST',destroy:'POST'}},doRequest:function(e){var a=this,g=a.getWriter(),b=a.buildRequest(e),f=a.getMethod(b),c,d;if(g&&e.allowWrite()){b=g.write(b)}b.setConfig({binary:a.getBinary(),headers:a.getHeaders(),timeout:a.getTimeout(),scope:a,callback:a.createRequestCallback(b,e),method:f,useDefaultXhrHeader:a.getUseDefaultXhrHeader(),disableCaching:!1});if(a.responseType!=null&&Ext.supports.XHR2){b.setResponseType(a.responseType)}if(f.toUpperCase()!=='GET'&&a.getParamsAsJson()){d=b.getParams();if(d){c=b.getJsonData();if(c){c=Ext.Object.merge({},c,d)}else {c=d}b.setJsonData(c);b.setParams(undefined)}}if(a.getWithCredentials()){b.setWithCredentials(!0);b.setUsername(a.getUsername());b.setPassword(a.getPassword())}return a.sendRequest(b)},sendRequest:function(a){a.setRawRequest(Ext.Ajax.request(a.getCurrentConfig()));this.lastRequest=a;return a},abort:function(a){a=a||this.lastRequest;if(a){Ext.Ajax.abort(a.getRawRequest())}},getMethod:function(d){var a=this.getActionMethods(),b=d.getAction(),c;if(a){c=a[b]}return c||this.defaultActionMethods[b]},createRequestCallback:function(a,b){return function(f,e,d){var c=this;if(a===c.lastRequest){c.lastRequest=null}if(!c.destroying&&!c.destroyed){c.processResponse(e,b,a,d)}}},destroy:function(){this.lastRequest=null;this.callParent()}});Ext.define('Ext.data.reader.Json',{extend:Ext.data.reader.Reader,alternateClassName:'Ext.data.JsonReader',alias:'reader.json',config:{record:null,metaProperty:'metaData',useSimpleAccessors:!1,preserveRawData:!1},responseType:'json',updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},getResponseData:function(a){var b;if(typeof a.responseJson==='object'){return a.responseJson}try{return Ext.decode(a.responseText)}catch(c){b=this.createReadError(c.message);Ext.Logger.warn('Unable to parse the JSON returned by the server');this.fireEvent('exception',this,a,b);return b}},buildExtractors:function(c){var a=this,b=Ext.emptyFn;if(a.callParent([c])){a.getRoot=a.setupExtractor(a.getRootProperty(),Ext.identityFn);a.getGroupRoot=a.setupExtractor(a.getGroupRootProperty(),b);a.getSummaryRoot=a.setupExtractor(a.getSummaryRootProperty(),b);a.getMeta=a.setupExtractor(a.getMetaProperty(),b)}},extractData:function(a,f){var e=this.getRecord(),d=[],c,b;if(e){c=a.length;if(!c&&Ext.isObject(a)){c=1;a=[a]}for(b=0;b<c;b++){d[b]=a[b][e]}}else {d=a}return this.callParent([d,f])},getModelData:function(a){return this.getPreserveRawData()?Ext.apply({},a):a},createAccessor:function(){var a=/[\[\.]/;return function(c){var o=this.getUseSimpleAccessors(),n,f,j,m,b,e,p,l,g,k,d,h,i,q;if(!(c||c===0)){return}if(typeof c==='function'){return c}if(!o){n=String(c).search(a)}if(o===!0||n<0){f=function(a){return a==null?null:a[c]}}else {j='raw';m=[];b='';e=0;q=c.length;for(h=0;h<=q;++h){d=c[h];p=d==='.';l=d==='[';g=d===']';k=p||l||g||!d;if(!k||e>1||e&&!g){b+=d}else {if(k){i=!1;if(l){++e}else {if(g){--e;i=!0}}if(b){if(i){b='['+b+']'}else {b='.'+b}j+=b;m.push(''+j);b=''}}}}f=m.join(' && ');f=Ext.functionFactory('raw','return '+f)}return f}}(),createFieldAccessor:function(b){var e=this,a=b.mapping,c=a||a===0,d=c?a:b.name;if(c){if(typeof d==='function'){return function(c,a){return b.mapping(c,a)}}else {return e.createAccessor(d)}}},getAccessorKey:function(b){var a=this.getUseSimpleAccessors()?'simple':'';return this.callParent([a+b])},privates:{copyFrom:function(a){this.callParent([a]);this.getRoot=a.getRoot},getGroupRoot:function(a){this.buildExtractors();return this.getGroupRoot(a)},getSummaryRoot:function(a){this.buildExtractors();return this.getSummaryRoot(a)},setupExtractor:function(a,b){return a?this.getAccessor(a):b}}});Ext.define('Ext.data.writer.Json',{extend:Ext.data.writer.Writer,alternateClassName:'Ext.data.JsonWriter',alias:'writer.json',config:{rootProperty:undefined,encode:!1,allowSingle:!0,expandData:!1},getExpandedData:function(f){var i=f.length,g=0,a,c,b,d,e,h;h=function(c,b){var a={};a[c]=b;return a};for(;g<i;g++){a=f[g];for(c in a){if(a.hasOwnProperty(c)){b=c.split('.');d=b.length-1;if(d>0){e=a[c];for(;d>0;d--){e=h(b[d],e)}a[b[0]]=a[b[0]]||{};Ext.Object.merge(a[b[0]],e);delete a[c]}}}}return f},writeRecords:function(b,a){var c=this,e=c.getRootProperty(),d,g,f;if(c.getExpandData()){a=c.getExpandedData(a)}if(c.getAllowSingle()&&a.length===1){a=a[0];g=!0}f=this.getTransform();if(f){a=f(a,b)}if(c.getEncode()){if(e){b.setParam(e,Ext.encode(a))}else {}}else {if(g||a&&a.length){d=b.getJsonData()||{};if(e){d[e]=a}else {d=a}b.setJsonData(d)}}return b}});Ext.define('Ext.util.SorterCollection',{extend:Ext.util.Collection,isSorterCollection:!0,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(b){var a=this;a.sortFn=Ext.util.Sorter.createComparator(a);a.callParent([b]);a.setDecoder(a.decodeSorter)},addSort:function(b,c,d){var a=this,f,j,k,g,h,i,e;if(!b){a.beginUpdate();a.endUpdate()}else {g=a.getOptions();if(b instanceof Array){e=b;d=c;c=null}else {if(Ext.isString(b)){if(!(i=a.get(b))){e=[{property:b,direction:c||g.getDefaultSortDirection()}]}else {e=[i]}}else {if(Ext.isFunction(b)){e=[{sorterFn:b,direction:c||g.getDefaultSortDirection()}]}else {e=[b];d=c;c=null}}}d=a._sortModes[d||'replace'];h=a.getAt(0);f=a.length;j=d.append?f:0;a.beginUpdate();a.splice(j,d.replace?f:0,e);if(d.multi){f=a.length;k=g.getMultiSortLimit();if(f>k){a.removeAt(k,f)}}if(i&&c){i.setDirection(c)}else {if(j===0&&h&&h===a.getAt(0)){h.toggle()}}a.endUpdate()}},clear:function(){this.beginUpdate();this.callParent();this.endUpdate(this.items)},getSortFn:function(){return this.sortFn},getByProperty:function(d){var c=this.items,e=c.length,a,b;for(a=0;a<e;++a){b=c[a];if(b.getProperty()===d){return b}}return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(a,i){var c=this,g=c.getOptions(),h=g.getRootProperty(),f=c.getSorterOptionsFn(),d,b,e;if(a.isSorter){if(!a.getRoot()){a.setRoot(h)}}else {b={direction:g.getDefaultSortDirection(),root:h};e=typeof a;if(e==='string'){d=c.get(a);if(d){return d}b.property=a}else {if(e==='function'){b.sorterFn=a}else {b=Ext.apply(b,a);if(b.fn){b.sorterFn=b.fn;delete b.fn}}}a=Ext.create(i||Ext.util.Sorter,b)}if(f){f.call(c.getSorterOptionsScope()||c,a)}return a},setSorterConfigure:function(b,a){this.setSorterOptionsFn(b);this.setSorterOptionsScope(a)},decodeRemoveItems:function(e,d){var k=this,b=d===undefined?e:e[d];if(!b||!b.$cloned){if(e.length>d+1||!Ext.isIterable(b)){b=Ext.Array.slice(e,d)}var j=k.items,l=b.length,c=[],f,g,i,a,h;for(f=0;f<l;f++){a=b[f];if(a&&a.isSorter){c.push(a)}else {h=typeof a;if(h==='string'){a=k.get(a);if(a){c.push(a)}}else {if(h==='function'){for(i=j.length;i-->0;){g=j[i];if(g.getSorterFn()===a){c.push(g)}}}}}}b=c;b.$cloned=!0}return b},getOptions:function(){return this.$sortable||this}});Ext.define('Ext.util.FilterCollection',{extend:Ext.util.Collection,isFilterCollection:!0,$filterable:null,filterFn:null,constructor:function(b){var a=this;a.filterFn=Ext.util.Filter.createFilterFn(a);a.callParent([b]);a.setDecoder(a.decodeFilter)},filterData:function(a){return this.filtered?Ext.Array.filter(a,this.filterFn):a},getFilterFn:function(){return this.filterFn},isItemFiltered:function(a){return !this.filterFn(a)},getFilterCount:function(){var c=this.items,b=c.length,a;for(a=b-1;a>=0;a--){if(c[a].getDisabled()){b--}}return b},decodeFilter:function(b){var d=this.getOptions(),c=d.getRootProperty(),a;if(b.isFilter){if(b.setRoot&&!b.getRoot()){b.setRoot(c)}}else {a={root:c};if(Ext.isFunction(b)){a.filterFn=b}else {a=Ext.apply(a,b);if(a.fn){a.filterFn=a.fn;delete a.fn}if(Ext.util.Filter.isInvalid(a)){return !1}}b=new Ext.util.Filter(a)}return b},decodeRemoveItems:function(f,e){var p=this,b=e===undefined?f:f[e];if(!b.$cloned){if(f.length>e+1||!Ext.isIterable(b)){b=Ext.Array.slice(f,e)}var k=p.items,o=b.length,h=[],a,g,l,n,m,c,d,j,i;for(g=0;g<o;g++){a=b[g];if(a&&a.isFilter){h.push(a)}else {i=typeof a;l=i==='function';n=a.property!==undefined&&a.value!==undefined;m=i==='string';for(j=k.length;j-->0;){c=k[j];d=!1;if(m){d=c.getProperty()===a}else {if(l){d=c.getFilterFn()===a}else {if(n){d=c.getProperty()===a.property&&c.getValue()===a.value}}}if(d){h.push(c)}}}}b=h;b.$cloned=!0}return b},getOptions:function(){return this.$filterable||this}});Ext.define('Ext.util.GroupCollection',{extend:Ext.util.Collection,isGroupCollection:!0,config:{grouper:null,groupConfig:null,itemRoot:null},observerPriority:-100,emptyGroupRetainTime:300000,constructor:function(a){this.emptyGroups={};this.callParent([a]);this.on('remove','onGroupRemove',this)},getItemGroup:function(a){var b=this.getGrouper().getGroupString(a);return this.get(b)},onCollectionAdd:function(b,a){if(!this.isConfiguring){this.addItemsToGroups(b,a.items,a.at)}},onCollectionBeforeItemChange:function(b,a){this.changeDetails=a},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){if(!a.indexChanged){this.syncItemGrouping(b,a)}this.changeDetails=null},onCollectionRefresh:function(d){if(d.generation){var c=this,j=c.itemGroupKeys={},h=c.createEntries(d,d.items),a=h.entries,g,e,i,b,f;for(e=0,i=a.length;e<i;++e){b=a[e];b.group.splice(0,1.0E99,b.items);for(f=0;f<b.items.length;f++){j[d.getKey(b.items[f])]=b.group}}a=null;for(g in c.map){if(!(g in h.groups)){(a||(a=[])).push(c.map[g])}}if(a){c.remove(a)}c.sortItems()}},onCollectionRemove:function(f,k){var a=this,j=a.changeDetails,m=a.itemGroupKeys||(a.itemGroupKeys={}),e,g,d,b,i,h,c,l;if(f.getCount()){if(j){l=j.item||j.items[0];e=a.createEntries(f,[l],!1).entries;e[0].group=m['oldKey' in k?k.oldKey:f.getKey(l)]}else {e=a.createEntries(f,k.items,!1).entries}for(b=0,i=e.length;b<i;++b){d=(g=e[b]).group;if(d){d.remove(g.items)}for(h=0;h<g.items.length;h++){delete m[f.getKey(g.items[h])]}if(d&&!d.length){(c||(c=[])).push(d)}}}else {a.itemGroupKeys={};c=a.items;for(b=0,i=c.length;b<i;++b){c[b].clear()}}if(c){a.remove(c)}},onCollectionSort:function(g){var f=this,c=g.getSorters(!1),e,d,b,a;if(c){e=f.items;d=f.length;for(b=0;b<d;++b){a=e[b];if(a.getSorters()===c){a.sortItems()}else {a.setSorters(c)}}}},onCollectionUpdateKey:function(b,a){if(!a.indexChanged){a.oldIndex=b.indexOf(a.item);this.syncItemGrouping(b,a)}},addItemsToGroups:function(c,n,d,f){var e=this,p=e.itemGroupKeys||(e.itemGroupKeys={}),k=e.createEntries(c,n).entries,g=-1,m,a,h,o,i,b,j,l;for(h=0,o=k.length;h<o;++h){a=k[h];b=a.group;if(f||f===0){l=n[0];if(b.getCount()>0&&c.getSorters().getCount()===0){j=c.indexOf(b.items[0]);if(f<j){g=0}else {g=f-j}}if(g===-1){b.add(l)}else {b.insert(g,l)}}else {if(e.length>1&&d){m=c.indexOf(k[0].group.getAt(0));d=Math.max(d-m,0)}a.group.insert(d!=null?d:b.items.length,a.items);for(i=0;i<a.items.length;i++){p[c.getKey(a.items[i])]=a.group}}}e.sortItems()},createEntries:function(n,j,m){var l=this,c={},g=[],h=l.getGrouper(),d,i,a,f,b,e,k;for(b=0,k=j.length;b<k;++b){a=h.getGroupString(e=j[b]);f=h.getGroupValue(e);if(!(d=c[a])){i=l.getGroup(n,a,f,m);g.push(c[a]=d={group:i,items:[]})}d.items.push(e)}return {groups:c,entries:g}},syncItemGrouping:function(i,a){var d=this,h=d.itemGroupKeys||(d.itemGroupKeys={}),c=a.item,j=d.getGrouper(),f,e,b,g;e=i.getKey(c);f='oldKey' in a?a.oldKey:e;b=h[f];g=d.getGroup(i,j.getGroupString(c),j.getGroupValue(c));a.group=g;a.oldGroup=b;if(!(a.groupChanged=g!==b)){b.itemChanged(c,a.modified,a.oldKey,a)}else {if(b){b.updateKey(c,f,e);b.remove(c);if(!b.length){d.remove(b)}}d.addItemsToGroups(i,[c],null,a.oldIndex)}delete h[f];h[e]=g},getGroup:function(d,c,g,e){var a=this,b=a.get(c),f=a.getAutoSort();if(b){b.setSorters(d.getSorters())}else {if(e!==!1){b=a.emptyGroups[c]||Ext.create(Ext.apply({xclass:'Ext.util.Group',groupKey:c,groupValue:g,rootProperty:a.getItemRoot(),sorters:d.getSorters()},a.getGroupConfig()));b.ejectTime=null;a.setAutoSort(!1);a.add(b);a.setAutoSort(f)}}return b},getKey:function(a){return a.getGroupKey()},createSortFn:function(){var c=this,b=c.getGrouper(),a=c.getSorters().getSortFn();if(!b){return a}return function(c,d){return b.sort(c.items[0],d.items[0])||a(c,d)}},updateGrouper:function(b){var a=this;a.grouped=!!(b&&a.$groupable.getAutoGroup());a.onSorterChange();a.onEndUpdateSorters(a.getSorters())},destroy:function(){var a=this;a.$groupable=null;a.destroyGroups(a.items);Ext.undefer(a.checkRemoveQueueTimer);a.callParent()},privates:{destroyGroups:function(b){var c=b.length,a;for(a=0;a<c;++a){b[a].destroy()}},onGroupRemove:function(h,g){var e=this,b=g.items,f=e.emptyGroups,d,a,c;b=Ext.Array.from(b);for(c=0,d=b.length;c<d;c++){a=b[c];a.setSorters(null);f[a.getGroupKey()]=a;a.ejectTime=Ext.now()}e.checkRemoveQueue()},checkRemoveQueue:function(){var a=this,c=a.emptyGroups,d,b,e;for(d in c){b=c[d];if(!b.getCount()&&Ext.now()-b.ejectTime>a.emptyGroupRetainTime){Ext.destroy(b);delete c[d]}else {e=!0}}if(e){Ext.undefer(a.checkRemoveQueueTimer);a.checkRemoveQueueTimer=Ext.defer(a.checkRemoveQueue,a.emptyGroupRetainTime,a)}}}});Ext.define('Ext.data.Store',{extend:Ext.data.ProxyStore,alias:'store.store',mixins:[Ext.data.LocalStore],config:{data:undefined,clearRemovedOnLoad:!0,clearOnPageLoad:!0,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:!0},loadCount:0,complete:!1,moveMapCount:0,constructor:function(a){var b=this,c;if(a){if(a.buffered){return new Ext.data['BufferedStore'](a)}}b.callParent([a]);c=b.inlineData;if(c){delete b.inlineData;b.loadInlineData(c)}},applyData:function(a,c){var b=this;b.getFields();b.getModel();if(a&&a.isCollection){a.setRootProperty('data');c=a;c.addObserver(this);if(a.getCount()){b.afterLoadRecords(a.items);if(b.hasListeners.load){b.fireEvent('load',b,a.items,!0)}}}else {if(!c){c=b.constructDataCollection()}if(a){if(b.isInitializing){b.inlineData=a}else {b.loadData(a)}}}return c},loadInlineData:function(c){var a=this,b=a.getProxy();if(b&&b.isMemoryProxy){b.setData(c);a.suspendEvents();a.read();a.resumeEvents()}else {a.removeAll(!0);a.suspendEvents();a.loadData(c);a.resumeEvents()}},onCollectionAdd:function(b,a){this.loadCount=this.loadCount||1;this.onCollectionAddItems(b,a.items,a)},onCollectionFilterAdd:function(a,b){this.onCollectionAddItems(a,b)},onCollectionAddItems:function(n,g,b){var a=this,m=g.length,k=b?!b.next:!1,h=a.removed,j=a.ignoreCollectionAdd,l=a.getSession(),e=b&&b.replaced,f,i,c,d;if(a.activeRanges){a.syncActiveRanges()}for(f=0;f<m;++f){c=g[f];if(l){l.adopt(c)}if(!j){c.join(a);if(h&&h.length){Ext.Array.remove(h,c)}i=i||c.phantom||c.dirty}}if(j){return}if(e){d=[];do{Ext.Array.push(d,e.items);e=e.next}while(e);a.setMoving(d,!0)}if(b){if(b.replaced){if(k){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}}else {a.fireEvent('add',a,g,b.at);if(k){a.fireEvent('datachanged',a)}}}if(d){a.setMoving(d,!1)}a.needsSync=a.needsSync||i},onCollectionBeforeItemChange:function(e,a){var c=a.item,b=a.modified||null,d=a.meta;this.fireEvent('beforeupdate',this,c,d,b,a)},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(f,b){var a=this,c=b.item,d=b.modified||null,e=b.meta;if(a.fireChangeEvent(c)){a.onUpdate(c,e,d,b);a.fireEvent('update',a,c,e,d,b);a.fireEvent('datachanged',a)}},afterChange:function(b,a,c){this.getData().itemChanged(b,a||null,undefined,c)},afterCommit:function(b,a){this.afterChange(b,a,Ext.data.Model.COMMIT)},afterEdit:function(a,b){this.needsSync=this.needsSync||a.dirty;this.afterChange(a,b,Ext.data.Model.EDIT)},afterReject:function(a){this.afterChange(a,null,Ext.data.Model.REJECT)},afterDrop:function(a){this.getData().remove(a)},afterErase:function(a){this.removeFromRemoved(a)},addSorted:function(c){var a=this,d=a.getRemoteSort(),b=a.getData(),e;if(d){b.setSorters(a.getSorters())}e=b.findInsertionIndex(c);if(d){b.setSorters(null)}return a.insert(e,c)},remove:function(c,h,i){var f=this,e=f.getDataSource(),d,g,b,a;if(c){if(c.isModel){if(e.indexOf(c)>-1){b=[c];d=1}else {d=0}}else {b=[];for(g=0,d=c.length;g<d;++g){a=c[g];if(a&&a.isEntity){if(!e.contains(a)){continue}}else {if(!(a=e.getAt(a))){continue}}b.push(a)}d=b.length}}if(!d){return []}f.removeIsMove=h===!0;f.removeIsSilent=i;e.remove(b);f.removeIsSilent=!1;return b},onCollectionRemove:function(n,f){var a=this,g=a.removed,e=f.items,m=e.length,i=f.at,b=f.replacement,h=a.removeIsMove||b&&Ext.Array.equals(e,b.items),k=a.removeIsSilent,j=!f.next,l=a.getDataSource(),d,c;if(a.ignoreCollectionRemove){return}if(b){a.setMoving(b.items,!0)}for(d=m-1;d>=0;d--){c=e[d];if(!l.contains(c)){if(g&&!h&&!c.phantom&&!c.erasing){c.removedFrom=i+d;g.push(c);a.needsSync=!0}else {c.unjoin(a)}}}if(!k){if(!b||!b.items.length){a.fireEvent('remove',a,e,i,h);if(j){a.fireEvent('datachanged',a)}}}if(b){a.setMoving(b.items,!1)}},onFilterEndUpdate:function(){var a=this;if(a.destroying||a.destroyed){return}if(a.activeRanges){a.syncActiveRanges()}a.callParent(arguments);a.callObservers('Filter')},removeAt:function(a,b){var c=this.getData();a=Math.max(a,0);if(a<c.length){if(arguments.length===1){b=1}else {if(!b){return}}c.removeAt(a,b)}},removeAll:function(d){var a=this,b=a.getData(),c=b.getRange();if(b.length){a.removeIsSilent=!0;a.callObservers('BeforeRemoveAll');b.removeAll();a.removeIsSilent=!1;if(!d){a.fireEvent('clear',a,c);a.fireEvent('datachanged',a)}a.callObservers('AfterRemoveAll',[!!d])}return c},setRecords:function(a){var b=this.getCount();++this.loadCount;if(b){this.getData().splice(0,b,a)}else {this.add(a)}},splice:function(b,a,c){return this.getData().splice(b,a,c)},onProxyLoad:function(b){var a=this,e=b.getResultSet(),c=b.getRecords(),d=b.wasSuccessful();if(a.destroyed){return}if(e){a.totalCount=e.getTotal()}if(d){c=a.processAssociation(c);a.loadRecords(c,b.getAddRecords()?{addRecords:!0}:undefined);a.attachSummaryRecord(e)}else {a.loading=!1}if(a.hasListeners.load){a.fireEvent('load',a,c,d,b)}a.callObservers('AfterLoad',[c,d,b])},onProxyWrite:function(a){if(a.wasSuccessful()){this.attachSummaryRecord(a.getResultSet())}this.callParent([a])},filterDataSource:function(f){var c=this.getDataSource(),b=c.items,e=b.length,d=[],a;for(a=0;a<e;a++){if(f.call(c,b[a])){d.push(b[a])}}return d},getNewRecords:function(){return this.filterDataSource(this.filterNew)},getRejectRecords:function(){return this.filterDataSource(this.filterRejects)},getUpdatedRecords:function(){return this.filterDataSource(this.filterUpdated)},loadData:function(d,e){var b=this,f=d.length,a=[],c;for(c=0;c<f;c++){a.push(b.createModel(d[c]))}a=b.processAssociation(a);b.loadRecords(a,e?b.addRecordsOptions:undefined)},loadRawData:function(g,f){var a=this,e=a.getSession(),b,d,c;b=a.getProxy().getReader().read(g,e?{recordCreator:e.recordCreator}:undefined);d=b.getRecords();c=b.getSuccess();if(c){a.totalCount=b.getTotal();a.loadRecords(d,f?a.addRecordsOptions:undefined)}return c},loadRecords:function(f,e){var a=this,b=a.getData(),c,d;if(e){c=e.addRecords}if(!a.getRemoteSort()&&!a.getSortOnLoad()){d=!0;b.setAutoSort(!1)}if(!c){a.clearData(!0)}a.loading=!1;a.ignoreCollectionAdd=!0;a.callObservers('BeforePopulate');b.add(f);a.ignoreCollectionAdd=!1;if(d){b.setAutoSort(!0)}a.afterLoadRecords(f)},afterLoadRecords:function(c){var a=this,d=c.length,b;for(b=0;b<d;b++){c[b].join(a)}if(!a.isEmptyStore){++a.loadCount;a.complete=!0}if(a.hasListeners.datachanged){a.fireEvent('datachanged',a)}if(a.hasListeners.refresh){a.fireEvent('refresh',a)}a.callObservers('AfterPopulate')},loadPage:function(c,b){var a=this,d=a.getPageSize();a.currentPage=c;b=Ext.apply({page:c,start:(c-1)*d,limit:d,addRecords:!a.getClearOnPageLoad()},b);a.read(b)},nextPage:function(a){this.loadPage(this.currentPage+1,a)},previousPage:function(a){this.loadPage(this.currentPage-1,a)},clearData:function(h){var a=this,b=a.removed,f=a.getDataSource(),g=a.getClearRemovedOnLoad(),j=b&&h&&!g,d,e,c,i;if(f){d=f.items;for(c=0,i=d.length;c<i;++c){e=d[c];if(j&&Ext.Array.contains(b,e)){continue}e.unjoin(a)}a.ignoreCollectionRemove=!0;a.callObservers('BeforeClear');f.removeAll();a.ignoreCollectionRemove=!1;a.callObservers('AfterClear')}if(b&&(!h||g)){b.length=0}},onIdChanged:function(b,a,c){this.getData().updateKey(b,a);this.fireEvent('idchanged',this,b,a,c)},commitChanges:function(){var a=this,c=a.getModifiedRecords(),d=c.length,b=0;Ext.suspendLayouts();a.beginUpdate();for(;b<d;b++){c[b].commit()}a.cleanRemoved();a.endUpdate();Ext.resumeLayouts(!0);a.fireEvent('commit',a)},filterNewOnly:function(a){return a.phantom===!0},filterRejects:function(a){return a.phantom||a.dirty},rejectChanges:function(){var a=this,c=a.getRejectRecords(),f=c.length,b,d,e,g,h,i;Ext.suspendLayouts();a.beginUpdate();for(b=0;b<f;b++){d=c[b];if(d.phantom){e=e||[];e.push(d)}else {d.reject()}}if(e){a.remove(e);for(b=0,f=e.length;b<f;++b){e[b].reject()}}c=a.getRawRemovedRecords();if(c){f=c.length;g=!a.getRemoteSort()&&a.isSorted();if(g){h=a.getData();i=h.getAutoSort();h.setAutoSort(!1)}for(b=f-1;b>=0;b--){d=c[b];d.reject();if(!g){a.insert(d.removedFrom||0,d)}}if(g){h.setAutoSort(i);a.add(c)}c.length=0}a.endUpdate();Ext.resumeLayouts(!0);a.fireEvent('reject',a)},doDestroy:function(){var a=this,c=a.loadTask,d=a.getData(),b=d.getSource();a.clearData();a.setSession(null);a.observers=null;if(c){c.cancel();a.loadTask=null}if(b){b.destroy()}a.callParent()},privates:{commitOptions:{commit:!0},attachSummaryRecord:function(g){if(!g){return}var d=this,a=g.getSummaryData(),k=d.getGrouper(),b=d.summaryRecord,h=d.commitOptions,i,j,f,c,e;if(a){if(b){b.set(a.data,h)}else {d.summaryRecord=a;a.isRemote=!0}}if(k){a=g.getGroupData();if(a){i=d.getGroups();for(f=0,j=a.length;f<j;++f){c=a[f];e=i.getItemGroup(c);if(e){b=e.summaryRecord;if(b){b.set(c.data,h)}else {e.summaryRecord=c;c.isRemote=!0}}}}}},fetch:function(a){var b;a=Ext.apply({},a);this.setLoadOptions(a);b=this.createOperation('read',a);b.execute()},fireChangeEvent:function(a){return this.getDataSource().contains(a)},onBeforeLoad:function(a){this.callObservers('BeforeLoad',[a])},onRemoteFilterSet:function(a,b){if(a){this.getData().setFilters(b?null:a)}this.callParent([a,b])},onRemoteSortSet:function(b,a){var c=this.getData();if(b){c.setSorters(a?null:b)}c.setAutoGroup(!a);this.callParent([b,a])},isMoving:function(a,f){var c=this.moveMap,b=0,e,d;if(c){if(a){if(Ext.isArray(a)){for(d=0,e=a.length;d<e;++d){b+=c[a[d].id]?1:0}}else {if(c[a.id]){++b}}}else {b=f?c:this.moveMapCount}}return b},setLoadOptions:function(a){var b=this,c=b.getPageSize(),e,d;if(b.getRemoteSort()&&!a.grouper){d=b.getGrouper();if(d){a.grouper=d}}if(c||'start' in a||'limit' in a||'page' in a){a.page=a.page!=null?a.page:b.currentPage;a.start=a.start!==undefined?a.start:(a.page-1)*c;a.limit=a.limit!=null?a.limit:c;b.currentPage=a.page}a.addRecords=a.addRecords||!1;if(!a.recordCreator){e=b.getSession();if(e){a.recordCreator=e.recordCreator}}b.callParent([a])},setMoving:function(e,f){var b=this,c=b.moveMap||(b.moveMap={}),g=e.length,d,a;for(d=0;d<g;++d){a=e[d].id;if(f){if(c[a]){++c[a]}else {c[a]=1;++b.moveMapCount}}else {if(--c[a]===0){delete c[a];--b.moveMapCount}}}if(b.moveMapCount===0){b.moveMap=null}},processAssociation:function(b){var a=this,c=a.getAssociatedEntity();if(c){b=a.getRole().processLoad(a,c,b,a.getSession())}return b}}});Ext.define('Ext.data.reader.Array',{extend:Ext.data.reader.Json,alternateClassName:'Ext.data.ArrayReader',alias:'reader.array',config:{totalProperty:undefined,successProperty:undefined},createFieldAccessor:function(a){var b=a.mapping,d=a.hasMapping()?b:a.ordinal,c;a.mapping=d;c=this.callParent(arguments);a.mapping=b;return c},getModelData:function(a){return {}}});Ext.define('Ext.data.ArrayStore',{extend:Ext.data.Store,alias:'store.array',alternateClassName:['Ext.data.SimpleStore'],config:{proxy:{type:'memory',reader:'array'}},loadData:function(a,d){if(this.expandData){var c=[],b=0,e=a.length;for(;b<e;b++){c[c.length]=[a[b]]}a=c}this.callParent([a,d])}});Ext.define('Ext.data.StoreManager',{extend:Ext.util.MixedCollection,alternateClassName:['Ext.StoreMgr','Ext.data.StoreMgr','Ext.StoreManager'],singleton:!0,register:function(){var a,b;for(a=0;b=arguments[a];a++){this.add(b)}},unregister:function(){var a,b;for(a=0;b=arguments[a];a++){this.remove(this.lookup(b))}},lookup:function(a,h){var d,c,f,g,b,e;if(Ext.isArray(a)){d=a[0];c=a;if(Ext.isObject(d)){a={data:c}}else {f=Ext.isArray(d);g=['field1'];if(f){for(b=2,e=d.length;b<=e;++b){g.push('field'+b)}}else {c=[];for(b=0,e=a.length;b<e;++b){c.push([a[b]])}}return new Ext.data.ArrayStore({data:c,fields:g,autoDestroy:!0,autoCreated:!0,expanded:!f})}}if(Ext.isString(a)){return this.get(a)}else {return Ext.Factory.store(a,h)}},getKey:function(a){return a.storeId},addEmptyStore:function(){var a=this.$emptyStore,b={destroy:Ext.emptyFn};if(!a){a=this.$emptyStore=Ext.regStore('ext-empty-store',{proxy:'memory',useModelWarning:!1});a.isEmptyStore=!0;a.on=a.addListener=function(){return b};a.un=a.removeListener=Ext.emptyFn}this.add(a)},clear:function(){this.callParent();this.addEmptyStore()}},function(){Ext.regStore=function(b,a){var c;if(Ext.isObject(b)){a=b}else {if(Ext.data.StoreManager.containsKey(b)){return Ext.data.StoreManager.lookup(b)}a.storeId=b}if(a instanceof Ext.data.Store){c=a}else {c=new Ext.data.Store(a)}Ext.data.StoreManager.register(c);return c};Ext.getStore=function(a){return Ext.data.StoreManager.lookup(a)};Ext.data.StoreManager.addEmptyStore()});Ext.define('Ext.util.StoreHolder',{mixinId:'storeholder',autoDestroyBoundStore:!1,bindStore:function(d,e,c){var a=this,b;c=c||'store';b=e?null:a[c];if(d!==b){if(b){if(!a.onUnbindStore.$emptyFn){a.onUnbindStore(b,e,c)}if(!b.destroyed){if(a.autoDestroyBoundStore&&c==='store'&&b.autoDestroy){b.destroy()}else {a.unbindStoreListeners(b)}}}if(d){a[c]=d=Ext.data.StoreManager.lookup(d);a.bindStoreListeners(d);if(!a.onBindStore.$emptyFn){a.onBindStore(d,b,e)}}else {a[c]=null}if(a.fireEvent){a.fireEvent('storechange',a,d,b)}}return a},getStore:function(){return this.store},setStore:function(a){this.bindStore(a)},unbindStoreListeners:function(b){var a=this.storeListeners;if(a){b.un(a)}},bindStoreListeners:function(b){var a=this.getStoreListeners(b);if(a){a=Ext.apply({},a);if(!a.scope){a.scope=this}this.storeListeners=a;b.on(a)}},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn});Ext.define('Ext.LoadMask',{extend:Ext.Component,alias:'widget.loadmask',mixins:[Ext.util.StoreHolder],isLoadMask:!0,msg:'Loading...',msgCls:Ext.baseCSSPrefix+'mask-loading',msgWrapCls:Ext.baseCSSPrefix+'mask-msg',useMsg:!0,useTargetEl:!1,cls:Ext.baseCSSPrefix+'mask',componentCls:Ext.baseCSSPrefix+'border-box',ariaRole:'progressbar',focusable:!0,tabIndex:0,childEls:['msgWrapEl','msgEl','msgTextEl'],renderTpl:['<div id="{id}-msgWrapEl" data-ref="msgWrapEl" class="{[values.$comp.msgWrapCls]}" role="presentation">','<div id="{id}-msgEl" data-ref="msgEl" class="{[values.$comp.msgCls]} ',Ext.baseCSSPrefix,'mask-msg-inner {childElCls}" role="presentation">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="',Ext.baseCSSPrefix,'mask-msg-text','{childElCls}" role="presentation">{msg}</div>','</div>','</div>'],maskOnDisable:!1,skipLayout:!0,constructor:function(c){var a=this,b;if(arguments.length===2){b=a.target=c;c=arguments[1]}else {b=c.target}a.callParent([c]);if(b.isComponent){a.ownerCt=b;a.hidden=!0;a.renderTo=a.getMaskTarget();a.external=a.renderTo===Ext.getBody();a.bindComponent(b)}else {b=Ext.get(b);a.isElement=!0;a.renderTo=a.target}a.render(a.renderTo);if(a.store){a.bindStore(a.store,!0)}},initRenderData:function(){var a=this.callParent(arguments);a.msg=this.msg||'';return a},onRender:function(){this.callParent(arguments);this.maskEl=this.el},bindComponent:function(b){var a=this,c={scope:this,resize:a.sizeMask};if(a.external){c.added=a.onComponentAdded;c.removed=a.onComponentRemoved;if(b.floating){c.move=a.sizeMask;a.activeOwner=b}else {if(b.ownerCt){a.onComponentAdded(b.ownerCt)}}}a.mon(b,c);if(a.external){a.mon(Ext.GlobalEvents,{show:a.onContainerShow,hide:a.onContainerHide,expand:a.onContainerExpand,collapse:a.onContainerCollapse,scope:a})}},onComponentAdded:function(b){var a=this;delete a.activeOwner;a.floatParent=b;if(!b.floating){b=b.up('[floating]')}if(b){a.activeOwner=b;a.mon(b,'move',a.sizeMask,a);a.mon(b,'tofront',a.onOwnerToFront,a)}else {a.preventBringToFront=!0}b=a.floatParent.ownerCt;if(a.rendered&&a.isVisible()&&b){a.floatOwner=b;a.mon(b,'afterlayout',a.sizeMask,a,{single:!0})}},onComponentRemoved:function(d){var a=this,b=a.activeOwner,c=a.floatOwner;if(b){a.mun(b,'move',a.sizeMask,a);a.mun(b,'tofront',a.onOwnerToFront,a)}if(c){a.mun(c,'afterlayout',a.sizeMask,a)}delete a.activeOwner;delete a.floatOwner},afterRender:function(){var a=this;a.callParent(arguments);if(Ext.isIE){a.el.on('mousedown',a.onMouseDown,a)}this.el.skipGarbageCollection=!0},onMouseDown:function(b){var a=this.el;if(b.within(a)){b.preventDefault();a.focus()}},onOwnerToFront:function(b,a){this.el.setStyle('zIndex',a+1)},onContainerShow:function(a){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerHide:function(a){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onContainerExpand:function(a){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerCollapse:function(a){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onComponentHide:function(){var a=this;if(a.rendered&&a.isVisible()){a.hide();a.showNext=!0}},onComponentShow:function(){if(this.showNext){this.show()}delete this.showNext},sizeMask:function(){var a=this,b=a.activeOwner||a.target,d=a.external?a.getOwner().el:a.getMaskTarget(),c;if(a.rendered&&a.isVisible()){if(a.external){if(!a.isElement&&b.floating){c=b.el.getZIndex();if(!isNaN(c)){a.onOwnerToFront(b,c)}}a.el.setSize(d.getSize()).alignTo(d,'tl-tl')}a.msgWrapEl.center(a.el)}},bindStore:function(a,c){var b=this;Ext.destroy(b.proxyListeners);b.mixins.storeholder.bindStore.apply(b,arguments);a=b.store;if(a){while(a.getSource){a=a.getSource()}if(!a.loadsSynchronously()){b.proxyListeners=a.getProxy().on({exception:b.onLoad,scope:b,destroyable:!0})}if(a.isLoading()){b.onBeforeLoad()}}},getStoreListeners:function(d){var c=this.onLoad,b=this.onBeforeLoad,a={cachemiss:b,cachefilled:{fn:c,buffer:100}};if(!d.loadsSynchronously()){a.beforeload=b;a.load=c}return a},onDisable:function(){this.callParent(arguments);if(this.loading){this.onLoad()}},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var a=this.getOwner();if(this.isElement){return this.target}return this.useTargetEl?a.getTargetEl():a.getMaskTarget()||Ext.getBody()},onBeforeLoad:function(){var b=this,a=b.getOwner(),c;if(!b.disabled){b.loading=!0;if(a.componentLayoutCounter){b.maybeShow()}else {c=a.afterComponentLayout;a.afterComponentLayout=function(){a.afterComponentLayout=c;c.apply(a,arguments);b.maybeShow()}}}},maybeShow:function(){var a=this,b=a.getOwner(),c;c=b.isVisible(!0)&&(!a.isComponent||b.el.isVisible(!0));if(!c){a.showNext=!0}else {if(a.loading&&b.rendered){a.show()}}},hide:function(){var a=this,b=a.ownerCt;a.target.removeCls(Ext.baseCSSPrefix+'masked');if(a.isElement){b.unmask();a.fireEvent('hide',this);return}if(b){b.updateMaskState(!1,a)}delete a.showNext;return a.callParent(arguments)},show:function(){var a=this;a.target.addCls(Ext.baseCSSPrefix+'masked');if(a.isElement){a.ownerCt.mask(this.useMsg?this.msg:'',this.msgCls);a.fireEvent('show',this);return}return a.callParent(arguments)},afterShow:function(){var a=this,b=a.ownerCt;a.loading=!0;a.callParent(arguments);b.updateMaskState(!0,a);a.el.restoreTabbableState();a.syncMaskState()},syncMaskState:function(){var a=this,c=a.ownerCt,b=a.el;if(a.isVisible()){if(a.hasOwnProperty('msgWrapCls')){b.dom.className=a.msgWrapCls}if(a.useMsg){a.msgTextEl.setHtml(a.msg);a.ariaEl.dom.setAttribute('aria-valuetext',a.msg)}else {a.msgWrapEl.hide()}if(a.shim||Ext.useShims){b.enableShim(null,!0)}else {b.disableShim()}if(c.el.contains(Ext.Element.getActiveElement())){a.focus()}a.sizeMask()}},onLoad:function(){this.loading=!1;this.hide()},doDestroy:function(){var a=this;a.ownerCt=null;a.bindStore(null);if(a.isElement){a.ownerCt.unmask()}a.callParent()}});Ext.define('Ext.util.Bag',{isBag:!0,constructor:function(){this.items=[];this.map={}},generation:0,length:0,beginUpdate:Ext.emptyFn,endUpdate:Ext.emptyFn,add:function(d){var c=this,h=c.items,k=c.map,l=1,a,g,e,j,b,f,i;if(Ext.isArray(d)){a=f=[];l=d.length}for(g=0;g<l;g++){j=c.getKey(b=a?d[g]:d);e=k[j];if(e===undefined){h.push(b);k[j]=c.length++;if(a){a.push(b)}else {f=b}}else {i=h[e];if(a){a.push(i)}else {f=i}h[e]=b}}++c.generation;return f},clear:function(){var a=this,b=a.generation||a.length,c=b?a.items:[];if(b){a.items=[];a.length=0;a.map={};++a.generation}return c},clone:function(){var a=this,b=new a.self(),c=a.length;if(c){Ext.apply(b.map,a.map);b.items=a.items.slice();b.length=a.length}return b},contains:function(a){var d=!1,c=this.map,b;if(a!=null){b=this.getKey(a);if(b in c){d=this.items[c[b]]===a}}return d},containsKey:function(a){return a in this.map},destroy:function(){this.items=this.map=null;this.callParent()},each:function(f,c){var b=this.items,d=b.length,a,e;if(d){c=c||this;b=b.slice(0);for(a=0;a<d;a++){e=f.call(c,b[a],a,d);if(e===!1){break}}}return e},getAt:function(a){var b=null;if(a<this.length){b=this.items[a]}return b},get:function(a){return this.getByKey(a)},getByKey:function(a){var b=this.map,c=a in b?this.items[b[a]]:null;return c},indexOfKey:function(a){var b=this.map,c=a in b?b[a]:-1;return c},last:function(){return this.items[this.length-1]},updateKey:function(e,a){var c=this,b=c.map,d;if(!e||!a){return}if((d=c.getKey(e))!==a){if(c.getAt(b[a])===e&&!(d in b)){c.generation++;b[d]=b[a];delete b[a]}}},getCount:function(){return this.length},getKey:function(a){return a.id||a.getId()},getRange:function(d,e){var c=this.items,b=c.length,a;if(!b){a=[]}else {a=Ext.Number.clipIndices(b,[d,e]);a=c.slice(a[0],a[1])}return a},remove:function(c){var a=this,h=a.map,f=a.items,i=null,m=1,k,d,e,b,l,g,j;if(Ext.isArray(c)){m=c.length;d=i=[]}if(a.length){for(e=0;e<m;e++){b=h[l=a.getKey(d?c[e]:c)];if(b!==undefined){delete h[l];j=f[b];if(d){d.push(j)}else {i=j}g=f.pop();if(b<--a.length){f[b]=g;h[a.getKey(g)]=b}k=!0}}if(k){++a.generation}}return i},removeByKey:function(b){var a=this.getByKey(b);if(a){this.remove(a)}return a||null},replace:function(a){this.add(a);return a},sort:function(e){var a=this,c=a.items,b=c.length,d;if(b){Ext.Array.sort(c,e);a.map={};while(b-->0){d=c[b];a.map[a.getKey(d)]=b}++a.generation}}});Ext.define('Ext.selection.Model',{extend:Ext.mixin.Observable,alternateClassName:'Ext.AbstractSelectionModel',alias:'selection.abstract',mixins:[Ext.util.StoreHolder,Ext.mixin.Factoryable],factoryConfig:{defaultType:'dataviewmodel'},$configPrefixed:!1,$configStrict:!1,config:{store:null,selected:{}},isSelectionModel:!0,allowDeselect:undefined,toggleOnClick:!0,ordered:!1,selected:null,pruneRemoved:!0,suspendChange:0,ignoreRightMouseSelection:!1,constructor:function(b){var a=this;a.modes={SINGLE:!0,SIMPLE:!0,MULTI:!0};a.callParent([b]);a.setSelectionMode(a.mode);if(a.selectionMode!=='SINGLE'){a.allowDeselect=!0}},updateStore:function(b,a){this.bindStore(b,!a)},applySelected:function(a){if(!a.isBag&&!a.isCollection){a=new Ext.util[this.ordered?'Collection':'Bag'](Ext.apply({rootProperty:'data'},a))}return a},getStoreListeners:function(){var a=this;return {add:a.onStoreAdd,clear:a.onStoreClear,remove:a.onStoreRemove,update:a.onStoreUpdate,idchanged:a.onIdChanged,load:a.onStoreLoad,refresh:{fn:a.onStoreRefresh,priority:2000},pageadd:a.onPageAdd,pageremove:a.onPageRemove}},onBindStore:function(c,b,a){if(!a){this.updateSelectedInstances(this.selected)}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){if(this.suspendChange){--this.suspendChange}},selectAll:function(b){var a=this,c=a.store.getRange(),d=a.getSelection().length;a.suspendChanges();a.doSelect(c,!0,b);if(!a.destroyed){a.resumeChanges();if(!b){a.maybeFireSelectionChange(a.getSelection().length!==d)}}},deselectAll:function(f){var a=this,b=a.getSelection(),d={},i=a.store,h=b.length,c,g,e;for(c=0,g=b.length;c<g;c++){e=b[c];d[e.id]=i.indexOf(e)}b=Ext.Array.sort(b,function(c,e){var a=d[c.id],b=d[e.id];return a<b?-1:1});a.suspendChanges();a.doDeselect(b,f);if(!a.destroyed){a.resumeChanges();if(!f){a.maybeFireSelectionChange(a.getSelection().length!==h)}}},getSelectionStart:function(){return this.selectionStart},setSelectionStart:function(a){this.selectionStart=a},selectWithEvent:function(b,c){var a=this,d=a.isSelected(b),e=c.shiftKey;switch(a.selectionMode){case 'MULTI':a.selectWithEventMulti(b,c,d);break;case 'SIMPLE':a.selectWithEventSimple(b,c,d);break;case 'SINGLE':a.selectWithEventSingle(b,c,d);break;}if(a.destroyed){return}if(!e){if(a.isSelected(b)){a.selectionStart=b}else {a.selectionStart=null}}},vetoSelection:function(a){if(a.stopSelection){return !0}else {if(a.type!=='keydown'&&a.button!==0){if(this.ignoreRightMouseSelection||this.isSelected(a.record)){return !0}}else {return a.type==='mousedown'}}},onNavigate:function(d){if(!d.record||this.vetoSelection(d.keyEvent)){return}this.onBeforeNavigate(d);var a=this,b=d.keyEvent,f=b.ctrlKey||d.ctrlKey,g=d.recordIndex,c=d.record,j=d.previousRecord,l=a.isSelected(c),i=a.selectionStart&&a.isSelected(d.previousRecord)?a.selectionStart:a.selectionStart=d.previousRecord,m=d.previousRecordIndex,e=b.getCharCode(),n=e===b.SPACE,k=d.record!==d.previousRecord,h;h=e===b.UP||e===b.PAGE_UP||e===b.HOME||e===b.LEFT&&k?'up':e===b.DOWN||e===b.PAGE_DOWN||e===b.END||e===b.RIGHT&&k?'down':null;switch(a.selectionMode){case 'MULTI':a.setSelectionStart(d.selectionStart);if(e===b.A&&f){a.selected.beginUpdate();a.selectRange(0,a.store.getCount()-1);a.selected.endUpdate()}else {if(n){if(b.shiftKey){a.selectRange(i,c,f)}else {if(l){if(a.allowDeselect){a.doDeselect(c)}}else {a.doSelect(c,f)}}}else {if(b.shiftKey&&i){if(h==='up'&&m<=g){a.deselectRange(j,g+1)}else {if(h==='down'&&m>=g){a.deselectRange(j,g-1)}else {if(i!==c){a.selectRange(i,c,f)}}}a.lastSelected=c}else {if(e){if(!f){a.doSelect(c,!1)}}else {a.selectWithEvent(c,b)}}}};break;case 'SIMPLE':if(e===b.A&&f){a.selected.beginUpdate();a.selectRange(0,a.store.getCount()-1);a.selected.endUpdate()}else {if(l){a.doDeselect(c)}else {a.doSelect(c,!0)}};break;case 'SINGLE':if(!f){if(h){a.doSelect(c,!1)}else {if(n||!e){a.selectWithEvent(c,b)}}};break;}if(!b.shiftKey&&!a.destroyed&&a.isSelected(c)){a.selectionStart=c;a.selectionStartIdx=g}},selectRange:function(d,f,m){var a=this,i=a.store,l=a.selected.items,h,b,g,e,c,j,k;if(a.isLocked()){return}h=a.normalizeRowRange(d,f);d=h[0];f=h[1];e=[];for(b=d;b<=f;b++){if(!a.isSelected(i.getAt(b))){e.push(i.getAt(b))}}if(!m){c=[];a.suspendChanges();for(b=0,g=l.length;b<g;++b){k=l[b];j=i.indexOf(k);if(j<d||j>f){c.push(k)}}for(b=0,g=c.length;b<g;++b){a.doDeselect(c[b]);if(a.destroyed){break}}if(!a.destroyed){a.resumeChanges()}}if(!a.destroyed){if(e.length){a.doMultiSelect(e,!0)}else {if(c){a.maybeFireSelectionChange(c.length>0)}}}},deselectRange:function(d,e){var a=this,h=a.store,g,c,b,f;if(a.isLocked()){return}g=a.normalizeRowRange(d,e);d=g[0];e=g[1];b=[];for(c=d;c<=e;c++){f=h.getAt(c);if(a.isSelected(f)){b.push(f)}}if(b.length){a.doDeselect(b)}},normalizeRowRange:function(a,b){var c=this.store,d;if(!Ext.isNumber(a)){a=c.indexOf(a)}a=Math.max(0,a);if(!Ext.isNumber(b)){b=c.indexOf(b)}b=Math.min(b,c.getCount()-1);if(a>b){d=b;b=a;a=d}return [a,b]},select:function(a,c,b){if(Ext.isDefined(a)&&!(Ext.isArray(a)&&!a.length)){this.doSelect(a,c,b)}},deselect:function(b,a){this.doDeselect(b,a)},doSelect:function(a,e,d){var b=this,c;if(b.locked||a==null){return}if(typeof a==='number'){c=b.store.getAt(a);if(!c){return}a=[c]}if(b.selectionMode==='SINGLE'){if(a.isModel){a=[a]}if(a.length){b.doSingleSelect(a[0],d)}}else {b.doMultiSelect(a,e,d)}},doMultiSelect:function(b,k,c){var a=this,e=a.selected,h=!1,f,g,j,d,i;if(a.locked){return}b=!Ext.isArray(b)?[b]:b;j=b.length;if(!k&&e.getCount()>0){f=a.deselectDuringSelect(b,c);if(a.destroyed){return}if(f[0]){a.maybeFireSelectionChange(f[1]>0&&!c);return}else {h=f[1]>0}}i=function(){if(!e.getCount()){a.selectionStart=d}if(!c){e.add(d)}h=!0};for(g=0;g<j;g++){d=b[g];if(a.isSelected(d)){continue}a.onSelectChange(d,!0,c,i);if(a.destroyed){return}}a.lastSelected=d;if(c){e.add(b)}a.maybeFireSelectionChange(h&&!c)},deselectDuringSelect:function(h,g){var a=this,f=a.selected.getRange(),i=f.length,c=0,d=!1,e,b;a.suspendChanges();a.deselectingDuringSelect=!0;for(b=0;b<i;++b){e=f[b];if(!Ext.Array.contains(h,e)){if(a.doDeselect(e,g)){++c}else {d=!0}}if(a.destroyed){d=!0;c=0;break}}a.deselectingDuringSelect=!1;if(!a.destroyed){a.resumeChanges()}return [d,c]},doDeselect:function(b,d){var a=this,f=a.selected,g=0,j,c,h=0,e=0,i;if(a.locked||!a.store){return !1}if(typeof b==='number'){c=a.store.getAt(b);if(!c){return !1}b=[c]}else {if(!Ext.isArray(b)){b=[b]}}i=function(){++e;if(!d){f.remove(c)}if(c===a.selectionStart){a.selectionStart=null}};j=b.length;a.suspendChanges();for(;g<j;g++){c=b[g];if(a.isSelected(c)){if(a.lastSelected===c){a.lastSelected=f.last()}++h;a.onSelectChange(c,!1,d,i);if(a.destroyed){return !1}}}a.resumeChanges();if(d){f.remove(b)}a.maybeFireSelectionChange(e>0&&!d);return e===h},doSingleSelect:function(b,c){var a=this,e=!1,d=a.selected,f;if(a.locked){return}if(a.isSelected(b)){return}f=function(){var f;if(d.getCount()){a.suspendChanges();f=a.deselectDuringSelect([b],c);if(a.destroyed){return}a.resumeChanges();if(f[0]){return !1}}a.lastSelected=b;if(!d.getCount()){a.selectionStart=b}d.add(b);e=!0};a.onSelectChange(b,!0,c,f);if(e&&!a.destroyed){a.maybeFireSelectionChange(!c)}},maybeFireSelectionChange:function(b){var a=this;if(b&&!a.suspendChange){a.fireEvent('selectionchange',a,a.getSelection())}},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():'SINGLE';this.selectionMode=this.modes[a]?a:'SINGLE'},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isRangeSelected:function(b,c){var e=this,f=e.store,a,d;d=e.normalizeRowRange(b,c);b=d[0];c=d[1];for(a=b;a<=c;a++){if(!e.isSelected(f.getAt(a))){return !1}}return !0},isSelected:function(a){a=Ext.isNumber(a)?this.store.getAt(a):a;return this.selected?this.selected.contains(a):!1},hasSelection:function(){var a=this.getSelected();return !!(a&&a.getCount())},refresh:function(){var b=this,k=b.store,g=[],j=b.getSelection(),l=j.length,a=b.getSelected(),h,i,d,e,c,f;if(!k||!(a.isCollection||a.isBag||a.isRows)||!a.getCount()){return}d=k.getData();if(d.getSource){i=d.getSource();if(i){d=i}}b.refreshing=!0;a.beginUpdate();b.suspendChanges();for(f=0;f<l;f++){e=j[f];c=d.get(e.getId());if(c){if(c!==e){if(a.replace){a.replace(c)}else {a.add(c)}}if(!b.lastSelected){b.lastSelected=c}}else {if(b.pruneRemoved){g.push(e)}}}if(g.length){h=!0;a.remove(g)}b.resumeChanges();if(h){a.endUpdate()}else {a.updating--}b.refreshing=!1;b.maybeFireSelectionChange(h)},clearSelections:function(){var a=this.getSelected();if(a){a.clear()}this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){if((!this.store.isLoading()||this.store.clearing)&&this.hasSelection()){this.clearSelections();this.maybeFireSelectionChange(!0)}},onStoreRemove:function(i,c,j,h){var a=this,b=c,d,g,f,e;if(a.selectionStart&&Ext.Array.contains(c,a.selectionStart)){a.selectionStart=null}if(h||a.locked||!a.pruneRemoved){return}e=i.isMoving(null,!0);if(e){b=null;for(d=0,g=c.length;d<g;++d){f=c[d];if(!e[f.id]){(b||(b=[])).push(f)}}}if(b){a.deselect(b)}},onPageRemove:function(c,b,a){this.onStoreRemove(this.store,a)},onPageAdd:function(f,e,c){var d=c.length,a,b;for(a=0;a<d;a++){b=c[a];if(this.selected.get(b.id)){this.selected.replace(b)}}},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){var a=this;a.clearSelections();a.bindStore(null);a.selected=Ext.destroy(a.selected);a.callParent()},onStoreUpdate:Ext.emptyFn,onIdChanged:function(d,b,a,c){this.selected.updateKey(b,a)},onStoreRefresh:function(){this.updateSelectedInstances(this.selected)},updateSelectedInstances:function(b){var a=this,c=a.getStore(),d=a.lastSelected,h=0,l=a.pruneRemovedOnRefresh(),i,k,g,e,f,j;if(c&&c.isBufferedStore){return}i=b.getRange();k=i.length;if(d){a.lastSelected=c.getById(d.id);j=a.lastSelected!==d}a.refreshing=!0;if(c){for(g=0;g<k;++g){e=i[g];f=c.getById(e.id);if(f){if(f!==e){b.add(f)}}else {if(l){b.remove(e);++h}}}}else {h=b.getCount();b.removeAll()}a.refreshing=!1;a.maybeFireSelectionChange(h>0);if(j){a.fireEvent('lastselectedchanged',a,a.getSelection(),d)}},pruneRemovedOnRefresh:function(){return this.pruneRemoved},onStoreLoad:Ext.emptyFn,onSelectChange:function(d,e,b,f){var a=this,c=e?'select':'deselect';if((b||a.fireEvent('before'+c,a,d))!==!1&&f()!==!1){if(!b&&!a.destroyed){a.fireEvent(c,a,d)}}},onEditorKey:Ext.emptyFn,beforeViewRender:function(a){Ext.Array.include(this.views||(this.views=[]),a)},onHeaderClick:Ext.emptyFn,resolveListenerScope:function(a){var c=this.view,b;if(c){b=c.resolveSatelliteListenerScope(this,a)}return b||this.callParent([a])},bindComponent:Ext.emptyFn,privates:{onBeforeNavigate:Ext.privateFn,getLastSelected:function(){return this.lastSelected},selectWithEventMulti:function(b,l,e){var a=this,g=l.shiftKey,c=l.ctrlKey,j=g?a.getSelectionStart():null,i=a.getSelection(),k=i.length,f,d,h;if(g&&j){a.selectRange(j,b,c)}else {if(c&&e){if(a.allowDeselect){a.doDeselect(b,!1)}}else {if(c){a.doSelect(b,!0,!1)}else {if(e&&!g&&!c&&k>1){if(a.allowDeselect){f=[];for(d=0;d<k;++d){h=i[d];if(h!==b){f.push(h)}}a.doDeselect(f)}}else {if(!e){a.doSelect(b,!1)}}}}}},selectWithEventSimple:function(a,c,b){if(b){this.doDeselect(a)}else {this.doSelect(a,!0)}},selectWithEventSingle:function(c,e,d){var a=this,b=a.allowDeselect;if(b&&!e.ctrlKey){b=a.toggleOnClick}if(b&&d){a.doDeselect(c)}else {a.doSelect(c,!1)}}}});Ext.define('Ext.selection.DataViewModel',{extend:Ext.selection.Model,alias:'selection.dataviewmodel',deselectOnContainerClick:!0,bindComponent:function(b){var a=this,c;if(a.view!==b){if(a.view){a.navigationModel=null;Ext.destroy(a.viewListeners,a.navigationListeners)}a.view=b;if(b){c=a.getViewListeners();c.scope=a;c.destroyable=!0;a.navigationModel=b.getNavigationModel();a.viewListeners=b.on(c);a.navigationListeners=a.navigationModel.on({navigate:a.onNavigate,scope:a,destroyable:!0})}}},getViewListeners:function(){var b=this,a={};a[b.view.triggerCtEvent]=b.onContainerClick;return a},onUpdate:function(a){var b=this.view;if(b&&this.isSelected(a)){b.onItemSelect(a)}},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},onSelectChange:function(b,f,d,h){var a=this,c=a.view,g=f?'select':'deselect',e=a.store.indexOf(b);if((d||a.fireEvent('before'+g,a,b,e))!==!1&&h()!==!1){if(c&&!c.destroyed){if(f){c.onItemSelect(b)}else {c.onItemDeselect(b)}}if(!d&&!a.destroyed){a.fireEvent(g,a,b,e)}}},destroy:function(){this.bindComponent();Ext.destroy(this.keyNav);this.callParent()}});Ext.define('Ext.view.NavigationModel',{alias:'view.navigation.default',mixins:[Ext.util.Observable,Ext.mixin.Factoryable,Ext.util.StoreHolder],config:{store:null},focusCls:Ext.baseCSSPrefix+'view-item-focused',constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(a){if(this.view!==a){this.view=a;this.bindView(a)}},bindView:function(c){var a=this,d=c.dataSource,b;a.initKeyNav(c);if(!d.isEmptyStore){a.setStore(d)}b=a.getViewListeners();b.destroyable=!0;a.viewListeners=a.viewListeners||[];a.viewListeners.push(c.on(b))},updateStore:function(a){this.mixins.storeholder.bindStore.apply(this,[a])},getViewListeners:function(){var a=this;return {containermousedown:a.onContainerMouseDown,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemMouseDown,scope:a}},initKeyNav:function(b){var a=this;a.keyNav=new Ext.util.KeyNav({target:b,ignoreInputFields:!0,eventName:'itemkeydown',defaultEventAction:'stopEvent',processEvent:a.processViewEvent,up:a.onKeyUp,down:a.onKeyDown,right:a.onKeyRight,left:a.onKeyLeft,pageDown:a.onKeyPageDown,pageUp:a.onKeyPageUp,home:a.onKeyHome,end:a.onKeyEnd,space:a.onKeySpace,enter:a.onKeyEnter,A:{ctrl:!0,handler:a.onSelectAllKeyPress},scope:a})},processViewEvent:function(e,b,d,c,a){return a},addKeyBindings:function(a){this.keyNav.addBindings(a)},enable:function(){this.keyNav.enable();this.disabled=!1},disable:function(){this.keyNav.disable();this.disabled=!0},onContainerMouseDown:function(b,a){if(Ext.scrollbar.width()){if(!b.el.getClientRegion().contains(a.getPoint())){a.preventDefault();b.lastFocused='scrollbar'}}},onItemMouseDown:function(e,c,d,b,a){if(a.pointerType!=='touch'){this.setPosition(b)}},onItemClick:function(e,b,d,c,a){if(this.record===b){this.fireNavigateEvent(a)}else {this.setPosition(c,a)}},setPosition:function(d,h,j,g,k){var a=this,f=a.view,i=f.getSelectionModel(),e=f.dataSource,b,c;if(d==null||!f.all.getCount()){a.record=a.recordIndex=null}else {if(typeof d==='number'){c=Math.max(Math.min(d,e.getCount()-1),0);b=e.getAt(d)}else {if(d.isEntity){b=e.getById(d.id);c=e.indexOf(b);if(c===-1){b=e.getAt(0);c=0}}else {if(d.tagName){b=f.getRecord(d);c=e.indexOf(b)}else {b=c=null}}}}if(b===a.record){a.recordIndex=c;return a.focusPosition(c)}if(a.item){a.item.removeCls(a.focusCls)}a.previousRecordIndex=a.recordIndex;a.previousRecord=a.record;a.previousItem=a.item;a.recordIndex=c;a.record=b;g=g||a.record===a.lastFocused;if(b){a.focusPosition(a.recordIndex)}else {if(!k){a.item=null}}if(!j){i.fireEvent('focuschange',i,a.previousRecord,a.record)}if(!g&&h){a.fireNavigateEvent(h)}},focusPosition:function(b){var a=this;if(b!=null&&b!==-1){if(b.isEntity){b=a.view.dataSource.indexOf(b)}a.item=a.view.all.item(b);if(a.item){a.lastFocused=a.record;a.lastFocusedIndex=a.recordIndex;a.focusItem(a.item)}else {a.record=null}}else {a.item=null}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){if(this.view.dataSource.indexOf(this.lastFocused)===-1){return null}return this.lastFocused},onKeyUp:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyDown:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyRight:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyLeft:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(a){this.setPosition(0,a)},onKeyEnd:function(a){this.setPosition(this.view.all.getCount()-1,a)},onKeySpace:function(a){this.fireNavigateEvent(a)},onKeyEnter:function(a){a.stopEvent();a.view.fireEvent('itemclick',a.view,a.record,a.item,a.recordIndex,a)},onSelectAllKeyPress:function(a){this.fireNavigateEvent(a)},fireNavigateEvent:function(b){var a=this;a.fireEvent('navigate',{navigationModel:a,keyEvent:b,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,recordIndex:a.recordIndex,record:a.record,item:a.item})},destroy:function(){this.setStore(null);Ext.destroy(this.viewListeners,this.keyNav);this.callParent()}});Ext.define('Ext.view.AbstractView',{extend:Ext.Component,mixins:[Ext.util.StoreHolder],isDataView:!0,inheritableStatics:{getRecord:function(a){return this.getBoundView(a).getRecord(a)},getBoundView:function(a){return Ext.getCmp(a.getAttribute('data-boundView'))}},defaultBindProperty:'store',renderBuffer:new Ext.dom.Fly(document.createElement('div')),statics:{updateDelay:Ext.platformTags.desktop?200:1000,queueRecordChange:function(n,o,d,m,f){var a=this,g=a.changeQueue||(a.changeQueue={}),i=d.internalId,h,b,l,e,c,j,k;h=g[i]||(g[i]={operation:m,record:d,data:{},views:[]});b=h.data;Ext.Array.include(h.views,n);if(f&&(l=f.length)){for(e=0;e<l;e++){c=f[e];j=d.data[c];if(b.hasOwnProperty(c)){if(d.isEqual(b[c],j)){delete b[c];k=!0}}else {b[c]=j}}if(k&&!Ext.Object.getKeys(b).length){delete g[i]}}else {Ext.apply(b,d.data)}if(!a.flushQueueTask){a.flushQueueTask=new Ext.util.DelayedTask(Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(a.flushChangeQueue,a):a.flushChangeQueue.bind(a),a,null,!1)}if(!a.flushTimer){a.flushTimer=a.flushQueueTask.delay(Ext.view.AbstractView.updateDelay)}},flushChangeQueue:function(){var b=this,f,h,e,a,g,d,c;if(Ext.isScrolling){return b.flushTimer=b.flushQueueTask.delay(1)}b.flushTimer=null;e=b.changeQueue;b.changeQueue={};for(g in e){a=e[g];f=a.views;h=f.length;for(d=0;d<h;d++){c=f[d];if(!c.destroyed){c.handleUpdate(c.dataSource,a.record,a.operation,Ext.Object.getKeys(a.data))}}}}},config:{store:'ext-empty-store',navigationModel:{type:'default'},selectionModel:{type:'dataviewmodel'}},publishes:['selection'],twoWayBindable:['selection'],selection:null,throttledUpdate:!1,deferInitialRefresh:!1,itemCls:Ext.baseCSSPrefix+'dataview-item',loadingText:'Loading...',loadMask:!0,loadingUseMsg:!0,selectedItemCls:Ext.baseCSSPrefix+'item-selected',emptyText:'',deferEmptyText:!0,trackOver:!1,blockRefresh:!1,preserveScrollOnRefresh:!1,preserveScrollOnReload:!1,autoDestroyBoundStore:!0,ariaRole:'listbox',itemAriaRole:'option',last:!1,focusable:!0,tabIndex:0,triggerEvent:'itemclick',triggerCtEvent:'containerclick',refreshNeeded:!0,updateSuspendCounter:0,addCmpEvents:Ext.emptyFn,constructor:function(a){if(a&&a.selModel){a.selectionModel=a.selModel}this.callParent([a])},initComponent:function(){var a=this,f=Ext.isDefined,b=a.itemTpl,c={},e=a.selection,d;if(e){a.selection=null;a.setSelection(e)}if(b){if(Ext.isArray(b)){if(typeof b[b.length-1]!=='string'){b=b.slice(0);c=b.pop()}b=b.join('')}else {if(Ext.isObject(b)){c=Ext.apply(c,b.initialConfig);b=b.html}}if(!a.itemSelector){a.itemSelector='.'+a.itemCls}if(c.fn){c.baseFn=c.fn;delete c.fn;b='{%this.baseFn(out, values, parent, xindex, xcount, xkey)%}'}b=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',a.itemCls,b,a.itemAriaRole);a.tpl=new Ext.XTemplate(b,c)}a.callParent();a.tpl=a.lookupTpl('tpl');if(a.overItemCls){a.trackOver=!0}a.addCmpEvents();d=a.store=Ext.data.StoreManager.lookup(a.store||'ext-empty-store');if(!a.dataSource){a.dataSource=d}a.bindStore(d,!0);a.getNavigationModel().bindComponent(this);if(!a.all){a.all=new Ext.CompositeElementLite()}a.scrollState={top:0,left:0};a.savedTabIndexAttribute='data-savedtabindex-'+a.id},getElConfig:function(){var a=this.mixins.renderable.getElConfig.call(this);if(this.focusable){a.tabIndex=0}return a},onRender:function(c,b){var a=this.loadMask;this.callParent([c,b]);if(a){this.createMask(a)}},beforeLayout:function(){var a=this;a.callParent();if(a.refreshNeeded&&!a.pendingRefresh){if(a.refreshCounter){a.refreshView()}else {a.doFirstRefresh(a.dataSource)}}},onMaskBeforeShow:function(){var a=this,b=a.loadingHeight;if(b&&b>a.getHeight()){a.hasLoadingHeight=!0;a.oldMinHeight=a.minHeight;a.minHeight=b;a.updateLayout()}},onMaskHide:function(){var a=this;if(!a.destroying&&a.hasLoadingHeight){a.minHeight=a.oldMinHeight;a.updateLayout();delete a.hasLoadingHeight}},beforeRender:function(){this.callParent();this.getSelectionModel().beforeViewRender(this)},afterRender:function(){this.callParent();if(this.focusable){this.focusEl=this.el}},getRefItems:function(){var a=this.loadMask,b=[];if(a&&a.isComponent){b.push(a)}return b},getSelection:function(){return this.getSelectionModel().getSelection()},setSelection:function(a){var b=this.selection;if(a!==b){this.selection=a;this.updateSelection(a,b)}},updateSelection:function(b){var a=this,c;if(!a.ignoreNextSelection){a.ignoreNextSelection=!0;c=a.getSelectionModel();if(b){c.select(b)}else {c.deselectAll()}a.ignoreNextSelection=!1}a.publishState('selection',b)},updateBindSelection:function(d,c){var a=this,b=null;if(!a.ignoreNextSelection){a.ignoreNextSelection=!0;if(c.length){b=d.getLastSelected();a.hasHadSelection=!0}if(a.hasHadSelection){a.setSelection(b)}a.ignoreNextSelection=!1}},applySelectionModel:function(b,d){var a=this,g=a.grid,c,f,e;if(d){if(!d.destroyed){d.un({scope:a,selectionchange:a.updateBindSelection,lastselectedchanged:a.updateBindSelection})}Ext.destroy(a.selModelRelayer);b=Ext.Factory.selection(b)}else {if(b&&b.isSelectionModel){b.locked=a.disableSelection}else {if(a.simpleSelect){c='SIMPLE'}else {if(a.multiSelect){c='MULTI'}else {c='SINGLE'}}if(typeof b==='string'){b={type:b}}b=Ext.Factory.selection(Ext.apply({allowDeselect:a.allowDeselect||a.multiSelect,mode:c,locked:a.disableSelection},b))}}if(b.mode!=='SINGLE'){e=(g||a).ariaEl.dom;if(e){e.setAttribute('aria-multiselectable',!0)}else {if(!g){f=a.ariaRenderAttributes||(a.ariaRenderAttributes={});f['aria-multiselectable']=!0}}}a.selModelRelayer=a.relayEvents(b,['selectionchange','beforeselect','beforedeselect','select','deselect','focuschange']);b.on({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection});return b},updateSelectionModel:function(a){this.selModel=a},applyNavigationModel:function(a){return Ext.Factory.viewNavigation(a)},onFocusEnter:function(c){var a=this,d=a.getNavigationModel(),b=a.lastFocused;a.lastFocused=null;if(b==='scrollbar'){c.relatedTarget.focus();return}a.toggleChildrenTabbability(!1);if(!a.itemFocused&&a.all.getCount()){if(c.event.getTarget()===a.tabGuardEl){b=a.all.getCount()-1}else {b=d.getLastFocused()}d.setPosition(b||0,c.event,null,!b);a.itemFocused=d.getPosition()!=null}if(a.itemFocused){a.el.dom.setAttribute('tabIndex',-1);if(a.tabGuardEl){a.tabGuardEl.setAttribute('tabIndex',-1)}}a.callParent([c])},onFocusLeave:function(b){var a=this;if(a.itemFocused&&!a.refreshing){a.getNavigationModel().setPosition(null,b.event,null,!0);a.itemFocused=!1;a.el.dom.setAttribute('tabIndex',0);if(a.tabGuardEl){a.tabGuardEl.setAttribute('tabIndex',0)}}a.callParent([b])},cancelFocusTask:function(){var a=this.getFocusTask();if(a){a.cancel()}},onRemoved:function(a){this.callParent([a]);if(!a){this.onFocusLeave({})}},refresh:function(){var a=this,c=a.all,j=c.getCount(),f=a.refreshCounter,g,e,k=a.getSelectionModel(),i,d=f&&c.getCount()&&a.preserveScrollOnRefresh&&a.getScrollable(),h=a.bufferedRenderer,b;if(!a.rendered||a.destroyed){return}if(!a.hasListeners.beforerefresh||a.fireEvent('beforerefresh',a)!==!1){a.refreshing=!0;i=a.saveFocusState();g=a.getTargetEl();e=a.getViewRange();if(d){b=d.getPosition();if(!(b.x||b.y)){b=null}}if(f||a.emptyEl){a.clearViewEl()}if(f){a.refreshCounter++}else {a.refreshCounter=1}a.tpl.append(g,a.collectData(e,c.startIndex||0));if(e.length<1){a.addEmptyText();c.clear()}else {a.collectNodes(g.dom);a.updateIndexes(0)}i();if(a.refreshSelmodelOnRefresh!==!1){k.refresh()}a.refreshNeeded=!1;a.refreshSize(c.getCount()!==j);a.fireItemMutationEvent('refresh',a,e);if(d){d.scrollTo(b)}if(!a.viewReady){a.viewReady=!0;a.fireEvent('viewready',a)}a.refreshing=!1;if(h){h.refreshSize()}a.cleanupData()}if(!a.tabGuardEl){a.tabGuardEl=a.el.createChild({cls:Ext.baseCSSPrefix+'tab-guard '+Ext.baseCSSPrefix+'tab-guard-after',tabIndex:'0'},null,!0)}},addEmptyText:function(){var a=this,b=a.getStore();if(a.emptyText&&!b.isLoading()&&(!a.deferEmptyText||a.refreshCounter>1||b.isLoaded())){if(!a.emptyEl){a.emptyEl=Ext.core.DomHelper.insertHtml('beforeEnd',a.getTargetEl().dom,a.emptyText)}else {Ext.fly(a.emptyEl).setHtml(a.emptyText)}}},getEmptyText:function(){return this.emptyText},setEmptyText:function(b){var a=this;if(a.emptyText!==b){a.emptyText=b;a.refresh()}return a},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(c){var b=this,a=b.getSizeModel();if(a.height.shrinkWrap||a.width.shrinkWrap||c){b.updateLayout()}},afterFirstLayout:function(d,c){var a=this,b=a.getScrollable();if(b){a.viewScrollListeners=b.on({scroll:a.onViewScroll,scrollend:a.onViewScrollEnd,scope:a,onFrame:!!Ext.global.requestAnimationFrame,destroyable:!0})}a.callParent([d,c])},clearViewEl:function(){var a=this,b=a.getTargetEl(),c=a.all,h=a.getStore(),f=a.getNodeContainer()===b,d,g,e;g=c.slice();e=[];for(d=c.startIndex;d<=c.endIndex;d++){e.push(h.getByInternalId(c.item(d,!0).getAttribute('data-recordId')))}a.fireItemMutationEvent('itemremove',e,c.startIndex||0,g,a);a.clearEmptyEl();a.all.clear(!f);b=f?b.dom:a.getNodeContainer();if(b){b.innerHTML=''}},clearEmptyEl:function(){var a=this.emptyEl;if(a){Ext.removeNode(a)}this.emptyEl=null},onViewScroll:function(c,a,b){if(!this.destroyed){this.fireEvent('scroll',this,a,b)}},onViewScrollEnd:function(c,a,b){if(!this.destroyed){this.fireEvent('scrollend',this,a,b)}},saveScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){b.left=a.getScrollX();b.top=a.getScrollY()}},restoreScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){a.setScrollX(b.left);a.setScrollY(b.top)}},prepareData:function(c,f,e){var a,b,d;if(e){a=e.getAssociatedData();for(b in a){if(a.hasOwnProperty(b)){if(!d){c=Ext.Object.chain(c);d=!0}c[b]=a[b]}}}return c},collectData:function(c,e){var d=[],a=0,f=c.length,b;for(;a<f;a++){b=c[a];d[a]=this.prepareData(b.data,e+a,b)}return d},cleanupData:Ext.emptyFn,bufferRender:function(g,h){var b=this,e=b.renderBuffer,d=document.createDocumentFragment(),a,f,c;b.tpl.overwrite(e,b.collectData(g,h));a=e.query(b.getItemSelector());for(c=0,f=a.length;c<f;c++){d.appendChild(a[c])}return {fragment:d,children:a}},nodeContainerSelector:null,setItemsDraggable:function(d){var b=this,c='#'+b.id+' '+b.getItemSelector(),a=b.viewStyleSheet;if(d){if(!a){a=Ext.view.AbstractView.prototype.viewStyleSheet=Ext.util.CSS.createStyleSheet('','AbstractView')}Ext.util.CSS.createRule(a,c,'touch-action: pinch-zoom double-tap-zoom;'+'-ms-touch-action: pinch-zoom double-tap-zoom;-webkit-user-drag: none;')}else {if(a){Ext.util.CSS.deleteRule(c)}}},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(f,c,e,d,b){var a=this,g=b&&b.filtered;if(!g&&a.getNode(c)){if(a.throttledUpdate){a.statics().queueRecordChange(a,f,c,e,d)}else {a.handleUpdate(f,c,e,d,b)}}},handleUpdate:function(f,b){var a=this,e=a.getSelectionModel(),c,d;if(a.viewReady&&!a.refreshNeeded){c=a.dataSource.indexOf(b);if(c>-1){if(a.getNode(b)){d=a.bufferRender([b],c).children[0];a.all.replaceElement(c,d,!0);a.updateIndexes(c,c);e.onUpdate(b);a.refreshSizePending=!0;if(e.isSelected(b)){a.onItemSelect(b)}if(a.hasListeners.itemupdate){a.fireEvent('itemupdate',b,c,d,a)}return d}}}},onReplace:function(q,b,f,e){var a=this,d=a.all,c=a.getScrollable(),p=c&&c.getPosition().y,o=a.getSelectionModel(),k=b,i,n,h,g,m,l,j;if(a.rendered){i=a.bufferRender(e,b,!0);h=i.fragment;g=i.children;n=d.item(b);if(n){d.item(b).insertSibling(h,'before',!0)}else {a.appendNodes(h)}d.insert(b,g);if(f.length){j=a.saveFocusState()}b+=e.length;l=b+f.length-1;m=d.removeRange(b,l,!0);if(c){c.scrollTo(null,p)}if(a.refreshSelmodelOnRefresh!==!1){o.refresh()}a.updateIndexes(b);a.fireItemMutationEvent('itemremove',f,k,m,a);a.fireItemMutationEvent('itemadd',e,k,g,a);j();a.refreshSize()}},onAdd:function(f,d,b){var a=this,c,e=a.getSelectionModel();if(a.rendered&&!a.refreshNeeded){if(a.all.getCount()===0){a.refresh();c=a.all.slice()}else {c=a.doAdd(d,b);if(a.refreshSelmodelOnRefresh!==!1){e.refresh()}a.updateIndexes(b);a.refreshSizePending=!0}a.fireItemMutationEvent('itemadd',d,b,c,a)}},appendNodes:function(a){var b=this.all,c=b.getCount();if(this.nodeContainerSelector){this.getNodeContainer().appendChild(a)}else {b.item(c-1).insertSibling(a,'after')}},doAdd:function(j,b){var d=this,g=d.bufferRender(j,b,!0),f=g.fragment,c=g.children,a=d.all,h=a.getCount(),e=a.startIndex||0,i=a.endIndex||h-1;if(h===0||b>i){d.appendNodes(f)}else {if(b<=e){a.item(e).insertSibling(f,'before',!0)}else {a.item(b).insertSibling(c,'before',!0)}}a.insert(b,c);return c},onRemove:function(k,e,f){var a=this,h=a.all,c,b,j,d,g,i;if(a.rendered&&!a.refreshNeeded&&h.getCount()){if(a.dataSource.getCount()===0){a.refresh()}else {i=a.saveFocusState();d=[];for(b=e.length-1;b>=0;--b){j=e[b];c=f+b;if(d){g=h.item(c);d[b]=g?g.dom:undefined}if(h.item(c)){a.doRemove(j,c)}}a.fireItemMutationEvent('itemremove',e,f,d,a);i();a.updateIndexes(f)}a.refreshSizePending=!0}},doRemove:function(b,a){this.all.removeElement(a,!0)},eventLifecycleMap:{refresh:'onViewRefresh',itemremove:'onItemRemove',itemadd:'onItemAdd'},fireItemMutationEvent:function(d){var a=this,b=a.ownerGrid,c;Ext.suspendLayouts();if(b){if(d!=='refresh'){c=a.lookupViewModel()}b[a.eventLifecycleMap[d]].apply(b,Ext.Array.slice(arguments,1))}a.fireEvent.apply(a,arguments);if(c){c.notify()}Ext.resumeLayouts(!0)},saveFocusState:function(){var a=this,f=a.dataSource||a.store,d=a.getNavigationModel(),b=d.recordIndex,c=d.record,e=a.el.contains(Ext.Element.getActiveElement());if(c){if(e){a.el.dom.focus()}return function(){if(f.getCount()){b=Math.min(b,a.all.getCount()-1);d.setPosition(f.contains(c)?c:b,null,null,!0,!e)}}}return Ext.emptyFn},refreshNode:function(a){if(Ext.isNumber(a)){a=this.store.getAt(a)}this.onUpdate(this.dataSource,a)},updateIndexes:function(f,c){var b=this,h=b.all.elements,i=b.getViewRange(),g=b.getSelectionModel(),j=b.id,e,d,a;f=f||0;c=c||(c===0?0:h.length-1);for(a=f;a<=c;a++){e=h[a];d=i[a];e.setAttribute('data-recordIndex',a);e.setAttribute('data-recordId',d.internalId);e.setAttribute('data-boundView',j);if(g.getLastSelected()){b[g.isSelected(d)?'onItemSelect':'onItemDeselect'](d)}}},bindStore:function(b,e){var a=this,c=a.getSelectionModel(),d=a.getNavigationModel();if(c&&!c.destroyed){c.bindStore(b,e);c.bindComponent(b?a:null)}a.mixins.storeholder.bindStore.apply(a,arguments);if(d&&!d.destroyed){d.setStore(b)}if(b&&a.componentLayoutCounter){if(a.blockRefresh){a.refreshNeeded=!0}else {a.doFirstRefresh(b,!e)}}},doFirstRefresh:function(b,c){var a=this;if(a.deferInitialRefresh&&!c){Ext.defer(a.doFirstRefresh,1,a,[b,!0])}else {if(b&&!a.deferRefreshForLoad(b)){a.refresh()}}},onUnbindStore:function(a){this.setMaskBind(null);if(this.dataSource===a){this.dataSource=null}},onBindStore:function(c,b){var a=this;if(a.store.isBufferedStore){a.store.preserveScrollOnReload=a.preserveScrollOnReload}if(b&&b.isBufferedStore){delete b.preserveScrollOnReload}a.setMaskBind(c);if(!a.dataSource){a.dataSource=c}},setMaskBind:function(b){var a=this.loadMask;if(this.rendered&&a&&b&&!a.bindStore){a=this.createMask()}if(a&&a.bindStore){a.bindStore(b)}},getStoreListeners:function(){var a=this;return {refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.onDataRefresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onBeginUpdate:function(){++this.updateSuspendCounter;Ext.suspendLayouts()},onEndUpdate:function(){var a=this;if(a.updateSuspendCounter){--a.updateSuspendCounter}Ext.resumeLayouts(!0);if(a.refreshSizePending){a.refreshSize(!0);a.refreshSizePending=!1}},onDataRefresh:function(b){var a=this,c=a.preserveScrollOnRefresh;if(b.loadCount>=(a.lastRefreshLoadCount||0)){a.preserveScrollOnRefresh=a.preserveScrollOnReload}a.refreshView();a.preserveScrollOnRefresh=c;a.lastRefreshLoadCount=b.loadCount},refreshView:function(c){var a=this,d=a.blockRefresh||!a.rendered||a.up('[collapsed],[isCollapsingOrExpanding=1],[hidden]'),b=a.bufferedRenderer;if(d){a.refreshNeeded=!0}else {if(b){b.refreshView(c)}else {a.refresh()}}},findItemByChild:function(a){return Ext.fly(a).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var c=[],b=this.getSelectionModel().getSelection(),d=b.length,a=0;for(;a<d;a++){c.push(this.getNode(b[a]))}return c},getRecords:function(c){var d=this,b=[],a;for(a=0;a<c.length;a++){b.push(d.getRecord(c[a]))}return b},getRecord:function(a){var b=Ext.getDom(a),c=b.getAttribute('data-recordId');return this.dataSource.getByInternalId(c)},isSelected:function(a){var b=this.getRecord(a);return this.getSelectionModel().isSelected(b)},select:function(c,b,a){this.getSelectionModel().select(c,b,a)},deselect:function(b,a){this.getSelectionModel().deselect(b,a)},getNode:function(a){var c=this,b;if(c.rendered&&(a||a===0)){if(Ext.isString(a)){b=document.getElementById(a)}else {if(a.isModel){b=c.getNodeByRecord(a)}else {if(Ext.isNumber(a)){b=c.all.elements[a]}else {if(a.target&&a.target.nodeType){a=a.target}b=Ext.fly(a).findParent(c.itemSelector,c.getTargetEl())}}}}return b||null},getNodeByRecord:function(a){var b=this.store.indexOf(a);return this.all.elements[b]||null},getNodes:function(b,a){var c=this.all;if(a!==undefined){a++}return c.slice(b,a)},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}if(a.getAttribute('data-recordIndex')){return Number(a.getAttribute('data-recordIndex'))}return this.all.indexOf(a)},doDestroy:function(){var a=this,c=a.updateSuspendCounter,b=a.tabGuardEl;if(a.viewScrollListeners){a.viewScrollListeners.destroy()}if(a.all&&!a.all.destroyed){a.all.clear()}if(b){if(b.parentNode){b.parentNode.removeChild(b)}}a.emptyEl=null;a.setItemsDraggable(!1);a.bindStore(null);if(a.selModelRelayer){a.selModelRelayer.destroy()}Ext.destroy(a.navigationModel,a.selectionModel,a.loadMask);while(c--){Ext.resumeLayouts(!0)}a.callParent()},onItemSelect:function(b){var a=this.getNode(b);if(a){Ext.fly(a).addCls(this.selectedItemCls);a.setAttribute('aria-selected','true')}return a},onItemDeselect:function(b){var a=this.getNode(b);if(a){Ext.fly(a).removeCls(this.selectedItemCls);a.setAttribute('aria-selected','false')}return a},getItemSelector:function(){return this.itemSelector},addItemCls:function(b,c){var a=this.getNode(b);if(a){Ext.fly(a).addCls(c)}},removeItemCls:function(b,c){var a=this.getNode(b);if(a){Ext.fly(a).removeCls(c)}},setStore:function(b){var a=this;if(a.store!==b){if(a.isConfiguring){a.store=b}else {a.bindStore(b,!1)}}},privates:{deferRefreshForLoad:function(a){return a.isLoading()},toggleChildrenTabbability:function(b){var a=this.getTargetEl();if(b){a.restoreTabbableState({skipSelf:!0})}else {a.saveTabbableState({skipSelf:!0,includeSaved:!1})}},collectNodes:function(c){var a=this.all,b={role:this.itemAriaRole};a.fill(Ext.fly(c).query(this.getItemSelector()),a.startIndex||0);if(this.focusable){b.tabindex='-1'}a.set(b)},createMask:function(d){var a=this,c=a.getStore(),b;if(c&&!c.isEmptyStore&&!c.loadsSynchronously()){b={target:a,msg:a.loadingText,useMsg:a.loadingUseMsg,store:c};if(a.loadingCls){b.msgCls=a.loadingCls}if(Ext.isObject(d)){b=Ext.apply(b,d)}a.loadMask=new Ext.LoadMask(b);a.loadMask.on({scope:a,beforeshow:a.onMaskBeforeShow,hide:a.onMaskHide})}return a.loadMask},getNodeContainer:function(){var b=this.getTargetEl(),a=this.nodeContainerSelector;return a?b.down(a,!0):b},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)}}},function(){Ext.deprecate('extjs','4.0',function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn('DataView: getSelectionCount will be removed, please interact '+'with the Ext.selection.DataViewModel')}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn('DataView: getSelectedRecords will be removed, please interact '+'with the Ext.selection.DataViewModel')}return this.selModel.getSelection()},select:function(d,c,b){if(Ext.global.console){Ext.global.console.warn('DataView: select will be removed, please access select through '+"a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var a=this.getSelectionModel();return a.select.apply(a,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn('DataView: clearSelections will be removed, please access '+"deselectAll through DataView's SelectionModel, ie: "+'view.getSelectionModel().deselectAll()')}var a=this.getSelectionModel();return a.deselectAll()}})})});Ext.define('Ext.view.View',{extend:Ext.view.AbstractView,alternateClassName:'Ext.DataView',alias:'widget.dataview',inputTagRe:/^textarea$|^input$/i,keyEventRe:/^key/,manageLayoutScroll:!1,inheritableStatics:{EventMap:{longpress:'LongPress',mousedown:'MouseDown',mouseup:'MouseUp',click:'Click',dblclick:'DblClick',contextmenu:'ContextMenu',mouseover:'MouseOver',mouseout:'MouseOut',mouseenter:'MouseEnter',mouseleave:'MouseLeave',keydown:'KeyDown',keyup:'KeyUp',keypress:'KeyPress',focus:'Focus'},TouchEventMap:{touchstart:'mousedown',touchend:'mouseup',tap:'click',doubletap:'dblclick'}},afterRender:function(){var a=this;a.callParent();a.mon(a.el,{scope:a,click:a.handleEvent,longpress:a.handleEvent,mousedown:a.handleEvent,mouseup:a.handleEvent,dblclick:a.handleEvent,contextmenu:a.handleEvent,keydown:a.handleEvent,keyup:a.handleEvent,keypress:a.handleEvent,mouseover:a.handleMouseOver,mouseout:a.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(b){var a=this,d=a.getTargetSelector(),c=b.getTarget(d);if(!a.destroyed){if(c){if(a.mouseOverItem!==c&&a.el.contains(c)){a.mouseOverItem=b.item=c;b.newType='mouseenter';a.handleEvent(b)}}else {a.handleEvent(b)}}},handleMouseOut:function(a){var c=this,f=c.getTargetSelector(),b=a.getTarget(f),e=a.getRelatedTarget(f),d;if(b===e&&!(b===null&&e===null)){return}if(!c.destroyed){if(b&&(d=c.self.getBoundView(b))){a.item=b;a.newType='mouseleave';d.handleEvent(a);d.mouseOverItem=null}else {c.handleEvent(a)}}},handleEvent:function(a){var b=this,c=b.keyEventRe.test(a.type);a.isInputFieldEvent=Ext.fly(a.target).isInputField();a.view=b;a.item=a.getTarget(b.itemSelector);if(a.item){a.record=b.getRecord(a.item)}if(b.processUIEvent(a)!==!1&&!b.destroyed){b.processSpecialEvent(a)}if(c&&!a.isInputFieldEvent){if(a.getKey()===a.SPACE||a.isNavKeyPress(!0)){a.preventDefault()}}a.view=null},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(b){if(!Ext.getBody().isAncestor(b.target)){return}var a=this,f=b.item,j=a.self,h=j.EventMap,i=j.TouchEventMap,g,e=b.record,d=b.type,c=d;if(b.newType){c=b.newType}if(f){c=i[c]||c;g=b.recordIndex=a.indexInStore?a.indexInStore(e):a.indexOf(f);if(!e||a.processItemEvent(e,f,g,b)===!1){return !1}if(a['onBeforeItem'+h[c]](e,f,g,b)===!1||a.fireEvent('beforeitem'+c,a,e,f,g,b)===!1||a['onItem'+h[c]](e,f,g,b)===!1){return !1}a.fireEvent('item'+c,a,e,f,g,b)}else {d=i[d]||d;if(a.processContainerEvent(b)===!1||a['onBeforeContainer'+h[d]](b)===!1||a.fireEvent('beforecontainer'+d,a,b)===!1||a['onContainer'+h[d]](b)===!1){return !1}a.fireEvent('container'+d,a,b)}return !0},onItemMouseEnter:function(b,a,c,d){if(this.trackOver){this.highlightItem(a)}},onItemMouseLeave:function(a,c,b,d){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyUp:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyUp:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyUp:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyUp:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(c){var a=this,b=a.highlightedItem,d=a.overItemCls;if(b!==c){if(b){Ext.fly(b).removeCls(d);if(Ext.isIE8){a.repaintBorder(b);a.repaintBorder(b.nextSibling)}if(a.hasListeners.unhighlightitem){a.fireEvent('unhighlightitem',a,b)}}a.highlightedItem=c;if(c){Ext.fly(c).addCls(a.overItemCls);if(Ext.isIE8){a.repaintBorder(c.nextSibling)}if(a.hasListeners.highlightitem){a.fireEvent('highlightitem',a,c)}}}},highlightItem:function(a){this.setHighlightedItem(a)},clearHighlight:function(){this.setHighlightedItem(undefined)},handleUpdate:function(f,e){var a=this,d,c,b;if(a.viewReady){d=a.getNode(e);c=a.callParent(arguments);b=a.highlightedItem;if(b&&b===d){delete a.highlightedItem;if(c){a.highlightItem(c)}}}},refresh:function(){this.clearHighlight();this.callParent(arguments)},focusNode:function(h){var g=this,e=Ext.fly(g.getNode(h)),f=g.el,d=0,c=0,a=f.getRegion(),b;a.bottom=a.top+f.dom.clientHeight;a.right=a.left+f.dom.clientWidth;if(e){b=e.getRegion();if(b.top<a.top){d=b.top-a.top}else {if(b.bottom>a.bottom){d=b.bottom-a.bottom}}if(b.left<a.left){c=b.left-a.left}else {if(b.right>a.right){c=b.right-a.right}}if(c||d){g.scrollBy(c,d,!1)}e.set({tabIndex:-1});e.focus()}},privates:{repaintBorder:function(b){var a=this.getNode(b);if(a){a.className=a.className}}}});Ext.define('Ext.view.BoundListKeyNav',{extend:Ext.view.NavigationModel,alias:'view.navigation.boundlist',navigateOnSpace:!0,initKeyNav:function(c){var a=this,b=c.pickerField;if(!a.keyNav){a.callParent([c]);a.keyNav.map.addBinding({key:Ext.event.Event.ESC,fn:a.onKeyEsc,scope:a})}if(!b){return}if(!b.rendered){b.on('render',Ext.Function.bind(a.initKeyNav,a,[c],0),a,{single:!0});return}a.fieldKeyNav=new Ext.util.KeyNav({disabled:!0,target:b.inputEl,forceKeyDown:!0,up:a.onKeyUp,down:a.onKeyDown,right:a.onKeyRight,left:a.onKeyLeft,pageDown:a.onKeyPageDown,pageUp:a.onKeyPageUp,home:a.onKeyHome,end:a.onKeyEnd,tab:a.onKeyTab,space:a.onKeySpace,enter:a.onKeyEnter,A:{ctrl:!0,handler:a.onSelectAllKeyPress},priority:1001,scope:a})},processViewEvent:function(b,c,e,d,a){if(a.within(b.listWrap)){return a}if(a.getKey()===a.ESC){if(Ext.fly(a.target).isInputField()){a.target=a.target.parentNode}return a}},enable:function(){this.fieldKeyNav.enable();this.callParent()},disable:function(){this.fieldKeyNav.disable();this.callParent()},onItemMouseDown:function(e,b,d,c,a){this.callParent([e,b,d,c,a]);if(a.pointerType==='mouse'){a.preventDefault()}},onKeyUp:function(g){var d=this,a=d.view,f=a.all,c=a.highlightedItem,b=c?a.indexOf(c):-1,e=b>0?b-1:f.getCount()-1;d.setPosition(e);g.preventDefault()},onKeyDown:function(g){var d=this,a=d.view,f=a.all,c=a.highlightedItem,b=c?a.indexOf(c):-1,e=b<f.getCount()-1?b+1:0;d.setPosition(e);g.preventDefault()},onKeyLeft:Ext.returnTrue,onKeyRight:Ext.returnTrue,onKeyTab:function(c){var b=this.view,a=b.pickerField;if(b.isVisible()){if(a.selectOnTab){this.selectHighlighted(c)}if(a.collapse){a.collapse()}}return !0},onKeyEnter:function(b){var d=this.view,c=d.getSelectionModel(),a=d.pickerField,e=c.getCount();b.stopEvent();this.selectHighlighted(b);if(!a.multiSelect&&e===c.getCount()&&a.collapse){a.collapse()}a.fireEvent('specialkey',a,b,{fromBoundList:!0});return !1},onKeySpace:function(){if(this.navigateOnSpace){this.callParent(arguments)}return !0},onKeyEsc:function(){if(this.view.pickerField){this.view.pickerField.collapse()}},focusItem:function(a){var c=this,b=c.view;if(typeof a==='number'){a=b.all.item(a)}if(a){a=a.dom;b.highlightItem(a);b.getScrollable().ensureVisible(a,{x:!1})}},selectHighlighted:function(d){var c=this,b=c.view,e=b.getSelectionModel(),a,f=c.recordIndex;if(b.all.getCount()){a=c.getRecord();if(a){if(d.getKey()===d.ENTER||!e.isSelected(a)){e.selectWithEvent(a,d);if(!b.store.data.contains(a)){c.setPosition(Math.min(f,b.store.getCount()-1))}}}}},destroy:function(){this.fieldKeyNav=Ext.destroy(this.fieldKeyNav);this.callParent()}});Ext.define('Ext.layout.component.BoundList',{extend:Ext.layout.component.Auto,alias:'layout.boundlist',type:'component',beginLayout:function(a){var c=this,b=c.owner,d=b.pagingToolbar;c.scrollPos=b.listWrap.getScroll();c.callParent(arguments);if(b.floating){a.savedXY=b.getXY();b.setXY([0,-9999])}if(d){a.toolbarContext=a.context.getCmp(d)}a.listContext=a.getEl('listWrap')},beginLayoutCycle:function(b){var a=this.owner;this.callParent(arguments);if(b.heightModel.auto){a.el.setHeight('auto');a.listWrap.setHeight('auto')}},getLayoutItems:function(){var a=this.owner.pagingToolbar;return a?[a]:[]},isValidParent:function(){return !0},finishedLayout:function(e){var a=this,d=e.savedXY,f=a.owner,c=f.listWrap,b=a.scrollPos;a.callParent(arguments);if(d){a.owner.setXY(d)}c.setScrollLeft(b.left);c.setScrollTop(b.top)},measureContentWidth:function(a){return this.owner.listWrap.getWidth()},measureContentHeight:function(a){return this.owner.listWrap.getHeight()},publishInnerHeight:function(b,d){var c=b.toolbarContext,a=0;if(c){a=c.getProp('height')}if(a===undefined){this.done=!1}else {b.listContext.setHeight(d-b.getFrameInfo().height-a)}},calculateOwnerHeightFromContentHeight:function(c){var b=this.callParent(arguments),a=c.toolbarContext;if(a){b+=a.getProp('height')}return b}});Ext.define('Ext.Action',{constructor:function(a){this.initialConfig=a;this.itemId=a.itemId=a.itemId||a.id||Ext.id();this.items=[]},isAction:!0,setText:function(a){this.initialConfig.text=a;this.callEach('setText',[a])},getText:function(){return this.initialConfig.text},setIconCls:function(a){this.initialConfig.iconCls=a;this.callEach('setIconCls',[a])},setGlyph:function(a){this.initialConfig.glyph=a;this.callEach('setGlyph',[a])},getIconCls:function(){return this.initialConfig.iconCls},setDisabled:function(a){this.initialConfig.disabled=a;this.callEach('setDisabled',[a])},enable:function(){this.setDisabled(!1)},disable:function(){this.setDisabled(!0)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(a){this.initialConfig.hidden=a;this.callEach('setVisible',[!a])},show:function(){this.setHidden(!1)},hide:function(){this.setHidden(!0)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(a,b){this.initialConfig.handler=a;this.initialConfig.scope=b;this.callEach('setHandler',[a,b])},each:function(b,a){Ext.each(this.items,b,a)},callEach:function(d,e){var c=this.items,b=0,f=c.length,a;Ext.suspendLayouts();for(;b<f;b++){a=c[b];a[d].apply(a,e)}Ext.resumeLayouts(!0)},addComponent:function(a){this.items.push(a);a.on('destroy',this.removeComponent,this)},removeComponent:function(a){Ext.Array.remove(this.items,a)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||Ext.global,arguments)}});Ext.define('Ext.layout.container.Container',{extend:Ext.layout.Layout,alternateClassName:'Ext.layout.ContainerLayout',alias:'layout.container',mixins:[Ext.util.ElementContainer],type:'container',beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:['{%this.renderBody(out,values)%}'],usesContainerHeight:!0,usesContainerWidth:!0,usesHeight:!0,usesWidth:!0,constructor:function(){this.callParent(arguments);this.mixins.elementCt.constructor.call(this)},destroy:function(){this.mixins.elementCt.destroy.call(this);this.callParent()},beginLayout:function(a){this.callParent(arguments);a.targetContext=a.paddingContext=a.getEl('getTarget',this);this.cacheChildItems(a)},beginLayoutCycle:function(b,c){var a=this;a.callParent(arguments);if(c){if(a.usesContainerHeight){++b.consumersContainerHeight}if(a.usesContainerWidth){++b.consumersContainerWidth}}},cacheChildItems:function(b){var d=this,f,e,c,g,a;if(d.needsItemSize||d.setsItemSize){f=b.context;e=b.childItems=[];c=b.visibleItems=d.getVisibleItems();g=c.length;for(a=0;a<g;++a){e.push(f.getCmp(c[a]))}}},cacheElements:function(){var a=this.owner;this.attachChildEls(a.el,a)},calculate:function(a){var b=a.props,c=a.el;if(a.widthModel.shrinkWrap&&isNaN(b.width)){a.setContentWidth(c.getWidth())}if(a.heightModel.shrinkWrap&&isNaN(b.height)){a.setContentHeight(c.getHeight())}},configureItem:function(f){var c=this,b=c.itemCls,d=c.owner.itemCls,e,a;f.ownerLayout=c;if(b){if(typeof b==='string'){a=[b]}else {a=b;e=!!a}}if(d){if(e){a=Ext.Array.clone(a)}a=Ext.Array.push(a||[],d)}if(a){f.addCls(a)}},doRenderBody:function(b,a){this.renderItems(b,a);this.renderContent(b,a)},doRenderContainer:function(d,b){var a=b.$comp.layout,e=a.getRenderTpl(),c=a.getRenderData();e.applyOut(c,d)},doRenderItems:function(c,b){var d=b.$layout,a=d.getRenderTree();if(a){Ext.DomHelper.generateMarkup(a,c)}},doRenderTabGuard:function(e,a,d){var b=a.$comp,c;if(b.tabGuard&&!a.$skipTabGuards){c=b.lookupTpl('tabGuardTpl');if(c){a.tabGuard=d;a.tabGuardEl=b.tabGuardElements[d];b.addChildEl(a.tabGuardEl);c.applyOut(a,e);delete a.tabGuard;delete a.tabGuardEl}}},finishRender:function(){var a=this,b,c;a.callParent();a.cacheElements();b=a.getRenderTarget();c=a.getLayoutItems();a.finishRenderItems(b,c)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(d,k){var c=d.targetContext,i=c.getFrameInfo(),j=d.paddingContext.getPaddingInfo(),f=0,e=0,h,g,b,a;if(!d.widthModel.shrinkWrap){++e;b=k?c.getDomProp('width'):c.getProp('width');h=typeof b==='number';if(h){++f;b-=i.width+j.width;if(b<0){b=0}}}if(!d.heightModel.shrinkWrap){++e;a=k?c.getDomProp('height'):c.getProp('height');g=typeof a==='number';if(g){++f;a-=i.height+j.height;if(a<0){a=0}}}return {width:b,height:a,needed:e,got:f,gotAll:f===e,gotWidth:h,gotHeight:g}},getPositionOffset:function(b){var a;if(!this.createsInnerCt){a=this.owner.itemNodeOffset;if(a){b+=a}}return b},getLayoutItems:function(){var b=this.owner,a=b&&b.items;return a&&a.items||[]},getRenderData:function(){var a=this.owner;return {$comp:a,$layout:this,ownerId:a.id}},getRenderedItems:function(){var f=this,g=f.getRenderTarget(),e=f.getLayoutItems(),h=e.length,d=[],c,b,a;for(c=0,b=0;c<h;c++,b++){a=e[c];if(a.rendered){if(a.ignoreDomPosition){--b}else {if(!this.isValidParent(a,g,b)){continue}}d.push(a)}}return d},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var b=this,a=Ext.XTemplate.getTpl(this,'renderTpl');if(!a.renderContent){b.owner.setupRenderTpl(a)}return a},getRenderTree:function(){var b,c=this.owner.items,a,d={};do{a=c.generation;b=this.getItemsRenderTree(this.getLayoutItems(),d)}while(c.generation!==a);return b},renderChildren:function(){var a=this,b=a.owner.items,e=a.getRenderTarget(),c,d;do{c=b.generation;d=a.getLayoutItems();a.renderItems(d,e)}while(b.generation!==c)},getScrollbarsNeeded:function(d,b,h,e){var c=Ext.scrollbar.size(),i=typeof d==='number',f=typeof b==='number',g=0,a=0;if(!c.width){return 0}if(f&&b<e){a=2;d-=c.width}if(i&&d<h){g=1;if(!a&&f){b-=c.height;if(b<e){a=2}}}return a+g},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var f=this.getRenderTarget(),e=this.getLayoutItems(),g=e.length,d=[],c,b,a;for(c=0,b=0;c<g;c++,b++){a=e[c];if(a.rendered&&a.hidden!==!0&&!a.floated){if(a.ignoreDomPosition){--b}else {if(!this.isValidParent(a,f,b)){continue}}d.push(a)}}return d},getMoveAfterIndex:function(a){return this.owner.items.indexOf(a)+1},moveItemBefore:function(b,c){var f=this.owner,d=f.items,e=d.indexOf(b),a;if(b===c){return b}if(c){a=d.indexOf(c);if(e>-1&&e<a){--a}}else {a=d.length}return f.insert(a,b)},setupRenderTpl:function(a){a.renderBody=this.doRenderBody;a.renderContainer=this.doRenderContainer;a.renderItems=this.doRenderItems;a.renderTabGuard=this.doRenderTabGuard},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(a){if(!a.liquidLayout){++this.activeItemCount}this.callParent([a])},onRemove:function(a,b){if(!a.liquidLayout){--this.activeItemCount}this.callParent([a,b])}});Ext.define('Ext.overrides.layout.container.Container',{override:'Ext.layout.container.Container',notifyOwner:function(){this.owner.afterLayout(this)}});Ext.define('Ext.layout.container.Auto',{extend:Ext.layout.container.Container,alias:['layout.auto','layout.autocontainer'],type:'autocontainer',childEls:['outerCt','innerCt'],reserveScrollbar:!1,managePadding:!0,manageOverflow:!1,needsItemSize:!1,setsItemSize:!1,lastOverflowAdjust:{width:0,height:0},outerCtCls:Ext.baseCSSPrefix+'autocontainer-outerCt',innerCtCls:Ext.baseCSSPrefix+'autocontainer-innerCt',renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','<tpl if="!$comp.html">role="presentation"</tpl>','class="{innerCtCls}">','{%this.renderBody(out,values)%}','</div>','</div>'],beginLayout:function(a){this.callParent(arguments);this.initContextItems(a)},beforeLayoutCycle:function(d){var a=this.owner,c=a.inheritedState,b=a.inheritedStateInner;if(!c||c.invalid){c=a.getInherited();b=a.inheritedStateInner}if(d.widthModel.shrinkWrap){b.inShrinkWrapTable=!0}else {delete b.inShrinkWrapTable}},beginLayoutCycle:function(e){var a=this,g=a.outerCt,l=a.lastOuterCtWidth||'',k=a.lastOuterCtHeight||'',j=a.lastOuterCtTableLayout||'',i=e.state,f,d,c,b,h;a.callParent(arguments);d=c=b='';if(!e.widthModel.shrinkWrap){d='100%';h=a.owner.inheritedStateInner;f=a.getOverflowXStyle(e);b=h.inShrinkWrapTable||f==='auto'||f==='scroll'?'':'fixed'}if(!e.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug){c='100%'}if(d!==l||a.hasOuterCtPxWidth){g.setStyle('width',d);a.lastOuterCtWidth=d;a.hasOuterCtPxWidth=!1}if(b!==j){g.setStyle('table-layout',b);a.lastOuterCtTableLayout=b}if(c!==k||a.hasOuterCtPxHeight){g.setStyle('height',c);a.lastOuterCtHeight=c;a.hasOuterCtPxHeight=!1}if(a.hasInnerCtPxHeight){a.innerCt.setStyle('height','');a.hasInnerCtPxHeight=!1}i.overflowAdjust=i.overflowAdjust||a.lastOverflowAdjust},calculate:function(b){var a=this,e=b.state,c=a.getContainerSize(b,!0),d;d=e.calculatedItems||(e.calculatedItems=a.calculateItems?a.calculateItems(b,c):!0);a.setCtSizeIfNeeded(b,c);if(d&&b.hasDomProp('containerChildrenSizeDone')){a.calculateContentSize(b);if(c.gotAll){if(a.manageOverflow&&!b.state.secondPass&&!a.reserveScrollbar){a.calculateOverflow(b,c)}return}}a.done=!1},calculateContentSize:function(a){var b=this,f=(a.widthModel.shrinkWrap?1:0)|(a.heightModel.shrinkWrap?2:0),d=f&1||undefined,c=f&2||undefined,e=0,g=a.props;if(d){if(isNaN(g.contentWidth)){++e}else {d=undefined}}if(c){if(isNaN(g.contentHeight)){++e}else {c=undefined}}if(e){if(d&&!a.setContentWidth(b.measureContentWidth(a))){b.done=!1}if(c&&!a.setContentHeight(b.measureContentHeight(a))){b.done=!1}}},calculateOverflow:function(d){var c=this,g,f,e,a,h,i,b;h=c.getOverflowXStyle(d)==='auto';i=c.getOverflowYStyle(d)==='auto';if(h||i){e=Ext.scrollbar.size();b=d.overflowContext.el.dom;a=0;if(b.scrollWidth>b.clientWidth){a|=1}if(b.scrollHeight>b.clientHeight){a|=2}g=i&&a&2?e.width:0;f=h&&a&1?e.height:0;if(g!==c.lastOverflowAdjust.width||f!==c.lastOverflowAdjust.height){c.done=!1;d.invalidate({state:{overflowAdjust:{width:g,height:f},overflowState:a,secondPass:!0}})}}},completeLayout:function(a){this.lastOverflowAdjust=a.state.overflowAdjust},doRenderBody:function(b,a){var c=a.$layout,d=Ext.XTemplate,e=c.beforeBodyTpl,f=c.afterBodyTpl;if(e){d.getTpl(c,'beforeBodyTpl').applyOut(a,b)}this.renderItems(b,a);this.renderContent(b,a);if(f){d.getTpl(c,'afterBodyTpl').applyOut(a,b)}},doRenderPadding:function(d,b){var e=b.$layout,a=b.$layout.owner,c=a[a.contentPaddingProperty];if(e.managePadding&&c){d.push('padding:',a.unitizeBox(c))}},finishedLayout:function(b){var a=this.innerCt;this.callParent(arguments);if(Ext.isIE8){a.repaint()}if(Ext.isOpera){a.setStyle('position','relative');a.dom.scrollWidth;a.setStyle('position','')}},getContainerSize:function(c,d){var b=this.callParent(arguments),a=c.state.overflowAdjust;if(a){b.width-=a.width;b.height-=a.height}return b},getRenderData:function(){var b=this,a=b.callParent();a.innerCtCls=b.innerCtCls;a.outerCtCls=b.outerCtCls;return a},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(a){return a.overflowXStyle||(a.overflowXStyle=this.owner.scrollFlags.overflowX||a.overflowContext.getStyle('overflow-x'))},getOverflowYStyle:function(a){return a.overflowYStyle||(a.overflowYStyle=this.owner.scrollFlags.overflowY||a.overflowContext.getStyle('overflow-y'))},initContextItems:function(a){var b=this,d=a.target,c=b.owner.getOverflowEl();a.outerCtContext=a.getEl('outerCt',b);a.innerCtContext=a.getEl('innerCt',b);a.overflowContext=c===a.el?a:a.getEl(c);if(d[d.contentPaddingProperty]!==undefined){a.paddingContext=a.innerCtContext}},initLayout:function(){var a=this,b=Ext.scrollbar.width(),c=a.owner;a.callParent();if(b&&a.manageOverflow&&!a.hasOwnProperty('lastOverflowAdjust')){if(c.scrollable||a.reserveScrollbar){a.lastOverflowAdjust={width:b,height:0}}}},measureContentHeight:function(b){var a=this.outerCt.getHeight(),c=b.target;if(this.managePadding&&c[c.contentPaddingProperty]===undefined){a+=b.targetContext.getPaddingInfo().height}return a},measureContentWidth:function(f){var a,b,e,c,d;if(this.chromeCellMeasureBug){a=this.innerCt.dom;b=a.style;e=b.display;if(e==='table-cell'){b.display='';a.offsetWidth;b.display=e}}if(Ext.isSafari){a=this.outerCt.dom;b=a.style;b.display='table-cell';a.offsetWidth;a.style.display=''}c=this.outerCt.getWidth();d=f.target;if(this.managePadding&&d[d.contentPaddingProperty]===undefined){c+=f.targetContext.getPaddingInfo().width}return c},setCtSizeIfNeeded:function(a,h){var c=this,b=h.height,k=a.paddingContext.getPaddingInfo(),g=c.getTarget(),f=c.getOverflowXStyle(a),j=f==='auto'||f==='scroll',i=Ext.scrollbar.size(),e,d;if(b&&!a.heightModel.shrinkWrap){if(Ext.supports.PercentageHeightOverflowBug){e=!0}if(Ext.isIE8){d=!0}if((e||d)&&j&&g.dom.scrollWidth>g.dom.clientWidth){b=Math.max(b-i.height,0)}if(e){a.outerCtContext.setProp('height',b+k.height);c.hasOuterCtPxHeight=!0}if(d){a.innerCtContext.setProp('height',b);c.hasInnerCtPxHeight=!0}}},setupRenderTpl:function(a){this.callParent(arguments);a.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt}},function(b){var a=Ext.chromeVersion;b.prototype.chromeCellMeasureBug=Ext.isChrome&&a>=26&&a<=34});Ext.define('Ext.ZIndexManager',{alternateClassName:'Ext.WindowGroup',statics:{zBase:9000,activeCounter:0},reflowSuspended:0,constructor:function(b){var a=this;a.id=Ext.id(null,'zindex-mgr-');a.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(c,d){var a=(c.alwaysOnTop||0)-(d.alwaysOnTop||0);if(!a){a=c.getActiveCounter()-d.getActiveCounter()}return a}},filters:{filterFn:function(a){return a.isVisible()}}});a.zIndexStack.addObserver(a);a.front=null;a.sortCount=0;a.globalListeners=Ext.GlobalEvents.on({beforehide:a.onComponentShowHide,show:a.onComponentShowHide,scope:a,destroyable:!0});if(b){if(b.isContainer){a.resizeListeners=b.on({resize:a.onContainerResize,scope:a,destroyable:!0});a.zseed=Ext.Number.from(a.rendered?b.getEl().getStyle('zIndex'):undefined,a.getNextZSeed());a.targetEl=b.getTargetEl();a.container=b}else {a.resizeListeners=Ext.on({resize:a.onContainerResize,scope:a,destroyable:!0});a.zseed=a.getNextZSeed();a.targetEl=Ext.get(b)}}else {a.zseed=a.getNextZSeed();Ext.onInternalReady(function(){a.resizeListeners=Ext.on({resize:a.scheduleContainerResize,scope:a,destroyable:!0,priority:-10000});a.targetEl=Ext.getBody()})}},getId:function(){return this.id},getNextZSeed:function(){return Ext.ZIndexManager.zBase+=10000},setBase:function(a){this.zseed=a;return this.onCollectionSort()},onCollectionSort:function(){var a=this,g=a.front,h=a.zseed,i=a.zIndexStack.getRange(),k=i.length,f,b,d,c,e,j=!g||g.isVisible();a.sortCount++;for(f=0;f<k;f++){b=i[f];if(b.destroying||b.destroyed){continue}h=b.setZIndex(h);if(!b.hidden){e=b;if(b.modal){d=b;c=null}if(j&&(b.isFocusable(!0)&&(b.modal||b.focusOnToFront))){c=b}}}if(c&&c!==g&&!c.preventFocusOnActivate){c.onFocusTopmost()}if(d){if(d===a.topModal){a.syncModalMask(d)}else {a.showModalMask(d)}}else {a.hideModalMask()}if(e!==a.topMost){if(a.topMost){a.topMost.onZIndexChange(!1)}if(e){e.onZIndexChange(!0)}}a.front=c;a.topModal=d;a.topMost=e;if(!a.front&&a.topMost){a.front=a.topMost}return h},onComponentUpdate:function(a){if(!this.reflowSuspended&&this.zIndexStack.contains(a)){this.zIndexStack.sort()}},suspendReflow:function(){this.reflowSuspended++},resumeReflow:function(a){if(this.reflowSuspended&&!--this.reflowSuspended){if(a){this.zIndexStack.sort()}}},onComponentReady:function(a){if(!this.reflowSuspended&&a.toFrontOnShow&&a.isVisible()){this.zIndexStack.itemChanged(a,'hidden');this.zIndexStack.sort()}},onComponentShowHide:function(a){var b=this,c=b.zIndexStack,d=b.sortCount;if(a.isFloating()&&!b.hidingAll&&(c.getSource()||c).contains(a)){if(b.tempHidden){Ext.Array.remove(b.tempHidden,a)}c.beginUpdate();if(a.isVisible()){if(a.toFrontOnShow){c.itemChanged(a,'hidden');a.setActiveCounter(++Ext.ZIndexManager.activeCounter)}}else {c.itemChanged(a,'hidden')}c.endUpdate();if(b.sortCount===d&&!b.reflowSuspended){b.onCollectionSort()}}},register:function(a){var b=this;if(a.zIndexManager){a.zIndexManager.unregister(a)}a.zIndexManager=b;if(!a.rendered){a.on(b.getReadyEvent(a),b.onComponentReady,b,{single:!0})}b.zIndexStack.add(a)},unregister:function(b){var a=this;delete b.zIndexManager;b.un(a.getReadyEvent(b),a.onComponentReady,a);a.zIndexStack.remove(b);a.onCollectionSort()},get:function(a){return a.isComponent?a:this.zIndexStack.get(a)},bringToFront:function(a,f){var e=this,d=e.zIndexStack,g=d.last(),b,c;a=e.get(a);if(!a){return !1}c=a.preventFocusOnActivate;a.preventFocusOnActivate=f;a.setActiveCounter(++Ext.ZIndexManager.activeCounter);a.preventFocusOnActivate=c;b=d.last();return b===a&&b!==g},sendToBack:function(a){a=this.get(a);if(a){a.setActiveCounter(0)}return a||null},hideAll:function(){var a=this,c=a.zIndexStack.getRange(),d=c.length,b;a.hidingAll=!0;for(b=0;b<d;b++){c[b].hide()}a.hidingAll=!1;a.hideModalMask();a.front=null},hide:function(){var b=this,d=Ext.Element.getActiveElement(),e=b.zIndexStack.getRange(),f=e.length,a,c;b.focusRestoreElement=null;(b.tempHidden||(b.tempHidden=[])).length=0;for(c=0;c<f;c++){a=e[c];if(a.isVisible()){if(a.el.contains(d)){b.focusRestoreElement=d}a.el.hide();a.pendingShow=a.hidden=!0;b.tempHidden.push(a)}}},show:function(){var b=this,d=b.tempHidden,e=d?d.length:0,a,c;for(c=0;c<e;c++){a=d[c];a.hidden=!1;if(a.pendingShow){a.el.show();a.pendingShow=!1;a.setPosition(a.x,a.y);a.onFloatShow()}else {a.hide()}}b.tempHidden=null;if(b.focusRestoreElement){b.focusRestoreElement.focus()}},getActive:function(){return this.zIndexStack.last()},getBy:function(b,a){return this.zIndexStack.filterBy(b,a).getRange()},each:function(b,a){this.zIndexStack.each(b,a)},eachBottomUp:function(f,d){var c=this.zIndexStack.getRange(),e=c.length,a,b;for(b=0;b<e;b++){a=c[b];if(a.isComponent&&f.call(d||a,a)===!1){return}}},eachTopDown:function(e,d){var c=this.zIndexStack.getRange(),a,b;for(b=c.length;b-->0;){a=c[b];if(a.isComponent&&e.call(d||a,a)===!1){return}}},destroy:function(){var a=this,c=a.zIndexStack.getRange(),d=c.length,b;for(b=0;b<d;b++){Ext.destroy(c[b])}Ext.destroy(a.mask,a.maskShim,a.zIndexStack,a.globalListeners,a.resizeListeners);a.callParent()},privates:{getMaskBox:function(){var a=this.mask.maskTarget;if(a.dom===document.body){return {height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,Ext.dom.Element.getDocumentWidth()),x:0,y:0}}else {return a.getBox()}},getReadyEvent:function(a){return a.liquidLayout?'afterrender':'boxready'},scheduleContainerResize:function(){if(!this.containerResizeTimer){this.containerResizeTimer=Ext.raf(this.onContainerResize,this)}},onContainerResize:function(){var c=this,b=c.mask,a=c.maskShim,d;c.containerResizeTimer=null;if(b&&b.isVisible()){b.hide();if(a){a.hide()}d=c.getMaskBox();if(a){a.setSize(d);a.show()}b.setSize(d);b.show()}},onMaskMousedown:function(a){if(this.topModal){this.topModal.focus();a.preventDefault()}},onMaskClick:function(){var a=this.topModal,b;if(a){if(!a.hasListeners.maskclick||a.fireEvent('maskclick',a)!==!1){b=a.maskClickAction||'focus';a[b]()}}},showModalMask:function(b){var a=this,e=b.el,d=b.floatParent?b.floatParent.getEl():b.container,c=a.mask;if(!c){a.mask=c=Ext.getBody().createChild({role:'presentation',cls:Ext.baseCSSPrefix+'mask '+Ext.baseCSSPrefix+'border-box',style:'height:0;width:0'});c.setVisibilityMode(Ext.Element.DISPLAY);c.on({mousedown:a.onMaskMousedown,click:a.onMaskClick,scope:a})}else {a.hideModalMask()}c.maskTarget=d;d.saveTabbableState({excludeRoot:e});a.syncModalMask(b)},syncModalMask:function(f){var c=this,e=f.el.getZIndex()-4,b=c.mask,a=c.maskShim,d=c.getMaskBox();if(a){a.setZIndex(e);a.show();a.setBox(d)}b.setZIndex(e);b.show();b.setBox(d)},hideModalMask:function(){var a=this.mask,b=this.maskShim;if(a&&a.isVisible()){a.maskTarget.restoreTabbableState();a.maskTarget=undefined;a.hide();if(b){b.hide()}}}}},function(){Ext.WindowManager=Ext.WindowMgr=new this()});Ext.define('Ext.util.ItemCollection',{extend:Ext.util.MixedCollection,alternateClassName:'Ext.ItemCollection',getKey:function(a){return a.getItemId&&a.getItemId()},has:function(a){return this.map.hasOwnProperty(a.getId())}});Ext.define('Ext.mixin.Queryable',{mixinId:'queryable',isQueryable:!0,query:function(a){a=a||'*';return Ext.ComponentQuery.query(a,this.getQueryRoot())},queryBy:function(g,e){var d=[],c=this.getQueryRoot().getRefItems(!0),b=0,f=c.length,a;for(;b<f;++b){a=c[b];if(g.call(e||a,a)!==!1){d.push(a)}}return d},queryById:function(a){return this.down(Ext.makeIdSelector(a))},child:function(b){var a=this.getQueryRoot().getRefItems();if(b&&b.isComponent){return this.matchById(a,b.getItemId())}if(b){a=Ext.ComponentQuery.query(b,a)}if(a.length){return a[0]}return null},down:function(a){if(a&&a.isComponent){return this.matchById(this.getRefItems(!0),a.getItemId())}a=a||'';return this.query(a)[0]||null},visitPreOrder:function(b,d,c,a){Ext.ComponentQuery._visit(!0,b,this.getQueryRoot(),d,c,a)},visitPostOrder:function(b,d,c,a){Ext.ComponentQuery._visit(!1,b,this.getQueryRoot(),d,c,a)},getRefItems:function(){return []},getQueryRoot:function(){return this},privates:{matchById:function(c,e){var d=c.length,a,b;for(a=0;a<d;++a){b=c[a];if(b.getItemId()===e){return b}}return null}}});Ext.define('Ext.mixin.Container',{extend:Ext.Mixin,mixinConfig:{id:'container'},isContainer:!0,nameHolder:!1,referenceHolder:!1,getNamedItems:function(){if(Ext.referencesDirty){Ext.fixReferences()}return this.nameRefs||null},getReferences:function(){if(Ext.referencesDirty){Ext.fixReferences()}return this.refs||null},lookup:function(b){var a=this.getReferences();return a&&a[b]||null},lookupName:function(b){var a=this.getNamedItems();return a&&a[b]||null},lookupReference:function(a){return this.lookup(a)},privates:{attachNameRef:function(a){var c=this,e=a.name||a._name,b,d;if(e&&!c.destroying&&!c.destroyed){d=c.nameRefs||(c.nameRefs={});b=d[e];if(!b){b=a.shareableName?[a]:a}else {if(!b.isInstance){b.push(a)}}d[e]=b}},attachReference:function(b){var a=this,d,c;if(!a.destroying&&!a.destroyed){c=a.refs||(a.refs={});d=b.referenceKey;c[d]=b}},containerOnAdded:function(a,b){Ext.ComponentManager.markReferencesDirty()},containerOnRemoved:function(a){if(!a){Ext.ComponentManager.markReferencesDirty()}},initContainerInheritedState:function(b,h){var a=this,d=a.getController(),f=a.getSession(),g=a.getConfig('viewModel',!0),e=a.reference,c=a.referenceHolder;if(a.nameHolder){b.nameHolder=a}if(d){b.referenceHolder=d;c=!0}else {if(c){b.referenceHolder=a}}if(c){b.referencePath=''}else {if(e&&a.isParentReference){b.referencePath=a.referenceKey+'.'}}if(f){b.session=f}if(g){b.viewModelPath=''}else {if(e&&a.isParentReference){b.viewModelPath=a.viewModelKey+'.'}}},setupReference:function(a){var b;if(a&&a.charAt(b=a.length-1)==='>'){this.isParentReference=!0;a=a.substring(0,b)}return a}}});Ext.define('Ext.mixin.FocusableContainer',{extend:Ext.Mixin,mixinConfig:{id:'focusablecontainer'},isFocusableContainer:!0,focusableContainer:!1,resetFocusPosition:!1,activeChildTabIndex:0,inactiveChildTabIndex:-1,allowFocusingDisabledChildren:!1,focusableContainerEl:'el',privates:{initFocusableContainer:function(a){var c,b,d;if(this.focusableContainer){a=a!=null?a:!0;this.doInitFocusableContainer(a)}else {c=this.getFocusables();for(b=0,d=c.length;b<d;b++){c[b].ownerFocusableContainer=null}}},doInitFocusableContainer:function(d){var a=this,c=a.focusableContainerEl,b;if(!c.isElement){c=a.focusableContainerEl=a[c]}if(a.initFocusableContainerKeyNav){a.initFocusableContainerKeyNav(c)}if(d){a.clearFocusables();if(!a.isDisabled()){b=a.findNextFocusableChild({step:1})||a.findNextFocusableChild({beforeRender:!0});if(b){a.activateFocusable(b)}}}b=a.findNextFocusableChild({firstTabbable:!0});a.activateFocusableContainer(!!b&&!a.isDisabled())},initFocusableContainerKeyNav:function(b){var a=this;if(!a.focusableKeyNav){b=b||a.focusableContainerEl;a.focusableKeyNav=new Ext.util.KeyNav({target:b,disabled:!0,eventName:'keydown',processEvent:a.processFocusableContainerKeyEvent,processEventScope:a,scope:a,tab:a.onFocusableContainerTabKey,enter:{handler:a.onFocusableContainerEnterKey,ctrl:!1,shift:!1,alt:!1},space:{handler:a.onFocusableContainerSpaceKey,ctrl:!1,shift:!1,alt:!1},up:{handler:a.onFocusableContainerUpKey,ctrl:!1,shift:!1,alt:!1},down:{handler:a.onFocusableContainerDownKey,ctrl:!1,shift:!1,alt:!1},left:{handler:a.onFocusableContainerLeftKey,ctrl:!1,shift:!1,alt:!1},right:{handler:a.onFocusableContainerRightKey,ctrl:!1,shift:!1,alt:!1}})}},destroyFocusableContainer:function(){this.focusableKeyNav=Ext.destroy(this.focusableKeyNav)},activateFocusableContainer:function(b){var a=this.focusableKeyNav;if(a){a.setDisabled(!b)}},isFocusableContainerActive:function(){var a=this.focusableKeyNav;return a?!a.disabled:!1},getFocusables:function(){return this.items.items},initDefaultFocusable:function(){var e=this,f=!1,b,a,c,d;b=e.getFocusables();d=b.length;if(!d){return}for(c=0;c<d;c++){a=b[c];if(!a.isDisabled()&&a.isFocusable()){f=!0;break}}if(!f){return}a=e.findNextFocusableChild({items:b,step:!0});if(a){e.activateFocusable(a)}return a},clearFocusables:function(f){var d=this,c=d.getFocusables(),e=c.length,a,b;for(b=0;b<e;b++){a=c[b];if(!a.destroyed&&a.focusable&&a.isTabbable()){d.deactivateFocusable(a)}}},processFocusableContainerKeyEvent:function(a){if(!Ext.fly(a.target).isInputField()){return a}},activateFocusable:function(a){a.setTabIndex(this.activeChildTabIndex)},deactivateFocusable:function(a){a.setTabIndex(this.inactiveChildTabIndex)},onFocusableContainerTabKey:function(){return !0},onFocusableContainerEnterKey:function(){return !0},onFocusableContainerSpaceKey:function(){return !0},onFocusableContainerUpKey:function(a){a.preventDefault();return this.moveChildFocus(a,!1)},onFocusableContainerDownKey:function(a){a.preventDefault();return this.moveChildFocus(a,!0)},onFocusableContainerLeftKey:function(a){a.preventDefault();return this.moveChildFocus(a,!1)},onFocusableContainerRightKey:function(a){a.preventDefault();return this.moveChildFocus(a,!0)},getFocusableFromEvent:function(b){var a=Ext.Component.from(b);return a},moveChildFocus:function(a,b){var c=this.getFocusableFromEvent(a);return this.focusChild(c,b,a)},focusChild:function(c,b){var a=this.findNextFocusableChild({child:c,step:b});if(a){a.focus()}return a},findNextFocusableChild:function(e){var k=e.beforeRender,j=e.firstTabbable,g,a,i,c,d,b,f,h;g=e.items||this.getFocusables();c=e.step!=null?e.step:1;i=e.child;h=!!this.allowFocusingDisabledChildren;d=Ext.Array.indexOf(g,i);c=c===!0?1:c===!1?-1:c;f=g.length;b=c>0?d<f?d+c:0:d>0?d+c:f-1;for(;;b+=c){if(d<0&&(b>=f||b<0)){return null}else {if(b>=f){b=-1;continue}else {if(b<0){b=f;continue}else {if(b===d){return null}}}}a=g[b];if(!a||!a.focusable||a.isDisabled()&&!h){continue}if(j){if(a.isTabbable&&a.isTabbable()){return a}}else {if(k||a.isFocusable&&a.isFocusable()){return a}}}return null},onFocusEnter:function(d){var b=this,c=d.toComponent,a;if(c===b){a=b.initDefaultFocusable();if(a){a.focus()}}b.activateFocusableContainer(!0)},onFocusLeave:function(b){var a=this;if(a.resetFocusPosition){a.clearFocusables();a.initDefaultFocusable()}},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(b){var a=this;if(!a.focusableContainer||a.destroying||a.destroyed){return}a.clearFocusables();a.activateFocusable(b)},afterFocusableChildFocus:function(b){var a=this;if(!a.focusableContainer||a.destroying||a.destroyed){return}a.lastFocusedChild=b},onFocusableChildAdd:function(a){var b=this;if(a.focusable){a.ownerFocusableContainer=b}},onFocusableChildRemove:function(a){var c=this,b;a.ownerFocusableContainer=null;if(a===c.lastFocusedChild){c.lastFocusedChild=null;b=c.initDefaultFocusable();if(a.hasFocus){b=b||a.findFocusTarget();if(b){b.focus()}}}a=b||c.findNextFocusableChild({step:1,beforeRender:!0});if(!a){c.activateFocusableContainer(!1)}},beforeFocusableChildEnable:Ext.privateFn,onFocusableChildEnable:function(b){var a=this,c;if(!a.focusableContainer||a.destroying||a.destroyed){return}if(a.containsFocus){c=Ext.ComponentManager.getActiveComponent();a.clearFocusables();a.activateFocusable(c)}else {if(a.resetFocusPosition||a.lastFocusedChild==null){a.clearFocusables();if(b.hasFocus){a.activateFocusable(b);c=b}}else {a.deactivateFocusable(b);if(b===a.lastFocusedChild){a.clearFocusables();a.activateFocusable(b)}c=a.findNextFocusableChild({firstTabbable:!0})}}if(!c){a.initDefaultFocusable()}a.activateFocusableContainer(!0)},beforeFocusableChildDisable:function(b){var a=this,c;if(!a.focusableContainer||a.destroying||a.destroyed){return}if(b.hasFocus){c=a.findNextFocusableChild({child:b})||b.findFocusTarget();if(c){c.focus()}}},onFocusableChildDisable:function(c){var a=this,b;if(!a.focusableContainer||a.destroying||a.destroyed){return}b=a.findNextFocusableChild({firstTabbable:!0});if(!b){b=a.initDefaultFocusable()}if(!b){a.activateFocusableContainer(!1)}},beforeFocusableChildHide:function(a){return this.beforeFocusableChildDisable(a)},onFocusableChildHide:function(a){return this.onFocusableChildDisable(a)},beforeFocusableChildShow:function(a){return this.beforeFocusableChildEnable(a)},onFocusableChildShow:function(a){return this.onFocusableChildEnable(a)},onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn},deprecated:{7:{configs:{enableFocusableContainer:'focusableContainer'}}}});Ext.define('Ext.container.Container',{extend:Ext.Component,xtype:'container',alternateClassName:['Ext.Container','Ext.AbstractContainer'],mixins:[Ext.mixin.Queryable,Ext.mixin.Container,Ext.mixin.FocusableContainer],renderTpl:'<tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'before\'); %}</tpl>'+'{% this.renderContainer(out,values) %}'+'<tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'after\'); %}</tpl>',config:{actions:null},autoDestroy:!0,defaultType:'panel',detachOnRemove:!0,items:undefined,layout:'auto',suspendLayout:!1,tabGuardTpl:'<span id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" aria-hidden="true"'+' class="'+Ext.baseCSSPrefix+'tab-guard '+Ext.baseCSSPrefix+'tab-guard-{tabGuardPosition}"'+' style="width:0px;height:0px;">'+'</span>',tabGuardElements:{before:'tabGuardBeforeEl',after:'tabGuardAfterEl'},_applyDefaultsOptions:{defaults:!0,strict:!1},ariaRole:'presentation',baseCls:Ext.baseCSSPrefix+'container',layoutCounter:0,add:function(){var a=this,e=Ext.Array.slice(arguments),l=typeof e[0]==='number'?e.shift():-1,m=a.getLayout(),k=!1,j,d,f,g,b,c,i,h;if(e.length===1&&Ext.isArray(e[0])){d=e[0];j=!0}else {d=e}if(a.rendered){Ext.suspendLayouts()}i=d=a.prepareItems(d,!0);g=d.length;if(!j&&g===1){i=d[0]}for(f=0;f<g;f++){b=d[f];c=l<0?a.items.length:l+f;h=!!b.instancedCmp;delete b.instancedCmp;if(b.floating){(a.floatingItems||(a.floatingItems=new Ext.util.ItemCollection())).add(b);b.onAdded(a,c,h);delete b.$initParent;if(a.hasListeners.add){a.fireEvent('add',a,b,c)}}else {if((!a.hasListeners.beforeadd||a.fireEvent('beforeadd',a,b,c)!==!1)&&a.onBeforeAdd(b)!==!1){a.items.insert(c,b);b.onAdded(a,c,h);delete b.$initParent;if(a.focusableContainer){a.onFocusableChildAdd(b)}a.onAdd(b,c);m.onAdd(b,c);k=!0;if(a.hasListeners.add){a.fireEvent('add',a,b,c)}}}b.isLayoutMoving=!1}if(k){a.updateLayout()}if(a.rendered){if(g&&a.focusableContainer){a.$initFocusableContainerAfterLayout=!0}Ext.resumeLayouts(!0)}return i},onAdded:function(a,c,b){this.callParent([a,c,b]);this.containerOnAdded(a,b)},onRemoved:function(a){this.containerOnRemoved(a);this.callParent(arguments)},afterComponentLayout:function(){var a=this.floatingItems,d,c,b;this.callParent(arguments);if(a){a=a.items;d=a.length;for(c=0;c<d;c++){b=a[c];if(!b.rendered&&b.autoShow){b.show()}}}},afterLayout:function(b){var a=this;++a.layoutCounter;if(a.hasListeners.afterlayout){a.fireEvent('afterlayout',a,b)}if(a.focusableContainer&&a.$initFocusableContainerAfterLayout){a.initFocusableContainer()}delete a.$initFocusableContainerAfterLayout},doDestroy:function(){var a=this,d=a.items,c=a.floatingItems,b;if(a.focusableContainer){a.destroyFocusableContainer()}if(d){while(b=d.first()){a.doRemove(b,!0)}d.destroy();a.items=null}if(c){while(b=c.first()){a.doRemove(b,!0)}c.destroy();a.floatingItems=null}Ext.destroy(a.layout);a.callParent()},beforeRender:function(){var a=this,c=a.getLayout(),b;a.preventChildDisable=!0;a.callParent();a.preventChildDisable=!1;if(!c.initialized){c.initLayout()}b=c.targetCls;if(b){a.applyTargetCls(b)}},cascade:function(f,e,d){var a=this,h=a.items?a.items.items:[],j=h.length,g=0,b,c=d?d.concat(a):[a],i=c.length-1;if(f.apply(e||a,c)!==!1){for(;g<j;g++){b=h[g];if(b.cascade){b.cascade(f,e,d)}else {c[i]=b;f.apply(e||b,c)}}}return this},contains:function(a,c){var b=!1;if(c){this.cascade(function(d){if(d.contains&&d.contains(a)){b=!0;return !1}});return b}else {return this.items.contains(a)||this.floatingItems&&this.floatingItems.contains(a)}},disable:function(e,d){var a=this,g=a.disabled,c,f,b;a.callParent([e,d]);if(!d&&!a.preventChildDisable&&!g){c=a.getChildItemsToDisable();f=c.length;for(b=0;b<f;b++){c[b].disable(e,!0)}}if(a.focusableContainer){a.activateFocusableContainer(!1)}return a},enable:function(d,g){var a=this,f=a.disabled,c,e,b;a.callParent([d,g]);if(f){c=a.getChildItemsToDisable();e=c.length;for(b=0;b<e;b++){c[b].enable(d,!0)}}if(a.focusableContainer){a.activateFocusableContainer(!0)}return a},getChildByElement:function(b,e){var a,c,d=0,f=this.getRefItems(),g=f.length;b=Ext.getDom(b);for(;d<g;d++){a=f[d];c=a.getEl();if(c&&(c.dom===b||c.contains(b))){return e&&a.getChildByElement?a.getChildByElement(b,e):a}}return null},getComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}var b=this.items.get(a),c=this.floatingItems;if(!b&&c&&typeof a!=='number'){b=c.get(a)}return b},getFocusEl:function(){var a=this.getDefaultFocus();if(a){return a}else {if(this.focusable){return this.getTargetEl()}}return undefined},getLayout:function(){var b=this,a=b.layout;if(!a||!a.isLayout){b.setLayout(a)}return b.layout},getRefItems:function(g){var f=this,d=f.items.items,e=d.length,c=0,b,a=[];for(;c<e;c++){b=d[c];a[a.length]=b;if(g&&b.getRefItems){a.push.apply(a,b.getRefItems(!0))}}if(f.floatingItems){d=f.floatingItems.items;e=d.length;for(c=0;c<e;c++){b=d[c];a[a.length]=b;if(g&&b.getRefItems){a.push.apply(a,b.getRefItems(!0))}}}return a},getDefaultFocus:function(){var a=this.defaultFocus,b;if(a&&!this.isConfiguring){b=this.down(a)}return b},setDefaultFocus:function(a){this.defaultFocus=a},initComponent:function(){var a=this;a.callParent();a.getLayout();a.constructing=!0;a.initItems();if(a.disabled){a.disabled=!1;a.disable(!0)}a.reference=a.setupReference(a.reference);delete a.constructing},initItems:function(){var b=this,a=b.items;if(!a||!a.isMixedCollection){b.items=new Ext.util.ItemCollection();if(a){if(!Ext.isArray(a)){a=[a]}b.$initingItems=!0;b.add(a);delete b.$initingItems}}},initInheritedState:function(a,c){var b=this,d=b.layout;b.callParent([a,c]);if(b.collapsed){a.collapsed=!0}b.initContainerInheritedState(a,c);if(d&&d.initInheritedState){d.initInheritedState(a,c)}},insert:function(c,a){var b;if(a&&a.isComponent){b=this.items.indexOf(a);if(b!==-1){return this.move(b,c)}}return this.add(c,a)},lookupComponent:function(a){var c=this,b=c.defaultType,d;if(!a.isComponent){if(typeof a==='string'){if(!(d=a[0]==='@')){return Ext.ComponentManager.get(a)}a=c.getAction(a.substr(1));b=c.defaultActionType||b}a=Ext.ComponentManager.create(a,b);if(d){a.instancedCmp=!0}}return a},move:function(a,c){var d=this,e=d.items,b;if(a.isComponent){a=e.indexOf(a)}b=e.getAt(a);if(a!==c){b=e.removeAt(a);if(b===!1){return !1}c=Math.min(c,e.getCount());e.insert(c,b);d.onMove(b,a,c);if(d.hasListeners.childmove){d.fireEvent('childmove',d,b,a,c)}d.updateLayout()}return b},moveBefore:function(a,d){var c,b;if(a!==d){c=Ext.Element.getActiveElement(!0);if(a.el&&a.el.contains(c)){b=c;b.suspendFocusEvents();a.isLayoutMoving=!0}a=this.layout.moveItemBefore(a,d);if(b){a.isLayoutMoving=!1;b.focus();b.resumeFocusEvents()}}return a},moveAfter:function(a,b){var d=this.layout,c;if(a!==b){c=b?d.getMoveAfterIndex(b):0;a=this.moveBefore(a,this.items.getAt(c))}return a},nextChild:function(f,e){var h=this,b=h.items,c=b.indexOf(f),d=0,g=b.length,a;if(c!==-1){if(e){for(;d<g;d++){a=b.getAt(c+d);if(!a||Ext.ComponentQuery.is(a,e)){break}}}else {a=b.getAt(c+1)}}return a||null},onAdd:Ext.emptyFn,onBeforeAdd:function(a){var b=a.ownerCt;if(a.isDetached){a.reattachToBody()}if(b&&b!==this){a.isLayoutMoving=!0;b.remove(a,{destroy:!1,detach:!1})}},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){this.callParent(arguments);this.repositionFloatingItems()},onResize:function(){this.callParent(arguments);this.repositionFloatingItems()},prevChild:function(f,e){var h=this,b=h.items,c=b.indexOf(f),d=0,g=b.length,a;if(c!==-1){if(e){for(;d<g;d++){a=b.getAt(c-d);if(!a||Ext.ComponentQuery.is(a,e)){break}}}else {a=b.getAt(c-1)}}return a||null},remove:function(d,c){var a=this,b;if(a.destroyed||a.destroying){return}b=a.getComponent(d);if(b&&(!a.hasListeners.beforeremove||a.fireEvent('beforeremove',a,b)!==!1)){a.doRemove(b,c);if(a.hasListeners.remove){a.fireEvent('remove',a,b)}if(!a.destroying&&!a.destroyAfterRemoving&&!b.floating){a.updateLayout()}if(a.destroyAfterRemoving){a.destroy()}}return b},removeAll:function(h){var a=this,b,f=a.floatingItems,g=[],e=0,d,c;if(f){b=a.items.items.concat(f.items)}else {b=a.items.items.slice()}d=b.length;Ext.suspendLayouts();a.removingAll=!0;for(;e<d;e++){c=b[e];a.remove(c,h);if(c.ownerCt!==a){g.push(c)}}a.removingAll=!1;Ext.resumeLayouts(!!d);return g},setLayout:function(a){var c=this,b=c.layout,d;if(a){if(typeof a==='string'){a={type:a}}d=a.type;if(b){if(b.isLayout){if(!d||d===b.type){b.setConfig(a);a=b}else {b.setOwner(null)}}else {if(typeof b==='string'){b={type:b}}a=Ext.merge({},b,a)}}if(!(a&&a.isLayout)){a.owner=this;a=Ext.Factory.layout(a)}a.setOwner(this)}c.layout=a;if(c.rendered){c.updateLayout()}},setActiveItem:function(a){return this.getLayout().setActiveItem(a)},updateActions:function(b){var a;for(a in b){if(!b[a].isAction){b[a]=new Ext.Action(b[a])}}},getAction:function(b){var a=this;for(a=this;a;a=a.getRefOwner()){if(a.actions&&a.actions[b]){return a.actions[b]}}},onShowComplete:function(c,b){var a=this;a.callParent([c,b]);if(a.focusableContainer&&a.activateFocusableContainer){a.activateFocusableContainer()}},onFocusEnter:function(b){var a=this;a.callParent([b]);if(a.focusableContainer&&!a.destroying&&!a.destroyed){a.mixins.focusablecontainer.onFocusEnter.call(a,b)}},onFocusLeave:function(b){var a=this;a.callParent([b]);if(a.focusableContainer&&!a.destroying&&!a.destroyed){a.mixins.focusablecontainer.onFocusLeave.call(a,b)}},privates:{applyDefaults:function(a){var c=this,b=c.defaults;if(b){if(Ext.isFunction(b)){b=b.call(c,a)}if(Ext.isString(a)){a=Ext.ComponentManager.get(a)}if(a.isComponent){a.setConfig(b,null,c._applyDefaultsOptions)}else {a=c.self.getConfigurator().merge(c,Ext.Object.fork(b),a)}}return a},applyTargetCls:function(a){this.layoutTargetCls=a},doRemove:function(a,c){var b=this,f=b.layout,h=f&&b.rendered,g=a.floating,i=b.detachOnRemove,e=b.autoDestroy,d;if(typeof c==='boolean'){e=c}else {if(typeof c==='object'){if(c.destroy!=null){e=c.destroy}if(c.detach!=null){i=c.detach}}}d=a.destroying||e;if(g){b.floatingItems.remove(a)}else {b.items.remove(a)}if(h&&!g){if(f.running){Ext.Component.cancelLayout(a,d)}f.onRemove(a,d)}if(!a.destroyed){a.onRemoved(d)}if(b.focusableContainer&&!b.destroying&&!b.destroyed){b.onFocusableChildRemove(a,d)}b.onRemove(a,d);if(e){a.destroy()}else {if(!b.destroyed){if(h&&!g){f.afterRemove(a)}if(i&&a.rendered){a.detachFromBody()}}}},finishRenderChildren:function(){var a;this.callParent();a=this.getLayout();if(a){a.finishRender()}},getChildItemsToDisable:function(){return this.query('[isLabelable],[isFocusableContainer],button')},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},prepareItems:function(a,f){if(Ext.isArray(a)){a=a.slice()}else {a=[a]}var e=this,c=0,d=a.length,b;for(;c<d;c++){b=a[c];if(b==null){Ext.Array.erase(a,c,1);--c;--d}else {if(f){b=this.applyDefaults(b)}b.$initParent=e;if(b.isComponent){b.instancedCmp=!0}a[c]=e.lookupComponent(b);delete b.$initParent}}return a},repositionFloatingItems:function(){var b=this.floatingItems,d,c,a;if(b){b=b.items;d=b.length;for(c=0;c<d;c++){a=b[c];if(a.el&&!a.hidden){a.setPosition(a.x,a.y)}}}},initTabGuards:function(i){var a=this,c=a.tabGuardBeforeEl,d=a.tabGuardAfterEl,f=a.tabGuardBeforeIndex||0,e=a.tabGuardAfterIndex||0,h,g,b;if(!a.rendered||!a.tabGuard){return}b=a.el.findTabbableElements({skipSelf:!0});if(b[0]===c.dom){b.shift()}if(b[b.length-1]===d.dom){b.pop()}if(b&&b.length){if(f==null||e==null){for(h=0;h<b.length;h++){g=+b[h].getAttribute('tabIndex');if(g>0){f=Math.min(f,g);e=Math.max(e,g)}}}c.dom.setAttribute('tabIndex',f);d.dom.setAttribute('tabIndex',e)}else {c.dom.removeAttribute('tabIndex');d.dom.removeAttribute('tabIndex')}if(a.onTabGuardFocusEnter){if(!c.hasListeners.focusenter){c.on('focusenter',a.onTabGuardFocusEnter,a)}if(!d.hasListeners.focusenter){d.on('focusenter',a.onTabGuardFocusEnter,a)}}},_noMargin:{'margin-top':'','margin-right':'','margin-bottom':'','margin-left':''},resetItemMargins:function(){var b=this.items.items,c=b.length,d=this._noMargin,a;while(c--){a=b[c];a.margin$=null;a.el.setStyle(d)}},setupRenderTpl:function(a){this.callParent(arguments);this.getLayout().setupRenderTpl(a)}}});Ext.define('Ext.layout.container.boxOverflow.None',{alternateClassName:'Ext.layout.boxOverflow.None',alias:['box.overflow.none','box.overflow.None'],mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:'none'},isBoxOverflowHandler:!0,$configPrefixed:!1,$configStrict:!1,constructor:function(a){this.initConfig(a)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(b){var c=this,d=b.state.boxPlan,a;if(d&&d.tooNarrow){a=c.handleOverflow(b);if(a){if(a.reservedSpace){c.layout.publishInnerCtSize(b,a.reservedSpace)}}}else {c.clearOverflow()}},completeLayout:Ext.emptyFn,finishedLayout:function(e){var b=this,d=b.layout.owner,c,a;if(d.hasListeners.overflowchange){c=d.query('>[hidden]');a=c.length;if(a!==b.lastHiddenCount){d.fireEvent('overflowchange',b.lastHiddenCount,a,c);b.lastHiddenCount=a}}},onRemove:Ext.emptyFn,getItem:function(a){return this.layout.owner.getComponent(a)},getOwnerType:function(b){var a;if(b.isToolbar){a='toolbar'}else {if(b.isTabBar){a='tab-bar'}else {if(b.isMenu){a='menu'}else {if(b.isBreadcrumb){a='breadcrumb'}else {a=b.getXType()}}}}return a},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return ''},setVertical:function(){var b=this,a=b.layout,c=a.innerCt;c.removeCls(b.getOverflowCls(a.oppositeDirection));c.addCls(b.getOverflowCls(a.direction))}});Ext.define('Ext.layout.container.boxOverflow.Scroller',{extend:Ext.layout.container.boxOverflow.None,alternateClassName:'Ext.layout.boxOverflow.Scroller',alias:['box.overflow.scroller','box.overflow.Scroller'],mixins:{observable:Ext.mixin.Observable},animateScroll:!1,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:Ext.baseCSSPrefix+'box-scroller',beforeSuffix:'-before-scroller',afterSuffix:'-after-scroller',constructor:function(b){var a=this;a.mixins.observable.constructor.call(a,b);a.layout.owner.on({afterrender:a.onOwnerRender,scope:a,single:!0});a.layout.owner.getOverflowEl=a.ownerGetOverflowImpl;a.scrollPosition=0;a.scrollSize=0},onOwnerRender:function(c){var a=this,b={isBoxOverflowScroller:!0,x:!1,y:!1,listeners:{scrollend:this.onScrollEnd,scope:this}};if(!Ext.scrollbar.width()&&!Ext.platformTags.desktop){b[c.layout.horizontal?'x':'y']=!0}else {a.wheelListener=a.layout.innerCt.on('wheel',a.onMouseWheel,a,{destroyable:!0})}c.setScrollable(b)},getPrefixConfig:function(){return {role:'presentation',id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls('beforeX'),style:'display:none'}},getSuffixConfig:function(){return {role:'presentation',id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls('afterX'),style:'display:none'}},createScrollerCls:function(g){var c=this,d=c.layout,b=d.owner,e=c.getOwnerType(b),a=c.scrollerCls,f=a+' '+a+'-'+d.names[g]+' '+a+'-'+e+' '+a+'-'+e+'-'+b.ui;if(b.plain){f+=' '+a+'-plain'}return f},getOverflowCls:function(a){return this.scrollerCls+'-body-'+a},beginLayout:function(a){a.innerCtScrollPos=this.getScrollPosition();this.callParent(arguments)},finishedLayout:function(a){var b=this,f=a.state.boxPlan,e=b.layout,d=e.names,g=Math.min(b.getMaxScrollPosition(),a.innerCtScrollPos),c;if(f&&f.tooNarrow){c=a.childItems[a.childItems.length-1].props;b.scrollSize=c[d.x]+c[d.width];b.updateScrollButtons();e.innerCt[d.setScrollLeft](g)}b.callParent([a])},handleOverflow:function(i){var a=this,d=a.layout.names,h=d.getWidth,f=d.parallelMargins,g,e,b,c;a.showScrollers();b=a.getBeforeScroller();c=a.getAfterScroller();g=b[h]()+c[h]()+b.getMargin(f)+c.getMargin(f);e=i.targetContext.getPaddingInfo()[d.width];return {reservedSpace:Math.max(g-e,0)}},getBeforeScroller:function(){var a=this;return a._beforeScroller||(a._beforeScroller=a.createScroller(a.beforeSuffix,'beforeRepeater','scrollLeft'))},getAfterScroller:function(){var a=this;return a._afterScroller||(a._afterScroller=a.createScroller(a.afterSuffix,'afterRepeater','scrollRight'))},createScroller:function(g,f,e){var b=this,d=b.layout.owner,c=b.scrollerCls,a;a=d.el.getById(d.id+g);a.addClsOnOver(c+'-hover');a.addClsOnClick(c+'-pressed');a.setVisibilityMode(Ext.Element.DISPLAY);b[f]=new Ext.util.ClickRepeater(a,{interval:b.scrollRepeatInterval,handler:e,scope:b,mousedownPreventDefault:!0});return a},onMouseWheel:function(a){var c=Ext.Component.from(a.target),b=c.getScrollable&&c.getScrollable();if(!b||b===this.layout.owner.getScrollable()){a.stopEvent();this.scrollBy(this.getWheelDelta(a)*this.wheelIncrement,!1)}},getWheelDelta:function(a){return a.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var a=this;a.getBeforeScroller().show();a.getAfterScroller().show();a.layout.owner.addClsWithUI(a.layout.direction==='vertical'?'vertical-scroller':'scroller')},hideScrollers:function(){var a=this,b=a.getBeforeScroller(),c=a.getAfterScroller();if(b){b.hide();c.hide();a.layout.owner.removeClsWithUI(a.layout.direction==='vertical'?'vertical-scroller':'scroller')}},destroy:function(){Ext.destroyMembers(this,'beforeRepeater','afterRepeater','_beforeScroller','_afterScroller','wheelListener');this.callParent()},scrollBy:function(e,d){var b=this.layout,a=b.owner.getScrollable(),c=[0,0,d?this.getScrollAnim():!1];c[b.horizontal?0:1]=e;a.scrollBy.apply(a,c)},getScrollAnim:function(){return {duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var a=this,c=a.getBeforeScroller(),d=a.getAfterScroller(),e=a.getScrollPosition(),b;if(!c||!d){return}b=a.scrollerCls+'-disabled';c[e?'removeCls':'addCls'](b);d[e>=a.getMaxScrollPosition()?'addCls':'removeCls'](b)},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,!1)},scrollRight:function(){this.scrollBy(this.scrollIncrement,!1)},getScrollPosition:function(){var a=this.layout;return a.owner.getScrollable().getPosition()[a.horizontal?'x':'y']},getMaxScrollPosition:function(){var a=this.layout;return a.owner.getScrollable().getMaxPosition()[a.horizontal?'x':'y']},setVertical:function(){var a=this,d=a.getBeforeScroller(),e=a.getAfterScroller(),c=a.layout.names,b=a.scrollerCls;d.removeCls(b+'-'+c.beforeY);e.removeCls(b+'-'+c.afterY);d.addCls(b+'-'+c.beforeX);e.addCls(b+'-'+c.afterX);a.callParent()},scrollTo:function(d,e){var b=this.layout,a=b.owner.getScrollable(),c=[0,0,e?this.getScrollAnim():!1];c[b.horizontal?0:1]=d;a.scrollTo.apply(a,c)},onScrollEnd:function(c,a,b){this.updateScrollButtons();this.fireEvent('scroll',this,this.layout.horizontal?a:b,!1)},scrollToItem:function(a,b){a=this.getItem(a);if(a!==undefined){this.layout.owner.getScrollable().ensureVisible(a.el,{animation:b})}},privates:{ownerGetOverflowImpl:function(){return this.layout.innerCt}}});Ext.define('Ext.dd.DragDropManager',{singleton:!0,alternateClassName:['Ext.dd.DragDropMgr','Ext.dd.DDM'],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!1,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,notifyOccluded:!1,dragCls:Ext.baseCSSPrefix+'dd-drag-current',currentPoint:new Ext.util.Point(),_execOnAll:function(f,g){var c=this.ids,d,e,b,a;for(d in c){if(c.hasOwnProperty(d)){a=c[d];for(e in a){if(a.hasOwnProperty(e)){b=a[e];if(!this.isTypeOfDD(b)){continue}b[f].apply(b,g)}}}}},addListeners:function(){var a=this;a.init();Ext.getWin().on({unload:a._onUnload,resize:a._onResize,scope:a})},_onResize:function(a){this._execOnAll('resetConstraints',[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:8,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(b,a){if(!this.initialized){this.init()}if(!this.ids[a]){this.ids[a]={}}this.ids[a][b.id]=b},removeDDFromGroup:function(c,b){var a;if(!this.ids[b]){this.ids[b]={}}a=this.ids[b];if(a&&a[c.id]){delete a[c.id]}},_remove:function(b,f){var a=this,d=a.ids,e=b.groups,c;if(a.clearingAll){return}if(a.dragCurrent===b){a.dragCurrent=null}for(c in e){if(e.hasOwnProperty(c)){if(f){delete d[c]}else {if(d[c]){delete d[c][b.id]}}}}delete a.handleIds[b.id];delete a.locationCache[b.id]},regHandle:function(a,b){if(!this.handleIds[a]){this.handleIds[a]={}}this.handleIds[a][b]=b},isDragDrop:function(a){return this.getDDById(a)?!0:!1},getRelated:function(f,e){var b=[],c,d,a;for(c in f.groups){for(d in this.ids[c]){a=this.ids[c][d];if(!this.isTypeOfDD(a)){continue}if(!e||a.isTarget){b[b.length]=a}}}return b},isLegalTarget:function(e,d){var b=this.getRelated(e,!0),a,c;for(a=0,c=b.length;a<c;++a){if(b[a].id===d.id){return !0}}return !1},isTypeOfDD:function(a){return a&&a.__ygDragDrop},isHandle:function(a,b){return this.handleIds[a]&&this.handleIds[a][b]},getDDById:function(d,c){var b,a;for(b in this.ids){a=this.ids[b][d];if(a instanceof Ext.dd.DDTarget||c){return a}}return null},handleMouseDown:function(c,i){var a=this,h=c.getXY(),g=i.getEl(),e={translate:!1,fn:a.handleMouseUp,capture:!1,priority:-1000},d={translate:!1,fn:a.handleMouseMove,capture:!1},b={capture:!0,destroyable:!0,scope:a},f=c.browserEvent.type;b.touchstart=a.handleMouseUp;if(f==='pointerdown'){b.pointerup=e;b.pointermove=d}else {if(f==='MSPointerDown'){b.MSPointerUp=e;b.MSPointerMove=d}else {if(f==='mousedown'){b.mouseup=e;b.mousemove=d}else {b.touchend=e;b.touchmove=d}}}a.pointerMoveListeners=Ext.getDoc().on(b);a.isMouseDown=!0;a.currentPoint.setPosition(h);if(a.dragCurrent){a.handleMouseUp(c)}a.mousedownEvent=c;a.currentTarget=c.getTarget();a.dragCurrent=i;Ext.fly(g).setCapture();a.startX=h[0];a.startY=h[1];a.offsetX=a.offsetY=0;a.deltaX=a.startX-g.offsetLeft;a.deltaY=a.startY-g.offsetTop;a.dragThreshMet=!1},startDrag:function(d,e){var b=this,c=b.dragCurrent,a;Ext.undefer(b.clickTimeout);if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddDisable()}if(c){c.b4StartDrag(d,e);c.startDrag(d,e);a=Ext.fly(c.getDragEl());if(a){a.addCls(b.dragCls);if(a.shim&&a.shim.el){a.shim.el.addCls(b.dragCls)}}}b.dragThreshMet=!0},handleMouseUp:function(b){var a=this;a.pointerMoveListeners.destroy();a.isMouseDown=!1;if(!a.dragCurrent){return}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}Ext.undefer(a.clickTimeout);if(a.dragThreshMet){a.fireEvents(b,!0)}a.stopDrag(b);if(a.dragThreshMet){a.stopEvent(b)}a.mousedownEvent=a.currentTarget=null},stopEvent:function(a){if(this.stopPropagation){a.stopPropagation()}if(this.preventDefault&&a.pointerType==='touch'){a.preventDefault()}},stopDrag:function(d){var a=this,c=a.dragCurrent,b;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddEnable()}if(c){if(a.dragThreshMet){b=Ext.fly(c.getDragEl());if(b){b.removeCls(a.dragCls);if(b.shim&&b.shim.el){b.shim.el.removeCls(a.dragCls)}}c.b4EndDrag(d);c.endDrag(d)}a.dragCurrent.onMouseUp(d)}a.dragCurrent=null;a.dragOvers={}},handleMouseMove:function(b){var a=this,c=a.dragCurrent,d=b.getXY(),g=d[0],h=d[1],e,f;a.offsetX=g-a.startX;a.offsetY=h-a.startY;a.currentPoint.setPosition(d);if(!c){return !0}if(!a.dragThreshMet){e=Math.abs(a.offsetX);f=Math.abs(a.offsetY);if(e>a.clickPixelThresh||f>a.clickPixelThresh){b.claimGesture();a.startDrag(a.startX,a.startY)}}if(a.dragThreshMet){c.b4Drag(b);c.onDrag(b);if(!c.moveOnly){a.fireEvents(b,!1)}}a.stopEvent(b);return !0},fireEvents:function(e,p){var d=this,t=Ext.supports.Touch,c=d.dragCurrent,q=d.currentPoint,j=[],s=[],g=[],i=[],h=[],k=[],o,b,l,r,a,f,n,m;if(!c||c.isLocked()){return}m=!(c.deltaX<0||c.deltaY<0);if(t||!d.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&m){o=c.getDragEl();if(m){o.style.visibility='hidden'}e=e.chain({target:d.elementFromPoint(e.clientX,e.clientY)||document.documentElement});if(m){o.style.visibility='visible'}}for(a in d.dragOvers){b=d.dragOvers[a];delete d.dragOvers[a];if(!d.isTypeOfDD(b)||b.destroyed){continue}if(p){g.push(b)}else {if(d.notifyOccluded){if(!this.isOverTarget(q,b,d.mode)){g.push(b)}}else {if(!e.within(b.getEl())){g.push(b)}}}s[a]=!0}for(n in c.groups){if('string'!==typeof n){continue}for(a in d.ids[n]){b=d.ids[n][a];if(d.isTypeOfDD(b)&&(l=b.getEl())&&b.isTarget&&!b.isLocked()&&Ext.fly(l).isVisible(!0)&&(b!==c||c.ignoreSelf===!1)){if(d.notifyOccluded){if((b.zIndex=d.getZIndex(l))!==-1){r=!0}j.push(b)}else {if(e.within(l)){j.push(b);break}}}}}if(r){Ext.Array.sort(j,d.byZIndex)}for(a=0,f=j.length;a<f;a++){b=j[a];if(d.isOverTarget(q,b,d.mode)){if(p){h.push(b)}else {if(!s[b.id]){k.push(b)}else {i.push(b)}d.dragOvers[b.id]=b}if(!d.notifyOccluded){break}}}if(d.mode){if(k.length){c.onDragEnter(e,k)}if(i.length){c.b4DragOver(e,i);c.onDragOver(e,i)}if(h.length){c.b4DragDrop(e,h);c.onDragDrop(e,h)}if(g.length){c.b4DragOut(e,g);c.onDragOut(e,g)}}else {for(a=0,f=i.length;a<f;++a){c.b4DragOver(e,i[a].id);c.onDragOver(e,i[a].id)}for(a=0,f=h.length;a<f;++a){c.b4DragDrop(e,h[a].id);c.onDragDrop(e,h[a].id)}for(a=0,f=g.length;a<f;++a){c.b4DragOut(e,g[a].id);c.onDragOut(e,g[a].id)}for(a=0,f=k.length;a<f;++a){c.onDragEnter(e,k[a].id)}}if(p&&!h.length){c.onInvalidDrop(e)}},elementFromPoint:function(a,b){if(Ext.rootInheritedState.rtl){a=Ext.Element.getViewportWidth()-a}return Ext.Element.fromPoint(a,b,!0)},getZIndex:function(a){var d=document.body,c,b=-1;a=Ext.getDom(a);while(a!==d){if(!isNaN(c=Number(Ext.fly(a).getStyle('zIndex')))){b=c}a=a.parentNode}return b},byZIndex:function(a,b){return a.zIndex<b.zIndex},getBestMatch:function(d){var a=null,e=d.length,c,b;if(e===1){a=d[0]}else {for(c=0;c<e;++c){b=d[c];if(b.cursorIsOver){a=b;break}else {if(!a||a.overlap.getArea()<b.overlap.getArea()){a=b}}}}return a},refreshCache:function(e){var b,d,a,c;for(b in e){if('string'!==typeof b){continue}for(d in this.ids[b]){a=this.ids[b][d];if(this.isTypeOfDD(a)){c=this.getLocation(a);if(c){this.locationCache[a.id]=c}else {delete this.locationCache[a.id]}}}}},verifyEl:function(a){return Ext.getBody().contains(a)},getLocation:function(a){var c,b,d,f,e,g,k,j,h,i;if(!this.isTypeOfDD(a)){return null}if(a.getRegion){return a.getRegion()}c=a.getEl();try{b=Ext.fly(c).getXY()}catch(l){}if(!b){return null}d=b[0];f=d+c.offsetWidth;e=b[1];g=e+c.offsetHeight;k=e-a.padding[0];j=f+a.padding[1];h=g+a.padding[2];i=d-a.padding[3];return new Ext.util.Region(k,j,h,i)},isOverTarget:function(g,a,i){var c=this.locationCache[a.id],b,d,f,h,e;if(!c||!this.useCache){c=this.getLocation(a);this.locationCache[a.id]=c}if(!c){return !1}a.cursorIsOver=c.contains(g);b=this.dragCurrent;if(!b||!b.getTargetCoord||!i&&!b.constrainX&&!b.constrainY){return a.cursorIsOver}a.overlap=null;d=b.getTargetCoord(g.x,g.y);f=b.getDragEl();h=new Ext.util.Region(d.y,d.x+f.offsetWidth,d.y+f.offsetHeight,d.x);e=h.intersect(c);if(e){a.overlap=e;return i?!0:a.cursorIsOver}else {return !1}},_onUnload:function(b,a){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var a=this,b=a.elementCache,c;if(a.dragCurrent){a.stopDrag();a.dragCurrent=null}a.clearingAll=!0;a._execOnAll('unreg',[]);delete a.clearingAll;for(c in b){delete b[c]}a.elementCache={};a.ids={};a.handleIds={}},elementCache:{},getElWrapper:function(b){var a=this.elementCache[b];if(!a||!a.el){a=this.elementCache[b]=new this.ElementWrapper(Ext.getDom(b))}return a},getElement:function(a){return Ext.getDom(a)},getCss:function(b){var a=Ext.getDom(b);return a?a.style:null},ElementWrapper:function(a){this.el=a||null;this.id=this.el&&a.id;this.css=this.el&&a.style},getPosX:function(a){return Ext.fly(a).getX()},getPosY:function(a){return Ext.fly(a).getY()},swapNode:function(a,b){var c,d;if(a.swapNode){a.swapNode(b)}else {c=b.parentNode;d=b.nextSibling;if(d===a){c.insertBefore(a,b)}else {if(b===a.nextSibling){c.insertBefore(b,a)}else {a.parentNode.replaceChild(b,a);c.insertBefore(a,d)}}}},getScroll:function(){var e=window.document,a=e.documentElement,b=e.body,d=0,c=0;if(a&&(a.scrollTop||a.scrollLeft)){d=a.scrollTop;c=a.scrollLeft}else {if(b){d=b.scrollTop;c=b.scrollLeft}}return {top:d,left:c}},getStyle:function(b,a){return Ext.fly(b).getStyle(a)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(c,a){var b=Ext.fly(a).getXY();Ext.fly(c).setXY(b)},numericSort:function(a,b){return a-b},handleWasClicked:function(b,c){var a;if(this.isHandle(c,b.id)){return !0}else {a=b.parentNode;while(a){if(this.isHandle(c,a.id)){return !0}else {a=a.parentNode}}}return !1}},function(a){Ext.onInternalReady(function(){a.addListeners()})});Ext.define('Ext.resizer.Splitter',{extend:Ext.Component,xtype:'splitter',childEls:['collapseEl'],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',Ext.baseCSSPrefix,'collapse-el ',Ext.baseCSSPrefix,'layout-split-{collapseDir}{childElCls}">','</div>','</tpl>'],isSplitter:!0,baseCls:Ext.baseCSSPrefix+'splitter',collapsedClsInternal:Ext.baseCSSPrefix+'splitter-collapsed',canResize:!0,collapsible:null,collapseOnDblClick:!0,defaultSplitMin:40,defaultSplitMax:1000,collapseTarget:'next',horizontal:!1,vertical:!1,touchAction:undefined,size:5,tracker:null,ariaRole:'separator',focusable:!0,tabIndex:0,applyTouchAction:function(a,b){if(a===undefined){a=this.vertical?{panX:!1}:{panY:!1}}return this.callParent([a,b])},getTrackerConfig:function(){return Ext.apply({xclass:'Ext.resizer.SplitterTracker',el:this.el,splitter:this},this.tracker)},beforeRender:function(){var a=this,c=a.getCollapseTarget(),b=a.collapsible;a.callParent();if(c.collapsed){a.addCls(a.collapsedClsInternal)}if(!a.canResize){a.addCls(a.baseCls+'-noresize')}Ext.applyIf(a.renderData,{collapseDir:a.getCollapseDirection(),collapsible:b!==null?b:c.collapsible});a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-orientation']=a.orientation;a.protoEl.unselectable()},onRender:function(){var a=this,b,c;a.callParent(arguments);if(a.performCollapse!==!1){if(a.renderData.collapsible){a.mon(a.collapseEl,'click',a.toggleTargetCmp,a)}if(a.collapseOnDblClick){a.mon(a.el,'dblclick',a.toggleTargetCmp,a)}}b=a.getCollapseTarget();if(b&&b.isPanel){b.on({collapse:a.onTargetCollapse,expand:a.onTargetExpand,beforeexpand:a.onBeforeTargetExpand,beforecollapse:a.onBeforeTargetCollapse,scope:a})}if(a.canResize){a.tracker=Ext.create(a.getTrackerConfig());a.relayEvents(a.tracker,['beforedragstart','dragstart','dragend'])}c=a.collapseEl;if(c){c.lastCollapseDirCls=a.collapseDirProps[a.collapseDirection].cls}},getCollapseDirection:function(){var b=this,a=b.collapseDirection,c,f,d,e;if(!a){c=b.collapseTarget;if(c.isComponent){a=c.collapseDirection}if(!a){e=b.ownerCt.layout.type;if(c.isComponent){d=b.ownerCt.items;f=Number(d.indexOf(c)===d.indexOf(b)-1)<<1|Number(e==='hbox')}else {f=Number(b.collapseTarget==='prev')<<1|Number(e==='hbox')}a=['bottom','right','top','left'][f]}b.collapseDirection=a}b.setOrientation(a==='top'||a==='bottom'?'horizontal':'vertical');return a},getCollapseTarget:function(){var a=this;return a.collapseTarget.isComponent?a.collapseTarget:a.collapseTarget==='prev'?a.previousSibling():a.nextSibling()},setCollapseEl:function(b){var a=this.collapseEl;if(a){a.setDisplayed(b)}},onBeforeTargetExpand:function(a){this.setCollapseEl('none')},onBeforeTargetCollapse:function(){this.setCollapseEl('none')},onTargetCollapse:function(b){var a=this;if(b===a.getCollapseTarget()&&b[a.orientation==='vertical'?'collapsedHorizontal':'collapsedVertical']()){a.el.addCls(a.collapsedClsInternal+' '+(a.collapsedCls||''))}a.setCollapseEl('')},onTargetExpand:function(b){var a=this;a.el.removeCls(a.collapsedClsInternal+' '+(a.collapsedCls||''));a.setCollapseEl('')},collapseDirProps:{top:{cls:Ext.baseCSSPrefix+'layout-split-top'},right:{cls:Ext.baseCSSPrefix+'layout-split-right'},bottom:{cls:Ext.baseCSSPrefix+'layout-split-bottom'},left:{cls:Ext.baseCSSPrefix+'layout-split-left'}},orientationProps:{horizontal:{opposite:'vertical',fixedAxis:'height',stretchedAxis:'width'},vertical:{opposite:'horizontal',fixedAxis:'width',stretchedAxis:'height'}},applyCollapseDirection:function(){var c=this,a=c.collapseEl,d=c.collapseDirProps[c.collapseDirection],b;if(a){b=a.lastCollapseDirCls;if(b){a.removeCls(b)}a.addCls(a.lastCollapseDirCls=d.cls)}},applyOrientation:function(){var a=this,e=a.orientation,b=a.orientationProps[e],f=a.size,d=b.fixedAxis,c=b.stretchedAxis,g=a.baseCls+'-';a[e]=!0;a[b.opposite]=!1;if(!a.hasOwnProperty(d)||a[d]==='100%'){a[d]=f}if(!a.hasOwnProperty(c)||a[c]===f){a[c]='100%'}a.removeCls(g+b.opposite);a.addCls(g+e)},setOrientation:function(b){var a=this;if(a.orientation!==b){a.orientation=b;a.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(d,e){var a=this.getCollapseTarget(),c=a.placeholder,b;if(Ext.isFunction(a.expand)&&Ext.isFunction(a.collapse)){if(c&&!c.hidden){b=!0}else {b=!a.hidden}if(b){if(a.collapsed||a.floatedFromCollapse){a.expand()}else {if(a.collapseDirection){a.collapse()}else {a.collapse(this.renderData.collapseDir)}}}}},setSize:function(){var a=this;a.callParent(arguments);if(Ext.isIE&&a.el){a.el.repaint()}},doDestroy:function(){Ext.destroy(this.tracker);this.callParent()}});Ext.define('Ext.theme.neptune.resizer.Splitter',{override:'Ext.resizer.Splitter',size:8});Ext.define('Ext.theme.triton.resizer.Splitter',{override:'Ext.resizer.Splitter',size:10});Ext.define('Ext.layout.container.Box',{extend:Ext.layout.container.Container,alternateClassName:'Ext.layout.BoxLayout',alias:'layout.box',type:'box',config:{align:'begin',constrainAlign:!1,enableSplitters:!0,overflowHandler:{$value:null,merge:function(a,b){if(typeof a==='string'){a={type:a}}return Ext.merge(b?Ext.Object.chain(b):{},a)}},padding:0,pack:'start',stretchMaxPartner:undefined,vertical:!1,alignRoundingMethod:'round'},itemCls:Ext.baseCSSPrefix+'box-item',targetCls:Ext.baseCSSPrefix+'box-layout-ct',targetElCls:Ext.baseCSSPrefix+'box-target',innerCls:Ext.baseCSSPrefix+'box-inner',manageMargins:!0,createsInnerCt:!0,childEls:['innerCt','targetEl'],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;'+'if (oh && oh.getPrefixConfig!==Ext.emptyFn) {'+'if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)'+'}%}'+'<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}'+'{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}">'+'<div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">'+'{%this.renderBody(out, values)%}'+'</div>'+'</div>'+'{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {'+'if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)'+'}%}',{disableFormats:!0,definitions:'var dh=Ext.DomHelper;'}],constructor:function(c){var a=this,b;a.callParent([c]);a.setVertical(a.vertical);a.flexSortFn=a.flexSort.bind(a);b=typeof a.padding;if(b==='string'||b==='number'){a.padding=Ext.util.Format.parseBox(a.padding);a.padding.height=a.padding.top+a.padding.bottom;a.padding.width=a.padding.left+a.padding.right}},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(h,b){var a=this,f=a.sizePolicy,g=a.align,p=h.flex,c=g,o=a.names,e=o.height,m=o.width,q=h[m],n=h[e],d=a._percentageRe,i=d.test(q),l=g==='stretch',j=g==='stretchmax',k=a.constrainAlign;if(!b&&(l||p||i||k&&!j)){b=a.owner.getSizeModel()}if(l){if(!d.test(n)&&b[e].shrinkWrap){c='stretchmax'}}else {if(!j){if(d.test(n)){c='stretch'}else {if(k&&!b[e].shrinkWrap){c='stretchmax'}else {c=''}}}}if(p||i){if(!b[m].shrinkWrap){f=f.flex}}return f[c]},flexSort:function(o,p){var k=this.names.maxWidth,l=this.names.minWidth,j=Infinity,c=o.target,d=p.target,m=c.flex,n=d.flex,a=0,g,i,f,h,e,b;f=c[k]||j;h=d[k]||j;g=c[l]||0;i=d[l]||0;e=isFinite(g)||isFinite(i);b=isFinite(f)||isFinite(h);if(e||b){if(b){a=f-h}if(a===0&&e){a=i-g}if(a===0){if(b){a=n-m}else {a=m-n}}}return a},isItemBoxParent:function(a){return !0},isItemShrinkWrap:function(a){return !0},roundFlex:function(a){return Math.floor(a)},beginCollapse:function(a){var b=this;if(b.direction==='vertical'&&a.collapsedVertical()){a.collapseMemento.capture(['flex']);delete a.flex}else {if(b.direction==='horizontal'&&a.collapsedHorizontal()){a.collapseMemento.capture(['flex']);delete a.flex}}},beginExpand:function(a){a.collapseMemento.restore(['flex'])},beginLayout:function(a){var b=this,d=b.owner,c=d.stretchMaxPartner,f=b.innerCt.dom.style,g=b.names,e=b.overflowHandler;a.boxNames=g;if(e){e.beginLayout(a)}if(typeof c==='string'){c=Ext.getCmp(c)||d.query(c)[0]}a.stretchMaxPartner=c&&a.context.getCmp(c);b.callParent([a]);a.innerCtContext=a.getEl('innerCt',b);a.targetElContext=a.getEl('targetEl',b);a.ownerScrollable=d.getScrollable();f.width=f.height=''},beginLayoutCycle:function(a,k){var c=this,i=a.state,e=a.ownerScrollable,b=c.align,f=a.boxNames,d=c.pack,l=c._centerRe,j=c.overflowHandler,m=a.state.canScroll,h,g;if(j){j.beginLayoutCycle(a,k)}c.callParent([a,k]);a.parallelSizeModel=h=a[f.widthModel];a.perpendicularSizeModel=g=a[f.heightModel];a.boxOptions={align:b={stretch:b==='stretch',stretchmax:b==='stretchmax',center:l.test(b),bottom:c._endRe.test(b)},pack:d={center:l.test(d),end:d==='end'}};if(e&&!e.isBoxOverflowScroller){if(!m){i.canScroll={parallel:!h.shrinkWrap&&e[f.getX](),perpendicular:!g.shrinkWrap&&e[f.getY]()}}if(!i.actualScroll){i.actualScroll={parallel:!1,perpendicular:!1}}}if(b.stretch&&g.shrinkWrap){b.stretchmax=!0;b.stretch=!1}b.nostretch=!(b.stretch||b.stretchmax);if(h.shrinkWrap){d.center=d.end=!1}c.cacheFlexes(a);c.targetEl.setWidth(20000)},cacheFlexes:function(a){var u=this,d=a.boxNames,x=d.widthModel,w=d.heightModel,z=a.boxOptions.align.nostretch,s=0,r=a.childItems,v=r.length,h=[],t=0,g=0,o=0,p=d.minWidth,y=d.minHeight,q=u._percentageRe,n=0,m=0,b,c,l,f,i,j,k,e;while(v--){c=r[v];b=c.target;j=c[x];if(j.calculated){c.flex=l=b.flex;if(l){s+=l;h.push(c);t+=b[p]||0}else {if(f=q.exec(b[d.width])){c.percentageParallel=parseFloat(f[1])/100;++n}}}if(j.configured){k=b[d.width]}else {k=b[p]||0}o+=k;i=c[w];if(z&&i.calculated){f=q.exec(b[d.height]);c.percentagePerpendicular=parseFloat(f[1])/100;++m}if(i.configured){e=b[d.height]}else {e=b[y]||0}if(e>g){g=e}}a.flexedItems=h;a.flexedMinWidth=t;a.smallestWidth=o;a.smallestHeight=g;a.totalFlex=s;a.percentageWidths=n;a.percentageHeights=m;Ext.Array.sort(h,u.flexSortFn)},calculate:function(b){var c=this,f=b.boxNames,a=b.state,h=a.actualScroll,g=a.needsScroll,e=a.canScroll,d=a.boxPlan||(a.boxPlan={}),i=c.overflowHandler;d.targetSize=c.getContainerSize(b);if(e&&!g){a.needsScroll=g={parallel:e.parallel&&d.targetSize[f.width]<b.smallestWidth,perpendicular:e.perpendicular&&d.targetSize[f.height]<b.smallestHeight}}if(!a.parallelDone){a.parallelDone=c.calculateParallel(b,f,d)}if(!a.perpendicularDone){a.perpendicularDone=c.calculatePerpendicular(b,f,d)}if(a.parallelDone&&a.perpendicularDone){if(e&&!a.scrollPass){if(g.parallel!==h.parallel||g.perpendicular!==h.perpendicular){b.invalidate({state:{scrollPass:!0,canScroll:e,needsScroll:h}});c.done=!1;return}}c.publishInnerCtSize(b);if(c.done&&b.boxOptions.align.stretchmax&&!a.stretchMaxDone){c.calculateStretchMax(b,f,d);a.stretchMaxDone=!0}if(i){i.calculate(b)}}else {c.done=!1}},calculateParallel:function(c,d,p){var H=this,s=c.parallelSizeModel.shrinkWrap,m=d.width,o=c.childItems,A=d.beforeX,C=d.afterX,z=d.setWidth,q=o.length,B=c.flexedItems,I=B.length,G=c.boxOptions.pack,F=H.padding,D=p.targetSize,x=D[m],v=c.state,n=v.needsScroll,E=v.canScroll,u=0,e=F[A],h=e+F[C],y=Ext.scrollbar.size(),K=y[d.width],J=y[d.height],b,k,f,t,a,w,l,g,i,r,j;if(!s&&!D[d.gotWidth]){return !1}for(b=0;b<q;++b){a=o[b];k=a.marginInfo||a.getMarginInfo();u+=k[m];if(!a[d.widthModel].calculated){i=a.getProp(m);h+=i;if(isNaN(h)){return !1}}}h+=u;if(c.percentageWidths){r=x-u;if(isNaN(r)){return !1}for(b=0;b<q;++b){a=o[b];if(a.percentageParallel){i=Math.ceil(r*a.percentageParallel);i=a[z](i);h+=i}}}if(s){j=0;p.tooNarrow=!1}else {j=x-h;if(n&&n.perpendicular){j-=J}p.tooNarrow=j<c.flexedMinWidth;if(p.tooNarrow&&E&&E.parallel){v.actualScroll.parallel=!0}}g=h;f=j;t=c.totalFlex;for(b=0;b<I;b++){a=B[b];w=a.flex;l=H.roundFlex(w/t*f);l=a[z](l);g+=l;f=Math.max(0,f-l);t-=w}if(G.center){e+=f/2;if(e<0){e=0}}else {if(G.end){e+=f}}for(b=0;b<q;++b){a=o[b];k=a.marginInfo;e+=k[A];a.setProp(d.x,e);e+=k[C]+a.props[m]}g+=c.targetContext.getPaddingInfo()[m];c.state.contentWidth=g;if(n&&n.perpendicular){if(s){g+=K}c[d.hasOverflowY]=!0;c.target.componentLayout[d.setWidthInDom]=!0;c[d.invalidateScrollY]=Ext.isIE8}c[d.setContentWidth](g);return !0},calculatePerpendicular:function(c,d,C){var l=this,A=c.state,H=A.needsScroll,I=A.canScroll,h=c.perpendicularSizeModel.shrinkWrap,w=C.targetSize,v=c.childItems,F=v.length,o=Math.max,e=d.height,u=d.setHeight,G=d.beforeY,N=d.y,K=l.padding,D=K[G],j=w[e]-D-K[d.afterY],r=c.boxOptions.align,x=r.stretch,O=r.stretchmax,z=r.center,y=r.bottom,J=l.constrainAlign,b=0,E=0,L=l.onBeforeConstrainInvalidateChild,M=l.onAfterConstrainInvalidateChild,q=Ext.scrollbar.height(),n,k,g,i,B,f,a,p,t,s,m;if(!h&&!w[d.gotHeight]){return !1}if(x||(z||y)&&!h){if(isNaN(j)){return !1}}if(H&&H.parallel){if(h){s=!0}else {j-=q;C.targetSize[e]-=q}}if(x){f=j;b=o(f,c.smallestHeight)}else {for(k=0;k<F;k++){a=v[k];i=(a.marginInfo||a.getMarginInfo())[e];if(!(m=a.percentagePerpendicular)){g=a.getProp(e)}else {++E;if(h){continue}else {g=m*j-i;g=a[u](g)}}if(!h&&J&&a[d.heightModel].shrinkWrap&&g>j){a.invalidate({before:L,after:M,layout:l,childHeight:j,names:d});c.state.parallelDone=!1}if(isNaN(b=o(b,g+i,a.target[d.minHeight]||0))){return !1}}}if(s){b+=q;c[d.hasOverflowX]=!0;c.target.componentLayout[d.setHeightInDom]=!0;c[d.invalidateScrollX]=Ext.isIE8}p=c.stretchMaxPartner;if(p){c.setProp('maxChildHeight',b);t=p.childItems;if(t&&t.length){b=o(b,p.getProp('maxChildHeight'));if(isNaN(b)){return !1}}}c[d.setContentHeight](b+l.padding[e]+c.targetContext.getPaddingInfo()[e]);if(s){b-=q}if(b>w[e]&&I&&I.perpendicular){A.actualScroll.perpendicular=!0}C.maxSize=b;if(O){f=b}else {if(z||y||E){if(J){f=h?b:j}else {f=h?b:o(j,b)}f-=c.innerCtContext.getBorderInfo()[e]}}for(k=0;k<F;k++){a=v[k];i=a.marginInfo||a.getMarginInfo();n=D+i[G];if(x){a[u](f-i[e])}else {m=a.percentagePerpendicular;if(h&&m){i=a.marginInfo||a.getMarginInfo();g=m*f-i[e];g=a[u](g)}if(z){B=f-a.props[e];if(B>0){n=D+Math[l.alignRoundingMethod](B/2)}}else {if(y){n=o(0,f-n-a.props[e])}}}a.setProp(N,n)}return !0},onBeforeConstrainInvalidateChild:function(b,c){var a=c.names.heightModel;if(!b[a].constrainedMin){b[a]=Ext.layout.SizeModel.calculated}},onAfterConstrainInvalidateChild:function(a,c){var b=c.names;a.setProp(b.beforeY,0);if(a[b.heightModel].calculated){a[b.setHeight](c.childHeight)}},calculateStretchMax:function(k,c,o){var f=this,h=c.height,l=c.width,g=k.childItems,n=g.length,m=o.maxSize,i=f.onBeforeStretchMaxInvalidateChild,j=f.onAfterStretchMaxInvalidateChild,a,b,d,e;for(d=0;d<n;++d){a=g[d];b=a.props;e=m-a.getMarginInfo()[h];if(e!==b[h]||a[c.heightModel].constrained){a.invalidate({before:i,after:j,layout:f,childWidth:b[l],childHeight:e,childX:b.x,childY:b.y,names:c})}}},onBeforeStretchMaxInvalidateChild:function(b,c){var a=c.names.heightModel;if(!b[a].constrainedMax){b[a]=Ext.layout.SizeModel.calculated}},onAfterStretchMaxInvalidateChild:function(a,b){var c=b.names,d=b.childHeight,e=b.childWidth;a.setProp('x',b.childX);a.setProp('y',b.childY);if(a[c.heightModel].calculated){a[c.setHeight](d)}if(a[c.widthModel].calculated){a[c.setWidth](e)}},completeLayout:function(g){var j=this,b=g.invalidateScrollX,c=g.invalidateScrollY,i=j.overflowHandler,h,f,d,e,a;if(i){i.completeLayout(g)}if(b||c){f=j.getTarget();h=f.dom;a=h.style;if(b){d=f.getStyle('overflowX');if(d==='auto'){d=a.overflowX;a.overflowX='scroll'}else {b=!1}}if(c){e=f.getStyle('overflowY');if(e==='auto'){e=a.overflowY;a.overflowY='scroll'}else {c=!1}}if(b||c){h.scrollWidth;if(b){a.overflowX=d}if(c){a.overflowY=e}}}},finishedLayout:function(b){var a=this.overflowHandler;if(a){a.finishedLayout(b)}this.callParent([b])},getLayoutItems:function(){var h=this.callParent(),i=h.length,e,c,g,f,b,d,a;for(g=0;g<i;++g){if((f=h[g]).isSplitter){continue}a=f.splitter;if(f.hidden){if(a){if(!a.hidden){a.hidden=!0;if(a.el){a.el.hide()}}}continue}if(a){d=a.collapseTarget==='next'}else {d=!1}c=null;if(e&&b){if(b.hidden){b.hidden=!1;if(b.el){b.el.show()}}if(d){c=!0}}else {if(d){c=!e}}if(c!==null&&a.hidden!==c){a.hidden=c;if(a.el){a.el.setVisible(!c)}}b=!d&&a;e=f}if(e&&b&&!b.hidden){b.hidden=!0;if(b.el){b.el.hide()}}return h},insertSplitter:function(c,e,d,a){var b={xtype:'splitter',id:c.id+'-splitter',hidden:d,splitterFor:c,synthetic:!0},f=e+(a.collapseTarget==='prev'?1:0);b[this.names.height]='100%';if(a){Ext.apply(b,a)}c.splitter=this.owner.add(f,b)},publishInnerCtSize:function(a,f){var h=this,g=a.state,d=a.boxNames,m=d.height,j=d.width,k=a.boxOptions.align,o=h.padding,e=g.boxPlan,n=e.targetSize,p=e.maxSize,l=g.needsScroll,i=a.innerCtContext,c,b;f=f||0;if(a.parallelSizeModel.shrinkWrap||e.tooNarrow&&g.canScroll){c=g.contentWidth-a.targetContext.getPaddingInfo()[j]}else {c=n[j];if(l&&l.perpendicular){c-=Ext.scrollbar.size()[j]}}c-=f;h.owner.tooNarrow=e.tooNarrow;if(k.stretch){b=p}else {b=e.maxSize+o[d.beforeY]+o[d.afterY]+i.getBorderInfo()[m];if(!a.perpendicularSizeModel.shrinkWrap&&(k.center||k.bottom)){b=Math.max(n[m],b)}}i[d.setWidth](c);i[d.setHeight](b);a.targetElContext.setWidth(a.innerCtContext.props.width-(h.vertical?0:f||0));if(isNaN(c+b)){h.done=!1}},onAdd:function(b,d){var c=this,a=c.enableSplitters&&!b.isButton&&b.split;c.callParent([b,d]);if(a){if(a===!0){a={collapseTarget:'next'}}else {if(Ext.isString(a)){a={collapseTarget:a==='before'?'next':'prev'}}else {a=Ext.apply({collapseTarget:a.side==='before'?'next':'prev'},a)}}c.insertSplitter(b,d,!!b.hidden,a)}},onRemove:function(a,g){var c=this,h=c.names,e=c.owner,d=a.splitter,f=c.overflowHandler,b;c.callParent([a,g]);if(d&&e.contains(d)){e.doRemove(d,!0);a.splitter=null}if(f){f.onRemove(a)}if(a.layoutMarginCap===c.id){delete a.layoutMarginCap}if(!e.destroying&&!g&&a.rendered){b=a.getEl();if(b){b.setStyle(h.beforeY,'');b.setStyle(h.beforeX,'');b.setStyle('margin','')}}},applyOverflowHandler:function(a,b){if(typeof a==='string'){a={type:a}}if(b&&b.type===a.type){delete a.type;b.setConfig(a);return b}a.layout=this;return Ext.Factory.boxOverflow(a)},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var a=this;Ext.destroy(a.innerCt,a.overflowHandler);a.flexSortFn=a.innerCt=null;a.callParent()},getRenderData:function(){var a=this.callParent();a.targetElCls=this.targetElCls;return a},updateVertical:function(c){var a=this,b=a.overflowHandler,d=a.owner,e=a._props;Ext.apply(a,c?e.vbox:e.hbox);if(b&&d&&d.rendered){b.setVertical(c)}},_props:{'hbox':{direction:'horizontal',oppositeDirection:'vertical',horizontal:!0,vertical:!1,names:{beforeX:'left',beforeScrollX:'left',leftCap:'Left',afterX:'right',width:'width',contentWidth:'contentWidth',minWidth:'minWidth',maxWidth:'maxWidth',widthCap:'Width',widthModel:'widthModel',widthIndex:0,x:'x',getX:'getX',setX:'setX',scrollLeft:'scrollLeft',overflowX:'overflowX',hasOverflowX:'hasOverflowX',invalidateScrollX:'invalidateScrollX',parallelMargins:'lr',center:'middle',beforeY:'top',afterY:'bottom',height:'height',contentHeight:'contentHeight',minHeight:'minHeight',maxHeight:'maxHeight',heightCap:'Height',heightModel:'heightModel',heightIndex:1,y:'y',getY:'getY',setY:'setY',overflowY:'overflowY',hasOverflowY:'hasOverflowY',invalidateScrollY:'invalidateScrollY',perpendicularMargins:'tb',getWidth:'getWidth',getHeight:'getHeight',setWidth:'setWidth',setHeight:'setHeight',gotWidth:'gotWidth',gotHeight:'gotHeight',setContentWidth:'setContentWidth',setContentHeight:'setContentHeight',setWidthInDom:'setWidthInDom',setHeightInDom:'setHeightInDom',getScrollLeft:'getScrollLeft',setScrollLeft:'setScrollLeft',scrollTo:'scrollTo'},sizePolicy:{flex:{'':{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},'':{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},'vbox':{direction:'vertical',oppositeDirection:'horizontal',horizontal:!1,vertical:!0,names:{beforeX:'top',beforeScrollX:'top',leftCap:'Top',afterX:'bottom',width:'height',contentWidth:'contentHeight',minWidth:'minHeight',maxWidth:'maxHeight',widthCap:'Height',widthModel:'heightModel',widthIndex:1,x:'y',getX:'getY',setX:'setY',scrollLeft:'scrollTop',overflowX:'overflowY',hasOverflowX:'hasOverflowY',invalidateScrollX:'invalidateScrollY',parallelMargins:'tb',center:'center',beforeY:'left',afterY:'right',height:'width',contentHeight:'contentWidth',minHeight:'minWidth',maxHeight:'maxWidth',heightCap:'Width',heightModel:'widthModel',heightIndex:0,y:'x',getY:'getX',setY:'setX',overflowY:'overflowX',hasOverflowY:'hasOverflowX',invalidateScrollY:'invalidateScrollX',perpendicularMargins:'lr',getWidth:'getHeight',getHeight:'getWidth',setWidth:'setHeight',setHeight:'setWidth',gotWidth:'gotHeight',gotHeight:'gotWidth',setContentWidth:'setContentHeight',setContentHeight:'setContentWidth',setWidthInDom:'setHeightInDom',setHeightInDom:'setWidthInDom',getScrollLeft:'getScrollTop',setScrollLeft:'setScrollTop',scrollTo:'scrollTo'},sizePolicy:{flex:{'':{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},'':{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}});Ext.define('Ext.layout.container.HBox',{extend:Ext.layout.container.Box,alias:'layout.hbox',alternateClassName:'Ext.layout.HBoxLayout',type:'hbox',vertical:!1});Ext.define('Ext.layout.container.VBox',{extend:Ext.layout.container.Box,alias:'layout.vbox',alternateClassName:'Ext.layout.VBoxLayout',type:'vbox',vertical:!0});Ext.define('Ext.toolbar.Toolbar',{extend:Ext.container.Container,alias:'widget.toolbar',alternateClassName:'Ext.Toolbar',isToolbar:!0,baseCls:Ext.baseCSSPrefix+'toolbar',ariaRole:'toolbar',focusableContainer:!0,defaultType:'button',layout:undefined,vertical:undefined,enableOverflow:!1,overflowHandler:null,defaultButtonUI:'default-toolbar',defaultFieldUI:'default',defaultFooterButtonUI:'default',defaultFooterFieldUI:'default',trackMenus:!0,itemCls:Ext.baseCSSPrefix+'toolbar-item',statics:{shortcuts:{'-':'tbseparator',' ':'tbspacer'},shortcutsHV:{0:{'->':{xtype:'tbfill',height:0}},1:{'->':{xtype:'tbfill',width:0}}}},initComponent:function(){var a=this,b=a.layout,c=a.vertical;if(c===undefined){a.vertical=c=a.dock==='right'||a.dock==='left'}a.layout=b=Ext.applyIf(Ext.isString(b)?{type:b}:b||{},{type:c?'vbox':'hbox',align:c?'stretchmax':'middle'});if(a.overflowHandler){b.overflowHandler=a.overflowHandler}else {if(a.enableOverflow){b.overflowHandler='menu'}}if(c){a.addClsWithUI('vertical')}if(a.ui==='footer'){a.ignoreBorderManagement=!0}a.callParent()},afterFirstLayout:function(d,c){var a=this,b=a.layout.getRenderTarget().dom;a.callParent([d,c]);if(a.trackMenus){a.addPlugin({ptype:'mouseenter',element:b,delegate:function(a){return a.parentNode===b},handler:a.onItemOver,scope:a})}},getRefItems:function(d){var b=this,c=b.callParent(arguments),e=b.layout,a;if(d&&(b.enableOverflow||b.overflowHandler==='menu')){a=e.overflowHandler;if(a&&a.menu){c=c.concat(a.menu.getRefItems(d))}}return c},lookupComponent:function(a){var d=arguments,b,c;if(typeof a==='string'&&a[0]!=='@'){c=Ext.toolbar.Toolbar;b=c.shortcutsHV[this.vertical?1:0][a]||c.shortcuts[a];if(typeof b==='string'){a={xtype:b}}else {if(b){a=Ext.apply({},b)}else {a={xtype:'tbtext',text:a}}}this.applyDefaults(a);d=[a]}return this.callParent(d)},onBeforeAdd:function(a){var b=this,d=b.ui==='footer',c=d?b.defaultFooterButtonUI:b.defaultButtonUI;if(a.isSegmentedButton){if(a.getDefaultUI()==='default'&&!a.config.hasOwnProperty('defaultUI')){a.setDefaultUI(c)}}else {if(a.ui==='default'&&!a.hasOwnProperty('ui')){if(a.isButton){a.ui=c}else {if(a.isFormField){a.ui=d?b.defaultFooterFieldUI:b.defaultFieldUI}}}}if(a instanceof Ext.toolbar.Separator){a.setUI(b.vertical?'vertical':'horizontal')}b.callParent(arguments)},onAdd:function(b){var a=this;if(b.needArrowKeys&&a.focusableContainer&&!a.hasOwnProperty('focusableContainer')){a.focusableContainer=!1;a.ariaRole='group'}a.callParent(arguments);a.trackMenu(b)},onRemove:function(a){this.callParent(arguments);this.trackMenu(a,!0)},privates:{applyDefaults:function(a){if(!Ext.isString(a)){a=this.callParent(arguments)}return a},trackMenu:function(b,c){var a=this;if(b.menu){b[c?'un':'on']({menushow:a.onButtonMenuShow,menuhide:a.onButtonMenuHide,scope:a})}},getChildItemsToDisable:function(){return this.items.getRange()},onItemOver:function(d,c){var a=Ext.Component.from(c),b=this.activeMenuBtn;if(b&&b!==a&&a.showMenu&&a.menu){a.focus();a.showMenu(d)}},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){this.activeMenuBtn=null}}});Ext.define('Ext.theme.neptune.toolbar.Toolbar',{override:'Ext.toolbar.Toolbar',usePlainButtons:!1,border:!1});Ext.define('Ext.toolbar.Item',{extend:Ext.Component,alias:'widget.tbitem',alternateClassName:'Ext.Toolbar.Item',enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.define('Ext.toolbar.TextItem',{extend:Ext.toolbar.Item,alias:'widget.tbtext',alternateClassName:'Ext.Toolbar.TextItem',text:'',baseCls:Ext.baseCSSPrefix+'toolbar-text',ariaRole:null,beforeRender:function(){var a=this.text;this.callParent();if(a){this.html=a}},setText:function(a){this.update(a)}});Ext.define('Ext.form.trigger.Spinner',{extend:Ext.form.trigger.Trigger,alias:'trigger.spinner',cls:Ext.baseCSSPrefix+'form-trigger-spinner',spinnerCls:Ext.baseCSSPrefix+'form-spinner',spinnerUpCls:Ext.baseCSSPrefix+'form-spinner-up',spinnerDownCls:Ext.baseCSSPrefix+'form-spinner-down',focusCls:Ext.baseCSSPrefix+'form-spinner-focus',overCls:Ext.baseCSSPrefix+'form-spinner-over',clickCls:Ext.baseCSSPrefix+'form-spinner-click',focusFieldOnClick:!0,vertical:!0,bodyTpl:'<tpl if="vertical">'+'<div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui}'+' {childElCls} {upDisabledCls}"></div>'+'</tpl>'+'<div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui}'+' {childElCls} {downDisabledCls}"></div>'+'<tpl if="!vertical">'+'<div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui}'+' {childElCls} {upDisabledCls}"></div>'+'</tpl>',destroy:function(){var a=this;if(a.spinnerEl){a.spinnerEl.destroy();a.spinnerEl=a.upEl=a.downEl=null}a.callParent()},getBodyRenderData:function(){var a=this;return {vertical:a.vertical,upDisabledCls:a.upEnabled?'':a.spinnerUpCls+'-disabled',downDisabledCls:a.downEnabled?'':a.spinnerDownCls+'-disabled',spinnerCls:a.spinnerCls,spinnerUpCls:a.spinnerUpCls,spinnerDownCls:a.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(){var a=this,d=arguments,c=a.clickRepeater?d[1]:d[0],b=a.field;if(!b.readOnly&&!b.disabled){if(a.upEl.contains(c.target)){Ext.callback(a.upHandler,a.scope,[b,a,c],0,b)}else {if(a.downEl.contains(c.target)){Ext.callback(a.downHandler,a.scope,[b,a,c],0,b)}}}b.inputEl.focus()},onFieldRender:function(){var a=this,d=a.vertical,c,b;a.callParent();c=a.spinnerEl=a.el.select('.'+a.spinnerCls,!0);b=c.elements;a.upEl=d?b[0]:b[1];a.downEl=d?b[1]:b[0]},setUpEnabled:function(a){this.upEl[a?'removeCls':'addCls'](this.spinnerUpCls+'-disabled')},setDownEnabled:function(a){this.downEl[a?'removeCls':'addCls'](this.spinnerDownCls+'-disabled')}});Ext.define('Ext.form.field.Spinner',{extend:Ext.form.field.Text,alias:'widget.spinnerfield',alternateClassName:'Ext.form.Spinner',config:{triggers:{spinner:{type:'spinner',upHandler:'onSpinnerUpClick',downHandler:'onSpinnerDownClick',endHandler:'onSpinEnd',scope:'this'}}},spinUpEnabled:!0,spinDownEnabled:!0,keyNavEnabled:!0,mouseWheelEnabled:!0,repeatTriggerClick:!0,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:'spinbutton',applyTriggers:function(c){var a=this,b=c.spinner;b.upEnabled=a.spinUpEnabled;b.downEnabled=a.spinDownEnabled;return a.callParent([c])},onRender:function(){var a=this,b=a.getTrigger('spinner');a.callParent();if(a.keyNavEnabled){a.spinnerKeyNav=new Ext.util.KeyNav({target:a.inputEl,scope:a,up:a.spinUp,down:a.spinDown});a.inputEl.on({keyup:a.onInputElKeyUp,scope:a})}if(a.mouseWheelEnabled){a.mon(a.bodyEl,'wheel',a.onMouseWheel,a)}a.spinUpEl=b.upEl;a.spinDownEl=b.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var a=this;if(a.spinUpEnabled&&!a.disabled){a.fireEvent('spin',a,'up');a.fireEvent('spinup',a);a.onSpinUp()}},spinDown:function(){var a=this;if(a.spinDownEnabled&&!a.disabled){a.fireEvent('spin',a,'down');a.fireEvent('spindown',a);a.onSpinDown()}},setSpinUpEnabled:function(b){var a=this,c=a.spinUpEnabled;a.spinUpEnabled=b;if(c!==b&&a.rendered){a.getTrigger('spinner').setUpEnabled(b)}},setSpinDownEnabled:function(b){var a=this,c=a.spinDownEnabled;a.spinDownEnabled=b;if(c!==b&&a.rendered){a.getTrigger('spinner').setDownEnabled(b)}},onMouseWheel:function(c){var a=this,b;if(a.hasFocus){b=c.getWheelDelta();if(b>0){a.spinDown()}else {if(b<0){a.spinUp()}}c.stopEvent();a.onSpinEnd()}},onInputElKeyUp:function(a){if(a.keyCode===a.UP||a.keyCode===a.DOWN){this.onSpinEnd()}},doDestroy:function(){Ext.destroyMembers(this,'spinnerKeyNav');this.callParent()}},function(a){var b=function(){if(!this.destroying&&!this.destroyed){this.fireEvent('spinend',this)}};a.prototype.onSpinEnd=Ext.Function.createBuffered(b,100)});Ext.define('Ext.form.field.Number',{extend:Ext.form.field.Spinner,alias:'widget.numberfield',alternateClassName:['Ext.form.NumberField','Ext.form.Number'],allowExponential:!0,allowDecimals:!0,decimalSeparator:null,submitLocaleSeparator:!0,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:'The minimum value for this field is {0}',maxText:'The maximum value for this field is {0}',nanText:'{0} is not a valid number',negativeText:'The value cannot be negative',baseChars:'0123456789',autoStripChars:!1,initComponent:function(){var a=this;if(a.decimalSeparator===null){a.decimalSeparator=Ext.util.Format.decimalSeparator}a.callParent();a.setMinValue(a.minValue);a.setMaxValue(a.maxValue)},getSubTplData:function(g){var c=this,f=c.minValue,e=c.maxValue,d,a,b;d=c.callParent([g]);a=d.inputElAriaAttributes;if(a){if(f>Number.NEGATIVE_INFINITY){a['aria-valuemin']=f}if(e<Number.MAX_VALUE){a['aria-valuemax']=e}b=c.getValue();if(b!=null&&b>=f&&b<=e){a['aria-valuenow']=b}}return d},setValue:function(d){var a=this,c,b;if(a.hasFocus){c=a.getBind();b=c&&c.value;if(b&&b.syncing&&d===a.value){return a}}return a.callParent([d])},getErrors:function(b){b=arguments.length>0?b:this.processRawValue(this.getRawValue());var a=this,c=a.callParent([b]),e=Ext.String.format,d;if(b.length<1){return c}b=String(b).replace(a.decimalSeparator,'.');if(isNaN(b)){c.push(e(a.nanText,b))}d=a.parseValue(b);if(a.minValue===0&&d<0){c.push(this.negativeText)}else {if(d<a.minValue){c.push(e(a.minText,a.minValue))}}if(d>a.maxValue){c.push(e(a.maxText,a.maxValue))}return c},rawToValue:function(b){var a=this.fixPrecision(this.parseValue(b));if(a===null){a=b||null}return a},valueToRaw:function(a){var b=this,c=b.decimalSeparator;a=b.parseValue(a);a=b.fixPrecision(a);a=Ext.isNumber(a)?a:parseFloat(String(a).replace(c,'.'));a=isNaN(a)?'':String(a).replace('.',c);return a},getSubmitValue:function(){var b=this,a=b.callParent();if(!b.submitLocaleSeparator){a=a.replace(b.decimalSeparator,'.')}return a},onChange:function(a){var b=this.ariaEl.dom;this.toggleSpinners();this.callParent(arguments);if(b){if(Ext.isNumber(a)&&isFinite(a)){b.setAttribute('aria-valuenow',a)}else {b.removeAttribute('aria-valuenow')}}},toggleSpinners:function(){var a=this,c=a.getValue(),d=c===null,b;if(a.spinUpEnabled||a.spinUpDisabledByToggle){b=d||c<a.maxValue;a.setSpinUpEnabled(b,!0)}if(a.spinDownEnabled||a.spinDownDisabledByToggle){b=d||c>a.minValue;a.setSpinDownEnabled(b,!0)}},setMinValue:function(e){var a=this,d=a.ariaEl.dom,c,b;a.minValue=c=Ext.Number.from(e,Number.NEGATIVE_INFINITY);a.toggleSpinners();if(d){if(c>Number.NEGATIVE_INFINITY){d.setAttribute('aria-valuemin',c)}else {d.removeAttribute('aria-valuemin')}}if(a.disableKeyFilter!==!0){b=a.baseChars+'';if(a.allowExponential){b+=a.decimalSeparator+'e+-'}else {if(a.allowDecimals){b+=a.decimalSeparator}if(a.minValue<0){b+='-'}}b=Ext.String.escapeRegex(b);a.maskRe=new RegExp('['+b+']');if(a.autoStripChars){a.stripCharsRe=new RegExp('[^'+b+']','gi')}}},setMaxValue:function(c){var b=this.ariaEl.dom,a;this.maxValue=a=Ext.Number.from(c,Number.MAX_VALUE);if(b){if(a<Number.MAX_VALUE){b.setAttribute('aria-valuemax',a)}else {b.removeAttribute('aria-valuemax')}}this.toggleSpinners()},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,'.'));return isNaN(a)?null:a},fixPrecision:function(a){var d=this,c=isNaN(a),b=d.decimalPrecision;if(c||!a){return c?'':a}else {if(!d.allowDecimals||b<=0){b=0}}return parseFloat(Ext.Number.toFixed(parseFloat(a),b))},onBlur:function(c){var a=this,b=a.rawToValue(a.getRawValue());if(!Ext.isEmpty(b)){a.setValue(b)}a.callParent([c])},setSpinUpEnabled:function(b,a){this.callParent(arguments);if(!a){delete this.spinUpDisabledByToggle}else {this.spinUpDisabledByToggle=!b}},onSpinUp:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()+a.step,a.minValue,a.maxValue))}},setSpinDownEnabled:function(b,a){this.callParent(arguments);if(!a){delete this.spinDownDisabledByToggle}else {this.spinDownDisabledByToggle=!b}},onSpinDown:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()-a.step,a.minValue,a.maxValue))}},setSpinValue:function(b){var a=this;if(a.enforceMaxLength){if(a.fixPrecision(b).toString().length>a.maxLength){return}}a.setValue(b)}});Ext.define('Ext.toolbar.Paging',{extend:Ext.toolbar.Toolbar,xtype:'pagingtoolbar',alternateClassName:'Ext.PagingToolbar',mixins:[Ext.util.StoreHolder],displayInfo:!1,prependButtons:!1,displayMsg:'Displaying {0} - {1} of {2}',emptyMsg:'No data to display',beforePageText:'Page',afterPageText:'of {0}',firstText:'First Page',prevText:'Previous Page',nextText:'Next Page',lastText:'Last Page',refreshText:'Refresh',inputItemWidth:30,emptyPageData:{total:0,currentPage:0,pageCount:0,toRecord:0,fromRecord:0},defaultBindProperty:'store',_pagingToolbarCls:Ext.baseCSSPrefix+'grid-paging-toolbar',getPagingItems:function(){var a=this,b={scope:a,blur:a.onPagingBlur};b[Ext.supports.SpecialKeyDownRepeat?'keydown':'keypress']=a.onPagingKeyDown;return [{itemId:'first',tooltip:a.firstText,overflowText:a.firstText,iconCls:Ext.baseCSSPrefix+'tbar-page-first',disabled:!0,handler:a.moveFirst,scope:a},{itemId:'prev',tooltip:a.prevText,overflowText:a.prevText,iconCls:Ext.baseCSSPrefix+'tbar-page-prev',disabled:!0,handler:a.movePrevious,scope:a},'-',a.beforePageText,{xtype:'numberfield',itemId:'inputItem',name:'inputItem',cls:Ext.baseCSSPrefix+'tbar-page-number',allowDecimals:!1,minValue:1,hideTrigger:!0,enableKeyEvents:!0,keyNavEnabled:!1,selectOnFocus:!0,submitValue:!1,isFormField:!1,width:a.inputItemWidth,margin:'-1 2 3 2',listeners:b},{xtype:'tbtext',itemId:'afterTextItem',html:Ext.String.format(a.afterPageText,1)},'-',{itemId:'next',tooltip:a.nextText,overflowText:a.nextText,iconCls:Ext.baseCSSPrefix+'tbar-page-next',disabled:!0,handler:a.moveNext,scope:a},{itemId:'last',tooltip:a.lastText,overflowText:a.lastText,iconCls:Ext.baseCSSPrefix+'tbar-page-last',disabled:!0,handler:a.moveLast,scope:a},'-',{itemId:'refresh',tooltip:a.refreshText,overflowText:a.refreshText,iconCls:Ext.baseCSSPrefix+'tbar-loading',disabled:a.store.isLoading(),handler:a.doRefresh,scope:a}]},initComponent:function(){var a=this,c=a.items||a.buttons||[],b;a.bindStore(a.store||'ext-empty-store',!0);b=a.getPagingItems();if(a.prependButtons){a.items=c.concat(b)}else {a.items=b.concat(c)}delete a.buttons;if(a.displayInfo){a.items.push('->');a.items.push({xtype:'tbtext',itemId:'displayItem'})}a.callParent()},beforeRender:function(){this.callParent(arguments);this.updateBarInfo()},afterRender:function(){this.callParent();this.el.addCls(this._pagingToolbarCls)},onAdded:function(c){var a=this,f=a.store,d=a._autoStore,b,e;if(d===undefined){a._autoStore=d=!(f&&!f.isEmptyStore)}if(d){b=a._storeChangeListener;if(b){b.destroy();b=null}e=c&&c.store;if(e){b=c.on({destroyable:!0,scope:a,storechange:'onOwnerStoreChange'})}a._storeChangeListener=b;a.onOwnerStoreChange(c,e)}a.callParent(arguments)},onOwnerStoreChange:function(b,a){this.setStore(a||Ext.getStore('ext-empty-store'))},updateBarInfo:function(){var a=this;if(!a.store.isLoading()){a.calledInternal=!0;a.onLoad();a.calledInternal=!1}},updateInfo:function(){var a=this,d=a.child('#displayItem'),f=a.store,b=a.getPageData(),e,c;if(d){e=f.getCount();if(e===0){c=a.emptyMsg}else {c=Ext.String.format(a.displayMsg,b.fromRecord,b.toRecord,b.total)}d.setText(c)}},onLoad:function(){var a=this,f,c,b,g,h,d,e;h=a.store.getCount();d=h===0;if(!d){f=a.getPageData();c=f.currentPage;b=f.pageCount;if(c>b){if(b>0){a.store.loadPage(b)}else {a.getInputItem().reset()}return}g=Ext.String.format(a.afterPageText,isNaN(b)?1:b)}else {c=0;b=0;g=Ext.String.format(a.afterPageText,0)}Ext.suspendLayouts();e=a.child('#afterTextItem');if(e){e.update(g)}e=a.getInputItem();if(e){e.setDisabled(d).setValue(c)}a.setChildDisabled('#first',c===1||d);a.setChildDisabled('#prev',c===1||d);a.setChildDisabled('#next',c===b||d);a.setChildDisabled('#last',c===b||d);a.setChildDisabled('#refresh',!1);a.updateInfo();Ext.resumeLayouts(!0);if(!a.calledInternal){a.fireEvent('change',a,f||a.emptyPageData)}},setChildDisabled:function(c,b){var a=this.child(c);if(a){a.setDisabled(b)}},getPageData:function(){var a=this.store,b=a.getTotalCount(),c=Math.ceil(b/a.pageSize),d=Math.min(a.currentPage*a.pageSize,b);return {total:b,currentPage:a.currentPage,pageCount:Ext.Number.isFinite(c)?c:1,fromRecord:(a.currentPage-1)*a.pageSize+1,toRecord:d||b}},onLoadError:function(){this.setChildDisabled('#refresh',!1)},getInputItem:function(){return this.child('#inputItem')},readPageFromInput:function(d){var a=this.getInputItem(),b=!1,c;if(a){c=a.getValue();b=parseInt(c,10);if(!c||isNaN(b)){a.setValue(d.currentPage);return !1}}return b},onPagingBlur:function(c){var a=this.getInputItem(),b;if(a){b=this.getPageData().currentPage;a.setValue(b)}},onPagingKeyDown:function(a,b){this.processKeyEvent(a,b)},processKeyEvent:function(g,b){var e=this,c=b.getKey(),d=e.getPageData(),f=b.shiftKey?10:1,a;if(c===b.RETURN){b.stopEvent();a=e.readPageFromInput(d);if(a!==!1){a=Math.min(Math.max(1,a),d.pageCount);if(a!==d.currentPage&&e.fireEvent('beforechange',e,a)!==!1){e.store.loadPage(a)}}}else {if(c===b.HOME||c===b.END){b.stopEvent();a=c===b.HOME?1:d.pageCount;g.setValue(a)}else {if(c===b.UP||c===b.PAGE_UP||c===b.DOWN||c===b.PAGE_DOWN){b.stopEvent();a=e.readPageFromInput(d);if(a){if(c===b.DOWN||c===b.PAGE_DOWN){f*=-1}a+=f;if(a>=1&&a<=d.pageCount){g.setValue(a)}}}}}},beforeLoad:function(){this.setChildDisabled('#refresh',!0)},moveFirst:function(){if(this.fireEvent('beforechange',this,1)!==!1){this.store.loadPage(1);return !0}return !1},movePrevious:function(){var a=this,b=a.store,c=b.currentPage-1;if(c>0){if(a.fireEvent('beforechange',a,c)!==!1){b.previousPage();return !0}}return !1},moveNext:function(){var a=this,b=a.store,d=a.getPageData().pageCount,c=b.currentPage+1;if(c<=d){if(a.fireEvent('beforechange',a,c)!==!1){b.nextPage();return !0}}return !1},moveLast:function(){var a=this,b=a.getPageData().pageCount;if(a.fireEvent('beforechange',a,b)!==!1){a.store.loadPage(b);return !0}return !1},doRefresh:function(){var a=this,c=a.store,b=c.currentPage;if(a.fireEvent('beforechange',a,b)!==!1){c.loadPage(b);return !0}return !1},getStoreListeners:function(){return {beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onBindStore:function(){if(this.rendered){this.updateBarInfo()}},doDestroy:function(){var a=this,b=a._storeChangeListener;if(b){b.destroy();a._storeChangeListener=null}a.bindStore(null);a.callParent()}});Ext.define('Ext.theme.neptune.toolbar.Paging',{override:'Ext.toolbar.Paging',defaultButtonUI:'plain-toolbar',inputItemWidth:40});Ext.define('Ext.theme.triton.toolbar.Paging',{override:'Ext.toolbar.Paging',inputItemWidth:50});Ext.define('Ext.view.BoundList',{extend:Ext.view.View,alias:'widget.boundlist',alternateClassName:'Ext.BoundList',mixins:[Ext.mixin.Queryable],pageSize:0,baseCls:Ext.baseCSSPrefix+'boundlist',itemCls:Ext.baseCSSPrefix+'boundlist-item',listItemCls:'',shadow:!1,trackOver:!0,preserveScrollOnRefresh:!0,enableInitialSelection:!1,refreshSelmodelOnRefresh:!0,componentLayout:'boundlist',navigationModel:'boundlist',scrollable:!0,ariaEl:'listEl',tabIndex:-1,childEls:['listWrap','listEl'],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap"',' class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="',Ext.baseCSSPrefix,'list-plain"','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>','>','</ul>','</div>','{%','var pagingToolbar=values.$comp.pagingToolbar;','if (pagingToolbar) {','Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);','}','%}',{disableFormats:!0}],focusOnToFront:!1,alignOnScroll:!1,initComponent:function(){var a=this,b=a.baseCls,c=a.itemCls;a.selectedItemCls=b+'-selected';if(a.trackOver){a.overItemCls=b+'-item-over'}a.itemSelector='.'+c;if(a.floating){a.addCls(b+'-floating')}if(!a.tpl){a.generateTpl()}else {if(!a.tpl.isTemplate){a.tpl=new Ext.XTemplate(a.tpl)}}if(a.pageSize){a.pagingToolbar=a.createPagingToolbar()}a.callParent()},generateTpl:function(){var a=this;a.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+a.itemCls+'">'+a.getInnerTpl(a.displayField)+'</li>','</tpl>')},setDisplayField:function(a){this.displayField=a;this.generateTpl()},getRefOwner:function(){return this.pickerField||this.callParent()},getRefItems:function(){var b=this.callParent(),a=this.pagingToolbar;if(a){b.push(a)}return b},createPagingToolbar:function(){var a=this;return new Ext.toolbar.Paging({id:a.id+'-paging-toolbar',pageSize:a.pageSize,store:a.dataSource,border:!1,ownerCt:a,ownerLayout:a.getComponentLayout()})},refresh:function(){var a=this,b=a.tpl;b.field=a.pickerField;b.store=a.store;a.callParent();b.field=b.store=null;if(!a.ariaStaticRoles[a.ariaRole]){a.refreshAriaAttributes()}},refreshAriaAttributes:function(){var a=this,d=a.store,k=a.getSelectionModel(),i,f,g,c,b,j,e,h;f=d.isFiltered()?d.getCount():d.getTotalCount()||d.getCount();g=a.getNodes();i=a.pickerField&&a.pickerField.multiSelect;for(e=0,h=g.length;e<h;e++){c=g[e];b=null;if(f!==h){b=a.getRecord(c);j=d.indexOf(b);c.setAttribute('aria-setsize',f);c.setAttribute('aria-posinset',j)}if(i){b=b||a.getRecord(c);c.setAttribute('aria-selected',k.isSelected(b))}}},bindStore:function(c,b){var a=this.pagingToolbar;this.callParent(arguments);if(a){a.bindStore(c,b)}},getInnerTpl:function(a){return '{'+a+'}'},onShow:function(){var a=this.pickerField;this.callParent();if(a&&a.rendered&&!a.hasFocus&&!Ext.isTouchMode()){a.focus()}},afterComponentLayout:function(e,d,c,b){var a=this.pickerField;this.callParent([e,d,c,b]);if(a&&a.alignPicker){a.alignPicker()}},onItemSelect:function(c){var b=this,a;a=b.callParent([c]);if(a){if(b.ariaSelectable){a.setAttribute('aria-selected','true')}else {a.removeAttribute('aria-selected')}}return a},onItemDeselect:function(c){var b=this,a;a=b.callParent([c]);if(a&&b.ariaSelectable){if(b.pickerField&&b.pickerField.multiSelect){a.setAttribute('aria-selected','false')}else {a.removeAttribute('aria-selected')}}return a},onItemClick:function(e){var d=this,b=d.pickerField,c,a;if(!b){return}c=b.valueField;a=d.getSelectionModel().getSelection();if(!b.multiSelect&&a.length){a=a[0];if(a&&b.isEqual(e.get(c),a.get(c))&&b.collapse){b.collapse()}}},onContainerClick:function(c){var a=this.pagingToolbar,b;if(a&&a.rendered&&c.within(a.el)){return !1}if(Ext.isIE10||Ext.isIE11){b=this.listWrap.getClientRegion();if(!c.getPoint().isContainedBy(b)){return !1}}},doDestroy:function(){this.pagingToolbar=Ext.destroy(this.pagingToolbar);this.callParent()},privates:{getNodeContainer:function(){return this.listEl},getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var a=this.pagingToolbar;this.callParent(arguments);if(a){a.finishRender()}}}});Ext.define('Ext.form.field.ComboBox',{extend:Ext.form.field.Picker,alternateClassName:'Ext.form.ComboBox',alias:['widget.combobox','widget.combo'],mixins:[Ext.util.StoreHolder],config:{filters:null,selection:null,valueNotFoundText:null,displayTpl:null,delimiter:', ',displayField:'text'},publishes:['selection'],twoWayBindable:['selection'],triggerCls:Ext.baseCSSPrefix+'form-arrow-trigger',hiddenName:'',collapseOnSelect:!1,hiddenDataCls:Ext.baseCSSPrefix+'hidden-display '+Ext.baseCSSPrefix+'form-data-hidden',ariaRole:'combobox',autoDestroyBoundStore:!0,childEls:{'hiddenDataEl':!0},filtered:!1,afterRender:function(){var a=this;a.callParent(arguments);a.setHiddenValue(a.value)},multiSelect:!1,triggerAction:'all',allQuery:'',queryParam:'query',queryMode:'remote',queryCaching:!0,autoLoadOnValue:!1,pageSize:0,anyMatch:!1,caseSensitive:!1,autoSelectMatches:!0,autoSelect:!0,autoSelectLast:!0,typeAhead:!1,typeAheadDelay:250,selectOnTab:!0,forceSelection:!1,growToLongestValue:!0,clearFilterOnBlur:!0,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:'sides'},transformInPlace:!0,clearValueOnEmpty:!0,newlineRe:/\r?\n/g,getGrowWidth:function(){var a=this,i=a.inputEl.dom.value,h,e,g,c,b,f,d;if(a.growToLongestValue){h=a.displayField;e=a.store;g=e.data.length;c=0;for(b=0;b<g;b++){f=e.getAt(b).data[h];d=f.length;if(d>c){c=d;i=f}}}return i},initComponent:function(){var a=this,d=Ext.isDefined,f=a.store,e=a.transform,b,c;if('pinList' in a){a.collapseOnSelect=!a.pinList}if(e){b=Ext.getDom(e);if(b){if(!a.store){f=Ext.Array.map(Ext.Array.from(b.options),function(a){return [a.value,a.text]})}if(!a.name){a.name=b.name}if(!('value' in a)){a.value=b.value}}}if(!a.displayTpl||a.displayTpl.auto){a.setDisplayTpl(!1)}a.bindStore(f||'ext-empty-store',!0,!0);c=a.queryMode==='local';if(!d(a.queryDelay)){a.queryDelay=c?10:500}if(!d(a.minChars)){a.minChars=c?0:4}a.callParent();a.doQueryTask=new Ext.util.DelayedTask(a.doRawQuery,a);if(b){if(a.transformInPlace){a.render(b.parentNode,b);delete a.renderTo}Ext.removeNode(b)}},initEvents:function(){var a=this;a.callParent();a.altArrowKeyNav=new Ext.util.KeyNav({target:a.inputEl,forceKeyDown:!0,priority:1002,scope:a,down:{alt:!0,handler:a.onAltDownArrow},up:{alt:!0,handler:a.onAltUpArrow}})},getSubTplData:function(e){var b=this,d=b.id,c,a;c=b.callParent([e]);if(!b.ariaStaticRoles[b.ariaRole]){a=c.ariaElAttributes;if(a){a['aria-owns']=d+'-inputEl '+d+'-picker-listEl';a['aria-autocomplete']='list'}}return c},getSubTplMarkup:function(c){var a=this,b='',d=a.callParent(arguments);if(a.hiddenName){b='<div id="'+c.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+a.hiddenDataCls+'" role="presentation"></div>'}return b+d},applyDisplayTpl:function(a){var b=this;if(!a){a=new Ext.XTemplate('<tpl for=".">'+'{[typeof values === "string" ? values : values["'+b.getDisplayField()+'"]]}'+'<tpl if="xindex < xcount">'+b.getDelimiter()+'</tpl>'+'</tpl>');a.auto=!0}else {if(!a.isTemplate){a=new Ext.XTemplate(a)}}return a},applyFilters:function(b,a){var c=this;if(b===null||b.isFilterCollection){return b}if(b){if(!a){a=this.getFilters()}a.beginUpdate();a.splice(0,a.length,b);a.each(function(d){d.ownerId=c.id});a.endUpdate()}return a},applyValueNotFoundText:function(d){var b=this,e=b.getDisplayField(),c=b.valueField,a=b.valueNotFoundRecord;if(!a){a=b.valueNotFoundRecord=new Ext.data.Model()}a.set(e,d);if(c&&e!==c){a.set(c,d)}return d},updateDisplayField:function(b){var a=this;if(b&&a.displayTpl&&a.displayTpl.auto){a.setDisplayTpl(!1);a.setRawValue(a.getDisplayValue())}},getFilters:function(b){var a=this.filters;if(!a&&b!==!1){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},updateFilters:function(a,c){var b=this;if(c){c.un('endupdate','onEndUpdateFilters',b)}if(a){a.on('endupdate','onEndUpdateFilters',b)}b.onEndUpdateFilters(a)},onEndUpdateFilters:function(a){var b=this,f=b.filtered,e=!!a&&a.length>0,d,c;if(f||e){b.filtered=e;d=[];c=b.store.getFilters();c.each(function(c){if(c.ownerId===b.id&&!a.contains(c)){d.push(c)}});c.splice(0,d,a.items)}},clearLocalFilter:function(){var a=this,b=a.queryFilter;if(b){a.queryFilter=null;a.changingFilters=!0;a.store.removeFilter(b,!0);a.changingFilters=!1}},completeEdit:function(b){var a=this;this.callParent([b]);a.doQueryTask.cancel();a.assertValue();if(a.queryFilter&&a.queryMode==='local'&&a.clearFilterOnBlur){a.clearLocalFilter()}},onFocus:function(b){var a=this;if(Ext.isTouchMode()){a.getPicker().getEl().focus()}a.callParent([b]);if(a.triggerAction!=='all'&&a.queryFilter&&a.queryMode==='local'&&a.clearFilterOnBlur){delete a.lastQuery;a.doRawQuery()}},onAltDownArrow:function(a){a.stopEvent();if(!this.isExpanded){this.onDownArrow(a)}return !1},onAltUpArrow:function(a){a.stopEvent();if(this.isExpanded){this.onEsc(a)}return !1},assertValue:function(){var a=this,e=a.getRawValue(),d=a.getDisplayValue(),c=a.lastSelectedRecords,g=!1,h=!1,f,b;if(a.forceSelection){if(a.multiSelect){if(e!==d){a.setRawValue(d)}}else {b=a.findRecordByDisplay(e);if(!b){if(a.displayTplData&&a.displayTplData.length){b=a.findRecordByValue(a.displayTplData[0][a.valueField])}if(!b&&c&&(!a.allowBlank||a.rawValue)){b=c[0];h=!0}}else {if(a.getDisplayValue([a.getRecordDisplayData(b)])===d){b=null;g=!0}}if(b){if(h||!(c&&c[0]===b)){a.select(b,!0);a.fireEvent('select',a,b)}}else {if(!g){if(c){delete a.lastSelectedRecords}a.setRawValue('')}}}}else {if((f=a.getValue())&&f==e){b=a.findRecordByDisplay(f);if(b&&b!==(c&&c[0])){a.select(b,!0);a.fireEvent('select',a,b)}}}a.collapse()},onTypeAhead:function(){var a=this,d=a.displayField,e=a.store.findRecord(d,a.getRawValue()),b,f,c;if(e){b=e.get(d);f=b.length;c=a.getRawValue().length;if(c!==0&&c!==f){a.lastMutatedValue=b;a.setRawValue(b);a.selectText(c,b.length)}}},resetToDefault:Ext.emptyFn,beforeReset:function(){this.callParent();this.clearLocalFilter()},onUnbindStore:function(){var a=this,b=a.picker;if(a.queryFilter&&!a.store.destroyed){a.clearLocalFilter()}if(b){b.bindStore(null)}a.pickerSelectionModel.destroy()},onBindStore:function(b,f){var a=this,d=a.picker,c,e;if(b){if(b.autoCreated){a.queryMode='local';a.valueField=a.displayField='field1';if(!b.expanded){a.displayField='field2'}if(a.getDisplayTpl().auto){a.setDisplayTpl(null)}}if(!Ext.isDefined(a.valueField)){a.valueField=a.displayField}c={byValue:{rootProperty:'data',unique:!1}};c.byValue.property=a.valueField;b.setExtraKeys(c);if(a.displayField===a.valueField){b.byText=b.byValue}else {c.byText={rootProperty:'data',unique:!1};c.byText.property=a.displayField;b.setExtraKeys(c)}e={rootProperty:'data',extraKeys:{byInternalId:{property:'internalId'},byValue:{property:a.valueField,rootProperty:'data'}},listeners:{beginupdate:a.onValueCollectionBeginUpdate,endupdate:a.onValueCollectionEndUpdate,scope:a}};a.valueCollection=new Ext.util.Collection(e);a.pickerSelectionModel=new Ext.selection.DataViewModel({mode:a.multiSelect?'SIMPLE':'SINGLE',ordered:!0,deselectOnContainerClick:!1,enableInitialSelection:!1,pruneRemoved:!1,selected:a.valueCollection,store:b,listeners:{scope:a,lastselectedchanged:a.updateBindSelection}});if(!f){a.resetToDefault()}if(d){a.pickerSelectionModel.on({scope:a,beforeselect:a.onBeforeSelect,beforedeselect:a.onBeforeDeselect});d.setSelectionModel(a.pickerSelectionModel);if(d.getStore()!==b){d.bindStore(b)}}}},bindStore:function(a,e,c){var b=this,d=b.queryFilter;b.mixins.storeholder.bindStore.call(b,a,c);a=b.getStore();if(a&&d&&!e){a.getFilters().add(d)}if(!c&&a&&!a.isEmptyStore){b.setValueOnData()}},getStoreListeners:function(c){var a=this,b;if(!c.isEmptyStore){b={datachanged:a.onDataChanged,load:a.onLoad,exception:a.onException,update:a.onStoreUpdate,remove:a.checkValueOnChange};if(!c.getRemoteFilter()){b.filterchange=a.checkValueOnChange}return b}},onDataChanged:function(){if(this.grow&&this.growToLongestValue){this.autoSize()}},checkValueOnChange:function(){var a=this;if(!a.destroying&&a.getStore().isLoaded()){if(a.multiSelect){}else {if(a.forceSelection&&!a.changingFilters&&!a.findRecordByValue(a.value)){if(a.queryMode!=='local'&&(a.hasFocus||a.isPaging)){return}a.setValue(null)}}}},onStoreUpdate:function(b,a){this.updateValue()},onException:function(){this.isPaging=!1;this.collapse()},onLoad:function(b,e,d){var a=this,c=!a.valueCollection.byValue.get(a.value);if(d&&c&&!a.isPaging&&!(b.lastOptions&&'rawQuery' in b.lastOptions)){a.setValueOnData()}a.checkValueOnChange();a.isPaging=!1},setValueOnData:function(){var a=this;a.setValue(a.value);if(a.isExpanded&&a.getStore().getCount()){a.doAutoSelect()}},doRawQuery:function(){var a=this,b=a.inputEl.dom.value;if(a.multiSelect){b=b.split(a.delimiter).pop()}a.doQuery(b,!1,!0)},doQuery:function(d,e,f){var a=this,h=a.getStore(),g=h.getFilters(),b=a.beforeQuery({lastQuery:a.lastQuery||'',query:d||'',rawQuery:f,forceAll:e,combo:a,cancel:!1}),c;if(b!==!1&&!b.cancel){c=!!d&&(!a.queryFilter||a.queryFilter&&g.indexOf(a.queryFilter)<0);if(a.queryCaching&&!c&&b.query===a.lastQuery){a.getPicker().refresh();a.expand();a.afterQuery(b)}else {a.lastQuery=b.query;if(a.queryMode==='local'){a.doLocalQuery(b)}else {a.doRemoteQuery(b)}}return !0}else {a.startCheckChangeTask()}return !1},beforeQuery:function(a){var b=this;if(b.fireEvent('beforequery',a)===!1){a.cancel=!0}else {if(!a.cancel){if(a.query.length<b.minChars&&!a.forceAll){a.cancel=!0}}}return a},doLocalQuery:function(d){var a=this,c=d.query,f=a.getStore(),b=c,e;a.clearLocalFilter();if(c){if(a.enableRegEx){try{b=new RegExp(b)}catch(g){b=null}}if(b!==null){a.changingFilters=!0;e=a.queryFilter=new Ext.util.Filter({id:a.id+'-filter',anyMatch:a.anyMatch,caseSensitive:a.caseSensitive,root:'data',property:a.displayField,value:b});f.addFilter(e,!0);a.changingFilters=!1}}if(a.store.getCount()||a.getPicker().emptyText){a.getPicker().refresh();a.expand()}else {a.collapse()}a.afterQuery(d)},doRemoteQuery:function(b){var a=this,c=function(){if(!a.destroyed){a.afterQuery(b)}};a.expand();if(a.pageSize){a.loadPage(1,{rawQuery:b.rawQuery,callback:c})}else {a.store.load({params:a.getParams(b.query),rawQuery:b.rawQuery,callback:c})}},afterQuery:function(b){var a=this;if(a.store.getCount()){if(a.typeAhead){a.doTypeAhead(b)}if(b.rawQuery){if(a.autoSelectMatches&&a.picker&&b.query){a.doAutoSelectMatch(b.query)}else {if(a.picker&&!a.picker.getSelectionModel().hasSelection()){a.doAutoSelect()}}}else {a.doAutoSelect()}}a.startCheckChangeTask()},loadPage:function(b,a){this.isPaging=!0;this.store.loadPage(b,Ext.apply({params:this.getParams(this.lastQuery)},a))},onPageChange:function(b,a){this.loadPage(a);return !1},getParams:function(c){var a={},b=this.queryParam;if(b){a[b]=c}return a},doAutoSelect:function(){var b=this,f=b.store,d=b.picker,e=0,c,a;if(d&&b.autoSelect&&f.getCount()>0){if(b.autoSelectLast){c=d.getSelectionModel();a=c.lastSelected;if(a&&c.selected.length&&f.indexOf(a)>-1){e=a}}d.getNavigationModel().setPosition(e)}},doAutoSelectMatch:function(f){var b=this,l=b.store,h=b.picker,i=b.autoSelectMatches,j=b.getDisplayField(),e=0,a,g,d,k=typeof f==='string'?f.toLowerCase():f,c=Number.MAX_SAFE_INTEGER;if(h&&b.autoSelect&&i){l.each(function(h,b){a=h.get(j);d=typeof a;g=d==='string'?a.toLowerCase():a;if(g===k){e=b;return !1}else {if(d==='string'&&a.length<c){c=a.length;e=b}else {if(d==='number'&&a<c){c=a;e=b}}}})}h.getNavigationModel().setPosition(e)},doTypeAhead:function(b){var a=this;if(!a.typeAheadTask){a.typeAheadTask=new Ext.util.DelayedTask(a.onTypeAhead,a)}if(b.query.length>b.lastQuery.length||!Ext.String.startsWith(b.lastQuery,b.query)){a.typeAheadTask.delay(a.typeAheadDelay)}},onTriggerClick:function(e,d,b){var a=this,c;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse();if(b&&b.pointerType!=='mouse'){d.getEl().focus()}}else {if(b&&b.type==='keydown'&&b.altKey){c=a.autoSelect;a.autoSelect=!1;a.expand();a.autoSelect=c}else {if(a.triggerAction==='all'){a.doQuery(a.allQuery,!0)}else {if(a.triggerAction==='last'){a.doQuery(a.lastQuery,!0)}else {a.doQuery(a.getRawValue(),!1,!0)}}}}}},onFieldMutation:function(b){var a=this,c=b.getKey(),d=c===b.BACKSPACE||c===b.DELETE,e=a.inputEl.dom.value,f=e.length;if(!a.readOnly&&(e!==a.lastMutatedValue||d)&&c!==b.TAB){a.lastMutatedValue=e;a.refreshEmptyText();if(f&&(b.type!=='keyup'||(!b.isSpecialKey()||d))){a.doQueryTask.delay(a.queryDelay)}else {if(!f&&(!c||d)){++a.suspendCheckChange;if(!a.multiSelect){a.value=null;a.displayTplData=undefined}if(a.clearValueOnEmpty){a.valueCollection.beginUpdate();a.pickerSelectionModel.deselectAll();a.valueCollection.removeAll();a.valueCollection.endUpdate()}a.collapse();if(a.queryFilter){a.clearLocalFilter()}a.lastQuery=null;--a.suspendCheckChange}a.callParent([b])}}},doDestroy:function(){var a=this;a.doQueryTask.cancel();if(a.typeAheadTask){a.typeAheadTask.cancel();a.typeAheadTask=null}a.bindStore(null);Ext.destroy(a.altArrowKeyNav,a.valueCollection);a.callParent()},onAdded:function(){var a=this;a.callParent(arguments);if(a.picker){a.picker.ownerCt=a.up('[floating]');a.picker.registerWithOwnerCt()}},createPicker:function(){var a=this,b,c=Ext.apply({xtype:'boundlist',id:a.id+'-picker',pickerField:a,selectionModel:a.pickerSelectionModel,floating:!0,hidden:!0,store:a.getPickerStore(),displayField:a.displayField,preserveScrollOnRefresh:!0,pageSize:a.pageSize,tpl:a.tpl,ariaSelectable:a.ariaSelectable},a.listConfig,a.defaultListConfig);b=a.picker=Ext.widget(c);if(a.pageSize){b.pagingToolbar.on('beforechange',a.onPageChange,a)}if(!b.initialConfig.maxHeight){b.on({beforeshow:a.onBeforePickerShow,scope:a})}b.getSelectionModel().on({beforeselect:a.onBeforeSelect,beforedeselect:a.onBeforeDeselect,focuschange:a.onFocusChange,scope:a});b.getNavigationModel().navigateOnSpace=!1;return b},getPickerStore:function(){return this.store},onBeforePickerShow:function(d){var b=this,a=b.getPosition()[1]-Ext.getBody().getScroll().top,c=Ext.Element.getViewportHeight()-a-b.getHeight();d.maxHeight=Math.max(a,c)-5},onBeforeSelect:function(c,b,a){return this.fireEvent('beforeselect',this,b,a)},onBeforeDeselect:function(c,b,a){return this.fireEvent('beforedeselect',this,b,a)},onFocusChange:function(f,e,b){var d=this.picker,c=this.inputEl,a;if(b){a=d.getNodeByRecord(b);if(a){if(!a.id){a.id=Ext.id()}c.dom.setAttribute('aria-activedescendant',a.id)}else {c.dom.removeAttribute('aria-activedescendant')}}},getSelection:function(){var a=this.getPicker().getSelectionModel(),b=a.getSelection();return b.length?a.getLastSelected():null},updateSelection:function(c){var a=this,b;if(!a.ignoreNextSelection){a.ignoreNextSelection=!0;b=a.getPicker().getSelectionModel();if(c){b.select(c);a.hasHadSelection=!0}else {b.deselectAll()}a.ignoreNextSelection=!1}},updateBindSelection:function(d,c){var a=this,b=null;if(!a.ignoreNextSelection){a.ignoreNextSelection=!0;if(c.length){b=d.getLastSelected();a.hasHadSelection=!0}if(a.hasHadSelection){a.setSelection(b)}a.ignoreNextSelection=!1}},onValueCollectionBeginUpdate:Ext.emptyFn,onValueCollectionEndUpdate:function(){var a=this,e=a.store,b=a.valueCollection.getRange(),c=b[0],d=b.length;a.updateBindSelection(a.pickerSelectionModel,b);if(a.isSelectionUpdating()){return}Ext.suspendLayouts();a.lastSelection=b;if(d){a.lastSelectedRecords=b}a.updateValue();if(d&&(!a.multiSelect&&e.contains(c)||a.collapseOnSelect||!e.getCount())){a.updatingValue=!0;a.collapse();a.updatingValue=!1}Ext.resumeLayouts(!0);if(!a.suspendCheckChange){if(!a.multiSelect){b=c}a.fireEvent('select',a,b)}},isSelectionUpdating:function(){var a=this.pickerSelectionModel;return a.deselectingDuringSelect||a.refreshing},onExpand:function(){var b=this,d=b.getPicker(),c=d.getNavigationModel(),a;if(c){c.enable()}b.doAutoSelect();a=d.highlightedItem;if(a){if(!a.id){a.id=Ext.id()}b.inputEl.dom.setAttribute('aria-activedescendant',a.id)}},onCollapse:function(){var a=this,b=a.getPicker().getNavigationModel();if(b){b.disable()}if(a.updatingValue){a.doQueryTask.cancel()}a.inputEl.dom.removeAttribute('aria-activedescendant')},select:function(b,e){var a=this,d=a.picker,c;if(b&&b.isModel&&e===!0&&d){c=!d.getSelectionModel().isSelected(b)}if(!c){a.suspendEvent('select')}a.setValue(b);a.resumeEvent('select')},findRecord:function(c,d){var b=this.store,a=b.findExact(c,d);return a!==-1?b.getAt(a):!1},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(c){var a=this.store.byValue.get(c),b=!1;if(a){b=a[0]||a}return b},findRecordByDisplay:function(c){var a=this.store.byText.get(c),b=!1;if(a){b=a[0]||a}return b},addValue:function(a){if(a!=null){return this.doSetValue(a,!0)}},setValue:function(b){var a=this,d,c;if(!a.getDisplayField()&&!a.getDisplayTpl()){}if(a.hasFocus){d=a.getBind();c=d&&d.value;if(c&&c.syncing){if(Ext.isEmpty(b)&&Ext.isEmpty(a.value)||b===a.value){return a}else {if(Ext.isArray(b)&&Ext.isArray(a.value)&&Ext.Array.equals(b,a.value)){return a}}}}else {a.lastSelectedRecords=null}if(b!=null){a.doSetValue(b)}else {a.suspendEvent('select');a.valueCollection.beginUpdate();a.pickerSelectionModel.deselectAll();a.valueCollection.endUpdate();a.resumeEvent('select')}return a},setRawValue:function(a){this.callParent([a]);this.lastMutatedValue=a},doSetValue:function(c,t){var a=this,i=a.getStore(),y=i.getModel(),g=[],x=[],v=a.autoLoadOnValue,q=i.getCount()>0||i.isLoaded(),p=i.hasPendingLoad(),s=v&&!q&&!p,w=a.forceSelection,r=a.pickerSelectionModel,j=a.displayField,d=a.valueField,n=j===d,m=i.isEmptyStore,o=a.lastSelection,e,l,b,h,k,u,f;if(p||s||!q||m){if(!c.isModel){if(t){a.value=Ext.Array.from(a.value).concat(c)}else {a.value=c}a.setHiddenValue(a.value);a.setRawValue(n?c:'');if(n&&!Ext.isEmpty(c)&&a.inputEl&&a.emptyText){a.inputEl.removeCls(a.emptyUICls)}}if(s&&!m){i.load()}if(!c.isModel||m){return a}}c=t?Ext.Array.from(a.value).concat(c):Ext.Array.from(c);for(e=0,l=c.length;e<l;e++){b=f=c[e];if(!b||!b.isModel){b=a.findRecordByValue(u=b);if(!b){b=a.valueCollection.find(d,u)}}if(!b){if(!w){if(!b&&f){h={};if(Ext.isObject(f)){h[j]=f[j];h[d]=f[d]}else {h[j]=f;if(d&&j!==d){h[d]=f}}b=new y(h)}}else {if(a.valueNotFoundRecord){b=a.valueNotFoundRecord}}}if(b){g.push(b);x.push(b.get(d))}}if(o){l=o.length;if(l===g.length){for(e=0;!k&&e<l;e++){if(Ext.Array.indexOf(a.lastSelection,g[e])===-1){k=!0}}}else {k=!0}}else {k=g.length}if(k){a.suspendEvent('select');a.valueCollection.beginUpdate();if(g.length){r.select(g,!1)}else {r.deselectAll()}a.valueCollection.endUpdate();a.resumeEvent('select')}else {a.updateValue()}return a},updateValue:function(){var a=this,b=a.valueCollection.getRange(),i=b.length,c=[],f=a.displayTplData||(a.displayTplData=[]),h=a.inputEl,e,d,g;f.length=0;for(e=0;e<i;e++){d=b[e];f.push(a.getRecordDisplayData(d));if(d!==a.valueNotFoundRecord){c.push(d.get(a.valueField))}}a.setHiddenValue(c);a.value=a.multiSelect?c:c[0];if(!Ext.isDefined(a.value)){a.value=undefined}a.displayTplData=f;g=a.getDisplayValue();a.setRawValue(g);a.refreshEmptyText();a.checkChange();if(!a.lastSelectedRecords&&b.length){a.lastSelectedRecords=b}if(h&&a.typeAhead&&a.hasFocus){a.selectText(g.length)}},setHiddenValue:function(f){var h=this,i=h.hiddenName,e,d,b,g,c,a;if(!h.hiddenDataEl||!i){return}f=Ext.Array.from(f);d=h.hiddenDataEl.dom;b=d.childNodes;g=b[0];c=f.length;a=b.length;if(!g&&c>0){h.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:'input',type:'hidden',name:i}));a=1;g=d.firstChild}while(a>c){d.removeChild(b[0]);--a}while(a<c){d.appendChild(g.cloneNode(!0));++a}for(e=0;e<c;e++){b[e].value=f[e]}},getDisplayValue:function(b){var a;b=b||this.displayTplData;a=this.getDisplayTpl().apply(b);a=a==null?'':String(a);return a.replace(this.newlineRe,'')},getRecordDisplayData:function(a){return a.data},getValue:function(){var a=this,e=a.getStore(),d=a.picker,c=a.getRawValue(),b=a.value;if(!e.isEmptyStore&&a.getDisplayValue()!==c){a.displayTplData=undefined;if(d){a.valueCollection.suspendEvents();d.getSelectionModel().deselectAll();a.valueCollection.resumeEvents();a.lastSelection=null}if(e.isLoaded()&&(a.multiSelect||a.forceSelection)){b=a.value=undefined}else {b=a.value=c}}a.value=b==null?null:b;return a.value},getSubmitValue:function(){var a=this.getValue();if(Ext.isEmpty(a)){a=''}return a},isEqual:function(b,c){var e=Ext.Array.from,a,d;b=e(b);c=e(c);d=b.length;if(d!==c.length){return !1}for(a=0;a<d;a++){if(c[a]!==b[a]){return !1}}return !0},clearValue:function(){this.setValue(null)}});Ext.define('Ext.layout.component.field.FieldContainer',{extend:Ext.layout.component.Auto,alias:'layout.fieldcontainer',type:'fieldcontainer',waitForOuterHeightInDom:!0,waitForOuterWidthInDom:!0,beginLayout:function(a){var b=this.owner.containerEl;this.callParent([a]);a.hasRawContent=!0;b.setStyle('width','');b.setStyle('height','');a.containerElContext=a.getEl('containerEl')},calculateOwnerHeightFromContentHeight:function(b,a){var c=this.callParent([b,a]);return c+this.getHeightAdjustment()},calculateOwnerWidthFromContentWidth:function(b,a){var c=this.callParent([b,a]);return c+this.getWidthAdjustment()},measureContentHeight:function(a){return a.hasDomProp('containerLayoutDone')?this.callParent([a]):NaN},measureContentWidth:function(a){return a.hasDomProp('containerLayoutDone')?this.callParent([a]):NaN},publishInnerHeight:function(b,a){a-=this.getHeightAdjustment();b.containerElContext.setHeight(a)},publishInnerWidth:function(b,a){a-=this.getWidthAdjustment();b.containerElContext.setWidth(a)},privates:{getHeightAdjustment:function(){var a=this.owner,b=0;if(a.labelAlign==='top'&&a.hasVisibleLabel()){b+=a.labelEl.getHeight()}if(a.msgTarget==='under'&&a.hasActiveError()){b+=a.errorWrapEl.getHeight()}return b+a.bodyEl.getPadding('tb')},getWidthAdjustment:function(){var a=this.owner,b=0;if(a.labelAlign!=='top'&&a.hasVisibleLabel()){b+=a.labelWidth+(a.labelPad||0)}if(a.msgTarget==='side'&&a.hasActiveError()){b+=a.errorWrapEl.getWidth()}return b+a.bodyEl.getPadding('lr')}}});Ext.define('Ext.container.Monitor',{target:null,selector:'',scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,clearPropertiesOnDestroy:!1,clearPrototypeOnDestroy:!1,disabled:0,constructor:function(a){Ext.apply(this,a)},destroy:function(){this.unbind();this.callParent()},bind:function(b){var a=this;a.target=b;b.on('beforedestroy',a.disable,a);a.onContainerAdd(b)},unbind:function(){var b=this,a=b.target;if(a&&!a.destroying&&!a.destroyed){b.onContainerRemove(a,a);a.un('beforedestroy',b.disable,b)}b.items=Ext.destroy(b.items)},disable:function(){++this.disabled},enable:function(){if(this.disabled>0){--this.disabled}},handleAdd:function(b,a){if(!this.disabled){if(Ext.ComponentQuery.is(a,this.selector)){this.onItemAdd(a.ownerCt,a)}if(a.isQueryable){this.onContainerAdd(a)}}},onItemAdd:function(e,a){var b=this,d=b.items,c=b.addHandler;if(!b.disabled){if(c){c.call(b.scope||a,a)}if(d){d.add(a)}}a.clearPropertiesOnDestroy=a.clearPrototypeOnDestroy=!1},onItemRemove:function(e,b){var a=this,d=a.items,c=a.removeHandler;if(!a.disabled){if(c){c.call(a.scope||b,b)}if(d){d.remove(b)}}},onContainerAdd:function(d,g){var a=this,c,e,b,f;if(d.isContainer){d.on({scope:a,add:a.handleAdd,dockedadd:a.handleAdd,remove:a.handleRemove,dockedremove:a.handleRemove})}if(g!==!0){c=d.query(a.selector);for(b=0,e=c.length;b<e;++b){f=c[b];a.onItemAdd(f.ownerCt,f)}}c=d.query('>container');for(b=0,e=c.length;b<e;++b){a.onContainerAdd(c[b],!0)}d.clearPropertiesOnDestroy=d.clearPrototypeOnDestroy=!1},handleRemove:function(c,a){var b=this;if(!b.disabled){if(Ext.ComponentQuery.is(a,b.selector)){b.onItemRemove(c,a)}if(a.isQueryable){b.onContainerRemove(c,a)}}},onContainerRemove:function(g,c){var d=this,b,a,e,f;if(!c.destroyed&&c.isContainer){d.removeCtListeners(c);if(!c.destroying){b=c.query(d.selector);for(a=0,e=b.length;a<e;++a){f=b[a];d.onItemRemove(f.ownerCt,f)}b=c.query('container');for(a=0,e=b.length;a<e;++a){d.removeCtListeners(b[a])}}}d.invalidateItems(!0)},removeCtListeners:function(b){var a=this;b.un({scope:a,add:a.handleAdd,dockedadd:a.handleAdd,remove:a.handleRemove,dockedremove:a.handleRemove})},getItems:function(){var b=this,a=b.items;if(!a){a=b.items=new Ext.util.MixedCollection();a.addAll(b.target.query(b.selector))}return a},invalidateItems:function(c){var a=this,b=a.invalidateHandler;if(c&&b){b.call(a.scope||a,a)}a.items=Ext.destroy(a.items)}});Ext.define('Ext.form.FieldAncestor',{extend:Ext.Mixin,mixinConfig:{id:'fieldAncestor',after:{initInheritedState:'initFieldInheritedState'},before:{doDestroy:'onBeforeDestroy'}},initFieldAncestor:function(){var a=this;a.monitor=new Ext.container.Monitor({scope:a,selector:'[isFormField]:not([excludeForm])',addHandler:a.onChildFieldAdd,removeHandler:a.onChildFieldRemove});a.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(a){var c=a.fieldDefaults,b=this.fieldDefaults;if(b){if(c){a.fieldDefaults=Ext.apply(Ext.Object.chain(c),b)}else {a.fieldDefaults=b}}},onChildFieldAdd:function(b){var a=this;a.mon(b,'errorchange',a.handleFieldErrorChange,a);a.mon(b,'validitychange',a.handleFieldValidityChange,a)},onChildFieldRemove:function(b){var a=this;a.mun(b,'errorchange',a.handleFieldErrorChange,a);a.mun(b,'validitychange',a.handleFieldValidityChange,a)},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},handleFieldValidityChange:function(b,c){var a=this;if(b!==a){a.fireEvent('fieldvaliditychange',a,b,c);a.onFieldValidityChange(b,c)}},handleFieldErrorChange:function(b,c){var a=this;if(b!==a){a.fireEvent('fielderrorchange',a,b,c);a.onFieldErrorChange(b,c)}},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor=Ext.destroy(this.monitor)}});Ext.define('Ext.form.FieldContainer',{extend:Ext.container.Container,alias:'widget.fieldcontainer',mixins:{labelable:Ext.form.Labelable,fieldAncestor:Ext.form.FieldAncestor},componentLayout:'fieldcontainer',componentCls:Ext.baseCSSPrefix+'form-fieldcontainer',shrinkWrap:!0,autoEl:{tag:'div',role:'presentation'},childEls:['containerEl'],combineLabels:!1,labelConnector:', ',combineErrors:!1,maskOnDisable:!1,invalidCls:'',fieldSubTpl:['<div id="{id}-containerEl" data-ref="containerEl" class="{containerElCls}"','<tpl if="ariaAttributes">','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>','<tpl else>',' role="presentation"','</tpl>','>','{%this.renderContainer(out,values)%}','</div>'],initComponent:function(){var a=this;a.initLabelable();a.initFieldAncestor();a.callParent();a.initMonitor()},onAdd:function(b){var a=this;if(b.isLabelable&&Ext.isGecko&&Ext.firefoxVersion<37&&a.layout.type==='absolute'&&!a.hideLabel&&a.labelAlign!=='top'){b.x+=a.labelWidth+a.labelPad}a.callParent(arguments);if(b.isLabelable&&a.combineLabels){b.oldHideLabel=b.hideLabel;b.hideLabel=!0}a.updateLabel()},onRemove:function(a,c){var b=this;b.callParent(arguments);if(!c){if(a.isLabelable&&b.combineLabels){a.hideLabel=a.oldHideLabel}b.updateLabel()}},initRenderData:function(){var b=this,a=b.callParent();a.containerElCls=b.containerElCls;a=Ext.applyIf(a,b.getLabelableRenderData());if(b.labelAlign==='top'||b.msgTarget==='under'){a.extraFieldBodyCls+=' '+Ext.baseCSSPrefix+'field-container-body-vertical'}a.tipAnchorTarget=b.id+'-containerEl';return a},getFieldLabel:function(){var a=this.fieldLabel||'';if(!a&&this.combineLabels){a=Ext.Array.map(this.query('[isFieldLabelable]'),function(a){return a.getFieldLabel()}).join(this.labelConnector)}return a},getSubTplData:function(){var a=this.initRenderData();Ext.apply(a,this.subTplData);return a},getSubTplMarkup:function(d){var b=this,a=b.lookupTpl('fieldSubTpl'),c;if(!a.renderContent){b.setupRenderTpl(a)}c=a.apply(b.getSubTplData(d));return c},updateLabel:function(){var a=this,b=a.labelEl;if(b){a.setFieldLabel(a.getFieldLabel())}},onFieldErrorChange:function(){if(this.combineErrors){var a=this,d=a.getActiveError(),c=Ext.Array.filter(a.query('[isFormField]'),function(a){return a.hasActiveError()}),b=a.getCombinedErrors(c);if(b){a.setActiveErrors(b)}else {a.unsetActiveError()}if(d!==a.getActiveError()){a.updateLayout()}}},getCombinedErrors:function(f){var g=[],j=f.length,b,d,c,a,i,h,e;for(b=0;b<j;b++){d=f[b];c=d.getActiveErrors();i=c.length;for(a=0;a<i;a++){h=c[a];e=d.getFieldLabel();g.push((e?e+': ':'')+h)}}return g},privates:{applyTargetCls:function(b){var a=this.containerElCls;this.containerElCls=a?a+' '+b:b},getTargetEl:function(){return this.containerEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty('renderTpl')){a.renderTpl=a.lookupTpl('labelableRenderTpl')}return a.callParent()}}});Ext.define('Ext.panel.Bar',{extend:Ext.container.Container,vertical:!1,_verticalSides:{left:1,right:1},initComponent:function(){var a=this,b=a.vertical;a.dock=a.dock||(b?'left':'top');a.layout=Ext.apply(b?{type:'vbox',align:'middle',alignRoundingMethod:'ceil'}:{type:'hbox',align:'middle',alignRoundingMethod:'floor'},a.layout);this.callParent()},onAdded:function(a,c,b){this.initOrientation();this.callParent([a,c,b])},onRemoved:function(a){this.removeClsWithUI(this.uiCls);this.callParent([a])},beforeRender:function(){var a=this;if(a.forceOrientation||!a.ownerCt){a.initOrientation()}a.callParent()},setDock:function(d){var a=this,c,b;if(d!==a.dock){Ext.suspendLayouts();a.clearOrientation();a.callParent([d]);a.initOrientation();b=a.vertical;c=a.layout;c.setVertical(b);c.setAlignRoundingMethod(b?'ceil':'floor');Ext.resumeLayouts(!0)}},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?'vertical':'horizontal',this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var a=this,b=a.dock,c=a.vertical=b?b in a._verticalSides:a.vertical;a.addClsWithUI([c?'vertical':'horizontal',a.getDockName()])}}});Ext.define('Ext.panel.Title',{extend:Ext.Component,xtype:'title',isTitle:!0,noWrap:!0,textAlign:'left',iconAlign:'left',rotation:0,text:'&#160;',beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{role:'presentation',unselectable:'on'},textElRole:'presentation',tabIndex:0,childEls:['textEl','iconEl','iconWrapEl'],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl>'+'<div id="{id}-textEl" data-ref="textEl"'+' class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"'+'<tpl if="textElRole"> role="{textElRole}"</tpl>'+'>'+'{text}'+'</div>'+'<tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" '+'class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"'+'<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>>'+'<div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" '+'class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="'+'<tpl if="iconUrl">background-image:url({iconUrl});</tpl>'+'<tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>">'+'<tpl if="glyph">{glyph}</tpl>'+'</div>'+'</div>',_textAlignClasses:{left:Ext.baseCSSPrefix+'title-align-left',center:Ext.baseCSSPrefix+'title-align-center',right:Ext.baseCSSPrefix+'title-align-right'},_iconAlignClasses:{top:Ext.baseCSSPrefix+'title-icon-top',right:Ext.baseCSSPrefix+'title-icon-right',bottom:Ext.baseCSSPrefix+'title-icon-bottom',left:Ext.baseCSSPrefix+'title-icon-left'},_rotationClasses:{0:Ext.baseCSSPrefix+'title-rotate-none',1:Ext.baseCSSPrefix+'title-rotate-right',2:Ext.baseCSSPrefix+'title-rotate-left'},_rotationAngles:{1:90,2:270},baseCls:Ext.baseCSSPrefix+'title',_titleSuffix:'-title',_glyphCls:Ext.baseCSSPrefix+'title-glyph',_iconWrapCls:Ext.baseCSSPrefix+'title-icon-wrap',_baseIconCls:Ext.baseCSSPrefix+'title-icon',_itemCls:Ext.baseCSSPrefix+'title-item',_textCls:Ext.baseCSSPrefix+'title-text',afterComponentLayout:function(){var b=this,c=b.getRotation(),a,d,e;if(c&&!Ext.isIE8){e=b.el;a=b.lastBox;d=a.x;e.setStyle(b._getVerticalAdjustDirection(),d+(c===1?a.width:-a.height)+'px')}this.callParent()},onRender:function(){var a=this,b=a.getRotation(),c=a.el;a.callParent();if(b){c.setVertical(a._rotationAngles[b])}if(Ext.supports.FixedTableWidthBug){c._needsTableWidthFix=!0}},applyText:function(a){if(!a){a='&#160;'}return a},beforeRender:function(){var a=this;a.callParent();a.addCls(a._rotationClasses[a.getRotation()]);a.addCls(a._textAlignClasses[a.getTextAlign()])},getIconMarkup:function(){return this.lookupTpl('iconTpl').apply(this.getIconRenderData())},getIconRenderData:function(){var a=this,f=a.getIcon(),e=a.getIconCls(),b=a.getGlyph(),c,d=a.getIconAlign();if(b){c=b.fontFamily;b=b.character}return {id:a.id,ui:a.ui,itemCls:a._itemCls,iconUrl:f,iconCls:e,iconWrapCls:a._iconWrapCls,baseIconCls:a._baseIconCls,iconAlignCls:a._iconAlignClasses[d],glyph:b,glyphCls:b?a._glyphCls:'',glyphFontFamily:c}},initRenderData:function(){var a=this,c,b;b=Ext.apply({text:a.getText(),textElRole:a.textElRole,id:a.id,ui:a.ui,itemCls:a._itemCls,textCls:a._textCls,iconMarkup:null,iconBeforeTitle:null},a.callParent());if(a._hasIcon()){c=a.getIconAlign();b.iconMarkup=a.getIconMarkup();b.iconBeforeTitle=c==='top'||c==='left'}return b},onAdded:function(a,f,e){var b=this,d=b._titleSuffix,c=a.baseCls;b.addCls([c+d,c+d+'-'+a.ui]);b.callParent([a,f,e])},applyGlyph:function(a,b){if(a){if(!a.isGlyph){a=new Ext.Glyph(a)}if(a.isEqual(b)){a=undefined}}return a},updateGlyph:function(c,e){var b=this,d=b._glyphCls,a;if(b.rendered){b._syncIconVisibility();a=b.iconEl;if(c){a.dom.innerHTML=c.character;a.addCls(d);a.setStyle('font-family',c.fontFamily)}else {if(e!==c){a.dom.innerHTML='';a.removeCls(d)}}if(b._didIconStateChange(e,c)){b.updateLayout()}}},updateIcon:function(a,c){var b=this,d;a=a||'';if(b.rendered&&a!==c){b._syncIconVisibility();d=b.iconEl;d.setStyle('background-image',a?'url('+a+')':'');if(b._didIconStateChange(c,a)){b.updateLayout()}}},updateIconAlign:function(d,f){var a=this,b=a.iconWrapEl,e,c;if(a.iconWrapEl){e=a.el;c=a._iconAlignClasses;if(f){b.removeCls(c[f])}b.addCls(c[d]);if(d==='top'||d==='left'){e.insertFirst(b)}else {e.appendChild(b)}a.updateLayout()}},updateIconCls:function(a,c){var b=this,d;a=a||'';if(b.rendered&&c!==a){b._syncIconVisibility();d=b.iconEl;if(c){d.removeCls(c)}d.addCls(a);if(b._didIconStateChange(c,a)){b.updateLayout()}}},updateRotation:function(d,e){var a=this,b,c;if(a.rendered){b=a.el;c=a._rotationClasses;a.removeCls(c[e]);a.addCls(c[d]);b.setHorizontal();if(d){b.setVertical(a._rotationAngles[d])}b.setStyle({right:'',left:'',top:'',height:'',width:''});a.lastBox=null;a.updateLayout()}},updateText:function(a){if(this.rendered){this.textEl.setHtml(a);this.updateLayout()}},updateTextAlign:function(d,c){var a=this,b=a._textAlignClasses;if(a.rendered){if(c){a.removeCls(b[c])}a.addCls(b[d]);a.updateLayout()}},privates:{_getVerticalAdjustDirection:function(){return 'left'},_didIconStateChange:function(c,b){var a=Ext.isEmpty(b);return Ext.isEmpty(c)?!a:a},_hasIcon:function(){return !!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var a=this,f=a.el,e=a._hasIcon(),b=a.iconWrapEl,d,c;if(e&&!b){c=a.iconAlign;d=c==='left'||c==='top';f.dom.insertAdjacentHTML(d?'afterbegin':'beforeend',a.getIconMarkup());b=a.iconWrapEl=f[d?'first':'last']();a.iconEl=b.first()}if(b){b.setDisplayed(e)}}}});Ext.define('Ext.panel.Tool',{extend:Ext.Component,xtype:'tool',config:{glyph:null},isTool:!0,baseCls:Ext.baseCSSPrefix+'tool',disabledCls:Ext.baseCSSPrefix+'tool-disabled',toolPressedCls:Ext.baseCSSPrefix+'tool-pressed',toolOverCls:Ext.baseCSSPrefix+'tool-over',childEls:['toolEl'],renderTpl:['<div id="{id}-toolEl" data-ref="toolEl" class="{className} {childElCls}" role="presentation"'+'<tpl if="glyph">'+'<tpl if="glyphFontFamily">'+' style="font-family:{glyphFontFamily};">'+'</tpl>'+'{glyph}'+'<tpl else>'+'>'+'</tpl>'+'</div>'],toolOwner:null,tooltipType:'qtip',stopEvent:!0,ariaRole:'button',focusable:!0,tabIndex:0,keyMap:{scope:'this',SPACE:'onClick',ENTER:'onClick'},cacheHeight:!0,cacheWidth:!0,initComponent:function(){var a=this;a.tooltip=a.tooltip||a.qtip;a.callParent()},initRenderData:function(){var b=this,d=b.callParent(),a=b.getGlyph(),c;if(a){c=a.fontFamily;a=a.character}Ext.applyIf(d,{className:b.calculateClassName(),glyph:a,glyphFontFamily:c});return d},calculateClassName:function(){var a=this,b=a.baseCls+'-tool-el ';if(a.type){b+=a.baseCls+'-img '+a.baseCls+'-'+a.type}else {if(a.iconCls){b+=a.iconCls}}return b},afterRender:function(){var a=this,b;a.callParent();if(a.setTypeAfterRender){a.setTypeAfterRender=!1;a.setType(a.type)}a.el.on({click:a.onClick,mousedown:a.onMouseDown,mouseover:a.onMouseOver,mouseout:a.onMouseOut,scope:a});b=a.tooltip;if(b){a.setTooltip(b)}},tipAttrs:{qtip:'data-qtip'},setTooltip:function(b,d){var a=this,g=a.tooltip,f=a.tooltipType,h=a.id,e=a.el,c;if(g&&Ext.quickTipsActive&&Ext.isObject(g)){Ext.tip.QuickTipManager.unregister(h)}a.tooltip=b;if(d){a.tooltipType=d}if(b){if(Ext.quickTipsActive&&Ext.isObject(b)){Ext.tip.QuickTipManager.register(Ext.apply({target:h},b))}else {if(e){if(d&&f&&d!==f){c=a.tipAttrs[f]||'title';e.dom.removeAttribute(c)}c=a.tipAttrs[d||f]||'title';e.dom.setAttribute(c,b)}}if(c!=='title'&&a.ariaRole&&a.ariaRole!=='presentation'){if(e){e.dom.setAttribute('aria-label',b)}else {a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-label']=b}}}},setType:function(f){var a=this,e=a.updating,c=a.rendering,b,d;if(!e){b=a.calculateClassName();if(!c){a.updating=d=!0}a.setIconCls(null);a.setGlyph(null)}a.type=f;if(d){a.updateToolCls(b);a.updating=!1}else {if(c){a.setTypeAfterRender=!0}}return a},setIconCls:function(e){var a=this,d=a.updating,b,c;if(!d){b=a.calculateClassName();a.updating=c=!0;a.setType(null);a.setGlyph(null)}a.iconCls=e;if(c){a.updateToolCls(b);a.updating=!1}return a},doDestroy:function(){var a=this;a.setTooltip(null);delete a.toolOwner;a.callParent()},applyGlyph:function(a,b){if(a){if(!a.isGlyph){a=new Ext.Glyph(a)}if(a.isEqual(b)){a=undefined}}return a},updateGlyph:function(c,g){var a=this,b=a.toolEl,f=a.updating,d,e;if(!f){d=a.calculateClassName();a.updating=e=!0;a.setType(null);a.setIconCls(null)}if(b){if(c){b.dom.innerHTML=c.character;b.setStyle(c.getStyle())}else {b.dom.innerHTML=''}}if(e){a.updateToolCls(d);a.updating=!1}},privates:{onClick:function(b,c){var a=this;if(a.disabled){return !1}if(b.type!=='keydown'){a.el.removeCls(a.toolPressedCls+' '+a.toolOverCls)}if(a.stopEvent!==!1){b.stopEvent()}if(a.handler){Ext.callback(a.handler,a.scope,[b,c,a.ownerCt,a],0,a)}else {if(a.callback){Ext.callback(a.callback,a.scope,[a.toolOwner||a.ownerCt,a,b],0,a)}}if(a.destroyed){return}a.fireEvent('click',a,b,a.toolOwner||a.ownerCt);return !0},onMouseDown:function(a){a.preventDefault();if(this.disabled){return !1}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return !1}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)},updateToolCls:function(b){var a=this.toolEl;if(a){a.removeCls(b);a.addCls(this.calculateClassName())}}}});Ext.define('Ext.panel.Header',{extend:Ext.panel.Bar,xtype:'header',isHeader:!0,defaultType:'tool',indicateDrag:!1,weight:-1,shrinkWrap:3,focusableContainer:!0,iconAlign:'left',titleAlign:'left',titlePosition:0,titleRotation:'default',autoEl:{role:'presentation'},beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{xtype:'title',flex:1},merge:function(a,b){if(typeof a!=='object'){a={text:a}}return Ext.merge(b?Ext.Object.chain(b):{},a)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:Ext.baseCSSPrefix+'header',initComponent:function(){var a=this,b=a.items,d=a.itemPosition,c=[a.headerCls];a.tools=a.tools||[];a.items=b=b?b.slice():[];if(d!==undefined){a._userItems=b.slice();a.items=b=[]}a.indicateDragCls=a.headerCls+'-draggable';if(a.indicateDrag){c.push(a.indicateDragCls)}a.addCls(c);a.syncNoBorderCls();Ext.Array.push(b,a.tools);a.tools.length=0;a.callParent();a.on({dblclick:a.onDblClick,click:a.onClick,element:'el',scope:a})},addTool:function(b){var a=this;a.add(Ext.ComponentManager.create(b,'tool'));a.checkFocusableTools()},afterLayout:function(){var a=this,e,b,c,d;if(a.vertical){b=a.frameTR;if(b){e=a.frameBR;c=a.frameTL;d=a.getWidth()-b.getPadding('r')-(c?c.getPadding('l'):a.el.getBorderWidth('l'))+'px';e.setStyle('background-position-x',d);b.setStyle('background-position-x',d)}}this.callParent()},applyTitle:function(a,c){var b=this,e,d;a=a||'';e=Ext.isString(a);if(!Ext.isObject(a)){a={text:a.toString()}}if(c){Ext.suspendLayouts();c.setConfig(a);Ext.resumeLayouts(!0);a=c}else {if(e){a.xtype='title'}a.ui=b.ui;d='rotation' in a;a.id=b.id+'-title';if(b.isAccordionHeader){a.ariaRole='tab';a.textElRole=null;a.focusable=!0}a=Ext.create(a);if(!d&&b.vertical&&b.titleRotation==='default'){a.rotation=1}}return a},applyTitlePosition:function(b){var a=this.items.getCount();if(this._titleInItems){--a}return Math.max(Math.min(b,a),0)},beforeLayout:function(){this.callParent();this.syncBeforeAfterTitleClasses()},beforeRender:function(){var a=this,b=a.itemPosition;a.protoEl.unselectable();a.callParent();if(b!==undefined){a.insert(b,a._userItems)}a.checkFocusableTools()},checkFocusableTools:function(){var a=this,d=a.tools,c,b,e;if(a.isAccordionHeader){a.focusableContainer=!1;return}for(b=0,e=d.length;b<e;b++){if(d[b].focusable){c=!0;break}}if(c){if(!a.initialConfig.hasOwnProperty('focusableContainer')||a.focusableContainer){a.ariaRole='toolbar';a.focusableContainer=!0;if(a.rendered){a.ariaEl.dom.setAttribute('role','toolbar');a.initFocusableContainer(!0)}}}else {a.ariaRole='presentation';a.focusableContainer=!1;if(a.rendered){a.ariaEl.dom.setAttribute('role','presentation');a.initFocusableContainer(!0)}}},getTools:function(){return this.tools.slice()},onAdd:function(a,c){var b=this.tools;this.callParent([a,c]);if(a.isTool){b.push(a);b[a.type]=a}},onAdded:function(a,c,b){this.syncNoBorderCls();this.callParent([a,c,b])},onRemoved:function(a,c,b){this.syncNoBorderCls();this.callParent([a,c,b])},setDock:function(e){var a=this,c=a.getTitle(),b=a.getTitleRotation(),d=c.getRotation();Ext.suspendLayouts();a.callParent([e]);if(b==='default'){b=a.vertical?1:0;if(b!==d){c.setRotation(b)}if(a.rendered){a.resetItemMargins()}}Ext.resumeLayouts(!0)},updateGlyph:function(a){this.getTitle().setGlyph(a)},updateIcon:function(a){this.getTitle().setIcon(a)},updateIconAlign:function(a,b){this.getTitle().setIconAlign(a)},updateIconCls:function(a){this.getTitle().setIconCls(a)},updateTitle:function(a,b){if(!b){this.insert(this.getTitlePosition(),a);this._titleInItems=!0}this.titleCmp=a},updateTitleAlign:function(a,b){this.getTitle().setTextAlign(a)},updateTitlePosition:function(a){this.insert(a,this.getTitle())},updateTitleRotation:function(a){if(a==='default'){a=this.vertical?1:0}this.getTitle().setRotation(a)},privates:{fireClickEvent:function(c,a){var b='.'+Ext.panel.Tool.prototype.baseCls;if(!a.getTarget(b)){this.fireEvent(c,this,a)}},getFramingInfoCls:function(){var a=this,c=a.callParent(),b=a.ownerCt;if(!a.expanding&&b&&(b.collapsed||a.isCollapsedExpander)){c+='-'+b.collapsedCls}return c+'-'+a.dock},onClick:function(a){this.fireClickEvent('click',a)},onDblClick:function(a){this.fireClickEvent('dblclick',a)},syncBeforeAfterTitleClasses:function(l){var c=this,j=c.items,i=j.items,h=c.getTitlePosition(),k=i.length,g=j.generation,f=c.syncBeforeAfterGen,e,d,b,a;if(!l&&f===g){return}c.syncBeforeAfterGen=g;for(b=0;b<k;++b){a=i[b];e=a.afterTitleCls||(a.afterTitleCls=a.baseCls+'-after-title');d=a.beforeTitleCls||(a.beforeTitleCls=a.baseCls+'-before-title');if(!c.title||b<h){if(f){a.removeCls(e)}a.addCls(d)}else {if(b>h){if(f){a.removeCls(d)}a.addCls(e)}}}},syncNoBorderCls:function(){var a=this,b=this.ownerCt,c=a.headerCls+'-noborder';if(b?b.border===!1&&!b.frame:a.border===!1){a.addCls(c)}else {a.removeCls(c)}}}});Ext.define('Ext.dd.DragDrop',{constructor:function(a,c,b){if(a){this.init(a,c,b)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,triggerEvent:'mousedown',b4StartDrag:function(a,b){},startDrag:function(a,b){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(b,a){},b4DragOver:function(a){},onDragOver:function(b,a){},b4DragOut:function(a){},onDragOut:function(b,a){},b4DragDrop:function(a){},onDragDrop:function(b,a){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(j,a,k){if(Ext.isNumber(a)){a={left:a,right:a,top:a,bottom:a}}a=a||this.defaultPadding;var c=Ext.get(this.getEl()).getBox(),e=Ext.get(j),i=e.getScroll(),d=e.dom,b,h,g,f;if(d===document.body){b={x:i.left,y:i.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}}else {h=e.getXY();b={x:h[0],y:h[1],width:d.clientWidth,height:d.clientHeight}}g=c.y-b.y;f=c.x-b.x;this.resetConstraints();this.setXConstraint(f-(a.left||0),b.width-f-c.width-(a.right||0),this.xTickSize);this.setYConstraint(g-(a.top||0),b.height-g-c.height-(a.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(b,d,c){var a=this;a.el=a.el||Ext.get(b);a.initTarget(b,d,c);Ext.get(a.id).on(a.triggerEvent,a.handleMouseDown,a);if(Ext.supports.Touch&&a.triggerEvent==='longpress'){Ext.get(a.id).swallowEvent('contextmenu',!0)}},initTarget:function(a,b,c){this.config=c||{};this.DDMInstance=Ext.dd.DragDropManager;this.groups={};if(typeof a!=='string'){a=Ext.id(a)}this.id=a;this.addToGroup(b?b:'default');this.handleElId=a;this.setDragElId(a);this.invalidHandleTypes={A:'A'};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=this.config.isTarget!==!1;this.maintainOffset=this.config.maintainOffset;this.primaryButtonOnly=this.config.primaryButtonOnly!==!1},handleOnAvailable:function(){this.available=!0;this.resetConstraints();this.onAvailable()},setPadding:function(a,b,c,d){if(!b&&0!==b){this.padding=[a,a,a,a]}else {if(!c&&0!==c){this.padding=[a,b,a,b]}else {this.padding=[a,b,c,d]}}},setInitPosition:function(e,f){var d=this.getEl(),b,c,a;if(!this.DDMInstance.verifyEl(d)){return}b=e||0;c=f||0;a=Ext.fly(d).getXY();this.initPageX=a[0]-b;this.initPageY=a[1]-c;this.lastPageX=a[0];this.lastPageY=a[1];this.setStartPosition(a)},setStartPosition:function(b){var a=b||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null;this.startPageX=a[0];this.startPageY=a[1]},addToGroup:function(a){this.groups[a]=!0;this.DDMInstance.regDragDrop(this,a)},removeFromGroup:function(a){if(this.groups[a]){delete this.groups[a]}this.DDMInstance.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){if(typeof a!=='string'){a=Ext.id(a)}this.handleElId=a;this.DDMInstance.regHandle(this.id,a)},setOuterHandleElId:function(a){if(typeof a!=='string'){a=Ext.id(a)}Ext.get(a).on(this.triggerEvent,this.handleMouseDown,this);this.setHandleElId(a);this.hasOuterHandles=!0},unreg:function(){var a=this,b;if(a._domRef){b=Ext.fly(a.id);if(b){b.un(a.triggerEvent,a.handleMouseDown,a)}}a._domRef=null;a.DDMInstance._remove(a,a.autoGroup)},destroy:function(){this.unreg();this.callParent()},isLocked:function(){return this.DDMInstance.isLocked()||this.locked},handleMouseDown:function(b,c){var a=this;if(a.primaryButtonOnly&&b.button||a.isLocked()){return}a.DDMInstance.refreshCache(a.groups);if(a.hasOuterHandles||a.DDMInstance.isOverTarget(b.getPoint(),a)){if(a.clickValidator(b)){a.setStartPosition();a.b4MouseDown(b);a.onMouseDown(b);a.DDMInstance.handleMouseDown(b,a);a.DDMInstance.stopEvent(b)}}},clickValidator:function(b){var a=b.getTarget();return this.isValidHandleChild(a)&&(this.id===this.handleElId||this.DDMInstance.handleWasClicked(a,this.id))},addInvalidHandleType:function(b){var a=b.toUpperCase();this.invalidHandleTypes[a]=a},addInvalidHandleId:function(a){if(typeof a!=='string'){a=Ext.id(a)}this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){if(typeof a!=='string'){a=Ext.id(a)}delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(c){var b=this.invalidHandleClasses,d=b.length,a;for(a=0;a<d;++a){if(b[a]===c){delete b[a]}}},isValidHandleChild:function(b){var a=!0,d,c,e;try{d=b.nodeName.toUpperCase()}catch(f){d=b.nodeName}a=a&&!this.invalidHandleTypes[d];a=a&&!this.invalidHandleIds[b.id];for(c=0,e=this.invalidHandleClasses.length;a&&c<e;++c){a=!Ext.fly(b).hasCls(this.invalidHandleClasses[c])}return a},setXTicks:function(d,c){var b={},a;this.xTicks=[];this.xTickSize=c;for(a=this.initPageX;a>=this.minX;a=a-c){if(!b[a]){this.xTicks[this.xTicks.length]=a;b[a]=!0}}for(a=this.initPageX;a<=this.maxX;a=a+c){if(!b[a]){this.xTicks[this.xTicks.length]=a;b[a]=!0}}Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(d,c){var b={},a;this.yTicks=[];this.yTickSize=c;for(a=this.initPageY;a>=this.minY;a=a-c){if(!b[a]){this.yTicks[this.yTicks.length]=a;b[a]=!0}}for(a=this.initPageY;a<=this.maxY;a=a+c){if(!b[a]){this.yTicks[this.yTicks.length]=a;b[a]=!0}}Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(c,b,a){this.leftConstraint=c;this.rightConstraint=b;this.minX=this.initPageX-c;this.maxX=this.initPageX+b;if(a){this.setXTicks(this.initPageX,a)}this.constrainX=!0},clearConstraints:function(){this.constrainX=!1;this.constrainY=!1;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(c,b,a){this.topConstraint=c;this.bottomConstraint=b;this.minY=this.initPageY-c;this.maxY=this.initPageY+b;if(a){this.setYTicks(this.initPageY,a)}this.constrainY=!0},resetConstraints:function(){var a,b;if(this.initPageX||this.initPageX===0){a=this.maintainOffset?this.lastPageX-this.initPageX:0;b=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(a,b)}else {this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(d,a){var b,g,c,e,f;if(!a){return d}else {if(a[0]>=d){return a[0]}else {for(b=0,g=a.length;b<g;++b){c=b+1;if(a[c]&&a[c]>=d){e=d-a[b];f=a[c]-d;return f>e?a[b]:a[c]}}return a[a.length-1]}}},toString:function(){return 'DragDrop '+this.id}});Ext.define('Ext.dd.DD',{extend:Ext.dd.DragDrop,constructor:function(a,c,b){if(a){this.init(a,c,b)}},scroll:!0,autoOffset:function(a,b){var c=a-this.startPageX,d=b-this.startPageY;this.setDelta(c,d)},setDelta:function(a,b){this.deltaX=a;this.deltaY=b},setDragElPos:function(a,b){var c=this.getDragEl();this.alignElWithMouse(c,a,b)},alignElWithMouse:function(d,j,k){var a=this.getTargetCoord(j,k),c=d.dom?d:Ext.fly(d,'_dd'),e=c.getSize(),i=Ext.Element,b,g,f,h;if(!this.deltaSetXY){b=this.cachedViewportSize={width:i.getDocumentWidth(),height:i.getDocumentHeight()};g=[Math.max(0,Math.min(a.x,b.width-e.width)),Math.max(0,Math.min(a.y,b.height-e.height))];c.setXY(g);f=this.getLocalX(c);h=c.getLocalY();this.deltaSetXY=[f-a.x,h-a.y]}else {b=this.cachedViewportSize;this.setLocalXY(c,Math.max(0,Math.min(a.x+this.deltaSetXY[0],b.width-e.width)),Math.max(0,Math.min(a.y+this.deltaSetXY[1],b.height-e.height)))}this.cachePosition(a.x,a.y);this.autoScroll(a.x,a.y,d.offsetHeight,d.offsetWidth);return a},cachePosition:function(b,c){var a;if(b){this.lastPageX=b;this.lastPageY=c}else {a=Ext.fly(this.getEl()).getXY();this.lastPageX=a[0];this.lastPageY=a[1]}},autoScroll:function(e,f,m,n){var g,h,b,a,l,j,k,i,d,c;if(this.scroll){g=Ext.Element.getViewportHeight();h=Ext.Element.getViewportWidth();b=this.DDMInstance.getScrollTop();a=this.DDMInstance.getScrollLeft();l=m+f;j=n+e;k=g+b-f-this.deltaY;i=h+a-e-this.deltaX;d=40;c=document.all?80:30;if(l>g&&k<d){window.scrollTo(a,b+c)}if(f<b&&b>0&&f-b<d){window.scrollTo(a,b-c)}if(j>h&&i<d){window.scrollTo(a+c,b)}if(e<a&&a>0&&e-a<d){window.scrollTo(a-c,b)}}},getTargetCoord:function(c,d){var a=c-this.deltaX,b=d-this.deltaY;if(this.constrainX){if(a<this.minX){a=this.minX}if(a>this.maxX){a=this.maxX}}if(this.constrainY){if(b<this.minY){b=this.minY}if(b>this.maxY){b=this.maxY}}a=this.getTick(a,this.xTicks);b=this.getTick(b,this.yTicks);return {x:a,y:b}},applyConfig:function(){this.callParent();this.scroll=this.config.scroll!==!1},b4MouseDown:function(b){var a=b.getXY();this.autoOffset(a[0],a[1])},b4Drag:function(b){var a=b.getXY();this.setDragElPos(a[0],a[1])},toString:function(){return 'DD '+this.id},getLocalX:function(a){return a.getLocalX()},setLocalXY:function(a,b,c){a.setLocalXY(b,c)}});Ext.define('Ext.dd.DDProxy',{extend:Ext.dd.DD,statics:{dragElId:'ygddfdiv'},constructor:function(a,c,b){if(a){this.init(a,c,b);this.initFrame()}},resizeFrame:!0,centerFrame:!1,createFrame:function(){var d=this,c=document.body,a,b;if(!c||!c.firstChild){Ext.defer(function(){d.createFrame()},50);return}a=this.getDragEl();if(!a){a=document.createElement('div');a.id=this.dragElId;a.setAttribute('role','presentation');b=a.style;b.position='absolute';b.visibility='hidden';b.cursor='move';b.border='2px solid #aaa';b.zIndex=999;c.insertBefore(a,c.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){this.callParent();this.resizeFrame=this.config.resizeFrame!==!1;this.centerFrame=this.config.centerFrame;this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(d,e){var a=this,b=a.getDragEl(),c=b.style;a._resizeProxy();if(a.centerFrame){a.setDelta(Math.round(parseInt(c.width,10)/2),Math.round(parseInt(c.height,10)/2))}a.setDragElPos(d,e);Ext.fly(b).show()},_resizeProxy:function(){var a;if(this.resizeFrame){a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(d){var a=d.getXY(),b=a[0],c=a[1];this.autoOffset(b,c);this.setDragElPos(b,c)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(c){var b=this.getEl(),a=this.getDragEl();a.style.visibility='';this.beforeMove();b.style.visibility='hidden';Ext.dd.DDM.moveToEl(b,a);a.style.visibility='hidden';b.style.visibility='';this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return 'DDProxy '+this.id}});Ext.define('Ext.dd.StatusProxy',{extend:Ext.Component,animRepair:!1,childEls:['ghost'],renderTpl:['<div class="'+Ext.baseCSSPrefix+'dd-drop-icon" role="presentation"></div>'+'<div id="{id}-ghost" data-ref="ghost" class="'+Ext.baseCSSPrefix+'dd-drag-ghost" role="presentation"></div>'],repairCls:Ext.baseCSSPrefix+'dd-drag-repair',ariaRole:'presentation',skipLayout:!0,alignOnScroll:!1,constructor:function(a){var b=this;a=a||{};Ext.apply(b,{hideMode:'visibility',hidden:!0,floating:!0,id:b.id||Ext.id(),cls:Ext.baseCSSPrefix+'dd-drag-proxy '+this.dropNotAllowed,shadow:a.shadow||!1,renderTo:Ext.getDetachedBody()});b.callParent(arguments);this.dropStatus=this.dropNotAllowed},dropAllowed:Ext.baseCSSPrefix+'dd-drop-ok',dropNotAllowed:Ext.baseCSSPrefix+'dd-drop-nodrop',setStatus:function(a){a=a||this.dropNotAllowed;if(this.dropStatus!==a){this.el.replaceCls(this.dropStatus,a);this.dropStatus=a}},reset:function(c){var a=this,b=Ext.baseCSSPrefix+'dd-drag-proxy ';a.el.replaceCls(b+a.dropAllowed,b+a.dropNotAllowed);a.dropStatus=a.dropNotAllowed;if(c){a.ghost.setHtml('')}},update:function(a){var b;if(typeof a==='string'){this.ghost.setHtml(a)}else {this.ghost.setHtml('');a.style.margin='0';this.ghost.dom.appendChild(a)}b=this.ghost.dom.firstChild;if(b){Ext.fly(b).setStyle('float','none')}},getGhost:function(){return this.ghost},hide:function(a){this.callParent();if(a){this.reset(!0)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},sync:function(){this.el.syncUnderlays()},repair:function(b,c,d){var a=this;a.callback=c;a.scope=d;if(b&&a.animRepair!==!1){a.el.addCls(a.repairCls);a.el.setUnderlaysVisible(!1);a.anim=a.el.animate({duration:a.repairDuration||500,easing:'ease-out',to:{x:b[0],y:b[1]},stopAnimation:!0,callback:a.afterRepair,scope:a})}else {a.afterRepair()}},afterRepair:function(){var a=this;a.hide(!0);a.el.removeCls(a.repairCls);if(typeof a.callback==='function'){a.callback.call(a.scope||a)}delete a.callback;delete a.scope}});Ext.define('Ext.dd.DragSource',{extend:Ext.dd.DDProxy,dropAllowed:Ext.baseCSSPrefix+'dd-drop-ok',dropNotAllowed:Ext.baseCSSPrefix+'dd-drop-nodrop',animRepair:!0,repairHighlightColor:'c3daf9',constructor:function(b,a){this.el=Ext.get(b);if(!this.dragData){this.dragData={}}Ext.apply(this,a);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy({id:this.el.id+'-drag-status-proxy',animRepair:this.animRepair})}this.callParent([this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:this.scroll===!0}]);this.dragging=!1},getDragData:function(a){return this.dragData},onDragEnter:function(c,b){var a=Ext.dd.DragDropManager.getDDById(b),d;this.cachedTarget=a;if(this.beforeDragEnter(a,c,b)!==!1){if(a.isNotifyTarget){d=a.notifyEnter(this,c,this.dragData);this.proxy.setStatus(d)}else {this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(a,c,b)}}},beforeDragEnter:function(a,c,b){return !0},onDragOver:function(c,b){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b),d;if(this.beforeDragOver(a,c,b)!==!1){if(a.isNotifyTarget){d=a.notifyOver(this,c,this.dragData);this.proxy.setStatus(d)}if(this.afterDragOver){this.afterDragOver(a,c,b)}}},beforeDragOver:function(a,c,b){return !0},onDragOut:function(c,b){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b);if(this.beforeDragOut(a,c,b)!==!1){if(a.isNotifyTarget){a.notifyOut(this,c,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(a,c,b)}}this.cachedTarget=null},beforeDragOut:function(a,c,b){return !0},onDragDrop:function(c,b){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b);if(this.beforeDragDrop(a,c,b)!==!1){if(a.isNotifyTarget){if(a.notifyDrop(this,c,this.dragData)!==!1){this.onValidDrop(a,c,b)}else {this.onInvalidDrop(a,c,b)}}else {this.onValidDrop(a,c,b)}if(this.afterDragDrop){this.afterDragDrop(a,c,b)}}delete this.cachedTarget},beforeDragDrop:function(a,c,b){return !0},onValidDrop:function(a,c,b){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(a,c,b)}},getRepairXY:function(b,a){return this.el.getXY()},onInvalidDrop:function(c,b,d){var a=this;if(!b){b=c;c=null;d=b.getTarget().id}if(a.beforeInvalidDrop(c,b,d)!==!1){if(a.cachedTarget){if(a.cachedTarget.isNotifyTarget){a.cachedTarget.notifyOut(a,b,a.dragData)}a.cacheTarget=null}a.proxy.repair(a.getRepairXY(b,a.dragData),a.afterRepair,a);if(a.afterInvalidDrop){a.afterInvalidDrop(b,d)}}},afterRepair:function(){var a=this;if(Ext.enableFx){a.el.highlight(a.repairHighlightColor)}a.dragging=!1},beforeInvalidDrop:function(a,c,b){return !0},handleMouseDown:function(b){var a;if(this.dragging){return}a=this.getDragData(b);if(a&&this.onBeforeDrag(a,b)!==!1){this.dragData=a;this.proxy.stop();this.callParent(arguments)}},onBeforeDrag:function(a,b){return !0},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){this.proxy.ensureAttachedToBody(!0);return this.callParent(arguments)},startDrag:function(a,b){this.proxy.reset();this.proxy.hidden=!1;this.dragging=!0;this.proxy.update('');this.onInitDrag(a,b);this.proxy.show()},onInitDrag:function(b,c){var a=this.el.dom.cloneNode(!0);a.id=Ext.id();this.proxy.update(a);this.onStartDrag(b,c);return !0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(!0);this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){Ext.destroy(this.proxy);this.callParent()}});Ext.define('Ext.panel.Proxy',{alternateClassName:'Ext.dd.PanelProxy',moveOnDrag:!0,constructor:function(c,b){var a=this;a.panel=c;a.id=a.panel.id+'-ddproxy';Ext.apply(a,b)},insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var a=this;if(a.ghost){if(a.proxy){a.proxy.destroy();delete a.proxy}a.panel.unghost(null,a.moveOnDrag);delete a.ghost}},show:function(){var a=this,b;if(!a.ghost){b=a.panel.getSize();a.panel.el.setVisibilityMode(Ext.Element.DISPLAY);a.ghost=a.panel.ghost();if(a.insertProxy){a.proxy=a.panel.el.insertSibling({role:'presentation',cls:Ext.baseCSSPrefix+'panel-dd-spacer'});a.proxy.setSize(b)}}},repair:function(c,a,b){this.hide();Ext.callback(a,b||this)},moveProxy:function(a,b){if(this.proxy){a.insertBefore(this.proxy.dom,b)}}});Ext.define('Ext.panel.DD',{extend:Ext.dd.DragSource,constructor:function(b,c){var a=this;a.panel=b;a.dragData={panel:b};a.panelProxy=new Ext.panel.Proxy(b,c);a.proxy=a.panelProxy.proxy;a.callParent([b.el,c]);a.setupEl(b)},setupEl:function(c){var a=this,b=c.header,d=c.body;if(b){a.setHandleElId(b.id);d=b.el}if(d){d.setStyle('cursor','move');a.scroll=!1}else {c.on('boxready',a.setupEl,a,{single:!0})}},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.panelProxy.show()},b4MouseDown:function(b){var a=b.getXY(),c=a[0],d=a[1];this.autoOffset(c,d)},onInitDrag:function(a,b){this.onStartDrag(a,b);return !0},createFrame:Ext.emptyFn,getDragEl:function(b){var a=this.panelProxy.ghost;if(a){return a.el.dom}},endDrag:function(a){this.panelProxy.hide();this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX;b-=this.startPageY;this.setDelta(a,b)},onInvalidDrop:function(d,b,c){var a=this;if(a.beforeInvalidDrop(d,b,c)!==!1){if(a.cachedTarget){if(a.cachedTarget.isNotifyTarget){a.cachedTarget.notifyOut(a,b,a.dragData)}a.cacheTarget=null}if(a.afterInvalidDrop){a.afterInvalidDrop(b,c)}}}});Ext.define('Ext.layout.component.Dock',{extend:Ext.layout.component.Component,alias:'layout.dock',alternateClassName:'Ext.layout.component.AbstractDock',type:'dock',horzAxisProps:{name:'horz',oppositeName:'vert',dockBegin:'left',dockEnd:'right',horizontal:!0,marginBegin:'margin-left',maxSize:'maxWidth',minSize:'minWidth',pos:'x',setSize:'setWidth',shrinkWrapDock:'shrinkWrapDockWidth',size:'width',sizeModel:'widthModel'},vertAxisProps:{name:'vert',oppositeName:'horz',dockBegin:'top',dockEnd:'bottom',horizontal:!1,marginBegin:'margin-top',maxSize:'maxHeight',minSize:'minHeight',pos:'y',setSize:'setHeight',shrinkWrapDock:'shrinkWrapDockHeight',size:'height',sizeModel:'heightModel'},initializedBorders:-1,horizontalCollapsePolicy:{width:!0,x:!0},verticalCollapsePolicy:{height:!0,y:!0},finishRender:function(){var a=this,b,c;a.callParent();b=a.getRenderTarget();c=a.getDockedItems();a.finishRenderItems(b,c)},isItemBoxParent:function(a){return !0},isItemShrinkWrap:function(a){return !0},noBorderClasses:[Ext.baseCSSPrefix+'docked-noborder-top',Ext.baseCSSPrefix+'docked-noborder-right',Ext.baseCSSPrefix+'docked-noborder-bottom',Ext.baseCSSPrefix+'docked-noborder-left'],noBorderClassesSides:{top:Ext.baseCSSPrefix+'docked-noborder-top',right:Ext.baseCSSPrefix+'docked-noborder-right',bottom:Ext.baseCSSPrefix+'docked-noborder-bottom',left:Ext.baseCSSPrefix+'docked-noborder-left'},borderWidthProps:{top:'border-top-width',right:'border-right-width',bottom:'border-bottom-width',left:'border-left-width'},_itemCls:Ext.baseCSSPrefix+'docked',handleItemBorders:function(){var c=this,b=c.owner,a,l,k=c.lastDockedItems,j=c.borders,m=b.dockedItems.generation,i=c.noBorderClassesSides,n=c.borderWidthProps,f,h,d,g,e,o=c.collapsed;if(c.initializedBorders===m||b.border&&!b.manageBodyBorders||b.collapsed&&b.collapseMode==='mini'){return}c.initializedBorders=m;c.collapsed=!1;c.lastDockedItems=l=c.getLayoutItems();c.collapsed=o;a={top:[],right:[],bottom:[],left:[]};for(f=0,h=l.length;f<h;f++){d=l[f];g=d.dock;if(d.ignoreBorderManagement){continue}if(!a[g].satisfied){a[g].push(d);a[g].satisfied=!0}if(!a.top.satisfied&&g!=='bottom'){a.top.push(d)}if(!a.right.satisfied&&g!=='left'){a.right.push(d)}if(!a.bottom.satisfied&&g!=='top'){a.bottom.push(d)}if(!a.left.satisfied&&g!=='right'){a.left.push(d)}}if(k){for(f=0,h=k.length;f<h;f++){d=k[f];if(!d.destroyed&&!d.ignoreBorderManagement&&!b.manageBodyBorders){d.removeCls(c.noBorderClasses)}}}if(j){for(e in j){if(b.manageBodyBorders&&j[e].satisfied){b.setBodyStyle(n[e],'')}}}for(e in a){h=a[e].length;if(!b.manageBodyBorders){for(f=0;f<h;f++){a[e][f].addCls(i[e])}if(!a[e].satisfied&&!b.bodyBorder||b.bodyBorder===!1){b.addBodyCls(i[e])}else {b.removeBodyCls(i[e])}}else {if(a[e].satisfied){b.setBodyStyle(n[e],'1px')}}}c.borders=a},beforeLayoutCycle:function(a){var g=this,e=g.owner,f=g.sizeModels.shrinkWrap,b=e.shrinkWrapDock,c,d;if(e.collapsed){if(e.collapsedVertical()){d=!0;a.measureDimensions=1}else {c=!0;a.measureDimensions=2}}a.collapsedVert=d;a.collapsedHorz=c;if(d){a.heightModel=f}else {if(c){a.widthModel=f}}b=b===!0?3:b||0;a.shrinkWrapDockHeight=b&1&&a.heightModel.shrinkWrap;a.shrinkWrapDockWidth=b&2&&a.widthModel.shrinkWrap},beginLayout:function(a){var c=this,e=c.owner,l=c.getLayoutItems(),n=a.context,m=l.length,j=c.lastCollapsedState,k,g,f,d,b,h,i;c.callParent(arguments);h=e.getCollapsed();if(h!==j&&j!==undefined){if(c.owner.collapsed){a.isCollapsingOrExpanding=1;e.addClsWithUI(e.collapsedCls)}else {a.isCollapsingOrExpanding=2;e.removeClsWithUI(e.collapsedCls);a.lastCollapsedState=c.lastCollapsedState}}c.lastCollapsedState=h;a.dockedItems=k=[];for(g=0;g<m;g++){f=l[g];if(f.rendered){i=f.dock;d=n.getCmp(f);d.dockedAt={x:0,y:0};d.offsets=b=Ext.Element.parseBox(f.offsets||0);d.horizontal=i==='top'||i==='bottom';b.width=b.left+b.right;b.height=b.top+b.bottom;k.push(d)}}a.bodyContext=a.getEl('body')},beginLayoutCycle:function(a){var b=this,i=a.dockedItems,j=i.length,c=b.owner,d=c.frameBody,h=b.lastHeightModel,e,g,f;b.callParent(arguments);if(b.owner.manageHeight){if(b.lastBodyDisplay){c.body.dom.style.display=b.lastBodyDisplay=''}}else {if(b.lastBodyDisplay!=='inline-block'){c.body.dom.style.display=b.lastBodyDisplay='inline-block'}if(h&&h.shrinkWrap&&!a.heightModel.shrinkWrap){c.body.dom.style.marginBottom=''}}if(a.widthModel.auto){if(a.widthModel.shrinkWrap){c.el.setWidth(null)}c.body.setWidth(null);if(d){d.setWidth(null)}}if(a.heightModel.auto){c.body.setHeight(null);if(d){d.setHeight(null)}}if(a.collapsedVert){a.setContentHeight(0)}else {if(a.collapsedHorz){a.setContentWidth(0)}}for(e=0;e<j;e++){g=i[e].target;f=g.dock;if(f==='right'){g.setLocalX(0)}else {if(f!=='left'){continue}}}},calculate:function(a){var b=this,l=b.measureAutoDimensions(a,a.measureDimensions),j=a.state,e=j.horzDone,f=j.vertDone,g=a.bodyContext,k,c,d,i,h;a.borderInfo||a.getBorderInfo();a.paddingInfo||a.getPaddingInfo();a.frameInfo||a.getFrameInfo();g.borderInfo||g.getBorderInfo();g.paddingInfo||g.getPaddingInfo();if(!a.frameBorder){if(!(k=a.framing)){a.frameBorder=a.borderInfo;a.framePadding=a.paddingInfo}else {a.frameBorder=k.border;a.framePadding=k.padding}}c=!e&&b.createAxis(a,l.contentWidth,a.widthModel,b.horzAxisProps,a.collapsedHorz);d=!f&&b.createAxis(a,l.contentHeight,a.heightModel,b.vertAxisProps,a.collapsedVert);for(i=0,h=a.dockedItems.length;h--;++i){if(c){b.dockChild(a,c,h,i)}if(d){b.dockChild(a,d,h,i)}}if(c&&b.finishAxis(a,c)){j.horzDone=e=c}if(d&&b.finishAxis(a,d)){j.vertDone=f=d}if(e&&f&&b.finishConstraints(a,e,f)){b.finishPositions(a,e,f)}else {b.done=!1}},createAxis:function(b,s,d,a,k){var r=this,e=0,q=r.owner,n=q[a.maxSize],o=q[a.minSize]||0,f=a.dockBegin,h=a.dockEnd,p=a.pos,g=a.size,m=n!=null,t=d.shrinkWrap,l,i,j,c;if(t){if(k){c=0}else {l=b.bodyContext;c=s+l.borderInfo[g]}}else {i=b.frameBorder;j=b.framePadding;e=i[f]+j[f];c=b.getProp(g)-(i[h]+j[h])}return {shrinkWrap:d.shrinkWrap,sizeModel:d,initialBegin:e,begin:e,end:c,collapsed:k,horizontal:a.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:c-e,maxChildSize:0,hasMinMaxConstraints:(o||m)&&d.shrinkWrap,minSize:o,maxSize:m?n:1000000000,bodyPosProp:r.owner.manageHeight?p:a.marginBegin,dockBegin:f,dockEnd:h,posProp:p,sizeProp:g,setSize:a.setSize,shrinkWrapDock:b[a.shrinkWrapDock],sizeModelName:a.sizeModel,dockedPixelsEnd:0}},dockChild:function(c,a,j,k){var f=this,b=c.dockedItems[a.shrinkWrap?j:k],d=b.target,h=d.dock,g=a.sizeProp,e,i;if(d.ignoreParentFrame&&c.isCollapsingOrExpanding){b.clearMarginCache()}if(!b.marginInfo){b.getMarginInfo()}if(h===a.dockBegin){if(a.shrinkWrap){e=f.dockOutwardBegin(c,b,d,a)}else {e=f.dockInwardBegin(c,b,d,a)}}else {if(h===a.dockEnd){if(a.shrinkWrap){e=f.dockOutwardEnd(c,b,d,a)}else {e=f.dockInwardEnd(c,b,d,a)}}else {if(a.shrinkWrapDock){i=b.getProp(g)+b.marginInfo[g];a.maxChildSize=Math.max(a.maxChildSize,i);e=0}else {e=f.dockStretch(c,b,d,a)}}}b.dockedAt[a.posProp]=e},dockInwardBegin:function(g,b,e,a){var j=a.begin,h=a.sizeProp,f=e.ignoreParentFrame,c,i,d;if(f){a.ignoreFrameBegin=b;d=e.dock;c=g.frameBorder[d];j-=c+g.framePadding[d]}if(!e.overlay){i=b.getProp(h)+b.marginInfo[h];a.begin+=i;if(f){a.begin-=c}}return j},dockInwardEnd:function(f,c,b,a){var g=a.sizeProp,h=c.getProp(g)+c.marginInfo[g],e=a.end-h,d;if(!b.overlay){a.end=e}if(b.ignoreParentFrame){a.ignoreFrameEnd=c;d=f.frameBorder[b.dock];e+=d+f.framePadding[b.dock];a.end+=d}return e},dockOutwardBegin:function(g,b,e,a){var c=a.begin,d=a.sizeProp,f;if(a.collapsed){a.ignoreFrameBegin=a.ignoreFrameEnd=b}else {if(e.ignoreParentFrame){a.ignoreFrameBegin=b}}if(!e.overlay){f=b.getProp(d)+b.marginInfo[d];c-=f;a.begin=c}return c},dockOutwardEnd:function(g,b,e,a){var f=a.end,d=a.sizeProp,c;c=b.getProp(d)+b.marginInfo[d];if(a.collapsed){a.ignoreFrameBegin=a.ignoreFrameEnd=b}else {if(e.ignoreParentFrame){a.ignoreFrameEnd=b}}if(!e.overlay){a.end=f+c;a.dockedPixelsEnd+=c}return f},dockStretch:function(h,c,f,a){var n=f.dock,e=a.sizeProp,i=n==='top'||n==='bottom',l=h.frameBorder,j=c.offsets,k=h.framePadding,o=i?'right':'bottom',d=i?'left':'top',g=a.begin+j[d],m,b;if(f.stretch!==!1){b=a.end-g-j[o];if(f.ignoreParentFrame){g-=k[d]+l[d];b+=k[e]+l[e]}m=c.marginInfo;b-=m[e];c[a.setSize](b)}return g},finishAxis:function(h,a){if(isNaN(a.maxChildSize)){return !1}var g=a.begin,e=a.end-g,l=a.collapsed,v=a.setSize,k=a.dockBegin,s=a.dockEnd,n=h.framePadding,t=h.frameBorder,b=t[k],i=h.framing,j=i&&i[k],f=l?0:n[k],w=a.sizeProp,p=a.ignoreFrameBegin,q=a.ignoreFrameEnd,r=h.bodyContext,o=Math.max(b+f-j,0),c,m,d,u;if(a.shrinkWrap){m=a.initialSize;if(i){d=-g+b+f;c=d-j-o}else {c=-g;d=c+f}if(!l){e+=n[w]}if(p){d-=b;c-=b;p.dockedAt[a.posProp]-=f}else {e+=b}if(l){}else {if(q){q.dockedAt[a.posProp]+=n[s]}else {e+=t[s]}}a.size=e;if(!a.horizontal&&!this.owner.manageHeight){u=!1}}else {if(i){d=0;c=g-j-o}else {d=-b;c=g-f-b}m=e}a.delta=d;r[v](m,u);r.setProp(a.bodyPosProp,c);return !isNaN(e)},beforeInvalidateShrinkWrapDock:function(b,c){var a=c.axis.sizeModelName;if(!b[a].constrainedMin){b[a]=Ext.layout.SizeModel.calculated}},afterInvalidateShrinkWrapDock:function(a,c){var b=c.axis,e=c.layout,d;if(a[b.sizeModelName].calculated){d=e.dockStretch(c.ownerContext,a,a.target,b);a.setProp(b.posProp,b.delta+d)}},finishConstraints:function(a,g,e){var o=this,i=o.sizeModels,q=g.shrinkWrap,p=e.shrinkWrap,n=o.owner,r,l,m,c,b,d,k,j,f,h;if(q){d=g.size;k=g.collapsed?0:g.minSize;j=g.maxSize;f=g.maxChildSize;h=Math.max(d,f);if(h>j){b=i.constrainedMax;m=j}else {if(h<k){b=i.constrainedMin;m=k}else {if(d<f){b=i.constrainedDock;n.dockConstrainedWidth=m=f}else {m=d}}}}if(p){d=e.size;k=e.collapsed?0:e.minSize;j=e.maxSize;f=e.maxChildSize;h=Math.max(d,f+d-e.initialSize);if(h>j){c=i.constrainedMax;l=j}else {if(h<k){c=i.constrainedMin;l=k}else {if(d<f){c=i.constrainedDock;n.dockConstrainedHeight=l=f}else {if(!a.collapsedVert&&!n.manageHeight){r=!1;a.bodyContext.setProp('margin-bottom',e.dockedPixelsEnd)}l=d}}}}if(b||c){if(b&&c&&b.constrainedMax&&c.constrainedByMin){a.invalidate({widthModel:b});return !1}if(!a.widthModel.calculatedFromShrinkWrap&&!a.heightModel.calculatedFromShrinkWrap){a.invalidate({widthModel:b,heightModel:c});return !1}}else {o.invalidateAxes(a,g,e)}if(q){a.setWidth(m);if(b){a.widthModel=b}}if(p){a.setHeight(l,r);if(c){a.heightModel=c}}return !0},invalidateAxes:function(l,b,a){var p=this.beforeInvalidateShrinkWrapDock,q=this.afterInvalidateShrinkWrapDock,m=b.end-b.begin,n=a.initialSize,k=b.shrinkWrapDock&&b.maxChildSize<=m,h=a.shrinkWrapDock&&a.maxChildSize<=n,i,o,g,c,e,j,d,f;if(k||h){if(h){a.begin=a.initialBegin;a.end=a.begin+a.initialSize}i=l.dockedItems;for(g=0,o=i.length;g<o;++g){c=i[g];j=c.horizontal;d=null;if(k&&j){f=b.sizeProp;e=m;d=b}else {if(h&&!j){f=a.sizeProp;e=n;d=a}}if(d){e-=c.getMarginInfo()[f];if(e!==c.props[f]){c.invalidate({before:p,after:q,axis:d,ownerContext:l,layout:this})}}}}},finishPositions:function(d,h,i){var c=d.dockedItems,g=c.length,e=h.delta,f=i.delta,b,a;for(b=0;b<g;++b){a=c[b];a.setProp('x',e+a.dockedAt.x);a.setProp('y',f+a.dockedAt.y)}},finishedLayout:function(a){var c=this,b=a.target;c.callParent(arguments);if(!a.animatePolicy){if(a.isCollapsingOrExpanding===1){b.afterCollapse(!1)}else {if(a.isCollapsingOrExpanding===2){b.afterExpand(!1)}}}},getAnimatePolicy:function(b){var d=this,a,c;if(b.isCollapsingOrExpanding===1){a=d.lastCollapsedState}else {if(b.isCollapsingOrExpanding===2){a=b.lastCollapsedState}}if(a==='left'||a==='right'){c=d.horizontalCollapsePolicy}else {if(a==='top'||a==='bottom'){c=d.verticalCollapsePolicy}}return c},getDockedItems:function(c,k){var d=this,i=c==='visual',a=i?Ext.ComponentQuery.query('[rendered]',d.owner.dockedItems.items):d.owner.dockedItems.items,f=a&&a.length&&c!==!1,j,h,b,e,g,l;if(k==null){b=f&&!i?a.slice():a}else {b=[];for(e=0,l=a.length;e<l;++e){h=a[e].dock;g=h==='top'||h==='left';if(k?g:!g){b.push(a[e])}}f=f&&b.length}if(f){j=(c=c||'render')==='render';Ext.Array.sort(b,function(e,f){var a,b;if(j&&(a=d.owner.dockOrder[e.dock])!==(b=d.owner.dockOrder[f.dock])){if(!(a+b)){return a-b}}a=d.getItemWeight(e,c);b=d.getItemWeight(f,c);if(a!==undefined&&b!==undefined){return a-b}return 0})}return b||[]},getItemWeight:function(b,c){var a=b.weight||this.owner.defaultDockWeights[b.dock];return a[c]||a},getLayoutItems:function(){var e=this,c,f,d,b,a;if(e.owner.collapsed){a=e.owner.getCollapsedDockedItems()}else {c=e.getDockedItems('visual');f=c.length;a=[];for(b=0;b<f;b++){d=c[b];if(!d.hidden){a.push(d)}}}return a},measureContentWidth:function(b){var a=b.bodyContext;return a.el.getWidth()-a.getBorderInfo().width},measureContentHeight:function(b){var a=b.bodyContext;return a.el.getHeight()-a.getBorderInfo().height},redoLayout:function(b){var c=this,a=c.owner;if(b.isCollapsingOrExpanding===1){if(a.reExpander){a.reExpander.el.show()}a.addClsWithUI(a.collapsedCls);b.redo(!0)}else {if(b.isCollapsingOrExpanding===2){a.removeClsWithUI(a.collapsedCls);b.bodyContext.redo()}}},getRenderTarget:function(){return this.owner.bodyWrap},renderChildren:function(){var a=this,c=a.getDockedItems(),b=a.getRenderTarget();a.handleItemBorders();a.renderItems(c,b)},renderItems:function(r,x){var j=this,f=j.owner,n={},l=r.length,w=f.body.dom,p=f.bodyWrap.dom,q=!!f.frameSize,v=f.bodyContainer,g,k,t,b,d,e,h,m,s,o,u,a,c,i;if(l){for(a=0;a<l;a++){b=r[a];n[b.id]=b;if(b.dockToEl){t=!0}}g=j.getRenderTarget().dom.childNodes;k=g.length;h=0;for(a=0;a<k;++a){d=g[a];e=d===w;if(e){m=a;break}if(n[d.id]){++h}}m-=h;if(t){e=!1;h=0;g=f.el.dom.childNodes;k=g.length;for(a=0;a<k;a++){d=g[a];if(q){e=d===p||d===v;if(!e&&Ext.fly(d).contains(p)){e=!0;f.bodyContainer=d}}else {e=d===p}if(e){o=a;break}if(n[d.id]){++h}}o-=h}s=u=0;for(a=0;a<l;a++){b=r[a];if(b.dockToEl){i=f.el;c=o+u++;if(b.dock==='right'||b.dock==='bottom'){c++;if(q){c++}}else {if(q&&c>0){c--}}}else {i=x;c=m+s++;if(b.dock==='right'||b.dock==='bottom'){c++}}if(!b.rendered){j.renderItem(b,i,c)}else {if(!j.isValidParent(b,i,c)){j.moveItem(b,i,c)}}}}},undoLayout:function(b){var c=this,a=c.owner;if(b.isCollapsingOrExpanding===1){if(a.reExpander){a.reExpander.el.hide()}a.removeClsWithUI(a.collapsedCls);b.undo(!0)}else {if(b.isCollapsingOrExpanding===2){a.addClsWithUI(a.collapsedCls);b.bodyContext.undo()}}},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(g,c){var f=this,b=f.sizePolicy,a=f.owner.shrinkWrapDock,e,d;if(g.stretch===!1){return b.nostretch}e=g.dock;d=e==='left'||e==='right';a=a===!0?3:a||0;if(d){b=b.vert;a=a&1}else {b=b.horz;a=a&2}if(a){if(!c){c=f.owner.getSizeModel()}if(c[d?'height':'width'].shrinkWrap){return b.shrinkWrap}}return b.stretch},configureItem:function(a,b){this.callParent(arguments);a.addCls(this._itemCls);if(!a.ignoreBorderManagement){a.addClsWithUI(this.getDockCls(a.dock))}},getDockCls:function(a){return 'docked-'+a},afterRemove:function(a){var b;this.callParent(arguments);a.removeCls(this._itemCls);if(!a.ignoreBorderManagement){a.removeClsWithUI(this.getDockCls(a.dock))}b=a.el&&a.el.dom;if(b&&!a.destroying){b.parentNode.removeChild(b)}this.childrenChanged=!0},borderCollapseMap:{},getBorderCollapseTable:function(){var f=this,b=f.borderCollapseMap,e=f.owner,a=e.baseCls,d=e.ui,c;b=b[a]||(b[a]={});c=b[d];if(!c){a+='-'+d+'-outer-border-';b[d]=c=[0,a+'l',a+'b',a+'bl',a+'r',a+'rl',a+'rb',a+'rbl',a+'t',a+'tl',a+'tb',a+'tbl',a+'tr',a+'trl',a+'trb',a+'trbl']}return c}});Ext.define('Ext.theme.neptune.layout.component.Dock',{override:'Ext.layout.component.Dock',noBorderClassTable:[0,Ext.baseCSSPrefix+'noborder-l',Ext.baseCSSPrefix+'noborder-b',Ext.baseCSSPrefix+'noborder-bl',Ext.baseCSSPrefix+'noborder-r',Ext.baseCSSPrefix+'noborder-rl',Ext.baseCSSPrefix+'noborder-rb',Ext.baseCSSPrefix+'noborder-rbl',Ext.baseCSSPrefix+'noborder-t',Ext.baseCSSPrefix+'noborder-tl',Ext.baseCSSPrefix+'noborder-tb',Ext.baseCSSPrefix+'noborder-tbl',Ext.baseCSSPrefix+'noborder-tr',Ext.baseCSSPrefix+'noborder-trl',Ext.baseCSSPrefix+'noborder-trb',Ext.baseCSSPrefix+'noborder-trbl'],edgeMasks:{top:8,right:4,bottom:2,left:1},handleItemBorders:function(){var d=this,i=0,o=8,n=4,l=2,m=1,r=d.owner,s=r.bodyBorder,j=r.border,x=d.collapsed,y=d.edgeMasks,k=d.noBorderClassTable,v=r.dockedItems.generation,a,q,u,b,t,w,g,p,h,c,f,e;if(d.initializedBorders===v){return}f=[];e=[];q=d.getBorderCollapseTable();k=d.getBorderClassTable?d.getBorderClassTable():k;d.initializedBorders=v;d.collapsed=!1;u=d.getDockedItems('visual');d.collapsed=x;for(t=0,w=u.length;t<w;t++){g=u[t];if(g.ignoreBorderManagement){continue}p=g.dock;c=b=0;f.length=0;e.length=0;if(p!=='bottom'){if(i&o){a=g.border}else {a=j;if(a!==!1){b+=o}}if(a===!1){c+=o}}if(p!=='left'){if(i&n){a=g.border}else {a=j;if(a!==!1){b+=n}}if(a===!1){c+=n}}if(p!=='top'){if(i&l){a=g.border}else {a=j;if(a!==!1){b+=l}}if(a===!1){c+=l}}if(p!=='right'){if(i&m){a=g.border}else {a=j;if(a!==!1){b+=m}}if(a===!1){c+=m}}if((h=g.lastBorderMask)!==c){g.lastBorderMask=c;if(h){e[0]=k[h]}if(c){f[0]=k[c]}}if((h=g.lastBorderCollapse)!==b){g.lastBorderCollapse=b;if(h){e[e.length]=q[h]}if(b){f[f.length]=q[b]}}if(e.length){g.removeCls(e)}if(f.length){g.addCls(f)}i|=y[p]}c=b=0;f.length=0;e.length=0;if(i&o){a=s}else {a=j;if(a!==!1){b+=o}}if(a===!1){c+=o}if(i&n){a=s}else {a=j;if(a!==!1){b+=n}}if(a===!1){c+=n}if(i&l){a=s}else {a=j;if(a!==!1){b+=l}}if(a===!1){c+=l}if(i&m){a=s}else {a=j;if(a!==!1){b+=m}}if(a===!1){c+=m}if((h=d.lastBodyBorderMask)!==c){d.lastBodyBorderMask=c;if(h){e[0]=k[h]}if(c){f[0]=k[c]}}if((h=d.lastBodyBorderCollapse)!==b){d.lastBodyBorderCollapse=b;if(h){e[e.length]=q[h]}if(b){f[f.length]=q[b]}}if(e.length){r.removeBodyCls(e)}if(f.length){r.addBodyCls(f)}},onRemove:function(a){var b=this,d=a.lastBorderMask,c=a.lastBorderCollapse;if(!a.destroyed&&!a.ignoreBorderManagement){if(d){a.lastBorderMask=0;a.removeCls(b.noBorderClassTable[d])}if(c){a.lastBorderCollapse=0;a.removeCls(b.getBorderCollapseTable()[c])}}b.callParent([a])}});Ext.define('Ext.util.Memento',function(){function captureOne(d,c,a,b){d[b?b+a:a]=c[a]}function removeOne(b,c,a){delete b[a]}function restoreOne(e,f,a,b){var d=b?b+a:a,c=e[d];if(c||e.hasOwnProperty(d)){restoreValue(f,a,c)}}function restoreValue(a,c,b){if(Ext.isDefined(b)){a[c]=b}else {delete a[c]}}function doMany(f,c,e,a,d){var b,g;if(c){if(Ext.isArray(a)){for(b=0,g=a.length;b<g;b++){f(c,e,a[b],d)}}else {f(c,e,a,d)}}}return {data:null,target:null,constructor:function(a,b){this.data={};if(a){this.target=a;if(b){this.capture(b)}}},capture:function(d,c,b){var a=this;doMany(captureOne,a.data||(a.data={}),c||a.target,d,b)},remove:function(a){doMany(removeOne,this.data,null,a)},restore:function(a,d,c,b){doMany(restoreOne,this.data,c||this.target,a,b);if(d!==!1){this.remove(a)}},restoreAll:function(c,d){var e=this,f=d||this.target,b=e.data,a;c=c!==!1;for(a in b){if(b.hasOwnProperty(a)){restoreValue(f,a,b[a]);if(c){delete b[a]}}}}}}());Ext.define('Ext.container.DockingContainer',{isDockingContainer:!0,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,addDocked:function(c,d){var b=this,k=b.rendered,f=0,g=b.dockedItems,i=g.getCount(),e,h,a,j;c=b.prepareItems(c);j=c.length;if(k){Ext.suspendLayouts()}if(d===undefined){d=i}else {d=Math.min(d,i)}for(;f<j;f++){a=c[f];if(a.isDetached){a.reattachToBody()}a.dock=a.dock||'top';if(a.dock==='left'||a.dock==='right'){b.horizontalDocks++}e=d+f;g.insert(e,a);h=!!a.instancedCmp;delete a.instancedCmp;a.onAdded(b,e,h);delete a.$initParent;if(b.onDockedAdd!==Ext.emptyFn){b.onDockedAdd(a)}if(b.hasListeners.dockedadd){b.fireEvent('dockedadd',b,a,e)}}if(b.rendered){b.updateLayout();Ext.resumeLayouts(!0)}return c},destroyDockedItems:function(){var a=this.dockedItems,b;if(a){while(b=a.first()){this.removeDocked(b,{destroy:!0})}}},doRenderDockedItems:function(g,e,f){var d=e.$comp,a=d.componentLayout,h=d.tabGuard&&d.lookupTpl('tabGuardTpl'),b,c;if(a.getDockedItems){b=a.getDockedItems('render',!f);c=b&&a.getItemsRenderTree(b);if(c){Ext.DomHelper.generateMarkup(c,g)}}},getDockedComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.dockedItems.get(a)},getDockedItems:function(b,c){var a=this.getComponentLayout().getDockedItems('render',c);if(b&&a.length){a=Ext.ComponentQuery.query(b,a)}return a},getDockingRefItems:function(e,d){var b=e&&'*,* *',a=this.getDockedItems(b,!0),c;a.push.apply(a,d);c=this.getDockedItems(b,!1);a.push.apply(a,c);return a},initDockingItems:function(){var b=this,a=b.dockedItems;if(!a||!a.isMixedCollection){b.dockedItems=new Ext.util.ItemCollection();if(a){b.addDocked(a)}}},insertDocked:function(b,a){this.addDocked(a,b)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(a,c){var b=this,e,f,d,g;if(!b.dockedItems.contains(a)){return a}if(c==null){d=b.autoDestroy}else {if(typeof c==='boolean'){d=c}else {d='destroy' in c&&c.destroy;g='detach' in c&&c.detach}}if(a.dock==='left'||a.dock==='right'){b.horizontalDocks--}e=b.componentLayout;f=e&&b.rendered;if(f){e.onRemove(a)}b.dockedItems.remove(a);if(!a.destroyed){a.onRemoved(a.destroying||d)}b.onDockedRemove(a);if(d){a.destroy()}else {if(!b.destroyed){if(f){e.afterRemove(a)}if(g&&a.rendered){a.detachFromBody()}}}if(b.hasListeners.dockedremove){b.fireEvent('dockedremove',b,a)}if(!b.destroying){b.updateLayout()}return a},moveDocked:function(a,c){var b=this;if(b.rendered){Ext.suspendLayouts()}b.removeDocked(a,{destroy:!1,detach:!0});a.dock=c;b.addDocked(a);if(b.rendered){if(a.frame){a.updateFrame()}Ext.resumeLayouts(!0)}},setupDockingRenderTpl:function(a){a.renderDockedItems=this.doRenderDockedItems}});Ext.define('Ext.panel.Panel',{extend:Ext.container.Container,alias:'widget.panel',alternateClassName:'Ext.Panel',mixins:{docking:Ext.container.DockingContainer},childEls:['bodyWrap','body'],renderTpl:['<tpl if="headingText">','<div id="{id}-headingEl" data-ref="headingEl" role="heading"',' class="',Ext.baseCSSPrefix,'hidden-clip" style="height:0">','{headingText}','</div>','</tpl>','<tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'before\'); %}</tpl>','<div id="{id}-bodyWrap" data-ref="bodyWrap" class="{baseCls}-bodyWrap"','<tpl if="bodyWrapAriaAttributes">','<tpl foreach="bodyWrapAriaAttributes"> {$}="{.}"</tpl>','<tpl else>',' role="presentation"','</tpl>','>','{% this.renderDockedItems(out,values,0); %}','<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyAriaAttributes">','<tpl foreach="bodyAriaAttributes"> {$}="{.}"</tpl>','<tpl else>',' role="presentation"','</tpl>','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>','{%this.renderContainer(out,values);%}','</div>','{% this.renderDockedItems(out,values,1); %}','</div>','<tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'after\'); %}</tpl>'],headerPosition:'top',iconAlign:'left',titleAlign:'left',titleRotation:'default',titlePosition:0,headerConfigs:{glyph:1,icon:1,iconAlign:1,iconCls:1,title:1,titleAlign:1,titlePosition:1,titleRotation:1},beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titlePosition:null,titleRotation:null},animCollapse:Ext.enableFx,border:!0,closable:!1,closeAction:'destroy',closeToolText:'Close panel',collapsed:!1,collapsedCls:'collapsed',collapseFirst:!0,collapsible:undefined,collapseToolText:'Collapse panel',expandToolText:'Expand panel',constrain:!1,constrainHeader:!1,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:!0,frame:!1,frameHeader:!0,hideCollapseTool:!1,manageHeight:!0,maskElement:'el',minButtonWidth:75,preventHeader:!1,maintainTitlePosition:!1,shrinkWrapDock:!1,titleCollapse:undefined,baseCls:Ext.baseCSSPrefix+'panel',bodyPosProps:{x:'x',y:'y'},componentLayout:'dock',contentPaddingProperty:'bodyPadding',emptyArray:[],isPanel:!0,defaultBindProperty:'title',addBodyCls:function(c){var a=this,b=a.rendered?a.body:a.getProtoBody();b.addCls(c);return a},addTool:function(c){if(!Ext.isArray(c)){c=[c]}var d=this,b=d.header,g=c.length,f=d.tools,e,a;if(!b||!b.isHeader){b=null;if(!f){d.tools=f=[]}}for(e=0;e<g;e++){a=c[e];if(typeof a!=='string'&&!a.isTool){a=Ext.apply({},a)}a.toolOwner=d;if(b){b.addTool(a)}else {f.push(a)}}d.updateHeader()},addTools:Ext.emptyFn,getClosable:function(){return this.closable},setClosable:function(a){var b=this,c=b.tab;a=!!a;if(b.closable!==a){b.closable=a;if(c){c.setClosable(a)}}},setCollapsible:function(c){var b=this,d=b.collapsible,a=b.collapseTool;b.collapsible=c;if(c&&!d){b.updateCollapseTool();a=b.collapseTool;if(a){a.show()}}else {if(!c&&d){if(a){a.hide()}}}},addUIClsToElement:function(b){var a=this,c=a.callParent(arguments);a.addBodyCls([Ext.baseCSSPrefix+b,a.baseCls+'-body-'+b,a.baseCls+'-body-'+a.ui+'-'+b]);return c},afterCollapse:function(c){var a=this,b=a.ownerLayout;a.isCollapsingOrExpanding=0;a.updateCollapseTool();if(c){a.removeCls(Ext.baseCSSPrefix+'animating-size')}if(b){b.afterCollapse(a,c)}a.setHiddenDocked();a.fireEvent('collapse',a)},afterExpand:function(c){var a=this,b=a.ownerLayout;a.isCollapsingOrExpanding=0;a.updateCollapseTool();if(c){a.removeCls(Ext.baseCSSPrefix+'animating-size')}if(b){b.afterExpand(a,c)}a.fireEvent('expand',a);a.fireHierarchyEvent('expand')},doDestroy:function(){var a=this;if(a.slideOutTask){a.slideOutTask.cancel()}Ext.destroy(a.placeholder,a.ghostPanel,a.dd,a.accordionHeaderKeyNav,a.accordionBodyKeyNav,a.defaultButtonKeyNav);a.destroyDockedItems();a.callParent()},beforeRender:function(){var a=this,b;a.getProtoBody();a.callParent();a.initTools();if(!(a.preventHeader||a.header===!1)||a.isViewportBorderChild){a.updateHeader()}a.afterHeaderInit=!0;if(a.collapsed){if(a.isPlaceHolderCollapse()){if(!a.hidden){a.setHiddenState(!0);a.preventCollapseFire=!0;a.placeholderCollapse();delete a.preventCollapseFire;b=a.collapsed;a.collapsed=!1}}else {a.beginCollapse();a.addClsWithUI(a.collapsedCls)}}if(b){a.collapsed=b}},getMemento:function(a){var b=this;if(a&&typeof a==='string'){a+='Memento';return b[a]||(b[a]=new Ext.util.Memento(b))}},beginCollapse:function(){var a=this,g=a.lastBox,f=a.rendered,d=a.getMemento('collapse'),e=a.getSizeModel(),b=a.header,c;d.capture(['height','minHeight','width','minWidth']);if(g){d.capture(a.restoreDimension(),g,'last.')}if(a.collapsedVertical()){if(e.width.shrinkWrap){a.width=f?a.getWidth():a.width||a.minWidth||100}delete a.height;a.minHeight=0}else {if(a.collapsedHorizontal()){if(e.height.shrinkWrap){a.height=f?a.getHeight():a.height||a.minHeight||100}delete a.width;a.minWidth=0}}if(a.ownerCt){a.ownerCt.getLayout().beginCollapse(a)}if(!a.isPlaceHolderCollapse()&&b!==!1){if(b===(c=a.getReExpander())){b.collapseImmune=!0;b.getInherited().collapseImmune=!0;b.addClsWithUI(a.getHeaderCollapsedClasses(b));if(b.rendered){b.updateFrame()}}else {if(c.el){c.el.show();c.hidden=!1}}}if(a.resizer){a.resizer.disable()}if(a.rendered){a.ariaEl.dom.setAttribute('aria-expanded',!1);if(a.isAccordionPanel){a.body.dom.setAttribute('aria-hidden',!0)}}},beginDrag:function(){if(this.floatingDescendants){this.floatingDescendants.hide()}},beginExpand:function(){var a=this,f=a.lastBox,c=a.getMemento('collapse'),e=a.restoreDimension(),b=a.header,d;if(c){c.restore(['minHeight','minWidth',e]);if(f){c.restore(e,!0,f,'last.')}}if(a.ownerCt){a.ownerCt.getLayout().beginExpand(a)}if(!a.isPlaceHolderCollapse()&&b!==!1){if(b===(d=a.getReExpander())){delete b.collapseImmune;delete b.getInherited().collapseImmune;b.removeClsWithUI(a.getHeaderCollapsedClasses(b));if(b.rendered){b.expanding=!0;b.updateFrame();delete b.expanding}}else {d.hidden=!0;d.el.hide()}}if(a.resizer){a.resizer.enable()}if(a.rendered){a.ariaEl.dom.setAttribute('aria-expanded',!0);if(a.isAccordionPanel){a.body.dom.setAttribute('aria-hidden',!1)}}},bridgeToolbars:function(){var a=this,b=[],d=a.minButtonWidth,c,f,e;function initToolbar(b,e,d,c){if(Ext.isArray(b)){b={xtype:'toolbar',items:b}}else {if(!b.isComponent){b=Ext.apply({},b)}}if(!b.xtype){b.xtype='toolbar'}b.dock=e;if(c){b.focusableContainer=!1}if(d){b.layout=Ext.apply({pack:{left:'start',center:'center'}[a.buttonAlign]||'end'},b.layout)}return b}if(a.tbar){b.push(initToolbar(a.tbar,'top'));a.tbar=null}if(a.bbar){b.push(initToolbar(a.bbar,'bottom'));a.bbar=null}if(a.buttons){a.fbar=a.buttons;a.buttons=null;e=!0}if(a.fbar){c=initToolbar(a.fbar,'bottom',!0,e);c.ui='footer';if(d){f=c.defaults;c.defaults=function(c){var a=f||{},b=!c.xtype||c.isButton,e;if(!b){e=Ext.ClassManager.getByAlias('widget.'+c.xtype);if(e){b=e.prototype.isButton}}if(b&&!('minWidth' in a)){a=Ext.apply({minWidth:d},a)}return a}}b.push(c);a.fbar=null}if(a.lbar){b.push(initToolbar(a.lbar,'left'));a.lbar=null}if(a.rbar){b.push(initToolbar(a.rbar,'right'));a.rbar=null}if(a.dockedItems){if(a.dockedItems.isMixedCollection){a.addDocked(b)}else {if(!Ext.isArray(a.dockedItems)){a.dockedItems=[a.dockedItems]}a.dockedItems=a.dockedItems.concat(b)}}else {a.dockedItems=b}},close:function(){if(this.fireEvent('beforeclose',this)!==!1){this.doClose()}},collapse:function(c,b){var a=this,f=c||a.collapseDirection,g=a.ownerCt,e=a.ownerLayout,d=a.rendered;if(a.isCollapsingOrExpanding){return a}if(arguments.length<2){b=a.animCollapse}if(a.collapsed||a.fireEvent('beforecollapse',a,c,b)===!1){return a}if(e&&e.onBeforeComponentCollapse){if(e.onBeforeComponentCollapse(a)===!1){return a}}if(d&&g&&a.isPlaceHolderCollapse()){return a.placeholderCollapse(c,b)}a.collapsed=f;if(d){a.beginCollapse()}if(a.containsFocus&&a.collapseTool){a.collapseTool.focus()}a.getInherited().collapsed=!0;a.fireHierarchyEvent('collapse');if(d){a.doCollapseExpand(1,b)}return a},collapsedHorizontal:function(){var a=this.getCollapsed();return a==='left'||a==='right'},collapsedVertical:function(){var a=this.getCollapsed();return a==='top'||a==='bottom'},convertCollapseDir:function(a){return a.substr(0,1)},createGhost:function(d){var a=this,b=a.header,c=a.frame&&!a.alwaysFramed;return {xtype:'panel',hidden:!1,header:b?{titleAlign:b.getTitleAlign()}:null,ui:c?a.ui.replace(/-framed$/,''):a.ui,id:a.id+'-ghost',renderTo:Ext.getBody(),resizable:!1,draggable:!1,closable:!1,focusable:!1,floating:!0,alignOnScroll:!1,shadow:!1,frame:c,shim:a.shim,alwaysFramed:a.alwaysFramed,overlapHeader:a.overlapHeader,headerPosition:a.getHeaderPosition(),titleRotation:a.getTitleRotation(),baseCls:a.baseCls,getRefOwner:function(){return a.getRefOwner()},cls:a.baseCls+'-ghost '+(d||'')}},createReExpander:function(d,i){var a=this,h=d==='left',f=d==='right',e=h||f,g=a.ownerCt,c=a.header,b=Ext.apply({hideMode:'offsets',title:a.getTitle(),titleAlign:a.getTitleAlign(),titlePosition:a.getTitlePosition(),vertical:e,textCls:a.headerTextCls,icon:a.getIcon(),iconCls:a.getIconCls(),iconAlign:a.getIconAlign(),glyph:a.getGlyph(),baseCls:a.self.prototype.baseCls+'-header',ui:a.ui,frame:a.frame&&a.frameHeader,ignoreParentFrame:a.frame||a.overlapHeader,ignoreBorderManagement:a.frame||a.ignoreHeaderBorderManagement,indicateDrag:a.draggable,collapseImmune:!0,ariaRole:a.ariaRole,preventRefocus:!0,ownerCt:g&&a.collapseMode==='placeholder'?g:a,ownerLayout:a.componentLayout,forceOrientation:!0,margin:a.margin,defaultFocus:'tool[isDefaultExpandTool]'},i);if(a.collapseMode==='mini'){if(e){b.width=1}else {b.height=1}}if(c){Ext.apply(b,{focusableContainer:c.focusableContainer,activeChildTabIndex:c.activeChildTabIndex,inactiveChildTabIndex:c.inactiveChildTabIndex,allowFocusingDisabledChildren:c.allowFocusingDisabledChildren})}if(!a.hideCollapseTool){if(!a.maintainTitlePosition&&(h||f&&a.isPlaceHolderCollapse())){b.titlePosition=1}b.tools=[{xtype:'tool',type:'expand-'+a.getOppositeDirection(d),isDefaultExpandTool:!0,uiCls:['top'],handler:a.toggleCollapse,scope:a,tooltip:a.expandToolText}]}b=new Ext.panel.Header(b);b.addClsWithUI(a.getHeaderCollapsedClasses(b));b.expandTool=b.down('tool[isDefaultExpandTool=true]');return b},doClose:function(){this.fireEvent('close',this);this[this.closeAction]()},doCollapseExpand:function(e,b){var a=this,d=a.animCollapse,c=a.ownerLayout;a.animCollapse=b;a.isCollapsingOrExpanding=e;if(b){a.addCls(Ext.baseCSSPrefix+'animating-size')}if(c&&!b){c.onContentChange(a)}else {a.updateLayout({isRoot:!0})}a.animCollapse=d;return a},endDrag:function(){if(this.floatingDescendants){this.floatingDescendants.show()}},expand:function(b){var a=this,c=a.ownerLayout,d=a.rendered;if(a.isCollapsingOrExpanding){return a}if(!arguments.length){b=a.animCollapse}if(!a.collapsed&&!a.floatedFromCollapse){return a}if(a.fireEvent('beforeexpand',a,b)===!1){return a}if(c&&c.onBeforeComponentExpand){if(c.onBeforeComponentExpand(a)===!1){return a}}delete a.getInherited().collapsed;if(d&&a.isPlaceHolderCollapse()){return a.placeholderExpand(b)}a.restoreHiddenDocked();if(d){a.beginExpand()}a.collapsed=!1;if(a.rendered){a.doCollapseExpand(2,b)}return a},findReExpander:function(g){var f=this,c=Ext.Component,d=f.dockedItems.items,e=d.length,a,b;if(f.collapseMode==='mini'){return}switch(g){case c.DIRECTION_TOP:case c.DIRECTION_BOTTOM:for(b=0;b<e;b++){a=d[b];if(!a.hidden){if(a.isHeader&&(!a.dock||a.dock==='top'||a.dock==='bottom')){return a}}};break;case c.DIRECTION_LEFT:case c.DIRECTION_RIGHT:for(b=0;b<e;b++){a=d[b];if(!a.hidden){if(a.isHeader&&(a.dock==='left'||a.dock==='right')){return a}}};break;default:throw new Error('Panel#findReExpander must be passed a valid collapseDirection');}},floatCollapsedPanel:function(){var a=this,d=a.placeholder,j=a.splitter,b=Ext.util.Region.from(d.getBox(!1,!0)),i=Ext.panel.Panel.floatCls,h=a.collapsed,g=a.ownerCt||a,f,c,e={mouseleave:a.onMouseLeaveFloated,mouseenter:a.onMouseEnterFloated,scope:a,destroyable:!0};if(a.isSliding){return}if(a.el.hasCls(i)){a.slideOutFloatedPanel();return}a.isSliding=!0;d.el.hide();d.hidden=!0;a.el.show();a.setHiddenState(!1);a.collapsed=!1;g.updateLayout();d.el.show();d.hidden=!1;a.el.hide();a.setHiddenState(!0);a.collapsed=h;g.updateLayout();c=a.getBox(!1,!0);if(a.fireEvent('beginfloat',a)===!1){return}a.slideOutTask=a.slideOutTask||new Ext.util.DelayedTask(a.slideOutFloatedPanel,a);a.pointerLeaveListener=Ext.getDoc().on({mousedown:a.onFloatedPointerEvent,mousemove:a.onFloatedPointerEvent,scope:a,destroyable:!0});if(!a.placeholderListener){a.placeholderListener=d.on({resize:a.onPlaceholderResize,scope:a,destroyable:!0})}a.phHoverListeners=d.el.on(e);a.elHoverListeners=a.el.on(e);a.el.addCls(i);a.floated=h;if(a.collapseTool){a.collapseTool.el.hide()}if(j){b=b.union(j.getBox(!1,!0))}switch(a.collapsed){case 'top':a.width=b.width;a.setLocalXY(c.x,c.y+b.height);break;case 'right':a.height=b.height;a.setLocalXY(c.x-b.width,c.y);break;case 'bottom':a.width=b.width;a.setLocalXY(c.x,c.y-b.height);break;case 'left':a.height=b.height;a.setLocalXY(c.x+b.width,c.y);break;}f=a.convertCollapseDir(a.collapsed);a.floatedFromCollapse=a.collapsed;a.collapsed=!1;a.setHiddenState(!1);a.el.slideIn(f,{preserveScroll:!0,duration:Ext.Number.from(a.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){a.isSliding=!1;a.fireEvent('endfloat',a);a.fireEvent('float',a)}}})},onFloatedPointerEvent:function(b){var a=this;if(a.owns(b)||a.placeholder.owns(b)||a.splitter&&a.splitter.owns(b)||a.floatCollapsedPanel&&a.el.getRegion().contains(b.getPoint())){a.slideOutTask.cancel()}else {a.slideOutTask.delay(500)}},onMouseEnterFloated:function(a){this.slideOutTask.cancel()},onMouseLeaveFloated:function(b){var a=b.getRelatedTarget();if(a&&(this.owns(a)||this.placeholder.owns(a))){return}this.slideOutTask.delay(500)},onPlaceholderResize:function(g,d,c){var a=this,e=a.splitter,f=a.getBox(!1,!0),b=Ext.util.Region.from(g.getBox(!1,!0));if(e){b=b.union(e.getBox(!1,!0))}switch(a.floated){case 'top':a.width=d;a.setLocalY(b.y+b.height);break;case 'right':a.height=c;a.setLocalX(b.x-f.width);break;case 'bottom':a.width=d;a.setLocalY(b.y-f.height);break;case 'left':a.height=c;a.setLocalX(b.x+b.width);break;}a.updateLayout({isRoot:!0})},getAnimationProps:function(){var a=this,b;b=a.callParent();if(typeof a.animCollapseDuration==='number'){b.duration=a.animCollapseDuration}else {if(typeof a.animCollapse==='number'){b.duration=a.animCollapse}}return b},getCollapsed:function(){var a=this;if(a.collapsed===!0){return a.collapseDirection}return a.collapsed},getCollapsedDockedItems:function(){var a=this;return a.header===!1||(a.collapseMode==='placeholder'?a.emptyArray:[a.getReExpander()])},getComponent:function(b){var a=this.callParent(arguments);if(a===undefined&&!Ext.isNumber(b)){a=this.getDockedComponent(b)}return a},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(d){var a=this,c=a.collapsedCls,b;b=[c,c+'-'+d.getDockName()];if(a.border&&(!a.frame||a.frame&&Ext.supports.CSS3BorderRadius)){b.push(c+'-border-'+d.getDockName())}return b},getOppositeDirection:function(b){var a=Ext.Component;switch(b){case a.DIRECTION_TOP:return a.DIRECTION_BOTTOM;case a.DIRECTION_RIGHT:return a.DIRECTION_LEFT;case a.DIRECTION_BOTTOM:return a.DIRECTION_TOP;case a.DIRECTION_LEFT:return a.DIRECTION_RIGHT;}},getPlaceholder:function(g){var a=this,d=g||a.collapseDirection,f=null,b=a.placeholder,e=a.floatable,c=a.titleCollapse;if(!b){if(e||a.collapsible&&c){f={click:{fn:function(h,f){var d=b.expandTool;if(!(d&&d.el.dom.contains(arguments[1]))){a[!c&&e?'floatCollapsedPanel':'toggleCollapse']()}},element:'el',scope:a}}}a.placeholder=b=Ext.widget(a.createReExpander(d,{id:a.id+'-placeholder',listeners:f}))}if(!b.placeholderFor){if(!b.isComponent){a.placeholder=b=a.lookupComponent(b)}Ext.applyIf(b,{margin:a.margin,placeholderFor:a,synthetic:!0});b.addCls([Ext.baseCSSPrefix+'region-collapsed-placeholder',Ext.baseCSSPrefix+'region-collapsed-'+d+'-placeholder',a.collapsedCls])}return b},getProtoBody:function(){var a=this,b=a.protoBody;if(!b){a.protoBody=b=new Ext.util.ProtoElement({cls:a.bodyCls,style:a.bodyStyle,clsProp:'bodyCls',styleProp:'bodyStyle',styleIsText:!0})}return b},getReExpander:function(f){var a=this,b=f||a.collapseDirection,c=a.reExpander||a.findReExpander(b),e=a.titleCollapse,d=null;a.expandDirection=a.getOppositeDirection(b);if(!c){if(e){d={click:{fn:a.toggleCollapse,element:'el',scope:a}}}a.reExpander=c=a.createReExpander(b,{dock:b,cls:Ext.baseCSSPrefix+'docked '+a.baseCls+'-'+a.ui+'-collapsed',isCollapsedExpander:!0,listeners:d});a.dockedItems.insert(0,c)}return c},getRefItems:function(c){var b=this.placeholder,a;if(b&&b.isComponent){a=[b];if(c&&b.getRefItems){a.push.apply(a,b.getRefItems(c))}}else {a=[]}a.push.apply(a,this.getDockingRefItems(c,this.callParent([c])));return a},getState:function(){var b=this,a=b.callParent()||{},f=b.collapsed,e=b.floated,c,d;if(e){b.collapsed=e}a=b.addPropertyToState(a,'collapsed');if(e){b.collapsed=f}if(b.getCollapsed()){c=b.getMemento('collapse').data;a=b.addPropertyToState(a,'collapsed',c);d=b.isPlaceHolderCollapse();if(b.collapsedVertical()){if(d){a=b.addPropertyToState(a,'height');delete a.width}else {delete a.height;if(c){a=b.addPropertyToState(a,'height',c.height)}}}else {if(d){a=b.addPropertyToState(a,'width');delete a.height}else {delete a.width;if(c){a=b.addPropertyToState(a,'width',c.width)}}}}return a},applyState:function(a){var d=this,c={},b;if(a){b=a.collapsed;if(b){c=d.getMemento('collapse');Ext.Object.merge(c.data,b);a.collapsed=!0}d.callParent([a])}},ghost:function(l){var a=this,j=a.el,b=a.ghostPanel,e=a.getBox(),d=a.header,c,h,i,f,g,k;Ext.suspendLayouts();if(!b){a.ghostPanel=b=Ext.widget(a.createGhost(l));b.el.dom.removeAttribute('tabIndex')}else {b.el.show()}b.setHiddenState(!1);b.setXY([e.x,e.y]);b.setSize(e.width,e.height);b.floatParent=a.floatParent;if(d&&!a.preventHeader&&a.lastHeaderGen!==d.items.generation){c=b.header;h=c.query('tool');for(k=h.length;k--;){c.remove(h[k])}c.setTitlePosition(0);b.addTool(a.ghostTools());b.setTitle(a.getTitle());c.setTitlePosition(d.getTitlePosition());c.setIconAlign(d.getIconAlign());c.setTitleAlign(d.getTitleAlign());f=a.getIconCls();if(f){b.setIconCls(f)}else {i=a.getIcon();if(i){b.setIcon(i)}else {g=a.getGlyph();if(g){b.setGlyph(g)}}}c.addCls(Ext.baseCSSPrefix+'header-ghost');a.lastHeaderGen=d.items.generation}Ext.resumeLayouts(!0);a.elVisMode=j.getVisibilityMode();j.setVisibilityMode(Ext.Element.CLIP);j.hide();return b},ghostTools:function(){var c=[],d=this.header,b=d?d.query('tool[hidden=false]'):[],a,e,f;if(b.length){a=0;e=b.length;for(;a<e;a++){f=b[a];c.push({type:f.type,focusable:!1})}}else {c=[{type:'placeholder'}]}return c},initBodyBorder:function(){var a=this;if(a.frame&&a.bodyBorder){if(!Ext.isNumber(a.bodyBorder)){a.bodyBorder=1}a.getProtoBody().setStyle('border-width',this.unitizeBox(a.bodyBorder))}},initBodyStyles:function(){var a=this,b=a.getProtoBody();if(a.bodyPadding!==undefined){if(a.layout.managePadding){b.setStyle('padding',0)}else {b.setStyle('padding',this.unitizeBox(a.bodyPadding===!0?5:a.bodyPadding))}}a.initBodyBorder()},initBorderProps:function(){var a=this;if(a.frame&&a.border&&a.bodyBorder===undefined){a.bodyBorder=!1}if(a.frame&&a.border&&(a.bodyBorder===!1||a.bodyBorder===0)){a.manageBodyBorders=!0}},initComponent:function(){var a=this;if(a.collapsible){a.addStateEvents(['expand','collapse'])}if(a.unstyled){a.setUI('plain')}if(a.frame){a.setUI(a.ui+'-framed')}a.bridgeToolbars();a.initBorderProps();a.callParent();a.collapseDirection=a.collapseDirection||a.getHeaderPosition()||Ext.Component.DIRECTION_TOP;if(typeof a.animCollapse==='number'){a.animCollapseDuration=a.animCollapse}a.hiddenOnCollapse=new Ext.dom.CompositeElement()},initItems:function(){this.callParent();this.initDockingItems()},initRenderData:function(){var a=this,c=a.bodyWrapAriaRole,d=a.bodyAriaRole,b;b=a.callParent();a.initBodyStyles();a.protoBody.writeTo(b);delete a.protoBody;if(a.headingText){b.headingText=a.headingText;a.addChildEl('headingEl')}if(c){b.bodyWrapAriaAttributes={role:c};if(!a.ariaStaticRoles[c]&&a.bodyWrapAriaRenderAttributes){Ext.apply(b.bodyWrapAriaAttributes,a.bodyWrapAriaRenderAttributes)}}if(d){b.bodyAriaAttributes={role:d};if(!a.ariaStaticRoles[d]&&a.bodyAriaRenderAttributes){Ext.apply(b.bodyAriaAttributes,a.bodyAriaRenderAttributes)}}return b},calculateConstrainedPosition:function(d,g,h,a){var c=this,f=c.header,b,e;if(c.constrainHeader){b=f.lastBox;if(a){if(!f.vertical){a=[a[0],b?b.height:a[1]]}else {a=[b?b.width:a[0],a[1]]}}else {if(b){a=[b.width,b.height]}}e=c.floatParent;d=d||c.constrainTo||(e?e.getTargetEl():null)||c.container||c.el.parent()}return c.callParent([d,g,h,a])},initTools:function(){var a=this,e=a.tools,f=e&&e.length,d,c,b;a.tools=[];if(f){for(d=0;d<f;++d){b=e[d];if(typeof b!=='string'&&!b.isTool){b=Ext.apply({},b)}a.tools.push(b);b.toolOwner=a}}if(a.collapsible&&!(a.hideCollapseTool||a.header===!1||a.preventHeader)){a.updateCollapseTool();if(a.collapseFirst){a.tools.unshift(a.collapseTool)}}a.addTools();if(a.pinnable){a.initPinnable()}if(a.closable){a.addClsWithUI('closable');c={xtype:'tool',type:'close',scope:a,handler:a.close,tooltip:a.closeToolText};if(a.isAccordionPanel||a.disableCloseToolFocus){c.focusable=!1;c.ariaRole='presentation'}a.addTool(c)}if(a.collapseTool&&!a.collapseFirst){a.addTool(a.collapseTool)}},isLayoutRoot:function(){if(this.floatedFromCollapse){return !0}return this.callParent()},isPlaceHolderCollapse:function(){return this.collapseMode==='placeholder'},isVisible:function(b){var a=this;if(a.collapsed&&a.placeholder){return a.placeholder.isVisible(b)}return a.callParent(arguments)},onBoxReady:function(){var a=this,b;a.callParent(arguments);if(a.collapsed){a.setHiddenDocked()}if(a.isAccordionPanel){a.ariaEl=a.header.titleCmp.el;a.ariaEl.dom.setAttribute('aria-expanded',!a.collapsed);a.ariaEl.dom.setAttribute('aria-controls',a.body.id);a.body.dom.setAttribute('aria-labelledby',a.header.titleCmp.id);a.body.dom.setAttribute('aria-hidden',!!a.collapsed);a.accordionHeaderKeyNav=new Ext.util.KeyNav({target:a.header.titleCmp.el,scope:a,left:a.navigateAccordionHeader,right:a.navigateAccordionHeader,up:a.navigateAccordionHeader,down:a.navigateAccordionHeader,home:a.navigateAccordionHeader,end:a.navigateAccordionHeader,space:a.toggleCollapse,enter:a.toggleCollapse,del:{alt:!0,fn:a.maybeClose}});a.accordionBodyKeyNav=new Ext.util.KeyNav({target:a.bodyWrap,scope:a,up:{ctrl:!0,fn:a.navigateAccordionBody}})}if(a.defaultButton){b=a.defaultButtonTarget?a[a.defaultButtonTarget]:a.body;a.defaultButtonKeyNav=new Ext.util.KeyNav({target:b,scope:a,defaultEventAction:'stopEvent',enter:a.fireDefaultButton})}},onHide:function(c,e,d){var a=this,b=a.dd;if(a.floatedFromCollapse){a.slideOutFloatedPanel(!0)}if(a.draggable&&b){b.endDrag()}if(a.collapsed&&a.placeholder){if(a.splitter){Ext.suspendLayouts();a.splitter.hide();Ext.resumeLayouts()}a.placeholder.hide()}else {a.callParent([c,e,d])}},onRemoved:function(b){var a=this;if(a.placeholder&&!b){a.ownerCt.remove(a.placeholder,!1)}a.callParent(arguments)},onShow:function(){var a=this;if(a.collapsed&&a.isPlaceHolderCollapse()){if(a.splitter){Ext.suspendLayouts();a.splitter.show();Ext.resumeLayouts()}a.setHiddenState(!0);a.placeholderCollapse()}else {a.callParent(arguments)}},placeholderCollapse:function(i,e){var a=this,f=a.ownerCt,d=i||a.collapseDirection,h=Ext.panel.Panel.floatCls,g=a.collapseTool,b=a.getPlaceholder(d),c;if(Ext.Component.layoutSuspendCount||a.isLayoutSuspended()){e=!1}a.fireEvent('beginfloat',a);a.isCollapsingOrExpanding=1;a.setHiddenState(!0);a.collapsed=d;if(b.rendered){if(b.el.dom.parentNode!==a.el.dom.parentNode){a.el.dom.parentNode.insertBefore(b.el.dom,a.el.dom)}b.hidden=!1;b.setHiddenState(!1);b.el.show();f.updateLayout()}else {f.insert(f.items.indexOf(a),b)}if(a.rendered){a.focusPlaceholderExpandTool=a.focusPlaceHolder=!1;if(g&&Ext.ComponentManager.getActiveComponent()===g){a.focusPlaceholderExpandTool=!0}else {if(a.containsFocus){a.focusPlaceHolder=!0}}a.el.setVisibilityMode(a.placeholderCollapseHideMode);if(e){a.el.addCls(h);b.el.hide();c=a.convertCollapseDir(d);a.el.slideOut(c,{preserveScroll:!0,duration:Ext.Number.from(e,Ext.fx.Anim.prototype.duration),listeners:{scope:a,afteranimate:function(){var a=this,b=a.placeholder.el;a.el.removeCls(h);b.show();if(a.ownerCt){b.setStyle('display','none');b.slideIn(c,{easing:'linear',duration:100,listeners:{afteranimate:a.doPlaceholderCollapse,scope:a}})}else {a.doPlaceholderCollapse()}}}})}else {a.el.hide();a.doPlaceholderCollapse()}}else {a.isCollapsingOrExpanding=0;if(!a.preventCollapseFire){a.fireEvent('collapse',a)}}return a},doPlaceholderCollapse:function(){var a=this,c=a.placeholder,d=c.expandTool,b;if(a.focusPlaceholderExpandTool&&d){d.focus()}else {if(a.focusPlaceHolder){c.focus()}}a.focusPlaceholderExpandTool=!1;c.setHiddenState(!1);if(c.rendered){b=c.ariaEl.dom;b.setAttribute('aria-hidden',!1);b.setAttribute('aria-expanded',!1)}b=a.ariaEl.dom;b.setAttribute('aria-hidden',!0);b.setAttribute('aria-expanded',!1);a.isCollapsingOrExpanding=0;a.fireEvent('collapse',a);a.fireEvent('endfloat',a)},placeholderExpand:function(d){var a=this,h=a.collapsed,b=a.placeholder.expandTool,g=Ext.panel.Panel.floatCls,e=a.ownerLayout?a.ownerLayout.centerRegion:null,f,c;if(Ext.Component.layoutSuspendCount){d=!1}if(a.floatedFromCollapse){c=a.getPosition(!0);a.slideOutFloatedPanelBegin();a.slideOutFloatedPanelEnd();a.floated=!1}if(b&&Ext.ComponentManager.getActiveComponent()===b){a.focusHeaderCollapseTool=!0;b._ariaRole=b.ariaEl.dom.getAttribute('role');b._ariaLabel=b.ariaEl.dom.getAttribute('aria-label');b.ariaEl.dom.setAttribute('role','presentation');b.ariaEl.dom.removeAttribute('aria-label')}if(d){Ext.suspendLayouts();a.placeholder.hide();a.el.show();a.collapsed=!1;a.setHiddenState(!1);if(e&&!c){e.hidden=!0}Ext.resumeLayouts(!0);if(e){e.hidden=!1}if(!a.floatedFromCollapse){a.fireEvent('beginfloat',a)}a.el.addCls(g);a.isCollapsingOrExpanding=2;if(c){f=a.getXY();a.setLocalXY(c[0],c[1]);a.setXY([f[0],f[1]],{duration:Ext.Number.from(d,Ext.fx.Anim.prototype.duration),listeners:{scope:a,afteranimate:function(){var a=this;a.el.removeCls(g);a.isCollapsingOrExpanding=0;a.fireEvent('expand',a);a.fireEvent('endfloat',a)}}})}else {a.el.hide();a.placeholder.el.show();a.placeholder.hidden=!1;a.setHiddenState(!1);a.el.slideIn(a.convertCollapseDir(h),{preserveScroll:!0,duration:Ext.Number.from(d,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:a.doPlaceholderExpand,scope:a}})}}else {a.floated=a.collapsed=!1;a.doPlaceholderExpand(!0)}return a},doPlaceholderExpand:function(c){var a=this,d=a.placeholder,e=a.collapseTool,b=d.expandTool;c=c===!0;if(c){Ext.suspendLayouts();a.show()}a.el.removeCls(Ext.panel.Panel.floatCls);d.hide();if(c){Ext.resumeLayouts(!0)}else {a.updateLayout()}if(a.focusHeaderCollapseTool&&e){e.focus()}a.focusHeaderCollapseTool=!1;d.ariaEl.dom.setAttribute('aria-expanded',!0);a.ariaEl.dom.setAttribute('aria-expanded',!0);if(b&&b._ariaRole){b.ariaEl.dom.setAttribute('role',b._ariaRole);b.ariaEl.dom.setAttribute('aria-label',b._ariaLabel);b._ariaRole=b._ariaLabel=null}a.isCollapsingOrExpanding=0;a.fireEvent('expand',a);a.fireEvent('endfloat',a)},remove:function(a,b){var c=this.dockedItems;if(c&&c.contains(a)){this.removeDocked(a,b)}else {this.callParent([a,b])}return a},removeBodyCls:function(c){var a=this,b=a.rendered?a.body:a.getProtoBody();b.removeCls(c);return a},removeUIClsFromElement:function(b){var a=this,c=a.callParent(arguments);a.removeBodyCls([Ext.baseCSSPrefix+b,a.baseCls+'-body-'+b,a.baseCls+'-body-'+a.ui+'-'+b]);return c},restoreDimension:function(){var a=this.collapseDirection;return a==='top'||a==='bottom'?'height':'width'},restoreHiddenDocked:function(){this.setDockedItemsVisibility(this.hiddenOnCollapse,!0)},setBodyStyle:function(a,d){var b=this,c=b.rendered?b.body:b.getProtoBody();if(Ext.isFunction(a)){a=a()}if(arguments.length===1){if(Ext.isString(a)){a=Ext.Element.parseStyles(a)}c.setStyle(a)}else {c.setStyle(a,d)}return b},setBorder:function(a,d){if(d){return}var b=this,c=b.header;if(!a){a=0}else {if(a===!0){a='1px'}else {a=b.unitizeBox(a)}}if(c){if(c.isHeader){c.setBorder(a)}else {c.border=a}}if(b.rendered&&b.bodyBorder!==!1){b.body.setStyle('border-width',a)}b.updateLayout();b.border=a},setCollapsed:function(a){this[a?'collapse':'expand']()},setDockedItemsVisibility:function(b,g){var c=this,f=c.getDockedItems(),h=f.length,d=0,a,e;if(c.header!==!1){e=c.getReExpander()}for(;d<h;d++){a=f[d];if(a&&a!==e&&a.el){b.add(a.el)}}b.setStyle('visibility',g?'':'hidden');b.clear()},setGlyph:function(a){this.setHeaderConfig(a,'glyph','setGlyph',!0)},setIcon:function(a){this.setHeaderConfig(a,'icon','setIcon',!0)},setIconCls:function(a){this.setHeaderConfig(a,'iconCls','setIconCls',!0)},setIconAlign:function(a){this.setHeaderConfig(a,'iconAlign','setIconAlign',!0)},setTitleAlign:function(a){this.setHeaderConfig(a,'titleAlign','setTitleAlign',!0)},setTitlePosition:function(a){this.setHeaderConfig(a,'titlePosition','setTitlePosition',!0)},setTitleRotation:function(a){this.setHeaderConfig(a,'titleRotation','setTitleRotation',!0)},setTitle:function(a){var b=this,c=b.title;if(a!==c&&b.headingEl){b.headingEl.setHtml(a)}this.setHeaderConfig(a,'title','setTitle',!1)},setHeaderConfig:function(b,e,d,j){var a=this,i=a[e],c=a.header,f=a.placeholder,h=a.reExpander,g;if(b!==i){a[e]=b;if(c){if(c.isHeader){c[d](b)}else {if(j){c[e]=b}}}else {if(a.rendered||a.afterHeaderInit){a.updateHeader()}}if(h){h[d](b)}if(f&&f[d]){f[d](b)}g=e.toLowerCase()+'change';if(a.hasListeners[g]){a.fireEvent(g,a,b,i)}}},setHiddenDocked:function(){var a=this,b=new Ext.dom.CompositeElement();a.hiddenOnCollapse.add(a.body);b.add(a.body);a.setDockedItemsVisibility(b,!1)},setUI:function(b){var a=this;a.callParent(arguments);if(a.header&&a.header.rendered){a.header.setUI(b)}},toggleCollapse:function(){return this.collapsed||this.floatedFromCollapse?this.expand():this.collapse()},updateCollapseTool:function(){var a=this,b=a.collapseTool,c;if(!b&&a.collapsible){a.collapseDirection=a.collapseDirection||a.getHeaderPosition()||'top';c={xtype:'tool',handler:a.toggleCollapse,scope:a};if(a.isAccordionPanel){c.focusable=!1;c.ariaRole='presentation'}a.collapseTool=a.expandTool=b=Ext.widget(c)}if(b){if(a.collapsed&&!a.isPlaceHolderCollapse()){b.setType('expand-'+a.getOppositeDirection(a.collapseDirection));b.setTooltip(a.expandToolText)}else {b.setType('collapse-'+a.collapseDirection);b.setTooltip(a.collapseToolText)}}},navigateAccordionHeader:function(a){var c=this,d,b;d=a.getKey();switch(d){case a.UP:case a.LEFT:b=c.findAccordionSibling('prev');break;case a.DOWN:case a.RIGHT:b=c.findAccordionSibling('next');break;case a.HOME:b=c.findAccordionSibling('first');break;case a.END:b=c.findAccordionSibling('last');break;case a.DELETE:b=c.findAccordionSibling('prev')||c.findAccordionSibling('next');if(!b){a.doNotClose=!0};break;}a.stopEvent();if(b&&b!==c){b.header.titleCmp.focus()}},navigateAccordionBody:function(b){var a;if(b.getKey()===b.UP){a=this}b.stopEvent();if(a){a.header.titleCmp.focus()}},findAccordionSibling:function(e,d){var b=this,c='[isAccordionPanel]',a;switch(e){case 'prev':a=b.prev(c);if(!a){if(b.accordionWrapOver){a=b.ownerCt.child(c+':last')}else {if(d){a=b}}};break;case 'next':a=b.next(c);if(!a){if(b.accordionWrapOver){a=b.ownerCt.child(c+':first')}else {if(d){a=b}}};break;case 'first':a=b.ownerCt.child(c+':first');break;case 'last':a=b.ownerCt.child(c+':last');break;}return a},fireDefaultButton:function(b){var c=this,d,a;if(b.target.tagName==='TEXTAREA'||b.target.getAttribute('aria-multiline')==='true'){return !0}d=c.lookupReferenceHolder(!1)||c;a=d.lookupReference(c.defaultButton);if(a&&a.click){a.click(b);b.stopEvent();return !1}},maybeClose:function(b){var a=this;if(a.closable){a.navigateAccordionHeader(b);if(!b.doNotClose){a.close()}}},canFocus:function(b,a){if(this.collapsed){return !!(this.placeholder&&this.placeholder.canFocus(b,a))}return this.mixins.focusable.canFocus.call(this,b,a)},focus:function(){var b=this,a=b.placeholder;if(b.collapsed&&a&&a.canFocus()){a.focus.apply(a,arguments)}else {b.callParent(arguments)}},onFocusEnter:function(c){var a=this,b=a.ariaEl.dom;a.callParent([c]);if(a.isAccordionPanel&&b){b.setAttribute('aria-selected',!0)}},onFocusLeave:function(c){var a=this,b=a.ariaEl.dom;a.callParent([c]);if(a.isAccordionPanel&&b){b.setAttribute('aria-selected','false')}},updateHeaderPosition:function(b){var a=this.header;if(a&&a.isHeader){a.setDock(b)}},unghost:function(e,d,f){var b=this,c=b.el,a=b.ghostPanel;if(!a){return}c.show();c.setVisibilityMode(b.elVisMode);if(e!==!1){if(d!==!1){b.setPagePosition(a.getXY())}}else {c.hide()}a.el.hide();a.setHiddenState(!0)},updateHeader:function(n){var a=this,b=a.header,e=a.getTitle(),g=a.tools,k=a.getIcon(),j=a.getGlyph(),i=a.getIconCls(),m=j||k||i,d=a.ariaEl.dom,h=a.getHeaderPosition(),l=h==='left'||h==='right',f,c;if(Ext.isObject(b)||b!==!1&&(n||(e||m)||g&&g.length||a.collapsible&&!a.titleCollapse)){if(b&&b.isHeader){b.dockToEl=!0;b.show()}else {if(Ext.isObject(b)){a.syncHeaderConfigs(b)}b=a.header=Ext.widget(Ext.merge({xtype:'header',title:e,titleAlign:a.getTitleAlign(),titlePosition:a.getTitlePosition(),vertical:l,dock:a.getHeaderPosition()||'top',dockToEl:!0,titleRotation:a.getTitleRotation(),textCls:a.headerTextCls,iconCls:i,iconAlign:a.getIconAlign(),icon:k,glyph:j,baseCls:a.baseCls+'-header',tools:g,ui:a.ui,id:a.id+'_header',overCls:a.headerOverCls,indicateDrag:a.draggable,frame:(a.frame||a.alwaysFramed)&&a.frameHeader,ignoreParentFrame:a.frame||a.overlapHeader,ignoreBorderManagement:a.frame||a.ignoreHeaderBorderManagement,isAccordionHeader:a.isAccordionPanel,ownerCt:a,synthetic:!0,listeners:a.collapsible&&a.titleCollapse?{click:a.toggleCollapse,scope:a}:null},a.header));a.addDocked(b,0)}if(a.isAccordionPanel){if(d){d.setAttribute('aria-labelledby',b.id+'-title');d.removeAttribute('aria-label')}else {c=a.ariaRenderAttributes||(a.ariaRenderAttributes={});c['aria-labelledby']=b.id+'-title';delete c['aria-label']}}else {if(e){if(a.ariaRole!=='tabpanel'){if(d){d.setAttribute('aria-labelledby',b.id+'-title-textEl');d.removeAttribute('aria-label')}else {c=a.ariaRenderAttributes||(a.ariaRenderAttributes={});c['aria-labelledby']=b.id+'-title-textEl';delete c['aria-label']}}}else {if(a.ariaRenderAttributes){delete a.ariaRenderAttributes['aria-label']}}}}else {if(b){b.hide()}e=Ext.util.Format.stripTags(e);if(d){if(!d.hasAttribute('aria-labelledby')){if(e){d.setAttribute('aria-label',e)}else {d.removeAttribute('aria-label')}}}else {c=a.ariaRenderAttributes||(a.ariaRenderAttributes={});if(!c['aria-labelledby']){if(e){c['aria-label']=e}else {delete c['aria-label']}}}}if(a.isViewportBorderChild&&!a.hasOwnProperty('ariaRole')){a.ariaRole='region'}if(e&&a.ariaRole==='region'){f=a.headingEl;if(f){f.setHtml(e)}else {if(a.rendered){a.headingEl=Ext.dom.Helper.insertFirst(a.el,{tag:'div',id:a.id+'-headingEl',role:'heading','class':Ext.baseCSSPrefix+'hidden-clip',style:'height:0',html:e},!0);d.removeAttribute('aria-label');d.setAttribute('aria-labelledby',a.id+'-headingEl')}else {a.headingText=a.title;c=a.ariaRenderAttributes||(a.ariaRenderAttributes={});c['aria-labelledby']=a.id+'-headingEl';delete c['aria-label']}}}else {if(a.headingEl){a.headingEl.destroy();a.headingEl=null}}},statics:{floatCls:Ext.baseCSSPrefix+'border-region-slide-in'},privates:{addUIToElement:function(){var a=this;a.callParent(arguments);a.addBodyCls(a.baseCls+'-body-'+a.ui)},applyTargetCls:function(a){this.getProtoBody().addCls(a)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){var a=this;return a.body||a.protoBody||a.frameBody||a.el},initDraggable:function(){var a=this;if(a.simpleDrag){a.initSimpleDraggable()}else {a.dd=new Ext.panel.DD(a,Ext.isBoolean(a.draggable)?null:a.draggable)}},initResizable:function(a){this.callParent([a]);if(this.collapsed){this.resizer.disable()}},initSimpleDraggable:function(){var a=this,b=a.draggable;if(!a.header&&!b.delegate){a.updateHeader(!0)}if(a.header||b.delegate){b=Ext.apply({el:a.el,delegate:a.header&&a.header.el},b);if(a.constrain||a.constrainHeader){b.constrain=a.constrain;b.constrainDelegate=a.constrainHeader;b.constrainTo=a.constrainTo||a.container}b=a.dd=new Ext.util.ComponentDragger(a,b);a.relayEvents(b,['dragstart','drag','dragend'])}},removeUIFromElement:function(){var a=this;a.callParent(arguments);a.removeBodyCls(a.baseCls+'-body-'+a.ui)},setupRenderTpl:function(a){this.callParent(arguments);this.setupDockingRenderTpl(a)},slideOutFloatedPanel:function(f){var a=this,e=a.el,c,b,d=function(){a.slideOutFloatedPanelEnd();a.el.removeCls(Ext.baseCSSPrefix+'border-region-slide-in');a.fireEvent('endfloat',a)};if(a.isSliding||a.destroyed){return}a.isSliding=!0;a.floated=!1;a.slideOutFloatedPanelBegin();if(f){e.hide();return d()}if(typeof a.collapsed==='string'){c=a.convertCollapseDir(a.collapsed)}a.fireEvent('beginfloat',a);e.slideOut(c,{preserveScroll:!0,duration:Ext.Number.from(a.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:d}});if(this.containsFocus){b=this.findFocusTarget();if(b){b.focus()}}},slideOutFloatedPanelBegin:function(){var a=this;a.collapsed=a.floatedFromCollapse;a.setHiddenState(!0);a.floatedFromCollapse=null;Ext.destroy(a.pointerLeaveListener,a.phHoverListeners,a.elHoverListeners)},slideOutFloatedPanelEnd:function(b){var a=this;if(a.collapseTool){a.collapseTool.el.show()}a.slideOutTask.cancel();a.isSliding=!1;if(!b){a.fireEvent('unfloat',a)}},syncHeaderConfigs:function(c){var d=this,a,b;for(a in c){b=c[a];if(d.headerConfigs[a]&&b!==undefined){d[a]=b}}}}},function(){var a=this.prototype;a.animCollapse=Ext.enableFx;a.placeholderCollapseHideMode=Ext.Element.VISIBILITY});Ext.define('Ext.theme.neptune.panel.Panel',{override:'Ext.panel.Panel',border:!1,bodyBorder:!1,initBorderProps:Ext.emptyFn,initBodyBorder:function(){if(this.bodyBorder!==!0){this.callParent()}}});Ext.define('Ext.tip.Tip',{extend:Ext.panel.Panel,xtype:'tip',alternateClassName:'Ext.Tip',minWidth:40,maxWidth:500,shadow:'sides',constrainPosition:!0,autoRender:!0,hidden:!0,baseCls:Ext.baseCSSPrefix+'tip',focusOnToFront:!1,maskOnDisable:!1,closeAction:'hide',alwaysFramed:!0,frameHeader:!1,initComponent:function(){var a=this;a.floating=Ext.apply({},{shadow:a.shadow},a.self.prototype.floating);a.callParent(arguments);a.constrain=a.constrain||a.constrainPosition},showAt:function(b){var a=this;a.calledFromShowAt=!0;a.callParent(arguments);if(a.isVisible()){a.doAlignment(a.getRegion().alignTo({target:new Ext.util.Point(b[0],b[1]),inside:a.constrainPosition?Ext.getBody().getRegion().adjust(5,-5,-5,5):null,align:'tl-tl',overlap:!0}))}a.calledFromShowAt=0},doAlignment:function(b){var c=this,a=c.anchorEl,d=b.anchor;c.setPagePosition([b.x,b.y]);if(a){a.removeCls(c.anchorCls);if(d){c.anchorCls=Ext.baseCSSPrefix+'tip-anchor-'+d.position;a.addCls(c.anchorCls);a.show();if(d.align&1){a.setTop(b.anchor.y-b.y);a.dom.style.left=''}else {a.setLeft(b.anchor.x-b.x);a.dom.style.top=''}}else {a.hide()}}},privates:{initDraggable:function(){var a=this;a.draggable={el:a.getDragEl(),delegate:a.header.el,constrain:a,constrainTo:a.el.dom.parentNode};Ext.Component.prototype.initDraggable.call(a)}},ghost:undefined,unghost:undefined});Ext.define('Ext.tip.ToolTip',{extend:Ext.tip.Tip,alias:'widget.tooltip',alternateClassName:'Ext.ToolTip',autoHide:!0,showDelay:500,hideDelay:200,dismissDelay:5000,mouseOffset:[15,18],trackMouse:!1,anchorToTarget:!0,targetCounter:0,quickShowInterval:250,hideAction:'hide',fadeOutDuration:1000,defaultAlign:'bl-tl',checkNestedDelegates:!1,ariaRole:'tooltip',alwaysOnTop:!0,initComponent:function(){var a=this;a.callParent();a.setTarget(a.target);a.currentTarget=new Ext.dom.Fly()},onRender:function(c,b){var a=this;a.callParent(arguments);a.anchorEl=a.el.createChild({role:'presentation',cls:Ext.baseCSSPrefix+'tip-anchor'})},show:function(){if(!this.currentTarget.dom&&this.target){return this.showBy(this.target)}this.callParent()},setTarget:function(b){var a=this,c;if(a.targetListeners){a.targetListeners.destroy()}if(b){a.target=b=Ext.get(b.el||b);c={mouseover:'onTargetOver',mouseout:'onTargetOut',mousemove:'onMouseMove',tap:'onTargetTap',scope:a,destroyable:!0};a.targetListeners=b.on(c)}else {a.target=null}},onMouseMove:function(c){var a=this,b=a.dismissDelay;a.pointerEvent=c;if(a.isVisible()&&a.currentTarget.contains(c.target)){if(b&&a.autoHide!==!1){a.clearTimer('dismiss');a.dismissTimer=Ext.defer(a.hide,b,a)}if(a.trackMouse){a.doAlignment(a.getAlignRegion())}}},getAlignRegion:function(){var a=this,c=a.anchorEl,d=a.getAnchorAlign(),g,e,f,b=a.mouseOffset;if(!a.anchorSize){c.addCls(Ext.baseCSSPrefix+'tip-anchor-top');c.show();a.anchorSize=new Ext.util.Offset(c.getWidth(!1,!0),c.getHeight(!1,!0));c.removeCls(Ext.baseCSSPrefix+'tip-anchor-top');c.hide()}if((a.anchor||a.align)&&a.anchorToTarget&&!a.trackMouse){f=a.currentTarget.getRegion()}else {f=a.pointerEvent?a.pointerEvent.getPoint().adjust(-Math.abs(b[1]),Math.abs(b[0]),Math.abs(b[1]),-Math.abs(b[0])):new Ext.util.Point();if(!a.anchor){g=!0;if(b[0]>0){if(b[1]>0){d='tl-br'}else {d='bl-tr'}}else {if(b[1]>0){d='tr-bl'}else {d='br-tl'}}}}e={align:a.convertPositionSpec(d),axisLock:a.axisLock,target:f,overlap:g,offset:a.targetOffset,inside:a.constrainPosition?a.constrainTo||Ext.getBody().getRegion().adjust(5,-5,-5,5):null};if(a.anchor){e.anchorSize=a.anchorSize}return a.getRegion().alignTo(e)},fadeOut:function(){var a=this;a.el.fadeOut({duration:a.fadeOutDuration,callback:function(){a.hide();a.el.setOpacity('')}})},getAnchorAlign:function(){switch(this.anchor){case 'top':return 'tl-bl';case 'left':return 'tl-tr';case 'right':return 'tr-tl';default:return this.defaultAlign;}},onTargetTap:function(a){if(this.showOnTap&&a.pointerType!=='mouse'&&Ext.fly(a.target).isVisible(!0)){this.onTargetOver(a)}},onTargetOver:function(c){var a=this,e=a.delegate,d=a.currentTarget,g=c.relatedTarget||c.fromElement,b,f=a.hasListeners;if(a.disabled){return}if(e){if(!this.checkNestedDelegates&&d.contains(c.target)){return}b=c.getTarget(e);if(b&&c.getRelatedTarget(e)===b){return}}else {if(!a.target.contains(g)){b=a.target.dom}else {return}}if(b){if((f.beforeshow||f.show)&&a.isVisible()){a.hide()}a.triggerElement=b;a.pointerEvent=c;d.attach(b);a.handleTargetOver(b,c)}else {if(d.dom){a.handleTargetOut()}}},handleTargetOver:function(b,a){if(a.pointerType!=='mouse'){this.showFromDelay()}else {this.delayShow()}},delayShow:function(){var a=this;a.clearTimer('hide');if(a.hidden&&!a.showTimer){if(a.delegate&&Ext.Date.getElapsed(a.lastHidden)<a.quickShowInterval){a.showFromDelay()}else {a.showTimer=Ext.defer(a.showFromDelay,a.pointerEvent.pointerType!=='mouse'?0:a.showDelay,a)}}else {if(!a.hidden&&a.autoHide!==!1){a.showFromDelay()}}},showFromDelay:function(){var a=this;if(!a.disabled){a.fireEvent('hovertarget',a,a.currentTarget,a.currentTarget.dom);if(a.isVisible()){a.realignToTarget()}else {a.triggerElement=a.currentTarget.dom;a.fromDelayShow=!0;a.show();a.fromDelayShow=!1}}},onTargetOut:function(a){if(this.currentTarget.dom&&!this.currentTarget.contains(a.relatedTarget)){this.handleTargetOut()}},handleTargetOut:function(){var a=this;if(a.showTimer){a.clearTimer('show')}if(a.isVisible()&&a.autoHide){a.delayHide()}},delayHide:function(){var a=this;if(!a.hidden&&!a.hideTimer){a.clearTimer('dismiss');a.hideTimer=Ext.defer(a[a.hideAction],a.hideDelay,a)}},hide:function(){var a=this;a.currentTarget.detach();a.clearTimer('dismiss');a.lastHidden=new Date();if(a.anchorEl){a.anchorEl.hide()}a.callParent(arguments);a.triggerElement=null},afterShow:function(){this.callParent();this.realignToTarget()},realignToTarget:function(){var a=this;a.clearTimers();if(!a.calledFromShowAt){a.doAlignment(a.getAlignRegion())}if(a.dismissDelay&&a.autoHide!==!1){a.dismissTimer=Ext.defer(a.hide,a.dismissDelay,a)}},showBy:function(b){var a=this;a.align=a.defaultAlign;if(b.isEvent){a.currentTarget.attach(b.target);a.pointerEvent=b}else {a.currentTarget.attach(Ext.getDom(b.el||b));a.triggerElement=a.currentTarget.dom}if(a.isVisible()){a.realignToTarget()}else {a.show()}return a},_timerNames:{},clearTimer:function(b){var a=this,d=a._timerNames,c=d[b]||(d[b]=b+'Timer'),e=a[c];if(e){Ext.undefer(e);a[c]=null;if(b==='show'&&a.isHidden()){a.currentTarget.detach()}}},clearTimers:function(){var a=this;a.clearTimer('show');a.clearTimer('dismiss');a.clearTimer('hide');a.clearTimer('enable')},onShow:function(){var a=this;a.callParent();a.mousedownListener=Ext.on({mousedown:'onDocMouseDown',scope:a,destroyable:!0})},onHide:function(){var a=this;a.callParent();Ext.destroy(a.mousedownListener)},onDocMouseDown:function(b){var a=this,c=a.delegate;if(b.within(a.el.dom)){if(b.pointerType!=='mouse'&&a.allowOver){a.clearTimer('dismiss')}}else {if(!a.closable){if(b.within(a.target)&&(!c||b.getTarget(c))){a.delayHide()}else {a.disable();a.enableTimer=Ext.defer(a.enable,100,a)}}}},doEnable:function(){if(!this.destroyed){this.enable()}},onDisable:function(){this.callParent();this.clearTimers();this.hide()},doDestroy:function(){var a=this;a.clearTimers();a.destroyMembers('mousedownListener','anchorEl');a.callParent()},privates:{getTrackMouse:function(){return this.trackMouse},clipTo:function(a,c){var b;if(a.isRegion){b=a}else {b=(a.isComponent?a.el:Ext.fly(a)).getConstrainRegion()}this.callParent([b,c]);this.anchorEl.clipTo(b,c)}}});Ext.define('Ext.tip.QuickTip',{extend:Ext.tip.ToolTip,alias:'widget.quicktip',alternateClassName:'Ext.QuickTip',interceptTitles:!1,title:'&#160;',checkNestedDelegates:!0,tagConfig:{namespace:'data-',attribute:'qtip',width:'qwidth',target:'target',title:'qtitle',hide:'hide',cls:'qclass',align:'qalign',anchor:'anchor',showDelay:'qshowDelay',hideAction:'hideAction',anchorTarget:'anchorTarget'},isQuickTip:!0,shrinkWrapDock:!0,initComponent:function(){var a=this;a.delegate=a.delegate.bind(a);a.target=a.target||Ext.getDoc();a.targets=a.targets||{};a.header=a.header||{};a.header.focusableContainer=!1;a.callParent()},setTagConfig:function(a){this.tagConfig=Ext.apply({},a);delete this.tagConfig.attr},text:null,register:function(a){var f=Ext.isArray(a)?a:arguments,d=0,g=f.length,b,c,e;for(;d<g;d++){a=f[d];b=a.target;if(b){if(Ext.isArray(b)){for(c=0,e=b.length;c<e;c++){this.targets[Ext.id(b[c])]=a}}else {this.targets[Ext.id(b)]=a}}}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(a){var b=this,c=b.currentTarget;a=Ext.getDom(a);if(b.isVisible()){if(c.dom===a){b.hide()}}else {if(c.dom===a){b.clearTimer('show')}}},delegate:function(b){var d=this,a=d.tagConfig,e=a.attr||(a.attr=a.namespace+a.attribute),c;c=b.getAttribute(e)||d.interceptTitles&&b.title;return !!c},getTipText:function(a){var c=a.title,b=this.tagConfig,d=b.attr||(b.attr=b.namespace+b.attribute);if(this.interceptTitles&&c){a.setAttribute(d,c);a.removeAttribute('title');return c}else {return a.getAttribute(d)}},onTargetOver:function(d){var b=this,g=b.currentTarget,a=d.target,e,c,f;if(!a||a.nodeType!==1||a===document.documentElement||a===document.body){return}b.pointerEvent=d;e=b.targets;for(f in e){if(e.hasOwnProperty(f)){c=e[f];a=Ext.getDom(c.target);if(a&&Ext.fly(a).contains(d.target)&&!Ext.fly(a).contains(d.relatedTarget)){g.attach(a);b.activeTarget=c;c.el=g;b.anchor=c.anchor;b.activateTarget();return}}}b.callParent([d])},handleTargetOver:function(g,h){var a=this,b=a.currentTarget,c=a.tagConfig,d=c.namespace,f=a.getTipText(g,h),e;if(f){e=b.getAttribute(d+c.hide);a.activeTarget={el:b,text:f,width:+b.getAttribute(d+c.width)||null,autoHide:e!=='user'&&e!=='false',title:b.getAttribute(d+c.title),cls:b.getAttribute(d+c.cls),align:b.getAttribute(d+c.align),showDelay:b.getAttribute(d+c.showDelay),hideAction:b.getAttribute(d+c.hideAction),alignTarget:b.getAttribute(d+c.anchorTarget)};if(!a.initialConfig.hasOwnProperty('anchor')){a.anchor=b.getAttribute(d+c.anchor)}if(a.anchor&&!a.initialConfig.hasOwnProperty('anchorTarget')){a.alignTarget=a.activeTarget.alignTarget||g}a.activateTarget()}},activateTarget:function(){var a=this,b=a.activeTarget,d=b.showDelay,c=b.hideAction;if(a.isVisible()){a.updateContent();a.realignToTarget()}else {if(b.showDelay){d=a.showDelay;a.showDelay=parseInt(b.showDelay,10)}a.delayShow();if(b.showDelay){a.showDelay=d}if(!(c=b.hideAction)){delete a.hideAction}else {a.hideAction=c}}},getAnchorAlign:function(){var a=this.activeTarget;return a&&a.align||this.callParent()},getAlignRegion:function(){var a=this,b=a.activeTarget,d=a.currentTarget.dom,c;if(b&&b.alignTarget&&a.anchor&&!a.initialConfig.hasOwnProperty('anchorTarget')){a.currentTarget.attach(Ext.getDom(b.alignTarget))}a.anchorToTarget=!!(b.align||a.anchor);c=a.callParent();a.currentTarget.attach(d);return c},handleTargetOut:function(e){var a=this,b=a.activeTarget,c=a.autoHide,d=a.hideDelay;if(b&&c!==!1){a.autoHide=!0;if(b.hideDelay){a.hideDelay=parseInt(b.hideDelay,10)}a.callParent([e]);a.autoHide=c;a.hideDelay=d}},targetTextEmpty:function(){var c=this,a=c.activeTarget,e=c.tagConfig,b,d;if(a){b=a.el;if(b){d=b.getAttribute(e.namespace+e.attribute);if(!d&&!c.targets[Ext.id(a.el.dom)]){return !0}}}return !1},show:function(){var a=this,b=a.fromDelayShow;if(b&&a.targetTextEmpty()){a.activeTarget=null;a.currentTarget.detach();return}a.callParent(arguments)},beforeShow:function(){this.updateContent();this.callParent(arguments)},updateContent:function(){var a=this,b=a.activeTarget,e=a.header,d,c;if(b){a.suspendLayouts();if(b.title){a.setTitle(b.title);e.show()}else {if(e){e.hide()}}a.update(b.text);a.autoHide=b.autoHide;d=b.dismissDelay;a.dismissDelay=Ext.isNumber(d)?d:a.dismissDelay;c=a.lastCls;if(c){a.removeCls(c);delete a.lastCls}c=b.cls;if(c){a.addCls(c);a.lastCls=c}a.setWidth(b.width);a.align=b.align;a.resumeLayouts(!0)}},hide:function(){this.activeTarget=null;this.callParent()}});Ext.define('Ext.tip.QuickTipManager',{singleton:!0,alternateClassName:'Ext.QuickTips',disabled:!1,init:function(d,e){var b=this;if(!b.tip){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.tip.QuickTipManager.init(d,e)});return !1}var a=Ext.apply({disabled:b.disabled,id:'ext-quicktips-tip'},e),c=a.className,f=a.xtype;if(c){delete a.className}else {if(f){c='widget.'+f;delete a.xtype}}if(d!==!1){a.renderTo=document.body}b.tip=Ext.create(c||'Ext.tip.QuickTip',a);b.tip.destroy=Ext.emptyFn;Ext.quickTipsActive=!0}},destroy:function(){var a=this.tip;if(a){delete a.destroy;a.destroy();this.tip=null}Ext.quickTipsActive=!1},ddDisable:function(){var b=this,a=b.tip;if(a&&!b.disabled){a.disable()}},ddEnable:function(){var b=this,a=b.tip;if(a&&!b.disabled){a.enable()}},enable:function(){var b=this,a=b.tip;if(a){a.enable()}b.disabled=!1},disable:function(){var b=this,a=b.tip;if(a){a.disable()}b.disabled=!0},isEnabled:function(){var a=this.tip;return a!==undefined&&!a.disabled},getQuickTip:function(){return this.tip},register:function(){var a=this.tip;a.register.apply(a,arguments)},unregister:function(){var a=this.tip;a.unregister.apply(a,arguments)},tips:function(){var a=this.tip;a.register.apply(a,arguments)}});Ext.define('Ext.picker.Color',{extend:Ext.Component,alias:'widget.colorpicker',alternateClassName:'Ext.ColorPalette',focusable:!0,componentCls:Ext.baseCSSPrefix+'color-picker',selectedCls:Ext.baseCSSPrefix+'color-picker-selected',itemCls:Ext.baseCSSPrefix+'color-picker-item',value:null,clickEvent:'click',allowReselect:!1,colors:['000000','993300','333300','003300','003366','000080','333399','333333','800000','FF6600','808000','008000','008080','0000FF','666699','808080','FF0000','FF9900','99CC00','339966','33CCCC','3366FF','800080','969696','FF00FF','FFCC00','FFFF00','00FF00','00FFFF','00CCFF','993366','C0C0C0','FF99CC','FFCC99','FFFF99','CCFFCC','CCFFFF','99CCFF','CC99FF','FFFFFF'],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,renderTpl:['<tpl for="colors">','<a href="#" role="button" class="color-{.} {parent.itemCls}" hidefocus="on">','<span class="{parent.itemCls}-inner" style="background:#{.}">&#160;</span>','</a>','</tpl>'],initComponent:function(){var a=this;a.callParent(arguments);if(a.handler){a.on('select',a.handler,a.scope,!0)}},initRenderData:function(){var a=this;return Ext.apply(a.callParent(),{itemCls:a.itemCls,colors:a.colors})},onRender:function(){var a=this,b=a.clickEvent;a.callParent(arguments);a.mon(a.el,b,a.handleClick,a,{delegate:'a'});if(b!=='click'){a.mon(a.el,'click',Ext.emptyFn,a,{delegate:'a',stopEvent:!0})}},afterRender:function(){var a=this,b;a.callParent(arguments);if(a.value){b=a.value;a.value=null;a.select(b,!0)}},handleClick:function(c){var a=this,b;c.stopEvent();if(!a.disabled){b=c.currentTarget.className.match(a.colorRe)[1];a.select(b.toUpperCase())}},select:function(b,g){var a=this,e=a.selectedCls,f=a.value,d,c;b=b.replace('#','');if(!a.rendered){a.value=b;return}if(b!==f||a.allowReselect){d=a.el;if(a.value){c=d.down('a.color-'+f,!0);Ext.fly(c).removeCls(e)}c=d.down('a.color-'+b,!0);Ext.fly(c).addCls(e);a.value=b;if(g!==!0){a.fireEvent('select',a,b)}}},clear:function(){var a=this,b=a.value,c;if(b&&a.rendered){c=a.el.down('a.color-'+b,!0);Ext.fly(c).removeCls(a.selectedCls)}a.value=null},getValue:function(){return this.value||null}});Ext.define('Ext.layout.component.field.HtmlEditor',{extend:Ext.layout.component.field.FieldContainer,alias:['layout.htmleditor'],type:'htmleditor',naturalHeight:150,naturalWidth:300,beginLayout:function(a){var b=this.owner,c;if(Ext.isGecko){c=b.textareaEl.dom;this.lastValue=c.value;c.value=''}this.callParent(arguments);a.toolbarContext=a.context.getCmp(b.toolbar);a.inputCmpContext=a.context.getCmp(b.inputCmp);a.bodyCellContext=a.getEl('bodyEl');a.textAreaContext=a.getEl('textareaEl');a.iframeContext=a.getEl('iframeEl')},beginLayoutCycle:function(b){var a=this,e=b.widthModel,c=b.heightModel,h=a.owner,f=h.iframeEl,d=h.textareaEl,g=c.natural||c.shrinkWrap?a.naturalHeight:'';a.callParent(arguments);if(e.shrinkWrap){f.setStyle('width','');d.setStyle('width','')}else {if(e.natural){b.bodyCellContext.setWidth(a.naturalWidth)}}f.setStyle('height',g);d.setStyle('height',g)},finishedLayout:function(){var a=this.owner;this.callParent(arguments);if(Ext.isGecko){a.textareaEl.dom.value=this.lastValue}}});Ext.define('Ext.util.TaskManager',{extend:Ext.util.TaskRunner,alternateClassName:['Ext.TaskManager'],singleton:!0});Ext.define('Ext.toolbar.Separator',{extend:Ext.toolbar.Item,alias:'widget.tbseparator',alternateClassName:'Ext.Toolbar.Separator',baseCls:Ext.baseCSSPrefix+'toolbar-separator',ariaRole:'separator'});Ext.define('Ext.dom.ButtonElement',{extend:Ext.dom.Element,setSize:function(b,a,e){var c=this,d=c.component;c.callParent([b,a,e]);d.btnWrap.setStyle('table-layout',!b||b==='auto'?'':'fixed');d.btnEl.setStyle('height',!a||a==='auto'?'':'auto');return c},setStyle:function(a,c){var e=this,f=e.component,d,b;e.callParent([a,c]);if(a){if(a==='width'||typeof a!=='string'&&'width' in a){d=c||a.width;f.btnWrap.setStyle('table-layout',!d||d==='auto'?'':'fixed')}if(a==='height'||typeof a!=='string'&&'height' in a){b=c||a.height;f.btnEl.setStyle('height',!b||b==='auto'?'':'auto')}}return e},setHeight:function(a,b){this.callParent([a,b]);this.component.btnEl.setStyle('height',!a||a==='auto'?'':'auto');return this},setWidth:function(a,b){this.callParent([a,b]);this.component.btnWrap.setStyle('table-layout',!a||a==='auto'?'':'fixed');return this}});Ext.define('Ext.button.Manager',{singleton:!0,alternateClassName:'Ext.ButtonToggleManager',groups:{},pressedButton:null,init:function(){var a=this;if(!a.initialized){Ext.getDoc().on({mouseup:a.onDocumentMouseUp,scope:a});a.initialized=!0}},onButtonMousedown:function(b,c){var a=this.pressedButton;if(a&&!a.destroying&&!a.destroyed){a.onMouseUp(c)}this.pressedButton=b},onDocumentMouseUp:function(b){var a=this.pressedButton;if(a&&!a.destroying&&!a.destroyed){a.onMouseUp(b);this.pressedButton=null}},toggleGroup:function(d,e){var b,a,c;if(e){b=this.groups[d.toggleGroup];for(a=0,c=b.length;a<c;a++){if(b[a]!==d){b[a].toggle(!1)}}}},register:function(a){var c=this,d=this.groups,b=d[a.toggleGroup];c.init();if(!a.toggleGroup){return}if(!b){b=d[a.toggleGroup]=[]}b.push(a);a.on('toggle',c.toggleGroup,c)},unregister:function(a){if(!a.toggleGroup){return}var b=this,c=b.groups[a.toggleGroup];if(c){Ext.Array.remove(c,a);a.un('toggle',b.toggleGroup,b)}},getPressed:function(d){var a=this.groups[d],b=0,c;if(a){for(c=a.length;b<c;b++){if(a[b].pressed===!0){return a[b]}}}return null}});Ext.define('Ext.menu.Manager',{singleton:!0,alternateClassName:'Ext.menu.MenuMgr',groups:{},visible:[],constructor:function(){var a=this;a.onShow=function(){a.registerGlobalListeners();return a.onShow.apply(a,arguments)}},onGlobalScroll:function(d){var b=this.visible,e=b.length,c,a,f=d.getElement();if(e&&d!==Ext.scroll.Scroller.viewport){b=b.slice();for(c=0;c<e;++c){a=b[c];if(!a.alignOnScroll&&a.hideOnScroll!==!1&&!a.owns(f)){a.hide()}}}},checkActiveMenus:function(f){var a=this.visible,e=a.length,c,b,d=Ext.Component.from(f);if(e){a=a.slice();for(c=0;c<e;++c){b=a[c];if(!(b.owns(f)||d&&d.isMenuItem&&d.getMenu()===b)){b.hide()}}}},onShow:function(a){if(a.floating){Ext.Array.include(this.visible,a)}},onHide:function(a){if(a.floating){Ext.Array.remove(this.visible,a)}},hideAll:function(){var a=this.visible,d=a.length,c=!1,b;if(d){a=a.slice();for(b=0;b<d;b++){a[b].hide();c=!0}}return c},get:function(a,b){var c;if(typeof a==='string'){c=Ext.getCmp(a);if(c instanceof Ext.menu.Menu){a=c}}else {if(Ext.isArray(a)){b=Ext.apply({items:a},b);a=new Ext.menu.Menu(b)}else {if(!a.isComponent){b=Ext.apply({},a,b);a=Ext.ComponentManager.create(b,'menu')}}}return a},registerCheckable:function(c){var b=this.groups,a=c.group;if(a){if(!b[a]){b[a]=[]}b[a].push(c)}},unregisterCheckable:function(a){var c=this.groups,b=a.group;if(b){Ext.Array.remove(c[b],a)}},onCheckChange:function(d,h){var g=this.groups,e=d.group,c=0,a,f,b;if(e&&h){a=g[e];f=a.length;for(;c<f;c++){b=a[c];if(b!==d){b.setChecked(!1)}}}},registerGlobalListeners:function(){var a=this;delete a.onShow;Ext.on({mousedown:a.checkActiveMenus,scroll:a.onGlobalScroll,scope:a})}});Ext.define('Ext.button.Button',{alias:'widget.button',extend:Ext.Component,mixins:[Ext.mixin.Queryable],alternateClassName:'Ext.Button',config:{iconAlign:'left',text:null,textAlign:'center',arrowVisible:!0,glyph:null},isButton:!0,_syncFrameHeight:!0,liquidLayout:!0,hidden:!1,disabled:!1,pressed:!1,tabIndex:0,enableToggle:!1,menuAlign:'tl-bl?',showEmptyMenu:!1,clickEvent:'click',preventDefault:!0,handleMouseEvents:!0,tooltipType:'qtip',baseCls:Ext.baseCSSPrefix+'btn',hrefTarget:'_blank',destroyMenu:!0,focusable:!0,ariaRole:'button',keyMap:{scope:'this',SPACE:'onEnterKey',ENTER:'onEnterKey',DOWN:'onDownKey'},defaultBindProperty:'text',childEls:['btnEl','btnWrap','btnInnerEl','btnIconEl','arrowEl','tooltipEl'],publishes:{pressed:1},_btnWrapCls:Ext.baseCSSPrefix+'btn-wrap',_btnCls:Ext.baseCSSPrefix+'btn-button',_baseIconCls:Ext.baseCSSPrefix+'btn-icon-el',_glyphCls:Ext.baseCSSPrefix+'btn-glyph',_innerCls:Ext.baseCSSPrefix+'btn-inner',_textCls:Ext.baseCSSPrefix+'btn-text',_noTextCls:Ext.baseCSSPrefix+'btn-no-text',_hasIconCls:Ext.baseCSSPrefix+'btn-icon',_pressedCls:Ext.baseCSSPrefix+'btn-pressed',_tooltipCls:Ext.baseCSSPrefix+'btn-tooltip',overCls:Ext.baseCSSPrefix+'btn-over',_disabledCls:Ext.baseCSSPrefix+'btn-disabled',_menuActiveCls:Ext.baseCSSPrefix+'btn-menu-active',_arrowElCls:Ext.baseCSSPrefix+'btn-arrow-el',_focusCls:Ext.baseCSSPrefix+'btn-focus',_arrowFocusCls:Ext.baseCSSPrefix+'arrow-focus',_arrowOverCls:Ext.baseCSSPrefix+'arrow-over',_arrowPressedCls:Ext.baseCSSPrefix+'arrow-pressed',renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" '+'class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}">'+'<span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" '+'class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} '+'{iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}">'+'<tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl>'+'<span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" '+'class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span>'+'<tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl>'+'</span>'+'</span>'+'{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}'+'<tpl if="closable">'+'<span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn">'+'<tpl if="closeText">'+' {closeText}'+'</tpl>'+'</span>'+'</tpl>'+'<tpl if="split">'+'<span id="{id}-arrowEl" class="{arrowElCls}" data-ref="arrowEl" '+'role="button" hidefocus="on" unselectable="on"'+'<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl>'+'<tpl foreach="arrowElAttributes"> {$}="{.}"</tpl>'+' style="{arrowElStyle}"'+'>{arrowElText}</span>'+'</tpl>'+'<div id="{id}-tooltipEl" data-ref="tooltipEl" role="presentation" class="{tooltipCls}"></div>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} '+'{baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="'+'<tpl if="iconUrl">background-image:url({iconUrl});</tpl>'+'<tpl if="glyph">'+'<tpl if="glyphFontFamily">'+'font-family:{glyphFontFamily};'+'</tpl>'+'">{glyph}'+'<tpl else>'+'">'+'</tpl>'+'</span>',scale:'small',allowedScales:['small','medium','large'],arrowAlign:'right',arrowCls:'arrow',maskOnDisable:!1,shrinkWrap:3,frame:!0,autoEl:{tag:'a',hidefocus:'on',unselectable:'on'},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){if(!this.disabled){this.doNavigate()}},doNavigate:function(){if(this.hrefTarget==='_blank'){window.open(this.getHref(),this.hrefTarget)}else {location.href=this.getHref()}},_triggerRegion:{},initComponent:function(){var a=this;a.addCls(Ext.baseCSSPrefix+'unselectable');a.callParent();if(a.menu){a.split=!0;a.setMenu(a.menu,!1,!0)}if(a.url){a.href=a.url}a.configuredWithPreventDefault=a.hasOwnProperty('preventDefault');if(a.href&&!a.configuredWithPreventDefault){a.preventDefault=!1}if(Ext.isString(a.toggleGroup)&&a.toggleGroup!==''){a.enableToggle=!0}if(a.html&&!a.text){a.text=a.html;delete a.html}},getElConfig:function(){var a=this,b=a.callParent(),d=a.getHref(),c=a.hrefTarget;if(b.tag==='a'){if(!a.disabled){b.tabIndex=a.tabIndex}if(d){if(!a.disabled){b.href=d;if(c){b.target=c}}}}if(!a.ariaStaticRoles[a.ariaRole]){if(a.menu&&!a.isSplitButton){b['aria-haspopup']=!0}if(a.enableToggle){b['aria-pressed']=!!a.pressed}}return b},beforeRender:function(){this.callParent();if(this.pressed){this.addCls(this._pressedCls)}},initRenderData:function(){return Ext.apply(this.callParent(),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(b,g,h){var a=this,e=a.menu,d=a.isSplitButton?a.arrowEl&&a.arrowEl.dom:a.ariaEl.dom,f,c;if(e&&!h){if(g!==!1&&a.destroyMenu){e.destroy()}e.ownerCmp=null}if(b){f=b.isMenu;b=Ext.menu.Manager.get(b,{ownerCmp:a});b.setOwnerCmp(a,f);b.menuClickBuffer=250;a.mon(b,{scope:a,show:a.onMenuShow,hide:a.onMenuHide});if(!e&&a.getArrowVisible()){a.split=!0;if(a.rendered){a._addSplitCls();a.updateLayout()}}a.menu=b;if(d){d.setAttribute('aria-haspopup',!0);d.setAttribute('aria-owns',b.id)}else {c=a.isSplitButton?a.ariaArrowElAttributes||(a.ariaArrowElAttributes={}):a.ariaRenderAttributes||(a.ariaRenderAttributes={});c['aria-haspopup']=!0;if(!b.hidden){c['aria-owns']=b.id}}}else {if(a.rendered){d.removeAttribute('aria-haspopup');d.removeAttribute('aria-owns');a._removeSplitCls();a.updateLayout()}else {c=a.isSplitButton?a.ariaArrowElAttributes:a.ariaRenderAttributes;if(c){delete c['aria-haspopup'];delete c['aria-owns']}}a.split=!1;a.menu=null}},onRender:function(){var a=this,d,c,b;a.callParent(arguments);c=a.el;if(a.tooltip){a.setTooltip(a.tooltip,!0)}if(a.handleMouseEvents){b={scope:a,mouseover:a.onMouseOver,mouseout:a.onMouseOut,mousedown:a.onMouseDown};if(a.split){b.mousemove=a.onMouseMove}}else {b={scope:a}}if(Ext.supports.Touch){b.touchstart=a.onTouchStart}if(a.repeat){a.mon(new Ext.util.ClickRepeater(c,Ext.isObject(a.repeat)?a.repeat:{}),'click',a.onRepeatClick,a)}else {if(b[a.clickEvent]){d=!0}else {b[a.clickEvent]=a.onClick}}a.mon(c,b);if(a.hasFrameTable()){a.mon(a.frameTable,'click',a.frameTableListener,a)}if(d){a.mon(c,a.clickEvent,a.onClick,a)}Ext.button.Manager.register(a)},onFocusLeave:function(a){this.callParent([a]);if(this.menu){this.menu.hide()}},getTemplateArgs:function(){var a=this,h=a._btnCls,i=a._baseIconCls,c=a.getIconAlign(),b=a.glyph,e,d=a.text,g=a._hasIcon(),f=a._hasIconCls;if(b){e=b.fontFamily;b=b.character}return {split:a.isSplitButton,innerCls:a._innerCls,splitCls:a.getArrowVisible()?a.getSplitCls():'',tooltipCls:a._tooltipCls,iconUrl:a.icon,iconCls:a.iconCls,glyph:b,glyphCls:b?a._glyphCls:'',glyphFontFamily:e,text:d||'&#160;',closeText:a.closeText,textCls:d?a._textCls:'',noTextCls:d?'':a._noTextCls,hasIconCls:g?f:'',btnWrapCls:a._btnWrapCls,btnWrapStyle:a.width?'table-layout:fixed;':'',btnElStyle:a.height?'height:auto;':'',btnCls:h,baseIconCls:i,iconBeforeText:c==='left'||c==='top',iconAlignCls:g?f+'-'+c:'',textAlignCls:h+'-'+a.getTextAlign(),arrowElCls:a._arrowElCls,arrowElStyle:a.arrowVisible?'':'display:none',tabIndex:a.tabIndex}},renderIcon:function(a){return this.lookupTpl('iconTpl').apply(a)},setHref:function(c){var a=this,d=a.hrefTarget,b;a.href=c;if(!a.configuredWithPreventDefault){a.preventDefault=!c}if(a.rendered){b=a.el.dom;if(!c||a.disabled){b.removeAttribute('href');b.removeAttribute('hrefTarget')}else {b.href=a.getHref();if(d){b.target=d}}}},getHref:function(){var a=this,b=a.href;return b?Ext.urlAppend(b,Ext.Object.toQueryString(Ext.apply({},a.params,a.baseParams))):!1},setParams:function(c){var a=this,b;a.params=c;if(a.rendered){b=a.el.dom;if(a.disabled){b.removeAttribute('href')}else {b.href=a.getHref()||''}}},getSplitCls:function(){var a=this;return a.split?a.baseCls+'-'+a.arrowCls+' '+(a.baseCls+'-'+a.arrowCls+'-'+a.arrowAlign):''},setIcon:function(b){var a=this,c=a.btnIconEl,d=a.icon||'';b=b||'';if(a.glyph){a.setGlyph(null)}a.icon=b;if(b!==d){if(c){c.removeCls(a.iconCls);c.setStyle('background-image',b?'url('+b+')':'');a._syncHasIconCls();if(a.didIconStateChange(d,b)){a.updateLayout()}}a.fireEvent('iconchange',a,d,b)}return a},setIconCls:function(b){var a=this,c=a.btnIconEl,d=a.iconCls||'';b=b||'';if(a.glyph){a.setGlyph(null)}a.iconCls=b;if(d!==b){if(c){c.setStyle('background-image','');c.removeCls(d);c.addCls(b);a._syncHasIconCls();if(a.didIconStateChange(d,b)){a.updateLayout()}}a.fireEvent('iconchange',a,d,b)}return a},applyGlyph:function(a,b){if(a){if(!a.isGlyph){a=new Ext.Glyph(a)}if(a.isEqual(b)){a=undefined}}return a},updateGlyph:function(c,d){var a=this,b=a.btnIconEl,e=a._glyphCls;if(b){a.icon=null;b.setStyle('background-image','');if(c){b.dom.innerHTML=c.character;b.addCls(e);b.setStyle(c.getStyle())}else {b.dom.innerHTML='';b.removeCls(e)}a._syncHasIconCls();if(a.didIconStateChange(d,c)){a.updateLayout()}}a.fireEvent('glyphchange',a,c&&c.glyphConfig,d&&d.glyphConfig);return a},setTooltip:function(b,d){var a=this,c=a.el;if(a.rendered){if(!d||!b){a.clearTip()}if(a.disabled){c=a.tooltipEl}if(b){if(Ext.quickTipsActive&&Ext.isObject(b)){Ext.tip.QuickTipManager.register(Ext.apply({target:c.id},b));a.tooltip=b}else {c.dom.setAttribute(a.getTipAttr(),b)}a.currentTooltipEl=c}}else {a.tooltip=b}return a},updateIconAlign:function(e,f){var b=this,a,d,c;if(b.rendered){a=b.btnEl;d=b.btnIconEl;c=b._hasIconCls;if(f){a.removeCls(c+'-'+f)}a.addCls(c+'-'+e);if(e==='top'||e==='left'){a.insertFirst(d)}else {a.appendChild(d)}b.updateLayout()}},updateTextAlign:function(e,d){var a=this,c=a.btnEl,b=a._btnCls;if(a.rendered){c.removeCls(b+'-'+d);c.addCls(b+'-'+e)}},getTipAttr:function(){return this.tooltipType==='qtip'?'data-qtip':'title'},getRefItems:function(c){var b=this.menu,a=[];if(b){if(c){a=b.getRefItems(c)}a.unshift(b)}return a},clearTip:function(){var a=this,b=a.currentTooltipEl;if(b){a.currentTooltipEl=null;if(Ext.quickTipsActive&&Ext.isObject(a.tooltip)){Ext.tip.QuickTipManager.unregister(b)}else {b.dom.removeAttribute(a.getTipAttr())}}},doDestroy:function(){var a=this,b=a.menu;if(a.deferFocusTimer){Ext.undefer(a.deferFocusTimer);a.deferFocusTimer=null}if(a.rendered){a.clearTip()}Ext.destroy(a.repeater);if(b&&a.destroyMenu){a.menu=Ext.destroy(b)}Ext.button.Manager.unregister(a);a.callParent()},setHandler:function(a,b){this.handler=a;if(arguments.length>1){this.scope=b}return this},updateText:function(b,c){var a=this,e=a.btnInnerEl,d=a.btnEl;b=b==null?'':String(b);c=c||'';if(a.rendered){e.setHtml(b||'&#160;');d[b?'addCls':'removeCls'](a._textCls);d[b?'removeCls':'addCls'](a._noTextCls);a.updateLayout()}a.fireEvent('textchange',a,c,b)},didIconStateChange:function(c,b){var a=Ext.isEmpty(b);return Ext.isEmpty(c)?!a:a},click:function(a){return this.onClick(a)},setPressed:function(a){return this.toggle(a!==!1)},toggle:function(b,d){var a=this,c=a.ariaEl.dom;if(!a.enableToggle){return a}b=b===undefined?!a.pressed:!!b;if(a.fireEvent('beforetoggle',a,b)!==!1){if(b!==a.pressed){a[b?'addCls':'removeCls'](a._pressedCls);a.pressed=b;if(c){c.setAttribute('aria-pressed',b)}if(!d){a.fireEvent('toggle',a,b);Ext.callback(a.toggleHandler,a.scope,[a,b],0,a);if(a.publishState){a.publishState('pressed',b)}}}}return a},maybeShowMenu:function(a){if(this.menu){this.showMenu(a)}},showMenu:function(c){var a=this,b=a.menu,e=!c||c.pointerType,d;if(b&&a.rendered){if(a.tooltip&&Ext.quickTipsActive&&a.getTipAttr()!=='title'){Ext.tip.QuickTipManager.getQuickTip().cancelShow(a.el)}if(b.isVisible()){if(e){b.hide()}else {b.focus()}}else {if(!c||a.showEmptyMenu||b.items.getCount()>0){b.autoFocus=!e;b.showBy(a.el,a.menuAlign);d=a.isSplitButton?a.arrowEl&&a.arrowEl.dom:a.ariaEl.dom;if(d){d.setAttribute('aria-owns',b.id)}}}}return a},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var a=this.menu;return a&&a.rendered&&a.isVisible()},onRepeatClick:function(b,a){this.onClick(a)},onTouchStart:function(a){if(this.disabled){this.doPreventDefault(a)}},onEnterKey:function(a){if(!this.href){this.onClick(a);a.stopEvent();return !1}},onClick:function(a){var b=this;if(a){b.doPreventDefault(a)}if(a&&a.type!=='keydown'&&a.button){return}if(!b.disabled){b.doToggle();b.maybeShowMenu(a);b.fireHandler(a)}},doToggle:function(){var a=this;if(a.allowDepress!==!1||!a.pressed){a.toggle()}},doPreventDefault:function(a){if(a&&(this.preventDefault||this.disabled&&this.getHref())){a.preventDefault()}},fireHandler:function(b){var a=this;if(a.fireEvent('click',a,b)!==!1&&!a.destroyed){Ext.callback(a.handler,a.scope,[a,b],0,a)}},onMouseOver:function(b){var a=this;if(!a.disabled&&!b.within(a.el,!0,!0)){a.onMouseEnter(b)}},onMouseOut:function(b){var a=this;if(!b.within(a.el,!0,!0)){if(a.overMenuTrigger){a.onMenuTriggerOut(b)}a.onMouseLeave(b)}},onMouseMove:function(b){var a=this,c=a.overMenuTrigger;if(a.split){if(a.isWithinTrigger(b)){if(!c){a.onMenuTriggerOver(b)}}else {if(c){a.onMenuTriggerOut(b)}}}},isWithinTrigger:function(d){var a=this,e=a.el,c,b;c=a.arrowAlign==='right'?d.getX()-a.getX():d.getY()-e.getY();b=a.getTriggerRegion();return c>b.begin&&c<b.end},getTriggerRegion:function(){var a=this,b=a._triggerRegion,d=a.arrowAlign==='right',e=d?'getRight':'getBottom',c=d?a.getWidth():a.getHeight();b.begin=c-(a.el[e]()-a.btnEl[e]());b.end=c;return b},onMouseEnter:function(a){this.fireEvent('mouseover',this,a)},onMouseLeave:function(a){this.fireEvent('mouseout',this,a)},onMenuTriggerOver:function(c){var a=this,b=a.arrowTooltip;a.overMenuTrigger=!0;if(a.split&&b){a.btnWrap.dom.setAttribute(a.getTipAttr(),b)}a.fireEvent('menutriggerover',a,a.menu,c)},onMenuTriggerOut:function(b){var a=this;delete a.overMenuTrigger;if(a.split&&a.arrowTooltip){a.btnWrap.dom.setAttribute(a.getTipAttr(),'')}a.fireEvent('menutriggerout',a,a.menu,b)},onEnable:function(){var a=this,c=a.href,b=a.hrefTarget,d=a.el.dom;a.callParent();a.removeCls(a._disabledCls);a.el.setTabIndex(a.tabIndex);if(a.tooltip){a.setTooltip(a.tooltip)}if(c){d.href=c}if(b){d.target=b}},onDisable:function(){var a=this,b=a.el.dom;a.callParent();a.addCls(a._disabledCls);a.removeCls(a.overCls);a.el.setTabIndex(null);if(a.tooltip){a.setTooltip(a.tooltip)}if(a.href){b.removeAttribute('href')}if(a.hrefTarget){b.removeAttribute('target')}},setScale:function(b){var a=this,c=a.ui.replace('-'+a.scale,'');if(!Ext.Array.contains(a.allowedScales,b)){throw new Error('#setScale: scale must be an allowed scale ('+a.allowedScales.join(', ')+')')}a.scale=b;a.setUI(c)},setUI:function(b){var a=this;if(a.scale&&!b.match(a.scale)){b=b+'-'+a.scale}a.callParent([b])},onMouseDown:function(b){var a=this,c;if(Ext.isIE||Ext.isEdge||b.pointerType==='touch'){if(a.deferFocusTimer){Ext.undefer(a.deferFocusTimer)}c=Ext.Element.getActiveElement();a.deferFocusTimer=Ext.defer(function(){var d;a.deferFocusTimer=null;if(a.destroying||a.destroyed||Ext.Element.getActiveElement()!==c||!a.canFocus()){return}d=a.getFocusEl();if(d&&!b.defaultPrevented){d.focus()}},1)}if(!a.disabled&&b.button===0){Ext.button.Manager.onButtonMousedown(a,b);a.removeCls(a._arrowPressedCls);a.addCls(a._pressedCls)}},onMouseUp:function(b){var a=this;if(!a.destroyed&&b.button===0){if(!a.pressed){a.removeCls(a._pressedCls)}}},onMenuShow:function(){var a=this;a.addCls(a._menuActiveCls);a.fireEvent('menushow',a,a.menu)},onMenuHide:function(b){var a=this;a.removeCls(a._menuActiveCls);a.fireEvent('menuhide',a,a.menu)},onDownKey:function(b){var a=this;if(a.menu&&!a.disabled){a.showMenu(b);b.stopEvent();return !1}},updateArrowVisible:function(b){var a=this;if(a.rendered){if(b){if(a.menu||a.isSplitButton){a.split=!0;a._addSplitCls()}}else {a._removeSplitCls();a.split=!1}}return b},privates:{elClsMap:{'btnWrap':'_btnWrapCls','btnEl':'_btnCls','btnIconEl':'_baseIconCls','btnInnerEl':'_innerCls'},addUIToElement:function(){this.callParent();this.updateChildElsUICls(!0)},addOverCls:function(){if(!this.disabled){this.addCls(this.overCls)}},_addSplitCls:function(){var a=this;a.btnWrap.addCls(a.getSplitCls())},getTdCls:function(){return Ext.baseCSSPrefix+'button-'+this.ui+'-'+this.scale+'-cell'},getValue:function(){return this.value},removeUIFromElement:function(){this.callParent();this.updateChildElsUICls(!1)},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){var a=this;a.btnWrap.removeCls(a.getSplitCls())},_syncHasIconCls:function(){var a=this,c=a.btnEl,b=a._hasIconCls;if(c){c[a._hasIcon()?'addCls':'removeCls']([b,b+'-'+a.iconAlign])}},_hasIcon:function(){return !!(this.icon||this.iconCls||this.glyph)},updateChildElsUICls:function(h){var a=this,i=a.ui,g=h?'addCls':'removeCls',e=a.elClsMap,c,d,f,b;for(c in e){d=a[c];f=e[c];b=a[f];if(d&&b){d[g](b+'-'+i)}}},wrapPrimaryEl:function(a){this.el=new Ext.dom.ButtonElement(a);this.callParent([a])}}});Ext.define('Ext.theme.material.button.Button',{override:'Ext.button.Button',ripple:{color:'default'}});Ext.define('Ext.layout.container.boxOverflow.Menu',{extend:Ext.layout.container.boxOverflow.None,alternateClassName:'Ext.layout.boxOverflow.Menu',alias:['box.overflow.menu','box.overflow.Menu'],noItemsMenuText:'<div class="'+Ext.baseCSSPrefix+'toolbar-no-items" role="menuitem">(None)</div>',menuCls:Ext.baseCSSPrefix+'box-menu',constructor:function(b){var a=this;a.callParent([b]);a.menuItems=[]},beginLayout:function(a){this.callParent([a]);this.clearOverflow(a)},beginLayoutCycle:function(a,b){this.callParent([a,b]);if(!b){this.clearOverflow(a);this.layout.cacheChildItems(a)}},onRemove:function(a){Ext.Array.remove(this.menuItems,a)},clearItem:function(a){var b=a.menu;if(a.isButton&&b){a.setMenu(b,!1)}},getSuffixConfig:function(){var a=this,c=a.layout,b=c.owner,d=b.id;a.menu=new Ext.menu.Menu({listeners:{scope:a,beforeshow:a.beforeMenuShow}});a.menuTrigger=new Ext.button.Button({id:d+'-menu-trigger',cls:a.menuCls+'-after '+Ext.baseCSSPrefix+'toolbar-item',plain:b.usePlainButtons,ownerCt:b,ownerLayout:c,iconCls:Ext.baseCSSPrefix+a.getOwnerType(b)+'-more-icon',ui:b.defaultButtonUI||'default',menu:a.menu,showEmptyMenu:!0,getSplitCls:function(){return ''}});return a.menuTrigger.getRenderTree()},getOverflowCls:function(a){return this.menuCls+'-body-'+a},handleOverflow:function(b){var a=this,c=a.layout;a.showTrigger(b);if(c.direction!=='vertical'){a.menuTrigger.setLocalY((b.state.boxPlan.maxSize-a.menuTrigger[c.names.getHeight]())/2)}return {reservedSpace:a.triggerTotalWidth}},captureChildElements:function(){var b=this,a=b.menuTrigger,c=b.layout.names;if(a.rendering){a.finishRender();b.triggerTotalWidth=a[c.getWidth]()+a.el.getMargin(c.parallelMargins)}},clearOverflow:function(h){var b=this,d=b.menuItems,g=d.length,e=b.layout.owner,f=e._asLayoutRoot,a,c;e.suspendLayouts();b.captureChildElements();b.hideTrigger();e.resumeLayouts();for(c=0;c<g;c++){a=d[c];a.suspendLayouts();a.show();b.clearItem(a);a.resumeLayouts(f)}d.length=0},showTrigger:function(i){var b=this,m=b.layout,o=m.owner,n=m.names,p=n.x,l=n.width,q=i.state.boxPlan,k=q.targetSize[l],j=i.childItems,e=b.menuTrigger,f=b.menuItems,d,h,a,g,c;e.suspendLayouts();e.show();e.resumeLayouts(b._asLayoutRoot);k-=b.triggerTotalWidth;o.suspendLayouts();for(a=0,c=f.length;a<c;++a){b.clearItem(f[a])}f.length=0;for(a=0,c=j.length;a<c;a++){d=j[a];g=d.props;if(g[p]+g[l]>k){h=d.target;b.menuItems.push(h);h.hide()}}o.resumeLayouts()},hideTrigger:function(){var a=this.menuTrigger;if(a){a.hide()}},beforeMenuShow:function(a){var e=this,g=e.menuItems,d=0,h=g.length,b,c,f=function(b,c){return b.isXType('buttongroup')&&!(c instanceof Ext.toolbar.Separator)};a.suspendLayouts();a.removeAll(!1);for(;d<h;d++){b=g[d];if(!d&&b instanceof Ext.toolbar.Separator){continue}if(c&&(f(b,c)||f(c,b))){a.add('-')}e.addComponentToMenu(a,b);c=b}if(a.items.length<1){a.add(e.noItemsMenuText)}a.resumeLayouts()},createMenuConfig:function(a,d){var b=Ext.apply({},a.initialConfig),c=a.toggleGroup;Ext.copy(b,a,['iconCls','icon','itemId','disabled','handler','scope','menu','tabIndex']);Ext.applyIf(b,{hideOnClick:d,destroyMenu:!1,listeners:null});b.text=a.overflowText||a.text;b.masterComponent=a;if(a.isFormField){b.value=a.getValue();if(a instanceof Ext.form.field.Checkbox){b={xtype:'menucheckitem',group:a.isRadio?a.name+'_clone':undefined,text:a.boxLabel||a.fieldLabel,name:a.name,masterComponent:a,checked:a.getValue(),hideOnClick:!1,checkChangeDisabled:!0}}b.listeners={change:function(c,b,e){c.masterComponent.setValue(b)}};a.on('change',function(c,b,e){c.overflowClone.setValue(b)})}else {if(c||a.enableToggle){Ext.apply(b,{hideOnClick:!1,group:c,checked:a.pressed,handler:function(b,c){b.masterComponent.onClick(c)}})}}if(a.isButton&&!a.changeListenersAdded){a.on({textchange:this.onButtonAttrChange,iconchange:this.onButtonAttrChange,toggle:this.onButtonToggle});a.changeListenersAdded=!0}a.on({enable:this.onComponentStatusChange,disable:this.onComponentStatusChange});delete b.margin;delete b.ownerCt;delete b.xtype;delete b.id;delete b.itemId;return b},onButtonAttrChange:function(b){var a=b.overflowClone;a.suspendLayouts();a.setText(b.text);a.setIcon(b.icon);a.setIconCls(b.iconCls);a.resumeLayouts(!0)},onButtonToggle:function(b,a){if(b.overflowClone.checked!==a){b.overflowClone.setChecked(a)}},onComponentStatusChange:function(b){var a=b.overflowClone;if(a){a.setDisabled(b.disabled)}},addComponentToMenu:function(b,a){var c=this,d,e,f;if(a instanceof Ext.toolbar.Fill){return}else {if(a instanceof Ext.toolbar.Separator){b.add('-')}else {if(a.overflowClone){b.add(a.overflowClone)}else {if(a.isComponent){if(a.isXType('splitbutton')){a.overflowClone=b.add(c.createMenuConfig(a,!0))}else {if(a.isXType('button')){a.overflowClone=b.add(c.createMenuConfig(a,!a.menu))}else {if(a.isXType('buttongroup')){e=a.items.items;f=e.length;for(d=0;d<f;d++){c.addComponentToMenu(b,e[d])}}else {if(a.isCheckbox){a.overflowClone=b.add(c.createMenuConfig(a));Ext.apply(a.overflowClone,{getValue:function(){return a.overflowClone.checked},setValue:function(){a.overflowClone.setChecked(a.getValue())}});a.overflowClone.on('click',function(c){c.setChecked(c.masterComponent.isRadio?!0:!c.checked);c.fireEvent('change',c,c.checked)})}else {a.overflowClone=b.add(Ext.create(Ext.getClassName(a),c.createMenuConfig(a)))}}}}}}}}},destroy:function(){Ext.destroy(this.menu,this.menuTrigger);this.callParent()}});Ext.define('Ext.form.field.HtmlEditor',{extend:Ext.form.FieldContainer,alias:'widget.htmleditor',alternateClassName:'Ext.form.HtmlEditor',mixins:{field:Ext.form.field.Field},focusable:!0,componentLayout:'htmleditor',textareaCls:Ext.baseCSSPrefix+'htmleditor-textarea',componentTpl:['{beforeTextAreaTpl}','<textarea id="{id}-textareaEl" data-ref="textareaEl" name="{name}" tabindex="-1" {inputAttrTpl}',' class="{textareaCls}" autocomplete="off">','{[Ext.util.Format.htmlEncode(values.value)]}','</textarea>','{afterTextAreaTpl}','{beforeIFrameTpl}','<iframe id="{id}-iframeEl" data-ref="iframeEl" name="{iframeName}" frameBorder="0" {iframeAttrTpl}',' src="{iframeSrc}" class="{iframeCls}"></iframe>','{afterIFrameTpl}',{disableFormats:!0}],stretchInputElFixed:!0,subTplInsertions:['beforeTextAreaTpl','afterTextAreaTpl','beforeIFrameTpl','afterIFrameTpl','iframeAttrTpl','inputAttrTpl'],enableFormat:!0,enableFontSize:!0,enableColors:!0,enableAlignments:!0,enableLists:!0,enableSourceEdit:!0,enableLinks:!0,enableFont:!0,createLinkText:'Please enter the URL for the link:',defaultLinkValue:'http:/'+'/',fontFamilies:['Arial','Courier New','Tahoma','Times New Roman','Verdana'],defaultValue:Ext.isOpera?'&#160;':'&#8203;',extraFieldBodyCls:Ext.baseCSSPrefix+'html-editor-wrap',defaultButtonUI:'default-toolbar',buttonDefaults:null,initialized:!1,activated:!1,sourceEditMode:!1,iframePad:3,hideMode:'offsets',layout:{type:'vbox',align:'stretch'},maskOnDisable:!0,containerElCls:Ext.baseCSSPrefix+'html-editor-container',reStripQuotes:/^['"]*|['"]*$/g,textAlignRE:/text-align:(.*?);/i,safariNonsenseRE:/\sclass="(?:Apple-style-span|Apple-tab-span|khtml-block-placeholder)"/gi,nonDigitsRE:/\D/g,initComponent:function(){var a=this;a.items=[a.createToolbar(),a.createInputCmp()];if(a.value==null){a.value=''}a.callParent(arguments);a.initField()},createInputCmp:function(){this.inputCmp=Ext.widget(this.getInputCmpCfg());return this.inputCmp},getInputCmpCfg:function(){var a=this,c=a.id+'-inputCmp',b={id:c,name:a.name,textareaCls:a.textareaCls+' '+Ext.baseCSSPrefix+'hidden',value:a.value,iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,iframeCls:Ext.baseCSSPrefix+'htmleditor-iframe'};a.getInsertionRenderData(b,a.subTplInsertions);return {flex:1,xtype:'component',tpl:a.lookupTpl('componentTpl'),childEls:['iframeEl','textareaEl'],id:c,cls:Ext.baseCSSPrefix+'html-editor-input',data:b}},createToolbar:function(){this.toolbar=Ext.widget(this.getToolbarCfg());return this.toolbar},getToolbarCfg:function(){var a=this,b=[],e,f=Ext.quickTipsActive&&Ext.tip.QuickTipManager.isEnabled(),c=Ext.baseCSSPrefix,g,d;function btn(b,g,e){return Ext.merge({itemId:b,cls:c+'btn-icon',iconCls:c+'edit-'+b,enableToggle:g!==!1,scope:a,handler:e||a.relayBtnCmd,clickEvent:'mousedown',tooltip:f?a.buttonTips[b]:d,overflowText:a.buttonTips[b].title||d,tabIndex:-1},a.buttonDefaults)}if(a.enableFont){g=Ext.widget('component',{itemId:'fontSelect',renderTpl:['<select id="{id}-selectEl" data-ref="selectEl" class="'+c+'font-select">','</select>'],childEls:['selectEl'],afterRender:function(){a.fontSelect=this.selectEl;Ext.Component.prototype.afterRender.apply(this,arguments)},onDisable:function(){var a=this.selectEl;if(a){a.dom.disabled=!0}Ext.Component.prototype.onDisable.apply(this,arguments)},onEnable:function(){var a=this.selectEl;if(a){a.dom.disabled=!1}Ext.Component.prototype.onEnable.apply(this,arguments)},listeners:{change:function(){a.win.focus();a.relayCmd('fontName',a.fontSelect.dom.value);a.deferFocus()},element:'selectEl'}});b.push(g,'-')}if(a.enableFormat){b.push(btn('bold'),btn('italic'),btn('underline'))}if(a.enableFontSize){b.push('-',btn('increasefontsize',!1,a.adjustFont),btn('decreasefontsize',!1,a.adjustFont))}if(a.enableColors){b.push('-',Ext.merge({itemId:'forecolor',cls:c+'btn-icon',iconCls:c+'edit-forecolor',overflowText:a.buttonTips.forecolor.title,tooltip:f?a.buttonTips.forecolor||d:d,tabIndex:-1,menu:Ext.widget('menu',{plain:!0,items:[{xtype:'colorpicker',allowReselect:!0,focus:Ext.emptyFn,value:'000000',plain:!0,clickEvent:'mousedown',handler:function(c,b){a.relayCmd('forecolor',Ext.isWebKit||Ext.isIE||Ext.isEdge?'#'+b:b);this.up('menu').hide()}}]})},a.buttonDefaults),Ext.merge({itemId:'backcolor',cls:c+'btn-icon',iconCls:c+'edit-backcolor',overflowText:a.buttonTips.backcolor.title,tooltip:f?a.buttonTips.backcolor||d:d,tabIndex:-1,menu:Ext.widget('menu',{plain:!0,items:[{xtype:'colorpicker',focus:Ext.emptyFn,value:'FFFFFF',plain:!0,allowReselect:!0,clickEvent:'mousedown',handler:function(c,b){if(Ext.isGecko){a.execCmd('useCSS',!1);a.execCmd('hilitecolor','#'+b);a.execCmd('useCSS',!0);a.deferFocus()}else {a.relayCmd(Ext.isOpera?'hilitecolor':'backcolor',Ext.isWebKit||Ext.isIE||Ext.isEdge||Ext.isOpera?'#'+b:b)}this.up('menu').hide()}}]})},a.buttonDefaults))}if(a.enableAlignments){b.push('-',btn('justifyleft'),btn('justifycenter'),btn('justifyright'))}if(a.enableLinks){b.push('-',btn('createlink',!1,a.createLink))}if(a.enableLists){b.push('-',btn('insertorderedlist'),btn('insertunorderedlist'))}if(a.enableSourceEdit){b.push('-',btn('sourceedit',!0,function(){a.toggleSourceEdit(!a.sourceEditMode)}))}for(e=0;e<b.length;e++){if(b[e].itemId!=='sourceedit'){b[e].disabled=!0}}return {xtype:'toolbar',defaultButtonUI:a.defaultButtonUI,cls:Ext.baseCSSPrefix+'html-editor-tb',enableOverflow:!0,items:b,listeners:{click:function(a){a.preventDefault()},element:'el'}}},getMaskTarget:function(){return Ext.isGecko?this.inputCmp.el:this.bodyEl},setReadOnly:function(b){var a=this,d=a.textareaEl,e=a.iframeEl,c;a.readOnly=b;if(d){d.dom.readOnly=b}if(a.initialized){c=a.getEditorBody();if(Ext.isIE){e.setDisplayed(!1);c.contentEditable=!b;e.setDisplayed(!0)}else {a.setDesignMode(!b)}if(c){c.style.cursor=b?'default':'text'}a.disableItems(b)}},getDocMarkup:function(){var a=this,b=a.iframeEl.getHeight()-a.iframePad*2;return Ext.String.format('<!DOCTYPE html>'+'<html><head><style type="text/css">'+(Ext.isOpera||Ext.isIE?'p{margin:0;}':'')+'body{border:0;margin:0;padding:{0}px;direction:'+(a.rtl?'rtl;':'ltr;')+(Ext.isIE8?Ext.emptyString:'min-')+'height:{1}px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:text;background-color:white;'+(Ext.isIE?'':'font-size:12px;font-family:{2}')+'}</style></head><body></body></html>',a.iframePad,b,a.defaultFont)},getEditorBody:function(){var a=this.getDoc();return a&&a.body},getDoc:function(){return this.iframeEl.dom.contentDocument||this.getWin().document},getWin:function(){return this.iframeEl.dom.contentWindow||window.frames[this.iframeEl.dom.name]},initDefaultFont:function(){var b=this,h=0,c,a,f,e,d,i,g;if(!b.defaultFont){a=b.textareaEl.getStyle('font-family');a=Ext.String.capitalize(a.split(',')[0]);c=Ext.Array.clone(b.fontFamilies);Ext.Array.include(c,a);c.sort();b.defaultFont=a;f=b.down('#fontSelect').selectEl.dom;for(d=0,i=c.length;d<i;++d){a=c[d];g=a.toLowerCase();e=new Option(a,g);if(a===b.defaultFont){h=d}e.style.fontFamily=g;if(Ext.isIE){f.add(e)}else {f.options.add(e)}}f.options[h].selected=!0}},isEqual:function(a,b){return this.isEqualAsString(a,b)},afterRender:function(){var a=this,b=a.inputCmp;a.callParent(arguments);a.iframeEl=b.iframeEl;a.textareaEl=b.textareaEl;a.inputEl=a.iframeEl;if(a.enableFont){a.initDefaultFont()}a.initPhase=0;a.initializeTask=Ext.TaskManager.start({run:a.initFrameDoc,scope:a,interval:10,duration:5000})},initFrameDoc:function(){var a=this,b=a.getDoc();if(a.destroying||a.destroyed){return Ext.TaskManager.stop(a.initializeTask)}switch(a.initPhase){case 0:if(b){a.win=a.getWin();b.open();b.write(a.getDocMarkup());b.close();a.initPhase++};break;case 1:if(b.body||b.readyState==='complete'){a.setDesignMode(!0);a.initPhase++};break;case 2:a.initEditor();Ext.TaskManager.stop(a.initializeTask);}},setDesignMode:function(a){var c=this,b=c.getDoc();if(b){if(c.readOnly){a=!1}b.designMode=/on|true/i.test(String(a).toLowerCase())?'on':'off'}},getDesignMode:function(){var a=this.getDoc();return !a?'':String(a.designMode).toLowerCase()},disableItems:function(d){var c=this.getToolbar().items.items,a,e=c.length,b;for(a=0;a<e;a++){b=c[a];if(b.getItemId()!=='sourceedit'){b.setDisabled(d)}}},toggleSourceEdit:function(b){var a=this,e=a.iframeEl,c=a.textareaEl,d=Ext.baseCSSPrefix+'hidden',f=a.getToolbar().getComponent('sourceedit');if(!Ext.isBoolean(b)){b=!a.sourceEditMode}a.sourceEditMode=b;if(f.pressed!==b){f.toggle(b)}if(b){a.disableItems(!0);a.syncValue();e.addCls(d);c.removeCls(d);c.dom.removeAttribute('tabIndex');c.focus();a.inputEl=c}else {if(a.initialized){a.disableItems(a.readOnly)}a.pushValue();e.removeCls(d);c.addCls(d);c.dom.setAttribute('tabIndex',-1);a.deferFocus();a.inputEl=e}a.fireEvent('editmodechange',a,b);a.updateLayout()},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!=='http:/'+'/'){this.relayCmd('createlink',a)}},clearInvalid:Ext.emptyFn,setValue:function(b){var a=this,c=a.textareaEl;if(b===null||b===undefined){b=''}if(a.value!==b){if(c){c.dom.value=b}a.pushValue();if(!a.rendered&&a.inputCmp){a.inputCmp.data.value=b}a.mixins.field.setValue.call(a,b)}return a},cleanHtml:function(a){a=String(a);if(Ext.isWebKit){a=a.replace(this.safariNonsenseRE,'')}if(a.charCodeAt(0)===parseInt(this.defaultValue.replace(this.nonDigitsRE,''),10)){a=a.substring(1)}return a},syncValue:function(){var b=this,e,g,a,f,d,c;if(b.initialized){e=b.getEditorBody();a=e.innerHTML;c=b.textareaEl.dom;if(Ext.isWebKit){f=e.style.cssText;d=f.match(b.textAlignRE);if(d&&d[1]){a='<div style="'+d[0]+'">'+a+'</div>'}}a=b.cleanHtml(a);if(b.fireEvent('beforesync',b,a)!==!1){if(Ext.isGecko&&c.value===''&&a==='<br>'){a=''}if(c.value!==a){c.value=a;g=!0}b.fireEvent('sync',b,a);if(g){b.checkChange()}}}},getValue:function(){var a=this,b;if(!a.sourceEditMode){a.syncValue()}b=a.rendered?a.textareaEl.dom.value:a.value;a.value=b;return b},pushValue:function(){var a=this,b;if(a.initialized){b=a.textareaEl.dom.value||'';if(!a.activated&&b.length<1){b=a.defaultValue}if(a.fireEvent('beforepush',a,b)!==!1){a.getEditorBody().innerHTML=b;if(Ext.isGecko){a.setDesignMode(!1);a.setDesignMode(!0)}a.fireEvent('push',a,b)}}},focus:function(e,c){var a=this,d,b;if(c){if(!a.focusTask){a.focusTask=new Ext.util.DelayedTask(a.focus)}a.focusTask.delay(Ext.isNumber(c)?c:10,null,a,[e,!1])}else {if(e){if(a.textareaEl&&a.textareaEl.dom){d=a.textareaEl.dom.value}if(d&&d.length){a.execCmd('selectall',!0)}}b=a.getFocusEl();if(b&&b.focus){b.focus()}}return a},initEditor:function(){var a=this,e=a.getEditorBody(),f=a.textareaEl.getStyle(['font-size','font-family','background-image','background-repeat','background-color','color']),d=a.getDoc(),c=Ext.get(d),b;f['background-attachment']='fixed';e.bgProperties='fixed';Ext.DomHelper.applyStyles(e,f);if(c){try{c.clearListeners()}catch(g){}b=Ext.Function.createBuffered(a.updateToolbar,100,a);c.on({mousedown:b,dblclick:b,click:b,keyup:b,delegated:!1});b=a.onRelayedEvent;c.on({mousedown:b,mousemove:b,mouseup:b,click:b,dblclick:b,delegated:!1,scope:a});if(Ext.isGecko){c.on('keypress',a.applyCommand,a)}if(a.fixKeys){c.on('keydown',a.fixKeys,a,{delegated:!1})}if(a.fixKeysAfter){c.on('keyup',a.fixKeysAfter,a,{delegated:!1})}if(Ext.isIE9){Ext.get(d.documentElement).on('focus',a.focus,a)}if(Ext.isIE8){c.on('focusout',function(){a.savedSelection=d.selection.type!=='None'?d.selection.createRange():null},a);c.on('focusin',function(){if(a.savedSelection){a.savedSelection.select()}},a)}Ext.getWin().on('unload',a.destroyEditor,a);a.initialized=!0;a.pushValue();a.setReadOnly(a.readOnly);a.fireEvent('initialize',a)}},destroyEditor:function(){var b=this,d=b.initializeTask,a,c;if(d){Ext.TaskManager.stop(d,!0)}if(b.rendered){Ext.getWin().un('unload',b.destroyEditor,b);a=b.getDoc();if(a){Ext.get(a).destroy();if(a.hasOwnProperty){for(c in a){try{if(a.hasOwnProperty(c)){delete a[c]}}catch(e){}}}}}},doDestroy:function(){this.destroyEditor();this.callParent()},onRelayedEvent:function(a){var b=this.iframeEl,c=Ext.fly(b).getTrueXY(),e=a.getXY(),d=a.getXY();a.xy=[c[0]+d[0],c[1]+d[1]];a.injectEvent(b);a.xy=e},onFirstFocus:function(){var a=this,b,c;a.activated=!0;a.disableItems(a.readOnly);if(Ext.isGecko){a.win.focus();b=a.win.getSelection();if(b.focusNode&&!a.getValue().length){c=b.getRangeAt(0);c.selectNodeContents(a.getEditorBody());c.collapse(!0);a.deferFocus()}try{a.execCmd('useCSS',!0);a.execCmd('styleWithCSS',!1)}catch(d){}}a.fireEvent('activate',a)},adjustFont:function(e){var b=e.getItemId()==='increasefontsize'?1:-1,a=this.getDoc().queryCommandValue('FontSize')||'2',d=Ext.isString(a)&&a.indexOf('px')!==-1,c;a=parseInt(a,10);if(d){if(a<=10){a=1+b}else {if(a<=13){a=2+b}else {if(a<=16){a=3+b}else {if(a<=18){a=4+b}else {if(a<=24){a=5+b}else {a=6+b}}}}}a=Ext.Number.constrain(a,1,6)}else {c=Ext.isSafari;if(c){b*=2}a=Math.max(1,a+b)+(c?'px':0)}this.relayCmd('FontSize',a)},updateToolbar:function(){var a=this,c,i,h,g,b,d,f,e;if(a.readOnly){return}if(!a.activated){a.onFirstFocus();return}h=a.getToolbar().items.map;g=a.getDoc();if(a.enableFont){d=g.queryCommandValue('fontName');b=(d?d.split(',')[0].replace(a.reStripQuotes,''):a.defaultFont).toLowerCase();f=a.fontSelect.dom;if(b!==f.value||b!==d){f.value=b}}function updateButtons(){var a;for(c=0,i=arguments.length,b;c<i;c++){b=arguments[c];try{a=g.queryCommandState(b)}catch(j){a=!1}h[b].toggle(a)}}if(a.enableFormat){updateButtons('bold','italic','underline')}if(a.enableAlignments){updateButtons('justifyleft','justifycenter','justifyright')}if(a.enableLists){updateButtons('insertorderedlist','insertunorderedlist')}e=a.toolbar.query('menu');for(c=0;c<e.length;c++){e[c].hide()}a.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.getItemId())},relayCmd:function(b,a){Ext.defer(function(){var c=this;if(!this.destroyed){c.win.focus();c.execCmd(b,a);c.updateToolbar()}},10,this)},execCmd:function(c,a){var b=this,d=b.getDoc();d.execCommand(c,!1,a===undefined?null:a);b.syncValue()},applyCommand:function(d){if(d.ctrlKey){var c=this,b=d.getCharCode(),a;if(b>0){b=String.fromCharCode(b);switch(b){case 'b':a='bold';break;case 'i':a='italic';break;case 'u':a='underline';break;}if(a){c.win.focus();c.execCmd(a);c.deferFocus();d.preventDefault()}}}},insertAtCursor:function(j){var d=this,g=d.getWin(),c=d.getDoc(),b,a,h,f,i,e;if(d.activated){g.focus();if(g.getSelection){b=g.getSelection();if(b.getRangeAt&&b.rangeCount){a=b.getRangeAt(0);a.deleteContents();h=c.createElement('div');h.innerHTML=j;f=c.createDocumentFragment();while(i=h.firstChild){e=f.appendChild(i)}a.insertNode(f);if(e){a=a.cloneRange();a.setStartAfter(e);a.collapse(!0);b.removeAllRanges();b.addRange(a)}}}else {if(c.selection&&b.type!=='Control'){b=c.selection;a=b.createRange();a.collapse(!0);b.createRange().pasteHTML(j)}}d.deferFocus()}},fixKeys:function(){if(Ext.isIE10m){return function(c){var b=this,f=c.getKey(),e=b.getDoc(),d=b.readOnly,a;if(f===c.TAB){c.stopEvent();if(!d){a=e.selection.createRange();if(a){if(a.collapse){a.collapse(!0);a.pasteHTML('&#160;&#160;&#160;&#160;')}b.deferFocus()}}}}}if(Ext.isOpera){return function(b){var a=this,d=b.getKey(),c=a.readOnly;if(d===b.TAB){b.stopEvent();if(!c){a.win.focus();a.execCmd('InsertHTML','&#160;&#160;&#160;&#160;');a.deferFocus()}}}}return null}(),fixKeysAfter:function(){if(Ext.isIE){return function(b){var d=this,e=b.getKey(),c=d.getDoc(),f=d.readOnly,a;if(!f&&(e===b.BACKSPACE||e===b.DELETE)){a=c.body.innerHTML;if(a==='<p>&nbsp;</p>'||a==='<P>&nbsp;</P>'){c.body.innerHTML=''}}}}return null}(),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:'Bold (Ctrl+B)',text:'Make the selected text bold.',cls:Ext.baseCSSPrefix+'html-editor-tip'},italic:{title:'Italic (Ctrl+I)',text:'Make the selected text italic.',cls:Ext.baseCSSPrefix+'html-editor-tip'},underline:{title:'Underline (Ctrl+U)',text:'Underline the selected text.',cls:Ext.baseCSSPrefix+'html-editor-tip'},increasefontsize:{title:'Grow Text',text:'Increase the font size.',cls:Ext.baseCSSPrefix+'html-editor-tip'},decreasefontsize:{title:'Shrink Text',text:'Decrease the font size.',cls:Ext.baseCSSPrefix+'html-editor-tip'},backcolor:{title:'Text Highlight Color',text:'Change the background color of the selected text.',cls:Ext.baseCSSPrefix+'html-editor-tip'},forecolor:{title:'Font Color',text:'Change the color of the selected text.',cls:Ext.baseCSSPrefix+'html-editor-tip'},justifyleft:{title:'Align Text Left',text:'Align text to the left.',cls:Ext.baseCSSPrefix+'html-editor-tip'},justifycenter:{title:'Center Text',text:'Center text in the editor.',cls:Ext.baseCSSPrefix+'html-editor-tip'},justifyright:{title:'Align Text Right',text:'Align text to the right.',cls:Ext.baseCSSPrefix+'html-editor-tip'},insertunorderedlist:{title:'Bullet List',text:'Start a bulleted list.',cls:Ext.baseCSSPrefix+'html-editor-tip'},insertorderedlist:{title:'Numbered List',text:'Start a numbered list.',cls:Ext.baseCSSPrefix+'html-editor-tip'},createlink:{title:'Hyperlink',text:'Make the selected text a hyperlink.',cls:Ext.baseCSSPrefix+'html-editor-tip'},sourceedit:{title:'Source Edit',text:'Switch to source editing mode.',cls:Ext.baseCSSPrefix+'html-editor-tip'}},privates:{deferFocus:function(){this.focus(!1,!0)},getFocusEl:function(){return this.sourceEditMode?this.textareaEl:this.iframeEl}}});Ext.define('Ext.theme.neptune.form.field.HtmlEditor',{override:'Ext.form.field.HtmlEditor',defaultButtonUI:'plain-toolbar'});Ext.onReady(function(){if(Ext.data&&Ext.data.Types){Ext.data.Types.stripRe=/[\$,%]/g}if(Ext.Date){Ext.Date.monthNames=['January','February','March','April','May','June','July','August','September','October','November','December'];Ext.Date.getShortMonthName=function(a){return Ext.Date.monthNames[a].substring(0,3)};Ext.Date.monthNumbers={January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11};Ext.Date.getMonthNumber=function(a){return Ext.Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]};Ext.Date.dayNames=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];Ext.Date.getShortDayName=function(a){return Ext.Date.dayNames[a].substring(0,3)};Ext.Date.parseCodes.S.s='(?:st|nd|rd|th)';Ext.Date.firstDayOfWeek=0;Ext.Date.weekendDays=[6,0]}if(Ext.util&&Ext.util.Format){Ext.apply(Ext.util.Format,{thousandSeparator:',',decimalSeparator:'.',currencySign:'$',dateFormat:'m/d/Y'})}});Ext.define('Ext.locale.en.data.validator.Bound',{override:'Ext.data.validator.Bound',emptyMessage:'Must be present'});Ext.define('Ext.locale.en.data.validator.Email',{override:'Ext.data.validator.Email',message:'Is not a valid email address'});Ext.define('Ext.locale.en.data.validator.Exclusion',{override:'Ext.data.validator.Exclusion',message:'Is a value that has been excluded'});Ext.define('Ext.locale.en.data.validator.Format',{override:'Ext.data.validator.Format',message:'Is in the wrong format'});Ext.define('Ext.locale.en.data.validator.Inclusion',{override:'Ext.data.validator.Inclusion',message:'Is not in the list of acceptable values'});Ext.define('Ext.locale.en.data.validator.Length',{override:'Ext.data.validator.Length',minOnlyMessage:'Length must be at least {0}',maxOnlyMessage:'Length must be no more than {0}',bothMessage:'Length must be between {0} and {1}'});Ext.define('Ext.locale.en.data.validator.Presence',{override:'Ext.data.validator.Presence',message:'Must be present'});Ext.define('Ext.locale.en.data.validator.Range',{override:'Ext.data.validator.Range',minOnlyMessage:'Must be must be at least {0}',maxOnlyMessage:'Must be no more than than {0}',bothMessage:'Must be between {0} and {1}',nanMessage:'Must be numeric'});Ext.define('Ext.locale.en.view.View',{override:'Ext.view.View',emptyText:''});Ext.define('Ext.locale.en.grid.plugin.DragDrop',{override:'Ext.grid.plugin.DragDrop',dragText:'{0} selected row{1}'});Ext.define('Ext.locale.en.view.AbstractView',{override:'Ext.view.AbstractView',loadingText:'Loading...'});Ext.define('Ext.locale.en.picker.Date',{override:'Ext.picker.Date',todayText:'Today',minText:'This date is before the minimum date',maxText:'This date is after the maximum date',disabledDaysText:'',disabledDatesText:'',nextText:'Next Month (Control+Right)',prevText:'Previous Month (Control+Left)',monthYearText:'Choose a month (Control+Up/Down to move years)',todayTip:'{0} (Spacebar)',format:'m/d/y',startDay:0});Ext.define('Ext.locale.en.picker.Month',{override:'Ext.picker.Month',okText:'&#160;OK&#160;',cancelText:'Cancel'});Ext.define('Ext.locale.en.toolbar.Paging',{override:'Ext.PagingToolbar',beforePageText:'Page',afterPageText:'of {0}',firstText:'First Page',prevText:'Previous Page',nextText:'Next Page',lastText:'Last Page',refreshText:'Refresh',displayMsg:'Displaying {0} - {1} of {2}',emptyMsg:'No data to display'});Ext.define('Ext.locale.en.form.Basic',{override:'Ext.form.Basic',waitTitle:'Please Wait...'});Ext.define('Ext.locale.en.form.field.Base',{override:'Ext.form.field.Base',invalidText:'The value in this field is invalid'});Ext.define('Ext.locale.en.form.field.Text',{override:'Ext.form.field.Text',minLengthText:'The minimum length for this field is {0}',maxLengthText:'The maximum length for this field is {0}',blankText:'This field is required',regexText:'',emptyText:null});Ext.define('Ext.locale.en.form.field.Number',{override:'Ext.form.field.Number',decimalPrecision:2,minText:'The minimum value for this field is {0}',maxText:'The maximum value for this field is {0}',nanText:'{0} is not a valid number'});Ext.define('Ext.locale.en.form.field.Date',{override:'Ext.form.field.Date',disabledDaysText:'Disabled',disabledDatesText:'Disabled',minText:'The date in this field must be after {0}',maxText:'The date in this field must be before {0}',invalidText:'{0} is not a valid date - it must be in the format {1}',format:'m/d/y',altFormats:'m/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d'});Ext.define('Ext.locale.en.form.field.ComboBox',{override:'Ext.form.field.ComboBox',valueNotFoundText:undefined},function(){Ext.apply(Ext.form.field.ComboBox.prototype.defaultListConfig,{loadingText:'Loading...'})});Ext.define('Ext.locale.en.form.field.VTypes',{override:'Ext.form.field.VTypes',emailText:'This field should be an e-mail address in the format "user@example.com"',urlText:'This field should be a URL in the format "http:/'+'/www.example.com"',alphaText:'This field should only contain letters and _',alphanumText:'This field should only contain letters, numbers and _'});Ext.define('Ext.locale.en.form.field.HtmlEditor',{override:'Ext.form.field.HtmlEditor',createLinkText:'Please enter the URL for the link:'},function(){Ext.apply(Ext.form.field.HtmlEditor.prototype,{buttonTips:{bold:{title:'Bold (Ctrl+B)',text:'Make the selected text bold.',cls:Ext.baseCSSPrefix+'html-editor-tip'},italic:{title:'Italic (Ctrl+I)',text:'Make the selected text italic.',cls:Ext.baseCSSPrefix+'html-editor-tip'},underline:{title:'Underline (Ctrl+U)',text:'Underline the selected text.',cls:Ext.baseCSSPrefix+'html-editor-tip'},increasefontsize:{title:'Grow Text',text:'Increase the font size.',cls:Ext.baseCSSPrefix+'html-editor-tip'},decreasefontsize:{title:'Shrink Text',text:'Decrease the font size.',cls:Ext.baseCSSPrefix+'html-editor-tip'},backcolor:{title:'Text Highlight Color',text:'Change the background color of the selected text.',cls:Ext.baseCSSPrefix+'html-editor-tip'},forecolor:{title:'Font Color',text:'Change the color of the selected text.',cls:Ext.baseCSSPrefix+'html-editor-tip'},justifyleft:{title:'Align Text Left',text:'Align text to the left.',cls:Ext.baseCSSPrefix+'html-editor-tip'},justifycenter:{title:'Center Text',text:'Center text in the editor.',cls:Ext.baseCSSPrefix+'html-editor-tip'},justifyright:{title:'Align Text Right',text:'Align text to the right.',cls:Ext.baseCSSPrefix+'html-editor-tip'},insertunorderedlist:{title:'Bullet List',text:'Start a bulleted list.',cls:Ext.baseCSSPrefix+'html-editor-tip'},insertorderedlist:{title:'Numbered List',text:'Start a numbered list.',cls:Ext.baseCSSPrefix+'html-editor-tip'},createlink:{title:'Hyperlink',text:'Make the selected text a hyperlink.',cls:Ext.baseCSSPrefix+'html-editor-tip'},sourceedit:{title:'Source Edit',text:'Switch to source editing mode.',cls:Ext.baseCSSPrefix+'html-editor-tip'}}})});Ext.define('Ext.locale.en.grid.header.Container',{override:'Ext.grid.header.Container',sortAscText:'Sort Ascending',sortDescText:'Sort Descending',columnsText:'Columns'});Ext.define('Ext.locale.en.grid.GroupingFeature',{override:'Ext.grid.feature.Grouping',emptyGroupText:'(None)',groupByText:'Group by this field',showGroupsText:'Show in Groups'});Ext.define('Ext.locale.en.grid.PropertyColumnModel',{override:'Ext.grid.PropertyColumnModel',nameText:'Name',valueText:'Value',dateFormat:'m/j/Y',trueText:'true',falseText:'false'});Ext.define('Ext.locale.en.grid.BooleanColumn',{override:'Ext.grid.BooleanColumn',trueText:'true',falseText:'false',undefinedText:'&#160;'});Ext.define('Ext.locale.en.grid.NumberColumn',{override:'Ext.grid.NumberColumn',format:'0,000.00'});Ext.define('Ext.locale.en.grid.DateColumn',{override:'Ext.grid.DateColumn',format:'m/d/Y'});Ext.define('Ext.locale.en.form.field.Time',{override:'Ext.form.field.Time',minText:'The time in this field must be equal to or after {0}',maxText:'The time in this field must be equal to or before {0}',invalidText:'{0} is not a valid time',format:'g:i A',altFormats:'g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H'});Ext.define('Ext.locale.en.form.field.File',{override:'Ext.form.field.File',buttonText:'Browse...'});Ext.define('Ext.locale.en.form.CheckboxGroup',{override:'Ext.form.CheckboxGroup',blankText:'You must select at least one item in this group'});Ext.define('Ext.locale.en.form.RadioGroup',{override:'Ext.form.RadioGroup',blankText:'You must select one item in this group'});Ext.define('Ext.locale.en.window.MessageBox',{override:'Ext.window.MessageBox',buttonText:{ok:'OK',cancel:'Cancel',yes:'Yes',no:'No'}});Ext.define('Ext.locale.en.grid.filters.Filters',{override:'Ext.grid.filters.Filters',menuFilterText:'Filters'});Ext.define('Ext.locale.en.grid.filters.filter.Boolean',{override:'Ext.grid.filters.filter.Boolean',yesText:'Yes',noText:'No'});Ext.define('Ext.locale.en.grid.filters.filter.Date',{override:'Ext.grid.filters.filter.Date',fields:{lt:{text:'Before'},gt:{text:'After'},eq:{text:'On'}},dateFormat:null});Ext.define('Ext.locale.en.grid.filters.filter.List',{override:'Ext.grid.filters.filter.List',loadingText:'Loading...'});Ext.define('Ext.locale.en.grid.filters.filter.Number',{override:'Ext.grid.filters.filter.Number',emptyText:'Enter Number...'});Ext.define('Ext.locale.en.grid.filters.filter.String',{override:'Ext.grid.filters.filter.String',emptyText:'Enter Filter Text...'});Ext.define('Ext.locale.en.view.MultiSelectorSearch',{override:'Ext.view.MultiSelectorSearch',searchText:'Search...'});Ext.define('Ext.locale.en.view.MultiSelector',{override:'Ext.view.MultiSelector',emptyText:'Nothing selected',removeRowTip:'Remove this item',addToolText:'Search for items to add'});Ext.define('Ext.locale.en.Component',{override:'Ext.Component'});Ext.define('Ext.overrides.Component',{override:'Ext.Component',onDisable:function(){var a=this,c,b;if(a.focusable){a.disableFocusable()}if(!a.ariaStaticRoles[a.ariaRole]&&a.ariaEl.dom!==null){a.ariaEl.dom.setAttribute('aria-disabled',!0)}if(a.maskOnDisable&&!a.getInheritedConfig('disableMask',!0)){c=a.el.dom;b=c.nodeName;if(a.disabledRe.test(b)){c.disabled=!0}if(!a.nonMaskableRe.test(b)){a.mask()}}},onEnable:function(){var a=this,c,b;if(a.focusable){a.enableFocusable()}if(!a.ariaStaticRoles[a.ariaRole]&&a.ariaEl.dom!==null){a.ariaEl.dom.setAttribute('aria-disabled',!1)}if(a.maskOnDisable&&a.getInherited().hasOwnProperty('masked')){c=a.el.dom;b=c.nodeName;if(a.disabledRe.test(b)){c.disabled=!1}if(!a.nonMaskableRe.test(b)){a.unmask()}}},onShow:function(){var a=this;if(!a.ariaStaticRoles[a.ariaRole]&&a.ariaEl.dom!==null){a.ariaEl.dom.setAttribute('aria-hidden',!1)}a.el.show();a.updateLayout({isRoot:!1,context:a._showContext});if(a.floating){if(a.maximized){a.fitContainer()}else {if(a.constrain){a.doConstrain()}}}}});Ext.define('Ext.overrides.app.domain.Component',{override:'Ext.app.domain.Component'},function(a){a.monitor(Ext.Component)});Ext.define('Ext.app.EventBus',{singleton:!0,constructor:function(){var a=this,b=Ext.app.EventDomain.instances;a.callParent();a.domains=b;a.bus=b.component.bus},control:function(b,a){return this.domains.component.listen(b,a)},listen:function(b,c){var d=this.domains,a;for(a in b){if(b.hasOwnProperty(a)){d[a].listen(b[a],c)}}},unlisten:function(c){var a=Ext.app.EventDomain.instances,b;for(b in a){a[b].unlisten(c)}}});Ext.define('Ext.app.domain.Global',{extend:Ext.app.EventDomain,singleton:!0,type:'global',constructor:function(){var a=this;a.callParent();a.monitor(Ext.GlobalEvents)},listen:function(b,a){this.callParent([{global:b},a])},match:Ext.returnTrue});Ext.define('Ext.route.Handler',{lazy:!1,statics:{fromRouteConfig:function(a,c){var b={action:a.action,before:a.before,lazy:a.lazy,exit:a.exit,scope:c,single:a.single};return new this(b)}},constructor:function(a){Ext.apply(this,a)}});Ext.define('Ext.route.Action',{config:{actions:null,befores:null,urlParams:[]},started:!1,stopped:!1,constructor:function(b){var a=this;a.deferred=new Ext.Deferred();a.resume=a.resume.bind(a);a.stop=a.stop.bind(a);a.initConfig(b);a.callParent([b])},applyActions:function(a){if(a){a=Ext.Array.from(a)}return a},applyBefores:function(a){if(a){a=Ext.Array.from(a)}return a},destroy:function(){this.deferred=null;this.setBefores(null).setActions(null).setUrlParams(null);this.callParent()},resume:function(){return this.next()},stop:function(){this.stopped=!0;return this.done()},next:function(){var a=this,c=a.getActions(),d=a.getBefores(),g=a.getUrlParams(),b,f,e;if(Ext.isArray(g)){e=g.slice()}else {e=[g]}if(a.stopped||(d?!d.length:!0)&&(c?!c.length:!0)){a.done()}else {if(d&&d.length){b=d.shift();e.push(a);f=Ext.callback(b.fn,b.scope,e);if(f&&f.then){f.then(function(b){a.resume(b)},function(b){a.stop(b)})}}else {if(c&&c.length){b=c.shift();Ext.callback(b.fn,b.scope,e);a.next()}else {a.next()}}}return a},run:function(){var a=this.deferred;if(!this.started){this.next();this.started=!0}return a.promise},done:function(){var a=this.deferred;if(this.stopped){a.reject()}else {a.resolve()}this.destroy();return this},before:function(a,d,e){if(!Ext.isBoolean(a)){e=d;d=a;a=!1}var b=this.getBefores(),c={fn:d,scope:e};if(b){if(a){b.unshift(c)}else {b.push(c)}}else {this.setBefores(c)}return this},action:function(a,d,e){if(!Ext.isBoolean(a)){e=d;d=a;a=!1}var b=this.getActions(),c={fn:d,scope:e};if(b){if(a){b.unshift(c)}else {b.push(c)}}else {this.setActions(c)}return this},then:function(a,b){return this.deferred.then(a,b)}});Ext.define('Ext.route.Route',{config:{name:null,url:null,allowInactive:!1,conditions:{},caseInsensitive:!1,handlers:[],types:{cached:!0,$value:{alpha:{re:'([a-zA-Z]+)'},alphanum:{re:'([a-zA-Z0-9]+|[0-9]+(?:\\.[0-9]+)?|[0-9]*(?:\\.[0-9]+){1})',parse:function(a){var b;if(a&&this.numRe.test(a)){b=parseFloat(a);if(!isNaN(b)){a=b}}return a}},num:{re:'([0-9]+(?:\\.[0-9]+)?|[0-9]*(?:\\.[0-9]+){1})',parse:function(a){if(a){a=parseFloat(a)}return a}},'...':{re:'(.+)?',split:'/',parse:function(a){var d,b,c;if(a){d=a.length;for(b=0;b<d;b++){c=parseFloat(a[b]);if(!isNaN(c)){a[b]=c}}}return a}}}}},defaultMatcher:'([%a-zA-Z0-9\\-\\_\\s,]+)',numRe:/^[0-9]*(?:\.[0-9]*)?$/,typeParamRegex:/:{([0-9A-Za-z_]+)(?::?([0-9A-Za-z_]+|.{3})?)}/g,optionalGroupRegex:/\((.+?)\)/g,paramMatchingRegex:/:([0-9A-Za-z_]+)/g,isRoute:!0,constructor:function(c){var a=this,b;this.initConfig(c);b=a.getUrl().replace(a.optionalGroupRegex,function(b,a){return '(?:'+a+')?'});if(b.match(a.typeParamRegex)){a.handleNamedPattern(b)}else {a.handlePositionalPattern(b)}},handlePositionalPattern:function(b){var a=this;a.paramsInMatchString=b.match(a.paramMatchingRegex)||[];a.matcherRegex=a.createMatcherRegex(b);a.mode='positional'},handleNamedPattern:function(g){var a=this,d=a.typeParamRegex,e=a.getConditions(),f=a.getTypes(),c=a.defaultMatcher,b={},h=g.replace(d,function(j,h,d){var i=d&&f[d],a=e[h]||i||c;if(Ext.isObject(a)){a=a.re}b[h]={matcher:a,type:d};return a});a.paramsInMatchString=b;a.matcherRegex=new RegExp('^'+h+'$',a.getCaseInsensitive()?'i':'');a.mode='named'},recognize:function(a){var b=this,j=b.recognizes(a),d,i,e,g,h,f,c;if(j){d=b.getHandlers();i=d.length;for(c=0;c<i;c++){g=d[c];if(g.lastToken!==a){e=!0;break}}if(!e&&a===b.lastToken){return !0}h=b.matchesFor(a);f=b.getUrlParams(a);return Ext.applyIf(h,{historyUrl:a,urlParams:f})}return !1},getUrlParams:function(a){if(this.mode==='named'){return this.getNamedUrlParams(a)}else {return this.getPositionalUrlParams(a)}},getPositionalUrlParams:function(j){var e=[],d=this.getConditions(),h=this.paramsInMatchString,g=j.match(this.matcherRegex),i=h.length,c,b,f,a;g.shift();for(c=0;c<i;c++){b=h[c];a=g[c];if(d[b]){f=d[b]}else {if(b[0]===':'){b=b.substr(1);if(d[b]){f=d[b]}}}a=this.parseValue(a,f);if(Ext.isDefined(a)&&a!==''){if(Ext.isArray(a)){e.push.apply(e,a)}else {e.push(a)}}}return e},getNamedUrlParams:function(k){var j=this.getConditions(),g=this.getTypes(),e={},i=this.paramsInMatchString,f=k.match(this.matcherRegex),a,d,h,b,c;f.shift();for(a in i){d=i[a];h=f.shift();c=j[a];b=g[d.type];if(c||b){b=Ext.merge({},c,g[d.type])}e[a]=this.parseValue(h,b)}return e},parseValue:function(a,b){if(b){if(a&&b.split){a=a.split(b.split);if(!a[0]){a.shift()}if(!a[a.length-1]){a.pop()}}if(b.parse){a=b.parse.call(this,a)}}if(!a&&Ext.isString(a)){a=undefined}return a},recognizes:function(a){return this.matcherRegex.test(a)},execute:function(h,j){var c=this,n=c.getAllowInactive(),m=c.getHandlers(),d=Ext.route.Router.getQueueRoutes(),o=m.length,l=j&&j.urlParams||[],i,b,e,a,k,g,f;c.lastToken=h;if(!d){k=[]}return new Ext.Promise(function(q,p){if(j===!1){p()}else {if(d){a=new Ext.route.Action({urlParams:l})}for(i=0;i<o;i++){b=m[i];if(h!=null&&b.lastToken===h){continue}e=b.scope;b.lastToken=h;if(!n&&e.isActive&&!e.isActive()){continue}if(!d){a=new Ext.route.Action({urlParams:l})}g=b.single;if(b.before){a.before(b.before,e)}if(b.action){a.action(b.action,e)}if(g){f=Ext.bind(c.removeHandler,c,[null,b]);if(g===!0){if(b.action){a.action(f,c)}else {a.before(function(){f();return Ext.Promise.resolve()},c)}}else {a.before(g==='before',function(){f();return Ext.Promise.resolve()},c)}}if(!d){if(Ext.fireEvent('beforeroute',a,c)===!1){a.destroy()}else {k.push(a.run())}}}if(d){if(Ext.fireEvent('beforeroute',a,c)===!1){a.destroy();p()}else {a.run().then(q,p)}}else {Ext.Promise.all(k).then(q,p)}}})},matchesFor:function(f){var b={},d=this.mode==='named'?Ext.Object.getKeys(this.paramsInMatchString):this.paramsInMatchString,c=f.match(this.matcherRegex),e=d.length,a;c.shift();for(a=0;a<e;a++){b[d[a].replace(':','')]=c[a]}return b},createMatcherRegex:function(c){var e=this,g=e.paramsInMatchString,d=e.getConditions(),h=e.defaultMatcher,j=g.length,i=e.getCaseInsensitive()?'i':'',f,b,a;if(c==='*'){c=c.replace('*','\\*')}else {for(f=0;f<j;f++){b=g[f];if(d[b]){a=d[b]}else {if(b[0]===':'&&d[b.substr(1)]){a=d[b.substr(1)]}else {a=h}}if(Ext.isObject(a)){a=a.re}c=c.replace(new RegExp(b),a||h)}}return new RegExp('^'+c+'$',i)},addHandler:function(a){var b=this.getHandlers();if(!a.isInstance){a=new Ext.route.Handler(a)}b.push(a);return a.route=this},removeHandler:function(g,e){var d=this.getHandlers(),f=d.length,c=[],b,a;for(b=0;b<f;b++){a=d[b];if(e){if(a!==e){c.push(a)}}else {if(a.scope!==g){c.push(a)}}}this.setHandlers(c);return this},clearLastTokens:function(){var b=this.getHandlers(),c=b.length,a;for(a=0;a<c;a++){b[a].lastToken=null}this.lastToken=null},onExit:function(){var a=this,f=a.getHandlers(),g=a.getAllowInactive(),h=f.length,c=new Ext.route.Action({urlParams:[a.lastToken]}),e,b,d;a.clearLastTokens();for(e=0;e<h;e++){b=f[e];if(b.exit){d=b.scope;if(!g&&d.isActive&&!d.isActive()){continue}c.action(b.exit,d)}}if(Ext.fireEvent('beforerouteexit',c,a)===!1){c.destroy()}else {c.run()}}});Ext.define('Ext.util.History',{singleton:!0,alternateClassName:'Ext.History',mixins:{observable:Ext.util.Observable},useTopWindow:!1,hashRe:/^(#?!?)/,constructor:function(){var a=this;a.ready=!1;a.currentToken=null;a.mixins.observable.constructor.call(a)},getHash:function(){return (this.win.location.hash||'').replace(this.hashRe,'')},setHash:function(a,e){var b=this,c=b.hashRe,d=b.win.location;a=a.replace(c,b.hashbang?'#!':'#');try{if(e){d.replace(a)}else {d.hash=a}b.currentToken=a.replace(c,'')}catch(f){}},handleStateChange:function(a){a=a.replace(this.hashRe,'');this.fireEvent('change',this.currentToken=a)},startUp:function(){var a=this;a.currentToken=a.getHash();Ext.get(a.win).on('hashchange',a.onHashChange,a);a.ready=!0;a.fireEvent('ready',a)},onHashChange:function(){var a=this,b=a.getHash();if(b!==a.hash){a.hash=b;a.handleStateChange(b)}},init:function(b,c){var a=this;if(a.ready){Ext.callback(b,c,[a]);return}if(!Ext.isReady){Ext.onInternalReady(function(){a.init(b,c)});return}a.win=a.useTopWindow?window.top:window;a.hash=a.getHash();if(b){a.on('ready',b,c,{single:!0})}a.startUp()},add:function(a,d){var c=this,b=!1;if(d===!1||c.getToken()!==a){c.setHash(a);b=!0}return b},replace:function(a,c){var d=this,b=!1;if(c===!1||d.getToken()!==a){this.setHash(a,!0);b=!0}return b},back:function(){this.win.history.go(-1)},forward:function(){this.win.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}});Ext.define('Ext.route.Router',{singleton:!0,config:{hashbang:null,multipleToken:'|',queueRoutes:!0},constructor:function(){var a=Ext.util.History;if(!a.ready){a.init()}a.on('change',this.onStateChange,this);this.initConfig();this.clear()},updateHashbang:function(a){Ext.util.History.hashbang=a},onStateChange:function(b){var c=this,e=b.split(c.getMultipleToken()),a,d,f;if(c.isSuspended){a=c.suspendedQueue;d=0;f=e.length;if(a){for(;d<f;d++){b=e[d];if(!Ext.Array.contains(a,b)){a.push(b)}}}}else {c.handleBefore(e)}},handleBefore:function(b){var c=this,a=new Ext.route.Action();if(Ext.fireEvent('beforeroutes',a,b)===!1){a.destroy()}else {a.run().then(c.handleBeforeRoute.bind(c,b),Ext.emptyFn)}},handleBeforeRoute:function(c){var a=this,b=a.getByName('*');if(b){b.execute().then(a.doRun.bind(a,c),Ext.emptyFn)}else {a.doRun(c)}},doRun:function(l){var g=this,m=g.application,k=g.routes,a=0,i=l.length,h={},f=[],c,j,d,b,e;for(;a<i;a++){c=l[a];j=!1;for(d in k){b=k[d];e=b.recognize(c);if(e){j=!0;if(e!==!0){b.execute(c,e).then(null,Ext.bind(g.onRouteRejection,g,[b],0))}Ext.Array.remove(f,b);if(!h[d]){h[d]=1}}else {if(!h[d]){f.push(b)}}}if(!j){if(m){m.fireEvent('unmatchedroute',c)}Ext.fireEvent('unmatchedroute',c)}}a=0;i=f.length;for(;a<i;a++){f[a].onExit()}},onRouteRejection:function(b,a){Ext.fireEvent('routereject',b,a);if(a){Ext.raise(a)}},connect:function(c,a,m){var j=this.routes,i=this.getMultipleToken(),h=a.name||c,d,b;if(c[0]==='!'){c=c.substr(1);this.setHashbang(!0)}if(Ext.isString(a)){a={action:a}}d=Ext.route.Handler.fromRouteConfig(a,m);b=j[h];if(!b){a.name=h;a.url=c;b=j[h]=new Ext.route.Route(a)}b.addHandler(d);if(d.lazy){var l=Ext.util.History.getToken(),k=l.split(i),n=k.length,g=[],f,e;for(f=0;f<n;f++){e=k[f];if(Ext.Array.indexOf(g,e)===-1&&b.recognize(e)){g.push(e)}}this.onStateChange(g.join(i))}return d},disconnect:function(c,a){var d=this.routes,b,e;if(a){b=a.route||this.getByName(a.name||a.url);if(b){b.removeHandler(c,a)}}else {for(e in d){b=d[e];b.removeHandler(c)}}},recognize:function(i){var g=this.routes,d=[],h,a,b,e,f,c;for(h in g){a=g[h];e=a&&a.length;if(e){b=0;for(;b<e;b++){f=a[b];c=f.recognize(i);if(c){d.push({route:f,urlParams:c})}}}}return d.length?d:!1},draw:function(a){a.call(this,this)},clear:function(){this.routes={}},clearLastTokens:function(c){var b=this.routes,d,a;for(d in b){a=b[d];if(!c||a.recognize(c)){a.clearLastTokens()}}},getByName:function(b){var a=this.routes;if(a){return a[b]}},suspend:function(a){this.isSuspended=!0;if(!this.suspendedQueue&&a!==!1){this.suspendedQueue=[]}},resume:function(d){var a=this,b=a.suspendedQueue,c;if(a.isSuspended){a.isSuspended=!1;a.suspendedQueue=null;if(!d&&b){c=b.join(a.getMultipleToken());a.onStateChange(c)}}}});Ext.define('Ext.route.Mixin',{extend:Ext.Mixin,mixinConfig:{id:'routerable',before:{destroy:'destroyRouterable'}},config:{routes:null},destroyRouterable:function(){Ext.route.Router.disconnect(this)},applyRoutes:function(b,c){var d=Ext.route.Router,a;if(b){for(a in b){b[a]=d.connect(a,b[a],this)}}if(c){for(a in c){d.disconnect(this,c[a])}}return b},redirectTo:function(b,e){var k=Ext.util.History.getToken(),i=Ext.route.Router,n=i.getMultipleToken(),d=k?k.split(n):[],f=d.length,j,c,m,a,g,h,l;if(b===-1){return Ext.util.History.back()}else {if(b===1){return Ext.util.History.forward()}else {if(b.isModel){b=b.toUrl()}else {if(Ext.isObject(b)){for(m in b){a=b[m];if(!Ext.isObject(a)){a={token:a}}if(f){g=i.getByName(m);if(g){l=!1;for(c=0;c<f;c++){h=d[c];if(g.matcherRegex.test(h)){l=!0;if(a.token){if(a.fn&&a.fn.call(this,h,d,a)===!1){continue}d[c]=a.token;if(a.force){g.lastToken=null}}else {d.splice(c,1);c--;f--;g.lastToken=null}}}if(a&&a.token&&!l){d.push(a.token)}}}else {if(a&&a.token){d.push(a.token)}}}b=d.join(n)}}}}if(e===!0){j=e;e=null}else {if(e){j=e.force}}f=d.length;if(j&&f){for(c=0;c<f;c++){h=d[c];i.clearLastTokens(h)}}if(k===b){if(j){i.onStateChange(b)}return !1}if(e&&e.replace){Ext.util.History.replace(b)}else {Ext.util.History.add(b)}return !0},privates:{afterClassMixedIn:function(a){var c=a.prototype,b=c.routes;if(b){delete c.routes;a.getConfigurator().add({routes:b})}}}});Ext.define('Ext.app.BaseController',{mixins:[Ext.mixin.Observable,Ext.route.Mixin],isController:!0,config:{id:undefined,control:null,listen:null},constructor:function(b){var a=this;Ext.apply(a,b);delete a.control;delete a.listen;a.eventbus=Ext.app.EventBus;a.mixins.observable.constructor.call(a,b)},updateId:function(a){this.id=a},applyListen:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},applyControl:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},updateControl:function(a){this.getId();if(a){this.control(a)}},updateListen:function(a){this.getId();if(a){this.listen(a)}},isActive:function(){return !0},control:function(b,c,f){var e=this,d=f,a;if(Ext.isString(b)){a={};a[b]=c}else {a=b;d=c}e.eventbus.control(a,d||e)},listen:function(b,a){this.eventbus.listen(b,a||this)},destroy:function(){var a=this,b=a.eventbus;if(b){b.unlisten(a);a.eventbus=null}a.callParent()}});Ext.define('Ext.app.Util',{},function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(a){var d=Ext.app.namespaces,b,c;if(!Ext.isArray(a)){a=[a]}for(b=0,c=a.length;b<c;b++){d[a[b]]=!0}},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(d){var c=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),b='',a;for(a in c){if(c.hasOwnProperty(a)&&a.length>b.length&&a+'.'===d.substring(0,a.length+1)){b=a}}return b===''?undefined:b},setupPaths:function(e,b,c){var a=Ext.manifest,d;if(e&&b!==null){a=a&&a.paths;if(!a||b!==undefined){Ext.Loader.setPath(e,b===undefined?'app':b)}}if(c){for(d in c){if(c.hasOwnProperty(d)){Ext.Loader.setPath(d,c[d])}}}}});Ext.getNamespace=Ext.app.getNamespace});Ext.define('Ext.app.domain.Store',{extend:Ext.app.EventDomain,singleton:!0,type:'store',prefix:'store.',idMatchRe:/^#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.data.AbstractStore)},match:function(c,a){var b=!1,d=c.alias;if(a==='*'){b=!0}else {if(this.idMatchRe.test(a)){b=c.getStoreId()===a.substring(1)}else {if(d){b=Ext.Array.indexOf(d,this.prefix+a)>-1}}}return b}});Ext.define('Ext.app.Controller',{extend:Ext.app.BaseController,statics:{strings:{model:{getter:'getModel',upper:'Model'},view:{getter:'getView',upper:'View'},controller:{getter:'getController',upper:'Controller'},store:{getter:'getStore',upper:'Store'},profile:{getter:'getProfile',upper:'Profiles'}},controllerRegex:/^(.*)\.controller\./,profileRegex:/^(.*)\.profile\./,createGetter:function(a,b){return function(){return this[a](b)}},getGetterName:function(f,d){var b='get',c=f.split('.'),e=c.length,a;for(a=0;a<e;a++){b+=Ext.String.capitalize(c[a])}b+=d;return b},resolveNamespace:function(g,f){var c=Ext.app.Controller,b,a,d,e;b=g.prototype.isProfile?c.profileRegex:c.controllerRegex;a=Ext.getClassName(g);d=f.$namespace||f.namespace||Ext.app.getNamespace(a)||(e=b.exec(a))&&e[1];return d},processDependencies:function(m,p,o,f,a,n){if(!a||!a.length){return}var c=this,k=c.strings[f],h,i,j,g,b,l,d,e;if(!Ext.isArray(a)){a=[a]}for(b=0,l=a.length;b<l;b++){g=a[b];h=c.getFullName(g,f,o,n);a[b]=i=h.absoluteName;j=h.shortName;p.push(i);d=c.getGetterName(j,k.upper);if(!m[d]){m[d]=e=c.createGetter(k.getter,g)}if(e&&f!=='controller'){e['Ext.app.getter']=!0}}},getFullName:function(a,g,d,f){var c=a,e,b;if((e=a.indexOf('@'))>0){c=a.substring(0,e);b=a.substring(e+1)+'.'+c}else {if(a.indexOf('.')>0&&(Ext.ClassManager.isCreated(a)||this.hasRegisteredPrefix(a))){b=a;c=a.replace(d+'.'+g+'.','')}else {if(d){b=d+'.'+g+'.'+(f?f+'.'+a:a);c=a}else {b=a}}}return {absoluteName:b,shortName:c}},hasRegisteredPrefix:function(a){var c=Ext.ClassManager,b=c.getPrefix(a);return b&&b!==a}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:!0,moduleClassName:null},onClassExtended:function(d,c,a){var b=a.onBeforeCreated;a.onBeforeCreated=function(j,i){var g=Ext.app.Controller,h=[],e,f;f=j.prototype;e=g.resolveNamespace(j,i);if(e){f.$namespace=e}g.processDependencies(f,h,e,'model',i.models);g.processDependencies(f,h,e,'view',i.views);g.processDependencies(f,h,e,'store',i.stores);g.processDependencies(f,h,e,'controller',i.controllers);Ext.require(h,Ext.Function.pass(b,arguments,this))}},constructor:function(a){this.initAutoGetters();this.callParent([a])},normalizeRefs:function(a){var c=this,b=[];if(a){if(Ext.isObject(a)){Ext.Object.each(a,function(d,c){if(Ext.isString(c)){c={selector:c}}c.ref=d;b.push(c)})}else {if(Ext.isArray(a)){b=Ext.Array.merge(b,a)}}}a=c.refs;if(a){c.refs=null;a=c.normalizeRefs(a);if(a){b=Ext.Array.merge(b,a)}}return b},getRefMap:function(){var e=this,a=e._refMap,b,d,f,c;if(!a){b=e.getRefs();a=e._refMap={};if(b){for(c=0,f=b.length;c<f;c++){d=b[c];a[d.ref]=d.selector}}}return a},applyId:function(a){return a||Ext.app.Controller.getFullName(this.$className,'controller',this.$namespace).shortName},applyRefs:function(a){return this.normalizeRefs(Ext.clone(a))},updateRefs:function(a){if(a){this.ref(a)}},initAutoGetters:function(){var b=this.self.prototype,c,a;for(c in b){a=b[c];if(a&&a['Ext.app.getter']){a.call(this)}}},doInit:function(b){var a=this;if(!a._initialized){a.init(b);a._initialized=!0}},finishInit:function(f){var c=this,a=c.controllers,d,b,e;if(c._initialized&&a&&a.length){for(b=0,e=a.length;b<e;b++){d=c.getController(a[b]);d.finishInit(f)}}},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(!0)},deactivate:function(){this.setActive(!1)},isActive:function(){return this.getActive()},ref:function(b){var a=this,f=0,g=b.length,d,c,e;b=Ext.Array.from(b);a.references=a.references||[];for(;f<g;f++){d=b[f];c=d.ref;e='get'+Ext.String.capitalize(c);if(!a[e]){a[e]=Ext.Function.pass(a.getRef,[c,d],a)}a.references.push(c.toLowerCase())}},addRef:function(a){this.ref(a)},getRef:function(d,a,e){var f=this,c=f.refCache||(f.refCache={}),b=c[d];a=a||{};e=e||{};Ext.apply(a,e);if(a.forceCreate){return Ext.ComponentManager.create(a,'component')}if(!b){if(a.selector){c[d]=b=Ext.ComponentQuery.query(a.selector)[0]}if(!b&&a.autoCreate){c[d]=b=Ext.ComponentManager.create(a,'component')}if(b){b.on('destroy',function(){c[d]=null})}}return b},hasRef:function(b){var a=this.references;return a&&Ext.Array.indexOf(a,b.toLowerCase())!==-1},getController:function(b){var a=this.getApplication();if(b===this.getId()){return this}return a&&a.getController(b)},getStore:function(a){var c,b;c=a.indexOf('@')===-1?a:a.split('@')[0];b=Ext.StoreManager.get(c);if(!b){a=Ext.app.Controller.getFullName(a,'store',this.$namespace);if(a){b=Ext.create(a.absoluteName,{id:c})}}return b},getModel:function(b){var c=Ext.app.Controller.getFullName(b,'model',this.$namespace),a=Ext.ClassManager.get(c.absoluteName);if(!a){a=Ext.data.schema.Schema.lookupEntity(b)}return a},getProfile:function(a){a=Ext.app.Controller.getFullName(a,'profile',this.$namespace);return a},getView:function(b){var a=Ext.app.Controller.getFullName(b,'view',this.$namespace);return a&&Ext.ClassManager.get(a.absoluteName)},destroy:function(e,f){var a=this,d=a.application,b,c;if(!f&&d){d.unregister(a)}a.application=null;if(e){b=a.refCache;for(c in b){if(b.hasOwnProperty(c)){Ext.destroy(b[c])}}}a.callParent()}});Ext.define('Ext.app.Application',{extend:Ext.app.Controller,isApplication:!0,scope:undefined,namespaces:[],paths:null,config:{name:'',appProperty:'app',profiles:[],currentProfile:null,mainView:{$value:null,lazy:!0},defaultToken:null,glyphFontFamily:null,quickTips:!0,router:null},onClassExtended:function(d,a,f){var h=Ext.app.Controller,g=d.prototype,c=[],e,b;b=a.name||d.superclass.name;if(b){a.$namespace=b;Ext.app.addNamespaces(b)}if(a.namespaces){Ext.app.addNamespaces(a.namespaces)}if(a['paths processed']){delete a['paths processed']}else {Ext.app.setupPaths(b,'appFolder' in a?a.appFolder:d.superclass.appFolder,a.paths)}h.processDependencies(g,c,b,'profile',a.profiles);g.getDependencies(d,a,c);if(c.length){e=f.onBeforeCreated;f.onBeforeCreated=function(h,g){var b=Ext.Array.clone(arguments);Ext.require(c,function(){return e.apply(this,b)})}}},getDependencies:Ext.emptyFn,constructor:function(c){var a=this,b=Ext.app.Application;Ext.route.Router.application=a;if(!b.instance){b.instance=a}a.callParent([c]);a.doInit(a);Ext.on('appupdate',a.onAppUpdate,a,{single:!0});this.onProfilesReady()},applyId:function(a){return a||this.$className},updateRouter:function(a){if(a){Ext.route.Router.setConfig(a)}},onAppUpdate:Ext.emptyFn,onProfilesReady:function(){var a=this,e=a.getProfiles(),f=e.length,b,c,d;for(c=0;c<f;c++){d=Ext.create(e[c],{application:a});if(d.isActive()&&!b){b=d;a.setCurrentProfile(b)}}if(b){b.init()}a.initControllers();a.onBeforeLaunch();a.finishInitControllers();Ext.fireEvent('applaunch',a)},doInit:function(a){this.initNamespace(a);this.callParent([a])},initNamespace:function(a){var c=a.getAppProperty(),b=Ext.namespace(a.getName());if(b){b.getApplication=function(){return a};if(c){if(!b[c]){b[c]=a}}}},initControllers:function(){var c=this,b=Ext.Array.from(c.controllers),e=c.getCurrentProfile(),a,d;c.controllers=new Ext.util.MixedCollection();for(a=0,d=b.length;a<d;a++){c.getController(b[a])}if(e){b=e.getControllers();for(a=0,d=b.length;a<d;a++){c.getController(b[a])}}},finishInitControllers:function(){var c=this,b,a,d;b=c.controllers.getRange();for(a=0,d=b.length;a<d;a++){b[a].finishInit(c)}},launch:Ext.emptyFn,onBeforeLaunch:function(){var a=this,b=Ext.util.History,e=a.getDefaultToken(),g=a.getCurrentProfile(),f,d,i,h,c;a.initMainView();if(g){g.launch()}a.launch.call(a.scope||a);a.launched=!0;a.fireEvent('launch',a);f=a.controllers.items;i=f.length;for(d=0;d<i;d++){h=f[d];h.onLaunch(a)}if(!b.ready){b.init()}c=b.getToken();if(c||c===e){Ext.route.Router.onStateChange(c)}else {if(e){b.replace(e)}}if(Ext.Microloader&&Ext.Microloader.appUpdate&&Ext.Microloader.appUpdate.updated){Ext.Microloader.fireAppUpdate()}if(!a.cnsTimer){a.cnsTimer=Ext.defer(Ext.ClassManager.clearNamespaceCache,2000,Ext.ClassManager)}},getModuleClassName:function(b,a){return Ext.app.Controller.getFullName(b,a,this.getName()).absoluteName},initMainView:function(){var b=this,c=b.getCurrentProfile(),a;if(c){a=c.getMainView()}if(a){b.setMainView(a)}else {b.getMainView()}},applyMainView:function(a){var b=this.getView(a);return b.create({$initParent:this.viewport})},createController:function(a){return this.getController(a)},destroyController:function(a){if(typeof a==='string'){a=this.getController(a,!0)}Ext.destroy(a)},getController:function(f,j){var c=this,e=c.controllers,b,a,i,d,h,g;a=e.get(f);if(!a){g=e.items;for(d=0,i=g.length;d<i;++d){h=g[d];b=h.getModuleClassName();if(b&&b===f){a=h;break}}}if(!a&&!j){b=c.getModuleClassName(f,'controller');a=Ext.create(b,{application:c,moduleClassName:b});e.add(a);if(c._initialized){a.doInit(c)}}return a},unregister:function(a){this.controllers.remove(a)},getApplication:function(){return this},destroy:function(d){var a=this,c=a.controllers,b=Ext.namespace(a.getName()),e=a.getAppProperty();Ext.undefer(a.cnsTimer);Ext.un('appupdate',a.onAppUpdate,a);Ext.destroy(a.viewport);if(c){c.each(function(a){a.destroy(d,!0)})}a.controllers=null;a.callParent([d,!0]);if(b&&b[e]===a){delete b[e]}if(Ext.route.Router.application===a){Ext.route.Router.application=null}if(Ext.app.Application.instance===a){Ext.app.Application.instance=null}},updateGlyphFontFamily:function(a){Ext.setGlyphFontFamily(a)},applyProfiles:function(a){var b=this;return Ext.Array.map(a,function(c){return b.getModuleClassName(c,'profile')})}},function(){Ext.getApplication=function(){return Ext.app.Application.instance}});Ext.application=function(a){var b=function(b){Ext.onReady(function(){var c=Ext.viewport;c=c&&c['Viewport'];if(c&&c.setup){c.setup(b.prototype.config.viewport)}Ext.app.Application.instance=new b()})};if(typeof a==='string'){Ext.require(a,function(){b(Ext.ClassManager.get(a))})}else {a=Ext.apply({extend:'Ext.app.Application'},a);Ext.app.setupPaths(a.name,a.appFolder,a.paths);a['paths processed']=!0;Ext.define(a.name+'.$application',a,function(){b(this)})}};Ext.define('Ext.overrides.app.Application',{override:'Ext.app.Application',autoCreateViewport:!1,config:{enableQuickTips:null},quickTips:!0,updateEnableQuickTips:function(a){this.setQuickTips(a)},applyMainView:function(b){var c,d,a,f,e;if(typeof b==='string'){c=this.getView(b);a={}}else {a=b;c=Ext.ClassManager.getByConfig(b)}d=c.prototype;if(!d.isViewport){f=Ext.Array.from(d.plugins);e=Ext.Array.from(a.plugins);a=Ext.apply({},a);a.plugins=['viewport'].concat(f,e)}return c.create(a)},getDependencies:function(g,c,b){var d=Ext.app.Controller,f=g.prototype,e=c.$namespace,a=c.autoCreateViewport;if(a){if(a===!0){a='Viewport'}else {b.push('Ext.plugin.Viewport')}d.processDependencies(f,b,e,'view',a)}},onBeforeLaunch:function(){var a=this,b=a.autoCreateViewport;if(a.getQuickTips()){a.initQuickTips()}if(b){a.initViewport()}this.callParent(arguments)},getViewportName:function(){var b=null,a=this.autoCreateViewport;if(a){b=a===!0?'Viewport':a}return b},initViewport:function(){this.setMainView(this.getViewportName())},initQuickTips:function(){Ext.tip.QuickTipManager.init()}});Ext.define('Ext.app.domain.View',{extend:Ext.app.EventDomain,isInstance:!0,constructor:function(a){this.callParent([a]);this.controller=a;this.monitoredClasses=[Ext.Widget]},match:function(c,b,d){var a=!1;if(b==='#'){a=d===c.getController()}else {a=c.is(b)}return a},destroy:function(){this.controller=null;this.callParent()}});Ext.define('Ext.overrides.app.domain.View',{override:'Ext.app.domain.View',constructor:function(a){this.callParent([a]);this.monitoredClasses.push(Ext.Component)}});Ext.define('Ext.app.ViewController',{extend:Ext.app.BaseController,alias:'controller.controller',mixins:[Ext.mixin.Factoryable],isViewController:!0,factoryConfig:{type:'controller'},config:{bindings:{$value:null,lazy:!0},closeViewAction:'destroy'},view:null,constructor:function(a){this.compDomain=new Ext.app.domain.View(this);this.callParent([a])},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var a=this,b=a.compDomain,c,d,e;if(a.$hasBinds){c=a.getBindings();for(e in c){d=c[e];if(d){d.destroy()}}}if(b){b.unlisten(a);b.destroy()}a.compDomain=a.view=null;a.callParent()},closeView:function(){var b=this.getView(),a;if(b){a=this.getCloseViewAction();b[a]()}},control:function(a,c){var b=a;if(Ext.isString(a)){b={};b[a]=c}this.compDomain.listen(b,this)},listen:function(a,c){var b=a.component;if(b){a=Ext.apply({},a);delete a.component;this.control(b)}this.callParent([a,c])},applyId:function(a){if(!a){a=Ext.id(null,'controller-')}return a},getReferences:function(){var a=this.view;return a&&a.getReferences()},getView:function(){return this.view},lookup:function(b){var a=this.view;return a&&a.lookup(b)},lookupReference:function(a){return this.lookup(a)},getSession:function(){var a=this.view;return a&&a.lookupSession()},getViewModel:function(){var a=this.view;return a&&a.lookupViewModel()},getStore:function(b){var a=this.getViewModel();return a?a.getStore(b):null},fireViewEvent:function(e,d){var a=this.view,c=!1,b=arguments;if(a){if(a!==d){b=Ext.Array.slice(b);b.splice(1,0,a)}c=a.fireEvent.apply(a,b)}return c},applyBindings:function(a){if(!a){return null}var c=this,g=c.getViewModel(),f=c.getBindTemplateScope(),d,b,e;c.$hasBinds=!0;for(b in a){e=a[b];d=null;if(e){d=g.bind(e,b,c);d.getTemplateScope=f}a[b]=d}return a},privates:{view:null,attachReference:function(b){var a=this.view;if(a){a.attachReference(b)}},getBindTemplateScope:function(){return this.scope},initBindings:function(){this.getBindings()},setView:function(a){this.view=a;if(!this.beforeInit.$nullFn){this.beforeInit(a)}}}});Ext.define('Ext.util.Scheduler',{mixins:[Ext.mixin.Observable],busyCounter:0,lastBusyCounter:0,destroyed:!1,firing:null,notifyIndex:-1,nextId:0,orderedItems:null,passes:0,scheduledCount:0,validIdRe:null,config:{cycleLimit:5,preSort:null,tickDelay:5},suspendOnNotify:!0,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.items=new Ext.util.Bag()},destroy:function(){var a=this,b=a.timer;if(b){window.clearTimeout(b);a.timer=null}a.items.destroy();a.items=a.orderedItems=null;a.callParent()},add:function(c){var a=this,b=a.items;if(b===a.firing){a.items=b=b.clone()}c.id=c.id||++a.nextId;c.scheduler=a;b.add(c);if(!a.sortMap){a.orderedItems=null}},remove:function(c){var a=this,b=a.items;if(a.destroyed){return}if(b===a.firing){a.items=b=b.clone()}if(c.scheduled){a.unscheduleItem(c);c.scheduled=!1}b.remove(c);a.orderedItems=null},sort:function(){var a=this,b=a.items,f={},e=a.getPreSort(),c,d;a.orderedItems=[];a.sortMap=f;if(e){b.sort(e)}b=b.items;for(c=0;c<b.length;++c){d=b[c];if(!f[d.id]){a.sortItem(d)}}a.sortMap=null},sortItem:function(a){var b=this,d=b.sortMap,e=b.orderedItems,c;if(!a.scheduler){b.add(a)}c=a.id;if(!(c in d)){d[c]=0;if(!a.sort.$nullFn){a.sort()}d[c]=1;a.order=b.orderedItems.length;e.push(a)}return b},sortItems:function(a){var b=this,c=b.sortItem;if(a){if(a instanceof Array){Ext.each(a,c,b)}else {Ext.Object.eachValue(a,c,b)}}return b},applyPreSort:function(e){if(typeof e==='function'){return e}var b=e.split(','),d=[],g=b.length,c,a,f;for(a=0;a<g;++a){d[a]=1;f=b[a];if((c=f.charAt(0))==='-'){d[a]=-1}else {if(c!=='+'){c=0}}if(c){b[a]=f.substring(1)}}return function(j,k){var f=0,a,c,h,i;for(a=0;!f&&a<g;++a){c=b[a];h=j[c];i=k[c];f=d[a]*(h<i?-1:i<h?1:0)}return f}},notify:function(){var a=this,k=a.timer,h=a.getCycleLimit(),f=Ext.GlobalEvents,j=a.suspendOnNotify,g,b,d,e,c,i;if(k){window.clearTimeout(k);a.timer=null}if(!a.firing&&a.scheduledCount){if(j){Ext.suspendLayouts()}while(a.scheduledCount){if(h){--h}else {a.firing=null;break}if(!i){i=!0;if(f.hasListeners.beforebindnotify){f.fireEvent('beforebindnotify',a)}}++a.passes;if(!(c=a.orderedItems)){a.sort();c=a.orderedItems}e=c.length;if(e){a.firing=a.items;for(b=0;b<e;++b){d=c[b];if(d.scheduled){d.scheduled=!1;--a.scheduledCount;a.notifyIndex=b;d.react();if(!a.scheduledCount){break}}}}}a.firing=null;a.notifyIndex=-1;if(j){Ext.resumeLayouts(!0)}}if((g=a.busyCounter)!==a.lastBusyCounter){if(!(a.lastBusyCounter=g)){a.fireEvent('idle',a)}}},onTick:function(){this.timer=null;this.notify()},scheduleItem:function(b){var a=this;++a.scheduledCount;if(!a.timer&&!a.firing){a.scheduleTick()}},scheduleTick:function(){var a=this;if(!a.destroyed&&!a.timer){a.timer=Ext.defer(a.onTick,a.getTickDelay(),a)}},unscheduleItem:function(a){if(this.scheduledCount){--this.scheduledCount}},adjustBusy:function(c){var a=this,b=a.busyCounter+c;a.busyCounter=b;if(b){if(!a.lastBusyCounter){a.lastBusyCounter=b;a.fireEvent('busy',a)}}else {if(a.lastBusyCounter&&!a.timer){a.scheduleTick()}}},isBusy:function(){return !this.isIdle()},isIdle:function(){return !(this.busyCounter+this.lastBusyCounter)}});Ext.define('Ext.data.Batch',{mixins:{observable:Ext.mixin.Observable},config:{pauseOnException:!1},current:-1,total:0,running:!1,complete:!1,exception:!1,constructor:function(b){var a=this;a.mixins.observable.constructor.call(a,b);a.operations=[];a.exceptions=[]},add:function(a){var b=this,c,d;if(Ext.isArray(a)){for(c=0,d=a.length;c<d;++c){b.add(a[c])}}else {b.total++;a.setBatch(b);b.operations.push(a)}return b},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(b,e){var f=b.order-e.order;if(f){return f}var a=b.entityType,d=e.entityType,c;if(!a||!d){return 0}if(!(c=a.rank)){a.schema.rankEntities();c=a.rank}return (c-d.rank)*b.foreignKeyDirection},start:function(b){var a=this;if(a.destroyed||!a.operations.length||a.running){return a}a.exceptions.length=0;a.exception=!1;a.running=!0;return a.runOperation(Ext.isDefined(b)?b:a.current+1)},abort:function(){var a=this,b;if(a.running){b=a.getCurrent();if(!b.destroyed){b.abort()}}a.running=!1;a.aborted=!0;a.current=undefined},retry:function(){return this.start(this.current)},runNextOperation:function(){var a=this;if(a.running){a.runOperation(a.current+1)}return a},pause:function(){this.running=!1;return this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var b=null,a=this.current;if(!(a===-1||this.complete)){b=this.operations[a]}return b},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(d){var a=this,c=a.operations,b=c[d];if(b===undefined){a.running=!1;a.complete=!0;a.fireEvent('complete',a,c[c.length-1])}else {a.current=d;b.setInternalCallback(a.onOperationComplete);b.setInternalScope(a);b.execute()}return a},onOperationComplete:function(b){var a=this,c=b.hasException();if(c){a.exception=!0;a.exceptions.push(b);a.fireEvent('exception',a,b)}if(c&&a.getPauseOnException()){a.pause()}else {a.fireEvent('operationcomplete',a,b);a.runNextOperation()}},destroy:function(){var a=this,e=a.operations,b,c,d;if(a.running){a.abort()}for(c=0,d=a.operations.length;c<d;c++){b=e[c];if(b){if(!b.destroyed&&!b.$destroyOwner){b.destroy()}b[c]=null}}a.operations=a.exceptions=null;a.callParent()}});Ext.define('Ext.data.matrix.Slice',{constructor:function(a,b){this.id=b;this.side=a;this.members={}},attach:function(b){var a=this;a.store=b;b.matrix=a;b.on('load',a.onStoreLoad,a,{single:!0})},commit:function(){var a=this.members,b;for(b in a){a[b][2]=0}},onStoreLoad:function(a){this.update(a.getData().items,0)},update:function(l,d){var e=this,p=Ext.data.matrix.Slice,o=e.side,q=o.index,r=l.length,i=e.id,k=e.members,m=o.inverse,g=m.slices,c,f,j,h,b,a,n;for(j=0;j<r;++j){f=n=null;h=l[j];b=h.isEntity?(n=h).id:h;c=k[b];if(d<0&&c&&c[2]===1){delete k[b];a=g[b];if(a){delete a.members[i]}f=1}else {if(!c){c=[b,b,d];c[q]=i;k[b]=c;a=g[b];if(!a){g[b]=a=new p(m,b)}a.members[i]=c;f=1}else {if(d!==c[2]&&d!==0&&!(d===1&&c[2]===0)){c[2]=d;a=g[b];f=1}}}if(f){if(e.notify){e.notify.call(e.scope,e,b,d)}if(a&&a.notify){a.notify.call(a.scope,a,i,d)}}}},updateId:function(b){var g=this,c=g.id,f=g.side,e=f.slices,j=e[c],h=j.members,l=f.index,k=f.inverse.slices,i,d,a;g.id=b;e[b]=j;delete e[c];for(d in h){i=h[d];i[l]=b;a=k[d].members;a[b]=a[c];delete a[c]}},destroy:function(){var a=this,b=a.store;if(b){b.matrix=null;b.un('load',a.onStoreLoad,a)}a.notify=a.scope=a.store=a.side=a.members=null;a.callParent()}});Ext.define('Ext.data.matrix.Side',{constructor:function(b,c,d){var a=this;a.matrix=b;a.index=c;a.role=d;a.slices={}},commit:function(){var a=this.slices,b;for(b in a){a[b].commit()}},get:function(a,b){var e=this,c=e.slices,d=c[a]||(c[a]=new Ext.data.matrix.Slice(e,a));return b||b===0?d.members[b]:d},update:function(c,d,b){var a=this.get(c);return a.update(d,b)},updateId:function(c,b){var a=this.get(c);if(a){a.updateId(b)}},destroy:function(){var a=this,b=a.slices,c;for(c in b){b[c].destroy()}a.inverse=a.matrix=a.role=a.slices=null;a.callParent()}});Ext.define('Ext.data.matrix.Matrix',{constructor:function(f,c){var a=this,b=c.isManyToMany?c:f.getSchema().getAssociation(c),g=Ext.data.matrix.Side,e=new g(a,0,b.left),d=new g(a,1,b.right);a.association=b;a.session=f;a.left=e;a.right=d;e.inverse=d;d.inverse=e},commit:function(){this.left.commit();this.right.commit()},update:function(b,c,a){return this.left.update(b,c,a)},updateId:function(e,g,f){var c=e.self,d=this.left,b=this.right,a;if(c===d.role.cls){a=d}if(c===b.role.cls){a=b}if(a){a.updateId(g,f)}},destroy:function(){var a=this;a.left.destroy();a.right.destroy();a.association=a.session=a.left=a.right=null;a.callParent()}});Ext.define('Ext.data.session.ChangesVisitor',{constructor:function(c){var a=this,b;a.session=c;b=c.getCrudProperties();a.result=null;a.writerOptions={};a.createKey=b.create;a.readKey=b.read;a.updateKey=b.update;a.dropKey=b.drop},onDirtyRecord:function(b){var c=this,j=c.crud,h=b.phantom,f=b.dropped,m=b.$className,k=h||f?'allDataOptions':'partialDataOptions',d=c.writerOptions,l=b.entityName,a,e,g,i;if(h&&f){return !1}j=h?c.createKey:f?c.dropKey:c.updateKey;d=d[m]||(d[m]={});if(f){if(!(a=d.drop)){d.drop=a={all:b.getProxy().getWriter().getWriteAllFields()}}if(!a.all){g=b.id}}if(!g){if(!(a=d[k])){a=b.getProxy().getWriter().getConfig(k);d[k]=a=Ext.Object.chain(a);c.setupOptions(a)}g=b.getData(a)}i=c.result||(c.result={});e=i[l]||(i[l]={});e=e[j]||(e[j]=[]);e.push(g)},setupOptions:function(a){a.serialize=!0},onMatrixChange:function(d,h,j,i){var b=this,g=d.left.type,e=d.right.role,f=i<0?b.dropKey:b.createKey,a,c;c=b.result||(b.result={});a=c[g]||(c[g]={});a=a[e]||(a[e]={});a=a[f]||(a[f]={});a=a[h]||(a[h]=[]);a.push(j)}});Ext.define('Ext.data.session.ChildChangesVisitor',{extend:Ext.data.session.ChangesVisitor,constructor:function(){this.seen={};this.callParent(arguments)},setupOptions:function(a){this.callParent([a]);a.serialize=!1},onDirtyRecord:function(a){if(this.callParent(arguments)!==!1){if(!a.$source&&(a.dropped||!a.phantom)){this.readEntity(a)}}},readEntity:function(b){var c=this,f=c.readKey,e=b.entityName,i=b.id,h=c.seen,g=e+i,d,a;if(h[g]){return}h[g]=!0;d=c.result||(c.result={});a=d[e]||(d[e]={});a=a[f]||(a[f]=[]);a.push(Ext.apply({},b.modified,b.data))}});Ext.define('Ext.data.session.BatchVisitor',{map:null,constructor:function(a){this.batch=a},getBatch:function(m){var i=this.map,a=this.batch,c,e,k,b,d,f,j,h,l,g;if(i){if(!a){a=new Ext.data.Batch()}for(k in i){c=i[k];e=c.entity;f=e.getProxy();j=f.getBatchActions();delete c.entity;for(d in c){if(j){b=f.createOperation(d,{records:c[d]});b.entityType=e;a.add(b)}else {h=c[d];for(g=0,l=h.length;g<l;++g){b=f.createOperation(d,{records:[h[g]]});b.entityType=e;a.add(b)}}}}}if(a&&m!==!1){a.sort()}return a},onDirtyRecord:function(a){var f=this,c=a.phantom?'create':a.dropped?'destroy':'update',d=a.$className,e=f.map||(f.map={}),b=e[d]||(e[d]={entity:a.self});b=b[c]||(b[c]=[]);b.push(a)}});Ext.define('Ext.mixin.Dirty',{mixinId:'dirty',config:{dirty:{$value:!1,lazy:!0}},dirty:!1,_dirtyRecordCount:0,ignoreDirty:!1,recordStateIsDirtyState:!0,isDirty:function(){return this.getDirty()},applyDirty:function(a){return this.ignoreDirty?!1:a},updateDirty:function(b){var a=this;a.dirty=b;if(a.fireEvent&&!a.isDirtyInitializing){a.fireDirtyChange()}},clearRecordStates:function(){var b=this,a=b._crudCounters;if(a){a.C=a.U=a.D=0}b._dirtyRecordCount=0;if(b.recordStateIsDirtyState){b.setDirty(!1)}},fireDirtyChange:function(){var a=this;if(!a.ignoreDirty&&a.hasListeners.dirtychange){a.fireEvent('dirtychange',a,a.dirty)}},trackRecordState:function(f,h){var a=this,b=a._crudCounters||(a._crudCounters={C:0,R:0,U:0,D:0}),i=a._dirtyRecordCount,g=f.crudState,d=f.crudStateWas,e,c;if(h||g!==d){if(!h&&d){--b[d]}if(!(f.phantom&&g==='D')){++b[g]}a._dirtyRecordCount=c=b.C+b.U+b.D;e=!c!==!i;if(e&&a.recordStateIsDirtyState){a.setDirty(c>0)}}return e},untrackRecordState:function(e){var b=this,a=b._crudCounters,g=b._dirtyRecordCount,f=e.crudState,d,c;if(a&&f!=='D'&&!e.erased){--a[f];b._dirtyRecordCount=c=a.C+a.U+a.D;d=!c!==!g;if(d&&b.recordStateIsDirtyState){b.setDirty(c>0)}}return d}});Ext.define('Ext.data.Session',{mixins:[Ext.mixin.Dirty,Ext.mixin.Observable],isSession:!0,config:{schema:'default',parent:null,autoDestroy:!0,crudProperties:{create:'C',read:'R',update:'U',drop:'D'}},crudOperations:[{type:'R',entityMethod:'readEntities'},{type:'C',entityMethod:'createEntities'},{type:'U',entityMethod:'updateEntities'},{type:'D',entityMethod:'dropEntities'}],crudKeys:{C:1,R:1,U:1,D:1},statics:{nextId:1},constructor:function(b){var a=this;a.data={};a.matrices={};a.id=Ext.data.Session.nextId++;a.identifierCache={};a.recordCreator=a.recordCreator.bind(a);a.mixins.observable.constructor.call(a,b)},destroy:function(){var a=this,f=a.matrices,g=a.data,e,d,b,c;for(c in f){f[c].destroy()}for(e in g){d=g[e];for(c in d){b=d[c].record;if(b){b.$source=null;b.unjoin(a)}}}a.identifierCache=a.recordCreator=a.matrices=a.data=null;a.setSchema(null);a.callParent()},adopt:function(a){var c=this,b=a.associations,d;if(a.session!==c){c.add(a);if(b){for(d in b){b[d].adoptAssociated(a,c)}}}},commit:function(){var a=this,g=a.data,f=a.matrices,h=a.getDirty(),e,c,b,d;a.suspendEvent('dirtychange');for(e in g){c=g[e];for(b in c){d=c[b].record;if(d){d.commit()}}}for(b in f){f[b].commit()}a.clearRecordStates();a.resumeEvent('dirtychange');if(a.getDirty()!==h){a.fireDirtyChange()}},createRecord:function(c,b,f){var a=c.$isClass?c:this.getSchema().getEntity(c),e=this.getParent(),d;if(b&&e){d=a.getIdFromData(b);if(e.peekRecord(a,d)){Ext.raise('A parent session already contains an entry for '+a.entityName+': '+d)}}return new a(b,f?null:this)},getChanges:function(){var a=new Ext.data.session.ChangesVisitor(this);this.visitData(a);return a.result},getChangesForParent:function(){var a=new Ext.data.session.ChildChangesVisitor(this);this.visitData(a);return a.result},getRecord:function(b,f,g){var c=this,d=b.isModel,a,i,h,e;if(d){d=b;f=b.id;b=b.self}a=c.peekRecord(b,f);if(!a){i=b.$isClass?b:c.getSchema().getEntity(b);h=c.getParent();if(h){e=h.peekRecord(i,f)}if(e){if(e.isLoading()){d=!1}else {a=e.copy(undefined,c);a.$source=e}}if(!a){if(d){a=d;c.adopt(a)}else {a=i.createWithId(f,null,c);if(g!==!1){a.load(Ext.isObject(g)?g:undefined)}}}}return a},getSaveBatch:function(b){var a=new Ext.data.session.BatchVisitor();this.visitData(a);return a.getBatch(b)},onInvalidAssociationEntity:function(a,b){Ext.raise('Unable to read association entity: '+this.getModelIdentifier(a,b))},onInvalidEntityCreate:function(a,b){Ext.raise('Cannot create, record already not exists: '+this.getModelIdentifier(a,b))},onInvalidEntityDrop:function(a,b){Ext.raise('Cannot drop, record does not exist: '+this.getModelIdentifier(a,b))},onInvalidEntityRead:function(a,b){Ext.raise('Cannot read, record already not exists: '+this.getModelIdentifier(a,b))},onInvalidEntityUpdate:function(a,b,c){if(c){Ext.raise('Cannot update, record dropped: '+this.getModelIdentifier(a,b))}else {Ext.raise('Cannot update, record does not exist: '+this.getModelIdentifier(a,b))}},peekRecord:function(b,f,e){var h=b.$isClass?b:this.getSchema().getEntity(b),g=h.entityName,a=this.data[g],c,d;a=a&&a[f];c=a&&a.record;if(!c&&e){d=this.getParent();c=d&&d.peekRecord(b,f,e)}return c||null},save:function(){var a=this,c=a.getParent(),b;if(c){b=new Ext.data.session.ChildChangesVisitor(a);a.visitData(b);c.update(b.result);a.commit()}},spawn:function(){return new this.self({schema:this.getSchema(),parent:this})},update:function(e){var a=this,n=a.getSchema(),l=a.crudOperations,q=l.length,o=a.crudKeys,p=a.getDirty(),b,d,c,f,g,h,m,j,i,k;a.suspendEvent('dirtychange');a.getSchema().processKeyChecks(!0);for(b in e){d=n.getEntity(b);c=e[b];for(f=0;f<q;++f){g=l[f];h=c[g.type];if(h){a[g.entityMethod](d,h)}}}for(b in e){d=n.getEntity(b);m=d.associations;c=e[b];for(j in c){if(o[j]){continue}i=m[j];k=c[i.role];i.processUpdate(a,k)}}a.resumeEvent('dirtychange');if(a.getDirty()!==p){a.fireDirtyChange()}},afterCommit:function(a){this.trackRecordState(a)},afterDrop:function(a){this.trackRecordState(a)},afterEdit:function(a){this.trackRecordState(a)},afterErase:function(a){this.evict(a)},afterReject:function(a){this.trackRecordState(a)},privates:{add:function(a){var b=this,f=a.id,e=b.getEntry(a.self,f),c,d;a.session=b;e.record=a;b.trackRecordState(a,!0);b.registerReferences(a);c=a.associations;for(d in c){c[d].checkMembership(b,a)}},applySchema:function(a){return Ext.data.schema.Schema.get(a)},createEntities:function(b,g){var c=this,h=g.length,d,e,a,f;for(d=0;d<h;++d){e=g[d];f=b.getIdFromData(e);a=c.peekRecord(b,f);if(!a){a=c.createRecord(b,e,!0);a.phantom=!0;a.crudState='C';c.add(a);a.crudStateWas='C'}else {c.onInvalidEntityCreate(b,f)}}},dropEntities:function(c,d){var g=d.length,b,e,a,f;if(g){f=Ext.isObject(d[0])}for(b=0;b<g;++b){a=d[b];if(f){a=c.getIdFromData(a)}e=this.peekRecord(c,a);if(e){e.drop()}else {this.onInvalidEntityDrop(c,a)}}},evict:function(a){var c=this,e=a.entityName,b=c.data[e],d=a.id;if(b&&b[d]){c.untrackRecordState(a);a.unjoin(c);delete b[d]}},getEntityList:function(e,a){var g=a.length,b,d,c,f;for(b=0;b<g;++b){d=a[b];c=this.peekRecord(e,d);if(c){a[b]=c}else {f=!0;a[b]=null;this.onInvalidAssociationEntity(e,d)}}if(f){a=Ext.Array.clean(a)}return a},getEntry:function(a,c){if(a.isModel){c=a.getId();a=a.self}var f=a.$isClass?a:this.getSchema().getEntity(a),d=f.entityName,e=this.data,b;b=e[d]||(e[d]={});b=b[c]||(b[c]={});return b},getRefs:function(h,d,i){var a=this.getEntry(h),c=a&&a.refs&&a.refs[d.role],g=i&&this.getParent(),b,f,e;if(g){b=g.getRefs(h,d);if(b){for(f in b){e=b[f];if(!c||!c[f]){this.getRecord(e.self,e.id)}}c=a&&a.refs&&a.refs[d.role]}}return c||null},getIdentifier:function(c){var f=this.getParent(),d,b,e,a;if(f){a=f.getIdentifier(c)}else {d=this.identifierCache;b=c.identifier;e=b.getId()||c.entityName;a=d[e];if(!a){if(b.clone){a=b.clone({id:null})}else {a=b}d[e]=a}}return a},getMatrix:function(a,e){var d=a.isManyToMany?a.name:a,c=this.matrices,b;b=c[d];if(!b&&!e){b=c[d]=new Ext.data.matrix.Matrix(this,a)}return b||null},getMatrixSlice:function(a,d){var b=this.getMatrix(a.association),c=b[a.side];return c.get(d)},getModelIdentifier:function(a,b){return b+'@'+a.entityName},onIdChanged:function(a,b,l){var c=this,j=c.matrices,q=a.entityName,s=a.id,g=c.data[q],k=g[b],p=a.associations,h=k.refs,r=c._setNoRefs,d,i,m,n,e,f,o;delete g[b];g[l]=k;for(o in j){j[o].updateId(a,b,l)}if(h){for(e in h){f=h[e];n=p[e];d=n.association;if(!d.isManyToMany){i=d.field.name;for(m in f){f[m].set(i,s,r)}}}}c.registerReferences(a,b)},processManyBlock:function(f,e,d,i){var c=this,b,a,g,h;if(d){for(b in d){a=c.peekRecord(f,b);if(a){g=c.getEntityList(e.cls,d[b]);h=e.getAssociatedItem(a);c[i](e,h,a,g)}else {c.onInvalidAssociationEntity(f,b)}}}},processManyCreate:function(d,b,c,a){if(b){b.add(a)}else {c[d.getterName](null,null,a)}},processManyDrop:function(d,a,c,b){if(a){a.remove(b)}},processManyRead:function(d,b,c,a){if(b){b.setRecords(a)}else {c[d.getterName](null,null,a)}},readEntities:function(b,g){var c=this,h=g.length,d,e,a,f;for(d=0;d<h;++d){e=g[d];f=b.getIdFromData(e);a=c.peekRecord(b,f);if(!a){a=c.createRecord(b,e,!0)}else {c.onInvalidEntityRead(b,f)}a.phantom=!1;c.add(a)}},recordCreator:function(c,b){var d=this,e=b.getIdFromData(c),a=d.peekRecord(b,e,!0);if(!a){a=new b(c,d)}else {a=d.getRecord(b,e);a.mergeData(c)}return a},registerReferences:function(c,h){var k=c.entityName,n=c.id,l=c.data,m=h||h===0,g,e,d,j,a,i,b,f;j=(i=c.references).length;for(e=0;e<j;++e){a=i[e];d=l[a.name];if(d||d===0){a=a.reference;k=a.type;f=a.inverse.role;g=this.getEntry(a.cls,d);b=g.refs||(g.refs={});b=b[f]||(b[f]={});b[n]=c;if(m){delete b[h]}}}},updateEntities:function(c,d){var h=d.length,f,e,a,b,g;if(Ext.isArray(d)){for(f=0;f<h;++f){e=d[f];b=c.getIdFromData(e);a=this.peekRecord(c,b);if(a){a.set(e)}else {this.onInvalidEntityUpdate(c,b)}}}else {for(b in d){e=d[b];a=this.peekRecord(c,b);if(a&&!a.dropped){g=a.set(e)}else {this.onInvalidEntityUpdate(c,b,!!a)}}}},updateReference:function(h,j,b,c){var g=j.reference,f=g.type,d=g.inverse.role,i=h.id,e,a;if(c||c===0){a=this.getEntry(f,c).refs[d];delete a[i]}if(b||b===0){e=this.getEntry(f,b);a=e.refs||(e.refs={});a=a[d]||(a[d]={});a[i]=h}},visitData:function(b){var j=this,n=j.data,k=j.matrices,i,l,d,o,f,e,c,a,m,g,h;j.getSchema().processKeyChecks(!0);for(c in n){i=n[c];for(d in i){a=i[d].record;if(a){if(a.phantom||a.dirty||a.dropped){if(b.onDirtyRecord){b.onDirtyRecord(a)}}else {if(b.onCleanRecord){b.onCleanRecord(a)}}}}}if(b.onMatrixChange){for(c in k){f=k[c].left;g=f.slices;l=f.role.association;for(d in g){m=g[d];e=m.members;for(o in e){h=(a=e[o])[2];if(h){b.onMatrixChange(l,a[0],a[1],h)}}}}}return b},_setNoRefs:{refs:!1}}});Ext.define('Ext.util.Schedulable',{'abstract':!0,isSchedulable:!0,scheduled:!1,constructor:function(){this.getScheduler().add(this)},destroy:function(){var a=this,b=a.getScheduler();if(b&&!b.destroyed){b.remove(a)}a.scheduler=null;a.schedule=a.react=Ext.emptyFn;a.callParent()},getFullName:function(){return this.name||this.id},privates:{getScheduler:function(){return this.scheduler},schedule:function(){var a=this,b;if(!a.scheduled){b=a.getScheduler();if(b){a.scheduled=!0;if(a.onSchedule){a.onSchedule()}b.scheduleItem(a)}}},unschedule:function(){var b=this,a;if(b.scheduled){a=b.getScheduler();if(a&&!a.destroyed){a.unscheduleItem(b)}b.scheduled=!1}},sort:function(){}}});Ext.define('Ext.app.bind.BaseBinding',{extend:Ext.util.Schedulable,isBinding:!0,calls:0,kind:20,defaultOptions:{},lastValue:undefined,constructor:function(d,c,e,b){var a=this;a.options=b;a.owner=d;a.scope=e;a.callback=c;a.lateBound=Ext.isString(c);if(b&&b.deep){a.deep=!0}a.callParent()},destroy:function(){var a=this,b=a.owner;if(b){b.onBindDestroy(a)}a.callParent();a.scope=a.callback=a.owner=null},isReadOnly:function(){return !0},privates:{getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},getSession:function(){var a=this.owner;return a.isSession?a:a.getSession()},notify:function(b){var a=this,d=a.options||a.defaultOptions,c=a.lastValue;if(!a.calls||a.deep||a.valueChanged(b,c)){++a.calls;a.lastValue=b;if(a.lateBound){a.scope[a.callback](b,c,a)}else {a.callback.call(a.scope,b,c,a)}if(d.single){a.destroy()}}},valueChanged:function(a,b){var c=!0;if(b!==a){if(a&&b&&a instanceof Date&&b instanceof Date){c=a.getTime()!==b.getTime()}}else {c=Ext.isArray(a)}return c}}});Ext.define('Ext.app.bind.Binding',{extend:Ext.app.bind.BaseBinding,constructor:function(a,c,e,d){var b=this;b.callParent([a.owner,c,e,d]);b.stub=a;b.depth=a.depth;if(a.isAvailable()&&!a.scheduled){b.schedule()}},destroy:function(c){var a=this,b=a.stub;if(b&&!c){b.unbind(a);a.stub=null}a.callParent()},bindValidation:function(b,c){var a=this.stub;return a&&a.bindValidation(b,c)},bindValidationField:function(b,c){var a=this.stub;return a&&a.bindValidationField(b,c)},getFullName:function(){return this.fullName||(this.fullName='@('+this.stub.getFullName()+')')},getValue:function(){var b=this,a=b.stub;return a&&a.getValue()},isAvailable:function(){var a=this.stub;return a&&a.isAvailable()},isLoading:function(){var a=this.stub;return a&&a.isLoading()},isReadOnly:function(){var b=this.stub,a=this.options,c=!0;if(!(a&&a.twoWay===!1)){if(b){c=b.isReadOnly()}}return c},refresh:function(){},setValue:function(a){this.stub.set(a)},privates:{getDataObject:function(){var a=this.stub;return a&&a.getDataObject()},getRawValue:function(){var b=this,a=b.stub;return a&&a.getRawValue()},isDescendantOf:function(b){var a=this.stub;return a?b===a||a.isDescendantOf(b):!1},react:function(){this.notify(this.getValue())},schedule:function(){if(!this.stub.scheduled){this.callParent()}},sort:function(){var a=this.stub;a.scheduler.sortItem(a)}}});Ext.define('Ext.app.bind.AbstractStub',{extend:Ext.util.Schedulable,children:null,depth:0,generation:1,kind:10,parent:null,constructor:function(b,c){var a=this;a.owner=b;a.name=c;a.callParent()},destroy:function(){var a=this,d=a.children,c=a.bindings,f,b,e;if(c){for(b=0,f=c.length;b<f;++b){c[b].destroy(!0)}}for(e in d){d[e].destroy()}if(a.scheduled){a.unschedule()}a.callParent()},add:function(a){var b=this;(b.children||(b.children={}))[a.name]=a;a.depth=b.depth+1;a.parent=b},getChild:function(b){var a=Ext.isString(b)?b.split('.'):b;if(a&&a.length){return this.descend(a,0)}return this},getFullName:function(){var b=this,a=b.fullName,d=b.parent,c;if(!a){a=b.name||b.id;if(d&&(c=d.getFullName())){a=(c.charAt(c.length-1)!==':'?c+'.':c)+a}b.fullName=a}return a},getSession:function(){var a=this.owner;return a.isSession?a:a.getSession()},bind:function(d,f,e){var a=this,b=new Ext.app.bind.Binding(a,d,f,e),c=a.bindings||(a.bindings=[]);b.depth=a.depth;c.push(b);return b},getValue:function(){return this.isAvailable()?this.getRawValue():null},graft:function(b){var a=this,c=a.bindings,e=a.name,d;a.parent=a.bindings=null;a.destroy();b.depth=a.depth;b.bindings=c;b.generation=a.generation+1;b.name=e;b.id=a.id;b.path=a.path;if(c){for(d=c.length;d-->0;){c[d].stub=b}}return b},isDescendantOf:function(b){var a;for(a=this;a=a.parent;){if(a===b){return !0}}return !1},isAvailable:function(){return !0},isLoading:function(){return !1},onSchedule:function(){var d,e,c,b,a;for(a=this.parent;a;a=a.parent){b=a.bindings;if(b){for(d=0,e=b.length;d<e;++d){c=b[d];if(c.deep&&!c.scheduled){c.schedule()}}}}},react:function(){var b=this.bindings,c,a,d;if(b){for(a=0,d=b.length;a<d;++a){c=b[a];if(!c.scheduled){c.schedule()}}}},unbind:function(b){var a=this.bindings;if(a&&a.length){Ext.Array.remove(a,b)}},privates:{collect:function(){var a=this.children,f=this.bindings,b=0,d=0,c,e;if(a){for(e in a){c=a[e];d=c.collect();if(d===0){c.destroy();delete a[e]}b+=d}}if(f){b+=f.length}return b},getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},sort:function(){var a=this.parent;if(a){this.scheduler.sortItem(a)}}}});Ext.define('Ext.app.bind.Stub',{extend:Ext.app.bind.AbstractStub,isStub:!0,dirty:!0,formula:null,validationKey:'validation',constructor:function(e,c,b){var a=this,d=c;a.callParent([e,c]);a.boundValue=null;if(b){b.add(a);if(!b.isRootStub){d=b.path+'.'+c}a.checkHadValue()}a.path=d},destroy:function(){var a=this,c=a.formula,b=a.storeBinding;if(c){c.destroy()}if(b){b.destroy()}a.detachBound();a.callParent()},bindValidation:function(b,c){var a=this.parent;return a&&a.descend([this.validationKey,this.name]).bind(b,c)},bindValidationField:function(a,c){var b=this.parent,f=this.name,e=typeof a==='string',d;if(b){d=b.bind(function(b){var d=null;if(b&&b.isModel){d=b.getField(f)}if(e){c[a](d,b,this)}else {a.call(c,d,b,this)}})}return d||null},descend:function(c,g){var b=this,f=b.children||(b.children={}),d=g||0,e=c[d++],a;if(!(a=f[e])){a=new Ext.app.bind.Stub(b.owner,e,b)}if(d<c.length){a=a.descend(c,d)}return a},getChildValue:function(b){var d=this,c=d.name,g=d.bindMappings,f=g.store,e=g.model,a;if(!b&&!Ext.isString(b)){a=d.hadValue?null:undefined}else {a=d.inspectValue(b);if(!a){if(b.isEntity){if(e[c]){a=b[e[c]]()}else {a=b.data[c]}}else {if(b.isStore&&f[c]){a=b[f[c]]()}else {a=b[c];if(a===undefined&&d.hadValue){a=null}}}}}return a},getDataObject:function(){var d=this,a=d.parent.getDataObject(),c=d.name,b=a?a[c]:null,f=d.bindMappings.store,e;if(!b){if(a&&a.isEntity){e=a.associations;if(e&&c in e){b=a[e[c].getterName]()}}}else {if(a.isStore&&c in f){b=a[f[c]]()}}if(!b||!(b.$className||Ext.isObject(b))){a[c]=b={};d.hadValue=!0;d.invalidate(!0,!0)}return b},getRawValue:function(){return this.getChildValue(this.getParentValue())},graft:function(a){var b=this,d=b.parent,c=b.children,g=b.name,f,e;a.parent=d;a.children=c;if(d){d.children[g]=a}if(c){for(f in c){c[f].parent=a}}b.children=null;a.checkHadValue();e=b.callParent([a]);e.invalidate(!0,!0);return e},isAvailable:function(){return this.checkAvailability()},isLoading:function(){return !this.checkAvailability(!0)},invalidate:function(d,c){var a=this,b=a.children,e;a.dirty=!0;a.checkHadValue();if(!c&&a.isAvailable()){if(!a.scheduled){a.schedule()}}if(d&&b){for(e in b){b[e].invalidate(d,c)}}},isReadOnly:function(){var a=this.formula;return !!(a&&!a.set)},set:function(b,j){var c=this,k=c.parent,e=c.name,d=c.formula,a,f,i,g,h;if(d&&!d.settingValue&&d.set){d.setValue(b);return}else {if(c.isLinkStub){g=c.getLinkFormulaStub();d=g?g.formula:null;if(d){d.setValue(b);return}}}a=k.getDataObject();if(a.isEntity){f=a.associations;if(f&&e in f){i=f[e];h=i.setterName;if(h){a[h](b)}c.invalidate(!0)}else {a.set(e,b)}}else {if(b&&b.constructor===Object||!(b===a[e]&&a.hasOwnProperty(e))){if(j||!c.setByLink(b)){if(b===undefined){delete a[e]}else {a[e]=b}c.inspectValue(a);c.invalidate(!0)}}}},onStoreDataChanged:function(){this.invalidate(!0)},afterLoad:function(a){this.invalidate(!0)},afterCommit:function(a){this.afterEdit(a,null)},afterEdit:function(i,f){var b=this.children,j=f&&f.length,h=i.associations,k=this.bindMappings.model,d,e,a,g,c;if(b){if(j){for(e=0;e<j;++e){g=f[e];a=b[g];if(!a){c=i.fieldsMap[g];c=c&&c.reference;a=c&&b[c.role]}if(a){a.invalidate(!0)}}}else {for(d in b){if(!(h&&d in h)){b[d].invalidate(!0)}}}for(d in k){a=b[d];if(a){a.invalidate()}}}this.invalidate()},afterReject:function(a){this.afterEdit(a,null)},afterAssociatedRecordSet:function(e,d,c){var a=this.children,b=c.role;if(a&&b in a){a[b].invalidate(!0)}},setByLink:function(j){var i=this,g=0,h=!1,f,b,c,a,e,d;for(a=i;a;a=a.parent){if(a.isLinkStub){b=a;if(g){for(c=[],f=0,a=i;a!==b;a=a.parent){++f;c[g-f]=a.name}}break}++g}a=null;if(b){e=b.parent;d=b.name;if(!e.shouldClimb(d)){a=e.insertChild(d)}else {a=b.getTargetStub()}}if(a){if(c){a=a.descend(c)}a.set(j);h=!0}return h},setFormula:function(c){var a=this,b=a.formula;if(b){b.destroy()}a.formula=new Ext.app.bind.Formula(a,c)},react:function(){var b=this,a=this.boundValue,d=b.children,c;if(a){if(a.isValidation){a.refresh();c=a.generation;if(b.lastValidationGeneration===c){return}b.lastValidationGeneration=c}else {if(a.isModel){if(d&&d[b.validationKey]){a.isValid()}}}}this.callParent()},privates:{bindMappings:{store:{count:'getCount',first:'first',last:'last',loading:'hasPendingLoad',totalCount:'getTotalCount'},model:{dirty:'isDirty',phantom:'isPhantom',valid:'isValid'}},checkAvailability:function(j){var b=this,f=b.parent,i=b.bindMappings,g=b.name,a=!!(f&&f.checkAvailability(j)),h,c,d,e;if(a){c=b.getParentValue();d=b.inspectValue(c);if(d){if(j){a=!d.hasPendingLoad()}else {if(d.isStore){a=!0}else {a=!d.isLoading()||d.loadCount>0}}}else {if(c){if(c.isModel){if(i.model[g]){a=!f.isLoading();e=!0}else {h=c.associations;if(!(h&&g in h)){a=!0;e=!0}}}else {if(c.isStore&&i.store[g]&&g!=='loading'){a=!f.isLoading();e=!0}}}if(!e){a=b.hadValue||b.getRawValue()!==undefined}}}return a},checkHadValue:function(){if(!this.hadValue){this.hadValue=this.getRawValue()!==undefined}},collect:function(){var a=this,d=a.callParent(),b=a.storeBinding?1:0,c=a.formula?1:0;return d+b+c},getLinkFormulaStub:function(){var a=this;while(a.isLinkStub){a=a.binding.stub}return a.formula?a:null},getParentValue:function(){var a=this;if(a.dirty){a.parentValue=a.parent.getValue();a.dirty=!1}return a.parentValue},setStore:function(a){this.storeBinding=a},inspectValue:function(c){var b=this,f=b.name,i=b.boundValue,a=null,e,d,h,g;if(c&&c.isEntity){e=c.associations;if(e&&f in e){a=c[e[f].getterName]()}else {if(f===b.validationKey){a=c.getValidation();b.lastValidationGeneration=null}}}else {if(c){d=c[f];if(d&&(d.isModel||d.isStore)){a=d}}}h=i!==a;if(h){if(i){b.detachBound()}if(a){if(a.isModel){a.join(b)}else {g=a.associatedEntity;if(g&&a.autoLoad!==!1&&!a.complete&&!a.hasPendingLoad()){a.load()}a.on({scope:b,beginload:'onStoreDataChanged',load:'onStoreDataChanged',datachanged:'onStoreDataChanged',destroy:'onDestroyBound'})}}b.boundValue=a}return a},detachBound:function(){var b=this,a=b.boundValue;if(a&&!a.destroyed){if(a.isModel){a.unjoin(b)}else {a.un({scope:b,beginload:'onStoreDataChanged',load:'onStoreDataChanged',datachanged:'onStoreDataChanged',destroy:'onDestroyBound'})}}},onDestroyBound:function(){if(!this.owner.destroying){this.set(null)}},sort:function(){var a=this,d=a.formula,c=a.scheduler,b=a.storeBinding;a.callParent();if(b){c.sortItem(b)}if(d){c.sortItem(d)}}}});Ext.define('Ext.app.bind.LinkStub',{extend:Ext.app.bind.Stub,isLinkStub:!0,binding:null,destroy:function(){var a=this,b=a.binding,c=a.owner;if(b){a.binding=null;b.destroy();if(c){delete c.linkData[a.name]}}a.target=null;a.callParent()},getFullName:function(){var a=this;return a.fullName||(a.fullName='('+a.callParent()+' -> '+a.binding.getFullName()+')')},getDataObject:function(){var e=this.binding,c=this.parent,b=this.name,a,d;if(c.isRootStub&&!c.shouldClimb(b)){a=c.owner.getData();if(!a.hasOwnProperty(b)){a[b]=d={}}}else {d=e&&e.getDataObject()}return d},getRawValue:function(){var a=this.binding;return a&&a.getRawValue()},getValue:function(){var a=this.binding;return a&&a.getValue()},getTargetStub:function(){var a=this.binding;return a&&a.stub},isAvailable:function(){var a=this.binding;return a?a.isAvailable():!1},isLoading:function(){var a=this.binding;return a?a.isLoading():!1},link:function(c,b){var a=this,d=a.binding;if(d){d.destroy()}b=a.target=b||a.owner;a.linkDescriptor=c;a.binding=b.bind(c,a.onChange,a);a.binding.deep=!0},onChange:function(){this.invalidate(!0)},react:function(){var a=this,b=a.owner.linkData;b[a.name]=a.getValue();a.callParent()},privates:{collect:function(){var a=this,c=a.callParent(),b=a.binding?1:0;return c+b},sort:function(){var a=this.binding;if(a){this.scheduler.sortItem(a)}}}});Ext.define('Ext.app.bind.RootStub',{extend:Ext.app.bind.AbstractStub,isRootStub:!0,depth:0,createRootChild:function(a,j){var e=this,c=e.owner,i=c.getData(),g=e.children,d=g&&g[a],f=d?null:e,h,b;if(j||i.hasOwnProperty(a)||!(h=c.getParent())){b=new Ext.app.bind.Stub(c,a,f)}else {b=new Ext.app.bind.LinkStub(c,a,f);b.link('{'+a+'}',h)}if(d){d.graft(b)}return b},createStubChild:function(a){return this.createRootChild(a,!0)},descend:function(a,g){var f=this,d=f.children,b=g||0,e=a[b++],c=d&&d[e]||f.createRootChild(e);if(b<a.length){c=c.descend(a,b)}return c},getFullName:function(){return this.fullName||(this.fullName=this.owner.id+':')},getDataObject:function(){return this.owner.data},getRawValue:function(){return this.owner.data},getValue:function(){return this.owner.data},isDescendantOf:function(){return !1},set:function(f,k){var c=this,i=c.children||(c.children={}),e=c.owner,g=e.data,l=e.getParent(),a,h,b,d,j;for(b in f){h=f[b];if(h!==undefined){a=i[b];d=k||!c.shouldClimb(b);if(!a){a=c.createRootChild(b,d);j=!0}else {if(d&&a.isLinkStub&&!a.getLinkFormulaStub()){a=c.insertChild(b)}}if(!j||!g.hasOwnProperty(f)){e.invalidateChildLinks(b)}a.set(h,d)}else {if(g.hasOwnProperty(b)){delete g[b];a=i[b];if(a){if(!a.isLinkStub&&l){a=c.createRootChild(b)}e.invalidateChildLinks(b,!0);a.invalidate(!0)}}}}},schedule:Ext.emptyFn,unschedule:Ext.emptyFn,privates:{checkAvailability:function(){return !0},insertChild:function(a){return this.createRootChild(a,!0)},invalidateChildLink:function(b,d){var c=this.children,a=c&&c[b];if(a&&a.isLinkStub&&!a.getLinkFormulaStub()){a=this.createRootChild(b);if(d){a.invalidate(!0)}this.owner.invalidateChildLinks(b,d)}},shouldClimb:function(b){var a=this.owner.getParent();while(a){if(a.getData().hasOwnProperty(b)){return !0}a=a.getParent()}return !1}}});Ext.define('Ext.app.bind.Multi',{extend:Ext.app.bind.BaseBinding,isMultiBinding:!0,missing:1,deep:!0,constructor:function(b,f,e,g,c){var a=this,d=c&&c.trackStatics;a.callParent([f,e,g,c]);a.bindings=[];a.literal=b.$literal;if(b.constructor===Object){if(d){a.staticKeys=[]}a.addObject(b,a.lastValue={},a.staticKeys)}else {a.addArray(b,a.lastValue=[])}if(!--a.missing&&!a.scheduled){a.schedule()}},destroy:function(){var a=this;a.bindings=Ext.destroy(a.bindings);a.callParent()},add:function(d,i,f){var a=this,h=a.owner,e=a.bindings,g=a.literal?d.reference?'bindEntity':'bindExpression':'bind',b,c;++a.missing;b=h[g](d,function(c){i[f]=c;if(b.calls===1){--a.missing}if(!a.missing&&!a.scheduled){a.schedule()}},a,null);c=b.depth;if(!e.length||c<a.depth){a.depth=c}e.push(b);return !this.isBindingStatic(b)},addArray:function(g,d){var f=this,h=g.length,e=!1,c,a,b;for(b=0;b<h;++b){a=g[b];if(a&&(a.reference||Ext.isString(a))){c=f.add(a,d,b)}else {if(Ext.isArray(a)){c=f.addArray(a,d[b]=[])}else {if(a&&a.constructor===Object){c=f.addObject(a,d[b]={})}else {d[b]=a;c=!1}}}e=e||c}return e},addObject:function(g,d,h){var f=this,e=!1,c,a,b;for(b in g){a=g[b];if(a&&(a.reference||Ext.isString(a))){c=f.add(a,d,b)}else {if(Ext.isArray(a)){c=f.addArray(a,d[b]=[])}else {if(a&&a.constructor===Object){c=f.addObject(a,d[b]={})}else {d[b]=a;c=!1}}}if(h&&!c){h.push(b)}e=e||c}return e},getFullName:function(){var c=this,a=c.fullName,d=c.bindings,e=d.length,b;if(!a){a='@[';for(b=0;b<e;++b){if(b){a+=','}a+=d[b].getFullName()}a+=']';c.fullName=a}return a},getRawValue:function(){return this.lastValue},isDescendantOf:function(){return !1},isLoading:function(){var a=this.bindings,b=a.length;for(;b-->0;){if(a[b].isLoading()){return !0}}return !1},isAvailable:function(){var a=this.bindings,b=a.length;for(;b-->0;){if(a[b].isAvailable()){return !0}}return !1},isBindingStatic:function(a){return a.isTemplateBinding&&a.isStatic},isStatic:function(){var b=this.bindings,d=b.length,a,c;for(a=0;a<d;++a){c=b[a];if(!this.isBindingStatic(c)){return !1}}return !0},pruneStaticKeys:function(){var b=Ext.apply({},this.lastValue),c=this.staticKeys,d=c.length,a;for(a=0;a<d;++a){delete b[c[a]]}return b},react:function(){this.notify(this.lastValue)},refresh:function(){},privates:{sort:function(){this.scheduler.sortItems(this.bindings)}}});Ext.define('Ext.app.bind.Formula',{extend:Ext.util.Schedulable,statics:{getFormulaParser:function(c){var b=this.formulaCache,a,d;if(!b){b=this.formulaCache=new Ext.util.LruCache({maxSize:20})}a=b.get(c);if(!a){d='[^\\.a-z0-9_]'+Ext.String.escapeRegex(c)+'\\(\\s*([\'"])(.*?)\\1\\s*\\)';a=new RegExp(d,'gi');b.add(c,a)}return a}},isFormula:!0,calculation:null,explicit:!1,set:null,single:!1,fnKeywordArgumentNamesRe:/^function\s*[^\(]*\(\s*([^,\)\s]+)/,fnKeywordRe:/^\s*function/,replaceParenRe:/[\(\)]/g,constructor:function(h,c){var a=this,g=h.owner,f,b,d,e;a.owner=g;a.stub=h;a.callParent();if(c instanceof Function){a.get=d=c}else {a.get=d=c.get;a.set=c.set;b=c.bind;if(c.single){a.single=c.single}if(b){f=b.bindTo;if(f){e=Ext.apply({},b);delete e.bindTo;b=f}}}if(b){a.explicit=!0}else {b=d.$expressions||a.parseFormula(d)}a.binding=g.bind(b,a.onChange,a,e)},destroy:function(){var a=this,b=a.binding,c=a.stub;if(b){b.destroy();a.binding=null}if(c){c.formula=null}a.callParent();a.getterFn=a.owner=null},getFullName:function(){return this.fullName||(this.fullName=this.stub.getFullName()+'='+this.callParent()+')')},getRawValue:function(){return this.calculation},onChange:function(){if(!this.scheduled){this.schedule()}},parseFormula:function(g){var d=Ext.Function.toCode(g),h='get',c={$literal:!0},a,b,f,e;if(this.fnKeywordRe.test(d)){a=this.fnKeywordArgumentNamesRe.exec(d);if(a){b=a[1]}}else {a=d.split('=>')[0];if(a){a=Ext.String.trim(a.replace(this.replaceParenRe,'')).split(',');b=a[0]}}b=b||h;f=Ext.app.bind.Formula.getFormulaParser(b);while(a=f.exec(d)){e=a[2];c[e]=e}c.$literal=!0;g.$expressions=c;return c},react:function(){var a=this,c=a.owner,d=a.binding.lastValue,b;if(a.explicit){b=d}else {b=c.getFormulaFn(d)}a.settingValue=!0;a.stub.set(a.calculation=a.get.call(c,b));a.settingValue=!1;if(a.single){a.destroy()}},setValue:function(a){this.set.call(this.stub.owner,a)},privates:{getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},sort:function(){var b=this,a=b.binding;if(!a.destroyed){b.scheduler.sortItem(a)}}}});Ext.define('Ext.util.Fly',{inheritableStatics:{flyPoolSize:2,fly:function(){var b=this,c=b.flyweights||(b.flyweights=[]),a=c.length?c.pop():new b();a.reset.apply(a,arguments);return a}},release:function(){var a=this,b=a.self,c=b.flyweights||(b.flyweights=[]);a.reset();if(c.length<b.flyPoolSize){c.push(a)}},reset:Ext.emptyFn});Ext.define('Ext.parse.Tokenizer',function(c){var b=c.flyweights=[],a={literal:!0,'boolean':!0,type:'boolean'},f={error:!0},g={ident:!0},i={literal:!0},h={literal:!0,nil:!0},d={literal:!0,number:!0,type:'number'},e={literal:!0,string:!0,type:'string'};return {extend:Ext.util.Fly,isTokenizer:!0,statics:{BOOLEAN:a,ERROR:f,IDENT:g,LITERAL:i,NULL:h,NUMBER:d,STRING:e},config:{keywords:{'null':{type:'literal',is:h,value:null},'false':{type:'literal',is:a,value:!1},'true':{type:'literal',is:a,value:!0}},operators:{'+':'plus','-':'minus','*':'multiply','/':'divide','!':'not',',':'comma',':':'colon','[':'arrayOpen',']':'arrayClose','{':'curlyOpen','}':'curlyClose','(':'parenOpen',')':'parenClose'},patterns:null},error:null,index:-1,constructor:function(a){this.operators={};this.patterns=[];this.initConfig(a)},next:function(){var a=this.peek();this.head=undefined;return a},peek:function(){var a=this,d=a.error,b=a.head;if(d){return d}if(b===undefined){a.head=b=a.advance()}return b},release:function(){this.reset();if(b.length<c.flyPoolSize){b.push(this)}},reset:function(b,e,d){var a=this;a.error=null;a.head=undefined;a.index=-1;a.text=b||null;a.pos=e||0;a.end=b&&d==null?b.length:d;return a},privates:{digitRe:/[0-9]/,identFirstRe:/[a-z_$]/i,identRe:/[0-9a-z_$]/i,spaceRe:/[ \t]/,end:0,head:undefined,pos:0,text:null,applyOperators:function(i){var j=this.operators,a,f,g,e,h,d,b;for(b in i){a=j;d=i[b];h=b.length;for(e=0;e<h;++e){f=b.charAt(e);a=a[f]||(a[f]={})}if(d){a.token=g={type:'operator',name:d,value:b,is:{operator:!0}};g.is[d]=!0}else {a.token=null}}},applyPatterns:function(e){var g=this.patterns,a,d,b,f;for(b in e){a=e[b];d=a.extract;f=a.re;delete a.extract;delete a.re;g.push({name:b,re:f,extract:d,token:a})}},advance:function(){var a=this,d=a.spaceRe,f=a.text,e=a.end,b;while(a.pos<e){b=f.charAt(a.pos);if(d.test(b)){++a.pos;continue}a.index=a.pos;return a.parse(b)}return null},parse:function(d){var a=this,i=a.digitRe,j=a.text,k=a.end,h=a.patterns,g,e,f,b;if(d==='.'&&a.pos+1<k){if(i.test(j.charAt(a.pos+1))){b=a.parseNumber()}}if(!b){for(g=0;g<h.length;++g){f=h[g];f.re.lastIndex=a.pos;e=f.re.exec(j);if(e&&e.index===a.pos){b=Ext.apply({value:f.extract?f.extract(e):e[0]},f.token);a.pos+=e[0].length;break}}}if(!b&&a.operators[d]){b=a.parseOperator(d)}if(!b){if(d==='"'||d==="'"){b=a.parseString()}else {if(i.test(d)){b=a.parseNumber()}else {if(a.identFirstRe.test(d)){b=a.parseIdent()}else {b=a.syntaxError('Unexpected character')}}}}return b},parseIdent:function(){var a=this,l=a.identRe,h=a.getKeywords(),k=!a.operators['.'],j=a.text,i=a.pos,b=i,m=a.end,f=0,d,e;while(b<m){d=j.charAt(b);if(k&&d==='.'){if(f==='.'){return a.syntaxError(b,'Unexpected dot operator')}++b}else {if(l.test(d)){++b}else {break}}f=d}if(f==='.'){return a.syntaxError(b-1,'Unexpected dot operator')}e=j.substring(i,a.pos=b);return h&&h[e]||{type:'ident',is:g,value:e}},parseNumber:function(){var a=this,j=a.digitRe,h=a.text,g=a.pos,k=a.end,b,f,i,e;while(a.pos<k){b=h.charAt(a.pos);if(b==='-'||b==='+'){if(a.pos!==g){break}++a.pos}else {if(b==='.'){if(f){break}f=!0;++a.pos}else {if(b==='e'||b==='E'){if(i){break}f=i=!0;b=h.charAt(++a.pos);if(b==='-'||b==='+'){++a.pos}}else {if(j.test(b)){++a.pos}else {break}}}}}e={type:'literal',is:d,value:+h.substring(g,a.pos)};if(!isFinite(e.value)){e=a.syntaxError(g,'Invalid number')}return e},parseOperator:function(g){var a=this,b=a.operators,j=a.text,i=a.end,d=a.pos,e,h,f;while(b[g]){b=b[g];f=b.token;++d;if(f){e=f;h=d}if(d<i){g=j.charAt(d)}else {break}}if(e){a.pos=h}return e},parseString:function(){var b=this,f=b.text,a=b.pos,k=a,h=b.end,j='',d,g,i;i=f.charAt(a++);while(a<h){d=f.charAt(a++);if(d===i){g=!0;break}if(d==='\\'&&a<h){d=f.charAt(a++)}j+=d}b.pos=a;if(!g){return b.syntaxError(k,'Unterminated string')}return {type:'literal',is:e,value:j}},syntaxError:function(a,d){if(typeof a==='string'){d=a;a=this.pos}var e=a==null?'':' (at index '+a+')',b=new Error(d+e);b.type='error';b.is=f;if(e){b.at=a}return this.error=b}}}});Ext.define('Ext.parse.Symbol',{priority:0,constructor:function(d,a){var b=this,c=b.defaultProperty;if(a&&typeof a==='object'){Ext.apply(b,a)}else {if(a!==undefined&&c){b[c]=a}}b.id=d},led:function(){this.parser.syntaxError(this.at,'Missing operator')},nud:function(){this.parser.syntaxError(this.at,'Undefined')},update:function(a){if(a&&typeof a==='object'){var b=this,c=a.priority,d=a.led,e=a.nud;if(b.priority<=c){b.priority=c}if(d){b.led=d}if(e){b.nud=e}}}});Ext.define('Ext.parse.symbol.Constant',{extend:Ext.parse.Symbol,arity:'literal',isLiteral:!0,defaultProperty:'value',constructor:function(b,a){this.callParent([b,a]);this._value=this.value},nud:function(){var a=this;a.value=a._value;a.arity='literal';a.isLiteral=!0;return a}});Ext.define('Ext.parse.symbol.Infix',{extend:Ext.parse.Symbol,arity:'binary',isBinary:!0,defaultProperty:'priority',led:function(b){var a=this;a.lhs=b;a.rhs=a.parser.parseExpression(a.priority);a.arity='binary';a.isBinary=!0;return a}});Ext.define('Ext.parse.symbol.InfixRight',{extend:Ext.parse.symbol.Infix,led:function(b){var a=this;a.lhs=b;a.rhs=a.parser.parseExpression(a.priority-1);a.arity='binary';a.isBinary=!0;return a}});Ext.define('Ext.parse.symbol.Paren',{extend:Ext.parse.Symbol,arity:'binary',isBinary:!0,priority:80,led:function(d){var b=this,e=[],c=b.parser,a=d.id,f=d.arity;if(a!=='.'&&a!=='['){if((f!=='unary'||a!=='function')&&f!=='ident'&&a!=='('&&a!=='&&'&&a!=='||'&&a!=='?'){c.syntaxError(d.at,'Expected a variable name.')}}b.arity='invoke';b.isInvoke=!0;b.operand=d;b.args=e;while(c.token.id!==')'){if(e.length){c.advance(',')}e.push(c.parseExpression())}c.advance(')');return b},nud:function(){var a=this.parser,b=a.parseExpression();a.advance(')');return b}});Ext.define('Ext.parse.symbol.Prefix',{extend:Ext.parse.Symbol,arity:'unary',isUnary:!0,priority:70,nud:function(){var a=this;a.operand=a.parser.parseExpression(a.priority);a.arity='unary';a.isUnary=!0;return a}});Ext.define('Ext.parse.Parser',function(){var a=function(){return this};return {extend:Ext.util.Fly,isParser:!0,config:{constants:{'null':null,'false':!1,'true':!0},infix:{'===':40,'!==':40,'==':40,'!=':40,'<':40,'<=':40,'>':40,'>=':40,'+':50,'-':50,'*':60,'/':60},infixRight:{'&&':30,'||':30},prefix:{'!':0,'-':0,'+':0},symbols:{':':0,',':0,')':0,'[':0,']':0,'{':0,'}':0,'(end)':0,'(ident)':{arity:'ident',isIdent:!0,nud:a},'(literal)':{arity:'literal',isLiteral:!0,nud:a},'(':{xclass:'Ext.parse.symbol.Paren'}},tokenizer:{keywords:null}},token:null,constructor:function(a){this.symbols={};this.initConfig(a)},advance:function(i){var b=this,g=b.tokenizer,c=g.peek(),d=b.symbols,j=g.index,f,h,a,e;if(b.error){throw b.error}if(i){b.expect(i)}if(!c){return b.token=d['(end)']}g.next();f=c.is;e=c.value;if(f.ident){a=d[e]||d['(ident)']}else {if(f.operator){if(!(a=d[e])){b.syntaxError(c.at,'Unknown operator "'+e+'"')}h=c.name}else {if(f.literal){a=d['(literal)']}else {b.syntaxError(c.at,'Unexpected token')}}}b.token=a=Ext.Object.chain(a);a.at=j;a.is=f;a.value=e;if(!a.arity){a.arity=c.type}if(h){a.name=h}return a},expect:function(a){var b=this.token;if(a!==b.id){this.syntaxError(b.at,'Expected "'+a+'"')}return this},parseExpression:function(c){var b=this,d=b.token,a;c=c||0;b.advance();a=d.nud();while(c<(d=b.token).priority){b.advance();a=d.led(a)}return a},reset:function(b,d,c){var a=this;a.error=a.token=null;a.tokenizer.reset(b,d,c);a.advance();return a},syntaxError:function(a,c){if(typeof a==='string'){c=a;a=this.pos}var d=a==null?'':' (at index '+a+')',b=new Error(c+d);b.type='error';if(d){b.at=a}throw this.error=b},privates:{error:null,addSymbol:function(g,a,d,c){var h=this.symbols,b=h[g],f,i,e;if(b){if(typeof a==='object'){f=a}else {if(c&&d){c=Ext.Array.from(c);i=c.length;f={};for(e=0;e<i;e++){f[c[e]]=d.prototype[c[e]]}}else {return b}}b.update(f)}else {if(a&&a.xclass){d=Ext.ClassManager.get(a.xclass)}else {d=d||Ext.parse.Symbol}h[g]=b=new d(g,a);b.parser=this}return b},addSymbols:function(b,d,c){var a;for(a in b){this.addSymbol(a,b[a],d,c)}},applyConstants:function(a){this.addSymbols(a,Ext.parse.symbol.Constant,'nud')},applyInfix:function(a){this.addSymbols(a,Ext.parse.symbol.Infix,'led')},applyInfixRight:function(a){this.addSymbols(a,Ext.parse.symbol.InfixRight,'led')},applyPrefix:function(a){this.addSymbols(a,Ext.parse.symbol.Prefix,'nud')},applySymbols:function(a){this.addSymbols(a)},applyTokenizer:function(a){var b=a;if(a&&!a.isTokenizer){b=new Ext.parse.Tokenizer(a)}this.tokenizer=b}}}});Ext.define('Ext.app.bind.Parser',{extend:Ext.parse.Parser,infix:{':':{priority:70,led:function(b){var a=this;a.arity='formatter';a.operand=b;a.fmt=a.parser.parseFmt();return a}},'?':{priority:20,led:function(e){var a=this,b=a.parser,c=b.symbols[':'],d;a.condition=e;d=c.priority;c.priority=0;a.tv=b.parseExpression(0);a.parser.advance(':');c.priority=d;a.fv=b.parseExpression(0);a.arity='ternary';return a}}},symbols:{'(':{nud:function(){var a=this.parser,b=a.symbols[':'],d,c;c=b.priority;b.priority=70;d=a.parseExpression();a.advance(')');b.priority=c;return d}}},prefix:{'@':0},tokenizer:{operators:{'@':'at','?':'qmark','===':'feq','!==':'fneq','==':'eq','!=':'neq','<':'lt','<=':'lte','>':'gt','>=':'gte','&&':'and','||':'or'}},compileExpression:function(d,c){var a=this,e,b;a.tokens=d;a.tokensMap=c;b=a.parseSlot(a.parseExpression(),e);a.tokens=a.tokensMap=null;return b},compileFormat:function(){var a=this,b;b=a.parseSlot({arity:'formatter',fmt:a.parseFmt(),operand:{arity:'ident',value:'dummy'}});a.expect('(end)');return b},privates:{useEval:Ext.isGecko,escapeRe:/(["'\\])/g,parseFmt:function(){var b=this,c=[],d=b.symbols[':'].priority,a;do{if(c.length){b.advance()}a=b.parseExpression(d);if(a.isIdent||a.isInvoke){c.push(a)}else {b.syntaxError(a.at,'Expected formatter name')}}while(b.token.id===':');return c},parseSlot:function(j,k){var a=this,e=[],b=[],h=a.tokens||[],i,c,d,g,f;a.definitions=e;a.body=b;b.push('return '+a.compile(j)+';');g=h.length;c='var fm = Ext.util.Format,\nme,';f='var a = Ext.Array.from(values);\nme = scope;\n';if(h.length){for(d=0;d<g;d++){c+='v'+d+(d===g-1?';':',');f+='v'+d+' = a['+d+']; '}}else {c+='v0;';f+='v0 = a[0];'}e=Ext.Array.insert(e,0,[c]);b=Ext.Array.insert(b,0,[f]);b=b.join('\n');e.push((a.useEval?'$=':'return')+' function (values, scope) {',b,'}');c=e.join('\n');i=a.useEval?a.evalFn(c):(new Function('Ext',c))(Ext);a.definitions=a.body=null;return i},compile:function(a){var b=this,c;switch(a.arity){case 'ident':return b.addToken(a.value);case 'literal':c=a.value;return typeof c==='string'?'"'+String(c).replace(b.escapeRe,'\\$1')+'"':c;case 'unary':return b.compileUnary(a);case 'binary':return b.compileBinary(a);case 'ternary':return b.compileTernary(a);case 'formatter':return b.compileFormatter(a);}return this.syntaxError(a.at,'Compile error! Unknown symbol')},compileUnary:function(b){var a=b.value,c=b.operand;if(a==='!'||a==='-'||a==='+'){return a+'('+this.compile(c)+')'}else {if(a==='@'){if(!c.isIdent){return this.syntaxError(b.at,'Compile error! Unexpected symbol')}return c.value}}return ''},compileBinary:function(a){return '('+this.compile(a.lhs)+' '+a.value+' '+this.compile(a.rhs)+')'},compileTernary:function(a){return '('+this.compile(a.condition)+' ? '+this.compile(a.tv)+' : '+this.compile(a.fv)+')'},compileFormatter:function(e){var c=this,b=e.fmt,f=b.length,a=['var ret;'],d;if(b.length){a.push('ret = '+c.compileFormatFn(b[0],c.compile(e.operand))+';');for(d=1;d<f;d++){a.push('ret = '+c.compileFormatFn(b[d],'ret')+';')}}a.push('return ret;');return c.addFn(a.join('\n'))},compileFormatFn:function(b,g){var a,d=[],e='',f,c;if(b.isIdent){a=b.value}else {if(b.isInvoke){a=b.operand.value;d=b.args}}if(a.substring(0,5)==='this.'){a='me.'+a.substring(5)}else {if(!(a in Ext.util.Format)){return this.syntaxError(b.at,'Compile error! Invalid format specified "'+a+'"')}a='fm.'+a}e+=g;f=d.length;for(c=0;c<f;c++){e+=', '+this.compile(d[c])}return a+'('+e+')'},addFn:function(c){var a=this.definitions,b='f'+a.length;a.push('function '+b+'() {',c,'}');return b+'()'},evalFn:function($){eval($);return $},addToken:function(b){var a=this.tokensMap,c=this.tokens,d=0;if(a&&c){if(b in a){d=a[b]}else {a[b]=d=c.length;c.push(b)}}return 'v'+d}}});Ext.define('Ext.app.bind.Template',{escapes:!1,buffer:null,slots:null,tokens:null,constructor:function(d){var b=this,c=b._initters,a;b.text=d;for(a in c){b[a]=c[a]}},_initters:{apply:function(a,b){return this.parse().apply(a,b)},getTokens:function(){return this.parse().getTokens()}},apply:function(g,h){var d=this,e=d.slots,c=d.buffer,f=e.length,a,b;for(a=0;a<f;++a){b=e[a];if(b){c[a]=b(g,h)}}if(b&&d.single){return c[0]}return c.join('')},getText:function(){return this.buffer.join('')},getTokens:function(){return this.tokens},isStatic:function(){var a=this.getTokens(),b=this.slots;return a.length===0&&b.length===0},privates:{literalChar:'~',escapeChar:'\\',parse:function(){var a=this,e=a.text,i=Ext.app.bind.Parser.fly(),h=a.buffer=[],p=a.slots=[],o=e.length,f=0,n=a.escapes,b='',c=0,q=a.escapeChar,m=a.literalChar,g,j,d,k,l;for(l in a._initters){delete a[l]}a.tokens=[];a.tokensMap={};while(c<o){d=e[c];j=g;g=n&&d===q;if(g){d=e[c+1];++c}else {if(d===m&&k===m&&!j){b=b.slice(0,-1);b+=e.substring(c+1);break}else {if(d==='{'){if(b){h[f++]=b;b=''}i.reset(e,c+1);c=a.parseExpression(i,f);++f;continue}}}b+=d;++c;k=d}if(b){h[f]=b}i.release();a.single=h.length===0&&p.length===1;return a},parseExpression:function(a,c){var b;this.slots[c]=a.compileExpression(this.tokens,this.tokensMap);b=a.token.at+1;a.expect('}');return b}}});Ext.define('Ext.app.bind.TemplateBinding',{extend:Ext.app.bind.BaseBinding,isTemplateBinding:!0,lastValue:undefined,value:undefined,constructor:function(f,d,e,h,g){var a=this,b=new Ext.app.bind.Template(f),c=b.getTokens();a.callParent([d,e,h,g]);a.tpl=b;a.tokens=c;c.$literal=!0;if(!b.isStatic()){a.multiBinding=new Ext.app.bind.Multi(c,d,a.onBindData,a)}else {a.isStatic=!0;a.onData(b.getText())}},destroy:function(){var a=this;Ext.destroy(a.multiBinding);a.tpl=a.multiBinding=null;a.callParent()},getFullName:function(){var a=this.multiBinding;return this.fullName||(this.fullName='$'+(a?a.getFullName():this.callParent()))},getRawValue:function(){return this.value},getTemplateScope:function(){return null},isAvailable:function(){var a=this.multiBinding;return a?a.isAvailable():!1},isDescendantOf:function(){return !1},isLoading:function(){var a=this.multiBinding;return a?a.isLoading():!1},onBindData:function(a){this.onData(this.tpl.apply(a,this.getTemplateScope()))},onData:function(c){var a=this,b=a.value;if(b!==(a.value=c)){a.lastValue=b;a.schedule()}},react:function(){this.notify(this.value)},refresh:function(){var a=this.multiBinding;if(a){a.refresh()}},privates:{sort:function(){var a=this.multiBinding;if(a){this.scheduler.sortItem(a)}}}});Ext.define('Ext.data.ChainedStore',{extend:Ext.data.AbstractStore,alias:'store.chained',mixins:[Ext.data.LocalStore],isChainedStore:!0,config:{source:null,remoteFilter:!1,remoteSort:!1},syncSourceGrouping:!1,remove:function(){var a=this.getSource();return a.remove.apply(a,arguments)},removeAll:function(){var a=this.getSource();return a.removeAll()},getData:function(){var b=this,a=b.data;if(!a){b.data=a=b.constructDataCollection()}return a},getTotalCount:function(){return this.getCount()},getSession:function(){return this.getSourceValue('getSession',null)},applySource:function(a){if(a){a=Ext.data.StoreManager.lookup(a)}return a},updateSource:function(b,c){var a=this,d;if(c&&!c.destroyed){c.removeObserver(a)}if(b){d=a.getData();d.setSource(b.getData());if(a.syncSourceGrouping){a.setGrouper(b.getGrouper())}if(!a.isInitializing){a.fireEvent('refresh',a);a.fireEvent('datachanged',a)}b.addObserver(a)}},getModel:function(){return this.getSourceValue('getModel',null)},getProxy:function(){return null},onCollectionAdd:function(e,b){var a=this,d=b.items,c=!b.next;if(a.ignoreCollectionAdd){return}if(a.activeRanges){a.syncActiveRanges()}a.fireEvent('add',a,d,b.at);if(c){a.fireEvent('datachanged',a)}},onCollectionItemChange:function(f,a){var b=this,d=a.item,c=a.modified||null,e=a.meta;if(b.activeRanges&&a.newIndex!==a.oldIndex){b.syncActiveRanges()}b.onUpdate(d,e,c,a);b.fireEvent('update',b,d,e,c,a);b.fireEvent('datachanged',b)},onCollectionUpdateKey:function(b,a){this.fireEvent('idchanged',this,a.item,a.oldKey,a.newKey)},onUpdate:Ext.emptyFn,lastCollectionRefesh:null,onCollectionRefresh:function(c){var a=this,b=c.generation;if(!a.isConfiguring&&a.lastCollectionRefesh!==b){a.lastCollectionRefesh=b;a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}},onCollectionRemove:function(e,b){var a=this,d=b.items,c=!b.next;if(a.ignoreCollectionRemove){return}a.fireEvent('remove',a,d,b.at,!1);if(c){a.fireEvent('datachanged',a)}},onSourceBeforeLoad:function(b,a){this.fireEvent('beforeload',this,a);this.callObservers('BeforeLoad',[a])},onSourceAfterLoad:function(d,c,a,b){this.fireEvent('load',this,c,a,b);this.callObservers('AfterLoad',[c,a,b])},onFilterEndUpdate:function(){var a=this;if(a.getData().generation===a.lastCollectionRefesh&&!a.getRemoteFilter()){a.suppressNextFilter=!0}a.callParent(arguments);a.callObservers('Filter')},onSourceBeforePopulate:function(){this.ignoreCollectionAdd=!0;this.callObservers('BeforePopulate')},onSourceAfterPopulate:function(){var a=this;a.ignoreCollectionAdd=!1;a.fireEvent('datachanged',a);a.fireEvent('refresh',a);this.callObservers('AfterPopulate')},onSourceBeforeClear:function(){this.ignoreCollectionRemove=!0;this.callObservers('BeforeClear')},onSourceAfterClear:function(){this.ignoreCollectionRemove=!1;this.callObservers('AfterClear')},onSourceBeforeRemoveAll:function(){this.ignoreCollectionRemove=!0;this.callObservers('BeforeRemoveAll')},onSourceAfterRemoveAll:function(c,b){var a=this;a.ignoreCollectionRemove=!1;if(!b){a.fireEvent('clear',a);a.fireEvent('datachanged',a)}this.callObservers('AfterRemoveAll',[b])},onSourceFilter:function(){var a=this,b=a.getData().generation;if(a.lastCollectionRefesh!==b){a.lastCollectionRefesh=b;a.fireEvent('refresh',a);a.fireEvent('datachanged',a)}},onSourceGrouperChange:function(b,a){if(this.syncSourceGrouping){this.setGrouper(a)}},hasPendingLoad:function(){return this.getSourceValue('hasPendingLoad',!1)},isLoaded:function(){return this.getSourceValue('isLoaded',!1)},isLoading:function(){return this.getSourceValue('isLoading',!1)},doDestroy:function(){var a=this;a.observers=null;a.setSource(null);a.getData().destroy(!0);a.data=null;a.callParent()},privates:{getSourceValue:function(d,c){var a=this.getSource(),b=c;if(a&&!a.destroyed){b=a[d]()}return b},isMoving:function(){var a=this.getSource();return a.isMoving?a.isMoving.apply(a,arguments):!1},loadsSynchronously:function(){return this.getSource().loadsSynchronously()}}});Ext.define('Ext.app.ViewModel',{mixins:[Ext.mixin.Factoryable,Ext.mixin.Identifiable],alias:'viewmodel.default',isViewModel:!0,factoryConfig:{name:'viewModel'},collectTimeout:100,expressionRe:/^(?:\{(?:(\d+)|([a-z_][\w.]*))\})$/i,statics:{escape:function(a){var b=a,c;if(typeof a==='string'){b='~~'+a}else {if(a&&a.constructor===Object){b={};for(c in a){b[c]=this.escape(a[c])}}}return b}},$configStrict:!1,config:{data:!0,formulas:{$value:null,merge:function(c,a,d,b){return this.mergeNew(c,a,d,b)}},links:null,parent:null,root:!0,scheduler:null,schema:'default',session:null,stores:null,view:null},constructor:function(a){this.bindings={};this.initConfig(a)},destroy:function(){var a=this,d=a._scheduler,g=a.storeInfo,j=a.getParent(),k=a.collectTask,f=a.children,i=a.bindings,b,c,e,h;a.destroying=!0;if(k){k.cancel();a.collectTask=null}if(f){for(b in f){f[b].destroy()}}if(g){for(b in g){c=g[b];h=c.$binding;e=c.autoDestroy;if(e||!c.$wasInstance&&e!==!1){c.destroy()}Ext.destroy(h)}}if(j){j.unregisterChild(a)}a.getRoot().destroy();for(b in i){i[b].destroy()}if(d&&d.$owner===a){d.$owner=null;d.destroy()}a.children=a.storeInfo=a._session=a._view=a._scheduler=a.bindings=a._root=a._parent=a.formulaFn=a.$formulaData=null;a.callParent()},bind:function(a,f,e,c){var d=this,g=!0,b;e=e||d;if(!c&&a.bindTo!==undefined&&!Ext.isString(a)){c=a;a=c.bindTo}if(!Ext.isString(a)){b=new Ext.app.bind.Multi(a,d,f,e,c)}else {if(d.expressionRe.test(a)){a=a.substring(1,a.length-1);b=d.bindExpression(a,f,e,c);g=!1}else {b=new Ext.app.bind.TemplateBinding(a,d,f,e,c)}}if(g){d.bindings[b.id]=b}return b},getSession:function(){var b=this,a=b._session,c;if(!a&&(c=b.getParent())){b.setSession(a=c.getSession())}return a||null},getStore:function(c){var a=this.storeInfo,b;if(a){b=a[c]}return b||null},linkTo:function(i,a){var e=this,b,d,h,f,g,c;if(a.isModel){a={type:a.entityName,id:a.id}}f=a.type||a.reference;d=a.create;if(f){h=a.id;if(d){h=undefined}c=e.getRecord(f,h);if(Ext.isObject(d)){c.set(d);c.commit();c.phantom=!0}b=e.getRoot().createStubChild(i);b.set(c)}else {b=e.getStub(i);if(!b.isLinkStub){g=new Ext.app.bind.LinkStub(e,b.name);b.graft(g);b=g}b.link(a)}},notify:function(){var a=this.getScheduler();if(!a.firing){a.notify()}},get:function(a){return this.getStub(a).getValue()},set:function(a,b){var d=this,e,c;d.getData();if(b===undefined&&a&&a.constructor===Object){c=d.getRoot();b=a}else {if(a&&a.indexOf('.')<0){e={};e[a]=b;b=e;c=d.getRoot()}else {c=d.getStub(a)}}c.set(b)},privates:{registerChild:function(b){var a=this.children;if(!a){this.children=a={}}a[b.getId()]=b},unregisterChild:function(b){var a=this.children;if(!this.destroying&&a){delete a[b.getId()]}},getRecord:function(d,e){var c=this.getSession(),b=d,f=e!==undefined,a;if(c){if(f){a=c.getRecord(d,e)}else {a=c.createRecord(d)}}else {if(!b.$isClass){b=this.getSchema().getEntity(b)}if(f){a=b.createWithId(e);a.load()}else {a=new b()}}return a},bindExpression:function(a,b,d,c){var e=this.getStub(a);return e.bind(b,d,c)},applyScheduler:function(a){if(a&&!a.isInstance){if(a===!0){a={}}if(!('preSort' in a)){a=Ext.apply({preSort:'kind,-depth'},a)}a=new Ext.util.Scheduler(a);a.$owner=this}return a},getScheduler:function(){var b=this,a=b._scheduler,c;if(!a){if(!(c=b.getParent())){a=new Ext.util.Scheduler({preSort:'kind,-depth'});a.$owner=b}else {a=c.getScheduler()}b.setScheduler(a)}return a},getStub:function(a){var b=this.getRoot();return a?b.getChild(a):b},collect:function(){var a=this,c=a.getParent(),b=a.collectTask;if(c){c.collect();return}if(!b){b=a.collectTask=new Ext.util.DelayedTask(a.doCollect,a)}if(a.collectTimeout===0){a.doCollect()}else {b.delay(a.collectTimeout)}},doCollect:function(){var a=this.children,b;if(a){for(b in a){a[b].doCollect()}}this.getRoot().collect()},invalidateChildLinks:function(d,c){var a=this.children,b;if(a){for(b in a){a[b].getRoot().invalidateChildLink(d,c)}}},onBindDestroy:function(c,d){var a=this,b;if(a.destroying){return}if(!d){delete a.bindings[c.id]}b=a.getParent();if(b){b.onBindDestroy(c,!0)}else {a.collect()}},applyData:function(b,e){var a=this,d,c;a.getSession();if(!e){c=a.getParent();a.linkData=d=c?Ext.Object.chain(c.getData()):{};a.data=a._data=Ext.Object.chain(d)}if(b&&b.constructor===Object){a.getRoot().set(b,!0)}},applyParent:function(a){if(a){a.registerChild(this)}return a},applyStores:function(f){var b=this,h=b.getRoot(),d,a,c,g,e;b.storeInfo={};b.listenerScopeFn=function(){return b.getView().getInheritedConfig('defaultListenerScope')};for(d in f){a=f[d];if(a.isStore){a.$wasInstance=!0;b.setupStore(a,d);continue}else {if(Ext.isString(a)){a={source:a}}else {a=Ext.apply({},a)}}e=a.listeners;delete a.listeners;c=b.bind(a,b.onStoreBind,b,{trackStatics:!0});if(c.isStatic()){c.destroy();b.createStore(d,a,e)}else {c.$storeKey=d;c.$listeners=e;g=h.createStubChild(d);g.setStore(c)}}},onStoreBind:function(a,g,c){var f=this.storeInfo,e=c.$storeKey,d=f[e],b;if(!d){this.createStore(e,a,c.$listeners,c)}else {a=Ext.merge({},c.pruneStaticKeys());b=a.proxy;delete a.type;delete a.model;delete a.fields;delete a.proxy;delete a.listeners;if(b){delete b.reader;delete b.writer;d.getProxy().setConfig(b)}d.setConfig(a)}},createStore:function(f,a,c,d){var e=this.getSession(),b;a=Ext.apply({},a);if(a.session){a.session=e}if(a.source){a.type=a.type||'chained'}a.listeners=c;a.resolveListenerScope=this.listenerScopeFn;b=Ext.Factory.store(a);b.$binding=d;this.setupStore(b,f)},setupStore:function(b,c){var a=this,d={};a.getData();b.resolveListenerScope=a.listenerScopeFn;a.storeInfo[c]=b;d[c]=b;a.setData(d)},applyFormulas:function(b){var c=this,e=c.getRoot(),a,d;c.getData();for(a in b){e.createStubChild(a);d=c.getStub(a);d.setFormula(b[a])}return b},applyLinks:function(a){var b;for(b in a){this.linkTo(b,a[b])}return a},applySchema:function(a){return Ext.data.schema.Schema.get(a)},applyRoot:function(){var b=new Ext.app.bind.RootStub(this),a=this.getParent();if(a){b.depth=a.getRoot().depth-1000}return b},getFormulaFn:function(c){var a=this,b=a.formulaFn;if(!b){b=a.formulaFn=function(b){return a.$formulaData[b]}}a.$formulaData=c;return b}}});Ext.define('Ext.app.domain.Controller',{extend:Ext.app.EventDomain,singleton:!0,type:'controller',prefix:'controller.',idMatchRe:/^#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.app.BaseController)},match:function(c,a){var b=!1,d=c.alias;if(a==='*'){b=!0}else {if(a==='#'){b=!!c.isApplication}else {if(this.idMatchRe.test(a)){b=c.getId()===a.substring(1)}else {if(d){b=Ext.Array.indexOf(d,this.prefix+a)>-1}}}}return b}});Ext.define('Ext.data.JsonP',{singleton:!0,requestCount:0,requests:{},timeout:30000,disableCaching:!0,disableCachingParam:'_dc',callbackKey:'callback',request:function(a){a=Ext.apply({},a);var b=this,l=Ext.isDefined(a.disableCaching)?a.disableCaching:b.disableCaching,h=a.disableCachingParam||b.disableCachingParam,f=++b.requestCount,e=a.callbackName||'callback'+f,g=a.callbackKey||b.callbackKey,i=Ext.isDefined(a.timeout)?a.timeout:b.timeout,d=Ext.apply({},a.params),k=a.url,m=Ext.name,c,j;if(l&&!d[h]){d[h]=Ext.Date.now()}a.params=d;d[g]=m+'.data.JsonP.'+e;j=b.createScript(k,d,a);b.requests[f]=c={url:k,params:d,script:j,id:f,scope:a.scope,success:a.success,failure:a.failure,callback:a.callback,callbackKey:g,callbackName:e};if(i>0){c.timeout=Ext.defer(b.handleTimeout,i,b,[c])}b.setupErrorHandling(c);b[e]=b.bindResponse(c);b.loadScript(c);return c},bindResponse:function(a){var b=this;return function(c){Ext.elevate(function(){b.handleResponse(c,a)})}},abort:function(a){var d=this,b=d.requests,c;if(a){if(!a.id){a=b[a]}d.handleAbort(a)}else {for(c in b){if(b.hasOwnProperty(c)){d.abort(b[c])}}}},setupErrorHandling:function(a){a.script.onerror=Ext.bind(this.handleError,this,[a])},handleAbort:function(a){a.errorType='abort';this.handleResponse(null,a)},handleError:function(a){a.errorType='error';this.handleResponse(null,a)},cleanupErrorHandling:function(a){a.script.onerror=null},handleTimeout:function(a){a.errorType='timeout';this.handleResponse(null,a)},handleResponse:function(c,a){var b=!0;Ext.undefer(a.timeout);delete this[a.callbackName];delete this.requests[a.id];this.cleanupErrorHandling(a);Ext.fly(a.script).destroy();if(a.errorType){b=!1;Ext.callback(a.failure,a.scope,[a.errorType])}else {Ext.callback(a.success,a.scope,[c])}Ext.callback(a.callback,a.scope,[b,c,a.errorType])},createScript:function(c,b,d){var a=document.createElement('script');a.setAttribute('src',Ext.urlAppend(c,Ext.Object.toQueryString(b)));a.setAttribute('async',!0);a.setAttribute('type','text/javascript');return a},loadScript:function(a){Ext.getHead().appendChild(a.script)}});Ext.define('Ext.data.proxy.JsonP',{extend:Ext.data.proxy.Server,alternateClassName:'Ext.data.ScriptTagProxy',alias:['proxy.jsonp','proxy.scripttag'],config:{callbackKey:'callback',recordParam:'records',autoAppendParams:!0},doRequest:function(c){var b=this,a=b.buildRequest(c),d=a.getParams();a.setConfig({callbackKey:b.callbackKey,timeout:b.timeout,scope:b,disableCaching:!1,callback:b.createRequestCallback(a,c)});if(b.getAutoAppendParams()){a.setParams({})}a.setRawRequest(Ext.data.JsonP.request(a.getCurrentConfig()));a.setParams(d);b.lastRequest=a;return a},createRequestCallback:function(b,c){var a=this;return function(e,d,f){if(b===a.lastRequest){a.lastRequest=null}a.processResponse(e,c,b,d)}},setException:function(a,b){a.setException(a.getRequest().getRawRequest().errorType)},buildUrl:function(c){var d=this,i=d.callParent(arguments),g=c.getRecords(),e=d.getWriter(),a,b,h,f,j;if(e&&c.getOperation().allowWrite()){c=e.write(c)}a=c.getParams();b=a.filters;delete a.filters;if(b&&b.length){for(f=0;f<b.length;f++){h=b[f];j=h.getValue();if(j){a[h.getProperty()]=j}}}if(Ext.isArray(g)&&g.length>0&&(!e||!e.getEncode())){a[d.getRecordParam()]=d.encodeRecords(g)}if(d.getAutoAppendParams()){i=Ext.urlAppend(i,Ext.Object.toQueryString(a))}return i},abort:function(a){a=a||this.lastRequest;if(a){Ext.data.JsonP.abort(a.getRawRequest())}},encodeRecords:function(c){var b=[],a=0,d=c.length;for(;a<d;a++){b.push(Ext.encode(c[a].getData()))}return b}});Ext.define('Ext.data.NodeInterface',{statics:{decorate:function(f){var a=Ext.data.schema.Schema.lookupEntity(f),e=a.prototype,c,b,d;if(!a.prototype.isObservable){a.mixin(Ext.mixin.Observable.prototype.mixinId,Ext.mixin.Observable)}if(e.isNode){return}c=e.idProperty;b=a.getField(c);d=b.type;a.override(this.getPrototypeBody());a.addFields([{name:'parentId',type:d,defaultValue:null,allowNull:b.allowNull},{name:'index',type:'int',defaultValue:-1,persist:!1,convert:null},{name:'depth',type:'int',defaultValue:0,persist:!1,convert:null},{name:'expanded',type:'bool',defaultValue:!1,persist:!1,convert:null},{name:'expandable',type:'bool',defaultValue:!0,persist:!1,convert:null},{name:'checked',type:'auto',defaultValue:null,persist:!1,convert:null},{name:'leaf',type:'bool',defaultValue:!1},{name:'cls',type:'string',defaultValue:'',persist:!1,convert:null},{name:'iconCls',type:'string',defaultValue:'',persist:!1,convert:null},{name:'icon',type:'string',defaultValue:'',persist:!1,convert:null},{name:'glyph',type:'string',defaultValue:'',persist:!1,convert:null},{name:'root',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'isLast',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'isFirst',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'allowDrop',type:'boolean',defaultValue:!0,persist:!1,convert:null},{name:'allowDrag',type:'boolean',defaultValue:!0,persist:!1,convert:null},{name:'loaded',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'loading',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'href',type:'string',defaultValue:'',persist:!1,convert:null},{name:'hrefTarget',type:'string',defaultValue:'',persist:!1,convert:null},{name:'qtip',type:'string',defaultValue:'',persist:!1,convert:null},{name:'qtitle',type:'string',defaultValue:'',persist:!1,convert:null},{name:'qshowDelay',type:'int',defaultValue:0,persist:!1,convert:null},{name:'children',type:'auto',defaultValue:null,persist:!1,convert:null},{name:'visible',type:'boolean',defaultValue:!0,persist:!1},{name:'text',type:'string',persist:!1}])},getPrototypeBody:function(){var a={idchanged:!0,append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0,expand:!0,collapse:!0,beforeexpand:!0,beforecollapse:!0,sort:!0},b={silent:!0};return {isNode:!0,firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,constructor:function(){var a=this;a.mixins.observable.constructor.call(a);a.callParent(arguments);a.childNodes=[];return a},createNode:function(a){var b=this,j=b.childType,h,f,g,c,d,e,i=b.self;if(!a.isModel){if(j){i=b.schema.getEntity(j)}else {h=b.getTreeStore();f=h&&h.getProxy().getReader();g=b.getProxy();c=g?g.getReader():null;d=!f||c&&c.initialConfig.typeProperty?c:f;if(d){e=d.getTypeProperty();if(e){i=d.getChildType(b.schema,a,e)}}}a=new i(a)}if(!a.childNodes){a.firstChild=a.lastChild=a.parentNode=a.previousSibling=a.nextSibling=null;a.childNodes=[]}return a},isLeaf:function(){return this.get('leaf')===!0},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},updateInfo:function(b,c){var a=this,i=a.phantom,h,g,e,f,d;b={silent:!0,commit:b};if(c.depth!=null&&c.depth!==a.data.depth){g={depth:c.depth+1};e=a.childNodes;f=e.length;for(d=0;d<f;d++){e[d].updateInfo(b,g)}}h=a.set(c,b);a.phantom=i;return h},isLast:function(){return this.get('isLast')},isFirst:function(){return this.get('isFirst')},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var a=this;if(a.get('expandable')){return !(a.isLeaf()||a.isLoaded()&&!a.phantom&&!a.hasChildNodes())}return !1},triggerUIUpdate:function(){this.callJoined('afterEdit',[])},appendChild:function(b,h,m){var a=this,d=a.getTreeStore(),g=d&&d.bulkUpdate,l={isLast:!0,parentId:a.getId(),depth:(a.data.depth||0)+1},e,f,k,c,i,j,n;Ext.suspendLayouts();if(Ext.isArray(b)){n=b.length;i=new Array(n);a.callTreeStore('beginFill');for(j=0;j<n;j++){i[j]=a.appendChild(b[j],h,m)}a.callTreeStore('endFill',[i])}else {b=a.createNode(b);if(h!==!0&&a.fireBubbledEvent('beforeappend',[a,b])===!1){Ext.resumeLayouts(!0);return !1}c=a.childNodes.length;e=b.parentNode;if(e){if(h!==!0&&b.fireBubbledEvent('beforemove',[b,e,a,c])===!1){Ext.resumeLayouts(!0);return !1}if(e.removeChild(b,!1,h,e.getTreeStore()===d)===!1){Ext.resumeLayouts(!0);return !1}}if(d){d.beginUpdate()}c=a.childNodes.length;if(c===0){a.setFirstChild(b)}a.childNodes[c]=b;b.parentNode=a;b.nextSibling=null;a.setLastChild(b);f=a.childNodes[c-1];if(f){b.previousSibling=f;f.nextSibling=b;f.updateInfo(m,{isLast:!1});if(!g){f.triggerUIUpdate()}}else {b.previousSibling=null}l.isFirst=c===0;l.index=c;k=b.updateInfo(m,l);if(a.isLeaf()){a.set('leaf',!1)}if(!a.isLoaded()){if(g){a.data.loaded=!0}else {a.set('loaded',!0)}}else {if(a.childNodes.length===1&&!g){a.triggerUIUpdate()}}if(c&&a.childNodes[c-1].isExpanded()&&!g){a.childNodes[c-1].cascade(a.triggerUIUpdate)}if(d){d.registerNode(a,!g);if(g){d.registerNode(b)}}if(h!==!0){a.fireBubbledEvent('append',[a,b,c]);if(e){b.fireBubbledEvent('move',[b,e,a,c])}}a.callTreeStore('onNodeAppend',[b,c]);if(k){b.callJoined('afterEdit',[k])}i=b;if(d){d.endUpdate()}}Ext.resumeLayouts(!0);return i},getOwnerTree:function(){var a=this.getTreeStore();return a&&a.ownerTree},getTreeStore:function(){var a=this;while(a&&!a.treeStore){a=a.parentNode}return a&&a.treeStore},removeChild:function(a,n,i,f){var c=this,h=c.indexOf(a),g,m,d,e=c.getTreeStore(),l=e&&e.bulkUpdate,j,k=[];if(h===-1||i!==!0&&c.fireBubbledEvent('beforeremove',[c,a,!!f])===!1){return !1}Ext.suspendLayouts();if(e){e.beginUpdate()}Ext.Array.erase(c.childNodes,h,1);if(c.firstChild===a){c.setFirstChild(a.nextSibling)}if(c.lastChild===a){c.setLastChild(a.previousSibling)}d=a.previousSibling;if(d){a.previousSibling.nextSibling=a.nextSibling}if(a.nextSibling){a.nextSibling.previousSibling=a.previousSibling;if(h===0){a.nextSibling.updateInfo(!1,{isFirst:!0})}for(g=h,m=c.childNodes.length;g<m;g++){c.childNodes[g].updateInfo(!1,{index:g})}}else {if(d){d.updateInfo(!1,{isLast:!0});if(!l){if(d.isExpanded()){d.cascade(c.triggerUIUpdate)}else {d.triggerUIUpdate()}}}}if(!c.childNodes.length&&!l){c.triggerUIUpdate()}Ext.resumeLayouts(!0);if(i!==!0){j={parentNode:a.parentNode,previousSibling:a.previousSibling,nextSibling:a.nextSibling};c.callTreeStore('beforeNodeRemove',[[a],!!f,k]);a.previousSibling=a.nextSibling=a.parentNode=null;c.fireBubbledEvent('remove',[c,a,!!f,j]);c.callTreeStore('onNodeRemove',[[a],!!f,k])}if(n){a.erase(!0)}else {a.clear()}if(!f){a.set({parentId:null,lastParentId:c.getId()},b)}if(e){e.endUpdate()}return a},copy:function(g,a,f){var b=this,d,e=[g],h=b.childNodes?b.childNodes.length:0,c;if(a&&a.isSession){e.push(a)}else {if(arguments.length<3){f=a}}d=b.callParent(e);if(f){for(c=0;c<h;c++){d.appendChild(b.childNodes[c].copy(undefined,!0))}}return d},clear:function(c,b){var a=this;a.parentNode=a.previousSibling=a.nextSibling=null;if(c){a.firstChild=a.lastChild=a.childNodes=null}if(b){a.firstChild=a.lastChild=null;a.childNodes.length=0;if(a.data){a.data.children=null}}},drop:function(){var a=this,d=a.childNodes,f=a.parentNode,b=a.getTreeStore(),e,c,g;a.callParent();if(f){f.removeChild(a)}else {if(a.get('root')){b.setRoot(null)}}if(b){b.beginUpdate()}for(c=0,g=d?d.length:0;c<g;c++){e=d[c];e.clear();e.drop()}if(b){b.endUpdate()}},erase:function(e){var a=this,c=a.childNodes,f=c&&c.length,b,d;a.remove();a.clear(!0);a.callParent([e]);for(b=0;b<f;b++){d=c[b];d.parentNode=null;d.erase(e)}},insertBefore:function(b,e,i){var a=this,n=a.indexOf(e),f=b.parentNode,d=n,o,h,g,c=a.getTreeStore(),l=c&&c.bulkUpdate,k,m,j;if(!e){return a.appendChild(b)}if(b===e){return !1}b=a.createNode(b);if(i!==!0&&a.fireBubbledEvent('beforeinsert',[a,b,e])===!1){return !1}if(f===a&&a.indexOf(b)<n){d--}if(f){if(i!==!0&&b.fireBubbledEvent('beforemove',[b,f,a,n,e])===!1){return !1}if(f.removeChild(b,!1,i,f.getTreeStore()===c)===!1){return !1}}if(c){c.beginUpdate()}if(d===0){a.setFirstChild(b)}Ext.Array.splice(a.childNodes,d,0,b);b.parentNode=a;b.nextSibling=e;e.previousSibling=b;h=a.childNodes[d-1];if(h){b.previousSibling=h;h.nextSibling=b}else {b.previousSibling=null}k=b.updateInfo(!1,{parentId:a.getId(),index:d,isFirst:d===0,isLast:!1,depth:(a.data.depth||0)+1});for(g=d+1,o=a.childNodes.length;g<o;g++){m=a.childNodes[g];j=m.updateInfo(!1,{index:g});if(j){m.callJoined('afterEdit',[j])}}if(!a.isLoaded()){if(l){a.data.loaded=!0}else {a.set('loaded',!0)}}else {if(a.childNodes.length===1&&!l){a.triggerUIUpdate()}}if(c){c.registerNode(a,!l)}if(i!==!0){a.fireBubbledEvent('insert',[a,b,e]);if(f){b.fireBubbledEvent('move',[b,f,a,d,e])}}a.callTreeStore('onNodeInsert',[b,d]);if(k){b.callJoined('afterEdit',[k])}if(c){c.endUpdate()}return b},insertChild:function(c,b){var a=this.childNodes[c];if(a){return this.insertBefore(b,a)}else {return this.appendChild(b)}},isLastVisible:function(){var b=this,c=b.data.isLast,a=b.nextSibling;if(!c&&b.getTreeStore().isFiltered()){while(a){if(a.data.visible){return !1}a=a.nextSibling}return !0}return c},remove:function(c,d){var a=this,b=a.parentNode;if(b){b.removeChild(a,c,d)}else {if(c){a.erase(!0)}}return a},removeAll:function(j,i,f){var a=this,d=a.childNodes,h=d.length,c,b,e,g=[];if(!h){return a}if(!f){b=a.getTreeStore();if(b){b.beginUpdate();b.suspendEvent('remove');a.callTreeStore('beforeNodeRemove',[d,!1,g])}}for(e=0;e<h;++e){c=d[e];c.previousSibling=c.nextSibling=c.parentNode=null;a.fireBubbledEvent('remove',[a,c,!1]);if(j){c.erase(!0)}else {c.removeAll(!1,i,!0)}}if(!f&&b){b.resumeEvent('remove');a.callTreeStore('onNodeRemove',[d,!1,g]);b.endUpdate()}a.firstChild=a.lastChild=null;d.length=0;if(!f){a.triggerUIUpdate()}return a},getChildAt:function(a){return this.childNodes[a]},replaceChild:function(c,a,b){var d=a?a.nextSibling:null;this.removeChild(a,!1,b);this.insertBefore(c,d,b);return a},indexOf:function(a){return Ext.Array.indexOf(this.childNodes,a)},indexOfId:function(d){var b=this.childNodes,c=b.length,a=0;for(;a<c;++a){if(b[a].getId()===d){return a}}return -1},getPath:function(c,a){c=c||this.idProperty;a=a||'/';var d=[this.get(c)],b=this.parentNode;while(b){d.unshift(b.get(c));b=b.parentNode}return a+d.join(a)},getDepth:function(){return this.get('depth')},bubble:function(d,b,c){var a=this;while(a){if(d.apply(b||a,c||[a])===!1){break}a=a.parentNode}},cascade:function(a,g,h,f){var b=this,e=a,d,i,c;if(arguments.length===1&&!Ext.isFunction(a)){f=a.after;g=a.scope;h=a.args;e=a.before}if(!e||e.apply(g||b,h||[b])!==!1){d=b.childNodes;for(c=0,i=d.length;c<i;c++){d[c].cascade.call(d[c],e,g,h,f)}if(f){f.apply(g||b,h||[b])}}},cascadeBy:function(){return this.cascade.apply(this,arguments)},eachChild:function(f,d,e){var b=this.childNodes,c=b.length,a;for(a=0;a<c;a++){if(f.apply(d||this,e||[b[a]])===!1){break}}},findChild:function(a,b,c){return this.findChildBy(function(){return this.get(a)==b},null,c)},findChildBy:function(h,d,e){var g=this.childNodes,b,f,a,c;for(b=0,f=g.length;b<f;b++){a=g[b];if(h.call(d||a,a)===!0){return a}else {if(e){c=a.findChildBy(h,d,e);if(c!==null){return c}}}}return null},contains:function(a){return a.isAncestor(this)},isAncestor:function(b){var a=this.parentNode;while(a){if(a===b){return !0}a=a.parentNode}return !1},sort:function(e,i,h){var c=this,a=c.childNodes,g=a.length,f={isFirst:!0},b,d;if(g>0){if(!e){e=c.getTreeStore().getSortFn()}Ext.Array.sort(a,e);c.setFirstChild(a[0]);c.setLastChild(a[g-1]);for(b=0;b<g;b++){d=a[b];d.previousSibling=a[b-1];d.nextSibling=a[b+1];f.isLast=b===g-1;f.index=b;d.updateInfo(!1,f);f.isFirst=!1;if(i&&!d.isLeaf()){d.sort(e,!0,!0)}}if(h!==!0){c.fireBubbledEvent('sort',[c,a]);c.callTreeStore('onNodeSort',[a])}}},isExpanded:function(){return this.get('expanded')},isLoaded:function(){return this.get('loaded')},isBranchLoaded:function(){var a=!this.isLeaf()&&this.isLoaded();if(a){this.cascade(function(b){if(!b.isLeaf()){a=a||b.isBranchLoaded()}return a})}return a},isLoading:function(){return this.get('loading')},isRoot:function(){return !this.parentNode},isVisible:function(){var a=this.parentNode;while(a){if(!a.isExpanded()){return !1}a=a.parentNode}return !0},expand:function(e,c,d){var a=this,b,f;if(!a.isLeaf()){if(a.isLoading()){a.on('expand',function(){a.expand(e,c,d)},a,{single:!0})}else {if(!a.isExpanded()){if(a.fireBubbledEvent('beforeexpand',[a])!==!1){if(e){if(a.parentNode&&a.parentNode.isSynchronousRecursiveExpand){a.isSynchronousRecursiveExpand=!0}else {b=a.getTreeStore();if(b.getProxy().isSynchronous||a.isBranchLoaded()){a.isSynchronousRecursiveExpand=!0;b.suspendEvent('add','datachanged');f=!0}}}a.callTreeStore('onBeforeNodeExpand',[a.onChildNodesAvailable,a,[e,c,d]]);if(f){b.resumeEvent('add','datachanged');b.fireEvent('datachanged',b);b.fireEvent('refresh',b)}a.isSynchronousRecursiveExpand=!1}}else {if(e){a.expandChildren(!0,c,d)}else {Ext.callback(c,d||a,[a.childNodes])}}}}else {Ext.callback(c,d||a)}},onChildNodesAvailable:function(h,j,g,i){var b=this,e=b.getTreeStore(),f=e&&e.bulkUpdate,a,c,d;Ext.suspendLayouts();for(a=b.parentNode;a;a=a.parentNode){if(!a.isExpanded()){(c||(c=[])).unshift(a)}}if(f||!e.isVisible(b)){b.data.expanded=!0}else {b.set('expanded',!0)}if(c){for(d=1;d<c.length;d++){a=c[d];if(f||!e.isVisible(a)){a.data.expanded=!0}else {a.set('expanded',!0)}}c[0].expand();for(d=1;d<c.length;d++){a=c[d];a.fireBubbledEvent('expand',[a,a.childNodes])}}else {b.callTreeStore('onNodeExpand',[h,!1])}b.fireBubbledEvent('expand',[b,h]);if(j){b.expandChildren(!0,g,i)}else {Ext.callback(g,i||b,[b.childNodes])}Ext.resumeLayouts(!0)},expandChildren:function(l,d,i,b){var g=this,k,a,e,c,f,j,h;if(Ext.isBoolean(d)){k=d;d=i;i=b;b=k}if(b===undefined){h=g.getTreeStore();b=h&&h.singleExpand}e=g.childNodes;c=[];f=b?Math.min(e.length,1):e.length;for(a=0;a<f;++a){j=e[a];if(!j.isLeaf()){c[c.length]=j}}f=c.length;for(a=0;a<f;++a){c[a].expand(l)}if(d){Ext.callback(d,i||g,[g.childNodes])}},collapse:function(f,b,d){var a=this,j=a.isExpanded(),g=a.getTreeStore(),i=g&&g.bulkUpdate,h=a.childNodes.length,c,e;if(!a.isLeaf()&&(!j&&f||a.fireBubbledEvent('beforecollapse',[a])!==!1)){Ext.suspendLayouts();if(a.isExpanded()){if(f){e=function(){for(c=0;c<h;c++){a.childNodes[c].setCollapsed(!0)}};if(b){b=Ext.Function.createSequence(e,Ext.Function.bind(b,d,[a.childNodes]))}else {b=e}}else {if(b){b=Ext.Function.bind(b,d,[a.childNodes])}}if(i||!g.contains(a)){a.data.expanded=!1}else {a.set('expanded',!1)}a.callTreeStore('onNodeCollapse',[a.childNodes,b,d]);a.fireBubbledEvent('collapse',[a,a.childNodes]);b=null}else {if(f){for(c=0;c<h;c++){a.childNodes[c].setCollapsed(!0)}}}Ext.resumeLayouts(!0)}Ext.callback(b,d||a,[a.childNodes])},setCollapsed:function(c){var a=this,d=a.childNodes.length,b;if(!a.isLeaf()&&a.fireBubbledEvent('beforecollapse',[a])!==!1){a.data.expanded=!1;a.fireBubbledEvent('collapse',[a,a.childNodes]);if(c){for(b=0;b<d;b++){a.childNodes[b].setCollapsed(!0)}}}},collapseChildren:function(e,g,h){var i=this,f=i.childNodes,c=f.length,d=[],b,a;for(a=0;a<c;++a){b=f[a];if(!b.isLeaf()&&b.isLoaded()&&b.isExpanded()){d.push(b)}}c=d.length;if(c){for(a=0;a<c;++a){b=d[a];if(a===c-1){b.collapse(e,g,h)}else {b.collapse(e)}}}else {Ext.callback(g,h)}},fireEvent:function(a){return this.fireBubbledEvent(a,Ext.Array.slice(arguments,1))},fireBubbledEvent:function(c,f){var d,b,e;if(a[c]){for(b=this;d!==!1&&b;b=(e=b).parentNode){d=b.fireEventArgs.call(b,c,f)}if(d!==!1){b=e.getTreeStore();if(b&&b.hasListeners&&b.hasListeners[c='node'+c]){d=b.fireEventArgs(c,f)}}return d}else {return this.fireEventArgs.apply(this,arguments)}},serialize:function(g){var e=g||new Ext.data.writer.Json({writeAllFields:!0}),d=e.getRecordData(this),b=this.childNodes,f=b.length,c,a;if(f>0){d.children=c=[];for(a=0;a<f;a++){c.push(b[a].serialize(e))}}return d},callTreeStore:function(e,a){var c=this,b=c.getTreeStore(),d=b&&b[e];if(b&&d){a=a||[];if(a[0]!==c){a.unshift(c)}d.apply(b,a)}},addCls:function(a){this.replaceCls(null,a)},removeCls:function(a){this.replaceCls(a)},replaceCls:function(d,c){var a=this._parseCls(this.data.cls),b=this._parseCls(d);if(b.length){a=Ext.Array.difference(a,b)}b=this._parseCls(c);if(b.length){a=Ext.Array.unique(a.concat(b))}this.set('cls',a.join(' '))},toggleCls:function(e,f){var a,d,g,b,c;if(f===undefined){a=this._parseCls(this.data.cls);d=this._parseCls(e);for(b=0,g=d.length;b<g;++b){c=d[b];if(Ext.Array.contains(a,c)){Ext.Array.remove(a,c)}else {a.push(c)}}this.set('cls',a.join(' '))}else {if(f){this.addCls(e)}else {this.removeCls(e)}}},privates:{_noCls:[],spacesRe:/\s+/,join:function(a){if(a.isTreeStore){if(this.isRoot()){this.treeStore=this.store=a}}else {this.callParent([a])}},callJoined:function(a,b){this.callParent([a,b]);this.callTreeStore(a,b)},_parseCls:function(a){if(!a){return this._noCls}if(typeof a==='string'){return a.split(this.spacesRe)}return a}}}}}});Ext.define('Ext.data.TreeModel',{extend:Ext.data.Model,mixins:[Ext.mixin.Queryable],getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode},statics:{defaultProxy:'memory'}},function(){Ext.data.NodeInterface.decorate(this)});Ext.define('Ext.data.Request',{isDataRequest:!0,config:{action:undefined,params:undefined,method:'GET',url:null,operation:null,proxy:null,disableCaching:!1,headers:{},callbackKey:null,rawRequest:null,jsonData:undefined,xmlData:undefined,withCredentials:!1,username:null,password:null,binary:!1,callback:null,scope:null,timeout:30000,records:null,directFn:null,args:null,useDefaultXhrHeader:null,responseType:null},constructor:function(a){this.initConfig(a)},getParam:function(b){var a=this.getParams(),c;if(a){return a[b]}return c},setParam:function(c,b){var a=this.getParams()||{};a[c]=b;this.setParams(a)}});Ext.define('Ext.data.TreeStore',{extend:Ext.data.Store,alias:'store.tree',isTreeStore:!0,config:{root:null,rootVisible:!1,defaultRootProperty:'children',parentIdProperty:null,clearOnLoad:!0,clearRemovedOnLoad:!0,nodeParam:'node',defaultRootId:'root',defaultRootText:'Root',folderSort:!1,pageSize:null},filterer:'topdown',lazyFill:!1,fillCount:0,bulkUpdate:0,nodesToUnregister:0,_silentOptions:{silent:!0},implicitModel:'Ext.data.TreeModel',groupField:null,groupDir:null,grouper:null,constructor:function(b){var a=this;a.byIdMap={};a.callParent([b])},applyFields:function(a,c){var b=this;if(a){if(b.defaultRootProperty!==b.self.prototype.config.defaultRootProperty){a=a.concat({name:b.defaultRootProperty,type:'auto',defaultValue:null,persist:!1})}}b.callParent([a,c])},applyGroupField:function(a){return null},applyGroupDir:function(a){return null},applyGrouper:function(a){return null},group:Ext.emptyFn,onSorterEndUpdate:function(){var a=this,d=a.getSorters(),b=d.getRange(),c=a.getRoot(),e=a.getFolderSort();a.fireEvent('beforesort',a,b);if(c&&(e||b.length)){if(a.getRemoteSort()){if(b.length){a.load({callback:function(){a.fireEvent('sort',a,b)}})}}else {c.sort(this.getSortFn(),!0);a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.fireEvent('sort',a,b)}}else {a.fireEvent('sort',a,b)}},updateFolderSort:function(a){this.needsFolderSort=a;this.onSorterEndUpdate()},getSortFn:function(){return this._sortFn||(this._sortFn=this.createSortFn())},createSortFn:function(){var a=this,b=this.sorters.getSortFn();return function(d,e){var f,g,c=0;if(a.needsFolderSort){f=d.data.leaf?1:0;g=e.data.leaf?1:0;c=f-g}if(a.needsIndexSort&&c===0){c=d.data.index-e.data.index}return c||b(d,e)}},getTotalCount:function(){return this.getCount()},afterEdit:function(b,h){var a=this,c=b.parentNode,j=a.getRootVisible(),i=!c&&!j,f,g=b.get('visible'),e,d;if(!i&&g!==a.contains(b)){if(g){if(!c||a.isVisible(b)){e=[b];if(b.isExpanded()){a.handleNodeExpand(b,b.childNodes,e)}f=b.previousSibling?a.indexOfPreviousVisibleNode(b.previousSibling):c?a.indexOf(c):-1;a.insert(f+1,e)}}else {d=a.indexOf(b);a.removeAt(d,a.indexOfNextVisibleNode(b)-d)}}else {if(a.getRoot()&&a.needsLocalFilter()){a.onFilterEndUpdate(a.getFilters())}}a.callParent([b,h])},afterReject:function(b){var a=this;if(a.contains(b)){a.onUpdate(b,Ext.data.Model.REJECT,null);a.fireEvent('update',a,b,Ext.data.Model.REJECT,null)}},afterCommit:function(c,a){var b=this;if(!a){a=null}if(b.contains(c)){b.onUpdate(c,Ext.data.Model.COMMIT,a);b.fireEvent('update',b,c,Ext.data.Model.COMMIT,a)}},updateRootVisible:function(c){var a=this.getRoot(),b;if(a){b=this.getData();if(c){b.insert(0,a)}else {b.remove(a)}}},updateTrackRemoved:function(a){this.callParent(arguments);this.removedNodes=this.removed;this.removed=null},onDestroyRecords:function(c,b,a){if(a){this.removedNodes.length=0}},updateProxy:function(a){var b;if(a){if(a.setIdParam){a.setIdParam(this.getNodeParam())}b=a.getReader();if(Ext.isEmpty(b.getRootProperty())){b.setRootProperty(this.getDefaultRootProperty())}}},setProxy:function(a){this.changingProxy=!0;this.callParent([a]);this.changingProxy=!1},updateModel:function(a){var b;if(a){b=a.prototype.isNode;Ext.data.NodeInterface.decorate(a);if(!b&&!this.changingProxy){this.getProxy().getReader().buildExtractors(!0)}}},onCollectionFilter:Ext.emptyFn,onFilterEndUpdate:function(h){var a=this,d=h.length,b=a.getRoot(),f,g,c,e;if(!a.getRemoteFilter()){if(d){a.doFilter(b)}else {b.cascade({after:function(b){b.set('visible',!0,a._silentOptions)}})}if(d){c=[];f=b.childNodes;for(e=0,d=f.length;e<d;e++){g=f[e];if(g.get('visible')){c.push(g)}}}else {c=b.childNodes}a.onNodeFilter(b,c);b.fireEvent('filterchange',b,c);a.suppressNextFilter=!0;a.callParent([h]);a.suppressNextFilter=!1}else {a.callParent([h])}},onNodeFilter:function(c,e){var a=this,d=a.getData(),b=[];if(a.getRootVisible()&&c.get('visible')){b.push(c)}a.handleNodeExpand(c,e,b);a.suspendEvents();d.splice(0,d.getCount(),b);a.resumeEvents();if(!a.suppressNextFilter){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}},onBeforeNodeExpand:function(a,f,g,c){var d=this,k,h,e,j,i,b;if(a.isLoaded()){b=[a.childNodes];if(c){b.push.apply(b,c)}Ext.callback(f,g||a,b)}else {if(a.isLoading()){d.on('load',function(){b=[a.childNodes];if(c){b.push.apply(b,c)}Ext.callback(f,g||a,b)},d,{single:!0,priority:1001})}else {k=d.getProxy().getReader();h=a.getProxy();e=h?h.getReader():null;j=e&&e.initialConfig.rootProperty?e:k;i=j.getRoot(a.raw||a.data);if(i||a.phantom&&!a.isRoot()){d.fillNode(a,j.extractData(i||[],{model:a.childType,recordCreator:d.recordCreator}));b=[a.childNodes];if(c){b.push.apply(b,c)}Ext.callback(f,g||a,b)}else {d.read({node:a,onChildNodesAvailable:function(){delete d.lastOptions.onChildNodesAvailable;b=[a.childNodes];if(c){b.push.apply(b,c)}Ext.callback(f,g||a,b)}});d.flushLoad()}}}},onNodeExpand:function(b,e){var a=this,d=a.indexOf(b)+1,c=[];a.handleNodeExpand(b,e,c);if(!a.refreshCounter&&b.isRoot()&&!b.get('visible')){a.loadRecords(c)}else {++a.loadCount;a.insert(d,c)}},handleNodeExpand:function(d,c,e){var g=this,f=c?c.length:0,b,a;if(d!==this.getRoot()&&!g.isVisible(d)){return}if(f){for(b=0;b<f;b++){a=c[b];if(a.get('visible')){e.push(a);if(a.isExpanded()){if(a.isLoaded()){g.handleNodeExpand(a,a.childNodes,e)}else {a.set('expanded',!1,{silent:!0});a.expand()}}}}}},onNodeCollapse:function(c,b,f,g){var a=this,e=a.indexOf(c)+1,d;if(a.needsLocalFilter()){b=Ext.Array.filter(b,a.filterVisible)}if(b.length&&a.isVisible(c)){d=a.indexOfNextVisibleNode(c);a.removeAt(e,d-e)}Ext.callback(f,g)},indexOfNextVisibleNode:function(b){var a;while(b.parentNode){for(a=b.nextSibling;a&&!a.get('visible');a=a.nextSibling){}if(a){return this.indexOf(a)}b=b.parentNode}return this.getCount()},indexOfPreviousVisibleNode:function(b){var a;for(a=b;a&&!a.get('visible');a=a.previousSibling){}if(a){if(a.isExpanded()&&a.lastChild){return this.indexOfPreviousVisibleNode(a.lastChild)}}else {a=b.parentNode}return this.indexOf(a)},filterNew:function(a){return !a.get('root')&&this.callParent([a])},filterRejects:function(a){return !a.get('root')&&this.callParent([a])},getNewRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterNew,this)},getRejectRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterRejects,this)},getUpdatedRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterUpdated)},beforeNodeRemove:function(i,a,h,d){if(!Ext.isArray(a)){a=[a]}var c=this,g=a.length,f=c.removedNodes,e,b;for(b=0;!e&&b<g;b++){if(a[b].get('visible')){e=a[b]}}if(e){d[0]=c.indexOf(a[0]);d[1]=c.indexOfNextVisibleNode(a[a.length-1])-d[0]}else {d[0]=-1;d[1]=0}for(b=0;b<g;b++){a[b].cascade(function(b){c.unregisterNode(b,!0);if(f&&!h){if(!b.phantom&&!b.erasing&&!c.loading){b.removedFrom=c.indexOf(b);f.push(b);c.needsSync=!0}}})}},afterDrop:Ext.emptyFn,onNodeRemove:function(e,d,c,b){var a=this;a.suspendAutoSync();if(b[0]!==-1){a.removeIsMove=c;a.removeAt.apply(a,b);a.removeIsMove=!1}a.resumeAutoSync()},onNodeAppend:function(a,c,b){this.onNodeInsert(a,c,b)},onNodeInsert:function(g,a,k){var b=this,l=a.raw||a.data,j=b.removedNodes,i,e,c,h,f,d;if(g&&b.needsLocalFilter()){b.doFilter(g)}b.beginUpdate();if(b.isVisible(a)){if(k===0||!a.previousSibling){d=b.indexOf(g)}else {d=b.indexOfPreviousVisibleNode(a.previousSibling)}b.insert(d+1,a);if(!a.isLeaf()&&a.isExpanded()){if(a.isLoaded()){b.onNodeExpand(a,a.childNodes)}else {if(!b.fillCount){a.set('expanded',!1);a.expand()}}}}Ext.Array.remove(j,a);b.needsSync=b.needsSync||a.phantom||a.dirty;if(!a.isLeaf()&&!a.isLoaded()&&!b.lazyFill){i=b.getProxy().getReader();e=a.getProxy();c=e?e.getReader():null;h=c&&c.initialConfig.rootProperty?c:i;f=h.getRoot(l);if(f){b.fillNode(a,h.extractData(f,{model:a.childType,recordCreator:b.recordCreator}))}}b.endUpdate()},registerNode:function(a,f){var b=this,g=b.byIdMap[a.id],d,e,c;b.byIdMap[a.id]=a;if(a.onRegisterTreeNode&&a!==g){a.onRegisterTreeNode(b)}if(a.onUnregisterTreeNode){b.nodesToUnregister++}if(f===!0){d=a.childNodes;e=d.length;for(c=0;c<e;c++){b.registerNode(d[c],!0)}}},unregisterNode:function(a,f){var b=this,g=b.byIdMap[a.id],d,e,c;delete b.byIdMap[a.id];if(f===!0){d=a.childNodes;e=d.length;for(c=0;c<e;c++){b.unregisterNode(d[c],!0)}}if(a.onUnregisterTreeNode&&a===g){a.onUnregisterTreeNode(b);b.nodesToUnregister--}},onNodeSort:function(b,c){var a=this;a.suspendAutoSync();if(a.indexOf(b)!==-1&&b.isExpanded()||b===a.getRoot()&&!a.getRootVisible()){Ext.suspendLayouts();a.onNodeCollapse(b,c);a.onNodeExpand(b,c);Ext.resumeLayouts(!0)}a.resumeAutoSync(a.autoSync)},applyRoot:function(a){var b=this,e=b.getModel(),d=e.prototype.idProperty,c=b.getDefaultRootId();if(a&&!a.isNode){a=Ext.apply({text:b.getDefaultRootText(),root:!0,isFirst:!0,isLast:!0,depth:0,index:0,parentId:null,allowDrag:!1},a);if(c&&a[d]===undefined){a[d]=c}a=new e(a)}return a},updateRoot:function(b,c){var a=this,g=[],e=a.isConfiguring,d,f;a.getTrackRemoved();a.suspendEvent('add','remove');if(e){a.suspendEvent('refresh','datachanged')}if(c&&c.isModel){if(a.getRootVisible()){f=[c]}else {f=c.childNodes}a.beforeNodeRemove(null,f,!1,g);c.set('root',!1);a.onNodeRemove(null,f,!1,g);c.fireEvent('remove',null,c,!1);c.fireEvent('rootchange',null);c.clearListeners();c.store=c.treeStore=null;a.unregisterNode(c)}a.getData().clear();if(b){if(b.fireEventArgs('beforeappend',[null,b])===!1){b=null}else {d=b.parentNode;if(d){if(!d.removeChild(b,!1,!1,d.getTreeStore()===a)){return}}else {if((d=b.getTreeStore())&&d!==a&&b===d.getRoot()){d.setRoot(null)}}b.store=b.treeStore=a;b.set('root',!0);b.updateInfo(!0,{isFirst:!0,isLast:!0,depth:0,index:0,parentId:null});a.registerNode(b,!0);b.fireEvent('append',null,b,!1);b.fireEvent('rootchange',b);a.onNodeAppend(null,b,0);b.phantom=!0}}if(!e){a.fireEvent('rootchange',b,c)}if(b&&(a.getAutoLoad()||b.isExpanded())){if(b.isLoaded()){a.onNodeExpand(b,b.childNodes);if(!e){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}}else {b.data.expanded=!1;b.expand(!1);if(b.isLoaded&&!a.getProxy().isSynchronous&&!e){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}}}else {if(!e){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}}a.resumeEvent('add','remove');if(e){a.resumeEvent('refresh','datachanged')}},doDestroy:function(){var a=this,b=a.getRoot();if(b&&a.nodesToUnregister){b.cascade(function(b){if(b.onUnregisterTreeNode){b.onUnregisterTreeNode(a)}})}a.callParent()},each:function(e,d,a){var f=0,b=a,c;if(a&&typeof a==='object'){c=a.collapsed;b=a.filtered}if(c){this.getRoot().cascade(function(c){if(b===!0||c.get('visible')){return e.call(d||c,c,f++)}})}else {return this.callParent([e,d,b])}},collect:function(h,a,b){var d,i={},g=[],e=a,f,c;if(a&&typeof a==='object'){d=a.collapsed;b=a.filtered;e=a.allowNull}if(d||b){this.getRoot().cascade(function(j){if(b===!0||j.get('visible')){c=j.get(h);f=String(c);if((e||!Ext.isEmpty(c))&&!i[f]){i[f]=1;g.push(c)}}if(!d&&!j.isExpanded()){return !1}})}else {g=this.callParent([h,e,b])}return g},getNodeById:function(a){return this.byIdMap[a]||null},findNode:function(c,b,f,g,e){var a=null,d;if(Ext.isEmpty(b,!1)){return a}if(c===this.model.idProperty&&arguments.length<3){return this.byIdMap[b]}d=Ext.String.createRegex(b,f,g,e);Ext.Object.eachValue(this.byIdMap,function(h){if(h&&d.test(h.get(c))){a=h;return !1}});return a},load:function(b){var a=b&&b.node;if(!a&&!(a=this.getRoot())){a=this.setRoot({expanded:!0,autoRoot:!0});return}if(a.isLoading()){return}return this.callParent([b])},reload:function(b){var a=Ext.apply({},b,this.lastOptions);a.node=this.getRoot();return this.load(a)},flushLoad:function(){var a=this,c=a.pendingLoadOptions,d=a.getClearOnLoad(),b,g,i,e,f,h;a.clearLoadTask();if(!c){return}b=c.node||a.getRoot();e=b&&b.isRoot();g=c.callback;i=c.scope;c.params=c.params||{};if(b.data.expanded&&!e){b.data.loaded=!1;if(d){b.data.expanded=!1}c.callback=function(a,c,e){if(!d){b.collapse()}b.expand();Ext.callback(g,i,[a,c,e])}}c.id=b.getId();a.setLoadOptions(c);if(a.getRemoteSort()&&c.sorters){a.fireEvent('beforesort',a,c.sorters)}c=Ext.apply({node:c.node||b,internalScope:a,internalCallback:a.onProxyLoad},c);a.lastOptions=Ext.apply({},c);c.isRootLoad=e;f=a.createOperation('read',c);if(a.fireEvent('beforeload',a,f)!==!1){a.loading=!0;if(e){if(a.getClearRemovedOnLoad()){a.removedNodes.length=0}if(d){a.unregisterNode(b,!0);b.clear(!1,!0);a.registerNode(b);h=!0}}else {if(a.loading){b.data.loaded=!1}if(a.getTrackRemoved()&&a.getClearRemovedOnLoad()){a.clearRemoved(b)}if(d){b.removeAll(!1)}}if(a.loading&&b){b.set('loading',!0,{silent:!(a.contains(b)||b===a.getRoot())})}if(h){a.clearData(!0);if(a.getRootVisible()){a.suspendEvents();a.add(b);a.resumeEvents()}}f.execute()}return a},onProxyLoad:function(c){var a=this,f=c.initialConfig,e=c.wasSuccessful(),b=c.getRecords(),d=f.node,g=f.isRootLoad,h=c.getScope()||a,i=[b,c,e];if(a.destroyed){return}a.loading=!1;d.set('loading',!1);if(e){++a.loadCount;if(!a.getClearOnLoad()){b=a.cleanRecords(d,b)}if(a.getParentIdProperty()){b=a.treeify(d,b)}if(g){a.suspendEvent('add','update')}b=a.fillNode(d,b)}Ext.callback(f.onChildNodesAvailable,h,i);if(g){a.resumeEvent('add','update');a.callObservers('BeforePopulate');a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.callObservers('AfterPopulate')}a.fireEvent('load',a,b,e,c,d)},clearRemoved:function(k){var d=this,e=d.removedNodes,l=k.getId(),f=e.length,b=f,h={},j=[],i={},a,c,g;if(k===d.getRoot()){d.removedNodes.length=0;return}for(;b--;){a=e[b];i[a.getId()]=a}for(b=f;b--;){a=e[b];c=a;while(c&&c.getId()!==l){g=c.get('parentId')||c.get('lastParentId');c=c.parentNode||d.getNodeById(g)||i[g]}if(c){h[a.getId()]=a}}for(b=0;b<f;b++){a=e[b];if(!h[a.getId()]){j.push(a)}}d.removedNodes=j},fillNode:function(c,b){var a=this,d=b?b.length:0;if(++a.bulkUpdate===1){a.suspendEvent('datachanged')}if(d){a.setupNodes(b);c.appendChild(b,undefined,!0)}else {if(a.bulkUpdate===1){c.set('loaded',!0)}else {c.data.loaded=!0}}if(!--a.bulkUpdate){a.resumeEvent('datachanged')}return b},setupNodes:function(b){var a=this,j=a.getSorters(),f=!1,g=b.length,i=a.sortOnLoad&&g>1&&!a.getRemoteSort()&&a.getFolderSort()||j.length,e=a.needsLocalFilter(),d,h,c;if(e){a.doFilter(b[0])}for(c=1;c<g;c++){d=b[c];h=b[c-1];if(e){a.doFilter(d)}f=d.data.index!==h.data.index}if(i){a.needsIndexSort=!0;Ext.Array.sort(b,a.getSortFn());a.needsIndexSort=!1}else {if(f){Ext.Array.sort(b,a.sortByIndex)}}},beginFill:function(){var a=this;if(!a.fillCount++){a.beginUpdate();a.suspendEvent('add','update');a.suspendAutoSync();a.fillArray=[]}},endFill:function(g,f){var a=this,c=a.fillArray,b,e,d;c.push(f);if(!--a.fillCount){a.resumeAutoSync();a.resumeEvent('add','update');for(b=0,e=c.length;b<e;b++){d=a.indexOf(c[b][0]);if(d!==-1){a.fireEvent('add',a,c[b],d)}}a.fillArray=null;a.endUpdate()}},sortByIndex:function(a,b){return a.data.index-b.data.index},onIdChanged:function(d,e,c){var b=d.childNodes,f=b&&b.length,a;this.callParent(arguments);delete this.byIdMap[e];this.byIdMap[c]=d;for(a=0;a<f;a++){b[a].set('parentId',c)}},treeify:function(n,h){var g=this,l=n.getId(),m=g.getParentIdProperty(),j=h.length,i=[],f={},b,a,c,d,k,e;for(b=0;b<j;b++){a=h[b];a.data.depth=1;f[a.id]=a}for(b=0;b<j;b++){a=h[b];c=a.data[m];if(!(c||c===0)||c===l){i.push(a)}else {d=f[c];d.$children=d.$children||[];d.$children.push(a);a.data.depth=d.data.depth+1}}for(k in f){a=f[k];e=a.$children;if(e){delete a.$children;g.setupNodes(e);a.appendChild(e)}g.registerNode(a)}g.setupNodes(i);return i},cleanRecords:function(h,f){var e={},d=h.childNodes,a=0,b=d.length,g=[],c;for(;a<b;++a){e[d[a].getId()]=!0}for(a=0,b=f.length;a<b;++a){c=f[a];if(!e[c.getId()]){g.push(c)}}return g},removeAll:function(){var a=this,b=a.getRoot(),c=a.getData().length;a.suspendEvents();a.setRoot(null);a.resumeEvents();a.callParent();if(c){a.fireEvent('clear',a);a.fireEvent('rootchange',b,null)}},doSort:function(b){var a=this;if(a.getRemoteSort()){a.load()}else {a.tree.sort(b,!0);a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}a.fireEvent('sort',a,a.sorters.getRange())},filterVisible:function(a){return a.get('visible')},isVisible:function(c){var a=c.parentNode,b=c.data.visible,d=this.getRoot();while(b&&a){b=a.data.expanded&&a.data.visible;a=a.parentNode}return b&&!(c===d&&!this.getRootVisible())},commitChanges:function(){var a=this.removedNodes;if(a){a.length=0}this.callParent()},getRootNode:function(){return this.getRoot()},setRootNode:function(a){this.setRoot(a);return this.getRoot()},privates:{fireChangeEvent:function(a){return !!this.byIdMap[a.id]},getRawRemovedRecords:function(){return this.removedNodes},createOperation:function(e,c){var b=this,d=c.node,a;if(b.useModelProxy&&d&&d!==b.getRootNode()){a=d.getProxy()}if(a&&a!==b.getProxy()){return a.createOperation(e,c)}else {return b.callParent([e,c])}},recordCreator:function(b,a){return new a(b)},doFilter:function(a){this.filterNodes(a,this.getFilters().getFilterFn(),!0)},filterNodes:function(b,h,j){var c=this,g=c.filterer==='bottomup',a=h(b)&&j||b.isRoot()&&!c.getRootVisible(),f=b.childNodes,i=f&&f.length,d,e;if(i){for(d=0;d<i;++d){e=c.filterNodes(f[d],h,a||g)||e}if(g){a=e||a}}b.set('visible',a,c._silentOptions);return a},needsLocalFilter:function(){return !this.getRemoteFilter()&&this.getFilters().length},onRemoteFilterSet:function(a,c){var b=this.getData();b.setFilters(null);if(a){a.on('endupdate',this.onFilterEndUpdate,this)}},onRemoteSortSet:function(a,c){var b=this.getData();b.setSorters(null);if(a){a.on('endupdate',this.onSorterEndUpdate,this)}}},deprecated:{5:{properties:{tree:null}}}});Ext.define('Ext.data.Validation',{extend:Ext.data.Model,isValidation:!0,syncGeneration:0,attach:function(a){this.record=a;this.isBase=a.self===Ext.data.Model;delete this.data.id},getValidation:function(){return null},isValid:function(){var a=this;if(a.syncGeneration!==a.record.generation){a.refresh()}return !a.dirty},refresh:function(q){if(this.isBase){return}var e=this,i=e.data,c=e.record,m=c.fields,l=c.generation,p=c.data,r=c.validationSeparator,f=null,k,h,a,d,g,n,j,o,b;if(q||e.syncGeneration!==l){e.syncGeneration=l;for(g=0,n=m.length;g<n;++g){d=m[g];b=d.name;o=p[b];k=d.defaultInvalidMessage;a=0;if(!(b in i)){i[b]=h=!0}else {h=i[b]}if(d.validate!==Ext.emptyFn){j=d.validate(o,r,null,c);if(j!==!0){a=j||k}}if(!a){a=!0}if(a!==h){(f||(f={}))[b]=a}}if(f){e.set(f)}}}});Ext.define('Ext.dom.Helper',function(){var b='afterbegin',d='afterend',a='beforebegin',c='beforeend',g=['BeforeBegin','previousSibling'],f=['AfterEnd','nextSibling'],e={beforebegin:g,afterend:f},h={beforebegin:g,afterend:f,afterbegin:['AfterBegin','firstChild'],beforeend:['BeforeEnd','lastChild']};return {singleton:!0,alternateClassName:['Ext.DomHelper','Ext.core.DomHelper'],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:'class',htmlFor:'for'},closeTags:{},detachedDiv:document.createElement('div'),decamelizeName:function(){var b=/([a-z])([A-Z])/g,a={};function decamel(c,a,b){return a+'-'+b.toLowerCase()}return function(c){return a[c]||(a[c]=c.replace(b,decamel))}}(),generateMarkup:function(a,c){var e=this,i=typeof a,d,b,f,g,h;if(i==='string'||i==='number'){c.push(a)}else {if(Ext.isArray(a)){for(g=0;g<a.length;g++){if(a[g]){e.generateMarkup(a[g],c)}}}else {f=a.tag||'div';c.push('<',f);for(d in a){if(a.hasOwnProperty(d)){b=a[d];if(b!==undefined&&!e.confRe.test(d)){if(b&&b.join){b=b.join(' ')}if(typeof b==='object'){c.push(' ',d,'="');e.generateStyles(b,c,!0).push('"')}else {c.push(' ',e.attributeTransform[d]||d,'="',b,'"')}}}}if(e.emptyTags.test(f)){c.push('/>')}else {c.push('>');if(b=a.tpl){b.applyOut(a.tplData,c)}if(b=a.html){c.push(b)}if(b=a.cn||a.children){e.generateMarkup(b,c)}h=e.closeTags;c.push(h[f]||(h[f]='</'+f+'>'))}}}return c},generateStyles:function(c,d,f){var e=d||[],a,b;for(a in c){if(c.hasOwnProperty(a)){b=c[a];a=this.decamelizeName(a);if(f&&Ext.String.hasHtmlCharacters(b)){b=Ext.String.htmlEncode(b)}e.push(a,':',b,';')}}return d||e.join('')},markup:function(a){var b;if(typeof a==='string'){return a}b=this.generateMarkup(a,[]);return b.join('')},applyStyles:function(b,a){Ext.fly(b).applyStyles(a)},createContextualFragment:function(e){var d=this.detachedDiv,b=document.createDocumentFragment(),c,a;d.innerHTML=e;a=d.childNodes;c=a.length;while(c--){b.appendChild(a[0])}return b},createDom:function(e){var c=this,d=c.markup(e),b=c.detachedDiv,a;b.innerHTML=d;a=b.firstChild;return Ext.supports.ChildContentClearedWhenSettingInnerHTML?a.cloneNode(!0):a},insertHtml:function(g,f,j){var o=this,l,k,n,m,i;g=g.toLowerCase();if(f.insertAdjacentHTML){if(o.ieInsertHtml){i=o.ieInsertHtml(g,f,j);if(i){return i}}l=h[g];if(l){f.insertAdjacentHTML(l[0],j);return f[l[1]]}}else {if(f.nodeType===3){g=g===b?a:g;g=g===c?d:g}k=Ext.supports.CreateContextualFragment?f.ownerDocument.createRange():undefined;m='setStart'+(this.endRe.test(g)?'After':'Before');if(e[g]){if(k){k[m](f);i=k.createContextualFragment(j)}else {i=this.createContextualFragment(j)}f.parentNode.insertBefore(i,g===a?f:f.nextSibling);return f[(g===a?'previous':'next')+'Sibling']}else {n=(g===b?'first':'last')+'Child';if(f.firstChild){if(k){try{k[m](f[n]);i=k.createContextualFragment(j)}catch(p){i=this.createContextualFragment(j)}}else {i=this.createContextualFragment(j)}if(g===b){f.insertBefore(i,f.firstChild)}else {f.appendChild(i)}}else {f.innerHTML=j}return f[n]}}},insertBefore:function(c,d,b){return this.doInsert(c,d,b,a)},insertAfter:function(b,c,a){return this.doInsert(b,c,a,d)},insertFirst:function(c,d,a){return this.doInsert(c,d,a,b)},append:function(b,d,a){return this.doInsert(b,d,a,c)},overwrite:function(b,c,e){var d=this,a;b=Ext.getDom(b);c=d.markup(c);if(d.ieOverwrite){a=d.ieOverwrite(b,c)}if(!a){b.innerHTML=c;a=b.firstChild}return e?Ext.get(a):a},doInsert:function(f,j,k,g){var i=this,h;f=f.dom||Ext.getDom(f);if('innerHTML' in f){h=i.insertHtml(g,f,i.markup(j))}else {h=i.createDom(j,null);if(f.nodeType===3){g=g===b?a:g;g=g===c?d:g}if(e[g]){f.parentNode.insertBefore(h,g===a?f:f.nextSibling)}else {if(f.firstChild&&g===b){f.insertBefore(h,f.firstChild)}else {f.appendChild(h)}}}return k?Ext.get(h):h},createTemplate:function(b){var a=this.markup(b);return new Ext.Template(a)},createHtml:function(a){return this.markup(a)}}});Ext.define('Ext.overrides.dom.Helper',function(){var a=/^(?:table|thead|tbody|tr|td)$/i,f=/td|tr|tbody|thead/i,e='<table>',d='</table>',c=e+'<tbody>',b='</tbody>'+d,h=c+'<tr>',g='</tr>'+b;return {override:'Ext.dom.Helper',ieInsertHtml:function(d,b,e){var c=null;if(Ext.isIE9m&&a.test(b.tagName)){c=this.insertIntoTable(b.tagName.toLowerCase(),d,b,e)}return c},ieOverwrite:function(b,c){if(Ext.isIE9m&&a.test(b.tagName)){while(b.firstChild){b.removeChild(b.firstChild)}if(c){return this.insertHtml('afterbegin',b,c)}}},ieTable:function(g,f,e,d){var h=-1,a=this.detachedDiv,b,c;a.innerHTML=[f,e,d].join('');while(++h<g){a=a.firstChild}b=a.nextSibling;if(b){b=a;a=document.createDocumentFragment();while(b){c=b.nextSibling;a.appendChild(b);b=c}}return a},insertIntoTable:function(a,k,i,o){var j,q,n=k==='beforebegin',l=k==='afterbegin',p=k==='beforeend',m=k==='afterend';if(a==='td'&&(l||p)||!f.test(a)&&(n||m)){return null}q=n?i:m?i.nextSibling:l?i.firstChild:null;if(n||m){i=i.parentNode}if(a==='td'||a==='tr'&&(p||l)){j=this.ieTable(4,h,o,g)}else {if((a==='tbody'||a==='thead')&&(p||l)||a==='tr'&&(n||m)){j=this.ieTable(3,c,o,b)}else {j=this.ieTable(2,e,o,d)}}i.insertBefore(j,q);return j}}}());Ext.define('Ext.data.identifier.Uuid',{extend:Ext.data.identifier.Generator,alias:'data.identifier.uuid',isUnique:!0,config:{id:null},constructor:function(a){this.callParent([a]);this.reconfigure(a)},reconfigure:function(a){var b=this.self;this.generate=a&&a.version===1?b.createSequential(a.salt,a.timestamp,a.clockSeq):b.createRandom()},clone:null,statics:{createRandom:function(){var a='xxxxxxxx-xxxx-4xxx-Rxxx-xMxxxxxxxxxx'.split(''),d='0123456789abcdef'.split(''),c=a.length,b=[];return function(){var g,e,f;for(f=0;f<c;++f){e=a[f];if(e!=='-'&&e!=='4'){g=Math.random()*16;g=e==='R'?g&3|8:g|(e==='M'?1:0);e=d[g]}b[f]=e}return b.join('')}},createSequential:function(f,g,i){var b=[],c=Math.pow(2,32),j=f.lo,h=f.hi,e=g.lo,d=g.hi,a;a=function(c,b){var a=c.toString(16).toLowerCase();if(a.length>b){a=a.substring(a.length-b)}else {if(a.length<b){a=Ext.String.leftPad(a,b,'0')}}return a};if(typeof f==='number'){h=Math.floor(f/c);j=Math.floor(f-h*c)}if(typeof g==='number'){d=Math.floor(g/c);e=Math.floor(g-d*c)}h|=256;b[3]=a(128|i>>>8&63,2)+a(i&255,2);b[4]=a(h,4)+a(j,8);return function(){b[0]=a(e,8);b[1]=a(d&65535,4);b[2]=a(d>>>16&4095|1<<12,4);++e;if(e>=c){e=0;++d}return b.join('-')}}}},function(){this.Global=new this({id:'uuid'})});Ext.define('Ext.data.proxy.WebStorage',{extend:Ext.data.proxy.Client,alternateClassName:'Ext.data.WebStorageProxy',config:{id:undefined},constructor:function(a){this.callParent(arguments);this.cache={};this.initialize()},create:function(g){var a=this,f=g.getRecords(),i=f.length,h=a.getIds(),c,b,d,e;if(a.isHierarchical===undefined){a.isHierarchical=!!f[0].isNode;if(a.isHierarchical){a.getStorageObject().setItem(a.getTreeKey(),!0)}}for(d=0;d<i;d++){b=f[d];if(b.phantom){e=b.identifier;if(e&&e.isUnique){c=b.getId()}else {c=a.getNextId()}}else {c=b.getId()}a.setRecord(b,c);b.commit();h.push(c)}a.setIds(h);g.setSuccessful(!0)},read:function(a){var e=this,h,f=[],t=!0,j=e.getModel(),r=0,g=a.getRecordCreator(),i,l,n,s,o,b,p,m,d,q,c,k;if(e.isHierarchical){f=e.getTreeData()}else {p=e.getIds();m=p.length;q=a.getId();if(q){d=e.getRecord(q);if(d!==null){b=g?g(d,j):new j(d)}if(b){f.push(b)}else {t=!1}}else {l=a.getSorters();i=a.getFilters();n=a.getLimit();h=[];for(c=0;c<m;c++){d=e.getRecord(p[c]);b=g?g(d,j):new j(d);h.push(b)}if(l){Ext.Array.sort(h,Ext.util.Sorter.createComparator(l))}for(c=a.getStart()||0;c<m;c++){b=h[c];o=!0;if(i){for(k=0,s=i.length;k<s;k++){o=i[k].filter(b)}}if(o){f.push(b);r++}if(n&&r===n){break}}}}if(t){a.setResultSet(new Ext.data.ResultSet({records:f,total:f.length,loaded:!0}));a.setSuccessful(!0)}else {a.setException('Unable to load records')}},update:function(e){var f=e.getRecords(),g=f.length,d=this.getIds(),a,b,c;for(c=0;c<g;c++){a=f[c];this.setRecord(a);a.commit();b=a.getId();if(b!==undefined&&Ext.Array.indexOf(d,b)===-1){d.push(b)}}this.setIds(d);e.setSuccessful(!0)},erase:function(e){var c=this,f=e.getRecords(),h=c.getIds(),i=h.length,g=[],d={},a=f.length,b;for(;a--;){Ext.apply(d,c.removeRecord(f[a]))}for(a=0;a<i;a++){b=h[a];if(!d[b]){g.push(b)}}c.setIds(g);e.setSuccessful(!0)},getRecord:function(b){var c=this,d=c.cache,a;a=!d[b]?Ext.decode(c.getStorageObject().getItem(c.getRecordKey(b))):d[b];if(!a){return null}d[b]=a;a[c.getModel().prototype.idProperty]=b;return Ext.merge({},a)},setRecord:function(c,e){if(e){c.set('id',e,{commit:!0})}else {e=c.getId()}var f=this,m=c.getData(),d={},l=f.getModel(),k=l.getFields(),n=k.length,j=0,a,g,i,h,b;for(;j<n;j++){a=k[j];g=a.name;if(a.persist){b=m[g];if(a.isDateField&&a.dateFormat&&Ext.isDate(b)){b=Ext.Date.format(b,a.dateFormat)}else {if(a.serialize){b=a.serialize(b,c)}}d[g]=b}}delete d[l.prototype.idProperty];if(c.isNode&&c.get('depth')===1){delete d.parentId}i=f.getStorageObject();h=f.getRecordKey(e);f.cache[e]=d;i.removeItem(h);i.setItem(h,Ext.encode(d))},removeRecord:function(a){var b=this,e=a.getId(),d={},f,c;d[e]=a;b.getStorageObject().removeItem(b.getRecordKey(e));delete b.cache[e];if(a.childNodes){c=a.childNodes;for(f=c.length;f--;){Ext.apply(d,b.removeRecord(c[f]))}}return d},getRecordKey:function(a){if(a.isModel){a=a.getId()}return Ext.String.format('{0}-{1}',this.getId(),a)},getRecordCounterKey:function(){return Ext.String.format('{0}-counter',this.getId())},getTreeKey:function(){return Ext.String.format('{0}-tree',this.getId())},getIds:function(){var d=this,a=(d.getStorageObject().getItem(d.getId())||'').split(','),c=a.length,e=this.getIdField().isStringField,b;if(c===1&&a[0]===''){a=[]}else {for(b=0;b<c;b++){a[b]=e?a[b]:Ext.isNumber(+a[b])?+a[b]:a[b]}}return a},getIdField:function(){return this.getModel().prototype.idField},setIds:function(d){var a=this.getStorageObject(),b=d.join(','),c=this.getId();a.removeItem(c);if(!Ext.isEmpty(b)){a.setItem(c,b)}},getNextId:function(){var b=this,e=b.getStorageObject(),d=b.getRecordCounterKey(),c=b.getIdField().isStringField,a;a=b.idGenerator.generate();e.setItem(d,a);if(c){a=a+''}return a},getTreeData:function(){var f=this,n=f.getIds(),i=n.length,d=[],k={},c=[],b=0,m=f.getModel(),o=m.prototype.idProperty,g,a,e,h,l,j;for(;b<i;b++){j=n[b];a=f.getRecord(j);d.push(a);k[j]=a;if(!a.parentId){c.push(a)}}g=c.length;Ext.Array.sort(d,f.sortByParentId);for(b=g;b<i;b++){a=d[b];h=a.parentId;if(!e||e[o]!==h){e=k[h];e.children=l=[]}l.push(a)}for(b=i;b--;){a=d[b];if(!a.children&&!a.leaf){a.loaded=!0}}for(b=g;b--;){a=c[b];c[b]=new m(a)}return c},sortByParentId:function(a,b){return (a.parentId||0)-(b.parentId||0)},initialize:function(){var a=this,b=a.getStorageObject(),c=+b.getItem(a.getRecordCounterKey()),d=a.getId();b.setItem(d,b.getItem(d)||'');if(b.getItem(a.getTreeKey())){a.isHierarchical=!0}a.idGenerator=new Ext.data.identifier.Sequential({seed:c?c+1:1})},clear:function(){var a=this,b=a.getStorageObject(),d=a.getIds(),e=d.length,c;for(c=0;c<e;c++){b.removeItem(a.getRecordKey(d[c]))}b.removeItem(a.getRecordCounterKey());b.removeItem(a.getTreeKey());b.removeItem(a.getId());a.cache={}},getStorageObject:function(){}});Ext.define('Ext.data.proxy.LocalStorage',{extend:Ext.data.proxy.WebStorage,alias:'proxy.localstorage',alternateClassName:'Ext.data.LocalStorageProxy',getStorageObject:function(){return window.localStorage}});Ext.define('Ext.data.proxy.Rest',{extend:Ext.data.proxy.Ajax,alternateClassName:'Ext.data.RestProxy',alias:'proxy.rest',defaultActionMethods:{create:'POST',read:'GET',update:'PUT',destroy:'DELETE'},slashRe:/\/$/,periodRe:/\.$/,config:{appendId:!0,format:null,batchActions:!1,actionMethods:{create:'POST',read:'GET',update:'PUT',destroy:'DELETE'}},buildUrl:function(c){var a=this,g=c.getOperation(),h=g.getRecords(),f=h?h[0]:null,i=a.getFormat(),b=a.getUrl(c),d,e;if(f&&!f.phantom){d=f.getId()}else {d=g.getId()}if(a.getAppendId()&&a.isValidId(d)){if(!b.match(a.slashRe)){b+='/'}b+=encodeURIComponent(d);e=c.getParams();if(e){delete e[a.getIdParam()]}}if(i){if(!b.match(a.periodRe)){b+='.'}b+=i}c.setUrl(b);return a.callParent([c])},isValidId:function(a){return a||a===0}});Ext.define('Ext.data.validator.Bound',{extend:Ext.data.validator.Validator,alias:'data.validator.bound',type:'bound',config:{min:undefined,max:undefined,emptyMessage:'Must be present',minOnlyMessage:'Value must be greater than {0}',maxOnlyMessage:'Value must be less than {0}',bothMessage:'Value must be between {0} and {1}'},resetMessages:function(){this._bothMsg=this._minMsg=this._maxMsg=null},updateMin:function(){this.resetMessages()},updateMax:function(){this.resetMessages()},updateMinOnlyMessage:function(){this.resetMessages()},updateMaxOnlyMessage:function(){this.resetMessages()},updateBothMessage:function(){this.resetMessages()},validate:function(b){var a=this,e=a.getMin(),d=a.getMax(),g=e!=null,f=d!=null,c=this.validateValue(b);if(c!==!0){return c}b=a.getValue(b);if(g&&f){if(b<e||b>d){c=a._bothMsg||(a._bothMsg=Ext.String.format(a.getBothMessage(),e,d))}}else {if(g){if(b<e){c=a._minMsg||(a._minMsg=Ext.String.format(a.getMinOnlyMessage(),e))}}else {if(f){if(b>d){c=a._maxMsg||(a._maxMsg=Ext.String.format(a.getMaxOnlyMessage(),d))}}}}return c},validateValue:function(a){if(a===undefined||a===null){return this.getEmptyMessage()}return !0},getValue:Ext.identityFn});Ext.define('Ext.data.validator.Length',{extend:Ext.data.validator.Bound,alias:'data.validator.length',type:'length',minOnlyMessage:'Length must be at least {0}',maxOnlyMessage:'Length must be no more than {0}',bothMessage:'Length must be between {0} and {1}',getValue:function(a){return String(a).length}});Ext.define('Ext.data.validator.Presence',{extend:Ext.data.validator.Validator,alias:'data.validator.presence',type:'presence',isPresence:!0,config:{message:'Must be present',allowEmpty:!1},validate:function(b){var a=!(b===undefined||b===null);if(a&&!this.getAllowEmpty()){a=b!==''}return a?!0:this.getMessage()}});Ext.define('Ext.dom.GarbageCollector',{singleton:!0,interval:30000,constructor:function(){var a=this;a.lastTime=Ext.now();a.onTick=a.onTick.bind(a);a.resume()},collect:function(){var g=this,b=Ext.cache,a,f,c,e,d,h;for(a in b){if(!b.hasOwnProperty(a)){continue}c=b[a];if(c.skipGarbageCollection){continue}f=c.dom;try{d=Ext.isGarbage(f)}catch(i){delete b[a];continue}if(d){d=!1;if(c&&c.dom){c.collect()}}}if(Ext.isIE9m){e={};for(a in b){if(b.hasOwnProperty(a)){e[a]=b[a]}}Ext.cache=Ext.dom.Element.cache=e}g.lastTime=Ext.now()},onTick:function(){this.timerId=null;if(Ext.enableGarbageCollector){this.collect()}this.resume()},pause:function(){var a=this.timerId;if(a){this.timerId=null;Ext.undefer(a)}},resume:function(){var a=this,b=a.lastTime;if(Ext.enableGarbageCollector&&Ext.now()-b>a.interval){a.collect()}if(!a.timerId){a.timerId=Ext.defer(a.onTick,a.interval)}}});Ext.define('Ext.dom.TouchAction',{singleton:!0,lastTouchStartTime:0,minMoveDistance:8,spaceRe:/\s+/,preventSingle:null,preventMulti:null,disabledOverflowDom:null,panXCls:Ext.baseCSSPrefix+'touch-action-pan-x',panYCls:Ext.baseCSSPrefix+'touch-action-pan-y',cssValues:['none','pan-x','pan-y','pan-x pan-y','pinch-zoom','pan-x pinch-zoom','pan-y pinch-zoom','pan-x pan-y pinch-zoom','double-tap-zoom','pan-x double-tap-zoom','pan-y double-tap-zoom','pan-x pan-y double-tap-zoom','pinch-zoom double-tap-zoom','pan-x pinch-zoom double-tap-zoom','pan-y pinch-zoom double-tap-zoom',''],objectValues:[{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!1},{panX:!0,panY:!1,pinchZoom:!1,doubleTapZoom:!1},{panX:!1,panY:!0,pinchZoom:!1,doubleTapZoom:!1},{panX:!0,panY:!0,pinchZoom:!1,doubleTapZoom:!1},{panX:!1,panY:!1,pinchZoom:!0,doubleTapZoom:!1},{panX:!0,panY:!1,pinchZoom:!0,doubleTapZoom:!1},{panX:!1,panY:!0,pinchZoom:!0,doubleTapZoom:!1},{panX:!0,panY:!0,pinchZoom:!0,doubleTapZoom:!1},{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!0},{panX:!0,panY:!1,pinchZoom:!1,doubleTapZoom:!0},{panX:!1,panY:!0,pinchZoom:!1,doubleTapZoom:!0},{panX:!0,panY:!0,pinchZoom:!1,doubleTapZoom:!0},{panX:!1,panY:!1,pinchZoom:!0,doubleTapZoom:!0},{panX:!0,panY:!1,pinchZoom:!0,doubleTapZoom:!0},{panX:!1,panY:!0,pinchZoom:!0,doubleTapZoom:!0},{panX:!0,panY:!0,pinchZoom:!0,doubleTapZoom:!0}],attributeName:'data-extTouchAction',constructor:function(){var a=this,b=Ext.supports;if(b.TouchAction){a.cssProp='touch-action'}else {if(b.MSPointerEvents){a.cssProp='-ms-touch-action'}}if(b.TouchEvents){Ext.getWin().on({touchstart:'onTouchStart',touchmove:'onTouchMove',touchend:'onTouchEnd',scope:a,delegated:!1,translate:!1,capture:!0,priority:5000});Ext.on({scroll:'onScroll',scope:a,destroyable:!0})}},containsTargets:function(g,f){var b=!0,d=f.browserEvent,c=f.type==='touchend'?d.changedTouches:d.touches,a,e;for(a=0,e=c.length;a<e;a++){if(!g.contains(c[a].target)){b=!1;break}}return b},disableOverflow:function(a,d){var b=this,f=d?'overflow-y':'overflow-x',c,e;if(!b.disabledOverflowDom&&!Ext.isiOS&&!Ext.scrollbar.width()){b.disabledOverflowDom=a;e=d?b.panXCls:b.panYCls;while(a){c=Ext.fly(a).getStyle(f);if(c==='auto'||c==='scroll'){Ext.fly(a).addCls(e)}a=a.parentNode}}},get:function(c){var a=c.getAttribute(this.attributeName),b=null;if(a!=null){b=this.objectValues[a]}return b},getFlags:function(b){var a;if(typeof b==='number'){a=b}else {a=0;if(b.panX!==!1){a|=1}if(b.panY!==!1){a|=2}if(b.pinchZoom!==!1){a|=4}if(b.doubleTapZoom!==!1){a|=8}}return a},isScrollable:function(a,d,e){var c=Ext.fly(a).getStyle(d?'overflow-y':'overflow-x'),b=c==='auto'||c==='scroll';if(b){if(d){b=e?a.scrollTop+a.clientHeight<a.scrollHeight:a.scrollTop>0}else {b=e?a.scrollLeft+a.clientWidth<a.scrollWidth:a.scrollLeft>0}}return b},lookupFlags:function(a){return parseInt(a.getAttribute&&a.getAttribute(this.attributeName)||15,10)},onScroll:function(){this.scrollOccurred=!0;this.isDoubleTap=!1},onTouchEnd:function(d){var a=this,b=d.target,f,c,e;f=d.browserEvent.touches.length;if(f===0){if(a.isDoubleTap){while(b){c=a.lookupFlags(b);if(c!=null){e=c&8;if(!e){d.preventDefault()}}b=b.parentNode}}a.isDoubleTap=!1;a.preventSingle=null;a.preventMulti=null;a.resetOverflow()}},onTouchMove:function(g){var b=this,a=null,d=g.target,f,c,i,j,h,m,e,q,p,n,o,k,l;k=b.preventSingle;l=b.preventMulti;c=g.browserEvent.touches.length;if(c===1&&k===!1||l===!1){return}if(c>1&&l===!0||c===1&&k===!0){a=!0}else {if(c===1){h=g.getPoint();m=b.startPoint;q=Ext.Element.getViewportScale();p=h.getDistanceTo(b.startPoint)*q;n=h.x-m.x;o=h.y-m.y;e=Math.abs(o)>=Math.abs(n)}while(d&&d.nodeType===1){f=b.lookupFlags(d);if(f&0){a=!0}else {if(c===1){i=!!(f&1);j=!!(f&2);if(i&&j){a=!1}else {if(!i&&!j){a=!0}else {if(p>=b.minMoveDistance){a=!!(i&&e||j&&!e)}}}if(!a&&b.isScrollable(d,e,(e?o:n)<0)){break}}else {if(b.containsTargets(d,g)){a=!(f&4)}else {a=!1}}}if(a){break}d=d.parentNode}}if(c===1){b.preventSingle=a}else {if(c>1){b.preventMulti=a}}if(a){g.preventDefault()}},onTouchStart:function(d){var a=this,f,c,b,e,g;if(d.browserEvent.touches.length===1){f=d.time;if(!a.scrollOccurred&&f-a.lastTouchStartTime<=500){a.isDoubleTap=!0}a.lastTouchStartTime=f;a.scrollOccurred=!1;a.startPoint=d.getPoint();b=d.target;while(b){c=a.lookupFlags(b);if(c!=null){e=!!(c&1);g=!!(c&2);if(e!==g){a.disableOverflow(b,e);break}}b=b.parentNode}}else {a.isDoubleTap=!1}},resetOverflow:function(){var b=this,a=b.disabledOverflowDom;while(a){Ext.fly(a).removeCls([b.panXCls,b.panYCls]);a=a.parentNode}b.disabledOverflowDom=null},set:function(c,g){var a=this,e=a.cssProp,b=a.getFlags(g),f=b&Ext.supports.TouchAction,d=a.attributeName;if(e){Ext.fly(c).setStyle(e,a.cssValues[f])}if(b===15){c.removeAttribute(d)}else {c.setAttribute(d,b)}}});Ext.define('Ext.drag.Info',{constructor:function(c,k){if(!c){return}var a=this,l=c.getLocal(),d,e,b,f,j,g,h,i;a.source=c;a.local=l;j=a.getEventXY(k);h=k.getXY();d=c.getElement();i=d.getXY();j=l?d.getLocalXY():i;f=j[0];g=j[1];a.initialEvent=k;a.eventTarget=k.target;a.cursor={current:{x:f,y:g},delta:{x:0,y:0},initial:{x:h[0],y:h[1]},offset:{x:h[0]-i[0],y:h[1]-i[1]}};a.element={current:{x:f,y:g},delta:{x:0,y:0},initial:{x:f,y:g}};a.proxy={instance:c.getProxy(),current:{x:f,y:g},delta:{x:0,y:0},initial:{x:f,y:g},element:d,isUnderCursor:!1,isElement:!0};a.types=[];a.data={};c.describe(a);b=a.proxy;e=b.instance.setupElement(a);b.isElement=e===c.getElement();b.element=e;if(e){b.width=e.getWidth();b.height=e.getHeight()}if(b.isElement){d=a.element;d.current=b.current;d.delta=b.delta}a.needsCursorCheck=b.element&&c.manager&&c.manager.pointerBug},cursor:null,element:null,eventTarget:null,files:null,isNative:!1,proxy:null,source:null,target:null,types:null,valid:!1,clearData:function(a){Ext.Array.remove(this.types,a);delete this.data[a]},clone:function(){var b=this,a=new Ext.drag.Info();a.cursor=Ext.merge({},b.cursor);a.data=Ext.apply({},b.data);a.element=Ext.merge({},b.element);a.eventTarget=b.eventTarget;a.proxy=Ext.merge({},b.proxy);a.source=b.source;a.target=b.target;a.types=Ext.Array.clone(b.types);a.valid=b.valid;return a},getData:function(c){var b=this,d=b.data,e=b.dataTransfer,a;if(e){a=e.getData(c)}else {a=d[c];if(typeof a==='function'){d[c]=a=a.call(b.source,b)}if(!a&&a!==0){a=''}}return Ext.Promise.resolve(a)},setData:function(a,b){Ext.Array.include(this.types,a);this.data[a]=b},destroy:function(){var a=this;a.eventTarget=a.data=a.proxy=a.targetMap=a.targetMap=a.types=a.elementMap=a.possibleTargets=a.target=null;a.callParent()},privates:{data:null,dataTransfer:null,elementMap:null,possibleTargets:null,targetMap:null,copyNativeData:function(b,c){var a=c.browserEvent.dataTransfer;this.target=b;this.dataTransfer=a;this.files=a.files},finalize:function(){var b=this,a=b.target;b.finalized=!0;if(a){a.info=null;a.handleDrop(b)}},getAlignXY:function(h,i){var b=this,e=b.source,c=b.cursor.offset,g=e.getProxy(),f=b.proxy.element,d=e.getConstrain(),a=[h,i];if(f){if(b.proxy.isElement){a[0]-=c.x;a[1]-=c.y}else {a=g.adjustCursorOffset(b,a)}if(d){a=d.constrain(a,b)}}return a},getEventXY:function(c){var a=c.getXY(),b=this.source;if(this.local){a=b.convertToLocalXY(a)}return a},onNativeDragEnter:function(b,c){var a=this;a.valid=b.accepts(a);b.info=a;a.copyNativeData(b,c)},onNativeDragLeave:function(b,c){var a=this;if(a.target===b){b.info=null;a.valid=!1;a.target=a.dataTransfer=a.files=null}},onNativeDragMove:function(a,b){this.copyNativeData(a,b)},onNativeDrop:function(a,b){this.copyNativeData(a,b);a.info=null},setActive:function(b){var a=this,e=a.source,c=a.target,d=c!==b;if(c&&d){c.handleDragLeave(a);c.info=null}a.target=b;if(b){if(d){a.valid=!!a.possibleTargets[b.getId()]&&b.accepts(a)!==!1;b.handleDragEnter(a);b.info=a}b.handleDragMove(a)}else {a.valid=!1}if(d){e.getProxy().update(a)}},update:function(o,n){var b=this,m=b.getEventXY(o),f=m[0],g=m[1],j=b.getAlignXY(f,g),h=j[0],i=j[1],a=b.proxy,k=b.cursor,c=k.current,e=k.delta,d=k.initial,l=a.instance;c.x=f;c.y=g;e.x=f-d.x;e.y=g-d.y;c=a.current;e=a.delta;d=a.initial;c.x=h;c.y=i;e.x=h-d.x;e.y=i-d.y;if(b.needsCursorCheck){a.isUnderCursor=!(f<h||g<i||f>a.width+h||g>a.height+i)}if(!n&&l){l.setXY(b,j)}}}});Ext.define('Ext.drag.Item',{mixins:[Ext.mixin.Observable,Ext.mixin.Identifiable],config:{autoDestroy:!0,component:null,element:null,groups:null},constructor:function(a){this.mixins.observable.constructor.call(this,a)},isDisabled:function(){return this.disabled},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},updateComponent:function(b,c){var a;if(b){a=b.el}else {if(c&&c.el===this.getElement()){a=null}else {return}}this.setElement(a)},applyElement:function(a){return a?Ext.get(a):null},updateElement:function(){this.setupListeners()},applyGroups:function(a){if(typeof a==='string'){a=[a]}return a},destroy:function(){var a=this,b=a.getElement();a.destroying=!0;a.setElement(null);if(b&&a.getAutoDestroy()){b.destroy()}a.callParent()},privates:{disabled:!1,convertToLocalXY:function(a){var b=this.getComponent();if(b){a=b.convertToLocalXY(a)}else {a=this.getElement().translateXY(a[0],a[1]);a=[a.x,a.y]}return a},getElListeners:Ext.privateFn,setupListeners:function(b){var a=this,c=a.elListeners;b=b||a.getElement();if(c){c.destroy();a.elListeners=null}if(b){a.elListeners=b.on(Ext.apply({scope:a,destroyable:!0},a.getElListeners()))}}}});Ext.define('Ext.drag.Manager',{singleton:!0,dragCls:Ext.baseCSSPrefix+'drag-body',pointerBug:Ext.isTouch||(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera),constructor:function(){this.targets={};this.nativeTargets=[];Ext.onReady(this.init,this)},init:function(){Ext.getDoc().on({scope:this,dragenter:{capture:!0,fn:'onNativeDragEnter'},dragleave:'onNativeDragLeave',dragover:'onNativeDragOver',drop:'onNativeDrop'})},destroy:function(){var a=this,b=a.targets,c;a.destroying=!0;for(c in b){b[c].destroy()}a.targets=null;a.callParent()},privates:{elementFromPoint:function(a,b){if(Ext.rootInheritedState.rtl){a=Ext.Element.getViewportWidth()-a}return Ext.dom.Element.fromPagePoint(a,b,!0)},getAtPoint:function(c){var e=c.cursor.current,g=c.elementMap,f=c.proxy.isUnderCursor,b=this.pointerBug&&f?c.proxy.element.dom:null,d,a;if(b){b.style.visibility='hidden'}a=this.elementFromPoint(e.x,e.y);if(b){b.style.visibility='visible'}while(a){d=g[a.id];if(d){return d}a=a.parentNode}return null},getNativeDragInfo:function(b){var a=this.nativeDragInfo;if(!a){this.nativeDragInfo=a=new Ext.drag.Info();a.isNative=!0}return a},onDragCancel:function(){Ext.getBody().removeCls(this.dragCls)},onDragEnd:function(a,b){a.finalize();Ext.getBody().removeCls(this.dragCls)},onDragMove:function(a,b){this.processDrag(a)},onDragStart:function(c,p){var j=this,o=c.source,l=j.targets,m=o.getGroups(),k={},h={},i={},f,a,b,d,e,n,g;i={};h={};if(m){d=Ext.Array.toMap(m)}for(f in l){a=l[f];if(!a.isDisabled()){e=!1;b=a.getGroups();if(!d&&!b){e=!0}else {if(d&&b){for(g=0,n=b.length;g<n;++g){if(d[b[g]]){e=!0;break}}}}if(e){h[f]=a}}k[f]=a;i[a.getElement().id]=a}c.possibleTargets=h;c.targetMap=k;c.elementMap=i;Ext.getBody().addCls(j.dragCls);j.processDrag(c)},onNativeDragEnter:function(c){var a=this.nativeTargets,b=c.target;c.preventDefault();if(a[a.length-1]!==b){a.push(b)}},onNativeDragLeave:function(b){var a=this.nativeTargets;Ext.Array.remove(a,b.target);if(a.length===0){this.nativeDragInfo=null}},onNativeDragOver:function(a){a.preventDefault()},onNativeDrop:function(a){a.preventDefault();this.nativeTargets.length=0;this.nativeDragInfo=null},processDrag:function(a){a.setActive(this.getAtPoint(a))},register:function(a){this.targets[a.getId()]=a},unregister:function(b){var a;if(this.destroying){return}a=b.getId();this.targets[a]=null;delete this.targets[a]}}});Ext.define('Ext.drag.Target',{extend:Ext.drag.Item,defaultIdPrefix:'target-',config:{invalidCls:'',validCls:''},constructor:function(a){var b=this,c=a&&a.accepts;if(c){b.accepts=c;a=Ext.apply({},a);delete a.accepts}b.callParent([a]);Ext.drag.Manager.register(b)},accepts:function(a){return !0},disable:function(){this.callParent();this.setupListeners(null)},enable:function(){this.callParent();this.setupListeners()},beforeDrop:Ext.emptyFn,onDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragLeave:Ext.emptyFn,onDragMove:Ext.emptyFn,updateInvalidCls:function(c,b){var a=this.info;this.doUpdateCls(a&&!a.valid,c,b)},updateValidCls:function(c,b){var a=this.info;this.doUpdateCls(a&&a.valid,c,b)},destroy:function(){Ext.drag.Manager.unregister(this);this.callParent()},privates:{doUpdateCls:function(d,b,a){var c=this.getElement();if(a){c.removeCls(a)}if(b&&d){c.addCls(b)}},getElListeners:function(){return {dragenter:'handleNativeDragEnter',dragleave:'handleNativeDragLeave',dragover:'handleNativeDragMove',drop:'handleNativeDrop'}},handleDrop:function(b){var a=this,c=a.hasListeners,d=b.valid;a.getElement().removeCls([a.getInvalidCls(),a.getValidCls()]);if(d&&a.beforeDrop(b)!==!1){if(c.beforedrop&&a.fireEvent('beforedrop',a,b)===!1){return !1}a.onDrop(b);if(c.drop){a.fireEvent('drop',a,b)}}else {return !1}},handleDragEnter:function(b){var a=this,c=b.valid?a.getValidCls():a.getInvalidCls();if(c){a.getElement().addCls(c)}a.onDragEnter(b);if(a.hasListeners.dragenter){a.fireEvent('dragenter',a,b)}},handleDragLeave:function(b){var a=this;a.getElement().removeCls([a.getInvalidCls(),a.getValidCls()]);a.onDragLeave(b);if(a.hasListeners.dragleave){a.fireEvent('dragleave',a,b)}},handleDragMove:function(b){var a=this;a.onDragMove(b);if(a.hasListeners.dragmove){a.fireEvent('dragmove',a,b)}},handleNativeDragEnter:function(c){var a=this,b=Ext.drag.Manager.getNativeDragInfo(c);b.onNativeDragEnter(a,c);if(a.hasListeners.dragenter){a.fireEvent('dragenter',a,b)}},handleNativeDragLeave:function(c){var a=this,b=Ext.drag.Manager.getNativeDragInfo(c);b.onNativeDragLeave(a,c);if(a.hasListeners.dragleave){a.fireEvent('dragleave',a,b)}},handleNativeDragMove:function(c){var a=this,b=Ext.drag.Manager.getNativeDragInfo(c);b.onNativeDragMove(a,c);if(a.hasListeners.dragmove){a.fireEvent('dragmove',a,b)}},handleNativeDrop:function(d){var a=this,c=a.hasListeners,b=Ext.drag.Manager.getNativeDragInfo(d),e=b.valid;b.onNativeDrop(a,d);if(e){if(c.beforedrop&&a.fireEvent('beforedrop',a,b)===!1){return}if(c.drop){a.fireEvent('drop',a,b)}}}}});Ext.define('Ext.event.gesture.Recognizer',{mixins:[Ext.mixin.Identifiable],priority:0,handledEvents:[],isStarted:!1,config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(a){this.initConfig(a);Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:function(){return this.reset()},onTouchCancel:function(a){return this.cancel(a)},fire:function(a,d,c,b){this.getOnRecognized().call(this.getCallbackScope(),this,a,d,c,b)},cancel:function(a){if(this.isStarted){this.onCancel(a)}return this.reset()},onCancel:Ext.emptyFn,reset:function(){this.isStarted=!1;return !1}});Ext.define('Ext.event.gesture.SingleTouch',{extend:Ext.event.gesture.Recognizer,isSingleTouch:!0,onTouchStart:function(a){if(a.touches.length>1){return this.cancel(a)}}});Ext.define('Ext.event.gesture.DoubleTap',{extend:Ext.event.gesture.SingleTouch,priority:300,config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:['singletap','doubletap'],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(b){var a=this,d=a.callParent([b]),c;if(d!==!1){a.isStarted=!0;c=a.lastStartPoint=b.changedTouches[0].point;a.startPoint=a.startPoint||c;a.startTime=b.time;Ext.undefer(a.singleTapTimer)}return d},onTouchMove:function(b){var a=this,d=b.changedTouches[0].point,e=Ext.Element.getViewportScale(),c=Math.round(Math.abs(d.getDistanceTo(a.lastStartPoint)*e));if(c>=a.getMoveDistance()){return a.cancel(b)}},onTouchEnd:function(b){var a=this,f=a.getMaxDuration(),d=b.time,h=b.target,e=a.lastTapTime,j=a.lastTarget,k=b.changedTouches[0].point,c,i,g;a.lastTapTime=d;a.lastTarget=h;if(e){c=d-e;if(c<=f){i=Ext.Element.getViewportScale();g=Math.round(Math.abs(k.getDistanceTo(a.startPoint)*i));if(g<=a.getTapDistance()){if(h!==j){return a.cancel(b)}a.lastTarget=null;a.lastTapTime=0;a.fire('doubletap',b,{touch:b.changedTouches[0],duration:c});return a.callParent([b])}}}if(d-a.startTime>f){a.fire('singletap',b);a.reset()}else {a.setSingleTapTimer(b)}},setSingleTapTimer:function(b){var a=this;a.singleTapTimer=Ext.defer(function(){a.fire('singletap',b);a.reset()},a.getMaxDuration())},reset:function(){var a=this;Ext.undefer(a.singleTapTimer);a.startTime=a.lastTapTime=0;a.lastStartPoint=a.startPoint=a.singleTapTimer=null;return a.callParent()}},function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.doubleTap)});Ext.define('Ext.event.gesture.Drag',{extend:Ext.event.gesture.SingleTouch,priority:100,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:['dragstart','drag','dragend','dragcancel'],config:{minDistance:8},constructor:function(){this.callParent(arguments);this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0},longpress:!1}},onTouchStart:function(b){var a=this,c=a.callParent([b]);if(c!==!1){a.startTime=b.time;a.startPoint=b.changedTouches[0].point}return c},tryDragStart:function(b){var a=this,e=b.changedTouches[0].point,c=a.getMinDistance(),f=Ext.Element.getViewportScale(),d=Math.round(Math.abs(e.getDistanceTo(a.startPoint)*f));if(d>=c){a.doDragStart(b)}},doDragStart:function(b,g){var a=this,d=b.changedTouches[0],f=d.point,e=a.info,c;if(g){c=Ext.now();a.startTime=c;a.startPoint=f;e.longpress=!0}else {c=b.time}a.isStarted=!0;a.previousPoint=a.lastPoint=f;a.resetInfo('x',b,d);a.resetInfo('y',b,d);e.time=c;a.fire('dragstart',b,e)},onTouchMove:function(b){var a=this,c,d;if(!a.startPoint){return}if(!a.isStarted){a.tryDragStart(b)}if(!a.isStarted){return}c=b.changedTouches[0];d=c.point;if(a.lastPoint){a.previousPoint=a.lastPoint}a.lastPoint=d;a.lastMoveEvent=b;a.updateInfo('x',b,c);a.updateInfo('y',b,c);a.info.time=b.time;a.fire('drag',b,a.info)},onAxisDragEnd:function(b,a){var c=a.time-a.previousTime[b];if(c>0){a.flick.velocity[b]=(a[b]-a.previous[b])/c}},resetInfo:function(b,i,h){var d=this,g=d.lastPoint[b],e=d.startPoint[b],f=g-e,c=b.toUpperCase(),a=d.info;a.touch=h;a.delta[b]=f;a.absDelta[b]=Math.abs(f);a.previousTime[b]=d.startTime;a.previous[b]=e;a[b]=g;a.direction[b]=0;a['start'+c]=d.startPoint[b];a['previous'+c]=a.previous[b];a['page'+c]=a[b];a['delta'+c]=a.delta[b];a['absDelta'+c]=a.absDelta[b];a['previousDelta'+c]=0;a.startTime=d.startTime},updateInfo:function(b,l,k){var e=this,d=e.lastPoint[b],g=e.previousPoint[b],f=e.startPoint[b],i=d-f,a=e.info,h=a.direction,c=b.toUpperCase(),j=a.previous[b];a.touch=k;a.delta[b]=i;a.absDelta[b]=Math.abs(i);if(d!==j&&d!==a[b]){a.previous[b]=a[b];a.previousTime[b]=a.time}a[b]=d;if(d>g){h[b]=1}else {if(d<g){h[b]=-1}}a['start'+c]=f;a['previous'+c]=a.previous[b];a['page'+c]=a[b];a['delta'+c]=a.delta[b];a['absDelta'+c]=a.absDelta[b];a['previousDelta'+c]=a.previous[b]-f;a.startTime=e.startTime},onTouchEnd:function(b){var a=this,d,e,c;if(a.isStarted){d=b.changedTouches[0];e=d.point;c=a.info;a.lastPoint=e;a.updateInfo('x',b,d);a.updateInfo('y',b,d);c.time=b.time;a.onAxisDragEnd('x',c);a.onAxisDragEnd('y',c);a.fire('dragend',b,c)}return this.callParent([b])},onCancel:function(a){var b=this,c=a.changedTouches[0],d=b.info;if(!a.touches.length){b.lastPoint=c.point}b.updateInfo('x',a,c);b.updateInfo('y',a,c);d.time=a.time;b.fire('dragcancel',a,d,!0)},reset:function(){var a=this;a.lastPoint=a.startPoint=a.previousPoint=a.lastPoint=a.lastMoveEvent=null;a.initInfo();return a.callParent()}},function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.drag)});Ext.define('Ext.event.gesture.Swipe',{extend:Ext.event.gesture.SingleTouch,priority:600,handledEvents:['swipestart','swipe','swipecancel'],config:{minDistance:80,maxOffset:35,maxDuration:1000},onTouchStart:function(c){var a=this,d=a.callParent([c]),b;if(d!==!1){b=c.changedTouches[0];a.startTime=c.time;a.isHorizontal=!0;a.isVertical=!0;a.startX=b.pageX;a.startY=b.pageY}return d},onTouchMove:function(b){var a=this,h=b.changedTouches[0],j=h.pageX,k=h.pageY,l=j-a.startX,m=k-a.startY,c=Math.abs(j-a.startX),d=Math.abs(k-a.startY),i=b.time-a.startTime,f,e,g;if(c===0&&d===0||i>a.getMaxDuration()){return a.cancel(b)}if(a.isHorizontal&&d>a.getMaxOffset()){a.isHorizontal=!1}if(a.isVertical&&c>a.getMaxOffset()){a.isVertical=!1}if(!a.isVertical||!a.isHorizontal){f=a.getMinDistance();if(a.isHorizontal&&c<f){e=l<0?'left':'right';g=c}else {if(a.isVertical&&d<f){e=m<0?'up':'down';g=d}}}if(!a.isHorizontal&&!a.isVertical){return a.cancel(b)}if(e&&!a.isStarted){a.isStarted=!0;a.fire('swipestart',b,{touch:h,direction:e,distance:g,duration:i})}},onTouchEnd:function(b){var a=this,c,l,m,i,j,e,f,d,k,g,h;if(a.onTouchMove(b)!==!1){c=b.changedTouches[0];l=c.pageX;m=c.pageY;i=l-a.startX;j=m-a.startY;e=Math.abs(i);f=Math.abs(j);d=a.getMinDistance();k=b.time-a.startTime;if(a.isVertical&&f<d){a.isVertical=!1}if(a.isHorizontal&&e<d){a.isHorizontal=!1}if(a.isHorizontal){g=i<0?'left':'right';h=e}else {if(a.isVertical){g=j<0?'up':'down';h=f}}a.fire('swipe',b,{touch:c,direction:g,distance:h,duration:k})}return this.callParent([b])},onCancel:function(a){this.fire('swipecancel',a,null,!0)},reset:function(){var a=this;a.startTime=a.isHorizontal=a.isVertical=a.startX=a.startY=null;return a.callParent()}},function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.swipe)});Ext.define('Ext.event.gesture.EdgeSwipe',{extend:Ext.event.gesture.Swipe,priority:500,handledEvents:['edgeswipe','edgeswipestart','edgeswipeend','edgeswipecancel'],config:{minDistance:60},onTouchStart:function(d){var a=this,c=a.callParent([d]),b;if(c!==!1){b=d.changedTouches[0];a.direction=null;a.isHorizontal=!0;a.isVertical=!0;a.startX=b.pageX;a.startY=b.pageY}return c},onTouchMove:function(d){var a=this,f=d.changedTouches[0],m=f.pageX,n=f.pageY,g=m-a.startX,h=n-a.startY,j=Math.abs(n-a.startY),i=Math.abs(m-a.startX),e=a.getMinDistance(),k=a.getMaxOffset(),l=d.time-a.startTime,p=Ext.Viewport&&Ext.Element.getViewportWidth(),o=Ext.Viewport&&Ext.Element.getViewportHeight(),b,c;if(a.isVertical&&i>k){a.isVertical=!1}if(a.isHorizontal&&j>k){a.isHorizontal=!1}if(a.isVertical&&a.isHorizontal){if(j>i){a.isHorizontal=!1}else {a.isVertical=!1}}if(a.isHorizontal){b=g<0?'left':'right';c=g}else {if(a.isVertical){b=h<0?'up':'down';c=h}}b=a.direction||(a.direction=b);if(b==='up'){c=h*-1}else {if(b==='left'){c=g*-1}}a.distance=c;if(!c){return a.cancel(d)}if(!a.isStarted){if(b==='right'&&a.startX>e||b==='down'&&a.startY>e||b==='left'&&p-a.startX>e||b==='up'&&o-a.startY>e){return a.cancel(d)}a.isStarted=!0;a.startTime=d.time;a.fire('edgeswipestart',d,{touch:f,direction:b,distance:c,duration:l})}else {a.fire('edgeswipe',d,{touch:f,direction:b,distance:c,duration:l})}},onTouchEnd:function(b){var a=this,c;if(a.onTouchMove(b)!==!1){c=b.time-a.startTime;a.fire('edgeswipeend',b,{touch:b.changedTouches[0],direction:a.direction,distance:a.distance,duration:c})}return this.reset()},onCancel:function(a){this.fire('edgeswipecancel',a,{touch:a.changedTouches[0]},!0)},reset:function(){var a=this;a.direction=a.isHorizontal=a.isVertical=a.startX=a.startY=a.startTime=a.distance=null;return a.callParent()}},function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.edgeSwipe)});Ext.define('Ext.event.gesture.LongPress',{extend:Ext.event.gesture.SingleTouch,priority:400,config:{moveDistance:8,minDuration:1000},handledEvents:['longpress','taphold'],onTouchStart:function(b){var a=this,c=a.callParent([b]);if(c!==!1){a.startPoint=b.changedTouches[0].point;a.setLongPressTimer(b)}return c},setLongPressTimer:function(b){var a=this;Ext.undefer(a.timer);a.timer=Ext.defer(a.fireLongPress,a.getMinDuration(),a,[b])},onTouchMove:function(b){var a=this,d=b.changedTouches[0].point,e=Ext.Element.getViewportScale(),c=Math.round(Math.abs(d.getDistanceTo(a.startPoint)*e));if(c>=a.getMoveDistance()){return a.cancel(b)}},reset:function(){var a=this;a.timer=a.startPoint=Ext.undefer(a.timer);return a.callParent()},fireLongPress:function(a){var c=this,b={touch:a.changedTouches[0],duration:c.getMinDuration(),startDrag:c.startDrag};this.fire('taphold',a,b);this.fire('longpress',a,b);this.reset()},startDrag:function(){var b=Ext.event.gesture.Drag.instance,a=this.parentEvent;b.doDragStart(a,!0);Ext.event.publisher.Gesture.instance.claimRecognizer(b,a)}},function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.longPress)});Ext.define('Ext.event.gesture.MultiTouch',{extend:Ext.event.gesture.Recognizer,requiredTouchesCount:2,isTracking:!1,isMultiTouch:!0,onTouchStart:function(d){var a=this,b=a.requiredTouchesCount,e=d.touches,c=e.length;if(c===b){a.isTracking=!0}else {if(c>b){return a.cancel(d)}}},reset:function(){this.isTracking=!1;return this.callParent()}});Ext.define('Ext.event.gesture.Pinch',{extend:Ext.event.gesture.MultiTouch,priority:700,handledEvents:['pinchstart','pinch','pinchend','pinchcancel'],startDistance:0,lastTouches:null,onTouchMove:function(d){var a=this,c,f,e,b;if(a.isTracking){c=d.touches;f=c[0].point;e=c[1].point;b=f.getDistanceTo(e);if(b===0){return}if(!a.isStarted){a.isStarted=!0;a.startDistance=b;a.fire('pinchstart',d,{touches:c,distance:b,scale:1})}else {a.fire('pinch',d,{touches:c,distance:b,scale:b/a.startDistance})}}},onTouchEnd:function(a){if(this.isStarted){this.fire('pinchend',a)}return this.callParent([a])},onCancel:function(a){this.fire('pinchcancel',a,null,!0)},reset:function(){this.lastTouches=null;this.startDistance=0;return this.callParent()}},function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.pinch)});Ext.define('Ext.event.gesture.Rotate',{extend:Ext.event.gesture.MultiTouch,priority:800,handledEvents:['rotatestart','rotate','rotateend','rotatecancel'],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(h){var b=this,c,d,j,i,a,f,e,g;if(b.isTracking){c=h.touches;d=b.lastAngle;j=c[0].point;i=c[1].point;a=j.getAngleTo(i);if(d!==null){g=Math.abs(d-a);f=a+360;e=a-360;if(Math.abs(f-d)<g){a=f}else {if(Math.abs(e-d)<g){a=e}}}b.lastAngle=a;if(!b.isStarted){b.isStarted=!0;b.startAngle=a;b.fire('rotatestart',h,{touches:c,angle:a,rotation:0})}else {b.fire('rotate',h,{touches:c,angle:a,rotation:a-b.startAngle})}b.lastTouches=Ext.Array.clone(c)}},onTouchEnd:function(a){if(this.isStarted){this.fire('rotateend',a)}return this.callParent([a])},onCancel:function(a){this.fire('rotatecancel',a,null,!0)},reset:function(){var a=this;a.lastTouches=a.lastAngle=a.startAngle=null;return this.callParent()}},function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.rotate)});Ext.define('Ext.event.gesture.Tap',{extend:Ext.event.gesture.SingleTouch,priority:200,handledEvents:['tap','tapcancel'],config:{moveDistance:8},onTouchStart:function(c){var a=this,b=a.callParent([c]);if(b!==!1){a.isStarted=!0;a.startPoint=c.changedTouches[0].point}return b},onTouchMove:function(b){var a=this,d=b.changedTouches[0].point,e=Ext.Element.getViewportScale(),c=Math.round(Math.abs(d.getDistanceTo(a.startPoint)*e));if(c>=a.getMoveDistance()){return a.cancel(b)}},onTouchEnd:function(a){this.fire('tap',a,{touch:a.changedTouches[0]});return this.callParent([a])},onCancel:function(a){this.fire('tapcancel',a,{touch:a.changedTouches[0]},!0)},reset:function(){this.startPoint=null;return this.callParent()}},function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.tap)});Ext.define('Ext.event.publisher.Focus',{extend:Ext.event.publisher.Dom,type:'focus',handledEvents:['focusenter','focusleave','focusmove'],handledDomEvents:['focusin','focusout'],publishDelegatedDomEvent:function(a){var c=this,b=a.relatedTarget;if(a.type==='focusout'){if(b==null){c.processFocusIn(a,a.target,document.body)}}else {if(b==null||!b.tagName){b=document.body}c.processFocusIn(a,b,a.target)}},processFocusIn:function(j,b,a){var e=this,k=e.focusFly,d=[],i,c,g,f,h;if(b&&k.attach(b).isFocusSuspended()||a&&k.attach(a).isFocusSuspended()){return}if(a.compareDocumentPosition){g=!!(a.compareDocumentPosition(b)&4)}for(c=b,i=Ext.dom.Element.getCommonAncestor(a,b,!0);c&&c!==i;c=c.parentNode){d.push(c)}if(d.length){f=e.createSyntheticEvent('focusleave',j,b,a,b,a,g);e.publish(f,d);if(f.stopped){return}}d.length=0;for(c=a;c&&c!==i;c=c.parentNode){d.push(c)}h=e.createSyntheticEvent('focusenter',j,a,b,b,a,g);if(d.length){e.publish(h,d);if(h.stopped){return}}d=e.getPropagatingTargets(i);if(d.length){f=e.createSyntheticEvent('focusmove',j,a,b,b,a,g);e.publish(f,d);if(f.stopped){return}}if(Ext.GlobalEvents.hasListeners.focus){Ext.GlobalEvents.fireEvent('focus',{event:h,toElement:a,fromElement:b,backwards:g})}},createSyntheticEvent:function(f,c,h,b,d,g,e){var a=new Ext.event.Event(c);a.type=f;a.relatedTarget=b;a.target=h;a.fromElement=d;a.toElement=g;a.backwards=e;return a}},function(a){var b;a.prototype.focusFly=new Ext.dom.Fly();a.instance=new a();if(!Ext.supports.FocusinFocusoutEvents){this.override({handledDomEvents:['focus','blur'],publishDelegatedDomEvent:function(c){var e=this,d;e.callSuper([c]);d=c.target!==window&&c.target!==document;if(c.type==='blur'){if(!d){if(c.explicitOriginalTarget===a.previousActiveElement){if(c.target===window){Ext.undefer(b);b=0;e.processFocusIn(c,a.previousActiveElement,document.body);a.previousActiveElement=null}}}else {b=Ext.defer(function(){b=0;e.processFocusIn(c,c.target,document.body);a.previousActiveElement=null},1);if(d&&Ext.cache[c.target.id]){Ext.cache[c.target.id].focusinTimeout=b}}a.previousActiveElement=d?c.target:null}else {Ext.undefer(b);b=0;e.processFocusIn(c,a.previousActiveElement||document.body,d?c.target:document.body)}}});Ext.define(null,{override:'Ext.dom.Element',destroy:function(){if(this.focusinTimeout){Ext.undefer(this.focusinTimeout);this.focusinTimeout=null}this.callParent()}})}});Ext.define('Ext.fx.State',{isAnimatable:{'background-color':!0,'background-image':!0,'background-position':!0,'border-bottom-color':!0,'border-bottom-width':!0,'border-color':!0,'border-left-color':!0,'border-left-width':!0,'border-right-color':!0,'border-right-width':!0,'border-spacing':!0,'border-top-color':!0,'border-top-width':!0,'border-width':!0,'bottom':!0,'color':!0,'crop':!0,'font-size':!0,'font-weight':!0,'height':!0,'left':!0,'letter-spacing':!0,'line-height':!0,'margin-bottom':!0,'margin-left':!0,'margin-right':!0,'margin-top':!0,'max-height':!0,'max-width':!0,'min-height':!0,'min-width':!0,'opacity':!0,'outline-color':!0,'outline-offset':!0,'outline-width':!0,'padding-bottom':!0,'padding-left':!0,'padding-right':!0,'padding-top':!0,'right':!0,'text-indent':!0,'text-shadow':!0,'top':!0,'vertical-align':!0,'visibility':!0,'width':!0,'word-spacing':!0,'z-index':!0,'zoom':!0,'transform':!0},constructor:function(a){this.data={};this.set(a)},setConfig:function(a){this.set(a);return this},setRaw:function(a){this.data=a;return this},clear:function(){return this.setRaw({})},setTransform:function(d,a){var g=this.data,e=Ext.isArray(a),b=g.transform,c,f;if(!b){b=g.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}}if(typeof d==='string'){switch(d){case 'translate':if(e){c=a.length;if(c===0){break}b.translateX=a[0];if(c===1){break}b.translateY=a[1];if(c===2){break}b.translateZ=a[2]}else {b.translateX=a};break;case 'rotate':if(e){c=a.length;if(c===0){break}b.rotateX=a[0];if(c===1){break}b.rotateY=a[1];if(c===2){break}b.rotateZ=a[2]}else {b.rotate=a};break;case 'scale':if(e){c=a.length;if(c===0){break}b.scaleX=a[0];if(c===1){break}b.scaleY=a[1];if(c===2){break}b.scaleZ=a[2]}else {b.scaleX=a;b.scaleY=a};break;case 'skew':if(e){c=a.length;if(c===0){break}b.skewX=a[0];if(c===1){break}b.skewY=a[1]}else {b.skewX=a};break;default:b[d]=a;}}else {for(f in d){if(d.hasOwnProperty(f)){a=d[f];this.setTransform(f,a)}}}},set:function(b,a){var d=this.data,c;if(typeof b!=='string'){for(c in b){a=b[c];if(c==='transform'){this.setTransform(a)}else {d[c]=a}}}else {if(b==='transform'){this.setTransform(a)}else {d[b]=a}}return this},unset:function(b){var a=this.data;if(a.hasOwnProperty(b)){delete a[b]}return this},getData:function(){return this.data}});Ext.define('Ext.fx.animation.Abstract',{extend:Ext.Evented,mixins:[Ext.mixin.Factoryable],factoryConfig:{type:'animation'},isAnimation:!0,config:{name:'',element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:'linear',iteration:1,direction:'normal',delay:0,onBeforeStart:null,callback:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:!1,replacePrevious:!0},STATE_FROM:'0%',STATE_TO:'100%',DIRECTION_UP:'up',DIRECTION_TOP:'top',DIRECTION_DOWN:'down',DIRECTION_BOTTOM:'bottom',DIRECTION_LEFT:'left',DIRECTION_RIGHT:'right',stateNameRegex:/^(?:[\d.]+)%$/,constructor:function(){this.states={};this.callParent(arguments);return this},applyElement:function(a){return Ext.get(a)},applyBefore:function(a,b){if(a){return Ext.factory(a,Ext.fx.State,b)}},applyAfter:function(a,b){if(a){return Ext.factory(a,Ext.fx.State,b)}},setFrom:function(a){return this.setState(this.STATE_FROM,a)},setTo:function(a){return this.setState(this.STATE_TO,a)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(b){var c=this.stateNameRegex,a;for(a in b){if(c.test(a)){this.setState(a,b[a])}}return this},getStates:function(){return this.states},updateCallback:function(a){if(a){this.setOnEnd(a)}},end:function(){this.stop()},stop:function(){this.fireEvent('stop',this)},destroy:function(){this.destroying=!0;this.stop();this.callParent();this.destroying=!1;this.destroyed=!0},setState:function(c,d){var b=this.getStates(),a;a=Ext.factory(d,Ext.fx.State,b[c]);if(a){b[c]=a}return this},getState:function(a){return this.getStates()[a]},getData:function(){var a=this,b=a.getStates(),d={},e=a.getBefore(),f=a.getAfter(),k=b[a.STATE_FROM],l=b[a.STATE_TO],i=k.getData(),j=l.getData(),h,c,g;for(c in b){if(b.hasOwnProperty(c)){g=b[c];h=g.getData();d[c]=h}}return {before:e?e.getData():{},after:f?f.getData():{},states:d,from:i,to:j,duration:a.getDuration(),iteration:a.getIteration(),direction:a.getDirection(),easing:a.getEasing(),delay:a.getDelay(),onEnd:a.getOnEnd(),onBeforeEnd:a.getOnBeforeEnd(),onBeforeStart:a.getOnBeforeStart(),scope:a.getScope(),preserveEndState:a.getPreserveEndState(),replacePrevious:a.getReplacePrevious()}}});Ext.define('Ext.fx.animation.Slide',{extend:Ext.fx.animation.Abstract,alternateClassName:'Ext.fx.animation.SlideIn',alias:['animation.slide','animation.slideIn'],config:{direction:'left',out:!1,offset:0,easing:'auto',containerBox:'auto',elementBox:'auto',isElementBoxFit:!0,useCssTransform:!0},reverseDirectionMap:{up:'down',top:'down',down:'up',bottom:'up',left:'right',right:'left'},applyEasing:function(a){if(a==='auto'){return 'ease-'+(this.getOut()?'in':'out')}return a},getContainerBox:function(){var a=this._containerBox;if(a==='auto'){a=this.getElement().getParent().getBox()}return a},getElementBox:function(){var a=this._elementBox;if(this.getIsElementBoxFit()){return this.getContainerBox()}if(a==='auto'){a=this.getElement().getBox()}return a},getData:function(){var p=this.getElementBox(),c=this.getContainerBox(),a=p?p:c,k=this.getFrom(),n=this.getTo(),d=this.getOut(),b=this.getOffset(),h=this.getDirection(),o=this.getUseCssTransform(),q=this.getReverse(),e=0,f=0,g,i,j,l,m;if(typeof b==='string'){g=!0;b=parseFloat(b)}if(q){h=this.reverseDirectionMap[h]}switch(h){case this.DIRECTION_UP:case this.DIRECTION_TOP:if(g){b=a.height*b/100};if(d){f=c.top-a.top-a.height-b}else {f=c.bottom-a.bottom+a.height+b};break;case this.DIRECTION_DOWN:case this.DIRECTION_BOTTOM:if(g){b=a.height*b/100};if(d){f=c.bottom-a.bottom+a.height+b}else {f=c.top-a.height-a.top-b};break;case this.DIRECTION_RIGHT:if(g){b=a.width*b/100};if(d){e=c.right-a.right+a.width+b}else {e=c.left-a.left-a.width-b};break;case this.DIRECTION_LEFT:if(g){b=a.width*b/100};if(d){e=c.left-a.left-a.width-b}else {e=c.right-a.right+a.width+b};break;}i=d?0:e;j=d?0:f;if(o){k.setTransform({translateX:i,translateY:j})}else {k.set('left',i);k.set('top',j)}l=d?e:0;m=d?f:0;if(o){n.setTransform({translateX:l,translateY:m})}else {n.set('left',l);n.set('top',m)}return this.callParent(arguments)}});Ext.define('Ext.fx.animation.SlideOut',{extend:Ext.fx.animation.Slide,alias:['animation.slideOut'],config:{out:!0}});Ext.define('Ext.fx.animation.Fade',{extend:Ext.fx.animation.Abstract,alternateClassName:'Ext.fx.animation.FadeIn',alias:['animation.fade','animation.fadeIn'],config:{out:!1,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(c){var b=this.getTo(),a=this.getFrom();if(c){a.set('opacity',1);b.set('opacity',0)}else {a.set('opacity',0);b.set('opacity',1)}}});Ext.define('Ext.fx.animation.FadeOut',{extend:Ext.fx.animation.Fade,alias:'animation.fadeOut',config:{out:!0,before:{}}});Ext.define('Ext.fx.animation.Flip',{extend:Ext.fx.animation.Abstract,alias:'animation.flip',config:{easing:'ease-in',direction:'right',half:!1,out:null},getData:function(){var c=this,k=c.getFrom(),m=c.getTo(),j=c.getDirection(),b=c.getOut(),l=c.getHalf(),a=l?90:180,h=1,i=1,d=0,e=0,f=0,g=0;if(b){i=0.8}else {h=0.8}switch(j){case this.DIRECTION_UP:case this.DIRECTION_TOP:if(b){f=a}else {d=-a};break;case this.DIRECTION_DOWN:case this.DIRECTION_BOTTOM:if(b){f=-a}else {d=a};break;case this.DIRECTION_RIGHT:if(b){g=a}else {e=-a};break;case this.DIRECTION_LEFT:if(b){g=-a}else {e=a};break;}k.setTransform({rotateX:d,rotateY:e,scale:h});m.setTransform({rotateX:f,rotateY:g,scale:i});return this.callParent()}});Ext.define('Ext.fx.animation.Pop',{extend:Ext.fx.animation.Abstract,alias:['animation.pop','animation.popIn'],alternateClassName:'Ext.fx.animation.PopIn',config:{out:!1,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var b=this.getTo(),a=this.getFrom(),c=this.getOut();if(c){a.set('opacity',1);a.setTransform({scale:1});b.set('opacity',0);b.setTransform({scale:0})}else {a.set('opacity',0);a.setTransform({scale:0});b.set('opacity',1);b.setTransform({scale:1})}return this.callParent(arguments)}});Ext.define('Ext.fx.animation.PopOut',{extend:Ext.fx.animation.Pop,alias:'animation.popOut',config:{out:!0,before:{}}});Ext.define('Ext.fx.Animation',{constructor:function(a){var c=Ext.fx.animation.Abstract,b;if(typeof a==='string'){b=a;a={}}else {if(a&&a.type){b=a.type}}if(b){c=Ext.ClassManager.getByAlias('animation.'+b)}return Ext.factory(a,c)}});Ext.define('Ext.fx.runner.Css',{extend:Ext.Evented,prefixedProperties:{'transform':!0,'transform-origin':!0,'perspective':!0,'transform-style':!0,'transition':!0,'transition-property':!0,'transition-duration':!0,'transition-timing-function':!0,'transition-delay':!0,'animation':!0,'animation-name':!0,'animation-duration':!0,'animation-iteration-count':!0,'animation-direction':!0,'animation-timing-function':!0,'animation-delay':!0},lengthProperties:{'top':!0,'right':!0,'bottom':!0,'left':!0,'width':!0,'height':!0,'max-height':!0,'max-width':!0,'min-height':!0,'min-width':!0,'margin-bottom':!0,'margin-left':!0,'margin-right':!0,'margin-top':!0,'padding-bottom':!0,'padding-left':!0,'padding-right':!0,'padding-top':!0,'border-bottom-width':!0,'border-left-width':!0,'border-right-width':!0,'border-spacing':!0,'border-top-width':!0,'border-width':!0,'outline-width':!0,'letter-spacing':!0,'line-height':!0,'text-indent':!0,'word-spacing':!0,'font-size':!0,'translate':!0,'translateX':!0,'translateY':!0,'translateZ':!0,'translate3d':!0,'x':!0,'y':!0},durationProperties:{'transition-duration':!0,'transition-delay':!0,'animation-duration':!0,'animation-delay':!0},angleProperties:{rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,skew:!0,skewX:!0,skewY:!0},DEFAULT_UNIT_LENGTH:'px',DEFAULT_UNIT_ANGLE:'deg',DEFAULT_UNIT_DURATION:'ms',customProperties:{x:!0,y:!0},formattedNameCache:{'x':'left','y':'top'},transformMethods3d:['translateX','translateY','translateZ','rotate','rotateX','rotateY','rotateZ','skewX','skewY','scaleX','scaleY','scaleZ'],transformMethodsNo3d:['translateX','translateY','rotate','skewX','skewY','scaleX','scaleY'],constructor:function(){var a=this;a.transformMethods=Ext.feature.has.Css3dTransforms?a.transformMethods3d:a.transformMethodsNo3d;a.vendorPrefix=Ext.browser.getStyleDashPrefix();a.ruleStylesCache={};a.callParent()},getStyleSheet:function(){var c=this.styleSheet,a,b;if(!c){a=document.createElement('style');a.type='text/css';(document.head||document.getElementsByTagName('head')[0]).appendChild(a);b=document.styleSheets;this.styleSheet=c=b[b.length-1]}return c},applyRules:function(j){var i=this.getStyleSheet(),h=this.ruleStylesCache,k=i.cssRules,d,g,b,c,f,a,e;for(d in j){g=j[d];b=h[d];if(b===undefined){f=k.length;i.insertRule(d+'{}',f);b=h[d]=k.item(f).style}c=b.$cache;if(!c){c=b.$cache={}}for(a in g){e=this.formatValue(g[a],a);a=this.formatName(a);if(c[a]!==e){c[a]=e;if(e===null){b.removeProperty(a)}else {b.setProperty(a,e)}}}}return this},applyStyles:function(f){var c,e,d,b,a,g;for(c in f){if(f.hasOwnProperty(c)){this.activeElement=e=document.getElementById(c);if(!e){continue}d=e.style;b=f[c];for(a in b){if(b.hasOwnProperty(a)){g=this.formatValue(b[a],a);a=this.formatName(a);if(g===null){d.removeProperty(a)}else {d.setProperty(a,g)}}}}}this.activeElement=null;return this},formatName:function(b){var c=this.formattedNameCache,a=c[b];if(!a){if((Ext.os.is.Tizen||!Ext.feature.has.CssTransformNoPrefix)&&this.prefixedProperties[b]){a=this.vendorPrefix+b}else {a=b}c[b]=a}return a},formatValue:function(a,b){var k=typeof a,i=this.DEFAULT_UNIT_LENGTH,j=this.customProperties[b],g,d,c,f,h,e;if(a===null){return ''}if(k==='string'){if(this.lengthProperties[b]){if(!Ext.dom.Element.hasUnit(a)){a=a+i;if(j){a=this.getCustomValue(a,b)}}}return a}else {if(k==='number'){if(a===0){return '0'}if(this.lengthProperties[b]){a=a+i;if(j){a=this.getCustomValue(a,b)}return a}if(this.angleProperties[b]){return a+this.DEFAULT_UNIT_ANGLE}if(this.durationProperties[b]){return a+this.DEFAULT_UNIT_DURATION}}else {if(b==='transform'){g=this.transformMethods;h=[];for(c=0,f=g.length;c<f;c++){d=g[c];h.push(d+'('+this.formatValue(a[d],d)+')')}return h.join(' ')}else {if(Ext.isArray(a)){e=[];for(c=0,f=a.length;c<f;c++){e.push(this.formatValue(a[c],b))}return e.length>0?e.join(', '):'none'}}}}return a},getCustomValue:function(a,b){var c=Ext.fly(this.activeElement);if(b==='x'){a=c.translateXY(parseInt(a,10)).x}else {if(b==='y'){a=c.translateXY(null,parseInt(a,10)).y}}return a+this.DEFAULT_UNIT_LENGTH}});Ext.define('Ext.fx.runner.CssTransition',{extend:Ext.fx.runner.Css,alternateClassName:'Ext.Animator',singleton:!0,listenersAttached:!1,constructor:function(){this.runningAnimationsData={};this.transitionQueue={toData:{},transitionData:{}};return this.callParent(arguments)},attachListeners:function(){var a=top===window?Ext.getWin():Ext.getBody();this.listenersAttached=!0;a.on('transitionend','onTransitionEnd',this)},onTransitionEnd:function(c){var a=c.target,b=a.id;if(b&&this.runningAnimationsData.hasOwnProperty(b)){this.refreshRunningAnimationsData(Ext.get(a),[c.browserEvent.propertyName])}},getElementId:function(a){return a.getId?a.getId():a.id},onAnimationEnd:function(d,a,b,c,n){var l=this.getElementId(d),j=this.runningAnimationsData[l],k={},h={},g,f,e,m,i;b.un('stop','onAnimationStop',this);if(j){g=j.nameMap}k[l]=h;if(a.onBeforeEnd){a.onBeforeEnd.call(a.scope||this,d,c)}b.fireEvent('animationbeforeend',b,d,c);this.fireEvent('animationbeforeend',this,b,d,c);if(n||!c&&!a.preserveEndState){f=a.toPropertyNames;for(e=0,m=f.length;e<m;e++){i=f[e];if(g&&!g.hasOwnProperty(i)){h[i]=null}}}if(a.after){Ext.merge(h,a.after)}this.applyStyles(k);if(a.onEnd){a.onEnd.call(a.scope||this,d,c)}b.fireEvent('animationend',b,d,c);this.fireEvent('animationend',this,b,d,c);Ext.AnimationQueue.stop(Ext.emptyFn,b)},onAllAnimationsEnd:function(d){var a=this.getElementId(d),b=this.transitionQueue,c={};delete this.runningAnimationsData[a];c[a]={'transition-property':null,'transition-duration':null,'transition-timing-function':null,'transition-delay':null};delete b.toData[a];delete b.transitionData[a];this.applyStyles(c);this.fireEvent('animationallend',this,d)},hasRunningAnimations:function(c){var b=this.getElementId(c),a=this.runningAnimationsData;return a.hasOwnProperty(b)&&a[b].sessions.length>0},refreshRunningAnimationsData:function(i,o,f,g){var s=this.getElementId(i),r=this.runningAnimationsData,e=r[s],n=!1,l,k,c,d,a,m,q,b,h,j,p;if(!e){return}l=e.nameMap;k=e.nameList;c=e.sessions;f=Boolean(f);g=Boolean(g);if(!c){return this}h=c.length;if(h===0){return this}if(g){e.nameMap={};k.length=0;for(b=0;b<h;b++){a=c[b];this.onAnimationEnd(i,a.data,a.animation,f,g)}c.length=0}else {for(b=0;b<h;b++){a=c[b];m=a.map;q=a.list;for(j=0,p=o.length;j<p;j++){d=o[j];if(m[d]){delete m[d];Ext.Array.remove(q,d);a.length--;if(--l[d]===0){delete l[d];Ext.Array.remove(k,d)}}}if(a.length===0){c.splice(b,1);b--;h--;n=!0;this.onAnimationEnd(i,a.data,a.animation,f)}}}if(!g&&!f&&c.length===0&&n){this.onAllAnimationsEnd(i)}},getRunningData:function(b){var a=this.runningAnimationsData;if(!a.hasOwnProperty(b)){a[b]={nameMap:{},nameList:[],sessions:[]}}return a[b]},getTestElement:function(){var e=this,b=e.testElement,d=e.iframe,a,c;if(b){if(b.ownerDocument.defaultView!==d.contentWindow){a=d.contentDocument;a.body.appendChild(b);e.testElementComputedStyle=a.defaultView.getComputedStyle(b)}}else {d=e.iframe=document.createElement('iframe');d.setAttribute('tabIndex',-1);c=d.style;c.setProperty('visibility','hidden','important');c.setProperty('width','0px','important');c.setProperty('height','0px','important');c.setProperty('position','absolute','important');c.setProperty('border','0px','important');c.setProperty('zIndex','-1000','important');document.body.appendChild(d);a=d.contentDocument;a.open();a.writeln('</body>');a.close();e.testElement=b=a.createElement('div');b.style.setProperty('position','absolute','important');a.body.appendChild(b);e.testElementComputedStyle=a.defaultView.getComputedStyle(b)}return b},getCssStyleValue:function(b,a){var c=this.getTestElement(),e=this.testElementComputedStyle,d=c.style;d.setProperty(b,a);if(Ext.browser.is.Firefox){c.offsetHeight}a=e.getPropertyValue(b);d.removeProperty(b);return a},run:function(s){var a=this,H=[],J=a.lengthProperties,F={},L=a.transitionQueue.toData,d={},K=a.transitionQueue.transitionData,h,i,l,j,G,f,e,t,u,r,q,v,w,I,c,n,z,D,g,b,k,E,m,x,p,o,y,C,B,A;if(!a.listenersAttached){a.attachListeners()}s=Ext.Array.from(s);for(v=0,I=s.length;v<I;v++){c=s[v];c=Ext.factory(c,Ext.fx.Animation);H.push(c);a.activeElement=h=c.getElement();Ext.AnimationQueue.start(Ext.emptyFn,c);D=window.getComputedStyle(h.dom);i=a.getElementId(h);d[i]=d=Ext.merge({},c.getData());A=c.getOnBeforeStart();if(A){A.call(c.scope||a,h)}c.fireEvent('animationstart',c,d);a.fireEvent('animationstart',a,c,d);G=d.before;l=d.from;j=d.to;d.fromPropertyNames=f=[];d.toPropertyNames=e=[];for(b in j){if(j.hasOwnProperty(b)){j[b]=k=a.formatValue(j[b],b);g=a.formatName(b);x=J.hasOwnProperty(b);if(!x){k=a.getCssStyleValue(g,k)}if(l.hasOwnProperty(b)){l[b]=m=a.formatValue(l[b],b);if(!x){m=a.getCssStyleValue(g,m)}if(k!==m){f.push(g);e.push(g)}}else {E=D.getPropertyValue(g);if(k!==E){e.push(g)}}}}n=e.length;if(n===0){a.onAnimationEnd(h,d,c);continue}r=a.getRunningData(i);y=r.sessions;if(y.length>0){a.refreshRunningAnimationsData(h,Ext.Array.merge(f,e),!0,d.replacePrevious)}p=r.nameMap;o=r.nameList;z={};for(w=0;w<n;w++){b=e[w];z[b]=!0;if(!p.hasOwnProperty(b)){p[b]=1;o.push(b)}else {p[b]++}}C={element:h,map:z,list:e.slice(),length:n,data:d,animation:c};y.push(C);c.on('stop','onAnimationStop',a);q=Ext.apply({},G);Ext.apply(q,l);if(o.length>0){f=Ext.Array.difference(o,f);e=Ext.Array.merge(f,e);q['transition-property']=f}F[i]=q;L[i]=Ext.apply({},j);K[i]={'transition-property':e,'transition-duration':d.duration,'transition-timing-function':d.easing,'transition-delay':d.delay};c.startTime=Date.now()}a.activeElement=null;u=a.$className;a.applyStyles(F);t=function(b){if(b.data===u&&b.source===window){window.removeEventListener('message',t,!1);a.applyStyles(a.transitionQueue.toData)}};if(!a.messageTimerId){B=function(){var b;a.messageTimerId=null;if(Ext.isIE){a.applyStyles(a.transitionQueue.transitionData);if(!a.messageFollowupId){b=function(){a.messageFollowupId=null;window.addEventListener('message',t,!1);window.postMessage(u,'*')};a.messageFollowupId=Ext.raf(b)}}else {Ext.merge(a.transitionQueue.toData,a.transitionQueue.transitionData);window.addEventListener('message',t,!1);window.postMessage(u,'*')}};a.messageTimerId=Ext.raf(B)}return H},onAnimationStop:function(j){var a=this,d=a.runningAnimationsData,h=0,g=0,f,i,e,c,k,b;for(f in d){if(d.hasOwnProperty(f)){i=d[f];e=i.sessions;h++;for(c=0,k=e.length;c<k;c++){b=e[c];if(b.animation===j){a.refreshRunningAnimationsData(b.element,b.list.slice(),!1);if(j.destroying){g++}}}}}if(h===g){if(a.messageFollowupId){Ext.unraf(a.messageFollowupId);a.messageFollowupId=null}if(a.messageTimerId){Ext.unraf(a.messageTimerId);a.messageTimerId=null}Ext.apply(a.transitionQueue,{toData:{},transitionData:{}})}}});Ext.define('Ext.list.AbstractTreeItem',{extend:Ext.Widget,isTreeListItem:!0,cachedConfig:{expandable:!1,expanded:!1,iconCls:'',leaf:!0,loading:!1,selected:!1,selectedParent:!1},config:{iconClsProperty:'iconCls',indent:null,owner:null,node:null,over:null,parentItem:null,text:{lazy:!0,$value:''},textProperty:'text'},updateNode:function(b){if(b){var a=this,g=a.itemMap,e,h,i,d,f,c;a.element.dom.setAttribute('data-recordId',b.internalId);if(!g){e=b.childNodes;h=a.getOwner();a.itemMap=g={};for(d=0,i=e.length;d<i;++d){c=e[d];if(c.data.visible){f=h.createItem(c,a);g[c.internalId]=f;a.insertItem(f,null)}}}a.setExpanded(b.isExpanded());a.doNodeUpdate(b)}},updateSelected:function(b){var a;if(!this.isConfiguring){a=this.getParentItem();while(a&&!a.isRootListItem){a.setSelectedParent(b);a=a.getParentItem()}}},collapse:function(){this.getNode().collapse()},expand:function(){this.getNode().expand()},getToolElement:Ext.emptyFn,insertItem:Ext.emptyFn,isExpanded:function(){return this.getExpanded()},isSelectionEvent:Ext.emptyFn,isToggleEvent:Ext.emptyFn,nodeCollapse:function(e,b){var a=this,d=a.getOwner(),c=a.preventAnimation?null:d.getAnimation();a.nodeCollapseBegin(c,b);if(!c){a.nodeCollapseEnd(b)}},nodeCollapseBegin:function(d,c){var a=this,b=a.getOwner();a.setExpanded(!1);b.fireEvent('itemcollapse',b,a)},nodeCollapseEnd:function(a){if(!a&&!this.destroying){this.getOwner().updateLayout()}},nodeExpand:function(e){var a=this,d=a.getOwner(),c=a.getFloated(),b=!c&&d.getAnimation();a.nodeExpandBegin(b);if(!b){a.nodeExpandEnd()}},nodeExpandBegin:function(c){var a=this,b=a.getOwner();a.setExpanded(!0);b.fireEvent('itemexpand',b,a)},nodeExpandEnd:function(){if(!this.destroying){this.getOwner().updateLayout()}},nodeInsert:function(f,g){var a=this,d=a.getOwner(),h=a.itemMap,i=f.internalId,b=d.getItem(f),e=null,c;if(b){c=b.getParentItem();c.removeItem(b);if(c!==a){c.doUpdateExpandable();b.setParentItem(a)}}else {b=a.getOwner().createItem(f,a)}h[i]=b;if(g){e=h[g.internalId]}a.insertItem(b,e);a.doUpdateExpandable();d.fireEvent('iteminsert',d,a,b,e);d.updateLayout()},nodeRemove:function(f){var a=this,d=a.itemMap,c=a.getOwner(),e=f.internalId,b=d[e];if(b){delete d[e];a.removeItem(b);b.destroy();a.doUpdateExpandable();c.fireEvent('itemremove',c,a,b);c.updateLayout()}},nodeUpdate:function(a,b){this.doNodeUpdate(a)},onClick:function(c){var a=this,b=a.getOwner(),e=a.getNode(),d={event:c,item:a,node:e,tree:b,select:e.get('selectable')!==!1&&a.isSelectionEvent(c),toggle:a.isToggleEvent(c)};if(b.fireEvent('itemclick',b,d)!==!1){if(d.toggle){a.toggleExpanded();c.preventDefault()}if(d.select){b.setSelection(a.getNode())}}},removeItem:Ext.emptyFn,destroy:function(){var a=this,b=a.itemMap,c=a.getOwner(),d;if(b){for(d in b){b[d].destroy()}a.itemMap=null}if(c){c.removeItem(a.getNode())}a.setNode(null);a.setParentItem(null);a.setOwner(null);a.callParent()},privates:{doNodeUpdate:function(b,e){var a=this,d=this.getTextProperty(),c=this.getIconClsProperty();if(d){a.setText(b.data[d])}if(c){a.setIconCls(b.data[c])}a.setLoading(b.isLoading());a.setLeaf(b.isLeaf());a.doUpdateExpandable()},doUpdateExpandable:function(){var a=this.getNode();this.setExpandable(a.isExpandable())},toggleExpanded:function(){if(this.isExpanded()){this.collapse()}else {this.expand()}},updateIndent:function(c){var a=this.itemMap,b;for(b in a){a[b].setIndent(c)}},updateOwner:function(a){this.parent=a}}});Ext.define('Ext.overrides.list.AbstractTreeItem',{override:'Ext.list.AbstractTreeItem',config:{floated:null}});Ext.define('Ext.list.RootTreeItem',{extend:Ext.list.AbstractTreeItem,isRootListItem:!0,element:{reference:'element',tag:'ul',cls:Ext.baseCSSPrefix+'treelist-root-container'},insertItem:function(b,a){if(a){b.element.insertBefore(a.element)}else {this.element.appendChild(b.element)}},isToggleEvent:function(a){return !1}});Ext.define('Ext.mixin.ItemRippler',{mixinId:'itemrippler',config:{itemRipple:null},shouldRippleItem:function(c,d){var a,b;if(d.getTarget(this.noItemRippleSelector,this.element)){return !1}a=c&&this.getItemRipple();if(a&&c.isWidget){b=c.shouldRipple(d);if(b){a=Ext.apply({},a,b)}}return a},rippleItem:function(d,c){if(!d){return}var a=this,h=c.type.match(a.rippleStateRe),b=a.shouldRippleItem(d,c),k=b&&b.release,j=k===!0,e=d.isWidget?d.el:d,i,l,f,g;if(b&&h&&j){a.$rippleStart=c.getXY()}if(b&&e&&(!h&&j||h&&k!==!0)){g=a.$rippledItems||(a.$rippledItems=[]);f=a.$rippleStart;if(f){i=c.getXY();l=Math.sqrt(Math.pow(i[0]-f[0],2)+Math.pow(i[1]-f[1],2));if(l<=8){e.ripple(c,b);g.push(e)}}else {e.ripple(c,b);g.push(e)}a.$rippleStart=null}},destroyAllRipples:function(){var a;for(a=this.$rippledItems;a&&a.length;){a.pop().destroyAllRipples()}},privates:{noItemRippleSelector:'.'+Ext.baseCSSPrefix+'item-no-ripple, '+'.'+Ext.baseCSSPrefix+'item-no-tap',rippleStateRe:/start|down/}});Ext.define('Ext.list.TreeItem',{extend:Ext.list.AbstractTreeItem,xtype:'treelistitem',collapsedCls:Ext.baseCSSPrefix+'treelist-item-collapsed',expandedCls:Ext.baseCSSPrefix+'treelist-item-expanded',floatedToolCls:Ext.baseCSSPrefix+'treelist-item-tool-floated',leafCls:Ext.baseCSSPrefix+'treelist-item-leaf',expandableCls:Ext.baseCSSPrefix+'treelist-item-expandable',hideIconCls:Ext.baseCSSPrefix+'treelist-item-hide-icon',loadingCls:Ext.baseCSSPrefix+'treelist-item-loading',selectedCls:Ext.baseCSSPrefix+'treelist-item-selected',selectedParentCls:Ext.baseCSSPrefix+'treelist-item-selected-parent',withIconCls:Ext.baseCSSPrefix+'treelist-item-with-icon',hoverCls:Ext.baseCSSPrefix+'treelist-item-over',rowHoverCls:Ext.baseCSSPrefix+'treelist-row-over',isTreeListItem:!0,config:{rowCls:null},rowClsProperty:'rowCls',element:{reference:'element',tag:'li',cls:Ext.baseCSSPrefix+'treelist-item',children:[{reference:'rowElement',cls:Ext.baseCSSPrefix+'treelist-row',children:[{reference:'wrapElement',cls:Ext.baseCSSPrefix+'treelist-item-wrap',children:[{reference:'iconElement',cls:Ext.baseCSSPrefix+'treelist-item-icon'},{reference:'textElement',cls:Ext.baseCSSPrefix+'treelist-item-text'},{reference:'expanderElement',cls:Ext.baseCSSPrefix+'treelist-item-expander'}]}]},{reference:'itemContainer',tag:'ul',cls:Ext.baseCSSPrefix+'treelist-container'},{reference:'toolElement',cls:Ext.baseCSSPrefix+'treelist-item-tool'}]},constructor:function(b){var a;this.callParent([b]);a=this.toolElement.dom;a.parentNode.removeChild(a)},getToolElement:function(){return this.toolElement},insertItem:function(b,a){if(a){b.element.insertBefore(a.element)}else {this.itemContainer.appendChild(b.element)}},isSelectionEvent:function(b){var a=this.getOwner();return !this.isToggleEvent(b)||!a.getExpanderOnly()||a.getSelectOnExpander()},isToggleEvent:function(b){var a=!1;if(this.getOwner().getExpanderOnly()){a=b.target===this.expanderElement.dom}else {a=!this.itemContainer.contains(b.target)}return a},nodeCollapseBegin:function(b,c){var a=this,d=a.itemContainer,e;if(a.expanding){a.stopAnimation(a.expanding)}e=b&&d.getHeight();a.callParent([b,c]);if(b){d.dom.style.display='block';a.collapsingForExpand=c;a.collapsing=this.runAnimation(Ext.merge({from:{height:e},to:{height:0},callback:a.nodeCollapseDone,scope:a},b))}},nodeCollapseDone:function(c){var a=this,b=a.itemContainer;if(!a.destroying&&!a.destroyed){a.collapsing=null;b.dom.style.display='';b.setHeight(null);a.nodeCollapseEnd(a.collapsingForExpand)}},nodeExpandBegin:function(b){var a=this,c=a.itemContainer,d;if(a.collapsing){a.stopAnimation(a.collapsing)}a.callParent([b]);if(b){d=c.getHeight();c.setHeight(0);a.expanding=a.runAnimation(Ext.merge({to:{height:d},callback:a.nodeExpandDone,scope:a},b))}},nodeExpandDone:function(){this.expanding=null;this.itemContainer.setHeight(null);this.nodeExpandEnd()},removeItem:function(a){this.itemContainer.removeChild(a.element)},updateNode:function(b,a){this.syncIndent();this.callParent([b,a])},updateExpandable:function(a){this.updateExpandCls()},updateExpanded:function(b){var a=this.getNode();this.updateExpandCls();if(a){a.set('expanded',b)}},updateIconCls:function(b,c){var a=this,d=a.element;a.doIconCls(a.iconElement,b,c);a.doIconCls(a.toolElement,b,c);d.toggleCls(a.withIconCls,!!b);d.toggleCls(a.hideIconCls,b===null)},updateLeaf:function(a){this.element.toggleCls(this.leafCls,a)},updateLoading:function(a){this.element.toggleCls(this.loadingCls,a)},updateOver:function(b){var a=this;a.element.toggleCls(a.hoverCls,!!b);a.rowElement.toggleCls(a.rowHoverCls,b>1)},updateRowCls:function(b,a){this.rowElement.replaceCls(a,b)},updateSelected:function(b,e){var a=this,d=a.selectedCls,c=a.getToolElement();a.callParent([b,e]);a.element.toggleCls(d,b);if(c){c.toggleCls(d,b)}},updateSelectedParent:function(c){var a=this,b;a.element.toggleCls(a.selectedParentCls,c);b=a.getToolElement();if(b){b.toggleCls(a.selectedCls,c)}},updateText:function(a){this.textElement.update(a)},privates:{doNodeUpdate:function(a){this.callParent([a]);this.setRowCls(a&&a.data[this.rowClsProperty])},doIconCls:function(b,c,a){if(a){b.removeCls(a)}if(c){b.addCls(c)}},syncIndent:function(){var a=this,d=a.getIndent(),c=a.getNode(),b;if(c){b=c.data.depth-1;a.wrapElement.dom.style.marginLeft=b*d+'px'}},updateExpandCls:function(){if(!this.updatingExpandCls){var a=this,e=a.getExpandable(),b=a.element,f=a.getExpanded(),d=a.expandedCls,c=a.collapsedCls;a.updatingExpandCls=!0;b.toggleCls(a.expandableCls,e);if(e){b.toggleCls(d,f);b.toggleCls(c,!f)}else {b.removeCls([d,c])}a.updatingExpandCls=!1}},updateIndent:function(b,a){this.syncIndent();this.callParent([b,a])}}},function(a){a.prototype.floatedCls=[Ext.Widget.prototype.floatedCls,Ext.baseCSSPrefix+'treelist-item-floated']});Ext.define('Ext.overrides.list.TreeItem',{override:'Ext.list.TreeItem',setFloated:function(e){var a=this,c=a.element,b=a.placeholder,f,d;if(a.treeItemFloated!==e){if(e){b=c.clone(!1,!0);b.id+='-placeholder';a.placeholder=Ext.get(b);a.wasExpanded=a.getExpanded();a.setExpanded(!0);c.addCls(a.floatedCls);c.dom.parentNode.insertBefore(b,c.dom);a.floater=a.createFloater()}else {if(b){d=a.wasExpanded;f=a.getNode();a.setExpanded(d);if(!d&&f.isExpanded()){a.preventAnimation=!0;f.collapse();a.preventAnimation=!1}a.floater.remove(a,!1);c.removeCls(a.floatedCls);b.dom.parentNode.insertBefore(c.dom,b.dom);b.destroy();a.floater.destroy();a.placeholder=a.floater=null}}a.treeItemFloated=e}},getFloated:function(){return this.treeItemFloated},runAnimation:function(a){return this.itemContainer.addAnimation(a)},stopAnimation:function(a){a.jumpToEnd()},privates:{createFloater:function(){var c=this,g=c.getOwner(),a=c.up('treelist'),b,f=c.getToolElement(),d=a.expandedWidth,e=a.defaultListWidth;if(d===null){d=e}c.floater=b=new Ext.container.Container({cls:a.self.prototype.element.cls+' '+a.uiPrefix+a.getUi()+' '+Ext.baseCSSPrefix+'treelist-floater',floating:!0,width:Ext.isIE8?e:d-f.getWidth(),shadow:!1,hidden:!0,renderTo:Ext.getBody(),listeners:{element:'el',click:function(a){return g.onClick(a)}}});b.add(c);b.show();b.el.alignTo(f,'tr?');return b}}});Ext.define('Ext.theme.triton.list.TreeItem',{override:'Ext.list.TreeItem',compatibility:Ext.isIE8,setFloated:function(b,a){this.callParent([b,a]);this.toolElement.syncRepaint()}});Ext.define('Ext.list.Tree',{extend:Ext.Gadget,xtype:'treelist',mixins:[Ext.mixin.ItemRippler],expanderFirstCls:Ext.baseCSSPrefix+'treelist-expander-first',expanderOnlyCls:Ext.baseCSSPrefix+'treelist-expander-only',highlightPathCls:Ext.baseCSSPrefix+'treelist-highlight-path',microCls:Ext.baseCSSPrefix+'treelist-micro',uiPrefix:Ext.baseCSSPrefix+'treelist-',element:{reference:'element',cls:Ext.baseCSSPrefix+'treelist '+Ext.baseCSSPrefix+'unselectable',listeners:{click:'onClick',touchstart:'onTouchStart',touchend:'onTouchEnd',mouseenter:'onMouseEnter',mouseleave:'onMouseLeave',mouseover:'onMouseOver'},children:[{reference:'toolsElement',cls:Ext.baseCSSPrefix+'treelist-toolstrip',listeners:{click:'onToolStripClick',mouseover:'onToolStripMouseOver'}}]},cachedConfig:{animation:{duration:500,easing:'ease'},expanderFirst:!0,expanderOnly:!0},config:{floatLeafItems:!1,defaults:{xtype:'treelistitem'},highlightPath:null,iconSize:null,indent:null,micro:!1,overItem:null,selection:null,selectOnExpander:!1,singleExpand:null,store:null,ui:null},twoWayBindable:{selection:1},publishes:{selection:1},defaultBindProperty:'store',constructor:function(a){this.callParent([a]);this.publishState('selection',this.getSelection())},focusable:!0,tabIndex:0,keyMap:{scope:'this',UP:'onKeyUp',DOWN:'onKeyDown',LEFT:'onKeyLeft',RIGHT:'onKeyRight'},onKeyUp:function(d,b){var a=b.getSelection(),c=a?a.previousSibling:null;if(!a){return}if(c){a=c;while(b.getItem(a).getExpanded()&&a.lastChild){a=a.lastChild}}else {if(!a.parentNode.isRoot()){a=a.parentNode}}b.setSelection(a)},onKeyDown:function(f,b){var c,e=!1,a=b.getSelection(),d=b.getItem(a);if(!d){return}if(d.getExpanded()&&a.firstChild){a=a.firstChild}else {if(a.nextSibling){a=a.nextSibling}else {c=b.getSelection();while(!a.parentNode.nextSibling){if(a.parentNode.isRoot()){a=c;e=!0;break}a=a.parentNode}if(!e){a=a.parentNode.nextSibling}}}b.setSelection(a)},onKeyLeft:function(d,b){var c=b.getSelection(),a=b.getItem(c);if(a){a.collapse()}},onKeyRight:function(d,b){var c=b.getSelection(),a=b.getItem(c);if(a){a.expand()}},destroy:function(){var a=this;a.unfloatAll();a.activeFloater=null;a.setSelection(null);a.setStore(null);a.callParent()},updateOverItem:function(f,c){var e={},d=2,a,b;for(a=f;a;a=this.getItem(b.parentNode)){b=a.getNode();e[b.internalId]=!0;a.setOver(d);d=1}if(c&&!c.destroyed){for(a=c;a;a=this.getItem(b.parentNode)){b=a.getNode();if(e[b.internalId]){break}a.setOver(0)}}},applyMicro:function(a){return Boolean(a)},applySelection:function(a,c){var b=this.getStore();if(!b){a=null}if(b&&a!==null&&!(a instanceof Ext.data.Model)){a=b.getNodeById(a)}if(a&&a.get('selectable')===!1){a=c}return a},updateSelection:function(d,e){var b=this,a,c;if(!b.destroying){a=b.getItem(e);if(a){a.setSelected(!1)}a=b.getItem(d);if(a){a.setSelected(!0);while(c=a.getParentItem()){c.setExpanded(!0);a=c}}b.fireEvent('selectionchange',b,d)}},applyStore:function(a){return a&&Ext.StoreManager.lookup(a,'tree')},updateStore:function(c,b){var a=this,d;if(b){if(!b.destroyed){if(b.getAutoDestroy()){b.destroy()}else {a.storeListeners.destroy()}}a.removeRoot();a.storeListeners=null}if(c){a.storeListeners=c.on({destroyable:!0,scope:a,nodeappend:'onNodeAppend',nodecollapse:'onNodeCollapse',nodeexpand:'onNodeExpand',nodeinsert:'onNodeInsert',noderemove:'onNodeRemove',rootchange:'onRootChange',update:'onNodeUpdate',refresh:'onRefresh'});d=c.getRoot();if(d){a.createRootItem(d)}}if(!a.destroying){a.updateLayout()}},updateExpanderFirst:function(a){this.element.toggleCls(this.expanderFirstCls,a)},updateExpanderOnly:function(a){this.element.toggleCls(this.expanderOnlyCls,!a)},updateHighlightPath:function(a){this.element.toggleCls(this.highlightPathCls,a)},updateMicro:function(b){var a=this;if(!b){a.unfloatAll();a.activeFloater=null}a.element.toggleCls(a.microCls,b)},updateUi:function(e,b){var a=this,d=a.element,c=a.uiPrefix;if(b){d.removeCls(c+b)}if(e){d.addCls(c+e)}delete a.iconSize;a.syncIconSize()},getItem:function(a){var b=this.itemMap,c;if(a&&b){c=b[a.internalId]}return c||null},getItemConfig:function(b,a){return Ext.apply({parentItem:a.isRootListItem?null:a,owner:this,node:b,indent:this.getIndent()},this.getDefaults())},privates:{checkForOutsideClick:function(b){var a=this.activeFloater;if(!a.element.contains(b.target)){this.unfloatAll()}},collapsingForExpand:!1,createItem:function(d,f){var c=this,e=Ext.create(c.getItemConfig(d,f)),g=c.toolsElement,a,b;if(f.isRootListItem){a=e.getToolElement();if(a){b=c.findVisiblePreviousSibling(d);if(!b){g.insertFirst(a)}else {b=c.getItem(b);a.insertAfter(b.getToolElement())}a.dom.setAttribute('data-recordId',d.internalId);a.isTool=!0}}c.itemMap[d.internalId]=e;return e},createRootItem:function(c){var a=this,b;a.itemMap={};a.rootItem=b=new Ext.list.RootTreeItem({indent:a.getIndent(),node:c,owner:a});a.element.appendChild(b.element);a.itemMap[c.internalId]=b},findVisiblePreviousSibling:function(b){var a=b.previousSibling;while(a){if(a.data.visible){return a}a=a.previousSibling}return null},floatItem:function(b,c){var a=this,d;if(b.getFloated()){return}if(a.toolMouseListeners){a.toolMouseListeners.destroy();a.floaterMouseListeners.destroy();a.floaterMouseListeners=a.toolMouseListeners=null}a.unfloatAll();if(!c&&!a.getFloatLeafItems()&&b.getNode().isLeaf()){return}a.activeFloater=d=b;a.floatedByHover=c;b.setFloated(!0);if(c){a.toolMouseListeners=b.getToolElement().monitorMouseLeave(300,a.checkForMouseLeave,a);a.floaterMouseListeners=(b.floater||b).el.monitorMouseLeave(300,a.checkForMouseLeave,a);d.element.on('mouseover','onMouseOver',a)}else {Ext.on('mousedown','checkForOutsideClick',a)}},shouldRippleItem:function(a,b){if(a&&a.getSelected()){return !1}return this.mixins.itemrippler.shouldRippleItem.call(this,a,b)},onTouchStart:function(a){this.doItemRipple(a)},onTouchEnd:function(a){this.doItemRipple(a)},doItemRipple:function(b){var d=this,a=b.getTarget('[data-recordId]'),c;if(a){c=a.getAttribute('data-recordId');a=d.itemMap[c];if(a&&d.shouldRippleItem(a,b)){this.rippleItem(a,b)}}},onClick:function(c){var a=c.getTarget('[data-recordId]'),b;if(a){b=a.getAttribute('data-recordId');a=this.itemMap[b];if(a){a.onClick(c)}}},onMouseEnter:function(a){this.onMouseOver(a)},onMouseLeave:function(){this.setOverItem(null)},onMouseOver:function(b){var a=Ext.Component.from(b);this.setOverItem(a&&a.isTreeListItem&&a)},checkForMouseLeave:function(c){var a=this.activeFloater,b=c.getRelatedTarget();if(a){if(b!==a.getToolElement().dom&&!a.element.contains(b)){this.unfloatAll()}}},onNodeAppend:function(b,c){var a;if(b){a=this.itemMap[b.internalId];if(a){a.nodeInsert(c,null)}}},onNodeCollapse:function(b){var a=this.itemMap[b.internalId];if(a){a.nodeCollapse(b,this.collapsingForExpand)}},onNodeExpand:function(f){var a=this,b=a.itemMap[f.internalId],d,h,c,g,e;if(b){if(!b.isRootItem&&a.getSingleExpand()){a.collapsingForExpand=!0;g=(b.getParentItem()||a.rootItem).getNode();d=g.childNodes;for(c=0,h=d.length;c<h;++c){e=d[c];if(e!==f){e.collapse()}}a.collapsing=!1}b.nodeExpand(f)}},onNodeInsert:function(b,d,c){var a=this.itemMap[b.internalId];if(a){a.nodeInsert(d,c)}},onNodeRemove:function(b,d,c){var a;if(b&&!c){a=this.itemMap[b.internalId];if(a){a.nodeRemove(d)}}},onNodeUpdate:function(d,b,e,c){var a=this.itemMap[b.internalId];if(a){a.nodeUpdate(b,c)}},onRefresh:function(a){this.onRootChange(a.getRoot())},onRootChange:function(b){var a=this;a.removeRoot();if(b){a.createRootItem(b)}a.updateLayout();a.fireEvent('refresh',a)},removeItem:function(e){var c=this.itemMap,d=e.internalId,b,a;if(c){b=c[d];if(b.getParentItem()===null){a=b.getToolElement();if(a){this.toolsElement.removeChild(a)}}delete c[d]}},removeRoot:function(){var a=this,b=a.rootItem;if(b){a.element.removeChild(b.element);a.rootItem=a.itemMap=Ext.destroy(b)}},onToolStripClick:function(c){var a=c.getTarget('[data-recordId]'),b;if(a){b=a.getAttribute('data-recordId');a=this.itemMap[b];if(a){if(a===this.activeFloater){this.unfloatAll()}else {this.floatItem(a,!1)}}}},onToolStripMouseOver:function(c){var a=c.getTarget('[data-recordId]'),b;if(a){b=a.getAttribute('data-recordId');a=this.itemMap[b];if(a){this.floatItem(a,!0)}}},syncIconSize:function(){var a=this,b=a.iconSize||(a.iconSize=parseInt(a.element.getStyle('background-position'),10));a.setIconSize(b)},unfloatAll:function(){var a=this,b=a.activeFloater;if(b){b.setFloated(!1);a.activeFloater=null;if(a.floatedByHover){if(a.toolMouseListeners){a.toolMouseListeners.destroy();a.floaterMouseListeners.destroy();a.floaterMouseListeners=a.toolMouseListeners=null}b.element.un('mouseover','onMouseOver',a)}else {Ext.un('mousedown','checkForOutsideClick',a)}}},defaultIconSize:22,updateIconSize:function(a){this.setIndent(a||this.defaultIconSize)},updateIndent:function(b){var a=this.rootItem;if(a){a.setIndent(b)}}}});Ext.define('Ext.overrides.list.Tree',{override:'Ext.list.Tree',canMeasure:!0,constructor:function(a){this.callParent([a]);if(!Ext.isIE8){this.element.on('resize','onElResize',this)}},beforeLayout:function(){this.syncIconSize()},onElResize:function(b,a){if(!this.getMicro()&&this.canMeasure){this.expandedWidth=a.width}},privates:{defaultListWidth:200,expandedWidth:null}});Ext.define('Ext.mixin.StyleCacher',{extend:Ext.Mixin,mixinConfig:{id:'stylecacher'},getCachedStyle:function(c,b){var a=this.$styleCache;if(!a){a=this.$styleCache={}}if(!(b in a)){a[b]=Ext.fly(c).getStyle(b)}return a[b]}});Ext.define('Ext.perf.Accumulator',function(){var b=null,d=Ext.global['chrome'],c,a=function(){var b,c;a=Ext.now;if(Ext.isChrome&&d&&d.Interval){b=new d.Interval();b.start();a=function(){return b.microseconds()/1000}}else {if(window.ActiveXObject){try{c=new ActiveXObject('SenchaToolbox.Toolbox');Ext.senchaToolbox=c;a=function(){return c.milliseconds}}catch(e){}}}Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=a;return a()};function adjustSet(a,b){a.sum+=b;a.min=Math.min(a.min,b);a.max=Math.max(a.max,b)}function leaveFrame(f){var d=f?f:a()-this.time,e=this,c=e.accum;++c.count;if(!--c.depth){adjustSet(c.total,d)}adjustSet(c.pure,d-e.childTime);b=e.parent;if(b){++b.accum.childCount;b.childTime+=d}}function makeSet(){return {min:Number.MAX_VALUE,max:0,sum:0}}function makeTap(b,a){return function(){var c=b.enter(),d=a.apply(this,arguments);c.leave();return d}}function setToJSON(d,e,b,c){var a={avg:0,min:c.min,max:c.max,sum:0};if(d){b=b||0;a.sum=c.sum-e*b;a.avg=a.sum/d}return a}return {constructor:function(b){var a=this;a.count=a.childCount=a.depth=a.maxDepth=0;a.pure=makeSet();a.total=makeSet();a.name=b},statics:{getTimestamp:a},format:function(b){var a;if(!c){c=new Ext.XTemplate(['{name} - {count} call(s)','<tpl if="count">','<tpl if="childCount">',' ({childCount} children)','</tpl>','<tpl if="depth - 1">',' ({depth} deep)','</tpl>','<tpl for="times">',', {type}: {[this.time(values.sum)]} msec (','avg={[this.time(values.sum / parent.count)]}',')','</tpl>','</tpl>'].join(''),{time:function(a){return Math.round(a*100)/100}})}a=this.getData(b);a.name=this.name;a.pure.type='Pure';a.total.type='Total';a.times=[a.pure,a.total];return c.apply(a)},getData:function(b){var a=this;return {count:a.count,childCount:a.childCount,depth:a.maxDepth,pure:setToJSON(a.count,a.childCount,b,a.pure),total:setToJSON(a.count,a.childCount,b,a.total)}},enter:function(){var c=this,d={accum:c,leave:leaveFrame,childTime:0,parent:b};++c.depth;if(c.maxDepth<c.depth){c.maxDepth=c.depth}b=d;d.time=a();return d},monitor:function(c,a,b){var d=this.enter();if(b){c.apply(a,b)}else {c.call(a)}d.leave()},report:function(){Ext.log(this.format())},tap:function(d,g){var j=this,k=typeof g==='string'?[g]:g,b,f,a,h,e,c,i,l;l=function(){if(typeof d==='string'){b=Ext.global;h=d.split('.');for(a=0,e=h.length;a<e;++a){b=b[h[a]]}}else {b=d}for(a=0,e=k.length;a<e;++a){c=k[a];f=c.charAt(0)==='!';if(f){c=c.substring(1)}else {f=!(c in b.prototype)}i=f?b:b.prototype;i[c]=makeTap(j,i[c])}};Ext.ClassManager.onCreated(l,j,d);return j}}},function(){Ext.perf.getTimestamp=this.getTimestamp});Ext.define('Ext.perf.Monitor',{singleton:!0,alternateClassName:'Ext.Perf',constructor:function(){this.accumulators=[];this.accumulatorsByName={}},calibrate:function(){var d=new Ext.perf.Accumulator('$'),g=d.total,a=Ext.perf.Accumulator.getTimestamp,e=0,f,c,b;b=a();do{f=d.enter();f.leave();++e}while(g.sum<100);c=a();return (c-b)/e},get:function(b){var c=this,a=c.accumulatorsByName[b];if(!a){c.accumulatorsByName[b]=a=new Ext.perf.Accumulator(b);c.accumulators.push(a)}return a},enter:function(a){return this.get(a).enter()},monitor:function(b,c,a){this.get(b).monitor(c,a)},report:function(){var a=this,b=a.accumulators,c=a.calibrate();b.sort(function(a,b){return a.name<b.name?-1:b.name<a.name?1:0});a.updateGC();Ext.log('Calibration: '+Math.round(c*100)/100+' msec/sample');Ext.each(b,function(a){Ext.log(a.format(c))})},getData:function(c){var a={},b=this.accumulators;Ext.each(b,function(b){if(c||b.count){a[b.name]=b.getData()}});return a},reset:function(){Ext.each(this.accumulators,function(b){var a=b;a.count=a.childCount=a.depth=a.maxDepth=0;a.pure={min:Number.MAX_VALUE,max:0,sum:0};a.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var b=this.accumulatorsByName.GC,c=Ext.senchaToolbox,a;if(b){b.count=c.garbageCollectionCounter||0;if(b.count){a=b.pure;b.total.sum=a.sum=c.garbageCollectionMilliseconds;a.min=a.max=a.sum/b.count;a=b.total;a.min=a.max=a.sum/b.count}}},watchGC:function(){var a=Ext.senchaToolbox;Ext.perf.getTimestamp();if(a){this.get('GC');a.watchGarbageCollector(!1)}},setup:function(a){var d,c,f,b,e;if(!a){a={render:{'Ext.Component':'render'},layout:{'Ext.layout.Context':'run'}}}this.currentConfig=a;for(d in a){if(a.hasOwnProperty(d)){c=a[d];f=Ext.Perf.get(d);for(b in c){if(c.hasOwnProperty(b)){e=c[b];f.tap(b,e)}}}}this.watchGC()},setupLog:function(e){var a,f,d,b,c;for(a in e){if(e.hasOwnProperty(a)){f=Ext.ClassManager.get(a);if(f){d=e[a];c={};for(b in d){c[b]=function(b,a){return function(){var g,c,f,d,h;g=+Date.now();h=this.callParent(arguments);c=+Date.now()-g;if(window.console&&c>0){d=a==='this'?this:typeof a==='string'?this[a]:typeof a==='number'?arguments[a]:null;if(d){f=d.id}if(f!=null){console.log(b+' for '+f+': '+c+'ms')}else {console.log(b+' for unknown: '+c+'ms')}if(console.trace){console.trace()}}return h}}(b,d[b])}Ext.override(f,c)}}}}});Ext.define('Ext.plugin.AbstractClipboard',{extend:Ext.plugin.Abstract,cachedConfig:{formats:{text:{get:'getTextData',put:'putTextData'}}},config:{memory:null,source:'system',system:'text',gridListeners:null},destroy:function(){var a=this,c=a.keyMap,b=a.shared;Ext.destroy(a.destroyListener);if(c){a.keyMap=Ext.destroy(c);if(!--b.counter){b.textArea=Ext.destroy(b.textArea)}}else {a.renderListener=Ext.destroy(a.renderListener)}a.callParent()},init:function(b){var a=this,c=a.getGridListeners();if(b.rendered){a.finishInit(b)}else {if(c){a.renderListener=b.on(Ext.apply({scope:a,destroyable:!0,single:!0},c))}}},onCmpReady:function(){this.renderListener=null;this.finishInit(this.getCmp())},getTarget:function(a){return a.el},privates:{shared:{counter:0,data:null,textArea:null},applyMemory:function(a){a=this.applySource(a);return a},applySource:function(a){if(a){if(Ext.isString(a)){a=[a]}else {if(a.length===0){a=null}}}return a||null},doCutCopy:function(h,g){var a=this,d=a.allFormats||a.syncFormats(),c=a.getData(g,d),f=a.getMemory(),b=a.getSystem(),e;if(a.validateAction(h)===!1){return}a.shared.data=f&&c;if(b){e=c[b];if(d[b]<3){delete c[b]}a.setClipboardData(e)}},doPaste:function(a,c){var b=this.getFormats();this[b[a].put](c,a)},finishInit:function(b){var a=this;a.keyMap=new Ext.util.KeyMap({target:a.getTarget(b),ignoreInputFields:!0,binding:[{ctrl:!0,key:'x',fn:a.onCut,scope:a},{ctrl:!0,key:'c',fn:a.onCopy,scope:a},{ctrl:!0,key:'v',fn:a.onPaste,scope:a}]});++a.shared.counter;a.destroyListener=b.on({destroyable:!0,destroy:'destroy',scope:a})},getData:function(h,a){var f=this,e=f.getFormats(),d,g,b,c;if(Ext.isString(a)){d=f[e[a].get](a,h)}else {d={};c=[];if(a){for(b in a){c.push(b)}}else {c=Ext.Object.getAllKeys(e)}for(g=c.length;g-->0;){d[b]=f[e[b].get](b,h&&!g)}}return d},getHiddenTextArea:function(){var b=this.shared,a;a=b.textArea;if(!a){a=b.textArea=Ext.getBody().createChild({tag:'textarea',tabIndex:-1,style:{position:'absolute',top:'-1000px',width:'1px',height:'1px'}});a.suspendFocusEvents()}return a},onCopy:function(b,a){this.doCutCopy(a,!1)},onCut:function(b,a){this.doCutCopy(a,!0)},onPaste:function(h,g){var b=this,d=b.shared.data,e=b.getSource(),c,f,a;if(b.validateAction(g)===!1){return}if(e){for(c=0,f=e.length;c<f;++c){a=e[c];if(a==='system'){a=b.getSystem();b.pasteClipboardData(a);break}else {if(d&&a in d){b.doPaste(a,d[a]);break}}}}},pasteClipboardData:function(e){var c=this,d=window.clipboardData,b,a;if(d&&d.getData){c.doPaste(e,d.getData('text'))}else {a=Ext.Element.getActiveElement(!0);b=c.getHiddenTextArea().dom;b.value='';if(a){a.suspendFocusEvents()}b.focus();Ext.defer(function(){if(a){a.focus();a.resumeFocusEvents()}c.doPaste(e,b.value);b.value=''},100,c)}},setClipboardData:function(d){var e=this,c=window.clipboardData,b,a;if(c&&c.setData){c.setData('text',d)}else {b=e.getHiddenTextArea().dom;a=Ext.Element.getActiveElement(!0);b.value=d;if(a){a.suspendFocusEvents()}b.focus();b.select();Ext.defer(function(){b.value='';if(a){a.focus();a.resumeFocusEvents()}},50)}},syncFormats:function(){var c=this,a={},b=c.getMemory(),f=c.getSystem(),d,e;if(f){a[f]=1}if(b){for(d=b.length;d-->0;){e=b[d];a[e]=a[e]?3:2}}return c.allFormats=a},updateMemory:function(){this.allFormats=null},updateSystem:function(){this.allFormats=null},validateAction:Ext.privateFn}});Ext.define('Ext.plugin.MouseEnter',{extend:Ext.plugin.Abstract,alias:'plugin.mouseenter',element:'el',init:function(c){var a=this,d={mouseover:'onMouseEvent',scope:a,destroyable:!0},b=a.element;if(a.leaveHandler||a.delay){d.mouseout='onMouseEvent'}if(typeof b==='string'){b=c[a.element]}if(b){a.mouseListener=Ext.get(b).on(d)}else {c.on({render:function(){a.mouseListener=c[a.element].on(d)},single:!0})}},onMouseEvent:function(c){var a=this,b=c.getTarget(a.delegate);if(b&&b!==c.getRelatedTarget(a.delegate)){if(a.delay){Ext.undefer(a.mouseEventTimer);a.mouseEventTimer=Ext.defer(a.handleMouseEvent,a.delay,a,[c,b])}else {a.handleMouseEvent(c,b)}}},handleMouseEvent:function(b,c){var a=this;if(b.type==='mouseover'){Ext.callback(a.handler,null,[b,c],0,a.cmp,a.scope)}else {if(a.leaveHandler){Ext.callback(a.leaveHandler,null,[b,c],0,a.cmp,a.scope)}}},destroy:function(){Ext.destroy(this.mouseListener);this.callParent()}});Ext.define('Ext.sparkline.Shape',{constructor:function(b,e,d,c){var a=this;a.target=b;a.id=e;a.type=d;a.args=c},append:function(){this.target.appendShape(this);return this}});Ext.define('Ext.sparkline.CanvasBase',{shapeCount:0,_pxregex:/(\d+)(px)?\s*$/i,constructor:function(a){this.owner=a;this.rtl=this.owner.getInherited().rtl},setWidth:function(a){this.pixelWidth=a},setHeight:function(a){this.pixelHeight=a},drawLine:function(c,e,d,f,a,b){return this.drawShape([[c,e],[d,f]],a,b)},drawShape:function(d,b,a,c){return this._genShape('Shape',[d,b,a,c])},drawCircle:function(e,f,d,b,a,c){return this._genShape('Circle',[e,f,d,b,a,c])},drawPieSlice:function(f,g,e,a,d,c,b){return this._genShape('PieSlice',[f,g,e,a,d,c,b])},drawRect:function(e,f,d,c,b,a){return this._genShape('Rect',[e,f,d,c,b,a])},getElement:function(){return this.el},getLastShapeId:function(){return this.lastShapeId},reset:function(){},_genShape:function(c,a){var b=this.shapeCount++;a.unshift(b);return new Ext.sparkline.Shape(this,b,c,a)},appendShape:function(a){},replaceWithShape:function(a,b){},insertAfterShape:function(a,b){},removeShapeId:function(a){},getShapeAt:function(a,b){},render:function(){}});Ext.define('Ext.sparkline.CanvasCanvas',{extend:Ext.sparkline.CanvasBase,statics:{contextOverrides:function(){var a=window.devicePixelRatio||1;return {moveTo:function(b,c){if(this.rtl){b=this.canvas.width-b-1}this.$moveTo(b*a,c*a)},lineTo:function(b,c){if(this.rtl){b=this.canvas.width-b-1}this.$lineTo(b*a,c*a)},arc:function(b,g,f,d,e,c){if(this.rtl){b=this.canvas.width-b-1}this.$arc(b*a,g*a,f*a,d,e,c)},clearRect:function(b,e,c,d){if(this.rtl){b=this.canvas.width-b-c}this.$clearRect(b*a,e*a,c*a,d*a)}}}()},setWidth:function(a){this.callParent(arguments);this.owner.element.dom.width=a*(window.devicePixelRatio||1)},setHeight:function(a){this.callParent(arguments);this.owner.element.dom.height=a*(window.devicePixelRatio||1)},onOwnerUpdate:function(){var a=this;a.el=a.owner.element;a.interact=!a.owner.initialConfig.disableInteraction;a.shapes={};a.shapeseq=[];a.currentTargetShapeId=a.lastShapeId=null},_getContext:function(e,d,f){var a=this.context,b,c;if(!a){this.context=a=this.el.dom.getContext('2d');b=Ext.sparkline.CanvasCanvas.contextOverrides;for(c in b){a['$'+c]=a[c]}Ext.apply(a,b);a.rtl=this.rtl}if(e!=null){a.strokeStyle=e}a.lineWidth=f||1;if(d!=null){a.fillStyle=d}return a},reset:function(){var a=this._getContext();a.clearRect(0,0,this.pixelWidth,this.pixelHeight);this.shapes={};this.shapeseq=[];this.currentTargetShapeId=this.lastShapeId=null},_drawShape:function(i,b,e,d,h){var a=this._getContext(e,d,h),f=this.rtl?-0.5:0.5,c,g;a.beginPath();a.moveTo(b[0][0]+f,b[0][1]+0.5);for(c=1,g=b.length;c<g;c++){a.lineTo(b[c][0]+f,b[c][1]+0.5)}if(e!=null){a.stroke()}if(d!=null){a.fill()}if(this.targetX!=null&&this.targetY!=null&&a.isPointInPath(this.targetX,this.targetY)){this.currentTargetShapeId=i}},_drawCircle:function(e,g,h,f,c,b,d){var a=this._getContext(c,b,d);a.beginPath();a.arc(g,h,f,0,2*Math.PI,!1);if(this.targetX!=null&&this.targetY!=null&&a.isPointInPath(this.targetX,this.targetY)){this.currentTargetShapeId=e}if(c!=null){a.stroke()}if(b!=null){a.fill()}},_drawPieSlice:function(h,b,c,i,f,g,e,d){var a=this._getContext(e,d);a.beginPath();a.moveTo(b,c);a.arc(b,c,i,f,g,!1);a.lineTo(b,c);a.closePath();if(e!=null){a.stroke()}if(d){a.fill()}if(this.targetX!==undefined&&this.targetY!==undefined&&a.isPointInPath(this.targetX,this.targetY)){this.currentTargetShapeId=h}},_drawRect:function(g,a,b,d,c,f,e){return this._drawShape(g,[[a,b],[a+d,b],[a+d,b+c],[a,b+c],[a,b]],f,e)},appendShape:function(a){this.shapes[a.id]=a;this.shapeseq.push(a.id);this.lastShapeId=a.id;return a.id},replaceWithShape:function(d,c){var b=this.shapeseq,a;this.shapes[c.id]=c;for(a=b.length;a--;){if(b[a]===d){b[a]=c.id}}delete this.shapes[d]},replaceWithShapes:function(e,c){var b=this.shapeseq,f={},d,a,g;for(a=e.length;a--;){f[e[a]]=!0}for(a=b.length;a--;){d=b[a];if(f[d]){b.splice(a,1);delete this.shapes[d];g=a}}for(a=c.length;a--;){b.splice(g,0,c[a].id);this.shapes[c[a].id]=c[a]}},insertAfterShape:function(d,c){var b=this.shapeseq,a;for(a=b.length;a--;){if(b[a]===d){b.splice(a+1,0,c.id);this.shapes[c.id]=c;return}}},removeShapeId:function(c){var b=this.shapeseq,a;for(a=b.length;a--;){if(b[a]===c){b.splice(a,1);break}}delete this.shapes[c]},getShapeAt:function(a,b){if(this.rtl){a=this.el.dom.width-a-1}this.targetX=a;this.targetY=b;this.render();return this.currentTargetShapeId},render:function(){var c=this.shapeseq,g=this.shapes,e=c.length,f=this._getContext(),d,b,a;f.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(a=0;a<e;a++){d=c[a];b=g[d];this['_draw'+b.type].apply(this,b.args)}if(!this.interact){this.shapes={};this.shapeseq=[]}}});Ext.define('Ext.sparkline.VmlCanvas',{extend:Ext.sparkline.CanvasBase,setWidth:function(b){var a=this;a.callParent(arguments);a.owner.groupEl.dom.coordsize=a.width+' '+(a.height||0);a.owner.groupEl.dom.style.width=b+'px'},setHeight:function(b){var a=this;a.callParent(arguments);a.owner.groupEl.dom.coordsize=(a.width||0)+' '+a.height;a.owner.groupEl.dom.style.height=b+'px'},onOwnerUpdate:function(){var a=this;a.group=a.owner.groupEl;a.el=a.owner.element;a.prerender=[]},_drawShape:function(l,d,f,e,c){var a=[],g,i,j,h,k,b;for(b=0,k=d.length;b<k;b++){a[b]=d[b][0]+','+d[b][1]}g=a.splice(0,1);c=c==null?1:c;i=f==null?' stroked="false" ':' strokeWeight="'+c+'px" strokeColor="'+f+'" ';j=e==null?' filled="false"':' fillColor="'+e+'" filled="true" ';h=a[0]===a[a.length-1]?'x ':'';return ['<svml:shape coordorigin="0 0" coordsize="',this.pixelWidth,' ',this.pixelHeight,'" id="jqsshape',l,'" ',i,j,' style="position:absolute;height:',this.pixelHeight,'px;width:',this.pixelWidth,'px" ',' path="m ',g,' l ',a.join(', '),' ',h,'e"></svml:shape>'].join('')},_drawCircle:function(j,g,h,a,d,c,i){var b=a*2,e,f;g-=a;h-=a;e=d==null?' stroked="false" ':' strokeWeight="'+i+'px" strokeColor="'+d+'" ';f=c==null?' filled="false"':' fillColor="'+c+'" filled="true" ';return ['<svml:oval id="jqsshape',j,'" ',e,f,' style="position:absolute;top:',h,'px; left:',g,'px;width:',b,'px;height:',b,'px"></svml:oval>'].join('')},_drawPieSlice:function(q,d,e,a,b,c,k,j){var n,o=this.pixelWidth,l=this.pixelHeight,f,g,h,i,m,p;m=k==null?' stroked="false" ':' strokeWeight="1px" strokeColor="'+k+'" ';p=j==null?' filled="false"':' fillColor="'+j+'" filled="true" ';if(b===c){return ''}if(c-b===2*Math.PI){b=0;c=2*Math.PI}f=d+Math.round(Math.cos(b)*a);g=e+Math.round(Math.sin(b)*a);h=d+Math.round(Math.cos(c)*a);i=e+Math.round(Math.sin(c)*a);if(f===h&&g===i){if(c-b<Math.PI){return ''}f=h=d+a;g=i=e}if(f===h&&g===i&&c-b<Math.PI){return ''}n=[d-a,e-a,d+a,e+a,f,g,h,i];return ['<svml:shape coordorigin="0 0" coordsize="',o,' ',l,'" id="jqsshape',q,'" ',m,p,' style="position:absolute;height:',l,'px;width:',o,'px" path="m ',d,',',e,' wa ',n.join(', '),' x e"></svml:shape>'].join('')},_drawRect:function(g,a,b,d,c,f,e){return this._drawShape(g,[[a,b],[a,b+c],[a+d,b+c],[a+d,b],[a,b]],f,e)},reset:function(){Ext.fly(this.group).empty()},appendShape:function(a){this.prerender.push(this['_draw'+a.type].apply(this,a.args));this.lastShapeId=a.id;return a.id},replaceWithShape:function(c,a){var b=this.el.getById('jqsshape'+c,!0),d=this['_draw'+a.type].apply(this,a.args);b.outerHTML=d},replaceWithShapes:function(b,c){var e=this.el.getById('jqsshape'+b[0],!0),d='',f=c.length,a;for(a=0;a<f;a++){d+=this['_draw'+c[a].type].apply(this,c[a].args)}e.outerHTML=d;for(a=1;a<b.length;a++){this.el.getById('jqsshape'+b[a]).destroy()}},insertAfterShape:function(c,a){var b=this.el.getById('jqsshape'+c,!0),d=this['_draw'+a.type].apply(this,a.args);b.insertAdjacentHTML('afterEnd',d)},removeShapeId:function(b){var a=this.el.getById('jqsshape'+b,!0);this.group.removeChild(a)},getShapeAt:function(b,c){var a=this.el.id.substr(8);return a},render:function(){this.group.dom.innerHTML=this.prerender.join('')}},function(){Ext.onInternalReady(function(){var a=document;if(a.namespaces&&!a.namespaces.svml){a.namespaces.add('svml','urn:schemas-microsoft-com:vml','#default#VML')}})});Ext.define('Ext.util.Color',{alternateClassName:'Ext.draw.Color',statics:{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbToHexRe:/\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbaToHexRe:/\s*rgba\((\d+),\s*(\d+),\s*(\d+),\s*([.\d]+)\)/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,NONE:'none',RGBA_NONE:'rgba(0, 0, 0, 0)'},isColor:!0,lightnessFactor:0.2,constructor:function(d,b,c,a){this.setRGB(d,b,c,a)},clone:function(){var a=this;return new this.self(a.r,a.g,a.b,a.a)},setRGB:function(e,c,d,b){var a=this;a.r=Math.min(255,Math.max(0,e));a.g=Math.min(255,Math.max(0,c));a.b=Math.min(255,Math.max(0,d));if(b===undefined){a.a=1}else {a.a=Math.min(1,Math.max(0,b))}},getBrightness:function(){var c=this.r/255*100,b=this.g/255*100,a=this.b/255*100;return (c*299+b*587+a*114)/1000},getGrayscale:function(){return this.r*0.3+this.g*0.59+this.b*0.11},getHSL:function(){var h=this,f=h.r/255,e=h.g/255,g=h.b/255,b=Math.max(f,e,g),d=Math.min(f,e,g),c=b-d,a,j=0,i=0.5*(b+d);if(d!==b){j=i<=0.5?c/(b+d):c/(2-b-d);if(f===b){a=60*(e-g)/c}else {if(e===b){a=120+60*(g-f)/c}else {a=240+60*(f-e)/c}}if(a<0){a+=360}if(a>=360){a-=360}}return [a,j,i]},getHSV:function(){var g=this,d=g.r/255,c=g.g/255,f=g.b/255,b=Math.max(d,c,f),i=Math.min(d,c,f),e=b-i,a,j=0,h=b;if(i!=b){j=h?e/h:0;if(d===b){a=60*(c-f)/e}else {if(c===b){a=60*(f-d)/e+120}else {a=60*(d-c)/e+240}}if(a<0){a+=360}if(a>=360){a-=360}}return [a,j,h]},setHSL:function(f,g,c){var d=this,h=Math.abs,b,e,a;f=(f%360+360)%360;g=g>1?1:g<0?0:g;c=c>1?1:c<0?0:c;if(g===0||f===null){c*=255;d.setRGB(c,c,c)}else {f/=60;b=g*(1-h(2*c-1));e=b*(1-h(f%2-1));a=c-b/2;a*=255;b*=255;e*=255;switch(Math.floor(f)){case 0:d.setRGB(b+a,e+a,a);break;case 1:d.setRGB(e+a,b+a,a);break;case 2:d.setRGB(a,b+a,e+a);break;case 3:d.setRGB(a,e+a,b+a);break;case 4:d.setRGB(e+a,a,b+a);break;case 5:d.setRGB(b+a,a,e+a);break;}}return d},setHSV:function(f,g,c){var d=this,b,e,a;f=(f%360+360)%360;g=g>1?1:g<0?0:g;c=c>1?1:c<0?0:c;if(g===0||f===null){c*=255;d.setRGB(c,c,c)}else {f/=60;b=c*g;e=b*(1-Math.abs(f%2-1));a=c-b;a*=255;b*=255;e*=255;switch(Math.floor(f)){case 0:d.setRGB(b+a,e+a,a);break;case 1:d.setRGB(e+a,b+a,a);break;case 2:d.setRGB(a,b+a,e+a);break;case 3:d.setRGB(a,e+a,b+a);break;case 4:d.setRGB(e+a,a,b+a);break;case 5:d.setRGB(b+a,a,e+a);break;}}return d},createLighter:function(b){var a=this.clone();a.lighten(b);return a},lighten:function(a){var b;if(!a&&a!==0){a=this.lightnessFactor}b=this.getHSL();this.setHSL(b[0],b[1],Ext.Number.constrain(b[2]+a,0,1))},createDarker:function(b){var a=this.clone();a.darken(b);return a},darken:function(a){if(!a&&a!==0){a=this.lightnessFactor}return this.lighten(-a)},toString:function(){var a=this,b=Math.round,e,d,c;if(a.a===1){e=b(a.r).toString(16);d=b(a.g).toString(16);c=b(a.b).toString(16);e=e.length===1?'0'+e:e;d=d.length===1?'0'+d:d;c=c.length===1?'0'+c:c;return ['#',e,d,c].join('')}else {return 'rgba('+[b(a.r),b(a.g),b(a.b),a.a===0?0:a.a.toFixed(15)].join(', ')+')'}},toHex:function(e){var d=this.r,c=this.g,b=this.b,a=b|c<<8|d<<16;return '#'+('000000'+a.toString(16)).slice(-6)},setFromString:function(b){var a,c,e,d,g=1,f=parseInt;if(b===Ext.util.Color.NONE){this.r=this.g=this.b=this.a=0;return this}if((b.length===4||b.length===7)&&b.substr(0,1)==='#'){a=b.match(Ext.util.Color.hexRe);if(a){c=f(a[1],16)>>0;e=f(a[2],16)>>0;d=f(a[3],16)>>0;if(b.length===4){c+=c*16;e+=e*16;d+=d*16}}}else {if(a=b.match(Ext.util.Color.rgbToHexRe)){c=+a[1];e=+a[2];d=+a[3]}else {if(a=b.match(Ext.util.Color.rgbaToHexRe)){c=+a[1];e=+a[2];d=+a[3];g=+a[4]}else {if(Ext.util.Color.ColorList.hasOwnProperty(b.toLowerCase())){return this.setFromString(Ext.util.Color.ColorList[b.toLowerCase()])}}}}if(typeof c==='undefined'){return this}this.r=c;this.g=e;this.b=d;this.a=g;return this}},function(){var a=new this();this.addStatics({fly:function(b,d,e,c){switch(arguments.length){case 1:a.setFromString(b);break;case 3:case 4:a.setRGB(b,d,e,c);break;default:return null;}return a},ColorList:{aliceblue:'#f0f8ff',antiquewhite:'#faebd7',aqua:'#00ffff',aquamarine:'#7fffd4',azure:'#f0ffff',beige:'#f5f5dc',bisque:'#ffe4c4',black:'#000000',blanchedalmond:'#ffebcd',blue:'#0000ff',blueviolet:'#8a2be2',brown:'#a52a2a',burlywood:'#deb887',cadetblue:'#5f9ea0',chartreuse:'#7fff00',chocolate:'#d2691e',coral:'#ff7f50',cornflowerblue:'#6495ed',cornsilk:'#fff8dc',crimson:'#dc143c',cyan:'#00ffff',darkblue:'#00008b',darkcyan:'#008b8b',darkgoldenrod:'#b8860b',darkgray:'#a9a9a9',darkgreen:'#006400',darkkhaki:'#bdb76b',darkmagenta:'#8b008b',darkolivegreen:'#556b2f',darkorange:'#ff8c00',darkorchid:'#9932cc',darkred:'#8b0000',darksalmon:'#e9967a',darkseagreen:'#8fbc8f',darkslateblue:'#483d8b',darkslategray:'#2f4f4f',darkturquoise:'#00ced1',darkviolet:'#9400d3',deeppink:'#ff1493',deepskyblue:'#00bfff',dimgray:'#696969',dodgerblue:'#1e90ff',firebrick:'#b22222',floralwhite:'#fffaf0',forestgreen:'#228b22',fuchsia:'#ff00ff',gainsboro:'#dcdcdc',ghostwhite:'#f8f8ff',gold:'#ffd700',goldenrod:'#daa520',gray:'#808080',green:'#008000',greenyellow:'#adff2f',honeydew:'#f0fff0',hotpink:'#ff69b4',indianred:'#cd5c5c',indigo:'#4b0082',ivory:'#fffff0',khaki:'#f0e68c',lavender:'#e6e6fa',lavenderblush:'#fff0f5',lawngreen:'#7cfc00',lemonchiffon:'#fffacd',lightblue:'#add8e6',lightcoral:'#f08080',lightcyan:'#e0ffff',lightgoldenrodyellow:'#fafad2',lightgray:'#d3d3d3',lightgrey:'#d3d3d3',lightgreen:'#90ee90',lightpink:'#ffb6c1',lightsalmon:'#ffa07a',lightseagreen:'#20b2aa',lightskyblue:'#87cefa',lightslategray:'#778899',lightsteelblue:'#b0c4de',lightyellow:'#ffffe0',lime:'#00ff00',limegreen:'#32cd32',linen:'#faf0e6',magenta:'#ff00ff',maroon:'#800000',mediumaquamarine:'#66cdaa',mediumblue:'#0000cd',mediumorchid:'#ba55d3',mediumpurple:'#9370d8',mediumseagreen:'#3cb371',mediumslateblue:'#7b68ee',mediumspringgreen:'#00fa9a',mediumturquoise:'#48d1cc',mediumvioletred:'#c71585',midnightblue:'#191970',mintcream:'#f5fffa',mistyrose:'#ffe4e1',moccasin:'#ffe4b5',navajowhite:'#ffdead',navy:'#000080',oldlace:'#fdf5e6',olive:'#808000',olivedrab:'#6b8e23',orange:'#ffa500',orangered:'#ff4500',orchid:'#da70d6',palegoldenrod:'#eee8aa',palegreen:'#98fb98',paleturquoise:'#afeeee',palevioletred:'#d87093',papayawhip:'#ffefd5',peachpuff:'#ffdab9',peru:'#cd853f',pink:'#ffc0cb',plum:'#dda0dd',powderblue:'#b0e0e6',purple:'#800080',red:'#ff0000',rosybrown:'#bc8f8f',royalblue:'#4169e1',saddlebrown:'#8b4513',salmon:'#fa8072',sandybrown:'#f4a460',seagreen:'#2e8b57',seashell:'#fff5ee',sienna:'#a0522d',silver:'#c0c0c0',skyblue:'#87ceeb',slateblue:'#6a5acd',slategray:'#708090',snow:'#fffafa',springgreen:'#00ff7f',steelblue:'#4682b4',tan:'#d2b48c',teal:'#008080',thistle:'#d8bfd8',tomato:'#ff6347',turquoise:'#40e0d0',violet:'#ee82ee',wheat:'#f5deb3',white:'#ffffff',whitesmoke:'#f5f5f5',yellow:'#ffff00',yellowgreen:'#9acd32'},fromHSL:function(a,c,b){return (new this(0,0,0,0)).setHSL(a,c,b)},fromHSV:function(a,b,c){return (new this(0,0,0,0)).setHSL(a,b,c)},fromString:function(a){return (new this(0,0,0,0)).setFromString(a)},create:function(a){if(a instanceof this){return a}else {if(Ext.isArray(a)){return new Ext.util.Color(a[0],a[1],a[2],a[3])}else {if(Ext.isString(a)){return Ext.util.Color.fromString(a)}else {if(arguments.length>2){return new Ext.util.Color(arguments[0],arguments[1],arguments[2],arguments[3])}else {return new Ext.util.Color(0,0,0,0)}}}}}})});Ext.define('Ext.sparkline.Base',{extend:Ext.Gadget,xtype:'sparkline',cachedConfig:{lineColor:'#157fcc',defaultPixelsPerValue:3,tagValuesAttribute:'values',enableTagOptions:!1,enableHighlight:!0,highlightColor:null,highlightLighten:0.1,tooltipSkipNull:!0,tooltipPrefix:'',tooltipSuffix:'',disableTooltips:!1,disableInteraction:!1,tipTpl:null},config:{values:null},baseCls:Ext.baseCSSPrefix+'sparkline',element:{tag:'canvas',reference:'element',style:{display:'inline-block',verticalAlign:'top'},listeners:{mouseenter:'onMouseEnter',mouseleave:'onMouseLeave',mousemove:'onMouseMove'},width:0,height:0},defaultBindProperty:'values',redrawQueue:{},inheritableStatics:{onClassCreated:function(d){var e=d.prototype.updateConfigChange,b=d.prototype,f=d.getConfigurator().configs,c,a;for(c in f){if(c!=='tipTpl'){a=Ext.Config.get(c).names.update;if(b[a]){b[a]=Ext.Function.createSequence(b[a],e)}else {b[a]=e}}}}},constructor:function(c){var a=this,b=Ext.sparkline;a.canvas=Ext.supports.Canvas?new b.CanvasCanvas(a):new b.VmlCanvas(a);a.callParent([c])},all:function(d,b,c){var a;for(a=b.length;a--;){if(c&&b[a]===null){continue}if(b[a]!==d){return !1}}return !0},updateConfigChange:function(b){var a=this;if(a.bufferRedraw||!a.height||!a.width){a.redrawQueue[a.getId()]=a;if(!a.redrawTimer){Ext.sparkline.Base.prototype.redrawTimer=Ext.raf(a.processRedrawQueue)}}else {a.redraw()}return b},applyTipTpl:function(a){if(a&&!a.isTemplate){a=new Ext.XTemplate(a)}return a},normalizeValue:function(a){var b;switch(a){case 'undefined':a=undefined;break;case 'null':a=null;break;case 'true':a=!0;break;case 'false':a=!1;break;default:b=parseFloat(a);if(a==b){a=b};}return a},normalizeValues:function(c){var a,b=[];for(a=c.length;a--;){b[a]=this.normalizeValue(c[a])}return b},updateWidth:function(b,d){var a=this,e=a.element.dom,c=a.measurer;a.callParent([b,d]);a.canvas.setWidth(b);a.width=b;if(a.height==null&&c){a.setHeight(parseInt(c.getCachedStyle(e.parentNode,'line-height'),10))}},updateHeight:function(a,c){var b=this;b.callParent([a,c]);b.canvas.setHeight(a);b.height=a},setValues:function(a){var b=this,c=b.getValues();a=a==null?[]:Ext.Array.from(a);b.values=a;b.callParent([a]);if(a===c){b.updateValues([a,c])}},redraw:function(){var a=this;if(!a.destroyed){a.canvas.onOwnerUpdate();a.canvas.reset();if(a.getValues()){a.onUpdate();a.renderGraph()}}},onUpdate:Ext.emptyFn,renderGraph:function(){var a=!0;if(this.disabled){this.canvas.reset();a=!1}return a},onMouseEnter:function(a){this.onMouseMove(a)},onMouseMove:function(b){var a=this;a.canvasRegion=a.canvasRegion||a.canvas.el.getRegion();a.currentPageXY=b.getPoint();a.redraw()},onMouseLeave:function(){var a=this;a.canvasRegion=a.currentPageXY=a.targetX=a.targetY=null;a.redraw();a.hideTip()},updateDisplay:function(){var a=this,d=a.getValues(),c,b;if(d&&d.length&&a.currentPageXY&&a.canvasRegion.contains(a.currentPageXY)){b=a.getRegion(a.currentPageXY[0]-a.canvasRegion.left,a.canvasRegion.bottom-1-a.currentPageXY[1]);if(b!=null&&a.isValidRegion(b,d)){if(!a.disableHighlight){a.renderHighlight(b)}if(!a.getDisableTooltips()){c=a.getRegionTooltip(b)}}if(a.hasListeners.sparklineregionchange){a.fireEvent('sparklineregionchange',a)}if(c){a.getSharedTooltip().setHtml(c);a.showTip()}}if(!c){a.hideTip()}},getRegion:Ext.emptyFn,getRegionTooltip:function(m){var b=this,i=[],k=b.getTipTpl(),a,f,e,h,l,g,j,d,c;a=b.getRegionFields(m);g=b.tooltipFormatter;if(g){return g(b,b,a)}if(!k){return ''}if(!Ext.isArray(a)){a=[a]}f=b.tooltipFormatFieldlist;e=b.tooltipFormatFieldlistKey;if(f&&e){h=[];for(d=a.length;d--;){l=a[d][e];if((c=Ext.Array.indexOf(l,f))!==-1){h[c]=a[d]}}a=h}j=a.length;for(c=0;c<j;c++){if(!a[c].isNull||!b.getTooltipSkipNull()){Ext.apply(a[c],{prefix:b.getTooltipPrefix(),suffix:b.getTooltipSuffix()});i.push(k.apply(a[c]))}}if(i.length){return i.join('<br>')}return ''},getRegionFields:Ext.emptyFn,calcHighlightColor:function(b){var e=this,c=e.getHighlightColor(),d=e.getHighlightLighten(),a;if(c){return c}if(d){a=Ext.util.Color.fromString(b);if(a){a.lighten(d);b=a.toHex()}}return b},destroy:function(){delete this.redrawQueue[this.getId()];this.callParent()},privates:{hideTip:Ext.privateFn,isValidRegion:function(a,b){return a<b.length},showTip:Ext.privateFn}},function(b){var a=b.prototype;a.getSharedTooltip=function(){var d=this,c=d.tooltip;if(!c){a.tooltip=c=b.constructTip()}return c};b.onClassCreated(b);a.processRedrawQueue=function(){var c=a.redrawQueue,d;for(d in c){c[d].redraw()}a.redrawQueue={};a.redrawTimer=0}});Ext.define('Ext.override.sparkline.Base',{override:'Ext.sparkline.Base',statics:{constructTip:function(){return new Ext.tip['ToolTip']({id:'sparklines-tooltip',showDelay:0,dismissDelay:0,hideDelay:400})}},onMouseMove:function(a){this.getSharedTooltip().triggerEvent=a;this.callParent([a])},onMouseLeave:function(a){this.callParent([a]);this.getSharedTooltip().target=null},privates:{hideTip:function(){var a=this.getSharedTooltip();a.target=null;a.hide()},showTip:function(){var a=this.getSharedTooltip();a.target=this.el;a.onTargetOver(a.triggerEvent)}}},function(a){if(!Ext.supports.Canvas){a.prototype.element={tag:'span',reference:'element',listeners:{mouseenter:'onMouseEnter',mouseleave:'onMouseLeave',mousemove:'onMouseMove'},style:{display:'inline-block',position:'relative',overflow:'hidden',margin:'0px',padding:'0px',verticalAlign:'top',cursor:'default'},children:[{tag:'svml:group',reference:'groupEl',coordorigin:'0 0',coordsize:'0 0',style:'position:absolute;width:0;height:0;pointer-events:none'}]}}});Ext.define('Ext.sparkline.BarBase',{extend:Ext.sparkline.Base,renderHighlight:function(a){this.renderRegion(a,!0)},renderGraph:function(){var a=this,h=a.values,g=a.canvas,e=a.regionShapes||(a.regionShapes={}),b,f,c,d;if(!a.callParent()){return}for(c=h.length;c--;){b=a.renderRegion(c);if(b){if(Ext.isArray(b)){f=[];for(d=b.length;d--;){b[d].append();f.push(b[d].id)}e[c]=f}else {b.append();e[c]=b.id}}else {e[c]=null}}if(a.currentPageXY){a.currentRegion=null;a.updateDisplay()}g.render()}});Ext.define('Ext.sparkline.RangeMap',{constructor:function(c){var b,a,d=[];for(b in c){if(c.hasOwnProperty(b)&&typeof b==='string'&&b.indexOf(':')>-1){a=b.split(':');a[0]=a[0].length===0?-Infinity:parseFloat(a[0]);a[1]=a[1].length===0?Infinity:parseFloat(a[1]);a[2]=c[b];d.push(a)}}this.map=c;this.rangelist=d||!1},get:function(c){var b=this.rangelist,d,a,e;if((e=this.map[c])!==undefined){return e}if(b){for(d=b.length;d--;){a=b[d];if(a[0]<=c&&a[1]>=c){return a[2]}}}}});Ext.define('Ext.util.Base64',{singleton:!0,_str:'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',encode:function(a){var b=this,g='',f=0,h,c,d,j,k,i,e,l;a=b._utf8_encode(a);l=a.length;while(f<l){h=a.charCodeAt(f++);c=a.charCodeAt(f++);d=a.charCodeAt(f++);j=h>>2;k=(h&3)<<4|c>>4;i=(c&15)<<2|d>>6;e=d&63;if(isNaN(c)){i=e=64}else {if(isNaN(d)){e=64}}g=g+b._str.charAt(j)+b._str.charAt(k)+b._str.charAt(i)+b._str.charAt(e)}return g},decode:function(b){var c=this,a='',d=0,h,i,j,k,f,e,g,l;b=b.replace(/[^A-Za-z0-9+=\/]/g,'');l=b.length;while(d<l){k=c._str.indexOf(b.charAt(d++));f=c._str.indexOf(b.charAt(d++));e=c._str.indexOf(b.charAt(d++));g=c._str.indexOf(b.charAt(d++));h=k<<2|f>>4;i=(f&15)<<4|e>>2;j=(e&3)<<6|g;a=a+String.fromCharCode(h);if(e!==64){a=a+String.fromCharCode(i)}if(g!==64){a=a+String.fromCharCode(j)}}a=c._utf8_decode(a);return a},_utf8_encode:function(c){var b='',a,d,e;c=c.replace(/\r\n/g,'\n');for(d=0,e=c.length;d<e;d++){a=c.charCodeAt(d);if(a<128){b+=String.fromCharCode(a)}else {if(a>127&&a<2048){b+=String.fromCharCode(a>>6|192);b+=String.fromCharCode(a&63|128)}else {b+=String.fromCharCode(a>>12|224);b+=String.fromCharCode(a>>6&63|128);b+=String.fromCharCode(a&63|128)}}}return b},_utf8_decode:function(c){var d='',a=0,b=0,f=0,e=0,g=c.length;while(a<g){b=c.charCodeAt(a);if(b<128){d+=String.fromCharCode(b);a++}else {if(b>191&&b<224){e=c.charCodeAt(a+1);d+=String.fromCharCode((b&31)<<6|e&63);a+=2}else {e=c.charCodeAt(a+1);f=c.charCodeAt(a+2);d+=String.fromCharCode((b&15)<<12|(e&63)<<6|f&63);a+=3}}}return d}});Ext.define('Ext.util.DelimitedValue',{dateFormat:'C',delimiter:'\t',lineBreak:'\n',quote:'"',lineBreakRe:/\r?\n/g,lastLineBreakRe:/(\r?\n|\r)$/,constructor:function(a){if(a){Ext.apply(this,a)}this.parseREs={};this.quoteREs={}},decode:function(m,c,i){if(!m){return []}var e=this,d=[],l=[d],a=i!==undefined?i:e.quote,j=e.quoteREs,n=e.parseREs,k,h,b,f,g;c=c||e.delimiter;k=n[c]||new RegExp('(\\'+c+'|\\r?\\n|\\r|^)'+'(?:\\'+a+'([^\\'+a+']*(?:\\'+a+'\\'+a+'[^\\'+a+']*)*)\\'+a+'|'+'([^\\'+c+'\\r\\n]*))','gi');h=j[a]||(j[a]=new RegExp('\\'+a+'\\'+a,'g'));while(b=k.exec(m)){f=b[1];if(f.length&&f!==c){l.push(d=[])}if(!b.index&&b[0].charAt(0)===c){d.push('')}if(b[2]){g=b[2].replace(h,a)}else {g=b[3]}d.push(g)}return l},encode:function(k,n,h){var c=this,j=n||c.delimiter,m=c.dateFormat,b=h!==undefined?h:c.quote,o=b+b,g=k.length,l=c.lineBreakRe,i=[],e=[],a,d,f;while(g-->0){f=k[g];e.length=d=f.length;while(d-->0){a=f[d];if(a==null){a=''}else {if(typeof a==='string'){if(a&&b!==null){if(a.indexOf(b)>-1){a=b+a.split(b).join(o)+b}else {if(a.indexOf(j)>-1||l.test(a)){a=b+a+b}}}}else {if(Ext.isDate(a)){a=Ext.Date.format(a,m)}}}e[d]=a}i[g]=e.join(j)}return i.join(c.lineBreak)}});Ext.define('Ext.util.LocalStorage',{id:null,destroyed:!1,lazyKeys:!0,prefix:'',session:!1,_keys:null,_store:null,_users:0,statics:{cache:{},get:function(c){var d=this,e=d.cache,b={_users:1},a;if(Ext.isString(c)){b.id=c}else {Ext.apply(b,c)}if(!(a=e[b.id])){a=new d(b)}else {++a._users}return a},supported:!0},constructor:function(b){var a=this;Ext.apply(a,b);if(a._users){Ext.util.LocalStorage.cache[a.id]=a}a.init()},init:function(){var a=this,b=a.id;if(!a.prefix&&b){a.prefix=b+'-'}a._store=a.session?window.sessionStorage:window.localStorage},destroy:function(){var a=this;delete Ext.util.LocalStorage.cache[a.id];a._store=a._keys=null;a.callParent()},getKeys:function(){var c=this,g=c._store,f=c.prefix,a=c._keys,e=f.length,d,b;if(!a){c._keys=a=[];for(d=g.length;d--;){b=g.key(d);if(b.length>e){if(f===b.substring(0,e)){a.push(b.substring(e))}}}}return a},release:function(){if(!--this._users){this.destroy()}},save:Ext.emptyFn,clear:function(){var a=this,e=a._store,d=a.prefix,b=a._keys||a.getKeys(),c;for(c=b.length;c--;){e.removeItem(d+b[c])}b.length=0},key:function(a){var b=this._keys||this.getKeys();return 0<=a&&a<b.length?b[a]:null},getItem:function(a){var b=this.prefix+a;return this._store.getItem(b)},removeItem:function(d){var a=this,f=a.prefix+d,b=a._store,c=a._keys,e=b.length;b.removeItem(f);if(c&&e!==b.length){if(a.lazyKeys){a._keys=null}else {Ext.Array.remove(c,d)}}},setItem:function(d,f){var b=this,g=b.prefix+d,a=b._store,e=a.length,c=b._keys;a.setItem(g,f);if(c&&e!==a.length){c.push(d)}}});Ext.define('Ext.util.TsvDecoder',{extend:Ext.util.DelimitedValue,alternateClassName:'Ext.util.TSV',delimiter:'\t'},function(a){Ext.util.TSV=new a()});Ext.define(null,{override:'Ext.form.field.Checkbox',compatibility:Ext.isIE8,changeEventName:'propertychange',onChangeEvent:function(a){if(this.duringSetRawValue||a.browserEvent.propertyName!=='checked'){return}this.callParent([a])},updateCheckedCls:function(c){var a=this,b=a.displayEl;a.callParent([c]);if(b&&c!==a.lastValue){b.repaint()}}});Ext.define(null,{override:'Ext.form.field.Radio',compatibility:Ext.isIE8,getSubTplData:function(b){var a=this.callParent([b]);delete a.checked;return a},afterRender:function(){this.callParent();if(this.checked){this.inputEl.dom.checked=!0}},onChange:function(a,b){this.callSuper([a,b])}});Ext.define(null,{override:'Ext.scroll.Scroller',compatibility:Ext.isIE8,privates:{doScrollTo:function(a,b,d){var c=this,g=c.getScrollElement(),i,e,m,k,l,h,f,j;if(g&&!g.destroyed){e=g.dom;k=a===Infinity;l=b===Infinity;if(k||l){i=c.getMaxPosition();if(k){a=i.x}if(l){b=i.y}}if(a!==null){a=c.convertX(a)}if(d){m={};if(b!=null){m.scrollTop=b}if(a!=null){m.scrollLeft=a}d=Ext.mergeIf({to:{scrollTop:b,scrollLeft:a}},d);f=new Ext.Deferred();j=d.callback;d.callback=function(){if(j){j.call(d.scope||Ext.global,arguments)}if(c.destroyed){f.reject()}else {f.resolve()}};g.animate(d);h=f.promise}else {if(a!=null&&a!==0&&b!=null){c.deferDomScroll=!0}if(b!=null){e.scrollTop=b}if(a!=null){e.scrollLeft=a}if(c.deferDomScroll){c.deferDomScroll=!1;+e.scrollLeft;e.scrollLeft=a;+e.scrollTop;e.scrollTop=b}h=Ext.Deferred.getCachedResolved()}c.positionDirty=!0}else {h=Ext.Deferred.getCachedRejected()}return h},onDomScroll:function(){var a=this;if(a.deferDomScroll){return}a.callParent()}}});Ext.define('Ext.ElementLoader',{mixins:[Ext.util.Observable],statics:{Renderer:{Html:function(c,b,a){c.getTarget().setHtml(b.responseText,a.scripts===!0,a.callback,a.rendererScope);return !0}}},url:null,params:null,baseParams:null,autoLoad:!1,target:null,loadMask:!1,ajaxOptions:null,scripts:!1,isLoader:!0,constructor:function(c){var a=this,b;a.mixins.observable.constructor.call(a,c);a.setTarget(a.target);if(a.autoLoad){b=a.autoLoad;if(b===!0){b=null}a.load(b)}},setTarget:function(a){var b=this;a=Ext.get(a);if(b.target&&b.target!==a){b.abort()}b.target=a},getTarget:function(){return this.target||null},abort:function(){var a=this.active;if(a!==undefined){Ext.Ajax.abort(a.request);if(a.mask){this.removeMask()}delete this.active}},removeMask:function(){this.target.unmask()},addMask:function(a){this.target.mask(a===!0?null:a)},load:function(b){if(this.destroying||this.destroyed){return}b=Ext.apply({},b);var a=this,d=Ext.isDefined(b.loadMask)?b.loadMask:a.loadMask,c=Ext.apply({},b.params),e=Ext.apply({},b.ajaxOptions),f=b.callback||a.callback,g=b.scope||a.scope||a;Ext.applyIf(e,a.ajaxOptions);Ext.applyIf(b,e);Ext.applyIf(c,a.params);Ext.apply(c,a.baseParams);Ext.applyIf(b,{url:a.url});Ext.apply(b,{scope:a,params:c,callback:a.onComplete});if(a.fireEvent('beforeload',a,b)===!1){return}if(d){a.addMask(d)}a.active={options:b,mask:d,scope:g,callback:f,success:b.success||a.success,failure:b.failure||a.failure,renderer:b.renderer||a.renderer,scripts:Ext.isDefined(b.scripts)?b.scripts:a.scripts};a.active.request=Ext.Ajax.request(b);a.setOptions(a.active,b)},setOptions:function(b,a){b.rendererScope=a.rendererScope||this.rendererScope||this},onComplete:function(d,e,c){var a=this,b=a.active,g,f;if(b){f=b.scope;g=b.rendererScope;if(e){e=a.getRenderer(b.renderer).call(g,a,c,b)!==!1}if(e){Ext.callback(b.success,f,[a,c,d]);a.fireEvent('load',a,c,d)}else {Ext.callback(b.failure,f,[a,c,d]);a.fireEvent('exception',a,c,d)}Ext.callback(b.callback,f,[a,e,c,d]);if(b.mask){a.removeMask()}}delete a.active},getRenderer:function(a){if(Ext.isFunction(a)){return a}return this.statics().Renderer.Html},startAutoRefresh:function(b,c){var a=this;a.stopAutoRefresh();a.autoRefresh=Ext.interval(function(){a.load(c)},b)},stopAutoRefresh:function(){Ext.uninterval(this.autoRefresh);this.autoRefresh=null},isAutoRefreshing:function(){return !!this.autoRefresh},destroy:function(){var a=this;a.stopAutoRefresh();a.abort();a.callParent()}});Ext.define('Ext.ComponentLoader',{extend:Ext.ElementLoader,statics:{Renderer:{Data:function(c,b,d){var a=!0;try{c.getTarget().update(Ext.decode(b.responseText))}catch(e){a=!1}return a},Component:function(f,d,e){var b=!0,a=f.getTarget(),c=[];try{c=Ext.decode(d.responseText)}catch(g){b=!1}if(b){a.suspendLayouts();if(e.removeAll){a.removeAll()}a.add(c);a.resumeLayouts(!0)}return b}}},target:null,loadOnRender:!1,loadMask:!1,renderer:'html',setTarget:function(b){var a=this;if(Ext.isString(b)){b=Ext.getCmp(b)}if(a.target&&a.target!==b){a.abort()}a.target=b;if(b&&a.loadOnRender){if(b.rendered){a.doLoadOnRender()}else {a.mon(b,'render',a.doLoadOnRender,a)}}},doLoadOnRender:function(){var a=this.loadOnRender;this.load(Ext.isObject(a)?a:null)},removeMask:function(){this.target.setLoading(!1)},addMask:function(a){this.target.setLoading(a)},setOptions:function(b,a){b.removeAll=Ext.isDefined(a.removeAll)?a.removeAll:this.removeAll;b.rendererScope=a.rendererScope||this.rendererScope||this.target},getRenderer:function(b){var a;if(Ext.isFunction(b)){return b}a=this.statics().Renderer;switch(b){case 'component':return a.Component;case 'data':return a.Data;default:return Ext.ElementLoader.Renderer.Html;}}});Ext.define('Ext.layout.container.Editor',{extend:Ext.layout.container.Container,alias:'layout.editor',autoSizeDefault:{width:'field',height:'field'},sizePolicies:{$:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},boundEl:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1}},boundEl:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},boundEl:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(e){var d=this,b=d.owner.autoSize,c=b&&b.width,a=d.sizePolicies;a=a[c]||a.$;c=b&&b.height;a=a[c]||a.$;return a},calculate:function(c){var f=this,a=f.owner,b=a.autoSize,e,d;if(b===!0){b=f.autoSizeDefault}if(b){e=f.getDimension(a,b.width,'getWidth',a.width);d=f.getDimension(a,b.height,'getHeight',a.height)}c.childItems[0].setSize(e,d);c.setWidth(e);c.setHeight(d);c.setContentSize(e||a.field.getWidth(),d||a.field.getHeight())},getDimension:function(c,d,a,b){switch(d){case 'boundEl':return c.boundEl[a]();case 'field':return undefined;default:return b;}}});Ext.define('Ext.Editor',{extend:Ext.container.Container,xtype:'editor',layout:'editor',allowBlur:!0,revertInvalid:!0,value:'',alignment:'c-c?',offsets:[0,0],shadow:'frame',constrain:!1,swallowKeys:!0,completeOnEnter:!0,cancelOnEsc:!0,updateEl:!1,focusOnToFront:!1,baseCls:Ext.baseCSSPrefix+'editor',editing:!1,preventDefaultAlign:!0,useBoundValue:!0,specialKeyDelay:1,initComponent:function(){var a=this,b=a.field=Ext.ComponentManager.create(a.field||{},'textfield');b.msgTarget=b.msgTarget||'qtip';a.mon(b,{scope:a,specialkey:a.onSpecialKey});if(b.grow){a.mon(b,'autosize',a.onFieldAutosize,a,{delay:1})}a.floating={constrain:a.constrain};a.items=b;a.callParent()},onAdded:function(a){this.ownerCmp=a},onFieldAutosize:function(){this.updateLayout()},afterRender:function(e,d){var b=this,c=b.field,a=c.inputEl;b.callParent(arguments);if(a){a.dom.name='';if(b.swallowKeys){a.swallowEvent(['keypress','keydown'])}}},onSpecialKey:function(g,b){var a=this,e=b.getKey(),d=a.completeOnEnter&&e===b.ENTER,f=a.cancelOnEsc&&e===b.ESC,c=a.specialKeyTask;if(d||f){b.stopEvent();if(!c){a.specialKeyTask=c=new Ext.util.DelayedTask()}c.delay(a.specialKeyDelay,d?a.completeEdit:a.cancelEdit,a)}a.fireEvent('specialkey',a,g,b)},startEdit:function(j,c,i,g){var a=this,b=a.field,d,f,e,h;if(!g){a.completeEdit(!0)}a.boundEl=Ext.get(j);d=a.boundEl.dom;if(a.useBoundValue&&!Ext.isDefined(c)){c=Ext.String.trim(d.textContent||d.innerText||d.innerHTML)}if(a.fireEvent('beforestartedit',a,a.boundEl,c)!==!1){if(a.context){c=a.context.value}Ext.suspendLayouts();if(!a.rendered){f=a.ownerCt;e=a.renderTo||f&&f.getEl()||Ext.getBody();Ext.fly(e).position();a.renderTo=e}a.startValue=c;a.show();a.realign(!0);if(!g){b.suspendEvents();b.setValue(c);b.resumeEvents()}if(i!==!1){h=Ext.isIE?!0:!1;b.focus(b.selectOnFocus?!0:[Ext.Number.MAX_32BIT_INTEGER],h)}if(b.autoSize){b.autoSize()}Ext.resumeLayouts(!0);a.toggleBoundEl(!1);a.editing=!0}},realign:function(b){var a=this;if(b===!0){a.updateLayout()}a.alignTo(a.boundEl,a.alignment,a.offsets)},completeEdit:function(d){var a=this,c=a.field,e=a.startValue,f=a.context&&a.context.cancel,b;if(!a.editing){return}if(c.assertValue){c.assertValue()}b=a.getValue();if(!c.isValid()){if(a.revertInvalid!==!1){a.cancelEdit(d)}return}if(a.ignoreNoChange&&!c.didValueChange(b,e)){a.onEditComplete(d);return}if(a.fireEvent('beforecomplete',a,b,e)!==!1){b=a.getValue();if(a.updateEl&&a.boundEl){a.boundEl.setHtml(b)}a.onEditComplete(d,f);a.fireEvent('complete',a,b,e)}},onShow:function(){var a=this;a.callParent(arguments);a.fireEvent('startedit',a,a.boundEl,a.startValue)},cancelEdit:function(e){var a=this,c=a.startValue,b=a.field,d;if(a.editing){if(b){d=a.editedValue=a.getValue();b.suspendEvents();a.setValue(c);b.resumeEvents()}a.onEditComplete(e,!0);a.fireEvent('canceledit',a,d,c);delete a.editedValue}},onEditComplete:function(a,b){this.editing=!1;if(a!==!0){this.hide();this.toggleBoundEl(!0)}},onFocusLeave:function(b){var a=this;if(a.allowBlur===!0&&a.editing){a.completeEdit()}a.callParent([b])},onHide:function(){var a=this,b=a.field;if(a.editing){a.completeEdit()}else {if(b.collapse){b.collapse()}}a.callParent(arguments)},getValue:function(){return this.field.getValue()},setValue:function(a){this.field.setValue(a)},toggleBoundEl:function(a){if(this.hideEl!==!1){this.boundEl.setVisible(a)}},doDestroy:function(){var a=this,b=a.specialKeyTask;if(b){b.cancel()}Ext.destroy(a.field);a.callParent()}});Ext.define('Ext.Img',{extend:Ext.Component,alias:['widget.image','widget.imagecomponent'],autoEl:'img',baseCls:Ext.baseCSSPrefix+'img',config:{src:null,glyph:null},alt:'',title:'',imgCls:'',maskOnDisable:!1,applySrc:function(a){return a&&Ext.resolveResource(a)},getElConfig:function(){var b=this,d=b.autoEl,a=b.callParent(),e=b.glyph,c;if(e){a.tag='div';a.html=e.character;a.style=a.style||{};a.style.fontFamily=e.fontFamily;a.role='img'}else {if(d==='img'||Ext.isObject(d)&&d.tag==='img'){c=a}else {a.cn=[c={tag:'img',id:b.id+'-img'}]}}if(c){if(b.imgCls){c.cls=(c.cls?c.cls+' ':'')+b.imgCls}c.src=b.src||Ext.BLANK_IMAGE_URL}if(b.alt){(c||a).alt=b.alt}else {(c||a).alt=''}if(b.title){(c||a).title=b.title}return a},onRender:function(){var a=this,b=a.autoEl,c;a.callParent(arguments);c=a.el;if(b==='img'||Ext.isObject(b)&&b.tag==='img'){a.imgEl=c}else {a.imgEl=c.getById(a.id+'-img')}},doDestroy:function(){var a=this,b=a.imgEl;if(b&&a.el!==b){b.destroy()}a.imgEl=null;a.callParent()},getTitle:function(){return this.title},setTitle:function(b){var c=this,a=c.imgEl;c.title=b||'';if(a){a.dom.title=b||''}},afterComponentLayout:function(f,a,e,d){var c=this.getSizeModel().height,b;if((c.calculated||c.configured)&&a&&this.glyph){b=a+'px';this.setStyle({'line-height':b,'font-size':b})}this.callParent([f,a,e,d])},getAlt:function(){return this.alt},setAlt:function(b){var c=this,a=c.imgEl;c.alt=b||'';if(a){a.dom.alt=b||''}},_naturalSize:null,getNaturalSize:function(){var e=this,b=e.imgEl,a=e._naturalSize,c,d,f;if(b&&!a){b=b.dom;e._naturalSize=a={width:d=b.naturalWidth,height:b.naturalHeight};if(!d){c=b.style;d=c.width;f=c.height;c.width=c.height='auto';a.width=b.width;a.height=b.height;c.width=d;c.height=f}a.aspect=a.width/a.height}return a},updateSrc:function(b){var a=this.imgEl;if(a){a.dom.src=b||Ext.BLANK_IMAGE_URL}},applyGlyph:function(a,b){if(a){if(!a.isGlyph){a=new Ext.Glyph(a)}if(a.isEqual(b)){a=undefined}}return a},updateGlyph:function(b,c){var a=this.el;if(a){a.dom.innerHTML=b.character;a.setStyle(b.getStyle())}}});Ext.define('Ext.layout.component.ProgressBar',{extend:Ext.layout.component.Auto,alias:'layout.progressbar',type:'progressbar',beginLayout:function(a){var d=this,c,b;d.callParent(arguments);if(!a.textEls){b=d.owner.textEl;if(b.isComposite){a.textEls=[];b=b.elements;for(c=b.length;c--;){a.textEls[c]=a.getEl(Ext.get(b[c]))}}else {a.textEls=[a.getEl('textEl')]}}},calculate:function(a){var e=this,d,b,c;e.callParent(arguments);if(Ext.isNumber(c=a.getProp('width'))){c-=a.getBorderInfo().width;b=a.textEls;for(d=b.length;d--;){b[d].setWidth(c)}}else {e.done=!1}}});Ext.define('Ext.ProgressBar',{extend:Ext.Component,xtype:'progressbar',mixins:[Ext.ProgressBase],baseCls:Ext.baseCSSPrefix+'progress',animate:!1,text:'',waitTimer:null,childEls:['bar'],defaultBindProperty:'value',renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back" role="presentation">{text}</div>','</tpl>','<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text" role="presentation">','<div role="presentation">{text}</div>','</div>','</tpl>','</div>'],componentLayout:'progressbar',ariaRole:'progressbar',focusable:!0,tabIndex:0,autoEl:{'aria-valuemin':'0','aria-valuenow':'0','aria-valuemax':'100'},initRenderData:function(){var a=this,b=a.value||0,c;c=a.callParent();return Ext.apply(c,{internalText:!a.hasOwnProperty('textEl'),text:a.text||Math.round(b*100)+'%',percentage:b*100})},onRender:function(){var a=this;a.callParent(arguments);if(a.textEl){a.textEl=Ext.get(a.textEl);a.updateText(a.text)}else {a.textEl=a.el.select('.'+a.baseCls+'-text')}},afterRender:function(){var a=this;a.callParent(arguments);if(a.text){a.ariaEl.dom.setAttribute('aria-valuetext',a.text)}},updateValue:function(a){this.updateProgress(a)},updateProgress:function(b,c,d){var a=this,f=a.value,e=a.getTextTpl();b=b||0;a.value=b||(b=0);if(c!=null){a.autoText=!1;a.updateText(c)}else {if(e){a.autoText=!1;a.updateText(e.apply({value:b,percent:b*100}))}else {if(!a.text&&a.autoText!==!1){a.autoText=!0;a.updateText(Math.round(b*100)+'%')}else {if(a.text&&a.ariaEl.dom){a.ariaEl.dom.removeAttribute('aria-valuetext')}}}}if(a.rendered&&!a.destroyed){if(d===!0||d!==!1&&a.animate){a.bar.stopAnimation();a.bar.animate(Ext.apply({from:{width:f*100+'%'},to:{width:b*100+'%'}},a.animate))}else {a.bar.setStyle('width',b*100+'%')}a.ariaEl.dom.setAttribute('aria-valuenow',Math.round(b*100))}a.fireEvent('update',a,b,c);return a},updateText:function(b){var a=this;if(!a.autoText){a.text=b}if(a.rendered){a.textEl.setHtml(b);if(!a.autoText){a.ariaEl.dom.setAttribute('aria-valuetext',b)}else {a.ariaEl.dom.removeAttribute('aria-valuetext')}}return a},applyText:function(a){this.updateText(a)},getText:function(){return this.text},wait:function(a){var b=this,c;if(!b.waitTimer){c=b;a=a||{};if(a.text!=null){b.autoText=!1}b.updateText(a.text);b.waitTimer=Ext.TaskManager.start({run:function(d){var c=a.increment||10;d-=1;b.updateProgress(((d+c)%c+1)*(100/c)*0.01,null,a.animate)},interval:a.interval||1000,duration:a.duration,onStop:function(){if(a.fn){a.fn.apply(a.scope||b)}b.reset()},scope:c})}return b},isWaiting:function(){return this.waitTimer!==null},reset:function(b){var a=this;a.updateProgress(0);a.clearTimer();if(b===!0){a.hide()}if(a.rendered){a.ariaEl.dom.removeAttribute('aria-valuetext')}return a},clearTimer:function(){var a=this;if(a.waitTimer){a.waitTimer.onStop=null;Ext.TaskManager.stop(a.waitTimer);a.waitTimer=null}},doDestroy:function(){var a=this,d=a.bar,c,f,b,e;a.clearTimer();if(a.rendered){if(a.textEl.isComposite){c=a.textEl.slice();for(b=0,e=c.length;b<e;b++){f=Ext.get(c[b]);f.destroy()}}Ext.destroyMembers(a,'textEl','progressBar');if(d&&a.animate){d.stopAnimation()}}a.callParent()}});Ext.define('Ext.button.Split',{extend:Ext.button.Button,alternateClassName:'Ext.SplitButton',alias:'widget.splitbutton',isSplitButton:!0,separateArrowStyling:!1,arrowCls:'split',split:!0,componentCls:Ext.baseCSSPrefix+'split-button',getTemplateArgs:function(){var a=this,b,c;c=a.callParent();if(a.disabled){c.tabIndex=null}b=a.ariaArrowElAttributes||{};b['aria-hidden']=!!a.hidden;b['aria-disabled']=!!a.disabled;if(a.arrowTooltip){b['aria-label']=a.arrowTooltip}else {b['aria-labelledby']=a.id}c.arrowElAttributes=b;return c},onRender:function(){var a=this,b;a.callParent();b=a.getFocusEl();if(b){b.on({scope:a,focus:a.onMainElFocus,blur:a.onMainElBlur})}b=a.arrowEl;if(b){b.dom.setAttribute('data-componentid',a.id);b.setVisibilityMode(Ext.dom.Element.DISPLAY);b.on({scope:a,focus:a.onArrowElFocus,blur:a.onArrowElBlur})}},setArrowHandler:function(a,b){this.arrowHandler=a;this.scope=b},onMouseDown:function(b){var a=this;if(a.separateArrowStyling&&!a.disabled&&b.button===0&&a.isWithinTrigger(b)){b.preventDefault();a.arrowEl.focus();Ext.button.Manager.onButtonMousedown(a,b);a.addCls(a._arrowPressedCls)}else {a.callParent([b])}},onMouseUp:function(b){var a=this;if(a.separateArrowStyling&&!a.destroyed&&b.button===0&&a.isWithinTrigger(b)){a.removeCls(a._arrowPressedCls)}else {a.callParent([b])}},onMenuTriggerOver:function(b){var a=this;if(a.separateArrowStyling&&!a.disabled){a.addCls(a._arrowOverCls)}a.callParent([b])},onMenuTriggerOut:function(b){var a=this;if(a.separateArrowStyling&&!a.disabled){a.removeCls(a._arrowOverCls)}a.callParent([b])},onClick:function(b){var a=this,c=b.type==='keydown'&&b.target===a.arrowEl.dom;a.doPreventDefault(b);if(!a.disabled){if(c||a.isWithinTrigger(b)){b.preventDefault();a.maybeShowMenu(b);a.fireEvent('arrowclick',a,b);if(a.arrowHandler){a.arrowHandler.call(a.scope||a,a,b)}}else {a.doToggle();a.fireHandler(b)}}},enable:function(c){var b=this,a=b.arrowEl;b.callParent([c]);if(a){a.dom.setAttribute('tabIndex',b.tabIndex);a.dom.setAttribute('aria-disabled','false')}},disable:function(c){var b=this,a=b.arrowEl;b.callParent([c]);if(a){a.dom.removeAttribute('tabIndex');a.dom.setAttribute('aria-disabled','true')}},afterHide:function(b,a){this.callParent([b,a]);this.arrowEl.dom.setAttribute('aria-hidden','true')},afterShow:function(a,c,b){this.callParent([a,c,b]);this.arrowEl.dom.setAttribute('aria-hidden','false')},privates:{isFocusing:function(f){var a=this,d=f.fromElement,e=f.toElement,c=a.focusEl&&a.focusEl.dom,b=a.arrowEl&&a.arrowEl.dom;if(a.focusable){if(e===c){return d===b?!1:!0}else {if(e===b){return d===c?!1:!0}}return !0}return !1},isBlurring:function(f){var a=this,d=f.fromElement,e=f.toElement,c=a.focusEl&&a.focusEl.dom,b=a.arrowEl&&a.arrowEl.dom;if(a.focusable){if(d===c){return e===b?!1:!0}else {if(d===b){return e===c?!1:!0}}return !0}return !1},getFocusClsEl:Ext.privateFn,onMainElFocus:function(a){this.el.addCls(this._focusCls)},onMainElBlur:function(a){this.el.removeCls(this._focusCls)},onArrowElFocus:function(a){this.el.addCls(this._arrowFocusCls)},onArrowElBlur:function(){this.el.removeCls(this._arrowFocusCls)},setTabIndex:function(a){this.callParent([a]);if(this.arrowEl){this.arrowEl.set({tabIndex:a})}},_addSplitCls:function(){var a=this.arrowEl;this.callParent();a.dom.setAttribute('tabIndex',this.tabIndex);a.setVisible(!0)},_removeSplitCls:function(){var a=this.arrowEl;this.callParent();a.dom.removeAttribute('tabIndex');a.setVisible(!1)}}});Ext.define('Ext.theme.material.button.Split',{override:'Ext.button.Split',separateArrowStyling:!0,ripple:!1});Ext.define('Ext.layout.container.SegmentedButton',{extend:Ext.layout.container.Container,alias:'layout.segmentedbutton',needsItemSize:!1,setsItemSize:!1,_btnRowCls:Ext.baseCSSPrefix+'segmented-button-row',getRenderTree:function(){var c=this,b=c.callParent(),a,d;if(c.owner.getVertical()){for(a=0,d=b.length;a<d;a++){b[a]={cls:c._btnRowCls,cn:b[a]}}}return b},getItemLayoutEl:function(b){var a=b.el.dom;return this.owner.getVertical()?a.parentNode:a},onDestroy:function(){var a,b;if(this.owner.rendered){a=this.getRenderTarget();while(b=a.last()){b.destroy()}}}});Ext.define('Ext.button.Segmented',{extend:Ext.container.Container,xtype:'segmentedbutton',config:{allowDepress:!1,allowMultiple:!1,forceSelection:!1,allowToggle:!0,vertical:!1,defaultUI:'default'},beforeRenderConfig:{value:undefined},defaultBindProperty:'value',publishes:['value'],twoWayBindable:['value'],layout:'segmentedbutton',defaultType:'button',maskOnDisable:!1,isSegmentedButton:!0,baseCls:Ext.baseCSSPrefix+'segmented-button',itemCls:Ext.baseCSSPrefix+'segmented-button-item',_firstCls:Ext.baseCSSPrefix+'segmented-button-first',_lastCls:Ext.baseCSSPrefix+'segmented-button-last',_middleCls:Ext.baseCSSPrefix+'segmented-button-middle',applyValue:function(e,g){var f=this,l=f.getAllowMultiple(),c,b,d,i,j,a,h,k;d=e instanceof Array?e:e==null?[]:[e];i=g instanceof Array?g:g==null?[]:[g];f._isApplyingValue=!0;if(!f.rendered){j=f.items.items;for(a=j.length-1;a>=0;a--){b=j[a];if(f.forceSelection&&!a&&!k){b.pressed=!0}if(b.pressed){k=!0;c=b.value;if(c==null){c=f.items.indexOf(b)}if(!Ext.Array.contains(d,c)){d.unshift(c)}}}}h=d.length;for(a=0;a<h;a++){e=d[a];b=f._lookupButtonByValue(e);if(b){c=b.value;if(c!=null&&c!==e){d[a]=c}if(!b.pressed){b.setPressed(!0)}}}e=l?d:h?d[0]:null;for(a=0,h=i.length;a<h;a++){g=i[a];if(!Ext.Array.contains(d,g)){f._lookupButtonByValue(g).setPressed(!1)}}f._isApplyingValue=!1;return e},updateValue:function(c,b){var a=this,d;if(a.hasListeners.change){if(c&&b&&a.getAllowMultiple()){d=Ext.Array.equals(c,b)}if(!d){a.fireEvent('change',a,c,b)}}},beforeRender:function(){var a=this;a.addCls(a.baseCls+a._getClsSuffix());a._syncItemClasses(!0);a.callParent()},onAdd:function(b){var a=this,c='_syncItemClasses';a.mon(b,{hide:c,show:c,beforetoggle:'_onBeforeItemToggle',toggle:'_onItemToggle',scope:a});if(a.getAllowToggle()){b.enableToggle=!0;if(!a.getAllowMultiple()){b.toggleGroup=a.getId();b.allowDepress=a.getAllowDepress()}}b.addCls(a.itemCls+a._getClsSuffix());a._syncItemClasses();a.callParent([b])},onRemove:function(b){var a=this;b.removeCls(a.itemCls+a._getClsSuffix());a._syncItemClasses();a.callParent([b])},beforeLayout:function(){if(Ext.isChrome){this.el.dom.offsetWidth}this.callParent()},updateDefaultUI:function(d){var a=this.items,c,b,e;if(this.rendered){Ext.raise('Changing the ui config of a segmented button after render is not supported.')}else {if(a){if(a.items){a=a.items}for(b=0,e=a.length;b<e;b++){c=a[b];if(c.ui==='default'&&d!=='default'&&!c.hasOwnProperty('ui')){a[b].ui=d}}}}},privates:{_getClsSuffix:function(){return this.getVertical()?'-vertical':'-horizontal'},_getFirstCls:function(){return this._firstCls},_getLastCls:function(){return this._lastCls},_lookupButtonByValue:function(d){var c=this.items.items,g=c.length,f=0,a=null,b,e;for(;f<g;f++){e=c[f];b=e.value;if(b!=null&&b===d){a=e;break}}if(!a&&typeof d==='number'){a=c[d]}return a},_onBeforeItemToggle:function(b,a){if(this.allowMultiple&&this.forceSelection&&!a&&this.getValue().length===1){return !1}},_onItemToggle:function(e,h){if(this._isApplyingValue){return}var b=this,g=Ext.Array,f=b.allowMultiple,c=e.value!=null?e.value:b.items.indexOf(e),a=b.getValue(),d;if(f){d=g.indexOf(a,c)}if(h){if(f){if(d===-1){a=g.slice(a);a.push(c)}}else {a=c}}else {if(f){if(d>-1){a=g.slice(a);a.splice(d,1)}}else {if(a===c){a=null}}}b.setValue(a);b.fireEvent('toggle',b,e,h)},_syncItemClasses:function(j){var d=this,f,e,g,h,c,b,i,a;if(!j&&!d.rendered){return}f=d._getFirstCls();e=d._middleCls;g=d._getLastCls();h=d.items.items;c=h.length;b=[];for(a=0;a<c;a++){i=h[a];if(!i.hidden){b.push(i)}}c=b.length;for(a=0;a<c;a++){b[a].removeCls([f,e,g])}if(c>1){b[0].addCls(f);for(a=1;a<c-1;a++){b[a].addCls(e)}b[c-1].addCls(g)}}}});Ext.define('Ext.plugin.Viewport',{extend:Ext.plugin.Abstract,alias:'plugin.viewport',setCmp:function(a){this.cmp=a;if(a&&!a.isViewport){this.decorate(a);if(a.renderConfigs){a.flushRenderConfigs()}a.setupViewport()}},destroy:function(){var a=this.cmp.el;this.callParent();if(a){delete a.setHeight;delete a.setWidth}},statics:{decorate:function(a){Ext.applyIf(a.prototype||a,{ariaRole:'application',viewportCls:Ext.baseCSSPrefix+'viewport'});Ext.override(a,{isViewport:!0,preserveElOnDestroy:!0,initComponent:function(){this.callParent();this.setupViewport()},getSizeModel:function(){var b=Ext.layout.SizeModel.configured;return b.pairsByHeightOrdinal[b.ordinal]},handleViewportResize:function(){var b=this,c=Ext.dom.Element,e=c.getViewportWidth(),d=c.getViewportHeight();if(e!==b.width||d!==b.height){b.setSize(e,d)}},setupViewport:function(){var b=this,c=document.body;if(!b.$responsiveId){b.setResponsiveConfig(!0);Ext.mixin.Responsive.register(b);b.setupResponsiveContext()}if(!c.id){c.id=b.id}c.setAttribute('data-componentid',b.id);if(!b.ariaStaticRoles[b.ariaRole]){c.setAttribute('role',b.ariaRole)}c=b.el=Ext.getBody();Ext.fly(document.documentElement).addCls(b.viewportCls);c.setHeight=c.setWidth=Ext.emptyFn;c.dom.scroll='no';b.allowDomMove=!1;b.renderTo=c;if(Ext.supports.Touch){b.addMeta('apple-mobile-web-app-capable','yes')}Ext.scrollbar.size();b.width=b.height=undefined;b.initialViewportHeight=Ext.Element.getViewportHeight();b.initialViewportWidth=Ext.Element.getViewportWidth()},afterLayout:function(b){if(Ext.supports.Touch){document.body.scrollTop=0}this.callParent([b])},onRender:function(){var b=this,d=b.getOverflowEl(),c=Ext.getBody();b.callParent(arguments);Ext.setViewportScroller(b.getScrollable()||{x:!1,y:!1,element:c});if(b.getOverflowEl()!==c){c.setStyle('overflow','hidden')}b.width=b.initialViewportWidth;b.height=b.initialViewportHeight;b.initialViewportWidth=b.initialViewportHeight=null},initInheritedState:function(d,e){var b=this,c=Ext.rootInheritedState;if(d!==c){b.initInheritedState(b.inheritedState=c,b.inheritedStateInner=Ext.Object.chain(c))}else {b.callParent([d,e])}},doDestroy:function(){var b=this,e=Ext.rootInheritedState,d=b.scrollable,c;if(d){d.setConfig({x:!0,y:!0});b.scrollable=null}for(c in e){if(c!=='rtl'){delete e[c]}}delete b.el.setHeight;delete b.el.setWidth;b.removeUIFromElement();b.el.removeCls(b.baseCls);Ext.fly(document.body.parentNode).removeCls(b.viewportCls);b.callParent()},addMeta:function(d,c){var b=document.createElement('meta');b.setAttribute('name',d);b.setAttribute('content',c);Ext.getHead().appendChild(b,!0)},privates:{applyTargetCls:function(b){var c=this.el;if(c===this.getTargetEl()){this.el.addCls(b)}else {this.callParent([b])}},disableTabbing:function(){var b=this.el;if(b){b.saveTabbableState({skipSelf:!0})}},enableTabbing:function(){var b=this.el;if(b){b.restoreTabbableState({skipSelf:!0})}},updateResponsiveState:function(){this.handleViewportResize();this.callParent()}}})}}},function(a){a.prototype.decorate=a.decorate});Ext.define('Ext.container.Viewport',{extend:Ext.container.Container,alias:'widget.viewport',alternateClassName:'Ext.Viewport',ariaRole:'application',responsiveConfig:!0,privates:{updateResponsiveState:function(){this.handleViewportResize();this.mixins.responsive.updateResponsiveState.call(this)}}},function(){Ext.plugin.Viewport.decorate(this)});Ext.define('Ext.layout.container.Anchor',{extend:Ext.layout.container.Auto,alternateClassName:'Ext.layout.AnchorLayout',alias:'layout.anchor',type:'anchor',defaultAnchor:'100%',parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:!0,setsItemSize:!0,beginLayoutCycle:function(f){var h=this,c=0,b,a,e,d,g;h.callParent(arguments);e=f.childItems;g=e.length;for(d=0;d<g;++d){a=e[d];b=a.target.anchorSpec;if(b){if(a.widthModel.calculated&&b.right){c|=1}if(a.heightModel.calculated&&b.bottom){c|=2}if(c===3){break}}}f.anchorDimensions=c},calculateItems:function(i,b){var m=this,j=i.childItems,q=j.length,k=b.gotHeight,l=b.gotWidth,o=b.height,p=b.width,n=(l?1:0)|(k?2:0),f=i.anchorDimensions,h,a,g,c,e,d;if(!f){return !0}for(e=0;e<q;e++){a=j[e];g=a.getMarginInfo();h=a.target.anchorSpec;if(l&&a.widthModel.calculated){d=h.right(p)-g.width;d=m.adjustWidthAnchor(d,a);a.setWidth(d)}if(k&&a.heightModel.calculated){c=h.bottom(o)-g.height;c=m.adjustHeightAnchor(c,a);a.setHeight(c)}}return (n&f)===f},anchorFactory:{offset:function(a){return function(b){return b+a}},ratio:function(a){return function(b){return Math.floor(b*a)}},standard:function(a){return function(b){return b-a}}},parseAnchor:function(a,e,d){var b=this.anchorFactory,c;if(a&&a!=='none'){if(this.parseAnchorRE.test(a)){return b.standard(d-e)}if(a.indexOf('%')!==-1){return b.ratio(parseFloat(a.replace('%',''))*0.01)}c=parseInt(a,10);if(!isNaN(c)){return b.offset(c)}}return null},adjustWidthAnchor:function(a,b){return a},adjustHeightAnchor:function(a,b){return a},configureItem:function(a){var c=this,b=c.owner,g=a.anchor,f,d,e;c.callParent(arguments);if(!a.anchor&&a.items&&!Ext.isNumber(a.width)){a.anchor=g=c.defaultAnchor}if(b.anchorSize){if(typeof b.anchorSize==='number'){d=b.anchorSize}else {d=b.anchorSize.width;e=b.anchorSize.height}}else {d=b.initialConfig.width;e=b.initialConfig.height}if(g){f=g.split(' ');a.anchorSpec={right:c.parseAnchor(f[0],a.initialConfig.width,d),bottom:c.parseAnchor(f[1],a.initialConfig.height,e)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(e){var a=e.anchorSpec,d='$',c=this.sizePolicy,b;if(a){b=this.owner.getSizeModel();if(a.right&&!b.width.shrinkWrap){c=c.r}if(a.bottom&&!b.height.shrinkWrap){d='b'}}return c[d]}});Ext.define('Ext.dd.DragTracker',{mixins:{observable:Ext.util.Observable},active:!1,trackOver:!1,tolerance:5,autoStart:!1,constructor:function(b){var a=this;Ext.apply(a,b);a.dragRegion=new Ext.util.Region(0,0,0,0);if(a.el){a.initEl(a.el)}a.mixins.observable.constructor.call(a);if(a.disabled){a.disable()}if(Ext.supports.Touch){Ext.getWin().on({touchstart:'onWindowTouchStart',scope:a,capture:!0})}},initEl:function(d){var a=this,f=a.delegate,c,b,e;a.el=d=Ext.get(d);if(f){if(f.isElement){a.handle=f;e=f}}else {e=d}if(e){e.addCls(Ext.baseCSSPrefix+'unselectable')}a.delegate=a.handle?undefined:a.delegate;if(Ext.supports.Touch){c=Ext.Component.from(d);b=c&&c.getScrollable();if(b){c=b.getElement();if(a.handle&&!c.contains(a.handle)){b=!1}else {if(a.delegate&&!c.down(a.delegate)){b=!1}else {b=b.getX()||b.getY()}}}}if(!a.handle){a.handle=d}a.handleListeners={scope:a,delegate:a.delegate,dragstart:a.onDragStart};if(b){a.handleListeners.longpress=a.onMouseDown;a.handleListeners.mousedown={fn:a.onMouseDown,delegate:a.delegate,translate:!1};a.handleListeners.contextmenu=function(a){a.stopEvent()}}else {a.handleListeners.mousedown=a.onMouseDown}if(!Ext.supports.TouchEvents&&(a.trackOver||a.overCls)){Ext.apply(a.handleListeners,{mouseover:a.onMouseOver,mouseout:a.onMouseOut})}a.mon(a.handle,a.handleListeners);a.keyNav=new Ext.util.KeyNav({target:d,up:a.onResizeKeyDown,left:a.onResizeKeyDown,right:a.onResizeKeyDown,down:a.onResizeKeyDown,scope:a})},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){this.endDrag({});Ext.destroy(this.keyNav);this.callParent()},onWindowTouchStart:function(a){if(this.mouseIsDown){this.onMouseUp(a)}},onMouseOver:function(d,h){var a=this,f,b,e,g,c;if(!a.disabled){if(d.within(d.target,!0,!0)||a.delegate){f=a.handleCls;a.mouseIsOut=!1;if(f){for(e=0,g=a.handleEls.length;e<g;e++){b=a.handleEls[e];c=b.delegateCls;if(!c){c=b.delegateCls=[f,'-',b.region,'-over'].join('')}b.addCls([c,a.overCls])}}a.fireEvent('mouseover',a,d,a.delegate?d.getTarget(a.delegate,h):a.handle)}}},onMouseOut:function(e){var a=this,c,b,d;if(a.mouseIsDown){a.mouseIsOut=!0}else {if(a.handleCls){for(b=0,d=a.handleEls.length;b<d;b++){c=a.handleEls[b];c.removeCls([c.delegateCls,a.overCls])}}a.fireEvent('mouseout',a,e)}},onMouseDown:function(b,d){var a=this,c=b.parentEvent||b;if(b.button||a.disabled||c.dragTracked){return}a.dragTarget=a.delegate?d:a.handle.dom;a.startXY=a.lastXY=b.getXY();a.startRegion=Ext.fly(a.dragTarget).getRegion();if(a.fireEvent('mousedown',a,b)===!1||a.fireEvent('beforedragstart',a,b)===!1||a.onBeforeStart(b)===!1){return}a.mouseIsDown=!0;c.dragTracked=!0;a.el.setCapture();b.stopPropagation();if(a.preventDefault!==!1||b.pointerType==='touch'){b.preventDefault()}Ext.getDoc().on({scope:a,capture:!0,mouseup:a.onMouseUp,mousemove:a.onMouseMove,selectstart:a.stopSelect});a.dragEnded=!1;if(!a.tolerance){a.triggerStart()}else {if(a.autoStart){a.timer=Ext.defer(a.triggerStart,a.autoStart===!0?1000:a.autoStart,a,[b])}}},onMouseMove:function(b,e){var a=this,c=b.getXY(),d=a.startXY;b.stopPropagation();if(a.preventDefault!==!1){b.preventDefault()}if(a.dragEnded){return}a.lastXY=c;if(!a.active){if(Math.max(Math.abs(d[0]-c[0]),Math.abs(d[1]-c[1]))>a.tolerance){a.triggerStart(b)}else {return}}if(a.fireEvent('mousemove',a,b)===!1){a.onMouseUp(b)}else {a.onDrag(b);a.fireEvent('drag',a,b)}},onMouseUp:function(b){var a=this;a.mouseIsDown=!1;if(a.mouseIsOut){a.mouseIsOut=!1;a.onMouseOut(b)}if(a.preventDefault!==!1){b.preventDefault()}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}a.fireEvent('mouseup',a,b);a.endDrag(b)},endDrag:function(b){var a=this,c=a.active;Ext.getDoc().un({mousemove:a.onMouseMove,mouseup:a.onMouseUp,selectstart:a.stopSelect,capture:!0,scope:a});a.clearStart();a.active=!1;a.dragEnded=!0;if(c){a.onEnd(b);a.fireEvent('dragend',a,b)}else {a.onCancel(b)}a._constrainRegion=null},triggerStart:function(b){var a=this;a.clearStart();a.active=!0;a.onStart(b);a.fireEvent('dragstart',a,b)},clearStart:function(){var a=this.timer;if(a){Ext.undefer(a);this.timer=null}},stopSelect:function(a){a.stopEvent();return !1},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onCancel:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var a=this;if(a.constrainTo){if(a.constrainTo instanceof Ext.util.Region){return a.constrainTo}if(!a._constrainRegion){a._constrainRegion=Ext.fly(a.constrainTo).getViewRegion()}}else {if(!a._constrainRegion){a._constrainRegion=a.getDragCt().getViewRegion()}}return a._constrainRegion},getXY:function(a){return a?this.constrainModes[a](this,this.lastXY):this.lastXY},getOffset:function(c){var a=this.getXY(c),b=this.startXY;return [a[0]-b[0],a[1]-b[1]]},onDragStart:function(a){a.stopPropagation()},constrainModes:{point:function(d,b){var a=d.dragRegion,c=d.getConstrainRegion();if(!c){return b}a.x=a.left=a[0]=a.right=b[0];a.y=a.top=a[1]=a.bottom=b[1];a.constrainTo(c);return [a.left,a.top]},dragTarget:function(e,c){var f=e.startXY,a=e.startRegion.copy(),b=e.getConstrainRegion(),d;if(!b){return c}a.translateBy(c[0]-f[0],c[1]-f[1]);if(a.right>b.right){c[0]+=d=b.right-a.right;a.left+=d}if(a.left<b.left){c[0]+=b.left-a.left}if(a.bottom>b.bottom){c[1]+=d=b.bottom-a.bottom;a.top+=d}if(a.top<b.top){c[1]+=b.top-a.top}return c}}});Ext.define('Ext.resizer.SplitterTracker',{extend:Ext.dd.DragTracker,enabled:!0,overlayCls:Ext.baseCSSPrefix+'resizable-overlay',createDragOverlay:function(){var a,b=Ext.dom.Element;a=this.overlay=Ext.getBody().createChild({role:'presentation',cls:this.overlayCls,html:'&#160;'});a.unselectable();a.setSize(b.getDocumentWidth(),b.getDocumentHeight());a.show()},getPrevCmp:function(){var a=this.getSplitter();return a.previousSibling(':not([hidden])')},getNextCmp:function(){var a=this.getSplitter();return a.nextSibling(':not([hidden])')},onBeforeStart:function(g){var a=this,c=a.getPrevCmp(),b=a.getNextCmp(),e=a.getSplitter().collapseEl,f=g.getTarget(),d;if(!c||!b){return !1}if(e&&f===e.dom){return !1}if(b.collapsed||c.collapsed){return !1}a.prevBox=c.getEl().getBox();a.nextBox=b.getEl().getBox();a.constrainTo=d=a.calculateConstrainRegion();if(!d){return !1}return d},onMouseDown:function(b,a){this.callParent([b,a]);if(this.mouseIsDown&&this.getSplitter().el.dom===a){Ext.dom.Element.maskIframes()}},onMouseUp:function(a){this.callParent([a]);Ext.dom.Element.unmaskIframes()},onStart:function(b){var a=this.getSplitter();this.createDragOverlay();a.addCls(a.baseCls+'-active')},onResizeKeyDown:function(b){var a=this,d=a.getSplitter(),f=b.getKey(),e=d.orientation==='vertical'?0:1,g=f===b.UP||f===b.LEFT?-1:1,c;if(!a.active&&a.onBeforeStart(b)){Ext.fly(b.target).on('keyup',a.onResizeKeyUp,a);a.triggerStart(b);a.onMouseDown(b);a.startXY=d.getXY();a.lastKeyDownXY=Ext.Array.slice(a.startXY);c=a.easing=new Ext.fx.easing.Linear();c.setStartTime(Ext.Date.now());c.setStartValue(1);c.setEndValue(4);c.setDuration(2000)}if(a.active){a.lastKeyDownXY[e]=Math.round(a.lastKeyDownXY[e]+g*a.easing.getValue());a.lastXY=a.lastKeyDownXY;d.setXY(a.getXY('dragTarget'))}},onResizeKeyUp:function(a){this.onMouseUp(a)},calculateConstrainRegion:function(){var a=this,k=a.getSplitter(),j=k.getWidth(),e=k.defaultSplitMin,l=k.orientation,c=a.prevBox,g=a.getPrevCmp(),b=a.nextBox,f=a.getNextCmp(),i,h,d;if(l==='vertical'){d={prevCmp:g,nextCmp:f,prevBox:c,nextBox:b,defaultMin:e,splitWidth:j};i=new Ext.util.Region(c.y,a.getVertPrevConstrainRight(d),c.bottom,a.getVertPrevConstrainLeft(d));h=new Ext.util.Region(b.y,a.getVertNextConstrainRight(d),b.bottom,a.getVertNextConstrainLeft(d))}else {i=new Ext.util.Region(c.y+(g.minHeight||e),c.right,(g.maxHeight?c.y+g.maxHeight:b.bottom-(f.minHeight||e))+j,c.x);h=new Ext.util.Region((f.maxHeight?b.bottom-f.maxHeight:c.y+(g.minHeight||e))-j,b.right,b.bottom-(f.minHeight||e),b.x)}return i.intersect(h)},performResize:function(o,b){var c=this,k=c.getSplitter(),m=k.orientation,f=c.getPrevCmp(),e=c.getNextCmp(),l=k.ownerCt,j=l.query('>[flex]'),n=j.length,h=m==='vertical',i=0,d=h?'width':'height',g,a;for(;i<n;i++){g=j[i];a=h?g.getWidth():g.getHeight();g.flex=a}b=h?b[0]:b[1];if(f){a=c.prevBox[d]+b;if(f.flex){f.flex=a}else {f[d]=a}}if(e){a=c.nextBox[d]-b;if(e.flex){e.flex=a}else {e[d]=a}}l.updateLayout()},endDrag:function(){var a=this;if(a.overlay){a.overlay.destroy();delete a.overlay}a.callParent(arguments)},onEnd:function(c){var a=this,b=a.getSplitter();b.removeCls(b.baseCls+'-active');a.performResize(c,a.getResizeOffset())},onDrag:function(f){var a=this,d=a.getOffset('dragTarget'),b=a.getSplitter(),c=b.getEl(),e=b.orientation;if(e==='vertical'){c.setX(a.startRegion.left+d[0])}else {c.setY(a.startRegion.top+d[1])}},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(a){return (a.prevCmp.maxWidth?a.prevBox.x+a.prevCmp.maxWidth:a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin))+a.splitWidth},getVertPrevConstrainLeft:function(a){return a.prevBox.x+(a.prevCmp.minWidth||a.defaultMin)},getVertNextConstrainRight:function(a){return a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin)},getVertNextConstrainLeft:function(a){return (a.nextCmp.maxWidth?a.nextBox.right-a.nextCmp.maxWidth:a.prevBox.x+(a.prevBox.minWidth||a.defaultMin))-a.splitWidth},getResizeOffset:function(){return this.getOffset('dragTarget')}});Ext.define('Ext.dd.DDTarget',{extend:Ext.dd.DragDrop,constructor:function(a,c,b){if(a){this.initTarget(a,c,b)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return 'DDTarget '+this.id}});Ext.define('Ext.dd.ScrollManager',{singleton:!0,vthresh:25*(window.devicePixelRatio||1),hthresh:25*(window.devicePixelRatio||1),increment:100,frequency:500,animate:!0,animDuration:0.4,ddGroup:undefined,dirTrans:{up:-1,left:-1,down:1,right:1},constructor:function(){var a=Ext.dd.DragDropManager;a.fireEvents=Ext.Function.createSequence(a.fireEvents,this.onFire,this);a.stopDrag=Ext.Function.createSequence(a.stopDrag,this.onStop,this);this.doScroll=this.doScroll.bind(this);this.ddmInstance=a;this.els={};this.dragEl=null;this.proc={}},onStop:function(b){var a=Ext.dd.ScrollManager;a.dragEl=null;a.clearProc()},triggerRefresh:function(){if(this.ddmInstance.dragCurrent){this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)}},doScroll:function(){var e=this;if(e.ddmInstance.dragCurrent){var b=e.proc,h=b.el,g=b.component,c=b.el.ddScrollConfig,d,a,f;d=c&&c.increment?c.increment:e.increment;a=c&&'animate' in c?c.animate:e.animate;f=function(){e.triggerRefresh()};if(a){if(a===!0){a={callback:f}}else {a.callback=a.callback?Ext.Function.createSequence(a.callback,f):f}}if(g){d=d*e.dirTrans[b.dir];if(b.dir==='up'||b.dir==='down'){g.scrollBy(0,d,a)}else {g.scrollBy(d,0,a)}}else {h.scroll(b.dir,d,a)}if(!a){f()}}},clearProc:function(){var a=this.proc;if(a.id){Ext.uninterval(a.id)}a.id=0;a.el=null;a.dir=''},startProc:function(a,f){var b=this,d=b.proc,c,e;b.clearProc();d.el=a;d.dir=f;c=a.ddScrollConfig?a.ddScrollConfig.ddGroup:undefined;e=a.ddScrollConfig&&a.ddScrollConfig.frequency?a.ddScrollConfig.frequency:b.frequency;if(c===undefined||b.ddmInstance.dragCurrent.ddGroup===c){d.id=Ext.interval(b.doScroll,e)}},onFire:function(l,k){var b=this,d,f,i,j,a,c,e,g,h;if(k||!b.ddmInstance.dragCurrent){return}if(!b.dragEl||b.dragEl!==b.ddmInstance.dragCurrent){b.dragEl=b.ddmInstance.dragCurrent;b.refreshCache()}d=l.getPoint();f=b.proc;i=b.els;for(j in i){a=i[j];c=a.getRegion();e=a.ddScrollConfig||b;if(c&&c.contains(d)){if(!a.isScrollable()){g=a.component&&a.component.ownerCt;h=g&&g.getScrollerOwner&&g.getScrollerOwner();if(h){a=h.getScrollable().getElement();c=a.getRegion()}else {continue}}if(c.bottom-d.y<=e.vthresh){if(f.el!==a){b.startProc(a,'down')}return}else {if(c.right-d.x<=e.hthresh){if(f.el!==a){b.startProc(a,'right')}return}else {if(d.y-c.top<=e.vthresh){if(f.el!==a){b.startProc(a,'up')}return}else {if(d.x-c.left<=e.hthresh){if(f.el!==a){b.startProc(a,'left')}return}}}}}}b.clearProc()},register:function(a){var b,c;if(Ext.isArray(a)){for(b=0,c=a.length;b<c;b++){this.register(a[b])}}else {a=Ext.get(a);this.els[a.id]=a}},unregister:function(a){var b,c;if(Ext.isArray(a)){for(b=0,c=a.length;b<c;b++){this.unregister(a[b])}}else {a=Ext.get(a);delete this.els[a.id]}},refreshCache:function(){var a=this.els,b;for(b in a){if(typeof a[b]==='object'){a[b]._region=a[b].getRegion()}}}});Ext.define('Ext.dd.DropTarget',{extend:Ext.dd.DDTarget,constructor:function(b,a){this.el=Ext.get(b);Ext.apply(this,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}this.callParent([this.el.dom,this.ddGroup||this.group,{isTarget:!0}])},containerScroll:!1,dropAllowed:Ext.baseCSSPrefix+'dd-drop-ok',dropNotAllowed:Ext.baseCSSPrefix+'dd-drop-nodrop',isTarget:!0,isNotifyTarget:!0,notifyEnter:function(a,c,b){if(this.overClass){this.el.addCls(this.overClass)}return this.dropAllowed},notifyOver:function(a,c,b){return this.dropAllowed},notifyOut:function(a,c,b){if(this.overClass){this.el.removeCls(this.overClass)}},notifyDrop:function(a,c,b){if(this.overClass){this.el.removeCls(this.overClass)}return !1},destroy:function(){if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}this.callParent()}});Ext.define('Ext.dd.DragZone',{extend:Ext.dd.DragSource,constructor:function(a,d){var c=this,b;c.callParent([a,d]);b=c.containerScroll;if(b){a=c.scrollEl||a;a=Ext.get(a);if(Ext.isObject(b)){a.ddScrollConfig=b}Ext.dd.ScrollManager.register(a)}},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){this.proxy.update(this.dragData.ddel.cloneNode(!0));this.onStartDrag(a,b);return !0},getRepairXY:function(a){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.scrollEl||this.el)}this.callParent()}});Ext.define('Ext.dd.Registry',{singleton:!0,constructor:function(){this.elements={};this.handles={};this.autoIdSeed=0},getId:function(b,c){var a;if(typeof b==='string'){return b}a=b.id;if(!a&&c!==!1){a='extdd-'+ ++this.autoIdSeed;b.id=a}return a},register:function(b,a){var d,c,e;a=a||{};if(typeof b==='string'){b=document.getElementById(b)}a.ddel=b;this.elements[this.getId(b)]=a;if(a.isHandle!==!1){this.handles[a.ddel.id]=a}if(a.handles){d=a.handles;for(c=0,e=d.length;c<e;c++){this.handles[this.getId(d[c])]=a}}},unregister:function(f){var e=this.getId(f,!1),b=this.elements[e],c,a,d;if(b){delete this.elements[e];if(b.handles){c=b.handles;for(a=0,d=c.length;a<d;a++){delete this.handles[this.getId(c[a],!1)]}}}},getHandle:function(a){if(typeof a!=='string'){a=a.id}return this.handles[a]},getHandleFromEvent:function(b){var a=b.getTarget();return a?this.handles[a.id]:null},getTarget:function(a){if(typeof a!=='string'){a=a.id}return this.elements[a]},getTargetFromEvent:function(b){var a=b.getTarget();return a?this.elements[a.id]||this.handles[a.id]:null}});Ext.define('Ext.dd.DropZone',{extend:Ext.dd.DropTarget,getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(a,b,d,c){},onNodeOver:function(a,b,d,c){return this.dropAllowed},onNodeOut:function(a,b,d,c){},onNodeDrop:function(a,b,d,c){return !1},onContainerOver:function(a,c,b){return this.dropNotAllowed},onContainerDrop:function(a,c,b){return !1},notifyEnter:function(a,c,b){this.callParent([a,c,b]);return this.dropNotAllowed},notifyOver:function(c,b,d){var a=this,e=a.getTargetFromEvent(b);if(!e){if(a.lastOverNode){a.onNodeOut(a.lastOverNode,c,b,d);a.lastOverNode=null}return a.onContainerOver(c,b,d)}if(a.lastOverNode!==e){if(a.lastOverNode){a.onNodeOut(a.lastOverNode,c,b,d)}a.onNodeEnter(e,c,b,d);a.lastOverNode=e}return a.onNodeOver(e,c,b,d)},notifyOut:function(a,c,b){this.callParent([a,c,b]);if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}},notifyDrop:function(c,b,d){var a=this,e=a.getTargetFromEvent(b),f=e?a.onNodeDrop(e,c,b,d):a.onContainerDrop(c,b,d);if(a.lastOverNode){a.onNodeOut(a.lastOverNode,c,b,d);a.lastOverNode=null}return f},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.define('Ext.event.publisher.MouseEnterLeave',{extend:Ext.event.publisher.Dom,type:'mouseEnterLeave'},function(a){var b={mouseover:'mouseenter',mouseout:'mouseleave'};if(!Ext.supports.MouseEnterLeave){a.override({handledDomEvents:['mouseover','mouseout'],handledEvents:['mouseenter','mouseleave'],publishDelegatedDomEvent:function(c){var h,g,i,e,f,d;this.callParent([c]);h=c.getTarget();g=c.getRelatedTarget();if(g&&Ext.fly(h).contains(g)){return}i=h.id;if(i){e=Ext.cache[i];if(e){f=b[c.type];c=c.chain({type:f});if(e.hasListeners[f]){d=e.events[f];if(d){d=d.directs;if(d){c.setCurrentTarget(e.dom);d.fire(c,c.target)}}}}}}})}a.instance=new a()});Ext.define('Ext.form.action.Action',{alternateClassName:'Ext.form.Action',submitEmptyText:!0,constructor:function(a){var b;if(a){Ext.apply(this,a)}b=a.params;if(Ext.isString(b)){this.params=Ext.Object.fromQueryString(b)}},run:Ext.emptyFn,onFailure:function(c){var a=this.form,b=a&&!a.destroying&&!a.destroyed;this.response=c;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;if(b){a.afterAction(this,!1)}},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return !0}return this.result=this.handleResponse(a)},getUrl:function(){return this.url||this.form.url},getMethod:function(){return (this.method||this.form.method||'POST').toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var a=this;return {success:a.onSuccess,failure:a.onFailure,scope:a,timeout:(a.timeout||a.form.timeout)*1000}},statics:{CLIENT_INVALID:'client',SERVER_INVALID:'server',CONNECT_FAILURE:'connect',LOAD_FAILURE:'load'}});Ext.define('Ext.form.action.Load',{extend:Ext.form.action.Action,alternateClassName:'Ext.form.Action.Load',alias:'formaction.load',type:'load',run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(d){var b=this.processResponse(d),a=this.form,c=a&&!a.destroying&&!a.destroyed;if(b===!0||!b.success||!b.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;if(c){a.afterAction(this,!1)}return}if(c){a.clearInvalid();a.setValues(b.data);a.afterAction(this,!0)}},handleResponse:function(b){var c=this.form.reader,a,d;if(c){a=c.read(b);d=a.records&&a.records[0]?a.records[0].data:null;return {success:a.success,data:d}}return Ext.decode(b.responseText)}});Ext.define('Ext.form.action.Submit',{extend:Ext.form.action.Action,alternateClassName:'Ext.form.Action.Submit',alias:'formaction.submit',type:'submit',run:function(){var a=this,b=a.form;if(a.clientValidation===!1||b.isValid()){a.doSubmit()}else {a.failureType=Ext.form.action.Action.CLIENT_INVALID;b.afterAction(a,!1)}},doSubmit:function(){var a=this,b=Ext.apply(a.createCallback(),{url:a.getUrl(),method:a.getMethod(),headers:a.headers}),e=a.form,d=a.jsonSubmit||e.jsonSubmit,f=d?'jsonData':'params',c;if(e.hasUpload()){c=a.buildForm();b.form=c.formEl;b.isUpload=!0}else {b[f]=a.getParams(d)}Ext.Ajax.request(b);if(c){a.cleanup(c)}},cleanup:function(b){var e=b.formEl,f=b.uploadEls,d=b.uploadFields,g=d.length,a,c;for(a=0;a<g;++a){c=d[a];if(!c.clearOnSubmit){c.restoreInput(f[a])}}if(e){Ext.removeNode(e)}},getParams:function(c){var a=!1,d=this.callParent(),b;b=this.form.getValues(a,a,this.submitEmptyText!==a,c,!0);return Ext.apply({},b,d)},buildForm:function(){var a=this,h=[],f,i,q=a.form,j=a.getParams(),c=[],n=[],o=q.getFields().items,b,l=o.length,k,e,d,g,p,m;for(b=0;b<l;++b){k=o[b];if(k.isFileUpload()){c.push(k)}}for(e in j){if(j.hasOwnProperty(e)){d=j[e];if(Ext.isArray(d)){p=d.length;for(g=0;g<p;g++){h.push(a.getFieldConfig(e,d[g]))}}else {h.push(a.getFieldConfig(e,d))}}}f={tag:'form',role:'presentation',action:a.getUrl(),method:a.getMethod(),target:a.target?Ext.isString(a.target)?a.target:Ext.fly(a.target).dom.name:'_self',style:'display:none',cn:h};if(c.length){f.encoding=f.enctype='multipart/form-data'}i=Ext.DomHelper.append(Ext.getBody(),f);l=c.length;for(b=0;b<l;++b){m=c[b].extractFileInput();i.appendChild(m);n.push(m)}return {formEl:i,uploadFields:c,uploadEls:n}},getFieldConfig:function(b,a){return {tag:'input',type:'hidden',name:b,value:Ext.String.htmlEncode(a)}},onSuccess:function(e){var a=this.form,c=a&&!a.destroying&&!a.destroyed,d=!0,b=this.processResponse(e);if(b!==!0&&!b.success){if(b.errors&&c){a.markInvalid(b.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;d=!1}if(c){a.afterAction(this,d)}},handleResponse:function(g){var i=this.form,f=i.errorReader,e,a,b,h,c,d;if(f){e=f.read(g);c=e.records;a=[];if(c){for(b=0,h=c.length;b<h;b++){a[b]=c[b].data}}if(a.length<1){a=null}d={success:e.success,errors:a}}else {try{d=Ext.decode(g.responseText)}catch(j){d={success:!1,errors:[]}}}return d}});Ext.define('Ext.form.action.StandardSubmit',{extend:Ext.form.action.Submit,alias:'formaction.standardsubmit',doSubmit:function(){var a=this.buildForm();a.formEl.submit();this.cleanup(a)}});Ext.define('Ext.util.ComponentDragger',{extend:Ext.dd.DragTracker,autoStart:500,constructor:function(b,a){this.comp=b;this.initialConstrainTo=a.constrainTo;this.callParent([a])},onStart:function(c){var a=this,b=a.comp;a.dragTarget=a.el;a.startRegion=a.el.getRegion();a.startPosition=b.getXY();if(b.ghost&&!b.liveDrag){a.proxy=b.ghost()}if(a.constrain||a.constrainDelegate){a.constrainTo=a.calculateConstrainRegion()}if(b.beginDrag){b.beginDrag()}Ext.dom.Element.maskIframes()},calculateConstrainRegion:function(){var c=this,h=c.comp,b=c.initialConstrainTo||c.comp.el.dom.parentNode,a=h.constraintInsets,i,d,f,j=c.proxy?c.proxy.el:h.el,g=j.shadow,e=g&&!c.constrainDelegate&&h.constrainShadow&&!g.disabled?g.getShadowSize():0;if(!(b instanceof Ext.util.Region)){i=Ext.fly(b);b=i.getConstrainRegion()}else {b=b.copy()}if(a){a=Ext.isObject(a)?a:Ext.Element.parseBox(a);b.adjust(a.top,a.right,a.bottom,a.left)}if(e){b.adjust(e[0],-e[1],-e[2],e[3])}if(c.constrainDelegate){d=Ext.fly(c.handle).getRegion();f=j.getRegion();b.adjust(f.top-d.top,f.right-d.right,f.bottom-d.bottom,f.left-d.left)}return b},onDrag:function(d){var a=this,c=a.proxy&&!a.comp.liveDrag?a.proxy:a.comp,b=a.getOffset(a.constrain||a.constrainDelegate?'dragTarget':null);c.setPagePosition(a.startPosition[0]+b[0],a.startPosition[1]+b[1])},onEnd:function(b){var a=this.comp;if(a.destroyed||a.destroying){return}if(this.proxy&&!a.liveDrag){a.unghost()}if(a.endDrag){a.endDrag()}Ext.dom.Element.unmaskIframes()}});Ext.define('Ext.window.Window',{extend:Ext.panel.Panel,alias:'widget.window',alternateClassName:'Ext.Window',baseCls:Ext.baseCSSPrefix+'window',resizable:!0,draggable:!0,constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:50,minWidth:50,expandOnShow:!0,collapsible:!1,closable:!0,hidden:!0,autoRender:!0,hideMode:'offsets',floating:!0,alignOnScroll:!1,itemCls:Ext.baseCSSPrefix+'window-item',overlapHeader:!0,ignoreHeaderBorderManagement:!0,alwaysFramed:!0,isRootCfg:{isRoot:!0},isWindow:!0,ariaRole:'dialog',focusable:!0,tabGuard:!0,closeToolText:'Close dialog',keyMap:{scope:'this',ESC:'onEsc'},maskClickAction:'focus',disableCloseToolFocus:!0,initComponent:function(){var a=this;a.frame=!1;a.callParent();if(a.plain){a.addClsWithUI('plain')}a.addStateEvents(['maximize','restore','resize','dragend'])},getElConfig:function(){var b=this,a;a=b.callParent();a.tabIndex=-1;return a},getFocusEl:function(){return this.getDefaultFocus()||this.el},getState:function(){var a=this,e=a.callParent()||{},c=!!a.maximized,d=a.ghostBox,b;e.maximized=c;if(c){b=a.restorePos}else {if(d){b=[d.x,d.y]}else {b=a.getPosition(!0)}}Ext.apply(e,{size:c?a.restoreSize:a.getSize(),pos:b});return e},applyState:function(a){var b=this;if(a){b.maximized=a.maximized;if(b.maximized){b.hasSavedRestore=!0;b.restoreSize=a.size;b.restorePos=a.pos}else {Ext.apply(b,{width:a.size.width,height:a.size.height,x:a.pos[0],y:a.pos[1]})}}},onRender:function(c,b){var a=this;a.callParent(arguments);if(a.header){a.header.on({scope:a,click:a.onHeaderClick})}if(a.maximizable){a.header.on({scope:a,dblclick:a.toggleMaximize})}},afterRender:function(){var a=this,b=a.header;if(a.maximized){a.maximized=!1;a.maximize(null,!0);if(b){b.removeCls(b.indicateDragCls)}}a.callParent();a.initTabGuards()},onEsc:function(a){if(this.closable){a.stopEvent();this.close();return !1}},doDestroy:function(){var a=this;if(a.rendered){Ext.un('resize',a.onWindowResize,a);delete a.animateTarget;a.hide()}a.callParent()},addTools:function(){var a=this,b=[];a.callParent();if(a.minimizable){b.push({type:'minimize',handler:'minimize',scope:a})}if(a.maximizable){b.push({type:'maximize',handler:'toggleMaximize',scope:a})}if(b.length){a.addTool(b)}},addTool:function(b){var a=this;a.callParent([b]);if(a.rendered&&a.tabGuard){a.initTabGuards()}},add:function(){var a=this,b;b=a.callParent(arguments);if(a.rendered&&a.tabGuard){a.initTabGuards()}return b},remove:function(){var a=this,b;b=a.callParent(arguments);if(a.rendered&&a.tabGuard){a.initTabGuards()}return b},addDocked:function(){var a=this,b;b=a.callParent(arguments);if(a.rendered&&a.tabGuard){a.initTabGuards()}return b},removeDocked:function(){var a=this,b;b=a.callParent(arguments);if(a.rendered&&a.tabGuard){a.initTabGuards()}return b},onShow:function(){var a=this;a.callParent(arguments);if(a.expandOnShow){a.expand(!1)}a.syncMonitorWindowResize();if(a.rendered&&a.tabGuard){a.initTabGuards()}},doClose:function(){var a=this;if(a.hidden){a.fireEvent('close',a);if(a.closeAction==='destroy'&&!a.destroying&&!a.destroyed){a.destroy()}}else {a.hide(a.animateTarget,a.doClose,a)}},afterHide:function(){var a=this;a.syncMonitorWindowResize();a.callParent(arguments);if(!a.destroyed&&a.rendered&&a.tabGuard){a.initTabGuards()}},onWindowResize:function(){var a=this,b;if(!a.destroyed){if(a.maximized){a.fitContainer()}else {b=a.getSizeModel();if(b.width.natural||b.height.natural){a.updateLayout()}a.doConstrain()}}},minimize:function(){this.fireEvent('minimize',this);return this},resumeHeaderLayout:function(a){this.header.resumeLayouts(a?this.isRootCfg:null)},afterCollapse:function(){var a=this,b=a.header,c=a.tools;if(b&&a.maximizable){b.suspendLayouts();c.maximize.hide();this.resumeHeaderLayout(!0)}if(a.resizer){a.resizer.disable()}a.callParent(arguments)},afterExpand:function(){var a=this,c=a.header,d=a.tools,b;if(c){c.suspendLayouts();if(a.maximizable){d.maximize.show();b=!0}this.resumeHeaderLayout(b)}if(a.resizer){a.resizer.enable()}a.callParent(arguments)},maximize:function(c,d){var a=this,b=a.header,g=a.tools,h=a.width,f=a.height,e;if(!a.maximized&&!a.maximizing){a.maximizing=!0;a.expand(!1);if(!a.hasSavedRestore){a.restoreSize={width:h?h:null,height:f?f:null};if(d){a.restorePos=[a.x||0,a.y||0]}else {a.restorePos=a.getPosition()}}if(b){b.suspendLayouts();if(g.maximize){g.maximize.setType('restore')}if(a.collapseTool){a.collapseTool.hide();e=!0}a.resumeHeaderLayout(e)}a.el.disableShadow();if(a.dd){a.dd.disable();if(b){b.removeCls(b.indicateDragCls)}}if(a.resizer){a.resizer.disable()}a.el.addCls(Ext.baseCSSPrefix+'window-maximized');a.container.addCls(Ext.baseCSSPrefix+'window-maximized-ct');a.syncMonitorWindowResize();a.fitContainer(c=c||!!a.animateTarget?{callback:function(){a.maximizing=!1;a.maximized=!0;if(!d){a.fireEvent('maximize',a)}}}:null);if(!c){a.maximizing=!1;a.maximized=!0;if(!d){a.fireEvent('maximize',a)}}}return a},restore:function(c){var a=this,f=a.tools,b=a.header,d=a.restoreSize,e;if(a.maximized){a.hasSavedRestore=null;a.removeCls(Ext.baseCSSPrefix+'window-maximized');if(b){b.suspendLayouts();if(f.maximize){f.maximize.setType('maximize')}if(a.collapseTool){a.collapseTool.show();e=!0}a.resumeHeaderLayout(e)}d.x=a.restorePos[0];d.y=a.restorePos[1];a.setBox(d,c=c||!!a.animateTarget?{callback:function(){a.el.enableShadow(null,!0);a.maximized=!1;a.fireEvent('restore',a)}}:null);a.restorePos=a.restoreSize=null;if(a.dd){a.dd.enable();if(b){b.addCls(b.indicateDragCls)}}if(a.resizer){a.resizer.enable()}a.container.removeCls(Ext.baseCSSPrefix+'window-maximized-ct');a.syncMonitorWindowResize();if(!c){a.el.enableShadow(null,!0);a.maximized=!1;a.fireEvent('restore',a)}}return a},syncMonitorWindowResize:function(){var a=this,b=a._monitoringResize,d=a.monitorResize||a.constrain||a.constrainHeader||a.maximized,c=a.hidden||a.destroying||a.destroyed;if(d&&!c){if(!b){Ext.on('resize',a.onWindowResize,a,{buffer:1});a._monitoringResize=!0}}else {if(b){Ext.un('resize',a.onWindowResize,a);a._monitoringResize=!1}}},toggleMaximize:function(){return this[this.maximized?'restore':'maximize']()},createGhost:function(){var a=this.callParent(arguments);a.xtype='window';a.focusOnToFront=!1;return a},getDefaultFocus:function(){var d=this,b,a=d.defaultFocus,c;if(a!==undefined){if(Ext.isNumber(a)){b=d.query('button')[a]}else {if(Ext.isString(a)){c=a;if(Ext.validIdRe.test(c)){b=d.down(Ext.makeIdSelector(c))}if(!b){b=d.down(c)}}else {if(a.focus){b=a}}}}return b},privates:{initDraggable:function(){this.initSimpleDraggable()},onHeaderClick:function(b,c){var a;if(b.el.contains(c.getTarget())){a=this.getDefaultFocus();if(a){a.focus()}}},initResizable:function(b){var a=this;a.callParent([b]);if(a.maximized||a.maximizing){a.resizer.disable()}},initSimpleDraggable:function(){var a=this,b;a.callParent();b=a.dd;if(b&&a.maximized||a.maximizing){b.disable()}},onTabGuardFocusEnter:function(i,g){var f=this,d=f.el,e=f.tabGuardBeforeEl,j=f.tabGuardAfterEl,h=i.relatedTarget,a,c,b;a=d.findTabbableElements({skipSelf:!0});if(a[0]===e.dom){a.shift()}if(a[a.length-1]===j.dom){a.pop()}if(a.length===0){b=d}else {if(h===d.dom){c=g===e.dom}else {if(d.contains(h)){c=!!i.forwardTab}else {c=g===e.dom}}}b=b||(c?a[0]:a[a.length-1]);if(b){Ext.fly(b).focus(a.length===1?1:0)}}}});Ext.define('Ext.form.field.TextArea',{extend:Ext.form.field.Text,alias:['widget.textareafield','widget.textarea'],alternateClassName:'Ext.form.TextArea',fieldSubTpl:['<textarea id="{id}" data-ref="inputEl" rows="1" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls} {fixCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>','</textarea>',{disableFormats:!0}],growMin:60,growMax:1000,growAppend:'\n-',enterIsSpecial:!1,preventScrollbars:!1,returnRe:/\r/g,inputCls:Ext.baseCSSPrefix+'form-textarea',extraFieldBodyCls:Ext.baseCSSPrefix+'form-textarea-body',ariaAttributes:{'aria-multiline':!0},getSubTplData:function(d){var a=this,c=a.getFieldStyle(),b=a.callParent(arguments);if(a.grow){if(a.preventScrollbars){b.fieldStyle=(c||'')+';overflow:hidden;'}}return b},afterRender:function(){var a=this;a.callParent(arguments);a.needsMaxCheck=a.enforceMaxLength&&a.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength;if(a.needsMaxCheck){a.inputEl.on('paste',a.onPaste,a)}},transformRawValue:function(a){return this.stripReturns(a)},getValue:function(){return this.stripReturns(this.callParent())},valueToRaw:function(a){a=this.stripReturns(a);return this.callParent([a])},stripReturns:function(a){if(a&&typeof a==='string'){a=a.replace(this.returnRe,'')}return a},onPaste:function(){var a=this;if(!a.pasteTask){a.pasteTask=new Ext.util.DelayedTask(a.pasteCheck,a)}a.pasteTask.delay(1)},pasteCheck:function(){var b=this,a=b.getValue(),c=b.maxLength;if(a.length>c){a=a.substr(0,c);b.setValue(a)}},fireKey:function(a){var b=this,c=a.getKey(),d;if(a.isSpecialKey()&&(b.enterIsSpecial||(c!==a.ENTER||a.hasModifier()))){b.fireEvent('specialkey',b,a)}if(b.needsMaxCheck&&c!==a.BACKSPACE&&c!==a.DELETE&&!a.isNavKeyPress()&&!b.isCutCopyPasteSelectAll(a,c)){d=b.getValue();if(d.length>=b.maxLength){a.stopEvent()}}},isCutCopyPasteSelectAll:function(a,b){if(a.ctrlKey){return b===a.A||b===a.C||b===a.V||b===a.X}return !1},autoSize:function(){var a=this,b,e,c,f,d;if(a.grow&&a.rendered&&a.getSizeModel().height.auto){b=a.inputEl;f=b.getWidth(!0);d=Ext.util.Format.htmlEncode(b.dom.value)||'&#160;';d+=a.growAppend;d=d.replace(/\n/g,'<br/>');c=Ext.util.TextMetrics.measure(b,d,f).height+b.getPadding('tb')+a.inputWrap.getBorderWidth('tb')+a.triggerWrap.getBorderWidth('tb');c=Math.min(Math.max(c,a.growMin),a.growMax);e=a.preventScrollbars||!a.growMax||c<a.growMax;b.setStyle('overflow-y',e?'hidden':'auto');a.bodyEl.setHeight(c);a.updateLayout();a.fireEvent('autosize',a,c)}},doDestroy:function(){var a=this.pasteTask;if(a){a.cancel()}this.callParent()}});Ext.define('Ext.window.MessageBox',{extend:Ext.window.Window,alias:'widget.messagebox',OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:Ext.baseCSSPrefix+'message-box-info',WARNING:Ext.baseCSSPrefix+'message-box-warning',QUESTION:Ext.baseCSSPrefix+'message-box-question',ERROR:Ext.baseCSSPrefix+'message-box-error',hideMode:'offsets',closeAction:'hide',resizable:!1,scrollable:!0,title:'&#160;',defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:!0,cls:[Ext.baseCSSPrefix+'message-box',Ext.baseCSSPrefix+'hidden-offsets'],layout:{type:'vbox',align:'stretch'},shrinkWrapDock:!0,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:'OK',yes:'Yes',no:'No',cancel:'Cancel'},buttonIds:['ok','yes','no','cancel'],baseIconCls:Ext.baseCSSPrefix+'message-box-icon',ariaRole:'alertdialog',makeButton:function(b){var a=this.buttonIds[b];return new Ext.button.Button({handler:this.btnCallback,itemId:a,scope:this,text:this.buttonText[a],minWidth:75})},btnCallback:function(e,b){var a=this,d,c;if(b&&b.type==='keydown'&&!b.isSpecialKey()){b.getTarget(null,null,!0).on({keyup:function(c){a.btnCallback(e,c)},single:!0});return}if(a.cfg.prompt||a.cfg.multiline){if(a.cfg.multiline){c=a.textArea}else {c=a.textField}d=c.getValue();c.reset()}a.hide();a.userCallback(e.itemId,d,a.cfg)},hide:function(){var a=this,b=a.cfg?a.cfg.cls:'';a.progressBar.reset();if(b){a.removeCls(b)}a.callParent(arguments)},constructor:function(b){var a=this;a.callParent(arguments);a.minWidth=a.defaultMinWidth=a.minWidth||a.defaultMinWidth;a.maxWidth=a.defaultMaxWidth=a.maxWidth||a.defaultMaxWidth;a.minHeight=a.defaultMinHeight=a.minHeight||a.defaultMinHeight;a.maxHeight=a.defaultMaxHeight=a.maxHeight||a.defaultMaxHeight},initComponent:function(e){var a=this,b=a.id,d,c;a.title=a.title||'&#160;';a.iconCls=a.iconCls||'';a.topContainer=new Ext.container.Container({layout:'hbox',padding:10,style:{overflow:'hidden'},items:[a.iconComponent=new Ext.Component({cls:a.baseIconCls}),a.promptContainer=new Ext.container.Container({flex:1,layout:{type:'vbox',align:'stretch'},items:[a.msg=new Ext.Component({id:b+'-msg',cls:a.baseCls+'-text'}),a.textField=new Ext.form.field.Text({id:b+'-textfield',enableKeyEvents:!0,ariaAttributes:{'aria-labelledby':a.msg.id},listeners:{keydown:a.onPromptKey,scope:a}}),a.textArea=new Ext.form.field.TextArea({id:b+'-textarea',height:75,ariaAttributes:{'aria-labelledby':a.msg.id}})]})]});a.progressBar=new Ext.ProgressBar({id:b+'-progressbar',margin:'0 10 10 10'});a.items=[a.topContainer,a.progressBar];a.msgButtons=[];for(d=0;d<4;d++){c=a.makeButton(d);a.msgButtons[c.itemId]=c;a.msgButtons.push(c)}a.bottomTb=new Ext.toolbar.Toolbar({id:b+'-toolbar',ui:'footer',dock:'bottom',focusableContainer:!1,ariaRole:null,layout:{pack:{left:'start',right:'end'}[a.buttonAlign]||'center'},items:[a.msgButtons[0],a.msgButtons[1],a.msgButtons[2],a.msgButtons[3]]});a.dockedItems=[a.bottomTb];a.on('close',a.onClose,a);a.callParent()},afterRender:function(){var a=this;a.callParent(arguments);a.textField.labelEl.dom.removeAttribute('for');a.textArea.labelEl.dom.removeAttribute('for')},onClose:function(){var a=this.msgButtons[3];if(a){this.btnCallback(a)}},onPromptKey:function(c,b){var a=this;if(b.keyCode===b.RETURN||b.keyCode===10){if(a.msgButtons.ok.isVisible()){a.msgButtons.ok.handler.call(a,a.msgButtons.ok)}else {if(a.msgButtons.yes.isVisible()){a.msgButtons.yes.handler.call(a,a.msgButtons.yes)}}}},reconfigure:function(b){var a=this,k=0,s=!0,w=a.buttonText,g=a.resizer,c=a.header,u=c&&!c.isHeader,v=b&&(b.message||b.msg),t=b.buttonTips,p,n,i,q,o,e,d,f,l,j,m,h,r;a.updateButtonText();a.cfg=b=b||{};h=b.wait;if(b.width){q=b.width}if(b.height){o=b.height}a.minWidth=b.minWidth||a.defaultMinWidth;a.maxWidth=b.maxWidth||a.defaultMaxWidth;a.minHeight=b.minHeight||a.defaultMinHeight;a.maxHeight=b.maxHeight||a.defaultMaxHeight;if('maskClickAction' in b){a.maskClickAction=b.maskClickAction}else {delete a.maskClickAction}if(g){i=g.resizeTracker;g.minWidth=i.minWidth=a.minWidth;g.maxWidth=i.maxWidth=a.maxWidth;g.minHeight=i.minHeight=a.minHeight;g.maxHeight=i.maxHeight=a.maxHeight}delete a.defaultFocus;if(b.defaultFocus){a.defaultFocus=b.defaultFocus}a.animateTarget=b.animateTarget||undefined;a.modal=b.modal!==!1;if(b.title!=null){p=b.title}else {if(u&&c.title!=null){p=c.title}else {p=a.title}}if(b.iconCls!=null){n=b.iconCls}else {if(u&&c.iconCls!=null){n=c.iconCls}else {n=a.iconCls}}a.setTitle(p);a.setIconCls(n);if(Ext.isObject(b.buttons)){a.buttonText=b.buttons;k=0}else {a.buttonText=b.buttonText||a.buttonText;k=Ext.isNumber(b.buttons)?b.buttons:0}Ext.each(a.buttonIds,function(c){a.msgButtons[c].setTooltip(t&&t[c]||null)});k=k|a.updateButtonText();a.buttonText=w;Ext.suspendLayouts();a.width=a.height=null;if(q||o){if(q){a.setWidth(q)}if(o){a.setHeight(o)}}if(!a.rendered){a.render(Ext.getBody())}a.closable=b.closable!==!1&&!h;c=a.header;if(c){r=c.child('[type=close]');if(r){r.setVisible(a.closable)}if(!b.title&&!a.closable&&!b.iconCls){c.hide()}else {c.show()}}a.liveDrag=!b.proxyDrag;a.userCallback=Ext.Function.bindCallback(b.callback||b.fn||Ext.emptyFn,b.scope||Ext.global);a.setIcon(b.icon);l=a.msg;if(v){l.setHtml(v);l.show();a.ariaEl.dom.setAttribute('aria-describedby',l.id)}else {l.hide();a.ariaEl.dom.removeAttribute('aria-describedby')}d=a.textArea;f=a.textField;if(b.prompt||b.multiline){a.multiline=b.multiline;if(b.multiline){d.setValue(b.value);d.setHeight(b.defaultTextHeight||a.defaultTextHeight);d.show();f.hide();a.defaultFocus=d}else {f.setValue(b.value);d.hide();f.show();a.defaultFocus=f}a.ariaEl.dom.removeAttribute('aria-describedby')}else {d.hide();f.hide()}j=a.progressBar;if(b.progress||h){j.show();a.updateProgress(0,b.progressText);a.defaultFocus=j;if(h){j.wait(h===!0?b.waitConfig:h)}}else {j.hide()}m=a.msgButtons;for(e=0;e<4;e++){if(k&Math.pow(2,e)){if(!a.defaultFocus){a.defaultFocus=m[e]}m[e].show();s=!1}else {m[e].hide()}}if(s){a.bottomTb.hide()}else {a.bottomTb.show()}Ext.resumeLayouts(!0)},updateButtonText:function(){var b=this,c=b.buttonText,e=0,a,d;for(a in c){if(c.hasOwnProperty(a)){d=b.msgButtons[a];if(d){if(b.cfg&&b.cfg.buttonText){e=e|Math.pow(2,Ext.Array.indexOf(b.buttonIds,a))}if(d.text!==c[a]){d.setText(c[a])}}}}return e},show:function(b){var a=this,c;b=b||{};if(Ext.Component.layoutSuspendCount){Ext.on({resumelayouts:function(){a.show(b)},single:!0});return a}a.reconfigure(b);if(b.cls){a.addCls(b.cls)}c=a.query('textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])');a.preventFocusOnActivate=!c.length;a.callParent();if(a.closable&&!a.defaultFocus){a.focus()}return a},onShow:function(){this.callParent(arguments);this.center()},updateText:function(a){this.msg.setHtml(a)},setIcon:function(e,d,c){var b=this,a=b.iconComponent,f=b.messageIconCls;if(f){a.removeCls(f)}if(e){a.show();if(d||c){a.setSize(d||a.getWidth(),c||a.getHeight())}a.addCls(Ext.baseCSSPrefix+'dlg-icon');a.addCls(b.messageIconCls=e)}else {a.removeCls(Ext.baseCSSPrefix+'dlg-icon');a.hide()}return b},updateProgress:function(c,b,a){this.progressBar.updateProgress(c,b);if(a){this.updateText(a)}return this},onEsc:function(){if(this.closable!==!1){this.callParent(arguments)}},confirm:function(a,b,d,c){if(Ext.isString(a)){a={title:a,icon:this.QUESTION,message:b,buttons:this.YESNO,callback:d,scope:c}}return this.show(a)},prompt:function(a,c,f,d,b,e){if(Ext.isString(a)){a={prompt:!0,title:a,minWidth:this.minPromptWidth,message:c,buttons:this.OKCANCEL,callback:f,scope:d,multiline:b,value:e}}return this.show(a)},wait:function(a,c,b){if(Ext.isString(a)){a={title:c,message:a,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:b}}return this.show(a)},alert:function(a,b,d,c){if(Ext.isString(a)){a={title:a,message:b,buttons:this.OK,fn:d,scope:c,minWidth:this.minWidth}}return this.show(a)},progress:function(a,c,b){if(Ext.isString(a)){a={title:a,message:c,progress:!0,progressText:b}}return this.show(a)},privates:{syncHeaderConfigs:Ext.privateFn}},function(a){Ext.onInternalReady(function(){Ext.MessageBox=Ext.Msg=new a()})});Ext.define('Ext.theme.material.window.MessageBox',{override:'Ext.window.MessageBox',buttonAlign:'right'});Ext.define('Ext.form.Basic',{extend:Ext.util.Observable,alternateClassName:'Ext.form.BasicForm',taskDelay:10,constructor:function(c,d){var a=this,b;a.owner=c;a.fieldMonitors={validitychange:a.checkValidityDelay,enable:a.checkValidityDelay,disable:a.checkValidityDelay,dirtychange:a.checkDirtyDelay,errorchange:a.checkErrorDelay,scope:a};a.checkValidityTask=new Ext.util.DelayedTask(a.checkValidity,a);a.checkDirtyTask=new Ext.util.DelayedTask(a.checkDirty,a);a.checkErrorTask=new Ext.util.DelayedTask(a.checkError,a);a.monitor=new Ext.container.Monitor({selector:'[isFormField]:not([excludeForm])',scope:a,addHandler:a.onFieldAdd,removeHandler:a.onFieldRemove,invalidateHandler:a.onMonitorInvalidate});a.monitor.bind(c);Ext.apply(a,d);if(Ext.isString(a.paramOrder)){a.paramOrder=a.paramOrder.split(/[\s,|]/)}b=a.reader;if(b&&!b.isReader){if(typeof b==='string'){b={type:b}}a.reader=Ext.createByAlias('reader.'+b.type,b)}b=a.errorReader;if(b&&!b.isReader){if(typeof b==='string'){b={type:b}}a.errorReader=Ext.createByAlias('reader.'+b.type,b)}a.callParent()},initialize:function(){this.initialized=!0;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:!1,waitTitle:'Please Wait...',trackResetOnLoad:!1,wasDirty:!1,destroy:function(){var a=this,b=a.monitor;Ext.undefer(a.actionTimer);if(b){b.unbind();a.monitor=null}a.clearListeners();a.checkValidityTask.cancel();a.checkDirtyTask.cancel();a.checkErrorTask.cancel();a.checkValidityTask=a.checkDirtyTask=a.checkErrorTask=null;a.callParent()},onFieldAdd:function(a){a.on(this.fieldMonitors);this.onMonitorInvalidate()},onFieldRemove:function(a){a.un(this.fieldMonitors);this.onMonitorInvalidate()},onMonitorInvalidate:function(){if(this.initialized){this.checkValidityDelay()}},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var a=this._boundItems;if(!a||a.getCount()===0){a=this._boundItems=new Ext.util.MixedCollection();a.addAll(this.owner.query('[formBind]'))}return a},hasInvalidField:function(){return !!this.getFields().findBy(function(a){var c=a.preventMark,b;a.preventMark=!0;b=a.isValid();a.preventMark=c;return !b})},isValid:function(){var b=this,a;Ext.suspendLayouts();a=b.getFields().filterBy(function(a){return !a.validate()});Ext.resumeLayouts(!0);return a.length<1},checkValidity:function(){var a=this,b;if(a.destroyed){return}b=!a.hasInvalidField();if(b!==a.wasValid){a.onValidityChange(b);a.fireEvent('validitychange',a,b);a.wasValid=b}},checkValidityDelay:function(){var a=this.taskDelay;if(a){this.checkValidityTask.delay(a)}else {this.checkValidity()}},checkError:function(){this.fireEvent('errorchange',this)},checkErrorDelay:function(){var a=this.taskDelay;if(a){this.checkErrorTask.delay(a)}else {this.checkError()}},onValidityChange:function(e){var d=this.getBoundItems(),b,a,f,c;if(d){b=d.items;f=b.length;for(a=0;a<f;a++){c=b[a];if(c.disabled===e){c.setDisabled(!e)}}}},isDirty:function(){return !!this.getFields().findBy(function(a){return a.isDirty()})},checkDirtyDelay:function(){var a=this.taskDelay;if(a){this.checkDirtyTask.delay(a)}else {this.checkDirty()}},checkDirty:function(){var b=this,a;if(b.destroyed){return}a=this.isDirty();if(a!==this.wasDirty){this.fireEvent('dirtychange',this,a);this.wasDirty=a}},hasUpload:function(){return !!this.getFields().findBy(function(a){return a.isFileUpload()})},doAction:function(a,c){var b=this;if(Ext.isString(a)){a=Ext.ClassManager.instantiateByAlias('formaction.'+a,Ext.apply({},c,{form:b}))}if(b.fireEvent('beforeaction',b,a)!==!1){b.beforeAction(a);b.actionTimer=Ext.defer(a.run,100,a)}return b},submit:function(a){var c=this,b;a=a||{};if(a.standardSubmit||c.standardSubmit){b='standardsubmit'}else {b=c.api?'directsubmit':'submit'}return c.doAction(b,a)},load:function(a){return this.doAction(this.api?'directload':'load',a)},updateRecord:function(a){a=a||this._record;if(!a){return this}var d=a.self.fields,e=this.getFieldValues(),f={},c=0,g=d.length,b;for(;c<g;++c){b=d[c].name;if(e.hasOwnProperty(b)){f[b]=e[b]}}a.beginEdit();a.set(f);a.endEdit();return this},loadRecord:function(a){this._record=a;return this.setValues(a.getData())},getRecord:function(){return this._record},beforeAction:function(g){var a=this,c=g.waitMsg,f=Ext.baseCSSPrefix+'mask-loading',h=a.getFields().items,e,i=h.length,d,b;for(e=0;e<i;e++){d=h[e];if(d.isFormField&&d.syncValue){d.syncValue()}}if(c){b=a.waitMsgTarget;if(b===!0){a.owner.el.mask(c,f)}else {if(b){b=a.waitMsgTarget=Ext.get(b);b.mask(c,f)}else {a.floatingAncestor=a.owner.up('[floating]');if(a.floatingAncestor){a.savePreventFocusOnActivate=a.floatingAncestor.preventFocusOnActivate;a.floatingAncestor.preventFocusOnActivate=!0}Ext.MessageBox.wait(c,g.waitTitle||a.waitTitle)}}}},afterAction:function(a,e){var b=this,d=Ext.MessageBox,c;if(a.waitMsg){c=b.waitMsgTarget;if(c===!0){b.owner.el.unmask()}else {if(c){c.unmask()}else {d.hide()}}}if(b.floatingAncestor){b.floatingAncestor.preventFocusOnActivate=b.savePreventFocusOnActivate}if(e){if(a.reset){b.reset()}Ext.callback(a.success,a.scope||a,[b,a]);b.fireEvent('actioncomplete',b,a)}else {Ext.callback(a.failure,a.scope||a,[b,a]);b.fireEvent('actionfailed',b,a)}},findField:function(a){return this.getFields().findBy(function(b){return b.id===a||b.name===a||b.dataIndex===a})},markInvalid:function(a){var g=this,c,d,b,f,e;function mark(c,d){var b=g.findField(c);if(b){b.markInvalid(d)}}if(Ext.isArray(a)){d=a.length;for(c=0;c<d;c++){b=a[c];mark(b.id||b.field,b.msg||b.message)}}else {if(a instanceof Ext.data.ErrorCollection){d=a.items.length;for(c=0;c<d;c++){b=a.items[c];mark(b.field,b.message)}}else {for(e in a){if(a.hasOwnProperty(e)){f=a[e];mark(e,f,a)}}}}return this},setValues:function(a){var e=this,b,d,c;function setVal(c,d){var b=e.findField(c);if(b){b.setValue(d);if(e.trackResetOnLoad){b.resetOriginalValue()}}}Ext.suspendLayouts();if(Ext.isArray(a)){d=a.length;for(b=0;b<d;b++){c=a[b];setVal(c.id,c.value)}}else {Ext.iterate(a,setVal)}Ext.resumeLayouts(!0);return this},getValues:function(o,n,h,k,l){var a={},j=this.getFields().items,p=j.length,i=Ext.isArray,m=k?'getModelData':'getSubmitData',e,f,c,d,b,g;for(g=0;g<p;g++){e=j[g];if(!n||e.isDirty()){f=e[m](h,l);if(Ext.isObject(f)){for(b in f){if(f.hasOwnProperty(b)){c=f[b];if(h&&c===''){c=e.emptyText||''}if(!e.isRadio){if(a.hasOwnProperty(b)){d=a[b];if(!i(d)){d=a[b]=[d]}if(i(c)){a[b]=d.concat(c)}else {d.push(c)}}else {a[b]=c}}else {a[b]=a[b]||c}}}}}}if(o){a=Ext.Object.toQueryString(a)}return a},getFieldValues:function(a){return this.getValues(!1,a,!1,!0)},clearInvalid:function(){Ext.suspendLayouts();var c=this,b=c.getFields().items,d=b.length,a;for(a=0;a<d;a++){b[a].clearInvalid()}Ext.resumeLayouts(!0);return c},reset:function(d){Ext.suspendLayouts();var b=this,c=b.getFields().items,e=c.length,a;for(a=0;a<e;a++){c[a].reset()}Ext.resumeLayouts(!0);if(d===!0){delete b._record}return b},applyToFields:function(d){var b=this.getFields().items,a,c=b.length;for(a=0;a<c;a++){Ext.apply(b[a],d)}return this},applyIfToFields:function(d){var b=this.getFields().items,a,c=b.length;for(a=0;a<c;a++){Ext.applyIf(b[a],d)}return this}});Ext.define('Ext.layout.container.CheckboxGroup',{extend:Ext.layout.container.Container,alias:['layout.checkboxgroup'],autoFlex:!0,type:'checkboxgroup',createsInnerCt:!0,childEls:['innerCt'],renderTpl:'<table id="{ownerId}-innerCt" data-ref="innerCt" class="'+Ext.baseCSSPrefix+'table-plain" cellpadding="0"'+'role="presentation" style="{tableStyle}">'+'<tbody role="presentation">'+'<tr role="presentation">'+'<tpl for="columns">'+'<td class="{parent.colCls}" valign="top" style="{style}" role="presentation">'+'{% this.renderColumn(out,parent,xindex-1) %}'+'</td>'+'</tpl>'+'</tr>'+'</tbody>'+'</table>',lastOwnerItemsGeneration:null,initLayout:function(){var b=this,a=b.owner;b.columnsArray=Ext.isArray(a.columns);b.autoColumns=!a.columns||a.columns==='auto';if(!b.autoColumns){b.vertical=a.vertical||(a.columns===1||a.columns.length===1)}b.callParent()},beginLayout:function(i){var c=this,k=c.autoFlex,b=c.innerCt.dom.style,j=0,g=0,h,e,a,d,f;c.callParent(arguments);h=c.rowNodes[0].children;i.innerCtContext=i.getEl('innerCt',c);if(!i.widthModel.shrinkWrap){e=h.length;if(c.columnsArray){for(a=0;a<e;a++){d=c.owner.columns[a];if(d<1){j+=d;g++}}for(a=0;a<e;a++){d=c.owner.columns[a];if(d<1){f=d/j*100+'%'}else {f=d+'px'}h[a].style.width=f}}else {for(a=0;a<e;a++){f=k?1/e*100+'%':'';h[a].style.width=f;g++}}if(!g){b.tableLayout='fixed';b.width=''}else {if(g<e){b.tableLayout='fixed';b.width='100%'}else {b.tableLayout='auto';if(k){b.width='100%'}else {b.width=''}}}}else {b.tableLayout='auto';b.width=''}},cacheElements:function(){var a=this;a.callParent();a.rowNodes=a.innerCt.query('tr',!0);a.tBodyNode=a.rowNodes[0].parentNode},calculate:function(a){var h=this,d,c,b,g,f,e;if(!a.getDomProp('containerChildrenSizeDone')){h.done=!1}else {d=a.innerCtContext;c=a.widthModel.shrinkWrap;b=a.heightModel.shrinkWrap;g=b||c;f=d.el.dom;e=g&&d.getPaddingInfo();if(c){a.setContentWidth(f.offsetWidth+e.width,!0)}if(b){a.setContentHeight(f.offsetHeight+e.height,!0)}}},doRenderColumn:function(m,h,g){var l=h.$layout,j=l.owner,f=h.columnCount,i=j.items.items,b=i.length,e,a,d,c,k;if(j.vertical){d=Math.ceil(b/f);a=g*d;b=Math.min(b,a+d);c=1}else {a=g;c=f}for(;a<b;a+=c){e=i[a];l.configureItem(e);k=e.getRenderTree();Ext.DomHelper.generateMarkup(k,m)}},getColumnCount:function(){var c=this,b=c.owner,a=b.columns;if(c.columnsArray){return a.length}if(Ext.isNumber(a)){return a}return b.items.length},getItemSizePolicy:function(a){return this.autoSizePolicy},getRenderData:function(){var b=this,d=b.callParent(),k=b.owner,e=b.getColumnCount(),j=b.autoFlex,i=0,f=0,c,g,h,a;if(b.columnsArray){for(a=0;a<e;a++){c=b.owner.columns[a];if(c<1){i+=c;f++}}}d.colCls=k.groupCls;d.columnCount=e;d.columns=[];for(a=0;a<e;a++){g=d.columns[a]={};if(b.columnsArray){c=b.owner.columns[a];if(c<1){h=c/i*100+'%'}else {h=c+'px'}g.style='width:'+h}else {g.style='width:'+1/e*100+'%';f++}}d.tableStyle=!f?'table-layout:fixed;':f<e?'table-layout:fixed;width:100%':j?'table-layout:auto;width:100%':'table-layout:auto;';return d},isValidParent:Ext.returnTrue,setupRenderTpl:function(a){this.callParent(arguments);a.renderColumn=this.doRenderColumn},renderChildren:function(){var a=this,b=a.owner.items.generation;if(a.lastOwnerItemsGeneration!==b){a.lastOwnerItemsGeneration=b;a.renderItems(a.getLayoutItems())}},renderItems:function(i){var a=this,g=i.length,e,d,b,h,f,c;if(g){Ext.suspendLayouts();if(a.autoColumns){b=g;d=1}else {b=a.columnsArray?a.owner.columns.length:a.owner.columns;d=Math.ceil(g/b)}for(c=0;c<g;c++){e=i[c];h=a.getRenderRowIndex(c,d,b);f=a.getRenderColumnIndex(c,d,b);if(!e.rendered){a.renderItem(e,h,f)}else {if(!a.isItemAtPosition(e,h,f)){a.moveItem(e,h,f)}}}a.pruneRows(d,b);Ext.resumeLayouts(!0)}},isItemAtPosition:function(c,b,a){return c.el.dom===this.getItemNodeAt(b,a)},getRenderColumnIndex:function(a,c,b){if(this.vertical){return Math.floor(a/c)}else {return a%b}},getRenderRowIndex:function(a,c,b){if(this.vertical){return a%c}else {return Math.floor(a/b)}},getItemNodeAt:function(a,c){var b=this.getColumnNodeAt(a,c);return this.vertical?b.children[a]:b.children[0]},getRowNodeAt:function(b){var c=this,a;b=c.vertical?0:b;a=c.rowNodes[b];if(!a){a=c.rowNodes[b]=document.createElement('tr');a.role='presentation';c.tBodyNode.appendChild(a)}return a},getColumnNodeAt:function(d,c,b){var a;b=b||this.getRowNodeAt(d);a=b.children[c];if(!a){a=Ext.fly(b).appendChild({tag:'td',cls:this.owner.groupCls,vAlign:'top',role:'presentation'},!0)}return a},pruneRows:function(e,i){var h=this,f=h.tBodyNode.children,b,a,c,d,g;e=h.vertical?1:e;while(f.length>e){a=f[f.length-1];while(a.children.length){Ext.get(a.children[0]).destroy()}a.parentNode.removeChild(a)}for(d=e-1;d>=0;d--){a=f[d];b=a.children;while(b.length>i){c=b[b.length-1];Ext.get(c).destroy()}if(d>0){for(g=b.length-1;g>=0;g--){c=b[g];if(c.children.length===0){Ext.get(c).destroy()}else {break}}}}},renderItem:function(e,c,f){var a=this,d,b;a.configureItem(e);b=a.vertical?c:0;d=Ext.get(a.getColumnNodeAt(c,f));e.render(d,b)},moveItem:function(g,d,f){var e=this,a,c,b;c=e.vertical?d:0;a=e.getColumnNodeAt(d,f);b=a.children[c];a.insertBefore(g.el.dom,b||null)},destroy:function(){if(this.owner.rendered){var c=this.getRenderTarget(),b,a,d;if(c){b=c.query('.'+this.owner.groupCls,!1);for(a=0,d=b.length;a<d;a++){b[a].destroy()}}}this.callParent()}});Ext.define('Ext.form.CheckboxManager',{extend:Ext.util.MixedCollection,singleton:!0,getByName:function(b,a){return this.filterBy(function(c){return c.name===b&&c.getFormId()===a})}});Ext.define('Ext.form.field.Checkbox',{extend:Ext.form.field.Base,alias:['widget.checkboxfield','widget.checkbox'],alternateClassName:'Ext.form.Checkbox',modelValue:!0,modelValueUnchecked:!1,stretchInputElFixed:!1,childEls:['boxLabelEl','innerWrapEl','displayEl'],fieldSubTpl:['<div id="{cmpId}-innerWrapEl" data-ref="innerWrapEl" role="presentation"',' class="{wrapInnerCls}">','<tpl if="labelAlignedBefore">','{beforeBoxLabelTpl}','<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">','{beforeBoxLabelTextTpl}','{boxLabel}','{afterBoxLabelTextTpl}','</label>','{afterBoxLabelTpl}','</tpl>','<span id="{cmpId}-displayEl" data-ref="displayEl" role="presentation" class="{fieldCls} {typeCls} ','{typeCls}-{ui} {inputCls} {inputCls}-{ui} {fixCls} {childElCls} {afterLabelCls}">','<input type="{inputType}" id="{id}" name="{inputName}" data-ref="inputEl" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="checked"> checked="checked"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{checkboxCls}" autocomplete="off" hidefocus="true" ','<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>','/>','</span>','<tpl if="!labelAlignedBefore">','{beforeBoxLabelTpl}','<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">','{beforeBoxLabelTextTpl}','{boxLabel}','{afterBoxLabelTextTpl}','</label>','{afterBoxLabelTpl}','</tpl>','</div>',{disableFormats:!0,compiled:!0}],publishes:{checked:1},subTplInsertions:['beforeBoxLabelTpl','afterBoxLabelTpl','beforeBoxLabelTextTpl','afterBoxLabelTextTpl','boxLabelAttrTpl','inputAttrTpl'],isCheckbox:!0,focusCls:'form-checkbox-focus',fieldBodyCls:Ext.baseCSSPrefix+'form-cb-wrap',checked:!1,checkedCls:Ext.baseCSSPrefix+'form-cb-checked',boxLabelCls:Ext.baseCSSPrefix+'form-cb-label',boxLabelAlign:'after',afterLabelCls:Ext.baseCSSPrefix+'form-cb-after',wrapInnerCls:Ext.baseCSSPrefix+'form-cb-wrap-inner',noBoxLabelCls:Ext.baseCSSPrefix+'form-cb-no-box-label',inputValue:'on',checkChangeEvents:[],changeEventName:'change',inputType:'checkbox',isTextInput:!1,ariaRole:'native',onRe:/^on$/i,inputCls:Ext.baseCSSPrefix+'form-cb',_checkboxCls:Ext.baseCSSPrefix+'form-cb-input',initComponent:function(){var a=this,b=a.value;if(b!==undefined){a.checked=a.isChecked(b,a.inputValue)}a.callParent();a.getManager().add(a)},initDefaultName:Ext.emptyFn,initValue:function(){var a=this,b=!!a.checked;a.originalValue=a.initialValue=a.lastValue=b;a.setValue(b)},getElConfig:function(){var a=this;if(a.isChecked(a.rawValue,a.inputValue)){a.addCls(a.checkedCls)}if(!a.fieldLabel){a.skipLabelForAttribute=!0}return a.callParent()},getModelData:function(){var a=this,b=a.callParent(arguments);if(b){b[a.getName()]=a.checked?a.modelValue:a.modelValueUnchecked}return b},getSubTplData:function(g){var a=this,f=a.boxLabel,e=a.boxLabelAlign,d=e==='before',c,b;c=Ext.apply(a.callParent([g]),{inputType:a.inputType,checkboxCls:a._checkboxCls,disabled:a.readOnly||a.disabled,checked:!!a.checked,wrapInnerCls:a.wrapInnerCls,boxLabel:f,boxLabelCls:a.boxLabelCls,boxLabelAlign:e,labelAlignedBefore:d,afterLabelCls:d?a.afterLabelCls:'',noBoxLabelCls:!f?a.noBoxLabelCls:'',inputName:a.name||a.id});b=c.inputElAriaAttributes;if(b){delete b['aria-readonly']}return c},initEvents:function(){var a=this;a.callParent();a.inputEl.on(a.changeEventName,a.onChangeEvent,a,{delegated:!1});if(Ext.isIE){a.bodyEl.on('mousedown',a.onBodyElMousedown,a)}else {if(Ext.isMac&&(Ext.isGecko||Ext.isSafari)){a.boxLabelEl.on('mousedown',a.onBoxLabelOrInputMousedown,a);a.inputEl.on('mousedown',a.onBoxLabelOrInputMousedown,a)}}},setBoxLabel:function(b){var a=this;a.boxLabel=b;if(a.rendered){a.boxLabelEl.setHtml(b);a.boxLabelEl[b?'removeCls':'addCls'](a.noBoxLabelCls);a.updateLayout()}},onBodyElMousedown:function(a){if(a.target!==this.inputEl.dom){a.preventDefault()}},onBoxLabelOrInputMousedown:function(a){this.inputEl.focus();a.preventDefault()},onChangeEvent:function(a){this.updateValueFromDom()},updateValueFromDom:function(){var a=this,b=a.inputEl&&a.inputEl.dom;if(b){a.checked=a.rawValue=a.value=b.checked;a.checkChange()}},updateCheckedCls:function(a){var b=this;a=a!=null?a:b.getValue();b[a?'addCls':'removeCls'](b.checkedCls)},getRawValue:function(){var a=this.inputEl&&this.inputEl.dom;return a?a.checked:this.checked},getValue:function(){var a=this.inputEl&&this.inputEl.dom;return a?a.checked:this.checked},getSubmitValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.getValue()?this.inputValue:b},isChecked:function(a,b){var c=!1;if(a===!0||a==='true'){c=!0}else {if(b!=='on'&&(b||b===0)&&(Ext.isString(a)||Ext.isNumber(a))){c=a==b}else {c=a==='1'||a===1||this.onRe.test(a)}}return c},setRawValue:function(d){var a=this,c=a.inputEl&&a.inputEl.dom,b=a.isChecked(d,a.inputValue);if(c){a.duringSetRawValue=!0;c.checked=b;a.duringSetRawValue=!1;a.updateCheckedCls(b)}a.checked=a.rawValue=b;if(!a.duringSetValue){a.lastValue=b}return b},setValue:function(e){var a=this,c,b,f,d;if(Ext.isArray(e)){c=a.getManager().getByName(a.name,a.getFormId()).items;f=c.length;for(b=0;b<f;++b){d=c[b];d.setValue(Ext.Array.contains(e,d.inputValue))}}else {a.duringSetValue=!0;a.callParent(arguments);delete a.duringSetValue}return a},valueToRaw:Ext.identityFn,onChange:function(b,d){var a=this,c=a.handler;a.updateCheckedCls(b);if(c){Ext.callback(c,a.scope,[a,b],0,a)}a.callParent(arguments);if(a.reference&&a.publishState){a.publishState('checked',b)}},resetOriginalValue:function(f){var a=this,c,d,e,b;if(!f){c=a.getManager().getByName(a.name,a.getFormId()).items;e=c.length;for(b=0;b<e;++b){d=c[b];if(d!==a){c[b].resetOriginalValue(!0)}}}a.callParent()},doDestroy:function(){this.getManager().removeAtKey(this.id);this.callParent()},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var a=this,b=a.inputEl&&a.inputEl.dom;a.callParent();if(b){b.disabled=a.readOnly}},setReadOnly:function(c){var a=this,b=a.inputEl&&a.inputEl.dom;if(b){b.disabled=!!c||a.disabled}a.callParent(arguments)},getFormId:function(){var a=this,b;if(!a.formId){b=a.up('form');if(b){a.formId=b.id}}return a.formId},getFocusClsEl:function(){return this.displayEl}});Ext.define('Ext.theme.triton.form.field.Checkbox',{override:'Ext.form.field.Checkbox',compatibility:Ext.isIE8,initComponent:function(){this.callParent();Ext.on({show:'onGlobalShow',scope:this})},onFocus:function(b){var a;this.callParent([b]);a=this.getFocusClsEl();if(a){a.syncRepaint()}},onBlur:function(b){var a;this.callParent([b]);a=this.getFocusClsEl();if(a){a.syncRepaint()}},onGlobalShow:function(a){if(a.isAncestor(this)){this.getFocusClsEl().syncRepaint()}}});Ext.define('Ext.theme.material.form.field.Checkbox',{override:'Ext.form.field.Checkbox',ripple:{delegate:'.'+Ext.baseCSSPrefix+'form-checkbox',bound:!1}});Ext.define('Ext.form.CheckboxGroup',{extend:Ext.form.FieldContainer,xtype:'checkboxgroup',isCheckboxGroup:!0,mixins:{field:Ext.form.field.Field},columns:'auto',vertical:!1,allowBlank:!0,blankText:'You must select at least one item in this group',defaultType:'checkboxfield',defaultBindProperty:'value',groupCls:Ext.baseCSSPrefix+'form-check-group',extraFieldBodyCls:Ext.baseCSSPrefix+'form-checkboxgroup-body',layout:'checkboxgroup',componentCls:Ext.baseCSSPrefix+'form-checkboxgroup',ariaRole:'group',ariaEl:'containerEl',skipLabelForAttribute:!0,ariaRenderAttributes:{'aria-invalid':!1},initComponent:function(){var a=this;a.name=a.name||a.id;a.callParent();a.initField()},initRenderData:function(){var c=this,b,a;b=c.callParent();b.inputId=c.id+'-'+c.ariaEl;a=b.ariaAttributes;if(a){if(!a['aria-labelledby']){a['aria-labelledby']=c.id+'-labelTextEl'}}return b},initValue:function(){var a=this,b=a.value;a.originalValue=a.lastValue=b||a.getValue();if(b){a.setValue(b)}},onAdd:function(a){var b=this,d,e,c;if(a.isCheckbox){if(a.name==null){a.name=b.name}b.mon(a,'change',b.checkChange,b)}else {if(a.isContainer){d=a.items.items;for(c=0,e=d.length;c<e;c++){b.onAdd(d[c])}}}b.callParent(arguments)},onRemove:function(b){var a=this,d,e,c;if(b.isCheckbox){a.mun(b,'change',a.checkChange,a)}else {if(b.isContainer){d=b.items.items;for(c=0,e=d.length;c<e;c++){a.onRemove(d[c])}}}a.callParent(arguments)},isEqual:function(b,c){var a=Ext.Object.toQueryString;return a(b)===a(c)},getErrors:function(){var a=[];if(!this.allowBlank&&Ext.isEmpty(this.getChecked())){a.push(this.blankText)}return a},getBoxes:function(a){return this.query('[isCheckbox]'+(a||''))},eachBox:function(b,a){Ext.Array.forEach(this.getBoxes(),b,a||this)},getChecked:function(){return this.getBoxes('[checked]')},isDirty:function(){var b=this.getBoxes(),a,c=b.length;for(a=0;a<c;a++){if(b[a].isDirty()){return !0}}},setReadOnly:function(b){var c=this.getBoxes(),a,d=c.length;for(a=0;a<d;a++){c[a].setReadOnly(b)}this.readOnly=b},reset:function(){var a=this,c=a.hasActiveError(),b=a.preventMark;a.preventMark=!0;a.batchChanges(function(){var c=a.getBoxes(),b,d=c.length;for(b=0;b<d;b++){c[b].reset()}});a.preventMark=b;a.unsetActiveError();if(c){a.updateLayout()}},resetOriginalValue:function(){var a=this,c=a.getBoxes(),b,d=c.length;for(b=0;b<d;b++){c[b].resetOriginalValue()}a.originalValue=a.getValue();a.checkDirty()},setValue:function(b){var f=this,g=f.getBoxes(),e,h=g.length,d,c,a;f.batchChanges(function(){Ext.suspendLayouts();for(e=0;e<h;e++){d=g[e];c=d.getName();a=!1;if(b){if(Ext.isArray(b[c])){a=Ext.Array.contains(b[c],d.inputValue)}else {a=b[c]}}d.setValue(a)}Ext.resumeLayouts(!0)});return f},getValue:function(){var b={},g=this.getBoxes(),e,h=g.length,d,c,f,a;for(e=0;e<h;e++){d=g[e];c=d.getName();f=d.inputValue;if(d.getValue()){if(b.hasOwnProperty(c)){a=b[c];if(!Ext.isArray(a)){a=b[c]=[a]}a.push(f)}else {b[c]=f}}}return b},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var a=this,d,b,c;if(a.disabled){b=!0}else {d=a.getErrors();b=Ext.isEmpty(d);c=a.wasValid;if(b){a.unsetActiveError()}else {a.setActiveError(d)}}if(b!==c){a.wasValid=b;a.fireEvent('validitychange',a,b);if(c!=null||!b){a.updateLayout()}}return b}},function(){this.borrow(Ext.form.field.Base,['markInvalid','clearInvalid','setError'])});Ext.define('Ext.form.FieldSet',{extend:Ext.container.Container,alias:'widget.fieldset',mixins:{fieldAncestor:Ext.form.FieldAncestor},checkboxUI:'default',collapsed:!1,toggleOnTitleClick:!0,baseCls:Ext.baseCSSPrefix+'fieldset',layout:'anchor',descriptionText:'{0} field set',expandText:'Expand field set',componentLayout:'fieldset',ariaRole:'group',focusable:!1,autoEl:'fieldset',checkbox:null,childEls:['body'],renderTpl:['{%this.renderLegend(out,values);%}','<div id="{id}-body" data-ref="body" class="{baseCls}-body {baseCls}-body-{ui} {bodyTargetCls}" ','role="presentation"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>','{%this.renderContainer(out,values);%}','</div>'],stateEvents:['collapse','expand'],maskOnDisable:!1,initComponent:function(){var a=this,b=a.baseCls;if(a.ariaRole&&!a.ariaLabel){a.ariaLabel=Ext.String.formatEncode(a.descriptionText,a.title||'')}a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-expanded']=!a.collapsed;a.initFieldAncestor();a.callParent();a.layout.managePadding=a.layout.manageOverflow=!1;if(a.collapsed){a.addCls(b+'-collapsed');a.collapse()}if(a.title||a.checkboxToggle||a.collapsible){a.addTitleClasses();a.legend=a.createLegendCt()}a.initMonitor()},initRenderData:function(){var a=this,b=a.callParent();b.bodyTargetCls=a.bodyTargetCls;a.protoBody.writeTo(b);delete a.protoBody;return b},doDestroy:function(){var b=this,a=b.legend;if(a){delete a.ownerCt;a.destroy();b.legend=null}b.callParent()},getState:function(){var a=this.callParent();a=this.addPropertyToState(a,'collapsed');return a},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return !0},collapsedVertical:function(){return !0},createLegendCt:function(){var a=this,b=[],d={baseCls:a.baseCls+'-header',layout:'container',ui:a.ui,id:a.id+'-legend',autoEl:'legend',ariaRole:null,items:b,ownerCt:a,shrinkWrap:!0,ownerLayout:a.componentLayout},c;if(a.checkboxToggle){b.push(a.createCheckboxCmp())}else {if(a.collapsible){b.push(a.createToggleCmp())}}b.push(a.createTitleCmp());c=new Ext.container.Container(d);return c},createTitleCmp:function(){var a=this,b={html:a.title,ui:a.ui,cls:a.baseCls+'-header-text',id:a.id+'-legendTitle',ariaRole:'presentation'};if(a.collapsible&&a.toggleOnTitleClick){b.listeners={click:{element:'el',scope:a,fn:a.toggle}};b.cls+=' '+a.baseCls+'-header-text-collapsible'}a.titleCmp=new Ext.Component(b);return a.titleCmp},createCheckboxCmp:function(){var a=this,d='-checkbox',b=a.baseCls+'-header'+d,c;b+=' '+b+'-'+a.ui;a.checkboxCmp=c=new Ext.form.field.Checkbox(Ext.apply({hideEmptyLabel:!0,name:a.checkboxName||a.id+d,cls:b,id:a.id+'-legendChk',ui:a.checkboxUI,checked:!a.collapsed,msgTarget:'none',listeners:{change:a.onCheckChange,scope:a},ariaLabel:a.expandText},a.checkbox));return c},createToggleCmp:function(){var a=this,b;a.toggleCmp=b=new Ext.panel.Tool({cacheHeight:!1,cls:a.baseCls+'-header-tool-'+a.ui,type:'toggle',handler:a.toggle,id:a.id+'-legendToggle',scope:a,ariaRole:'checkbox',ariaLabel:a.expandText,ariaRenderAttributes:{'aria-checked':!a.collapsed}});return b},doRenderLegend:function(e,d){var c=d.$comp,a=c.legend,b;if(a){a.ownerLayout.configureItem(a);c.setLegendCollapseImmunity(a);b=a.getRenderTree();Ext.DomHelper.generateMarkup(b,e)}},getCollapsed:function(){return this.collapsed?'top':!1},getCollapsedDockedItems:function(){var a=this.legend;return a?[a]:[]},setTitle:function(c){var a=this,b=a.legend;a.title=c;a.ariaLabel=Ext.String.formatEncode(a.descriptionText,c||'');if(a.rendered){if(!b){a.legend=b=a.createLegendCt();a.addTitleClasses();b.ownerLayout.configureItem(b);a.setLegendCollapseImmunity(b);b.render(a.el,0)}a.titleCmp.update(c);a.ariaEl.dom.setAttribute('aria-label',a.ariaLabel)}else {if(b){a.titleCmp.update(c)}else {a.addTitleClasses();a.legend=a.createLegendCt()}}return a},addTitleClasses:function(){var a=this,c=a.title,b=a.baseCls;if(c){a.addCls(b+'-with-title')}if(c||a.checkboxToggle||a.collapsible){a.addCls(b+'-with-legend')}},expand:function(){return this.setExpanded(!0)},collapse:function(){return this.setExpanded(!1)},setCollapsed:function(a){this.setExpanded(!a)},setExpanded:function(b){var a=this,d=a.checkboxCmp,c=a.toggleCmp,e=b?'expand':'collapse';if(!a.rendered||a.fireEvent('before'+e,a)!==!1){b=!!b;if(d){d.setValue(b)}else {if(c&&c.ariaEl.dom){c.ariaEl.dom.setAttribute('aria-checked',b)}}if(b){a.removeCls(a.baseCls+'-collapsed')}else {a.addCls(a.baseCls+'-collapsed')}if(a.ariaEl.dom){a.ariaEl.dom.setAttribute('aria-expanded',!!b)}a.collapsed=!b;if(b){delete a.getInherited().collapsed}else {a.getInherited().collapsed=!0}if(a.rendered){a.updateLayout({isRoot:!1});a.fireEvent(e,a)}}return a},getRefItems:function(c){var a=this.callParent(arguments),b=this.legend;if(b){a.unshift(b);if(c){a.unshift.apply(a,b.getRefItems(!0))}}return a},toggle:function(){this.setExpanded(!!this.collapsed)},privates:{applyTargetCls:function(a){this.bodyTargetCls=a},finishRender:function(){var a=this.legend;this.callParent();if(a){a.finishRender()}},getProtoBody:function(){var b=this,a=b.protoBody;if(!a){b.protoBody=a=new Ext.util.ProtoElement({styleProp:'bodyStyle',styleIsText:!0})}return a},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},initPadding:function(d){var b=this,e=b.getProtoBody(),a=b.padding,c;if(a!==undefined){if(Ext.isIE8){a=b.parseBox(a);c=Ext.Element.parseBox(0);c.top=a.top;a.top=0;e.setStyle('padding',b.unitizeBox(c))}d.setStyle('padding',b.unitizeBox(a))}},onCheckChange:function(b,a){this.setExpanded(a)},setLegendCollapseImmunity:function(a){a.collapseImmune=!0;a.getInherited().collapseImmune=!0},setupRenderTpl:function(a){this.callParent(arguments);a.renderLegend=this.doRenderLegend}}});Ext.define('Ext.form.Label',{extend:Ext.Component,alias:'widget.label',autoEl:'label',maskOnDisable:!1,getElConfig:function(){var a=this;a.html=a.text?Ext.util.Format.htmlEncode(a.text):a.html||'';return Ext.apply(a.callParent(),{htmlFor:a.forId||''})},setText:function(c,b){var a=this;b=b!==!1;if(b){a.text=c;delete a.html}else {a.html=c;delete a.text}if(a.rendered){a.el.dom.innerHTML=b!==!1?Ext.util.Format.htmlEncode(c):c;a.updateLayout()}return a}});Ext.define('Ext.form.Panel',{extend:Ext.panel.Panel,alias:'widget.form',alternateClassName:['Ext.FormPanel','Ext.form.FormPanel'],mixins:{fieldAncestor:Ext.form.FieldAncestor},layout:'anchor',bodyAriaRole:'form',basicFormConfigs:['api','baseParams','errorReader','jsonSubmit','method','paramOrder','paramsAsHash','reader','standardSubmit','timeout','trackResetOnLoad','url','waitMsgTarget','waitTitle'],initComponent:function(){var a=this;if(a.frame){a.border=!1}a.initFieldAncestor();a.callParent();a.relayEvents(a.form,['beforeaction','actionfailed','actioncomplete','validitychange','dirtychange']);if(a.pollForChanges){a.startPolling(a.pollInterval||500)}},initItems:function(){this.callParent();this.initMonitor();this.form=this.createForm()},afterFirstLayout:function(){this.callParent(arguments);this.form.initialize()},createForm:function(){var d={},c=this.basicFormConfigs,e=c.length,b=0,a;for(;b<e;++b){a=c[b];d[a]=this[a]}return new Ext.form.Basic(this,d)},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(a){return this.getForm().updateRecord(a)},getValues:function(d,c,a,b){return this.getForm().getValues(d,c,a,b)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(a){return this.form.reset(a)},hasInvalidField:function(){return this.form.hasInvalidField()},doDestroy:function(){this.stopPolling();this.form.destroy();this.callParent()},load:function(a){this.form.load(a)},submit:function(a){this.form.submit(a)},startPolling:function(a){this.stopPolling();this.pollTask=Ext.util.TaskManager.start({interval:a,run:this.checkChange,scope:this})},stopPolling:function(){var a=this.pollTask;if(a){Ext.util.TaskManager.stop(a,!0);this.pollTask=null}},checkChange:function(){var b=this.form.getFields().items,a,c=b.length;for(a=0;a<c;a++){b[a].checkChange()}}});Ext.define('Ext.form.RadioManager',{extend:Ext.util.MixedCollection,singleton:!0,getByName:function(b,a){return this.filterBy(function(c){return c.name===b&&c.getFormId()===a})},getWithValue:function(c,b,a){return this.filterBy(function(d){return d.name===c&&d.inputValue==b&&d.getFormId()===a})},getChecked:function(b,a){return this.findBy(function(c){return c.name===b&&c.checked&&c.getFormId()===a})}});Ext.define('Ext.form.field.Radio',{extend:Ext.form.field.Checkbox,alias:['widget.radiofield','widget.radio'],alternateClassName:'Ext.form.Radio',isRadio:!0,inputType:'radio',formId:null,modelValue:undefined,modelValueUnchecked:null,initComponent:function(){var a=this;if(a.modelValue===undefined){a.modelValue=a.inputValue}a.callParent()},getGroupValue:function(){var a=this.getManager().getChecked(this.name,this.getFormId());return a?a.inputValue:null},onRemoved:function(){this.callParent(arguments);this.formId=null},setValue:function(c){var a=this,b;if(Ext.isBoolean(c)){a.callParent(arguments)}else {b=a.getManager().getWithValue(a.name,c,a.getFormId()).getAt(0);if(b){b.setValue(!0)}}return a},getSubmitValue:function(){return this.checked?this.inputValue:null},onChange:function(g,h){var a=this,b=a.ownerCt,c,f,e,d;a.callParent(arguments);if(!a.$groupChange){if(g){d=a.getManager().getByName(a.name,a.getFormId()).items;f=d.length;for(c=0;c<f;c++){e=d[c];if(e!==a){e.updateValueFromDom()}}}if(b&&b.isRadioGroup&&b.simpleValue){b.checkChange()}}},getManager:function(){return Ext.form.RadioManager}});Ext.define('Ext.theme.material.form.field.Radio',{override:'Ext.form.field.Radio',ripple:{delegate:'.'+Ext.baseCSSPrefix+'form-radio',bound:!1}});Ext.define('Ext.form.RadioGroup',{extend:Ext.form.CheckboxGroup,xtype:'radiogroup',isRadioGroup:!0,allowBlank:!0,blankText:'You must select one item in this group',defaultType:'radiofield',local:!1,simpleValue:!1,defaultBindProperty:'value',groupCls:Ext.baseCSSPrefix+'form-radio-group',ariaRole:'radiogroup',initRenderData:function(){var c=this,b,a;b=c.callParent();a=b.ariaAttributes;if(a){a['aria-required']=!c.allowBlank;a['aria-invalid']=!1}return b},lookupComponent:function(b){var a=this.callParent([b]);if(this.local){a.formId=this.getId()}return a},getBoxes:function(a,b){return (b||this).query('[isRadio]'+(a||''))},checkChange:function(){var c=this,a,b;a=c.getValue();b=typeof a==='object'&&Ext.Object.getKeys(a)[0];if(c.simpleValue||(b&&!Ext.isArray(a[b])||Ext.isObject(a)&&Ext.Object.isEmpty(a))){c.callParent()}},isEqual:function(a,b){if(this.simpleValue){return a===b}return this.callParent([a,b])},getValue:function(){var c=this,e=c.items.items,d,a,b;if(c.simpleValue){for(d=e.length;d-->0;){a=e[d];if(a.checked){b=a.inputValue;break}}}else {b=c.callParent()}return b},setValue:function(c){var f=this.items,h,a,i,e,b,d,g;Ext.suspendLayouts();if(this.simpleValue){for(b=0,d=f.length;b<d;++b){a=f.items[b];a.$groupChange=!0;a.setValue(a.inputValue===c);delete a.$groupChange}}else {if(Ext.isObject(c)){a=f.first();i=a?a.getFormId():null;for(g in c){h=c[g];e=Ext.form.RadioManager.getWithValue(g,h,i).items;d=e.length;for(b=0;b<d;++b){e[b].setValue(!0)}}}}Ext.resumeLayouts(!0);return this},markInvalid:function(b){var a=this.ariaEl.dom;this.callParent([b]);if(a){a.setAttribute('aria-invalid',!0)}},clearInvalid:function(){var a=this.ariaEl.dom;this.callParent();if(a){a.setAttribute('aria-invalid',!1)}}},function(){if(Ext.isGecko){this.override({onFocusEnter:function(e){var a=e.toComponent,c,b,d;if(a.isRadio){c=a.getManager().getByName(a.name,a.getFormId()).items;for(b=0,d=c.length;b<d;b++){c[b].disableTabbing()}}},onFocusLeave:function(e){var a=e.fromComponent,c,b,d;if(a.isRadio){c=a.getManager().getByName(a.name,a.getFormId()).items;for(b=0,d=c.length;b<d;b++){c[b].enableTabbing()}}}})}});Ext.define('Ext.picker.Month',{extend:Ext.Component,alias:'widget.monthpicker',alternateClassName:'Ext.MonthPicker',isMonthPicker:!0,focusable:!0,childEls:['bodyEl','prevEl','nextEl','monthEl','yearEl','buttons'],renderTpl:['<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseCls}-body">','<div id="{id}-monthEl" data-ref="monthEl" class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month">','<a style="{parent.monthStyle}" role="button" hidefocus="on" class="{parent.baseCls}-item-inner">{.}</a>','</div>','</tpl>','</div>','<div id="{id}-yearEl" data-ref="yearEl" class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-prev" hidefocus="on" role="button"></a>','</div>','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-next" hidefocus="on" role="button"></a>','</div>','</div>','<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year">','<a hidefocus="on" class="{parent.baseCls}-item-inner" role="button">{.}</a>','</div>','</tpl>','</div>','<div class="'+Ext.baseCSSPrefix+'clear"></div>','<tpl if="showButtons">','<div id="{id}-buttons" data-ref="buttons" class="{baseCls}-buttons">{%','var me=values.$comp, okBtn=me.okBtn, cancelBtn=me.cancelBtn;','okBtn.ownerLayout = cancelBtn.ownerLayout = me.componentLayout;','okBtn.ownerCt = cancelBtn.ownerCt = me;','Ext.DomHelper.generateMarkup(okBtn.getRenderTree(), out);','Ext.DomHelper.generateMarkup(cancelBtn.getRenderTree(), out);','%}</div>','</tpl>','</div>'],okText:'OK',cancelText:'Cancel',baseCls:Ext.baseCSSPrefix+'monthpicker',showButtons:!0,footerButtonUI:'default',measureWidth:35,measureMaxHeight:20,smallCls:Ext.baseCSSPrefix+'monthpicker-small',totalYears:10,yearOffset:5,monthOffset:6,alignOnScroll:!1,initComponent:function(){var a=this;a.selectedCls=a.baseCls+'-selected';if(a.small){a.addCls(a.smallCls)}a.setValue(a.value);a.activeYear=a.getYear((new Date()).getFullYear()-4,-4);if(a.showButtons){a.okBtn=new Ext.button.Button({ui:a.footerButtonUI,text:a.okText,handler:a.onOkClick,scope:a});a.cancelBtn=new Ext.button.Button({ui:a.footerButtonUI,text:a.cancelText,handler:a.onCancelClick,scope:a})}a.callParent()},beforeRender:function(){var a=this,b=0,f=[],c=Ext.Date.getShortMonthName,d=a.monthOffset,e=a.monthMargin,g='';if(a.padding&&!a.width){a.cacheWidth()}a.callParent();for(;b<d;++b){f.push(c(b),c(b+d))}if(Ext.isDefined(e)){g='margin: 0 '+e+'px;'}Ext.apply(a.renderData,{months:f,years:a.getYears(),showButtons:a.showButtons,monthStyle:g})},cacheWidth:function(){var a=this,b=a.parseBox(a.padding),c=Ext.getBody().createChild({cls:a.baseCls+' '+a.borderBoxCls,style:'position:absolute;top:-1000px;left:-1000px;',html:'&nbsp;'});a.self.prototype.width=c.getWidth()+b.left+b.right;c.destroy()},afterRender:function(){var a=this,b=a.bodyEl;a.callParent();if(a.up('[floating=true]')){a.el.on('mousedown',a.onElClick,a,{translate:!1})}b.on({scope:a,click:'onBodyClick',dblclick:'onBodyClick'});a.years=b.select('.'+a.baseCls+'-year a');a.months=b.select('.'+a.baseCls+'-month a');a.backRepeater=new Ext.util.ClickRepeater(a.prevEl,{handler:Ext.Function.bind(a.adjustYear,a,[-a.totalYears])});a.prevEl.addClsOnOver(a.baseCls+'-yearnav-prev-over');a.nextRepeater=new Ext.util.ClickRepeater(a.nextEl,{handler:Ext.Function.bind(a.adjustYear,a,[a.totalYears])});a.nextEl.addClsOnOver(a.baseCls+'-yearnav-next-over');a.updateBody();if(!Ext.isDefined(a.monthMargin)){Ext.picker.Month.prototype.monthMargin=a.calculateMonthMargin()}},calculateMonthMargin:function(){var b=this,c=b.months,d=c.first(),a=d.getMargin('l');while(a&&b.getLargest()>b.measureMaxHeight){--a;c.setStyle('margin','0 '+a+'px')}return a},getLargest:function(b){var a=0;this.months.each(function(d){var c=d.getHeight();if(c>a){a=c}});return a},setValue:function(b){var a=this,d=a.activeYear,c;if(!b){a.value=[null,null]}else {if(Ext.isDate(b)){a.value=[b.getMonth(),b.getFullYear()]}else {a.value=[b[0],b[1]]}}if(a.rendered){c=a.value[1];if(c!==null){if(c<d||c>d+a.yearOffset){a.activeYear=c-a.yearOffset+1}}a.updateBody()}return a},getValue:function(){return this.value},hasSelection:function(){var a=this.value;return a[0]!==null&&a[1]!==null},getYears:function(){var e=this,b=e.yearOffset,c=e.activeYear,f=c+b,a=c,d=[];for(;a<f;++a){d.push(a,a+b)}return d},updateBody:function(){var a=this,j=a.years,i=a.months,l=a.getYears(),d=a.selectedCls,m=a.getYear(null),b=a.value[0],h=a.monthOffset,f,e,c,k,g;if(a.rendered){j.removeCls(d);i.removeCls(d);e=j.elements;k=e.length;for(c=0;c<k;c++){g=Ext.fly(e[c]);f=l[c];g.dom.innerHTML=f;if(f===m){g.addCls(d)}}if(b!==null){if(b<h){b=b*2}else {b=(b-h)*2+1}i.item(b).addCls(d)}}},getYear:function(c,a){var b=this.value[1];a=a||0;return b===null?c:b+a},onElClick:function(a){a.stopEvent()},onBodyClick:function(a,d){var b=this,c=a.type==='dblclick';if(a.getTarget('.'+b.baseCls+'-month')){a.stopEvent();b.onMonthClick(d,c)}else {if(a.getTarget('.'+b.baseCls+'-year')){a.stopEvent();b.onYearClick(d,c)}}},adjustYear:function(a){if(typeof a!=='number'){a=this.totalYears}this.activeYear+=a;this.updateBody()},onOkClick:function(){this.fireEvent('okclick',this,this.value)},onCancelClick:function(){this.fireEvent('cancelclick',this)},onMonthClick:function(c,b){var a=this;a.value[0]=a.resolveOffset(a.months.indexOf(c),a.monthOffset);a.updateBody();a.fireEvent('month'+(b?'dbl':'')+'click',a,a.value);a.fireEvent('select',a,a.value)},onYearClick:function(c,b){var a=this;a.value[1]=a.activeYear+a.resolveOffset(a.years.indexOf(c),a.yearOffset);a.updateBody();a.fireEvent('year'+(b?'dbl':'')+'click',a,a.value);a.fireEvent('select',a,a.value)},resolveOffset:function(a,b){if(a%2===0){return a/2}else {return b+Math.floor(a/2)}},doDestroy:function(){Ext.destroy(this.backRepeater,this.nextRepeater,this.okBtn,this.cancelBtn);this.callParent()},privates:{finishRenderChildren:function(){var a=this;this.callParent(arguments);if(this.showButtons){a.okBtn.finishRender();a.cancelBtn.finishRender()}}}});Ext.define('Ext.theme.neptune.picker.Month',{override:'Ext.picker.Month',measureMaxHeight:36});Ext.define('Ext.theme.triton.picker.Month',{override:'Ext.picker.Month',footerButtonUI:'default-toolbar',calculateMonthMargin:Ext.emptyFn});Ext.define('Ext.picker.Date',{extend:Ext.Component,alias:'widget.datepicker',alternateClassName:'Ext.DatePicker',todayText:'Today',ariaTitle:'Date Picker: {0}',ariaTitleDateFormat:'F d',todayTip:'{0} (Spacebar)',minText:'This date is before the minimum date',ariaMinText:'This date is before the minimum date',maxText:'This date is after the maximum date',ariaMaxText:'This date is after the maximum date',disabledDaysText:'Disabled',ariaDisabledDaysText:'This day of week is disabled',disabledDatesText:'Disabled',ariaDisabledDatesText:'This date is disabled',nextText:'Next Month (Control+Right)',prevText:'Previous Month (Control+Left)',monthYearText:'Choose a month (Control+Up/Down to move years)',monthYearFormat:'F Y',showToday:!0,disableAnim:!1,baseCls:Ext.baseCSSPrefix+'datepicker',longDayFormat:'F d, Y',footerButtonUI:'default',isDatePicker:!0,alignOnScroll:!1,ariaRole:'region',focusable:!0,childEls:['innerEl','eventEl','prevEl','nextEl','middleBtnEl','footerEl'],border:!0,renderTpl:['<div id="{id}-innerEl" data-ref="innerEl" role="presentation">','<div class="{baseCls}-header">','<div id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-prev {baseCls}-arrow" role="presentation" title="{prevText}"></div>','<div id="{id}-middleBtnEl" data-ref="middleBtnEl" class="{baseCls}-month" role="heading">{%this.renderMonthBtn(values, out)%}</div>','<div id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-next {baseCls}-arrow" role="presentation" title="{nextText}"></div>','</div>','<table role="grid" id="{id}-eventEl" data-ref="eventEl" class="{baseCls}-inner" cellspacing="0" tabindex="0" aria-readonly="true">','<thead>','<tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" aria-label="{.}">','<div role="presentation" class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>','</th>','</tpl>','</tr>','</thead>','<tbody>','<tr role="row">','<tpl for="days">','{#:this.isEndOfWeek}','<td role="gridcell">','<div hidefocus="on" class="{parent.baseCls}-date"></div>','</td>','</tpl>','</tr>','</tbody>','</table>','<tpl if="showToday">','<div id="{id}-footerEl" data-ref="footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>','</tpl>','<div id="{id}-todayText" class="'+Ext.baseCSSPrefix+'hidden-clip">{todayText}.</div>','<div id="{id}-ariaMinText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaMinText}.</div>','<div id="{id}-ariaMaxText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaMaxText}.</div>','<div id="{id}-ariaDisabledDaysText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaDisabledDaysText}.</div>','<div id="{id}-ariaDisabledDatesText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaDisabledDatesText}.</div>','</div>',{firstInitial:function(a){return Ext.picker.Date.prototype.getDayInitial(a)},isEndOfWeek:function(a){a--;var b=a%7===0&&a!==0;return b?'</tr><tr role="row">':''},renderTodayBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.todayBtn.getRenderTree(),b)},renderMonthBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.monthBtn.getRenderTree(),b)}}],initHour:12,numDays:42,initComponent:function(){var a=this,b=Ext.Date.clearTime;a.selectedCls=a.baseCls+'-selected';a.disabledCellCls=a.baseCls+'-disabled';a.prevCls=a.baseCls+'-prevday';a.activeCls=a.baseCls+'-active';a.cellCls=a.baseCls+'-cell';a.nextCls=a.baseCls+'-prevday';a.todayCls=a.baseCls+'-today';a.defaultValue=Ext.isDate(a.defaultValue)?a.defaultValue:new Date();if(!a.format){a.format=Ext.Date.defaultFormat}if(!a.dayNames){a.dayNames=Ext.Date.dayNames}if(a.startDay==null){a.startDay=Ext.Date.firstDayOfWeek}a.dayNames=a.dayNames.slice(a.startDay).concat(a.dayNames.slice(0,a.startDay));a.callParent();a.value=a.value?b(a.value,!0):b(a.defaultValue);a.initDisabledDays()},getRefOwner:function(){return this.pickerField||this.callParent()},getRefItems:function(){var a=[],b=this.monthBtn,c=this.todayBtn;if(b){a.push(b)}if(c){a.push(c)}return a},beforeRender:function(){var a=this,b=Ext.String.htmlEncode,d=new Array(a.numDays),c=Ext.Date.format(new Date(),a.format);if(a.padding&&!a.width){a.cacheWidth()}a.monthBtn=new Ext.button.Button({ownerCt:a,ownerLayout:a.getComponentLayout(),text:'',tooltip:a.monthYearText,tabIndex:-1,ariaRole:'presentation',showEmptyMenu:!1,menu:[],listeners:{click:a.doShowMonthPicker,scope:a}});if(a.showToday){a.todayBtn=new Ext.button.Button({ui:a.footerButtonUI,ownerCt:a,ownerLayout:a.getComponentLayout(),text:Ext.String.format(a.todayText,c),tooltip:Ext.String.format(a.todayTip,c),tooltipType:'title',tabIndex:-1,ariaRole:'presentation',handler:a.selectToday,scope:a})}a.callParent();Ext.applyIf(a,{renderData:{}});Ext.apply(a.renderData,{dayNames:a.dayNames,showToday:a.showToday,prevText:b(a.prevText),nextText:b(a.nextText),todayText:b(a.todayText),ariaMinText:b(a.ariaMinText),ariaMaxText:b(a.ariaMaxText),ariaDisabledDaysText:b(a.ariaDisabledDaysText),ariaDisabledDatesText:b(a.ariaDisabledDatesText),days:d});a.protoEl.unselectable()},cacheWidth:function(){var a=this,b=a.parseBox(a.padding),c=Ext.getBody().createChild({cls:a.baseCls+' '+a.borderBoxCls,style:'position:absolute;top:-1000px;left:-1000px;'});a.self.prototype.width=c.getWidth()+b.left+b.right;c.destroy()},onRender:function(c,d){var a=this,b='div.'+a.baseCls+'-date';a.callParent(arguments);a.cells=a.eventEl.select('tbody td');a.textNodes=a.eventEl.query(b);a.eventEl.set({'aria-labelledby':a.monthBtn.id});a.mon(a.eventEl,{scope:a,wheel:a.handleMouseWheel,click:{fn:a.handleDateClick,delegate:b}})},initEvents:function(){var a=this;a.callParent();if(a.pickerField){a.el.on('mousedown',a.onMouseDown,a)}a.monthBtn.el.on('mousedown',a.onMouseDown,a);a.prevRepeater=new Ext.util.ClickRepeater({el:a.prevEl,handler:a.showPrevMonth,scope:a,mousedownStopEvent:!0});a.nextRepeater=new Ext.util.ClickRepeater({el:a.nextEl,handler:a.showNextMonth,scope:a,mousedownStopEvent:!0});a.keyNav=new Ext.util.KeyNav(Ext.apply({target:a.eventEl,scope:a,left:a.onLeftKey,right:a.onRightKey,up:a.onUpKey,down:a.onDownKey,pageUp:a.onPageUpKey,pageDown:a.onPageDownKey,home:a.onHomeKey,end:a.onEndKey,enter:a.onEnterKey,space:a.onSpaceKey,tab:function(a){this.handleTabKey(a);return !0}},a.keyNavConfig));if(a.disabled){a.syncDisabled(!0,!0)}if(a.minDate&&a.minDate>a.value){a.value=a.minDate}else {if(a.maxDate&&a.maxDate<a.value){a.value=a.maxDate}}a.update(a.value)},onMouseDown:function(a){a.preventDefault()},handleTabKey:function(d){var a=this,b=a.getSelectedDate(a.activeDate),c=a.handler;if(!a.disabled&&b.dateValue&&!Ext.fly(b.parentNode).hasCls(a.disabledCellCls)){a.setValue(new Date(b.dateValue));a.fireEvent('select',a,a.value);if(c){Ext.callback(c,a.scope,[a,a.value],null,a,a)}if(a.pickerField&&a.pickerField.isEditorComponent){d.preventDefault()}a.onSelect()}else {a.fireEventArgs('tabout',[a])}},getSelectedDate:function(g){var e=this,i=g.getTime(),d=e.cells,h=e.selectedCls,c=d.elements,f=c.length,b,a;d.removeCls(h);for(a=0;a<f;a++){b=c[a].firstChild;if(b.dateValue===i){return b}}return null},initDisabledDays:function(){var d=this,c=d.disabledDates,e='(?:',g,a,f,b;if(!d.disabledDatesRE&&c){g=c.length-1;f=c.length;for(a=0;a<f;a++){b=c[a];e+=Ext.isDate(b)?'^'+Ext.String.escapeRegex(Ext.Date.dateFormat(b,d.format))+'$':b;if(a!==g){e+='|'}}d.disabledDatesRE=new RegExp(e+')')}},setDisabledDates:function(b){var a=this;if(Ext.isArray(b)){a.disabledDates=b;a.disabledDatesRE=null}else {a.disabledDatesRE=b}a.initDisabledDays();a.update(a.value,!0);return a},setDisabledDays:function(a){this.disabledDays=a;return this.update(this.value,!0)},setMinDate:function(a){this.minDate=a;return this.update(this.value,!0)},setMaxDate:function(a){this.maxDate=a;return this.update(this.value,!0)},setValue:function(a){this.value=Ext.Date.clearTime(a||this.defaultValue,!0);return this.update(this.value)},getValue:function(){return this.value},getDayInitial:function(a){return a.substr(0,1)},onEnable:function(){var a=this;a.callParent();a.syncDisabled(!1,!0);a.update(a.activeDate)},onShow:function(){var a=this;a.callParent();a.syncDisabled(!1);if(a.pickerField){a.startValue=a.pickerField.getValue()}},onHide:function(){this.callParent();this.syncDisabled(!0)},onDisable:function(){this.callParent();this.syncDisabled(!0,!0)},getActive:function(){return this.activeDate||this.value},runAnimation:function(c){var a=this.monthPicker,b={duration:200,callback:function(){a.setVisible(!c)}};if(c){a.el.slideOut('t',b)}else {a.el.slideIn('t',b)}},hideMonthPicker:function(c){var a=this,b=a.monthPicker;if(b&&b.isVisible()){a.focus();if(a.shouldAnimate(c)){a.runAnimation(!0)}else {b.hide()}}return a},doShowMonthPicker:function(){this.showMonthPicker()},doHideMonthPicker:function(){this.hideMonthPicker()},showMonthPicker:function(d){var a=this,c=a.el,b;if(a.rendered&&!a.disabled){b=a.createMonthPicker();if(!b.isVisible()){b.setValue(a.getActive());b.setSize(c.getSize());b.floatParent=null;b.setPosition(-c.getBorderWidth('l'),-c.getBorderWidth('t'));if(a.shouldAnimate(d)){a.runAnimation(!1)}else {b.show()}}}return a},shouldAnimate:function(a){return Ext.isDefined(a)?a:!this.disableAnim},createMonthPicker:function(){var a=this,b=a.monthPicker;if(!b){a.monthPicker=b=new Ext.picker.Month({renderTo:a.el,ownerCmp:a,floating:!0,padding:a.padding,shadow:!1,small:a.showToday===!1,footerButtonUI:a.footerButtonUI,listeners:{scope:a,cancelclick:a.onCancelClick,okclick:a.onOkClick,yeardblclick:a.onOkClick,monthdblclick:a.onOkClick}});if(!a.disableAnim){b.el.setStyle('display','none')}b.hide();a.on('beforehide',a.doHideMonthPicker,a)}return b},onLeftKey:function(a){if(a.ctrlKey){this.showPrevMonth()}else {this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,-1))}a.preventDefault()},onRightKey:function(a){if(a.ctrlKey){this.showNextMonth()}else {this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,1))}a.preventDefault()},onUpKey:function(a){if(a.ctrlKey){this.showNextYear()}else {this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,-7))}a.preventDefault()},onDownKey:function(a){if(a.ctrlKey){this.showPrevYear()}else {this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,7))}a.preventDefault()},onPageUpKey:function(a){if(a.ctrlKey){this.showPrevYear()}else {this.showPrevMonth()}a.preventDefault()},onPageDownKey:function(a){if(a.ctrlKey){this.showNextYear()}else {this.showNextMonth()}a.preventDefault()},onHomeKey:function(a){this.update(Ext.Date.getFirstDateOfMonth(this.activeDate));a.preventDefault()},onEndKey:function(a){this.update(Ext.Date.getLastDateOfMonth(this.activeDate));a.preventDefault()},onEnterKey:function(a){this.handleDateClick(a,this.activeCell.firstChild)},onSpaceKey:function(f){var a=this,b=a.pickerField,d,e,c;a.setValue(new Date(a.activeCell.firstChild.dateValue));if(b){d=a.startValue;e=a.value;c=b.getValue();if(c&&d&&c.getTime()===e.getTime()){b.setValue(d)}else {b.setValue(e)}}f.preventDefault()},onOkClick:function(f,d){var c=this,a=d[0],e=d[1],b=new Date(e,a,c.getActive().getDate());if(b.getMonth()!==a){b=Ext.Date.getLastDateOfMonth(new Date(e,a,1))}c.setValue(b);c.hideMonthPicker()},onCancelClick:function(){this.selectedUpdate(this.activeDate);this.hideMonthPicker()},showPrevMonth:function(a){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(a){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(b){var a;b.stopEvent();if(!this.disabled){a=b.getWheelDelta();if(a>0){this.showNextMonth()}else {if(a<0){this.showPrevMonth()}}}},handleDateClick:function(d,b){var a=this,c=a.handler;d.stopEvent();if(!a.disabled&&b.dateValue&&!Ext.fly(b.parentNode).hasCls(a.disabledCellCls)){a.setValue(new Date(b.dateValue));a.fireEvent('select',a,a.value);if(c){Ext.callback(c,a.scope,[a,a.value],null,a,a)}a.onSelect()}},onSelect:function(){if(this.hideOnSelect){this.hide()}},selectToday:function(){var a=this,c=a.todayBtn,b=a.handler;if(c&&!c.disabled){a.setValue(Ext.Date.clearTime(new Date()));a.fireEvent('select',a,a.value);if(b){Ext.callback(b,a.scope,[a,a.value],null,a,a)}a.onSelect()}return a},selectedUpdate:function(g){var b=this,h=g.getTime(),d=b.cells,e=b.selectedCls,c,f=d.getCount(),a;b.eventEl.dom.setAttribute('aria-busy','true');a=b.activeCell;if(a){Ext.fly(a).removeCls(e);a.setAttribute('aria-selected',!1)}for(c=0;c<f;c++){a=d.item(c);if(b.textNodes[c].dateValue===h){b.activeCell=a.dom;b.eventEl.dom.setAttribute('aria-activedescendant',a.dom.id);a.dom.setAttribute('aria-selected',!0);a.addCls(e);b.fireEvent('highlightitem',b,a);break}}b.eventEl.dom.removeAttribute('aria-busy')},fullUpdate:function(h){var a=this,D=a.cells.elements,A=a.textNodes,i=a.disabledCellCls,b=Ext.Date,d=0,z=0,B=+b.clearTime(h,!0),E=+b.clearTime(new Date()),v=a.minDate?b.clearTime(a.minDate,!0):Number.NEGATIVE_INFINITY,u=a.maxDate?b.clearTime(a.maxDate,!0):Number.POSITIVE_INFINITY,j=a.disabledDatesRE,C=a.disabledDatesText,l=a.disabledDays?a.disabledDays.join(''):!1,y=a.disabledDaysText,k=a.format,t=b.getDaysInMonth(h),x=b.getFirstDateOfMonth(h),e=x.getDay()-a.startDay,o=b.add(h,b.MONTH,-1),w=a.ariaTitleDateFormat,r,c,p,g,s,m,n,q,f;if(e<0){e+=7}t+=e;r=b.getDaysInMonth(o)-e;c=new Date(o.getFullYear(),o.getMonth(),r,a.initHour);if(a.showToday){g=b.clearTime(new Date());p=g<v||g>u||j&&k&&j.test(b.dateFormat(g,k))||l&&l.indexOf(g.getDay())!==-1;a.todayDisabled=p;if(!a.disabled){a.todayBtn.setDisabled(p)}}s=function(m,g){var d=D[m],e=[];if(!d.hasAttribute('id')){d.setAttribute('id',a.id+'-cell-'+m)}f=+b.clearTime(c,!0);d.firstChild.dateValue=f;d.setAttribute('aria-label',b.format(c,w));d.removeAttribute('aria-describedby');d.removeAttribute('data-qtip');if(f===E){g+=' '+a.todayCls;e.push(a.id+'-todayText')}if(f===B){a.activeCell=d;a.eventEl.dom.setAttribute('aria-activedescendant',d.id);d.setAttribute('aria-selected',!0);g+=' '+a.selectedCls;a.fireEvent('highlightitem',a,d)}else {d.setAttribute('aria-selected',!1)}if(f<v){g+=' '+i;e.push(a.id+'-ariaMinText');d.setAttribute('data-qtip',a.minText)}else {if(f>u){g+=' '+i;e.push(a.id+'-ariaMaxText');d.setAttribute('data-qtip',a.maxText)}else {if(l&&l.indexOf(c.getDay())!==-1){d.setAttribute('data-qtip',y);e.push(a.id+'-ariaDisabledDaysText');g+=' '+i}else {if(j&&k){q=b.dateFormat(c,k);if(j.test(q)){d.setAttribute('data-qtip',C.replace('%0',q));e.push(a.id+'-ariaDisabledDatesText');g+=' '+i}}}}}if(e.length){d.setAttribute('aria-describedby',e.join(' '))}d.className=g+' '+a.cellCls};a.eventEl.dom.setAttribute('aria-busy','true');for(;d<a.numDays;++d){if(d<e){m=++r;n=a.prevCls}else {if(d>=t){m=++z;n=a.nextCls}else {m=d-e+1;n=a.activeCls}}A[d].innerHTML=m;c.setDate(c.getDate()+1);s(d,n)}a.eventEl.dom.removeAttribute('aria-busy');a.monthBtn.setText(Ext.Date.format(h,a.monthYearFormat))},update:function(c,d){var a=this,b=a.activeDate;if(a.rendered){a.activeDate=c;if(!d&&b&&a.el&&b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()){a.selectedUpdate(c,b)}else {a.fullUpdate(c,b)}}return a},doDestroy:function(){var a=this;if(a.rendered){Ext.destroy(a.keyNav,a.monthPicker,a.monthBtn,a.nextRepeater,a.prevRepeater,a.todayBtn,a.todayElSpan)}a.callParent()},privates:{finishRenderChildren:function(){var a=this;a.callParent();a.monthBtn.finishRender();if(a.showToday){a.todayBtn.finishRender()}},getFocusEl:function(){return this.eventEl},syncDisabled:function(b,e){var a=this,d=a.keyNav,c=a.todayBtn;if(d){d.setDisabled(b);a.prevRepeater.setDisabled(b);a.nextRepeater.setDisabled(b)}if(e&&c){c.setDisabled(a.todayDisabled||b)}}}});Ext.define('Ext.theme.triton.picker.Date',{override:'Ext.picker.Date',footerButtonUI:'default-toolbar'});Ext.define('Ext.form.field.Date',{extend:Ext.form.field.Picker,alias:'widget.datefield',alternateClassName:['Ext.form.DateField','Ext.form.Date'],format:'m/d/Y',ariaFormat:'M j Y',altFormats:'m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j',disabledDaysText:'Disabled',ariaDisabledDaysText:'This day of week is disabled',disabledDatesText:'Disabled',ariaDisabledDatesText:'This date cannot be selected',minText:'The date in this field must be equal to or after {0}',ariaMinText:'The date must be equal to or after {0}',maxText:'The date in this field must be equal to or before {0}',ariaMaxText:'The date must be equal to or before {0}',invalidText:'{0} is not a valid date - it must be in the format {1}',formatText:'Expected date format {0}.',triggerCls:Ext.baseCSSPrefix+'form-date-trigger',showToday:!0,useStrict:undefined,initTime:'12',initTimeFormat:'H',matchFieldWidth:!1,startDay:0,valuePublishEvent:['select','blur'],componentCls:Ext.baseCSSPrefix+'form-field-date',ariaRole:'combobox',rawDate:null,rawDateText:'',validateOnFocusLeave:!0,initComponent:function(){var a=this,d=Ext.isString,c,b;c=a.minValue;b=a.maxValue;if(d(c)){a.minValue=a.parseDate(c)}if(d(b)){a.maxValue=a.parseDate(b)}a.disabledDatesRE=null;a.initDisabledDays();a.callParent()},getSubTplData:function(d){var a=this,c,b;c=a.callParent([d]);if(!a.ariaStaticRoles[a.ariaRole]){b=c.ariaElAttributes;if(b){b['aria-owns']=a.id+'-inputEl '+a.id+'-picker-eventEl';b['aria-autocomplete']='none'}}return c},initValue:function(){var a=this,b=a.value;if(Ext.isString(b)){a.value=a.rawToValue(b);a.rawDate=a.value;a.rawDateText=a.parseDate(a.value)}else {a.value=b||null;a.rawDate=a.value;a.rawDateText=a.value?a.parseDate(a.value):''}a.callParent()},initDisabledDays:function(){if(this.disabledDates){var c=this.disabledDates,f=c.length-1,d='(?:',a,e=c.length,b;for(a=0;a<e;a++){b=c[a];d+=Ext.isDate(b)?'^'+Ext.String.escapeRegex(b.dateFormat(this.format))+'$':b;if(a!==f){d+='|'}}this.disabledDatesRE=new RegExp(d+')')}},setDisabledDates:function(c){var a=this,b=a.picker;a.disabledDates=c;a.initDisabledDays();if(b){b.setDisabledDates(a.disabledDatesRE)}},setDisabledDays:function(a){var b=this.picker;this.disabledDays=a;if(b){b.setDisabledDays(a)}},setMinValue:function(c){var a=this,b=a.picker,d=Ext.isString(c)?a.parseDate(c):c;a.minValue=d;if(b){b.minText=Ext.String.format(a.minText,a.formatDate(a.minValue));b.setMinDate(d)}},setMaxValue:function(c){var a=this,b=a.picker,d=Ext.isString(c)?a.parseDate(c):c;a.maxValue=d;if(b){b.maxText=Ext.String.format(a.maxText,a.formatDate(a.maxValue));b.setMaxDate(d)}},getErrors:function(b){b=arguments.length>0?b:this.formatDate(this.processRawValue(this.getRawValue()));var a=this,e=Ext.String.format,l=Ext.Date.clearTime,c=a.callParent([b]),d=a.disabledDays,k=a.disabledDatesRE,g=a.minValue,f=a.maxValue,o=d?d.length:0,j=0,m,h,n,i;if(b===null||b.length<1){return c}m=b;b=a.parseDate(b);if(!b){c.push(e(a.invalidText,m,Ext.Date.unescapeFormat(a.format)));return c}i=b.getTime();if(g&&i<l(g).getTime()){c.push(e(a.minText,a.formatDate(g)))}if(f&&i>l(f).getTime()){c.push(e(a.maxText,a.formatDate(f)))}if(d){n=b.getDay();for(;j<o;j++){if(n===d[j]){c.push(a.disabledDaysText);break}}}h=a.formatDate(b);if(k&&k.test(h)){c.push(e(a.disabledDatesText,h))}return c},rawToValue:function(a){var b=this;if(a===b.rawDateText){return b.rawDate}return b.parseDate(a)||a||null},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},setValue:function(b){var a=this,d=Ext.Date,c,e=a.lastValue;a.lastValue=a.rawDateText;a.lastDate=a.rawDate;if(Ext.isDate(b)){c=a.rawDate=b;a.rawDateText=a.formatDate(b)}else {c=a.rawDate=a.rawToValue(b);a.rawDateText=a.formatDate(b);if(c===b){c=a.rawDate=null;a.rawDateText=''}}if(c&&!d.formatContainsHourInfo(a.format)){a.rawDate=d.clearTime(c,!0)}a.callParent(arguments);if(!a.destroyed&&a.didValueChange(a.rawDate,e)){a.fireEvent('select',a,b)}},checkChange:function(){var a=this,b,c,d;if(!a.suspendCheckChange){b=a.getRawValue();c=a.lastValue;d=a.lastDate;if(!a.destroyed&&a.didValueChange(b,c)){a.rawDate=a.rawToValue(b);a.rawDateText=a.formatDate(b);a.lastValue=b;a.lastDate=a.rawDate;a.fireEvent('change',a,a.getValue(),d);a.onChange(b,c)}}},safeParse:function(g,c){var e=this,a=Ext.Date,d=null,f=e.useStrict,b;if(a.formatContainsHourInfo(c)){d=a.parse(g,c,f)}else {b=a.parse(g+' '+e.initTime,c+' '+e.initTimeFormat,f);if(b){d=a.clearTime(b)}}return d},getSubmitValue:function(){var b=this.submitFormat||this.format,a=this.rawDate;return a?Ext.Date.format(a,b):''},getValue:function(){return this.rawDate||null},setRawValue:function(a){var b=this;b.callParent([a]);b.rawDate=Ext.isDate(a)?a:b.rawToValue(a);b.rawDateText=this.formatDate(a)},parseDate:function(a){if(!a||Ext.isDate(a)){return a}var b=this,d=b.safeParse(a,b.format),f=b.altFormats,c=b.altFormatsArray,e=0,g;if(!d&&f){c=c||f.split('|');g=c.length;for(;e<g&&!d;++e){d=b.safeParse(a,c[e])}}return d},formatDate:function(a,b){return Ext.isDate(a)?Ext.Date.dateFormat(a,b||this.format):a},createPicker:function(){var a=this,b=Ext.String.format;return new Ext.picker.Date({id:a.id+'-picker',pickerField:a,floating:!0,preventRefocus:!0,hidden:!0,minDate:a.minValue,maxDate:a.maxValue,disabledDatesRE:a.disabledDatesRE,disabledDatesText:a.disabledDatesText,ariaDisabledDatesText:a.ariaDisabledDatesText,disabledDays:a.disabledDays,disabledDaysText:a.disabledDaysText,ariaDisabledDaysText:a.ariaDisabledDaysText,format:a.format,showToday:a.showToday,startDay:a.startDay,minText:b(a.minText,a.formatDate(a.minValue)),ariaMinText:b(a.ariaMinText,a.formatDate(a.minValue,a.ariaFormat)),maxText:b(a.maxText,a.formatDate(a.maxValue)),ariaMaxText:b(a.ariaMaxText,a.formatDate(a.maxValue,a.ariaFormat)),listeners:{scope:a,select:a.onSelect,tabout:a.onTabOut},keyNavConfig:{esc:function(){a.inputEl.focus();a.collapse()}}})},createInitialDate:function(a){var c=this.minValue,b=this.maxValue;a=a||new Date();if(c&&c>a){a=c}else {if(b&&b<a){a=b}}return a},onSelect:function(c,b){var a=this;a.setValue(b);a.rawDate=b;a.onTabOut(c)},onTabOut:function(a){this.inputEl.focus();this.collapse()},onExpand:function(){var a=this.rawDate;this.picker.setValue(Ext.isDate(a)?a:this.createInitialDate())},onBlur:function(c){var a=this,b=a.rawToValue(a.getRawValue());if(b===''||Ext.isDate(b)){a.setValue(b)}a.callParent([c])}});Ext.define('Ext.form.field.Display',{extend:Ext.form.field.Base,alias:'widget.displayfield',alternateClassName:['Ext.form.DisplayField','Ext.form.Display'],fieldSubTpl:['<div id="{id}" data-ref="inputEl" role="textbox" aria-readonly="true"',' aria-labelledby="{cmpId}-labelEl" {inputAttrTpl}',' tabindex="<tpl if="tabIdx != null">{tabIdx}<tpl else>-1</tpl>"','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {fieldCls}-{ui}">{value}</div>',{compiled:!0,disableFormats:!0}],ariaRole:undefined,focusable:!1,skipLabelForAttribute:!0,readOnly:!0,fieldCls:Ext.baseCSSPrefix+'form-display-field',fieldBodyCls:Ext.baseCSSPrefix+'form-display-field-body',htmlEncode:!1,noWrap:!1,validateOnChange:!1,initEvents:Ext.emptyFn,submitValue:!1,getValue:function(){return this.value},valueToRaw:function(a){if(a||a===0||a===!1){return a}else {return ''}},isDirty:function(){return !1},isValid:Ext.returnTrue,validate:Ext.returnTrue,getRawValue:function(){return this.rawValue},setRawValue:function(b){var a=this;b=Ext.valueFrom(b,'');a.rawValue=b;if(a.rendered){a.inputEl.dom.innerHTML=a.getDisplayValue();a.updateLayout()}return b},getDisplayValue:function(){var a=this,c=this.getRawValue(),d=a.renderer,b;if(d){b=Ext.callback(d,a.scope,[c,a],0,a)}else {b=a.htmlEncode?Ext.util.Format.htmlEncode(c):c}return b},getSubTplData:function(b){var a=this.callParent(arguments);a.value=this.getDisplayValue();return a}});Ext.define('Ext.form.field.FileButton',{extend:Ext.button.Button,alias:'widget.filebutton',childEls:['fileInputEl'],inputCls:Ext.baseCSSPrefix+'form-file-input',cls:Ext.baseCSSPrefix+'form-file-btn',preventDefault:!1,tabIndex:undefined,useTabGuards:Ext.isIE||Ext.isEdge,promptCalled:!1,autoEl:{tag:'div',unselectable:'on'},afterTpl:['<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" ','type="file" size="1" name="{inputName}" unselectable="on" ','<tpl if="accept != null">accept="{accept}"</tpl>','<tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl>','>'],keyMap:null,ariaEl:'fileInputEl',getAfterMarkup:function(a){return this.lookupTpl('afterTpl').apply(a)},getTemplateArgs:function(){var a=this,b;b=a.callParent();b.inputCls=a.inputCls;b.inputName=a.inputName||a.id;b.tabIndex=a.tabIndex!=null?a.tabIndex:null;b.accept=a.accept||null;b.role=a.ariaRole;return b},afterRender:function(){var a=this,c,b;a.callParent(arguments);c={scope:a,mousedown:a.handlePrompt,keydown:a.handlePrompt,change:a.fireChange,focus:a.onFileFocus,blur:a.onFileBlur,destroyable:!0};if(a.useTabGuards){b={tag:'span',role:'button','aria-hidden':'true','data-tabguard':'true',style:{height:0,width:0}};b.tabIndex=a.tabIndex!=null?a.tabIndex:0;a.beforeInputGuard=a.el.createChild(b,a.fileInputEl);a.afterInputGuard=a.el.createChild(b);a.afterInputGuard.insertAfter(a.fileInputEl);a.beforeInputGuard.on('focus',a.onInputGuardFocus,a);a.afterInputGuard.on('focus',a.onInputGuardFocus,a);c.keydown=a.onFileInputKeydown}a.fileInputElListeners=a.fileInputEl.on(c)},doDestroy:function(){var a=this;if(a.fileInputElListeners){a.fileInputElListeners.destroy()}if(a.beforeInputGuard){a.beforeInputGuard.destroy();a.beforeInputGuard=null}if(a.afterInputGuard){a.afterInputGuard.destroy();a.afterInputGuard=null}a.callParent()},fireChange:function(a){this.fireEvent('change',this,a,this.fileInputEl.dom.value)},createFileInput:function(d){var a=this,b,c;b=a.fileInputEl=a.el.createChild({name:a.inputName||a.id,id:!d?a.id+'-fileInputEl':undefined,cls:a.inputCls+(a.getInherited().rtl?' '+Ext.baseCSSPrefix+'rtl':''),tag:'input',type:'file',size:1,unselectable:'on'},a.afterInputGuard);b.dom.setAttribute('data-componentid',a.id);if(a.tabIndex!=null){a.setTabIndex(a.tabIndex)}if(a.accept){b.dom.setAttribute('accept',a.accept)}c={scope:a,change:a.fireChange,mousedown:a.handlePrompt,keydown:a.handlePrompt,focus:a.onFileFocus,blur:a.onFileBlur};if(a.useTabGuards){c.keydown=a.onFileInputKeydown}b.on(c)},handlePrompt:function(a){var b;if(a.type==='keydown'){b=a.getKey();this.promptCalled=!Ext.isIE&&b===a.ENTER||b===a.SPACE?!0:!1}else {this.promptCalled=!0}},onFileFocus:function(b){var a=this.ownerCt;if(!this.hasFocus){this.onFocus(b)}if(a&&!a.hasFocus){a.onFocus(b)}},onFileBlur:function(b){var a=this.ownerCt;if(this.promptCalled){this.promptCalled=!1;b.preventDefault();return}if(this.hasFocus){this.onBlur(b)}if(a&&a.hasFocus){a.onBlur(b)}},onInputGuardFocus:function(a){this.fileInputEl.focus()},onFileInputKeydown:function(a){var c=a.getKey(),b;if(c===a.TAB){b=a.shiftKey?this.beforeInputGuard:this.afterInputGuard;if(b){b.suspendEvent('focus');b.focus();Ext.defer(function(){b.resumeEvent('focus')},1)}}else {if(c===a.ENTER||c===a.SPACE){this.handlePrompt(a)}}return !0},reset:function(b){var a=this;if(b){a.fileInputEl.destroy()}a.createFileInput(!b);if(b){a.ariaEl=a.fileInputEl}},restoreInput:function(a){var b=this;b.fileInputEl.destroy();a=Ext.get(a);if(b.useTabGuards){a.insertBefore(b.afterInputGuard)}else {b.el.appendChild(a)}b.fileInputEl=a},onDisable:function(){this.callParent();this.fileInputEl.dom.disabled=!0},onEnable:function(){this.callParent();this.fileInputEl.dom.disabled=!1},privates:{getFocusEl:function(){return this.fileInputEl},getFocusClsEl:function(){return this.el},setTabIndex:function(b){var a=this;if(!a.focusable){return}a.tabIndex=b;if(!a.rendered||a.destroying||a.destroyed){return}if(a.useTabGuards){a.fileInputEl.dom.setAttribute('tabIndex',-1);a.beforeInputGuard.dom.setAttribute('tabIndex',b);a.afterInputGuard.dom.setAttribute('tabIndex',b)}else {a.fileInputEl.dom.setAttribute('tabIndex',b)}}}});Ext.define('Ext.form.trigger.Component',{extend:Ext.form.trigger.Trigger,alias:'trigger.component',cls:Ext.baseCSSPrefix+'form-trigger-cmp',onFieldRender:function(){var b=this,a=b.component;b.callParent();if(!a.isComponent&&!a.isWidget){a=Ext.widget(a)}b.component=a;a.render(b.el)},destroy:function(){var a=this.component;if(a.isComponent||a.isWidget){a.destroy()}this.component=null;this.callParent()}});Ext.define('Ext.form.field.File',{extend:Ext.form.field.Text,alias:['widget.filefield','widget.fileuploadfield'],alternateClassName:['Ext.form.FileUploadField','Ext.ux.form.FileUploadField','Ext.form.File'],emptyText:undefined,needArrowKeys:!1,triggers:{filebutton:{type:'component',hideOnReadOnly:!1,preventMouseDown:!1}},buttonText:'Browse...',buttonOnly:!1,buttonMargin:3,clearOnSubmit:!0,extraFieldBodyCls:Ext.baseCSSPrefix+'form-file-wrap',inputCls:Ext.baseCSSPrefix+'form-text-file',readOnly:!0,editable:!1,submitValue:!1,triggerNoEditCls:'',childEls:['browseButtonWrap'],applyTriggers:function(c){var a=this,b=(c||{}).filebutton;if(b){b.component=Ext.apply({xtype:'filebutton',ownerCt:a,id:a.id+'-button',ui:a.ui,disabled:a.disabled,tabIndex:a.tabIndex,text:a.buttonText,style:a.buttonOnly?'':a.getButtonMarginProp()+a.buttonMargin+'px',accept:a.accept,inputName:a.getName(),listeners:{scope:a,change:a.onFileChange}},a.buttonConfig);return a.callParent([c])}},getSubTplData:function(b){var a=this.callParent([b]);a.tabIdx=-1;return a},onRender:function(){var a=this,b,e,c,d;a.callParent(arguments);b=a.inputEl;b.dom.name='';b.on('focus',a.onInputFocus,a);b.on('mousedown',a.onInputMouseDown,a);d=a.getTrigger('filebutton');e=a.button=d.component;a.fileInputEl=e.fileInputEl;c=e.el;if(a.buttonOnly){a.inputWrap.setDisplayed(!1);a.shrinkWrap=3}d.el.setWidth(c.getWidth()+c.getMargin('lr'));if(Ext.isIE8){a.button.getEl().repaint()}},getTriggerMarkup:function(){return '<td id="'+this.id+'-browseButtonWrap" data-ref="browseButtonWrap" role="presentation"></td>'},onFileChange:function(b,c,a){this.duringFileSelect=!0;Ext.form.field.File.superclass.setValue.call(this,a);delete this.duringFileSelect},didValueChange:function(){return !!this.duringFileSelect},setEmptyText:Ext.emptyFn,setValue:Ext.emptyFn,reset:function(){var a=this,b=a.clearOnSubmit;if(a.rendered){a.button.reset(b);a.fileInputEl=a.button.fileInputEl;if(b){a.inputEl.dom.value='';Ext.form.field.File.superclass.setValue.call(this,null)}}a.callParent()},onShow:function(){this.callParent();this.button.updateLayout()},onDisable:function(){this.callParent();this.button.disable()},onEnable:function(){this.callParent();this.button.enable()},isFileUpload:Ext.returnTrue,extractFileInput:function(){var b=this,a;if(b.rendered){a=b.button.fileInputEl.dom;b.reset()}else {a=document.createElement('input');a.type='file';a.className=Ext.baseCSSPrefix+'hidden-display';a.name=b.getName()}return a},restoreInput:function(b){var a;if(this.rendered){a=this.button;a.restoreInput(b);this.fileInputEl=a.fileInputEl}},doDestroy:function(){this.fileInputEl=this.button=null;this.callParent()},getButtonMarginProp:function(){return this.getInherited().rtl?'margin-right:':'margin-left:'},onInputFocus:function(b){var a=this;if(a.selectOnFocus&&document.activeElement===a.inputEl.dom){a.inputEl.dom.select()}a.focus();if(Ext.isIE9m){a.fileInputEl.addCls(Ext.baseCSSPrefix+'position-relative');a.fileInputEl.removeCls(Ext.baseCSSPrefix+'position-relative')}},onInputMouseDown:function(a){a.preventDefault();this.focus()},privates:{getFocusEl:function(){return this.button},getFocusClsEl:Ext.privateFn}});Ext.define('Ext.view.TagKeyNav',{extend:Ext.view.BoundListKeyNav,alias:'view.navigation.tagfield',onKeySpace:function(c){var b=this,a=b.view.pickerField;if(a.isExpanded&&a.inputEl.dom.value===''){a.preventKeyUpEvent=!0;b.navigateOnSpace=!0;b.callParent([c]);c.stopEvent();return !1}return !0}});Ext.define('Ext.form.field.Tag',{extend:Ext.form.field.ComboBox,xtype:'tagfield',noWrap:!1,multiSelect:!0,delimiter:',',tipTpl:undefined,forceSelection:!0,createNewOnEnter:!1,createNewOnBlur:!1,encodeSubmitValue:!1,triggerOnClick:!0,stacked:!1,filterPickList:!1,focusLastAddedItem:!1,clearOnBackspace:!0,grow:!0,growMin:!1,growMax:!1,simulatePlaceholder:!0,selectOnFocus:!0,ariaHelpText:'Use Up and Down arrows to view available values, Enter to select. '+'Use Left and Right arrows to view selected values, Delete key to deselect.',ariaHelpTextEditable:'Use Up and Down arrows to view available values, Enter to select. '+'Type and press Enter to create a new value. '+'Use Left and Right arrows to view selected values, '+'Delete key to deselect.',ariaSelectedText:'Selected {0}.',ariaDeselectedText:'{0} removed from selection.',ariaNoneSelectedText:'No value selected.',ariaSelectedListLabel:'Selected values',ariaAvailableListLabel:'Available values',fieldSubTpl:['<div id="{cmpId}-listWrapper" data-ref="listWrapper"'+(Ext.isGecko?' tabindex="-1"':''),'<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>',' class="'+Ext.baseCSSPrefix+'tagfield {fieldCls} {typeCls} {typeCls}-{ui}"<tpl if="wrapperStyle"> style="{wrapperStyle}"</tpl>>','<span id="{cmpId}-selectedText" data-ref="selectedText" aria-hidden="true" class="'+Ext.baseCSSPrefix+'hidden-clip"></span>','<ul id="{cmpId}-itemList" data-ref="itemList" role="presentation" class="'+Ext.baseCSSPrefix+'tagfield-list{itemListCls}">','<li id="{cmpId}-inputElCt" data-ref="inputElCt" role="presentation" class="'+Ext.baseCSSPrefix+'tagfield-input">','<input id="{cmpId}-inputEl" data-ref="inputEl" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx != null">tabindex="{tabIdx}" </tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>','class="'+Ext.baseCSSPrefix+'tagfield-input-field {inputElCls} {noGrowCls} {emptyCls} {fixCls}" autocomplete="off">','</li>','</ul>','<ul id="{cmpId}-ariaList" data-ref="ariaList" role="listbox"','<tpl if="ariaSelectedListLabel"> aria-label="{ariaSelectedListLabel}"</tpl>','<tpl if="multiSelect"> aria-multiselectable="true"</tpl>',' class="'+Ext.baseCSSPrefix+'tagfield-arialist">','</ul>','</div>',{disableFormats:!0}],postSubTpl:['<label id="{cmpId}-placeholderLabel" data-ref="placeholderLabel" for="{cmpId}-inputEl" class="{placeholderCoverCls} {placeholderCoverCls}-{ui} {emptyCls}">{emptyText}</label>','</div>','<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>','</div>'],extraFieldBodyCls:Ext.baseCSSPrefix+'tagfield-body',childEls:['listWrapper','itemList','inputEl','inputElCt','selectedText','ariaList'],clearValueOnEmpty:!1,ariaSelectable:!0,ariaEl:'listWrapper',notEditableCls:Ext.baseCSSPrefix+'not-editable',tagItemCls:Ext.baseCSSPrefix+'tagfield-item',tagItemTextCls:Ext.baseCSSPrefix+'tagfield-item-text',tagItemCloseCls:Ext.baseCSSPrefix+'tagfield-item-close',tagItemSelector:'.'+Ext.baseCSSPrefix+'tagfield-item',tagItemCloseSelector:'.'+Ext.baseCSSPrefix+'tagfield-item-close',tagSelectedCls:Ext.baseCSSPrefix+'tagfield-item-selected',noGrowCls:Ext.baseCSSPrefix+'tagfield-input-field-nogrow',initComponent:function(){var a=this,c=a.typeAhead,b=a.delimiter;if(a.createNewOnEnter||a.createNewOnBlur){a.forceSelection=!1}a.typeAhead=!1;if(a.value==null){a.value=[]}a.selectionModel=new Ext.selection.Model({mode:'MULTI',onSelectChange:function(d,c,b,a){a()},listeners:{scope:a,selectionchange:a.onSelectionChange,focuschange:a.onFocusChange}});if(!a.ariaHelp){a.ariaHelp=a.createNewOnEnter?a.ariaHelpTextEditable:a.ariaHelpText}a.callParent();a.typeAhead=c;if(b&&a.multiSelect){a.delimiterRegexp=new RegExp(Ext.String.escapeRegex(b))}},initEvents:function(){var a=this,b=a.inputEl;a.callParent(arguments);if(!a.enableKeyEvents){b.on('keydown',a.onKeyDown,a);b.on('keyup',a.onKeyUp,a)}a.listWrapper.on({scope:a,click:a.onItemListClick,mousedown:a.onItemMouseDown})},createPicker:function(){var a=this,b;b=Ext.apply({navigationModel:'tagfield'},a.defaultListConfig);if(a.ariaAvailableListLabel){b.ariaRenderAttributes={'aria-label':Ext.String.htmlEncode(a.ariaAvailableListLabel)}}a.defaultListConfig=b;return a.callParent()},isValid:function(){var a=this,b=a.disabled,c=a.forceValidation||!b;return c?a.validateValue(a.getValue()):b},onBindStore:function(b){var a=this;a.callParent([b]);if(b){a.valueStore=new Ext.data.Store({model:b.getModel(),proxy:'memory',useModelWarning:!1});a.selectionModel.bindStore(a.valueStore);if(a.filterPickList){a.listFilter=new Ext.util.Filter({scope:a,filterFn:a.filterPicked});a.changingFilters=!0;b.filter(a.listFilter);a.changingFilters=!1}}},filterPicked:function(a){return !this.valueCollection.contains(a)},onUnbindStore:function(d){var a=this,b=a.valueStore,c=a.picker;if(c){c.bindStore(null)}if(b){b.destroy();a.valueStore=null}if(a.filterPickList&&!d.destroyed){a.changingFilters=!0;d.removeFilter(a.listFilter);a.changingFilters=!1}a.callParent(arguments)},clearInput:function(){var a=this,b=a.getValueRecords(),d=a.inputEl&&a.inputEl.dom.value,c;if(b.length&&d){c=b[b.length-1].get(a.displayField);if(!Ext.String.startsWith(c,d,!0)){return}a.inputEl.dom.value='';if(a.queryMode==='local'){a.clearLocalFilter();a.getPicker().refresh()}}a.syncInputWidth()},onValueCollectionEndUpdate:function(){var a=this,c=a.valueCollection.items,b=a.valueStore;if(a.isSelectionUpdating()){return}if(a.filterPickList){a.changingFilters=!0;a.store.filter(a.listFilter);a.changingFilters=!1}a.callParent();Ext.suspendLayouts();if(b){b.suspendEvents();b.loadRecords(c);b.resumeEvents()}a.refreshEmptyText();a.clearInput();Ext.resumeLayouts(!0);a.alignPicker()},checkValueOnDataChange:Ext.emptyFn,onSelectionChange:function(e,b){var a=this,c=a.inputEl,d;a.applyMultiselectItemMarkup();a.applyAriaListMarkup();a.applyAriaSelectedText();if(c){if(b.length===0){c.dom.removeAttribute('aria-activedescendant')}else {d=a.getAriaListNode(b[0]);if(d){c.dom.setAttribute('aria-activedescendant',d.id)}}}a.fireEvent('valueselectionchange',a,b)},onFocusChange:function(d,c,b){var a=this;a.callParent([d,c,b]);a.fireEvent('valuefocuschange',a,c,b)},getAriaListNode:function(b){var a=this.ariaList,c;if(a&&b){c=a.selectNode('[data-recordid="'+b.internalId+'"]')}return c},doDestroy:function(){Ext.destroy(this.selectionModel);this.callParent()},getSubTplData:function(j){var a=this,e=a.id,b=a.callParent(arguments),h=a.emptyText,i=h&&b.value.length<1,g=a.growMin,f=a.growMax,d='',c;b.value='';b.emptyText=i?h:'';b.itemListCls='';b.emptyCls=i?a.emptyUICls:'';if(a.grow){if(Ext.isNumber(g)&&g>0){d+='min-height:'+g+'px;'}if(Ext.isNumber(f)&&f>0){d+='max-height:'+f+'px;'}}else {d+='max-height: 1px;'}b.noGrowCls=!a.grow?a.noGrowCls:'';b.wrapperStyle=d;if(a.stacked===!0){b.itemListCls+=' '+Ext.baseCSSPrefix+'tagfield-stacked'}if(!a.multiSelect){b.itemListCls+=' '+Ext.baseCSSPrefix+'tagfield-singleselect'}if(!a.ariaStaticRoles[a.ariaRole]){b.multiSelect=a.multiSelect;b.ariaSelectedListLabel=Ext.String.htmlEncode(a.ariaSelectedListLabel);c=b.ariaElAttributes;if(c){c['aria-owns']=e+'-inputEl '+e+'-picker '+e+'-ariaList'}c=b.inputElAriaAttributes;if(c){c.role='textbox';c['aria-describedby']=e+'-selectedText '+(c['aria-describedby']||'')}}return b},onRender:function(b,c){var a=this;a.callParent([b,c]);a.emptyClsElements.push(a.listWrapper,a.placeholderLabel)},afterRender:function(){var a=this,b=a.inputEl,c=a.emptyText;if(c){if(Ext.supports.Placeholder&&b){b.dom.removeAttribute('placeholder')}}a.applyMultiselectItemMarkup();a.applyAriaListMarkup();a.applyAriaSelectedText();a.callParent()},findRecord:function(b,c){var a=this.getStore().queryRecords(b,c);return a.length?a[0]:!1},getCursorPosition:function(){var a;if(document.selection){a=document.selection.createRange();a.collapse(!0);a.moveStart('character',-this.inputEl.dom.value.length);a=a.text.length}else {a=this.inputEl.dom.selectionStart}return a},hasSelectedText:function(){var a=this.inputEl.dom,c,b;if(document.selection){c=document.selection;b=c.createRange();return b.parentElement()===a}else {return a.selectionStart!==a.selectionEnd}},onKeyDown:function(b){var a=this,e=b.getKey(),l=a.inputEl,n=l&&l.dom.value,f=a.valueCollection,c=a.selectionModel,g=!1,j,d,i,h,k,m;if(a.destroyed||a.readOnly||a.disabled||!a.editable){return}j=f.getCount();if(j>0&&n===''){d=c.getCount()>0?f.indexOf(c.getLastSelected()):-1;if(e===b.BACKSPACE&&a.clearOnBackspace||e===b.DELETE&&d>-1){if(d>-1){if(c.getCount()>1){d=-1}i=c.getSelection();h=[];for(k=0,m=i.length;k<m;k++){h.push(i[k].get(a.displayField))}h=h.join(', ')}else {i=f.last();h=i.get(a.displayField)}f.remove(i);if(h){a.ariaErrorEl.dom.innerHTML=Ext.String.formatEncode(a.ariaDeselectedText,h)}c.clearSelections();if(d===j-1){c.select(f.last())}else {if(d>-1){c.select(d)}else {if(f.getCount()){c.select(f.last())}}}g=!0}else {if(e===b.RIGHT||e===b.LEFT){if(d===-1&&e===b.LEFT){c.select(f.last());g=!0}else {if(d>-1){if(e===b.RIGHT){if(d<j-1){c.select(d+1,b.shiftKey);g=!0}else {if(!b.shiftKey){c.deselectAll();g=!0}}}else {if(e===b.LEFT&&d>0){c.select(d-1,b.shiftKey);g=!0}}}}}else {if(e===b.A&&b.ctrlKey){c.selectAll();g=b.A}}}}if(g){a.preventKeyUpEvent=g;b.stopEvent();return}if(a.isExpanded&&e===b.ENTER&&a.picker.highlightedItem){a.preventKeyUpEvent=!0}if(a.enableKeyEvents){a.callParent(arguments)}if(!b.isSpecialKey()&&!b.hasModifier()){c.deselectAll()}},onKeyUp:function(c,f){var a=this,d=a.inputEl,b=d.dom.value,e=a.preventKeyUpEvent;if(a.preventKeyUpEvent){c.stopEvent();if(e===!0||c.getKey()===e){delete a.preventKeyUpEvent}return}if(a.multiSelect&&a.delimiterRegexp&&a.delimiterRegexp.test(b)||a.createNewOnEnter&&c.getKey()===c.ENTER){if(a.createNewOnEnter&&b){a.ariaErrorEl.dom.innerHTML=Ext.String.formatEncode(a.ariaSelectedText,b)}b=Ext.Array.clean(b.split(a.delimiterRegexp));d.dom.value='';a.setValue(a.valueStore.getRange().concat(b));d.focus()}if(this.growMax&&this.growMax>=this.itemList.getHeight()){this.autoSize()}a.callParent([c,f])},onEsc:function(c){var a=this,b=a.selectionModel,d=a.isExpanded;a.callParent([c]);if(!d&&b.getCount()>0){b.deselectAll()}c.stopEvent()},onTypeAhead:function(){var a=this,e=a.displayField,d=a.inputEl.dom,f=a.getStore().findRecord(e,d.value),b,g,c;if(f){b=f.get(e);g=b.length;c=d.value.length;if(c!==0&&c!==g){a.lastMutatedValue=b;d.value=b;a.syncInputWidth();a.selectText(c,b.length)}}},onItemListClick:function(c){var a=this,d=a.selectionModel,b=c.getTarget(a.tagItemSelector),e=b?c.getTarget(a.tagItemCloseSelector):!1;if(a.readOnly||a.disabled){return}c.stopPropagation();if(b){if(e){a.removeByListItemNode(b);if(a.valueStore.getCount()>0){a.fireEvent('select',a,a.valueStore.getRange())}}else {a.toggleSelectionByListItemNode(b,c.shiftKey)}if(!Ext.supports.TouchEvents){a.inputEl.focus()}}else {if(d.getCount()>0){d.deselectAll()}a.inputEl.focus();if(a.triggerOnClick){a.onTriggerClick()}}},onItemMouseDown:function(a){if(a.target!==this.inputEl.dom){a.preventDefault()}},getMultiSelectItemMarkup:function(){var a=this,b=a._getChildElCls&&a._getChildElCls()||'';if(!a.multiSelectItemTpl){if(!a.labelTpl){a.labelTpl='{'+a.displayField+'}'}a.labelTpl=a.lookupTpl('labelTpl');if(a.tipTpl){a.tipTpl=a.lookupTpl('tipTpl')}a.multiSelectItemTpl=new Ext.XTemplate(['<tpl for=".">','<li data-selectionIndex="{[xindex - 1]}" data-recordId="{internalId}" role="presentation" class="'+a.tagItemCls+b,'<tpl if="this.isSelected(values)">',' '+a.tagSelectedCls,'</tpl>','{%','values = values.data;','%}',a.tipTpl?'" data-qtip="{[this.getTip(values)]}">':'">','<div role="presentation" class="'+a.tagItemTextCls+'">{[this.getItemLabel(values)]}</div>','<div role="presentation" class="'+a.tagItemCloseCls+b+'"></div>','</li>','</tpl>',{isSelected:function(b){return a.selectionModel.isSelected(b)},getItemLabel:function(b){return Ext.String.htmlEncode(a.labelTpl.apply(b))},getTip:function(b){return Ext.String.htmlEncode(a.tipTpl.apply(b))},strict:!0}])}if(!a.multiSelectItemTpl.isTemplate){a.multiSelectItemTpl=this.lookupTpl('multiSelectItemTpl')}return a.multiSelectItemTpl.apply(a.valueCollection.getRange())},applyMultiselectItemMarkup:function(){var a=this,b=a.itemList;if(b){b.select('.'+Ext.baseCSSPrefix+'tagfield-item').destroy();a.inputElCt.insertHtml('beforeBegin',a.getMultiSelectItemMarkup());if(b.getHeight()>this.getHeight()&&a.focusLastAddedItem){b.dom.scrollIntoView(!1)}a.autoSize()}},getAriaListMarkup:function(){var a=this,b;if(!a.ariaListItemTpl){a.ariaListItemTpl=new Ext.XTemplate(['<tpl for=".">','<li id="'+a.id+'-{internalId}" role="option"',' class="'+Ext.baseCSSPrefix+'tagfield-arialist-item"',' aria-selected="{[this.isPicked(values)]}"','  data-recordId="{internalId}"','>','{[this.getItemLabel(values.data)]}','</li>','</tpl>',{isPicked:function(b){return a.filterPicked(b)?'false':'true'},isSelected:function(b){return a.selectionModel.isSelected(b)?'true':'false'},getItemLabel:function(b){return Ext.String.htmlEncode(a.labelTpl.apply(b))},strict:!0}])}if(!a.ariaListItemTpl.isTemplate){a.ariaListtemTpl=a.lookupTpl('ariaListItemTpl')}b=a.valueCollection.getRange();return a.ariaListItemTpl.apply(b)},applyAriaListMarkup:function(){var b=this,a=b.ariaList;if(a){a.select('*').destroy();a.insertHtml('afterBegin',b.getAriaListMarkup())}},getAriaSelectedText:function(b){var a=this;if(!a.ariaSelectedItemTpl){a.ariaSelectedItemTpl=new Ext.XTemplate(['<tpl for="." between=", ">','{[this.getItemLabel(values.data)]}','</tpl>',{getItemLabel:function(c){return Ext.String.htmlEncode(a.labelTpl.apply(c))},strict:!0}])}if(!a.ariaSelectedItemTpl.isTemplate){a.ariaSelectedItemTpl=a.lookupTpl('ariaSelectedItemTpl')}return Ext.String.format(a.ariaSelectedText,a.ariaSelectedItemTpl.apply(b))},applyAriaSelectedText:function(){var a=this,c=a.selectedText,b,d;if(c){b=a.valueCollection.getRange();d=b.length?a.getAriaSelectedText(b):a.ariaNoneSelectedText;c.dom.innerHTML=Ext.String.htmlEncode(d)}},getRecordByListItemNode:function(a){return this.valueCollection.items[Number(a.getAttribute('data-selectionIndex'))]},toggleSelectionByListItemNode:function(e,d){var c=this,a=c.getRecordByListItemNode(e),b=c.selectionModel;if(a){if(b.isSelected(a)){b.deselect(a)}else {b.select(a,d)}}},removeByListItemNode:function(c){var b=this,a=b.getRecordByListItemNode(c);if(a){b.pickerSelectionModel.deselect(a)}},getDisplayValue:function(){return this.getRawValue()},getRawValue:function(){var e=this,b=e.getValueRecords(),c=[],a,d;for(a=0,d=b.length;a<d;a++){c.push(b[a].data[e.displayField])}return c.join(',')},setRawValue:function(a){return},removeValue:function(b){var c=this,g=c.valueCollection,f,d,a,e=[];if(b){b=Ext.Array.from(b);for(d=0,f=b.length;d<f;++d){a=b[d];if(!a.isModel){a=g.byValue.get(a)}if(a){e.push(a)}}c.valueCollection.beginUpdate();c.pickerSelectionModel.deselect(e);c.valueCollection.endUpdate()}},getValue:function(){var a=this.callParent();if(a){a=Ext.Array.from(a)}return a},setValue:function(a,l,r){var b=this,k=b.valueStore,j=b.valueField,g=[],f=b.store,o=b.autoLoadOnValue,q=f.getCount()>0||f.isLoaded(),p=f.hasPendingLoad(),s=o&&!q&&!p,e,n,d,c,m,i,h;if(Ext.isEmpty(a)){a=null;h=!0}else {if(Ext.isString(a)&&b.multiSelect){a=a.split(b.delimiter)}else {a=Ext.Array.from(a,!0)}}if(!h&&b.queryMode==='remote'&&!f.isEmptyStore&&r!==!0&&s){for(d=0,n=a.length;d<n;d++){e=a[d];if(!e||!e.isModel){c=k.findExact(j,e);if(c>-1){a[d]=k.getAt(c)}else {c=b.findRecord(j,e);if(!c){if(b.forceSelection){g.push(e)}else {c={};c[b.valueField]=e;c[b.displayField]=e;m=b.valueStore.getModel();c=new m(c)}}if(c){a[d]=c}}}}if(g.length){i={};i[b.valueParam||b.valueField]=g.join(b.delimiter);f.load({params:i,callback:function(){b.setValue(a,l,!0);b.autoSize();b.lastQuery=!1}});return !1}}if(!h&&!b.multiSelect&&a.length>0){for(d=a.length-1;d>=0;d--){if(a[d].isModel){a=a[d];break}}if(Ext.isArray(a)){a=a[a.length-1]}}return b.callParent([a,l])},updateValue:function(){var a=this,b=a.valueCollection.getRange(),d=b.length,c;for(c=0;c<d;c++){b[c]=b[c].get(a.valueField)}a.setHiddenValue(b);a.value=a.multiSelect?b:b[0];if(!Ext.isDefined(a.value)){a.value=undefined}a.applyMultiselectItemMarkup();a.applyAriaListMarkup();a.applyAriaSelectedText();a.checkChange()},getValueRecords:function(){return this.valueCollection.getRange()},getSubmitData:function(){var a=this,b=a.callParent(arguments);if(a.multiSelect&&a.encodeSubmitValue&&b&&b[a.name]){b[a.name]=Ext.encode(b[a.name])}return b},assertValue:function(){var a=this,b=a.inputEl.dom.value,d=!Ext.isEmpty(b)?a.findRecordByDisplay(b):!1,c=!1;if(!d&&!a.forceSelection&&a.createNewOnBlur&&!Ext.isEmpty(b)){c=b}else {if(d){c=d}}if(c){a.addValue(c)}a.inputEl.dom.value='';a.syncInputWidth();a.collapse();a.refreshEmptyText()},isEqual:function(b,c){var f=Ext.Array.from,e=this.valueField,a,d,g,h;b=f(b);c=f(c);d=b.length;if(d!==c.length){return !1}for(a=0;a<d;a++){g=b[a].isModel?b[a].get(e):b[a];h=c[a].isModel?c[a].get(e):c[a];if(g!==h){return !1}}return !0},onFocus:function(){var a=this,b=a.focusCls,c=a.itemList;if(b&&c){c.addCls(b)}a.callParent(arguments)},onBlur:function(){var a=this,b=a.focusCls,c=a.itemList;if(b&&c){c.removeCls(b)}a.callParent(arguments)},renderActiveError:function(){var a=this,c=a.invalidCls,b=a.itemList,d=a.hasActiveError();if(c&&b){b[d?'addCls':'removeCls'](a.invalidCls+'-field')}a.callParent(arguments)},autoSize:function(){var a=this;if(a.grow&&a.rendered){a.autoSizing=!0;a.updateLayout()}return a},afterComponentLayout:function(){var a=this,b;if(a.autoSizing){b=a.getHeight();if(b!==a.lastInputHeight){if(a.isExpanded){a.alignPicker()}a.fireEvent('autosize',a,b);a.lastInputHeight=b;a.autoSizing=!1}}},onFieldMutation:function(a){this.callParent([a]);this.syncInputWidth(!0)},syncInputWidth:function(e){var a=this,b=a.inputEl,d=!!(b&&b.dom.value)||a.editable&&a.hasFocus,c;if(a.grow){return}a.toggleCls(a.notEditableCls,!d);if(d){c=Ext.util.TextMetrics.measure(b,b.dom.value).width;c+=3;b.setWidth(c);if(e){a.listWrapper.dom.scrollTop=99999}}}});Ext.define('Ext.theme.material.form.field.Tag',{override:'Ext.form.field.Tag',labelSeparator:'',listeners:{change:function(a,b){if(a.el){a.el.toggleCls('not-empty',b.length)}},render:function(a,d,b,c){if(a.getValue()&&a.el){a.el.addCls('not-empty')}}}});Ext.define('Ext.overrides.form.field.Tag',{override:'Ext.form.field.Tag',getMultiSelectItemMarkup:function(){var a=this,b=a._getChildElCls&&a._getChildElCls()||'';if(!a.multiSelectItemTpl){if(!a.labelTpl){a.labelTpl='{'+a.displayField+'}'}a.labelTpl=a.lookupTpl('labelTpl');if(a.tipTpl){a.tipTpl=a.lookupTpl('tipTpl')}a.multiSelectItemTpl=new Ext.XTemplate(['<tpl for=".">','<li data-selectionIndex="{[xindex - 1]}" data-recordId="{internalId}" class="'+a.tagItemCls+b,'<tpl if="this.isSelected(values)">',' '+a.tagSelectedCls,'</tpl>','{%','values = values.data;','%}',a.tipTpl?'" data-qtip="{[this.getTip(values)]}">':'">','<div class="'+a.tagItemTextCls+'">{[this.getItemLabel(values)]}</div>','<div class="'+a.tagItemCloseCls+b+'"></div>','</li>','</tpl>',{isSelected:function(b){return a.selectionModel.isSelected(b)},getItemLabel:function(b){return a.labelTpl.apply(b)},getTip:function(b){return Ext.String.htmlEncode(a.tipTpl.apply(b))},strict:!0}])}if(!a.multiSelectItemTpl.isTemplate){a.multiSelectItemTpl=this.lookupTpl('multiSelectItemTpl')}return a.multiSelectItemTpl.apply(a.valueCollection.getRange())}});Ext.define('Ext.grid.CellContext',{isCellContext:!0,generation:0,constructor:function(a){this.view=a},setPosition:function(a,c){var b=this;if(arguments.length===1){if(a.length){c=a[0];a=a[1]}else {if(a.isCellContext){return b.setAll(a.view,a.rowIdx,a.colIdx,a.record,a.column)}else {if(a.view){b.view=a.view}c=a.column;a=a.row}}}b.setRow(a);b.setColumn(c);return b},setAll:function(f,d,c,e,b){var a=this;a.view=f;a.rowIdx=d;a.colIdx=c;a.record=e;a.column=b;a.generation++;return a},setRow:function(b){var a=this,c=a.view.dataSource,e=a.record,d;if(b!=undefined){if(typeof b==='number'){d=c.getCount();b=b<0?Math.max(d+b,0):Math.max(Math.min(b,d-1),0);a.rowIdx=b;a.record=c.getAt(b)}else {if(b.isModel){a.record=b;a.rowIdx=c.indexOf(b)}else {if(b.tagName||b.isElement){a.record=a.view.getRecord(b);a.rowIdx=a.record?a.record.isCollapsedPlaceholder?c.indexOfPlaceholder(a.record):c.indexOf(a.record):-1}}}}if(a.record!==e){a.generation++}return a},setColumn:function(b){var a=this,c=a.view.getVisibleColumnManager(),d=a.column;if(b!=undefined){if(typeof b==='number'){a.colIdx=b;a.column=c.getHeaderAtIndex(b)}else {if(b.isHeader){a.column=b;a.colIdx=c.indexOf(b)}}}if(a.column!==d){a.generation++}return a},setView:function(a){this.view=a;this.refresh()},getCell:function(a){return this.view.getCellByPosition(this,a)},getRow:function(b){var a=this.view.getRow(this.record);return b?a:Ext.get(a)},getNode:function(b){var a=this.view.getNode(this.record);return b?a:Ext.get(a)},isEqual:function(a){return a&&a.isCellContext&&a.record===this.record&&a.column===this.column},clone:function(){var a=this,b=new a.self(a.view);b.rowIdx=a.rowIdx;b.colIdx=a.colIdx;b.record=a.record;b.column=a.column;return b},privates:{isFirstColumn:function(){var a=this.getCell(!0);if(a){return !a.previousSibling}},isLastColumn:function(){var a=this.getCell(!0);if(a){return !a.nextSibling}},isLastRenderedRow:function(){return this.view.all.endIndex===this.rowIdx},getLastColumnIndex:function(){var a=this.getRow(!0);if(a){return a.lastChild.cellIndex}return -1},refresh:function(){var a=this,c=a.view.dataSource.indexOf(a.record),b=a.view.getVisibleColumnManager().indexOf(a.column);a.setRow(c===-1?a.rowIdx:a.record);a.setColumn(b===-1?a.colIdx:a.column)},navigate:function(c){var a=this,b=a.view.getVisibleColumnManager().getColumns();switch(c){case -1:do{if(!a.colIdx){a.colIdx=b.length-1}else {a.colIdx--}a.setColumn(a.colIdx)}while(!a.getCell(!0));break;case 1:do{if(a.colIdx>=b.length){a.colIdx=0}else {a.colIdx++}a.setColumn(a.colIdx)}while(!a.getCell(!0));break;}}},statics:{compare:function(a,b){return a.rowIdx-b.rowIdx||a.colIdx-b.colIdx}}});Ext.define('Ext.grid.CellEditor',{extend:Ext.Editor,alias:'widget.celleditor',isCellEditor:!0,alignment:'l-l!',hideEl:!1,cls:Ext.baseCSSPrefix+'small-editor '+Ext.baseCSSPrefix+'grid-editor '+Ext.baseCSSPrefix+'grid-cell-editor',treeNodeSelector:'.'+Ext.baseCSSPrefix+'tree-node-text',shim:!1,shadow:!1,floating:!0,alignOnScroll:!1,useBoundValue:!1,focusLeaveAction:'completeEdit',setGrid:function(a){this.grid=a},startEdit:function(b,d,c,a){this.context=this.editingPlugin.context;this.callParent([b,d,c,a])},onShow:function(){var a=this,b=a.boundEl.dom.querySelector(a.context.view.innerSelector);if(b){if(a.isForTree){b=b.querySelector(a.treeNodeSelector)}Ext.fly(b).hide()}a.callParent(arguments)},onFocusEnter:function(){var b=this,a=b.context,c=a.view;b.reattachToBody();a.node=c.getNode(a.record);a.row=c.getRow(a.record);a.cell=a.getCell(!0);a.rowIdx=c.indexOf(a.row);b.realign(!0);b.callParent(arguments);b.focusEnterEvent=null},onFocusLeave:function(d){var a=this,b=a.context.view,c=Ext.fly(d.relatedTarget);if(a[a.focusLeaveAction]()===!1){d.event.stopEvent();return}delete a.focusLeaveAction;if(!b.destroyed&&b.el.contains(c)&&(!c.isAncestor(d.target)||c===b.el)&&!c.up(b.getCellSelector(),b.el,!0)){a.context.grid.setActionableMode(!1,b.actionPosition)}a.cacheElement();Ext.container.Container.prototype.onFocusLeave.apply(a,arguments)},completeEdit:function(c){var a=this,b=a.context;if(a.editing){b.value=a.field.value;if(a.editingPlugin.validateEdit(b)===!1){if(b.cancel){b.value=a.originalValue;a.editingPlugin.cancelEdit()}return !!b.cancel}}a.callParent([c])},onEditComplete:function(f,g){var a=this,c=Ext.Element.getActiveElement(),e=a.context,d=e&&e.store,b;a.editing=!1;b=a.boundEl=a.context.getCell();if(b){a.restoreCell();if(b.contains(c)&&b.dom!==c){b.focus()}}a.callParent(arguments);if(g){a.editingPlugin.cancelEdit(a);if(f&&d&&d.isExpandingOrCollapsing){a.cacheElement()}}else {a.editingPlugin.onEditComplete(a,a.getValue(),a.startValue)}},cacheElement:function(a){if((!this.editing||a)&&!this.destroyed&&!this.isDetaching){this.isDetaching=!0;this.detachFromBody();this.isDetaching=!1}},onHide:function(){this.cacheElement(!0);Ext.Editor.superclass.onHide.apply(this,arguments)},onSpecialKey:function(h,a,d){var b=this,e=a.getKey(),f=b.completeOnEnter&&e===a.ENTER&&(!d||!d.fromBoundList),c=b.cancelOnEsc&&e===a.ESC,g=b.editingPlugin.view;if(f||c){a.stopEvent();if(c){b.focusLeaveAction='cancelEdit'}g.ownerGrid.setActionableMode(!1)}},getRefOwner:function(){return this.column&&this.column.getView()},restoreCell:function(){var b=this,a=b.boundEl.dom.querySelector(b.context.view.innerSelector);if(a){if(b.isForTree){a=a.querySelector(b.treeNodeSelector)}Ext.fly(a).show()}},afterRender:function(){var a=this,b=a.field;a.callParent(arguments);if(b.isCheckbox){b.mon(b.inputEl,{mousedown:a.onCheckBoxMouseDown,click:a.onCheckBoxClick,scope:a})}},onCheckBoxMouseDown:function(){this.completeEdit=Ext.emptyFn},onCheckBoxClick:function(){delete this.completeEdit;this.field.focus(!1,10)},realign:function(j){var a=this,c=a.boundEl,b=c.dom.querySelector(a.context.view.innerSelector),d=b.firstChild,f=c.getWidth(),h=Ext.Array.clone(a.offsets),k=a.grid,e,i='',g=!d||d.nodeType===3&&!Ext.String.trim(i=d.data).length;if(a.isForTree){e=a.getTreeNodeOffset(b);f-=Math.abs(e);h[0]+=e}if(k.columnLines){f-=c.getBorderWidth('rl')}if(j===!0){a.field.setWidth(f)}if(g){b.innerHTML='X'}a.alignTo(c,a.alignment,h);if(g){b.firstChild.data=i}},getTreeNodeOffset:function(a){return Ext.fly(a.querySelector(this.treeNodeSelector)).getOffsetsTo(a)[0]}});Ext.define('Ext.grid.ColumnComponentLayout',{extend:Ext.layout.component.Auto,alias:'layout.columncomponent',type:'columncomponent',setWidthInDom:!0,_paddingReset:{paddingTop:'',paddingBottom:''},columnAutoCls:Ext.baseCSSPrefix+'column-header-text-container-auto',beginLayout:function(a){this.callParent(arguments);a.titleContext=a.getEl('titleEl')},beginLayoutCycle:function(d){var b=this,a=b.owner,c=d.widthModel.shrinkWrap;b.callParent(arguments);if(c){a.el.setWidth('')}a.textContainerEl[c&&!a.isGroupHeader?'addCls':'removeCls'](b.columnAutoCls);a.titleEl.setStyle(b._paddingReset)},publishInnerHeight:function(a,e){var d=this,b=d.owner,c;if(b.getRootHeaderCt().hiddenHeaders){a.setProp('innerHeight',0);return}if(!a.hasRawContent){if(b.headerWrap&&!a.hasDomProp('width')){d.done=!1;return}c=e-a.getBorderInfo().height;a.setProp('innerHeight',c-b.titleEl.getHeight(),!1)}},measureContentHeight:function(a){return a.el.dom.offsetHeight},publishInnerWidth:function(a,b){if(!a.hasRawContent){a.setProp('innerWidth',b-a.getBorderInfo().width,!1)}},calculateOwnerHeightFromContentHeight:function(a,c){var d=this.callParent(arguments),b=this.owner;if(!a.hasRawContent){if(!b.headerWrap||a.hasDomProp('width')){return c+b.titleEl.getHeight()+a.getBorderInfo().height}return null}return d},calculateOwnerWidthFromContentWidth:function(a,d){var c=this.owner,f=a.getPaddingInfo().width,e=this.getTriggerOffset(c,a),b;if(c.isGroupHeader){b=d}else {b=Math.max(d,c.textEl.getWidth()+a.titleContext.getPaddingInfo().width)}return b+f+e},getTriggerOffset:function(a,c){var b=0;if(c.widthModel.shrinkWrap&&!a.menuDisabled){if(a.query('>:not([hidden])').length===0){b=a.getTriggerElWidth()}}return b}});Ext.define('Ext.layout.container.Fit',{extend:Ext.layout.container.Container,alternateClassName:['Ext.layout.FitLayout','Ext.layout.Fit'],alias:'layout.fit',itemCls:Ext.baseCSSPrefix+'fit-item',type:'fit',manageMargins:!0,sizePolicies:[{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}],getItemSizePolicy:function(d,b){var a=b||this.owner.getSizeModel(),c=(a.width.shrinkWrap?0:1)|(a.height.shrinkWrap?0:2);return this.sizePolicies[c]},beginLayoutCycle:function(a,p){var f=this,j=f.lastHeightModel&&f.lastHeightModel.calculated,m=f.lastWidthModel&&f.lastWidthModel.calculated,l=m||j,h=0,i=0,b,k,g,e,q,n,c,d,o,r;f.callParent(arguments);if(l&&a.targetContext.el.dom.tagName.toUpperCase()!=='TD'){l=m=j=!1}k=a.childItems;q=k.length;for(g=0;g<q;++g){e=k[g];if(p){b=e.target;c=b.minHeight;d=b.minWidth;if(d||c){n=e.marginInfo||e.getMarginInfo();c+=n.height;d+=n.height;if(h<c){h=c}if(i<d){i=d}}}if(l){o=e.el.dom.style;if(j){o.height=''}if(m){o.width=''}}}if(p){a.maxChildMinHeight=h;a.maxChildMinWidth=i}b=a.target;a.overflowX=!a.widthModel.shrinkWrap&&a.maxChildMinWidth&&b.scrollFlags.x||r;a.overflowY=!a.heightModel.shrinkWrap&&a.maxChildMinHeight&&b.scrollFlags.y||r},calculate:function(a){var d=this,p=a.childItems,m=p.length,b=d.getContainerSize(a),c={length:m,ownerContext:a,targetSize:b},o=a.widthModel.shrinkWrap,n=a.heightModel.shrinkWrap,j=a.overflowX,k=a.overflowY,e,f,l,g,i,h;a.state.info=c;if(j||k){e=d.getScrollbarsNeeded(j&&b.width,k&&b.height,a.maxChildMinWidth,a.maxChildMinHeight);if(e){f=Ext.scrollbar.size();if(e&1){b.height-=f.height}if(e&2){b.width-=f.width}}}if(m>0){for(g=0;g<m;++g){c.index=g;d.fitItem(p[g],c)}}else {c.contentWidth=c.contentHeight=0}if(n||o){l=a.targetContext.getPaddingInfo();if(o){if(k&&!b.gotHeight){d.done=!1}else {i=c.contentWidth+l.width;if(e&2){i+=f.width}if(!a.setContentWidth(i)){d.done=!1}}}if(n){if(j&&!b.gotWidth){d.done=!1}else {h=c.contentHeight+l.height;if(e&1){h+=f.height}if(!a.setContentHeight(h)){d.done=!1}}}}},fitItem:function(b,a){var c=this;if(b.invalid){c.done=!1;return}a.margins=b.getMarginInfo();a.needed=a.got=0;c.fitItemWidth(b,a);c.fitItemHeight(b,a);if(a.got!==a.needed){c.done=!1}},fitItemWidth:function(b,a){var c,d;if(a.ownerContext.widthModel.shrinkWrap){d=b.getProp('width')+a.margins.width;c=a.contentWidth;if(c===undefined){a.contentWidth=d}else {a.contentWidth=Math.max(c,d)}}else {if(b.widthModel.calculated){++a.needed;if(a.targetSize.gotWidth){++a.got;this.setItemWidth(b,a)}else {return}}}this.positionItemX(b,a)},fitItemHeight:function(b,a){var c,d;if(a.ownerContext.heightModel.shrinkWrap){d=b.getProp('height')+a.margins.height;c=a.contentHeight;if(c===undefined){a.contentHeight=d}else {a.contentHeight=Math.max(c,d)}}else {if(b.heightModel.calculated){++a.needed;if(a.targetSize.gotHeight){++a.got;this.setItemHeight(b,a)}else {return}}}this.positionItemY(b,a)},positionItemX:function(c,b){var a=b.margins;if(b.index||a.left){c.setProp('x',a.left)}if(a.width&&b.ownerContext.widthModel.shrinkWrap){c.setProp('margin-right',a.width)}},positionItemY:function(c,b){var a=b.margins;if(b.index||a.top){c.setProp('y',a.top)}if(a.height&&b.ownerContext.heightModel.shrinkWrap){c.setProp('margin-bottom',a.height)}},setItemHeight:function(b,a){b.setHeight(a.targetSize.height-a.margins.height)},setItemWidth:function(b,a){b.setWidth(a.targetSize.width-a.margins.width)}});Ext.define('Ext.panel.Table',{extend:Ext.panel.Panel,xtype:'tablepanel',extraBaseCls:Ext.baseCSSPrefix+'grid',extraBodyCls:Ext.baseCSSPrefix+'grid-body',actionableModeCls:Ext.baseCSSPrefix+'grid-actionable',noHeaderBordersCls:Ext.baseCSSPrefix+'no-header-borders',defaultBindProperty:'store',layout:'fit',manageLayoutScroll:!1,ariaRole:'presentation',config:{focused:null,headerBorders:!0,hideHeaders:null},publishes:['selection'],twoWayBindable:['selection'],selection:null,autoLoad:!1,variableRowHeight:!1,numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,hasView:!1,viewType:null,deferRowRender:!1,sortableColumns:!0,multiColumnSort:!1,enableLocking:!1,scrollerOwner:!0,enableColumnMove:!0,sealedColumns:!1,enableColumnResize:!0,columnLines:!1,rowLines:!0,bufferedRenderer:!0,preciseHeight:!1,ownerGrid:null,colLinesCls:Ext.baseCSSPrefix+'grid-with-col-lines',rowLinesCls:Ext.baseCSSPrefix+'grid-with-row-lines',noRowLinesCls:Ext.baseCSSPrefix+'grid-no-row-lines',hiddenHeaderCtCls:Ext.baseCSSPrefix+'grid-header-ct-hidden',hiddenHeaderCls:Ext.baseCSSPrefix+'grid-header-hidden',resizeMarkerCls:Ext.baseCSSPrefix+'grid-resize-marker',emptyCls:Ext.baseCSSPrefix+'grid-empty',focusable:!0,constructor:function(d){var a=this,c=d&&d.ownerGrid,b;a.ownerGrid=c||a;a.actionables=c?c.actionables:[];a.callParent([d]);b=a.store;b.trackStateChanges=!0;if(a.autoLoad){if(!b.isEmptyStore){b.load()}}},registerActionable:function(a){Ext.Array.include(this.actionables,a)},initComponent:function(){var a=this,d=a.columns||a.colModel||[],i=a.selection,c,h,f,j,g,e,b;if(i){a.selection=null;a.setSelection(i)}c=a.store;if(c&&Ext.isObject(c)&&!c.isStore&&!c.storeId){c=Ext.apply({autoDestroy:!0},c)}c=a.store=Ext.data.StoreManager.lookup(c||'ext-empty-store');a.enableLocking=a.enableLocking||a.hasLockedColumns(d);if(a.plugins){a.plugins=a.constructPlugins()}if(a.columnLines){a.addBodyCls(a.colLinesCls)}a.addBodyCls(a.rowLines?a.rowLinesCls:a.noRowLinesCls);a.addBodyCls(a.extraBodyCls);if(a.enableLocking){if(!a.mixins.lockable){a.self.mixin('lockable',Ext.grid.locking.Lockable)}a.injectLockable()}else {if(d.isRootHeader){a.headerCt=b=d;b.grid=a;b.forceFit=!!a.forceFit;d=[];a.columnManager=b.columnManager;a.visibleColumnManager=b.visibleColumnManager}else {e={grid:a,$initParent:a,forceFit:a.forceFit,sortable:a.sortableColumns,enableColumnMove:a.enableColumnMove,enableColumnResize:a.enableColumnResize,columnLines:a.columnLines,sealed:a.sealedColumns};if(Ext.isObject(d)){Ext.apply(e,d);d=d.items;delete e.items}a.headerCt=b=new Ext.grid.header.Container(e)}if(Ext.isDefined(a.enableColumnHide)){b.enableColumnHide=a.enableColumnHide}}a.scrollTask=new Ext.util.DelayedTask(a.syncHorizontalScroll,a);a.cls=(a.cls||'')+(' '+a.extraBaseCls);delete a.autoScroll;g=a.plugins&&Ext.Array.findBy(a.plugins,function(a){return a.isBufferedRenderer});if(g){a.bufferedRenderer=g}if(!a.hasView){if(c.isBufferedStore&&!c.getRemoteSort()){for(f=0,j=d.length;f<j;f++){d[f].sortable=!1}}a.relayHeaderCtEvents(b);a.features=a.features||[];if(!Ext.isArray(a.features)){a.features=[a.features]}a.viewConfig=a.viewConfig||{};h=a.getView();a.items=[h];a.hasView=!0;a.bindStore(c,!0);a.mon(h,{viewready:a.onViewReady,refresh:a.onRestoreHorzScroll,scope:a})}a.selModel=a.view.getSelectionModel();a.selModel.on({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection});a.relayEvents(a.view,['beforeitemlongpress','beforeitemmousedown','beforeitemmouseup','beforeitemmouseenter','beforeitemmouseleave','beforeitemclick','beforeitemdblclick','beforeitemcontextmenu','itemlongpress','itemmousedown','itemmouseup','itemmouseenter','itemmouseleave','itemclick','itemdblclick','itemcontextmenu','beforecellclick','cellclick','beforecelldblclick','celldblclick','beforecellcontextmenu','cellcontextmenu','beforecellmousedown','cellmousedown','beforecellmouseup','cellmouseup','beforecellkeydown','cellkeydown','rowclick','rowdblclick','rowcontextmenu','rowmousedown','rowmouseup','rowkeydown','beforeitemkeydown','itemkeydown','beforeitemkeyup','itemkeyup','beforeitemkeypress','itemkeypress','beforecontainermousedown','beforecontainermouseup','beforecontainermouseover','beforecontainermouseout','beforecontainerclick','beforecontainerdblclick','beforecontainercontextmenu','beforecontainerkeydown','beforecontainerkeyup','beforecontainerkeypress','containermouseup','containermousedown','containermouseover','containermouseout','containerclick','containerdblclick','containercontextmenu','containerkeydown','containerkeyup','containerkeypress','beforeselect','select','beforedeselect','deselect','beforerowexit']);if(!a.selModel.isSpreadsheetModel){a.relayEvents(a.view,['selectionchange'])}if(b){b.view=a.view;(a.dockedItems=Ext.Array.from(a.dockedItems,!0)).unshift(b);b.add(d)}a.columns=a.headerCt.getGridColumns();a.callParent();a.syncHeaderVisibility();if(a.enableLocking){a.afterInjectLockable()}a.addStateEvents(['columnresize','columnmove','columnhide','columnshow','sortchange','filteractivate','filterdeactivate','filterchange','groupchange'])},updateHideHeaders:function(a){if(!this.isConfiguring){this.syncHeaderVisibility()}},beforeRender:function(){var a=this,b=a.bufferedRenderer,c;if(a.lockable){a.getProtoBody().addCls(a.lockingBodyCls)}else {if(b&&a.getSizeModel().height.auto){a.bufferedRenderer=b=!1}if(b&&!b.isBufferedRenderer){b={xclass:'Ext.grid.plugin.BufferedRenderer'};Ext.copy(b,a,'variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer',!0);a.bufferedRenderer=a.addPlugin(b)}c=a.ariaRenderAttributes||(a.ariaRenderAttributes={});c['aria-readonly']=!a.isEditable;c['aria-multiselectable']=a.selModel.selectionMode!=='SINGLE'}a.callParent(arguments)},beforeLayout:function(){var a=this.mixins.lockable;if(a){a.beforeLayout.call(this)}this.callParent()},onHide:function(a,c,b){this.getView().onOwnerGridHide();this.callParent([a,c,b])},onShow:function(){this.callParent();this.getView().onOwnerGridShow()},getHeaderContainer:function(){return this.getView().getHeaderCt()},getColumns:function(){return this.getColumnManager().getColumns()},getVisibleColumns:function(){return this.getVisibleColumnManager().getColumns()},getScrollable:function(){return this.scrollable||this.view.getScrollable()},focus:function(){var a=this.getView();if(!a.isVisible(!0)){return !1}a.focus()},disableColumnHeaders:function(){this.headerCt.disable()},enableColumnHeaders:function(){this.headerCt.enable()},hasLockedColumns:function(a){var b,d,c;if(a.isRootHeader){a=a.items.items}else {if(Ext.isObject(a)){a=a.items}}for(b=0,d=a.length;b<d;b++){c=a[b];if(!c.processed&&c.locked){return !0}}},relayHeaderCtEvents:function(a){this.relayEvents(a,['columnresize','columnmove','columnhide','columnshow','columnschanged','sortchange','headerclick','headercontextmenu','headertriggerclick'])},getState:function(){var b=this,a=b.callParent(),c=b.store.getState();a=b.addPropertyToState(a,'columns',b.headerCt.getColumnsState());if(c){a.storeState=c}return a},applyState:function(b){var d=this,a=b.sort,e=b.storeState,c=d.store,f=b.columns=d.buildColumnHash(b.columns);d.callParent([b]);if(f){d.headerCt.applyColumnsState(f,e)}if(c.isEmptyStore){return}if(a){if(c.getRemoteSort()){c.sort({property:a.property,direction:a.direction,root:a.root},null,!1)}else {c.sort(a.property,a.direction)}}else {if(e){c.applyState(e)}}},buildColumnHash:function(c){var e,a,b,d;if(c){d={};for(b=0,e=c.length;b<e;b++){a=c[b];a.index=b;if(a.columns){a.columns=this.buildColumnHash(a.columns)}d[a.id]=a}return d}},getStore:function(){return this.store},onViewRefresh:function(b,a){this.onItemsAdded(b,a,0)},onItemAdd:function(a,b,d,c){this.onItemsAdded(c,a,b)},onItemsAdded:function(h,f,k){var b=this,j=f.length,e=b.freeRowContexts,i=b.liveRowContexts||(b.liveRowContexts={}),c,d,a,g;for(c=0;c<j;c++){d=(g=f[c]).internalId;if(!(a=i[d])){a=e&&e.shift();if(!a){a=new Ext.grid.RowContext({ownerGrid:b})}if(a.attach(h)){b.liveRowContexts[d]=a;a.setRecord(g,k+c)}}else {a.attach(h)}}},onItemRemove:function(j,k,f,h){var d=this,g=d.freeRowContexts||(d.freeRowContexts=[]),e=d.liveRowContexts,i=f.length,b,c,a;for(b=0;b<i;b++){c=f[b].getAttribute('data-recordId');a=e[c];if(a&&a.detach(h)){g.push(a);delete e[c]}}},createManagedWidget:function(d,b,a,c){return this.liveRowContexts[c.internalId].getWidget(d,b,a)},destroyManagedWidgets:function(b){var g=this,f=g.liveRowContexts,d=g.freeRowContexts,h=d&&d.length,c,e,a;for(e in f){a=f[e].widgets;if(a){Ext.destroy(a[b]);delete a[b]}}for(c=0;c<h;c++){a=d[c].widgets;if(a){Ext.destroy(a[b]);delete a[b]}}},getManagedWidgets:function(d){var e=this,b=e.liveRowContexts,a,c=[];for(a in b){c.push(b[a].widgets[d])}return c},getView:function(){var a=this,d,c,b;if(!a.view){b=a.viewConfig;d=b.scroll||a.scroll;c=a.scrollable;if(c==null&&b.scrollable==null&&d!==null){if(d===!0||d==='both'){c=!0}else {if(d===!1||d==='none'){c=!1}else {if(d==='vertical'){c={x:!1,y:!0}}else {if(d==='horizontal'){c={x:!0,y:!1}}}}}}b=Ext.apply({grid:a,ownerGrid:a.ownerGrid,deferInitialRefresh:a.deferRowRender,variableRowHeight:a.variableRowHeight,preserveScrollOnRefresh:!0,trackOver:a.trackMouseOver!==!1,throttledUpdate:a.throttledUpdate===!0,xtype:a.viewType,store:a.store,headerCt:a.headerCt,columnLines:a.columnLines,rowLines:a.rowLines,navigationModel:'grid',features:a.features,panel:a,emptyText:a.emptyText||''},a.viewConfig);if(!('scrollable' in b||'scroll' in b||'autoScroll' in b)&&c!=null){b.scrollable=c}b.$initParent=a;Ext.create(b);delete b.$initParent;if(a.view.emptyText){a.view.emptyText='<div class="'+a.emptyCls+'">'+a.view.emptyText+'</div>'}a.view.getComponentLayout().headerCt=a.headerCt;a.mon(a.view,{uievent:a.processEvent,scope:a});if(a.hasListeners.viewcreated){a.fireEvent('viewcreated',a,a.view)}}return a.view},getEmptyText:function(){return this.view.emptyText},setEmptyText:function(a){this.emptyText=a;this.view.setEmptyText('<div class="'+this.emptyCls+'">'+a+'</div>');return this},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){return this.ownerGrid.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,applyScrollable:function(b){var a=this.view;a=a&&(a.normalView||a);if(a){a.setScrollable(b)}return b},processEvent:function(g,h,f,c,d,b,e,i){var a=b.position.column;if(a){return a.processEvent.apply(a,arguments)}},ensureVisible:function(b,a){this.doEnsureVisible(b,a)},scrollByDeltaY:function(b,a){this.getView().scrollBy(null,b,a)},scrollByDeltaX:function(b,a){this.getView().scrollBy(b,null,a)},afterCollapse:function(){this.saveScrollPos();this.callParent(arguments)},afterExpand:function(){this.callParent(arguments);this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:Ext.emptyFn,onHeaderMove:function(e,f,b,c,d){var a=this;if(a.optimizedColumnMove===!1){a.view.refreshView()}else {a.view.moveColumn(c,d,b)}a.delayScroll()},onHeaderHide:function(b,c){var a=this.view;if(!b.childHideCount&&a.refreshCounter){a.refreshView()}},onHeaderShow:function(b,c){var a=this.view;if(a.refreshCounter){a.refreshView()}},onHeadersChanged:function(b,c){var a=this;if(a.rendered&&!a.reconfiguring){a.view.refreshView();a.delayScroll()}},delayScroll:function(){var a=this.view;if(a){this.scrollTask.delay(10,null,null,[a])}},onViewReady:function(){this.fireEvent('viewready',this)},onRestoreHorzScroll:function(){var a=this,b=a.scrollXPos;if(b){a.syncHorizontalScroll(a,!0)}},getScrollerOwner:function(){var a=this;if(!this.scrollerOwner){a=this.up('[scrollerOwner]')}return a},getLhsMarker:function(){var a=this;return a.lhsMarker||(a.lhsMarker=Ext.DomHelper.append(a.el,{role:'presentation',cls:a.resizeMarkerCls},!0))},getRhsMarker:function(){var a=this;return a.rhsMarker||(a.rhsMarker=Ext.DomHelper.append(a.el,{role:'presentation',cls:a.resizeMarkerCls},!0))},getSelection:function(){return this.getSelectionModel().getSelection()},setSelection:function(a){var b=this.selection;if(a!==b){this.selection=a;this.updateSelection(a,b)}},updateSelection:function(b){var a=this,c;if(!a.ignoreNextSelection){a.ignoreNextSelection=!0;c=a.getSelectionModel();if(b){c.select(b)}else {c.deselectAll()}a.ignoreNextSelection=!1}a.publishState('selection',b)},updateBindSelection:function(e,d){var a=this,b=d.length>0,c=null;a.hasHadSelection=a.hasHadSelection||b;if(!a.ignoreNextSelection){a.ignoreNextSelection=!0;if(b){c=e.getLastSelected()}if(a.hasHadSelection){a.setSelection(c)}a.ignoreNextSelection=!1}},updateFocused:function(a){this.getNavigationModel().setPosition(a)},updateHeaderBorders:function(a){this[a?'removeCls':'addCls'](this.noHeaderBordersCls)},getNavigationModel:function(){return this.getView().getNavigationModel()},getSelectionModel:function(){return this.getView().getSelectionModel()},getScrollTarget:function(){var a=this.getScrollerOwner().query('tableview');return a[a.length-1]},syncHorizontalScroll:function(e,b){var a=this,c=a.view.getScrollX(),d;b=b===!0;if(a.rendered&&(b||c!==a.scrollXPos)){if(b){d=a.getScrollTarget();d.setScrollX(c)}a.headerCt.setScrollX(c);a.scrollXPos=c}},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(b,e){var a=this,d=a.getView(),c=a.getStore();if(b){a.store=b;if(d.store!==b){d.bindStore(b,!1)}a.mon(b,{load:a.onStoreLoad,scope:a});a.storeRelayers=a.relayEvents(b,['filterchange','groupchange']);if(!a.reconfiguring&&a.hasListeners.storechange&&b!==c){a.fireEvent('storechange',a,b,c)}}else {a.unbindStore()}},unbindStore:function(){var a=this,b=a.store,c;if(b){b.trackStateChanges=!1;a.store=null;a.mun(b,{load:a.onStoreLoad,scope:a});Ext.destroy(a.storeRelayers);c=a.view;if(c.store){c.bindStore(null)}else {if(!b.destroyed&&b.autoDestroy){b.destroy()}}if(!a.reconfiguring&&a.hasListeners.storechange){a.fireEvent('storechange',a,null,b)}}},setColumns:function(a){if(a.length||this.getColumnManager().getColumns().length){this.reconfigure(undefined,a)}},setStore:function(b){var a=this;a.reconfigure(b,undefined,!0);if(a.isVisible(!0)){if(b&&a.autoLoad&&!b.isEmptyStore&&!(b.loading||b.isLoaded())){b.load()}}else {if(!a.globalShowListener){a.globalShowListener=Ext.GlobalEvents.on({show:a.onGlobalShow,scope:a,destroyable:!0})}}},onGlobalShow:function(c){var a=this,b=a.store;if(c===a||c.isAncestor(a)&&a.isVisible(!0)){if(b&&a.autoLoad&&!b.isEmptyStore&&!(b.loading||b.isLoaded())){b.load()}Ext.destroy(a.globalShowListener)}},reconfigure:function(b,c,m,r){var a=this,d=a.store,g=a.headerCt,o=a.lockable,n=g?g.items.getRange():a.columns,e=a.getView(),p,q,k,f,j,i,h,l;if(arguments.length===1&&Ext.isArray(b)){c=b;b=null}if(c){c=Ext.Array.slice(c)}a.reconfiguring=!0;if(b){b=Ext.StoreManager.lookup(b);f=b&&b!==d}else {if(m){b=Ext.StoreManager.lookup('ext-empty-store');f=b!==d}}a.fireEvent('beforereconfigure',a,b,c,d,n);Ext.suspendLayouts();if(a.rendered&&a.layoutCounter&&(p=a.getScrollable())){p.scrollTo(0,0)}if(o){a.reconfigureLockable(b,c,m)}else {q=e.blockRefresh;e.blockRefresh=!0;l=e.saveFocusState();if(f){a.unbindStore();a.bindStore(b)}if(c){delete a.scrollXPos;g.removeAll();g.add(c);j=!0}g.onOwnerGridReconfigure(f,j);k=e.refreshCounter}if(a.stateful&&r!==!1){h=a.getStateId();i=h&&Ext.state.Manager.get(h);if(i){a.applyState(i)}}Ext.resumeLayouts(!0);a.reconfiguring=!1;if(o){a.afterReconfigureLockable()}else {e.blockRefresh=q;if(e.refreshCounter===k){e.refreshView();l()}}a.fireEvent('reconfigure',a,b,c,d,n);delete a.reconfiguring;if(f){a.fireEvent('storechange',a,b,d);if(!d.destroyed&&d.autoDestroy){d.destroy()}}},doDestroy:function(){var a=this,b=a.scrollTask,c=a.view;if(c){c.destroying=!0}if(a.lockable){a.destroyLockable()}if(b){b.cancel()}Ext.destroy(a.rowContextParent,a.plugins,a.focusEnterLeaveListeners,a.freeRowContents,Ext.Object.getValues(a.liveRowContexts),a.lhsMarker,a.rhsMarker);a.callParent();a.unbindStore()},getElementHeight:function(b){var a=this.preciseHeight&&b.getBoundingClientRect();return a?a.height||a.bottom-a.top:b.offsetHeight},getElementSize:function(b){var a=this.preciseHeight&&b.getBoundingClientRect();return {width:a?a.width||a.right-a.left:b.offsetWidth,height:a?a.height||a.bottom-a.top:b.offsetHeight}},privates:{initFocusableElement:function(){},doEnsureVisible:function(b,e){if(this.lockable){return this.ensureLockedVisible(b,e)}if(typeof b!=='number'&&!b.isEntity){b=this.store.getById(b)}var a=this,c=a.getView(),f=c.getNode(b),r=a.ownerGrid.lockable,g,n,k,j,m,l,h,d,q,p,o,i;if(e){g=e.callback;n=e.scope;k=e.animate;j=e.highlight;m=e.select;l=e.focus;d=e.column}if(a.deferredEnsureVisible){a.deferredEnsureVisible.destroy()}if(!c.componentLayoutCounter){a.deferredEnsureVisible=c.on({resize:a.doEnsureVisible,args:Ext.Array.slice(arguments),scope:a,single:!0,destroyable:!0});return}if(typeof d==='number'){d=a.ownerGrid.getVisibleColumnManager().getColumns()[d]}if(f){if(!b.isEntity){b=c.getRecord(f)}h=r?a.ownerGrid.getScrollable():c.getScrollable();if(g||m||l){o=function(){p=(new Ext.grid.CellContext(c)).setPosition(b,d||0);if(m){c.getSelectionModel().selectByPosition(p)}if(l){c.getNavigationModel().setPosition(p)}Ext.callback(g,n||a,[!0,b,f])}}if(h){if(d){q=Ext.fly(f).selectNode(d.getCellSelector())}if(r&&d){h.ensureVisible(f,{x:!1});i=c.getScrollable().ensureVisible(q||f,{animation:k,highlight:j})}else {i=h.ensureVisible(q||f,{animation:k,highlight:j,x:!!d})}if(i&&o){i.then(o)}}}else {if(c.bufferedRenderer){c.bufferedRenderer.scrollTo(b,{animate:k,highlight:j,select:m,focus:l,column:d,callback:function(f,d,c){Ext.callback(g,n||a,[!0,d,c])}})}else {Ext.callback(g,n||a,[!1,null])}}},getFocusEl:function(){return this.getView().getFocusEl()},getRowContextViewModelParent:function(){var a=this.lookupViewModel()||this.rowContextParent;if(!a){this.rowContextParent=a=new Ext.app.ViewModel()}return a},handleWidgetViewChange:function(f,e){var d=this.liveRowContexts,b=this.freeRowContexts,g=b&&b.length,a,c;for(c in d){d[c].handleWidgetViewChange(f,e)}for(a=0;a<g;a++){b[a].handleWidgetViewChange(f,e)}},initInheritedState:function(a,b){a.inLockedGrid=!!this.isLocked;this.callParent([a,b])},setActionableMode:function(b,c){var a=this.ownerGrid;if(!a.destroying&&a.view.setActionableMode(b,c)!==!1){a.fireEvent('actionablemodechange',b);a[b?'addCls':'removeCls'](a.actionableModeCls);return !0}},getOverflowStyle:function(){this.scrollFlags=this._scrollFlags['false']['false'];return {overflowX:'hidden',overflowY:'hidden'}},getOverflowEl:function(){return null},shouldAutoHideHeaders:function(){var f=this,d=f.headerCt.items.items,e=d.length,c=!!e,a,b;for(b=0;c&&b<e;b++){a=d[b];if(!a.isEmptyText(a.text,!0)||a.columns||a.isGroupHeader&&a.items.items.length){c=!1}}return c},syncHeaderVisibility:function(){var a=this,c=a.headerCt,b=a.hideHeaders,d,e;if(a.lockable){a.syncLockableHeaderVisibility();return}if(b==null){b=a.shouldAutoHideHeaders()}e=c.height===0;if(!c.rendered||b!==e){c.setHeight(b?0:null);c.hiddenHeaders=b;c.toggleCls(a.hiddenHeaderCtCls,b);a.toggleCls(a.hiddenHeaderCls,b);if(!b){c.setScrollable({x:!1,y:!1});d=a.view.getScrollable();if(d){c.getScrollable().addPartner(d,'x')}}}}}});Ext.define('Ext.theme.neptune.panel.Table',{override:'Ext.panel.Table',lockableBodyBorder:!0,initComponent:function(){var a=this;a.callParent();if(!a.hasOwnProperty('bodyBorder')&&!a.hideHeaders&&(a.lockableBodyBorder||!a.lockable)){a.bodyBorder=!0}}});Ext.define('Ext.grid.ColumnLayout',{extend:Ext.layout.container.HBox,alias:'layout.gridcolumn',type:'gridcolumn',firstHeaderCls:Ext.baseCSSPrefix+'column-header-first',lastHeaderCls:Ext.baseCSSPrefix+'column-header-last',initLayout:function(){this.callParent();if(this.scrollbarWidth===undefined){this.self.prototype.scrollbarWidth=Ext.scrollbar.width()}},beginLayout:function(d){var a=this,j=a.owner,e=a.firstHeaderCls,f=a.lastHeaderCls,h=[e,f],i=a.getVisibleItems(),g=i.length,c,b;a.callParent([d]);for(c=0;c<g;c++){b=i[c];if(g===1){b.addCls(h)}else {if(c===0){b.addCls(e);b.removeCls(f)}else {if(c===g-1){b.removeCls(e);b.addCls(f)}else {b.removeCls(h)}}}}a.scrollbarWidth=0;if(j.isRootHeader&&!j.grid.isLocked){a.determineScrollbarWidth(d)}if(!a.scrollbarWidth){d.manageScrollbar=!1}},moveItemBefore:function(b,a){var c=b.ownerCt,d=a&&a.nextSibling();if(b!==a&&c){c.remove(b,{destroy:!1,detach:!1});if(a&&a.destroyed){a=d}}return this.callParent([b,a])},determineScrollbarWidth:function(f){var e=this,g=e.owner,a=g.grid,b=a.reserveScrollbar,d=a.view.getScrollable(),c=!b&&d&&d.getY();f.manageScrollbar=c;if(!a.ownerGrid.collapsed&&(b||c)){delete e.scrollbarWidth}},calculate:function(a){var b=this,l=b.owner,m=l.grid,i=a.viewContext,g=a.state,o=a.context,f,c,j,n,e,d,k,h;b.callParent([a]);if(m&&l.isRootHeader&&g.parallelDone){f=i.lockingPartnerContext;if(m.forceFit&&!g.reflexed){if(b.convertWidthsToFlexes(a)){b.cacheFlexes(a);b.done=!1;a.invalidate({state:{reflexed:!0,scrollbarAdjustment:b.getScrollbarAdjustment(a)}});return}}if((c=g.columnsChanged)===undefined){j=a.target.getVisibleGridColumns();c=!1;for(e=0,n=j.length;e<n;e++){d=o.getCmp(j[e]);if(!d.lastBox||d.props.width!==d.lastBox.width){(c||(c=[]))[e]=d}}g.columnsChanged=c;a.setProp('columnsChanged',c)}if(a.manageScrollbar){k=b.getScrollbarAdjustment(a);if(k){h=i.getProp('viewOverflowY');if(h===undefined){b.done=!1;return}if(!h){if(f){f.invalidate();f.headerContext.invalidate()}i.invalidate();a.invalidate({state:{scrollbarAdjustment:0}})}}}}},finishedLayout:function(a){this.callParent([a]);if(this.owner.ariaRole==='rowgroup'){this.innerCt.dom.setAttribute('role','row')}a.props.columnsChanged=null},convertWidthsToFlexes:function(d){var i=this,f=0,h=i.sizeModels.calculated,e,g,c,a,b;e=d.childItems;g=e.length;for(c=0;c<g;c++){a=e[c];b=a.target;f+=a.props.width;if(!(b.fixed||b.resizable===!1)){b.flex=d.childItems[c].flex=a.props.width;b.width=null;a.widthModel=h}}return f!==d.props.width},getScrollbarAdjustment:function(b){var e=this,c=b.state,d=e.owner.grid,a=c.scrollbarAdjustment;if(a===undefined){a=0;if(d.reserveScrollbar||b.manageScrollbar&&!d.ownerGrid.getSizeModel().height.shrinkWrap){a=e.scrollbarWidth}c.scrollbarAdjustment=a}return a},getContainerSize:function(a){var j=this,e,d,i,h,g,c,b,f;if(j.owner.isRootHeader){f=j.callParent([a]);if(f.gotWidth){f.width-=j.getScrollbarAdjustment(a)}}else {i=a.paddingContext.getPaddingInfo();e=d=0;if(!a.widthModel.shrinkWrap){++d;c=a.getProp('innerWidth');h=typeof c==='number';if(h){++e;c-=i.width;if(c<0){c=0}}}if(!a.heightModel.shrinkWrap){++d;b=a.getProp('innerHeight');g=typeof b==='number';if(g){++e;b-=i.height;if(b<0){b=0}}}return {width:c,height:b,needed:d,got:e,gotAll:e===d,gotWidth:h,gotHeight:g}}return f},publishInnerCtSize:function(a){var c=this,d=c.owner,e=a.peek('contentWidth'),b=0;if(e!=null&&d.isRootHeader){b=-a.state.scrollbarAdjustment}return c.callParent([a,b])},roundFlex:function(a){return Math.round(a)}});Ext.define('Ext.grid.ColumnManager',{alternateClassName:['Ext.grid.ColumnModel'],columns:null,constructor:function(b,c,a){this.headerCt=c;if(a){this.secondHeaderCt=a}this.visibleOnly=!!b},getColumns:function(){if(!this.columns){this.cacheColumns()}return this.columns},hasVariableRowHeight:function(){var a=this,c=a.getColumns(),d=c.length,b;if(a.variableRowHeight==null){a.variableRowHeight=!1;for(b=0;!a.variableRowHeight&&b<d;b++){a.variableRowHeight=!!c[b].variableRowHeight}}return a.variableRowHeight},getHeaderIndex:function(a){if(a.isGroupHeader){a=this.getHeaderColumns(a)[0]}return Ext.Array.indexOf(this.getColumns(),a)},getHeaderAtIndex:function(b){var a=this.getColumns(),c=a[b];return c||null},getPreviousSibling:function(c){var a=this.getHeaderIndex(c),b=null;if(a>0){b=this.getColumns()[a-1]}return b},getNextSibling:function(c){var a=this.getHeaderIndex(c),b;if(a!==-1){b=this.getColumns()[a+1]}return b||null},getFirst:function(){var a=this.getColumns();return a.length>0?a[0]:null},getLast:function(){var a=this.getColumns(),b=a.length;return b>0?a[b-1]:null},getHeaderByDataIndex:function(c){var d=this.getColumns(),e=d.length,a,b;if(Ext.isEmpty(c)){return null}for(a=0;a<e;++a){b=d[a];if(b.dataIndex===c){return b}}return null},getHeaderById:function(e){var c=this.getColumns(),d=c.length,a,b;for(a=0;a<d;++a){b=c[a];if(b.getItemId()===e){return b}}return null},getVisibleHeaderClosestToIndex:function(b){var a=this.getHeaderAtIndex(b);if(a&&a.hidden){a=a.next(':not([hidden])')||a.prev(':not([hidden])')}return a},cacheColumns:function(){var a=this.getHeaderColumns(this.headerCt),b=this.secondHeaderCt;if(b){a=a.concat(this.getHeaderColumns(b))}this.columns=a},getHeaderColumns:function(a){var b=this.visibleOnly?a.getVisibleGridColumns():a.getGridColumns();return Ext.Array.clone(b)},invalidate:function(){var a=this.rootColumns;this.columns=this.variableRowHeight=null;if(a){a.invalidate()}},destroy:function(){this.columns=this.rootColumns=null;this.callParent()}},function(){this.createAlias('indexOf','getHeaderIndex')});Ext.define('Ext.grid.NavigationModel',{extend:Ext.view.NavigationModel,alias:'view.navigation.grid',focusCls:Ext.baseCSSPrefix+'grid-item-focused',constructor:function(){var a=this;a.onKeyPageDown=Ext.Function.createThrottled(a.onKeyPageDown,120,a);a.onKeyPageUp=Ext.Function.createThrottled(a.onKeyPageUp,120,a);a.callParent()},getViewListeners:function(){var a=this;return {focusmove:{element:'el',fn:a.onFocusMove},containermousedown:a.onContainerMouseDown,cellmousedown:a.onCellMouseDown,cellclick:a.onCellClick,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemClick,scope:a}},initKeyNav:function(c){var a=this,b;if(!a.keyNav){a.keyNav=[];a.position=new Ext.grid.CellContext(c)}b=new Ext.util.KeyNav({target:c,ignoreInputFields:!0,eventName:Ext.supports.SpecialKeyDownRepeat?'itemkeydown':'itemkeypress',defaultEventAction:'stopEvent',processEvent:a.processViewEvent,up:a.onKeyUp,down:a.onKeyDown,right:a.onKeyRight,left:a.onKeyLeft,pageDown:a.onKeyPageDown,pageUp:a.onKeyPageUp,home:a.onKeyHome,end:a.onKeyEnd,space:a.onKeySpace,enter:a.onKeyEnter,esc:a.onKeyEsc,113:{ctrl:!1,shift:!1,alt:!1,handler:a.onKeyF2},tab:a.onKeyTab,A:{ctrl:!0,handler:a.onSelectAllKeyPress},scope:a});a.keyNav.push(b);a.onKeyNavCreate(b)},onKeyNavCreate:Ext.emptyFn,addKeyBindings:function(b){var c=this.keyNav.length,a;for(a=0;a<c;a++){this.keyNav[a].addBindings(b)}},enable:function(){var b=this.keyNav.length,a;for(a=0;a<b;a++){this.keyNav[a].enable()}this.disabled=!1},disable:function(){var b=this.keyNav.length,a;for(a=0;a<b;a++){this.keyNav[a].disable()}this.disabled=!0},processViewEvent:function(c,e,f,d,a){var b=a.getKey();if(c.actionableMode){this.map.ignoreInputFields=!1;if(b===a.TAB||b===a.ESC||b===a.F2){return a}}else {this.map.ignoreInputFields=!0;return b===a.TAB?null:a}},onContainerMouseDown:function(a,b){var e=this,d=new Ext.grid.CellContext(a),f,c;e.callParent([a,b]);f=a.lastFocused;c=a.actionableMode&&a.actionPosition||f;if(!c||f==='scrollbar'){return}d.setPosition(c.record,c.column);b.position=d;e.attachClosestCell(b);if(!e.position.isEqual(d)){e.setPosition(d,null,b)}},onCellMouseDown:function(b,e,h,i,j,g,a){var d=Ext.Component.from(a,e),c=a.getTarget(this.isFocusableEl,e),f;if(b.actionableMode){if(!c){c=(f=Ext.ComponentManager.getActiveComponent())&&f!==b&&f.owns(a)}if(c){b.setActionableMode(!0,a.position)}else {b.setActionableMode(!1,a.position)}return}if(a.pointerType!=='touch'){if(a.position.column.cellFocusable!==!1){if(c){if(!b.containsFocus){b.containsFocus=!0;b.toggleChildrenTabbability(!1)}if(b.setActionableMode(!0,a.position)!==!1){c.focus()}}else {e.focus()}if(a.button===2){this.fireNavigateEvent(a)}if(d&&d.isFocusable&&d.isFocusable()){b.setActionableMode(!0,a.position);d.focus()}}else {a.preventDefault(!0)}}},onCellClick:function(c,f,h,i,j,g,a){var b=this,d=Ext.Component.from(a,f),e=d&&d.isFocusable&&d.isFocusable();if(!Ext.isIE10m&&!c.el.contains(Ext.Element.getActiveElement())&&a.pointerType!=='touch'){return}if(c.actionableMode){if(!a.position.isEqual(c.actionPosition)){if(!e){c.setActionableMode(!1,a.position)}}b.fireEvent('navigate',{view:c,navigationModel:b,keyEvent:a,previousPosition:b.previousPosition,previousRecordIndex:b.previousRecordIndex,previousRecord:b.previousRecord,previousItem:b.previousItem,previousCell:b.previousCell,previousColumnIndex:b.previousColumnIndex,previousColumn:b.previousColumn,position:a.position,recordIndex:a.position.rowIdx,record:a.position.record,selectionStart:b.selectionStart,item:a.item,cell:a.position.cellElement,columnIndex:a.position.colIdx,column:a.position.column})}else {if(b.position.isEqual(a.position)||e){if(Ext.isIE10m&&!b.record){return}b.fireNavigateEvent(a)}else {if(a.position.column.cellFocusable!==!1){b.setPosition(a.position,null,a)}else {a.preventDefault()}}}},onFocusMove:function(b){var a=Ext.Component.from(b.delegatedTarget,null,'tableview'),f=b.target,g=Ext.fly(f).is(a.cellSelector),e,d,c;if(a){if(b.toElement===a.el.dom){a.actionableMode=!1;return a.onFocusEnter(b)}if(!a.actionableMode&&g){e=a.getRecord(f);d=a.getHeaderByCell(f);if(e&&d){c=(new Ext.grid.CellContext(a)).setPosition(e,d);if(!c.isEqual(this.position)){this.setPosition(c)}}}else {if((a.actionableMode||a.activating)&&!g&&a.el.contains(b.target)&&a.el.dom!==b.target){a.ownerGrid.fireEvent('cellactivate',a.ownerGrid,a.actionPosition)}}}},onItemMouseDown:function(d,e,g,f,a){var c=this,b;if(!a.position.cellElement&&a.pointerType!=='touch'){if(!d.enableTextSelection){a.preventDefault()}c.attachClosestCell(a);if(!c.position.isEqual(a.position)){c.setPosition(a.position,null,a)}b=d.getScrollable();if(b){b.restoreState()}}},onItemClick:function(e,b,d,c,a){if(!a.position.cellElement){this.attachClosestCell(a);if(a.pointerType==='touch'){this.setPosition(a.position,null,a)}else {this.fireNavigateEvent(a)}}},attachClosestCell:function(f){var a=f.position,h=a.cellElement,e,c,g,b,d;if(!h){e=f.getX();c=a.view.getVisibleColumnManager().getColumns();g=c.length;for(b=0;b<g;b++){d=c[b].getBox();if(e>=d.left&&e<d.right){a.setColumn(c[b]);a.rowElement=a.getRow(!0);a.cellElement=a.getCell(!0);return}}}},deferSetPosition:function(g,e,d,f,c,b){var a=this.view.getFocusTask();a.delay(g,this.setPosition,this,[e,d,f,c,b]);return a},setPosition:function(c,h,l,r,q){var a=this,k=c==null&&h==null,p=a.record==null&&a.recordIndex==null&&a.item==null,b,n,o,i,m,f,e,d,g,j;if(c&&c.isCellContext){b=c.view}else {if(l&&l.view){b=l.view}else {if(a.lastFocused){b=a.lastFocused.view}else {b=a.view}}}b.cancelFocusTask();if(b.destroyed||!b.refreshCounter||!b.ownerCt||k&&p||!b.all.getCount()){return}o=b.getSelectionModel();i=b.dataSource;m=b.getVisibleColumnManager();j=m.getColumns();if(c&&c.isCellContext){d=c.record;f=c.rowIdx;e=Math.min(c.colIdx,j.length-1);g=j[e];if(i.indexOf(d)===-1){n=b.getScrollable();a.recordIndex=-1;if(n&&n.getPosition().y>=n.getMaxPosition().y-b.all.last(!0).offsetHeight){c.rowIdx--}f=Math.min(c.rowIdx,i.getCount()-1);d=i.getAt(f)}}else {if(k){d=f=null}else {if(h==null){h=a.lastFocused?a.lastFocused.column:0}if(typeof c==='number'){f=Math.max(Math.min(c,i.getCount()-1),0);d=i.getAt(c)}else {if(c.isEntity){d=c;f=i.indexOf(d)}else {if(c.tagName){d=b.getRecord(c);f=i.indexOf(d);if(f===-1){d=null}}else {if(p){return}k=!0;d=f=null}}}}if(d){if(f===-1){a.recordIndex=-1;d=i.getAt(0);f=0;h=null}if(h==null){if(!(g=a.column)){e=0;g=j[0]}}else {if(typeof h==='number'){g=j[h];e=h}else {g=h;e=m.indexOf(h)}}}else {k=!0;g=e=null}}if(g&&m.indexOf(g)===-1){if(e===-1){e=0}else {e=Math.min(e,j.length-1)}g=j[e]}if(b.actionableMode&&!k){return b.ownerGrid.setActionableMode(!1,(new Ext.grid.CellContext(b)).setPosition(d,g))}if(f===a.recordIndex&&e===a.columnIndex&&b===a.position.view){return a.focusPosition(a.position)}if(a.cell){a.cell.removeCls(a.focusCls)}a.previousRecordIndex=a.recordIndex;a.previousRecord=a.record;a.previousItem=a.item;a.previousCell=a.cell;a.previousColumn=a.column;a.previousColumnIndex=a.columnIndex;a.previousPosition=a.position.clone();a.selectionStart=o.selectionStart;a.position.setAll(b,a.recordIndex=f,a.columnIndex=e,a.record=d,a.column=g);if(k){a.item=a.cell=null}else {a.focusPosition(a.position)}if(!r){o.fireEvent('focuschange',o,a.previousRecord,a.record);b.fireEvent('rowfocus',a.record,a.item,a.recordIndex);b.fireEvent('cellfocus',a.record,a.cell,a.position)}if(l&&!q&&a.cell!==a.previousCell){a.fireNavigateEvent(l)}},focusPosition:function(b){var a=this,c,d,e;a.item=a.cell=null;if(b&&b.record&&b.column){c=b.view;if(b.rowElement){d=a.item=b.rowElement}else {d=c.getRowByRecord(b.record)}if(d){a.cell=b.cellElement||Ext.fly(d).down(b.column.getCellSelector(),!0);if(a.cell){a.cell=new Ext.dom.Fly(a.cell);c.lastFocused=a.lastFocused=a.position.clone();e=c.getScrollable();if(e){e.ensureVisible(a.cell)}a.focusItem(a.cell);c.focusEl=a.cell}else {a.position.setAll();a.record=a.column=a.recordIndex=a.columnIndex=null}}else {d=c.dataSource.indexOf(b.record);a.position.setAll();a.record=a.column=a.recordIndex=a.columnIndex=null;if(d!==-1&&c.bufferedRenderer){a.lastKeyEvent=null;c.bufferedRenderer.scrollTo(d,!1,a.afterBufferedScrollTo,a)}}}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getCell:function(){return this.cell},getPosition:function(f){var c=this,a=c.position,b,e,d;if(a.record&&a.column){if(f){return a}e=a.view;d=e.dataSource;b=d.indexOf(a.record);if(b===-1){b=a.rowIdx;if(!(a.record=d.getAt(b))){b=-1}}if(b===-1||e.getVisibleColumnManager().indexOf(a.column)===-1){a.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null}else {return a}}return null},getLastFocused:function(){var c=this,b,a=c.lastFocused;if(a&&a.record&&a.column){b=a.view;if(b.dataSource.indexOf(a.record)!==-1&&b.getVisibleColumnManager().indexOf(a.column)!==-1){return a}}},onKeyTab:function(a){var d=!a.shiftKey,f=a.position.view,e,b,c;e=f.findFocusPosition(a.target,a.position,d,a);b=e.target;c=e.position;if(b){this.actionPosition=c.view.actionPosition=c;Ext.fly(b).focus()}else {f.onRowExit(a,a.item,a.item[d?'nextSibling':'previousSibling'],d)}a.preventDefault()},onKeyUp:function(b){var c=b.view.walkRecs(b.record,-1),a=this.getPosition();if(c){a.setRow(c);if(!a.getCell(!0)){a.navigate(-1)}this.setPosition(a,null,b)}},onKeyDown:function(a){var c=a.record.isExpandingOrCollapsing?null:a.view.walkRecs(a.record,1),b=this.getPosition();if(c){b.setRow(c);if(!b.getCell(!0)){b.navigate(-1)}this.setPosition(b,null,a)}},onKeyRight:function(b){var a=this.move('right',b);if(a){this.setPosition(a,null,b)}},onKeyLeft:function(b){var a=this.move('left',b);if(a){this.setPosition(a,null,b)}},onKeyEnter:function(a){var b=['cellclick',a.view,a.position.cellElement,a.position.colIdx,a.record,a.position.rowElement,a.recordIndex,a],c=a.position.getCell(!0);if(c){if(!c.querySelector('[tabIndex="-1"]')){a.stopEvent();a.view.fireEvent.apply(a.view,b);b[0]='celldblclick';a.view.fireEvent.apply(a.view,b)}if(!this.view.actionableMode){this.view.ownerGrid.setActionableMode(!0,this.getPosition())}}},onKeyF2:function(c){var b=this.view.ownerGrid,a=b.actionableMode;b.setActionableMode(!a,a?null:this.getPosition())},onKeyEsc:function(b){var a=this.view.ownerGrid;if(a.actionableMode){a.setActionableMode(!1)}else {return !0}},move:function(c,e){var d=this,b=d.getPosition(),a=b,f=e.shiftKey&&(c==='right'||c==='left');if(b&&b.record){while(a){a=a.view.walkCells(a,c,f?d.vetoRowChange:null,d);if(a&&a.getCell(!0)&&a.column.cellFocusable!==!1){return a}}}},vetoRowChange:function(a){return this.getPosition().record===a.record},onKeyPageDown:function(a){var b=this,c=Ext.Component.fromElement(a.target,undefined,'tableview'),d=b.getRowsVisible(),f,e;if(d){if(c.bufferedRenderer){f=Math.min(a.recordIndex+d,c.dataSource.getCount()-1);b.lastKeyEvent=a;c.bufferedRenderer.scrollTo(f,!1,b.afterBufferedScrollTo,b)}else {e=c.walkRecs(a.record,d);b.setPosition(e,null,a)}}},onKeyPageUp:function(a){var b=this,d=Ext.Component.fromElement(a.target,undefined,'tableview'),c=b.getRowsVisible(),f,e;if(c){if(d.bufferedRenderer){f=Math.max(a.recordIndex-c,0);b.lastKeyEvent=a;d.bufferedRenderer.scrollTo(f,!1,b.afterBufferedScrollTo,b)}else {e=d.walkRecs(a.record,-c);b.setPosition(e,null,a)}}},onKeyHome:function(a){var b=this,c=a.view;if(a.altKey){if(c.bufferedRenderer){b.lastKeyEvent=a;c.bufferedRenderer.scrollTo(0,!1,b.afterBufferedScrollTo,b)}else {b.setPosition(c.walkRecs(a.record,-c.dataSource.indexOf(a.record)),null,a)}}else {b.setPosition(a.record,0,a)}},afterBufferedScrollTo:function(b,a){this.setPosition(a,null,this.lastKeyEvent,null,!this.lastKeyEvent)},onKeyEnd:function(a){var c=this,b=a.view;if(a.altKey){if(b.bufferedRenderer){c.lastKeyEvent=a;b.bufferedRenderer.scrollTo(b.store.getCount()-1,!1,c.afterBufferedScrollTo,c)}else {c.setPosition(b.walkRecs(a.record,b.dataSource.getCount()-1-b.dataSource.indexOf(a.record)),null,a)}}else {c.setPosition(a.record,a.view.getVisibleColumnManager().getColumns().length-1,a)}},getRowsVisible:function(){var b=!1,e=this.view.ownerGrid.getView(),d=e.all.first(),c,a;if(d){c=d.getHeight();a=e.el.getHeight();b=Math.floor(a/c)}return b},fireNavigateEvent:function(b){var a=this;a.fireEvent('navigate',{view:a.position.view,navigationModel:a,keyEvent:b||new Ext.event.Event({}),previousPosition:a.previousPosition,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,previousCell:a.previousCell,previousColumnIndex:a.previousColumnIndex,previousColumn:a.previousColumn,position:a.position,recordIndex:a.recordIndex,record:a.record,selectionStart:a.selectionStart,item:a.item,cell:a.cell,columnIndex:a.columnIndex,column:a.column})},isFocusableEl:function(a){return Ext.fly(a).isFocusable()}});Ext.define('Ext.view.TableLayout',{extend:Ext.layout.component.Auto,alias:'layout.tableview',type:'tableview',beginLayout:function(a){var b=this,i=b.owner,g=i.ownerGrid,d=i.lockingPartner,c=a.lockingPartnerContext,h=a.context,f=g.getScrollable(),e;e=d&&d.grid.isVisible()&&!(d.grid.collapsed||d.grid.floatedFromCollapse);a.doSyncRowHeights=e&&(g.syncRowHeight||g.syncRowHeightOnNextLayout);a.allowScrollX=f&&f.config&&f.config.x;if(!b.columnFlusherId){b.columnFlusherId=b.id+'-columns';b.rowHeightFlusherId=b.id+'-rows'}b.callParent([a]);if(e){if(!c&&d.componentLayout.isRunning()){(c=a.lockingPartnerContext=h.getCmp(d)).lockingPartnerContext=a;if(!c.lockingPartnerContext){c.lockingPartnerContext=a}}if(a.doSyncRowHeights){if(c&&!c.rowHeightSynchronizer){c.rowHeightSynchronizer=c.target.syncRowHeightBegin()}a.rowHeightSynchronizer=b.owner.syncRowHeightBegin()}}(a.headerContext=h.getCmp(b.headerCt)).viewContext=a},beginLayoutCycle:function(a,b){this.callParent([a,b]);if(a.syncRowHeights){a.target.syncRowHeightClear(a.rowHeightSynchronizer);a.syncRowHeights=!1}},calculate:function(b){var a=this,r=b.context,s=b.lockingPartnerContext,t=b.headerContext,m=b.ownerCtContext,c=b.state,e=a.owner,q=e.body.dom,l=t.getProp('columnsChanged'),p,n,o,d,j,f,i,h,g,k;if(!e.all.getCount()&&(!q||!e.body.child('table',!0))){b.setProp('viewOverflowY',!1);a.callParent([b]);return}if(a.calcCount===1&&a.owner.bufferedRenderer){a.owner.bufferedRenderer.beforeTableLayout(b)}if(l===undefined){a.done=!1;return}if(l){if(!(n=c.columnFlusher)){r.queueFlush(c.columnFlusher=n={ownerContext:b,columnsChanged:l,layout:a,id:a.columnFlusherId,flush:a.flushColumnWidths},!0)}if(!n.flushed){a.done=!1;return}}if(b.doSyncRowHeights){if(!(j=c.rowHeightFlusher)){if(!(d=c.rowHeights)){c.rowHeights=d=b.rowHeightSynchronizer;a.owner.syncRowHeightMeasure(d);b.setProp('rowHeights',d)}if(!(o=s.getProp('rowHeights'))){a.done=!1;return}r.queueFlush(c.rowHeightFlusher=j={ownerContext:b,synchronizer:d,otherSynchronizer:o,layout:a,id:a.rowHeightFlusherId,flush:a.flushRowHeights},!0)}if(!j.flushed){a.done=!1;return}}a.callParent([b]);if(!b.heightModel.shrinkWrap){if(!m.heightModel.shrinkWrap){p=!0;i=m.target.layout.getContainerSize(m);if(!i.gotHeight){a.done=!1;return}f=q.offsetHeight;if(f>i.height){h=!0}}}k=Ext.scrollbar.height();if(a.done&&b.allowScrollX&&k){if(!e.lockingPartner){if(e.isAutoTree){g=!0}else {g=!!b.headerContext.state.boxPlan.tooNarrow}b.setProp('overflowX',g)}if(g&&f&&p){h=f+k>i.height}}if(a.done||h!=null){b.setProp('viewOverflowY',!!h)}},measureContentHeight:function(e){var d=this.owner,b=d.body.dom,c=d.emptyEl,a=0;if(c){a+=c.offsetHeight}if(b){a+=b.offsetHeight}if(e.headerContext.state.boxPlan.tooNarrow){a+=Ext.scrollbar.height()}return a},flushColumnWidths:function(){var b=this,i=b.layout,e=b.ownerContext,g=b.columnsChanged,h=e.target,j=g.length,a,d,c,f;if(e.state.columnFlusher!==b){return}for(d=0;d<j;d++){if(!(a=g[d])){continue}c=a.props.width;h.body.select(h.getColumnSizerSelector(a.target)).setWidth(c);if(a.target.onCellsResized){a.target.onCellsResized(c)}f=a.lastBox;if(f){f.width=c}}b.flushed=!0;if(!i.pending){e.context.queueLayout(i)}},flushRowHeights:function(){var a=this,c=a.layout,b=a.ownerContext;if(b.state.rowHeightFlusher!==a){return}b.target.syncRowHeightFinish(a.synchronizer,a.otherSynchronizer);a.flushed=!0;b.syncRowHeights=!0;if(!c.pending){b.context.queueLayout(c)}},finishedLayout:function(c){var b=this,f=b.owner.ownerGrid,e=Ext.fly(b.owner.getNodeContainer()),d=this.owner.getScrollable(),a;b.callParent([c]);if(e){e.setWidth(c.headerContext.props.contentWidth)}a=b.owner.bufferedRenderer;if(a){a.afterTableLayout(c)}if(f){f.syncRowHeightOnNextLayout=!1}if(d&&!d.isScrolling){if(a){if(a.nextRefreshStartIndex===0||b.owner.hasVariableRowHeight()){return}}d.restoreState()}},getLayoutItems:function(){return this.owner.getRefItems()},isValidParent:function(){return !0}});Ext.define('Ext.grid.locking.RowSynchronizer',{constructor:function(c,d){var b=this,a;b.view=c;b.rowEl=d;b.els={};b.add('data',c.rowSelector);for(a=c.rowTpl;a;a=a.nextTpl){if(a.beginRowSync){a.beginRowSync(b)}}},add:function(c,b){var a=Ext.fly(this.rowEl).down(b,!0);if(a){this.els[c]={el:a}}},finish:function(i){var d=this,f=d.els,j=i.els,e,h=0,g=0,b,c,a;for(c in f){e=j[c];a=e?e.height:0;b=a-f[c].height;if(b>0){h+=b;Ext.fly(f[c].el).setHeight(a)}else {g-=b}}a=i.rowHeight+g;if(Ext.isIE9&&d.view.ownerGrid.rowLines){a--}if(d.rowHeight+h<a){Ext.fly(d.rowEl).setHeight(a)}},measure:function(){var a=this,c=a.els,d=a.view.ownerGrid,b;a.rowHeight=d.getElementHeight(a.rowEl);for(b in c){c[b].height=d.getElementHeight(c[b].el)}},reset:function(){var b=this.els,a;this.rowEl.style.height='';for(a in b){b[a].el.style.height=''}}});Ext.define('Ext.view.NodeCache',{statics:{range:document.createRange&&document.createRange()},constructor:function(a){this.view=a;this.clear();this.el=new Ext.dom.Fly()},destroy:function(){var a=this;if(!a.destroyed){a.el.destroy();a.el=a.view=null;a.destroyed=!0}a.callParent()},clear:function(e){var a=this,b=a.elements,c=a.statics().range,d;if(a.count&&e){if(c&&Ext.getBody().contains(b[0])){c.setStartBefore(b[a.startIndex]);c.setEndAfter(b[a.endIndex]);c.deleteContents()}else {for(d in b){Ext.removeNode(b[d])}}}a.elements={};a.count=a.startIndex=0;a.endIndex=-1},fill:function(f,a,c){var e=this,g=e.elements={},b,d;c=c||0;if(!a){a=0}for(b=0,d=f.length-c;b<d;b++){g[a+b]=f[b+c]}e.startIndex=a;e.endIndex=a+d-1;e.count=d;return this},insert:function(c,f){var b=this,e=b.elements,a,d=f.length;if(b.count){if(c<b.count){for(a=b.endIndex+d;a>=c+d;a--){e[a]=e[a-d];e[a].setAttribute('data-recordIndex',a)}}b.endIndex=b.endIndex+d}else {b.startIndex=c;b.endIndex=c+d-1}for(a=0;a<d;a++,c++){e[c]=f[a];e[c].setAttribute('data-recordIndex',c)}b.count+=d},invoke:function(d,e){var a=this,c,b;d=Ext.dom.Element.prototype[d];for(b=a.startIndex;b<=a.endIndex;b++){c=a.item(b);if(c){d.apply(c,e)}}return a},item:function(a,c){var d=this.elements[a],b=null;if(d){b=c?this.elements[a]:this.el.attach(this.elements[a])}return b},first:function(a){return this.item(this.startIndex,a)},last:function(a){return this.item(this.endIndex,a)},moveBlock:function(c){var b=this,d=b.elements,g,f,e,a;if(!c){return}if(c<0){a=b.startIndex-1;f=b.endIndex;e=1}else {a=b.endIndex+1;f=b.startIndex;e=-1}b.startIndex+=c;b.endIndex+=c;do{a+=e;g=d[a+c]=d[a];g.setAttribute('data-recordIndex',a+c);if(a<b.startIndex||a>b.endIndex){delete d[a]}}while(a!==f);delete d[a]},getCount:function(){return this.count},slice:function(e,a){var d=this.elements,c=[],b;if(!a){a=this.endIndex}else {a=Math.min(this.endIndex,a-1)}for(b=e||this.startIndex;b<=a;b++){c.push(d[b])}return c},replaceElement:function(a,b,d){var e=this.elements,c=typeof a==='number'?a:this.indexOf(a);if(c>-1){b=Ext.getDom(b);if(d){a=e[c];a.parentNode.insertBefore(b,a);Ext.removeNode(a);b.setAttribute('data-recordIndex',c)}this.elements[c]=b}return this},indexOf:function(b){var c=this.elements,a;b=Ext.getDom(b);for(a=this.startIndex;a<=this.endIndex;a++){if(c[a]===b){return a}}return -1},clip:function(i,d){var a=this,g=a.elements,h=[],b,e,f,c;if(i===1){b=a.startIndex;a.startIndex+=d}else {a.endIndex-=d;b=a.endIndex+1}for(c=b,e=b+d-1;c<=e;c++){f=g[c];h.push(f);Ext.removeNode(f);delete g[c]}a.count-=d;a.view.fireItemMutationEvent('itemremove',a.view.dataSource.getRange(b,e),b,h,a.view)},removeRange:function(g,c,j){var a=this,e=a.elements,i=[],d,b,h,f;if(c==null){c=a.endIndex+1}else {c=Math.min(a.endIndex+1,c+1)}if(g==null){g=a.startIndex}h=c-g;for(b=g,f=c;b<=a.endIndex;b++,f++){d=e[b];if(b<c){i.push(d);if(j){Ext.removeNode(d)}}if(f<=a.endIndex){d=e[b]=e[f];d.setAttribute('data-recordIndex',b)}else {delete e[b]}}a.count-=h;a.endIndex-=h;return i},removeElement:function(a,k){var b=this,h=b.elements,c=0,i,f,j,e,d,g;if(Ext.isArray(a)){i=a;a=[];e=i.length;for(c=0;c<e;c++){f=i[c];if(typeof f!=='number'){f=b.indexOf(f)}if(f>=b.startIndex&&f<=b.endIndex){a[a.length]=f}}Ext.Array.sort(a);e=a.length}else {if(a<b.startIndex||a>b.endIndex){return}e=1;a=[a]}for(d=g=a[0],c=0;d<=b.endIndex;d++,g++){if(c<e&&d===a[c]){g++;c++;if(k){Ext.removeNode(h[d])}}if(g<=b.endIndex&&g>=b.startIndex){j=h[d]=h[g];j.setAttribute('data-recordIndex',d)}else {delete h[d]}}b.endIndex-=e;b.count-=e},scroll:function(i,r,k){var b=this,e=b.view,o=e.store,c=b.elements,q=i.length,p=e.getNodeContainer(),h=b.statics().range,a,d,n,j,l,m,f,g;if(!(i.length||k)){return}if(r===-1){if(k){f=[];g=[];m=b.endIndex-k+1;if(h){h.setStartBefore(c[m]);h.setEndAfter(c[b.endIndex]);h.deleteContents();for(a=m;a<=b.endIndex;a++){d=c[a];delete c[a];f.push(o.getByInternalId(d.getAttribute('data-recordId')));g.push(d)}}else {for(a=m;a<=b.endIndex;a++){d=c[a];delete c[a];Ext.removeNode(d);f.push(o.getByInternalId(d.getAttribute('data-recordId')));g.push(d)}}e.fireItemMutationEvent('itemremove',f,m,g,e);b.endIndex-=k}if(i.length){l=e.bufferRender(i,b.startIndex-=q);j=l.children;for(a=0;a<q;a++){c[b.startIndex+a]=j[a]}p.insertBefore(l.fragment,p.firstChild);e.fireItemMutationEvent('itemadd',i,b.startIndex,j,e)}}else {if(k){f=[];g=[];n=b.startIndex+k;if(h){h.setStartBefore(c[b.startIndex]);h.setEndAfter(c[n-1]);h.deleteContents();for(a=b.startIndex;a<n;a++){d=c[a];delete c[a];f.push(o.getByInternalId(d.getAttribute('data-recordId')));g.push(d)}}else {for(a=b.startIndex;a<n;a++){d=c[a];delete c[a];Ext.removeNode(d);f.push(o.getByInternalId(d.getAttribute('data-recordId')));g.push(d)}}e.fireItemMutationEvent('itemremove',f,b.startIndex,g,e);b.startIndex=n}l=e.bufferRender(i,b.endIndex+1);j=l.children;for(a=0;a<q;a++){c[b.endIndex+=1]=j[a]}p.appendChild(l.fragment);e.fireItemMutationEvent('itemadd',i,b.endIndex+1,j,e)}b.count=b.endIndex-b.startIndex+1;return j},sumHeights:function(){var b=0,c=this.elements,a;for(a=this.startIndex;a<=this.endIndex;a++){b+=c[a].offsetHeight}return b}},function(){Ext.dom.CompositeElementLite.importElementMethods.call(this)});Ext.define('Ext.scroll.TableScroller',{extend:Ext.scroll.Scroller,alias:'scroller.table',config:{lockingScroller:null},privates:{getEnsureVisibleXY:function(b,c){var e=this.getLockingScroller(),a=this.getPosition(),d;if(b&&b.element&&!b.isElement){c=b;b=c.element}c=c||{};if(e){a.y=e.position.y}d=Ext.fly(b).getScrollIntoViewXY(this.getElement(),a.x,a.y);d.x=c.x===!1?a.x:d.x;if(e){d.y=c.y===!1?a.y:Ext.fly(b).getScrollIntoViewXY(e.getElement(),a.x,a.y).y}return d},doScrollTo:function(f,b,e){var c,d,a;if(b!=null){c=this.getLockingScroller();if(c){d=c.doScrollTo(null,b,e);b=null}}a=this.callParent([f,b,e]);if(d){a=Ext.Promise.all([a,d])}return a},restoreState:function(){var a=this,d=a.getScrollElement(),c=a.getLockingScroller(),b;if(d){b=c?c.trackingScrollTop:a.trackingScrollTop;if(b!==undefined){if(!a.restoreTimer){a.restoreTimer=Ext.defer(function(){a.restoreTimer=null},50)}a.doScrollTo(a.trackingScrollLeft,b,!1)}}}}});Ext.define('Ext.view.Table',{extend:Ext.view.View,xtype:['tableview','gridview'],alternateClassName:'Ext.grid.View',mixins:[Ext.mixin.Queryable],isTableView:!0,config:{selectionModel:{type:'rowmodel'}},inheritableStatics:{normalSideEvents:['deselect','select','beforedeselect','beforeselect','selectionchange'],events:['blur','focus','move','resize','destroy','beforedestroy','boxready','afterrender','render','beforerender','removed','hide','beforehide','show','beforeshow','enable','disable','added','deactivate','beforedeactivate','activate','beforeactivate','cellkeydown','beforecellkeydown','cellmouseup','beforecellmouseup','cellmousedown','beforecellmousedown','cellcontextmenu','beforecellcontextmenu','celldblclick','beforecelldblclick','cellclick','beforecellclick','refresh','itemremove','itemadd','beforeitemupdate','itemupdate','viewready','beforerefresh','unhighlightitem','highlightitem','focuschange','containerkeydown','containercontextmenu','containerdblclick','containerclick','containermouseout','containermouseover','containermouseup','containermousedown','beforecontainerkeydown','beforecontainercontextmenu','beforecontainerdblclick','beforecontainerclick','beforecontainermouseout','beforecontainermouseover','beforecontainermouseup','beforecontainermousedown','itemkeydown','itemcontextmenu','itemdblclick','itemclick','itemmouseleave','itemmouseenter','itemmouseup','itemmousedown','rowclick','rowcontextmenu','rowdblclick','rowkeydown','rowmouseup','rowmousedown','rowkeydown','beforeitemkeydown','beforeitemcontextmenu','beforeitemdblclick','beforeitemclick','beforeitemmouseleave','beforeitemmouseenter','beforeitemmouseup','beforeitemmousedown','statesave','beforestatesave','staterestore','beforestaterestore','uievent','groupcollapse','groupexpand','scroll']},scrollable:!0,componentLayout:'tableview',baseCls:Ext.baseCSSPrefix+'grid-view',unselectableCls:Ext.baseCSSPrefix+'unselectable',firstCls:Ext.baseCSSPrefix+'grid-cell-first',lastCls:Ext.baseCSSPrefix+'grid-cell-last',itemCls:Ext.baseCSSPrefix+'grid-item',selectedItemCls:Ext.baseCSSPrefix+'grid-item-selected',selectedCellCls:Ext.baseCSSPrefix+'grid-cell-selected',focusedItemCls:Ext.baseCSSPrefix+'grid-item-focused',overItemCls:Ext.baseCSSPrefix+'grid-item-over',altRowCls:Ext.baseCSSPrefix+'grid-item-alt',dirtyCls:Ext.baseCSSPrefix+'grid-dirty-cell',rowClsRe:new RegExp('(?:^|\\s*)'+Ext.baseCSSPrefix+'grid-item-alt(?:\\s+|$)','g'),cellRe:new RegExp(Ext.baseCSSPrefix+'grid-cell-([^\\s]+)(?:\\s|$)',''),positionBody:!0,positionCells:!1,stripeOnUpdate:null,actionableMode:!1,trackOver:!0,getRowClass:null,stripeRows:!0,markDirty:!0,ariaRole:'rowgroup',rowAriaRole:'row',cellAriaRole:'gridcell',usageBitMask:1,tpl:['{%','view = values.view;','if (!(columns = values.columns)) {','columns = values.columns = view.ownerCt.getVisibleColumnManager().getColumns();','}','values.fullWidth = 0;','for (i = 0, len = columns.length; i < len; i++) {','column = columns[i];','values.fullWidth += (column.cellWidth = column.lastBox ? column.lastBox.width : column.width || column.minWidth);','}','tableCls=values.tableCls=[];','%}','<div class="'+Ext.baseCSSPrefix+'grid-item-container" role="presentation" style="width:{fullWidth}px">','{[view.renderTHead(values, out, parent)]}','{%','view.renderRows(values.rows, values.columns, values.viewStartIndex, out);','%}','{[view.renderTFoot(values, out, parent)]}','</div>','{% ','view = columns = column = null;','%}',{definitions:'var view, tableCls, columns, i, len, column;',priority:0}],outerRowTpl:['<table id="{rowId}" role="presentation" ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]}" cellpadding="0" cellspacing="0" style="{itemStyle};width:0">','{%','this.nextTpl.applyOut(values, out, parent)','%}','</table>',{priority:9999}],rowTpl:['{%','var dataRowCls = values.recordIndex === -1 ? "" : " '+Ext.baseCSSPrefix+'grid-row";','%}','<tr class="{[values.rowClasses.join(" ")]} {[dataRowCls]}"',' role="{rowRole}" {rowAttr:attributes}>','<tpl for="columns">'+'{%','parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)','%}','</tpl>','</tr>',{priority:0}],cellTpl:['<td class="{tdCls}" {tdAttr} {cellAttr:attributes}',' style="width:{column.cellWidth}px;','{% if(values.tdStyle){out.push(values.tdStyle);}%}"','{% if (values.column.cellFocusable === false) {%}',' role="presentation"','{% } else { %}',' role="{cellRole}" tabindex="-1"','{% } %}','  data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner {innerCls}" ','style="text-align:{align};','{% if (values.style) {out.push(values.style);} %}" ','{cellInnerAttr:attributes}>{value}</div>','</td>',{priority:0}],refreshSelmodelOnRefresh:!1,scrollableType:'table',tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:[Ext.baseCSSPrefix+'grid-cell '+Ext.baseCSSPrefix+'grid-td']},constructor:function(a){if(a.grid.isTree){a.baseCls=Ext.baseCSSPrefix+'tree-view'}this.callParent([a])},hasVariableRowHeight:function(b){var a=this;return a.variableRowHeight||a.store.isGrouped()||a.getVisibleColumnManager().hasVariableRowHeight()||!b&&a.lockingPartner&&a.lockingPartner.hasVariableRowHeight(!0)},initComponent:function(){var a=this;if(a.columnLines){a.addCls(a.grid.colLinesCls)}if(a.rowLines){a.addCls(a.grid.rowLinesCls)}a.body=new Ext.dom.Fly();a.body.id=a.id+'gridBody';if(!a.trackOver){a.overItemCls=null}a.headerCt.view=a;a.grid.view=a;a.initFeatures(a.grid);a.itemSelector=a.getItemSelector();a.all=new Ext.view.NodeCache(a);a.actionRowFly=new Ext.dom.Fly();a.callParent()},applySelectionModel:function(a,g){var e=this,b=e.ownerGrid,f=a.type,d=e.disableSelection||b.disableSelection,c=b.allowDeselect;if(!g){if(!(a&&a.isSelectionModel)){a=b.selModel||a}}if(a){if(a.isSelectionModel){a.allowDeselect=c!==undefined?c:a.allowDeselect;a.locked=d}else {if(typeof a==='string'){a={type:a}}else {a.type=b.selType||a.selType||a.type||f}if(!a.mode){if(b.simpleSelect){a.mode='SIMPLE'}else {if(b.multiSelect){a.mode='MULTI'}}}a=Ext.Factory.selection(Ext.applyIf({allowDeselect:c,locked:d},a))}}return a},updateSelectionModel:function(b,c){var a=this;if(c){c.un({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection});Ext.destroy(a.selModelRelayer)}a.selModelRelayer=a.relayEvents(b,['selectionchange','beforeselect','beforedeselect','select','deselect','focuschange']);b.on({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection});a.selModel=b},getVisibleColumnManager:function(){return this.ownerCt.getVisibleColumnManager()},getColumnManager:function(){return this.ownerCt.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},moveColumn:function(c,h,j){var b=this,m=j>1,e=m&&document.createRange?document.createRange():null,g=m&&!e?document.createDocumentFragment():null,l=h,p=b.getGridColumns().length,k=p-1,f,i,q,n,d,a,o,r;r=(b.firstCls||b.lastCls)&&(h===0||h===p||c===0||c===k);if(b.rendered&&h!==c){q=b.el.query(b.rowSelector);for(f=0,n=q.length;f<n;f++){d=q[f];a=d.childNodes;if(r){if(a.length===1){Ext.fly(a[0]).addCls(b.firstCls);Ext.fly(a[0]).addCls(b.lastCls);continue}if(c===0){Ext.fly(a[0]).removeCls(b.firstCls);Ext.fly(a[1]).addCls(b.firstCls)}else {if(c===k){Ext.fly(a[k]).removeCls(b.lastCls);Ext.fly(a[k-1]).addCls(b.lastCls)}}if(h===0){Ext.fly(a[0]).removeCls(b.firstCls);Ext.fly(a[c]).addCls(b.firstCls)}else {if(h===p){Ext.fly(a[k]).removeCls(b.lastCls);Ext.fly(a[c]).addCls(b.lastCls)}}}if(m){if(e){e.setStartBefore(a[c]);e.setEndAfter(a[c+j-1]);g=e.extractContents()}else {for(i=0;i<j;i++){g.appendChild(a[c])}}d.insertBefore(g,a[l]||null)}else {d.insertBefore(a[c],a[l]||null)}}o=b.el.query('colgroup');for(f=0,n=o.length;f<n;f++){d=o[f];if(m){if(e){e.setStartBefore(d.childNodes[c]);e.setEndAfter(d.childNodes[c+j-1]);g=e.extractContents()}else {for(i=0;i<j;i++){g.appendChild(d.childNodes[c])}}d.insertBefore(g,d.childNodes[l]||null)}else {d.insertBefore(d.childNodes[c],d.childNodes[l]||null)}}}},scrollToTop:Ext.emptyFn,addElListener:function(a,c,b){this.mon(this,a,c,b,{element:'el'})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(a){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(a)},getCell:function(e,a,d){var c=this.getRow(e),b;if(c){if(typeof a==='number'){a=this.getHeaderAtIndex(a)}b=c.querySelector(a.getCellSelector());return d?Ext.get(b):b}},getFeature:function(b){var a=this.featuresMC;if(a){return a.get(b)}},findFeature:function(a){if(this.features){return Ext.Array.findBy(this.features,function(b){if(b.ftype===a){return !0}})}},initFeatures:function(e){var a=this,c,b,d,f;a.tpl=this.lookupTpl('tpl');a.rowTpl=a.lookupTpl('rowTpl');a.addRowTpl(a.lookupTpl('outerRowTpl'));a.cellTpl=a.lookupTpl('cellTpl');a.featuresMC=new Ext.util.MixedCollection();c=a.features=a.constructFeatures();for(d=0,f=c?c.length:0;d<f;d++){b=c[d];b.view=a;b.grid=e;a.featuresMC.add(b);b.init(e)}},renderTHead:function(c,f,e){var b=c.view.headerFns,d,a;if(b){for(a=0,d=b.length;a<d;++a){b[a].call(this,c,f,e)}}},addHeaderFn:function(b){var a=this.headerFns;if(!a){a=this.headerFns=[]}a.push(b)},renderTFoot:function(c,f,e){var b=c.view.footerFns,d,a;if(b){for(a=0,d=b.length;a<d;++a){b[a].call(this,c,f,e)}}},addFooterFn:function(b){var a=this.footerFns;if(!a){a=this.footerFns=[]}a.push(b)},addTpl:function(a){return this.insertTpl('tpl',a)},addRowTpl:function(a){return this.insertTpl('rowTpl',a)},addCellTpl:function(a){return this.insertTpl('cellTpl',a)},insertTpl:function(d,a){var e=this,b,c;if(a.isTemplate){a=Ext.Object.chain(a)}else {a=new Ext.XTemplate('{%this.nextTpl.applyOut(values, out, parent);%}',a)}for(b=e[d];a.priority<b.priority;b=b.nextTpl){c=b}if(c){c.nextTpl=a}else {e[d]=a}a.nextTpl=b;return a},tplApplyOut:function(b,c,a){if(this.before){if(this.before(b,c,a)===!1){return}}this.nextTpl.applyOut(b,c,a);if(this.after){this.after(b,c,a)}},constructFeatures:function(){var f=this,b=f.features,c,d,a,e;if(b){d=[];for(a=0,e=b.length;a<e;a++){if(Ext.isString(b[a])){b[a]={ftype:b[a]}}c=b[a];if(!c.isFeature){c=Ext.create('feature.'+c.ftype,c)}d[a]=c}}return d},beforeRender:function(){this.callParent();if(!this.enableTextSelection){this.protoEl.unselectable()}},updateScrollable:function(a){var c=this,b=c.grid.ownerGrid;if(!b.lockable&&a.isScroller&&a!==b.scrollable){b.scrollable=a}},afterComponentLayout:function(f,e,d,c){var b=this,a=b.grid.ownerGrid;if(a.mixins.lockable){a.syncLockableLayout()}b.callParent([f,e,d,c])},getElConfig:function(){var a=this.callParent();delete a['aria-hidden'];delete a['aria-disabled'];return a},onBindStore:function(c){var a=this,b=a.bufferedRenderer;if(b&&b.store!==c){b.bindStore(c)}if(a.all&&a.all.getCount()&&!a.grid.reconfiguring){a.clearViewEl(!0)}a.callParent(arguments)},onOwnerGridHide:function(){var b=this.getScrollable(),a=this.bufferedRederer;if(b){b.suspendPartnerSync()}if(a){a.disable()}},onOwnerGridShow:function(){var b=this.getScrollable(),a=this.bufferedRederer;if(b){b.resumePartnerSync()}if(a){a.enable()}},getStoreListeners:function(d){var b=this,a=b.callParent([d]),c=b.dataSource;if(c&&c.isFeatureStore){delete a.add;delete a.remove}if(b.bufferedRenderer){delete a.clear}a.beforepageremove=b.beforePageRemove;return a},beforePageRemove:function(c,a){var d=this.all,b=c.getPageSize();if(d.startIndex>=(a-1)*b&&d.endIndex<=a*b-1){c.get(a);return !1}},onViewScroll:function(a,b,c){if(!this.destroyed&&!this.ignoreScroll){this.callParent([a,b,c])}},createRowElement:function(f,g,e){var a=this,d=a.renderBuffer,c=a.collectData([f],g),b;c.columns=e;a.tpl.overwrite(d,c);a.cleanupData();b=d.dom.querySelector(a.getNodeContainerSelector()).firstChild;Ext.fly(b).saveTabbableState(a.saveTabOptions);return b},bufferRender:function(e,f){var b=this,a=b.renderBuffer,d=document.createRange?document.createRange():null,c;b.tpl.overwrite(a,b.collectData(e,f));b.cleanupData();a.saveTabbableState(b.saveTabOptions);a=a.dom.querySelector(b.getNodeContainerSelector());if(d){d.selectNodeContents(a);c=d.extractContents()}else {c=document.createDocumentFragment();while(a.firstChild){c.appendChild(a.firstChild)}}return {fragment:c,children:Ext.Array.toArray(c.childNodes)}},collectData:function(d,c){var b=this,a=b.tableValues;b.rowValues.view=b;a.view=b;a.rows=d;a.columns=null;a.viewStartIndex=c;a.tableStyle='width:'+b.headerCt.getTableWidth()+'px';return a},cleanupData:function(){var a=this.tableValues;a.view=a.columns=a.rows=this.rowValues.view=null},refreshSize:function(e){var a=this,d=a.getBodySelector(),b=a.lockingPartner,c;if(!a.actionableMode){c=a.saveFocusState()}if(d){a.body.attach(a.el.dom.querySelector(d))}if(!a.hasLoadingHeight){Ext.suspendLayouts();a.callParent([e]);if(e||a.hasVariableRowHeight()&&a.dataSource.getCount()){a.grid.updateLayout()}Ext.resumeLayouts(!b||!b.grid.isVisible()||b.all.getCount()===a.all.getCount());if(c){c()}}},isLayoutRoot:function(){return !1},clearViewEl:function(c){var b=this,a;if(b.rendered){b.callParent();if(!c){a=Ext.get(b.getNodeContainer());if(a&&a.dom!==b.getTargetEl().dom){a.destroy()}}}},getRefItems:function(i){var e=this,f=e.ownerGrid.liveRowContexts,j=!!e.isLockedView,a=e.callParent([i]),g,c,d,b,h;for(h in f){d=f[h].getWidgets();g=d.length;for(c=0;c<g;c++){b=d[c];if(j===b.$fromLocked){a[a.length]=b;if(i&&b.getRefItems){a.push.apply(a,b.getRefItems(!0))}}}}return a},getMaskTarget:function(){return this.ownerCt.body},statics:{getBoundView:function(a){return Ext.getCmp(a.getAttribute('data-boundView'))}},getRecord:function(a){if(this.store.destroyed){return}if(a.isModel){return a}a=this.getNode(a);if(a){return this.dataSource.getByInternalId(a.getAttribute('data-recordId'))}},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}return this.all.indexOf(a)},indexInStore:function(a){return a?this.dataSource.indexOf(this.getRecord(a)):-1},indexOfRow:function(a){var c=this.dataSource,b;if(a.isCollapsedPlaceholder){b=c.indexOfPlaceholder(a)}else {b=c.indexOf(a)}return b},renderRows:function(e,g,d,h){var b=this,a=b.rowValues,f=e.length,c;a.view=b;a.columns=g;a.rowRole=b.rowAriaRole;b.cellValues.cellRole=b.cellAriaRole;for(c=0;c<f;c++,d++){a.itemClasses.length=a.rowClasses.length=0;b.renderRow(e[c],d,h)}a.view=a.columns=a.record=null},renderColumnSizer:function(f,d){var b=f.columns||this.getGridColumns(),g=b.length,a,c,e;d.push('<colgroup role="presentation">');for(a=0;a<g;a++){c=b[a];e=c.cellWidth?c.cellWidth:Ext.grid.header.Container.prototype.defaultWidth;d.push('<col role="presentation" class="',Ext.baseCSSPrefix,'grid-cell-',b[a].getItemId(),'" style="width:'+e+'px">')}d.push('</colgroup>')},renderRow:function(c,e,j){var a=this,k=e===-1,h=a.selectionModel,b=a.rowValues,d=b.itemClasses,g=b.rowClasses,l=a.itemCls,f,i=a.rowTpl;b.rowAttr={};b.record=c;b.recordId=c.internalId;b.recordIndex=a.store.indexOf(c);b.rowIndex=e;b.rowId=a.getRowId(c);b.itemCls=b.rowCls='';if(!b.columns){b.columns=a.ownerCt.getVisibleColumnManager().getColumns()}d.length=g.length=0;if(!k){d[0]=l;if(!a.ownerCt.disableSelection&&h.isRowSelected){if(h.isRowSelected(c)){d.push(a.selectedItemCls)}}if(a.stripeRows&&e%2!==0){d.push(a.altRowCls)}if(a.getRowClass){f=a.getRowClass(c,e,null,a.dataSource);if(f){g.push(f)}}}if(j){i.applyOut(b,j,a.tableValues)}else {return i.apply(b,a.tableValues)}},renderCell:function(b,f,l,p,m,r){var c=this,i=b.renderer,o,j=c.selectionModel,a=c.cellValues,d=a.classes,n=f.data[b.dataIndex],q=c.cellTpl,h=b.enableTextSelection,g,e,k=c.navigationModel.getPosition();if(h==null){h=c.enableTextSelection}a.record=f;a.column=b;a.recordIndex=l;a.rowIndex=p;a.columnIndex=a.cellIndex=m;a.align=b.textAlign;a.innerCls=b.innerCls;a.tdCls=a.tdStyle=a.tdAttr=a.style='';a.unselectableAttr=h?'':'unselectable="on"';d[1]=b.getCellId();e=2;if(i&&i.call){o=i.length>4?c.ownerCt.columnManager.getHeaderIndex(b):m;g=i.call(b.usingDefaultRenderer?b:b.scope||c.ownerCt,n,a,f,l,o,c.dataSource,c);if(a.css){f.cssWarning=!0;a.tdCls+=' '+a.css;a.css=null}if(a.tdCls){d[e++]=a.tdCls}}else {g=n}a.value=g==null||g.length===0||Ext.isString(g)&&g.replace(/\s/g,'').length===0?b.emptyCellText:g;if(b.tdCls){d[e++]=b.tdCls}if(c.markDirty&&f.dirty&&f.isModified(b.dataIndex)){d[e++]=c.dirtyCls;if(b.dirtyTextElementId){a.tdAttr=(a.tdAttr?a.tdAttr+' ':'')+'aria-describedby="'+b.dirtyTextElementId+'"'}}if(b.isFirstVisible){d[e++]=c.firstCls}if(b.isLastVisible){d[e++]=c.lastCls}if(!h){d[e++]=c.unselectableCls}if(j&&(j.isCellModel||j.isSpreadsheetModel)&&j.isCellSelected(c,l,b)){d[e++]=c.selectedCellCls}if(k&&k.record.id===f.id&&k.column===b){d[e++]=c.focusedItemCls}d.length=e;a.tdCls=d.join(' ');q.applyOut(a,r);a.column=a.record=null},getRow:function(a){var b=this,c=b.rowSelector;if(!a&&a!==0||!b.rendered){return null}if(Ext.isString(a)){a=Ext.getDom(a);return a&&a.querySelectorAll(c)[0]}if(Ext.isNumber(a)){a=b.all.item(a,!0);return a&&a.querySelectorAll(c)[0]}if(a.isModel){return b.getRowByRecord(a)}a=Ext.fly(a.target||a);if(a.is(b.itemSelector)){return b.getRowFromItem(a)}return a.findParent(c,b.getTargetEl())},getRowId:function(a){return this.id+'-record-'+a.internalId},constructRowId:function(a){return this.id+'-record-'+a},getNodeById:function(a){a=this.constructRowId(a);return this.retrieveNode(a,!1)},getRowById:function(a){a=this.constructRowId(a);return this.retrieveNode(a,!0)},getNodeByRecord:function(a){return this.retrieveNode(this.getRowId(a),!1)},getRowByRecord:function(a){return this.retrieveNode(this.getRowId(a),!0)},getRowFromItem:function(c){var b=Ext.getDom(c).tBodies[0].childNodes,d=b.length,a;for(a=0;a<d;a++){if(Ext.fly(b[a]).is(this.rowSelector)){return b[a]}}},retrieveNode:function(c,b){var a=this.el.getById(c,!0);if(b&&a){return a.querySelector(this.rowSelector,!0)}return a},updateIndexes:Ext.emptyFn,bodySelector:'div.'+Ext.baseCSSPrefix+'grid-item-container',nodeContainerSelector:'div.'+Ext.baseCSSPrefix+'grid-item-container',itemSelector:'table.'+Ext.baseCSSPrefix+'grid-item',rowSelector:'tr.'+Ext.baseCSSPrefix+'grid-row',cellSelector:'td.'+Ext.baseCSSPrefix+'grid-cell',sizerSelector:'.'+Ext.baseCSSPrefix+'grid-cell',innerSelector:'div.'+Ext.baseCSSPrefix+'grid-cell-inner',getBodySelector:function(){return this.bodySelector},getColumnSizerSelector:function(b){var a=this.sizerSelector+'-'+b.getItemId();return 'td'+a+',col'+a},getItemSelector:function(){return this.itemSelector},getCellSelector:function(a){return a?a.getCellSelector():this.cellSelector},getCellInnerSelector:function(a){return this.getCellSelector(a)+' '+this.innerSelector},addRowCls:function(b,c){var a=this.getRow(b);if(a){Ext.fly(a).addCls(c)}},removeRowCls:function(b,c){var a=this.getRow(b);if(a){Ext.fly(a).removeCls(c)}},onRowSelect:function(c){var a=this,b;a.addItemCls(c,a.selectedItemCls);b=a.getRow(c);if(b){b.setAttribute('aria-selected',!0)}if(Ext.isIE8){a.repaintBorder(c+1)}},onRowDeselect:function(c){var a=this,b;a.removeItemCls(c,a.selectedItemCls);b=a.getRow(c);if(b){b.removeAttribute('aria-selected')}if(Ext.isIE8){a.repaintBorder(c+1)}},onCellSelect:function(b){var a=this.getCellByPosition(b,!0);if(a){Ext.fly(a).addCls(this.selectedCellCls);a.setAttribute('aria-selected',!0)}},onCellDeselect:function(b){var a=this.getCellByPosition(b,!0);if(a){Ext.fly(a).removeCls(this.selectedCellCls);a.removeAttribute('aria-selected')}},getCellInclusive:function(a,e){var b,d,c;if(a){d=this.getRow(a.row);b=this.ownerCt.getColumnManager().getHeaderAtIndex(a.column);if(b&&d){c=d.querySelector(this.getCellSelector(b));return e?c:Ext.get(c)}}return !1},getColumnByPosition:function(b){var c,a;if(b){a=b.column;if(a&&!a.destroyed&&a.isColumn){return a}else {c=b.view||this;a=typeof a==='number'?a:b.colIdx;return c.getVisibleColumnManager().getHeaderAtIndex(a)}}return !1},getCellByPosition:function(a,f){var b,e,c,d;if(a){b=a.view||this;e=b.getRow(a.record||a.row);c=b.getColumnByPosition(a);if(c&&e){d=e.querySelector(b.getCellSelector(c));return f?d:Ext.get(d)}}return !1},onFocusEnter:function(c){var a=this,g=c.fromComponent,f=a.getNavigationModel(),d,e,b;if(a.containsFocus){return Ext.Component.prototype.onFocusEnter.call(a,c)}if(a.actionableMode){if(a.actionPosition){a.el.dom.setAttribute('tabIndex','-1');a.cellFocused=!0;return}a.ownerGrid.setActionableMode(!1)}c=c.event;if(!a.cellFocused&&a.all.getCount()&&a.dataSource.getCount()){b=c.getTarget();if(b===a.el.dom){if(a.lastFocused==='scrollbar'){if(c.relatedTarget&&c.relatedTarget.focus){c.relatedTarget.focus()}return}d=a.getDefaultFocusPosition(g);if(!d){c.stopEvent();a.el.focus();return}b=null}else {if(b===a.tabGuardEl){d=(new Ext.grid.CellContext(a)).setPosition(a.all.endIndex,a.getVisibleColumnManager().getColumns().length-1);b=null}else {if(e=c.getTarget(a.getCellSelector())){if(b===e){d=(new Ext.grid.CellContext(a)).setPosition(a.getRecord(b),a.getHeaderByCell(e));b=null}else {if(b&&Ext.fly(b).isFocusable()&&a.el.contains(b)){d=(new Ext.grid.CellContext(a)).setPosition(a.getRecord(b),a.getHeaderByCell(e))}}}}}}if(d){a.toggleChildrenTabbability(!1);if(b){d.target=b;if(a.ownerGrid.setActionableMode(!0,d)){d=null}}if(d){f.setPosition(d,null,c,null,!0)}a.cellFocused=a.el.contains(Ext.Element.getActiveElement());if(a.cellFocused){a.el.dom.setAttribute('tabIndex','-1')}}Ext.Component.prototype.onFocusEnter.call(a,c)},onFocusLeave:function(b){var a=this,c;if(!a.destroying&&!a.refreshing){c=!a.lockingPartner||!b.toComponent||b.toComponent!==a.lockingPartner&&!a.lockingPartner.isAncestor(b.toComponent);if(a.cellFocused){if(c){a.getNavigationModel().setPosition(null,null,b.event,null,!0)}a.cellFocused=!1;a.focusEl=a.el;a.focusEl.dom.setAttribute('tabIndex',0)}if(c){if(a.ownerGrid.actionableMode){a.lastFocused=a.actionPosition;a.ownerGrid.setActionableMode(!1)}}else {a.actionPosition=null}Ext.Component.prototype.onFocusLeave.call(a,b)}},onRowFocus:function(b,d,c){var a=this;if(d){a.addItemCls(b,a.focusedItemCls);if(!c){a.focusRow(b)}}else {a.removeItemCls(b,a.focusedItemCls)}if(Ext.isIE8){a.repaintBorder(b+1)}},focusRow:function(d,b){var a=this,c=a.getFocusTask();if(b){c.delay(Ext.isNumber(b)?b:10,a.focusRow,a,[d,!1]);return}c.cancel();if(a.isVisible(!0)){a.getNavigationModel().setPosition(a.getRecord(d))}},focusNode:function(b,a){this.focusRow(b,a)},scrollRowIntoView:function(a,b){a=this.getRow(a);if(a){this.scrollElIntoView(a,!1,b)}},focusCell:function(b,c){var a=this,d=a.getFocusTask(),e;if(c){d.delay(Ext.isNumber(c)?c:10,a.focusCell,a,[b,!1]);return}d.cancel();if(a.isVisible(!0)&&(e=a.getCellByPosition(b))){a.getNavigationModel().setPosition(b)}},findFocusPosition:function(j,g,f,l){var i=this,a=g.cellElement,h=i.ownerGrid.actionables,k=h.length,c,b,d,e;c=g.clone();b=Ext.fly(a).findTabbableElements();d=b[Ext.Array.indexOf(b,j)+(f?1:-1)];while(!d&&(a=a[f?'nextSibling':'previousSibling'])){c.setColumn(i.getHeaderByCell(a));for(e=0;e<k;e++){h[e].activateCell(c)}a=c.getCell(!0);if(a&&(b=Ext.fly(a).findTabbableElements()).length){d=b[f?0:b.length-1]}}return {target:d,position:c}},getDefaultFocusPosition:function(c){var b=this,f=b.dataSource,a=b.lastFocused,g=(new Ext.grid.CellContext(b)).setPosition(0,0),d,e;if(c){if(c.isColumn&&c.cellFocusable!==!1){if(!a){a=g}a.setColumn(c);a.setView(c.getView())}else {if(c.isTableView&&c.lastFocused&&c.ownerGrid===b.ownerGrid){a=(new Ext.grid.CellContext(b)).setPosition(c.lastFocused.record,0)}}}if(a){e=b.getScrollable();if(!f.contains(a.record)||e&&!e.isInView(a.getRow(!0)).y){a.setRow(f.getAt(Math.min(a.rowIdx,f.getCount()-1)))}}else {a=g;d=b.el.dom.querySelector(b.getCellSelector()+'[tabIndex="-1"]');if(d){a.setPosition(b.getRecord(d),b.getHeaderByCell(d))}else {a=null}}return a},getLastFocused:function(){var b=this,a=b.lastFocused;if(a&&a.record&&a.column){if(b.dataSource.indexOf(a.record)!==-1&&b.getVisibleColumnManager().indexOf(a.column)!==-1&&b.getNode(a.record)){return a}}},scrollCellIntoView:function(a,b){if(a.isCellContext){a=this.getCellByPosition(a)}if(a){this.scrollElIntoView(a,null,b)}},scrollElIntoView:function(d,c,b){var a=this.getScrollable();if(a){a.ensureVisible(d,{animation:b,x:c})}},syncRowHeightBegin:function(){var f=this,b=f.all,h=b.count,d=[],g=Ext.grid.locking.RowSynchronizer,a,c,e;for(a=0,c=b.startIndex;a<h;a++,c++){d[a]=e=new g(f,b.elements[c]);e.reset()}return d},syncRowHeightClear:function(b){var e=this,c=e.all,d=c.count,a;for(a=0;a<d;a++){b[a].reset()}},syncRowHeightMeasure:function(b){var c=b.length,a;for(a=0;a<c;a++){b[a].measure()}},syncRowHeightFinish:function(c,d){var e=c.length,b=this.bufferedRenderer,a;for(a=0;a<e;a++){c[a].finish(d[a])}if(b){b.syncRowHeightsFinish()}},refreshNode:function(a){if(Ext.isNumber(a)){a=this.store.getAt(a)}this.handleUpdate(this.dataSource,a,null,null,null,!0)},handleUpdate:function(J,d,y,B,K,I){var a=this,D=a.store.indexOf(d),n=a.rowTpl,x=a.markDirty,j=a.dirtyCls,g=[],o=a.variableRowHeight,p=0,G=a.ownerCt,k=a.cellFly||(a.self.prototype.cellFly=new Ext.dom.Fly()),c,E,i,r,H,s,l,v,m,b,t,h,u,f,F,e,q,C,A,z,w;y=y||Ext.data.Model.EDIT;q=y!==Ext.data.Model.EDIT;if(a.viewReady){a.updatingRows=!0;c=a.getNodeByRecord(d);if(c){if(d.isCollapsedPlaceholder){Ext.fly(c).syncContent(a.createRowElement(d,a.indexOfRow(d)));return}v=a.overItemCls;m=a.ownerCt.getVisibleColumnManager().getColumns();if(I){g=m;p=1}else {for(h=0,t=m.length;h<t;h++){b=m[h];if(b.preventUpdate){f=c.querySelector(b.getCellSelector());if(f&&!q&&x){k.attach(f);if(d.isModified(b.dataIndex)){k.addCls(j);if(b.dirtyTextElementId){f.setAttribute('aria-describedby',b.dirtyTextElementId)}}else {k.removeCls(j);f.removeAttribute('aria-describedby')}}}else {u=a.shouldUpdateCell(d,b,B);if(u){p=p|u;g[g.length]=b;o=o||b.variableRowHeight}}}}if(a.hasListeners.beforeitemupdate){a.fireEvent('beforeitemupdate',d,D,c,g)}if(a.getRowClass||!a.getRowFromItem(c)||p&1||c.tBodies[0].childNodes.length>1){z=c._extData;i=a.createRowElement(d,a.indexOfRow(d),g);if(Ext.fly(c,'_internal').hasCls(v)){Ext.fly(i).addCls(v)}if(Ext.isIE9m&&c.mergeAttributes){c.mergeAttributes(i,!0)}else {r=i.attributes;H=r.length;for(l=0;l<H;l++){s=r[l].name;e=r[l].value;if(s!=='id'&&c.getAttribute(s)!==e){c.setAttribute(s,e)}}}if(z){z.isSynchronized=!1}if(m.length&&(E=a.getRow(c))){a.updateColumns(E,i.querySelector(a.rowSelector),g,d)}while(n){if(n.syncContent){if(n.syncContent(c,i,B?g:null)===!1){break}}n=n.nextTpl}}else {for(h=0,t=g.length;h<t;h++){b=g[h];F=b.dataIndex;e=d.get(F);f=c.querySelector(b.getCellSelector());k.attach(f);if(!q&&x){if(d.isModified(b.dataIndex)){k.addCls(j);if(b.dirtyTextElementId){f.setAttribute('aria-describedby',b.dirtyTextElementId)}}else {k.removeCls(j);f.removeAttribute('aria-describedby')}}C=b.usingDefaultRenderer;A=C?b:b.scope;if(b.updater){Ext.callback(b.updater,A,[f,e,d,a,a.dataSource],0,b,G)}else {if(b.renderer){e=Ext.callback(b.renderer,A,[e,null,d,0,0,a.dataSource,a],0,b,G)}w=e==null||e.length===0||Ext.isString(e)&&e.replace(/\s/g,'').length===0;e=w?b.emptyCellText:e;if(b.producesHTML||w){f.querySelector(a.innerSelector).innerHTML=e}else {f.querySelector(a.innerSelector).childNodes[0].data=e}}if(a.highlightClass){Ext.fly(f).addCls(a.highlightClass);if(!a.changedCells){a.self.prototype.changedCells=[];a.prototype.clearChangedTask=new Ext.util.DelayedTask(a.clearChangedCells,a.prototype);a.clearChangedTask.delay(a.unhighlightDelay)}a.changedCells.push({cell:f,cls:a.highlightClass,expires:Ext.Date.now()+1000})}}}if(q&&x&&!d.dirty){Ext.fly(c,'_internal').select('.'+j).removeCls(j).set({'aria-describedby':undefined})}if(o){Ext.suspendLayouts()}if(a.hasListeners.itemupdate){a.fireEvent('itemupdate',d,D,c,a)}if(o){a.ownerGrid.updateLayout();Ext.resumeLayouts(!0)}}a.updatingRows=!1}},clearChangedCells:function(){var a=this,e=Ext.Date.now(),b,d,c;for(d=0,c=a.changedCells.length;d<c;){b=a.changedCells[d];if(b.expires<=e){Ext.fly(b.cell).removeCls(b.highlightClass);Ext.Array.erase(a.changedCells,d,1);c--}else {break}}if(c){a.clearChangedTask.delay(a.unhighlightDelay)}},updateColumns:function(e,n,o,p){var h=this,l=h.getCellSelector(),q=o.length,b,j,c,a,i,k,g,m,d,f;if(e.mergeAttributes){e.mergeAttributes(n,!0)}else {b=n.attributes;j=b.length;for(a=0;a<j;a++){c=b[a].name;f=b[a].value;if(c!=='id'&&e.getAttribute(c)!==f){e.setAttribute(c,f)}}}d=e._extData;if(d){d.isSynchronized=!1}for(i=0;i<q;i++){k=o[i];l=h.getCellSelector(k);g=e.querySelector(l);m=n.querySelector(l);b=m.attributes;j=b.length;for(a=0;a<j;a++){c=b[a].name;f=b[a].value;if(c!=='id'&&g.getAttribute(c)!==f){g.setAttribute(c,f)}}d=g._extData;if(d){d.isSynchronized=!1}h.oldCellFly.attach(g.querySelector(h.innerSelector)).syncContent(m.querySelector(h.innerSelector));if(p&&k.onItemAdd){k.onItemAdd([p])}}},shouldUpdateCell:function(c,b,a){return b.shouldUpdateCell(c,a)},refresh:function(){var a=this;if(a.destroying){return}if(a.getVisibleColumnManager().getColumns().length){a.callParent(arguments);a.headerCt.setSortState()}else {if(a.refreshCounter){a.clearViewEl(!0)}a.addEmptyText()}},processContainerEvent:function(b){var a=Ext.Component.from(b.target.parentNode);if(a&&a.up(this.ownerCt)){return !1}},processItemEvent:function(h,o,g,b){var a=this,p=a.self,q=p.EventMap,d=b.type,n=a.features,r=n.length,k,f,j,m,i,l=b.position=a.eventPosition||(a.eventPosition=new Ext.grid.CellContext()),e,c;if(Ext.isIE&&d==='mouseup'&&!b.within(a.el)){return !1}if(a.indexInStore(o)!==-1){e=l.rowElement=o.querySelector(a.rowSelector);c=b.getTarget(a.getCellSelector(),e);d=p.TouchEventMap[d]||d;if(c){if(!c.parentNode){return !1}i=a.getHeaderByCell(c);if(i){f=a.ownerCt.getColumnManager().getHeaderIndex(i)}else {i=c=null;f=-1}}else {f=-1}l.setAll(a,g,i?a.getVisibleColumnManager().getHeaderIndex(i):-1,h,i);l.cellElement=c;j=a.fireEvent('uievent',d,a,c,g,f,b,h,e);if(j===!1||a.callParent(arguments)===!1){return !1}for(k=0;k<r;++k){m=n[k];if(m.wrapsItem){if(m.vetoEvent(h,e,g,b)===!1){a.processSpecialEvent(b);return !1}}}if(c&&d!=='mouseover'&&d!=='mouseout'){j=!(a['onBeforeCell'+q[d]](c,f,h,e,g,b)===!1||a.fireEvent('beforecell'+d,a,c,f,h,e,g,b)===!1||a['onCell'+q[d]](c,f,h,e,g,b)===!1||a.fireEvent('cell'+d,a,c,f,h,e,g,b)===!1)}if(j!==!1){j=a.fireEvent('row'+d,a,h,e,g,b)}return j}else {a.processSpecialEvent(b);if(b.pointerType==='mouse'){b.preventDefault()}return !1}},processSpecialEvent:function(f){var a=this,k=a.features,l=k.length,b=f.type,g,c,i,d,h,j,e=a.ownerCt;a.callParent(arguments);if(b==='mouseover'||b==='mouseout'){return}b=a.self.TouchEventMap[b]||b;for(g=0;g<l;g++){c=k[g];if(c.hasFeatureEvent){d=f.getTarget(c.eventSelector,a.getTargetEl());if(d){i=c.eventPrefix;h=c.getFireEventArgs('before'+i+b,a,d,f);j=c.getFireEventArgs(i+b,a,d,f);if(a.fireEvent.apply(a,h)===!1||e.fireEvent.apply(e,h)===!1||a.fireEvent.apply(a,j)===!1||e.fireEvent.apply(e,j)===!1){return !1}}}}return !0},onCellMouseDown:Ext.emptyFn,onCellLongPress:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onCellKeyUp:Ext.emptyFn,onCellKeyPress:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellLongPress:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,onBeforeCellKeyUp:Ext.emptyFn,onBeforeCellKeyPress:Ext.emptyFn,expandToFit:function(a){this.autoSizeColumn(a)},autoSizeColumn:function(a){if(Ext.isNumber(a)){a=this.getGridColumns()[a]}if(a){if(a.isGroupHeader){a.autoSize();return}delete a.flex;a.setWidth(this.getMaxContentWidth(a))}},getMaxContentWidth:function(c){var f=this,e=f.getHeaderCells(c),j=c.getWidth(),d=f.getColumnResizers(c),i=e.length,h=Math.max,g=0,a,b;if(i>0){if(Ext.supports.ScrollWidthInlinePaddingBug){g+=f.getCellPaddingAfter(e[0])}if(f.columnLines){g+=Ext.fly(e[0].parentNode).getBorderWidth('lr')}}for(a=0;a<d.length;a++){d[a].setWidth(1)}c.textEl.setStyle({'text-overflow':'clip',display:'table-cell'});b=c.textEl.dom.offsetWidth+c.titleEl.getPadding('lr');c.textEl.setStyle({'text-overflow':'',display:''});for(a=0;a<i;a++){b=h(b,e[a].scrollWidth)}b+=g;b=h(b+1,40);for(a=0;a<d.length;a++){d[a].setWidth(j)}return b},getColumnResizers:function(f){var a=this,d=a.features||[],e=[a.body.select(a.getColumnSizerSelector(f))],c,b;for(b=0;b<d.length;b++){c=d[b].columnSizer;if(c){e.push(c.select(a.getColumnSizerSelector(f)))}}return e},getHeaderCells:function(e){var f=this,d=f.features||[],c=f.el.query(e.getCellInnerSelector()),b,a;for(a=0;a<d.length;a++){b=d[a].columnSizer;if(b){c=c.concat(b.query(e.getCellInnerSelector()))}}return c},getPositionByEvent:function(b){var a=this,c=b.getTarget(a.cellSelector),d=b.getTarget(a.itemSelector),f=a.getRecord(d),e=a.getHeaderByCell(c);return a.getPosition(f,e)},getHeaderByCell:function(a){if(a){return this.ownerGrid.getVisibleColumnManager().getHeaderById(Ext.getDom(a).getAttribute('data-columnId'))}return !1},walkCells:function(e,i,g,j){var c=this,b=e.clone(),d=c.lockingPartner&&c.lockingPartner.grid.isVisible()?c.lockingPartner:null,a=e.rowIdx,h=c.dataSource.getCount()-1,f=c.ownerCt.getVisibleColumnManager().getColumns();switch(i.toLowerCase()){case 'right':if(e.isLastColumn()){a=d&&c.isLockedView?a:a+1;if(a>h){return !1}if(d){b.view=d}b.setPosition(a,0)}else {b.navigate(+1)};break;case 'left':if(e.isFirstColumn()){a=d&&c.isNormalView?a:a-1;if(a<0){return !1}if(d){b.view=d;f=d.getVisibleColumnManager().getColumns()}b.setPosition(a,f[f.length-1])}else {b.navigate(-1)};break;case 'up':if(a===0){return !1}else {b.setRow(a-1)};break;case 'down':if(a===h){return !1}else {b.setRow(a+1)};break;}if(g&&g.call(j||c,b)!==!0){return !1}return b},walkRows:function(f,e){var i=this,j=i.dataSource,g=0,d=f,h,b=e<0?0:j.getCount()-1,c=b?1:-1,a=f;do{if(b?a>=b:a<=b){return d||b}a+=c;if((h=Ext.fly(i.getRow(a)))&&h.isVisible(!0)){g+=c;d=a}}while(g!==e);return a},walkRecs:function(h,g){var k=this,a=k.dataSource,i=0,e=h,c=g<0?0:(a.isBufferedStore?a.getTotalCount():a.getCount())-1,f=c?1:-1,b=a.indexOf(h),j,d;do{if(c?b>=c:b<=c){return e}b+=f;d=a.getAt(b);if(!d.isCollapsedPlaceholder&&(j=Ext.fly(k.getNodeByRecord(d)))&&j.isVisible(!0)){i+=f;e=d}}while(i!==g);return e},getFirstVisibleRowIndex:function(){var a=this,b=a.indexOf(a.all.first())-1,c;c=a.dataSource.isBufferedStore?a.dataSource.getTotalCount():a.dataSource.getCount();do{b+=1;if(b===c){return}}while(!Ext.fly(a.getRow(b)).isVisible(!0));return b},getLastVisibleRowIndex:function(){var b=this,a=b.indexOf(b.all.last());do{a-=1;if(a===-1){return}}while(!Ext.fly(b.getRow(a)).isVisible(!0));return a},getHeaderCt:function(){return this.headerCt},getPosition:function(b,a){return (new Ext.grid.CellContext(this)).setPosition(b,a)},doDestroy:function(){var a=this,d=a.featuresMC,b,c,e;a.bindStore(null);if(d){for(c=0,e=d.getCount();c<e;++c){b=d.getAt(c);if(b&&!b.destroyed){b.destroy()}}}a.all.destroy();a.body.destroy();a.actionRowFly.destroy();a.callParent()},onReplace:function(g,d,f,e){var a=this,b=a.bufferedRenderer,c;if(a.rendered&&b){c=a.saveFocusState();b.onReplace(g,d,f,e);c()}else {a.callParent(arguments)}a.setPendingStripe(d)},onResize:function(f,e,d,c){var a=this,b=a.bufferedRenderer;if(b){b.onViewResize(a,f,e,d,c)}a.callParent([f,e,d,c])},onAdd:function(e,c,d){var a=this,b=a.bufferedRenderer;a.addingRows=!0;if(a.rendered&&b&&(b.bodyTop||a.dataSource.getCount()+c.length>=b.viewSize)){b.onReplace(e,d,[],c)}else {a.callParent(arguments)}a.setPendingStripe(d);a.addingRows=!1},onRemove:function(f,c,e){var a=this,b=a.bufferedRenderer,d;if(a.rendered&&b&&a.dataSource.getCount()+c.length>=b.viewSize){d=a.saveFocusState();b.onReplace(f,e,c,[]);d()}else {a.callParent(arguments)}if(a.actionPosition&&Ext.Array.indexOf(c,a.actionPosition.record)!==-1){a.actionPosition=null}a.setPendingStripe(e)},saveFocusState:function(){var b=this,g=b.dataSource,d=b.actionableMode,f=b.getNavigationModel(),a=d?b.actionPosition:f.getPosition(!0),e=Ext.fly(Ext.Element.getActiveElement()),h=a&&a.view===b&&Ext.fly(a.getCell(!0)),k,j,c,i;if(!b.skipSaveFocusState&&h&&h.contains(e)){a=a.clone();e.suspendFocusEvents();if(d&&h.dom!==e.dom){c=a.record;b.suspendActionableMode()}else {d=!1;f.setPosition()}e.resumeFocusEvents();if(!d&&g.isExpandingOrCollapsing){return Ext.emptyFn}return function(){var e;g=b.dataSource;if(g.getCount()){e=b.all;k=Math.min(Math.max(a.rowIdx,e.startIndex),e.endIndex);j=Math.min(a.colIdx,b.getVisibleColumnManager().getColumns().length-1);c=a.record;a=(new Ext.grid.CellContext(b)).setPosition(c&&g.contains(c)&&!c.isCollapsedPlaceholder?c:k,j);i=a.record;if(a.getCell(!0)){if(d&&c&&i&&c.getId()===i.getId()){b.resumeActionableMode(a)}else {if(d){b.setActionableMode(!1)}f.setPosition(a,null,null,null,!0);if(!f.getPosition()){a.column.focus()}}}}else {a.column.focus()}}}return Ext.emptyFn},onDataRefresh:function(c){var a=this,b=a.ownerCt;if(b&&b.isCollapsingOrExpanding===2){b.on('expand',a.onDataRefresh,a,{single:!0});return}a.callParent([c])},getViewRange:function(){var a=this;if(a.bufferedRenderer){return a.bufferedRenderer.getViewRange()}return a.callParent()},setPendingStripe:function(b){var a=this.stripeOnUpdate;if(a===null){a=b}else {a=Math.min(a,b)}this.stripeOnUpdate=a},onEndUpdate:function(){var a=this,b=a.stripeOnUpdate,c=a.all.startIndex;if(a.rendered&&(b||b===0)){if(b<c){b=c}a.doStripeRows(b);a.stripeOnUpdate=null}a.callParent(arguments)},doStripeRows:function(d,g){var a=this,e,f,c,b;if(a.rendered&&a.stripeRows){e=a.getNodes(d,g);for(c=0,f=e.length;c<f;c++){b=e[c];b.className=b.className.replace(a.rowClsRe,' ');d++;if(d%2===0){b.className+=' '+a.altRowCls}}}},hasActiveFeature:function(){return this.isGrouping&&this.store.isGrouped()||this.isRowWrapped},getCellPaddingAfter:function(a){return Ext.fly(a).getPadding('r')},privates:{saveTabOptions:{skipSelf:!0,includeHidden:!0},collectNodes:function(a){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},setActionableMode:function(g,b){var a=this,j=a.getNavigationModel(),f=a.grid.actionables,m=f.length,i=!1,c,l,k,h,e,d;if(a.actionableMode===g){if(!g||b.isEqual(a.actionPosition)){return !1}}if(g){if(b&&(b.view===a||b.view===(h=a.lockingPartner)&&h.actionableMode)){i=a.activateCell(b)}return i}else {c=Ext.fly(Ext.Element.getActiveElement());if(a.el.contains(c)&&!Ext.fly(c).is(a.getCellSelector())){l=a.actionPosition&&a.actionPosition.record||a.getRecord(c);k=a.getHeaderByCell(c.findParent(a.getCellSelector()));e=b&&b.getCell(!0);if(!b||!e){b=(new Ext.grid.CellContext(a)).setPosition(l||0,k||0);e=b.getCell(!0)}Ext.fly(e).focus();c=Ext.fly(Ext.Element.getActiveElement());if(!(a.el.contains(c)&&c.is(a.getCellSelector()))){b=null}}for(d=0;d<m;d++){if(f[d].deactivate){f[d].deactivate()}}if(a.actionRow){a.actionRow.saveTabbableState({skipSelf:!0,includeSaved:!1})}if(a.destroyed){return !1}a.actionableMode=a.ownerGrid.actionableMode=!1;a.actionPosition=j.actionPosition=a.actionRow=null;if(b){j.setPosition(b)}}},activateCell:function(b){var a=this,g=b.view!==a?a.lockingPartner:null,h=a.grid.actionables,n=h.length,l=a.getNavigationModel(),k=b.target,m,i,f,e,c,j,d;b=b.clone();m=b.record;b.view.grid.ensureVisible(m,{column:b.column});f=a.all.item(b.rowIdx,!0);if(a.actionPosition){i=a.all.item(a.actionPosition.rowIdx,!0);if(i&&f!==i){Ext.fly(i).saveTabbableState({skipSelf:!0,includeSaved:!1})}}a.activating=!0;if(!g){e=Ext.fly(b.getCell(!0));a.actionPosition=b;for(c=0;c<n;c++){j=j||h[c].activateCell(b,null,!0)}e=Ext.fly(b.getCell(!0))}if(g||e&&e.restoreTabbableState({skipSelf:!0}).length|(d=e.findTabbableElements()).length||j){for(c=0;c<n;c++){if(h[c].activateRow){h[c].activateRow(f)}}if(g||d.length){Ext.fly(f).restoreTabbableState({skipSelf:!0});if(g){a.actionableMode=!0;a.actionPosition=null;a.activating=!1;return !0}if(d){a.actionRow=a.actionRowFly.attach(f);a.actionableMode=a.ownerGrid.actionableMode=!0;l.setPosition();l.actionPosition=a.actionPosition=b;if(k&&Ext.Array.contains(d,k)){Ext.fly(k).focus()}else {Ext.fly(d[0]).focus()}a.activating=!1;return !0}}}a.activating=!1},suspendActionableMode:function(){var d=this,b=d.grid.actionables,c=b.length,a;for(a=0;a<c;a++){b[a].suspend()}},resumeActionableMode:function(e){var c=this,d=c.grid.actionables,f=d.length,a,b;c.toggleChildrenTabbability(!1);for(a=0;a<f;a++){b=b||d[a].resume(e)}if(!b){c.activateCell(e)}},onRowExit:function(f,g,e,b,i){var a=this,h=b?'nextSibling':'previousSibling',d=a.lockingPartner,c;if(d&&d.grid.isVisible()){c=a.all.indexOf(g);if(b){if(a.isNormalView){c++}}else {if(a.isLockedView){c--}}a.actionPosition=null;a=d;e=a.all.item(c,!0)}if(!a.hasListeners.beforerowexit||a.fireEvent('beforerowexit',a,f,g,e,b)!==!1){a.findFirstActionableElement(f,e,h,b,i)}else {return !1}},findFirstActionableElement:function(o,c,s,e,p){var a=this,q=a.getVisibleColumnManager().getColumns(),n=q.length,g=a.grid.actionables,m=g.length,d=new Ext.grid.CellContext(a),f,h,b,j,r,l,k,i;if(c){d.setRow(c);for(b=0;b<m;b++){if(g[b].activateRow){g[b].activateRow(c)}}for(b=e?0:n-1;(e?b<n:b>-1)&&!h;b=b+(e?1:-1)){r=q[b];d.setColumn(r);f=(c.dom||c).querySelector(d.column.getCellSelector());for(j=0;j<m;j++){l=l||g[j].activateCell(d)}f=Ext.fly(d.getCell(!0));if(f){c=d.getNode(!0);f.restoreTabbableState({skipSelf:!0});if((k=f.findTabbableElements()).length||l){i=a.actionRow&&a.actionRow.dom;a.actionRow=a.actionRowFly.attach(c);a.actionRow.restoreTabbableState({skipSelf:!0});h=k[e?0:k.length-1]}}}if(h){a.actionPosition=a.getNavigationModel().actionPosition=d;Ext.fly(h).focus(Ext.asyncFocus?1:0);if(i&&c!==i){Ext.fly(i).saveTabbableState({skipSelf:!0,includeSaved:!1})}}else {a.onRowExit(o,c,a.all.item(d.rowIdx+(e?1:-1)),e,p)}}else {if(!p){a.grid.ensureVisible(e?0:a.dataSource.getCount()-1,{callback:function(b,f,d){if(b){a.findFirstActionableElement(o,d,s,e,!0)}else {a.ownerGrid.setActionableMode(!1)}}})}else {a.ownerGrid.setActionableMode(!1)}}},stretchHeight:function(d){var a=this,e=a.getScrollable(),c=a.stretchers,b;if(d&&a.tabGuardEl){if(c){c[0].style.marginTop=c[1].style.marginTop=a.el.dom.style.height=0}a.el.dom.style.height=e.constrainScrollRange(d)+'px';b=d-a.el.dom.offsetHeight;if(b>0){a.el.dom.style.height='';c=a.getStretchers();b=d-a.el.dom.offsetHeight;if(b>0){c[0].style.marginTop=e.constrainScrollRange(b)+'px';b=d-a.el.dom.offsetHeight;if(b>0){c[1].style.marginTop=Math.min(b,e.maxSpacerMargin||0)+'px'}}}}},getStretchers:function(){var b=this,a=b.stretchers,c;if(a){b.el.appendChild(a)}else {c={cls:'x-scroller-spacer',style:'position:relative'};a=b.stretchers=b.el.appendChild([c,c],!0)}return a}}},function(a){a.prototype.oldCellFly=new Ext.dom.Fly()});Ext.define('Ext.theme.material.view.Table',{override:'Ext.view.Table',mixins:[Ext.mixin.ItemRippler],config:{itemRipple:{color:'default'}},processItemEvent:function(i,j,h,b){var a=this,c,g,e,d,f;g=a.callParent([i,j,h,b]);if(b.type==='mousedown'){c=a.eventPosition;e=c&&a.eventPosition.rowElement;d=c&&a.eventPosition.cellElement;f=a.getSelectionModel().type;if(e&&f==='rowmodel'){a.rippleItem(Ext.fly(e),b)}else {if(d&&f==='cellmodel'){a.rippleItem(Ext.fly(d),b)}}}return g}});Ext.define('Ext.grid.Panel',{extend:Ext.panel.Table,alias:['widget.gridpanel','widget.grid'],alternateClassName:['Ext.list.ListView','Ext.ListView','Ext.grid.GridPanel'],viewType:'tableview',ariaRole:'grid',lockable:!1,rowLines:!0});Ext.define('Ext.grid.RowContext',{constructor:function(a){Ext.apply(this,a);this.widgets={};this.usage=0},setRecord:function(c,b){var a=this.viewModel;this.record=c;this.recordIndex=b;if(a){a.set('record',c);a.set('recordIndex',b)}},attach:function(a){var b=this.usage;this.usage|=a.usageBitMask;return !b},detach:function(i){var a=this,h=a.widgets,f=i.usageBitMask,d=a.viewModel,b,e,c,g;if(!(a.usage&f)){return !1}a.usage&=~f;e=!a.usage;if(e){a.record=null;if(d){d.set('record');d.set('recordIndex')}}for(g in h){c=h[g];if(!i.isAncestor(c)){continue}b=c.getFocusEl();if(b){if(b.isTabbable(!0)){b.saveTabbableState({includeHidden:!0})}b.blur()}if(c.rendered){c.detachFromBody()}}return e},getWidget:function(i,g,f){var a=this,h=a.widgets||(a.widgets={}),d=a.ownerGrid,c=d.rowViewModel,e=a.viewModel,b;if((f.bind||c)&&!e){if(typeof c==='string'){c={type:c}}a.viewModel=e=Ext.Factory.viewModel(Ext.merge({parent:d.getRowContextViewModelParent(),data:{record:a.record,recordIndex:a.recordIndex}},c))}if(!(b=h[g])){b=h[g]=Ext.widget(Ext.apply({ownerCmp:i,_rowContext:a,$vmParent:e||d.getRowContextViewModelParent(),initInheritedState:a.initInheritedStateHook,lookupViewModel:a.lookupViewModelHook},f));b.$fromLocked=!!i.isLockedView;if(b.isWidget){b.initBindable()}else {b.collectContainerElement=!0}}return b},getWidgets:function(){var a=this.widgets,c,b=[];for(c in a){b.push(a[c])}return b},handleWidgetViewChange:function(b,c){var a=this.widgets[c];if(a){a.ownerCmp=b;a.$fromLocked=!!b.isLockedView}},destroy:function(){var b=this,d=b.widgets,c,a;for(c in d){a=d[c];a._rowContext=null;a.destroy()}Ext.destroy(b.viewModel);b.callParent()},privates:{initInheritedStateHook:function(a,c){var b=this.$vmParent;this.self.prototype.initInheritedState.call(this,a,c);if(!a.hasOwnProperty('viewModel')&&b){a.viewModel=b}},lookupViewModelHook:function(b){var a=b?null:this.getViewModel();if(!a){a=this.$vmParent||null}return a}}});Ext.define('Ext.view.DropZone',{extend:Ext.dd.DropZone,indicatorCls:Ext.baseCSSPrefix+'grid-drop-indicator',indicatorHtml:['<div class="',Ext.baseCSSPrefix,'grid-drop-indicator-left" role="presentation"></div>','<div class="'+Ext.baseCSSPrefix+'grid-drop-indicator-right" role="presentation"></div>'].join(''),constructor:function(b){var a=this;Ext.apply(a,b);if(!a.ddGroup){a.ddGroup='view-dd-zone-'+a.view.id}a.callParent([a.view.el])},fireViewEvent:function(){var a=this,b;a.lock();b=a.view.fireEvent.apply(a.view,arguments);a.unlock();return b},getTargetFromEvent:function(h){var e=h.getTarget(this.view.getItemSelector()),d,b,c,a,g,f;if(!e){d=h.getY();for(a=0,b=this.view.getNodes(),g=b.length;a<g;a++){c=b[a];f=Ext.fly(c).getBox();if(d<=f.bottom){return c}}}return e},getIndicator:function(){var a=this;if(!a.indicator){a.indicator=new Ext.Component({ariaRole:'presentation',html:a.indicatorHtml,cls:a.indicatorCls,ownerCt:a.view,floating:!0,alignOnScroll:!1,shadow:!1})}return a.indicator},getPosition:function(d,c){var e=d.getXY()[1],a=Ext.fly(c).getRegion(),b;if(a.bottom-e>=(a.bottom-a.top)/2){b='before'}else {b='after'}return b},containsRecordAtOffset:function(f,d,g){if(!d){return !1}var a=this.view,e=a.indexOf(d),c=a.getNode(e+g),b=c?a.getRecord(c):null;return b&&Ext.Array.contains(f,b)},positionIndicator:function(e,l,m){var a=this,i=a.view,c=a.getPosition(m,e),b=i.getRecord(e),f=l.records,g,h,d,k,j;if(!Ext.Array.contains(f,b)&&(c==='before'&&!a.containsRecordAtOffset(f,b,-1)||c==='after'&&!a.containsRecordAtOffset(f,b,1))){a.valid=!0;if(a.overRecord!==b||a.currentPosition!==c){h=a.view.getScrollable();d=h&&h.getElement();k=d&&d.isScrollable()?d:Ext.fly(i.getNodeContainer());j=k.getY();g=Ext.fly(e).getY()-j-1;if(c==='after'){g+=Ext.fly(e).getHeight()}a.getIndicator().setWidth(Ext.fly(i.el).getWidth()).showAt(0,g);a.overRecord=b;a.currentPosition=c}}else {a.invalidateDrop()}},invalidateDrop:function(){if(this.valid){this.valid=!1;this.getIndicator().hide()}},onNodeOver:function(c,e,d,b){var a=this;if(!Ext.Array.contains(b.records,a.view.getRecord(c))){a.positionIndicator(c,b,d)}return a.valid?a.dropAllowed:a.dropNotAllowed},notifyOut:function(d,b,e,c){var a=this;a.callParent([d,b,e,c]);a.overRecord=a.currentPosition=null;a.valid=!1;if(a.indicator){a.indicator.hide()}},onContainerOver:function(f,e,d){var a=this,b=a.view,c=b.dataSource.getCount();if(c){a.positionIndicator(b.all.last(),d,e)}else {a.overRecord=a.currentPosition=null;a.getIndicator().setWidth(Ext.fly(b.el).getWidth()).showAt(0,0);a.valid=!0}return a.dropAllowed},onContainerDrop:function(b,c,a){return this.onNodeDrop(b,null,c,a)},onNodeDrop:function(h,i,j,g){var a=this,e=!1,f=a.overRecord,c=a.currentPosition,d={wait:!1,processDrop:function(){a.invalidateDrop();a.handleNodeDrop(g,f,c);e=!0;a.fireViewEvent('drop',h,g,f,c)},cancelDrop:function(){a.invalidateDrop();e=!0}},b=!1;if(a.valid){b=a.fireViewEvent('beforedrop',h,g,f,c,d);if(d.wait){return}if(b!==!1){if(!e){d.processDrop()}}}return b},destroy:function(){this.indicator=Ext.destroy(this.indicator);this.callParent()}});Ext.define('Ext.grid.plugin.HeaderResizer',{extend:Ext.plugin.Abstract,alias:'plugin.gridheaderresizer',disabled:!1,config:{dynamic:!1},colHeaderCls:Ext.baseCSSPrefix+'column-header',minColWidth:40,maxColWidth:1000,eResizeCursor:'col-resize',init:function(b){var a=this;a.headerCt=b;b.on('render',a.afterHeaderRender,a,{single:a});if(!a.minColWidth){a.self.prototype.minColWidth=Ext.grid.column.Column.prototype.minWidth}},destroy:function(){var a=this,b=a.tracker;if(b){b.destroy();a.tracker=null}a.headerCt.un('render',a.afterHeaderRender,a);a.headerCt=null;a.callParent()},afterHeaderRender:function(){var a=this,b=a.headerCt,c=b.el;b.mon(c,'mousemove',a.onHeaderCtMouseMove,a);a.markerOwner=a.ownerGrid=a.headerCt.up('tablepanel').ownerGrid;a.tracker=new Ext.dd.DragTracker({disabled:a.disabled,onBeforeStart:a.onBeforeStart.bind(a),onStart:a.onStart.bind(a),onDrag:a.onDrag.bind(a),onEnd:a.onEnd.bind(a),onCancel:a.onCancel.bind(a),tolerance:3,autoStart:300,el:c});b.setTouchAction({panX:!1})},onHeaderCtMouseMove:function(b){var a=this;if(a.headerCt.dragging||a.disabled){if(a.activeHd){a.activeHd.el.dom.style.cursor='';delete a.activeHd}}else {if(b.pointerType!=='touch'){a.findActiveHeader(b)}}},findActiveHeader:function(f){var d=this,e=d.headerCt,i=f.getTarget('.'+d.colHeaderCls,e.el,!0),h=d.ownerGrid,g=h.ownerLockable,a,b,c,j;d.activeHd=null;if(i){a=Ext.getCmp(i.id);if(a.isAtEndEdge(f)){if(e.visibleColumnManager.getColumns().length===1&&e.forceFit){return}b=a}else {if(a.isAtStartEdge(f)){c=e.visibleColumnManager.getColumns();j=a.isGroupHeader?a.getGridColumns()[0]:a;b=c[Ext.Array.indexOf(c,j)-1];if(!b&&g&&!h.isLocked){c=g.lockedGrid.headerCt.visibleColumnManager.getColumns();b=c[c.length-1]}}}if(b){if(b.isGroupHeader){c=b.getGridColumns();b=c[c.length-1]}if(b&&!(b.fixed||b.resizable===!1)){d.activeHd=b;a.el.dom.style.cursor=d.eResizeCursor;if(a.triggerEl){a.triggerEl.dom.style.cursor=d.eResizeCursor}}}else {a.el.dom.style.cursor='';if(a.triggerEl){a.triggerEl.dom.style.cursor=''}}}return d.activeHd},onBeforeStart:function(b){var a=this;a.dragHd=a.activeHd||b.pointerType==='touch'&&a.findActiveHeader(b);if(a.dragHd&&!a.headerCt.dragging){b.claimGesture();a.xDelta=a.dragHd.getX()+a.dragHd.getWidth()-a.tracker.getXY()[0];a.tracker.constrainTo=a.getConstrainRegion();return !0}else {a.headerCt.dragging=!1;return !1}},onCancel:function(a){this.dragHd=this.activeHd=null;this.headerCt.dragging=!1},getConstrainRegion:function(){var a=this,e=a.dragHd.el,c,b=a.ownerGrid,g=b.getSizeModel().width,d=g.shrinkWrap?a.headerCt.getWidth()-a.headerCt.visibleColumnManager.getColumns().length*a.minColWidth:a.maxColWidth,f;if(a.headerCt.forceFit){c=a.dragHd.nextNode('gridcolumn:not([hidden]):not([isGroupHeader])');if(c&&a.headerInSameGrid(c)){d=e.getWidth()+(c.getWidth()-a.minColWidth)}}else {if(b.isLocked&&g.shrinkWrap){d=a.dragHd.up('[scrollerOwner]').getTargetEl().getWidth(!0)-b.getWidth()-(b.ownerLockable.normalGrid.visibleColumnManager.getColumns().length*a.minColWidth+Ext.scrollbar.width())}}f=a.adjustConstrainRegion(e.getRegion(),0,0,0,a.minColWidth);f.right=e.getX()+d;return f},onStart:function(k){var a=this,i=a.dragHd,j=i.el.getWidth(),h=i.getRootHeaderCt(),f,g,b,c,d,e;a.headerCt.dragging=!0;a.origWidth=j;if(!a.dynamic){b=a.markerOwner;if(b.frame&&b.resizable){a.gridOverflowSetting=b.el.dom.style.overflow;b.el.dom.style.overflow='hidden'}f=a.getLeftMarkerX(b);c=b.getLhsMarker();d=b.getRhsMarker();e=a.ownerGrid.body.getHeight()+h.getHeight();g=h.getOffsetsTo(b)[1]-b.el.getBorderWidth('t');c.dom.style.cursor=a.eResizeCursor;d.dom.style.cursor=a.eResizeCursor;c.setLocalY(g);d.setLocalY(g);c.setHeight(e);d.setHeight(e);a.setMarkerX(c,f);a.setMarkerX(d,f+j)}},onDrag:function(b){var a=this;if(a.dynamic){a.doResize()}else {a.setMarkerX(a.getMovingMarker(a.markerOwner),a.calculateDragX(a.markerOwner))}},getMovingMarker:function(a){return a.getRhsMarker()},onEnd:function(c){var a=this,b=a.markerOwner;a.headerCt.dragging=!1;if(a.dragHd){if(!a.dynamic){if('gridOverflowSetting' in a){b.el.dom.style.overflow=a.gridOverflowSetting}a.setMarkerX(b.getLhsMarker(),-9999);a.setMarkerX(b.getRhsMarker(),-9999)}a.doResize();if(c.pointerType!=='touch'){a.dragHd=null;a.activeHd.el.dom.style.cursor=a.eResizeCursor}else {a.dragHd=a.activeHd=null}}a.headerCt.blockNextEvent()},doResize:function(){var b=this,c=b.dragHd,a,d=b.tracker.getOffset('point');if(c&&d[0]){if(c.flex){delete c.flex}Ext.suspendLayouts();b.adjustColumnWidth(d[0]-b.xDelta);if(b.headerCt.forceFit){a=c.nextNode('gridcolumn:not([hidden]):not([isGroupHeader])');if(a&&!b.headerInSameGrid(a)){a=null}if(a){delete a.flex;a.setWidth(a.getWidth()-d[0])}}Ext.resumeLayouts(!0)}},headerInSameGrid:function(a){var b=this.dragHd.up('tablepanel');return !!a.up(b)},disable:function(){var a=this.tracker;this.disabled=!0;if(a){a.disable()}},enable:function(){var a=this.tracker;this.disabled=!1;if(a){a.enable()}},calculateDragX:function(a){return this.tracker.getXY('point')[0]+this.xDelta-a.getX()-a.el.getBorderWidth('l')},getLeftMarkerX:function(a){return this.dragHd.getX()-a.getX()-a.el.getBorderWidth('l')-1},setMarkerX:function(a,b){a.setLocalX(b)},adjustConstrainRegion:function(a,e,d,b,c){return a.adjust(e,d,b,c)},adjustColumnWidth:function(a){this.dragHd.setWidth(this.origWidth+a)}});Ext.define('Ext.grid.header.DragZone',{extend:Ext.dd.DragZone,colHeaderSelector:'.'+Ext.baseCSSPrefix+'column-header',colInnerSelector:'.'+Ext.baseCSSPrefix+'column-header-inner',maxProxyWidth:120,constructor:function(b){var a=this;a.headerCt=b;a.ddGroup=a.getDDGroup();a.autoGroup=!0;a.callParent([b.el]);a.proxy.el.addCls(Ext.baseCSSPrefix+'grid-col-dd')},getDDGroup:function(){return 'header-dd-zone-'+this.headerCt.up('[scrollerOwner]').id},getDragData:function(c){if(c.getTarget(this.colInnerSelector)){var d=c.getTarget(this.colHeaderSelector),a,b;if(d){a=Ext.getCmp(d.id);if(!this.headerCt.dragging&&a.draggable&&!(a.isAtStartEdge(c)||a.isAtEndEdge(c))){b=document.createElement('div');b.role='presentation';b.innerHTML=a.text;return {ddel:b,header:a}}}}return !1},onBeforeDrag:function(){return !(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=!0;this.headerCt.hideMenu();this.callParent(arguments)},onDragDrop:function(){this.headerCt.dragging=!1;this.callParent(arguments)},afterRepair:function(){this.callParent();this.headerCt.dragging=!1},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}});Ext.define('Ext.grid.header.DropZone',{extend:Ext.dd.DropZone,colHeaderCls:Ext.baseCSSPrefix+'column-header',proxyOffsets:[-4,-9],constructor:function(b){var a=this;a.headerCt=b;a.ddGroup=a.getDDGroup();a.autoGroup=!0;a.callParent([b.el])},destroy:function(){Ext.destroy(this.topIndicator,this.bottomIndicator);this.callParent()},getDDGroup:function(){return 'header-dd-zone-'+this.headerCt.up('[scrollerOwner]').id},getTargetFromEvent:function(a){return a.getTarget('.'+this.colHeaderCls)},getTopIndicator:function(){if(!this.topIndicator){this.topIndicator=Ext.getBody().createChild({role:'presentation',cls:Ext.baseCSSPrefix+'col-move-top',html:'&#160;'});this.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)}return this.topIndicator},getBottomIndicator:function(){if(!this.bottomIndicator){this.bottomIndicator=Ext.getBody().createChild({role:'presentation',cls:Ext.baseCSSPrefix+'col-move-bottom',html:'&#160;'})}return this.bottomIndicator},getLocation:function(d,c){var e=d.getXY()[0],a=Ext.fly(c).getRegion(),b;if(a.right-e<=(a.right-a.left)/2){b='after'}else {b='before'}return {pos:b,header:Ext.getCmp(c.id),node:c}},positionIndicator:function(t,v,w){var a=this,f=t.header,n=a.getLocation(w,v),b=n.header,c=n.pos,r,s,e,d,o,m,j,h,g,q,p,l,u,k,i;if(b===a.lastTargetHeader&&c===a.lastDropPos){return}r=f.nextSibling('gridcolumn:not([hidden])');s=f.previousSibling('gridcolumn:not([hidden])');a.lastTargetHeader=b;a.lastDropPos=c;if(!b.draggable&&c==='before'&&b.getIndex()===0){return !1}t.dropLocation=n;if(f!==b&&(c==='before'&&r!==b||c==='after'&&s!==b)&&!b.isDescendantOf(f)){l=Ext.dd.DragDropManager.getRelated(a);u=l.length;k=0;for(;k<u;k++){i=l[k];if(i!==a&&i.invalidateDrop){i.invalidateDrop()}}a.valid=!0;e=a.getTopIndicator();d=a.getBottomIndicator();if(c==='before'){o='bc-tl';m='tc-bl'}else {o='bc-tr';m='tc-br'}j=e.getAlignToXY(b.el,o);h=d.getAlignToXY(b.el,m);g=a.headerCt.el;q=g.getX()-a.indicatorXOffset;p=g.getX()+g.getWidth();j[0]=Ext.Number.constrain(j[0],q,p);h[0]=Ext.Number.constrain(h[0],q,p);e.setXY(j);d.setXY(h);e.show();d.show()}else {a.invalidateDrop()}},invalidateDrop:function(){this.valid=!1;this.hideIndicators()},onNodeOver:function(h,j,i,a){var c=this,d=a.header,b,e,g,f;if(a.header.el.dom===h){b=!1}else {a.isLock=a.isUnlock=a.crossPanel=!1;g=c.getLocation(i,h).header;b=d.ownerCt===g.ownerCt;if(!b&&(!d.ownerCt.isSealed()&&!g.ownerCt.isSealed())){b=!0;e=d.up('tablepanel');f=g.up('tablepanel');if(e!==f){a.crossPanel=!0;a.isLock=f.isLocked&&!e.isLocked;a.isUnlock=!f.isLocked&&e.isLocked;if(a.isUnlock&&d.lockable===!1||a.isLock&&!d.isLockable()){b=!1}}}}if(b){c.positionIndicator(a,h,i)}else {c.valid=!1}return c.valid?c.dropAllowed:c.dropNotAllowed},hideIndicators:function(){var a=this;a.getTopIndicator().hide();a.getBottomIndicator().hide();a.lastTargetHeader=a.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},getNestedHeader:function(a,b){var c=a.items,d;if(a.isGroupHeader&&c.length){d=!b?'first':'last';a=this.getNestedHeader(c[d](),b)}return a},onNodeDrop:function(q,p,r,f){this.headerCt.blockNextEvent();if(!this.valid){return}var g=this,a=f.header,n=f.dropLocation,l=n.pos,b=n.header,e=a.ownerCt,m=e.getRootHeaderCt(),d=b.ownerCt,j=g.headerCt.visibleColumnManager,h=j.getHeaderIndex(a),c,i,k,o;if(f.isLock||f.isUnlock){k=e.up('[scrollerOwner]');c=d.items.indexOf(b);if(l==='after'){c++}if(f.isLock){k.lock(a,c,d)}else {k.unlock(a,c,d)}}else {c=l==='after'?j.getHeaderIndex(g.getNestedHeader(b,1))+1:j.getHeaderIndex(g.getNestedHeader(b,0));g.invalidateDrop();o=a.getWidth();Ext.suspendLayouts();m.isDDMoveInGrid=!f.crossPanel;if(a.isGroupHeader&&b.isGroupHeader){a.setNestedParent(b)}if(l==='before'){d.moveBefore(a,b)}else {d.moveAfter(a,b)}if(c>=0&&!(b.isGroupHeader&&(!b.items||!b.items.length))&&h!==c){i=a.isGroupHeader?a.query('gridcolumn:not([hidden]):not([isGroupHeader])').length:1;if(h<=c&&i>1){c-=i}d.getRootHeaderCt().grid.view.moveColumn(h,c,i)}m.fireEvent('columnmove',e,a,h,c);m.isDDMoveInGrid=!1;if(d.isGroupHeader&&!e.isGroupHeader){if(e!==d){a.savedFlex=a.flex;delete a.flex;a.width=o}}else {if(!e.isGroupHeader){if(a.savedFlex){a.flex=a.savedFlex;delete a.width}}}Ext.resumeLayouts(!0);if(g.headerCt.grid.floated){g.headerCt.grid.updateLayout()}}}});Ext.define('Ext.grid.plugin.HeaderReorderer',{extend:Ext.plugin.Abstract,alias:'plugin.gridheaderreorderer',init:function(a){this.headerCt=a;a.on({boxready:this.onHeaderCtRender,single:!0,scope:this})},destroy:function(){var a=this;a.headerCt.un('boxready',a.onHeaderCtRender,a);Ext.destroy(a.dragZone,a.dropZone);a.headerCt=a.dragZone=a.dropZone=null;a.callParent()},onHeaderCtRender:function(b){var a=this;a.dragZone=new Ext.grid.header.DragZone(a.headerCt);a.dropZone=new Ext.grid.header.DropZone(a.headerCt);if(a.disabled){a.dragZone.disable()}b.setTouchAction({panX:!1})},enable:function(){this.disabled=!1;if(this.dragZone){this.dragZone.enable()}},disable:function(){this.disabled=!0;if(this.dragZone){this.dragZone.disable()}}});Ext.define('Ext.grid.header.Container',{extend:Ext.container.Container,alias:'widget.headercontainer',border:!0,baseCls:Ext.baseCSSPrefix+'grid-header-ct',dock:'top',weight:100,defaultType:'gridcolumn',defaultWidth:100,sortAscText:'Sort Ascending',sortDescText:'Sort Descending',sortClearText:'Clear Sort',columnsText:'Columns',headerOpenCls:Ext.baseCSSPrefix+'column-header-open',menuSortAscCls:Ext.baseCSSPrefix+'hmenu-sort-asc',menuSortDescCls:Ext.baseCSSPrefix+'hmenu-sort-desc',menuColsIcon:Ext.baseCSSPrefix+'cols-icon',blockEvents:!1,dragging:!1,sortOnClick:!0,focusableContainer:!1,childHideCount:0,sortable:!0,enableColumnHide:!0,initComponent:function(){var a=this;a.plugins=a.plugins||[];a.defaults=a.defaults||{};if(!a.isColumn){a.isRootHeader=!0;if(a.enableColumnResize){a.resizer=new Ext.grid.plugin.HeaderResizer();a.plugins.push(a.resizer)}if(a.enableColumnMove){a.reorderer=new Ext.grid.plugin.HeaderReorderer();a.plugins.push(a.reorderer)}}if(a.isColumn&&!a.isGroupHeader){if(!a.items||!a.items.length){a.isContainer=a.isFocusableContainer=!1;a.layout={type:'container',calculate:Ext.emptyFn}}if(!a.hasOwnProperty('focusable')){a.focusable=!0}}else {a.layout=Ext.apply({type:'gridcolumn',align:'stretch'},a.initialConfig.layout);a.defaults.columnLines=a.columnLines;if(a.isRootHeader){if(!a.hiddenHeaders){a.focusableContainer=!0;a.ariaRole='rowgroup'}a.columnManager=new Ext.grid.ColumnManager(!1,a);a.visibleColumnManager=new Ext.grid.ColumnManager(!0,a);if(a.grid){a.grid.columnManager=a.columnManager;a.grid.visibleColumnManager=a.visibleColumnManager}}else {a.visibleColumnManager=new Ext.grid.ColumnManager(!0,a);a.columnManager=new Ext.grid.ColumnManager(!1,a)}}a.menuTask=new Ext.util.DelayedTask(a.updateMenuDisabledState,a);a.callParent()},isNested:function(){return !!this.getRootHeaderCt().down('[isNestedParent]')},isNestedGroupHeader:function(){var a=this,b=a.getRefOwner().query('>:not([hidden])');return b.length===1&&b[0]===a},isSealed:function(){return !!(this.sealed||this.getInherited().sealed)},maybeShowNestedGroupHeader:function(){var a=this.items,b;if(a&&a.length===1&&(b=a.getAt(0))&&b.hidden){b.show()}},setNestedParent:function(a){a.isNestedParent=!1;a.ownerCt.isNestedParent=!!(this.ownerCt.items.length===1&&a.ownerCt.items.length===1)},initEvents:function(){var a=this,b,c;a.callParent();if(!a.isColumn&&!a.isGroupHeader){b=a.onHeaderCtEvent;c={click:b,dblclick:b,contextmenu:b,mousedown:a.onHeaderCtMouseDown,mouseover:a.onHeaderCtMouseOver,mouseout:a.onHeaderCtMouseOut,scope:a};if(Ext.supports.Touch){c.longpress=a.onHeaderCtLongPress}a.mon(a.el,c)}},onHeaderCtEvent:function(a,g){var c=this,f=c.getHeaderElByEvent(a),b,e,d;if(c.longPressFired){c.longPressFired=!1;return}if(f&&!c.blockEvents){b=Ext.getCmp(f.id);if(b){e=b[b.clickTargetName];if(!b.isGroupHeader&&!b.isContainer||a.within(e)){if(a.type==='click'||a.type==='tap'){d=b.onTitleElClick(a,e,c.sortOnClick);if(d){c.onHeaderTriggerClick(d,a,a.pointerType==='touch'?d.el:d.triggerEl)}else {c.onHeaderClick(b,a,g)}}else {if(a.type==='contextmenu'){c.onHeaderContextMenu(b,a,g)}else {if(a.type==='dblclick'){b.onTitleElDblClick(a,e.dom)}}}}}}},blockNextEvent:function(){var a=this;a.blockEvents=!0;if(!a.unblockTimer){a.unblockTimer=Ext.asap(a.unblockEvents,a)}},unblockEvents:function(){this.blockEvents=this.unblockTimer=!1},onHeaderCtMouseDown:function(h,g){var a=Ext.Component.from(g),c,b,f,e,d;if(!h.defaultPrevented&&a!==this){if(a.isGroupHeader){c=a.getVisibleGridColumns();e=this.getScrollable();for(b=0,f=c.length;b<f;++b){d=c[b];if(e.doIsInView(d.el,!0).x){a=d;break}}}a.focus()}},onHeaderCtMouseOver:function(b,e){var c,a,d;if(!b.within(this.el,!0)){c=b.getTarget('.'+Ext.grid.column.Column.prototype.baseCls);a=c&&Ext.getCmp(c.id);if(a){d=a[a.clickTargetName];if(b.within(d)){a.onTitleMouseOver(b,d.dom)}}}},onHeaderCtMouseOut:function(c,g){var f='.'+Ext.grid.column.Column.prototype.baseCls,d=c.getTarget(f),e=c.getRelatedTarget(f),a,b;if(d!==e){if(d){a=Ext.getCmp(d.id);if(a){b=a[a.clickTargetName];a.onTitleMouseOut(c,b.dom)}}if(e){a=Ext.getCmp(e.id);if(a){b=a[a.clickTargetName];a.onTitleMouseOver(c,b.dom)}}}},onHeaderCtLongPress:function(d){var c=this,b=c.getHeaderElByEvent(d),a;if(b){a=Ext.getCmp(b.id);if(a&&!a.menuDisabled){c.longPressFired=!0;c.showMenuBy(d,b,a)}}},getHeaderElByEvent:function(a){return a.getTarget('.'+Ext.grid.column.Column.prototype.baseCls)},isLayoutRoot:function(){if(this.hiddenHeaders){return !1}return this.callParent()},getRootHeaderCt:function(){return this.isRootHeader?this:this.up('[isRootHeader]')},doDestroy:function(){var a=this;if(a.menu){a.menu.un('hide',a.onMenuHide,a)}Ext.unasap(a.unblockTimer);a.menuTask.cancel();Ext.destroy(a.visibleColumnManager,a.columnManager,a.menu);a.callParent()},removeAll:function(b){var a=this;a.suspendEvent('columnschanged');a.callParent([b]);a.resumeEvent('columnschanged');a.fireEvent('columnschanged',a)},applyColumnsState:function(j,l){if(!j){return}var f=this,k=f.items.items,m=k.length,a=0,i=!1,c=[],g=[],h,e,b,d;f.purgeCache();for(a=0;a<m;a++){e=k[a];b=j[e.getStateId()];if(b){d=b.index;c[d]=e;if(a!==d){i=!0}if(e.applyColumnState){e.applyColumnState(b,l)}}else {g.push({index:a,column:e})}}c=Ext.Array.clean(c);h=g.length;if(h){for(a=0;a<h;a++){b=g[a];d=b.index;if(d<c.length){i=!0;Ext.Array.splice(c,d,0,b.column)}else {c.push(b.column)}}}if(i){f.applyingState=!0;f.removeAll(!1);delete f.applyingState;f.add(c)}},getColumnsState:function(){var c=this,b=[],a;c.items.each(function(c){a=c.getColumnState&&c.getColumnState();if(a){b.push(a)}});return b},onAdd:function(c){var b=this,a;b.callParent(arguments);a=b.getRootHeaderCt();b.onHeadersChanged(c,a&&a.isDDMoveInGrid)},move:function(b,e){var c=this,d=c.items,a;if(b.isComponent){a=b;b=d.indexOf(a)}else {a=d.getAt(b)}a.visibleFromIdx=c.getRootHeaderCt().visibleColumnManager.indexOf(a);c.callParent(arguments)},onMove:function(a,g,h){var c=this,e=c.getRootHeaderCt(),f=e.visibleColumnManager,d=1,b;c.onHeadersChanged(a,!0);b=f.indexOf(a);if(b>=a.visibleFromIdx){b++}c.callParent(arguments);if(a.isGroupHeader){d=a.visibleColumnManager.getColumns().length}e.onHeaderMoved(a,d,a.visibleFromIdx,b)},maybeContinueRemove:function(){var a=this;return a.isGroupHeader&&!a.applyingState&&!a.isNestedParent&&a.ownerCt&&!a.items.getCount()},onRemove:function(b,c){var a=this,d=a.ownerCt;a.callParent([b,c]);if(!a.destroying){if(!a.getRootHeaderCt().isDDMoveInGrid){a.onHeadersChanged(b,!1)}if(a.maybeContinueRemove()){if(b.rendered){b.detachFromBody()}a.destroyAfterRemoving=!0;Ext.suspendLayouts();d.remove(a,!1);Ext.resumeLayouts(!0)}}},onHeadersChanged:function(d,c){var b,a=this.getRootHeaderCt();this.purgeHeaderCtCache(this);if(a){a.onColumnsChanged();b=a.ownerCt;if(b&&!c){b.onHeadersChanged(a,d)}}},onHeaderMoved:function(d,f,c,e){var a=this,b=a.ownerCt;if(a.rendered){if(b&&b.onHeaderMove){b.onHeaderMove(a,d,f,c,e)}a.fireEvent('columnmove',a,d,c,e)}},onColumnsChanged:function(){var a=this,d=a.menu,b,c;if(a.rendered){a.fireEvent('columnschanged',a);if(d){b=d.child('#columnItemSeparator');c=d.child('#columnItem');if(b){b.destroy()}if(c){c.destroy()}}}},lookupComponent:function(b){var a=this.callParent(arguments);if(!a.isGroupHeader&&a.width===undefined&&!a.flex){a.width=this.defaultWidth}return a},setSortState:function(){var e=this.up('[store]').store,d=this.visibleColumnManager.getColumns(),f=d.length,c,b,a;for(c=0;c<f;c++){b=d[c];a=b.getSorter();if(a){if(!e.getSorters().contains(a)){a=null}}else {a=e.getSorters().get(b.getSortParam())}b.setSortState(a)}},getHeaderMenu:function(){var b=this.getMenu(),a;if(b){a=b.child('#columnItem');if(a){return a.menu}}return null},onHeaderVisibilityChange:function(d,e){var a=this,c=a.getHeaderMenu(),b;a.purgeHeaderCtCache(d.ownerCt);if(c){b=a.getMenuItemForHeader(c,d);if(b){b.setChecked(e,!0)}if(c.isVisible()){a.menuTask.delay(50)}}},updateMenuDisabledState:function(e){var f=this,g=f.query('gridcolumn:not([hidden])'),b,h=g.length,d,a,c;if(!e){e=f.getMenu()}for(b=0;b<h;++b){d=g[b];a=f.getMenuItemForHeader(e,d);if(a){c=d.isHideable()?'enable':'disable';if(a.menu){c+='CheckChange'}a[c]()}}},getMenuItemForHeader:function(b,a){return a?b.down('menucheckitem[headerId='+a.id+']'):null},onHeaderShow:function(b){var a=this,d=a.ownerCt,c=b.lastHiddenHeader;if(!d){return}if(a.forceFit){delete a.flex}if(c&&!b.query('[hidden=false]').length){c.show();b.lastHiddenHeader=null}a.onHeaderVisibilityChange(b,!0);d.onHeaderShow(a,b);a.fireEvent('columnshow',a,b);a.fireEvent('columnschanged',this)},onHeaderHide:function(b){var a=this,c=a.ownerCt;if(!c){return}a.onHeaderVisibilityChange(b,!1);c.onHeaderHide(a,b);a.fireEvent('columnhide',a,b);a.fireEvent('columnschanged',this)},onHeaderResize:function(c,d){var a=this,b=a.ownerCt;if(b){b.onHeaderResize(a,c,d)}a.fireEvent('columnresize',a,c,d)},onHeaderClick:function(a,d,f){var b=this,e=a.getView().getSelectionModel(),c;a.fireEvent('headerclick',b,a,d,f);c=b.fireEvent('headerclick',b,a,d,f);if(c!==!1){if(e.onHeaderClick){e.onHeaderClick(b,a,d)}}return c},onHeaderContextMenu:function(a,b,c){a.fireEvent('headercontextmenu',this,a,b,c);this.fireEvent('headercontextmenu',this,a,b,c)},onHeaderTriggerClick:function(a,c,d){var b=this;if(a.fireEvent('headertriggerclick',b,a,c,d)!==!1&&b.fireEvent('headertriggerclick',b,a,c,d)!==!1){if(a.activeMenu){if(c.pointerType){a.activeMenu.hide()}else {a.activeMenu.focus()}}else {b.showMenuBy(c,d,a)}}},showMenuBy:function(d,g,c){var a=this.getMenu(),f=a.down('#ascItem'),e=a.down('#descItem'),b;a.activeHeader=a.ownerCmp=c;c.setMenuActive(a);b=c.sortable?'enable':'disable';if(f){f[b]()}if(e){e[b]()}a.autoFocus=!d||d.keyCode;a.showBy(g,'tl-bl?');if(!a.isVisible()){this.onMenuHide(a)}},hideMenu:function(){if(this.menu){this.menu.hide()}},onMenuHide:function(a){a.activeHeader.setMenuActive(!1)},purgeHeaderCtCache:function(a){while(a){a.purgeCache();if(a.isRootHeader){return}a=a.ownerCt}},purgeCache:function(){var a=this,b=a.visibleColumnManager,c=a.columnManager;a.gridVisibleColumns=a.gridDataColumns=a.hideableColumns=null;if(b){b.invalidate();c.invalidate()}},getMenu:function(){var a=this,b=a.view&&a.view.ownerGrid;if(!a.menu){a.menu=new Ext.menu.Menu({hideOnParentHide:!1,items:a.getMenuItems(),listeners:{beforeshow:a.beforeMenuShow,hide:a.onMenuHide,scope:a}});a.fireEvent('menucreate',a,a.menu);if(b){b.fireEvent('headermenucreate',b,a.menu,a)}}return a.menu},beforeMenuShow:function(d){var a=this,e=d.child('#columnItem'),b,c;if(!e){b=a.enableColumnHide?a.getColumnMenu(a):null;c=a.sortable?2:0;if(b&&b.length){d.insert(c,[{itemId:'columnItemSeparator',xtype:'menuseparator'},{itemId:'columnItem',text:a.columnsText,iconCls:a.menuColsIcon,menu:{items:b},hideOnClick:!1}])}}a.updateMenuDisabledState(a.menu)},getMenuItems:function(){var a=this,b=[],c=a.enableColumnHide?a.getColumnMenu(a):null;if(a.sortable){b=[{itemId:'ascItem',text:a.sortAscText,iconCls:a.menuSortAscCls,handler:a.onSortAscClick,scope:a},{itemId:'descItem',text:a.sortDescText,iconCls:a.menuSortDescCls,handler:a.onSortDescClick,scope:a}]}if(c&&c.length){if(a.sortable){b.push({itemId:'columnItemSeparator',xtype:'menuseparator'})}b.push({itemId:'columnItem',text:a.columnsText,iconCls:a.menuColsIcon,menu:c,hideOnClick:!1})}return b},onSortAscClick:function(){var b=this.getMenu(),a=b.activeHeader;a.sort('ASC')},onSortDescClick:function(){var b=this.getMenu(),a=b.activeHeader;a.sort('DESC')},getColumnMenu:function(f){var b=[],c=0,a,e=f.query('>gridcolumn[hideable]'),g=e.length,d;for(;c<g;c++){a=e[c];d=new Ext.menu.CheckItem({text:a.menuText||a.text,checked:!a.hidden,hideOnClick:!1,headerId:a.id,menu:a.isGroupHeader?this.getColumnMenu(a):undefined,checkHandler:this.onColumnCheckChange,scope:this});b.push(d)}return b.length?b:null},onColumnCheckChange:function(c,b){var a=Ext.getCmp(c.headerId);if(a.rendered){a[b?'show':'hide']()}else {a.hidden=!b}},getColumnCount:function(){return this.getGridColumns().length},getTableWidth:function(){var b=0,c=this.getVisibleGridColumns(),d=c.length,a;for(a=0;a<d;a++){b+=c[a].getCellWidth()||0}return b},getVisibleGridColumns:function(){var b=this,e,f,a,g,d,c;if(b.gridVisibleColumns){return b.gridVisibleColumns}e=b.getGridColumns();f=b.getRootHeaderCt();a=[];g=e.length;for(d=0;d<g;d++){c=e[d];if(!c.hidden&&!c.isColumnHidden(f)){a[a.length]=c}}b.gridVisibleColumns=a;return a},isColumnHidden:function(b){var a=this.getRefOwner();while(a&&a!==b){if(a.hidden){return !0}a=a.getRefOwner()}return !1},getGridColumns:function(g,f){if(!g&&this.gridDataColumns){return this.gridDataColumns}var i=this,c=g||[],h,b,d,a,e;f=f||i.hidden;if(i.items){h=i.items.items;if(h){for(b=0,d=h.length;b<d;b++){a=h[b];if(a.isGroupHeader){a.visibleIndex=c.length;a.getGridColumns(c,f)}else {a.hiddenAncestor=f;c.push(a)}}}}if(!g){i.gridDataColumns=c}if(!g&&d){for(b=0,d=c.length;b<d;b++){a=c[b];a.fullColumnIndex=b;a.isFirstVisible=a.isLastVisible=!1;if(!(a.hidden||a.hiddenAncestor)){if(!e){a.isFirstVisible=!0}e=a}}if(e){e.isLastVisible=!0}}return c},getHideableColumns:function(){var b=this,a=b.hideableColumns;if(!a){a=b.hideableColumns=b.query('[hideable]')}return a},getHeaderIndex:function(a){if(!this.columnManager){this.columnManager=this.getRootHeaderCt().columnManager}return this.columnManager.getHeaderIndex(a)},getHeaderAtIndex:function(a){if(!this.columnManager){this.columnManager=this.getRootHeaderCt().columnManager}return this.columnManager.getHeaderAtIndex(a)},getVisibleHeaderClosestToIndex:function(a){if(!this.visibleColumnManager){this.visibleColumnManager=this.getRootHeaderCt().visibleColumnManager}return this.visibleColumnManager.getVisibleHeaderClosestToIndex(a)},applyForceFit:function(b){var k=this,j=k.view,i=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,l=!1,m=Ext.grid.header.Container.prototype.defaultWidth,h=k.el.dom.clientWidth-(j.el.dom.scrollHeight>j.el.dom.clientHeight?Ext.scrollbar.width():0),n=0,e=k.getVisibleGridColumns(),o=b.hidden,g,c,a,f,d;function getTotalFlex(){for(c=0,g=e.length;c<g;c++){a=e[c];if(a===b){continue}a.flex=a.flex||a.width||a.getWidth();n+=a.flex;a.width=null}}function applyWidth(){var f;for(c=0,g=e.length;c<g;c++){a=e[c];f=a===b;if(l&&!f){a.flex=i;a.width=null}else {if(!f){d=a.flex||m;a.flex=Math.max(Math.ceil(d/n*h),i);a.width=null}}a.setWidth(a.width||a.flex)}}Ext.suspendLayouts();f=h-(e.length+1)*i;b.flex=null;if(o){d=b.width||b.savedWidth||Math.floor(f/(e.length+1));b.savedWidth=null}else {d=j.getMaxContentWidth(b)}if(d>f){b.width=f;l=!0}else {b.width=d;h-=d+m;getTotalFlex()}applyWidth();Ext.resumeLayouts(!0)},autoSizeColumn:function(a){var b=this.view;if(b){b.autoSizeColumn(a);if(this.forceFit){this.applyForceFit(a)}}},getRefItems:function(b){var a=this.callParent([b]);if(this.menu){a.push(this.menu)}return a},initInheritedState:function(a,b){if(this.sealed){a.sealed=!0}this.callParent([a,b])},privates:{beginChildHide:function(){++this.childHideCount},endChildHide:function(){--this.childHideCount},getFocusables:function(){return this.isRootHeader?this.getVisibleGridColumns():this.items.items},initFocusableContainerKeyNav:function(b){var a=this;if(!a.focusableKeyNav){a.focusableKeyNav=new Ext.util.KeyNav({target:b,scope:a,down:a.showHeaderMenu,left:a.onFocusableContainerLeftKey,right:a.onFocusableContainerRightKey,home:a.onHomeKey,end:a.onEndKey,space:a.onHeaderActivate,enter:a.onHeaderActivate})}},onHomeKey:function(a){return this.focusChild(null,!0,a)},onEndKey:function(a){return this.focusChild(null,!1,a)},showHeaderMenu:function(b){var a=this.getFocusableFromEvent(b);if(a&&a.isColumn&&a.triggerEl){this.onHeaderTriggerClick(a,b,a.triggerEl)}},onHeaderActivate:function(b){var a=this.getFocusableFromEvent(b),d,c;if(a&&a.isColumn){d=a.getView();if(a.sortable&&this.sortOnClick){c=d.getNavigationModel().getLastFocused();a.toggleSortState();if(c){d.ownerCt.ensureVisible(c.record)}}else {if(b.getKey()===b.SPACE){a.onTitleElClick(b,b.target,this.sortOnClick)}}return this.onHeaderClick(a,b,a.el)}},onOwnerGridReconfigure:function(c,b){var a=this;if(!a.rendered||a.destroying||a.destroyed){return}if(c||b){if(Ext.Component.layoutSuspendCount){a.$initFocusableContainerAfterLayout=!0}else {a.initFocusableContainer()}}}}});Ext.define('Ext.grid.column.Column',{extend:Ext.grid.header.Container,xtype:'gridcolumn',alternateClassName:'Ext.grid.Column',config:{triggerVisible:!1,sorter:null,align:'start'},baseCls:Ext.baseCSSPrefix+'column-header',hoverCls:Ext.baseCSSPrefix+'column-header-over',ariaRole:'columnheader',focusableContainer:!1,sortState:null,possibleSortStates:['ASC','DESC'],ariaSortStates:{ASC:'ascending',DESC:'descending'},childEls:['titleEl','triggerEl','textEl','textContainerEl','textInnerEl'],headerWrap:!1,renderTpl:['<div id="{id}-titleEl" data-ref="titleEl" role="presentation"','{tipMarkup}class="',Ext.baseCSSPrefix,'column-header-inner<tpl if="!$comp.isContainer"> ',Ext.baseCSSPrefix,'leaf-column-header</tpl>','<tpl if="empty"> ',Ext.baseCSSPrefix,'column-header-inner-empty</tpl>">','<div id="{id}-textContainerEl" data-ref="textContainerEl" role="presentation" class="',Ext.baseCSSPrefix,'column-header-text-container">','<div role="presentation" class="',Ext.baseCSSPrefix,'column-header-text-wrapper">','<div id="{id}-textEl" data-ref="textEl" role="presentation" class="',Ext.baseCSSPrefix,'column-header-text','{childElCls}">','<span id="{id}-textInnerEl" data-ref="textInnerEl" role="presentation" class="',Ext.baseCSSPrefix,'column-header-text-inner">{text}</span>','</div>','{%','values.$comp.afterText(out, values);','%}','</div>','</div>','<tpl if="!menuDisabled">','<div id="{id}-triggerEl" data-ref="triggerEl" role="presentation" unselectable="on" class="',Ext.baseCSSPrefix,'column-header-trigger','{childElCls}" style="{triggerStyle}"></div>','</tpl>','</div>','{%this.renderContainer(out,values)%}'],dataIndex:null,text:'\xa0',menuText:null,emptyCellText:'\xa0',sortable:!0,resizable:!0,hideable:!0,menuDisabled:!1,renderer:!1,draggable:!0,tooltipType:'qtip',initDraggable:Ext.emptyFn,tdCls:'',dirtyText:'Cell value has been edited',producesHTML:!0,ignoreExport:!1,exportStyle:null,exportRenderer:!1,exportSummaryRenderer:!1,isHeader:!0,isColumn:!0,scrollable:!1,requiresMenu:!1,tabIndex:-1,ascSortCls:Ext.baseCSSPrefix+'column-header-sort-ASC',descSortCls:Ext.baseCSSPrefix+'column-header-sort-DESC',componentLayout:'columncomponent',groupSubHeaderCls:Ext.baseCSSPrefix+'group-sub-header',groupHeaderCls:Ext.baseCSSPrefix+'group-header',clickTargetName:'titleEl',detachOnRemove:!0,initResizable:Ext.emptyFn,rendererNames:{column:'renderer',edit:'editRenderer',summary:'summaryRenderer'},formatterNames:{column:'formatter',edit:'editFormatter',summary:'summaryFormatter'},initComponent:function(){var a=this;if(!a.rendererScope){a.rendererScope=a.scope}if(a.header!=null){a.text=a.header;a.header=null}if(a.cellWrap){a.tdCls=(a.tdCls||'')+' '+Ext.baseCSSPrefix+'wrap-cell'}if(a.columns!=null){a.isGroupHeader=!0;a.ariaRole='presentation';a.items=a.columns;a.columns=null;a.cls=(a.cls||'')+' '+a.groupHeaderCls;a.sortable=a.resizable=!1;a.align='center'}else {if(a.flex){a.minWidth=a.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth}}a.addCls(Ext.baseCSSPrefix+'column-header-align-'+a.getMappedAlignment(a.align));a.setupRenderer();a.setupRenderer('edit');a.setupRenderer('summary');a.callParent()},beforeLayout:function(){var a=this,b=a.items,f=0,g=a.flex,h,d,c,e;if(g&&a.isGroupHeader){if(!Ext.isArray(b)){b=b.items}h=b.length;for(d=0;!e&&d<h;d++){c=b[d];if(c.isColumn&&!c.hidden){++f;e=c.flex}}if(!e&&f){a.savedFlex=g;a.flex=null}}a.callParent()},onAdded:function(b,d,c){var a=this;a.callParent([b,d,c]);a.view=a.rootHeaderCt=a.cellSelector=a.visibleIndex=null;if(!a.headerId){a.calculateHeaderId()}a.configureStateInfo()},_initSorterFn:function(g,h){var a=this,e=a.column,b=e.resolveListenerScope(),f=a.methodName,c=b&&b[f],d=0;if(c){a.setSorterFn(c);a.column=null;d=c.call(b,g,h)}return d},applySorter:function(b){var c=this,e=b?b.sorterFn:null,d,a;if(typeof e==='string'){a=new Ext.util.Sorter(Ext.applyIf({sorterFn:c._initSorterFn},b));a.methodName=e;a.column=c}else {d=c.getRootHeaderCt().up('tablepanel');a=d.store.getData().getSorters().decodeSorter(b)}return a},updateAlign:function(a){this.textAlign=this.getMappedAlignment(a)},bindFormatter:function(b){var a=this;return function(c){return b(c,a.rendererScope||a.resolveListenerScope())}},bindRenderer:function(b){var a=this;a.hasCustomRenderer=!0;return function(){return Ext.callback(b,a.rendererScope,arguments,0,a)}},setupRenderer:function(b){var a=this,d,c,e,f,g;b=b||'column';d=a[a.formatterNames[b]];c=a[a.rendererNames[b]];e=b==='column';if(!d){if(c){if(typeof c==='string'){c=a[a.rendererNames[b]]=a.bindRenderer(c);g=!0}if(e){a.hasCustomRenderer=g||a.shouldFlagCustomRenderer(c)}}else {if(e&&a.defaultRenderer){a.renderer=a.defaultRenderer;a.usingDefaultRenderer=!0}}}else {f=Ext.app.bind.Parser.fly(d);d=f.compileFormat();f.release();a[a.formatterNames[b]]=null;a[a.rendererNames[b]]=a.bindFormatter(d)}},getView:function(){var a;if(!this.view){a=this.getRootHeaderCt();if(a){this.view=a.view}}return this.view},onFocusLeave:function(a){this.callParent([a]);if(this.activeMenu){this.activeMenu.hide()}},initItems:function(){var a=this;a.callParent(arguments);if(a.isGroupHeader){if(a.config.hidden||!a.hasVisibleChildColumns()){a.hide()}}},hasVisibleChildColumns:function(){var c=this.items.items,d=c.length,a,b;for(a=0;a<d;++a){b=c[a];if(b.isColumn&&!b.hidden){return !0}}return !1},onAdd:function(b){var a=this;if(b.isColumn){b.isSubHeader=!0;b.addCls(a.groupSubHeaderCls)}if(a.isGroupHeader&&a.hidden&&a.hasVisibleChildColumns()){a.show()}a.callParent([b])},onRemove:function(b,c){var a=this;if(b.isSubHeader){b.isSubHeader=!1;b.removeCls(a.groupSubHeaderCls)}a.callParent([b,c]);if(!(a.destroyed||a.destroying)&&!a.hasVisibleChildColumns()&&(a.ownerCt&&!a.ownerCt.isNested())){a.hide()}},initRenderData:function(){var a=this,b='',d=a.tooltip,c=a.text,e=a.tooltipType==='qtip'?'data-qtip':'title';if(!Ext.isEmpty(d)){b=e+'="'+d+'" '}return Ext.applyIf(a.callParent(arguments),{text:c,empty:a.isEmptyText(c),menuDisabled:a.menuDisabled,tipMarkup:b,triggerStyle:this.getTriggerVisible()?'display:block':''})},applyColumnState:function(a,g){var b=this,e=b.getSorter(),d=g&&g.sorters,h,c,i,f;if(b.getStateful()===!1){return}if(e&&d&&(h=d.length)){f=e.getId();for(c=0;!i&&c<h;c++){if(d[c].id===f){e.setDirection(d[c].direction);d[c]=e;break}}}b.applyColumnsState(a.columns);if(a.hidden!=null){b.hidden=a.hidden}if(a.locked!=null){b.locked=a.locked}if(a.sortable!=null){b.sortable=a.sortable}if(a.width!=null){b.flex=null;b.width=a.width}else {if(a.flex!=null){b.width=null;b.flex=a.flex}}},getColumnState:function(){var a=this,c=a.items.items,b={id:a.getStateId()};if(a.getStateful()===!1){return}a.savePropsToState(['hidden','sortable','locked','flex','width'],b);if(a.isGroupHeader&&c&&c.length){b.columns=a.getColumnsState()}if('width' in b){delete b.flex}return b},setText:function(b){var a=this,c;a.text=b;if(a.rendered){c=a.getView().ownerGrid;a.textInnerEl.setHtml(b);a.titleEl.toggleCls(Ext.baseCSSPrefix+'column-header-inner-empty',a.isEmptyText(b));c.syncHeaderVisibility()}},getIndex:function(){return this.isGroupColumn?!1:this.getRootHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return this.visibleIndex!=null?this.visibleIndex:this.isGroupColumn?!1:Ext.Array.indexOf(this.getRootHeaderCt().getVisibleGridColumns(),this)},getLabelChain:function(){var c=this,b=[],a;while(a=c.up('headercontainer')){if(a.text){b.unshift(Ext.util.Format.stripTags(a.text))}c=a}return b},beforeRender:function(){var a=this,d=a.getRootHeaderCt(),e=a.isSortable(),c=[],b;a.textAlign=a.getMappedAlignment(a.getAlign());a.callParent();if(!a.requiresMenu&&!e&&!a.groupable&&!a.lockable&&(d.grid.enableColumnHide===!1||!d.getHideableColumns().length)){a.menuDisabled=!0}if(a.cellWrap){a.variableRowHeight=!0}b=a.ariaRenderAttributes||(a.ariaRenderAttributes={});b['aria-readonly']=!0;if(e){b['aria-sort']=a.ariaSortStates[a.sortState]}if(a.isSubHeader){c=a.getLabelChain();if(a.text){c.push(Ext.util.Format.stripTags(a.text))}if(c.length){b['aria-label']=c.join(' ')}}a.protoEl.unselectable()},getTriggerElWidth:function(){var c=this,a=c.triggerEl,b=c.self.triggerElWidth;if(a&&b===undefined){a.setStyle('display','block');b=c.self.triggerElWidth=a.getWidth();a.setStyle('display','')}return b},afterComponentLayout:function(c,g,b,f){var a=this,d=a.getRootHeaderCt(),e=a.savedFlex;a.callParent([c,g,b,f]);if(d&&(b!=null||a.flex)&&c!==b){d.onHeaderResize(a,c)}if(e){a.flex=e;delete a.savedFlex}},doDestroy:function(){Ext.destroy(this.field,this.editor);this.callParent()},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(a){if(this.triggerEl){this.onTitleElClick(a,this.triggerEl.dom||this.el.dom)}},onEnterKey:function(a){this.onTitleElClick(a,this.el.dom)},onTitleElDblClick:function(e){var a=this,b,c,d;if(a.isAtStartEdge(e)){b=a.previousNode('gridcolumn:not([hidden]):not([isGroupHeader])');if(b&&b.getRootHeaderCt()===a.getRootHeaderCt()){b.autoSize()}}else {if(a.isAtEndEdge(e)){if(a.isGroupHeader&&e.getPoint().isContainedBy(a.layout.innerCt)){c=a.query('gridcolumn:not([hidden]):not([isGroupHeader])');c[c.length-1].autoSize();return}else {d=a.getRootHeaderCt();if(d.visibleColumnManager.getColumns().length===1&&d.forceFit){return}}a.autoSize()}}},autoSize:function(){var a=this,c,d,b,e;if(a.resizable){if(a.isGroupHeader){c=a.query('gridcolumn:not([hidden]):not([isGroupHeader])');d=c.length;e=a.getRootHeaderCt();Ext.suspendLayouts();for(b=0;b<d;b++){e.autoSizeColumn(c[b])}Ext.resumeLayouts(!0);return}a.getRootHeaderCt().autoSizeColumn(a)}},isEmptyText:function(a,b){if(b){return Ext.String.trim(a).length===0}else {return a==null||a===''}},onTitleElClick:function(b,h,g){var a=this,c,d,e,f;if(b.pointerType==='touch'){e=a.previousSibling(':not([hidden])');if(!a.menuDisabled){f=parseInt(a.triggerEl.getStyle('width'),10);if(isNaN(f)){f=a.getHandleWidth(b)*3}if(a.isAtEndEdge(b,f)){c=a}}if(!c&&e&&!e.menuDisabled&&a.isAtStartEdge(b)){c=e}}else {d=a.triggerEl;c=d&&(b.target===d.dom||h===d||b.within(d))?a:null}if(g!==!1){if(b.getKey()||!c&&a.isSortZone(b)){a.toggleSortState()}}return c},processEvent:function(d,e,c,a,b,f){return this.fireEvent.apply(this,arguments)},isSortable:function(){var a=this.getRootHeaderCt(),c=a?a.grid:null,b=this.sortable;if(c&&c.sortableColumns===!1){b=!1}return b},toggleSortState:function(){if(this.isSortable()){this.sort()}},sort:function(a){var g=this,f=g.up('tablepanel'),c=f.store,e=c.isSorted(),h=e&&c.getSorters(),b=g.getSorter(),i=h&&h.indexOf(b),d;Ext.suspendLayouts();if(b){d=b.getDirection();if(!a||d!==a||!e||i===-1){if((!e||i===-1)&&d!==a){b.setDirection(a)}c.sort(b,f.multiColumnSort?'multi':'replace')}}else {c.sort(g.getSortParam(),a,f.multiColumnSort?'multi':'replace')}Ext.resumeLayouts(!0)},getSortParam:function(){return this.dataIndex},setSortState:function(h){var a=this,g=h&&h.getDirection(),c=a.ascSortCls,b=a.descSortCls,f=a.getRootHeaderCt(),d=a.ariaEl.dom,e;switch(g){case 'DESC':if(!a.hasCls(b)){a.addCls(b);a.sortState='DESC';e=!0};a.removeCls(c);break;case 'ASC':if(!a.hasCls(c)){a.addCls(c);a.sortState='ASC';e=!0};a.removeCls(b);break;default:a.removeCls([c,b]);a.sortState=null;break;}if(d){if(a.sortState){d.setAttribute('aria-sort',a.ariaSortStates[a.sortState])}else {d.removeAttribute('aria-sort')}}if(e){f.fireEvent('sortchange',f,a,g)}},isHideable:function(){var a={hideCandidate:this,result:this.hideable};if(a.result){this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[a])}return a.result},hasOtherMenuEnabledChildren:function(b){var a,c;if(!this.isXType('headercontainer')){b.result=!1;return !1}a=this.query('>gridcolumn:not([hidden]):not([menuDisabled])');c=a.length;if(Ext.Array.contains(a,b.hideCandidate)){c--}if(c){return !1}b.hideCandidate=this},isLockable:function(){var a={result:this.lockable!==!1};if(a.result){this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[a])}return a.result},isLocked:function(){if(this.locked==null){this.locked=this.getInherited().inLockedGrid}return this.locked},hasMultipleVisibleChildren:function(a){if(!this.isXType('headercontainer')){a.result=!1;return !1}if(this.query('>gridcolumn:not([hidden])').length>1){return !1}},hide:function(){var a=this,b=a.getRootHeaderCt(),c=a.getRefOwner();if(c.constructing){a.callParent();return a}if(a.rendered&&!a.isVisible()){return a}if(b.forceFit){a.visibleSiblingCount=b.getVisibleGridColumns().length-1;if(a.flex){a.savedWidth=a.getWidth();a.flex=null}}b.beginChildHide();Ext.suspendLayouts();if(c.isGroupHeader){if(a.isNestedGroupHeader()){c.hide()}if(a.isSubHeader&&!a.isGroupHeader&&c.query('>gridcolumn:not([hidden])').length===1){c.lastHiddenHeader=a}}a.callParent();b.endChildHide();b.onHeaderHide(a);Ext.resumeLayouts(!0);return a},show:function(){var a=this,c=a.getRootHeaderCt(),b=a.getRefOwner();if(a.isVisible()){return a}if(b.isGroupHeader){b.lastHiddenHeader=null}if(a.rendered){if(c.forceFit){c.applyForceFit(a)}}Ext.suspendLayouts();if(a.isSubHeader&&b.hidden){b.show(!1,!0)}a.callParent(arguments);if(a.isGroupHeader){a.maybeShowNestedGroupHeader()}b=a.getRootHeaderCt();if(b){b.onHeaderShow(a)}Ext.resumeLayouts(!0);return a},shouldUpdateCell:function(e,b){var d,a,c;if(!this.preventUpdate){if(this.hasCustomRenderer){return 1}if(b){d=b.length;for(a=0;a<d;++a){c=b[a];if(c===this.dataIndex||c===e.idProperty){return 2}}}else {return 2}}},getCellWidth:function(){var a=this,b;if(a.rendered&&a.componentLayout&&a.componentLayout.lastComponentSize){b=a.componentLayout.lastComponentSize.width}else {if(a.width){b=a.width}else {if(!a.isColumn){b=a.getTableWidth()}}}return b},getCellId:function(){return Ext.baseCSSPrefix+'grid-cell-'+this.getItemId()},getCellSelector:function(){var a;if(!this.cellSelector){a=this.getView();this.cellSelector=(a?a.getCellSelector():'')+'.'+this.getCellId()}return this.cellSelector},getCellInnerSelector:function(){return this.getCellSelector()+' .'+Ext.baseCSSPrefix+'grid-cell-inner'},isAtStartEdge:function(b){var a=b.getXY()[0]-this.getX();if(a<0&&this.getIndex()===0){return !1}return a<this.getHandleWidth(b)},isAtEndEdge:function(a,b){return this.getX()+this.getWidth()-a.getXY()[0]<=(b||this.getHandleWidth(a))},isSortZone:function(d){var c=this,b=!c.isAtStartEdge(d)&&!c.isAtEndEdge(d),a;if(b){a=Ext.Component.from(d);if(a){a=a.focusable?a:a.up(':focusable');b=a===c}}return b},getHandleWidth:function(a){return a.pointerType==='touch'?10:4},setMenuActive:function(a){this.activeMenu=a;this.titleEl[a?'addCls':'removeCls'](this.headerOpenCls)},privates:{_alignMap:{start:'left',end:'right'},afterText:function(a,b){if(this.dirtyText){this.dirtyTextElementId=this.id+'-dirty-cell-text';a.push('<span id="'+this.dirtyTextElementId+'" class="'+Ext.baseCSSPrefix+'hidden-offsets">'+this.dirtyText+'</span>')}},calculateHeaderId:function(){var a=this,c,b,d,f,e,g;if(!a.headerId){c=a.up('tablepanel');if(!c){return}d=a.items.items;if(d){for(e=0,g=d.length;e<g;++e){f=d[e];if(f.isColumn){f.calculateHeaderId()}}}b=c?c.ownerGrid:a.getRootHeaderCt();b.headerCounter=(b.headerCounter||0)+1;a.headerId='h'+b.headerCounter}a.configureStateInfo()},getMappedAlignment:function(a){return this._alignMap[a]||a},configureStateInfo:function(){var a=this,b;if(!a.stateId){a.stateId=a.initialConfig.id||a.headerId}b=a.getSorter();if(!a.hasSetSorter&&b&&!b.initialConfig.id){if(a.dataIndex||a.stateId){b.setId((a.dataIndex||a.stateId)+'-sorter');a.hasSetSorter=!0}}},onLock:function(d){var c=this.items.items,e=c.length,a,b;for(a=0;a<e;++a){b=c[a];if(b.isColumn){b.onLock(d)}}},onUnlock:function(d){var c=this.items.items,e=c.length,a,b;for(a=0;a<e;++a){b=c[a];if(b.isColumn){b.onUnlock(d)}}},shouldFlagCustomRenderer:function(a){return a.length>1}},deprecated:{5:{methods:{bindRenderer:function(a){return function(b){return Ext.util.Format[a](b)}}}}}});Ext.define('Ext.theme.triton.grid.column.Column',{override:'Ext.grid.column.Column',compatibility:Ext.isIE8,onTitleMouseOver:function(){var a=this.triggerEl;this.callParent(arguments);if(a){a.syncRepaint()}}});Ext.define('Ext.grid.column.ActionProxy',{constructor:function(b,c,a){this.column=b;this.item=c;this.itemIndex=a},setHandler:function(a){this.item.handler=a},setDisabled:function(a){if(a){this.column.disableAction(this.itemIndex)}else {this.column.enableAction(this.itemIndex)}},setIconCls:function(a){this.item.iconCls=a;this.column.getView().refreshView()},setIconGlyph:function(a){this.item.glyph=a;this.column.getView().refreshView()},setHidden:function(a){this.item.hidden=a;this.column.getView().refreshView()},setVisible:function(a){this.setHidden(!a)},on:function(){return this.column.on.apply(this.column,arguments)}});Ext.define('Ext.grid.column.Action',{extend:Ext.grid.column.Column,alias:['widget.actioncolumn'],alternateClassName:'Ext.grid.ActionColumn',stopSelection:!0,actionIdRe:new RegExp(Ext.baseCSSPrefix+'action-col-(\\d+)'),altText:'',menuText:'<i>Actions</i>',itemTabIndex:0,itemAriaRole:'button',maskOnDisable:!1,ignoreExport:!0,sortable:!1,innerCls:Ext.baseCSSPrefix+'grid-cell-inner-action-col',actionIconCls:Ext.baseCSSPrefix+'action-col-icon',constructor:function(h){var a=this,c=Ext.apply({},h),e=c.items||a.items||[a],f,d,g,b;a.origRenderer=c.renderer||a.renderer;a.origScope=c.scope||a.scope;a.renderer=a.scope=c.renderer=c.scope=null;c.items=null;a.callParent([c]);if(a.hasOwnProperty('isDisabled')){a.isActionDisabled=a.isDisabled;delete a.isDisabled}a.items=e;for(d=0,g=e.length;d<g;++d){b=e[d];if(b.substr&&b[0]==='@'){b=a.getAction(b.substr(1))}if(b.hasOwnProperty('isDisabled')){b.isActionDisabled=b.isDisabled;delete b.isDisabled}if(b.isAction){e[d]=b.initialConfig;b.addComponent(new Ext.grid.column.ActionProxy(a,e[d],d))}if(b.getClass){f=!0}}if(a.origRenderer||f){a.hasCustomRenderer=!0}},initComponent:function(){var a=this;a.callParent();if(a.sortable&&!a.dataIndex){a.sortable=!1}},defaultRenderer:function(u,m,o,p,n,t,r){var b=this,q=b.origScope||b,l=b.items,s=l.length,d,a,i,j,h,k,e,c,g,f;i=Ext.isFunction(b.origRenderer)?b.origRenderer.apply(q,arguments)||'':'';m.tdCls+=' '+Ext.baseCSSPrefix+'action-col-cell';for(d=0;d<s;d++){a=l[d];e=a.icon;c=a.glyph;j=a.disabled||(a.isActionDisabled?Ext.callback(a.isActionDisabled,a.scope||b.origScope,[r,p,n,a,o],0,b):!1);h=a.tooltip||(a.getTip?Ext.callback(a.getTip,a.scope||b.origScope,arguments,0,b):null);k=a.getAltText?Ext.callback(a.getAltText,a.scope||b.origScope,arguments,0,b):a.altText||b.altText;if(!a.hasActionConfiguration){a.stopSelection=b.stopSelection;a.disable=Ext.Function.bind(b.disableAction,b,[d],0);a.enable=Ext.Function.bind(b.enableAction,b,[d],0);a.hasActionConfiguration=!0}if(c){c=Ext.Glyph.fly(c)}g=a!==b&&a.tabIndex!==undefined?a.tabIndex:b.itemTabIndex;f=a!==b&&a.ariaRole!==undefined?a.ariaRole:b.itemAriaRole;i+='<'+(e?'img':'div')+(typeof g==='number'?' tabIndex="'+g+'"':'')+(f?' role="'+f+'"':' role="presentation"')+(' aria-label="'+b.text+'"')+(e?' alt="'+k+'" src="'+a.icon+'"':'')+' class="'+b.actionIconCls+' '+Ext.baseCSSPrefix+'action-col-'+String(d)+' '+(j?b.disabledCls+' ':' ')+(a.hidden?Ext.baseCSSPrefix+'hidden-display ':'')+(a.getClass?Ext.callback(a.getClass,a.scope||b.origScope,arguments,undefined,b):a.iconCls||b.iconCls||'')+'"'+(h?' data-qtip="'+Ext.util.Format.htmlEncode(h)+'"':'')+(e?'/>':c?' style="font-family:'+c.fontFamily+'">'+c.character+'</div>':'></div>')}return i},updater:function(e,d,c,f,b){var a={};Ext.fly(e).addCls(a.tdCls).down(this.getView().innerSelector,!0).innerHTML=this.defaultRenderer(d,a,c,null,null,b,f)},enableAction:function(a,c){var b=this;if(!a){a=0}else {if(!Ext.isNumber(a)){a=Ext.Array.indexOf(b.items,a)}}b.items[a].disabled=!1;b.up('tablepanel').el.select('.'+Ext.baseCSSPrefix+'action-col-'+a).removeCls(b.disabledCls);if(!c){b.fireEvent('enable',b)}},disableAction:function(a,c){var b=this;if(!a){a=0}else {if(!Ext.isNumber(a)){a=Ext.Array.indexOf(b.items,a)}}b.items[a].disabled=!0;b.up('tablepanel').el.select('.'+Ext.baseCSSPrefix+'action-col-'+a).addCls(b.disabledCls);if(!c){b.fireEvent('disable',b)}},doDestroy:function(){this.renderer=this.items=null;return this.callParent()},processEvent:function(f,g,o,i,j,c,m,p){var a=this,d=c.getTarget(),e=f==='keydown'&&c.getKey(),n,b,k,l=Ext.fly(o),h;c.stopSelection=!e&&a.stopSelection;if(e&&(d===o||!l.contains(d))){d=l.query('.'+a.actionIconCls,!0);if(d.length===1){d=d[0]}else {return}}if(d&&(n=d.className.match(a.actionIdRe))){b=a.items[parseInt(n[1],10)];k=b.disabled||(b.isActionDisabled?Ext.callback(b.isActionDisabled,b.scope||a.origScope,[g,i,j,b,m],0,a):!1);if(b&&!k){if(f==='mousedown'&&!a.getView().actionableMode){c.preventDefault()}else {if(f==='click'||(e===c.ENTER||e===c.SPACE)){h=Ext.Element.getActiveElement();Ext.callback(b.handler||a.handler,b.scope||a.origScope,[g,i,j,b,c,m,p],undefined,a);if(g.destroyed){return !1}else {if(!c.position.getNode(!0)){c.position.refresh()}if(Ext.Element.getActiveElement()!==h){return !1}}}}}}return a.callParent(arguments)},cascade:function(b,a){b.call(a||this,this)},getRefItems:function(){return []},contains:function(){return !1},privates:{getFocusables:function(){return []},shouldUpdateCell:function(){return 2}}});Ext.define('Ext.grid.column.Check',{extend:Ext.grid.column.Column,alternateClassName:['Ext.ux.CheckColumn','Ext.grid.column.CheckColumn'],alias:'widget.checkcolumn',isCheckColumn:!0,config:{headerCheckbox:!1},align:'center',triggerEvent:'click',invert:!1,ignoreExport:!0,stopSelection:!0,headerCheckedCls:Ext.baseCSSPrefix+'grid-hd-checker-on',headerCheckboxCls:Ext.baseCSSPrefix+'column-header-checkbox',checkboxCls:Ext.baseCSSPrefix+'grid-checkcolumn',checkboxCheckedCls:Ext.baseCSSPrefix+'grid-checkcolumn-checked',innerCls:Ext.baseCSSPrefix+'grid-checkcolumn-cell-inner',clickTargetName:'el',defaultFilterType:'boolean',checkboxAriaRole:'button',constructor:function(a){this.scope=this;this.callParent([a])},afterComponentLayout:function(){var a=this;a.callParent(arguments);if(a.useAriaElements&&a.headerCheckbox){a.updateHeaderAriaDescription(a.areAllChecked())}if(!a.storeListeners){a.updateHeaderState();a.storeListeners=a.getView().dataSource.on({datachanged:a.onDataChanged,scope:a,destroyable:!0})}},onRemoved:function(){this.callParent(arguments);this.storeListeners=Ext.destroy(this.storeListeners)},onDataChanged:function(b,a){this.updateHeaderState()},updateHeaderCheckbox:function(c){var a=this,b=Ext.baseCSSPrefix+'column-header-checkbox';if(c){a.addCls(b);a.sortable=!1;if(a.useAriaElements){a.updateHeaderAriaDescription(a.areAllChecked())}}else {a.removeCls(b);if(a.useAriaElements&&a.ariaEl.dom){a.ariaEl.dom.removeAttribute('aria-describedby')}}a.updateHeaderState()},processEvent:function(h,l,k,e,m,b,d,n){var a=this,f=h==='keydown'&&b.getKey(),g=h===a.triggerEvent,j=a.disabled,i,c;b.stopSelection=!f&&a.stopSelection;if(!j&&(g||(f===b.ENTER||f===b.SPACE))){c=!a.isRecordChecked(d);if(a.fireEvent('beforecheckchange',a,e,c,d,b)!==!1){a.setRecordCheck(d,e,c,k,b);if(g&&!l.actionableMode){b.preventDefault()}if(a.hasListeners.checkchange){a.fireEvent('checkchange',a,e,c,d,b)}}}else {i=a.callParent(arguments)}return i},onTitleElClick:function(b,d,c){var a=this;if(!a.disabled&&(b.keyCode||!a.text||Ext.fly(b.target).hasCls(a.headerCheckboxCls))){a.toggleAll(b)}else {return a.callParent([b,d,c])}},toggleAll:function(c){var a=this,d=a.getView(),e=d.getStore(),b=!a.allChecked;if(a.fireEvent('beforeheadercheckchange',a,b,c)!==!1){if(a.hasListeners.checkchange||a.hasListeners.beforecheckchange){c.position=new Ext.grid.CellContext(d)}e.each(function(e,f){a.setRecordCheck(e,f,b,d.getCell(e,a))});a.setHeaderStatus(b,c);a.fireEvent('headercheckchange',a,b,c)}},setHeaderStatus:function(b,c){var a=this;if(a.allChecked!==b){a.allChecked=b;if(a.headerCheckbox){a[b?'addCls':'removeCls'](a.headerCheckedCls);if(a.useAriaElements){a.updateHeaderAriaDescription(b)}}}},updateHeaderState:function(b){var a=this;if(!a.headerStateTimer){a.headerStateTimer=Ext.raf(a.doUpdateHeaderState,a)}},doUpdateHeaderState:function(b){var a=this;a.headerStateTimer=null;if(!a.destroyed&&a.headerCheckbox){a.setHeaderStatus(a.areAllChecked(),b)}},onEnable:function(){this.callParent(arguments);this._setDisabled(!1)},onDisable:function(){this._setDisabled(!0)},_setDisabled:function(d){var b=this,c=b.disabledCls,a;a=b.up('tablepanel').el.select(b.getCellSelector());if(d){a.addCls(c)}else {a.removeCls(c)}},defaultRenderer:function(b,d){var a=this,e=a.checkboxCls,c='';if(a.invert){b=!b}if(a.disabled){d.tdCls+=' '+a.disabledCls}if(b){e+=' '+a.checkboxCheckedCls;c=a.checkedTooltip}else {c=a.tooltip}if(c){d.tdAttr+=' data-qtip="'+Ext.htmlEncode(c)+'"'}if(a.useAriaElements){d.tdAttr+=' aria-describedby="'+a.id+'-cell-description'+(!b?'-not':'')+'-selected"'}a.updateHeaderState();return '<span class="'+e+'" role="'+a.checkboxAriaRole+'" aria-label="'+a.text+'"'+(!a.ariaStaticRoles[a.checkboxAriaRole]?' tabIndex="0"':'')+'></span>'},isRecordChecked:function(a){var b=this.property;if(b){return a[b]}return a.get(this.dataIndex)},areAllChecked:function(){var e=this,c=e.getView().getStore(),b,d,a;if(!c.isBufferedStore&&c.getCount()>0){b=c.getData().items;d=b.length;for(a=0;a<d;++a){if(!e.isRecordChecked(b[a])){return !1}}return !0}},setRecordCheck:function(b,f,a,e){var d=this,c=d.property;if((c?b[c]:b.get(d.dataIndex))!=a){if(c){b[c]=a;d.updater(e,a)}else {b.set(d.dataIndex,a)}}},updater:function(b,c){var a=this,d;if(a.invert){c=!c}if(c){d=a.checkedTooltip}else {d=a.tooltip}if(d){b.setAttribute('data-qtip',d)}else {b.removeAttribute('data-qtip')}if(a.useAriaElements){a.updateCellAriaDescription(null,c,b)}b=Ext.fly(b);b[a.disabled?'addCls':'removeCls'](a.disabledCls);Ext.fly(b.down(a.getView().innerSelector,!0).firstChild)[c?'addCls':'removeCls'](Ext.baseCSSPrefix+'grid-checkcolumn-checked');a.updateHeaderState()},updateHeaderAriaDescription:function(b){var a=this;if(a.useAriaElements&&a.ariaEl.dom){a.ariaEl.dom.setAttribute('aria-describedby',a.id+'-header-description'+(!b?'-not':'')+'-selected')}},updateCellAriaDescription:function(d,c,a){var b=this;if(b.useAriaElements){a=a||b.getView().getCell(d,b);if(a){a.setAttribute('aria-describedby',b.id+'-cell-description'+(!c?'-not':'')+'-selected')}}},doDestroy:function(){Ext.unraf(this.headerStateTimer);this.callParent()},privates:{afterText:function(c,d){var a=this,b=a.id;c.push('<span role="presentation" class="',a.headerCheckboxCls,'"></span>');if(a.useAriaElements){c.push('<span id="'+b+'-header-description-selected" class="'+Ext.baseCSSPrefix+'hidden-offsets">'+a.headerDeselectText+'</span>'+'<span id="'+b+'-header-description-not-selected" class="'+Ext.baseCSSPrefix+'hidden-offsets">'+a.headerSelectText+'</span>'+'<span id="'+b+'-cell-description-selected" class="'+Ext.baseCSSPrefix+'hidden-offsets">'+a.rowDeselectText+'</span>'+'<span id="'+b+'-cell-description-not-selected" class="'+Ext.baseCSSPrefix+'hidden-offsets">'+a.rowSelectText+'</span>')}}}});Ext.define('Ext.theme.triton.grid.column.Check',{override:'Ext.grid.column.Check',compatibility:Ext.isIE8,setRecordCheck:function(c,d,b,a){this.callParent(arguments);Ext.fly(a).syncRepaint()}});Ext.define('Ext.grid.column.Date',{extend:Ext.grid.column.Column,alias:['widget.datecolumn'],alternateClassName:'Ext.grid.DateColumn',isDateColumn:!0,defaultFilterType:'date',producesHTML:!1,initComponent:function(){if(!this.format){this.format=Ext.Date.defaultFormat}this.callParent(arguments)},defaultRenderer:function(a){return Ext.util.Format.date(a,this.format)},updater:function(b,a){Ext.fly(b).down(this.getView().innerSelector,!0).innerHTML=Ext.grid.column.Date.prototype.defaultRenderer.call(this,a)}});Ext.define('Ext.grid.column.RowNumberer',{extend:Ext.grid.column.Column,alternateClassName:'Ext.grid.RowNumberer',alias:'widget.rownumberer',isRowNumberer:!0,text:'&#160;',width:30,sortable:!1,draggable:!1,autoLock:!0,lockable:!1,align:'right',producesHTML:!1,ignoreExport:!0,constructor:function(b){var a=this;a.width=a.width;a.callParent(arguments);a.sortable=!1;a.scope=a},resizable:!1,hideable:!1,menuDisabled:!0,dataIndex:'',cls:Ext.baseCSSPrefix+'row-numberer',tdCls:Ext.baseCSSPrefix+'grid-cell-row-numberer '+Ext.baseCSSPrefix+'grid-cell-special',innerCls:Ext.baseCSSPrefix+'grid-cell-inner-row-numberer',rowspan:undefined,onAdded:function(){var a=this;a.renumberRows=Ext.Function.createBuffered(a.renumberRows,1,a);a.callParent(arguments);a.storeListener=a.getView().on({itemadd:a.renumberRows,itemremove:a.renumberRows,destroyable:!0})},onRemoved:function(){var a=this;a.callParent(arguments);if(a.storeListener){a.storeListener=a.storeListener.destroy()}if(a.renumberRows.timer){Ext.undefer(a.renumberRows.timer)}a.renumberRows=null;delete a.renumberRows},defaultRenderer:function(g,b,d,k,j,a,h){var i=this,c=i.rowspan,f=a.currentPage,e=d?h.store.indexOf(d):g-1;if(b&&c){b.tdAttr='rowspan="'+c+'"'}if(f>1){e+=(f-1)*a.pageSize}return e+1},updater:function(b,e,d,f,c){var a=b&&b.querySelector(this.getView().innerSelector);if(a){a.innerHTML=this.defaultRenderer(e,null,d,null,null,c,f)}},renumberRows:function(){if(this.destroying||this.destroyed){return}var b=this,c=b.getView(),d=c.dataSource,g=d.getCount(),e=(new Ext.grid.CellContext(c)).setColumn(b),f=b.getView().all,a=f.startIndex;while(a<=f.endIndex&&a<g){e.setRow(a);b.updater(e.getCell(!0),++a,null,c,d)}}});Ext.define('Ext.theme.neptune.grid.column.RowNumberer',{override:'Ext.grid.column.RowNumberer',width:25});Ext.define('Ext.theme.triton.grid.column.RowNumberer',{override:'Ext.grid.column.RowNumberer',width:32});Ext.define('Ext.grid.column.Template',{extend:Ext.grid.column.Column,alias:['widget.templatecolumn'],alternateClassName:'Ext.grid.TemplateColumn',initComponent:function(){var a=this;a.tpl=!Ext.isPrimitive(a.tpl)&&a.tpl.compile?a.tpl:new Ext.XTemplate(a.tpl);a.hasCustomRenderer=!0;a.callParent()},defaultRenderer:function(c,d,a){var b=Ext.apply({},a.data,a.getAssociatedData());return this.tpl.apply(b)},updater:function(b,a){Ext.fly(b).down(this.getView().innerSelector,!0).innerHTML=Ext.grid.column.CheckColumn.prototype.defaultRenderer.call(this,a)}});Ext.define('Ext.grid.column.Widget',{extend:Ext.grid.column.Column,xtype:'widgetcolumn',mixins:[Ext.mixin.StyleCacher],config:{defaultWidgetUI:{}},ignoreExport:!0,sortable:!1,onWidgetAttach:null,preventUpdate:!0,innerCls:Ext.baseCSSPrefix+'grid-widgetcolumn-cell-inner',stopSelection:!0,initComponent:function(){var b=this,a;b.callParent();a=b.widget;b.widget=a=Ext.apply({},a);if(!a.ui){a.ui=b.getDefaultWidgetUI()[a.xtype]||'default'}b.isFixedSize=Ext.isNumber(a.width)},processEvent:function(c,d,h,e,f,b,g,i){var a;if(this.stopSelection&&c==='click'){a=b.getTarget(d.innerSelector);if(a&&a!==b.target){b.stopSelection=!0}}},beforeRender:function(){var a=this,c=a.tdCls,b;b=Ext.widget(a.widget);a.bindDataIndex=a.dataIndex&&b.defaultBindProperty&&!b.bind;c=c?c+' ':'';a.tdCls=c+b.getTdCls();a.setupViewListeners(a.getView());a.callParent();b.destroy()},afterRender:function(){var a=this.getView();this.callParent();if(a&&a.viewReady&&!a.ownerGrid.reconfiguring){this.onViewRefresh(a,a.getViewRange())}},defaultRenderer:Ext.emptyFn,updater:function(c,b,a){this.updateWidget(a)},onCellsResized:function(f){var a=this,c=a.ownerGrid.getManagedWidgets(a.getId()),g=c.length,e=a.getView(),b,d;if(!a.isFixedSize&&a.rendered&&e&&e.viewReady){d=e.getEl().down(a.getCellInnerSelector());if(d){f-=parseInt(a.getCachedStyle(d,'padding-left'),10)+parseInt(a.getCachedStyle(d,'padding-right'),10);for(b=0;b<g;++b){c[b].ownerLayout=null;c[b].setWidth(f);c[b].ownerLayout=e.componentLayout}}}},onAdded:function(){var a=this,b;a.callParent(arguments);a.ownerGrid=a.up('tablepanel').ownerGrid;if(a.ownerGrid.lockable){a.variableRowHeight=!0}b=a.getView();if(b){a.setupViewListeners(b)}},onRemoved:function(b){var a=this.viewListeners;if(a){Ext.destroy(a)}if(b){this.ownerGrid.destroyManagedWidgets(this.getId())}this.callParent(arguments)},doDestroy:function(){this.ownerGrid.destroyManagedWidgets(this.getId());this.callParent()},privates:{getWidget:function(c){var a=this,b=null;if(c){b=a.ownerGrid.createManagedWidget(a.getView(),a.getId(),a.widget,c);b.getWidgetRecord=a.widgetRecordDecorator;b.getWidgetColumn=a.widgetColumnDecorator;b.measurer=a;b.isLayoutChild=a.returnFalse}return b},onItemAdd:function(l){var a=this,i=a.getView(),m=!!a.onWidgetAttach,k=a.dataIndex,h=a.isFixedSize,n=l.length,g,d,c,b,j,e,f;if(a.isVisible(!0)){for(g=0;g<n;g++){d=l[g];if(d.isNonData){continue}c=i.getCell(d,a);if(c){c=c.firstChild;if(!h&&!f&&a.lastBox){f=a.lastBox.width-parseInt(a.getCachedStyle(c,'padding-left'),10)-parseInt(a.getCachedStyle(c,'padding-right'),10)}b=a.getWidget(d);b.$widgetColumn=a;b.$widgetRecord=d;Ext.fly(c).empty();if(b.defaultBindProperty&&k){b.setConfig(b.defaultBindProperty,d.get(k))}j=b.el||b.element;if(j){c.appendChild(j.dom);if(!h){b.setWidth(f)}b.reattachToBody()}else {if(!h){b.width=f||100}b.render(c)}if(m){Ext.callback(a.onWidgetAttach,a.scope,[a,b,d],0,a)}e=b.getFocusEl();if(e){if(i.actionableMode){if(!e.isTabbable()){e.restoreTabbableState()}}else {if(e.isTabbable()){e.saveTabbableState()}}}}}}else {i.refreshNeeded=!0}},onItemUpdate:function(a,b,c){this.updateWidget(a)},onLock:function(a){this.callParent([a]);this.resetView()},onUnlock:function(a){this.callParent([a]);this.resetView()},onViewRefresh:function(b,a){Ext.suspendLayouts();this.onItemAdd(a);Ext.resumeLayouts(!0)},resetView:function(){var a=this,b=a.viewListeners;if(b){Ext.destroy(b)}a.setupViewListeners(a.getView());a.ownerGrid.handleWidgetViewChange(a.getView(),a.getId())},returnFalse:function(){return !1},setupViewListeners:function(c){var a=this,b={refresh:a.onViewRefresh,itemadd:a.onItemAdd,scope:a,destroyable:!0};if(a.bindDataIndex){b.itemUpdate=a.onItemUpdate}a.viewListeners=c.on(b)},updateWidget:function(b){var c=this.dataIndex,d=this.getView(),a;if(this.rendered&&this.bindDataIndex){if(this.isVisible(!0)){a=this.getWidget(b);if(a){a.setConfig(a.defaultBindProperty,b.get(c))}}else {d.refreshNeeded=!1}}},widgetRecordDecorator:function(){return this.$widgetRecord},widgetColumnDecorator:function(){return this.$widgetColumn}}});Ext.define('Ext.grid.feature.Feature',{extend:Ext.util.Observable,alias:'feature.feature',wrapsItem:!1,isFeature:!0,disabled:!1,hasFeatureEvent:!0,eventPrefix:null,eventSelector:null,view:null,grid:null,columnSizer:null,constructor:function(a){this.initialConfig=a;this.callParent(arguments)},clone:function(){return new this.self(this.initialConfig)},init:Ext.emptyFn,getFireEventArgs:function(b,c,a,d){return [b,c,a,d]},vetoEvent:Ext.emptyFn,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}});Ext.define('Ext.grid.feature.AbstractSummary',{extend:Ext.grid.feature.Feature,alias:'feature.abstractsummary',summaryRowCls:Ext.baseCSSPrefix+'grid-row-summary',summaryRowSelector:'.'+Ext.baseCSSPrefix+'grid-row-summary',summaryRowTpl:{fn:function(c,a,b){if(a.record.isSummary){this.summaryFeature.outputSummaryRecord(a.record,a,c,b)}else {this.nextTpl.applyOut(a,c,b)}},priority:1000},showSummaryRow:!0,init:function(){var a=this;a.view.summaryFeature=a;a.rowTpl=a.view.self.prototype.rowTpl;a.readDataOptions={recordCreator:a.readSummaryRecord.bind(a)};a.view.addRowTpl(a.summaryRowTpl).summaryFeature=a;a.summaryData={};a.groupInfo={};if(!a.summaryTableCls){a.summaryTableCls=Ext.baseCSSPrefix+'grid-item'}if(a.hasOwnProperty('summaryRowCls')){a.summaryRowSelector='.'+a.summaryRowCls}},bindStore:function(d,c){var a=this,b=c&&c.getProxy()&&c.getProxy().getReader();a.readerListeners=Ext.destroy(a.readerListeners);if(b&&(a.remoteRoot||b.getSummaryRootProperty())){a.readerListeners=b.on({scope:a,destroyable:!0,rawdata:a.onReaderRawData})}},onReaderRawData:function(a){this.summaryRows=null;this.readerRawData=a},toggleSummaryRow:function(a,d){var b=this,e=b.showSummaryRow,c;a=a!=null?!!a:!b.showSummaryRow;b.showSummaryRow=a;if(a&&a!==e){b.updateSummaryRow=!0}if(b.lockingPartner){if(!d){b.lockingPartner.toggleSummaryRow(a,!0);c=!0}}else {c=!0}if(c){b.grid.ownerGrid.getView().refreshView()}},createRenderer:function(a,c){var e=this,d=c.ownerGroup,f=d?e.summaryData[d]:e.summaryData,b=a.dataIndex||a.getItemId();return function(e,d){return a.summaryRenderer?a.summaryRenderer(c.data[b],f,b,d):c.data[b]}},outputSummaryRecord:function(e,f,j){var c=f.view,i=c.rowValues,d=f.columns||c.headerCt.getVisibleGridColumns(),g=d.length,b,a,h={view:c,record:e,rowStyle:'',rowClasses:[this.summaryRowCls,this.summaryItemCls],itemClasses:[],recordIndex:-1,rowId:c.getRowId(e),columns:d};for(b=0;b<g;b++){a=d[b];a.savedRenderer=a.renderer;if(a.summaryType||a.summaryRenderer){a.renderer=this.createRenderer(a,e)}else {a.renderer=Ext.emptyFn}}c.rowValues=h;c.self.prototype.rowTpl.applyOut(h,j,parent);c.rowValues=i;for(b=0;b<g;b++){a=d[b];a.renderer=a.savedRenderer;a.savedRenderer=null}},getSummary:function(f,c,b,e){var d=!!e,a=d?e:f;if(c){if(Ext.isFunction(c)){if(d){return a.aggregate(b,c)}else {return a.aggregate(c,null,!1,[b])}}switch(c){case 'count':return a.count();case 'min':return a.min(b);case 'max':return a.max(b);case 'sum':return a.sum(b);case 'average':return a.average(b);default:return '';}}},getRawData:function(){var a=this.readerRawData;if(a){return a}return this.view.getStore().getProxy().getReader().rawData},generateSummaryData:function(g){var c=this,a=c.summaryRows,d={},j={},k=c.remoteRoot,f,b,h,e,m,l,i;if(!a){h=c.getRawData();if(!h){return}i=c.view.store;f=i.getProxy().getReader();b=Ext.apply({type:f.type},f.getConfig());b.model=i.getModel().getSummaryModel();if(k){b.summaryRootProperty=k}b=Ext.Factory.reader(b);a=b.getSummaryRoot(h);if(a){l=b.extractData(a,c.readDataOptions);c.summaryRows=a=l}b.destroy();c.readerRawData=null}if(a){for(e=0,m=a.length;e<m;e++){d=a[e];if(g){j[d[g]]=d}}}return g?j:d},readSummaryRecord:function(a,c){var b=c.idProperty,d=a[b]!=null,e=new c(a);a=e.data;if(!d){delete a[b]}return a},setSummaryData:function(e,d,c,b){var a=this.summaryData;if(b){if(!a[b]){a[b]={}}a[b][d]=c}else {a[d]=c}},destroy:function(){Ext.destroy(this.readerListeners);this.readerRawData=this.summaryRows=null;this.callParent()}});Ext.define('Ext.grid.feature.GroupStore',{extend:Ext.util.Observable,isStore:!0,defaultViewSize:100,isFeatureStore:!0,badGrouperKey:'[object Object]',constructor:function(b,c){var a=this;a.callParent();a.groupingFeature=b;a.bindStore(c);if(!b.grid.isLocked){a.bindViewStoreListeners()}},bindStore:function(b){var a=this;if(!b||a.store!==b){Ext.destroy(a.storeListeners);a.store=null}if(b){a.storeListeners=b.on({datachanged:a.onDataChanged,groupchange:a.onGroupChange,idchanged:a.onIdChanged,update:a.onUpdate,scope:a,destroyable:!0});a.store=b;a.processStore(b)}},bindViewStoreListeners:function(){var b=this.groupingFeature.view,a=b.getStoreListeners(this);a.scope=b;this.on(a)},each:function(c,b,a){this.store.each(c,b,a)},getGroupedRecords:function(c,f){var l=this,g=l.groupingFeature,h=c.getGroups(),i=h?h.length:0,m=c.getGroupField(),b,j,e,k,d,a;if(!i){return c.getRange()}for(e=0,a=[];e<i;e++){b=h.getAt(e);k=b.getGroupKey();if(l.badGrouperKey===k&&(j=g.getGrouper(m))){c.getGroups().remove(b);g.startCollapsed=f;c.group(j);return null}d=g.getMetaGroup(b);if(f){d.isCollapsed=f}if(d.isCollapsed){a.push(d.placeholder)}else {a.push.apply(a,b.items)}}return a},processStore:function(d){var g=this,e=g.groupingFeature,a=g.data,b=!1,h,f,c;if(!a){g.data=a=new Ext.util.Collection({rootProperty:'data',extraKeys:{byInternalId:{property:'internalId',rootProperty:''}}})}if(d.getCount()){if(d.getId()!==e.previousStoreId||e.storeLoadCount!==d.loadCount){e.storeLoadCount=d.loadCount;e.previousStoreId=d.getId();h=e.startCollapsed}c=g.getGroupedRecords(d,h);if(c){for(f=a.length,b=f!==c.length;!b&&f-->0;){b=a.items[f]!==c[f]}if(b){if(a.length){a.clear()}if(c.length){a.add(c)}}}}else {if(a.length){a.clear();b=!0}}return b},isCollapsed:function(a){return this.groupingFeature.getCache()[a].isCollapsed},isLoading:function(){return !1},getData:function(){return this.data},getCount:function(){return this.data.getCount()},getTotalCount:function(){return this.data.getCount()},rangeCached:function(b,a){return a<this.getCount()},getRange:function(d,b,a){var c=this.data.getRange(d,Ext.isNumber(b)?b+1:b);if(a&&a.callback){a.callback.call(a.scope||this,c,d,b,a)}return c},getAt:function(a){return this.data.getAt(a)},getById:function(a){return this.store.getById(a)},getByInternalId:function(a){return this.store.getByInternalId(a)||this.data.byInternalId.get(a)},expandGroup:function(a){var b=this,d=b.groupingFeature,g=d.lockingPartner,f,e,c,h;if(typeof a==='string'){a=d.getGroup(a)}if(a){h=a.items;f=d.getMetaGroup(a);e=f.placeholder}if(h.length&&(c=b.data.indexOf(e))!==-1){f.isCollapsed=!1;if(g){g.getMetaGroup(a).isCollapsed=!1}b.isExpandingOrCollapsing=1;b.data.removeAt(c);b.data.insert(c,a.items);b.fireEvent('replace',b,c,[e],a.items);b.fireEvent('groupexpand',b,a);b.isExpandingOrCollapsing=0}},collapseGroup:function(b){var a=this,e=a.groupingFeature,f=e.lockingPartner,d,g,h,c;if(typeof b==='string'){b=e.getGroup(b)}if(b){c=b.items}if(c&&(h=c.length)&&(d=a.data.indexOf(c[0]))!==-1){e.getMetaGroup(b).isCollapsed=!0;if(f){f.getMetaGroup(b).isCollapsed=!0}a.isExpandingOrCollapsing=2;a.data.removeAt(d,h);a.data.insert(d,g=a.getGroupPlaceholder(b));a.fireEvent('replace',a,d,c,[g]);a.fireEvent('groupcollapse',a,b);a.isExpandingOrCollapsing=0}},getGroupPlaceholder:function(e){var b=this.groupingFeature.getMetaGroup(e);if(!b.placeholder){var c=this.store,g=c.getModel(),d={},f=e.getGroupKey(),a;d[c.getGroupField()]=f;a=b.placeholder=new g(d,c.session,!0);a.isNonData=a.isCollapsedPlaceholder=!0;a.groupKey=f}return b.placeholder},indexOf:function(a){var b=-1;if(a&&!a.isCollapsedPlaceholder){b=this.data.indexOf(a)}return b},contains:function(a){return this.indexOf(a)>-1},indexOfPlaceholder:function(a){return this.data.indexOf(a)},indexOfId:function(a){return this.data.indexOfKey(a)},indexOfTotal:function(a){return this.store.indexOf(a)},onIdChanged:function(d,b,a,c){this.data.updateKey(b,a)},onUpdate:function(k,b,j,c){var a=this,g=a.groupingFeature,f,i,d,e,h;if(k.isGrouped()){f=b.group=g.getGroup(b);if(f){i=g.getMetaGroup(b);if(c&&Ext.Array.contains(c,g.getGroupField())){a.onDataChanged();delete b.group;return}if(i.isCollapsed){a.fireEvent('update',a,i.placeholder)}else {Ext.suspendLayouts();a.fireEvent('update',a,b,j,c);h=f.items;d=h[0];e=h[h.length-1];if(d!==b){d.group=f;a.fireEvent('update',a,d,'edit',c);delete d.group}if(e!==b&&e!==d&&g.showSummaryRow){e.group=f;a.fireEvent('update',a,e,'edit',c);delete e.group}Ext.resumeLayouts(!0)}}delete b.group}else {a.fireEvent('update',a,b,j,c)}},onGroupChange:function(b,a){if(!a){this.processStore(b)}this.fireEvent('groupchange',b,a)},onDataChanged:function(){var a=this;if(a.processStore(a.store)){a.fireEvent('refresh',a)}},destroy:function(){var a=this;a.bindStore(null);Ext.destroy(a.data);a.groupingFeature=null;a.callParent()}});Ext.define('Ext.grid.feature.Grouping',{extend:Ext.grid.feature.Feature,alias:'feature.grouping',mixins:{summary:Ext.grid.feature.AbstractSummary},eventPrefix:'group',eventSelector:'.'+Ext.baseCSSPrefix+'grid-group-hd',refreshData:{},wrapsItem:!0,groupHeaderTpl:'{columnName}: {name}',depthToIndent:17,collapsedCls:Ext.baseCSSPrefix+'grid-group-collapsed',hdCollapsedCls:Ext.baseCSSPrefix+'grid-group-hd-collapsed',hdNotCollapsibleCls:Ext.baseCSSPrefix+'grid-group-hd-not-collapsible',collapsibleCls:Ext.baseCSSPrefix+'grid-group-hd-collapsible',ctCls:Ext.baseCSSPrefix+'group-hd-container',groupByText:'Group by this field',showGroupsText:'Show in groups',hideGroupedHeader:!1,startCollapsed:!1,enableGroupingMenu:!0,enableNoGroups:!0,collapsible:!0,groupers:null,expandTip:'Click to expand. CTRL key collapses all others',collapseTip:'Click to collapse. CTRL/click collapses all others',showSummaryRow:!1,outerTpl:['{%','if (!(this.groupingFeature.disabled || values.rows.length === 1 && values.rows[0].isSummary)) {','this.groupingFeature.setup(values.rows, values.view.rowValues);','}','this.nextTpl.applyOut(values, out, parent);','if (!(this.groupingFeature.disabled || values.rows.length === 1 && values.rows[0].isSummary)) {','this.groupingFeature.cleanup(values.rows, values.view.rowValues);','}','%}',{priority:200}],groupRowTpl:['{%','var me = this.groupingFeature,','colspan = "colspan=" + values.columns.length;','if (me.disabled || parent.rows.length === 1 && parent.rows[0].isSummary) {','values.needsWrap = false;','} else {','me.setupRowData(values.record, values.rowIndex, values);','}','%}','<tpl if="needsWrap">','<tpl if="isFirstRow">','{% values.view.renderColumnSizer(values, out); %}','<tr data-boundView="{view.id}" data-recordId="{record.internalId:htmlEncode}" data-recordIndex="{[values.isCollapsedGroup ? -1 : values.recordIndex]}" class="{groupHeaderCls}">','<td class="{[me.ctCls]}" {[colspan]}>','{%','var groupTitleStyle = (!values.view.lockingPartner || (values.view.ownerCt === values.view.ownerCt.ownerLockable.lockedGrid) || (values.view.lockingPartner.headerCt.getVisibleGridColumns().length === 0)) ? "" : "visibility:hidden",','tooltip = "";','if (me.collapsible) {','tooltip = Ext.String.format(\'data-qtip="{0}"\', values.isCollapsedGroup ? me.expandTip : me.collapseTip);','}','%}','<div data-groupname="{groupName:htmlEncode}" class="',Ext.baseCSSPrefix,'grid-group-hd {collapsibleCls}" nottabindex="0" hidefocus="on" {ariaCellInnerAttr}>','<div class="',Ext.baseCSSPrefix,'grid-group-title" style="{[groupTitleStyle]}" {ariaGroupTitleAttr} {[tooltip]}>','{[values.groupHeaderTpl.apply(values.groupRenderInfo, parent) || "&#160;"]}','</div>','</div>','</td>','</tr>','</tpl>','<tpl if="!isCollapsedGroup">','{%','values.itemClasses.length = 0;','this.nextTpl.applyOut(values, out, parent);','%}','</tpl>','<tpl if="summaryRecord">','{%me.outputSummaryRecord(values.summaryRecord, values, out, parent);%}','</tpl>','<tpl else>','{%this.nextTpl.applyOut(values, out, parent);%}','</tpl>',{priority:200,beginRowSync:function(b){var a=this.groupingFeature;b.add('header',a.eventSelector);b.add('summary',a.summaryRowSelector)},syncContent:function(c,b,f){c=Ext.fly(c,'syncDest');b=Ext.fly(b,'syncSrc');var a=this.groupingFeature,h=c.down(a.eventSelector,!0),g=b.down(a.eventSelector,!0),e=c.down(a.summaryRowSelector,!0),d=b.down(a.summaryRowSelector,!0);if(h&&g){Ext.fly(h).syncContent(g)}if(e&&d){if(f){this.groupingFeature.view.updateColumns(e,d,f)}else {Ext.fly(e).syncContent(d)}}}}],relayedEvents:['groupcollapse','groupexpand'],init:function(b){var a=this,c=a.view,d=a.gridStore=b.getStore(),e;c.isGrouping=d.isGrouped();a.mixins.summary.init.call(a);a.callParent([b]);c.headerCt.on({columnhide:a.onColumnHideShow,columnshow:a.onColumnHideShow,columnmove:a.onColumnMove,scope:a});c.addTpl(Ext.XTemplate.getTpl(a,'outerTpl')).groupingFeature=a;c.addRowTpl(Ext.XTemplate.getTpl(a,'groupRowTpl')).groupingFeature=a;c.preserveScrollOnRefresh=!0;if(d.isBufferedStore){a.collapsible=!1}else {if(!d.isEmptyStore){e=a.createDataSource()}}b=b.ownerLockable||b;b.on('beforereconfigure',a.beforeReconfigure,a);if(!c.isLockedView){a.gridEventRelayers=b.relayEvents(c,a.relayedEvents)}c.on({afterrender:a.afterViewRender,scope:a,single:!0});a.groupRenderInfo={};if(d.isEmptyStore){return}else {if(e){e.on('groupchange',a.onGroupChange,a)}else {a.setupStoreListeners(d)}}a.mixins.summary.bindStore.call(a,b,b.getStore())},getGridStore:function(){return this.gridStore},indexOf:function(a){if(a.isCollapsedPlaceholder){return this.dataSource.indexOfPlaceholder(a)}return this.dataSource.indexOf(a)},indexOfPlaceholder:function(a){return this.dataSource.indexOfPlaceholder(a)},isInCollapsedGroup:function(d){var c=this,e=c.getGridStore(),b=!1,a;if(e.isGrouped()&&(a=c.getMetaGroup(d))){b=!!(a&&a.isCollapsed)}return b},getCache:function(){var e=this,d=e.getId(),b={},c=this.getGridStore().getGroups(),a;if(c){c.eachKey(function(e,c){a=c.$groupingContext||(c.$groupingContext={});b[e]=a[d]})}return b},invalidateCache:function(){var c=this,d=c.getId(),b=c.getGridStore().getGroups(),a;if(b){b.eachKey(function(c,b){a=b.$groupingContext;if(a){a[d]=null}})}},vetoEvent:function(d,e,c,a){var b=!1;if(a.type!=='mouseover'&&a.type!=='mouseout'&&a.type!=='mouseenter'&&a.type!=='mouseleave'&&a.getTarget(this.eventSelector)){b=!0}if(this.showSummaryRow&&!b&&a.getTarget(this.summaryRowSelector)){b=!0}if(b){return !1}},enable:function(){var a=this,c=a.view,e=a.getGridStore(),d=a.hideGroupedHeader&&a.getGroupedHeader(),b;c.isGrouping=!0;if(c.lockingPartner){c.lockingPartner.isGrouping=!0}a.callParent();if(a.lastGrouper){e.group(a.lastGrouper);a.lastGrouper=null}if(d){d.hide()}b=a.view.headerCt.getMenu().down('#groupToggleMenuItem');if(b){b.setChecked(!0,!0)}},disable:function(){var a=this,c=a.view,f=a.getGridStore(),d=a.hideGroupedHeader&&a.getGroupedHeader(),e=f.getGrouper(),b;c.isGrouping=!1;if(c.lockingPartner){c.lockingPartner.isGrouping=!1}a.callParent();if(e){a.lastGrouper=e;f.clearGrouping()}if(d){d.show()}b=a.view.headerCt.getMenu().down('#groupToggleMenuItem');if(b){b.setChecked(!1,!0);b.disable()}},afterViewRender:function(){var a=this,b=a.view;b.on({scope:a,groupmousedown:a.onGroupMousedown,groupclick:a.onGroupClick});if(a.enableGroupingMenu){a.injectGroupingMenu()}a.pruneGroupedHeader();a.lastGrouper=a.getGridStore().getGrouper();if(a.disabled){a.disable()}},injectGroupingMenu:function(){var b=this,a=b.view.headerCt;a.showMenuBy=Ext.Function.createInterceptor(a.showMenuBy,b.showMenuBy);a.getMenuItems=b.getMenuItems()},onColumnHideShow:function(l,m){var a=this,e=a.view,k=e.headerCt,i=k.getMenu(),c=i.activeHeader,g=i.down('#groupMenuItem'),f,h=a.grid.getVisibleColumnManager().getColumns().length,d,j,b;if(c&&g){f=c.groupable===!1||!c.dataIndex||a.view.headerCt.getVisibleGridColumns().length<2?'disable':'enable';g[f]()}if(e.rendered&&h){d=e.el.query('.'+a.ctCls);for(b=0,j=d.length;b<j;++b){d[b].colSpan=h}}},onColumnMove:function(){var a=this,f=a.view,e,g,b,c,d,h;if(f.getStore().isGrouped()){g=a.getCache();Ext.suspendLayouts();for(e in g){b=a.getGroup(e);if(b){c=b.first();d=b.last();h=a.getMetaGroup(b);if(h.isCollapsed){c=d=a.dataSource.getGroupPlaceholder(e)}f.refreshNode(c);if(a.showSummaryRow&&d!==c){f.refreshNode(d)}}}Ext.resumeLayouts(!0)}},showMenuBy:function(h,i,d){var b=this,e=b.getMenu(),g=e.down('#groupMenuItem'),f=d.groupable===!1||!d.dataIndex||b.view.headerCt.getVisibleGridColumns().length<2?'disable':'enable',a=e.down('#groupToggleMenuItem'),c=b.grid.getStore().isGrouped();g[f]();if(a){a.setChecked(c,!0);a[c?'enable':'disable']()}},getMenuItems:function(){var a=this,e=a.groupByText,f=a.disabled||!a.getGroupField(),c=a.showGroupsText,b=a.enableNoGroups,d=a.view.headerCt.getMenuItems;return function(){var g=d.call(this);g.push('-',{iconCls:Ext.baseCSSPrefix+'group-by-icon',itemId:'groupMenuItem',text:e,handler:a.onGroupMenuItemClick,scope:a});if(b){g.push({itemId:'groupToggleMenuItem',text:c,checked:!f,checkHandler:a.onGroupToggleMenuItemClick,scope:a})}return g}},onGroupMenuItemClick:function(c,g){var a=this,e=c.parentMenu,b=e.activeHeader,f=a.view,d=a.getGridStore();if(a.disabled){a.lastGrouper=null;a.block();a.enable();a.unblock()}f.isGrouping=!0;d.group(a.getGrouper(b.dataIndex)||b.dataIndex);a.pruneGroupedHeader()},block:function(b){var a=this;a.blockRefresh=a.view.blockRefresh=!0;if(a.lockingPartner&&!b){a.lockingPartner.block(!0)}},unblock:function(b){var a=this;a.blockRefresh=a.view.blockRefresh=!1;if(a.lockingPartner&&!b){a.lockingPartner.unblock(!0)}},onGroupToggleMenuItemClick:function(b,a){this[a?'enable':'disable']()},pruneGroupedHeader:function(){var a=this,b=a.getGroupedHeader();if(a.hideGroupedHeader&&b){Ext.suspendLayouts();if(a.prunedHeader&&a.prunedHeader!==b){a.prunedHeader.show()}a.prunedHeader=b;if(b.rendered){b.hide()}Ext.resumeLayouts(!0)}},getHeaderNode:function(f){var e=this.view.getEl(),b,a,d,c;if(e){b=e.query(this.eventSelector);for(a=0,d=b.length;a<d;++a){c=b[a];if(c.getAttribute('data-groupName')===f){return c}}}},getGroup:function(a){var b=this.getGridStore(),e=a,c,d;if(b.isGrouped()){if(a.isModel){a=a.get(b.getGroupField())}if(typeof a!=='string'){a=b.getGrouper().getGroupString(e)}if(b.isBufferedStore){c=b.groups||(b.groups={});d=c[a]||(c[a]={getGroupKey:function(){return a}})}else {d=b.getGroups().getByKey(a)}}return d},getGrouper:function(b){var a=this.groupers;if(!a){return null}return Ext.Array.findBy(a,function(a){return a.property===b})},getGroupField:function(){return this.getGridStore().getGroupField()},getMetaGroup:function(a){var g=this,k=g.getId(),i,f,d,j,e,b,c,h;if(a.isModel||typeof a==='string'){a=g.getGroup(a)}if(a){f=a.getGroupKey();h=a.$groupingContext||(a.$groupingContext={});d=h[k];if(!d){i=g.getGridStore();j=i.getModel();e={};e[g.getGroupField()]=f;b=new j(e,i.session,!0);b.isNonData=b.isCollapsedPlaceholder=!0;b.groupKey=f;c=new Ext.data.Model(e);c.isNonData=c.isSummary=!0;c.groupKey=f;d=h[k]={placeholder:b,isCollapsed:!1,lastGroup:null,lastGroupGeneration:null,lastFilterGeneration:null,aggregateRecord:c}}}return d},isExpanded:function(a){return !this.getMetaGroup(a).isCollapsed},expand:function(a,b){this.doCollapseExpand(!1,a,b)},expandAll:function(){var c=this,b=c.getCache(),d=c.lockingPartner,a;for(a in b){if(b.hasOwnProperty(a)){b[a].isCollapsed=!1}}Ext.suspendLayouts();c.dataSource.onDataChanged();Ext.resumeLayouts(!0);for(a in b){if(b.hasOwnProperty(a)){c.afterCollapseExpand(!1,a);if(d){d.afterCollapseExpand(!1,a)}}}},collapse:function(a,b){this.doCollapseExpand(!0,a,b)},isAllCollapsed:function(){var c=this,a=c.getCache(),b;for(b in a){if(a.hasOwnProperty(b)){if(!a[b].isCollapsed){return !1}}}return !0},isAllExpanded:function(){var c=this,a=c.getCache(),b;for(b in a){if(a.hasOwnProperty(b)){if(a[b].isCollapsed){return !1}}}return !0},collapseAll:function(){var c=this,b=c.getCache(),a,d=c.lockingPartner;for(a in b){if(b.hasOwnProperty(a)){b[a].isCollapsed=!0}}Ext.suspendLayouts();c.dataSource.onDataChanged();Ext.resumeLayouts(!0);for(a in b){if(b.hasOwnProperty(a)){c.afterCollapseExpand(!0,a);if(d){d.afterCollapseExpand(!0,a)}}}},doCollapseExpand:function(c,d,a){var b=this,f=b.lockingPartner,e=b.getGroup(d);if(a===!0){a={focus:!0}}if(b.getMetaGroup(e).isCollapsed!==c){b.isExpandingOrCollapsing=!0;Ext.suspendLayouts();if(c){b.dataSource.collapseGroup(e)}else {b.dataSource.expandGroup(e)}Ext.resumeLayouts(!0);b.afterCollapseExpand(c,d,a);if(f){if(a&&a.focus){a=Ext.Object.chain(a);a.focus=!1}f.afterCollapseExpand(c,d,a)}b.isExpandingOrCollapsing=!1}},afterCollapseExpand:function(e,b,c){var a=this,g=a.view,f,d;f=a.getHeaderNode(b);g.fireEvent(e?'groupcollapse':'groupexpand',g,f,b);if(c){if(e){c.focus=!1;d=a.getMetaGroup(b).placeholder}else {d=a.getGroup(b).getAt(0)}a.grid.ensureVisible(d,c)}},onGroupChange:function(b,a){if(!a){this.view.ownerGrid.getView().refreshView()}else {this.lastGrouper=a}},getMenuItem:function(c){var b=this.view,a=b.headerCt.down('gridcolumn[dataIndex='+c+']'),d=b.headerCt.getMenu();return a?d.down('menuitem[headerId='+a.id+']'):null},onGroupKey:function(d,a){var b=this,c=b.getGroupName(a.target);if(c){b.onGroupClick(b.view,a.target,c,a)}},onGroupMousedown:function(d,b,c,a){a.preventDefault()},onGroupClick:function(h,g,b,f){var a=this,e,d,c;if(!a.collapsible){return}e=a.getCache();d=!a.isExpanded(b);if(f.ctrlKey){Ext.suspendLayouts();for(c in e){if(c===b){if(d){a.expand(b)}}else {if(!e[c].isCollapsed){a.doCollapseExpand(!0,c,!1)}}}Ext.resumeLayouts(!0)}else {a[d?'expand':'collapse'](b)}},setupRowData:function(d,u,a){var c=this,j=a.recordIndex,i=c.refreshData,b=c.groupRenderInfo,m=i.header,f=i.groupField,h=c.getGridStore(),t=c.view.dataSource,q=t.isBufferedStore,l=c.grid.columnManager.getHeaderByDataIndex(f),r=!!(l&&l.renderer),s=d.groupKey,n=d.isCollapsedPlaceholder&&Ext.isDefined(s)?c.getGroup(s):d.group,k,e,p,o,g;a.isCollapsedGroup=!1;a.summaryRecord=a.groupHeaderCls=null;if(i.doGrouping){k=h.getGrouper();if(d.isCollapsedPlaceholder){e=n.getGroupKey();g=n.items;d=g[0];a.isFirstRow=a.isLastRow=!0;a.groupHeaderCls=c.hdCollapsedCls;a.isCollapsedGroup=a.needsWrap=!0;a.groupName=e;a.groupRenderInfo=b;b.groupField=f;b.groupValue=d.get(f);b.name=b.renderedGroupValue=r?l.renderer(b.groupValue,{},d):e;b.columnName=m?m.text:f;a.collapsibleCls=c.collapsible?c.collapsibleCls:c.hdNotCollapsibleCls;b.rows=b.children=g;if(c.showSummaryRow){a.summaryRecord=i.summaryData[e]}return}e=k.getGroupString(d);if(n){g=n.items;a.isFirstRow=d===g[0];a.isLastRow=d===g[g.length-1]}else {a.isFirstRow=j===0;if(!a.isFirstRow){p=h.getAt(j-1);if(p){a.isFirstRow=!p.isEqual(k.getGroupString(p),e)}}a.isLastRow=j===(q?h.getTotalCount():h.getCount())-1;if(!a.isLastRow){o=h.getAt(j+1);if(o){a.isLastRow=!o.isEqual(k.getGroupString(o),e)}}}if(a.isFirstRow){b.groupField=f;b.name=b.renderedGroupValue=r?l.renderer(d.get(f),{},d):e;b.groupValue=d.get(f);b.columnName=m?m.text:f;a.collapsibleCls=c.collapsible?c.collapsibleCls:c.hdNotCollapsibleCls;a.groupName=e;if(!c.isExpanded(e)){a.itemClasses.push(c.hdCollapsedCls);a.isCollapsedGroup=!0}if(q){b.rows=b.children=[]}else {b.rows=b.children=c.getRecordGroup(d).items}a.groupRenderInfo=b}if(a.isLastRow){if(c.showSummaryRow){a.summaryRecord=i.summaryData[e];a.itemClasses.push(Ext.baseCSSPrefix+'grid-group-last')}}a.needsWrap=a.isFirstRow||a.summaryRecord}},setup:function(g,f){var a=this,b=a.refreshData,d=f.view,c=d.isGrouping=!a.disabled&&a.getGridStore().isGrouped(),e=d.bufferedRenderer;a.skippedRows=0;if(e){e.variableRowHeight=d.hasVariableRowHeight()||c}b.groupField=a.getGroupField();b.header=a.getGroupedHeader(b.groupField);b.doGrouping=c;f.groupHeaderTpl=Ext.XTemplate.getTpl(a,'groupHeaderTpl');if(c&&a.showSummaryRow){b.summaryData=a.generateSummaryData()}},cleanup:function(c,a){var b=this.refreshData;a.groupRenderInfo=a.groupHeaderTpl=a.isFirstRow=null;b.groupField=b.header=b.summaryData=null},generateSummaryData:function(){var a=this,d=a.getGridStore(),i=d.getFilters(),k=d.getGroups().items,q=a.getGroupField(),p=a.lockingPartner,n=a.updateSummaryRow,l={},j=a.view.ownerCt,o=a.didColumnsChange(),e,m,c,b,g,h,f;if(a.remoteRoot||d.getProxy().getReader().getSummaryRootProperty()){f=a.mixins.summary.generateSummaryData.call(a,q);h=!!f}for(e=0,m=k.length;e<m;++e){c=k[e];b=a.getMetaGroup(c);if(n||h||d.updating||a.grid.reconfiguring||o||a.didGroupChange(c,b,i)){g=a.populateRecord(c,b,f);if(!p||j===j.ownerLockable.normalGrid){b.lastGroup=c;b.lastGroupGeneration=c.generation;b.lastFilterGeneration=i.generation}}else {g=b.aggregateRecord}l[c.getGroupKey()]=g}a.updateSummaryRow=!1;return l},getGroupName:function(d){var e=this,f=e.view,c=e.eventSelector,a,b;a=Ext.fly(d).findParent(c);if(!a){b=Ext.fly(d).findParent(f.itemSelector);if(b){a=b.down(c,!0)}}if(a){return a.getAttribute('data-groupname')}},getRecordGroup:function(c){var a=this.getGridStore(),b=a.getGrouper();if(b){return a.getGroups().getItemGroup(c)}},getGroupedHeader:function(a){var d=this,f=d.view.headerCt,e=d.lockingPartner,c,b;a=a||d.getGroupField();if(a){c='[dataIndex='+a+']';b=f.down(c);if(!b&&e){b=e.view.headerCt.down(c)}}return b||null},getFireEventArgs:function(b,c,a,d){return [b,c,a,this.getGroupName(a),d]},destroy:function(){var a=this,b=a.dataSource;Ext.destroy(a.gridEventRelayers);a.gridEventRelayers=null;a.storeListeners=Ext.destroy(a.storeListeners);a.view=a.prunedHeader=a.grid=a.dataSource=a.groupers=null;if(b&&!b.destroyed){b.bindStore(null);Ext.destroy(b)}a.callParent()},beforeReconfigure:function(h,b,j,e,i){var a=this,g=a.view,c=a.dataSource,f=g.bufferedRenderer,d;if(b&&b!==e){a.gridStore=b;d=b.isBufferedStore;if(a.storeListeners){Ext.destroy(a.storeListeners)}if(!e.isEmptyStore&&d!==e.isBufferedStore){Ext.raise('Cannot reconfigure grouping switching between buffered '+'and non-buffered stores')}if(!c){if(d){a.collapsible=!1;a.setupStoreListeners(b)}else {c=a.createDataSource();c.on('groupchange',a.onGroupChange,a);if(f){f.bindStore(c)}}}if(!d){g.isGrouping=!!b.getGrouper();c.bindStore(b)}a.mixins.summary.bindStore.call(a,h,b)}},createDataSource:function(){var a=this,d=a.view,b=a.lockingPartner,c;if(b&&b.dataSource){a.dataSource=d.dataSource=c=b.dataSource}else {a.dataSource=d.dataSource=c=new Ext.grid.feature.GroupStore(a,a.gridStore)}return c},populateRecord:function(l,m,h){var c=this,o=c.grid.ownerLockable?c.grid.ownerLockable.view:c.view,n=c.getGridStore(),a=m.aggregateRecord,k=o.headerCt.getGridColumns(),p=k.length,j=l.getGroupKey(),f,d,g,b,i,e;a.beginEdit();if(h){f=h[j];for(d in f){if(f.hasOwnProperty(d)){if(d!==a.idProperty){a.set(d,f[d])}}}}for(g=0;g<p;++g){b=k[g];i=b.dataIndex||b.getItemId();if(!h){e=c.getSummary(n,b.summaryType,i,l);a.set(i,e)}else {e=a.get(b.dataIndex)}c.setSummaryData(a,b.getItemId(),e,j)}a.ownerGroup=j;a.endEdit(!0);a.commit();return a},privates:{didGroupChange:function(b,a,d){var c=!0;if(b===a.lastGroup){c=a.lastGroupGeneration!==b.generation||a.lastFilterGeneration!==d.generation}return c},didColumnsChange:function(){var a=this,b=a.view.headerCt.items.generation!==a.lastHeaderCtGeneration;a.lastHeaderCtGeneration=a.view.headerCt.items.generation;return b},setupStoreListeners:function(b){var a=this;a.storeListeners=b.on({groupchange:a.onGroupChange,scope:a,destroyable:!0})}}});Ext.define('Ext.grid.feature.RowBody',{extend:Ext.grid.feature.Feature,alias:'feature.rowbody',rowBodyCls:Ext.baseCSSPrefix+'grid-row-body',innerSelector:'.'+Ext.baseCSSPrefix+'grid-rowbody',rowBodyHiddenCls:Ext.baseCSSPrefix+'grid-row-body-hidden',rowBodyTdSelector:'td.'+Ext.baseCSSPrefix+'grid-cell-rowbody',eventPrefix:'rowbody',eventSelector:'tr.'+Ext.baseCSSPrefix+'grid-rowbody-tr',bodyBefore:!1,outerTpl:{fn:function(h,e,g){var c=this.rowBody,b=e.view,f=b.getVisibleColumnManager().getColumns(),a=b.rowValues,d=c.rowExpander&&c.rowExpander.expanderColumn;a.rowBodyColspan=f.length;a.rowBodyCls=c.rowBodyCls;a.rowIdCls=c.rowIdCls;if(d&&d.getView()===b){b.grid.removeCls(Ext.baseCSSPrefix+'grid-hide-row-expander-spacer');a.addSpacerCell=!0;a.rowBodyColspan-=1;a.spacerCellCls=Ext.baseCSSPrefix+'grid-cell '+Ext.baseCSSPrefix+'grid-row-expander-spacer '+Ext.baseCSSPrefix+'grid-cell-special'}else {b.grid.addCls(Ext.baseCSSPrefix+'grid-hide-row-expander-spacer');a.addSpacerCell=!1}this.nextTpl.applyOut(e,h,g);a.rowBodyCls=a.rowBodyColspan=a.rowBody=null},priority:100},extraRowTpl:['{%','if(this.rowBody.bodyBefore) {','values.view.renderColumnSizer(values, out);','} else {','this.nextTpl.applyOut(values, out, parent);','}','values.view.rowBodyFeature.setupRowData(values.record, values.recordIndex, values);','%}','<tr class="'+Ext.baseCSSPrefix+'grid-rowbody-tr {rowBodyCls} {rowIdCls}" {ariaRowAttr}>','<tpl if="addSpacerCell">','<td class="{spacerCellCls}"></td>','</tpl>','<td class="'+Ext.baseCSSPrefix+'grid-td '+Ext.baseCSSPrefix+'grid-cell-rowbody" colspan="{rowBodyColspan}" {ariaCellAttr}>','<div class="'+Ext.baseCSSPrefix+'grid-rowbody {rowBodyDivCls}" {ariaCellInnerAttr}>{rowBody}</div>','</td>','</tr>','{%','if(this.rowBody.bodyBefore) {','this.nextTpl.applyOut(values, out, parent);','}','%}',{priority:100,beginRowSync:function(a){a.add('rowBody',this.owner.eventSelector)},syncContent:function(e,d,f){var b=this.rowBody,a,c;if(b.doSync){a=Ext.fly(e).down(b.eventSelector,!0);if(a&&(c=Ext.fly(d).down(b.eventSelector,!0))){Ext.fly(a).syncContent(c)}}}}],doSync:!0,init:function(c){var a=this,b=a.view=c.getView();c.variableRowHeight=b.variableRowHeight=!0;b.rowBodyFeature=a;b.headerCt.on({columnschanged:a.onColumnsChanged,scope:a});b.addTpl(a.outerTpl).rowBody=a;b.addRowTpl(Ext.XTemplate.getTpl(this,'extraRowTpl')).rowBody=a;a.callParent(arguments)},getSelectedRow:function(c,b){var a=c.getNode(b);if(a){return Ext.fly(a).down(this.eventSelector)}return null},onColumnsChanged:function(f){var d=this.view,b,c,e,a;if(!d.rendered){return}b=d.el.query(this.rowBodyTdSelector);c=f.getVisibleGridColumns().length;e=b.length;for(a=0;a<e;++a){b[a].setAttribute('colSpan',c)}},setupRowData:function(b,c,a){if(this.getAdditionalData){Ext.apply(a,this.getAdditionalData(b.data,c,b,a))}}});Ext.define('Ext.grid.feature.Summary',{extend:Ext.grid.feature.AbstractSummary,alias:'feature.summary',dock:undefined,summaryItemCls:Ext.baseCSSPrefix+'grid-row-summary-item',dockedSummaryCls:Ext.baseCSSPrefix+'docked-summary',summaryRowCls:Ext.baseCSSPrefix+'grid-row-summary '+Ext.baseCSSPrefix+'grid-row-total',summaryRowSelector:'.'+Ext.baseCSSPrefix+'grid-row-summary.'+Ext.baseCSSPrefix+'grid-row-total',panelBodyCls:Ext.baseCSSPrefix+'summary-',hasFeatureEvent:!1,fullSummaryTpl:{fn:function(g,b,f){var a=this.summaryFeature,d=a.summaryRecord,c=b.view,e=c.bufferedRenderer;this.nextTpl.applyOut(b,g,f);if(!a.disabled&&a.showSummaryRow&&!c.addingRows&&c.store.isLast(b.record)){if(e&&!a.dock){e.variableRowHeight=!0}a.outputSummaryRecord(d&&d.isModel?d:a.createSummaryRecord(c),b,g,f)}},priority:300,beginRowSync:function(a){a.add('fullSummary',this.summaryFeature.summaryRowSelector)},syncContent:function(d,c,e){d=Ext.fly(d,'syncDest');c=Ext.fly(c,'syncSrc');var g=this.summaryFeature,f=g.summaryRowSelector,b=d.down(f,!0),a=c.down(f,!0);if(b&&a){if(e){this.summaryFeature.view.updateColumns(b,a,e)}else {Ext.fly(b).syncContent(a)}}}},init:function(b){var a=this,d=a.view,c=a.dock;a.callParent([b]);if(c){b.addBodyCls(a.panelBodyCls+c);b.headerCt.on({add:a.onStoreUpdate,afterlayout:a.onStoreUpdate,remove:a.onStoreUpdate,scope:a});b.on({beforerender:function(){var e=[a.summaryTableCls];if(d.columnLines){e[e.length]=d.ownerCt.colLinesCls}a.summaryBar=b.addDocked({childEls:['innerCt','item'],renderTpl:['<div id="{id}-innerCt" data-ref="innerCt" role="presentation">','<table id="{id}-item" data-ref="item" cellPadding="0" cellSpacing="0" class="'+e.join(' ')+'">','<tr class="'+a.summaryRowCls+'"></tr>','</table>','</div>'],scrollable:{x:!1,y:!1},hidden:!a.showSummaryRow,itemId:'summaryBar',cls:[a.dockedSummaryCls,a.dockedSummaryCls+'-'+c],xtype:'component',dock:c,weight:10000000})[0]},afterrender:function(){b.getView().getScrollable().addPartner(a.summaryBar.getScrollable(),'x');a.onStoreUpdate();a.columnSizer=a.summaryBar.el},single:!0})}else {if(b.bufferedRenderer){a.wrapsItem=!0;d.addRowTpl(a.fullSummaryTpl).summaryFeature=a;d.on('refresh',a.onViewRefresh,a)}else {a.wrapsItem=!1;a.view.addFooterFn(a.renderSummaryRow)}}b.headerCt.on({afterlayout:a.afterHeaderCtLayout,scope:a});b.ownerGrid.on({beforereconfigure:a.onBeforeReconfigure,columnmove:a.onStoreUpdate,scope:a});a.bindStore(b,b.getStore())},onBeforeReconfigure:function(b,a){this.summaryRecord=null;if(a){this.bindStore(b,a)}},bindStore:function(c,b){var a=this;Ext.destroy(a.storeListeners);a.storeListeners=b.on({scope:a,destroyable:!0,update:a.onStoreUpdate,datachanged:a.onStoreUpdate});a.callParent([c,b])},renderSummaryRow:function(e,d,f){var c=e.view,a=c.findFeature('summary'),b;if(!a.disabled&&a.showSummaryRow&&!c.addingRows&&!c.updatingRows){b=a.summaryRecord;d.push('<table cellpadding="0" cellspacing="0" class="'+a.summaryItemCls+'" style="table-layout: fixed; width: 100%;">');a.outputSummaryRecord(b&&b.isModel?b:a.createSummaryRecord(c),e,d,f);d.push('</table>')}},toggleSummaryRow:function(d,c){var a=this,b=a.summaryBar;a.callParent([d,c]);if(b){b.setVisible(a.showSummaryRow);a.onViewScroll()}},getSummaryBar:function(){return this.summaryBar},getSummaryRowPlaceholder:function(d){var c=this.summaryItemCls,a,b;a=Ext.fly(d.getNodeContainer());if(!a){return null}b=a.down('.'+c,!0);if(!b){b=a.createChild({tag:'table',cellpadding:0,cellspacing:0,cls:c,style:'table-layout: fixed; width: 100%',children:[{tag:'tbody'}]},!1,!0)}return b},vetoEvent:function(c,d,b,a){return !a.getTarget(this.summaryRowSelector)},onViewScroll:function(){this.summaryBar.setScrollX(this.view.getScrollX())},onViewRefresh:function(b){var a=this,c,d;if(!a.disabled&&a.showSummaryRow&&!b.all.getCount()){c=a.createSummaryRecord(b);d=a.getSummaryRowPlaceholder(b);d.tBodies[0].appendChild(b.createRowElement(c,-1).querySelector(a.summaryRowSelector))}},createSummaryRecord:function(g){var c=this,h=g.headerCt.getGridColumns(),i=c.remoteRoot,a=c.summaryRecord||(c.summaryRecord=new Ext.data.Model({id:g.id+'-summary-record'})),j=h.length,e,d,f,b;a.beginEdit();if(i){b=c.generateSummaryData();if(b){a.set(b)}}else {for(e=0;e<j;e++){d=h[e];f=d.dataIndex||d.getItemId();b=c.getSummary(g.store,d.summaryType,f);a.set(f,b);c.setSummaryData(a,d.getItemId(),b)}}a.endEdit(!0);a.commit(!0);a.isSummary=!0;return a},onStoreUpdate:function(){var d=this,c=d.view,f=d.summaryRowSelector,h=d.dock,g,e,b,a;if(!c.rendered){return}g=d.createSummaryRecord(c);e=Ext.fly(c.createRowElement(g,-1)).down(f,!0);if(!e){return}if(h){a=d.summaryBar.item.dom.firstChild;b=a.firstChild;a.insertBefore(e,b);a.removeChild(b)}else {b=c.el.down(f,!0);a=b&&b.parentNode;if(a){a.removeChild(b)}a=c.getRow(c.all.last());if(a){a=a.parentElement}else {a=d.getSummaryRowPlaceholder(c);a=a&&a.tBodies&&a.tBodies[0]}if(a){a.appendChild(e)}}},afterHeaderCtLayout:function(h){var a=this,e=a.view,i=e.getVisibleColumnManager().getColumns(),k=i.length,f,b,c,g,d,j;if(a.showSummaryRow&&e.refreshCounter){if(a.dock){c=a.summaryBar.el;d=h.getTableWidth();j=a.summaryBar.innerCt;a.summaryBar.item.setWidth(d);if(h.tooNarrow){d+=Ext.scrollbar.width()}j.setWidth(d)}else {c=Ext.fly(Ext.fly(e.getNodeContainer()).down('.'+a.summaryItemCls,!0))}if(c){for(f=0;f<k;f++){b=i[f];g=c.down(e.getCellSelector(b),!0);if(g){Ext.fly(g).setWidth(b.width||(b.lastBox?b.lastBox.width:100))}}}}},destroy:function(){var a=this;a.summaryRecord=a.storeListeners=Ext.destroy(a.storeListeners);a.callParent()}});Ext.define('Ext.menu.Item',{extend:Ext.Component,alias:'widget.menuitem',alternateClassName:'Ext.menu.TextItem',isMenuItem:!0,mixins:[Ext.mixin.Queryable],config:{glyph:null},activated:!1,activeCls:Ext.baseCSSPrefix+'menu-item-active',clickHideDelay:0,destroyMenu:!0,disabledCls:Ext.baseCSSPrefix+'menu-item-disabled',emptyText:'\xa0',hideOnClick:!0,menuAlign:'tl-tr?',menuExpandDelay:200,menuHideDelay:200,tooltipType:'qtip',focusable:!0,ariaRole:'menuitem',ariaEl:'itemEl',baseCls:Ext.baseCSSPrefix+'menu-item',arrowCls:Ext.baseCSSPrefix+'menu-item-arrow',baseIconCls:Ext.baseCSSPrefix+'menu-item-icon',textCls:Ext.baseCSSPrefix+'menu-item-text',indentCls:Ext.baseCSSPrefix+'menu-item-indent',indentNoSeparatorCls:Ext.baseCSSPrefix+'menu-item-indent-no-separator',indentRightIconCls:Ext.baseCSSPrefix+'menu-item-indent-right-icon',indentRightArrowCls:Ext.baseCSSPrefix+'menu-item-indent-right-arrow',linkCls:Ext.baseCSSPrefix+'menu-item-link',linkHrefCls:Ext.baseCSSPrefix+'menu-item-link-href',childEls:['itemEl','iconEl','textEl','arrowEl'],renderTpl:'<tpl if="plain">'+'{text}'+'<tpl else>'+'<a id="{id}-itemEl" data-ref="itemEl"'+' class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}"'+' href="{href}" '+'<tpl if="hrefTarget"> target="{hrefTarget}"</tpl>'+' hidefocus="true"'+' unselectable="on"'+'<tpl if="tabIndex != null">'+' tabindex="{tabIndex}"'+'</tpl>'+'<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>'+'>'+'<span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on" role="presentation">{text}</span>'+'<tpl if="hasIcon">'+'<div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}'+'{[values.rightIcon ? "-right" : ""]} {iconCls}'+'{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl>'+'<tpl if="glyph">'+'<tpl if="glyphFontFamily">'+'font-family:{glyphFontFamily};'+'</tpl>'+'">'+'{glyph}'+'<tpl else>'+'">'+'</tpl>'+'</div>'+'</tpl>'+'<tpl if="showCheckbox">'+'<div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}'+'{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} '+'{groupCls} {checkboxCls}{childElCls}">'+'</div>'+'</tpl>'+'<tpl if="hasMenu">'+'<div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div>'+'</tpl>'+'</a>'+'</tpl>',autoEl:{role:'presentation'},maskOnDisable:!1,iconAlign:'left',initComponent:function(){var a=this,b=a.cls?[a.cls]:[],c;if(a.hasOwnProperty('canActivate')){a.focusable=a.canActivate}if(a.plain){b.push(Ext.baseCSSPrefix+'menu-item-plain')}if(b.length){a.cls=b.join(' ')}if(a.menu){c=a.menu;a.menu=null;a.setMenu(c)}a.callParent(arguments)},canFocus:function(){var a=this;return a.focusable&&a.rendered&&a.canActivate!==!1&&!a.destroying&&!a.destroyed&&a.isVisible(!0)},onFocus:function(b){var a=this;a.callParent([b]);if(!a.plain){a.addCls(a.activeCls)}a.activated=!0;if(a.hasListeners.activate){a.fireEvent('activate',a)}},onFocusLeave:function(b){var a=this;a.callParent([b]);if(!a.plain){a.removeCls(a.activeCls)}a.doHideMenu();a.activated=!1;if(a.hasListeners.deactivate){a.fireEvent('deactivate',a)}},doHideMenu:function(){var a=this.menu;this.cancelDeferExpand();if(a&&a.isVisible()){a.hide()}},deferHideParentMenus:function(){var a;for(a=this.getRefOwner();a&&(a.isMenu&&a.floating||a.isMenuItem);a=a.getRefOwner()){if(a.isMenu){a.hide()}}},expandMenu:function(c,b){var a=this;if(!a.disabled&&a.activated&&a.menu){a.hideOnClick=!1;a.cancelDeferHide();b=b==null?a.menuExpandDelay:b;if(b===0){a.doExpandMenu(c)}else {a.cancelDeferExpand();a.expandMenuTimer=Ext.defer(a.doExpandMenu,b,a,[c])}}},doExpandMenu:function(c){var b=this,a=b.menu,d;if(!a.isVisible()){b.parentMenu.activeChild=a;a.ownerCmp=b;a.parentMenu=b.parentMenu;a.constrainTo=document.body;a.autoFocus=!c||!c.pointerType;a.showBy(b,b.menuAlign);d=b.ariaEl.dom;if(d){d.setAttribute('aria-owns',a.id)}}else {if(c&&c.type==='keydown'){a.focus()}}},getRefItems:function(c){var b=this.menu,a;if(b){a=b.getRefItems(c);a.unshift(b)}return a||[]},getValue:function(){return this.value},hideMenu:function(b){var a=this;if(a.menu){a.cancelDeferExpand();a.hideMenuTimer=Ext.defer(a.doHideMenu,Ext.isNumber(b)?b:a.menuHideDelay,a)}},onClick:function(b){var a=this,e=a.clickHideDelay,f=b.browserEvent,d,c;if(!a.href||a.disabled){b.stopEvent();if(a.disabled){return !1}}if(a.disabled||a.handlingClick){return}if(a.hideOnClick&&!a.menu){if(!e){a.deferHideParentMenus()}else {a.deferHideParentMenusTimer=Ext.defer(a.deferHideParentMenus,e,a)}}d=a.fireEvent('click',a,b);if(a.destroyed){return}if(d!==!1&&a.handler){Ext.callback(a.handler,a.scope,[a,b],0,a)}if(a.destroyed){return}if(Ext.isIE9m){c=f.returnValue===!1?!0:!1}else {c=!!f.defaultPrevented}if(a.href&&b.type!=='click'&&!c){a.handlingClick=!0;a.itemEl.dom.click();a.handlingClick=!1}if(!a.hideOnClick&&!a.hasFocus){a.focus()}return d},onRemoved:function(){var a=this;if(a.activated&&a.parentMenu.activeItem===a){a.parentMenu.deactivateActiveItem()}a.callParent(arguments);a.parentMenu=a.ownerCmp=null},doDestroy:function(){var a=this;if(a.rendered){a.clearTip()}a.cancelDeferExpand();a.cancelDeferHide();Ext.undefer(a.deferHideParentMenusTimer);a.setMenu(null);a.callParent()},beforeRender:function(){var a=this,b=a.glyph,i,c=!!(a.icon||a.iconCls||b),f=!!a.menu,h=a.iconAlign==='right'&&!f,e=a.isMenuCheckItem,d=[],j=a.ownerCt,g=j.plain;if(a.plain){a.ariaEl='el'}a.callParent();if(c){if(f&&a.showCheckbox){c=!1}}if(b){i=b.fontFamily;b=b.character}if(!g||c&&!h||e){if(j.showSeparator&&!g){d.push(a.indentCls)}else {d.push(a.indentNoSeparatorCls)}}if(f){d.push(a.indentRightArrowCls)}else {if(c&&(h||e)){d.push(a.indentRightIconCls)}}Ext.applyIf(a.renderData,{hasHref:!!a.href,href:a.href||'#',hrefTarget:a.hrefTarget,icon:a.icon,iconCls:a.iconCls,glyph:b,glyphCls:b?Ext.baseCSSPrefix+'menu-item-glyph':undefined,glyphFontFamily:i,hasIcon:c,hasMenu:f,indent:!g||c||e,isCheckItem:e,rightIcon:h,plain:a.plain,text:a.getDisplayText(),arrowCls:a.arrowCls,baseIconCls:a.baseIconCls,textCls:a.textCls,indentCls:d.join(' '),linkCls:a.linkCls,linkHrefCls:a.linkHrefCls,groupCls:a.group?a.groupCls:'',tabIndex:a.tabIndex})},onRender:function(){var a=this;a.callParent(arguments);if(a.tooltip){a.setTooltip(a.tooltip,!0)}},getMenu:function(){return this.menu||null},setMenu:function(b,f){var a=this,e=a.menu,h=a.arrowEl,d=a.ariaEl.dom,c,g;if(e){e.ownerCmp=e.parentMenu=null;if(f===!0||f!==!1&&a.destroyMenu){Ext.destroy(e)}if(d){d.removeAttribute('aria-haspopup');d.removeAttribute('aria-owns')}else {c=a.ariaRenderAttributes||(a.ariaRenderAttributes={});delete c['aria-haspopup'];delete c['aria-owns']}}if(b){g=b.isMenu;b=a.menu=Ext.menu.Manager.get(b,{ownerCmp:a,focusOnToFront:!1});b.setOwnerCmp(a,g);if(d){d.setAttribute('aria-haspopup',!0);d.setAttribute('aria-owns',b.id)}else {c=a.ariaRenderAttributes||(a.ariaRenderAttributes={});c['aria-haspopup']=!0;if(!b.hidden){c['aria-owns']=b.id}}}else {b=a.menu=null}if(b&&a.rendered&&!a.destroying&&h){h[b?'addCls':'removeCls'](a.arrowCls)}},setHandler:function(b,a){this.handler=b||null;this.scope=a},setIcon:function(b){var a=this,c=a.iconEl,d=a.icon;if(a.glyph){a.setGlyph(null)}if(c){c.setStyle('background-image',b?'url('+b+')':'')}a.icon=b;a.fireEvent('iconchange',a,d,b)},setIconCls:function(b){var a=this,c=a.iconEl,d=a.iconCls;if(a.glyph){a.setGlyph(null)}if(c){c.setStyle('background-image','');if(a.iconCls){c.removeCls(a.iconCls)}if(b){c.addCls(b)}}a.iconCls=b;a.fireEvent('iconchange',a,d,b)},setText:function(b){var a=this,d=a.textEl||a.el,c=a.text;a.text=b;if(a.rendered){d.setHtml(a.getDisplayText());a.updateLayout()}a.fireEvent('textchange',a,c,b)},getTipAttr:function(){return this.tooltipType==='qtip'?'data-qtip':'title'},clearTip:function(){if(Ext.quickTipsActive&&Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.itemEl)}},setTooltip:function(b,c){var a=this;if(a.rendered){if(!c){a.clearTip()}if(Ext.quickTipsActive&&Ext.isObject(b)){Ext.tip.QuickTipManager.register(Ext.apply({target:a.itemEl.id},b));a.tooltip=b}else {a.itemEl.dom.setAttribute(a.getTipAttr(),b)}}else {a.tooltip=b}return a},getFocusEl:function(){return this.plain?this.el:this.itemEl},getFocusClsEl:function(){return this.el},getDisplayText:function(){return this.text||this.emptyText},privates:{cancelDeferExpand:function(){window.clearTimeout(this.expandMenuTimer)},cancelDeferHide:function(){window.clearTimeout(this.hideMenuTimer)}},applyGlyph:function(a,b){if(a){if(!a.isGlyph){a=new Ext.Glyph(a)}if(a.isEqual(b)){a=undefined}}return a},updateGlyph:function(b,c){var a=this.iconEl;if(a){a.setStyle('background-image','none');this.icon=null;if(b){a.dom.innerHTML=b.character;a.setStyle(b.getStyle())}else {a.dom.innerHTML=''}}}});Ext.define('Ext.theme.triton.menu.Item',{override:'Ext.menu.Item',compatibility:Ext.isIE8,onFocus:function(a){this.callParent([a]);this.repaintIcons()},onFocusLeave:function(a){this.callParent([a]);this.repaintIcons()},privates:{repaintIcons:function(){var c=this.iconEl,a=this.arrowEl,b=this.checkEl;if(c){c.syncRepaint()}if(a){a.syncRepaint()}if(b){b.syncRepaint()}}}});Ext.define('Ext.menu.CheckItem',{extend:Ext.menu.Item,alias:'widget.menucheckitem',checkedCls:Ext.baseCSSPrefix+'menu-item-checked',uncheckedCls:Ext.baseCSSPrefix+'menu-item-unchecked',groupCls:Ext.baseCSSPrefix+'menu-group-icon',hideOnClick:!1,checkChangeDisabled:!1,submenuText:'{0} submenu',ariaRole:'menuitemcheckbox',childEls:['checkEl'],defaultBindProperty:'checked',showCheckbox:!0,isMenuCheckItem:!0,checkboxCls:Ext.baseCSSPrefix+'menu-item-checkbox',initComponent:function(){var a=this,b=a.checked;a.checkedConfigure=b;a.checked=!!b;a.callParent();if(a.group){Ext.menu.Manager.registerCheckable(a);if(a.initialConfig.hideOnClick!==!1){a.hideOnClick=!0}}},beforeRender:function(){var a=this,b;a.callParent();Ext.apply(a.renderData,{checkboxCls:a.checkboxCls,showCheckbox:a.showCheckbox});b=a.ariaRenderAttributes||(a.ariaRenderAttributes={});b['aria-checked']=a.menu?'mixed':a.checked;if(a.menu){b['aria-label']=Ext.String.formatEncode(a.submenuText,a.text)}},afterRender:function(){var a=this;a.callParent();a.checked=!a.checked;a.initial=!0;a.setChecked(!a.checked,!0);a.initial=!1;if(a.checkChangeDisabled){a.disableCheckChange()}if(Ext.isGecko&&a.checkEl){a.checkEl.on('mousedown',a.onMouseDownCheck)}},disableCheckChange:function(){var a=this,b=a.checkEl;if(b){b.addCls(a.disabledCls)}if(Ext.isIE8&&a.rendered){a.el.repaint()}a.checkChangeDisabled=!0},enableCheckChange:function(){var a=this,b=a.checkEl;if(b){b.removeCls(a.disabledCls)}a.checkChangeDisabled=!1},onMouseDownCheck:function(a){a.preventDefault()},onClick:function(b){var a=this;if(!(a.disabled||a.checkChangeDisabled||a.checked&&a.group||a.menu&&'touch'===b.pointerType&&!a.checkEl.contains(b.target))){a.setChecked(!a.checked);if(b.type==='keydown'&&a.menu){return !1}}return a.callParent([b])},doDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);this.callParent()},setText:function(c){var a=this,b=a.ariaEl.dom;a.callParent([c]);if(b&&a.menu){b.setAttribute('aria-label',Ext.String.formatEncode(a.submenuText,c))}},setChecked:function(b,d){var a=this,f=a.checkedCls,e=a.uncheckedCls,c=a.el,g=a.ariaEl.dom,h=a.checkedConfigure;if(a.checked!==b&&(d||a.fireEvent('beforecheckchange',a,b)!==!1)){if(c){if(b){c.addCls(f);c.removeCls(e)}else {c.addCls(e);c.removeCls(f)}}if(g){g.setAttribute('aria-checked',a.menu?'mixed':!!b)}a.checked=b;a.checkedConfigure=b;Ext.menu.Manager.onCheckChange(a,b);if(!(a.initial&&h==null)){a.publishState('checked',b)}if(!d){Ext.callback(a.checkHandler,a.scope,[a,b],0,a);a.fireEvent('checkchange',a,b)}}}});Ext.define('Ext.menu.Separator',{extend:Ext.menu.Item,alias:'widget.menuseparator',focusable:!1,canActivate:!1,hideOnClick:!1,plain:!0,separatorCls:Ext.baseCSSPrefix+'menu-item-separator',text:'&#160;',ariaRole:'separator',beforeRender:function(){this.addCls(this.separatorCls);this.callParent()}});Ext.define('Ext.theme.neptune.menu.Separator',{override:'Ext.menu.Separator',border:!0});Ext.define('Ext.menu.Menu',{extend:Ext.panel.Panel,alias:'widget.menu',defaultType:'menuitem',enableKeyNav:!0,allowOtherMenus:!1,ariaRole:'menu',floating:!0,constrain:!0,hidden:!0,hideMode:'visibility',ignoreParentClicks:!1,mouseLeaveDelay:50,isMenu:!0,showSeparator:!0,minWidth:undefined,defaultMinWidth:120,defaultAlign:'tl-bl?',focusOnToFront:!1,bringParentToFront:!1,alignOnScroll:!1,focusable:!0,tabIndex:-1,focusableContainer:!0,defaultFocus:':focusable',allowFocusingDisabledChildren:!0,menuClickBuffer:0,baseCls:Ext.baseCSSPrefix+'menu',_iconSeparatorCls:Ext.baseCSSPrefix+'menu-icon-separator',_itemCmpCls:Ext.baseCSSPrefix+'menu-item-cmp',layout:{type:'vbox',align:'stretchmax',overflowHandler:'Scroller'},initComponent:function(){var a=this,d=[Ext.baseCSSPrefix+'menu'],c=a.bodyCls?[a.bodyCls]:[],e=a.floating!==!1,b={element:'el',click:a.onClick,mouseover:a.onMouseOver,scope:a};if(Ext.supports.Touch){b.pointerdown=a.onMouseOver}a.on(b);a.on({beforeshow:a.onBeforeShow,scope:a});if(a.plain){d.push(Ext.baseCSSPrefix+'menu-plain')}a.cls=d.join(' ');c.push(Ext.baseCSSPrefix+'menu-body',Ext.dom.Element.unselectableCls);a.bodyCls=c.join(' ');if(e){if(a.minWidth===undefined){a.minWidth=a.defaultMinWidth}}else {a.hidden=!!a.initialConfig.hidden;a.constrain=!1}a.callParent();Ext.override(a.getLayout(),{configureItem:a.configureItem});a.itemOverTask=new Ext.util.DelayedTask(a.handleItemOver,a)},initFloatConstrain:Ext.emptyFn,getInherited:function(){var a=this.callParent();if(this.floating){a.hidden=this.hidden}return a},beforeRender:function(){var a=this;a.callParent();if(!a.getSizeModel().width.shrinkWrap){a.layout.align='stretch'}if(a.floating){a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-expanded']=!!a.autoShow}},onBoxReady:function(e,d){var a=this,b=a._iconSeparatorCls,c=a.focusableKeyNav;if(c){c.map.addBinding([{key:Ext.event.Event.ESC,handler:a.onEscapeKey,scope:a},{key:/[\w]/,handler:a.onShortcutKey,scope:a,shift:!1,ctrl:!1,alt:!1}])}else {a.escapeKeyNav=new Ext.util.KeyNav({target:a.el,eventName:'keydown',scope:a,esc:a.onEscapeKey})}a.callParent([e,d]);if(a.showSeparator){a.iconSepEl=a.body.insertFirst({role:'presentation',cls:b+' '+b+'-'+a.ui,html:'&#160;'})}if(Ext.supports.Touch||Ext.supports.MSPointerEvents||Ext.supports.PointerEvents){a.el.on({scope:a,click:a.preventClick,translate:!1})}a.mouseMonitor=a.el.monitorMouseLeave(a.mouseLeaveDelay,a.onMouseLeave,a)},onFocusEnter:function(c){var a=this,b;a.callParent([c]);a.mixins.focusablecontainer.onFocusEnter.call(a,c);if(a.floating){b=a.getInherited();if(!b.topmostFocusEvent){b.topmostFocusEvent=c}}},onFocusLeave:function(b){var a=this;a.callParent([b]);a.lastFocusedChild=null;a.mixins.focusablecontainer.onFocusLeave.call(a,b);if(a.floating){a.hide()}},handleItemOver:function(b,a){if(!a.containsFocus&&(b.pointerType==='mouse'||a.isMenuItem)){a.focus()}if(a.expandMenu){a.expandMenu(b)}},canActivateItem:function(a){return a&&a.isFocusable()},deactivateActiveItem:function(){var b=this,a=b.lastFocusedChild;if(a){a.blur()}},getItemFromEvent:function(d){var c=this,b=c.layout.getRenderTarget().dom,a=d.getTarget();while(a.parentNode!==b){a=a.parentNode;if(!a){return}}return Ext.getCmp(a.id)},lookupComponent:function(a){var b=this;if(typeof a==='string'){if(a[0]==='@'){a=this.callParent([a])}else {a=b.lookupItemFromString(a)}}else {if(Ext.isObject(a)){a=b.lookupItemFromObject(a)}}if(!a.dock){a.minWidth=a.minWidth||b.minWidth}return a},lookupItemFromObject:function(a){var b=this.defaultType;if(!a.isComponent){if(!a.xtype&&Ext.isBoolean(a.checked)){b='menucheckitem'}a=Ext.ComponentManager.create(a,b)}if(a.isMenuItem){a.parentMenu=this}return a},lookupItemFromString:function(a){return a==='separator'||a==='-'?new Ext.menu.Separator():new Ext.menu.Item({canActivate:!1,hideOnClick:!1,plain:!0,text:a})},configureItem:function(a){var c=this.owner,f=Ext.baseCSSPrefix,e=c.ui,b,d;if(a.isMenuItem){a.setUI(e)}else {if(c.items.getCount()>1&&!a.rendered&&!a.dock){d=c._itemCmpCls;b=[d,d+'-'+e];if(!c.plain&&(a.indent!==!1||a.iconCls==='no-icon')){b.push(f+'menu-item-indent-'+e)}if(a.rendered){a.el.addCls(b)}else {a.cls=(a.cls||'')+' '+b.join(' ')}a.$extraMenuCls=b}}this.callParent(arguments)},onRemove:function(a){this.callParent([a]);if(!a.destroyed&&a.$extraMenuCls){a.el.removeCls(a.$extraMenuCls)}},onClick:function(b){var c=this,f=b.type,a,d,e=f==='keydown';if(c.disabled){b.stopEvent();return}a=c.getItemFromEvent(b);if(a&&a.isMenuItem){if(!a.menu||!c.ignoreParentClicks){d=a.onClick(b)}else {b.stopEvent()}if(c.destroyed){return}if(a.menu&&d!==!1&&e){a.expandMenu(b,0)}}if(!a||a.disabled){a=undefined}c.fireEvent('click',c,a,b)},doDestroy:function(){var a=this;if(a.escapeKeyNav){a.escapeKeyNav.destroy()}a.itemOverTask.cancel();a.parentMenu=a.ownerCmp=a.escapeKeyNav=null;if(a.rendered){a.el.un(a.mouseMonitor);Ext.destroy(a.iconSepEl)}Ext.menu.Manager.onHide(a);a.callParent()},onMouseLeave:function(b){var a=this;if(a.itemOverTask){a.itemOverTask.cancel()}if(a.disabled){return}a.fireEvent('mouseleave',a,b)},onMouseOver:function(b){var a=this,g=b.getRelatedTarget(),e=!a.el.contains(g),d=a.getItemFromEvent(b),c=a.parentMenu,f=a.ownerCmp;if(e&&c){c.setActiveItem(f);f.cancelDeferHide();c.mouseMonitor.mouseenter();c.itemOverTask.cancel()}if(a.disabled){return}if(d){if(b.pointerType==='touch'){a.handleItemOver(b,d)}else {a.itemOverTask.delay(a.expanded?a.mouseLeaveDelay:0,null,null,[b,d])}}if(e){a.fireEvent('mouseenter',a,b)}a.fireEvent('mouseover',a,d,b)},setActiveItem:function(a){var b=this;if(a&&a!==b.lastFocusedChild){b.focusChild(a,1)}},onEscapeKey:function(){if(this.floating){this.hide()}},onShortcutKey:function(h,g){var f=String.fromCharCode(g.getCharCode()),c=this.query('>[text]'),e=c.length,a=this.lastFocusedChild,d=Ext.Array.indexOf(c,a),b=d;if(e===0){return}for(;;){if(++b===e){b=0}a=c[b];if(b===d){return}if(a.text&&a.text[0].toUpperCase()===f){a.focus();return}}},onBeforeShow:function(){if(Ext.Date.getElapsed(this.lastHide)<this.menuClickBuffer){return !1}},beforeShow:function(){var a=this,b;if(a.floating){b=a.hasFloatMenuParent();if(!b&&!a.allowOtherMenus){Ext.menu.Manager.hideAll()}}a.callParent()},afterShow:function(c,d,e){var a=this,b=a.ariaEl.dom;a.callParent([c,d,e]);Ext.menu.Manager.onShow(a);if(a.parentMenu){a.parentMenu.expanded=!0}if(a.floating&&b){b.setAttribute('aria-expanded',!0)}if(a.floating){a.maxHeight=a.savedMaxHeight}if(a.autoFocus){a.focus()}},onHide:function(c,e,d){var a=this,b=a.ariaEl.dom;a.callParent([c,e,d]);a.lastHide=Ext.Date.now();Ext.menu.Manager.onHide(a);if(a.parentMenu){a.parentMenu.expanded=!1}if(a.floating&&b){b.setAttribute('aria-expanded',!1)}},afterHide:function(b,a){this.callParent([b,a]);delete this.getInherited().topmostFocusEvent},preventClick:function(b){var a=this.getItemFromEvent(b);if(a&&a.isMenuItem&&!a.href){b.preventDefault()}},privates:{applyDefaults:function(a){if(!Ext.isString(a)){a=this.callParent([a])}return a},initFocusableElement:function(){var b=this,c=b.tabIndex,a=b.el;if(b.floating&&c!=null&&a&&a.dom){a.dom.setAttribute('tabIndex',c);a.dom.setAttribute('data-componentid',b.id)}},processFocusableContainerKeyEvent:function(a){if(a.keyCode===a.ESC){a.target=this.el.dom}else {if(a.keyCode===a.TAB&&Ext.fly(a.target).is('input[type=text],textarea')){a.preventDefault();a.target=this.getItemFromEvent(a).el.dom;if(a.shiftKey){a.shiftKey=!1;a.keyCode=a.UP}else {a.keyCode=a.DOWN}}else {return this.callParent([a])}}return a},onFocusableContainerTabKey:function(b){var a=this;if(a.floating){if(b.shiftKey){b.preventDefault()}else {a.focusEnterEvent=a.getInherited().topmostFocusEvent}a.hide()}},onFocusableContainerEnterKey:function(a){this.onClick(a)},onFocusableContainerSpaceKey:function(a){this.onClick(a)},onFocusableContainerLeftKey:function(a){a.preventDefault();if(this.parentMenu){this.ownerCmp.focus();this.hide()}},onFocusableContainerRightKey:function(b){var c=this,a=c.lastFocusedChild;b.preventDefault();if(a&&a.expandMenu){a.expandMenu(b,0)}},hasFloatMenuParent:function(){return this.parentMenu||this.up('menu[floating=true]')},setOwnerCmp:function(b,c){var a=this;a.parentMenu=b.isMenuItem?b:null;a.ownerCmp=b;a.registerWithOwnerCt();delete a.hierarchicallyHidden;a.onInheritedAdd(b,c);a.containerOnAdded(b,c)}}});Ext.define('Ext.theme.neptune.menu.Menu',{override:'Ext.menu.Menu',showSeparator:!1});Ext.define('Ext.theme.triton.menu.Menu',{override:'Ext.menu.Menu',compatibility:Ext.isIE8,afterShow:function(){var e=this,c,a,b,d;e.callParent(arguments);c=e.items.getRange();for(b=0,d=c.length;b<d;b++){a=c[b];if(a&&a.repaintIcons){a.repaintIcons()}}}});Ext.define('Ext.theme.material.menu.Menu',{override:'Ext.menu.Menu',ripple:{color:'default'}});Ext.define('Ext.grid.filters.filter.Base',{mixins:[Ext.mixin.Factoryable],factoryConfig:{type:'grid.filter'},$configPrefixed:!1,$configStrict:!1,config:{itemDefaults:null,menuDefaults:{xtype:'menu'},updateBuffer:500,serializer:null},active:!1,type:'string',dataIndex:null,menu:null,isGridFilter:!0,defaultRoot:'data',filterIdPrefix:Ext.baseCSSPrefix+'gridfilter',constructor:function(c){var a=this,b;a.initConfig(c);b=a.column;a.columnListeners=b.on('destroy',a.destroy,a,{destroyable:!0});a.dataIndex=a.dataIndex||b.dataIndex;a.task=new Ext.util.DelayedTask(a.setValue,a)},destroy:function(){var a=this;if(a.task){a.task.cancel();a.task=null}a.columnListeners=a.columnListeners.destroy();a.grid=a.menu=Ext.destroy(a.menu);a.callParent()},addStoreFilter:function(b){var a=this.getGridStore().getFilters(),d=a.indexOf(b),c=d!==-1?a.getAt(d):null;if(!c||!Ext.util.Filter.isEqual(c,b)){a.add(b)}},createFilter:function(b,c){var a=new Ext.util.Filter(this.getFilterConfig(b,c));a.isGridFilter=!0;return a},getFilterConfig:function(a,b){a.id=this.getBaseIdPrefix();if(!a.property){a.property=this.dataIndex}if(!a.root){a.root=this.defaultRoot}if(b){a.id+='-'+b}a.serializer=this.getSerializer();return a},createMenu:function(){this.menu=Ext.widget(this.getMenuConfig())},getActiveState:function(b,c){var a=b.active;return a!==undefined?a:c!==undefined},getBaseIdPrefix:function(){return this.filterIdPrefix+'-'+this.dataIndex},getMenuConfig:function(){return Ext.apply({},this.getMenuDefaults())},getGridStore:function(){return this.grid.getStore()},getStoreFilter:function(a){var b=this.getBaseIdPrefix();if(a){b+='-'+a}return this.getGridStore().getFilters().get(b)},onValueChange:function(f,c){var a=this,e=c.getKey(),d=a.updateBuffer,b;if(e===c.TAB){return}if(f.isValid()){if(e===c.RETURN){a.menu.hide();return}b=a.getValue(f);if(b===a.value){return}if(d){a.task.delay(d,null,null,[b])}else {a.setValue(b)}}},preprocess:Ext.emptyFn,removeStoreFilter:function(a){this.getGridStore().getFilters().remove(a)},getValue:Ext.emptyFn,setActive:function(b){var a=this,d=a.owner.activeFilterMenuItem,c;if(a.active!==b){a.active=b;c=a.getGridStore().getFilters();c.beginUpdate();if(b){a.activate()}else {a.deactivate()}c.endUpdate();if(d&&d.activeFilter===a){d.setChecked(b)}a.setColumnActive(b);a.grid.fireEventArgs(b?'filteractivate':'filterdeactivate',[a,a.column])}},setColumnActive:function(a){this.column[a?'addCls':'removeCls'](this.owner.filterCls)},showMenu:function(b){var a=this;if(!a.menu){a.createMenu()}b.activeFilter=a;b.setMenu(a.menu,!1);b.setChecked(a.active);b.setDisabled(a.disabled===!0);a.activate(!0)},updateStoreFilter:function(){this.getGridStore().getFilters().notify('endupdate')}});Ext.define('Ext.grid.filters.filter.SingleFilter',{extend:Ext.grid.filters.filter.Base,constructor:function(d){var a=this,b,c;a.callParent([d]);c=a.value;b=a.getStoreFilter();if(b){a.active=!0}else {if(a.grid.stateful&&a.getGridStore().saveStatefulFilters){c=undefined}a.active=a.getActiveState(d,c);b=a.createFilter({operator:a.operator,value:c});if(a.active){a.addStoreFilter(b)}}if(a.active){a.setColumnActive(!0)}a.filter=b},activate:function(a){if(a){this.activateMenu()}else {this.addStoreFilter(this.filter)}},deactivate:function(){this.removeStoreFilter(this.filter)},getValue:function(a){return a.getValue()},onFilterRemove:function(){if(!this.menu||this.active){this.active=!1}}});Ext.define('Ext.grid.filters.filter.Boolean',{extend:Ext.grid.filters.filter.SingleFilter,alias:'grid.filter.boolean',type:'boolean',operator:'==',defaultValue:!1,yesText:'Yes',noText:'No',updateBuffer:0,constructor:function(c){var a=this,b;a.callParent([c]);if(a.filter){b=a.filter.getValue();if(Ext.isEmpty(b,!0)&&a.defaultValue!==null){a.filter.setValue(!!a.defaultValue)}}},createMenu:function(e){var a=this,d=Ext.id(),c={scope:a,click:a.onClick},b=a.getItemDefaults();a.callParent(arguments);a.menu.add([Ext.apply({text:a.yesText,filterKey:1,group:d,checked:!!a.defaultValue,hideOnClick:!1,listeners:c},b),Ext.apply({text:a.noText,filterKey:0,group:d,checked:!a.defaultValue&&a.defaultValue!==null,hideOnClick:!1,listeners:c},b)])},onClick:function(a){this.setValue(!!a.filterKey)},setValue:function(b){var a=this;a.filter.setValue(b);if(b!==undefined&&a.active){a.value=b;a.updateStoreFilter()}else {a.setActive(!0)}},activateMenu:Ext.emptyFn});Ext.define('Ext.grid.filters.filter.TriFilter',{extend:Ext.grid.filters.filter.Base,menuItems:['lt','gt','-','eq'],constructor:function(i){var a=this,f=!1,g={},d,e,c,b,h;a.callParent([i]);b=a.value;e=a.getStoreFilter('lt');d=a.getStoreFilter('gt');c=a.getStoreFilter('eq');if(e||d||c){f=a.active=!0;if(e){a.onStateRestore(e)}if(d){a.onStateRestore(d)}if(c){a.onStateRestore(c)}}else {if(a.grid.stateful&&a.getGridStore().saveStatefulFilters){b=undefined}a.active=a.getActiveState(i,b)}g.lt=e||a.createFilter({operator:'lt',value:!f&&b&&Ext.isDefined(b.lt)?b.lt:null},'lt');g.gt=d||a.createFilter({operator:'gt',value:!f&&b&&Ext.isDefined(b.gt)?b.gt:null},'gt');g.eq=c||a.createFilter({operator:'eq',value:!f&&b&&Ext.isDefined(b.eq)?b.eq:null},'eq');a.filter=g;if(a.active){a.setColumnActive(!0);if(!f){for(h in b){a.addStoreFilter(a.filter[h])}}}},activate:function(h){var c=this,g=c.filter,i=c.fields,f,a,e,b,d;if(c.preventFilterRemoval){return}for(e in g){f=g[e];a=i[e];b=f.getValue();if(b||b===0){if(a.isComponent){a.setValue(b);if(d===undefined){d=c.owner.activeFilterMenuItem===a.up('menuitem')}if(!d){a.up('menuitem').setChecked(!0,!0)}}else {a.value=b}if(!h){c.addStoreFilter(f)}}}},deactivate:function(){var a=this,d=a.filter,e,b,c;if(!a.countActiveFilters()||a.preventFilterRemoval){return}a.preventFilterRemoval=!0;for(e in d){b=d[e];c=b.getValue();if(c||c===0){a.removeStoreFilter(b)}}a.preventFilterRemoval=!1},countActiveFilters:function(){var d=this.filter,a=this.getGridStore().getFilters(),e=this.getBaseIdPrefix(),c=0,b;if(a.length){for(b in d){if(a.get(e+'-'+b)){c++}}}return c},onFilterRemove:function(c){var a=this,b;if(!a.menu&&a.countActiveFilters()){a.active=!1}else {if(a.menu){b={};b[c]=null;a.setValue(b)}}},onStateRestore:Ext.emptyFn,setValue:function(f){var c=this,b=c.filter,i=[],d=[],k=!1,l=c.getGridStore().getFilters(),j,a,e,h,g;if(c.preventFilterRemoval){return}c.preventFilterRemoval=!0;if('eq' in f){a=b.lt.getValue();if(a||a===0){d.push(b.lt)}a=b.gt.getValue();if(a||a===0){d.push(b.gt)}a=f.eq;if(a||a===0){i.push(b.eq);b.eq.setValue(a)}else {d.push(b.eq)}}else {a=b.eq.getValue();if(a||a===0){d.push(b.eq)}if('lt' in f){a=f.lt;if(a||a===0){i.push(b.lt);b.lt.setValue(a)}else {d.push(b.lt)}}if('gt' in f){a=f.gt;if(a||a===0){i.push(b.gt);b.gt.setValue(a)}else {d.push(b.gt)}}}h=d.length;g=i.length;k=!!(c.countActiveFilters()+g-h);if(h||g||k!==c.active){l.beginUpdate();if(h){for(e=0;e<h;e++){j=d[e];c.fields[j.getOperator()].setValue(null);j.setValue(null);c.removeStoreFilter(j)}}if(g){for(e=0;e<g;e++){c.addStoreFilter(i[e])}}c.setActive(k);l.endUpdate()}c.preventFilterRemoval=!1}});Ext.define('Ext.grid.filters.filter.Date',{extend:Ext.grid.filters.filter.TriFilter,alias:'grid.filter.date',type:'date',config:{fields:{lt:{text:'Before'},gt:{text:'After'},eq:{text:'On'}},pickerDefaults:{xtype:'datepicker',border:0},updateBuffer:0,dateFormat:undefined},itemDefaults:{xtype:'menucheckitem',selectOnFocus:!0,width:125,menu:{layout:'auto',plain:!0}},applyDateFormat:function(a){return a||Ext.Date.defaultFormat},createMenu:function(m){var a=this,l={scope:a,checkchange:a.onCheckChange},i=a.menuItems,f,e,j,d,k,b,h,c,g;a.callParent(arguments);e=a.getItemDefaults();f=a.getFields();j=Ext.apply({minDate:a.minDate,maxDate:a.maxDate,format:a.dateFormat,listeners:{scope:a,select:a.onMenuSelect}},a.getPickerDefaults());a.fields={};for(d=0,k=i.length;d<k;d++){b=i[d];if(b!=='-'){c={menu:{xtype:'datemenu',hideOnClick:!1,pickerCfg:Ext.apply({itemId:b},j)}};if(e){Ext.merge(c,e)}if(f){Ext.merge(c,f[b])}h=a.menu.add(c);g=a.fields[b]=h.down('datepicker');g.filter=a.filter[b];g.filterKey=b;h.on(l)}else {a.menu.add(b)}}},getPicker:function(a){return this.fields[a]},onCheckChange:function(d,c){var b=d.down('datepicker').filter,a;if(!c&&b.getValue()){a={};a[b.getOperator()]=null;this.setValue(a)}},onFilterRemove:function(a){var b={};b[a]=null;this.setValue(b);this.fields[a].up('menuitem').setChecked(!1,!0)},onStateRestore:function(a){a.setSerializer(this.getSerializer());a.setConvert(this.convertDateOnly)},getFilterConfig:function(a,b){a=this.callParent([a,b]);a.serializer=this.getSerializer();a.convert=this.convertDateOnly;return a},convertDateOnly:function(b){var a=null;if(b){a=Ext.Date.clearTime(b,!0).getTime()}return a},getSerializer:function(){var a=this;return function(c){var b=c.value;if(b){c.value=Ext.Date.format(b,a.getDateFormat())}}},onMenuSelect:function(i,f){var g=this,b=g.fields,h=g.filter,a=b[i.itemId],c=b.gt,d=b.lt,j=b.eq,e={};a.up('menuitem').setChecked(!0,!0);if(a===j){d.up('menuitem').setChecked(!1,!0);c.up('menuitem').setChecked(!1,!0)}else {j.up('menuitem').setChecked(!1,!0);if(a===c&&+d.value<+f){d.up('menuitem').setChecked(!1,!0);if(h.lt.getValue()!=null){e.lt=null}}else {if(a===d&&+c.value>+f){c.up('menuitem').setChecked(!1,!0);if(h.gt.getValue()!=null){e.gt=null}}}}e[a.filterKey]=f;g.setValue(e);i.up('menu').hide()}});Ext.define('Ext.grid.filters.filter.List',{extend:Ext.grid.filters.filter.SingleFilter,alias:'grid.filter.list',type:'list',operator:'in',itemDefaults:{checked:!1,hideOnClick:!1},idField:'id',labelField:'text',labelIndex:null,loadingText:'Loading...',loadOnShow:!0,single:!1,plain:!0,gridStoreListenersCfg:{add:'onDataChanged',refresh:'onDataChanged',remove:'onDataChanged',update:'onDataChanged'},constructor:function(c){var a=this,b;a.callParent([c]);a.labelIndex=a.labelIndex||a.column.dataIndex;if(a.store){a.store=Ext.StoreManager.lookup(a.store)}if(!a.store&&!a.options){b=a.getGridStore();if(a.value!=null&&a.active){a.gridStoreListeners=b.on(Ext.apply({scope:a,destroyable:!0},a.gridStoreListenersCfg))}a.gridListeners=a.grid.on({reconfigure:a.onReconfigure,scope:a,destroyable:!0});a.inferOptionsFromGridStore=!0}},destroy:function(){var a=this,b=a.store,c=a.autoStore;if(b&&b.isStore){if(c||b.autoDestroy){b.destroy()}else {b.un('load',a.bindMenuStore,a)}a.store=null}Ext.destroy(a.gridStoreListeners,a.gridListeners);a.callParent()},activateMenu:function(){var f=this,d=f.filter.getValue(),c,a,e,b;if(!d||!d.length){return}c=f.menu.items;for(a=0,e=c.length;a<e;a++){b=c.getAt(a);if(Ext.Array.indexOf(d,b.value)>-1){b.setChecked(!0,!0)}}},bindMenuStore:function(b){var a=this;if(a.grid.destroyed||a.preventFilterRemoval){return}a.createListStore(b);a.createMenuItems(a.store);a.loaded=!0},createListStore:function(d){var a=this,e=a.store,l=d.isStore,j=a.idField,i=a.labelField,h=!1,c,g,f,k,b;if(l){if(d!==a.getGridStore()){h=!0;e=a.store=d}else {a.autoStore=!0;c=a.getOptionsFromStore(d)}}else {c=[];for(f=0,k=d.length;f<k;f++){b=d[f];switch(Ext.typeOf(b)){case 'array':c.push(b);break;case 'object':c.push(b);break;default:if(b!=null){g={};g[j]=b;g[i]=b;c.push(g)};}}}if(!h){if(e){e.destroy()}e=a.store=new Ext.data.Store({fields:[j,i],data:c});if(a.inferOptionsFromGridStore&!a.gridStoreListeners){a.gridStoreListeners=a.getGridStore().on(Ext.apply({scope:a,destroyable:!0},a.gridStoreListenersCfg))}a.loaded=!0}a.setStoreFilter(e)},createMenu:function(f){var a=this,c=a.getGridStore(),b=a.store,e=a.options,d;if(b){a.store=b=Ext.StoreManager.lookup(b)}a.callParent([f]);d=a.menu;if(b){if(!b.getCount()){d.add({text:a.loadingText,iconCls:Ext.baseCSSPrefix+'mask-msg-text'});d.on({show:a.show,scope:a});b.on('load',a.bindMenuStore,a,{single:!0})}else {a.createMenuItems(b)}}else {if(e){a.bindMenuStore(e)}else {if(c.getCount()||c.isFiltered()){a.bindMenuStore(c)}else {c.on('load',a.bindMenuStore,a,{single:!0})}}}},createMenuItems:function(k){var a=this,b=a.menu,m=k.getCount(),n=Ext.Array.contains,h,g,l,f,j,c,i,d,e;if(m&&b){h=a.getItemDefaults();b.suspendLayouts();b.removeAll(!0);l=a.single?Ext.id():null;j=a.idField;i=a.labelField;e=[];for(d=0;d<m;d++){g=k.getAt(d);f=g.get(j);c=g.get(i);if(c==null||n(e,f)){continue}e.push(c);b.add(Ext.apply({text:c,group:l,value:f,checkHandler:a.onCheckChange,scope:a},h))}b.resumeLayouts(!0)}},getFilterConfig:function(b,c){var a=b.value;if(Ext.isEmpty(a)){a=[]}else {if(!Ext.isArray(a)){a=[a]}}b.value=a;return this.callParent([b,c])},getOptionsFromStore:function(c){var h=this,e=c.getData(),f={},g=[],j=h.dataIndex,i=h.labelIndex,d,a,b;if(c.isFiltered()&&!c.remoteFilter){e=e.getSource()}c.each(function(e){d=e.data;a=d[j];b=d[i];if(b===undefined){b=a}if(!f[a]){f[a]=1;g.push([a,b])}},null,{filtered:!0,collapsed:!0});return g},onCheckChange:function(){var a=this,b=a.updateBuffer;if(b){a.task.delay(b)}else {a.setValue()}},onDataChanged:function(a){if(this.preventDefault){this.preventDefault=!1}else {this.bindMenuStore(a)}},onReconfigure:function(b,a){if(a){this.bindMenuStore(a)}},setActive:function(a){if(this.active!==a){this.preventDefault=!0;this.callParent([a])}},setStoreFilter:function(d){var a=this,b=a.value,c=a.filter;if(b){if(!Ext.isArray(b)){b=[b]}c.setValue(b)}if(a.active){a.preventFilterRemoval=!0;a.addStoreFilter(c);a.preventFilterRemoval=!1}},setValue:function(){var a=this,f=a.menu.items,c=[],d,b,e;a.preventDefault=!0;for(d=0,b=f.length;d<b;d++){e=f.getAt(d);if(e.checked){c.push(e.value)}}if(!Ext.Array.equals(c,a.filter.getValue())){a.filter.setValue(c);b=c.length;if(b&&a.active){a.updateStoreFilter()}else {a.setActive(!!b)}}},show:function(){var a=this.store;if(this.loadOnShow&&!this.loaded&&!a.hasPendingLoad()){a.load()}}});Ext.define('Ext.grid.filters.filter.Number',{extend:Ext.grid.filters.filter.TriFilter,alias:['grid.filter.number','grid.filter.numeric'],type:'number',config:{fields:{gt:{iconCls:Ext.baseCSSPrefix+'grid-filters-gt',margin:'0 0 3px 0'},lt:{iconCls:Ext.baseCSSPrefix+'grid-filters-lt',margin:'0 0 3px 0'},eq:{iconCls:Ext.baseCSSPrefix+'grid-filters-eq',margin:0}}},emptyText:'Enter Number...',itemDefaults:{xtype:'numberfield',enableKeyEvents:!0,hideEmptyLabel:!1,labelSeparator:'',labelWidth:29,selectOnFocus:!1},menuDefaults:{bodyPadding:3,showSeparator:!1},createMenu:function(){var a=this,j={scope:a,keyup:a.onValueChange,spin:{fn:a.onInputSpin,buffer:200},el:{click:a.stopFn}},g=a.getItemDefaults(),h=a.menuItems,k=a.getFields(),f,e,i,c,d,b;a.callParent();a.fields={};for(e=0,i=h.length;e<i;e++){c=h[e];if(c!=='-'){f=k[c];b={labelClsExtra:Ext.baseCSSPrefix+'grid-filters-icon '+f.iconCls};if(g){Ext.merge(b,g)}Ext.merge(b,f);b.emptyText=b.emptyText||a.emptyText;delete b.iconCls;a.fields[c]=d=a.menu.add(b);d.filter=a.filter[c];d.filterKey=c;d.on(j)}else {a.menu.add(c)}}},getValue:function(a){var b={};b[a.filterKey]=a.getValue();return b},onInputSpin:function(a,c){var b={};b[a.filterKey]=a.getValue();this.setValue(b)},stopFn:function(a){a.stopPropagation()}});Ext.define('Ext.grid.filters.filter.String',{extend:Ext.grid.filters.filter.SingleFilter,alias:'grid.filter.string',type:'string',operator:'like',emptyText:'Enter Filter Text...',itemDefaults:{xtype:'textfield',enableKeyEvents:!0,hideEmptyLabel:!1,iconCls:Ext.baseCSSPrefix+'grid-filters-find',labelSeparator:'',labelWidth:29,margin:0,selectOnFocus:!0},menuDefaults:{bodyPadding:3,showSeparator:!1},createMenu:function(){var b=this,a;b.callParent();a=Ext.apply({},b.getItemDefaults());if(a.iconCls&&!('labelClsExtra' in a)){a.labelClsExtra=Ext.baseCSSPrefix+'grid-filters-icon '+a.iconCls}delete a.iconCls;a.emptyText=a.emptyText||b.emptyText;b.inputItem=b.menu.add(a);b.inputItem.on({scope:b,keyup:b.onValueChange,el:{click:function(a){a.stopPropagation()}}})},setValue:function(b){var a=this;if(a.inputItem){a.inputItem.setValue(b)}a.filter.setValue(b);if(b&&a.active){a.value=b;a.updateStoreFilter()}else {a.setActive(!!b)}},activateMenu:function(){this.inputItem.setValue(this.filter.getValue())},createFilter:function(b,c){var a=this;if(a.filterFn){return new Ext.util.Filter({filterFn:function(d){return Ext.callback(a.filterFn,a.scope,[d,a.inputItem.getValue()])}})}else {return a.callParent([b,c])}}});Ext.define('Ext.grid.filters.Filters',{extend:Ext.plugin.Abstract,alias:'plugin.gridfilters',mixins:[Ext.util.StoreHolder],id:'gridfilters',defaultFilterTypes:{'boolean':'boolean','int':'number',date:'date',number:'number'},filterCls:Ext.baseCSSPrefix+'grid-filters-filtered-column',menuFilterText:'Filters',showMenu:!0,stateId:undefined,init:function(c){var a=this,d,b;a.grid=c;c.filters=a;if(a.grid.normalGrid){a.isLocked=!0}c.clearFilters=a.clearFilters.bind(a);d=c.store;b=c.headerCt;a.headerCtListeners=b.on({destroyable:!0,scope:a,add:a.onAdd,menucreate:a.onMenuCreate});if(b.menu&&!b.menu.destroyed){this.onMenuCreate(b,b.menu)}a.gridListeners=c.on({destroyable:!0,scope:a,reconfigure:a.onReconfigure});if(d.isEmptyStore){return}a.bindStore(d);a.initColumns()},initColumns:function(){var f=this.grid,g=f.getStore(),e=f.columnManager.getColumns(),h=e.length,b,c,d,a;for(b=0;b<h;b++){c=e[b];d=c.filter;if(d&&!d.isGridFilter){if(!a){a=g.getFilters();a.beginUpdate()}this.createColumnFilter(c)}}if(a){a.endUpdate()}},createColumnFilter:function(a){var c=this,d=a.filter,b={column:a,grid:c.grid,owner:c},e,f,g;if(Ext.isString(d)){b.type=d}else {Ext.apply(b,d)}if(!b.type){f=c.store.getModel();e=f&&f.getField(a.dataIndex);g=e&&e.type;b.type=g&&c.defaultFilterTypes[g]||a.defaultFilterType||'string'}a.filter=Ext.Factory.gridFilter(b);if(!a.menuDisabled){a.requiresMenu=!0}},onAdd:function(c,a,d){var b=a.filter;if(b&&!b.isGridFilter){this.createColumnFilter(a)}},onMenuCreate:function(c,b){var a=this;if(a.headerMenuListeners){Ext.destroy(a.headerMenuListeners);a.headerMenuListeners=null}a.headerMenuListeners=b.on({beforeshow:a.onMenuBeforeShow,destroyable:!0,scope:a})},onMenuBeforeShow:function(f){var a=this,b,c,e,d;if(a.showMenu){if(!a.filterMenuItem){a.filterMenuItem={}}e=f.up('tablepanel');d=e.id;b=a.filterMenuItem[d];if(!b||b.destroyed){b=a.createMenuItem(f,d)}a.activeFilterMenuItem=b;c=a.getMenuFilter(e.headerCt);if(c){c.showMenu(b)}b.setVisible(!!c);if(a.sep){a.sep.setVisible(!!c)}}},createMenuItem:function(b,d){var a=this,c;if(b.items.length){a.sep=b.add('-')}c=b.add({checked:!1,itemId:'filters',text:a.menuFilterText,listeners:{scope:a,checkchange:a.onCheckChange}});return a.filterMenuItem[d]=c},destroy:function(){var a=this,b=a.filterMenuItem,c;Ext.destroy(a.headerCtListeners,a.gridListeners,a.headerMenuListeners);a.bindStore(null);a.sep=Ext.destroy(a.sep);for(c in b){b[c].destroy()}this.callParent()},onUnbindStore:function(a){if(a&&!a.destroyed){a.getFilters().un('remove',this.onFilterRemove,this)}},onBindStore:function(a,d,c){var b=this;b.local=!a.getRemoteFilter();a.getFilters().on('remove',b.onFilterRemove,b);if(b.grid.stateful&&a.initialConfig.statefulFilters!==!1){a.statefulFilters=!0}},onFilterRemove:function(h,e){var g=e.items.length,f=this.grid.columnManager,c,b,d,a;for(c=0;c<g;c++){b=e.items[c];d=f.getHeaderByDataIndex(b.getProperty());if(d){a=d.filter;if(!a||!a.menu||b.getId().indexOf(a.getBaseIdPrefix())===-1){continue}if(!a.preventFilterRemoval){a.onFilterRemove(b.getOperator())}}}},getMenuFilter:function(a){return a.getMenu().activeHeader.filter},onCheckChange:function(d,c){var a=this.isLocked?d.up('tablepanel'):this.grid,b=this.getMenuFilter(a.headerCt);b.setActive(c)},getHeaders:function(){return this.grid.view.headerCt.columnManager.getColumns()},isStateful:function(){return this.grid.stateful},addFilter:function(b){var c=this,l=c.grid,j=c.store,h=!1,g=!0,i,d,f,k,e,a;if(!Ext.isArray(b)){b=[b]}for(f=0,k=b.length;f<k;f++){e=b[f];i=e.dataIndex;d=l.columnManager.getHeaderByDataIndex(i);if(d){h=!0;if(e.value){g=!1}a=d.filter;if(a&&a.isGridFilter){a.deactivate();a.destroy();if(c.activeFilterMenuItem){c.activeFilterMenuItem.menu=null}}d.filter=e}}if(h){j.suppressNextFilter=g;c.initColumns();j.suppressNextFilter=!1}},addFilters:function(a){if(a){this.addFilter(a)}},clearFilters:function(){var f=this.grid,d=f.columnManager.getColumns(),h=f.store,e,b,c,g,a;for(c=0,g=d.length;c<g;c++){e=d[c];b=e.filter;if(b&&b.isGridFilter){if(!a){a=h.getFilters();a.beginUpdate()}b.setActive(!1)}}if(a){a.endUpdate()}},onReconfigure:function(h,c,g,b){var a=this,d=a.filterMenuItem,e=b!==c,f;if(g){for(f in d){d[f].setMenu(null)}}if(c){if(b&&!b.destroyed&&e){a.resetFilters(b)}if(e){a.bindStore(c);a.applyFilters(c)}}a.initColumns()},privates:{applyFilters:function(f){var d=this.grid.columnManager.getColumns(),g=d.length,c,e,b,a;for(c=0;c<g;c++){e=d[c];b=e.filter;if(b&&b.isGridFilter){if(!a){a=f.getFilters();a.beginUpdate()}if(b.active){b.activate()}}}if(a){a.endUpdate()}},resetFilters:function(e){var a=e.getFilters(),b,c,d;if(a){for(b=a.getCount()-1;b>=0;--b){d=a.getAt(b);if(d.isGridFilter){if(!c){a.beginUpdate()}a.remove(d);c=!0}}if(c){a.endUpdate()}}}}});Ext.define('Ext.grid.locking.HeaderContainer',{extend:Ext.grid.header.Container,headerCtRelayEvents:['blur','focus','move','resize','destroy','beforedestroy','boxready','afterrender','render','beforerender','removed','hide','beforehide','show','beforeshow','enable','disable','added','deactivate','beforedeactivate','activate','beforeactivate','remove','add','beforeremove','beforeadd','afterlayout','menucreate','sortchange','columnschanged','columnshow','columnhide','columnmove','headertriggerclick','headercontextmenu','headerclick','columnresize','statesave','beforestatesave','staterestore','beforestaterestore'],constructor:function(d){var a=this,b=d.lockedGrid,c=d.normalGrid;a.lockable=d;a.callParent();b.visibleColumnManager.rootColumns=c.visibleColumnManager.rootColumns=d.visibleColumnManager=a.visibleColumnManager=new Ext.grid.ColumnManager(!0,b.headerCt,c.headerCt);b.columnManager.rootColumns=c.columnManager.rootColumns=d.columnManager=a.columnManager=new Ext.grid.ColumnManager(!1,b.headerCt,c.headerCt);a.lockedEventRelayers=a.relayEvents(b.headerCt,a.headerCtRelayEvents);a.normalEventRelayers=a.relayEvents(c.headerCt,a.headerCtRelayEvents)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var a=this,b=a.lockable.lockedGrid.headerCt.getColumnsState(),c=a.lockable.normalGrid.headerCt.getColumnsState();return b.concat(c)},applyColumnsState:function(e,h){var j=this,g=j.lockable.lockedGrid,m=j.lockable.normalGrid,d=g.headerCt,f=j.lockable.normalGrid.headerCt,i=d.items.items.concat(f.items.items),n=i.length,c,b,a,k,l;for(c=0;c<n;c++){a=i[c];b=e[a.getStateId()];if(b){l=b.locked!=null&&!!a.locked!==b.locked;if(a.applyColumnState){a.applyColumnState(b,h)}if(l){(a.locked?d:f).add(a)}}}k=d.items.items.length;for(c=0;c<n;c++){a=i[c];b=e[a.getStateId()];if(b&&!a.locked){b.index=Math.max(0,b.index-k)}}d.applyColumnsState(e,h);f.applyColumnsState(e,h);if(!g.getVisibleColumnManager().getColumns().length){g.hide()}if(!m.getVisibleColumnManager().getColumns().length){m.hide()}},disable:function(){var a=this.lockable;a.lockedGrid.headerCt.disable();a.normalGrid.headerCt.disable()},enable:function(){var a=this.lockable;a.lockedGrid.headerCt.enable();a.normalGrid.headerCt.enable()}});Ext.define('Ext.grid.locking.View',{alternateClassName:'Ext.grid.LockingView',mixins:[Ext.util.Observable,Ext.util.StoreHolder,Ext.mixin.Focusable],isLockingView:!0,loadMask:!0,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(b){var e=Ext,a=this,d,c;a.ownerGrid=b.ownerGrid;a.ownerGrid.view=a;a.navigationModel=b.locked.xtype==='treepanel'?new e.tree.NavigationModel(a):new e.grid.NavigationModel(a);b.locked.viewConfig.bindStore=b.normal.viewConfig.bindStore=a.subViewBindStore;b.normal.viewConfig.isNormalView=b.locked.viewConfig.isLockedView=!0;b.locked.viewConfig.navigationModel=b.normal.viewConfig.navigationModel=a.navigationModel;a.lockedGrid=a.ownerGrid.lockedGrid=e.ComponentManager.create(b.locked);a.lockedView=d=a.lockedGrid.getView();a.selModel=b.normal.viewConfig.selModel=d.getSelectionModel();if(a.lockedGrid.isTree){a.lockedView.animate=!1;b.normal.store=d.store;b.normal.viewConfig.stripeRows=a.lockedView.stripeRows;b.normal.rowLines=a.lockedGrid.rowLines}a.normalGrid=a.ownerGrid.normalGrid=e.ComponentManager.create(b.normal);d.lockingPartner=c=a.normalView=a.normalGrid.getView();c.lockingPartner=d;Ext.override(a.normalGrid,{beforeRender:a.beforeNormalGridRender});a.loadMask=b.loadMask!==undefined?b.loadMask:a.loadMask;a.mixins.observable.constructor.call(a);a.lockedViewEventRelayers=a.relayEvents(d,e.view.Table.events);a.normalViewEventRelayers=a.relayEvents(c,e.view.Table.events.concat(e.view.Table.normalSideEvents));c.on({scope:a,itemmouseleave:a.onItemMouseLeave,itemmouseenter:a.onItemMouseEnter});d.on({scope:a,itemmouseleave:a.onItemMouseLeave,itemmouseenter:a.onItemMouseEnter});a.loadingText=c.loadingText;a.loadingCls=c.loadingCls;a.loadingUseMsg=c.loadingUseMsg;a.itemSelector=a.getItemSelector();a.all=c.all;a.bindStore(c.dataSource,!0,'dataSource')},subViewBindStore:function(e,d){var a=this,c=a.ownerGrid,b;if(!(a.destroying||a.destroyed||c.destroying||c.destroyed)){if(a.isNormalView){b=a.getSelectionModel();b.bindStore(e,d);b.bindComponent(a)}a.refreshNeeded=!0}},beforeNormalGridRender:function(){if(this.ownerGrid.lockedGrid.getHeader()&&!this.title){this.title='\xa0'}this.callParent()},onPanelRender:function(d){var a=this,b=a.loadMask,c={target:a.ownerGrid,msg:a.loadingText,msgCls:a.loadingCls,useMsg:a.loadingUseMsg,store:a.ownerGrid.store};a.el=d;a.rendered=!0;a.fireEvent('render',a);if(b){if(Ext.isObject(b)){c=Ext.apply(c,b)}a.loadMask=new Ext.LoadMask(c)}},getRefOwner:function(){return this.ownerGrid},getVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getGridColumns:function(){return this.getVisibleColumnManager().getColumns()},getEl:function(a){return a.getView().getEl()},getCellSelector:function(){return this.normalView.getCellSelector()},getItemSelector:function(){return this.normalView.getItemSelector()},onItemMouseEnter:function(d,f){var e=this,b=e.lockedView,a=e.normalView,c;if(d.trackOver){if(d!==b){a=b}c=a.getNode(f);a.highlightItem(c)}},onItemMouseLeave:function(c,e){var d=this,a=d.lockedView,b=d.normalView;if(c.trackOver){if(c!==a){b=a}b.clearHighlight()}},relayFn:function(d,b){var c=this,a=c.lockedView;b=b||[];c.relayingOperation=!0;a[d].apply(a,b);a=c.normalView;a[d].apply(a,b);c.relayingOperation=!1},getSelectionModel:function(){return this.normalView.getSelectionModel()},getNavigationModel:function(){return this.navigationModel},getStore:function(){return this.ownerGrid.store},onBindStore:function(c){var d=this,b=d.lockedView,a=d.normalView;if(a.componentLayoutCounter&&!(b.blockRefresh&&a.blockRefresh)){Ext.suspendLayouts();b.doFirstRefresh(c);a.doFirstRefresh(c);Ext.resumeLayouts(!0)}},getStoreListeners:function(){var a=this;return {priority:1000,refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.onDataRefresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onOwnerGridHide:function(){Ext.suspendLayouts();this.relayFn('onOwnerGridHide',arguments);Ext.resumeLayouts(!0)},onOwnerGridShow:function(){Ext.suspendLayouts();this.relayFn('onOwnerGridShow',arguments);Ext.resumeLayouts(!0)},onBeginUpdate:function(){Ext.suspendLayouts();this.relayFn('onBeginUpdate',arguments);Ext.resumeLayouts(!0)},onEndUpdate:function(){Ext.suspendLayouts();this.relayFn('onEndUpdate',arguments);Ext.resumeLayouts(!0)},onDataRefresh:function(){Ext.suspendLayouts();this.relayFn('onDataRefresh',arguments);Ext.resumeLayouts(!0)},onReplace:function(){Ext.suspendLayouts();this.relayFn('onReplace',arguments);Ext.resumeLayouts(!0)},onAdd:function(){Ext.suspendLayouts();this.relayFn('onAdd',arguments);Ext.resumeLayouts(!0)},onRemove:function(){Ext.suspendLayouts();this.relayFn('onRemove',arguments);Ext.resumeLayouts(!0)},setActionableMode:function(d,a){var c,b;if(d){if(!a){a=this.getNavigationModel().getPosition()}if(a){a=a.clone();a.view=b=a.column.getView();c=b.setActionableMode(d,a);if(c!==!1&&b.lockingPartner.grid.isVisible()){b.lockingPartner.setActionableMode(d,a);if(!b.lockingPartner.actionableMode){b.setActionableMode(!1);c=!1}}return c}else {return !1}}else {this.relayFn('setActionableMode',[!1,a])}},onUpdate:function(){Ext.suspendLayouts();this.relayFn('onUpdate',arguments);Ext.resumeLayouts(!0)},refresh:function(){var a=this.lockedView,b=this.normalView;Ext.suspendLayouts();a.clearViewEl(!0);b.clearViewEl(!0);b.refresh();a.refresh();Ext.resumeLayouts(!0)},refreshView:function(){var b=this.lockedView,a=this.normalView,c=a.all.startIndex;Ext.suspendLayouts();b.clearViewEl(!0);a.clearViewEl(!0);a.refreshView(c);b.refreshView(c);Ext.resumeLayouts(!0)},setScrollable:function(a){Ext.suspendLayouts();this.lockedView.setScrollable(a);if(a.isScroller){a=new Ext.scroll.Scroller(a.initialConfig)}this.normalView.setScrollable(a);Ext.resumeLayouts(!0)},getNode:function(a){return this.normalView.getNode(a)},getRow:function(a){return this.normalView.getRow(a)},getCell:function(d,a,c){var e=a.getView().getRow(d),b=e.querySelector(a.getCellSelector());return c?Ext.get(b):b},indexOf:function(b){var a=this.lockedView.indexOf(b);if(!a){a=this.normalView.indexOf(b)}return a},focus:function(){var a=this.ownerGrid.down('>tablepanel:not(hidden)>tableview');if(a){a.focus()}},focusRow:function(c){var b,a=this.getNavigationModel().lastFocused;b=a?a.view:this.normalView;b.focusRow(c)},focusCell:function(a){a.view.focusCell(a)},onRowFocus:function(){this.relayFn('onRowFocus',arguments)},cancelFocusTask:function(){this.lockedView.cancelFocusTask();this.normalView.cancelFocusTask()},isVisible:function(a){return this.ownerGrid.isVisible(a)},getCellInclusive:function(a,c){var d=a.column,b=this.lockedGrid.getColumnManager().getColumns().length;if(d>=b){a=Ext.apply({},a);a.column-=b;return this.normalView.getCellInclusive(a,c)}else {return this.lockedView.getCellInclusive(a,c)}},getHeaderByCell:function(a){if(a){return this.getVisibleColumnManager().getHeaderById(a.getAttribute('data-columnId'))}return !1},onRowSelect:function(){this.relayFn('onRowSelect',arguments)},onRowDeselect:function(){this.relayFn('onRowDeselect',arguments)},onCellSelect:function(a){a.column.getView().onCellSelect({record:a.record,column:a.column})},onCellDeselect:function(a){a.column.getView().onCellDeselect({record:a.record,column:a.column})},getCellByPosition:function(a,c){var e=this,b=a.view,d=a.column;if(b===e){a=(new Ext.grid.CellContext(d.getView())).setPosition(a.record,a.column)}return b.getCellByPosition(a,c)},getRecord:function(b){var a=this.lockedView.getRecord(b);if(!a){a=this.normalView.getRecord(b)}return a},scrollBy:function(){var a=this.ownerGrid.getScrollable();a.scrollBy.apply(a,arguments)},ensureVisible:function(){var a=this.normalView;a.ensureVisible.apply(a,arguments)},disable:function(){this.relayFn('disable',arguments)},enable:function(){this.relayFn('enable',arguments)},addElListener:function(){this.relayFn('addElListener',arguments)},refreshNode:function(){this.relayFn('refreshNode',arguments)},addRowCls:function(){this.relayFn('addRowCls',arguments)},removeRowCls:function(){this.relayFn('removeRowCls',arguments)},destroy:function(){var a=this;a.rendered=!1;a.bindStore(null,!1,'dataSource');Ext.destroy(a.selModel,a.navigationModel,a.loadMask);a.lockedView.lockingPartner=a.normalView.lockingPartner=null;a.callParent()}},function(){this.borrow(Ext.Component,['up']);this.borrow(Ext.view.AbstractView,['doFirstRefresh','applyFirstRefresh']);this.borrow(Ext.view.Table,['cellSelector','selectedCellCls','selectedItemCls'])});Ext.define('Ext.scroll.LockingScroller',{extend:Ext.scroll.Scroller,alias:'scroller.locking',config:{lockedScroller:null,normalScroller:null},scrollTo:function(d,f,e){var c,b,a;if(Ext.isObject(d)){c=d.lockedX;if(c){b=this.getLockedScroller().scrollTo(c,null,e)}}a=this.callParent([d,f,e]);if(b){a=Ext.Promise.all([a,b])}return a},updateLockedScroller:function(a){a.on('scroll','onLockedScroll',this);a.setLockingScroller(this)},updateNormalScroller:function(a){a.on('scroll','onNormalScroll',this);a.setLockingScroller(this)},updateTouchAction:function(a,b){this.callParent([a,b]);this.getLockedScroller().setTouchAction(a);this.getNormalScroller().setTouchAction(a)},getPosition:function(){var a=this.callParent();a.x=this.getNormalScroller().getPosition().x;a.lockedX=this.getLockedScroller().getPosition().x;return a},privates:{updateSpacerXY:function(e){var b=this,f=b.getLockedScroller(),g=b.getNormalScroller(),c=f.component,d=g.component,a;a=e.y+(d.headerCt.tooNarrow||c.headerCt.tooNarrow?Ext.scrollbar.height():0);d.stretchHeight(a);c.stretchHeight(a);b.callParent([e])},doScrollTo:function(b,e,d){var a,c;if(b!=null){c=this.getNormalScroller().scrollTo(b,null,d);b=null}a=this.callParent([b,e,d]);if(c){a=Ext.Promise.all([a,c])}return a},onLockedScroll:function(b,a,c){this.position.lockedX=a},onNormalScroll:function(b,a,c){this.position.x=a},readPosition:function(a){var b=this;a=b.callParent([a]);a=a||{};a.x=b.getNormalScroller().getPosition().x;return a}}});Ext.define('Ext.grid.locking.Lockable',{alternateClassName:'Ext.grid.Lockable',syncRowHeight:!0,headerCounter:0,lockedGridCls:Ext.baseCSSPrefix+'grid-inner-locked',normalGridCls:Ext.baseCSSPrefix+'grid-inner-normal',lockingBodyCls:Ext.baseCSSPrefix+'grid-locking-body',scrollContainerCls:Ext.baseCSSPrefix+'grid-scroll-container',scrollBodyCls:Ext.baseCSSPrefix+'grid-scroll-body',scrollbarClipperCls:Ext.baseCSSPrefix+'grid-scrollbar-clipper',scrollbarCls:Ext.baseCSSPrefix+'grid-scrollbar',scrollbarVisibleCls:Ext.baseCSSPrefix+'grid-scrollbar-visible',lockText:'Lock',unlockText:'Unlock',bothCfgCopy:['hideHeaders','enableColumnHide','enableColumnMove','enableColumnResize','sortableColumns','multiColumnSort','columnLines','rowLines','variableRowHeight','numFromEdge','trailingBufferZone','leadingBufferZone','scrollToLoadBuffer','syncRowHeight'],normalCfgCopy:['scroll'],lockedCfgCopy:[],determineXTypeToCreate:function(b){var a=this;if(a.subGridXType){return a.subGridXType}else {if(!b){return 'gridpanel'}}return a.isXType('treepanel')?'treepanel':'gridpanel'},injectLockable:function(){this.focusable=!1;this.lockable=!0;this.hasView=!0;var a=this,m=a.store=Ext.StoreManager.lookup(a.store),e=a.lockedViewConfig,g=a.normalViewConfig,j=a.viewConfig,o=j&&j.loadMask,q=o!==undefined?o:a.loadMask,n=a.bufferedRenderer,k,i,b,c,l,f,h,p,d;k=a.constructLockableFeatures();a.scrollable=new Ext.scroll.LockingScroller({component:a,x:!1,y:!0});a.features=null;i=a.constructLockablePlugins();a.plugins=i.topPlugins;b={id:a.id+'-locked',$initParent:a,isLocked:!0,bufferedRenderer:n,ownerGrid:a,ownerLockable:a,xtype:a.determineXTypeToCreate(!0),store:m,scrollerOwner:!1,animate:!1,border:!1,cls:a.lockedGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||this.ownerGrid.normalGrid.floatedFromCollapse},features:k.lockedFeatures,plugins:i.lockedPlugins};c={id:a.id+'-normal',$initParent:a,isLocked:!1,bufferedRenderer:n,ownerGrid:a,ownerLockable:a,xtype:a.determineXTypeToCreate(),store:m,reserveScrollbar:a.reserveScrollbar,scrollerOwner:!1,border:!1,cls:a.normalGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||this.ownerGrid.lockedGrid.floatedFromCollapse},features:k.normalFeatures,plugins:i.normalPlugins};a.addCls(Ext.baseCSSPrefix+'grid-locked');Ext.copy(c,a,a.bothCfgCopy,!0);Ext.copy(b,a,a.bothCfgCopy,!0);Ext.copy(c,a,a.normalCfgCopy,!0);Ext.copy(b,a,a.lockedCfgCopy,!0);Ext.apply(c,a.normalGridConfig);Ext.apply(b,a.lockedGridConfig);for(d=0;d<a.normalCfgCopy.length;d++){delete a[a.normalCfgCopy[d]]}for(d=0;d<a.lockedCfgCopy.length;d++){delete a[a.lockedCfgCopy[d]]}a.addStateEvents(['lockcolumn','unlockcolumn']);l=a.processColumns(a.columns||[],b);b.columns=l.locked;if(!b.columns.items.length){b.hidden=!0}c.columns=l.normal;if(!c.columns.items.length){c.hidden=!0}c.flex=1;b.viewConfig=e=Ext.apply({usageBitMask:2},e);c.viewConfig=g=Ext.apply({},g);e.loadingUseMsg=!1;e.loadMask=!1;g.loadMask=!1;Ext.applyIf(e,j);Ext.applyIf(g,j);if(a.layout===Ext.panel.Table.prototype.layout){a.layout={type:'hbox',align:'stretch'}}a.getLayout();if(a.layout.type==='border'){if(a.split){b.split=a.split}if(!b.region){b.region='west'}if(!c.region){c.region='center'}a.addCls(Ext.baseCSSPrefix+'grid-locked-split')}if(!(a.layout instanceof Ext.layout.container.Box)){a.split=!1}a.view=new Ext.grid.locking.View({loadMask:q,locked:b,normal:c,ownerGrid:a});a.view.relayEvents(a.scrollable,['scroll']);b=a.lockedGrid;c=a.normalGrid;b.on({beginfloat:a.onBeginLockedFloat,endfloat:a.onEndLockedFloat,scope:a});p=b.setWidth;b.setWidth=function(){b.shrinkWrapColumns=!1;p.apply(b,arguments)};if(!b.getVisibleColumnManager().getColumns().length){b.hide()}if(!c.getVisibleColumnManager().getColumns().length){c.hide()}f=b.headerCt;h=c.headerCt;a.headerCt=a.view.headerCt=new Ext.grid.locking.HeaderContainer(a);f.lockedCt=!0;f.lockableInjected=!0;h.lockableInjected=!0;f.on({add:a.delaySyncLockedWidth,remove:a.delaySyncLockedWidth,columnshow:a.delaySyncLockedWidth,columnhide:a.delaySyncLockedWidth,sortchange:a.onLockedHeaderSortChange,columnresize:a.delaySyncLockedWidth,scope:a});h.on({add:a.delaySyncLockedWidth,remove:a.delaySyncLockedWidth,columnshow:a.delaySyncLockedWidth,columnhide:a.delaySyncLockedWidth,sortchange:a.onNormalHeaderSortChange,scope:a});a.modifyHeaderCt();a.items=[b];if(a.split){a.addCls(Ext.baseCSSPrefix+'grid-locked-split');a.items[1]=Ext.apply({xtype:'splitter'},a.split)}a.items.push(c);a.relayHeaderCtEvents(f);a.relayHeaderCtEvents(h);a.storeRelayers=a.relayEvents(m,['filterchange','groupchange','beforeload','load']);a.gridRelayers=a.relayEvents(c,['viewready'])},afterInjectLockable:function(){var a=this;a.maskElement='scrollContainer';if(a.disableOnRender){a.on('afterrender',function(){a.unmask()},{single:!0})}delete a.lockedGrid.$initParent;delete a.normalGrid.$initParent},syncLockableHeaderVisibility:function(){var d=this,a=d.hideHeaders,b=d.lockedGrid,c=d.normalGrid;if(a===null){a=b.shouldAutoHideHeaders()&&c.shouldAutoHideHeaders()}b.hideHeaders=c.hideHeaders=a;b.syncHeaderVisibility();c.syncHeaderVisibility()},getLockingViewConfig:function(){return {xclass:'Ext.grid.locking.View',locked:this.lockedGrid,normal:this.normalGrid,panel:this}},onBeginLockedFloat:function(a){var e=a.getContentTarget().dom,c=this.lockedGrid.headerCt,d=this.normalGrid.headerCt,b=Math.max(d.getHeight(),c.getHeight());c.minHeight=b;d.minHeight=b;a.el.addCls(Ext.panel.Panel.floatCls);if(e.firstChild!==a.view.el.dom){e.appendChild(a.view.el.dom)}a.body.dom.scrollTop=this.getScrollable().getPosition().y},onEndLockedFloat:function(){var a=this.lockedGrid;if(a.collapsed){a.el.removeCls(Ext.panel.Panel.floatCls)}else {this.lockedGrid.headerCt.minHeight=this.normalGrid.headerCt.minHeight=null}this.lockedScrollbarClipper.appendChild(a.view.el.dom);this.doSyncLockableLayout()},beforeLayout:function(){var b=this,a=b.lockedGrid,d=b.normalGrid,c;if(a&&d){if(a.getSizeModel().width.shrinkWrap){a.gridPanelBorderWidth=a.el.getBorderWidth('lr');a.shrinkWrapColumns=!0}if(a.shrinkWrapColumns){c=a.headerCt.getTableWidth();a.setWidth(c+a.gridPanelBorderWidth);a.shrinkWrapColumns=!0}if(!b.scrollContainer){b.initScrollContainer()}b.lastScrollPos=Ext.clone(b.getScrollable().getPosition());a.view.el.setStyle('margin-bottom','');d.view.el.setStyle('margin-bottom','')}},syncLockableLayout:function(){var a=this;if(!a.afterLayoutListener){a.afterLayoutListener=Ext.on({afterlayout:a.doSyncLockableLayout,scope:a,single:!0})}},doSyncLockableLayout:function(){var a=this,z=a.isCollapsingOrExpanding,b=a.lockedGrid,c=a.normalGrid,v,m,e,f,u,s,j,i,A,n,g,y,p,q,r,o,w,d,h,t,k,l,x;a.afterLayoutListener=null;if(z){if(z===2){a.on('expand','doSyncLockableLayout',a,{single:!0})}return}if(b&&c){d=b.isVisible(!0)&&!b.collapsed;h=c.isVisible(!0);v=b.view.el;m=c.view.el;t=a.scrollBody.dom;e=d?b.body.getRegion(!0):new Ext.util.Region(0,0,0,0);f=h?c.body.getRegion(!0):new Ext.util.Region(0,0,0,0);u=Ext.scrollbar.size();s=u.width;j=l=u.height;i=h?f.width:0;A=d?h?f.x-e.x:e.width:0;g=c.headerCt.tooNarrow||b.headerCt.tooNarrow?j:0;y=f.height||e.height;p=y;q=a.lockedScrollbar;r=a.normalScrollbar;o=a.scrollbarVisibleCls;x=a.getScrollable();if(Ext.supports.CannotScrollExactHeight){l+=1}if(g){v.setStyle('margin-bottom',-j+'px');m.setStyle('margin-bottom',-j+'px');p-=j;if(d&&b.view.body.dom){a.lockedScrollbarScroller.setSize({x:b.headerCt.getTableWidth()})}if(c.view.body.dom){a.normalScrollbarScroller.setSize({x:c.headerCt.getTableWidth()})}}a.scrollBody.setHeight(p);v.dom.style.height=m.dom.style.height='';w=a.scrollable.getSize().y+g;c.view.stretchHeight(w);b.view.stretchHeight(w);n=s&&t.scrollHeight>t.clientHeight;if(n&&i){i-=s;m.setStyle('width',i+'px')}q.toggleCls(o,d&&!!g);r.toggleCls(o,!!g);a.normalScrollbarClipper.toggleCls(a.scrollbarClipperCls+'-floated',!!a.normalGrid.floatedFromCollapse);a.normalScrollbar.toggleCls(a.scrollbarCls+'-floated',!!a.normalGrid.floatedFromCollapse);a.lockedScrollbarClipper.toggleCls(a.scrollbarClipperCls+'-floated',!!a.lockedGrid.floatedFromCollapse);a.lockedScrollbar.toggleCls(a.scrollbarCls+'-floated',!!a.lockedGrid.floatedFromCollapse);q.setSize(a.lockedScrollbarClipper.dom.offsetWidth,l);r.setSize(i,l);a.setNormalScrollerX(A);if(d&&h){k=e.union(f)}else {if(d){k=e}else {k=f}}a.scrollContainer.setBox(k);a.onSyncLockableLayout(n,k.width);if(!Ext.Object.equals(x.getPosition(),a.lastScrollPos)){x.scrollTo(a.lastScrollPos)}}},onSyncLockableLayout:Ext.emptyFn,setNormalScrollerX:function(a){this.normalScrollbar.setLocalX(a);this.normalScrollbarClipper.setLocalX(a)},getScrollExtraCls:function(){return ''},initScrollContainer:function(){var a=this,b=a.getScrollExtraCls(),h=a.scrollContainer=a.body.insertFirst({cls:[a.scrollContainerCls,b]}),g=a.scrollBody=h.appendChild({cls:a.scrollBodyCls}),n=a.lockedScrollbar=h.appendChild({cls:[a.scrollbarCls,a.scrollbarCls+'-locked',b]}),o=a.normalScrollbar=h.appendChild({cls:[a.scrollbarCls,b]}),e=a.lockedGrid.view,f=a.normalGrid.view,c=e.getScrollable(),d=f.getScrollable(),m=Ext.scroll.Scroller,i,j,k,l;e.stretchHeight(0);f.stretchHeight(0);a.scrollable.setConfig({element:g,lockedScroller:c,normalScroller:d});k=a.lockedScrollbarClipper=g.appendChild({cls:[a.scrollbarClipperCls,a.scrollbarClipperCls+'-locked',b]});l=a.normalScrollbarClipper=g.appendChild({cls:[a.scrollbarClipperCls,b]});k.appendChild(e.el);l.appendChild(f.el);e.ignoreDomPosition=!0;f.ignoreDomPosition=!0;i=a.lockedScrollbarScroller=new m({element:n,x:'scroll',y:!1,rtl:c.getRtl&&c.getRtl()});j=a.normalScrollbarScroller=new m({element:o,x:'scroll',y:!1,rtl:d.getRtl&&d.getRtl()});a.initScrollers();i.addPartner(c,'x');j.addPartner(d,'x');a.view.onPanelRender(g)},initScrollers:Ext.emptyFn,processColumns:function(b,m){var h=this,d,k,a,c=new Ext.grid.header.Container({'$initParent':h}),e=[],f=[],i={itemId:'lockedHeaderCt',stretchMaxPartner:'^^>>#normalHeaderCt',items:e},j={itemId:'normalHeaderCt',stretchMaxPartner:'^^>>#lockedHeaderCt',items:f},l={locked:i,normal:j},g;if(Ext.isObject(b)){Ext.applyIf(i,b);Ext.applyIf(j,b);g=Ext.apply({},b);delete g.items;Ext.apply(c,g);b=b.items}c.constructing=!0;for(d=0,k=b.length;d<k;++d){a=b[d];if(!a.isComponent){a=c.applyDefaults(a);a.$initParent=c;a=c.lookupComponent(a);delete a.$initParent}a.processed=!0;if(a.locked||a.autoLock){e.push(a)}else {f.push(a)}}h.fireEvent('processcolumns',h,e,f);c.destroy();return l},ensureLockedVisible:function(e,b){var c=b&&b.column,a=this.lockedGrid,d=c?c.getView().ownerCt:a.isVisible()?a:this.normalGrid;d.ensureVisible.apply(d,arguments)},syncRowHeights:function(){if(!this.destroyed){var e=this,b=e.normalGrid.getView(),a=e.lockedGrid.getView(),d=b.syncRowHeightBegin(),c=a.syncRowHeightBegin(),f;b.syncRowHeightMeasure(d);a.syncRowHeightMeasure(c);b.syncRowHeightFinish(d,c);a.syncRowHeightFinish(c,d);f=b.getScrollY();a.setScrollY(f);e.syncRowHeightOnNextLayout=!1}},modifyHeaderCt:function(){var a=this;a.lockedGrid.headerCt.getMenuItems=a.getMenuItems(a.lockedGrid.headerCt.getMenuItems,!0);a.normalGrid.headerCt.getMenuItems=a.getMenuItems(a.normalGrid.headerCt.getMenuItems,!1);a.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.lockedGrid.headerCt.showMenuBy,a.showMenuBy);a.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.normalGrid.headerCt.showMenuBy,a.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(f,g,c){var d=this.getMenu(),a=d.down('#unlockItem'),b=d.down('#lockItem'),e=a.prev();if(c.lockable===!1){e.hide();a.hide();b.hide()}else {e.show();a.show();b.show();if(!a.initialConfig.disabled){a.setDisabled(c.lockable===!1)}if(!b.initialConfig.disabled){b.setDisabled(!c.isLockable())}}},getMenuItems:function(d,b){var a=this,f=a.unlockText,h=a.lockText,g=Ext.baseCSSPrefix+'hmenu-unlock',i=Ext.baseCSSPrefix+'hmenu-lock',c=a.onUnlockMenuClick.bind(a),e=a.onLockMenuClick.bind(a);return function(){var a=d.call(this);a.push('-',{itemId:'unlockItem',iconCls:g,text:f,handler:c,disabled:!b});a.push({itemId:'lockItem',iconCls:i,text:h,handler:e,disabled:b});return a}},delaySyncLockedWidth:function(){var a=this,b=a.syncLockedWidthTask||(a.syncLockedWidthTask=new Ext.util.DelayedTask(a.syncLockedWidth,a));if(a.reconfiguring){return}if(!Ext.Component.layoutSuspendCount||a.syncTaskDelay===0){a.syncLockedWidth()}else {b.delay(1)}},syncLockedWidth:function(){var b=this,f=b.rendered,a=b.lockedGrid,c=b.normalGrid,d=a.getVisibleColumnManager().getColumns().length,e=c.getVisibleColumnManager().getColumns().length,g=b.syncLockedWidthTask;if(g){g.cancel()}if(b.reconfiguring){return}Ext.suspendLayouts();if(e){c.show();if(d){if(b.layout.type==='border'){a.region=a.initialConfig.region}else {a.flex=a.initialConfig.flex}if(f&&a.shrinkWrapColumns&&!a.headerCt.forceFit){delete a.flex;a.width=a.headerCt.getTableWidth()+a.gridPanelBorderWidth;a.updateLayout()}a.addCls(b.lockedGridCls);a.show();if(a.split){b.child('splitter').show();b.addCls(Ext.baseCSSPrefix+'grid-locked-split')}}else {a.hide();if(f){a.getView().clearViewEl(!0)}if(a.split){b.child('splitter').hide();b.removeCls(Ext.baseCSSPrefix+'grid-locked-split')}}}else {c.hide();delete a.width;if(b.layout.type==='border'){a.region='center';c.region='west'}else {a.flex=1}a.removeCls(b.lockedGridCls);a.show()}Ext.resumeLayouts(!0);return {locked:!!d,normal:!!e}},onLockedHeaderSortChange:Ext.emptyFn,onNormalHeaderSortChange:Ext.emptyFn,lock:function(a,m,g){var d=this,c=d.normalGrid,b=d.lockedGrid,k=c.view,f=b.view,e=k.getScrollable(),j=f.getScrollable(),n=c.headerCt,i,l,h;a=a||n.getMenu().activeHeader;a.unlockedWidth=a.width;if(a.flex){if(a.lockedWidth){a.width=a.lockedWidth;a.lockedWidth=null}else {a.width=a.lastBox.width}a.flex=null}g=g||b.headerCt;l=a.ownerCt;if(l&&!a.isLockable()){return}Ext.suspendLayouts();if(e){e.suspendPartnerSync();j.suspendPartnerSync()}if(b.hidden){if(!b.componentLayoutCounter){b.height=c.lastBox.height;h=f.bufferedRenderer;if(h){h.rowHeight=k.bufferedRenderer.rowHeight;h.onViewResize(f,0,c.body.lastBox.height)}}b.show()}b.reconfiguring=c.reconfiguring=!0;a.ownerCmp=a.ownerCt;a.locked=!0;if(Ext.isDefined(m)){g.insert(m,a)}else {g.add(a)}b.reconfiguring=c.reconfiguring=!1;a.ownerCmp=null;a.rootHeaderCt=null;a.view=f;i=d.syncLockedWidth();c.getView().refreshNeeded=i.normal;b.getView().refreshNeeded=i.locked;a.onLock(a);d.fireEvent('lockcolumn',d,a);Ext.resumeLayouts(!0);if(e){e.resumePartnerSync(!0);j.resumePartnerSync()}},unlock:function(a,g,h){var e=this,d=e.normalGrid,c=e.lockedGrid,f=d.view,j=c.view,i=f.all.startIndex,k=c.headerCt,b;if(!Ext.isDefined(g)){g=0}a=a||k.getMenu().activeHeader;a.lockedWidth=a.width;if(a.flex){if(a.unlockedWidth){a.width=a.unlockedWidth;a.unlockedWidth=null}else {a.width=a.lastBox.width}a.flex=null}h=h||d.headerCt;Ext.suspendLayouts();c.reconfiguring=d.reconfiguring=!0;a.ownerCmp=a.ownerCt;if(a.ownerCt){a.ownerCt.remove(a,!1)}a.locked=!1;h.insert(g,a);c.reconfiguring=d.reconfiguring=!1;a.ownerCmp=null;a.rootHeaderCt=null;a.view=f;b=e.syncLockedWidth();if(b.locked){j.clearViewEl(!0)}if(b.normal){f.clearViewEl(!0)}if(b.normal){d.getView().refreshView(i)}if(b.locked){c.getView().refreshView(i)}a.onUnlock(a);e.fireEvent('unlockcolumn',e,a);Ext.resumeLayouts(!0)},reconfigureLockable:function(a,g,k){var b=this,l=b.store,c=b.lockedGrid,f=b.normalGrid,e=c.view,d=f.view,j,h,i;if(!a&&k){a=Ext.StoreManager.lookup('ext-empty-store')}if(a&&a!==l){a=Ext.data.StoreManager.lookup(a);b.store=a;e.blockRefresh=d.blockRefresh=!0;c.bindStore(a);e.store=a;if(!e.dataSource.isFeatureStore){e.dataSource=a}if(e.bufferedRenderer){e.bufferedRenderer.bindStore(a)}f.bindStore(a);d.store=a;if(!d.dataSource.isFeatureStore){d.dataSource=a}if(d.bufferedRenderer){d.bufferedRenderer.bindStore(a)}b.view.store=a;h=b.view.loadMask;if(h&&h.isLoadMask){h.bindStore(a)}b.view.bindStore(d.dataSource,!1,'dataSource');e.blockRefresh=d.blockRefresh=!1}if(g){c.reconfiguring=f.reconfiguring=!0;j=c.getVisibleColumnManager().getColumns().length;c.headerCt.removeAll();f.headerCt.removeAll();g=b.processColumns(g,c);i=g.locked.items;if(i.length){if(!j){c.view.refreshNeeded=!0}c.headerCt.add(i)}f.headerCt.add(g.normal.items);c.reconfiguring=f.reconfiguring=!1;b.syncLockedWidth()}b.refreshCounter=d.refreshCounter},afterReconfigureLockable:function(){this.syncLockedWidth();if(this.refreshCounter===this.normalGrid.getView().refreshCounter){this.view.refreshView()}},constructLockableFeatures:function(){var b=this.features,a,f,c,d,e,g;if(b){if(!Ext.isArray(b)){b=[b]}c=[];d=[];for(e=0,g=b.length;e<g;e++){a=b[e];if(!a.isFeature){a=Ext.create('feature.'+a.ftype,a)}switch(a.lockableScope){case 'locked':c.push(a);break;case 'normal':d.push(a);break;default:a.lockableScope='both';c.push(a);d.push(f=a.clone());f.lockingPartner=a;a.lockingPartner=f;}}}return {normalFeatures:d,lockedFeatures:c}},constructLockablePlugins:function(){var b=this.plugins,a,h,g,i,c,d,f,j,e,k;if(b){if(!Ext.isArray(b)){b=[b]}i=[];c=[];d=[];for(e=0,k=b.length;e<k;e++){a=b[e];if(a.init){f=a.lockableScope}else {j=a.ptype?Ext.ClassManager.getByAlias('plugin.'+a.ptype):Ext.ClassManager.get(a.xclass);f=j.prototype.lockableScope}switch(f){case 'both':c.push(g=a.clonePlugin());d.push(h=a.clonePlugin());g.lockingPartner=h;h.lockingPartner=g;Ext.destroy(a);break;case 'locked':c.push(a);break;case 'normal':d.push(a);break;default:i.push(a);}}}return {topPlugins:i,normalPlugins:d,lockedPlugins:c}},destroyLockable:function(){var a=this,b=a.syncLockedWidthTask;if(b){b.cancel();a.syncLockedWidthTask=null}if(a.lockedGrid&&a.lockedGrid.headerCt){a.lockedGrid.headerCt.showMenuBy=null}if(a.normalGrid&&a.normalGrid.headerCt){a.normalGrid.headerCt.showMenuBy=null}Ext.destroy(a.normalScrollbarClipper,a.lockedScrollbarClipper,a.normalScrollbar,a.lockedScrollbar,a.scrollBody,a.scrollContainer,a.normalScrollbarScroller,a.lockedScrollbarScroller,a.view,a.headerCt)}},function(){this.borrow(Ext.Component,['constructPlugin'])});Ext.define('Ext.grid.plugin.BufferedRenderer',{extend:Ext.plugin.Abstract,alias:'plugin.bufferedrenderer',isBufferedRenderer:!0,lockableScope:'both',numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:!0,scrollToLoadBuffer:200,viewSize:100,rowHeight:21,position:0,scrollTop:0,lastScrollDirection:1,bodyTop:0,scrollHeight:0,loadId:0,newFocusTarget:null,lastFocusedMultiRange:null,colHeader:null,lastFocusedElement:null,init:function(c){var a=this,b=c.view,e={refresh:a.onViewRefresh,columnschanged:a.checkVariableRowHeight,scope:a,destroyable:!0},f={scroll:a.onViewScroll,scope:a},d=b.initialConfig;a.scroller=b.lockingPartner?b.ownerGrid.scrollable:b.getScrollable();if(c.isTree||c.ownerLockable&&c.ownerLockable.isTree){b.blockRefresh=!1;if(d&&d.loadMask===undefined){b.loadMask=!0}}if(b.positionBody){e.refresh=a.onViewRefresh}a.grid=c;a.view=b;a.isRTL=b.getInherited().rtl;b.bufferedRenderer=a;b.preserveScrollOnRefresh=!0;b.animate=!1;a.bindStore(b.dataSource);if(b.hasOwnProperty('rowHeight')){a.rowHeight=b.rowHeight}a.position=0;a.viewListeners=b.on(e);if(a.scroller){a.scrollListeners=a.scroller.on(f)}},checkVariableRowHeight:function(){var a=this.variableRowHeight;this.variableRowHeight=this.view.hasVariableRowHeight();if(!!this.variableRowHeight!==!!a){delete this.rowHeight}},bindStore:function(b){var a=this,c=a.store;if(c&&c.isFeatureStore){return}if(c){a.unbindStore()}a.storeListeners=b.on({scope:a,groupchange:a.onStoreGroupChange,clear:a.onStoreClear,beforeload:a.onBeforeStoreLoad,load:a.onStoreLoad,destroyable:!0});a.store=b;a.setBodyTop(a.position=a.scrollTop=0);delete a.viewSize;delete a.rowHeight;if(b.isBufferedStore){b.setViewSize(a.viewSize)}},unbindStore:function(){this.storeListeners.destroy();this.storeListeners=this.store=null},onBeforeStoreLoad:function(c){var a=this,b=a.view;if(b&&b.refreshCounter){if(c.isTreeStore||b.preserveScrollOnReload){a.nextRefreshStartIndex=b.all.startIndex}else {if(a.scrollTop!==0){a.setBodyTop(a.bodyTop=a.scrollTop=a.position=a.scrollHeight=a.nextRefreshStartIndex=0);a.scroller.scrollTo(null,0)}}a.lastScrollDirection=a.scrollOffset=null}a.disable()},onStoreLoad:function(){this.isStoreLoading=!0;this.enable()},onStoreClear:function(){var a=this,b=a.view;if(b.rendered&&!a.store.destroyed){if(a.scrollTop!==0){a.bodyTop=a.scrollTop=a.position=a.scrollHeight=0;a.nextRefreshStartIndex=null;a.scroller.scrollTo(null,0)}b.refresh();a.lastScrollDirection=a.scrollOffset=null}},onStoreGroupChange:function(a){this.refreshSize()},onViewRefresh:function(b,c){var a=this,d=b.all,e;a.checkVariableRowHeight();if(!b.componentLayoutCounter&&(b.headerCt.down('{flex}')||a.variableRowHeight)){b.on({boxready:Ext.Function.pass(a.onViewRefresh,[b,c],a),single:!0});a.skipNextRefreshSize=!0;return}a.skipNextRefreshSize=!1;if(a.refreshing){return}a.refreshSize();if(a.scroller){if(a.scrollTop!==a.scroller.getPosition().y){a.onViewScroll()}else {if(!a.hasOwnProperty('bodyTop')){a.bodyTop=d.startIndex*a.rowHeight;a.scroller.scrollTo(null,a.bodyTop)}a.setBodyTop(a.bodyTop);e=b.lastBox&&b.lastBox.height;if(e&&d.getCount()){a.onViewResize(b,null,e);if(c&&d.getCount()!==c.length){c.length=0;c.push.apply(c,a.store.getRange(d.startIndex,d.endIndex))}}}}},beforeTableLayout:function(b){var c=this.view.body.dom,a;if(c){a=this.grid.getElementSize(c);b.bodyHeight=a.height;b.bodyWidth=a.width}},afterTableLayout:function(d){var a=this,b=a.view,c;if(d.bodyHeight&&b.body.dom){delete a.rowHeight;a.refreshSize();c=a.grid.getElementHeight(b.body.dom);if(c!==d.bodyHeight){a.onViewResize(b,null,b.el.lastBox.height);c=a.bodyHeight;if(c<d.bodyHeight){if(a.viewSize>=a.store.getCount()){a.setBodyTop(0)}else {if(a.bodyTop>a.scrollTop||a.bodyTop+c<a.scrollTop+a.viewClientHeight){a.setBodyTop(a.scrollTop-a.trailingBufferZone*a.rowHeight)}}}if(b.all.endIndex===b.dataSource.getCount()-1){a.stretchView(b,a.scrollHeight=a.bodyTop+c-1)}}}},refreshSize:function(){var a=this,b=a.view,c=a.skipNextRefreshSize||Ext.Component.pendingLayouts&&Ext.Component.layoutSuspendCount||!b.body.dom;a.skipNextRefreshSize=!1;if(c){return}a.bodyHeight=a.grid.getElementHeight(b.body.dom);a.scrollHeight=a.getScrollHeight();a.stretchView(b,a.scrollHeight)},onViewResize:function(e,g,b,f,d){var a=this,c;a.refreshSize();if(!d||b!==d){Ext.suspendLayouts();a.viewClientHeight=b||e.el.dom.clientHeight;c=Math.ceil(b/Math.min(a.getThemeRowHeight(),a.rowHeight))+a.trailingBufferZone+a.leadingBufferZone;a.viewSize=a.setViewSize(c);Ext.resumeLayouts(!0)}},stretchView:function(c,b){var a=this,d;if(a.scrollTop>b){d=a.nextRefreshStartIndex==null?a.bodyHeight:b-a.bodyHeight;a.position=a.scrollTop=Math.max(d,0);a.scroller.scrollTo(null,a.scrollTop)}if(a.bodyTop>b){c.body.translate(null,a.bodyTop=a.position)}if(c.getScrollable()){a.refreshScroller(c,b)}},refreshScroller:function(b,c){var a=b.getScrollable();if(a){if(a.setElementSize){a.setElementSize()}a.setSize({x:b.headerCt.getTableWidth(),y:b.lockingPartner?null:c});if(b.lockingPartner){this.scroller.setSize({x:0,y:c})}}},setViewSize:function(c,n){var a=this,k=a.store,o=a.view,g,b=o.all,h=b.getCount(),f=k.getCount(),j,m,d=a.view.lockingPartner&&a.view.lockingPartner.bufferedRenderer,e=h-c,i=0,p=Math.max(0,f-1),l=Ext.Number.sign(a.getFirstVisibleRowIndex()-b.startIndex-(b.endIndex-a.getLastVisibleRowIndex()));if(d&&!n){d.setViewSize(c,!0)}e=h-c;if(e){a.scrollTop=a.scroller?a.scroller.getPosition().y:0;a.viewSize=c;if(k.isBufferedStore){k.setViewSize(c)}if(h){j=Math.max(0,Math.min(b.startIndex,f-c));m=Math.min(j+c-1,p);if(j===b.startIndex&&m===b.endIndex){if(e<0){a.handleViewScroll(l)}}else {if(d){d.disable()}if(e<0){if(f>c&&f>h){k.getRange(j,m,{callback:function(e,f,h){g=o.ownerGrid;if(h>b.endIndex){b.scroll(Ext.Array.slice(e,b.endIndex+1,Infinity),1,0)}if(f<b.startIndex){i=b.first(!0);b.scroll(Ext.Array.slice(e,0,b.startIndex-f),-1,0);a.bodyTop-=i.offsetTop}a.setBodyTop(a.bodyTop);if(d&&!n&&(g.syncRowHeight||g.syncRowHeightOnNextLayout)){d.setViewSize(c,!0);g.syncRowHeights()}}})}else {a.refreshView(0)}}else {if(l===1){i=b.item(b.startIndex+e,!0).offsetTop}b.clip(l,e);a.setBodyTop(a.bodyTop+i)}if(d){d.enable()}}}a.refreshSize()}return c},getViewRange:function(){var b=this,g=b.view,f=g.all,h=f.getCount(),d=g.lockingPartner&&g.lockingPartner.all,a=b.store,c=0,e;if(!b.hasOwnProperty('viewSize')&&b.ownerCt&&b.ownerCt.height){b.viewSize=Math.ceil(b.ownerCt.height/b.rowHeight)}if(!a.data.getCount()){return []}if(!h&&d&&d.getCount()){c=d.startIndex;e=Math.min(d.endIndex,c+b.viewSize-1,a.getCount()-1)}else {if(h){c=f.startIndex}else {if(a.isBufferedStore){if(!a.currentPage){a.currentPage=1}c=f.startIndex=(a.currentPage-1)*(a.pageSize||1);a.currentPage=1}}e=c+(b.viewSize||a.defaultViewSize)-1}return a.getRange(c,e)},onReplace:function(n,e,j,l){var a=this,m=a.scroller,c=a.view,b=c.all,i,g=b.getCount(),h=e+j.length-1,f=l.length-j.length,d=f*a.rowHeight,k;if(e>=b.startIndex+a.viewSize){a.refreshSize();return}if(g&&h<b.startIndex&&b.getCount()>=a.viewSize){b.moveBlock(f);a.refreshSize();i=b.startIndex;if(f>0){a.doNotMirror=!0;a.handleViewScroll(-1);a.doNotMirror=!1}if(b.startIndex===i){if(b.startIndex){a.setBodyTop(a.bodyTop+=d);c.suspendEvent('scroll');c.scrollBy(0,d);c.resumeEvent('scroll');a.position=a.scrollTop=a.scroller.getPosition().y}}else {c.suspendEvent('scroll');c.scrollBy(0,(i-b.startIndex)*a.rowHeight);c.resumeEvent('scroll')}c.refreshSize(b.getCount()!==g);return}if(g&&e>b.endIndex){a.refreshSize();if(f>0){a.onRangeFetched(null,b.startIndex,Math.min(n.getCount(),b.startIndex+a.viewSize)-1)}c.refreshSize(b.getCount()!==g);return}if(e<b.startIndex&&h<=b.endIndex){k=c.preserveScrollOnRefresh;c.preserveScrollOnRefresh=!1;a.refreshView(b.startIndex-j.length+l.length);c.preserveScrollOnRefresh=k;return}if(e<b.startIndex&&h<=b.endIndex&&d){a.doVerticalScroll(m,a.scrollTop+=d,!0)}a.refreshView(b.startIndex,d)},doVerticalScroll:function(a,c,b){var d=this;if(!a){return}if(b){a.suspendEvent('scroll')}a.scrollTo(null,d.position=c);if(b){a.resumeEvent('scroll')}},scrollTo:function(b,j){var p=arguments,a=this,d=a.view,f=d.lockingPartner&&d.lockingPartner.grid.isVisible()&&d.lockingPartner.bufferedRenderer,g=a.store,k=g.getCount(),i,m,n,o,e,h,c,l;if(j!==undefined&&!(j instanceof Object)){j={select:p[1],callback:p[2],scope:p[3]}}if((e=d.dataSource.groupingFeature)&&e.collapsible){if(b.isEntity){c=b}else {c=d.store.getAt(Math.min(Math.max(b,0),d.store.getCount()-1))}h=e.getMetaGroup(c);if(h&&h.isCollapsed){if(!e.isExpandingOrCollapsing&&c!==h.placeholder){e.expand(e.getGroup(c).getGroupKey());k=g.getCount();b=e.indexOf(c)}else {c=h.placeholder;b=e.indexOfPlaceholder(c)}}else {b=e.indexOf(c)}}else {if(b.isEntity){c=b;b=g.indexOf(c);if(b===-1){return}}else {b=Math.min(Math.max(b,0),k-1);c=g.getAt(b)}}if(c&&(n=d.getNode(c))){d.grid.ensureVisible(c,j);a.onViewScroll();return}if(b<d.all.startIndex){l=-1;i=Math.max(Math.min(b-Math.floor((a.leadingBufferZone+a.trailingBufferZone)/2),k-a.viewSize+1),0);m=Math.min(i+a.viewSize-1,k-1)}else {l=1;m=Math.min(b+Math.floor((a.leadingBufferZone+a.trailingBufferZone)/2),k-1);i=Math.max(m-(a.viewSize-1),0)}o=Math.max(i*a.rowHeight,0);g.getRange(i,m,{callback:function(i,e,h){a.renderRange(e,h,!0);c=g.data.getRange(b,b+1)[0];n=d.getNode(c);d.body.translate(null,a.bodyTop=o);if(l===1&&d.hasVariableRowHeight()){a.refreshSize()}if(f){f.renderRange(e,h,!0);a.syncRowHeights();f.view.body.translate(null,f.bodyTop=o);if(l===1){f.refreshSize()}}if(!n){return}d.grid.ensureVisible(c,j);a.scrollTop=a.position=a.scroller.getPosition().y;if(f){f.position=f.scrollTop=a.scrollTop}}})},onViewScroll:function(h,i,b){var a=this,f=a.view.body.dom,g=a.store,e=g.getCount(),c,d;if(b==null){b=a.scroller.getPosition().y}a.scrollTop=b;if(f){if(!(a.disabled||e<a.viewSize)){c=b-a.position;d=c>0?1:-1;if(Math.abs(c)>=20||d!==a.lastScrollDirection){a.lastScrollDirection=d;a.handleViewScroll(a.lastScrollDirection,c)}}}},handleViewScroll:function(j,i){var a=this,c=a.view.all,k=a.store,g=k.getCount(),f=a.viewSize,e=g-1,h=Math.max(0,g-f),b,d;if(j===-1){if(c.startIndex){if(a.topOfViewCloseToEdge()){b=Math.max(0,a.getLastVisibleRowIndex()+a.trailingBufferZone-f);if(b>c.startIndex){b=Math.max(0,c.startIndex+Math.floor(i/a.rowHeight))}}}}else {if(c.endIndex<e){if(a.bottomOfViewCloseToEdge()){b=Math.max(0,Math.min(a.getFirstVisibleRowIndex()-a.trailingBufferZone,h))}}}if(b==null){a.position=a.scrollTop;a.loadId++}else {d=Math.min(b+f-1,e);if(a.variableRowHeight&&d===c.endIndex&&d<e){d++;b++}if(b!==c.startIndex||d!==c.endIndex){a.scroller.trackingScrollTop=a.scrollTop;a.renderRange(b,d);return !0}}},bottomOfViewCloseToEdge:function(){var a=this;if(a.variableRowHeight){return a.bodyTop+a.bodyHeight<a.scrollTop+a.view.lastBox.height+a.numFromEdge*a.rowHeight}else {return a.view.all.endIndex-a.getLastVisibleRowIndex()<a.numFromEdge}},topOfViewCloseToEdge:function(){var a=this;if(a.variableRowHeight){return a.bodyTop>a.scrollTop-a.numFromEdge*a.rowHeight}else {return a.getFirstVisibleRowIndex()-a.view.all.startIndex<a.numFromEdge}},refreshView:function(a,l){var b=this,d=b.viewSize,g=b.view,k=g.all,j=b.store,h=j.getCount(),f=Math.max(0,h-1),e=g.lockingPartner&&g.lockingPartner.all,i=b.bodyTop&&g.preserveScrollOnRefresh||l,c;if(!h){return b.doRefreshView([],0,0)}else {if(h<d){a=0;c=f;b.nextRefreshStartIndex=i?null:0}else {if(a==null&&!k.getCount()&&e&&e.getCount()){a=e.startIndex;c=Math.min(e.endIndex,a+d-1,f)}else {if(a==null){if(b.nextRefreshStartIndex!=null&&!i){a=b.nextRefreshStartIndex}else {a=k.startIndex}b.nextRefreshStartIndex=null}a=Math.max(0,Math.min(a,f-d+1));c=Math.min(a+d-1,f);if(c-a+1>d){a=c-d+1}}}}if(a===0&&c===-1){b.doRefreshView([],0,0)}else {j.getRange(a,c,{callback:b.doRefreshView,scope:b})}},doRefreshView:function(j,i,p){var a=this,b=a.view,k=a.scroller,d=b.all,l=d.startIndex,m=d.endIndex,n=d.getCount(),o=i!==d.startIndex&&!a.isStoreLoading,c=-1,f,g,e,h;a.isStoreLoading=!1;b.refreshing=a.refreshing=!0;if(b.refreshCounter){if(b.hasListeners.beforerefresh&&b.fireEvent('beforerefresh',b)===!1){return b.refreshNeeded=b.refreshing=a.refreshing=!1}h=b.saveFocusState();b.clearViewEl(!0);b.refreshCounter++;if(j.length){b.doAdd(j,i);if(o){f=d.item(l,!0);g=d.item(m,!0);if(f){e=-f.offsetTop}else {if(g){e=d.last(!0).offsetTop-g.offsetTop}}if(e){c=Math.max(a.bodyTop+e,0);a.scrollTop=c?a.scrollTop+e:0}else {c=i*a.rowHeight;a.scrollTop=Math.max(c+a.rowHeight*(c<a.bodyTop?a.leadingBufferZone:a.trailingBufferZone),0)}}}else {a.scrollTop=c=a.position=0;b.addEmptyText()}if(c!==-1){a.setBodyTop(c);a.doVerticalScroll(k,a.scrollTop,!0)}a.refreshSize();b.refreshSize(d.getCount()!==n);b.fireItemMutationEvent('refresh',b,j);h();if(b.preserveScrollOnRefresh&&h!==Ext.emptyFn){a.doVerticalScroll(k,a.scrollTop,!0)}b.headerCt.setSortState()}else {b.refresh()}b.refreshNeeded=b.refreshing=a.refreshing=!1},renderRange:function(b,c,e){var a=this,d=a.view.all,f=a.store;if(d.startIndex===b&&d.endIndex===c){return}if(!(b===d.startIndex&&c===d.endIndex)){if(f.rangeCached(b,c)){a.cancelLoad();if(a.synchronousRender||e){a.onRangeFetched(null,b,c)}else {if(!a.renderTask){a.renderTask=new Ext.util.DelayedTask(a.onRangeFetched,a)}a.renderTask.delay(-1,null,null,[null,b,c])}}else {a.attemptLoad(b,c,a.scrollTop)}}},onRangeFetched:function(g,e,r){var a=this,c=a.view,y=a.scroller,D=c.el,b=c.all,m=0,t,f=!a.doNotMirror&&c.lockingPartner,z=f&&f.getVisibleColumnManager(),v=z&&z.getColumns().length,j=v&&f.bufferedRenderer,B=v&&f.all,n=a.variableRowHeight,q=v&&f.ownerCt.isVisible()&&(c.ownerGrid.syncRowHeight||c.ownerGrid.syncRowHeightOnNextLayout||j.variableRowHeight!==n),o,h,u,i,d,x,C,k,s,l,A,w,p;if(c.destroyed){return}if(g){a.scrollTop=y.getPosition().y}else {g=a.store.getRange(e,r);if(!g){return}}o=Ext.fly(Ext.Element.getActiveElement());if(D.contains(o)){h=c}else {if(f&&f.el.contains(o)){h=f}}if(h){o.suspendFocusEvents()}t=e*a.rowHeight;if(e<b.startIndex&&r>b.endIndex){A=b.startIndex-e;c.clearViewEl(!0);i=c.doAdd(g,e);c.fireItemMutationEvent('itemadd',g,e,i,c);if(j){f.clearViewEl(!0);k=f.doAdd(g,e);f.fireItemMutationEvent('itemadd',g,e,k,f);if(q){a.syncRowHeights(i,k);q=!1}}for(u=0;u<A;u++){m-=a.grid.getElementHeight(i[u])}d=a.bodyTop+m}else {x=a.teleported||e>b.endIndex||r<b.startIndex;if(x){c.clearViewEl(!0);a.teleported=!1}if(!b.getCount()){i=c.doAdd(g,e);c.fireItemMutationEvent('itemadd',g,e,i,c);if(j){f.clearViewEl(!0);k=j.view.doAdd(g,e);f.fireItemMutationEvent('itemadd',g,e,k,f)}d=t;if(x&&n){w=a.scrollTop<a.position?a.leadingBufferZone:a.trailingBufferZone;if(e>w){d=Math.max(a.scrollTop-b.item(b.startIndex+w-1,!0).offsetTop,0)}}}else {if(r>b.endIndex){l=Math.max(e-b.startIndex,0);if(n){m=b.item(b.startIndex+l,!0).offsetTop}p=Ext.Array.slice(g,b.endIndex+1-e);i=b.scroll(p,1,l);if(j){k=B.scroll(p,1,l)}if(n){d=a.bodyTop+m}else {d=t}}else {l=Math.max(b.endIndex-r,0);C=b.startIndex;p=Ext.Array.slice(g,0,b.startIndex-e);i=b.scroll(p,-1,l);if(j){k=B.scroll(p,-1,l)}if(q){a.syncRowHeights(i,k);q=!1}if(n){d=a.bodyTop-b.item(C,!0).offsetTop;if(!b.startIndex){if(d){a.doVerticalScroll(y,a.scrollTop-=d);d=0}}else {if(d<0){m=b.startIndex*a.rowHeight;a.doVerticalScroll(y,a.scrollTop+=m);d=a.bodyTop+m}}}else {d=t}}}a.position=a.scrollTop}if(h){o.resumeFocusEvents();if(!h.el.contains(o)){s=h.actionableMode?h.actionPosition:h.lastFocused;if(s&&s.column){h.renderingRows=!0;h.onFocusLeave({});h.renderingRows=!1;a.lastFocusedElement=h;a.newFocusTarget=a.getNewFocusTarget(s);a.newFocusTarget.focus();a.lastFocusedMultiRange=!1;a.colHeader=s.column}}}if(a.lastFocusedElement&&a.newFocusTarget===a.colHeader&&!a.lastFocusedMultiRange&&!c.actionableMode){c=a.lastFocusedElement;if(Ext.Array.contains(a.store.getRange(b.startIndex,b.endIndex),c.lastFocused.record)){c.focus();a.lastFocusedMultiRange=!0}}d=Math.max(Math.floor(d),0);if(c.positionBody){a.setBodyTop(d,!0)}if(j){j.scrollTop=a.scrollTop;if(j.bodyTop!==d){j.setBodyTop(d,!0)}if(q){a.syncRowHeights(i,k)}}else {if(n){delete a.rowHeight;a.refreshSize()}}return i},getNewFocusTarget:function(e){var d=e.view,c=d.grid,b=e.column,f=b.isHidden()||c.hideHeaders,a;if(b.focusable&&!f){return b}a=b.el.findTabbableElements();if(a&&a.length){return a[0]}return c.findFocusTarget()||d.el},syncRowHeights:function(b,e){var d=this,c=0,f=1,i=[],h=[],j=Ext.grid.locking.RowSynchronizer,a,g;if(b&&e){c=b.length;f=e.length}if(c!==f){b=d.view.all.slice();e=d.view.lockingPartner.all.slice();c=f=b.length}for(a=0;a<c;a++){i[a]=g=new j(d.view,b[a]);g.measure()}for(a=0;a<f;a++){h[a]=g=new j(d.view.lockingPartner,e[a]);g.measure()}for(a=0;a<c;a++){i[a].finish(h[a]);h[a].finish(i[a])}d.syncRowHeightsFinish()},syncRowHeightsFinish:function(){var b=this,a=b.view,c=a.lockingPartner.bufferedRenderer,e=a.ownerGrid,d=a.getScrollable();e.syncRowHeightOnNextLayout=!1;if(a.componentLayoutCounter){delete b.rowHeight;b.refreshSize();delete c.rowHeight;c.refreshSize()}if(d){d.restoreState()}},setBodyTop:function(d,f){var a=this,c=a.view,e=c.all,g=a.store,b=c.body;if(!b.dom){return}a.translateBody(b,d);if(a.variableRowHeight){a.bodyHeight=a.grid.getElementHeight(b.dom);if(e.endIndex===g.getCount()-1){a.scrollHeight=d+a.bodyHeight-1}else {a.scrollHeight=a.getScrollHeight()}if(!f){a.stretchView(c,a.scrollHeight)}}else {a.bodyHeight=e.getCount()*a.rowHeight}},translateBody:function(b,a){b.translate(null,this.bodyTop=a)},getFirstVisibleRowIndex:function(b,e,d,f){var a=this,l=a.view,g=l.all,j=g.elements,k=a.viewClientHeight,c,h,i=a.bodyTop;if(g.getCount()&&a.variableRowHeight){if(!arguments.length){b=g.startIndex;e=g.endIndex;d=a.scrollTop;f=d+k;if(i>f||i+a.bodyHeight<d){a.teleported=!0;return Math.floor(a.scrollTop/a.rowHeight)}c=b+Math.min(a.numFromEdge+(a.lastScrollDirection===-1?a.leadingBufferZone:a.trailingBufferZone),Math.floor((e-b)/2))}else {if(b===e){return e}c=b+Math.floor((e-b)/2)}h=i+j[c].offsetTop;if(h+a.grid.getElementHeight(j[c])<=d){return a.getFirstVisibleRowIndex(c+1,e,d,f)}if(h<=d){return c}else {if(c!==b){return a.getFirstVisibleRowIndex(b,c-1,d,f)}}}return Math.floor(a.scrollTop/a.rowHeight)},getLastVisibleRowIndex:function(e,b,f,d){var a=this,m=a.view,g=m.all,l=g.elements,h=a.viewClientHeight,c,i,k,j=a.bodyTop;if(g.getCount()&&a.variableRowHeight){if(!arguments.length){e=g.startIndex;b=g.endIndex;f=a.scrollTop;d=f+h;if(j>d||j+a.bodyHeight<f){a.teleported=!0;return Math.floor(a.scrollTop/a.rowHeight)+Math.ceil(h/a.rowHeight)}c=b-Math.min(a.numFromEdge+(a.lastScrollDirection===1?a.leadingBufferZone:a.trailingBufferZone),Math.floor((b-e)/2))}else {if(e===b){return b}c=e+Math.floor((b-e)/2)}i=j+l[c].offsetTop;if(i>d){return a.getLastVisibleRowIndex(e,c-1,f,d)}k=i+a.grid.getElementHeight(l[c]);if(k>=d){return c}else {if(c!==b){return a.getLastVisibleRowIndex(c+1,b,f,d)}}}return Math.min(a.getFirstVisibleRowIndex()+Math.ceil(h/a.rowHeight),g.endIndex)},getScrollHeight:function(){var a=this,j=a.view,d=j.all,i=a.store,c=i.getCount(),g=d.getCount(),h,f,e,b;if(!c){return 0}if(!a.hasOwnProperty('rowHeight')){if(g){if(a.variableRowHeight){a.rowHeight=Math.floor(a.bodyHeight/g)}else {h=d.first();f=h.getHeight();if(Ext.isIE8){e=h.getBorderWidth('b');if(e>0){f-=e}}a.rowHeight=f}}else {delete a.rowHeight}}if(a.variableRowHeight){if(d.endIndex===c-1){b=a.bodyTop+a.bodyHeight-1}else {b=Math.floor((c-g)*a.rowHeight)+a.bodyHeight;b+=a.bodyTop-d.startIndex*a.rowHeight}}else {b=Math.floor(c*a.rowHeight)}return a.scrollHeight=b},getThemeRowHeight:function(){var b=this,a;if(!b.themeRowHeight){a=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+'theme-row-height-el'});b.self.prototype.themeRowHeight=a.dom.offsetHeight;a.destroy()}return b.themeRowHeight},attemptLoad:function(c,d,b){var a=this;if(a.scrollToLoadBuffer){if(!a.loadTask){a.loadTask=new Ext.util.DelayedTask()}a.loadTask.delay(a.scrollToLoadBuffer,a.doAttemptLoad,a,[c,d,b])}else {a.doAttemptLoad(c,d,b)}},cancelLoad:function(){if(this.loadTask){this.loadTask.cancel()}},doAttemptLoad:function(c,d,b){var a=this;if(!a.destroyed){a.store.getRange(c,d,{loadId:++a.loadId,callback:function(f,g,h,e){if(e.loadId===a.loadId&&a.scrollTop===b){a.onRangeFetched(f,g,h)}},fireEvent:!1})}},destroy:function(){var a=this;a.cancelLoad();if(a.store){a.unbindStore()}Ext.destroy(a.viewListeners,a.stretcher,a.gridListeners,a.scrollListeners);a.callParent()}});Ext.define('Ext.grid.plugin.Editing',{extend:Ext.plugin.Abstract,alias:'editing.editing',mixins:[Ext.mixin.Observable],clicksToEdit:2,triggerEvent:undefined,relayedEvents:['beforeedit','edit','validateedit','canceledit'],defaultFieldUI:'default',defaultFieldXType:'textfield',editStyle:'',constructor:function(b){var a=this;a.callParent([b]);a.mixins.observable.constructor.call(a);a.on('edit',function(c,d){a.fireEvent('afteredit',c,d)})},init:function(b){var a=this,c=b.ownerLockable;a.grid=b;a.view=b.view;a.initEvents();if(b.rendered){a.setup()}else {a.mon(b,{beforereconfigure:a.onBeforeReconfigure,reconfigure:a.onReconfigure,scope:a,beforerender:{fn:a.onBeforeRender,single:!0,scope:a}})}b.editorEventRelayers=b.relayEvents(a,a.relayedEvents);if(c){c.editorEventRelayers=c.relayEvents(a,a.relayedEvents)}b.isEditable=!0;b.editingPlugin=b.view.editingPlugin=a},onBeforeReconfigure:function(){this.reconfiguring=!0},onReconfigure:function(){this.setup();delete this.reconfiguring},onBeforeRender:function(){this.setup()},setup:function(){this.initFieldAccessors(this.grid.getTopLevelColumnManager().getColumns())},destroy:function(){var b=this,a=b.grid;Ext.destroy(b.keyNav);b.clearListeners();if(a){if(a.ownerLockable){Ext.destroy(a.ownerLockable.editorEventRelayers);a.ownerLockable.editorEventRelayers=null}Ext.destroy(a.editorEventRelayers);a.editorEventRelayers=null;a.editingPlugin=a.view.editingPlugin=null}b.callParent()},getEditStyle:function(){return this.editStyle},initFieldAccessors:function(a){if(a.isGroupHeader){a=a.getGridColumns()}else {if(!Ext.isArray(a)){a=[a]}}var d=this,c,h=a.length,e=function(c,b){return d.getColumnField(this,b)},f=function(){return d.hasColumnField(this)},g=function(b){d.setColumnField(this,b)},b;for(c=0;c<h;c++){b=a[c];if(!b.getEditor){b.getEditor=e}if(!b.hasEditor){b.hasEditor=f}if(!b.setEditor){b.setEditor=g}}},removeFieldAccessors:function(a){if(a.isGroupHeader){a=a.getGridColumns()}else {if(!Ext.isArray(a)){a=[a]}}var c,d=a.length,b;for(c=0;c<d;c++){b=a[c];b.getEditor=b.hasEditor=b.setEditor=b.field=b.editor=null}},getColumnField:function(b,d){var c=this,a=b.field;if(!(a&&a.isFormField)){a=b.field=c.createColumnField(b,d)}if(a&&a.ui==='default'&&!a.hasOwnProperty('ui')){a.ui=c.defaultFieldUI}return a},hasColumnField:function(a){return !!(a.field&&a.field.isComponent)},setColumnField:function(a,b){a.field=b;a.field=this.createColumnField(a)},createColumnField:function(b,d){var a=b.field,c;if(!a&&b.editor){a=b.editor=Ext.clone(b.editor);if(a.field){a=a.field;a.editorCfg=b.editor;delete a.editorCfg.field}b.editor=null}if(!a&&d){a=d}if(a){c=b.dataIndex;if(a.isComponent){a.column=b}else {if(Ext.isString(a)){a={name:c,xtype:a,column:b}}else {a=Ext.apply({name:c,column:b},a)}a=Ext.ComponentManager.create(a,this.defaultFieldXType)}a.dataIndex=c;a.isEditorComponent=!0;b.field=a}return a},initEvents:function(){var a=this;a.initEditTriggers();a.initCancelTriggers()},initCancelTriggers:Ext.emptyFn,initEditTriggers:function(){var a=this,b=a.view;if(a.triggerEvent==='cellfocus'){a.mon(b,'cellfocus',a.onCellFocus,a)}else {if(a.triggerEvent==='rowfocus'){a.mon(b,'rowfocus',a.onRowFocus,a)}else {if(b.getSelectionModel().isCellModel){b.onCellFocus=a.beforeViewCellFocus.bind(a)}a.mon(b,a.triggerEvent||'cell'+(a.clicksToEdit===1?'click':'dblclick'),a.onCellClick,a)}}a.initAddRemoveHeaderEvents();a.view.getNavigationModel().addKeyBindings({esc:a.onEscKey,defaultEventAction:!1,scope:a})},beforeViewCellFocus:function(a){if(this.view.selModel.keyNavigation||!this.editing||!this.isCellEditable||!this.isCellEditable(a.row,a.columnHeader)){this.view.focusCell.apply(this.view,arguments)}},onRowFocus:function(b,a,c){this.startEdit(a,0)},onCellFocus:function(b,c,a){this.startEdit(a.row,a.column)},onCellClick:function(b,j,g,i,l,k,c){var a=b.ownerGrid,d=b.expanderSelector,f=b.ownerCt.getColumnManager().getHeaderAtIndex(g),h=f.getEditor(i),e;if(this.shouldStartEdit(h)&&(!d||!c.getTarget(d))){a.setActionableMode(!0,c.position)}else {if(a.actionableMode&&b.owns(c.target)&&(e=Ext.Component.from(c,j))&&e.focusable){return}else {if(a.actionableMode){a.setActionableMode(!1)}}}},initAddRemoveHeaderEvents:function(){var a=this,b=a.grid.headerCt;a.mon(b,{scope:a,add:a.onColumnAdd,columnmove:a.onColumnMove,beforedestroy:a.beforeGridHeaderDestroy})},onColumnAdd:function(b,a){this.initFieldAccessors(a)},onColumnMove:Ext.emptyFn,onEscKey:function(b){var a;if(this.editing){a=Ext.getCmp(b.getTarget().getAttribute('componentId'));if(!(a&&a.isPickerField&&a.isExpanded)){b.stopEvent();return this.cancelEdit()}}},beforeEdit:Ext.emptyFn,shouldStartEdit:function(a){return !!a},getEditingContext:function(c,a,l,b){var e=this,g=e.grid,k=(b&&b.grid||g).visibleColumnManager,i=e.grid.lockable?e.grid:e.view,h,f,j,d;if(!i.componentLayoutCounter){i.on({boxready:Ext.Function.bind(e.startEdit,e,[c,a]),single:!0});return}if(e.disabled||e.grid.collapsed||!e.grid.view.isVisible(!0)){return}if(Ext.isNumber(a)){a=k.getHeaderAtIndex(Math.min(a,k.getColumns().length))}if(!a){return}if(a.hidden){a=a.next(':not([hidden])')||a.prev(':not([hidden])')}if(!b){b=a.getView()}g=b.ownerCt;if(Ext.isNumber(c)){f=Math.min(c,b.dataSource.getCount()-1);c=b.dataSource.getAt(f)}else {f=b.dataSource.indexOf(c)}g.ensureVisible(c,{column:l?a:null});h=b.getRow(c);if(!h){return}j=b.getVisibleColumnManager().indexOf(a);if(!c){return}d=(new Ext.grid.CellContext(b)).setAll(b,f,j,c,a);d.grid=g;d.store=b.dataSource;d.field=a.dataIndex;d.value=d.originalValue=c.get(a.dataIndex);d.row=h;d.node=b.getNode(c);d.cell=d.getCell(!0);return d},cancelEdit:function(){var a=this;a.editing=!1;a.fireEvent('canceledit',a,a.context)},completeEdit:function(){var a=this;if(a.editing&&a.validateEdit()){a.fireEvent('edit',a,a.context)}a.context=null;a.editing=!1},validateEdit:function(a){var b=this;return b.fireEvent('validateedit',b,a)!==!1&&!a.cancel}});Ext.define('Ext.grid.plugin.CellEditing',{alias:'plugin.cellediting',extend:Ext.grid.plugin.Editing,restartEvent:null,cachedEditorValue:null,init:function(b){var a=this;b.registerActionable(a);a.callParent(arguments);a.editors=new Ext.util.MixedCollection(!1,function(a){return a.editorId})},beforeGridHeaderDestroy:function(g){var d=this,e=d.grid.getColumnManager().getColumns(),f=e.length,c,a,b;for(c=0;c<f;c++){a=e[c];b=d.editors.getByKey(a.getItemId());if(!b){b=a.editor||a.field}Ext.destroy(b);d.removeFieldAccessors(a)}},onReconfigure:function(c,b,a){if(a){this.destroyEditors()}this.callParent()},destroy:function(){var a=this;a.destroyEditors();if(a.restartEvent){a.restartEvent=a.cachedEditorValue=Ext.destroy(a.restartEvent)}a.callParent()},initCancelTriggers:function(){var a=this,b=a.grid;a.mon(b,{columnresize:a.cancelEdit,columnmove:a.cancelEdit,scope:a})},isCellEditable:function(c,a){var d=this,b=d.getEditingContext(c,a);if(b.view.isVisible(!0)&&b){a=b.column;c=b.record;if(a&&d.getEditor(c,a)){return !0}}},activateCell:function(h,p,q,e){var b=this,f=h.record,m=h.column,j=b.getActiveEditor(),i=b.view,a,g,d,c,n,k,l,o;if(!e&&b.restartEvent!=null){e=!0}if(e){l=b.suspendedEditor&&b.suspendedEditor.context.record;if(l&&f&&l.getId()!==f.getId()){e=!1;b.suspendedEditor.cancelEdit(!0);b.suspendedEditor=b.cachedEditorValue=null}b.restartEvent=Ext.destroy(b.restartEvent)}a=b.getEditingContext(f,m);if(!a||!m.getEditor(f)){return}if(j&&j.editing){i.actionPosition=null;g=a.generation;if(j.completeEdit()===!1){return}if(a.generation===g){a.refresh()}}if(!p){g=a.generation;if(i.actionableMode){i.skipSaveFocusState=!0}o=b.beforeEdit(a)===!1||b.fireEvent('beforeedit',b,a)===!1||a.cancel;i.skipSaveFocusState=!1;if(o){return}if(a.generation===g){a.refresh()}}c=b.getEditor(f,m);if(a.cell!==a.getCell(!0)){a=b.getEditingContext(a.rowIdx,a.colIdx,null,a.view);h.setPosition(a)}if(c){d=Ext.get(a.cell);if(!c.rendered){c.hidden=!0;c.render(d)}else {n=c.el.dom.parentNode;if(n!==d.dom){try{n.removeChild(c.el.dom)}catch(r){}if(c.container&&c.container.dom!==d.dom){c.container.collect()}c.container=d;d.dom.appendChild(c.el.dom,d.dom.firstChild)}}k=a.record.get(a.column.dataIndex);if(k!==a.originalValue){a.value=a.originalValue=k}b.setEditingContext(a);c.startEdit(d,a.value,q&&!Ext.isScrolling||!1,e);if(c.editing){b.setActiveEditor(c);b.setActiveRecord(a.record);b.setActiveColumn(a.column);b.editing=!0;b.scroll=h.view.el.getScroll()}return c.editing}},activateRow:Ext.emptyFn,deactivate:function(){var a=this,f=a.context,e=a.editors.items,g=e.length,b,c,d;for(c=0;c<g;c++){b=e[c];if(!f.view.renderingRows){if(a.suspendedEditor&&!a.restartEvent){a.suspendedEditor.cancelEdit(!0);a.suspendedEditor=a.cachedEditorValue=null}return}if(!a.suspendedEditor){if(b.editing){a.suspendedEditor=b;a.cachedEditorValue=b.getValue();d=function(){var b;if(a.suspendedEditor){b=a.suspendedEditor.context;if(a.view.getNode(b.record)){a.view.ownerGrid.setActionableMode(!0,b);a.suspendedEditor=null}}else {a.restartEvent=Ext.destroy(a.restartEvent);a.cachedEditorValue=null}};a.cancelEdit(b);a.restartEvent=a.view.on({itemadd:d,destroyable:!0})}b.cacheElement(!0)}}},suspend:function(){var b=this,a=b.activeEditor;if(a&&a.editing){b.suspendedEditor=a;b.cachedEditorValue=a.field&&a.field.getValue();b.suspendEvents();a.suspendEvents();a.cancelEdit(!0);a.resumeEvents();b.resumeEvents()}},resume:function(d){var a=this,b=a.activeEditor=a.suspendedEditor,c;if(b){a.suspendEvents();b.suspendEvents();if(b.field&&a.cachedEditorValue!=null){b.field.setValue(a.cachedEditorValue);a.cachedEditorValue=null}c=a.activateCell(d,!0,!0,!0);b.resumeEvents();a.resumeEvents();a.suspendedEditor=null}return c},startEdit:function(b,a){this.startEditByPosition((new Ext.grid.CellContext(this.view)).setPosition(b,a))},completeEdit:function(b){var a=this.getActiveEditor();if(a){a.completeEdit(b)}},setEditingContext:function(a){this.context=a},setActiveEditor:function(a){this.activeEditor=a},getActiveEditor:function(){return this.activeEditor},setActiveColumn:function(a){this.activeColumn=a},getActiveColumn:function(){return this.activeColumn},setActiveRecord:function(a){this.activeRecord=a},getActiveRecord:function(){return this.activeRecord},getEditor:function(b,a){return this.getCachedEditor(a.getItemId(),b,a)},getCachedEditor:function(d,f,b){var c=this,e=c.editors,a=e.getByKey(d);if(!a){a=b.getEditor(f);if(!a){return !1}if(!(a instanceof Ext.grid.CellEditor)){a=Ext.widget(Ext.apply({xtype:'celleditor',floating:!0,editorId:d,field:a},a.editorCfg))}a.field.excludeForm=!0;if(a.column!==b){a.column=b;b.on('removed',c.onColumnRemoved,c)}e.add(a)}a.ownerCmp=c.grid.ownerGrid;if(b.isTreeColumn){a.isForTree=b.isTreeColumn;a.addCls(Ext.baseCSSPrefix+'tree-cell-editor')}a.setGrid(c.grid);a.editingPlugin=c;a.collectContainerElement=!0;return a},onColumnRemoved:function(c){var a=this,b=a.context;if(b&&b.column===c){a.cancelEdit()}c.un('removed',a.onColumnRemoved,a)},setColumnField:function(a,c){var b=this.editors.getByKey(a.getItemId());Ext.destroy(b,a.field);this.editors.removeAtKey(a.getItemId());this.callParent(arguments)},getCell:function(c,b,a){return this.grid.getView().getCell(c,b,a)},onEditComplete:function(h,e,g){var b=this,a=h.context,d,c,f;d=a.view;c=a.record;a.value=e;f=!c.isEqual(e,g);if(f){d.skipSaveFocusState=!0;c.set(a.column.dataIndex,e);d.skipSaveFocusState=!1;a.rowIdx=d.indexOf(c)}if(b.context===a){b.setActiveEditor(null);b.setActiveColumn(null);b.setActiveRecord(null);b.editing=!1}b.fireEvent('edit',b,a)},cancelEdit:function(a){var b=this,c=b.context;if(a&&a.isCellEditor){b.context.value='editedValue' in a?a.editedValue:a.getValue();b.callParent(arguments);if(a.context===c){b.setActiveEditor(null);b.setActiveColumn(null);b.setActiveRecord(null)}else {b.editing=!0}}else {a=b.getActiveEditor();if(a&&a.field){a.cancelEdit()}}},startEditByPosition:function(b){var a=this,e=a.grid.getColumnManager(),d,c=a.getActiveEditor();if(!b.isCellContext){b=(new Ext.grid.CellContext(a.view)).setPosition(b.row,a.grid.getColumnManager().getColumns()[b.column])}d=e.getHeaderIndex(b.column);b.column=e.getVisibleHeaderClosestToIndex(d);if(a.grid.actionableMode){if(a.editing&&b.isEqual(a.context)){return}if(c){c.completeEdit()}}if(a.grid.actionableMode){if(a.activateCell(b)){a.activateRow(a.view.all.item(b.rowIdx,!0));c=a.getEditor(b.record,b.column);if(c){c.field.focus()}}}else {return a.grid.setActionableMode(!0,b)}},destroyEditors:function(){var b=this,a=b.editors;if(a){a.each(Ext.destroy,Ext);a.clear()}}});Ext.define('Ext.grid.plugin.Clipboard',{extend:Ext.plugin.AbstractClipboard,alias:'plugin.clipboard',formats:{cell:{get:'getCells'},html:{get:'getCellData'},raw:{get:'getCellData',put:'putCellData'}},gridListeners:{render:'onCmpReady'},getCellData:function(i,n){var p=this.getCmp(),h=p.getSelectionModel().getSelected(),k=[],o=i==='raw',m=i==='text',d,j,b,c,g,e,a,l,f;if(h){h.eachCell(function(h){e=h.column;f=h.column.getView();a=h.record;if(e.ignoreExport){return}if(g!==a){g=a;k.push(l=[])}c=e.dataIndex;if(o){b=a.data[c]}else {d=f.all.item(h.rowIdx);if(!d){d=Ext.fly(f.createRowElement(a,h.rowIdx))}j=d.dom.querySelector(e.getCellInnerSelector());b=j.innerHTML;if(m){b=Ext.util.Format.stripTags(b)}}l.push(b);if(n&&c){a.set(c,null)}})}return Ext.util.TSV.encode(k,undefined,null)},getCells:function(i,g){var h=this.getCmp(),d=h.getSelectionModel().getSelected(),e=[],b,c,a,f;if(d){d.eachCell(function(d){a=d.record;if(c!==a){c=a;e.push(f={model:a.self,fields:[]})}b=d.column.dataIndex;f.fields.push({name:b,value:a.data[b]});if(g&&b){a.set(b,null)}})}return e},getTextData:function(a,b){return this.getCellData(a,b)},putCellData:function(r,q){var h=Ext.util.TSV.decode(r,undefined,null),i,k=h.length,n=k?h[0].length:0,d,c,b=this.getCmp().getView(),m=b.dataSource.getCount()-1,l=b.getVisibleColumnManager().getColumns().length-1,p=b.getSelectionModel(),g=p.getSelected(),o=b.getNavigationModel(),a=g.startCell||o.getPosition(),e,j,f={};if(!a&&g){g.eachCell(function(b){a=b;return !1})}if(a){a=(new Ext.grid.CellContext(b)).setPosition(a.record,a.column)}else {a=(new Ext.grid.CellContext(b)).setPosition(0,0)}j=a.colIdx;for(d=0;d<k;d++){i=h[d];for(c=0;c<n;c++){e=a.column.dataIndex;if(e){switch(q){case 'raw':f[e]=i[c];break;case 'text':f[e]=i[c];break;case 'html':break;}}if(a.colIdx===l){break}a.setColumn(a.colIdx+1)}a.record.set(f);if(a.rowIdx===m){break}a.setPosition(a.rowIdx+1,j)}},putTextData:function(b,a){this.putCellData(b,a)},getTarget:function(a){return a.body},privates:{validateAction:function(b){var a=this.getCmp().getView();if(a.actionableMode){return !1}}}});Ext.define('Ext.grid.plugin.RowExpander',{extend:Ext.plugin.Abstract,lockableScope:'top',alias:'plugin.rowexpander',columnWidth:24,rowBodyTpl:null,lockedTpl:null,expandOnDblClick:!0,selectRowOnExpand:!1,scrollIntoViewOnExpand:!0,headerWidth:24,bodyBefore:!1,rowBodyTrSelector:'.'+Ext.baseCSSPrefix+'grid-rowbody-tr',rowBodyHiddenCls:Ext.baseCSSPrefix+'grid-row-body-hidden',rowCollapsedCls:Ext.baseCSSPrefix+'grid-row-collapsed',addCollapsedCls:{fn:function(d,a,c){var b=this.rowExpander;if(!b.recordsExpanded[a.record.internalId]){a.itemClasses.push(b.rowCollapsedCls)}this.nextTpl.applyOut(a,d,c)},syncRowHeights:function(a,b){this.rowExpander.syncRowHeights(a,b)},priority:20000},setCmp:function(a){var b=this,c;b.callParent([a]);b.recordsExpanded={};b.rowBodyTpl=Ext.XTemplate.getTpl(b,'rowBodyTpl');c=b.getFeatureConfig(a);if(a.features){a.features=Ext.Array.push(c,a.features)}else {a.features=c}},getFeatureConfig:function(d){var a=this,b=[],c={ftype:'rowbody',rowExpander:a,rowIdCls:a.rowIdCls,bodyBefore:a.bodyBefore,recordsExpanded:a.recordsExpanded,rowBodyHiddenCls:a.rowBodyHiddenCls,rowCollapsedCls:a.rowCollapsedCls,setupRowData:a.getRowBodyFeatureData,setup:a.setup};b.push(Ext.apply({lockableScope:'normal',getRowBodyContents:a.getRowBodyContentsFn(a.rowBodyTpl)},c));if(d.enableLocking){b.push(Ext.apply({lockableScope:'locked',getRowBodyContents:a.lockedTpl?a.getRowBodyContentsFn(a.lockedTpl):function(){return ''}},c))}return b},getRowBodyContentsFn:function(a){var b=this;return function(c){a.owner=b;return a.applyTemplate(c.record.getData())}},init:function(b){var a=this,c=b.lockable&&b,f,d,e;if(c){a.lockedGrid=c.lockedGrid;a.normalGrid=c.normalGrid;d=a.lockedView=a.lockedGrid.getView();e=a.normalView=a.normalGrid.getView()}a.callParent([b]);a.grid=b;f=a.view=b.getView();if(c){a.bindView(d);a.bindView(e);a.addExpander(a.lockedGrid.headerCt.items.getCount()?a.lockedGrid:a.normalGrid);d.addRowTpl(a.addCollapsedCls).rowExpander=e.addRowTpl(a.addCollapsedCls).rowExpander=d.rowExpander=e.rowExpander=a;c.mon(c,{processcolumns:a.onLockableProcessColumns,lockcolumn:a.onColumnLock,unlockcolumn:a.onColumnUnlock,scope:a})}else {a.bindView(f);f.addRowTpl(a.addCollapsedCls).rowExpander=f.rowExpander=a;a.addExpander(b);b.on('beforereconfigure',a.beforeReconfigure,a)}},onItemAdd:function(e,h,f){var c=this,d=c.grid.lockable,g=f.length,b,a;for(a=0;a<g;a++){b=e[a];if(!b.isNonData&&c.recordsExpanded[b.internalId]){if(d){c.grid.syncRowHeightOnNextLayout=!0}return}}},beforeReconfigure:function(f,e,b,d,c){var a=this;if(b){a.expanderColumn=new Ext.grid.column.Column(a.getHeaderConfig());b.unshift(a.expanderColumn)}},onLockableProcessColumns:function(a,b,c){this.addExpander(b.length?a.lockedGrid:a.normalGrid)},addExpander:function(b){var d=this,c=b.getSelectionModel(),a=c.injectCheckbox;d.expanderColumn=b.headerCt.insert(0,d.getHeaderConfig());if(a===0||a==='first'){a=1}c.injectCheckbox=a},getRowBodyFeatureData:function(c,d,b){var a=this;a.self.prototype.setupRowData.apply(a,arguments);b.rowBody=a.getRowBodyContents(b);b.rowBodyCls=a.recordsExpanded[c.internalId]?'':a.rowBodyHiddenCls},bindView:function(c){var a=this,b={itemkeydown:a.onKeyDown,scope:a};if(a.expandOnDblClick){b.itemdblclick=a.onDblClick}if(a.grid.lockable){b.itemadd=a.onItemAdd}c.on(b)},onKeyDown:function(h,f,c,g,e){var d=this,a=e.getKey(),i=h.getNavigationModel().getPosition(),b;if(i){c=Ext.fly(c);b=c.hasCls(d.rowCollapsedCls);if((a===107||a===187&&e.shiftKey)&&b||(a===109||a===189)&&!b){d.toggleRow(g,f)}}},onDblClick:function(c,a,d,b,e){this.toggleRow(b,a)},toggleRow:function(i,l){var a=this,b=a.normalView||a.view,j=b,k=b.getNode(i),h=Ext.fly(k),e,f=h.down(a.rowBodyTrSelector,!0),d=h.hasCls(a.rowCollapsedCls),c=d?'removeCls':'addCls',g=a.grid.lockable&&a.grid;h[c](a.rowCollapsedCls);Ext.fly(f)[c](a.rowBodyHiddenCls);a.recordsExpanded[l.internalId]=d;Ext.suspendLayouts();if(g){j=g.getView();if(a.lockedGrid.isVisible()){b=a.lockedView;b.lockingPartner.updateLayout();e=Ext.fly(b.getNode(i));if(e){e[c](a.rowCollapsedCls);f=e.down(a.rowBodyTrSelector,!0);Ext.fly(f)[c](a.rowBodyHiddenCls)}}g.syncRowHeightOnNextLayout=!0}j.fireEvent(d?'expandbody':'collapsebody',k,l,f);b.refreshSize(!0);Ext.resumeLayouts(!0);if(a.scrollIntoViewOnExpand&&d){a.grid.ensureVisible(i)}},syncRowHeights:function(f,g){var e=this,d=Ext.fly(f).down(e.rowBodyTrSelector),a=Ext.fly(g).down(e.rowBodyTrSelector),b,c;if(a.isVisible()){if((b=d.getHeight())!==(c=a.getHeight())){if(b>c){a.setHeight(b)}else {d.setHeight(c)}}}else {d.dom.style.height=a.dom.style.height=''}},onColumnUnlock:function(a,d){var b=this,c;a=a||b.grid;c=a.lockedGrid.visibleColumnManager.getColumns();if(c.length===1){a.normalGrid.removeCls(Ext.baseCSSPrefix+'grid-hide-row-expander-spacer');a.lockedGrid.addCls(Ext.baseCSSPrefix+'grid-hide-row-expander-spacer');if(c[0]===b.expanderColumn){a.unlock(b.expanderColumn)}else {a.lock(b.expanderColumn,0)}}},onColumnLock:function(a,d){var b=this,c;a=a||b.grid;c=b.lockedGrid.visibleColumnManager.getColumns();if(c.length===1){b.lockedGrid.headerCt.insert(0,b.expanderColumn);a.normalGrid.addCls(Ext.baseCSSPrefix+'grid-hide-row-expander-spacer');a.lockedGrid.removeCls(Ext.baseCSSPrefix+'grid-hide-row-expander-spacer')}},getHeaderConfig:function(){var a=this,b=a.grid.lockable&&a.grid;return {width:a.headerWidth,ignoreExport:!0,lockable:!1,autoLock:!0,sortable:!1,resizable:!1,draggable:!1,hideable:!1,menuDisabled:!0,tdCls:Ext.baseCSSPrefix+'grid-cell-special',innerCls:Ext.baseCSSPrefix+'grid-cell-inner-row-expander',renderer:function(){return '<div class="'+Ext.baseCSSPrefix+'grid-row-expander" role="presentation" tabIndex="0"></div>'},processEvent:function(e,j,h,f,i,b,g){var d=b.pointerType==='touch',c=!!b.getTarget('.'+Ext.baseCSSPrefix+'grid-row-expander');if(e==='click'&&c||e==='keydown'&&b.getKey()===b.SPACE){if(d){h.focus()}a.toggleRow(f,g,b);b.stopSelection=!a.selectRowOnExpand}else {if(b.type==='mousedown'&&!d&&c){b.preventDefault()}}},isLocked:function(){return b&&(b.lockedGrid.isVisible()||this.locked)},editRenderer:function(){return '&#160;'}}}});Ext.define('Ext.theme.triton.grid.plugin.RowExpander',{override:'Ext.grid.plugin.RowExpander',headerWidth:32});Ext.define('Ext.grid.plugin.RowWidget',{extend:Ext.grid.plugin.RowExpander,alias:'plugin.rowwidget',mixins:[Ext.mixin.Identifiable,Ext.mixin.StyleCacher],lockableScope:'top',config:{defaultWidgetUI:{}},widget:null,lockedWidget:null,addCollapsedCls:{fn:function(d,a,c){var b=this.rowExpander;if(!b.recordsExpanded[a.record.internalId]){a.itemClasses.push(b.rowCollapsedCls)}this.nextTpl.applyOut(a,d,c)},priority:20000},setCmp:function(c){var a=this,d,b;a.rowIdCls=Ext.id(null,Ext.baseCSSPrefix+'rowwidget-');a.recordsExpanded={};Ext.plugin.Abstract.prototype.setCmp.apply(a,arguments);b=a.widget;a.widget=b=Ext.apply({},b);if(!b.ui){b.ui=a.getDefaultWidgetUI()[b.xtype]||'default'}if(c.enableLocking&&a.lockedWidget){a.lockedWidget=b=Ext.apply({},a.lockedWidget);if(!b.ui){b.ui=a.getDefaultWidgetUI()[b.xtype]||'default'}}d=a.getFeatureConfig(c);if(c.features){c.features=Ext.Array.push(d,c.features)}else {c.features=d}},getFeatureConfig:function(d){var a=this,b=[],c={ftype:'rowbody',rowExpander:a,doSync:!1,rowIdCls:a.rowIdCls,bodyBefore:a.bodyBefore,recordsExpanded:a.recordsExpanded,rowBodyHiddenCls:a.rowBodyHiddenCls,rowCollapsedCls:a.rowCollapsedCls,setupRowData:a.setupRowData,setup:a.setup,onClick:Ext.emptyFn};b.push(Ext.apply({lockableScope:'normal'},c));if(d.enableLocking){b.push(Ext.apply({lockableScope:'locked'},c))}return b},setupRowData:function(c,d,b){var a=this.rowExpander;a.rowBodyFeature=this;b.rowBodyCls=a.recordsExpanded[c.internalId]?'':a.rowBodyHiddenCls},bindView:function(b){var a=this;a.viewListeners=b.on({refresh:a.onViewRefresh,itemadd:a.onItemAdd,scope:a,destroyable:!0});Ext.override(b,a.viewOverrides)},destroy:function(){var a=this,b=a.getId();a.viewListeners.destroy();if(a.grid.lockable){a.grid.destroyManagedWidgets(b+'-'+a.lockedView.getId());a.grid.destroyManagedWidgets(b+'-'+a.normalView.getId())}else {a.grid.destroyManagedWidgets(b+'-'+a.view.getId())}a.callParent()},privates:{viewOverrides:{handleEvent:function(a){if(a.getTarget('.'+this.rowExpander.rowIdCls,this.body)){return}this.callParent([a])},onFocusEnter:function(a){if(a.event.getTarget('.'+this.rowExpander.rowIdCls,this.body)){return}this.callParent([a])},toggleChildrenTabbability:function(e){var a=this.getTargetEl(),c=this.all,d={skipSelf:!0},f={skipSelf:!0,includeSaved:!1},b;for(b=c.startIndex;b<=c.endIndex;b++){a=Ext.fly(this.getRow(c.item(b)));if(!a){continue}if(e){a.restoreTabbableState(d)}else {a.saveTabbableState(f)}}}},destroyLiveWidget:function(b,a){a.destroy()},destroyFreeWidget:function(a){a.destroy()},onItemAdd:function(e,i,f,g){var b=this,h=f.length,c,a,d=b.grid.lockable;Ext.suspendLayouts();for(c=0;c<h;c++){a=e[c];if(!a.isNonData&&b.recordsExpanded[a.internalId]){if(d){b.grid.syncRowHeightOnNextLayout=!0}b.addWidget(g,a)}}Ext.resumeLayouts(!0)},onViewRefresh:function(e,c){var f=this,d=e.all,b,a;Ext.suspendLayouts();for(b=d.startIndex,a=0;b<=d.endIndex;b++,a++){if(f.recordsExpanded[c[a].internalId]){f.addWidget(e,c[a])}}Ext.resumeLayouts(!0)},returnFalse:function(){return !1},getWidget:function(c,e){var a=this,b,d;if(e){d=a.grid.lockable&&c===a.lockedView?a.lockedWidget:a.widget;if(d){b=a.grid.createManagedWidget(c,a.getId()+'-'+c.getId(),d,e);b.measurer=a;b.ownerLayout=c.componentLayout}}return b},addWidget:function(h,c){var b=this,d,e,a,i=!!b.onWidgetAttach,g=b.isFixedSize,f;if(c.isNonData||!b.recordsExpanded[c.internalId]){return}d=Ext.fly(h.getNode(c).querySelector(b.rowBodyFeature.innerSelector));e=d.getWidth(!0)-d.getPadding('lr');a=b.getWidget(h,c);if(a){if(i){Ext.callback(b.onWidgetAttach,b.scope,[b,a,c],0,b)}f=a.el||a.element;if(f){d.dom.appendChild(f.dom);if(!g&&a.width!==e){a.setWidth(e)}else {a.updateLayout()}a.reattachToBody()}else {if(!g){a.width=e}a.render(d)}a.updateLayout()}return a},toggleRow:function(k,d){var a=this,c=a.normalView||a.view,m=c.getNode(k),j=Ext.fly(m),g,h=j.down(a.rowBodyTrSelector,!0),e=j.hasCls(a.rowCollapsedCls),f=e?'removeCls':'addCls',i=a.grid.lockable&&a.grid,b,l;j[f](a.rowCollapsedCls);Ext.fly(h)[f](a.rowBodyHiddenCls);Ext.suspendLayouts();if(e){a.recordsExpanded[d.internalId]=!0;b=a.addWidget(c,d);l=b.lookupViewModel()}else {delete a.recordsExpanded[d.internalId];b=a.getWidget(c,d)}if(i){if(i.lockedGrid.isVisible()){c=a.lockedView;g=Ext.fly(c.getNode(k));if(g){g[f](a.rowCollapsedCls);h=g.down(a.rowBodyTrSelector,!0);Ext.fly(h)[f](a.rowBodyHiddenCls);if(e&&a.lockedWidget){b=[b,a.addWidget(c,d)]}else {b=[b,a.getWidget(c,d)]}}i.syncRowHeightOnNextLayout=!0}}a.view.fireEvent(e?'expandbody':'collapsebody',m,d,h,b);c.updateLayout();if(l){l.notify()}Ext.resumeLayouts(!0);if(a.scrollIntoViewOnExpand&&e){a.grid.ensureVisible(k)}}}});Ext.define('Ext.grid.selection.Selection',{constructor:function(a){this.view=a.ownerGrid.view}});Ext.define('Ext.grid.selection.Cells',{extend:Ext.grid.selection.Selection,type:'cells',isCells:!0,clone:function(){var a=this,b=new a.self(a.view);if(a.startCell){b.startCell=a.startCell.clone();b.endCell=a.endCell.clone()}return b},contains:function(a){var b;if(!a||!a.isCellContext){return !1}if(this.startCell){b=this.getRowRange();if(a.rowIdx>=b[0]&&a.rowIdx<=b[1]){b=this.getColumnRange();return a.colIdx>=b[0]&&a.colIdx<=b[1]}}return !1},eachRow:function(f,e){var b=this,c=b.getRowRange(),d=new Ext.grid.CellContext(b.view),a;for(a=c[0];a<=c[1];a++){d.setRow(a);if(f.call(e||b,d.record)===!1){return}}},eachColumn:function(f,e){var b=this,c=b.getColumnRange(),d=new Ext.grid.CellContext(b.view),a;for(a=c[0];a<=c[1];a++){d.setColumn(a);if(f.call(e||b,d.column,a)===!1){return}}},eachCell:function(h,g){var c=this,f=c.getRowRange(),e=c.getColumnRange(),d=new Ext.grid.CellContext(c.view),b,a;for(b=f[0];b<=f[1];b++){d.setRow(b);for(a=e[0];a<=e[1];a++){d.setColumn(a);if(h.call(g||c,d,a,b)===!1){return}}}},getFirstRowIndex:function(){return this.startCell?Math.min(this.startCell.rowIdx,this.endCell.rowIdx):0},getLastRowIndex:function(){return this.startCell?Math.max(this.startCell.rowIdx,this.endCell.rowIdx):-1},getFirstColumnIndex:function(){return this.startCell?Math.min(this.startCell.colIdx,this.endCell.colIdx):0},getLastColumnIndex:function(){return this.startCell?Math.max(this.startCell.colIdx,this.endCell.colIdx):-1},privates:{clear:function(){var a=this,b=a.view;if(b.getVisibleColumnManager().getColumns().length){a.eachCell(function(a){b.onCellDeselect(a)})}a.startCell=a.endCell=null},setRangeStart:function(a,b){this.startCell=(this.endCell=a.clone()).clone();this.view.onCellSelect(a)},setRangeEnd:function(n){var f=this,b=f.view,l=b.isLockingView?b.lockedView.all:b.all,g=new Ext.grid.CellContext(b),m=b.getVisibleColumnManager().getColumns().length-1,a,e,i,k,h,j,d,c;f.endCell=n.clone();a=f.getRange();e=f.lastRange||a;i=Math.max(Math.min(a[0][1],e[0][1]),l.startIndex);k=Math.min(Math.max(a[1][1],e[1][1]),l.endIndex);h=Math.min(a[0][0],e[0][0]);j=Math.min(Math.max(a[1][0],e[1][0]),m);for(d=i;d<=k;d++){for(c=h;c<=j;c++){g.setPosition(d,c);if(d<a[0][1]||d>a[1][1]||c<a[0][0]||c>a[1][0]){b.onCellDeselect(g)}else {b.onCellSelect(g)}}}f.lastRange=a},extendRange:function(b){var a=this,c;if(b[b.type]<0){c=a.endCell.clone().setPosition(a.getLastRowIndex(),a.getLastColumnIndex());a.startCell=b.start.clone();a.setRangeEnd(c);a.view.getNavigationModel().setPosition(b.start)}else {a.startCell=a.startCell.setPosition(a.getFirstRowIndex(),a.getFirstColumnIndex());a.setRangeEnd(b.end);a.view.getNavigationModel().setPosition(b.end)}},reduceRange:function(a){var b=this,c;if(a[a.type]<0){c=a.end.clone();b.startCell=a.start.clone();b.setRangeEnd(c);b.view.getNavigationModel().setPosition(a.start)}},getRange:function(){return [[this.getFirstColumnIndex(),this.getFirstRowIndex()],[this.getLastColumnIndex(),this.getLastRowIndex()]]},getRangeSize:function(){return this.getCount()},getCount:function(){var a=this.getRange();return (a[1][0]-a[0][0]+1)*(a[1][1]-a[0][1]+1)},selectAll:function(){var b=this,a=b.view;b.clear();b.setRangeStart((new Ext.grid.CellContext(a)).setPosition(0,0));b.setRangeEnd((new Ext.grid.CellContext(a)).setPosition(a.dataSource.getCount()-1,a.getVisibleColumnManager().getColumns().length-1))},isAllSelected:function(){var b=this.rangeStart,a=this.rangeEnd;if(b){if(!b.colIdx&&!b.rowIdx){return a.colIdx===a.view.getVisibleColumnManager().getColumns().length-1&&a.rowIdx===a.view.dataSource.getCount-1}}return !1},getColumnRange:function(){return [this.getFirstColumnIndex(),this.getLastColumnIndex()]},getLastSelected:function(){return this.view.dataSource.getAt(this.endCell.rowIdx)},getRowRange:function(){return [this.getFirstRowIndex(),this.getLastRowIndex()]},onSelectionFinish:function(){var a=this;if(a.getCount()){a.view.getSelectionModel().onSelectionFinish(a,(new Ext.grid.CellContext(a.view)).setPosition(a.getFirstRowIndex(),a.getFirstColumnIndex()),(new Ext.grid.CellContext(a.view)).setPosition(a.getLastRowIndex(),a.getLastColumnIndex()))}else {a.view.getSelectionModel().onSelectionFinish(a)}}}});Ext.define('Ext.grid.selection.Columns',{extend:Ext.grid.selection.Selection,type:'columns',isColumns:!0,clone:function(){var a=this,c=new a.self(a.view),b=a.selectedColumns;if(b){c.selectedColumns=Ext.Array.slice(b)}return c},eachRow:function(c,b){var a=this.selectedColumns;if(a&&a.length){this.view.dataSource.each(c,b||this)}},eachColumn:function(h,f){var d=this,g=d.view,b=d.selectedColumns,e,a,c=new Ext.grid.CellContext(g);if(b){e=b.length;for(a=0;a<e;a++){c.setColumn(b[a]);if(h.call(f||d,c.column,c.colIdx)===!1){return !1}}}},eachCell:function(h,g){var d=this,e=d.view,c=d.selectedColumns,f,b,a=new Ext.grid.CellContext(e);if(c){f=c.length;e.dataSource.each(function(e){a.setRow(e);for(b=0;b<f;b++){a.setColumn(c[b]);if(h.call(g||d,a,a.colIdx,a.rowIdx)===!1){return !1}}})}},contains:function(b){var a=this.selectedColumns;if(b&&b.isColumn&&a&&a.length){return Ext.Array.contains(a,b)}return !1},getCount:function(){var a=this.selectedColumns;return a?a.length:0},getColumns:function(){return this.selectedColumns||[]},privates:{add:function(a){Ext.Array.include(this.selectedColumns||(this.selectedColumns=[]),a);this.refreshColumns(a)},clear:function(){var a=this,b=a.selectedColumns;if(b&&b.length){a.selectedColumns=[];a.refreshColumns.apply(a,b)}a.setRangeStart(null)},setRangeStart:function(b){var a=this,c=a.getColumns();a.startColumn=b;if(b!=null){a.selectedColumns=[b];c.push(b);a.refreshColumns.apply(a,c)}},setRangeEnd:function(h){var b=this,f=b.getColumns(),e=this.view.ownerGrid.getVisibleColumnManager(),g=e.getColumns(),c=e.indexOf(b.startColumn),d=e.indexOf(h),a;if(d<c){a=c;c=d;d=a}b.selectedColumns=[];for(a=c;a<=d;a++){b.selectedColumns.push(g[a]);f.push(g[a])}b.refreshColumns.apply(b,f)},isAllSelected:function(){var a=this.selectedColumns;return a&&a.length===this.view.ownerGrid.getVisibleColumnManager().getColumns().length},refreshColumns:function(j){var i=this,b=i.view,g=b.all,d,e=arguments,h=e.length,a,c=new Ext.grid.CellContext(b),f=[];if(b.rendered){for(a=0;a<h;a++){f[a]=i.contains(e[a])}for(d=g.startIndex;d<=g.endIndex;d++){c.setRow(d);for(a=0;a<h;a++){c.setColumn(e[a]);if(f[a]){b.onCellSelect(c)}else {b.onCellDeselect(c)}}}}},remove:function(a){if(this.selectedColumns){Ext.Array.remove(this.selectedColumns,a);if(a.getView()&&a.isVisible()){this.refreshColumns(a)}}},selectAll:function(){var a=this;a.clear();a.selectedColumns=a.view.getSelectionModel().lastContiguousColumnRange=a.view.getVisibleColumnManager().getColumns();a.refreshColumns.apply(a,a.selectedColumns)},extendRange:function(b){var c=this,d=c.view.getVisibleColumnManager().getColumns(),a;for(a=b.start.colIdx;a<=b.end.colIdx;a++){c.add(d[a])}},reduceRange:function(c){var b=this,g=b.view.getVisibleColumnManager().getColumns(),f=c.start.colIdx,d=c.end.colIdx,e=Math.abs(f-d)+1,h=b.selectedColumns.length-e,a;for(a=h;a>0;a--){b.remove(g[d+a])}},onSelectionFinish:function(){var a=this,b=a.getContiguousSelection();if(b){a.view.getSelectionModel().onSelectionFinish(a,(new Ext.grid.CellContext(a.view)).setPosition(0,b[0]),(new Ext.grid.CellContext(a.view)).setPosition(a.view.dataSource.getCount()-1,b[1]))}else {a.view.getSelectionModel().onSelectionFinish(a)}},getContiguousSelection:function(){var a=Ext.Array.sort(this.getColumns(),function(a,b){return a.getView().ownerGrid.getVisibleColumnManager().indexOf(a)-b.getView().ownerGrid.getVisibleColumnManager().indexOf(b)}),c=a.length,b;if(c){for(b=1;b<c;b++){if(a[b].getVisibleIndex()!==a[b-1].getVisibleIndex()+1){return !1}}return [a[0],a[c-1]]}}}});Ext.define('Ext.grid.selection.Replicator',{extend:Ext.plugin.Abstract,alias:'plugin.selectionreplicator',init:function(a){this.gridListeners=a.on({beforeselectionextend:this.onBeforeSelectionExtend,scope:this,destroyable:!0})},onBeforeSelectionExtend:function(c,a,b){var d=this.columns=[];a.eachColumn(function(e){d.push(e)});return this.replicateSelection(c,a,b)},replicateSelection:function(w,q,e){if(e.columns||q.isColumns){return}var j=this,n=j.columns,k=q.getFirstRowIndex(),r=q.getLastRowIndex(),u=r-k+1,c=[],h,b,a,f,i,m,o,g,d,p,v,l,s,t;h=n.length;d=n[0].getView().dataSource;if(u===1){i=j.getColumnValues(q.view.dataSource.getAt(k))}else {i=new Array(h);if(e.rows<0){c=[d.getAt(k+1),d.getAt(k)]}else {c=[d.getAt(r-1),d.getAt(r)]}c[0]=j.getColumnValues(c[0]);c[1]=j.getColumnValues(c[1]);for(a=0;a<h;a++){s=c[1][a];t=c[0][a];if(!isNaN(s)&&!isNaN(t)){i[a]=Number(s)-Number(t)}}}if(e.rows<0){m=e.end.rowIdx;o=e.start.rowIdx-1;g=-1}else {m=e.start.rowIdx;o=e.end.rowIdx+1;g=1}if(u===1){for(b=m;b!==o;b+=g){p=d.getAt(b);for(a=0;a<h;a++){f=n[a];if(f.dataIndex){p.set(f.dataIndex,i[a])}}}}else {for(b=m;b!==o;b+=g){p=d.getAt(b);v=j.getColumnValues(d.getAt(b-g));for(a=0;a<h;a++){f=n[a];if(f.dataIndex){l=v[a];if(!isNaN(l)){p.set(f.dataIndex,Ext.coerce(Number(l)+i[a],l))}}}}}},getColumnValues:function(e){var b=this.columns,f=b.length,d=new Array(b.length),a,c;for(a=0;a<f;a++){c=b[a];if(c.dataIndex){d[a]=e.get(c.dataIndex)}}return d},destroy:function(){this.gridListeners=Ext.destroy(this.gridListeners);this.callParent()}});Ext.define('Ext.grid.selection.Rows',{extend:Ext.grid.selection.Selection,type:'rows',isRows:!0,clone:function(){var a=this,b=new a.self(a.view);if(a.selectedRecords){b.selectedRecords=a.selectedRecords.clone()}if(a.rangeStart){b.setRangeStart(a.rangeStart);b.setRangeEnd(a.rangeEnd)}return b},addOne:function(c){var a=this,b;b=a.selectedRecords||(a.selectedRecords=a.createRecordCollection());if(!b.byInternalId.get(c.internalId)){b.add(c);a.view.onRowSelect(c)}},add:function(a){var d=this,b,c;if(a.isModel){d.addOne(a)}else {if(Ext.isArray(a)){for(b=0,c=a.length;b<c;b++){d.addOne(a[b])}}}},removeOne:function(b){var a=this;if(a.selectedRecords&&a.selectedRecords.byInternalId.get(b.internalId)){a.selectedRecords.remove(b);a.view.onRowDeselect(b);a.allSelected=!1;return !0}return !1},remove:function(a){var e=this,d=!0,b,c;if(a.isModel){return e.removeOne(a)}else {if(Ext.isArray(a)){for(b=0,c=a.length;b<c;b++){d&=e.removeOne(a[b])}}}return d},contains:function(a){if(!a||!a.isModel){return !1}var b=this,d=!1,c=b.selectedRecords;if(b.allSelected){b.add(a);return !0}if(c){d=!!c.byInternalId.get(a.internalId)}return d},getCount:function(){var a=this.selectedRecords;return a&&a.length||0},getRecords:function(){var a=this.selectedRecords;return a?a.getRange():[]},selectAll:function(){var a=this,b=a.view.dataSource,c=b.isBufferedStore?b.getData().getCount():b.getCount();a.clear();a.setRangeStart(0);a.setRangeEnd(c-1);a.addRange();a.allSelected=!0},getFirstRowIndex:function(){return this.getCount()?this.view.dataSource.indexOf(this.selectedRecords.first()):0},getLastRowIndex:function(){return this.getCount()?this.view.dataSource.indexOf(this.selectedRecords.last()):-1},eachRow:function(c,b){var a=this.selectedRecords;if(a){a.each(c,b||this)}},eachColumn:function(e,c){var b=this.view.getVisibleColumnManager().getColumns(),d=b.length,a;if(this.selectedRecords){for(a=0;a<d;a++){if(e.call(this||c,b[a],a)===!1){return}}}},eachCell:function(m,k){var c=this,i=c.selectedRecords,l=c.view,f=l.ownerGrid.getVisibleColumnManager().getColumns(),d=!1,h,b,g,a,e,j;if(f){h=f.length;a=new Ext.grid.CellContext(l);if(i){i.each(function(e){a.setRow(e);for(b=0;b<h;b++){a.setColumn(f[b]);if(m.call(k||c,a,a.colIdx,a.rowIdx)===!1){d=!0;return !1}}})}if(!d){e=c.getRange();if(e[0]===e[1]){return}c.view.dataSource.getRange(e[0],e[1],{forRender:!1,callback:function(e){j=e.length;for(b=0;!d&&b<j;b++){a.setRow(e[b]);for(g=0;!d&&g<h;g++){a.setColumn(f[g]);if(m.call(k||c,a,a.colIdx,a.rowIdx)===!1){d=!0}}}}})}}},beginUpdate:function(){var a=this.selectedRecords;if(a){a.beginUpdate()}},endUpdate:function(){var a=this.selectedRecords;if(a){a.endUpdate()}},destroy:function(){this.selectedRecords=Ext.destroy(this.selectedRecords);this.callParent()},privates:{clear:function(){var a=this,b=a.view;a.allSelected=!1;if(a.selectedRecords){a.eachRow(function(a){b.onRowDeselect(a)});a.selectedRecords.clear()}a.setRangeStart(null)},isAllSelected:function(){return !!this.allSelected},setRangeStart:function(a,b){this.allSelected=!1;this.rangeStart=this.rangeEnd=a;if(!b){this.view.onRowSelect(a)}},setRangeEnd:function(g,j){var c=this,f=c.view,k=f.dataSource,i=c.selectedRecords,d,b,e,a,h;c.rangeEnd=g;b=c.getRange();e=c.lastRange||b;a=Math.min(b[0],e[0]);g=Math.max(b[1],e[1]);for(;a<=g;a++){h=k.getAt(a);d=a<b[0]||a>b[1];if(!j&&d){if(i&&c.contains(h)){i.remove(h)}f.onRowDeselect(a)}else {if(j&&d){continue}f.onRowSelect(a)}}c.lastRange=b},extendRange:function(b){var c=this,d=c.view.dataSource,a;for(a=b.start.rowIdx;a<=b.end.rowIdx;a++){c.add(d.getAt(a))}},getLastSelected:function(){var a=this.selectedRecords;return a&&a.last()},getRange:function(){var a=this.rangeStart,b=this.rangeEnd;if(a==null){return [0,-1]}else {if(a<=b){return [a,b]}}return [b,a]},getRangeSize:function(){var a=this.getRange();return a[1]-a[0]+1},createRecordCollection:function(){var a=this.view.dataSource,b=new Ext.util.Collection({rootProperty:'data',extraKeys:{byInternalId:{rootProperty:!1,property:'internalId'}},sorters:[function(b,c){return a.indexOf(b)-a.indexOf(c)}]});return b},addRange:function(){var a=this,c,b;if(a.rangeStart!=null){c=a.getRange();b=a.selectedRecords||(a.selectedRecords=a.createRecordCollection());a.view.dataSource.getRange(c[0],c[1],{forRender:!1,callback:function(a){b.add.apply(b,a)}})}},onSelectionFinish:function(){var a=this,b=a.getContiguousSelection();if(b){a.view.getSelectionModel().onSelectionFinish(a,(new Ext.grid.CellContext(a.view)).setPosition(b[0],0),(new Ext.grid.CellContext(a.view)).setPosition(b[1],a.view.getVisibleColumnManager().getColumns().length-1))}else {a.view.getSelectionModel().onSelectionFinish(a)}},getContiguousSelection:function(){var b=this.view.dataSource,a,d,c;if(this.selectedRecords){a=Ext.Array.sort(this.selectedRecords.getRange(),function(a,c){return b.indexOf(a)-b.indexOf(c)});d=a.length;if(d){for(c=1;c<d;c++){if(b.indexOf(a[c])!==b.indexOf(a[c-1])+1){return !1}}return [b.indexOf(a[0]),b.indexOf(a[d-1])]}}}}});Ext.define('Ext.grid.selection.SelectionExtender',{extend:Ext.dd.DragTracker,maskBox:{},constructor:function(a){var b=this;if(a.view.rendered){b.initSelectionExtender(a)}else {b.view=a.view;a.view.on({render:b.initSelectionExtender,args:[a],scope:b})}},initSelectionExtender:function(b){var a=this,c=Ext.dom.Element.DISPLAY;a.el=b.view.el;a.handle=b.view.ownerGrid.body.createChild({cls:Ext.baseCSSPrefix+'ssm-extender-drag-handle',style:'display:none'}).setVisibilityMode(c);a.handle.on({contextmenu:function(a){a.stopEvent()}});a.mask=a.el.createChild({cls:Ext.baseCSSPrefix+'ssm-extender-mask',style:'display:none'}).setVisibilityMode(c);a.superclass.constructor.call(a,b);a.mask.skipGarbageCollection=a.handle.skipGarbageCollection=!0;a.viewListeners=a.view.on({scroll:a.onViewScroll,scope:a,destroyable:!0});a.gridListeners=a.view.ownerGrid.on({columnResize:a.alignHandle,scope:a,destroyable:!0});a.extendX=!!(a.axes&1);a.extendY=!!(a.axes&2)},setHandle:function(c,b){var a=this;if(!a.view.rendered){a.view.on({render:a.initSelectionExtender,args:[c,b],scope:a});return}a.firstPos=c;a.lastPos=b;if(c&&b&&c.getCell(!0)&&b.getCell(!0)){if(a.curPos){a.curPos.setPosition(b)}else {a.curPos=b.clone()}a.alignHandle()}else {a.disable()}},alignHandle:function(){var a=this,e=a.firstPos&&a.firstPos.getCell(!0),b=a.lastPos&&a.lastPos.getCell(!0),d=a.handle,c;if(e&&b){a.enable();d.alignTo(b,'c-br');c=a.isHandleWithinView(Ext.fly(b).up('.x-grid-view'));d.setVisible(c)}else {a.disable()}},isHandleWithinView:function(d){var e=this,b=d.getBox(),a=e.handle.getBox(),c;c=b.left<=a.left&&b.right>=a.right-a.width;return c},enable:function(){this.handle.show();this.callParent()},disable:function(){this.handle.hide();this.mask.hide();this.callParent()},onDrag:function(d){if(d.target===this.mask.dom){this.mask.hide();d.target=document.elementFromPoint.apply(document,d.getXY());this.mask.show()}var a=this,f=a.view,h=f.el.getY(),g=f.el.getX(),e=d.getTarget(a.view.getCellSelector()),c=a.scrollTask||(a.scrollTask=Ext.util.TaskManager.newTask({run:a.doAutoScroll,scope:a,interval:10})),b=a.scrollBy||(a.scrollBy=[]);if(!a.el.contains(d.target)){b[0]=b[1]=0;return c.stop()}if(a.lastXY[1]>h+f.el.getHeight(!0)-15){if(a.extendY){b[1]=3;c.start()}}else {if(a.lastXY[1]<h+10){if(a.extendY){b[1]=-3;c.start()}}else {if(a.lastXY[0]>g+f.el.getWidth(!0)-15){if(a.extendX){b[0]=3;c.start()}}else {if(a.lastXY[0]<g+10){if(a.extendX){b[0]=-3;c.start()}}else {b[0]=b[1]=0;c.stop()}}}}if(e&&e!==a.lastOverCell){a.lastOverCell=e;a.syncMaskOnCell(e)}},doAutoScroll:function(){var b=this,c=b.view,a;c.scrollBy.apply(c,b.scrollBy);a=document.elementFromPoint.apply(document,b.lastXY);if(a){a=Ext.fly(a).up(c.cellSelector);if(a&&a!==b.lastOverCell){b.lastOverCell=a;b.syncMaskOnCell(a)}}},onEnd:function(b){var a=this;if(a.scrollTask){a.scrollTask.stop()}if(a.extensionDescriptor){a.disable();a.view.getSelectionModel().extendSelection(a.extensionDescriptor)}},onViewScroll:function(){var a=this;if(a.active&&a.lastOverCell){a.syncMaskOnCell(a.lastOverCell)}if(a.firstPos){a.alignHandle()}},syncMaskOnCell:function(e){var a=this,f=a.view,i=f.all,d=a.curPos,c=a.maskBox,b,j=a.firstPos.clone(),k=a.lastPos.clone(),g=a.firstPos.clone(),h=a.lastPos.clone(),l=!a.allowReduceSelection;j.setRow(Math.min(Math.max(j.rowIdx,i.startIndex),i.endIndex));k.setRow(Math.min(Math.max(k.rowIdx,i.startIndex),i.endIndex));a.selectionRegion=b=j.getCell().getRegion().union(k.getCell().getRegion());d.setPosition(f.getRecord(e),f.getHeaderByCell(e));e=Ext.fly(e);a.mask.dom.style.borderTopWidth=a.mask.dom.style.borderRightWidth=a.mask.dom.style.borderBottomWidth=a.mask.dom.style.borderLeftWidth='';if(d.rowIdx<a.firstPos.rowIdx&&a.extendY){a.extensionDescriptor={type:'rows',start:g.setRow(d.rowIdx),end:h.setRow(a.firstPos.rowIdx-1),rows:d.rowIdx-a.firstPos.rowIdx,mousePosition:a.lastXY};a.mask.dom.style.borderBottomWidth='0';c.x=b.x;c.y=e.getY();c.width=b.right-b.left;c.height=b.top-e.getY()}else {if(d.rowIdx>a.lastPos.rowIdx&&a.extendY){a.extensionDescriptor={type:'rows',start:g.setRow(a.lastPos.rowIdx+1),end:h.setRow(d.rowIdx),rows:d.rowIdx-a.lastPos.rowIdx,mousePosition:a.lastXY};a.mask.dom.style.borderTopWidth='0';c.x=b.x;c.y=b.bottom;c.width=b.right-b.left;c.height=e.getRegion().bottom-b.bottom}else {if(!l&&d.rowIdx<a.lastPos.rowIdx&&a.extendY&&d.colIdx===a.lastPos.colIdx){a.extensionDescriptor={type:'rows',start:g.setRow(a.firstPos.rowIdx),end:h.setRow(d.rowIdx),rows:-1,mousePosition:a.lastXY,reduce:!0};a.mask.dom.style.borderTopWidth='0';c.x=b.x;c.y=b.top;c.width=b.right-b.left;c.height=e.getRegion().bottom-b.top}else {if(d.colIdx<a.firstPos.colIdx&&a.extendX){a.extensionDescriptor={type:'columns',start:g.setColumn(d.colIdx),end:h.setColumn(a.firstPos.colIdx-1),columns:d.colIdx-a.firstPos.colIdx,mousePosition:a.lastXY};a.mask.dom.style.borderRightWidth='0';c.x=e.getX();c.y=b.top;c.width=b.left-e.getRegion().left;c.height=b.bottom-b.top}else {if(d.colIdx>a.lastPos.colIdx&&a.extendX){a.extensionDescriptor={type:'columns',start:g.setColumn(a.lastPos.colIdx+1),end:h.setColumn(d.colIdx),columns:d.colIdx-a.lastPos.colIdx,mousePosition:a.lastXY};a.mask.dom.style.borderLeftWidth='0';c.x=b.right;c.y=b.top;c.width=e.getRegion().right-b.right;c.height=b.bottom-b.top}else {if(!l&&d.colIdx<a.lastPos.colIdx&&a.extendX){a.extensionDescriptor={type:'columns',start:g.setColumn(a.firstPos.colIdx),end:h.setColumn(d.colIdx),columns:-1,mousePosition:a.lastXY,reduce:!0};a.mask.dom.style.borderLeftWidth='0';c.x=b.left;c.y=b.top;c.width=e.getRegion().right-b.left;c.height=b.bottom-b.top}else {a.extensionDescriptor=null}}}}}}if(f.ownerGrid.hasListeners.selectionextenderdrag){f.ownerGrid.fireEvent('selectionextenderdrag',f.ownerGrid,f.getSelectionModel().getSelected(),a.extensionDescriptor)}if(a.extensionDescriptor){a.mask.show();a.mask.setBox(c)}else {a.mask.hide()}},destroy:function(){var a=this;Ext.destroy(a.gridListeners,a.viewListeners,a.mask,a.handle);a.callParent()}});Ext.define('Ext.grid.selection.SpreadsheetModel',{extend:Ext.selection.Model,alias:'selection.spreadsheet',isSpreadsheetModel:!0,config:{columnSelect:{$value:!1,lazy:!0},cellSelect:{$value:!0,lazy:!0},rowSelect:{$value:!0,lazy:!0},dragSelect:{$value:!0,lazy:!0},selected:null,extensible:{$value:!0,lazy:!0},reducible:!0},checkboxSelect:!1,checkboxColumnIndex:0,showHeaderCheckbox:!0,checkColumnHeaderText:null,checkboxHeaderWidth:24,rowNumbererHeaderWidth:46,columnSelectCls:Ext.baseCSSPrefix+'ssm-column-select',rowNumbererHeaderCls:Ext.baseCSSPrefix+'ssm-row-numberer-hd',tdCls:Ext.baseCSSPrefix+'grid-cell-special '+Ext.baseCSSPrefix+'selmodel-column',bindComponent:function(b){var a=this,d,c,e;if(a.view!==b){if(a.view){a.navigationModel=null;Ext.destroy(a.viewListeners,a.navigationListeners)}a.view=b;if(b){a.getCellSelect();e=b.ownerGrid.lockedGrid;if(e){a.hasLockedHeader=!0;a.onViewCreated(e,e.getView())}else {b.grid.on({viewcreated:a.onViewCreated,scope:a,single:!0})}a.gridListeners=b.ownerGrid.on({columnschanged:a.onColumnsChanged,columnmove:a.onColumnMove,scope:a,destroyable:!0});c=a.getStoreListeners();c.scope=a;c.destroyable=!0;a.storeListeners=a.store.on(c);d=a.getViewListeners();d.scope=a;d.destroyable=!0;a.viewListeners=b.on(d);a.navigationModel=b.getNavigationModel();a.navigationListeners=a.navigationModel.on({navigate:a.onNavigate,scope:a,destroyable:!0});if(a.getColumnSelect()){b.ownerGrid.addCls(a.columnSelectCls)}a.updateHeaderState()}}},getCheckboxHeaderConfig:function(){var a=this,b=a.showHeaderCheckbox!==!1;return {xtype:'checkcolumn',isCheckerHd:b,headerCheckbox:b,ignoreExport:!0,text:a.checkColumnHeaderText,clickTargetName:'el',width:a.checkboxHeaderWidth,sortable:!1,draggable:!1,resizable:!1,hideable:!1,menuDisabled:!0,tdCls:a.tdCls,cls:Ext.baseCSSPrefix+'selmodel-column',stopSelection:!1,editRenderer:a.editRenderer||a.renderEmpty,locked:a.hasLockedHeader,updateHeaderState:a.updateHeaderState.bind(a),toggleAll:Ext.emptyFn,setRecordCheck:Ext.emptyFn,isRecordChecked:Ext.emptyFn}},renderEmpty:function(){return '\xa0'},getStoreListeners:function(){var b=this,a=b.callParent();a.priority=2000;a.refresh=b.onStoreChanged;a.clear=b.onStoreChanged;return a},onHeaderClick:function(f,c,d){var a=this,b=a.selected,e=!1;if(c===a.numbererColumn||c===a.checkColumn){d.stopEvent();if(!b||!b.isAllSelected()){a.selectAll()}else {a.deselectAll()}a.updateHeaderState();a.lastColumnSelected=null}else {if(a.columnSelect){if(d.shiftKey&&b&&b.lastColumnSelected){b.setRangeEnd(c);a.fireSelectionChange()}else {e=a.isColumnSelected(c);if(b){if(!d.ctrlKey){b.clear();a.updateSelectionExtender()}else {if(e){a.deselectColumn(c);a.selected.lastColumnSelected=null}}}if(!e||!d.ctrlKey&&d.pointerType!=='touch'){a.selectColumn(c,d.ctrlKey);b=a.selected;b.lastColumnSelected=c;if(!b.startColumn){b.startColumn=c}}}a.lastOverColumn=c}}},selectByPosition:function(a){var b=this;a=(new Ext.grid.CellContext(b.view)).setPosition(a.row,a.column);if(b.getCellSelect()){b.selectCells(a,a)}else {if(b.getRowSelect()){this.select(a.record)}else {if(b.getColumnSelect()){b.selectColumn(a.column)}}}},updateHeaderState:function(){var b=this,e=b.view.dataSource,g=b.views,a=b.selected,d=!1,f=b.checkColumn,c;if(e&&a&&a.isRows){c=e.getCount();if(e.isBufferedStore){d=a.allSelected}else {d=c>0&&c===a.getCount()}}if(g&&g.length){if(f){f.setHeaderStatus(d)}}},onBindStore:function(c,b,a){if(!a){this.onStoreRefresh()}},onBeforeReconfigure:function(g,f,c,e,d){var a=this,b=a.checkboxColumnIndex;if(c){Ext.suspendLayouts();if(a.numbererColumn){a.numbererColumn.ownerCt.remove(a.numbererColumn,!1);c.unshift(a.numbererColumn)}if(a.checkColumn){if(b==='first'){b=0}else {if(b==='last'){b=c.length}}a.checkColumn.ownerCt.remove(a.checkColumn,!1);Ext.Array.insert(c,b,[a.checkColumn])}Ext.resumeLayouts()}},getCellContext:function(b,a){return (new Ext.grid.CellContext(this.view.ownerGrid.getView())).setPosition(b,a)},select:function(d,j,i){var c=this,b=c.selected,g=c.view,k=g.dataSource,h,e,a,f=!1;if(!b||!b.isRows){c.resetSelection(!0);b=c.selected=new Ext.grid.selection.Rows(g)}else {if(!j){b.clear()}}if(!Ext.isArray(d)){d=[d]}h=d.length;for(e=0;e<h;e++){a=d[e];if(typeof a==='number'){a=k.getAt(a)}if(!b.contains(a)){b.add(a);f=!0}}if(f){c.updateHeaderState();if(!i){c.fireSelectionChange()}}},deselect:function(a,h){var c=this,f=c.selected,i=c.view.dataSource,g,d,b,e=!1;if(f&&f.isRows){if(!Ext.isArray(a)){a=[a]}g=a.length;for(d=0;d<g;d++){b=a[d];if(typeof b==='number'){b=i.getAt(b)}f.remove(b);if(!e){e=!0}}}if(e){c.updateHeaderState();if(!h){c.fireSelectionChange()}}},selectCells:function(a,b,f){var c=this,e=c.view.ownerGrid.view,d;a=a.isCellContext?a.clone():(new Ext.grid.CellContext(e)).setPosition(a);b=b.isCellContext?b.clone():(new Ext.grid.CellContext(e)).setPosition(b);c.resetSelection(!0);c.selected=d=new Ext.grid.selection.Cells(a.view);d.setRangeStart(a);d.setRangeEnd(b);if(!f){c.fireSelectionChange()}},selectAll:function(e){var a=this,b=a.selected,c,d=a.view;if(a.rowSelect){if(!b||!b.isRows){a.resetSelection(!0);a.selected=b=new Ext.grid.selection.Rows(d)}c=!0}else {if(a.cellSelect){if(!b||!b.isCells){a.resetSelection(!0);a.selected=b=new Ext.grid.selection.Cells(d)}c=!0}else {if(a.columnSelect){if(!b||!b.isColumns){a.resetSelection(!0);a.selected=b=new Ext.grid.selection.Columns(d)}c=!0}}}if(b){b.allSelected=!0}if(c){a.updateHeaderState();b.selectAll();if(!e){a.fireSelectionChange()}}},deselectAll:function(c){var b=this,a=b.selected;if(a&&a.getCount()){a.clear();a.allSelected=!1;b.updateHeaderState();if(!c){b.fireSelectionChange()}}},selectRows:function(c,f,g){var b=this,a=b.selected,e=a&&a.isRows,h=c.length,d;if(!f||!e){b.resetSelection(!0)}if(!e){b.selected=a=new Ext.grid.selection.Rows(b.view)}if(c.isEntity){a.add(c)}else {for(d=0;d<h;d++){a.add(c[d])}}if(!g){b.fireSelectionChange()}},isSelected:function(a){return this.isRowSelected(a)},selectColumn:function(c,e,f){var b=this,a=b.selected,d=c.getView();if(!a||!a.isColumns||a.view!==d.ownerGrid.view){b.resetSelection(!0);b.selected=a=new Ext.grid.selection.Columns(d)}if(!a.contains(c)){if(!e){a.clear()}a.add(c);b.updateHeaderState();if(!f){b.fireSelectionChange()}}},deselectColumn:function(c,d){var b=this,a=b.getSelected();if(a&&a.isColumns&&a.contains(c)){a.remove(c);b.updateHeaderState();if(!d){b.fireSelectionChange()}}},getSelection:function(){var a=this.selected;if(a&&a.isRows){return a.getRecords()}return []},destroy:function(){var a=this,b=a.scrollEls;Ext.destroy(a.gridListeners,a.viewListeners,a.selected,a.navigationListeners,a.extensible);if(b){Ext.dd.ScrollManager.unregister(b)}if(a._onMouseUp&&!a._onMouseUp.destroyed){a.stopAutoScroller();a._onMouseUp.destroy()}a.selected=a.gridListeners=a.viewListeners=a.selectionData=a.navigationListeners=a.scrollEls=null;a.callParent()},privates:{axesConfigs:{x:1,y:2,xy:3,both:3,'true':3},getNumbererColumnConfig:function(){var a=this;return {xtype:'rownumberer',width:a.rowNumbererHeaderWidth,editRenderer:a.renderEmpty,tdCls:a.rowNumbererTdCls,cls:a.rowNumbererHeaderCls,locked:a.hasLockedHeader}},getViewListeners:function(){return {refresh:this.onViewRefresh,keyup:{element:'el',fn:this.onViewKeyUp,scope:this}}},onViewKeyUp:function(b){var a=this.selected;if(b.keyCode===b.SHIFT&&a&&a.isRows&&a.getRangeSize()){a.addRange()}},onStoreChanged:function(){var a=this,b=a.selected;if(b){if(b.isCells){a.resetSelection()}else {if(b.isRows){if(a.pruneRemoved===!1&&b.selectedRecords.length){a.refresh()}else {a.resetSelection()}}}}},onColumnsChanged:function(){var a=this,b=a.onViewChanged(a.view,!0);Ext.on('idle',b?a.fireSelectionChange:a.updateSelectionExtender,a,{single:!0})},onColumnMove:function(){this.updateSelectionExtender()},onViewRefresh:function(c){var a=this,b=a.onViewChanged(c);a[b?'fireSelectionChange':'updateSelectionExtender']()},resetSelection:function(b){var a=this.selected;if(a){a.clear();if(!b){this.fireSelectionChange()}}},onViewChanged:function(b,k){var e=this,a=e.selected,j=b.store,c=!1,i,h,f,g,d;if(a){b=a.view;if(k){if(a.isCells){d=new Ext.grid.CellContext(b);i=a.getRowRange();h=b.ownerGrid.getColumnManager().getColumns().length;if(h){for(g=i[0];g<=i[1];g++){d.setRow(g);for(f=0;f<h;f++){d.setColumn(f);if(d.column){b.onCellDeselect(d)}if(e.maybeClearSelection(d)){c=!0}}}}else {e.clearSelections();c=!0}}else {if(a.isColumns){c=!1;a.eachColumn(function(a,d){if(!a.isVisible()||!b.ownerGrid.isAncestor(a)){e.remove(a);if(e.maybeClearSelection({column:a})){c=!0}}})}}}else {if(a.isRows&&j.isFiltered()){a.eachRow(function(a){if(!j.contains(a)){this.remove(a);if(e.maybeClearSelection({rowIdx:b.indexOf(a)})){c=!0}}})}}}return c},onViewCreated:function(e,b){var a=this,c=b.ownerGrid,d=b.headerCt;if(!c.lockable||b.isLockedView){if(a.getRowSelect()){a.getNumbererColumn()}if(a.checkboxSelect){a.addCheckbox(b,!0)}a.mon(b.ownerGrid,'beforereconfigure',a.onBeforeReconfigure,a)}d.sortOnClick=!a.getColumnSelect();if(a.getDragSelect()){b.on('render',a.onViewRender,a,{single:!0})}},onViewRender:function(b){var a=this,d=b.getEl(),e=a.views,f=e.length,c;for(c=0;c<f;c++){e[c].headerCt.sortOnClick=!a.columnSelect}d.ddScrollConfig={vthresh:50,hthresh:50,frequency:300,increment:100};Ext.dd.ScrollManager.register(d);(a.scrollEls||(a.scrollEls=[])).push(d);b.on('cellmousedown',a.handleMouseDown,a);if(b.lockingPartner){b.lockingPartner.on('cellmousedown',a.handleMouseDown,a)}},handleMouseDown:function(g,m,k,j,n,l,c){var b=this,a=b.selected,h=c.position.column,e=!1,f,i,d;if(c.button||c.altKey||c.pointerType==='touch'||!h){return}b.mousedownPosition=c.position.clone();f=h===b.checkColumn;if(f){b.checkCellClicked=c.position.getCell(!0)}else {if(g.actionableMode){return}}if(h===b.numbererColumn||f||!b.cellSelect){if(b.rowSelect){if(a){d=a.contains(j);if(c.shiftKey&&d){e=!0}else {if(!c.shiftKey&&!c.ctrlKey&&!f){a.clear()}}}if(!a||!a.isRows){if(a){a.clear()}a=b.selected=new Ext.grid.selection.Rows(g)}}else {if(b.columnSelect){if(a){d=a.contains(b.mousedownPosition.column);if(c.shiftKey&&d){e=!0}else {if(!c.shiftKey&&!c.ctrlKey&&!f){a.clear()}}}if(!a||!a.isColumns){if(a){a.clear()}a=b.selected=new Ext.grid.selection.Columns(g)}}else {return !1}}}else {if(a){d=a.contains(b.getCellContext(j,k));if(c.shiftKey&&d){e=!0}else {if(!c.shiftKey){a.clear()}}}if(!a||!a.isCells){if(a){a.clear()}a=b.selected=new Ext.grid.selection.Cells(g)}}i=e||!c.shiftKey;if(!e){if(c.shiftKey){return}b.lastOverRecord=b.lastOverColumn=null}b._onMouseUp=Ext.getBody().on('mouseup',b.onMouseUp,b,{single:!0,view:a.view,destroyable:!0});if(i){a.view.el.on('mousemove',b.onMouseMove,b,{view:a.view})}},onMouseMove:function(c,h,f){var a=this,b=f.view,d=c.getTarget(b.cellSelector),e=f.view.getHeaderByCell(d),g=a.selected;if(b.isLockingView){b=c.within(b.lockedView.el)?b.lockedView:b.normalView}if(a.checkCellClicked){if(d===a.checkCellClicked){if(!a.lastOverRecord){a.lastOverRecord=b.getRecord(d.parentNode)}return}else {a.checkCellClicked=null;if(a.lastOverRecord){a.select(a.lastOverRecord);g.setRangeStart(a.store.indexOf(a.lastOverRecord))}}}a.isDragging=!0;if(a.extensible){a.extensible.disable()}if(e){a.changeSelectionRange(b,d,e,c)}else {if(!c.within(b.body.el)){a.scrollTowardsPointer(c,b.ownerGrid.view)}}},changeSelectionRange:function(i,j,f,k){var a=this,b=a.selected,c,h,e,d,g;a.stopAutoScroller();c=i.getRecord(j.parentNode);h=a.store.indexOf(c);e=c!==a.lastOverRecord;d=f!==a.lastOverColumn;if(e||d){g=a.getCellContext(c,f)}if(b.isRows){if(e){if(a.lastOverRecord){b.setRangeEnd(h,k.ctrlKey)}else {b.setRangeStart(h)}}}else {if(b.isCells){if(e||d){if(a.lastOverRecord){b.setRangeEnd(g)}else {b.setRangeStart(g)}}}else {if(b.isColumns){if(d){if(a.lastOverColumn){b.setRangeEnd(g.column)}else {b.setRangeStart(g.column)}}}}}if(e||d){i.getNavigationModel().setPosition((new Ext.grid.CellContext(f.getView())).setPosition(c,f))}a.lastOverColumn=f;a.lastOverRecord=c},scrollTowardsPointer:function(g,f){var b=this,d=f.el.getConstrainRegion(),e=g.getXY(),c,a;c=b.scrollTask||(b.scrollTask=Ext.util.TaskManager.newTask({run:b.doAutoScroll,args:[g,f],scope:b,interval:10}));a=b.scrollBy||(b.scrollBy=[]);if(e[1]>d.bottom){a[0]=0;a[1]=3;c.start()}else {if(e[1]<d.top){a[0]=0;a[1]=-3;c.start()}else {if(e[0]>d.right){a[0]=3;a[1]=0;c.start()}else {if(e[0]<d.left){a[0]=-3;a[1]=0;c.start()}}}}},doAutoScroll:function(g,c){var a=this,e=c.el.getConstrainRegion(),d=[],b,h,f;if(a.destroyed){return}if(c.scrollBy){c.scrollBy.apply(c,a.scrollBy)}if(a.scrollBy[0]){d[0]=a.scrollBy[0]>0?e.right-5:e.left+5}else {d[0]=g.getX()}if(a.scrollBy[1]){d[1]=a.scrollBy[1]>0?e.bottom-5:e.top+5}else {d[1]=g.getY()}b=document.elementFromPoint.apply(document,d);if(b){b=Ext.fly(b).up(c.cellSelector);if(!b){a.stopAutoScroller();return}h=c.getRecord(b.dom.parentNode);f=c.getHeaderByCell(b.dom);if(b&&(h!==a.lastOverRecord||f!==a.lastOverColumn)){a.changeSelectionRange(c,b.dom,f,g)}}},stopAutoScroller:function(){var a=this;if(a.scrollTask){a.scrollBy[0]=a.scrollBy[1]=0;a.scrollTask.stop();a.scrollTask=null}},onMouseUp:function(c,i,h){var a=this,b=h.view,g=a.lastOverRecord&&(new Ext.grid.CellContext(b)).setPosition(a.lastOverRecord,a.lastOverColumn),e=g&&!g.isEqual(a.mousedownPosition),d,f;a.checkCellClicked=null;a.stopAutoScroller();if(b&&!b.destroyed){if(!c.position){d=c.getTarget(b.cellSelector);if(d){f=b.getRecord(d);if(f){c.position=(new Ext.grid.CellContext(b)).setPosition(f,b.getHeaderByCell(d))}}}if(c.position){e=!c.position.isEqual(a.mousedownPosition)}if(a.extensible&&e){a.extensible.disable()}b.el.un('mousemove',a.onMouseMove,a);if(a.selected.isRows&&a.isDragging){a.selected.addRange()}if(e){a.fireSelectionChange()}}a.isDragging=!1},addCheckbox:function(d,e){var b=this,a=b.checkboxColumnIndex,c=d.headerCt;if(a!==!1){if(a==='first'){a=0}else {if(a==='last'){a=c.getColumnCount()}}b.checkColumn=c.add(a,b.getCheckboxHeaderConfig())}if(e!==!0){d.refresh()}},onNavigate:function(f){var b=this,e=f.view&&f.view.ownerGrid.view,h=f.record,a=b.selected,c=e&&(new Ext.grid.CellContext(e)).setPosition(h,f.column),d=f.keyEvent,i=d.ctrlKey,m=d.shiftKey,k=d.getKey(),g,j,l;if(!c){return}if(d.stopSelection){return}if(i&&(k===d.UP||k===d.LEFT||k===d.RIGHT||k===d.DOWN)){return}if(a&&(a.isCells||a.isColumns&&!b.getRowSelect()&&!i)&&a.getCount()>1){if(m&&d.type==='click'&&!d.position.isEqual(b.mousedownPosition)){return}}if(!(b.cellSelect||b.columnSelect||b.rowSelect)||!f.record||d.type==='mousedown'){return}if(i&&d.keyCode===d.A){if(!a||a.getCount()<2){b.selectAll()}else {b.deselectAll()}b.updateHeaderState();return}if(m){if(c.column===b.numbererColumn||c.column===b.checkColumn||!(b.cellSelect||b.columnSelect)||a&&a.isRows){if(b.rowSelect){if(!a||!a.isRows||a.view!==e){b.resetSelection(!0);a=b.selected=new Ext.grid.selection.Rows(e)}if(!a.getRangeSize()){j=f.previousRecordIndex;if(j==null){l=b.getLastSelected();j=l?b.store.indexOf(l):0}a.setRangeStart(j)}a.setRangeEnd(f.recordIndex);a.addRange();g=!0}}else {if(b.cellSelect){if(!a||!a.isCells||a.view!==e){b.resetSelection(!0);a=b.selected=new Ext.grid.selection.Cells(e)}if(!a.getRangeSize()){a.setRangeStart(f.previousPosition||b.getCellContext(0,0))}a.setRangeEnd(c);g=!0}else {if(b.columnSelect){if(!a||!a.isColumns||a.view!==e){b.resetSelection(!0);a=b.selected=new Ext.grid.selection.Columns(e)}if(!a.getCount()){a.setRangeStart(c.column)}a.setRangeEnd(f.position.column);g=!0}}}}else {if(c.column===b.numbererColumn||c.column===b.checkColumn||b.rowSelect&&!b.cellSelect){if(!a||!a.isRows||a.view!==e){b.resetSelection(!0);a=b.selected=new Ext.grid.selection.Rows(e)}if(i||c.column===b.checkColumn){if(a.contains(h)){a.remove(h)}else {a.add(h)}}else {a.clear();a.add(h);a.setRangeStart(c.rowIdx,!0)}g=!0}else {if(d.getTarget(b.view.getCellSelector())){if(b.cellSelect){if(!a||!a.isCells||a.view!==e){b.resetSelection(!0);b.selected=a=new Ext.grid.selection.Cells(e)}else {a.clear()}a.setRangeStart(c);g=!0}else {if(b.columnSelect){if(!a||!a.isColumns||a.view!==e){b.resetSelection(!0);b.selected=a=new Ext.grid.selection.Columns(e)}if(i){if(a.contains(c.column)){a.remove(c.column)}else {a.add(c.column)}}else {a.setRangeStart(c.column)}g=!0}}}}}if(g){if(a.isRows){b.updateHeaderState()}b.lastOverRecord=h;b.lastOverColumn=c.column;b.fireSelectionChange()}},maybeClearSelection:function(d){var i=this,c=i.selected,a=c.startCell,b=c.endCell,g=d.column,f=d.colIdx,h=d.rowIdx,e;if(a&&(a.column===g||a.colIdx===f)&&a.rowIdx===h){c.startCell=e=null}if(b&&(b.column===g||b.colIdx===f)&&b.rowIdx===h){c.endCell=e=null}return e===null},isRowSelected:function(a){var c=this,b=c.selected;if(b&&b.isRows){a=Ext.isNumber(a)?c.store.getAt(a):a;return b.contains(a)}else {return !1}},isColumnSelected:function(b){var c=this,a=c.selected;if(a&&a.isColumns){return a.contains(b)}else {return !1}},isCellSelected:function(c,e,a){var f=this,d,b=f.selected;c=c.ownerGrid.view;if(b){if(b.isColumns){if(typeof a==='number'){a=c.getVisibleColumnManager().getColumns()[a]}return b.contains(a)}if(b.isCells){d=(new Ext.grid.CellContext(c)).setPosition({row:e,column:a});return b.contains(d)}}return !1},applySelected:function(a){return a},updateSelected:function(a,g){var b,e,f,d,c;if(g){g.clear()}if(a&&a.getCount()){b=a.view;if(a.isRows){a.eachRow(b.onRowSelect,b)}else {if(a.isColumns){e=a.getColumns();f=e.length;if(f){c=new Ext.grid.CelContext(b);b.store.each(function(h){c.setRow(h);for(d=0;d<f;d++){c.setColumn(e[d]);b.onCellSelect(c)}})}}else {if(a.isCells){a.eachCell(b.onCellSelect,b)}}}}},getNumbererColumn:function(d){var b=this,c=b.numbererColumn,a=b.view;if(!c){if(a.isNormalView){a=a.ownerGrid.lockedGrid}c=b.numbererColumn=a.headerCt.down('rownumberer')||a.headerCt.add(0,b.getNumbererColumnConfig())}return c},updateRowSelect:function(c){var a=this,b=a.selected,d=a.view;if(d&&d.rendered){if(c){if(a.checkColumn){a.checkColumn.show()}a.getNumbererColumn().show()}else {if(a.checkColumn){a.checkColumn.hide()}if(a.numbererColumn){a.numbererColumn.hide()}}if(!c&&b&&b.isRows){b.clear();a.fireSelectionChange()}}},updateColumnSelect:function(c){var a=this,e=a.selected,d=a.views,f=d?d.length:0,b;for(b=0;b<f;b++){d[b].headerCt.sortOnClick=!c}if(!c&&e&&e.isColumns){e.clear();a.fireSelectionChange()}if(c){a.view.ownerGrid.addCls(a.columnSelectCls)}else {a.view.ownerGrid.removeCls(a.columnSelectCls)}},updateCellSelect:function(c){var b=this,a=b.selected;if(!c&&a&&a.isCells){a.clear();b.fireSelectionChange()}},fireSelectionChange:function(){var a=this,b=a.selected,g=b.view,f=g.ownerGrid,e=g.dataSource,c,d;a.updateSelectionExtender();if(b.isRows){c=b.getRecords();d=e.getTotalCount()||e.getCount();a.selected.allSelected=!!(e.isBufferedStore?a.selected.allSelected:d&&c.length&&d===c.length);a.fireEvent('selectionchange',a,c)}else {if(b.isCells){a.selected.allSelected=!1;a.fireEvent('selectionchange',a,b.getCount()?a.store.getRange.apply(b.view.dataSource,b.getRowRange()):[])}}f.fireEvent('selectionchange',f,b)},getLastSelected:function(){var a=this.selected;if(a.getLastSelected){return a.getLastSelected()}},updateSelectionExtender:function(){var a=this.selected;if(a){a.onSelectionFinish()}},onSelectionFinish:function(d,b,c){var a=this.getExtensible();if(a){a.setHandle(b,c)}},applyExtensible:function(a){var b=this;if(!a){return undefined}if(a===!0||typeof a==='string'){a={axes:b.axesConfigs[a]}}else {a=Ext.Object.chain(a)}a.allowReduceSelection=b.getReducible();a.view=b.selected.view;return new Ext.grid.selection.SelectionExtender(a)},applyReducible:function(a){return !!a},updateReducible:function(b){var a=this.extensible;if(a){a.allowReduceSelection=b}},extendSelection:function(b){var a=this,c=a.selected,d=b.reduce?'reduce':'extend';if(a.view.ownerGrid.fireEvent('beforeselectionextend',a.view.ownerGrid,c,b)!==!1){c[d+'Range'](b);a.fireSelectionChange()}},onIdChanged:function(e,c,b,d){var a=this.selected;if(a&&a.isRows&&a.selectedRecords){a.selectedRecords.updateKey(c,b)}},onPageAdd:function(h,g,e){var c=this.selected,f=e.length,d,b,a=c&&c.selectedRecords;if(a&&c.isRows){for(d=0;d<f;d++){b=e[d];if(a.get(b.id)){a.replace(b)}else {if(c.allSelected){a.add(b)}}}}},refresh:function(){var a=this.getSelected();if(a&&a.isRows){this.callParent()}},onStoreAdd:function(){var a=this.getSelected();if(a&&a.isRows){this.callParent(arguments);this.updateHeaderState()}},onStoreClear:function(){this.resetSelection()},onStoreLoad:function(){var a=this.getSelected();if(a&&a.isRows){this.callParent(arguments);this.updateHeaderState()}},onStoreRefresh:function(){var a=this.selected;if(a&&a.isRows&&a.selectedRecords){this.updateSelectedInstances(a.selectedRecords)}if(this.view){this.updateHeaderState()}},onPageRemove:function(d,c,b){var a=this.selected;if(!(a&&a.allSelected)){this.onStoreRemove(this.store,b)}},onStoreRemove:function(){var a=this.getSelected();if(a&&a.isRows){this.callParent(arguments)}}}},function(a){var b=Ext.ClassManager.get('Ext.grid.column.RowNumberer');if(b){a.prototype.rowNumbererTdCls=Ext.grid.column.RowNumberer.prototype.tdCls+' '+Ext.baseCSSPrefix+'ssm-row-numberer-cell'}});Ext.define('Ext.theme.triton.grid.selection.SpreadsheetModel',{override:'Ext.grid.selection.SpreadsheetModel',checkboxHeaderWidth:32});Ext.define('Ext.util.Queue',{constructor:function(){this.clear()},add:function(b,e){var a=this,c=a.getKey(b),d;if(!(d=a.map[c])){++a.length;a.items.push(b);a.map[c]=b}else {if(e){a.map[c]=b;a.items[Ext.Array.indexOf(a.items,d)]=b}}return b},clear:function(){var a=this,b=a.items;a.items=[];a.map={};a.length=0;return b},contains:function(b){var a=this.getKey(b);return this.map.hasOwnProperty(a)},getCount:function(){return this.length},getKey:function(a){return a.id},remove:function(b){var a=this,e=a.getKey(b),d=a.items,c;if(a.map[e]){c=Ext.Array.indexOf(d,b);Ext.Array.erase(d,c,1);delete a.map[e];--a.length}return b}});Ext.define('Ext.layout.ContextItem',{heightModel:null,widthModel:null,sizeModel:null,optOut:!1,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:!0,isContextItem:!0,isTopLevel:!1,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:!1,constructor:function(s){var a=this,o=Ext.layout.SizeModel.sizeModels,l=o.configured,g=o.shrinkWrap,r,c,f,d,k,i,b,p,m,q,n,h,e,j;Ext.apply(a,s);b=a.target;r=a.el;a.id=b.id;a.flushedProps={};a.props=k={};a.styles={};if(!b.isComponent){c=r.lastBox}else {a.wrapsComponent=!0;a.framing=b.frameSize||null;a.isComponentChild=b.ownerLayout&&b.ownerLayout.isComponentLayout;c=b.lastBox;f=b.ownerCt;if(f&&(d=f.el&&a.context.items[f.el.id])){a.ownerCtContext=d}a.sizeModel=i=b.getSizeModel(d&&d.widthModel.pairsByHeightOrdinal[d.heightModel.ordinal]);a.widthModel=h=i.width;a.heightModel=e=i.height;if(c&&c.invalid===!1){q=b.width===(p=c.width);n=b.height===(m=c.height);if(h===g&&e===g){j=!0}else {if(h===l&&q){j=e===g||e===l&&n}}if(j){a.optOut=!0;k.width=p;k.height=m}}}a.lastBox=c},init:function(r,i){var a=this,c=a.props,e=a.dirty,b=a.ownerCtContext,h=a.target.ownerLayout,j=!a.state,s=r||j,n,l,t,q,k,d,o=a.heightModel,p=a.widthModel,f,g,m=0;a.dirty=a.invalid=!1;a.props={};a.remainingChildDimensions=0;if(a.boxChildren){a.boxChildren.length=0}if(!j){a.clearAllBlocks('blocks');a.clearAllBlocks('domBlocks')}if(!a.wrapsComponent){return s}d=a.target;a.state={};if(j){if(d.beforeLayout&&d.beforeLayout!==Ext.emptyFn){d.beforeLayout()}if(!b&&(q=d.ownerCt)){b=a.context.items[q.el.id]}if(b){a.ownerCtContext=b;a.isBoxParent=h&&h.isItemBoxParent(a)}else {a.isTopLevel=!0}a.frameBodyContext=a.getEl('frameBody')}else {b=a.ownerCtContext;a.isTopLevel=!b;n=a.children;for(l=0,t=n.length;l<t;++l){n[l].init(!0)}}a.hasRawContent=!(d.isContainer&&d.items.items.length>0);if(r){a.widthModel=a.heightModel=null;k=d.getSizeModel(b&&b.widthModel.pairsByHeightOrdinal[b.heightModel.ordinal]);if(j){a.sizeModel=k}a.widthModel=k.width;a.heightModel=k.height;if(b&&!a.isComponentChild){if(h.needsItemSize||!d.liquidLayout){b.remainingChildDimensions+=2}else {if(a.widthModel.calculated){++b.remainingChildDimensions}if(a.heightModel.calculated){++b.remainingChildDimensions}}}}else {if(c){a.recoverProp('x',c,e);a.recoverProp('y',c,e);if(a.widthModel.calculated){a.recoverProp('width',c,e)}else {if('width' in c){++m}}if(a.heightModel.calculated){a.recoverProp('height',c,e)}else {if('height' in c){++m}}if(b&&!a.isComponentChild){b.remainingChildDimensions+=m}}}if(c&&h&&h.manageMargins){a.recoverProp('margin-top',c,e);a.recoverProp('margin-right',c,e);a.recoverProp('margin-bottom',c,e);a.recoverProp('margin-left',c,e)}if(i){f=i.heightModel;g=i.widthModel;if(g&&f&&p&&o){if(p.shrinkWrap&&o.shrinkWrap){if(g.constrainedMax&&f.constrainedMin){f=null}}}if(g){a.widthModel=g}if(f){a.heightModel=f}if(i.state){Ext.apply(a.state,i.state)}}return s},initContinue:function(f){var b=this,a=b.ownerCtContext,g=b.target,c=b.widthModel,e=g.getInherited(),d;if(c.fixed){e.inShrinkWrapTable=!1}else {delete e.inShrinkWrapTable}if(f){if(a&&c.shrinkWrap){d=a.isBoxParent?a:a.boxParent;if(d){d.addBoxChild(b)}}else {if(c.natural){b.boxParent=a}}}return f},initDone:function(d){var a=this,b=a.props,c=a.state;if(a.remainingChildDimensions===0){b.containerChildrenSizeDone=!0}if(d){b.containerLayoutDone=!0}if(a.boxChildren&&a.boxChildren.length&&a.widthModel.shrinkWrap){a.el.setWidth(10000);c.blocks=(c.blocks||0)+1}},initAnimation:function(){var a=this,b=a.target,c=a.ownerCtContext;if(c&&c.isTopLevel){a.animatePolicy=b.ownerLayout.getAnimatePolicy(a)}else {if(!c&&b.isCollapsingOrExpanding&&b.animCollapse){a.animatePolicy=b.componentLayout.getAnimatePolicy(a)}}if(a.animatePolicy){a.context.queueAnimation(a)}},addBlock:function(f,a,e){var b=this,d=b[f]||(b[f]={}),c=d[e]||(d[e]={});if(!c[a.id]){c[a.id]=a;++a.blockCount;++b.context.blockCount}},addBoxChild:function(a){var d=this,b,c=a.widthModel;a.boxParent=this;a.measuresBox=c.shrinkWrap?a.hasRawContent:c.natural;if(a.measuresBox){b=d.boxChildren;if(b){b.push(a)}else {d.boxChildren=[a]}}},addPositionStyles:function(b,c){var d=c.x,e=c.y,a=0;if(d!==undefined){b[this.translateProps.x]=d+'px';++a}if(e!==undefined){b.top=e+'px';++a}return a},addTrigger:function(c,e){var b=this,h=e?'domTriggers':'triggers',f=b[h]||(b[h]={}),g=b.context,a=g.currentLayout,d=f[c]||(f[c]={});if(!d[a.id]){d[a.id]=a;++a.triggerCount;d=g.triggers[e?'dom':'data'];(d[a.id]||(d[a.id]=[])).push({item:this,prop:c});if(b.props[c]!==undefined){if(!e||!(b.dirty&&c in b.dirty)){++a.firedTriggers}}}},boxChildMeasured:function(){var a=this,b=a.state,c=b.boxesMeasured=(b.boxesMeasured||0)+1;if(c===a.boxChildren.length){b.clearBoxWidth=1;++a.context.progressCount;a.markDirty()}},borderNames:['border-top-width','border-right-width','border-bottom-width','border-left-width'],marginNames:['margin-top','margin-right','margin-bottom','margin-left'],paddingNames:['padding-top','padding-right','padding-bottom','padding-left'],trblNames:['top','right','bottom','left'],cacheMissHandlers:{borderInfo:function(b){var a=b.getStyles(b.borderNames,b.trblNames);a.width=a.left+a.right;a.height=a.top+a.bottom;return a},marginInfo:function(b){var a=b.getStyles(b.marginNames,b.trblNames);a.width=a.left+a.right;a.height=a.top+a.bottom;return a},paddingInfo:function(b){var c=b.frameBodyContext||b,a=c.getStyles(b.paddingNames,b.trblNames);a.width=a.left+a.right;a.height=a.top+a.bottom;return a}},checkCache:function(a){return this.cacheMissHandlers[a](this)},clearAllBlocks:function(c){var a=this[c],b;if(a){for(b in a){this.clearBlocks(c,b)}}},clearBlocks:function(g,f){var c=this[g],b=c&&c[f],d,a,e;if(b){delete c[f];d=this.context;for(e in b){a=b[e];--d.blockCount;if(!--a.blockCount&&!a.pending&&!a.done){d.queueLayout(a)}}}},block:function(b,a){this.addBlock('blocks',b,a)},domBlock:function(b,a){this.addBlock('domBlocks',b,a)},fireTriggers:function(g,e){var c=this[g],b=c&&c[e],f=this.context,a,d;if(b){for(d in b){a=b[d];++a.firedTriggers;if(!a.done&&!a.blockCount&&!a.pending){f.queueLayout(a)}}}},flush:function(){var a=this,d=a.dirty,b=a.state,c=a.el;a.dirtyCount=0;if('attributes' in a){c.set(a.attributes);delete a.attributes}if('innerHTML' in a){c.innerHTML=a.innerHTML;delete a.innerHTML}if(b&&b.clearBoxWidth){b.clearBoxWidth=0;a.el.setStyle('width',null);if(!--b.blocks){a.context.queueItemLayouts(a)}}if(d){delete a.dirty;a.writeProps(d,!0)}},flushAnimations:function(){var b=this,m=b.previousSize,a,j,i,n,g,d,h,f,o,c,k,e,l;if(m){a=b.target;i=a.getAnimationProps();n=i.duration;g=Ext.Object.getKeys(b.animatePolicy);d=Ext.apply({},{from:{},to:{},duration:n||Ext.fx.Anim.prototype.duration},i);for(h=0,f=0,o=g.length;f<o;f++){c=g[f];k=m[c];e=b.peek(c);if(k!==e&&e!=null){c=b.translateProps[c]||c;d.from[c]=k;d.to[c]=e;++h}}if(h){if(b.isCollapsingOrExpanding===1){a.componentLayout.undoLayout(b)}else {b.writeProps(d.from)}b.el.animate(d);j=Ext.fx.Manager.getFxQueue(b.el.id);d=j[j.length-1];a.$layoutAnim=d;d.on({afteranimate:function(){var c;delete a.$layoutAnim;if(a.destroying||a.destroyed){return}c=b.isCollapsingOrExpanding;if(c===1){a.componentLayout.redoLayout(b);a.afterCollapse(!0)}else {if(c===2){a.afterExpand(!0)}}if(a.hasListeners.afterlayoutanimation){a.fireEvent('afterlayoutanimation',a)}}})}else {l=b.isCollapsingOrExpanding;if(l===1){a.afterCollapse(!0)}else {if(l===2){a.afterExpand(!0)}}}}},getBorderInfo:function(){var b=this,a=b.borderInfo;if(!a){b.borderInfo=a=b.checkCache('borderInfo')}return a},getEl:function(b,f){var d=this,c,a,e;if(b){if(b.dom){a=b}else {c=d.target;if(f){c=f}a=c[b];if(typeof a==='function'){a=a.call(c);if(a===d.el){return this}}}if(a){e=d.context.getEl(d,a)}}return e||null},getFrameInfo:function(){var c=this,d=c.frameInfo,a,b;if(!d){a=c.framing;b=c.getBorderInfo();c.frameInfo=d=a?{top:a.top+b.top,right:a.right+b.right,bottom:a.bottom+b.bottom,left:a.left+b.left,width:a.width+b.width,height:a.height+b.height}:b}return d},getMarginInfo:function(){var b=this,a=b.marginInfo,c,f,d,e;if(!a){if(!b.wrapsComponent){a=b.checkCache('marginInfo')}else {c=b.target;d=c.ownerLayout;e=d?d.id:null;f=d&&d.manageMargins;a=c.margin$;if(a&&a.ownerId!==e){a=null}if(!a){a=b.parseMargins(c,c.margin)||b.checkCache('marginInfo');if(f){b.setProp('margin-top',0);b.setProp('margin-right',0);b.setProp('margin-bottom',0);b.setProp('margin-left',0)}a.ownerId=e;c.margin$=a}a.width=a.left+a.right;a.height=a.top+a.bottom}b.marginInfo=a}return a},clearMarginCache:function(){delete this.marginInfo;delete this.target.margin$},getPaddingInfo:function(){var b=this,a=b.paddingInfo;if(!a){b.paddingInfo=a=b.checkCache('paddingInfo')}return a},getProp:function(a){var b=this,c=b.props[a];b.addTrigger(a);return c},getDomProp:function(b){var a=this,c=a.dirty&&b in a.dirty?undefined:a.props[b];a.addTrigger(b,!0);return c},getStyle:function(b){var e=this,c=e.styles,d,a;if(b in c){a=c[b]}else {d=e.styleInfo[b];a=e.el.getStyle(b);if(d&&d.parseInt){a=parseInt(a,10)||0}c[b]=a}return a},getStyles:function(f,e){var l=this,i=l.styles,j={},h=0,o=f.length,a,b,d,c,k,m,n,g;e=e||f;for(a=0;a<o;++a){c=f[a];if(c in i){j[e[a]]=i[c];++h;if(a&&h===1){b=f.slice(0,a);d=e.slice(0,a)}}else {if(h){(b||(b=[])).push(c);(d||(d=[])).push(e[a])}}}if(h<o){b=b||f;d=d||e;m=l.styleInfo;n=l.el.getStyle(b);for(a=b.length;a--;){c=b[a];k=m[c];g=n[c];if(k&&k.parseInt){g=parseInt(g,10)||0}j[d[a]]=g;i[c]=g}}return j},hasProp:function(a){return this.getProp(a)!=null},hasDomProp:function(a){return this.getDomProp(a)!=null},invalidate:function(a){this.context.queueInvalidate(this,a)},markDirty:function(){if(++this.dirtyCount===1){this.context.queueFlush(this)}},onBoxMeasured:function(){var a=this.boxParent,b=this.state;if(a&&a.widthModel.shrinkWrap&&!b.boxMeasured&&this.measuresBox){b.boxMeasured=1;a.boxChildMeasured()}},parseMargins:function(d,a){var c,b;if(a===!0){a=5}c=typeof a;if(c==='string'||c==='number'){b=d.parseBox(a)}else {if(a){b={top:0,right:0,bottom:0,left:0};if(a){a=Ext.apply(b,d.parseBox(a))}}}return b},peek:function(a){return this.props[a]},recalculateSizeModel:function(){var a=this,e=a.target,b=e.componentLayout,c=a.ownerCtContext,f=b.ownerContext,d;b.ownerContext=null;a.sizeModel=d=e.getSizeModel(c&&c.widthModel.pairsByHeightOrdinal[c.heightModel.ordinal]);a.widthModel=d.width;a.heightModel=d.height;if(f){b.ownerContext=a}},recoverProp:function(a,d,b){var c=this,f=c.props,e;if(a in d){f[a]=d[a];if(b&&a in b){e=c.dirty||(c.dirty={});e[a]=b[a]}}},redo:function(e){var c=this,b,d,a;c.revertProps(c.props);if(e&&c.wrapsComponent){if(c.childItems){for(a=0,b=c.childItems,d=b.length;a<d;a++){b[a].redo(e)}}for(a=0,b=c.children,d=b.length;a<d;a++){b[a].redo()}}},removeEl:function(b,e){var d=this,c,a;if(b){if(b.dom){a=b}else {c=d.target;if(e){c=e}a=c[b];if(typeof a==='function'){a=a.call(c);if(a===d.el){return this}}}if(a){d.context.removeEl(a,d)}}},revertProps:function(c){var a,d=this.flushedProps,b={};for(a in c){if(d.hasOwnProperty(a)){b[a]=c[a]}}this.writeProps(b)},setAttribute:function(c,b){var a=this;if(!a.attributes){a.attributes={}}a.attributes[c]=b;a.markDirty()},setBox:function(a){var b=this;if('left' in a){b.setProp('x',a.left)}if('top' in a){b.setProp('y',a.top)}b.setSize(a.width,a.height)},setContentHeight:function(b,a){if(!a&&this.hasRawContent){return 1}return this.setProp('contentHeight',b)},setContentWidth:function(b,a){if(!a&&this.hasRawContent){return 1}return this.setProp('contentWidth',b)},setContentSize:function(c,b,a){return this.setContentWidth(c,a)+this.setContentHeight(b,a)===2},setProp:function(b,c,f){var a=this,d=typeof c,e;if(d==='undefined'||d==='number'&&isNaN(c)){return 0}if(a.props[b]===c){return 1}a.props[b]=c;++a.context.progressCount;if(f===!1){a.fireTriggers('domTriggers',b);a.clearBlocks('domBlocks',b)}else {e=a.styleInfo[b];if(e){if(!a.dirty){a.dirty={}}a.dirty[b]=c;a.markDirty()}}a.fireTriggers('triggers',b);a.clearBlocks('blocks',b);return 1},setHeight:function(b,e){var a=this,h=a.target,c=a.ownerCtContext,d,f,i,g,j;if(b<0){b=0}if(!a.wrapsComponent){if(!a.setProp('height',b,e)){return NaN}}else {i=a.collapsedVert?0:h.minHeight||0;b=Ext.Number.constrain(b,i,h.maxHeight);g=a.props.height;if(!a.setProp('height',b,e)){return NaN}if(c&&!a.isComponentChild&&isNaN(g)){j=--c.remainingChildDimensions;if(!j){c.setProp('containerChildrenSizeDone',!0)}}d=a.frameBodyContext;if(d){f=a.getFrameInfo();d[a.el.vertical?'setWidth':'setHeight'](b-f.height,e)}}return b},setWidth:function(b,e){var a=this,h=a.target,c=a.ownerCtContext,d,f,i,g,j;if(b<0){b=0}if(!a.wrapsComponent){if(!a.setProp('width',b,e)){return NaN}}else {i=a.collapsedHorz?0:h.minWidth||0;b=Ext.Number.constrain(b,i,h.maxWidth);g=a.props.width;if(!a.setProp('width',b,e)){return NaN}if(c&&!a.isComponentChild&&isNaN(g)){j=--c.remainingChildDimensions;if(!j){c.setProp('containerChildrenSizeDone',!0)}}d=a.frameBodyContext;if(d){f=a.getFrameInfo();d.setWidth(b-f.width,e)}}return b},setSize:function(c,b,a){this.setWidth(c,a);this.setHeight(b,a)},translateProps:{x:'left',y:'top'},undo:function(e){var c=this,b,d,a;c.revertProps(c.lastBox);if(e&&c.wrapsComponent){if(c.childItems){for(a=0,b=c.childItems,d=b.length;a<d;a++){b[a].undo(e)}}for(a=0,b=c.children,d=b.length;a<d;a++){b[a].undo()}}},unsetProp:function(a){var b=this.dirty;delete this.props[a];if(b){delete b[a]}},writeProps:function(a,t){if(!(a&&typeof a==='object')){return}var b=this,r=b.el,j=b.target,s=b.styleInfo,e={},k=a.width,i=a.height,g=0,h,c,m,o,n,f,l,q,p,d;if('displayed' in a){r.setDisplayed(a.displayed)}for(c in a){if(t){b.fireTriggers('domTriggers',c);b.clearBlocks('domBlocks',c);b.flushedProps[c]=1}h=s[c];if(h&&h.dom){if(h.suffix&&(m=parseInt(a[c],10))){e[c]=m+h.suffix}else {e[c]=a[c]}++g}}if('x' in a||'y' in a){if(j.isComponent){j.setPosition(a.x,a.y)}else {g+=b.addPositionStyles(e,a)}}if('overflowX' in a){d=j.getScrollable();if(d){d.setX(a.overflowX)}}if('overflowY' in a){if(d||(d=j.getScrollable())){d.setY(a.overflowY)}}if(b.wrapsComponent&&Ext.isIE9){if((o=k!==undefined&&b.hasOverflowY)||(n=i!==undefined&&b.hasOverflowX)){f=b.isAbsolute;if(f===undefined){f=!1;p=b.target.getTargetEl();q=p.getStyle('position');b.isAbsolute=f=q==='absolute'}if(f){l=Ext.scrollbar.size();if(o){k=parseInt(k,10)+l.width;e.width=k+'px';++g}if(n){i=parseInt(i,10)+l.height;e.height=i+'px';++g}}}}if(g){r.setStyle(e)}}},function(){var a={dom:!0,parseInt:!0,suffix:'px'},c={dom:!0},b={dom:!1};this.prototype.styleInfo={containerChildrenSizeDone:b,containerLayoutDone:b,displayed:b,done:b,x:b,y:b,columnsChanged:b,rowHeights:b,viewOverflowY:b,overflowX:b,overflowY:b,left:a,top:a,right:a,bottom:a,width:a,height:a,'border-top-width':a,'border-right-width':a,'border-bottom-width':a,'border-left-width':a,'margin-top':a,'margin-right':a,'margin-bottom':a,'margin-left':a,'padding-top':a,'padding-right':a,'padding-bottom':a,'padding-left':a,'line-height':c,display:c,clear:c}});Ext.define('Ext.layout.Context',{remainingLayouts:0,state:0,cycleWatchDog:200,constructor:function(b){var a=this;Ext.apply(a,b);a.items={};a.layouts={};a.blockCount=0;a.cycleCount=0;a.flushCount=0;a.calcCount=0;a.animateQueue=a.newQueue();a.completionQueue=a.newQueue();a.finalizeQueue=a.newQueue();a.finishQueue=a.newQueue();a.flushQueue=a.newQueue();a.invalidateData={};a.layoutQueue=a.newQueue();a.invalidQueue=[];a.triggers={data:{},dom:{}}},callLayout:function(a,b){this.currentLayout=a;a[b](this.getCmp(a.owner))},cancelComponent:function(a,p,o){var b=this,l=a,n=!a.isComponent,q=n?l.length:1,e,f,j,d,c,m,h,i,k,g;for(e=0;e<q;++e){if(n){a=l[e]}if(o){if(a.ownerCt){g=this.items[a.ownerCt.el.id];if(g){Ext.Array.remove(g.childItems,b.getCmp(a))}}else {if(a.rendered){b.removeEl(a.el)}}}if(!p){h=b.invalidQueue;j=h.length;if(j){b.invalidQueue=m=[];for(f=0;f<j;++f){i=h[f];k=i.item.target;if(k!==a&&!k.up(a)){m.push(i)}}}}c=a.componentLayout;b.cancelLayout(c);if(!a.destroying){if(c.getLayoutItems){d=c.getLayoutItems();if(d.length){b.cancelComponent(d,!0)}}if(a.isContainer&&!a.collapsed){c=a.layout;b.cancelLayout(c);d=c.getVisibleItems();if(d.length){b.cancelComponent(d,!0)}}}}},cancelLayout:function(a){var b=this;b.completionQueue.remove(a);b.finalizeQueue.remove(a);b.finishQueue.remove(a);b.layoutQueue.remove(a);if(a.running){b.layoutDone(a)}a.ownerContext=null},clearTriggers:function(h,f){var g=h.id,a=this.triggers[f?'dom':'data'],c=a&&a[g],i=c&&c.length||0,b,e,d;for(b=0;b<i;++b){d=c[b];e=d.item;a=f?e.domTriggers:e.triggers;delete a[d.prop][g]}},flush:function(){var d=this,c=d.flushQueue.clear(),b=c.length,a;if(b){++d.flushCount;for(a=0;a<b;++a){c[a].flush()}}},flushAnimations:function(){var d=this,b=d.animateQueue.clear(),c=b.length,a;if(c){for(a=0;a<c;a++){if(b[a].target.animate!==!1){b[a].flushAnimations()}}Ext.fx.Manager.runner()}},flushInvalidates:function(){var b=this,f=b.invalidQueue,g=f&&f.length,a,d,e,c;b.invalidQueue=[];if(g){d=[];for(c=0;c<g;++c){a=(e=f[c]).item.target;if(!a.container.isDetachedBody){d.push(a);if(e.options){b.invalidateData[a.id]=e.options}}}b.invalidate(d,null)}},flushLayouts:function(d,g,h){var a=this,e=h?a[d].items:a[d].clear(),f=e.length,b,c;if(f){for(b=0;b<f;++b){c=e[b];if(!c.running){a.callLayout(c,g)}}a.currentLayout=null}},getCmp:function(a){return this.getItem(a,a.el)},getEl:function(a,c){var b=this.getItem(c,c,a);if(!b.parent){b.parent=a;if(a.children.length){a.children.push(b)}else {a.children=[b]}}return b},getItem:function(f,c,e){var d=c.id,a=this.items,b;b=a[d]||(a[d]=new Ext.layout.ContextItem({context:this,target:f,el:c,componentContext:e}));return b},handleFailure:function(){var a=this.layouts,b,c;Ext.failedLayouts=(Ext.failedLayouts||0)+1;for(c in a){b=a[c];if(a.hasOwnProperty(c)){b.running=!1;b.ownerContext=null}}},invalidate:function(i,q){var d=this,o=!i.isComponent,l,h,m,k,c,a,g,p,e,b,f,n,j;for(k=0,p=o?i.length:1;k<p;++k){c=o?i[k]:i;if(c.rendered&&!c.hidden){h=c.ownerLayout;e=c.componentLayout;j=!1;if((!h||!h.needsItemSize)&&c.liquidLayout){j=!0}if(!j||h&&h.setsItemSize){a=d.getCmp(c);m=!a.state;b=c.isContainer&&!c.collapsed?c.layout:null;f=d.invalidateData[a.id];delete d.invalidateData[a.id];n=a.init(q,f)}if(j){continue}if(f){d.processInvalidate(f,a,'before')}if(e.beforeLayoutCycle){e.beforeLayoutCycle(a)}if(b&&b.beforeLayoutCycle){b.beforeLayoutCycle(a)}n=a.initContinue(n);l=!0;if(e.getLayoutItems){e.renderChildren();g=e.getLayoutItems();if(g.length){d.invalidate(g,!0)}}if(b){l=!1;b.renderChildren();if(b.needsItemSize||b.activeItemCount){g=b.getVisibleItems();if(g.length){d.invalidate(g,!0)}}}a.initDone(l);d.resetLayout(e,a,m);if(b){d.resetLayout(b,a,m)}a.initAnimation();if(f){d.processInvalidate(f,a,'after')}}}d.currentLayout=null},isDescendant:function(b,c){var a;if(b.isContainer){for(a=c.ownerCt;a;a=a.ownerCt){if(a===b){return !0}}}return !1},layoutDone:function(b){var a=b.ownerContext;b.running=!1;if(b.isComponentLayout){if(a.measuresBox){a.onBoxMeasured()}a.setProp('done',!0)}else {a.setProp('containerLayoutDone',!0)}--this.remainingLayouts;++this.progressCount},newQueue:function(){return new Ext.util.Queue()},processInvalidate:function(a,e,d){var b=this,c;if(a[d]){c=b.currentLayout;b.currentLayout=a.layout||null;a[d](e,a);b.currentLayout=c}},queueAnimation:function(a){this.animateQueue.add(a)},queueCompletion:function(a){this.completionQueue.add(a)},queueFinalize:function(a){this.finalizeQueue.add(a)},queueFlush:function(b,a){this.flushQueue.add(b,a)},chainFns:function(b,a,d){var c=this,g=b.layout,f=a.layout,e=b[d],h=a[d];return function(i){var j=c.currentLayout;if(e){c.currentLayout=g;e.call(b.scope||b,i,b)}c.currentLayout=f;h.call(a.scope||a,i,a);c.currentLayout=j}},purgeInvalidates:function(){var j=this,a=[],i=j.invalidQueue,k=i.length,c,b,h,e,d,f,g;for(c=0;c<k;++c){d=i[c];f=d.item.target;g=!0;for(b=a.length;b--;){h=a[b];e=h.item.target;if(f.isLayoutChild(e)){g=!1;break}if(e.isLayoutChild(f)){Ext.Array.erase(a,b,1)}}if(g){a.push(d)}}j.invalidQueue=a},queueInvalidate:function(c,a){var e=this,h=[],i=e.invalidQueue,k=i.length,d,f,g,b,j;if(c.isComponent){d=c;c=e.items[d.el.id];if(c){c.recalculateSizeModel()}else {c=e.getCmp(d)}}else {d=c.target}c.invalid=!0;while(k--){f=i[k];g=f.item.target;if(!d.isFloating&&d.up(g)){return}if(g===d){if(!(b=f.options)){f.options=a}else {if(a){if(a.widthModel){b.widthModel=a.widthModel}if(a.heightModel){b.heightModel=a.heightModel}if(!(j=b.state)){b.state=a.state}else {if(a.state){Ext.apply(j,a.state)}}if(a.before){b.before=e.chainFns(b,a,'before')}if(a.after){b.after=e.chainFns(b,a,'after')}}}return}if(!g.isLayoutChild(d)){h.push(f)}}h.push({item:c,options:a});e.invalidQueue=h},queueItemLayouts:function(c){var b=c.isComponent?c:c.target,a=b.componentLayout;if(!a.pending&&!a.invalid&&!a.done){this.queueLayout(a)}a=b.layout;if(a&&!a.pending&&!a.invalid&&!a.done&&!b.collapsed){this.queueLayout(a)}},queueLayout:function(a){this.layoutQueue.add(a);a.pending=!0},removeEl:function(e,b){var d=e.id,a=b?b.children:null,c=this.items;if(a){Ext.Array.remove(a,c[d])}delete c[d]},resetLayout:function(a,c,d){var b=this;b.currentLayout=a;a.done=!1;a.pending=!0;a.firedTriggers=0;b.layoutQueue.add(a);if(d){b.layouts[a.id]=a;a.running=!0;if(a.finishedLayout){b.finishQueue.add(a)}++b.remainingLayouts;++a.layoutCount;a.ownerContext=c;a.beginCount=0;a.blockCount=0;a.calcCount=0;a.triggerCount=0;if(!a.initialized){a.initLayout()}a.beginLayout(c)}else {++a.beginCount;if(!a.running){++b.remainingLayouts;a.running=!0;a.ownerContext=c;if(a.isComponentLayout){c.unsetProp('done')}b.completionQueue.remove(a);b.finalizeQueue.remove(a)}}a.beginLayoutCycle(c,d)},run:function(){var a=this,b=!1,c=a.cycleWatchDog;a.purgeInvalidates();a.flushInvalidates();Ext.layoutUpdates=(Ext.layoutUpdates||0)+1;a.state=1;a.totalCount=a.layoutQueue.getCount();a.flush();while((a.remainingLayouts||a.invalidQueue.length)&&c--){if(a.invalidQueue.length){a.flushInvalidates()}if(a.runCycle()){b=!1}else {if(!b){a.flush();b=!0;a.flushLayouts('completionQueue','completeLayout')}else {if(!a.invalidQueue.length){a.state=2;break}}}if(!(a.remainingLayouts||a.invalidQueue.length)){a.flush();a.flushLayouts('completionQueue','completeLayout');a.flushLayouts('finalizeQueue','finalizeLayout')}}return a.runComplete()},runComplete:function(){var a=this;a.state=2;if(a.remainingLayouts){a.handleFailure();return !1}a.flush();a.flushLayouts('finishQueue','finishedLayout',!0);a.flushLayouts('finishQueue','notifyOwner');a.flush();a.flushAnimations();return !0},runCycle:function(){var a=this,c=a.layoutQueue.clear(),d=c.length,b;++a.cycleCount;a.progressCount=0;for(b=0;b<d;++b){a.runLayout(a.currentLayout=c[b])}a.currentLayout=null;return a.progressCount>0},runLayout:function(a){var b=this,c=b.getCmp(a.owner);a.pending=!1;if(c.state.blocks){return}a.done=!0;++a.calcCount;++b.calcCount;a.calculate(c);if(a.done){b.layoutDone(a);if(a.completeLayout){b.queueCompletion(a)}if(a.finalizeLayout){b.queueFinalize(a)}}else {if(!a.pending&&!a.invalid&&!(a.blockCount+a.triggerCount-a.firedTriggers)){b.queueLayout(a)}}},setItemSize:function(a,g,f){var b=a,c=1,e,d;if(a.isComposite){b=a.elements;c=b.length;a=b[0]}else {if(!a.dom&&!a.el){c=b.length;a=b[0]}}for(d=0;d<c;){e=this.get(a);e.setSize(g,f);a=b[++d]}}});Ext.define('Ext.layout.component.Body',{extend:Ext.layout.component.Auto,alias:'layout.body',type:'body',beginLayout:function(a){this.callParent(arguments);a.bodyContext=a.getEl('body')},beginLayoutCycle:function(d,f){var a=this,c=a.lastWidthModel,b=a.lastHeightModel,e=a.owner.body;a.callParent(arguments);if(c&&c.fixed&&d.widthModel.shrinkWrap){e.setWidth(null)}if(b&&b.fixed&&d.heightModel.shrinkWrap){e.setHeight(null)}},calculateOwnerHeightFromContentHeight:function(a,c){var b=this.callParent(arguments);if(a.targetContext!==a){b+=a.getPaddingInfo().height}return b},calculateOwnerWidthFromContentWidth:function(a,c){var b=this.callParent(arguments);if(a.targetContext!==a){b+=a.getPaddingInfo().width}return b},measureContentWidth:function(a){return a.bodyContext.setWidth(a.bodyContext.el.dom.offsetWidth,!1)},measureContentHeight:function(a){return a.bodyContext.setHeight(a.bodyContext.el.dom.offsetHeight,!1)},publishInnerHeight:function(a,d){var b=d-a.getFrameInfo().height,c=a.targetContext;if(c!==a){b-=a.getPaddingInfo().height}return a.bodyContext.setHeight(b,!a.heightModel.natural)},publishInnerWidth:function(a,d){var b=d-a.getFrameInfo().width,c=a.targetContext;if(c!==a){b-=a.getPaddingInfo().width}a.bodyContext.setWidth(b,!a.widthModel.natural)}});Ext.define('Ext.layout.component.FieldSet',{extend:Ext.layout.component.Body,alias:['layout.fieldset'],type:'fieldset',defaultCollapsedWidth:100,beforeLayoutCycle:function(a){if(a.target.collapsed){a.heightModel=this.sizeModels.shrinkWrap}},beginLayout:function(a){var b=this.owner.legend;this.callParent([a]);if(b){a.legendContext=a.context.getCmp(b)}},beginLayoutCycle:function(a){var c=a.target,b;this.callParent(arguments);if(c.collapsed){a.setContentHeight(0);a.restoreMinHeight=c.minHeight;delete c.minHeight;if(a.widthModel.shrinkWrap){b=this.lastComponentSize;a.setContentWidth(b&&b.contentWidth||this.defaultCollapsedWidth)}}},finishedLayout:function(b){var c=this.owner,a=b.restoreMinHeight;this.callParent(arguments);if(a){c.minHeight=a}},calculateOwnerWidthFromContentWidth:function(c,a){var b=c.legendContext;if(b){a=Math.max(a,b.getProp('width'))}return this.callParent([c,a])},calculateOwnerHeightFromContentHeight:function(a,d){var c=a.getBorderInfo(),b=a.legendContext;return a.getProp('contentHeight')+a.getPaddingInfo().height+(Ext.isIE8?a.bodyContext.getPaddingInfo().top:0)+(b?b.getProp('height'):c.top)+c.bottom},publishInnerHeight:function(c,d){var b=c.legendContext,a=0;if(b){a=b.getProp('height')}if(a===undefined){this.done=!1}else {this.callParent([c,d-a])}},getLayoutItems:function(){var a=this.owner.legend;return a?[a]:[]}});Ext.define('Ext.layout.container.Absolute',{alias:'layout.absolute',extend:Ext.layout.container.Anchor,alternateClassName:'Ext.layout.AbsoluteLayout',targetCls:Ext.baseCSSPrefix+'abs-layout-ct',itemCls:Ext.baseCSSPrefix+'abs-layout-item',type:'absolute',adjustWidthAnchor:function(c,a){var b=this.targetPadding,d=a.getStyle('left');return c-d+b.left},adjustHeightAnchor:function(c,a){var b=this.targetPadding,d=a.getStyle('top');return c-d+b.top},isItemShrinkWrap:function(a){return !0},onContentChange:function(b,a){var c=!1;if(b.anchor&&a&&a.show){c=this.callParent([b,a])}return c},beginLayout:function(b){var a=this,c=a.getTarget();a.callParent([b]);if(c.dom!==document.body){c.position()}a.targetPadding=b.targetContext.getPaddingInfo()},isItemBoxParent:function(a){return !0},calculateContentSize:function(a,r){var n=this,o=(r||0)|((a.widthModel.shrinkWrap?1:0)|(a.heightModel.shrinkWrap?2:0)),d=o&1||undefined,c=o&2||undefined,p=a.childItems,s=p.length,e=0,f=0,k=0,q=a.props,h,l,b,j,g,i,m;if(d){if(isNaN(q.contentWidth)){++k}else {d=undefined}}if(c){if(isNaN(q.contentHeight)){++k}else {c=undefined}}if(k){for(g=0;g<s;++g){b=p[g];l=b.target;j=c&&b.getProp('height');m=d&&b.getProp('width');i=b.getMarginInfo();j+=i.bottom;m+=i.right;e=Math.max(e,(l.y||0)+j);f=Math.max(f,(l.x||0)+m);if(isNaN(e)&&isNaN(f)){n.done=!1;return}}if(d||c){h=a.targetContext.getPaddingInfo()}if(d&&!a.setContentWidth(f+h.width)){n.done=!1}if(c&&!a.setContentHeight(e+h.height)){n.done=!1}}}});Ext.define('Ext.layout.container.Accordion',{extend:Ext.layout.container.VBox,alias:'layout.accordion',type:'accordion',alternateClassName:'Ext.layout.AccordionLayout',targetCls:Ext.baseCSSPrefix+'accordion-layout-ct',itemCls:[Ext.baseCSSPrefix+'box-item',Ext.baseCSSPrefix+'accordion-item'],align:'stretch',enableSplitters:!1,fill:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:undefined,animate:!0,activeOnTop:!1,multi:!1,wrapOver:!0,panelCollapseMode:'header',defaultAnimatePolicy:{y:!0,height:!0},constructor:function(){var a=this;a.callParent(arguments);if(a.animate){a.animatePolicy={};a.animatePolicy[a.names.x]=!0;a.animatePolicy[a.names.width]=!0}else {a.animatePolicy=null}},beforeRenderItems:function(e){var b=this,i=e.length,g=b.owner,h=b.collapseFirst,j=Ext.isDefined(h),c=b.getExpanded(!0)[0],f=b.multi,a,d;for(d=0;d<i;d++){a=e[d];if(!a.rendered){a.isAccordionPanel=!0;a.bodyAriaRole='tabpanel';a.accordionWrapOver=b.wrapOver;if(!f||a.collapsible!==!1){a.collapsible=!0}if(a.collapsible){if(j){a.collapseFirst=h}if(b.hideCollapseTool){a.hideCollapseTool=b.hideCollapseTool;a.titleCollapse=!0}else {if(b.titleCollapse&&a.titleCollapse===undefined){a.titleCollapse=b.titleCollapse}}}a.hideHeader=a.width=null;a.title=a.title||'&#160;';a.addBodyCls(Ext.baseCSSPrefix+'accordion-body');if(!f){if(c){a.collapsed=c!==a}else {if(a.hasOwnProperty('collapsed')&&a.collapsed===!1){c=a}else {a.collapsed=!0}}g.mon(a,'show',b.onComponentShow,b)}a.headerOverCls=Ext.baseCSSPrefix+'accordion-hd-over'}}if(!b.processing&&!f){if(!c){if(i){e[0].collapsed=!1}}else {if(b.activeOnTop){c.collapsed=!1;b.configureItem(c);if(g.items.indexOf(c)>0){g.insert(0,c)}}}}},getItemsRenderTree:function(a){this.beforeRenderItems(a);return this.callParent(arguments)},renderItems:function(a,b){this.beforeRenderItems(a);this.callParent(arguments)},configureItem:function(a){this.callParent(arguments);a.ignoreHeaderBorderManagement=!0;a.animCollapse=!1;if(this.fill){a.flex=1}},beginLayout:function(a){this.callParent(arguments);this.innerCt.dom.setAttribute('role','tablist');this.innerCt.dom.setAttribute('aria-multiselectable',!0);this.updatePanelClasses(a)},updatePanelClasses:function(g){var e=g.visibleItems,f=e.length,d=!0,b,c,a;for(b=0;b<f;b++){c=e[b];a=c.header;a.addCls(Ext.baseCSSPrefix+'accordion-hd');if(d){a.removeCls(Ext.baseCSSPrefix+'accordion-hd-sibling-expanded')}else {a.addCls(Ext.baseCSSPrefix+'accordion-hd-sibling-expanded')}if(b+1===f&&c.collapsed){a.addCls(Ext.baseCSSPrefix+'accordion-hd-last-collapsed')}else {a.removeCls(Ext.baseCSSPrefix+'accordion-hd-last-collapsed')}d=c.collapsed}},onBeforeComponentExpand:function(f){var a=this,c=a.owner,g=a.multi,h=!g&&!a.animate&&a.activeOnTop,b,e,d;if(!a.processing){a.processing=!0;e=c.deferLayouts;c.deferLayouts=!0;if(!g){b=a.getExpanded()[0];if(b&&b!==f){d=b.$layoutAnim;if(d){d.jumpToEnd()}b.collapse()}}if(h){Ext.suspendLayouts();c.insert(0,f);Ext.resumeLayouts()}c.deferLayouts=e;a.processing=!1}},onBeforeComponentCollapse:function(f){var a=this,c=a.owner,b,e,d;if(a.owner.items.getCount()===1){return !1}if(!a.processing){a.processing=!0;d=c.deferLayouts;c.deferLayouts=!0;b=f.next()||f.prev();if(a.multi){e=a.getExpanded();if(e.length===1){b.expand()}}else {if(b){b.expand()}}c.deferLayouts=d;a.processing=!1}},onComponentShow:function(a){this.onBeforeComponentExpand(a)},onAdd:function(b){var a=this;a.callParent(arguments);if(b.collapseMode==='placeholder'){b.collapseMode=a.panelCollapseMode}b.collapseDirection=b.headerPosition;if(a.layoutCount&&!a.multi&&a.owner.items.getCount()>1){a.processing=!0;b.collapse();a.processing=!1}},onRemove:function(c,d){var a=this,b;a.callParent(arguments);if(!a.owner.destroying&&!a.multi&&!c.collapsed){b=a.owner.items.first();if(b){b.expand()}}},getExpanded:function(f){var d=this.owner.items.items,g=d.length,c=0,e=[],b,a;for(;c<g;++c){a=d[c];if(!a.hidden){if(f){b=a.hasOwnProperty('collapsed')&&a.collapsed===!1}else {b=!a.collapsed}if(b){e.push(a)}}}return e},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn});Ext.define('Ext.resizer.BorderSplitter',{extend:Ext.resizer.Splitter,alias:'widget.bordersplitter',collapseTarget:null,getTrackerConfig:function(){var a=this.callParent();a.xclass='Ext.resizer.BorderSplitterTracker';return a},onTargetCollapse:function(a){this.callParent([a]);if(this.performCollapse!==!1&&a.collapseMode==='mini'){a.addCls(a.baseCls+'-'+a.collapsedCls+'-mini')}},onTargetExpand:function(a){this.callParent([a]);if(this.performCollapse!==!1&&a.collapseMode==='mini'){a.removeCls(a.baseCls+'-'+a.collapsedCls+'-mini')}}});Ext.define('Ext.layout.container.Border',{extend:Ext.layout.container.Container,alias:'layout.border',alternateClassName:'Ext.layout.BorderLayout',targetCls:Ext.baseCSSPrefix+'border-layout-ct',itemCls:[Ext.baseCSSPrefix+'border-item',Ext.baseCSSPrefix+'box-item'],type:'border',isBorderLayout:!0,padding:undefined,percentageRe:/(\d+)%/,horzPositionProp:'left',padOnContainerProp:'left',padNotOnContainerProp:'right',axisProps:{horz:{borderBegin:'west',borderEnd:'east',horizontal:!0,posProp:'x',sizeProp:'width',sizePropCap:'Width'},vert:{borderBegin:'north',borderEnd:'south',horizontal:!1,posProp:'y',sizeProp:'height',sizePropCap:'Height'}},centerRegion:null,manageMargins:!0,panelCollapseAnimate:!0,panelCollapseMode:'placeholder',regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(n,t,k){var m=this,g=m.axisProps[k],e=!g.horizontal,s=g.sizeProp,i=0,p=n.childItems,u=p.length,d,h,a,c,b,j,q,l,r,f,o;for(h=0;h<u;++h){a=p[h];b=a.target;a.layoutPos={};if(b.region){a.region=j=b.region;a.isCenter=b.isCenter;a.isHorz=b.isHorz;a.isVert=b.isVert;a.weight=b.weight||m.regionWeights[j]||0;b.weight=a.weight;t[b.id]=a;if(b.isCenter){d=a;c=b.flex;n.centerRegion=d;continue}if(e!==a.isVert){continue}a.reverseWeighting=j===g.borderEnd;l=b[s];r=typeof l;if(!b.collapsed){if(r==='string'&&(q=m.percentageRe.exec(l))){a.percentage=parseInt(q[1],10)}else {if(b.flex){i+=a.flex=b.flex}}}}}if(d){f=d.target;if(o=f.placeholderFor){if(!c&&e===o.collapsedVertical()){c=0;d.collapseAxis=k}}else {if(f.collapsed&&e===f.collapsedVertical()){c=0;d.collapseAxis=k}}}if(c==null){c=1}i+=c;return Ext.apply({before:e?'top':'left',totalFlex:i},g)},beginLayout:function(c){var b=this,f=b.getLayoutItems(),g=b.padding,o=typeof g,m=!1,d,j,l,e,k,a,h,n,i;if(g){if(o==='string'||o==='number'){g=Ext.util.Format.parseBox(g)}}else {g=c.getEl('getTargetEl').getPaddingInfo();m=!0}c.outerPad=g;c.padOnContainer=m;for(e=0,l=f.length;e<l;++e){j=f[e];a=b.getSplitterTarget(j);if(a){h=undefined;n=!!j.hidden;if(!a.split){if(a.isCollapsingOrExpanding){h=!!a.collapsed}}else {if(n!==a.hidden){h=!a.hidden}}if(h){j.show()}else {if(h===!1){j.hide()}}}}b.callParent(arguments);f=c.childItems;l=f.length;k={};c.borderAxisHorz=b.beginAxis(c,k,'horz');c.borderAxisVert=b.beginAxis(c,k,'vert');for(e=0;e<l;++e){d=f[e];a=b.getSplitterTarget(d.target);if(a){i=k[a.id];if(!i){i=c.getEl(a.el,b);i.region=a.region}d.collapseTarget=a=i;d.weight=a.weight;d.reverseWeighting=a.reverseWeighting;a.splitter=d;d.isHorz=a.isHorz;d.isVert=a.isVert}}b.sortWeightedItems(f,'reverseWeighting');b.setupSplitterNeighbors(f)},calculate:function(e){var d=this,o=d.getContainerSize(e),j=e.childItems,m=j.length,f=e.borderAxisHorz,g=e.borderAxisVert,i=e.outerPad,n=e.padOnContainer,c,a,h,b,k,l;f.begin=i[d.padOnContainerProp];g.begin=i.top;k=f.end=f.flexSpace=o.width+(n?i[d.padOnContainerProp]:-i[d.padNotOnContainerProp]);l=g.end=g.flexSpace=o.height+(n?i.top:-i.bottom);for(c=0;c<m;++c){a=j[c];h=a.getMarginInfo();if(a.isHorz||a.isCenter){f.addUnflexed(h.width);k-=h.width}if(a.isVert||a.isCenter){g.addUnflexed(h.height);l-=h.height}if(!a.flex&&!a.percentage){if(a.isHorz||a.isCenter&&a.collapseAxis==='horz'){b=a.getProp('width');f.addUnflexed(b);if(a.collapseTarget){k-=b}}else {if(a.isVert||a.isCenter&&a.collapseAxis==='vert'){b=a.getProp('height');g.addUnflexed(b);if(a.collapseTarget){l-=b}}}}}for(c=0;c<m;++c){a=j[c];h=a.getMarginInfo();if(a.percentage){if(a.isHorz){b=Math.ceil(k*a.percentage/100);b=a.setWidth(b);f.addUnflexed(b)}else {if(a.isVert){b=Math.ceil(l*a.percentage/100);b=a.setHeight(b);g.addUnflexed(b)}}}}for(c=0;c<m;++c){a=j[c];if(!a.isCenter){d.calculateChildAxis(a,f);d.calculateChildAxis(a,g)}}if(d.finishAxis(e,g)+d.finishAxis(e,f)<2){d.done=!1}else {d.finishPositions(j)}},calculateChildAxis:function(b,a){var j=b.collapseTarget,k='set'+a.sizePropCap,f=a.sizeProp,i=b.getMarginInfo()[f],d,g,h,e,c;if(j){d=j.region}else {d=b.region;h=b.flex}g=d===a.borderBegin;if(!g&&d!==a.borderEnd){b[k](a.end-a.begin-i);e=a.begin}else {if(h){c=Math.ceil(a.flexSpace*(h/a.totalFlex));c=b[k](c)}else {if(b.percentage){c=b.peek(f)}else {c=b.getProp(f)}}c+=i;if(g){e=a.begin;a.begin+=c}else {a.end=e=a.end-c}}b.layoutPos[a.posProp]=e},eachItem:function(a,d,f){var g=this,e=g.getLayoutItems(),b=0,c;if(Ext.isFunction(a)){d=a;f=d}for(b;b<e.length;b++){c=e[b];if(!a||c.region===a){if(d.call(f,c)===!1){break}}}},finishAxis:function(d,a){var c=a.end-a.begin,b=d.centerRegion;if(b){b['set'+a.sizePropCap](c-b.getMarginInfo()[a.sizeProp]);b.layoutPos[a.posProp]=a.begin}return Ext.isNumber(c)?1:0},finishPositions:function(c){var e=c.length,b,a,d=this.horzPositionProp;for(b=0;b<e;++b){a=c[b];a.setProp('x',a.layoutPos.x+a.marginInfo[d]);a.setProp('y',a.layoutPos.y+a.marginInfo.top)}},getLayoutItems:function(){var c=this.owner,e=c&&c.items&&c.items.items||[],g=e.length,f=[],d=0,a,b;for(;d<g;d++){a=e[d];b=a.placeholderFor;if(a.hidden||(!a.floated||a.isCollapsingOrExpanding===2)&&!(b&&b.isCollapsingOrExpanding===2)){f.push(a)}}return f},getPlaceholder:function(a){return a.getPlaceholder&&a.getPlaceholder()},getMaxWeight:function(a){return this.getMinMaxWeight(a)},getMinWeight:function(a){return this.getMinMaxWeight(a,!0)},getMinMaxWeight:function(b,c){var d=this,a=null;d.eachItem(b,function(d){if(d.hasOwnProperty('weight')){if(a===null){a=d.weight;return}if(c&&d.weight<a||d.weight>a){a=d.weight}}},this);return a},getSplitterTarget:function(b){var a=b.collapseTarget;if(a&&a.collapsed){return a.placeholder||a}return a},isItemBoxParent:function(a){return !0},isItemShrinkWrap:function(a){return !0},insertSplitter:function(a,f,e,d){var c=a.region,b=Ext.apply({xtype:'bordersplitter',collapseTarget:a,id:a.id+'-splitter',hidden:e,canResize:a.splitterResize!==!1,splitterFor:a,synthetic:!0},d),g=f+(c==='south'||c==='east'?0:1);if(a.collapseMode==='mini'){b.collapsedCls=a.collapsedCls}a.splitter=this.owner.add(g,b)},getMoveAfterIndex:function(b){var a=this.callParent(arguments);if(b.splitter){a++}return a},moveItemBefore:function(c,a){var b;if(a&&a.splitter){b=a.region;if(b==='south'||b==='east'){a=a.splitter}}return this.callParent([c,a])},onAdd:function(a,h){var b=this,e=a.placeholderFor,g=a.region,f,c,d,i;b.callParent(arguments);if(g){Ext.apply(a,b.regionFlags[g]);if(b.owner.isViewport){a.isViewportBorderChild=!0}if(a.initBorderRegion){a.initBorderRegion()}f=g==='center';if(f){b.centerRegion=a}else {c=a.split;d=!!a.hidden;if(typeof c==='object'){i=c;c=!0}if((a.isHorz||a.isVert)&&(c||a.collapseMode==='mini')){if(a.collapseMode==='mini'&&a.collapsed){d=!1}else {if(!c){d=!0}}b.insertSplitter(a,h,d,i)}}if(!f&&!a.hasOwnProperty('collapseMode')){a.collapseMode=b.panelCollapseMode}if(!a.hasOwnProperty('animCollapse')){if(a.collapseMode!=='placeholder'){a.animCollapse=!1}else {a.animCollapse=b.panelCollapseAnimate}}if(d&&a.placeholder&&a.placeholder.isVisible()){b.owner.insert(h,a.placeholder)}}else {if(e){Ext.apply(a,b.regionFlags[e.region]);a.region=e.region;a.weight=e.weight}}},onDestroy:function(){this.centerRegion=null;this.callParent()},onRemove:function(a,f){var c=this,h=a.region,e=a.splitter,d=c.owner,g=d.destroying,b;if(h){if(a.isCenter){c.centerRegion=null}delete a.isCenter;delete a.isHorz;delete a.isVert;if(e&&!d.destroying){d.doRemove(e,!0)}delete a.splitter}c.callParent(arguments);if(!g&&!f&&a.rendered){b=a.getEl();if(b){b.setStyle('top','');b.setStyle(c.horzPositionProp,'')}}},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:!0,isHorz:!1,isVert:!1},north:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:'top'},south:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:'bottom'},west:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:'left'},east:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:'right'}},setupSplitterNeighbors:function(l){var i={},m=l.length,k=this.touchedRegions,h,b,j,g,d,a,f,e,c;for(h=0;h<m;++h){a=l[h].target;f=a.region;if(a.isCenter){j=a}else {if(f){c=k[f];for(b=0,g=c.length;b<g;++b){d=i[c[b]];if(d){d.neighbors.push(a)}}if(a.placeholderFor){e=a.placeholderFor.splitter}else {e=a.splitter}if(e){e.neighbors=[]}i[f]=e}}}if(j){c=k.center;for(b=0,g=c.length;b<g;++b){d=i[c[b]];if(d){d.neighbors.push(j)}}}},touchedRegions:{center:['north','south','east','west'],north:['north','east','west'],south:['south','east','west'],east:['east','north','south'],west:['west','north','south']},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(b){var g=this,a=this.sizePolicies,d,c,f,e;if(b.isCenter){e=b.placeholderFor;if(e){if(e.collapsedVertical()){return a.vert}return a.horz}if(b.collapsed){if(b.collapsedVertical()){return a.vert}return a.horz}return a.flexAll}d=b.collapseTarget;if(d){return d.isVert?a.vert:a.horz}if(b.region){if(b.isVert){c=b.height;f=a.vert}else {c=b.width;f=a.horz}if(b.flex||typeof c==='string'&&g.percentageRe.test(c)){return a.flexAll}return f}return g.autoSizePolicy}},function(){var a={addUnflexed:function(a){this.flexSpace=Math.max(this.flexSpace-a,0)}},b=this.prototype.axisProps;Ext.apply(b.horz,a);Ext.apply(b.vert,a)});Ext.define('Ext.layout.container.Card',{extend:Ext.layout.container.Fit,alternateClassName:'Ext.layout.CardLayout',alias:'layout.card',type:'card',hideInactive:!0,deferredRender:!1,getRenderTree:function(){var b=this,a=b.getActiveItem();if(a){if(a.hasListeners.beforeactivate&&a.fireEvent('beforeactivate',a)===!1){a=b.activeItem=b.owner.activeItem=null}else {if(a.hasListeners.activate){a.on({boxready:function(){a.fireEvent('activate',a)},single:!0})}}if(b.deferredRender){if(a){return b.getItemsRenderTree([a])}}else {return b.callParent(arguments)}}},renderChildren:function(){var a=this,b=a.getActiveItem();if(!a.deferredRender){a.callParent()}else {if(b){a.renderItems([b],a.getRenderTarget())}}},isValidParent:function(a,c,d){var b=a.el?a.el.dom:Ext.getDom(a);return b&&b.parentNode===(c.dom||c)||!1},getActiveItem:function(){var a=this,c=a.activeItem===undefined?a.owner&&a.owner.activeItem:a.activeItem,b=a.parseActiveItem(c);if(b&&a.owner.items.indexOf(b)!==-1){a.activeItem=b}return b==null?null:a.activeItem||a.owner.activeItem},parseActiveItem:function(a){var b;if(a&&a.isComponent){b=a}else {if(typeof a==='number'||a===undefined){b=this.getLayoutItems()[a||0]}else {if(a===null){b=null}else {b=this.owner.getComponent(a)}}}return b},configureItem:function(a){a.setHiddenState(a!==this.getActiveItem());this.callParent(arguments)},onAdd:function(a,b){this.callParent([a,b]);this.setItemHideMode(a)},onRemove:function(b){var a=this;a.callParent([b]);a.resetItemHideMode(b);if(b===a.activeItem){a.activeItem=undefined}},getAnimation:function(b,c){var a=(b||{}).cardSwitchAnimation;if(a===!1){return !1}return a||c.cardSwitchAnimation},getNext:function(){var c=arguments[0],a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b+1]||(c?a[0]:!1)},next:function(){var a=arguments[0],b=arguments[1];return this.setActiveItem(this.getNext(b),a)},getPrev:function(){var c=arguments[0],a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b-1]||(c?a[a.length-1]:!1)},prev:function(){var a=arguments[0],b=arguments[1];return this.setActiveItem(this.getPrev(b),a)},setActiveItem:function(a){var c=this,d=c.owner,b=c.activeItem,g=d.rendered,e,f;a=c.parseActiveItem(a);e=d.items.indexOf(a);if(e===-1){e=d.items.items.length;Ext.suspendLayouts();a=d.add(a);Ext.resumeLayouts()}if(a&&b!==a){if(a.fireEvent('beforeactivate',a,b)===!1){return !1}if(b&&b.fireEvent('beforedeactivate',b,a)===!1){return !1}if(g){Ext.suspendLayouts();if(!a.rendered){c.renderItem(a,c.getRenderTarget(),d.items.length)}if(b){if(c.hideInactive){f=b.el.contains(Ext.Element.getActiveElement());b.hide();if(b.hidden){b.hiddenByLayout=!0;b.fireEvent('deactivate',b,a)}else {return !1}}}if(a.hidden){a.show()}if(a.hidden){c.activeItem=a=null}else {c.activeItem=a;if(f){if(!a.defaultFocus){a.defaultFocus=':focusable'}a.focus()}}Ext.resumeLayouts(!0)}else {c.activeItem=a}a.fireEvent('activate',a,b);return c.activeItem}return !1},resetItemHideMode:function(a){a.hideMode=a.originalHideMode;delete a.originalHideMode},setItemHideMode:function(a){a.originalHideMode=a.hideMode;a.hideMode='offsets'}});Ext.define('Ext.layout.container.Center',{extend:Ext.layout.container.Fit,alternateClassName:'Ext.ux.layout.Center',alias:['layout.center','layout.ux.center'],type:'center',percentRe:/^\d+(?:\.\d+)?%$/,itemCls:Ext.baseCSSPrefix+'center-layout-item',childEls:['targetEl'],renderTpl:['<div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">'+'{%this.renderBody(out, values)%}'+'</div>'],targetElCls:Ext.baseCSSPrefix+'center-target',beginLayout:function(b){var e=this,g=e.percentRe,d,h,c,f,a;e.callParent([b]);d=b.childItems;for(c=0,h=d.length;c<h;++c){f=d[c];a=f.target;if(g.test(a.width)){a.getEl().setStyle('width','')}if(g.test(a.height)){a.getEl().setStyle('height','')}}b.targetElContext=b.getEl('targetEl',e)},beginLayoutCycle:function(b,c){var a=this.targetEl;this.callParent([b,c]);a.setStyle('width','');a.setStyle('height','')},getRenderData:function(){var a=this.callParent();a.targetElCls=this.targetElCls;return a},getRenderTarget:function(){return this.targetEl},getItemSizePolicy:function(d,e){var a=this,c=e||a.owner.getSizeModel(),b=a.percentRe,f=(c.width.shrinkWrap||!b.test(d.width)?0:1)|(c.height.shrinkWrap||!b.test(d.height)?0:2);return a.sizePolicies[f]},isItemShrinkWrap:function(a){return !0},calculate:function(a){var c=a.targetElContext,b;this.callParent([a]);b=a.state.info;if(a.widthModel.shrinkWrap){c.setWidth(b.contentWidth)}if(a.heightModel.shrinkWrap){c.setHeight(b.contentHeight)}},getPos:function(d,b,a){var e=a+'Model',f=d.props[a],c=0;if(!d[e].calculated){f+=b.margins[a]}if(!b.ownerContext[e].shrinkWrap){c=Math.round((b.targetSize[a]-f)/2);if(isNaN(c)){this.done=!1}}return Math.max(c,0)},positionItemX:function(a,b){var c=this.getPos(a,b,'width');a.setProp('x',c)},positionItemY:function(a,b){var c=this.getPos(a,b,'height');a.setProp('y',c)},setItemHeight:function(a,b){var c=parseFloat(a.target.height)/100;a.setHeight(Math.round((b.targetSize.height-b.margins.height)*c))},setItemWidth:function(a,b){var c=parseFloat(a.target.width)/100;a.setWidth(Math.round((b.targetSize.width-b.margins.width)*c))}});Ext.define('Ext.menu.DatePicker',{extend:Ext.menu.Menu,alias:'widget.datemenu',ariaRole:'dialog',ariaLabel:'Date picker',hideOnClick:!0,pickerId:null,focusableContainer:!1,initComponent:function(){var a=this,c,b;if(a.pickerCfg){b=Ext.apply({cls:Ext.baseCSSPrefix+'menu-date-item',margin:0,border:!1,xtype:'datepicker'},a.pickerCfg)}else {c=Ext.apply({},a.initialConfig);delete c.listeners;b=Ext.applyIf({cls:Ext.baseCSSPrefix+'menu-date-item',margin:0,border:!1,xtype:'datepicker'},c)}if(a.pickerId!=null&&b.id==null){b.id=a.pickerId}delete b.ownerCmp;Ext.apply(a,{showSeparator:!1,plain:!0,bodyPadding:0,items:[b]});a.callParent();a.picker=a.down('datepicker');a.relayEvents(a.picker,['select']);if(a.hideOnClick){a.on('select',a.hidePickerOnSelect,a)}},onEscapeKey:function(b){var a=this;if(a.floating&&a.ownerCmp&&a.ownerCmp.focus){a.ownerCmp.focus();a.hide()}},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}});Ext.define('Ext.resizer.BorderSplitterTracker',{extend:Ext.resizer.SplitterTracker,getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var i=this,e=i.splitter,k=e.collapseTarget,n=e.defaultSplitMin,l=e.vertical?'Width':'Height',p='min'+l,o='max'+l,w='get'+l,r=e.neighbors,x=r.length,c=k.el.getBox(),u=c.x,v=c.y,t=c.right,s=c.bottom,b=e.vertical?t-u:s-v,j,h,f,d,a,g,m,q;d=(k[p]||Math.min(b,n))-b;a=k[o];if(!a){a=1000000000}else {a-=b}q=b;for(j=0;j<x;++j){h=r[j];b=h[w]();f=h[o];if(f===null){f=undefined}g=b-f;m=b-(h[p]||Math.min(b,n));if(!isNaN(g)){if(d<g){d=g}}if(a>m){a=m}}if(a-d<2){return null}c=new Ext.util.Region(v,t,s,u);i.constraintAdjusters[i.getCollapseDirection()](c,d,a,e);i.dragInfo={minRange:d,maxRange:a,targetSize:q};return c},constraintAdjusters:{left:function(a,c,b,d){a[0]=a.x=a.left=a.right+c;a.right+=b+d.getWidth()},top:function(a,c,b,d){a[1]=a.y=a.top=a.bottom+c;a.bottom+=b+d.getHeight()},bottom:function(a,c,b,d){a.bottom=a.top-c;a.top-=b+d.getHeight()},right:function(a,c,b,d){a.right=a.left-c;a[0]=a.x=a.left=a.x-b+d.getWidth()}},onBeforeStart:function(h){var c=this,f=c.splitter,d=f.collapseTarget,e=f.neighbors,g=e.length,a,b;if(d.collapsed){return !1}for(a=0;a<g;++a){b=e[a];if(b.collapsed&&b.isHorz===d.isHorz){return !1}}if(!(c.constrainTo=c.calculateConstrainRegion())){return !1}return !0},performResize:function(j,i){var d=this,b=d.splitter,e=b.getCollapseDirection(),h=b.collapseTarget,f=d.splitAdjusters[b.vertical?'horz':'vert'],a=i[f.index],c=d.dragInfo,g;if(e==='right'||e==='bottom'){a=-a}a=Math.min(Math.max(c.minRange,a),c.maxRange);if(a){(g=b.ownerCt).suspendLayouts();f.adjustTarget(h,c.targetSize,a);g.resumeLayouts(!0)}},splitAdjusters:{horz:{index:0,adjustTarget:function(a,c,b){a.flex=null;a.setSize(c+b)}},vert:{index:1,adjustTarget:function(a,b,c){a.flex=null;a.setSize(undefined,b+c)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}});Ext.define('Ext.resizer.ResizeTracker',{extend:Ext.dd.DragTracker,dynamic:!0,preserveRatio:!1,preventDefault:!1,constrainTo:null,proxyCls:Ext.baseCSSPrefix+'resizable-proxy',constructor:function(b){var a=this,d,c,e;if(!b.el){if(b.target.isComponent){a.el=b.target.getEl()}else {a.el=b.target}}this.callParent(arguments);if(a.preserveRatio&&a.minWidth&&a.minHeight){d=a.minWidth/a.el.getWidth();c=a.minHeight/a.el.getHeight();if(c>d){a.minWidth=a.el.getWidth()*c}else {a.minHeight=a.el.getHeight()*d}}if(a.throttle){e=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(a,arguments)},a.throttle);a.resize=function(f,d,c){if(c){Ext.resizer.ResizeTracker.prototype.resize.apply(a,arguments)}else {e.apply(null,arguments)}}}},onBeforeStart:function(a){this.startBox=this.target.getBox()},getProxy:function(){var a=this;if(!a.dynamic&&!a.proxy){a.proxy=a.createProxy(a.target||a.el);a.hideProxy=!0}if(a.proxy){a.proxy.show();return a.proxy}},createProxy:function(a){var b,c=this.proxyCls;if(a.isComponent){b=a.getProxy().addCls(c)}else {b=a.createProxy({tag:'div',role:'presentation',cls:c,id:a.id+'-rzproxy'},Ext.getBody())}b.removeCls(Ext.baseCSSPrefix+'proxy-el');return b},onStart:function(a){this.activeResizeHandle=Ext.get(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox)}},onMouseDown:function(b,a){this.callParent([b,a]);Ext.dom.Element.maskIframes()},onMouseUp:function(a){this.callParent([a]);Ext.dom.Element.unmaskIframes()},onDrag:function(a){if(this.dynamic||this.proxy){this.updateDimensions(a)}},updateDimensions:function(s,r){var c=this,h=c.activeResizeHandle.region,d=c.getOffset(c.constrainTo?'dragTarget':null),b=c.startBox,n,f=0,e=0,k,j,l=0,m=0,q,i,g,a,o,p;h=c.convertRegionName(h);switch(h){case 'south':e=d[1];g=2;break;case 'north':e=-d[1];m=-e;g=2;break;case 'east':f=d[0];g=1;break;case 'west':f=-d[0];l=-f;g=1;break;case 'northeast':e=-d[1];m=-e;f=d[0];i=[b.x,b.y+b.height];g=3;break;case 'southeast':e=d[1];f=d[0];i=[b.x,b.y];g=3;break;case 'southwest':f=-d[0];l=-f;e=d[1];i=[b.x+b.width,b.y];g=3;break;case 'northwest':e=-d[1];m=-e;f=-d[0];l=-f;i=[b.x+b.width,b.y+b.height];g=3;break;}a={width:b.width+f,height:b.height+e,x:b.x+l,y:b.y+m};k=Ext.Number.snap(a.width,c.widthIncrement);j=Ext.Number.snap(a.height,c.heightIncrement);if(k!==a.width||j!==a.height){switch(h){case 'northeast':a.y-=j-a.height;break;case 'north':a.y-=j-a.height;break;case 'southwest':a.x-=k-a.width;break;case 'west':a.x-=k-a.width;break;case 'northwest':a.x-=k-a.width;a.y-=j-a.height;}a.width=k;a.height=j}if(a.width<c.minWidth||a.width>c.maxWidth){a.width=Ext.Number.constrain(a.width,c.minWidth,c.maxWidth);if(l){a.x=b.x+(b.width-a.width)}}else {c.lastX=a.x}if(a.height<c.minHeight||a.height>c.maxHeight){a.height=Ext.Number.constrain(a.height,c.minHeight,c.maxHeight);if(m){a.y=b.y+(b.height-a.height)}}else {c.lastY=a.y}if(c.preserveRatio||s.shiftKey){n=c.startBox.width/c.startBox.height;o=Math.min(Math.max(c.minHeight,a.width/n),c.maxHeight);p=Math.min(Math.max(c.minWidth,a.height*n),c.maxWidth);if(g===1){a.height=o}else {if(g===2){a.width=p}else {q=Math.abs(i[0]-this.lastXY[0])/Math.abs(i[1]-this.lastXY[1]);if(q>n){a.height=o}else {a.width=p}if(h==='northeast'){a.y=b.y-(a.height-b.height)}else {if(h==='northwest'){a.y=b.y-(a.height-b.height);a.x=b.x-(a.width-b.width)}else {if(h==='southwest'){a.x=b.x-(a.width-b.width)}}}}}}c.setPosition=a.x!==c.startBox.x||a.y!==c.startBox.y;c.resize(a,r)},resize:function(b,e){var a=this,c,d=a.setPosition;if(a.dynamic||!a.dynamic&&e){if(d){a.target.setBox(b)}else {a.target.setSize(b.width,b.height)}}if(!e){c=a.getProxy();if(c&&c!==a.target){if(d||a.hideProxy){c.setBox(b)}else {c.setSize(b.width,b.height)}}}},onEnd:function(a){this.updateDimensions(a,!0);if(this.proxy&&this.hideProxy){this.proxy.hide()}},convertRegionName:function(a){return a}});Ext.define('Ext.resizer.Resizer',{alternateClassName:'Ext.Resizable',mixins:{observable:Ext.util.Observable},handleCls:Ext.baseCSSPrefix+'resizable-handle',overCls:Ext.baseCSSPrefix+'resizable-handle-over',pinnedCls:Ext.baseCSSPrefix+'resizable-pinned',wrapCls:Ext.baseCSSPrefix+'resizable-wrap',wrappedCls:Ext.baseCSSPrefix+'resizable-wrapped',delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:!0,handles:'s e se',height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:!1,preserveRatio:!1,transparent:!1,possiblePositions:{n:'north',s:'south',e:'east',w:'west',se:'southeast',sw:'southwest',nw:'northwest',ne:'northeast'},touchActionMap:{n:{panY:!1},s:{panY:!1},e:{panX:!1},w:{panX:!1},se:{panX:!1,panY:!1},sw:{panX:!1,panY:!1},nw:{panX:!1,panY:!1},ne:{panX:!1,panY:!1}},ariaRole:'presentation',constructor:function(c){var a=this,r=Ext.dom.Element.unselectableCls,p=[],b,i,n,k,q,l,g,j,f,o,e,d,m,h;if(Ext.isString(c)||Ext.isElement(c)||c.dom){b=c;c=arguments[1]||{};c.target=b}a.mixins.observable.constructor.call(a,c);b=a.target;if(b){if(b.isComponent){b.addClsWithUI('resizable');if(b.minWidth){a.minWidth=b.minWidth}if(b.minHeight){a.minHeight=b.minHeight}if(b.maxWidth){a.maxWidth=b.maxWidth}if(b.maxHeight){a.maxHeight=b.maxHeight}if(b.floating){if(!a.hasOwnProperty('handles')){a.handles='n ne e se s sw w nw'}}a.el=b.getEl()}else {b=a.el=a.target=Ext.get(b)}}else {b=a.target=a.el=Ext.get(a.el)}a.el.addCls(Ext.Component.prototype.borderBoxCls);if(Ext.isNumber(a.width)){a.width=Ext.Number.constrain(a.width,a.minWidth,a.maxWidth)}if(Ext.isNumber(a.height)){a.height=Ext.Number.constrain(a.height,a.minHeight,a.maxHeight)}if(a.width!==null||a.height!==null){a.target.setSize(a.width,a.height)}k=a.el.dom.tagName.toUpperCase();if(k==='TEXTAREA'||k==='IMG'||k==='TABLE'||a.el.isStyle('display','table')){a.originalTarget=a.target;d=b.isComponent?b.getEl():b;a.el.addCls(a.wrappedCls);a.target=a.el=a.el.wrap({role:'presentation',cls:a.wrapCls,id:a.el.id+'-rzwrap',style:d.getStyle(['margin-top','margin-bottom'])});m=d.getPositioning();a.el.setPositioning(m);d.clearPositioning();j=d.getBox();if(m.position!=='absolute'){j.x=0;j.y=0}a.el.setBox(j);d.setStyle('position','absolute');a.isTargetWrapped=!0}a.el.position();if(a.pinned){a.el.addCls(a.pinnedCls)}a.resizeTracker=new Ext.resizer.ResizeTracker({disabled:a.disabled,target:b,el:a.el,constrainTo:a.constrainTo,handleCls:a.handleCls,overCls:a.overCls,throttle:a.throttle,proxy:a.originalTarget?a.el:null,dynamic:a.originalTarget?!0:a.dynamic,originalTarget:a.originalTarget,delegate:'.'+a.handleCls,preserveRatio:a.preserveRatio,heightIncrement:a.heightIncrement,widthIncrement:a.widthIncrement,minHeight:a.minHeight,maxHeight:a.maxHeight,minWidth:a.minWidth,maxWidth:a.maxWidth});a.resizeTracker.on({mousedown:a.onBeforeResize,drag:a.onResize,dragend:a.onResizeEnd,scope:a});if(a.handles==='all'){a.handles='n s e w ne nw se sw'}o=a.handles=a.handles.split(a.delimiterRe);n=a.possiblePositions;q=o.length;i=a.handleCls+' '+a.handleCls+'-{0}';if(a.target.isComponent){h=a.target.baseCls;i+=' '+h+'-handle '+h+'-handle-{0}';if(Ext.supports.CSS3BorderRadius){i+=' '+h+'-handle-{0}-br'}}for(l=0;l<q;l++){f=o[l];if(f&&n[f]){g=n[f];e=a[g]=a.el.createChild({id:a.el.id+'-'+g+'-handle',cls:Ext.String.format(i,g)+' '+r,role:'presentation'});e.region=g;if(a.transparent){e.setOpacity(0)}e.setTouchAction(a.touchActionMap[f]);p.push(e)}}a.resizeTracker.handleEls=p},disable:function(){this.disabled=!0;this.resizeTracker.disable()},enable:function(){this.disabled=!1;this.resizeTracker.enable()},onBeforeResize:function(b,c){var a=this.fireResizeEvent('beforeresize',b,c);if(a){this.el.unselectable()}return a},onResize:function(a,b){return this.fireResizeEvent('resizedrag',a,b)},onResizeEnd:function(a,b){this.el.selectable();return this.fireResizeEvent('resize',a,b)},fireResizeEvent:function(c,e,d){var a=this,b;if(a.hasListeners[c]){b=a.el.getBox();return a.fireEvent(c,a,b.width,b.height,d)}},resizeTo:function(c,b){var a=this;a.target.setSize(c,b);a.fireEvent('resize',a,c,b,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var a=this,d=a.handles,g=d.length,f=a.possiblePositions,e,c,b;a.resizeTracker.destroy();if(a.isTargetWrapped){a.target.destroy()}for(b=0;b<g;b++){c=f[d[b]];if(e=a[c]){e.destroy();a[c]=null}}a.callParent()}});Ext.define('Ext.selection.CellModel',{extend:Ext.selection.DataViewModel,alias:'selection.cellmodel',isCellModel:!0,deselectOnContainerClick:!1,enableKeyNav:!0,preventWrap:!1,bindComponent:function(b){var a=this,c;if(a.view&&a.gridListeners){a.gridListeners.destroy()}a.callParent([b]);if(b){c=b.grid||b.ownerCt;if(c.optimizedColumnMove!==!1){a.gridListeners=c.on({columnmove:a.onColumnMove,scope:a,destroyable:!0})}}},getViewListeners:function(){var a=this.callParent();a.refresh=this.onViewRefresh;return a},getHeaderCt:function(){var a=this.navigationModel.getPosition(),b=a?a.view:this.primaryView;return b.headerCt},onNavigate:function(a){if(!a.record||a.keyEvent.stopSelection){return}this.setPosition(a.position)},selectWithEvent:function(a,b){this.select(a)},select:function(a,g,e){var b=this,c,d=b.getPosition(),f=b.view.store;if(a||a===0){if(a.isModel){c=f.indexOf(a);if(c!==-1){a={row:c,column:d?d.column:0}}else {a=null}}else {if(typeof a==='number'){a={row:a,column:0}}}}if(a){b.selectByPosition(a,e)}else {b.deselect()}},getCurrentPosition:function(){var a=this.selecting?this.nextSelection:this.selection;return a?{view:a.view,record:a.record,row:a.rowIdx,columnHeader:a.column,column:a.view.getColumnManager().indexOf(a.column)}:a},getPosition:function(){return (this.selecting?this.nextSelection:this.selection)||null},setCurrentPosition:function(a,b,c){if(a&&!a.isCellContext){a=(new Ext.grid.CellContext(this.view)).setPosition({row:a.row,column:typeof a.column==='number'?this.view.getColumnManager().getColumns()[a.column]:a.column})}return this.setPosition(a,b,c)},setPosition:function(a,d,e){var b=this,c=b.selection;if(a){a=a.isCellContext?a.clone():(new Ext.grid.CellContext(b.view)).setPosition(a)}if(!e&&c){if(a&&(a.record===c.record&&a.column===c.column&&a.view===c.view)){a=null}else {b.onCellDeselect(b.selection,d)}}if(a){b.nextSelection=a;b.selecting=!0;b.onCellSelect(b.nextSelection,d);b.selecting=!1;return b.selection=a}},isCellSelected:function(d,e,c){var f=this,b,a=f.getPosition();if(a&&a.view===d){b=(new Ext.grid.CellContext(d)).setPosition({row:e,column:typeof c==='number'?d.getColumnManager().getColumns()[c]:c});return b.record===a.record&&b.column===a.column}},onStoreRemove:function(b,e,d){var c=this,a=c.getPosition();c.callParent(arguments);if(a&&b.isMoving(a.record)){return}if(a&&b.getCount()&&b.indexOf(a.record)!==-1){a.setRow(a.record)}else {c.selection=null}},onStoreClear:function(){this.callParent(arguments);this.selection=null},onStoreAdd:function(){var b=this,a=b.getPosition();b.callParent(arguments);if(a){a.setRow(a.record)}else {b.selection=null}},updateSelectedInstances:function(b){var c=this.getPosition(),a=b.getAt(0);if(a&&c&&c.record.id===a.id){c.setRow(a)}this.callParent([b]);if(b.length===0&&a){this.selection=null}},onCellClick:function(f,e,c,d,g,a,b){if(a!==-1){this.setPosition(b.position)}},onCellSelect:function(a,b){if(a&&a.rowIdx!==undefined&&a.rowIdx>-1){this.doSelect(a.record,!1,b)}},onCellDeselect:function(a,b){if(a&&a.rowIdx!==undefined){this.doDeselect(a.record,b)}},onSelectChange:function(g,f,e,h){var b=this,a,c,d;if(f){a=b.nextSelection;c='select'}else {a=b.selection;c='deselect'}d=a.view||b.primaryView;if((e||b.fireEvent('before'+c,b,g,a.rowIdx,a.colIdx))!==!1&&h()!==!1){if(f){d.onCellSelect(a)}else {d.onCellDeselect(a);delete b.selection}if(!e){b.fireEvent(c,b,g,a.rowIdx,a.colIdx)}}},refresh:function(){var b=this.getPosition(),a;if(b&&(a=this.store.indexOf(this.selected.last()))!==-1){b.rowIdx=a}},onColumnMove:function(b,d,c,e){var a=b.up('tablepanel');if(a){this.onViewRefresh(a.view)}},onUpdate:function(c){var a=this,b;if(a.isSelected(c)){b=a.selecting?a.nextSelection:a.selection;a.view.onCellSelect(b)}},onViewRefresh:function(b){var f=this,e=f.getPosition(),g,c=b.headerCt,d,a;if(e&&e.view===b){d=e.record;a=b.getColumnByPosition(e);if(a&&!a.isDescendantOf(c)){a=c.queryById(a.id)||c.down('[text="'+a.text+'"]')||c.down('[dataIndex="'+a.dataIndex+'"]')}if(a&&d){if(b.store.indexOfId(d.getId())!==-1){g=(new Ext.grid.CellContext(b)).setPosition({row:d,column:a});f.setPosition(g)}}else {f.selection=null}}},selectByPosition:function(b,a){this.setPosition(b,a)}});Ext.define('Ext.selection.RowModel',{extend:Ext.selection.DataViewModel,alias:'selection.rowmodel',enableKeyNav:!0,isRowModel:!0,deselectOnContainerClick:!1,onUpdate:function(b){var d=this,a=d.view,c;if(a&&d.isSelected(b)){c=a.indexOf(b);a.onRowSelect(c);if(b===d.lastFocused){a.onRowFocus(c,!0)}}},onSelectChange:function(c,g,e,j){var a=this,i=a.views||[a.view],k=i.length,b=a.store.indexOf(c),h=g?'select':'deselect',f,d;if((e||a.fireEvent('before'+h,a,c,b))!==!1&&j()!==!1){for(f=0;f<k;f++){d=i[f];b=d.indexOf(c);if(d.indexOf(c)!==-1){if(g){d.onRowSelect(b,e)}else {d.onRowDeselect(b,e)}}}if(!e){a.fireEvent(h,a,c,b)}}},getCurrentPosition:function(){var a=this.selected.getAt(0);if(a){return (new Ext.grid.CellContext(this.view)).setPosition(this.store.indexOf(a),0)}},selectByPosition:function(a,b){if(!a.isCellContext){a=(new Ext.grid.CellContext(this.view)).setPosition(a.row,a.column)}this.select(a.record,b)},selectNext:function(f,e){var a=this,h=a.store,d=a.getSelection(),g=d[d.length-1],c=a.view.indexOf(g)+1,b;if(c===h.getCount()||c===0){b=!1}else {a.doSelect(c,f,e);b=!0}return b},selectPrevious:function(e,d){var b=this,f=b.getSelection(),g=f[0],c=b.view.indexOf(g)-1,a;if(c<0){a=!1}else {b.doSelect(c,e,d);a=!0}return a},isRowSelected:function(a){return this.isSelected(a)},isCellSelected:function(c,a,b){return this.isSelected(a)},vetoSelection:function(a){var b=this.view.getNavigationModel(),c=a.getKey(),d=c===a.RIGHT||c===a.LEFT;return d&&b.previousRecord===b.record||this.callParent([a])}});Ext.define('Ext.selection.CheckboxModel',{alias:'selection.checkboxmodel',extend:Ext.selection.RowModel,mode:'MULTI',injectCheckbox:0,checkOnly:!1,locked:!1,showHeaderCheckbox:undefined,headerText:undefined,headerAriaLabel:'Row selector',headerSelectText:'Press Space to select all rows',headerDeselectText:'Press Space to deselect all rows',rowSelectText:'Press Space to select this row',rowDeselectText:'Press Space to deselect this row',allowDeselect:!0,headerWidth:24,checkerOnCls:Ext.baseCSSPrefix+'grid-hd-checker-on',tdCls:Ext.baseCSSPrefix+'grid-cell-special '+Ext.baseCSSPrefix+'selmodel-column',constructor:function(){var a=this;a.callParent(arguments);if(a.mode==='SINGLE'){a.showHeaderCheckbox=!1}},beforeViewRender:function(b){var a=this,c=b.grid.ownerLockable,d=a.locked||a.config&&a.config.locked;a.callParent(arguments);if(a.injectCheckbox!==!1){if(c&&!a.lockListeners){a.lockListeners=c.mon(c,{lockcolumn:a.onColumnLock,unlockcolumn:a.onColumnUnlock,scope:a,destroyable:!0})}if(!c||b.isLockedView&&(a.hasLockedHeader()||d)||b.isNormalView&&!a.column){a.addCheckbox(b);a.mon(b.ownerGrid,{beforereconfigure:a.onBeforeReconfigure,reconfigure:a.onReconfigure,scope:a})}}},onColumnUnlock:function(b,e){var c=this,a=c.injectCheckbox,d=b.lockedGrid.visibleColumnManager.getColumns();if(d.length===1&&d[0]===c.column){if(a==='first'){a=0}else {if(a==='last'){a=b.normalGrid.visibleColumnManager.getColumns().length}}b.unlock(c.column,a)}},onColumnLock:function(b,e){var c=this,a=c.injectCheckbox,d=b.lockedGrid.visibleColumnManager.getColumns();if(d.length===1){if(a==='first'){a=0}else {if(a==='last'){a=b.lockedGrid.visibleColumnManager.getColumns().length}}b.lock(c.column,a)}},bindComponent:function(a){this.sortable=!1;this.callParent(arguments)},hasLockedHeader:function(){var b=this.view.ownerGrid.getVisibleColumnManager().getColumns(),c=b.length,a;for(a=0;a<c;a++){if(b[a].locked){return !0}}return !1},addCheckbox:function(d){var b=this,a=b.injectCheckbox,c=d.headerCt;if(a!==!1){if(a==='first'){a=0}else {if(a==='last'){a=c.getColumnCount()}}Ext.suspendLayouts();if(d.getStore().isBufferedStore){b.showHeaderCheckbox=!1}b.column=c.add(a,b.column||b.getHeaderConfig());Ext.resumeLayouts()}},onBeforeReconfigure:function(g,f,c,e,d){var b=this.column,a=b.ownerCt;if(c&&a){a.remove(b,!1)}},onReconfigure:function(a,d,c){var b=this;if(c){if(a.lockable){if(a.lockedGrid.isVisible()){a.lock(b.column,0)}else {a.unlock(b.column,0)}}else {b.addCheckbox(b.view)}a.view.refreshView()}},onHeaderClick:function(k,g,j){var a=this,i=a.store,f,b,c,h,d,e;if(a.showHeaderCheckbox!==!1&&g===a.column&&a.mode!=='SINGLE'){j.stopEvent();f=g.el.hasCls(Ext.baseCSSPrefix+'grid-hd-checker-on');if(f){b=[];d=this.getSelection();for(c=0,h=d.length;c<h;++c){e=d[c];if(i.indexOf(e)>-1){b.push(e)}}if(b.length>0){a.deselect(b)}}else {a.selectAll()}}},getHeaderConfig:function(){var a=this,d=a.showHeaderCheckbox!==!1,c=Ext.String.htmlEncode,b;b={xtype:'checkcolumn',headerCheckbox:d,isCheckerHd:d,ignoreExport:!0,text:a.headerText,width:a.headerWidth,sortable:!1,draggable:!1,resizable:!1,hideable:!1,menuDisabled:!0,checkOnly:a.checkOnly,checkboxAriaRole:'presentation',tdCls:Ext.baseCSSPrefix+'selmodel-checkbox '+a.tdCls,cls:Ext.baseCSSPrefix+'selmodel-column',editRenderer:a.editRenderer||a.renderEmpty,locked:a.hasLockedHeader(),processEvent:Ext.emptyFn,renderer:a.renderer||a.defaultRenderer,toggleAll:Ext.emptyFn,setRecordCheck:Ext.emptyFn,isRecordChecked:a.isRowSelected.bind(a)};if(!a.checkOnly){b.ariaRole='presentation'}else {b.useAriaElements=!0;b.ariaLabel=c(a.headerAriaLabel);b.headerSelectText=c(a.headerSelectText);b.headerDeselectText=c(a.headerDeselectText);b.rowSelectText=c(a.rowSelectText);b.rowDeselectText=c(a.rowDeselectText)}return b},toggleRecord:function(b,c,a,d){this[a?'select':'deselect']([b],this.mode!=='SINGLE')},renderEmpty:function(){return '&#160;'},refresh:function(){this.callParent(arguments);this.updateHeaderState()},selectByPosition:function(a,b){if(!a.isCellContext){a=(new Ext.grid.CellContext(this.view)).setPosition(a.row,a.column)}if(!this.checkOnly||a.column===this.column){this.callParent([a,b])}},onSelectChange:function(c,b){var a=this;a.callParent(arguments);if(a.column){a.column.updateCellAriaDescription(c,b)}if(!a.suspendChange){a.updateHeaderState()}},onStoreLoad:function(){this.callParent(arguments);this.updateHeaderState()},onStoreAdd:function(){this.callParent(arguments);this.updateHeaderState()},onStoreRemove:function(){this.callParent(arguments);this.updateHeaderState()},onStoreRefresh:function(){this.callParent(arguments);this.updateHeaderState()},maybeFireSelectionChange:function(a){if(a&&!this.suspendChange){this.updateHeaderState()}this.callParent(arguments)},resumeChanges:function(){this.callParent();if(!this.suspendChange){this.updateHeaderState()}},updateHeaderState:function(){var a=this,e=a.store,g=e.getCount(),h=a.views,c=!1,f=0,d,i,b;if(!e.isBufferedStore&&g>0){d=a.selected;c=!0;for(b=0,i=d.getCount();b<i;++b){if(e.indexOfId(d.getAt(b).id)>-1){++f}}c=g===f}if(h&&h.length){a.column.setHeaderStatus(c)}},vetoSelection:function(a){var b=this,e=b.column,f,c,d;if(b.checkOnly){c=a.type===e.triggerEvent&&a.getTarget(b.column.getCellSelector());d=a.getKey()===a.SPACE&&a.position.column===e;f=!(c||d)}return f||b.callParent([a])},privates:{onBeforeNavigate:function(b){var a=b.keyEvent;if(this.selectionMode!=='SINGLE'){b.ctrlKey=b.ctrlKey||a.ctrlKey||a.type===this.column.triggerEvent&&!a.shiftKey||a.getKey()===a.SPACE}},selectWithEventMulti:function(c,b,d){var a=this;if(!b.shiftKey&&!b.ctrlKey&&b.getTarget(a.column.getCellSelector())){if(d){a.doDeselect(c)}else {a.doSelect(c,!0)}}else {a.callParent([c,b,d])}}}},function(a){a.prototype.checkSelector='.'+Ext.grid.column.Check.prototype.checkboxCls});Ext.define('Ext.theme.triton.selection.CheckboxModel',{override:'Ext.selection.CheckboxModel',headerWidth:32,onHeaderClick:function(b,a,c){this.callParent([b,a,c]);if(Ext.isIE8){a.getView().ownerGrid.el.syncRepaint()}}});Ext.define('Ext.overrides.selection.CheckboxModel',{override:'Ext.selection.CheckboxModel',doDeselect:function(b,g){var a=this,e=a.selected,f=0,k,c,h=0,d=0,j;if(a.locked||!a.store){return !1}if(typeof b==='number'){c=a.store.getAt(b);if(!c){return !1}b=[c]}else {if(!Ext.isArray(b)){b=[b]}}var i=a.store.getTotalCount()===b.length;j=function(){++d;if(!i){e.remove(c)}if(c===a.selectionStart){a.selectionStart=null}};k=b.length;a.suspendChanges();for(;f<k;f++){c=b[f];if(a.isSelected(c)){if(a.lastSelected===c){a.lastSelected=e.last()}++h;a.onSelectChange(c,!1,g,j);if(a.destroyed){return !1}}}a.resumeChanges();if(i){e.clear()}a.maybeFireSelectionChange(d>0&&!g);return d===h}});Ext.define('Ext.selection.TreeModel',{extend:Ext.selection.RowModel,alias:'selection.treemodel',selectOnExpanderClick:!1,constructor:function(b){var a=this;a.callParent([b]);if(a.pruneRemoved){a.pruneRemoved=!1;a.pruneRemovedNodes=!0}},getStoreListeners:function(){var b=this,a=b.callParent();a.noderemove=b.onNodeRemove;return a},onNodeRemove:function(d,c,b){if(!b){var a=[];this.gatherSelected(c,a);if(a.length){this.deselect(a)}}},pruneRemovedOnRefresh:function(){return this.pruneRemovedNodes},vetoSelection:function(b){var a=this.view,d=this.selectOnExpanderClick,c;c=!d&&b.type==='click'&&b.getTarget(a.expanderSelector||a.lockingPartner&&a.lockingPartner.expanderSelector);return c||this.callParent([b])},privates:{gatherSelected:function(c,d){var b=c.childNodes,a,f,e;if(this.selected.containsKey(c.id)){d.push(c)}if(b){for(a=0,f=b.length;a<f;++a){e=b[a];this.gatherSelected(e,d)}}}}});Ext.define('Ext.slider.Thumb',{overCls:Ext.baseCSSPrefix+'slider-thumb-over',constructor:function(a){var b=this;Ext.apply(b,a||{},{cls:Ext.baseCSSPrefix+'slider-thumb',constrain:!1});b.callParent([a])},render:function(){var a=this;a.el=a.slider.innerEl.insertFirst(a.getElConfig());a.onRender()},onRender:function(){var a=this,c=a.slider.vertical?'panY':'panX',b={};b[c]=!1;a.el.setTouchAction(b);if(a.disabled){a.disable()}a.initEvents()},getElConfig:function(){var b=this,a=b.slider,c={};c[a.vertical?'bottom':a.horizontalProp]=a.calculateThumbPosition(a.normalizeValue(b.value))+'%';return {style:c,id:b.id,cls:b.cls,role:'presentation'}},move:function(h,d){var a=this,f=a.el,i=a.slider,b=i.vertical?'bottom':i.horizontalProp,g,e,c;h+='%';if(!d){f.dom.style[b]=h}else {g={};g[b]=h;if(!Ext.supports.GetPositionPercentage){e={};e[b]=f.dom.style[b]}c={target:f,duration:350,from:e,to:g,scope:a,callback:a.onAnimComplete};if(d!==!0){Ext.apply(c,d)}a.anim=new Ext.fx.Anim(c)}},onAnimComplete:function(){this.anim=null},enable:function(){var a=this.el;this.disabled=!1;if(a){a.removeCls(this.slider.disabledCls)}},disable:function(){var a=this.el;this.disabled=!0;if(a){a.addCls(this.slider.disabledCls)}},initEvents:function(){var a=this;a.tracker=new Ext.dd.DragTracker({el:a.el,onBeforeStart:a.onBeforeDragStart.bind(a),onStart:a.onDragStart.bind(a),onDrag:a.onDrag.bind(a),onEnd:a.onDragEnd.bind(a),tolerance:3,autoStart:300});a.el.hover(a.addOverCls,a.removeOverCls,a)},addOverCls:function(){var a=this;if(!a.disabled){a.el.addCls(a.overCls)}},removeOverCls:function(){this.el.removeCls(this.overCls)},onBeforeDragStart:function(e){var a=this,b=a.el,c=a.tracker.getXY(),d=a.pointerOffset=b.getXY();if(a.disabled){return !1}else {d[0]+=Math.floor(b.getWidth()/2)-c[0];d[1]+=Math.floor(b.getHeight()/2)-c[1];a.slider.promoteThumb(a);return !0}},onDragStart:function(c){var a=this,b=a.slider;b.onDragStart(a,c);a.el.addCls(Ext.baseCSSPrefix+'slider-thumb-drag');a.dragging=a.slider.dragging=!0;a.dragStartValue=a.value;b.fireEvent('dragstart',b,c,a)},onDrag:function(g){var c=this,b=c.slider,f=c.index,a=c.getValueFromTracker(),d,e;if(a!==undefined){if(c.constrain){d=b.thumbs[f+1];e=b.thumbs[f-1];if(e!==undefined&&a<=e.value){a=e.value}if(d!==undefined&&a>=d.value){a=d.value}}b.setValue(f,a,!1);b.fireEvent('drag',b,g,c)}},getValueFromTracker:function(){var c=this.slider,b=this.tracker.getXY(),a;b[0]+=this.pointerOffset[0];b[1]+=this.pointerOffset[1];a=c.getTrackpoint(b);if(a!=null){return c.reversePixelValue(a)}},onDragEnd:function(d){var a=this,b=a.slider,c=a.value;b.onDragEnd(a,d);a.el.removeCls(Ext.baseCSSPrefix+'slider-thumb-drag');a.dragging=b.dragging=!1;b.fireEvent('dragend',b,d);if(a.dragStartValue!==c){b.fireEvent('changecomplete',b,c,a)}},destroy:function(){var a=this,b=this.anim;if(b){b.end()}a.el=a.tracker=a.anim=Ext.destroy(a.el,a.tracker);a.callParent()}});Ext.define('Ext.slider.Tip',{extend:Ext.tip.Tip,alias:'widget.slidertip',offsets:null,align:null,position:'',minWidth:10,defaultVerticalPosition:'left',defaultHorizontalPosition:'top',isSliderTip:!0,init:function(d){var a=this,c,b;if(!a.position){a.position=d.vertical?a.defaultVerticalPosition:a.defaultHorizontalPosition}switch(a.position){case 'top':b=[0,-10];c='b-t?';break;case 'bottom':b=[0,10];c='t-b?';break;case 'left':b=[-10,0];c='r-l?';break;case 'right':b=[10,0];c='l-r?';break;}if(!a.align){a.align=c}if(!a.offsets){a.offsets=b}d.on({scope:a,dragstart:a.onSlide,drag:a.onSlide,dragend:a.hide,destroy:a.destroy})},onSlide:function(c,d,b){var a=this;a.update(a.getText(b));a.show();a.el.alignTo(b.el,a.align,a.offsets)},getText:function(a){return String(a.value)}});Ext.define('Ext.slider.Multi',{extend:Ext.form.field.Base,alias:'widget.multislider',alternateClassName:'Ext.slider.MultiSlider',vertical:!1,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,pageSize:10,increment:0,clickRange:[5,15],clickToChange:!0,animate:!0,dragging:!1,constrainThumbs:!0,useTips:!0,tipText:null,defaultBindProperty:'value',publishes:['value'],thumbPerValue:!1,ariaRole:'slider',focusable:!0,needArrowKeys:!0,tabIndex:0,skipLabelForAttribute:!0,focusCls:'slider-focus',childEls:['endEl','innerEl'],fieldSubTpl:['<div id="{id}" data-ref="inputEl" {inputAttrTpl}',' class="',Ext.baseCSSPrefix,'slider {fieldCls} {vertical}','{childElCls}"','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>','>','<div id="{cmpId}-endEl" data-ref="endEl" class="'+Ext.baseCSSPrefix+'slider-end" role="presentation">','<div id="{cmpId}-innerEl" data-ref="innerEl" class="'+Ext.baseCSSPrefix+'slider-inner" role="presentation">','{%this.renderThumbs(out, values)%}','</div>','</div>','</div>',{renderThumbs:function(h,f){var e=f.$comp,a=0,c=e.thumbs,g=c.length,d,b;for(;a<g;a++){d=c[a];b=d.getElConfig();b.id=e.id+'-thumb-'+a;Ext.DomHelper.generateMarkup(b,h)}},disableFormats:!0}],horizontalProp:'left',initValue:function(){var a=this,b=Ext.valueFrom,d=a.thumbPerValue,c;c=b(a.values,[b(a.value,b(a.minValue,0))]);a.originalValue=c;a.initializingValues=!0;a.updateValues(c);a.initializingValues=!1;a.thumbPerValue=d},initComponent:function(){var a=this,c=a.tipText,b,f,d,g,e;a.thumbs=[];a.keyIncrement=Math.max(a.increment,a.keyIncrement);a.extraFieldBodyCls=Ext.baseCSSPrefix+'slider-ct-'+(a.vertical?'vert':'horz');a.callParent();if(a.useTips){b={};if(Ext.isObject(a.useTips)){Ext.apply(b,a.useTips)}else {if(c){b.getText=c}}if(typeof (c=b.getText)==='string'){b.getText=function(b){return Ext.callback(c,null,[b],0,a,a)}}e=a.plugins=a.plugins||[];g=e.length;for(d=0;d<g;d++){if(e[d].isSliderTip){f=!0;break}}if(!f){a.plugins.push(new Ext.slider.Tip(b))}}},addThumb:function(c){var a=this,b=new Ext.slider.Thumb({ownerCt:a,value:c,slider:a,index:a.thumbs.length,constrain:a.constrainThumbs,disabled:!!a.readOnly});a.thumbs.push(b);if(a.rendered){b.render()}return b},promoteThumb:function(c){var a=this.thumbStack||(this.thumbStack=Ext.Array.slice(this.thumbs)),e=a.length,d=10000,b;if(a[0]!==c){Ext.Array.remove(a,c);a.unshift(c)}for(b=0;b<e;b++){a[b].el.setStyle('zIndex',d);d-=1000}},getSubTplData:function(d){var a=this,c,b;c=Ext.apply(a.callParent([d]),{$comp:a,vertical:a.vertical?Ext.baseCSSPrefix+'slider-vert':Ext.baseCSSPrefix+'slider-horz',minValue:a.minValue,maxValue:a.maxValue,value:a.value,tabIdx:a.tabIndex,childElCls:''});b=c.inputElAriaAttributes;if(b){if(!b['aria-labelledby']){b['aria-labelledby']=a.id+'-labelEl'}b['aria-orientation']=a.vertical?'vertical':'horizontal';b['aria-valuemin']=a.minValue;b['aria-valuemax']=a.maxValue;b['aria-valuenow']=a.value}return c},onRender:function(){var b=this,d=b.thumbs,e=d.length,a=0,c;b.callParent(arguments);for(a=0;a<e;a++){c=d[a];c.el=b.el.getById(b.id+'-thumb-'+a);c.onRender()}},initEvents:function(){var a=this;a.callParent();a.mon(a.el,{scope:a,mousedown:a.onMouseDown,keydown:a.onKeyDown})},onDragStart:Ext.emptyFn,onDragEnd:Ext.emptyFn,getTrackpoint:function(f){var b=this,g=b.vertical,d=b.innerEl,a,e,c;if(g){c='top';a=d.getHeight()}else {c=b.horizontalProp;a=d.getWidth()}f=b.transformTrackPoints(d.translatePoints(f));e=Ext.Number.constrain(f[c],0,a);return g?a-e:e},transformTrackPoints:Ext.identityFn,checkChange:Ext.emptyFn,onMouseDown:function(f){var a=this,b=!1,d=0,e=a.thumbs,g=e.length,c;if(a.disabled){return}for(;!b&&d<g;d++){b=b||f.target===e[d].el.dom}a.focus();if(a.clickToChange&&!b){c=a.getTrackpoint(f.getXY());if(c!==undefined){a.onClickChange(c)}}},onClickChange:function(c){var a=this,b,d;b=a.getNearest(c);if(!b.disabled){d=b.index;a.setValue(d,Ext.util.Format.round(a.reversePixelValue(c),a.decimalPrecision),undefined,!0)}},getNearest:function(i){var d=this,h=d.reversePixelValue(i),g=d.getRange()+5,a=null,j=d.thumbs,f=0,k=j.length,b,c,e;for(;f<k;f++){b=d.thumbs[f];c=b.value;e=Math.abs(c-h);if(Math.abs(e)<=g){if(a&&a.value==c&&c>h&&b.index>a.index){continue}a=b;g=e}}return a},onKeyDown:function(b){var a=this,e=a.ariaEl.dom,d,c;d=b.getKey();if(a.disabled||a.thumbs.length!==1){if(d!==b.TAB){b.preventDefault()}return}switch(d){case b.UP:case b.RIGHT:c=b.ctrlKey?a.maxValue:a.getValue(0)+a.keyIncrement;break;case b.DOWN:case b.LEFT:c=b.ctrlKey?a.minValue:a.getValue(0)-a.keyIncrement;break;case b.HOME:c=a.minValue;break;case b.END:c=a.maxValue;break;case b.PAGE_UP:c=a.getValue(0)+a.pageSize;break;case b.PAGE_DOWN:c=a.getValue(0)-a.pageSize;break;}if(c!==undefined){b.stopEvent();c=a.normalizeValue(c);a.setValue(0,c,undefined,!0);if(e){e.setAttribute('aria-valuenow',c)}}},normalizeValue:function(a){var b=this,c=b.zeroBasedSnapping?'snap':'snapInRange';a=Ext.Number[c](a,b.increment,b.minValue,b.maxValue);a=Ext.util.Format.round(a,b.decimalPrecision);a=Ext.Number.constrain(a,b.minValue,b.maxValue);return a},setMinValue:function(c){var a=this,e=a.thumbs,g=e.length,d=a.ariaEl.dom,f,b;a.minValue=c;for(b=0;b<g;++b){f=e[b];if(f.value<c){a.setValue(b,c,!1)}}if(d){d.setAttribute('aria-valuemin',c)}a.syncThumbs()},setMaxValue:function(c){var a=this,e=a.thumbs,g=e.length,d=a.ariaEl.dom,f,b;a.maxValue=c;for(b=0;b<g;++b){f=e[b];if(f.value>c){a.setValue(b,c,!1)}}if(d){d.setAttribute('aria-valuemax',c)}a.syncThumbs()},setValue:function(e,b,d,g){var a=this,f=a.ariaEl.dom,c;if(Ext.isArray(e)){a.updateValues(e,b);return a}c=a.thumbs[e];b=a.normalizeValue(b);if(b!==c.value&&a.fireEvent('beforechange',a,b,c.value,c,'update')!==!1){c.value=b;if(a.rendered){if(Ext.isDefined(d)){d=d===!1?!1:d}else {d=a.animate}c.move(a.calculateThumbPosition(b),d);if(e===0&&f){f.setAttribute('aria-valuenow',b)}a.fireEvent('change',a,b,c,'update');a.checkDirty();if(g){a.fireEvent('changecomplete',a,b,c)}}}return a},calculateThumbPosition:function(d){var b=this,c=b.minValue,a=(d-c)/b.getRange()*100;if(isNaN(a)){a=0}return a},getRatio:function(){var a=this,d=a.innerEl,b=a.vertical?d.getHeight():d.getWidth(),c=a.getRange();return c===0?b:b/c},getRange:function(){return this.maxValue-this.minValue},reversePixelValue:function(a){return this.minValue+a/this.getRatio()},reversePercentageValue:function(a){return this.minValue+this.getRange()*(a/100)},onDisable:function(){var a=this,d=0,e=a.thumbs,g=e.length,b,c,f;a.callParent();for(;d<g;d++){b=e[d];c=b.el;b.disable();if(Ext.isIE){f=c.getXY();c.hide();a.innerEl.addCls(a.disabledCls).dom.disabled=!0;if(!a.thumbHolder){a.thumbHolder=a.endEl.createChild({role:'presentation',cls:Ext.baseCSSPrefix+'slider-thumb '+a.disabledCls})}a.thumbHolder.show().setXY(f)}}},onEnable:function(){var a=this,c=0,d=a.thumbs,f=d.length,b,e;this.callParent();for(;c<f;c++){b=d[c];e=b.el;b.enable();if(Ext.isIE){a.innerEl.removeCls(a.disabledCls).dom.disabled=!1;if(a.thumbHolder){a.thumbHolder.hide()}e.show();a.syncThumbs()}}},syncThumbs:function(){if(this.rendered){var b=this.thumbs,c=b.length,a=0;for(;a<c;a++){b[a].move(this.calculateThumbPosition(b[a].value))}}},getValue:function(a){return Ext.isNumber(a)?this.thumbs[a].value:this.getValues()},getValues:function(){var c=[],a=0,b=this.thumbs,d=b.length;for(;a<d;a++){c.push(b[a].value)}return c},getSubmitValue:function(){var a=this;return a.disabled||!a.submitValue?null:a.getValue()},reset:function(){var a=this,b=[].concat(a.originalValue);a.updateValues(b);a.clearInvalid();delete a.wasValid},updateValues:function(j,n,l){var a=this,k=j.length,f=a.thumbs,m=f.length,g=[],e=a.initializingValues||l,b,c,d,i,h;for(b=0;b<k;b++){c=f[b];d=j[b];if(c){a.setValue(b,d,n)}else {g.push(d)}}if(a.thumbPerValue||a.initializingValues){i=g.length;h=m-k;for(b=0;b<i;b++){d=g[b];if(e||a.fireEvent('beforechange',a,d,null,null,'add')!==!1){c=a.addThumb(a.normalizeValue(d));if(!e){a.fireEvent('change',a,d,c,'add')}a.checkDirty()}}for(b=0;b<h;b++){c=f[f.length-1];if(e||a.fireEvent('beforechange',a,null,c.value,c,'remove')!==!1){a.removeThumb(c);if(!e){a.fireEvent('change',a,null,null,'remove')}a.checkDirty()}}}return a},removeThumb:function(a){var c=this,d=c.thumbs,b;if(Ext.isNumber(a)){b=a;a=d[b]}else {b=c.findThumbIndex(a)}if(a&&Ext.isNumber(b)){d.splice(b,1);c.thumbStack=Ext.Array.slice(c.thumbs);Ext.destroy(a)}},findThumbIndex:function(d){var b=this.thumbs,e=b.length,c=null,a;for(a=0;a<e;a++){if(b[a]===d){c=a;break}}return c},setReadOnly:function(d){var c=this,b=c.thumbs,e=b.length,a=0;c.callParent(arguments);d=c.readOnly;for(;a<e;++a){if(d){b[a].disable()}else {b[a].enable()}}},doDestroy:function(){var a=this;if(a.rendered){Ext.destroy(a.thumbs)}if(a.thumbHolder){a.thumbHolder.destroy();a.thumbHolder=null}a.callParent()}});Ext.define('Ext.slider.Single',{extend:Ext.slider.Multi,alias:['widget.slider','widget.sliderfield'],alternateClassName:['Ext.Slider','Ext.form.SliderField','Ext.slider.SingleSlider','Ext.slider.Slider'],initComponent:function(){if(this.publishOnComplete){this.valuePublishEvent='changecomplete'}this.callParent()},publishOnComplete:!0,getValue:function(){return this.callParent([0])},setValue:function(d,c){var a=arguments,b=a.length;if(b===1||b<=3&&typeof a[1]!=='number'){a=Ext.toArray(a);a.unshift(0)}return this.callParent(a)},getNearest:function(){return this.thumbs[0]}});Ext.define('Ext.state.LocalStorageProvider',{extend:Ext.state.Provider,alias:'state.localstorage',constructor:function(){var a=this;a.callParent(arguments);a.store=a.getStorageObject();if(a.store){a.state=a.readLocalStorage()}else {a.state={}}},readLocalStorage:function(){var b=this.store,c={},d=b.getKeys(),e=d.length,a;while(e--){a=d[e];c[a]=this.decodeValue(b.getItem(a))}return c},set:function(c,b){var a=this;a.clear(c);if(b!=null){a.store.setItem(c,a.encodeValue(b));a.callParent(arguments)}},clear:function(a){this.store.removeItem(a);this.callParent(arguments)},getStorageObject:function(){var b=this.prefix,a=b,c=a.length-1;if(a.charAt(c)==='-'){a=a.substring(0,c)}return new Ext.util.LocalStorage({id:a,prefix:b})}});Ext.define('Ext.tab.Tab',{extend:Ext.button.Button,alias:'widget.tab',isTab:!0,baseCls:Ext.baseCSSPrefix+'tab',closeElOverCls:Ext.baseCSSPrefix+'tab-close-btn-over',closeElPressedCls:Ext.baseCSSPrefix+'tab-close-btn-pressed',config:{rotation:'default',tabPosition:'top'},closable:!0,closeText:'removable',active:!1,childEls:['closeEl'],scale:!1,ariaRole:'tab',tabIndex:-1,keyMap:{scope:'this',DELETE:'onDeleteKey'},_btnWrapCls:Ext.baseCSSPrefix+'tab-wrap',_btnCls:Ext.baseCSSPrefix+'tab-button',_baseIconCls:Ext.baseCSSPrefix+'tab-icon-el',_glyphCls:Ext.baseCSSPrefix+'tab-glyph',_innerCls:Ext.baseCSSPrefix+'tab-inner',_textCls:Ext.baseCSSPrefix+'tab-text',_noTextCls:Ext.baseCSSPrefix+'tab-no-text',_hasIconCls:Ext.baseCSSPrefix+'tab-icon',_activeCls:Ext.baseCSSPrefix+'tab-active',_closableCls:Ext.baseCSSPrefix+'tab-closable',overCls:Ext.baseCSSPrefix+'tab-over',_pressedCls:Ext.baseCSSPrefix+'tab-pressed',_disabledCls:Ext.baseCSSPrefix+'tab-disabled',_rotateClasses:{1:Ext.baseCSSPrefix+'tab-rotate-right',2:Ext.baseCSSPrefix+'tab-rotate-left'},_positions:{top:{'default':'top',0:'top',1:'left',2:'right'},right:{'default':'top',0:'right',1:'top',2:'bottom'},bottom:{'default':'bottom',0:'bottom',1:'right',2:'left'},left:{'default':'top',0:'left',1:'bottom',2:'top'}},_defaultRotations:{top:0,right:1,bottom:0,left:2},initComponent:function(){var a=this;if(a.card){a.setCard(a.card)}a.callParent(arguments)},getActualRotation:function(){var a=this.getRotation();return a!=='default'?a:this._defaultRotations[this.getTabPosition()]},updateRotation:function(){this.syncRotationAndPosition()},updateTabPosition:function(){this.syncRotationAndPosition()},syncRotationAndPosition:function(){var a=this,g=a._rotateClasses,h=a.getTabPosition(),f=a.getActualRotation(),c=a._rotateCls,e=a._rotateCls=g[f],b=a._positionCls,d=a._positionCls=a._positions[h][f];if(c!==e){if(c){a.removeCls(c)}if(e){a.addCls(e)}}if(b!==d){if(b){a.removeClsWithUI(b)}if(d){a.addClsWithUI(d)}if(a.rendered){a.updateFrame()}}if(a.rendered){a.setElOrientation()}},onAdded:function(a,c,b){this.callParent([a,c,b]);this.syncRotationAndPosition()},getTemplateArgs:function(){var b=this,a=b.callParent();a.closable=b.closable;a.closeText=b.closeText;return a},beforeRender:function(){var a=this,c=a.up('tabbar'),b=a.up('tabpanel');a.callParent();a.ariaRenderAttributes=a.ariaRenderAttributes||{};if(a.active){a.ariaRenderAttributes['aria-selected']=!0;a.addCls(a._activeCls)}else {a.ariaRenderAttributes['aria-selected']=!1}a.syncClosableCls();if(!a.minWidth){a.minWidth=c?c.minTabWidth:a.minWidth;if(!a.minWidth&&b){a.minWidth=b.minTabWidth}if(a.minWidth&&a.iconCls){a.minWidth+=25}}if(!a.maxWidth){a.maxWidth=c?c.maxTabWidth:a.maxWidth;if(!a.maxWidth&&b){a.maxWidth=b.maxTabWidth}}},onRender:function(){var a=this;a.setElOrientation();a.callParent(arguments);if(a.closable){a.closeEl.addClsOnOver(a.closeElOverCls);a.closeEl.addClsOnClick(a.closeElPressedCls)}},setElOrientation:function(){var c=this,a=c.getActualRotation(),b=c.el;if(a){b.setVertical(a===1?90:270)}else {b.setHorizontal()}},enable:function(b){var a=this;a.callParent(arguments);a.removeCls(a._disabledCls);return a},disable:function(b){var a=this;a.callParent(arguments);a.addCls(a._disabledCls);return a},setClosable:function(b){var a=this;b=!arguments.length||!!b;if(a.closable!==b){a.closable=b;if(a.card){a.card.closable=b}a.syncClosableCls();if(a.rendered){a.syncClosableElements();a.updateLayout()}}},syncClosableElements:function(){var a=this,b=a.closeEl;if(a.closable){if(!b){b=a.closeEl=a.btnWrap.insertSibling({tag:'span',id:a.id+'-closeEl',cls:a.baseCls+'-close-btn',html:a.closeText},'after')}b.addClsOnOver(a.closeElOverCls);b.addClsOnClick(a.closeElPressedCls)}else {if(b){b.destroy();delete a.closeEl}}},syncClosableCls:function(){var a=this,b=a._closableCls;if(a.closable){a.addCls(b)}else {a.removeCls(b)}},setCard:function(b){var a=this;a.card=b;if(b.iconAlign){a.setIconAlign(b.iconAlign)}if(b.textAlign){a.setTextAlign(b.textAlign)}a.setText(a.title||b.title);a.setIconCls(a.iconCls||b.iconCls);a.setIcon(a.icon||b.icon);a.setGlyph(a.glyph||b.glyph)},onCloseClick:function(){var a=this;if(a.fireEvent('beforeclose',a)!==!1){if(a.tabBar){if(a.tabBar.closeTab(a)===!1){return}}else {a.fireClose()}}},fireClose:function(){this.fireEvent('close',this)},onEnterKey:function(b){var a=this;if(a.tabBar){a.tabBar.onClick(b,a.el);b.stopEvent();return !1}},onDeleteKey:function(a){if(this.closable){this.onCloseClick();a.stopEvent();return !1}},beforeClick:function(a){if(!a){this.focus()}},activate:function(d){var a=this,b=a.card,c=a.ariaEl.dom;a.active=!0;a.addCls(a._activeCls);if(c){c.setAttribute('aria-selected',!0)}else {a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-selected']=!0}if(b){if(b.ariaEl.dom){b.ariaEl.dom.setAttribute('aria-expanded',!0)}else {b.ariaRenderAttributes=b.ariaRenderAttributes||{};b.ariaRenderAttributes['aria-expanded']=!0}}if(d!==!0){a.fireEvent('activate',a)}},deactivate:function(d){var a=this,b=a.card,c=a.ariaEl.dom;a.active=!1;a.removeCls(a._activeCls);if(c){c.setAttribute('aria-selected',!1)}else {a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-selected']=!1}if(b){if(b.ariaEl.dom){b.ariaEl.dom.setAttribute('aria-expanded',!1)}else {b.ariaRenderAttributes=b.ariaRenderAttributes||{};b.ariaRenderAttributes['aria-expanded']=!1}}if(d!==!0){a.fireEvent('deactivate',a)}},privates:{getFramingInfoCls:function(){return this.baseCls+'-'+this.ui+'-'+this._positionCls},wrapPrimaryEl:function(a){Ext.Button.superclass.wrapPrimaryEl.call(this,a)}}});Ext.define('Ext.theme.material.tab.Tab',{override:'Ext.tab.Tab',ripple:{color:'default'}});Ext.define('Ext.tab.Bar',{extend:Ext.panel.Bar,xtype:'tabbar',baseCls:Ext.baseCSSPrefix+'tab-bar',componentLayout:'body',isTabBar:!0,config:{tabRotation:'default',tabStretchMax:!0,activateOnFocus:!0},defaultType:'tab',plain:!1,ensureActiveVisibleOnChange:!0,ariaRole:'tablist',focusableContainer:!0,childEls:['body','strip'],_stripCls:Ext.baseCSSPrefix+'tab-bar-strip',_baseBodyCls:Ext.baseCSSPrefix+'tab-bar-body',renderTpl:'<tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'before\'); %}</tpl>'+'<div id="{id}-body" data-ref="body" role="presentation" class="{baseBodyCls} {baseBodyCls}-{ui} '+'{bodyCls} {bodyTargetCls}{childElCls}"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>'+'{%this.renderContainer(out,values)%}'+'</div>'+'<tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'after\'); %}</tpl>'+'<div id="{id}-strip" data-ref="strip" role="presentation" class="{stripCls} {stripCls}-{ui}{childElCls}"></div>',_reverseDockNames:{left:'right',right:'left'},_layoutAlign:{top:'end',right:'begin',bottom:'begin',left:'end'},initComponent:function(){var a=this,b=a.initialConfig.layout,d=b&&b.align,c=b&&b.overflowHandler;if(a.plain){a.addCls(a.baseCls+'-plain')}a.layout=Ext.apply({align:d||(a.getTabStretchMax()?'stretchmax':a._layoutAlign[a.dock]),overflowHandler:c||'scroller'},a.layout);a.callParent();a.on({click:a.onClick,element:'el',scope:a})},ensureTabVisible:function(a){var b=this,d=b.tabPanel,c=b.layout.overflowHandler;if(b.rendered&&c&&b.tooNarrow&&c.scrollToItem){if(a||a===0){if(!a.isTab){if(Ext.isNumber(a)){a=this.items.getAt(a)}else {if(a.isComponent&&d&&d.items.contains(a)){a=a.tab}}}}if(!a){a=b.activeTab}if(a){c.scrollToItem(a)}}},initRenderData:function(){var a=this;return Ext.apply(a.callParent(),{bodyCls:a.bodyCls,baseBodyCls:a._baseBodyCls,bodyTargetCls:a.bodyTargetCls,stripCls:a._stripCls,dock:a.dock})},setDock:function(f){var b=this,a=b.items,d=b.ownerCt,e,c,g;a=a&&a.items;if(a){for(c=0,g=a.length;c<g;c++){e=a[c];if(e.isTab){e.setTabPosition(f)}}}if(b.rendered){b.resetItemMargins();if(d&&d.isHeader){d.resetItemMargins()}b.needsScroll=!0}b.callParent([f])},updateTabRotation:function(f){var b=this,a=b.items,c,e,d;a=a&&a.items;if(a){for(c=0,e=a.length;c<e;c++){d=a[c];if(d.isTab){d.setRotation(f)}}}if(b.rendered){b.resetItemMargins();b.needsScroll=!0;b.updateLayout()}},onRender:function(){var a=this,b=this.layout.overflowHandler;a.callParent();if(Ext.isIE8&&a.vertical){a.el.on({mousemove:a.onMouseMove,scope:a})}if(b&&b.type==='menu'){b.menu.on('click','onOverflowMenuItemClick',a)}},afterLayout:function(){this.adjustTabPositions();this.callParent(arguments)},onAdd:function(a,c){var b=this.onTabContentChange;if(this.ensureActiveVisibleOnChange){a.barListeners=a.on({scope:this,destroyable:!0,glyphchange:b,iconchange:b,textchange:b})}this.callParent([a,c])},onAdded:function(a,c,b){if(a.isHeader){this.addCls(a.baseCls+'-'+a.ui+'-tab-bar')}this.callParent([a,c,b])},onRemove:function(a,c){var b=this;if(b.ensureActiveVisibleOnChange){if(!c){a.barListeners.destroy()}a.barListeners=null}if(a===b.previousTab){b.previousTab=null}b.callParent([a,c])},onRemoved:function(b){var a=this.ownerCt;if(a.isHeader){this.removeCls(a.baseCls+'-'+a.ui+'-tab-bar')}this.callParent([b])},onTabContentChange:function(a){if(a===this.activeTab){this.ensureTabVisible(a)}},afterComponentLayout:function(d){var a=this,c=a.needsScroll,b=a.layout.overflowHandler;a.callParent(arguments);if(b&&c&&a.tooNarrow&&b.scrollToItem){b.scrollToItem(a.activeTab)}delete a.needsScroll},onMouseMove:function(d){var b=this,c=b._overTab,e,a;if(d.getTarget('.'+Ext.baseCSSPrefix+'box-scroller')){return}e=b.getTabInfoFromPoint(d.getXY());a=e.tab;if(a!==c){if(c&&c.rendered){c.onMouseLeave(d);b._overTab=null}if(a){a.onMouseEnter(d);b._overTab=a;if(!a.disabled){b.el.setStyle('cursor','pointer')}}else {b.el.setStyle('cursor','default')}}},onMouseLeave:function(b){var a=this._overTab;if(a&&a.rendered){a.onMouseLeave(b)}},getTabInfoFromPoint:function(x){var a=this,w=a.items.items,y=w.length,t=a.layout.innerCt,r=t.getXY(),v=new Ext.util.Point(x[0],x[1]),n=0,b,s,d,u,k,l,m,h,g,e,f,j,i,p,o,q,c;for(;n<y;n++){c=w[n];b=c.lastBox;if(!b||!c.isTab){continue}e=r[0]+b.x;f=r[1]-t.dom.scrollTop+b.y;j=b.width;i=b.height;s=new Ext.util.Region(f,e+j,f+i,e);if(s.contains(v)){d=c.closeEl;if(d){if(a._isTabReversed===undefined){a._isTabReversed=o=c.btnWrap.dom.currentStyle.filter.indexOf('rotation=2')!==-1}q=o?this._reverseDockNames[a.dock]:a.dock;h=d.getWidth();g=d.getHeight();k=a.getCloseXY(d,e,f,j,i,h,g,q);l=k[0];m=k[1];p=new Ext.util.Region(m,l+h,m+g,l);u=p.contains(v)}break}}return {tab:c,close:u}},getCloseXY:function(k,b,c,j,i,g,f,h){var a=k.getXY(),d,e;if(h==='right'){d=b+j-(a[1]-c+f);e=c+(a[0]-b)}else {d=b+(a[1]-c);e=c+b+i-a[0]-g}return [d,e]},closeTab:function(b){var e=this,a=b.card,d=e.tabPanel,c;if(a&&a.fireEvent('beforeclose',a)===!1){return !1}c=e.findNextActivatable(b);Ext.suspendLayouts();if(c){if(d){d.setActiveTab(c.card)}else {e.setActiveTab(c)}c.focus()}if(d&&a){delete b.ownerCt;a.fireEvent('close',a);d.remove(a);if(a.ownerCt!==d){b.fireClose();e.remove(b)}else {b.ownerCt=e;Ext.resumeLayouts(!0);return !1}}Ext.resumeLayouts(!0)},findNextActivatable:function(b){var d=this,a=d.previousTab,c;if(b.active&&d.items.getCount()>1){if(a&&a!==b&&!a.disabled){c=a}else {c=b.next('tab[disabled=false]')||b.prev('tab[disabled=false]')}}return c||d.activeTab},setActiveTab:function(b,c){var a=this;if(!b.disabled&&b!==a.activeTab){if(a.activeTab){if(a.activeTab.destroyed){a.previousTab=null}else {a.previousTab=a.activeTab;a.activeTab.deactivate();a.deactivateFocusable(a.activeTab)}}b.activate();a.activateFocusable(b);a.activeTab=b;a.needsScroll=!0;if(!c){a.fireEvent('change',a,b,b.card);a.updateLayout()}}},privates:{adjustTabPositions:function(){var g=this,f=g.items.items,h=f.length,a,b,e,c,d;if(!Ext.isIE8){d=g._getTabAdjustProp();while(h--){a=f[h];e=a.el;b=a.lastBox;c=a.isTab?a.getActualRotation():0;if(c===1&&a.isVisible()){e.setStyle(d,b.x+b.width+'px')}else {if(c===2&&a.isVisible()){e.setStyle(d,b.x-b.height+'px')}}}}},applyTargetCls:function(a){this.bodyTargetCls=a},_getTabAdjustProp:function(){return 'left'},getTargetEl:function(){return this.body||this.frameBody||this.el},onClick:function(c,g){var f=this,e,a,b,d;if(c.getTarget('.'+Ext.baseCSSPrefix+'box-scroller')){return}if(Ext.isIE8&&f.vertical){d=f.getTabInfoFromPoint(c.getXY());a=d.tab;b=d.close}else {e=c.getTarget('.'+Ext.tab.Tab.prototype.baseCls);a=e&&Ext.getCmp(e.id);b=a&&a.closeEl&&g===a.closeEl.dom}if(b){c.preventDefault()}if(a&&a.isDisabled&&!a.isDisabled()){a.beforeClick(b);if(a.closable&&b){a.onCloseClick()}else {f.doActivateTab(a)}}},onOverflowMenuItemClick:function(e,c,f,d){var a=c&&c.masterComponent,b=this.layout.overflowHandler;if(a&&!a.isDisabled()){this.doActivateTab(a);if(b.menuTrigger){b.menuTrigger.focus()}}},doActivateTab:function(a){var b=this.tabPanel;if(b){if(!a.disabled){b.setActiveTab(a.card)}}else {this.setActiveTab(a)}},onFocusableContainerFocus:function(d){var b=this,c=b.mixins.focusablecontainer,a;a=c.onFocusableContainerFocus.call(b,d);if(a&&a.isTab){b.doActivateTab(a)}},onFocusableContainerFocusEnter:function(d){var b=this,c=b.mixins.focusablecontainer,a;a=c.onFocusableContainerFocusEnter.call(b,d);if(a&&a.isTab){b.doActivateTab(a)}},focusChild:function(d,c){var b=this,e=b.mixins.focusablecontainer,a;a=e.focusChild.call(b,d,c);if(b.activateOnFocus&&a&&a.isTab){b.doActivateTab(a)}}}});Ext.define('Ext.tab.Panel',{extend:Ext.panel.Panel,alias:'widget.tabpanel',alternateClassName:['Ext.TabPanel'],config:{tabBar:undefined,tabPosition:'top',tabRotation:'default',tabStretchMax:!0},removePanelHeader:!0,plain:!1,itemCls:Ext.baseCSSPrefix+'tabpanel-child',minTabWidth:undefined,maxTabWidth:undefined,deferredRender:!0,_defaultTabRotation:{top:0,right:1,bottom:0,left:2},initComponent:function(){var a=this,c=a.activeTab!==null?a.activeTab||0:null,d=a.dockedItems,b=a.header,f=a.tabBarHeaderPosition,e=a.getTabBar(),g;a.layout=Ext.apply({type:'card',deferredRender:a.deferredRender,itemCls:a.itemCls,activeItem:c},a.layout);if(f!=null){b=a.header=Ext.apply({},b);g=b.items=b.items?b.items.slice():[];b.itemPosition=f;g.push(e);b.hasTabBar=!0}else {d=[].concat(a.dockedItems||[]);d.push(e);a.dockedItems=d}a.callParent(arguments);c=a.activeTab=a.getComponent(c);if(c){e.setActiveTab(c.tab,!0)}},onRender:function(){var b=this.items.items,c=b.length,a;this.callParent(arguments);for(a=0;a<c;++a){b[a].getBind()}},setActiveTab:function(a){var b=this,c;if(!Ext.isObject(a)||a.isComponent){a=b.getComponent(a)}c=b.getActiveTab();if(a){Ext.suspendLayouts();if(!a.isComponent){a=b.add(a)}if(c===a||b.fireEvent('beforetabchange',b,a,c)===!1){Ext.resumeLayouts(!0);return c}b.activeTab=a;b.layout.setActiveItem(a);a=b.activeTab=b.layout.getActiveItem();if(a&&a!==c){b.tabBar.setActiveTab(a.tab);Ext.resumeLayouts(!0);if(c!==a){b.fireEvent('tabchange',b,a,c)}}else {Ext.resumeLayouts(!0)}return a}return c},setActiveItem:function(a){return this.setActiveTab(a)},getActiveTab:function(){var a=this,b=a.getComponent(a.activeTab);if(b&&a.items.indexOf(b)!==-1){a.activeTab=b}else {a.activeTab=undefined}return a.activeTab},applyTabBar:function(c){var a=this,b=a.tabBarHeaderPosition!=null?a.getHeaderPosition():a.getTabPosition();return new Ext.tab.Bar(Ext.apply({ui:a.ui,dock:b,tabRotation:a.getTabRotation(),vertical:b==='left'||b==='right',plain:a.plain,tabStretchMax:a.getTabStretchMax(),tabPanel:a},c))},updateHeaderPosition:function(a,c){var b=this.getTabBar();if(b&&this.tabBarHeaderPosition!=null){b.setDock(a)}this.callParent([a,c])},updateTabPosition:function(b){var a=this.getTabBar();if(a&&this.tabBarHeaderPosition==null){a.setDock(b)}},updateTabRotation:function(b){var a=this.getTabBar();if(a){a.setTabRotation(b)}},onAdd:function(a,g){var b=this,e=Ext.apply({},a.tabConfig),c=b.getTabBar(),d,f={xtype:'tab',title:a.title,icon:a.icon,iconCls:a.iconCls,glyph:a.glyph,ui:c.ui,card:a,disabled:a.disabled,closable:a.closable,hidden:a.hidden&&!a.hiddenByLayout,tooltip:a.tooltip,tabBar:c,tabPosition:c.dock,rotation:c.getTabRotation()};if(a.closeText!==undefined){f.closeText=a.closeText}e=Ext.applyIf(e,f);a.tab=b.tabBar.insert(g,e);a.ariaRole='tabpanel';d=a.ariaEl.dom;if(d){d.setAttribute('aria-labelledby',a.tab.id)}else {a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes['aria-labelledby']=a.tab.id}a.on({scope:b,enable:b.onItemEnable,disable:b.onItemDisable,beforeshow:b.onItemBeforeShow,iconchange:b.onItemIconChange,iconclschange:b.onItemIconClsChange,glyphchange:b.onItemGlyphChange,titlechange:b.onItemTitleChange});if(a.isPanel){if(b.removePanelHeader){if(a.rendered){if(a.header){a.header.hide()}}else {a.header=!1}}if(a.isPanel&&b.border){a.setBorder(!1)}}if(b.rendered){a.getBind()}if(b.rendered&&b.loader&&b.activeTab===undefined&&b.layout.activeItem!==null){b.setActiveTab(0)}},onMove:function(b,d,a){var c=this.getTabBar();this.callParent([b,d,a]);if(c.items.indexOf(b.tab)!==a){c.move(b.tab,a)}},onItemEnable:function(a){a.tab.enable()},onItemDisable:function(a){a.tab.disable()},onItemBeforeShow:function(a){if(a!==this.activeTab){this.setActiveTab(a);return !1}},onItemGlyphChange:function(b,a){b.tab.setGlyph(a)},onItemIconChange:function(b,a){b.tab.setIcon(a)},onItemIconClsChange:function(b,a){b.tab.setIconCls(a)},onItemTitleChange:function(b,a){b.tab.setText(a)},onRemove:function(b,c){var a=this;b.un({scope:a,enable:a.onItemEnable,disable:a.onItemDisable,beforeshow:a.onItemBeforeShow,iconchange:a.onItemIconChange,iconclschange:a.onItemIconClsChange,glyphchange:a.onItemGlyphChange,titlechange:a.onItemTitleChange});if(b.tab&&!a.destroying&&b.tab.ownerCt===a.tabBar){a.tabBar.remove(b.tab)}},enable:function(){var a=this,b=a.activeTab!==null?a.activeTab||0:null,c=a.disabled;a.callParent(arguments);if(c){b=b.isComponent?b:a.getComponent(b);if(b){a.getTabBar().setActiveTab(b.tab)}}return a},privates:{doRemove:function(b,d){var a=this,c;Ext.suspendLayouts();if(a.removingAll||a.destroying||a.items.getCount()===1){a.activeTab=null}else {if(b.tab&&(c=a.tabBar.items.indexOf(a.tabBar.findNextActivatable(b.tab)))!==-1){a.setActiveTab(c)}}a.callParent([b,d]);Ext.resumeLayouts();if(b.tab){delete b.tab.card;delete b.tab}}}});Ext.define('Ext.toolbar.Fill',{extend:Ext.Component,alias:'widget.tbfill',alternateClassName:'Ext.Toolbar.Fill',ariaRole:'presentation',isFill:!0,flex:1});Ext.define('Ext.toolbar.Spacer',{extend:Ext.Component,alias:'widget.tbspacer',alternateClassName:'Ext.Toolbar.Spacer',baseCls:Ext.baseCSSPrefix+'toolbar-spacer',ariaRole:'presentation'});Ext.define('Ext.tree.Column',{extend:Ext.grid.column.Column,alias:'widget.treecolumn',tdCls:Ext.baseCSSPrefix+'grid-cell-treecolumn',autoLock:!0,lockable:!1,draggable:!1,hideable:!1,iconCls:Ext.baseCSSPrefix+'tree-icon',checkboxCls:Ext.baseCSSPrefix+'tree-checkbox',elbowCls:Ext.baseCSSPrefix+'tree-elbow',expanderCls:Ext.baseCSSPrefix+'tree-expander',textCls:Ext.baseCSSPrefix+'tree-node-text',innerCls:Ext.baseCSSPrefix+'grid-cell-inner-treecolumn',customIconCls:Ext.baseCSSPrefix+'tree-icon-custom',isTreeColumn:!0,cellTpl:['<tpl for="lines">','<div class="{parent.childCls} {parent.elbowCls}-img ','{parent.elbowCls}-<tpl if=".">line<tpl else>empty</tpl>" role="presentation"></div>','</tpl>','<div class="{childCls} {elbowCls}-img {elbowCls}','<tpl if="isLast">-end</tpl><tpl if="expandable">-plus {expanderCls}</tpl>" role="presentation"></div>','<tpl if="checked !== null">','<div role="button" {ariaCellCheckboxAttr}',' class="{childCls} {checkboxCls}<tpl if="checked"> {checkboxCls}-checked</tpl>"></div>','</tpl>','<tpl if="glyph">','<span class="{baseIconCls}" ','<tpl if="glyphFontFamily">','style="font-family:{glyphFontFamily}"','</tpl>','>{glyph}</span>','<tpl else>','<tpl if="icon">','<img src="{blankUrl}"','<tpl else>','<div','</tpl>',' role="presentation" class="{childCls} {baseIconCls} {customIconCls} ','{baseIconCls}-<tpl if="leaf">leaf<tpl else><tpl if="expanded">parent-expanded<tpl else>parent</tpl></tpl> {iconCls}" ','<tpl if="icon">style="background-image:url({icon})"/><tpl else>></div></tpl>','</tpl>','<tpl if="href">','<a href="{href}" role="link" target="{hrefTarget}" class="{textCls} {childCls}">{value}</a>','<tpl else>','<span class="{textCls} {childCls}">{value}</span>','</tpl>'],uiFields:{checked:1,icon:1,iconCls:1},rowFields:{expanded:1,loaded:1,expandable:1,leaf:1,loading:1,qtip:1,qtitle:1,cls:1},initComponent:function(){var a=this;a.rendererScope=a.scope;a.setupRenderer();a.innerRenderer=a.renderer;a.renderer=a.treeRenderer;a.callParent();a.scope=a},treeRenderer:function(i,a,c,g,f,h,j){var e=this,d=c.get('cls'),b;if(a&&d){a.tdCls+=' '+d}b=e.initTemplateRendererData(i,a,c,g,f,h,j);return e.lookupTpl('cellTpl').apply(b)},initTemplateRendererData:function(h,c,f,p,o,m,n){var b=this,j=b.innerRenderer,a=f.data,e=f.parentNode,k=n.rootVisible,l=[],g,d,i;while(e&&(k||e.data.depth>0)){g=e.data;l[k?g.depth:g.depth-1]=e.isLastVisible()?0:1;e=e.parentNode}if(c){c.iconCls=c.icon=c.glyph=null}else {c={}}h=j?j.apply(b.rendererScope,arguments):h;d=c.glyph||a.glyph;if(d){d=Ext.Glyph.fly(d);i=d.fontFamily;d=d.character}return {record:f,baseIconCls:b.iconCls,customIconCls:a.icon||a.iconCls?b.customIconCls:'',glyph:d,glyphFontFamily:i,iconCls:c.iconCls||a.iconCls,icon:c.icon||a.icon,checkboxCls:b.checkboxCls,checked:a.checked,elbowCls:b.elbowCls,expanderCls:b.expanderCls,textCls:b.textCls,leaf:a.leaf,expandable:f.isExpandable(),expanded:a.expanded,isLast:f.isLastVisible(),blankUrl:Ext.BLANK_IMAGE_URL,href:a.href,hrefTarget:a.hrefTarget,lines:l,metaData:c,childCls:b.getChildCls?b.getChildCls()+' ':'',value:h||m.defaultRootText}},shouldUpdateCell:function(f,a){var b=this,d=0,e,c;if(b.hasCustomRenderer){return 1}if(a){e=a.length;for(;d<e;++d){c=a[d];if(b.rowFields[c]){return 1}if(b.uiFields[c]){return 2}}}return b.callParent([f,a])},privates:{shouldFlagCustomRenderer:function(){return this.hasCustomRenderer||this.innerRenderer&&this.innerRenderer.length>1}}});Ext.define('Ext.tree.NavigationModel',{extend:Ext.grid.NavigationModel,alias:'view.navigation.tree',initKeyNav:function(c){var a=this,b=a.view.ownerGrid.columns;a.isTreeGrid=b&&b.length>1;a.callParent([c]);a.view.grid.on({columnschanged:a.onColumnsChanged,scope:a})},onKeyNavCreate:function(b){var a=this.onAsterisk;b.map.addBinding([{key:'8',shift:!0,handler:a,scope:this},{key:Ext.event.Event.NUM_MULTIPLY,handler:a,scope:this}])},onColumnsChanged:function(){this.isTreeGrid=this.view.ownerGrid.getVisibleColumnManager().getColumns().length>1},onCellClick:function(f,e,c,d,g,b,a){this.callParent([f,e,c,d,g,b,a]);return !a.nodeToggled},onKeyLeft:function(b){var c=this,d=b.view,a=c.record;if(c.isTreeGrid&&!b.ctrlKey){return c.callParent([b])}if(b.position.column.isTreeColumn&&a.isExpanded()){d.collapse(a)}else {a=a.parentNode;if(a&&!(a.isRoot()&&!d.rootVisible)){c.setPosition(a,null,b)}}},onKeyRight:function(b){var c=this,a=c.record;if(c.isTreeGrid&&!b.ctrlKey){return c.callParent([b])}if(!a.isLeaf()){if(b.position.column.isTreeColumn&&!a.isExpanded()){b.view.expand(a)}else {if(a.isExpanded()){a=a.childNodes[0];if(a){c.setPosition(a)}}}}},onKeyEnter:function(a){if(this.record.data.checked!=null){this.toggleCheck(a)}else {this.callParent([a])}},onKeySpace:function(a){if(this.record.data.checked!=null){this.toggleCheck(a)}else {this.callParent([a])}},toggleCheck:function(a){this.view.onCheckChange(a)},onAsterisk:function(a){this.view.ownerGrid.expandAll()}});Ext.define('Ext.tree.View',{extend:Ext.view.Table,alias:'widget.treeview',config:{selectionModel:{type:'treemodel'}},isTreeView:!0,loadingCls:Ext.baseCSSPrefix+'grid-tree-loading',expandedCls:Ext.baseCSSPrefix+'grid-tree-node-expanded',leafCls:Ext.baseCSSPrefix+'grid-tree-node-leaf',expanderSelector:'.'+Ext.baseCSSPrefix+'tree-expander',checkboxSelector:'.'+Ext.baseCSSPrefix+'tree-checkbox',expanderIconOverCls:Ext.baseCSSPrefix+'tree-expander-over',nodeAnimWrapCls:Ext.baseCSSPrefix+'tree-animator-wrap',loadMask:!1,rootVisible:!0,expandDuration:250,collapseDuration:250,toggleOnDblClick:!0,stripeRows:!1,treeRowTpl:['{%','this.processRowValues(values);','this.nextTpl.applyOut(values, out, parent);','%}',{priority:10,processRowValues:function(a){var b=a.record,c=a.view;a.rowAttr['data-qtip']=b.get('qtip')||'';a.rowAttr['data-qtitle']=b.get('qtitle')||'';a.rowAttr['aria-level']=b.getDepth()+1;if(b.isLeaf()){a.rowClasses.push(c.leafCls)}else {if(b.isExpanded()){a.rowClasses.push(c.expandedCls);a.rowAttr['aria-expanded']=!0}else {a.rowAttr['aria-expanded']=!1}}if(b.isLoading()){a.rowClasses.push(c.loadingCls)}}}],initComponent:function(){var a=this;if(a.bufferedRenderer){a.animate=!1}else {if(a.initialConfig.animate===undefined){a.animate=Ext.enableFx}}a.store=a.panel.getStore();a.onRootChange(a.store.getRoot());a.animQueue={};a.animWraps={};a.callParent();a.store.setRootVisible(a.rootVisible);a.addRowTpl(a.lookupTpl('treeRowTpl'))},onFillComplete:function(f,d,b){var a=this,e=a.store,c=e.indexOf(b[0]);d.triggerUIUpdate();if(!b.length||c===-1){return}a.onAdd(a.store,b,c);a.refreshPartner()},refreshPartner:function(){var a=this.lockingPartner;if(a){a.refresh()}},afterRender:function(){var a=this;a.callParent();a.el.on({scope:a,delegate:a.expanderSelector,mouseover:a.onExpanderMouseOver,mouseout:a.onExpanderMouseOut})},processUIEvent:function(a){if(a.getTarget('.'+this.nodeAnimWrapCls,this.el)){return !1}return this.callParent([a])},setRootNode:function(a){this.node=a},getChecked:function(){var a=[];this.node.cascade(function(b){if(b.get('checked')){a.push(b)}});return a},isItemChecked:function(a){return a.get('checked')},createAnimWrap:function(b,e){var d=this,c=d.getNode(b),a;a=Ext.fly(c).insertSibling({role:'presentation',tag:'div',cls:d.nodeAnimWrapCls},'after');return {record:b,node:c,el:a,expanding:!1,collapsing:!1,animateEl:a,targetEl:a}},getAnimWrap:function(a,d){if(!this.animate){return null}var c=this.animWraps,b=c[a.internalId];if(d!==!1){while(!b&&a){a=a.parentNode;if(a){b=c[a.internalId]}}}return b},doAdd:function(h,d){var a=this,l=h[0],i=l.parentNode,m=a.all,e,b=a.getAnimWrap(i),g,f,k,j,c;if(!b||!b.expanding){return a.callParent([h,d])}j=a.bufferRender(h,d,!0);c=j.children;i=b.record;g=b.targetEl;f=g.dom.childNodes;k=f.length;e=d-a.indexInStore(i)-1;if(!k||e>=k){g.appendChild(j.fragment,!0)}else {Ext.fly(f[e]).insertSibling(c,'before',!0)}m.insert(d,c);return c},onRemove:function(g,c,b){var a=this,f,d,e;if(a.viewReady){f=a.store.getCount()===0;if(a.bufferedRenderer){return a.callParent([g,c,b])}e=this.all.slice(b,b+c.length);if(f){a.refresh()}else {for(d=c.length-1,b+=d;d>=0;--d,--b){a.doRemove(c[d],b)}a.refreshSizePending=!0}a.fireItemMutationEvent('itemremove',c,b,e,a)}},doRemove:function(d,b){var c=this,g=c.all,a=c.getAnimWrap(d),e=g.item(b),f=e?e.dom:null;if(!f||!a||!a.collapsing){return c.callParent([d,b])}a.targetEl.dom.insertBefore(f,a.targetEl.dom.firstChild);g.removeElement(b)},onBeforeExpand:function(c,d,e){var b=this,a;if(b.rendered&&b.all.getCount()&&b.animate){if(b.getNode(c)){a=b.getAnimWrap(c,!1);if(!a){a=b.animWraps[c.internalId]=b.createAnimWrap(c);a.animateEl.setHeight(0)}else {if(a.collapsing){a.targetEl.select(b.itemSelector).destroy()}}a.expanding=!0;a.collapsing=!1}}},onExpand:function(b){var a=this,h=a.animQueue,i=b.getId(),f=a.getNode(b),g=f?a.indexOf(f):-1,c,d,e;if(a.singleExpand){a.ensureSingleExpand(b)}if(g===-1){return}c=a.getAnimWrap(b,!1);if(!c){b.isExpandingOrCollapsing=!1;a.fireEvent('afteritemexpand',b,g,f);return}d=c.animateEl;e=c.targetEl;d.stopAnimation();h[i]=!0;Ext.on('idle',function(){d.dom.style.height='0px'},null,{single:!0});d.animate({from:{height:0},to:{height:e.dom.scrollHeight},duration:a.expandDuration,listeners:{afteranimate:function(){var f=e.dom.childNodes,d=Ext.Element.getActiveElement();if(f.length){if(!e.contains(d)){d=null}c.el.insertSibling(f,'before',!0);if(d){Ext.fly(d).focus()}}c.el.destroy();h[i]=null;if(!a.destroyed){a.animWraps[c.record.internalId]=null}}},callback:function(){b.isExpandingOrCollapsing=!1;if(!a.destroyed){a.refreshSize(!0)}a.fireEvent('afteritemexpand',b,g,f)}})},onBeforeCollapse:function(c,g,f,d,e){var b=this,a;if(b.rendered&&b.all.getCount()){if(b.animate){if(c.getTreeStore().isVisible(c)){a=b.getAnimWrap(c);if(!a){a=b.animWraps[c.internalId]=b.createAnimWrap(c,f)}else {if(a.expanding){a.targetEl.select(this.itemSelector).destroy()}}a.expanding=!1;a.collapsing=!0;a.callback=d;a.scope=e}}else {b.onCollapseCallback=d;b.onCollapseScope=e}}},onCollapse:function(c){var a=this,g=a.animQueue,h=c.getId(),d=a.getNode(c),f=d?a.indexOf(d):-1,b=a.getAnimWrap(c),e;if(!a.all.getCount()||!c.isVisible()){return}if(!b){c.isExpandingOrCollapsing=!1;a.fireEvent('afteritemcollapse',c,f,d);Ext.callback(a.onCollapseCallback,a.onCollapseScope);a.onCollapseCallback=a.onCollapseScope=null;return}e=b.animateEl;g[h]=!0;e.stopAnimation();e.animate({to:{height:0},duration:a.collapseDuration,listeners:{afteranimate:function(){b.el.destroy();g[h]=null;if(!a.destroyed){a.animWraps[b.record.internalId]=null}}},callback:function(){c.isExpandingOrCollapsing=!1;if(!a.destroyed){a.refreshSize(!0)}a.fireEvent('afteritemcollapse',c,f,d);Ext.callback(b.callback,b.scope);b.callback=b.scope=null}})},isAnimating:function(a){return !!this.animQueue[a.getId()]},expand:function(a,f,d,e){var g=this,b=!!g.animate,c;if(!b||!a.isExpandingOrCollapsing){if(!a.isLeaf()){a.isExpandingOrCollapsing=b}Ext.suspendLayouts();c=a.expand(f,d,e);Ext.resumeLayouts(!0);return c}},collapse:function(a,e,c,d){var f=this,b=!!f.animate;if(!b||!a.isExpandingOrCollapsing){if(!a.isLeaf()){a.isExpandingOrCollapsing=b}return a.collapse(e,c,d)}},toggle:function(a,d,b,c){if(a.isExpanded()){this.collapse(a,d,b,c)}else {this.expand(a,d,b,c)}},onItemDblClick:function(b,e,d,f){var a=this,c=a.editingPlugin;a.callParent([b,e,d,f]);if(a.toggleOnDblClick&&b.isExpandable()&&!(c&&c.clicksToEdit===2)){a.toggle(b)}},onCellClick:function(d,f,c,h,g,a){var b=this,e=a.position.column;if(e.isTreeColumn){if(a.getTarget(b.checkboxSelector,d)&&c.get('checked')!=null){b.onCheckChange(a);if(e.stopSelection){a.stopSelection=!0}}else {if(a.getTarget(b.expanderSelector,d)&&c.isExpandable()){b.getNavigationModel().setPosition(a.position);b.toggle(c,a.ctrlKey);a.nodeToggled=!0}}return b.callParent([d,f,c,h,g,a])}},onCheckChange:function(d){var e=this,c=d.record,b=c.get('checked'),a;if(b===1){a=!0}else {a=!b}e.setChecked(c,a,d)},setChecked:function(d,b,m,k){var e=this,o=e.checkPropagationFlags[e.ownerGrid.checkPropagation.toLowerCase()],r=d.data.checked,l=e.ownerGrid.triStateCheckbox?1:!1,p=(!k||k.propagateCheck!==!1)&&o&1,q=(!k||k.checkParent!==!1)&&o&2,n=0,j,f,g,i,c,h,a;if(e.fireEvent('beforecheckchange',d,r,m)===!1){return}if(b!==1&&p){c=d.childNodes;h=c.length;for(a=0;a<h;a++){e.setChecked(c[a],b,m,{checkParent:!1});if(c[a].get('checked')===b){n++}}if(n!==h){b=n?l:!1}}if(d.get('checked')!==b){d.set('checked',b,k);e.fireEvent('checkchange',d,b,m);if(q&&(j=d.parentNode)&&(f=j.data.checked)!=null){c=j.childNodes;h=c.length;if(b===l){f=l}else {if(h===1){f=b}else {g=i=!1;for(a=0;!(g&&i)&a<h;a++){if(c[a].data.checked===1){g=i=!0}else {if(!c[a].data.checked){i=!0}else {g=!0}}}f=g&&i?l:g?!0:!1}}if(j.get('checked')!==f){e.setChecked(j,f,m,{propagateCheck:!1})}}}},onExpanderMouseOver:function(a){Ext.fly(a.getTarget(this.cellSelector,10)).addCls(this.expanderIconOverCls)},onExpanderMouseOut:function(a){Ext.fly(a.getTarget(this.cellSelector,10)).removeCls(this.expanderIconOverCls)},getStoreListeners:function(){return Ext.apply(this.callParent(),{rootchange:this.onRootChange,fillcomplete:this.onFillComplete})},onBindStore:function(b,f,e,a){var d=a&&a.getRootNode(),c=b&&b.getRootNode();this.callParent([b,f,e,a]);if(c!==d){this.onRootChange(c,d)}},onRootChange:function(b,c){var a=this,d=a.grid;if(c){a.rootListeners.destroy();a.rootListeners=null}if(b){a.rootListeners=b.on({beforeexpand:a.onBeforeExpand,expand:a.onExpand,beforecollapse:a.onBeforeCollapse,collapse:a.onCollapse,destroyable:!0,scope:a});d.addRelayers(b)}},ensureSingleExpand:function(b){var a=b.parentNode;if(a){a.eachChild(function(a){if(a!==b&&a.isExpanded()){a.collapse()}})}},privates:{checkPropagationFlags:{none:0,down:1,up:2,both:3},deferRefreshForLoad:function(b){var d=this.callParent([b]),a,c;if(d){a=b.lastOptions;c=a&&a.node;if(c&&c!==b.getRoot()){d=!1}}return d}}});Ext.define('Ext.theme.material.tree.View',{override:'Ext.tree.View',config:{color:'default'}});Ext.define('Ext.tree.Panel',{extend:Ext.panel.Table,alias:'widget.treepanel',alternateClassName:['Ext.tree.TreePanel','Ext.TreePanel'],viewType:'treeview',treeCls:Ext.baseCSSPrefix+'tree-panel',rowLines:!1,lines:!0,useArrows:!1,singleExpand:!1,ddConfig:{enableDrag:!0,enableDrop:!0},ariaRole:'treegrid',rootVisible:!0,displayField:'text',root:null,checkPropagation:'none',normalCfgCopy:['displayField','root','singleExpand','useArrows','lines','rootVisible','scroll'],lockedCfgCopy:['displayField','root','singleExpand','useArrows','lines','rootVisible'],isTree:!0,arrowCls:Ext.baseCSSPrefix+'tree-arrows',linesCls:Ext.baseCSSPrefix+'tree-lines',noLinesCls:Ext.baseCSSPrefix+'tree-no-lines',autoWidthCls:Ext.baseCSSPrefix+'autowidth-table',constructor:function(a){a=a||{};if(a.animate===undefined){a.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx}this.enableAnimations=a.animate;delete a.animate;this.callParent([a])},initComponent:function(){var a=this,c=[a.treeCls],b,d,e;if(a.useArrows){c.push(a.arrowCls);a.lines=!1}if(a.lines){c.push(a.linesCls)}else {if(!a.useArrows){c.push(a.noLinesCls)}}b=a.applyStore(a.store);if(!b.getRoot()){b.setRoot({})}b.setRootVisible(a.rootVisible);if(!a.columns){a.isAutoTree=d=!0}a.viewConfig=Ext.apply({rootVisible:a.rootVisible,animate:a.enableAnimations,singleExpand:a.singleExpand,node:b.getRoot(),navigationModel:'tree',isAutoTree:d},a.viewConfig);if(d){a.addCls(a.autoWidthCls);a.columns=[{xtype:'treecolumn',text:a.hideHeaders===!0?'Name':null,flex:1,dataIndex:a.displayField}]}if(a.cls){c.push(a.cls)}a.cls=c.join(' ');a.callParent();e=a.getView();a.relayEvents(e,['beforecheckchange','checkchange','afteritemexpand','afteritemcollapse'])},applyStore:function(a){var b=this;if(Ext.isString(a)){a=b.store=Ext.StoreMgr.lookup(a)}else {if(!a||!a.isStore){a=Ext.apply({type:'tree',proxy:'memory'},a);if(b.root){a.root=b.root}if(b.fields){a.fields=b.fields}else {if(b.model){a.model=b.model}}if(b.folderSort){a.folderSort=b.folderSort}a=b.store=Ext.StoreMgr.lookup(a)}else {if(b.root){a=b.store=Ext.data.StoreManager.lookup(a);a.setRoot(b.root);if(b.folderSort!==undefined){a.folderSort=b.folderSort;a.sort()}}}}return a},setRoot:function(a){this.store.setRoot(a)},setStore:function(a){var b=this;a=b.applyStore(a);if(!a.getRoot()){a.setRoot({})}a.setRootVisible(b.rootVisible);if(b.enableLocking){b.reconfigure(a)}else {if(b.view){b.view.setRootNode(a.getRootNode())}b.bindStore(a)}},bindStore:function(b,d){var a=this,c=b.getRoot();a.callParent(arguments);b.singleExpand=a.singleExpand;a.storeListeners=a.mon(b,{destroyable:!0,rootchange:a.onRootChange,scope:a});a.storeRelayers=a.relayEvents(b,['beforeload','load']);if(!a.rootVisible&&!b.autoLoad&&!(c.isExpanded()||c.isLoading())){if(c.isLoaded()){c.data.expanded=!0;b.onNodeExpand(c,c.childNodes)}else {if(b.autoLoad!==!1&&!b.hasPendingLoad()){c.data.expanded=!1;c.expand()}}}b.ownerTree=a;if(!d){a.view.setRootNode(c)}},addRelayers:function(b){var a=this;if(a.rootRelayers){a.rootRelayers.destroy();a.rootRelayers=null}a.rootRelayers=a.mon(b,{destroyable:!0,append:a.createRelayer('itemappend'),remove:a.createRelayer('itemremove'),move:a.createRelayer('itemmove',[0,4]),insert:a.createRelayer('iteminsert'),beforeappend:a.createRelayer('beforeitemappend'),beforeremove:a.createRelayer('beforeitemremove'),beforemove:a.createRelayer('beforeitemmove'),beforeinsert:a.createRelayer('beforeiteminsert'),expand:a.createRelayer('itemexpand',[0,1]),collapse:a.createRelayer('itemcollapse',[0,1]),beforeexpand:a.createRelayer('beforeitemexpand',[0,1]),beforecollapse:a.createRelayer('beforeitemcollapse',[0,1]),scope:a})},unbindStore:function(){var a=this,b=a.store;if(b){a.callParent();Ext.destroy(a.storeListeners,a.storeRelayers,a.rootRelayers);delete b.ownerTree;b.singleExpand=null}},setRootNode:function(){return this.store.setRoot.apply(this.store,arguments)},getRootNode:function(){return this.store.getRoot()},onRootChange:function(a){this.view.setRootNode(a)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(a){return a.get('checked')},expandNode:function(b,d,a,c){return this.getView().expand(b,d,a,c||this)},collapseNode:function(b,d,a,c){return this.getView().collapse(b,d,a,c||this)},expandAll:function(c,d){var b=this,a=b.getRootNode();if(a){Ext.suspendLayouts();a.expand(!0,c,d||b);Ext.resumeLayouts(!0)}},collapseAll:function(e,a){var d=this,c=d.getRootNode(),b=d.getView();if(b.scrollable){b.scrollable.doScrollTo(0,0);b.scrollable.updateDomScrollPosition()}if(c){Ext.suspendLayouts();a=a||d;if(b.rootVisible){c.collapse(!0,e,a)}else {c.collapseChildren(!0,e,a)}Ext.resumeLayouts(!0)}},expandPath:function(p,a){var i=arguments,b=this,j=b.view,g=a&&a.field||b.store.model.idProperty,k=a&&a.separator||'/',o,n,c,e,d,h,f,m,l;if(a&&typeof a==='object'){g=a.field||b.store.model.idProperty;k=a.separator||'/';c=a.callback;e=a.scope;o=a.select;n=a.focus}else {g=i[1]||b.store.model.idProperty;k=i[2]||'/';c=i[3];e=i[4]}if(Ext.isEmpty(p)){return Ext.callback(c,e||b,[!1,null])}f=p.split(k);m=!f[0];if(m){d=b.getRootNode();h=1}else {d=b.store.findNode(g,f[0]);h=0}if(!d||m&&d.get(g)+''!==f[1]){return Ext.callback(c,e||b,[!1,d])}l=function(m){var d=this,q,k,i;if(++h===f.length){if(o){j.getSelectionModel().select(d)}if(n){j.getNavigationModel().setPosition(d,0)}return Ext.callback(c,e||b,[!0,d,j.getNode(d)])}for(k=0,q=m?m.length:0;k<q;k++){d=m[k];i=d.get(g);if(i||i===0){i=i.toString()}if(i===f[h]){return d.expand(!1,l)}}d=this;Ext.callback(c,e||b,[!1,d,j.getNode(d)])};d.expand(!1,l)},ensureVisible:function(f,a){if(f.isEntity||typeof f==='number'){return this.callParent([f,a])}var c=this,j=a&&a.field||c.store.model.idProperty,h=a&&a.separator||'/',i,k,b,m,l,e,d,g;g=function(e,d,g,b){if(!b&&e&&d){b=d.findChild(j,l)}if(b){c.doEnsureVisible(b,a)}else {Ext.callback(i,k||c,[!1,d])}};if(a){i=a.callback;k=a.scope}b=f.split(h);m=!b[0];l=b.pop();if(b.length&&!(m&&b.length===1)){c.expandPath(b.join(h),j,h,g)}else {e=c.store.findNode(j,l);if(e){d=e.parentNode;if(d&&!d.isExpanded()){d.expand()}g(!0,null,null,e)}else {Ext.callback(i,k||c,[!1,null])}}},selectPath:function(e,c,a,b,d){this.ensureVisible(e,{field:c,separator:a,select:!0,callback:b,scope:d})}});Ext.define('Ext.view.DragZone',{extend:Ext.dd.DragZone,containerScroll:!1,constructor:function(e){var a=this,b,c,d;Ext.apply(a,e);if(!a.ddGroup){a.ddGroup='view-dd-zone-'+a.view.id}b=a.view;b.setItemsDraggable(!0);c=b.ownerCt;if(c){d=c.getTargetEl().dom}else {d=b.el.dom.parentNode}a.callParent([d]);a.ddel=document.createElement('div');a.ddel.className=Ext.baseCSSPrefix+'grid-dd-wrap'},init:function(e,d,c){var a=this,b={itemmousedown:a.onItemMouseDown,scope:a};if(Ext.supports.Touch){b.itemlongpress=a.onItemLongPress;b.contextmenu={element:'el',fn:a.onViewContextMenu}}a.initTarget(e,d,c);a.view.mon(a.view,b)},onValidDrop:function(a,c,b){this.callParent([a,c,b]);if(!a.el.contains(Ext.Element.getActiveElement())){a.el.focus()}},onViewContextMenu:function(a){if(a.pointerType!=='mouse'){a.preventDefault()}},onItemMouseDown:function(e,b,d,c,a){if(a.pointerType==='mouse'){this.onTriggerGesture(e,b,d,c,a)}},onItemLongPress:function(e,b,d,c,a){if(a.pointerType!=='mouse'){this.onTriggerGesture(e,b,d,c,a)}},onTriggerGesture:function(f,d,e,c,a){var b;if(a.pointerType==='touch'&&a.type!=='longpress'||a.position&&a.position.isEqual(a.view.actionPosition)){return}if(!this.isPreventDrag(a,d,e,c)){b=f.getNavigationModel();if(a.position){b.setPosition(a.position)}else {b.setPosition(c)}this.handleMouseDown(a)}},isPreventDrag:function(a,b,d,c){return !!a.isInputFieldEvent},getDragData:function(c){var a=this.view,b=c.getTarget(a.getItemSelector());if(b){return {copy:a.copy||a.allowCopy&&c.ctrlKey,event:c,view:a,ddel:this.ddel,item:b,records:a.getSelectionModel().getSelection(),fromPosition:Ext.fly(b).getXY()}}},onInitDrag:function(f,g){var a=this,c=a.dragData,e=c.view,b=e.getSelectionModel(),d=e.getRecord(c.item);if(!b.isSelected(d)){b.selectWithEvent(d,a.DDMInstance.mousedownEvent)}c.records=b.getSelection();Ext.fly(a.ddel).setHtml(a.getDragText());a.proxy.update(a.ddel);a.onStartDrag(f,g);return !0},getDragText:function(){var a=this.dragData.records.length;return Ext.String.format(this.dragText,a,a===1?'':'s')},getRepairXY:function(b,a){return a?a.fromPosition:!1}});Ext.define('Ext.tree.ViewDragZone',{extend:Ext.view.DragZone,isPreventDrag:function(b,a){return a.get('allowDrag')===!1||!!b.getTarget(this.view.expanderSelector)},getDragText:function(){var c=this.dragData.records,e=c.length,a=c[0].get(this.displayField),d='s',f=/\{\d+\}/,b=this.dragText;if(f.test(b)&&e===1&&a){return a}else {if(!a){d=''}}return Ext.String.format(b,e,d)},afterRepair:function(){var b=this,c=b.view,f=c.selectedItemCls,g=b.dragData.records,d,h=g.length,e=Ext.fly,a;if(Ext.enableFx&&b.repairHighlight){for(d=0;d<h;d++){a=c.getNode(g[d]);e(a.firstChild).highlight(b.repairHighlightColor,{listeners:{beforeanimate:function(){if(c.isSelected(a)){e(a).removeCls(f)}},afteranimate:function(){if(c.isSelected(a)){e(a).addCls(f)}}}})}}b.dragging=!1}});Ext.define('Ext.tree.ViewDropZone',{extend:Ext.view.DropZone,allowParentInserts:!1,allowContainerDrops:!1,appendOnly:!1,expandDelay:500,indicatorCls:Ext.baseCSSPrefix+'tree-ddindicator',expandNode:function(a){var b=this.view;this.expandProcId=!1;if(!a.isLeaf()&&!a.isExpanded()){b.expand(a);this.expandProcId=!1}},queueExpand:function(a){this.expandProcId=Ext.defer(this.expandNode,this.expandDelay,this,[a])},cancelExpand:function(){this.expandProcId=Ext.undefer(this.expandProcId)},getPosition:function(i,g){var h=this.view,b=h.getRecord(g),c=i.getY(),e=b.isLeaf(),f=!1,a=Ext.fly(g).getRegion(),d;if(b.isRoot()){return 'append'}if(this.appendOnly){return e?!1:'append'}if(!this.allowParentInserts){f=b.hasChildNodes()&&b.isExpanded()}d=(a.bottom-a.top)/(e?2:3);if(c>=a.top&&c<a.top+d){return 'before'}else {if(!f&&(e||c>=a.bottom-d&&c<=a.bottom)){return 'after'}else {return 'append'}}},isValidDropPoint:function(g,c,l,k,f){if(!g||!f.item){return !1}var h=this.view,a=h.getRecord(g),b=f.records,i=b.length,j=b.length,d,e;if(!(a&&c&&i)){return !1}for(d=0;d<j;d++){e=b[d];if(e.isNode&&e.contains(a)){return !1}}if(c==='append'&&a.get('allowDrop')===!1){return !1}else {if(c!=='append'&&a.parentNode.get('allowDrop')===!1){return !1}}if(Ext.Array.contains(b,a)){return !1}return h.fireEvent('nodedragover',a,c,f,k)!==!1},onNodeOver:function(b,g,j,h){var d=this.getPosition(j,b),c=this.dropNotAllowed,i=this.view,a=i.getRecord(b),f=this.getIndicator(),e=0;this.cancelExpand();if(d==='append'&&!this.expandProcId&&!Ext.Array.contains(h.records,a)&&!a.isLeaf()&&!a.isExpanded()){this.queueExpand(a)}if(this.isValidDropPoint(b,d,g,j,h)){this.valid=!0;this.currentPosition=d;this.overRecord=a;f.setWidth(Ext.fly(b).getWidth());e=Ext.fly(b).getY()-Ext.fly(i.el).getY()-1;if(d==='before'){c=a.isFirst()?Ext.baseCSSPrefix+'tree-drop-ok-above':Ext.baseCSSPrefix+'tree-drop-ok-between';f.showAt(0,e);g.proxy.show()}else {if(d==='after'){c=a.isLast()?Ext.baseCSSPrefix+'tree-drop-ok-below':Ext.baseCSSPrefix+'tree-drop-ok-between';e+=Ext.fly(b).getHeight();f.showAt(0,e);g.proxy.show()}else {c=Ext.baseCSSPrefix+'tree-drop-ok-append';f.hide()}}}else {this.valid=!1}this.currentCls=c;return c},onNodeOut:function(d,b,c,a){this.valid=!1;this.getIndicator().hide()},onContainerOver:function(c,a,b){return this.allowContainerDrops?this.dropAllowed:a.getTarget('.'+this.indicatorCls)?this.currentCls:this.dropNotAllowed},onContainerDrop:function(a,c,b){if(this.allowContainerDrops){this.valid=!0;this.currentPosition='append';this.overRecord=this.view.store.getRoot();this.onNodeDrop(this.overRecord,a,c,b)}},notifyOut:function(){this.callParent(arguments);this.cancelExpand()},handleNodeDrop:function(d,b,o){var j=this,h=j.view,g=b?b.parentNode:h.panel.getRootNode(),m=h.store.getModel(),l,c,i,a,f,e,n,k;if(d.copy){l=d.records;d.records=[];for(c=0,i=l.length;c<i;c++){a=l[c];if(a.isNode){d.records.push(a.copy(undefined,!0))}else {d.records.push(new m(Ext.apply({},a.data)))}}}j.cancelExpand();if(o==='before'){f=g.insertBefore;e=[null,b];b=g}else {if(o==='after'){if(b.nextSibling){f=g.insertBefore;e=[null,b.nextSibling]}else {f=g.appendChild;e=[null]}b=g}else {if(!(b.isExpanded()||b.isLoading())){n=!0}f=b.appendChild;e=[null]}}k=function(){var k,g;Ext.suspendLayouts();for(c=0,i=d.records.length;c<i;c++){a=d.records[c];if(!a.isNode){if(a.isModel){a=new m(a.data,a.getId())}else {a=new m(a)}d.records[c]=a}e[0]=a;f.apply(b,e)}if(j.sortOnDrop){b.sort(b.getTreeStore().getSorters().sortFn)}Ext.resumeLayouts(!0);a=d.records[0];h.ownerGrid.ensureVisible(a);h.getNavigationModel().setPosition(a);if(Ext.enableFx&&j.dropHighlight){k=j.dropHighlightColor;for(c=0;c<i;c++){g=h.getNode(d.records[c]);if(g){Ext.fly(g).highlight(k)}}}};if(n){b.expand(!1,k)}else {if(b.isLoading()){b.on({expand:k,delay:1,single:!0})}else {k()}}}});Ext.define('Ext.tree.plugin.TreeViewDragDrop',{extend:Ext.plugin.Abstract,alias:'plugin.treeviewdragdrop',dragText:'{0} selected node{1}',allowParentInserts:!1,allowContainerDrops:!1,appendOnly:!1,ddGroup:'TreeDD',containerScroll:!1,expandDelay:1000,enableDrop:!0,enableDrag:!0,nodeHighlightColor:'c3daf9',nodeHighlightOnDrop:Ext.enableFx,displayField:'text',init:function(a){Ext.applyIf(a,{copy:this.copy,allowCopy:this.allowCopy});a.on('render',this.onViewRender,this,{single:!0})},destroy:function(){var a=this;a.dragZone=a.dropZone=Ext.destroy(a.dragZone,a.dropZone);a.callParent()},onViewRender:function(b){var a=this,d=b.ownerCt.ownerGrid||b.ownerCt,c;d.relayEvents(b,['beforedrop','drop']);if(a.enableDrag){if(a.containerScroll){c=b.getEl()}a.dragZone=new Ext.tree.ViewDragZone(Ext.apply({view:b,ddGroup:a.dragGroup||a.ddGroup,dragText:a.dragText,displayField:a.displayField,repairHighlightColor:a.nodeHighlightColor,repairHighlight:a.nodeHighlightOnRepair,scrollEl:c},a.dragZone))}if(a.enableDrop){a.dropZone=new Ext.tree.ViewDropZone(Ext.apply({view:b,ddGroup:a.dropGroup||a.ddGroup,allowContainerDrops:a.allowContainerDrops,appendOnly:a.appendOnly,allowParentInserts:a.allowParentInserts,expandDelay:a.expandDelay,dropHighlightColor:a.nodeHighlightColor,dropHighlight:a.nodeHighlightOnDrop,sortOnDrop:a.sortOnDrop,containerScroll:a.containerScroll},a.dropZone))}}},function(){var a=this.prototype;a.nodeHighlightOnDrop=a.nodeHighlightOnRepair=Ext.enableFx});Ext.define('Ext.view.MultiSelectorSearch',{extend:Ext.panel.Panel,xtype:'multiselector-search',layout:'fit',floating:!0,alignOnScroll:!1,minWidth:200,minHeight:200,border:!0,keyMap:{scope:'this',ESC:'hide'},platformConfig:{desktop:{resizable:!0},'tablet && rtl':{resizable:{handles:'sw'}},'tablet && !rtl':{resizable:{handles:'se'}}},defaultListenerScope:!0,referenceHolder:!0,searchText:'Search...',initComponent:function(){var a=this,g=a.owner,f=a.makeItems(),c,b,d,e;a.dockedItems=a.makeDockedItems();a.items=f;e=Ext.data.StoreManager.lookup(a.store);for(c=f.length;c--;){if((b=f[c]).xtype==='grid'){b.store=e;b.isSearchGrid=!0;b.selModel=b.selModel||{type:'checkboxmodel',pruneRemoved:!1,listeners:{selectionchange:'onSelectionChange'}};Ext.merge(b,a.grid);if(!b.columns){b.hideHeaders=!0;b.columns=[{flex:1,dataIndex:a.field}]}break}}a.callParent();d=a.getOwnerStore().getRange();if(!g.convertSelectionRecord.$nullFn){for(c=d.length;c--;){d[c]=g.convertSelectionRecord(d[c])}}if(e.isLoading()||e.loadCount===0&&!e.getCount()){e.on('load',function(){if(!a.destroyed){a.selectRecords(d)}},null,{single:!0})}else {a.selectRecords(d)}},getOwnerStore:function(){return this.owner.getStore()},afterShow:function(){var a;this.callParent(arguments);if(!this.invocationEvent||this.invocationEvent.pointerType!=='touch'){a=this.lookupReference('searchField');if(a){a.focus()}}this.invocationEvent=null},getSearchStore:function(){var a=this.lookupReference('searchGrid');return a.getStore()},makeDockedItems:function(){return [{xtype:'textfield',reference:'searchField',dock:'top',hideFieldLabel:!0,emptyText:this.searchText,cls:Ext.baseCSSPrefix+'multiselector-search-input',triggers:{clear:{cls:Ext.baseCSSPrefix+'form-clear-trigger',handler:'onClearSearch',hidden:!0}},listeners:{specialKey:'onSpecialKey',change:{fn:'onSearchChange',buffer:300}}}]},onSpecialKey:function(b,a){if(a.getKey()===a.TAB&&a.shiftKey){a.preventDefault();this.owner.searchTool.focus()}},makeItems:function(){return [{xtype:'grid',reference:'searchGrid',trailingBufferZone:2,leadingBufferZone:2,viewConfig:{deferEmptyText:!1,emptyText:'No results.'}}]},getMatchingRecords:function(a){var f=this.lookupReference('searchGrid'),g=f.getStore(),d=[],b,c,e;a=Ext.isArray(a)?a:[a];for(b=0,e=a.length;b<e;b++){c=g.getById(a[b].getId());if(c){d.push(c)}}return d},selectRecords:function(a){var b=this.lookupReference('searchGrid');a=this.getMatchingRecords(a);return b.getSelectionModel().select(a)},deselectRecords:function(a){var b=this.lookupReference('searchGrid');a=this.getMatchingRecords(a);return b.getSelectionModel().deselect(a)},search:function(d){var c=this,a=c.searchFilter,b=c.getSearchStore().getFilters();if(d){b.beginUpdate();if(a){a.setValue(d)}else {c.searchFilter=a=new Ext.util.Filter({id:'search',property:c.field,value:d})}b.add(a);b.endUpdate()}else {if(a){b.remove(a)}}},privates:{onClearSearch:function(){var a=this.lookupReference('searchField');a.setValue(null);a.focus()},onSearchChange:function(a){var b=a.getValue(),c=a.getTrigger('clear');c.setHidden(!b);this.search(b)},onSelectionChange:function(k,g){var h=this.owner,j=h.getStore(),c=j.data,d=0,i={},e,b,f,a;for(b=g.length;b--;){a=g[b];f=a.id;i[f]=a;if(!c.containsKey(f)){(e||(e=[])).push(h.convertSearchRecord(a))}}for(b=c.length;b--;){a=c.getAt(b);if(!i[a.id]){(d||(d=[])).push(a)}}if(e||d){c.splice(c.length,d,e)}}}});Ext.define('Ext.view.MultiSelector',{extend:Ext.grid.Panel,xtype:'multiselector',config:{search:{xtype:'multiselector-search',width:200,height:200,store:{autoLoad:!0}}},fieldName:'name',fieldTitle:null,removeRowText:'',removeRowTip:'Remove this item',emptyText:'Nothing selected',addToolText:'Search for items to add',initComponent:function(){var a=this,e=a.emptyText,g=a.getStore(),f=a.getSearch(),d=a.fieldTitle,b,c;b=f.store;if(b.isStore){c=b.getModel()}else {c=b.model}if(!g){a.store={model:c}}if(e&&!a.viewConfig){a.viewConfig={deferEmptyText:!1,emptyText:e}}if(!a.columns){a.hideHeaders=!d;a.columns=[{text:d,dataIndex:a.fieldName,flex:1},a.makeRemoveRowColumn()]}a.callParent()},addTools:function(){var a=this;a.addTool({type:'plus',tooltip:a.addToolText,callback:'onShowSearch',scope:a});a.searchTool=a.tools[a.tools.length-1]},convertSearchRecord:Ext.identityFn,convertSelectionRecord:Ext.identityFn,makeRemoveRowColumn:function(){var a=this;return {width:32,align:'center',menuDisabled:!0,tdCls:Ext.baseCSSPrefix+'multiselector-remove',processEvent:a.processRowEvent.bind(a),renderer:a.renderRemoveRow,updater:Ext.emptyFn,scope:a}},processRowEvent:function(g,h,f,d,e,a,b,i){var c=Ext.getBody();if(a.type==='click'||a.type==='keydown'&&(a.keyCode===a.SPACE||a.keyCode===a.ENTER)){c.suspendFocusEvents();this.store.remove(b);c.resumeFocusEvents();if(this.searchPopup){this.searchPopup.deselectRecords(b)}}},renderRemoveRow:function(){return '<span data-qtip="'+this.removeRowTip+'" role="button" tabIndex="0">'+this.removeRowText+'</span>'},onFocusLeave:function(a){this.onDismissSearch();this.callParent([a])},afterComponentLayout:function(f,e,d,c){var a=this,b=a.searchPopup;a.callParent([f,e,d,c]);if(b&&b.isVisible()){b.showBy(a,a.popupAlign)}},privates:{popupAlign:'tl-tr?',onGlobalScroll:function(a){if(!this.owns(a.getElement())){this.onDismissSearch()}},onDismissSearch:function(b){var a=this.searchPopup;if(a&&(!b||!(a.owns(b.getTarget())||this.owns(b.getTarget())))){this.scrollListeners.destroy();this.touchListeners.destroy();a.hide()}},onShowSearch:function(e,f,c){var a=this,b=a.searchPopup,d=a.getStore();if(!b){b=Ext.merge({owner:a,field:a.fieldName,floating:!0,alignOnScroll:!1},a.getSearch());a.searchPopup=b=a.add(b);if(d.getCount()){b.selectRecords(d.getRange())}}b.invocationEvent=c;b.showBy(a,a.popupAlign);if(!c||c.pointerType!=='touch'){b.lookupReference('searchField').focus()}a.scrollListeners=Ext.on({scroll:'onGlobalScroll',scope:a,destroyable:!0});a.touchListeners=Ext.getDoc().on({translate:!1,touchstart:a.onDismissSearch,scope:a,delegated:!1,destroyable:!0})}}});Ext.define('Ext.window.Toast',{extend:Ext.window.Window,xtype:'toast',isToast:!0,cls:Ext.baseCSSPrefix+'toast',bodyPadding:10,autoClose:!0,plain:!1,draggable:!1,resizable:!1,shadow:!1,focus:Ext.emptyFn,anchor:null,useXAxis:!1,align:'t',alwaysOnTop:!0,spacing:6,paddingX:30,paddingY:10,slideInAnimation:'easeIn',slideBackAnimation:'bounceOut',slideInDuration:500,slideBackDuration:500,hideDuration:500,autoCloseDelay:3000,stickOnClick:!1,stickWhileHover:!0,closeOnMouseDown:!1,closable:!1,minHeight:1,focusable:!1,isHiding:!1,isFading:!1,destroyAfterHide:!1,closeOnMouseOut:!1,xPos:0,yPos:0,constructor:function(a){a=a||{};if(a.animate===undefined){a.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx}this.enableAnimations=a.animate;delete a.animate;this.callParent([a])},initComponent:function(){var a=this;if(a.autoClose&&a.closable==null){a.closable=!1}a.updateAlignment(a.align);a.setAnchor(a.anchor);a.callParent()},onRender:function(){var a=this;a.callParent(arguments);a.el.hover(a.onMouseEnter,a.onMouseLeave,a);if(a.closeOnMouseDown){Ext.getDoc().on('mousedown',a.onDocumentMousedown,a)}},alignmentProps:{br:{paddingFactorX:-1,paddingFactorY:-1,siblingAlignment:'br-br',anchorAlign:'tr-br'},bl:{paddingFactorX:1,paddingFactorY:-1,siblingAlignment:'bl-bl',anchorAlign:'tl-bl'},tr:{paddingFactorX:-1,paddingFactorY:1,siblingAlignment:'tr-tr',anchorAlign:'br-tr'},tl:{paddingFactorX:1,paddingFactorY:1,siblingAlignment:'tl-tl',anchorAlign:'bl-tl'},b:{paddingFactorX:0,paddingFactorY:-1,siblingAlignment:'b-b',useXAxis:0,anchorAlign:'t-b'},t:{paddingFactorX:0,paddingFactorY:1,siblingAlignment:'t-t',useXAxis:0,anchorAlign:'b-t'},l:{paddingFactorX:1,paddingFactorY:0,siblingAlignment:'l-l',useXAxis:1,anchorAlign:'r-l'},r:{paddingFactorX:-1,paddingFactorY:0,siblingAlignment:'r-r',useXAxis:1,anchorAlign:'l-r'},x:{br:{anchorAlign:'bl-br'},bl:{anchorAlign:'br-bl'},tr:{anchorAlign:'tl-tr'},tl:{anchorAlign:'tr-tl'}}},updateAlignment:function(d){var a=this,b=a.alignmentProps,e=b[d],c=b.x[d];if(c&&a.useXAxis){Ext.applyIf(a,c)}Ext.applyIf(a,e)},getXposAlignedToAnchor:function(){var b=this,d=b.align,e=b.anchor,c=e&&e.el,f=b.el,a=0;if(c&&c.dom){if(!b.useXAxis){a=f.getLeft()}else {if(d==='br'||d==='tr'||d==='r'){a+=c.getAnchorXY('r')[0];a-=f.getWidth()+b.paddingX}else {a+=c.getAnchorXY('l')[0];a+=b.paddingX}}}return a},getYposAlignedToAnchor:function(){var b=this,d=b.align,e=b.anchor,c=e&&e.el,f=b.el,a=0;if(c&&c.dom){if(b.useXAxis){a=f.getTop()}else {if(d==='br'||d==='bl'||d==='b'){a+=c.getAnchorXY('b')[1];a-=f.getHeight()+b.paddingY}else {a+=c.getAnchorXY('t')[1];a+=b.paddingY}}}return a},getXposAlignedToSibling:function(a){var c=this,d=c.align,e=c.el,b;if(!c.useXAxis){b=e.getLeft()}else {if(d==='tl'||d==='bl'||d==='l'){b=a.xPos+a.el.getWidth()+a.spacing}else {b=a.xPos-e.getWidth()-c.spacing}}return b},getYposAlignedToSibling:function(a){var d=this,c=d.align,e=d.el,b;if(d.useXAxis){b=e.getTop()}else {if(c==='tr'||c==='tl'||c==='t'){b=a.yPos+a.el.getHeight()+a.spacing}else {b=a.yPos-e.getHeight()-a.spacing}}return b},getToasts:function(){var c=this.anchor,b=this.anchorAlign,a=c.activeToasts||(c.activeToasts={});return a[b]||(a[b]=[])},setAnchor:function(a){var c=this,b;c.anchor=a=typeof a==='string'?Ext.getCmp(a):a;if(!a){b=Ext.window.Toast;c.anchor=b.bodyAnchor||(b.bodyAnchor={el:Ext.getBody()})}},beforeShow:function(){var a=this;if(a.stickOnClick){a.body.on('click',function(){a.cancelAutoClose()})}if(a.autoClose){if(!a.closeTask){a.closeTask=new Ext.util.DelayedTask(a.doAutoClose,a)}}a.el.setX(-10000);a.el.setOpacity(1)},afterShow:function(){var a=this,d=a.el,c,b,e,f;a.callParent(arguments);c=a.getToasts();e=c.length;b=e&&c[e-1];if(b){d.alignTo(b.el,a.siblingAlignment,[0,0]);a.xPos=a.getXposAlignedToSibling(b);a.yPos=a.getYposAlignedToSibling(b)}else {d.alignTo(a.anchor.el,a.anchorAlign,[a.paddingX*a.paddingFactorX,a.paddingY*a.paddingFactorY],!1);a.xPos=a.getXposAlignedToAnchor();a.yPos=a.getYposAlignedToAnchor()}Ext.Array.include(c,a);if(a.enableAnimations){f=d.getXY();d.animate({from:{x:f[0],y:f[1]},to:{x:a.xPos,y:a.yPos,opacity:1},easing:a.slideInAnimation,duration:a.slideInDuration,dynamic:!0,callback:a.afterPositioned,scope:a})}else {a.setLocalXY(a.xPos,a.yPos);a.afterPositioned()}},afterPositioned:function(){var a=this;if(!a.destroying&&!a.destroyed&&a.autoClose){a.closeTask.delay(a.autoCloseDelay)}},onDocumentMousedown:function(a){if(this.isVisible()&&!this.owns(a.getTarget())){this.hide()}},slideBack:function(){var a=this,f=a.anchor,e=f&&f.el,d=a.el,b=a.getToasts(),c=Ext.Array.indexOf(b,a);if(!a.isHiding&&d&&d.dom&&e&&e.isVisible()){if(c){a.xPos=a.getXposAlignedToSibling(b[c-1]);a.yPos=a.getYposAlignedToSibling(b[c-1])}else {a.xPos=a.getXposAlignedToAnchor();a.yPos=a.getYposAlignedToAnchor()}a.stopAnimation();if(a.enableAnimations){d.animate({to:{x:a.xPos,y:a.yPos},easing:a.slideBackAnimation,duration:a.slideBackDuration,dynamic:!0})}}},update:function(){var a=this;if(a.isVisible()){a.isHiding=!0;a.hide()}a.callParent(arguments);a.show()},cancelAutoClose:function(){var a=this.closeTask;if(a){a.cancel()}},doAutoClose:function(){var a=this;if(!(a.stickWhileHover&&a.mouseIsOver)){a.close()}else {a.closeOnMouseOut=!0}},doDestroy:function(){this.removeFromAnchor();this.cancelAutoClose();this.callParent()},onMouseEnter:function(){this.mouseIsOver=!0},onMouseLeave:function(){var a=this;a.mouseIsOver=!1;if(a.closeOnMouseOut){a.closeOnMouseOut=!1;a.close()}},removeFromAnchor:function(){var c=this,b,a;if(c.anchor){b=c.getToasts();a=Ext.Array.indexOf(b,c);if(a!==-1){Ext.Array.erase(b,a,1);for(;a<b.length;a++){b[a].slideBack()}}}},getFocusEl:Ext.emptyFn,hide:function(){var a=this,b=a.el;a.cancelAutoClose();if(a.isHiding){if(!a.isFading){a.callParent(arguments);a.isHiding=!1}}else {a.isHiding=!0;a.isFading=!0;a.cancelAutoClose();if(b){if(a.enableAnimations&&!a.destroying&&!a.destroyed){b.fadeOut({opacity:0,easing:'easeIn',duration:a.hideDuration,listeners:{scope:a,afteranimate:function(){var a=this;a.isFading=!1;if(!a.destroying&&!a.destroyed){a.hide(a.animateTarget,a.doClose,a)}}}})}else {a.isFading=!1;a.hide(a.animateTarget,a.doClose,a)}}}return a}},function(a){Ext.toast=function(b,g,e,f){var c=b,d;if(Ext.isString(b)){c={title:g,html:b,iconCls:f};if(e){c.align=e}}d=new a(c);d.show();return d}});Ext.define('Ext.theme.Material',{singleton:!0,_autoUpdateMeta:!0,_defaultWeight:'500',_colors:{'red':{50:'#ffebee',100:'#ffcdd2',200:'#ef9a9a',300:'#e57373',400:'#ef5350',500:'#f44336',600:'#e53935',700:'#d32f2f',800:'#c62828',900:'#b71c1c','a100':'#ff8a80','a200':'#ff5252','a400':'#ff1744','a700':'#d50000'},'pink':{50:'#fce4ec',100:'#f8bbd0',200:'#f48fb1',300:'#f06292',400:'#ec407a',500:'#e91e63',600:'#d81b60',700:'#c2185b',800:'#ad1457',900:'#880e4f','a100':'#ff80ab','a200':'#ff4081','a400':'#f50057','a700':'#c51162'},'purple':{50:'#f3e5f5',100:'#e1bee7',200:'#ce93d8',300:'#ba68c8',400:'#ab47bc',500:'#9c27b0',600:'#8e24aa',700:'#7b1fa2',800:'#6a1b9a',900:'#4a148c','a100':'#ea80fc','a200':'#e040fb','a400':'#d500f9','a700':'#aa00ff'},'deep-purple':{50:'#ede7f6',100:'#d1c4e9',200:'#b39ddb',300:'#9575cd',400:'#7e57c2',500:'#673ab7',600:'#5e35b1',700:'#512da8',800:'#4527a0',900:'#311b92','a100':'#b388ff','a200':'#7c4dff','a400':'#651fff','a700':'#6200ea'},'indigo':{50:'#e8eaf6',100:'#c5cae9',200:'#9fa8da',300:'#7986cb',400:'#5c6bc0',500:'#3f51b5',600:'#3949ab',700:'#303f9f',800:'#283593',900:'#1a237e','a100':'#8c9eff','a200':'#536dfe','a400':'#3d5afe','a700':'#304ffe'},'blue':{50:'#e3f2fd',100:'#bbdefb',200:'#90caf9',300:'#64b5f6',400:'#42a5f5',500:'#2196f3',600:'#1e88e5',700:'#1976d2',800:'#1565c0',900:'#0d47a1','a100':'#82b1ff','a200':'#448aff','a400':'#2979ff','a700':'#2962ff'},'light-blue':{50:'#e1f5fe',100:'#b3e5fc',200:'#81d4fa',300:'#4fc3f7',400:'#29b6f6',500:'#03a9f4',600:'#039be5',700:'#0288d1',800:'#0277bd',900:'#01579b','a100':'#80d8ff','a200':'#40c4ff','a400':'#00b0ff','a700':'#0091ea'},'cyan':{50:'#e0f7fa',100:'#b2ebf2',200:'#80deea',300:'#4dd0e1',400:'#26c6da',500:'#00bcd4',600:'#00acc1',700:'#0097a7',800:'#00838f',900:'#006064','a100':'#84ffff','a200':'#18ffff','a400':'#00e5ff','a700':'#00b8d4'},'teal':{50:'#e0f2f1',100:'#b2dfdb',200:'#80cbc4',300:'#4db6ac',400:'#26a69a',500:'#009688',600:'#00897b',700:'#00796b',800:'#00695c',900:'#004d40','a100':'#a7ffeb','a200':'#64ffda','a400':'#1de9b6','a700':'#00bfa5'},'green':{50:'#e8f5e9',100:'#c8e6c9',200:'#a5d6a7',300:'#81c784',400:'#66bb6a',500:'#4caf50',600:'#43a047',700:'#388e3c',800:'#2e7d32',900:'#1b5e20','a100':'#b9f6ca','a200':'#69f0ae','a400':'#00e676','a700':'#00c853'},'light-green':{50:'#f1f8e9',100:'#dcedc8',200:'#c5e1a5',300:'#aed581',400:'#9ccc65',500:'#8bc34a',600:'#7cb342',700:'#689f38',800:'#558b2f',900:'#33691e','a100':'#ccff90','a200':'#b2ff59','a400':'#76ff03','a700':'#64dd17'},'lime':{50:'#f9fbe7',100:'#f0f4c3',200:'#e6ee9c',300:'#dce775',400:'#d4e157',500:'#cddc39',600:'#c0ca33',700:'#afb42b',800:'#9e9d24',900:'#827717','a100':'#f4ff81','a200':'#eeff41','a400':'#c6ff00','a700':'#aeea00'},'yellow':{50:'#fffde7',100:'#fff9c4',200:'#fff59d',300:'#fff176',400:'#ffee58',500:'#ffeb3b',600:'#fdd835',700:'#fbc02d',800:'#f9a825',900:'#f57f17','a100':'#ffff8d','a200':'#ffff00','a400':'#ffea00','a700':'#ffd600'},'amber':{50:'#fff8e1',100:'#ffecb3',200:'#ffe082',300:'#ffd54f',400:'#ffca28',500:'#ffc107',600:'#ffb300',700:'#ffa000',800:'#ff8f00',900:'#ff6f00','a100':'#ffe57f','a200':'#ffd740','a400':'#ffc400','a700':'#ffab00'},'orange':{50:'#fff3e0',100:'#ffe0b2',200:'#ffcc80',300:'#ffb74d',400:'#ffa726',500:'#ff9800',600:'#fb8c00',700:'#f57c00',800:'#ef6c00',900:'#e65100','a100':'#ffd180','a200':'#ffab40','a400':'#ff9100','a700':'#ff6d00'},'deep-orange':{50:'#fbe9e7',100:'#ffccbc',200:'#ffab91',300:'#ff8a65',400:'#ff7043',500:'#ff5722',600:'#f4511e',700:'#e64a19',800:'#d84315',900:'#bf360c','a100':'#ff9e80','a200':'#ff6e40','a400':'#ff3d00','a700':'#dd2c00'},'brown':{50:'#efebe9',100:'#d7ccc8',200:'#bcaaa4',300:'#a1887f',400:'#8d6e63',500:'#795548',600:'#6d4c41',700:'#5d4037',800:'#4e342e',900:'#3e2723'},'grey':{50:'#fafafa',100:'#f5f5f5',200:'#eeeeee',300:'#e0e0e0',400:'#bdbdbd',500:'#9e9e9e',600:'#757575',700:'#616161',800:'#424242',900:'#212121'},'blue-grey':{50:'#eceff1',100:'#cfd8dc',200:'#b0bec5',300:'#90a4ae',400:'#78909c',500:'#607d8b',600:'#546e7a',700:'#455a64',800:'#37474f',900:'#263238',1000:'#11171a'}},hasFashion:function(){return !!window.Fashion&&!!Fashion.css&&Fashion.css.setVariables},setAutoUpdateMeta:function(a){this._autoUpdateMeta=a},getAutoUpdateMeta:function(){return this._autoUpdateMeta},getDefaultWeight:function(){return this._defaultWeight},setDarkMode:function(a){if(!this.hasFashion()){return}Fashion.css.setVariables({'dark-mode':a?'true':'false'})},setColors:function(a){var b={},d,c;if(!this.hasFashion()){return}a=Ext.merge({baseWeight:this.getDefaultWeight(),accentWeight:this.getDefaultWeight()},a);d=this._colors[a.base];c=this._colors[a.accent];if(d){if(d[a.baseWeight]){b['base-color-name']=a.base;if(this.getAutoUpdateMeta()){this.updateMetaThemeColor(a.base,a.baseWeight)}}else {Ext.Logger.warn('Base color weight: '+a.baseWeight+' is not a valid weight',this)}}else {if(a.base){Ext.Logger.warn('Base color: '+a.base+' is not a valid material color',this)}}if(c){if(c[a.accentWeight]){b['accent-color-name']=a.accent}else {Ext.Logger.warn('Accent color weight: '+a.accentWeight+' is not a valid weight',this)}}else {if(a.accent){Ext.Logger.warn('Accent color: '+a.accent+' is not a valid material color',this)}}if(a.darkMode!==null){b['dark-mode']=a.darkMode?'true':'false'}Fashion.css.setVariables(b)},updateMetaThemeColor:function(e,b){var a=this._colors[e],d=Ext.manifest.material.toolbar.dynamic,c;if(!b){b=this.getDefaultWeight()}if(Ext.platformTags.android&&Ext.platformTags.chrome&&d&&a){a=a[b];c=Ext.query('meta[name="theme-color"]')[0];if(c){c.setAttribute('content',a)}}},getColors:function(){return this._colors}});var color,toolbarIsDynamic,head,meta;if(Ext.platformTags.android&&Ext.platformTags.chrome&&Ext.manifest.material&&Ext.manifest.material.toolbar){color=Ext.manifest.material.toolbar.color;toolbarIsDynamic=Ext.manifest.material.toolbar.dynamic;head=document.head;if(toolbarIsDynamic&&Ext.supports.CSSVariables){color=getComputedStyle(document.body).getPropertyValue('--primary-color-md');color=color.replace(/ /g,'').replace(/^#(?:\\3)?/,'#')}if(color){meta=document.createElement('meta');meta.setAttribute('name','theme-color');meta.setAttribute('content',color);head.appendChild(meta)}}Ext.namespace('Ext.theme.is').Material=!0;Ext.theme.name='Material';Ext.namespace('Ext.theme.is')['bm-material']=!0;Ext.theme.name='bm-material';Ext.define('GeoExt.util.Version',{statics:{isOl3:function(){return !!(ol.animation&&ol.Map.prototype.beforeRender)},isOl4:function(){return !this.isOl3()}}});Ext.define('GeoExt.mixin.SymbolCheck',{extend:Ext.Mixin,inheritableStatics:{_checked:{},check:function(a){},normalizeSymbol:function(){var a=function(a){};return a}(),checkSymbol:function(a,b){},isDefinedSymbol:function(a){}},onClassMixedIn:function(a){}});Ext.define('GeoExt.data.model.Base',{extend:Ext.data.Model,identifier:'uuid',schema:{id:'geoext-schema',namespace:'GeoExt.data.model'},inheritableStatics:{loadRawData:function(d){var e=this;var b=e.getProxy().getReader().readRecords(d||{});var a=b.getRecords();var c=b.getSuccess();if(c&&a.length){return a[0]}}}});Ext.define('GeoExt.data.model.Layer',{extend:GeoExt.data.model.Base,mixins:[GeoExt.mixin.SymbolCheck],textProperty:'name',descriptionProperty:'description',unnamedLayerText:'Unnamed Layer',unnamedGroupLayerText:'Unnamed Group Layer',fields:[{name:'isLayerGroup',type:'boolean',persist:!1,convert:function(c,b){var a=b.getOlLayer();if(a){return a instanceof ol.layer.Group}else {return undefined}}},{name:'text',type:'string',persist:!1,convert:function(e,a){var b=e;var c;var d;if(!b){d=a.textProperty;c=a.get('isLayerGroup')?a.unnamedGroupLayerText:a.unnamedLayerText;b=a.getOlLayerProp(d,c)}return b}},{name:'opacity',type:'number',persist:!1,convert:function(b,a){return a.getOlLayerProp('opacity')}},{name:'minResolution',type:'number',persist:!1,convert:function(b,a){return a.getOlLayerProp('minResolution')}},{name:'maxResolution',type:'number',persist:!1,convert:function(b,a){return a.getOlLayerProp('maxResolution')}},{name:'qtip',type:'string',persist:!1,convert:function(b,a){return a.getOlLayerProp(a.descriptionProperty,'')}},{name:'qtitle',type:'string',persist:!1,convert:function(b,a){return a.get('text')}}],proxy:{type:'memory',reader:{type:'json'}},getOlLayer:function(){if(this.data instanceof ol.layer.Base){return this.data}},getOlLayerProp:function(d,c){var a=this.getOlLayer();var b=a?a.get(d):undefined;return b!==undefined?b:c}});Ext.define('GeoExt.data.store.Layers',{extend:Ext.data.Store,alternateClassName:['GeoExt.data.LayerStore'],mixins:[GeoExt.mixin.SymbolCheck],model:'GeoExt.data.model.Layer',config:{map:null,layers:null,changeLayerFilterFn:null},constructor:function(a){var b=this;b.callParent([a]);if(a.map){this.bindMap(a.map)}else {if(a.layers){this.bindLayers(a.layers)}}},bindLayers:function(c,d){var a=this;if(!a.layers){a.layers=c}if(a.layers instanceof ol.layer.Group){a.layers=a.layers.getLayers()}var b=a.layers;b.forEach(function(b){a.loadRawData(b,!0)});b.forEach(function(b){b.on('propertychange',a.onChangeLayer,a)});b.on('add',a.onAddLayer,a);b.on('remove',a.onRemoveLayer,a);a.on({'load':a.onLoad,'clear':a.onClear,'add':a.onAdd,'remove':a.onRemove,'update':a.onStoreUpdate,'scope':a});a.data.on({'replace':a.onReplace,'scope':a});a.fireEvent('bind',a,d)},bindMap:function(a){var b=this;if(!b.map){b.map=a}if(a instanceof ol.Map){var c=a.getLayers();b.bindLayers(c,a)}},unbindLayers:function(){var a=this;if(a.layers){a.layers.un('add',a.onAddLayer,a);a.layers.un('remove',a.onRemoveLayer,a)}a.un('load',a.onLoad,a);a.un('clear',a.onClear,a);a.un('add',a.onAdd,a);a.un('remove',a.onRemove,a);a.un('update',a.onStoreUpdate,a);a.data.un('replace',a.onReplace,a)},unbindMap:function(){var a=this;a.unbindLayers();a.map=null},onChangeLayer:function(d){var e=this;var b=d.target;var a=-1;if(Ext.isFunction(e.changeLayerFilterFn)){a=this.findBy(e.changeLayerFilterFn.bind(b))}else {a=this.findBy(function(a){return a.getOlLayer()===b})}if(a>-1){var c=this.getAt(a);if(d.key==='title'){c.set('title',b.get('title'))}else {if(d.key==='description'){c.set('qtip',b.get('description'))}else {this.fireEvent('update',this,c,Ext.data.Record.EDIT,null,{})}}}},onAddLayer:function(e){var b=e.element;var d=this.layers.getArray().indexOf(b);var a=this;b.on('propertychange',a.onChangeLayer,a);if(!a._adding){a._adding=!0;var c=a.proxy.reader.read(b);a.insert(d,c.records);delete a._adding}},onRemoveLayer:function(d){var a=this;if(!a._removing){var b=d.element;var c=a.getByLayer(b);if(c){a._removing=!0;b.un('propertychange',a.onChangeLayer,a);a.remove(c);delete a._removing}}},onLoad:function(g,b,f){var a=this;if(f){if(!Ext.isArray(b)){b=[b]}if(!a._addRecords){a._removing=!0;a.layers.forEach(function(c){c.un('propertychange',a.onChangeLayer,a)});a.layers.getLayers().clear();delete a._removing}var e=b.length;if(e>0){var d=new Array(e);for(var c=0;c<e;c++){d[c]=b[c].getOlLayer();d[c].on('propertychange',a.onChangeLayer,a)}a._adding=!0;a.layers.extend(d);delete a._adding}}delete a._addRecords},onClear:function(){var a=this;a._removing=!0;a.layers.forEach(function(b){b.un('propertychange',a.onChangeLayer,a)});a.layers.clear();delete a._removing},onAdd:function(g,d,e){var a=this;if(!a._adding){a._adding=!0;var b;for(var c=0,f=d.length;c<f;++c){b=d[c].getOlLayer();b.on('propertychange',a.onChangeLayer,a);if(e===0){a.layers.push(b)}else {a.layers.insertAt(e,b)}}delete a._adding}},onRemove:function(i,f){var a=this;var c;var e;var d;var b;var g;if(!a._removing){var h=function(a){if(a===e){d=!0}};for(b=0,g=f.length;b<g;++b){c=f[b];e=c.getOlLayer();d=!1;e.un('propertychange',a.onChangeLayer,a);a.layers.forEach(h);if(d){a._removing=!0;a.removeMapLayer(c);delete a._removing}}}},onStoreUpdate:function(e,a,d){if(d===Ext.data.Record.EDIT){if(a.modified&&a.modified.title){var b=a.getOlLayer();var c=a.get('title');if(c!==b.get('title')){b.set('title',c)}}}},removeMapLayer:function(a){this.layers.remove(a.getOlLayer())},onReplace:function(b,a){this.removeMapLayer(a)},getByLayer:function(b){var a=this.findBy(function(a){return a.getOlLayer()===b});if(a>-1){return this.getAt(a)}},destroy:function(){this.unbindMap();this.callParent()},loadRecords:function(b,a){if(a&&a.addRecords){this._addRecords=!0}this.callParent(arguments)},loadRawData:function(e,d){var a=this;var b=a.proxy.reader.read(e);var c=b.records;if(b.success){a.totalCount=b.total;a.loadRecords(c,d?a.addRecordsOptions:undefined);a.fireEvent('load',a,c,!0)}}});Ext.define('GeoExt.component.Map',{extend:Ext.Component,alias:['widget.gx_map','widget.gx_component_map'],mixins:[GeoExt.mixin.SymbolCheck],stateEvents:['aftermapmove'],config:{map:null,pointerRest:!1,pointerRestInterval:1000,pointerRestPixelTolerance:3,ignorePointerRestSelectors:[]},mapRendered:!1,layerStore:null,lastPointerPixel:null,isMouseOverMapEl:null,constructor:function(b){var a=this;a.callParent([b]);if(!(a.getMap() instanceof ol.Map)){var c=new ol.Map({view:new ol.View({center:[0,0],zoom:2})});a.setMap(c)}a.bindStateOlEvents();a.on('resize',a.onResize,a)},onResize:function(){var a=this;if(!a.mapRendered){var b=a.getTargetEl?a.getTargetEl():a.element;a.getMap().setTarget(b.dom);a.mapRendered=!0}else {a.getMap().updateSize()}},bufferedPointerMove:Ext.emptyFn,unbufferedPointerMove:function(b){var a=this;var d=a.getPointerRestPixelTolerance();var c=b.pixel;if(a.isMouseOverIgnoreEl(b)){return}if(!a.isMouseOverMapEl){a.fireEvent('pointerrestout',b);return}if(a.lastPointerPixel){var e=Math.abs(a.lastPointerPixel[0]-c[0]);var f=Math.abs(a.lastPointerPixel[1]-c[1]);if(e>d||f>d){a.lastPointerPixel=c}else {a.fireEvent('pointerrest',b,a.lastPointerPixel);return}}else {a.lastPointerPixel=c}a.fireEvent('pointerrest',b,null)},isMouseOverIgnoreEl:function(){var c=this;var a=c.getIgnorePointerRestSelectors();if(a===undefined||a.length===0){return !1}var b=Ext.query(':hover');return b.some(function(b){return a.some(function(a){return b.matches(a)})})},registerPointerRestEvents:function(){var a=this;var b=a.getMap();if(a.bufferedPointerMove===Ext.emptyFn){a.bufferedPointerMove=Ext.Function.createBuffered(a.unbufferedPointerMove,a.getPointerRestInterval(),a)}b.on('pointermove',a.bufferedPointerMove);if(!a.rendered){a.on('afterrender',a.bindOverOutListeners,a)}else {a.bindOverOutListeners()}},bindOverOutListeners:function(){var a=this;var b=a.getTargetEl?a.getTargetEl():a.element;if(b){b.on({mouseover:a.onMouseOver,mouseout:a.onMouseOut,scope:a})}},unbindOverOutListeners:function(){var a=this;var b=a.getTargetEl?a.getTargetEl():a.element;if(b){b.un({mouseover:a.onMouseOver,mouseout:a.onMouseOut,scope:a})}},onMouseOver:function(){this.isMouseOverMapEl=!0},onMouseOut:function(){this.isMouseOverMapEl=!1},unregisterPointerRestEvents:function(){var a=this;var b=a.getMap();a.unbindOverOutListeners();if(b){b.un('pointermove',a.bufferedPointerMove)}a.bufferedPointerMove=Ext.emptyFn},applyPointerRest:function(a){if(a){this.registerPointerRestEvents()}else {this.unregisterPointerRestEvents()}return a},applyPointerRestInterval:function(c){var a=this;var b=a.getPointerRest();if(b){a.setPointerRest(!1);a.setPointerRest(b)}return c},getCenter:function(){return this.getMap().getView().getCenter()},setCenter:function(a){this.getMap().getView().setCenter(a)},getExtent:function(){return this.getView().calculateExtent(this.getMap().getSize())},setExtent:function(a){if(GeoExt.util.Version.isOl3()){this.getView().fit(a,this.getMap().getSize())}else {this.getView().fit(a)}},getLayers:function(){return this.getMap().getLayers()},addLayer:function(a){if(a instanceof ol.layer.Base){this.getMap().addLayer(a)}else {Ext.Error.raise('Can not add layer '+a+' as it is not '+'an instance of ol.layer.Base')}},removeLayer:function(a){if(a instanceof ol.layer.Base){if(Ext.Array.contains(this.getLayers().getArray(),a)){this.getMap().removeLayer(a)}}else {Ext.Error.raise('Can not remove layer '+a+' as it is not '+'an instance of ol.layer.Base')}},getStore:function(){return this.layerStore},getView:function(){return this.getMap().getView()},setView:function(a){this.getMap().setView(a)},bindStateOlEvents:function(){var a=this;var b=a.getMap();b.on('moveend',function(c){a.fireEvent('aftermapmove',a,b,c)})},getState:function(){var b=this;var a=b.getMap().getView();return {zoom:a.getZoom(),center:a.getCenter(),rotation:a.getRotation()}},applyState:function(a){if(!Ext.isObject(a)){return}var c=this;var b=c.getMap().getView();b.setCenter(a.center);b.setZoom(a.zoom);b.setRotation(a.rotation)}});Ext.define(null,{override:'Ext.ux.gauge.needle.Abstract',compatibility:Ext.isIE10p,setTransform:function(c,d,b){var a=this.getNeedleGroup();this.callParent([c,d,b]);a.set({transform:getComputedStyle(a.dom).getPropertyValue('transform')})},updateStyle:function(b){var a;this.callParent([b]);if(Ext.isObject(b)&&'transform' in b){a=this.getNeedlePath();a.set({transform:getComputedStyle(a.dom).getPropertyValue('transform')})}}});Ext.define('Ext.ux.rating.Picker',{extend:Ext.Gadget,xtype:'rating',focusable:!0,cachedConfig:{family:'monospace',glyphs:'',minimum:1,limit:5,overStyle:null,rounding:1,scale:'125%',selectedStyle:null,tip:null,trackOver:!0,value:null,tooltipText:null,trackingValue:null},config:{animate:null},element:{cls:'u'+Ext.baseCSSPrefix+'rating-picker',reference:'element',children:[{reference:'innerEl',cls:'u'+Ext.baseCSSPrefix+'rating-picker-inner',listeners:{click:'onClick',mousemove:'onMouseMove',mouseenter:'onMouseEnter',mouseleave:'onMouseLeave'},children:[{reference:'valueEl',cls:'u'+Ext.baseCSSPrefix+'rating-picker-value'},{reference:'trackerEl',cls:'u'+Ext.baseCSSPrefix+'rating-picker-tracker'}]}]},defaultBindProperty:'value',twoWayBindable:'value',overCls:'u'+Ext.baseCSSPrefix+'rating-picker-over',trackOverCls:'u'+Ext.baseCSSPrefix+'rating-picker-track-over',applyGlyphs:function(a){if(typeof a==='string'){a=[a.charAt(0),a.charAt(1)]}else {if(typeof a[0]==='number'){a=[String.fromCharCode(a[0]),String.fromCharCode(a[1])]}}return a},applyOverStyle:function(a){this.trackerEl.applyStyles(a)},applySelectedStyle:function(a){this.valueEl.applyStyles(a)},applyTip:function(a){if(a&&typeof a!=='function'){if(!a.isTemplate){a=new Ext.XTemplate(a)}a=a.apply.bind(a)}return a},applyTrackingValue:function(a){return this.applyValue(a)},applyValue:function(a){var b,c,d;if(a!==null){b=this.getRounding();c=this.getLimit();d=this.getMinimum();a=Math.round(Math.round(a/b)*b*1000)/1000;a=a<d?d:a>c?c:a}return a},onClick:function(a){var b=this.valueFromEvent(a);this.setValue(b)},onMouseEnter:function(){this.element.addCls(this.overCls)},onMouseLeave:function(){this.element.removeCls(this.overCls)},onMouseMove:function(a){var b=this.valueFromEvent(a);this.setTrackingValue(b)},updateFamily:function(a){this.element.setStyle('fontFamily',"'"+a+"'")},updateGlyphs:function(){this.refreshGlyphs()},updateLimit:function(){this.refreshGlyphs()},updateScale:function(a){this.element.setStyle('fontSize',a)},updateTip:function(){this.refreshTip()},updateTooltipText:function(a){this.setTooltip(a)},updateTrackingValue:function(d){var a=this,b=a.trackerEl,c=a.valueToPercent(d);b.setStyle('width',c);a.refreshTip()},updateTrackOver:function(a){this.element.toggleCls(this.trackOverCls,a)},updateValue:function(e,g){var a=this,h=a.getAnimate(),c=a.valueEl,f=a.valueToPercent(e),b,d;if(a.isConfiguring||!h){c.setStyle('width',f)}else {c.stopAnimation();c.animate(Ext.merge({from:{width:a.valueToPercent(g)},to:{width:f}},h))}a.refreshTip();if(!a.isConfiguring){if(a.hasListeners.change){a.fireEvent('change',a,e,g)}b=a.getWidgetColumn&&a.getWidgetColumn();d=b&&a.getWidgetRecord&&a.getWidgetRecord();if(d&&b.dataIndex){d.set(b.dataIndex,e)}}},afterCachedConfig:function(){this.refresh();return this.callParent(arguments)},initConfig:function(a){this.isConfiguring=!0;this.callParent([a]);this.refresh()},setConfig:function(){var a=this;a.isReconfiguring=!0;a.callParent(arguments);a.isReconfiguring=!1;a.refresh();return a},privates:{getGlyphTextNode:function(b){var a=b.lastChild;if(!a||a.nodeType!==3){a=b.ownerDocument.createTextNode('');b.appendChild(a)}return a},getTooltipData:function(){var a=this;return {component:a,tracking:a.getTrackingValue(),trackOver:a.getTrackOver(),value:a.getValue()}},refresh:function(){var a=this;if(a.invalidGlyphs){a.refreshGlyphs(!0)}if(a.invalidTip){a.refreshTip(!0)}},refreshGlyphs:function(j){var a=this,g=!j&&(a.isConfiguring||a.isReconfiguring),i,c,h,b,d,e,f;if(!g){i=a.getGlyphTextNode(a.innerEl.dom);f=a.getGlyphTextNode(a.valueEl.dom);e=a.getGlyphTextNode(a.trackerEl.dom);c=a.getGlyphs();h=a.getLimit();for(b=d='';h--;){d+=c[0];b+=c[1]}i.nodeValue=d;f.nodeValue=b;e.nodeValue=b}a.invalidGlyphs=g},refreshTip:function(f){var a=this,c=!f&&(a.isConfiguring||a.isReconfiguring),d,e,b;if(!c){b=a.getTip();if(b){d=a.getTooltipData();e=b(d);a.setTooltipText(e)}}a.invalidTip=c},valueFromEvent:function(g){var a=this,e=a.innerEl,j=g.getX(),d=a.getRounding(),i=e.getX(),c=j-i,f=e.getWidth(),h=a.getLimit(),b;if(a.getInherited().rtl){c=f-c}b=c/f*h;b=Math.ceil(b/d)*d;return b},valueToPercent:function(a){a=a/this.getLimit()*100;return a+'%'}}});Ext.define('Ext.ux.overrides.rating.Picker',{override:'Ext.ux.rating.Picker',updateTooltipText:function(c){var e=this.innerEl,b=Ext.tip&&Ext.tip.QuickTipManager,d=b&&b.tip,a;if(b){e.dom.setAttribute('data-qtip',c);this.trackerEl.dom.setAttribute('data-qtip',c);a=d&&d.activeTarget;a=a&&a.el;if(a&&e.contains(a)){d.update(c)}}}});Ext.define('Ext.overrides.ux.rating.Picker',{override:'Ext.ux.rating.Picker',disabled:!1,onClick:function(a){if(this.disabled){return}var b=this.valueFromEvent(a);this.setValue(b)},onMouseEnter:function(){if(this.disabled){return}this.element.addCls(this.overCls)},onMouseLeave:function(){if(this.disabled){return}this.element.removeCls(this.overCls)},onMouseMove:function(a){if(this.disabled){return}var b=this.valueFromEvent(a);this.setTrackingValue(b)}});Ext.define('Ext.ux.FieldReplicator',{alias:'plugin.fieldreplicator',init:function(a){if(!a.replicatorId){a.replicatorId=Ext.id()}a.on('blur',this.onBlur,this)},onBlur:function(a){var b=a.ownerCt,d=a.replicatorId,f=Ext.isEmpty(a.getRawValue()),e=b.query('[replicatorId='+d+']'),c=e[e.length-1]===a,g,h;if(f&&!c){Ext.defer(a.destroy,10,a)}else {if(!f&&c){if(a.onReplicate){a.onReplicate()}g=a.cloneConfig({replicatorId:d});h=b.items.indexOf(a);b.add(h+1,g)}}}});Ext.define('Ext.ux.statusbar.StatusBar',{extend:Ext.toolbar.Toolbar,xtype:'statusbar',alternateClassName:'Ext.ux.StatusBar',cls:'x-statusbar',busyIconCls:'x-status-busy',busyText:'Loading...',autoClear:5000,emptyText:'&#160;',activeThreadId:0,initComponent:function(){var a=this.statusAlign==='right';this.callParent(arguments);this.currIconCls=this.iconCls||this.defaultIconCls;this.statusEl=Ext.create('Ext.toolbar.TextItem',{cls:'x-status-text '+(this.currIconCls||''),text:this.text||this.defaultText||''});if(a){this.cls+=' x-status-right';this.add('->');this.add(this.statusEl)}else {this.insert(0,this.statusEl);this.insert(1,'->')}},setStatus:function(b){var c=this,a,e,d;b=b||{};Ext.suspendLayouts();if(Ext.isString(b)){b={text:b}}if(b.text!==undefined){c.setText(b.text)}if(b.iconCls!==undefined){c.setIcon(b.iconCls)}if(b.clear){a=b.clear;e=c.autoClear;d={useDefaults:!0,anim:!0};if(Ext.isObject(a)){a=Ext.applyIf(a,d);if(a.wait){e=a.wait}}else {if(Ext.isNumber(a)){e=a;a=d}else {if(Ext.isBoolean(a)){a=d}}}a.threadId=this.activeThreadId;Ext.defer(c.clearStatus,e,c,[a])}Ext.resumeLayouts(!0);return c},clearStatus:function(b){var a=this,e=a.statusEl,d,c;b=b||{};if(a.destroyed||b.threadId&&b.threadId!==a.activeThreadId){return a}d=b.useDefaults?a.defaultText:a.emptyText;c=b.useDefaults?a.defaultIconCls?a.defaultIconCls:'':'';if(b.anim){e.el.puff({remove:!1,useDisplay:!0,callback:function(){e.el.show();a.setStatus({text:d,iconCls:c})}})}else {a.setStatus({text:d,iconCls:c})}return a},setText:function(b){var a=this;a.activeThreadId++;a.text=b||'';if(a.rendered){a.statusEl.setText(a.text)}return a},getText:function(){return this.text},setIcon:function(b){var a=this;a.activeThreadId++;b=b||'';if(a.rendered){if(a.currIconCls){a.statusEl.removeCls(a.currIconCls);a.currIconCls=null}if(b.length>0){a.statusEl.addCls(b);a.currIconCls=b}}else {a.currIconCls=b}return a},showBusy:function(a){if(Ext.isString(a)){a={text:a}}a=Ext.applyIf(a||{},{text:this.busyText,iconCls:this.busyIconCls});return this.setStatus(a)}});Ext.define('Ext.ux.colorpick.Selection',{mixinId:'colorselection',config:{format:'hex6',value:'FF0000',color:null,previousColor:null,alphaDecimalFormat:'#.##'},applyColor:function(b){var a=b;if(Ext.isString(a)){a=Ext.ux.colorpick.ColorUtils.parseColor(b,this.getAlphaDecimalFormat())}return a},applyFormat:function(a){var b=Ext.ux.colorpick.ColorUtils.formats;if(!b.hasOwnProperty(a)){return}return a},applyValue:function(a){var b=Ext.ux.colorpick.ColorUtils.parseColor(a||'#000000',this.getAlphaDecimalFormat());return this.formatColor(b)},formatColor:function(a){return Ext.ux.colorpick.ColorUtils.formats[this.getFormat()](a)},updateColor:function(b){var a=this;if(!a.syncing){a.syncing=!0;a.setValue(a.formatColor(b));a.syncing=!1}},updateValue:function(b,c){var a=this;if(!a.syncing){a.syncing=!0;a.setColor(b);a.syncing=!1}this.fireEvent('change',a,b,c)}});Ext.define('Ext.ux.colorpick.ColorUtils',function(a){var b=Ext.isIE&&Ext.ieVersion<10;return {singleton:!0,constructor:function(){a=this},backgroundTpl:b?'filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, '+"startColorstr='#{alpha}{hex}', endColorstr='#{alpha}{hex}');":'background: {rgba};',setBackground:b?function(f,b){var e,d,c;if(f){e=Ext.XTemplate.getTpl(a,'backgroundTpl');d={hex:a.rgb2hex(b.r,b.g,b.b),alpha:Math.floor(b.a*255).toString(16)};c=e.apply(d);f.applyStyles(c)}}:function(e,f){var d,c,b;if(e){d=Ext.XTemplate.getTpl(a,'backgroundTpl');c={rgba:a.getRGBAString(f)};b=d.apply(c);e.applyStyles(b)}},formats:{RGB:function(b){return a.getRGBString(b).toUpperCase()},RGBA:function(b){return a.getRGBAString(b).toUpperCase()},HEX6:function(b){return a.rgb2hex(b.r,b.g,b.b)},HEX8:function(b){var c=a.rgb2hex(b.r,b.g,b.b),d=Math.round(b.a*255).toString(16);if(d.length<2){c+='0'}c+=d.toUpperCase();return c}},hexRe:/^#?(([0-9a-f]{8})|((?:[0-9a-f]{3}){1,2}))$/i,rgbaAltRe:/^rgba\(\s*([\w#\d]+)\s*,\s*([\d\.]+)\s*\)$/i,rgbaRe:/^rgba\(\s*([\d\.]+)\s*,\s*([\d\.]+)\s*,\s*([\d\.]+)\s*,\s*([\d\.]+)\s*\)$/i,rgbRe:/^rgb\(\s*([\d\.]+)\s*,\s*([\d\.]+)\s*,\s*([\d\.]+)\s*\)$/i,parseColor:function(d,g){if(!d){return null}var e=this,f=e.colorMap[d],b,c,h;if(f){c={r:f[0],g:f[1],b:f[2],a:1}}else {if(d==='transparent'){c={r:0,g:0,b:0,a:0}}else {b=e.hexRe.exec(d);if(b){b=b[1];switch(b.length){default:return null;case 3:c={r:parseInt(b[0]+b[0],16),g:parseInt(b[1]+b[1],16),b:parseInt(b[2]+b[2],16),a:1};break;case 6:case 8:c={r:parseInt(b.substr(0,2),16),g:parseInt(b.substr(2,2),16),b:parseInt(b.substr(4,2),16),a:parseInt(b.substr(6,2)||'ff',16)/255};break;}}else {b=e.rgbaRe.exec(d);if(b){c={r:parseFloat(b[1]),g:parseFloat(b[2]),b:parseFloat(b[3]),a:parseFloat(b[4])}}else {b=e.rgbaAltRe.exec(d);if(b){c=e.parseColor(b[1]);c.a=parseFloat(b[2]);return c}b=e.rgbRe.exec(d);if(b){c={r:parseFloat(b[1]),g:parseFloat(b[2]),b:parseFloat(b[3]),a:1}}else {return null}}}}}if(g){c.a=Ext.util.Format.number(c.a,g)}h=this.rgb2hsv(c.r,c.g,c.b);return Ext.apply(c,h)},isValid:function(b){return a.parseColor(b)!==null},getRGBAString:function(b){return 'rgba('+b.r+','+b.g+','+b.b+','+b.a+')'},getRGBString:function(b){return 'rgb('+b.r+','+b.g+','+b.b+')'},hsv2rgb:function(e,i,h){e=e*360;if(e===360){e=0}var c=h*i,g=e/60,d=c*(1-Math.abs(g%2-1)),b=[0,0,0],f;switch(Math.floor(g)){case 0:b=[c,d,0];break;case 1:b=[d,c,0];break;case 2:b=[0,c,d];break;case 3:b=[0,d,c];break;case 4:b=[d,0,c];break;case 5:b=[c,0,d];break;default:break;}f=h-c;b[0]+=f;b[1]+=f;b[2]+=f;b[0]=Math.round(b[0]*255);b[1]=Math.round(b[1]*255);b[2]=Math.round(b[2]*255);return {r:b[0],g:b[1],b:b[2]}},rgb2hsv:function(e,d,c){e=e/255;d=d/255;c=c/255;var g=Math.max(e,d,c),k=Math.min(e,d,c),f=g-k,h=0,j=0,b,i;if(f!==0){if(g===e){h=(d-c)/f%6}else {if(g===d){h=(c-e)/f+2}else {if(g===c){h=(e-d)/f+4}}}}b=h*60;if(b===360){b=0}i=g;if(f!==0){j=f/i}b=b/360;if(b<0){b=b+1}return {h:b,s:j,v:i}},rgb2hex:function(d,c,b){d=d.toString(16);c=c.toString(16);b=b.toString(16);if(d.length<2){d='0'+d}if(c.length<2){c='0'+c}if(b.length<2){b='0'+b}return (d+c+b).toUpperCase()},colorMap:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}}},function(c){var a=c.formats,b={};a['#HEX6']=function(b){return '#'+a.HEX6(b)};a['#HEX8']=function(b){return '#'+a.HEX8(b)};Ext.Object.each(a,function(a,d){b[a.toLowerCase()]=function(b){var e=d(b);return e.toLowerCase()}});Ext.apply(a,b)});Ext.define('Ext.ux.colorpick.ColorMapController',{extend:Ext.app.ViewController,alias:'controller.colorpickercolormapcontroller',onFirstBoxReady:function(){var a=this,c=a.getView(),d=c.down('#dragHandle'),b=d.dd;b.constrain=!0;b.constrainTo=c.getEl();b.initialConstrainTo=b.constrainTo;b.on('drag',Ext.bind(a.onHandleDrag,a));a.mon(c.getEl(),{mousedown:a.onMouseDown,dragstart:a.onDragStart,scope:a})},onHandleDrag:function(k,l){var h=this,a=h.getView(),e=a.down('#dragHandle'),i=e.getX()-a.getX(),j=e.getY()-a.getY(),d=a.getEl(),g=d.getWidth(),f=d.getHeight(),b=i/g,c=j/f;if(b>0.99){b=1}if(c>0.99){c=1}a.fireEvent('handledrag',b,c)},onMouseDown:function(b){var c=this,d=c.getView(),a=d.down('#dragHandle');a.setY(b.getY());a.setX(b.getX());c.onHandleDrag();a.dd.onMouseDown(b,a.dd.el)},onDragStart:function(d){var c=this,b=c.getView(),a=b.down('#dragHandle');a.dd.onDragStart(d,a.dd.el)},onMapClick:function(h){var f=this,a=f.getView(),g=a.down('#dragHandle'),c=a.getXY(),d=h.getXY(),b,e;b=d[0]-c[0];e=d[1]-c[1];g.getEl().setStyle({left:b+'px',top:e+'px'});f.onHandleDrag()},onColorBindingChanged:function(n){var i=this,m=i.getViewModel(),a=m.get('selectedColor'),d=i.getView(),l=d.down('#dragHandle'),c=d.getEl(),k=c.getWidth(),j=c.getHeight(),b,e,f,g,h;b=Ext.ux.colorpick.ColorUtils.rgb2hsv(a.r,a.g,a.b);e=b.s;g=k*e;f=1-b.v;h=j*f;l.getEl().setStyle({left:g+'px',top:h+'px'})},onHueBindingChanged:function(c){var d=this,a,b;a=Ext.ux.colorpick.ColorUtils.hsv2rgb(c,1,1);b=Ext.ux.colorpick.ColorUtils.rgb2hex(a.r,a.g,a.b);d.getView().getEl().applyStyles({'background-color':'#'+b})}});Ext.define('Ext.ux.colorpick.ColorMap',{extend:Ext.container.Container,alias:'widget.colorpickercolormap',controller:'colorpickercolormapcontroller',cls:Ext.baseCSSPrefix+'colorpicker-colormap',items:[{xtype:'component',cls:Ext.baseCSSPrefix+'colorpicker-colormap-draghandle-container',itemId:'dragHandle',width:1,height:1,draggable:!0,html:'<div class="'+Ext.baseCSSPrefix+'colorpicker-colormap-draghandle"></div>'}],listeners:{boxready:{single:!0,fn:'onFirstBoxReady',scope:'controller'},colorbindingchanged:{fn:'onColorBindingChanged',scope:'controller'},huebindingchanged:{fn:'onHueBindingChanged',scope:'controller'}},afterRender:function(){var c=this,a=c.mapGradientUrl,b=c.el;c.callParent();if(!a){a=b.getStyle('background-image');a=a.substring(4,a.length-1);if(a.indexOf('"')===0){a=a.substring(1,a.length-1)}Ext.ux.colorpick.ColorMap.prototype.mapGradientUrl=a}b.setStyle('background-image','none');b=c.layout.getElementTarget();b.createChild({tag:'img',cls:Ext.baseCSSPrefix+'colorpicker-colormap-blender',src:a})},setPosition:function(c){var b=this,a=b.down('#dragHandle');if(!a.dd||!a.dd.constrain){return}if(typeof a.dd.dragEnded!=='undefined'&&!a.dd.dragEnded){return}b.fireEvent('colorbindingchanged',c)},setHue:function(b){var a=this;if(!a.getEl()){return}a.fireEvent('huebindingchanged',b)}});Ext.define('Ext.ux.colorpick.SelectorModel',{extend:Ext.app.ViewModel,alias:'viewmodel.colorpick-selectormodel',data:{selectedColor:{r:255,g:255,b:255,h:0,s:1,v:1,a:1},previousColor:{r:0,g:0,b:0,h:0,s:1,v:1,a:1}},formulas:{hex:{get:function(a){var e=a('selectedColor.r').toString(16),d=a('selectedColor.g').toString(16),c=a('selectedColor.b').toString(16),b;b=Ext.ux.colorpick.ColorUtils.rgb2hex(e,d,c);return '#'+b},set:function(a){var b=Ext.ux.colorpick.ColorUtils.parseColor(a);this.changeRGB(b)}},red:{get:function(a){return a('selectedColor.r')},set:function(a){this.changeRGB({r:a})}},green:{get:function(a){return a('selectedColor.g')},set:function(a){this.changeRGB({g:a})}},blue:{get:function(a){return a('selectedColor.b')},set:function(a){this.changeRGB({b:a})}},hue:{get:function(a){return a('selectedColor.h')*360},set:function(a){this.changeHSV({h:a/360})}},saturation:{get:function(a){return a('selectedColor.s')*100},set:function(a){this.changeHSV({s:a/100})}},value:{get:function(a){var b=a('selectedColor.v');return b*100},set:function(a){this.changeHSV({v:a/100})}},alpha:{get:function(a){var b=a('selectedColor.a');return b*100},set:function(a){this.set('selectedColor',Ext.applyIf({a:a/100},this.data.selectedColor))}}},changeHSV:function(a){var b;Ext.applyIf(a,this.data.selectedColor);b=Ext.ux.colorpick.ColorUtils.hsv2rgb(a.h,a.s,a.v);a.r=b.r;a.g=b.g;a.b=b.b;this.set('selectedColor',a)},changeRGB:function(a){var b;Ext.applyIf(a,this.data.selectedColor);b=Ext.ux.colorpick.ColorUtils.rgb2hsv(a.r,a.g,a.b);a.h=b.h;a.s=b.s;a.v=b.v;this.set('selectedColor',a)}});Ext.define('Ext.ux.colorpick.SelectorController',{extend:Ext.app.ViewController,alias:'controller.colorpick-selectorcontroller',destroy:function(){var c=this,b=c.getView(),a=b.childViewModel;if(a){a.destroy();b.childViewModel=null}c.callParent()},changeHSV:function(a){var b=this.getView(),d=b.getColor(),c;Ext.applyIf(a,d);c=Ext.ux.colorpick.ColorUtils.hsv2rgb(a.h,a.s,a.v);Ext.apply(a,c);b.setColor(a)},onColorMapHandleDrag:function(a,b){this.changeHSV({s:a,v:1-b})},onValueSliderHandleDrag:function(a){this.changeHSV({v:1-a})},onSaturationSliderHandleDrag:function(a){this.changeHSV({s:1-a})},onHueSliderHandleDrag:function(a){this.changeHSV({h:1-a})},onAlphaSliderHandleDrag:function(c){var a=this.getView(),d=a.getColor(),b=Ext.applyIf({a:1-c},d);a.setColor(b);a.el.repaint()},onPreviousColorSelected:function(c,a){var b=this.getView();b.setColor(a)},onOK:function(){var b=this,a=b.getView();a.fireEvent('ok',a,a.getValue())},onCancel:function(){this.fireViewEvent('cancel',this.getView())},onResize:function(){var c=this,h=c.getView(),b=h.childViewModel,a=c.getReferences(),e,f,g,d;if(!c.hasResizedOnce){c.hasResizedOnce=!0;return}e=b.get('hue');f=b.get('saturation');g=b.get('value');d=b.get('alpha');a.colorMap.setPosition(b.getData());a.hueSlider.setHue(e);a.satSlider.setSaturation(f);a.valueSlider.setValue(g);a.alphaSlider.setAlpha(d)}});Ext.define('Ext.ux.colorpick.ColorPreview',{extend:Ext.Component,alias:'widget.colorpickercolorpreview',style:'position: relative',html:'<div class="'+Ext.baseCSSPrefix+'colorpreview-filter" style="height:100%; width:100%; position: absolute;"></div>'+'<a class="btn" style="height:100%; width:100%; position: absolute;"></a>',cls:Ext.baseCSSPrefix+'colorpreview',height:256,onRender:function(){var a=this;a.callParent(arguments);a.mon(a.el.down('.btn'),'click',a.onClick,a)},onClick:function(){this.fireEvent('click',this,this.color)},setColor:function(b){var a=this,c=a.getEl();if(!c){return}a.color=b;a.applyBgStyle(b)},bgStyleTpl:Ext.create('Ext.XTemplate',Ext.isIE&&Ext.ieVersion<10?"filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#{hexAlpha}{hex}', endColorstr='#{hexAlpha}{hex}');":'background: {rgba};'),applyBgStyle:function(a){var i=this,b=Ext.ux.colorpick.ColorUtils,g='.'+Ext.baseCSSPrefix+'colorpreview-filter',h=i.getEl().down(g),f,d,e,c;f=b.rgb2hex(a.r,a.g,a.b);d=Ext.util.Format.hex(Math.floor(a.a*255),2);e=b.getRGBAString(a);c=this.bgStyleTpl.apply({hex:f,hexAlpha:d,rgba:e});h.applyStyles(c)}});Ext.define('Ext.ux.colorpick.SliderController',{extend:Ext.app.ViewController,alias:'controller.colorpick-slidercontroller',boxReady:function(e){var b=this,d=b.getDragContainer(),c=b.getDragHandle(),a=c.dd;a.constrain=!0;a.constrainTo=d.getEl();a.initialConstrainTo=a.constrainTo;a.on('drag',b.onHandleDrag,b)},getDragHandle:function(){return this.view.lookupReference('dragHandle')},getDragContainer:function(){return this.view.lookupReference('dragHandleContainer')},onHandleDrag:function(i){var b=this,g=b.getView(),c=b.getDragContainer(),f=b.getDragHandle(),h=f.getY()-c.getY(),e=c.getEl(),d=e.getHeight(),a=h/d;if(a>0.99){a=1}g.fireEvent('handledrag',a)},onMouseDown:function(c){var b=this,a=b.getDragHandle(),d=c.getY();a.setY(d);b.onHandleDrag();a.el.repaint();a.dd.onMouseDown(c,a.dd.el)},onDragStart:function(c){var b=this,a=b.getDragHandle();a.dd.onDragStart(c,a.dd.el)},onMouseUp:function(){var a=this.getDragHandle();a.dd.dragEnded=!0}});Ext.define('Ext.ux.colorpick.Slider',{extend:Ext.container.Container,xtype:'colorpickerslider',controller:'colorpick-slidercontroller',afterRender:function(){var c,a,b;this.callParent(arguments);c=this.width;a=this.lookupReference('dragHandleContainer');b=a.getWidth();a.el.setStyle('left',(c-b)/2+'px')},baseCls:Ext.baseCSSPrefix+'colorpicker-slider',referenceHolder:!0,listeners:{element:'el',mousedown:'onMouseDown',mouseup:'onMouseUp',dragstart:'onDragStart'},items:{xtype:'container',cls:Ext.baseCSSPrefix+'colorpicker-draghandle-container',reference:'dragHandleContainer',height:'100%',items:{xtype:'component',cls:Ext.baseCSSPrefix+'colorpicker-draghandle-outer',reference:'dragHandle',width:'100%',height:1,draggable:!0,html:'<div class="'+Ext.baseCSSPrefix+'colorpicker-draghandle"></div>'}},getDragHandle:function(){return this.lookupReference('dragHandle')},getDragContainer:function(){return this.lookupReference('dragHandleContainer')}});Ext.define('Ext.ux.colorpick.SliderAlpha',{extend:Ext.ux.colorpick.Slider,alias:'widget.colorpickerslideralpha',cls:Ext.baseCSSPrefix+'colorpicker-alpha',gradientStyleTpl:Ext.create('Ext.XTemplate',Ext.isIE&&Ext.ieVersion<10?"filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#FF{hex}', endColorstr='#00{hex}');":'background: -moz-linear-gradient(top, rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);'+'background: -webkit-linear-gradient(top,rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);'+'background: -o-linear-gradient(top, rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);'+'background: -ms-linear-gradient(top, rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);'+'background: linear-gradient(to bottom, rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);'),setAlpha:function(h){var d=this,g=d.getDragContainer(),a=d.getDragHandle(),f=g.getEl(),e=f.getHeight(),c,b;if(!a.dd||!a.dd.constrain){return}if(typeof a.dd.dragEnded!=='undefined'&&!a.dd.dragEnded){return}b=e*(1-h/100);c=a.getEl();c.setStyle({top:b+'px'})},setColor:function(a){var b=this,e=b.getDragContainer(),c,d;if(!b.getEl()){return}c=Ext.ux.colorpick.ColorUtils.rgb2hex(a.r,a.g,a.b);d=e.getEl().first();d.applyStyles(b.gradientStyleTpl.apply({hex:c,r:a.r,g:a.g,b:a.b}))}});Ext.define('Ext.ux.colorpick.SliderSaturation',{extend:Ext.ux.colorpick.Slider,alias:'widget.colorpickerslidersaturation',cls:Ext.baseCSSPrefix+'colorpicker-saturation',gradientStyleTpl:Ext.create('Ext.XTemplate',Ext.isIE&&Ext.ieVersion<10?"filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#{hex}', endColorstr='#ffffff');":'background: -mox-linear-gradient(top, #{hex} 0%, #ffffff 100%);'+'background: -webkit-linear-gradient(top, #{hex} 0%,#ffffff 100%);'+'background: -o-linear-gradient(top, #{hex} 0%,#ffffff 100%);'+'background: -ms-linear-gradient(top, #{hex} 0%,#ffffff 100%);'+'background: linear-gradient(to bottom, #{hex} 0%,#ffffff 100%);'),setSaturation:function(g){var d=this,h=d.getDragContainer(),a=d.getDragHandle(),f=h.getEl(),e=f.getHeight(),b,c;if(!a.dd||!a.dd.constrain){return}if(typeof a.dd.dragEnded!=='undefined'&&!a.dd.dragEnded){return}b=1-g/100;c=e*b;a.getEl().setStyle({top:c+'px'})},setHue:function(e){var b=this,d=b.getDragContainer(),a,c;if(!b.getEl()){return}a=Ext.ux.colorpick.ColorUtils.hsv2rgb(e,1,1);c=Ext.ux.colorpick.ColorUtils.rgb2hex(a.r,a.g,a.b);d.getEl().applyStyles(b.gradientStyleTpl.apply({hex:c}))}});Ext.define('Ext.ux.colorpick.SliderValue',{extend:Ext.ux.colorpick.Slider,alias:'widget.colorpickerslidervalue',cls:Ext.baseCSSPrefix+'colorpicker-value',gradientStyleTpl:Ext.create('Ext.XTemplate',Ext.isIE&&Ext.ieVersion<10?"filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#{hex}', endColorstr='#000000');":'background: -mox-linear-gradient(top, #{hex} 0%, #000000 100%);'+'background: -webkit-linear-gradient(top, #{hex} 0%,#000000 100%);'+'background: -o-linear-gradient(top, #{hex} 0%,#000000 100%);'+'background: -ms-linear-gradient(top, #{hex} 0%,#000000 100%);'+'background: linear-gradient(to bottom, #{hex} 0%,#000000 100%);'),setValue:function(h){var d=this,g=d.getDragContainer(),a=d.getDragHandle(),f=g.getEl(),e=f.getHeight(),b,c;if(!a.dd||!a.dd.constrain){return}if(typeof a.dd.dragEnded!=='undefined'&&!a.dd.dragEnded){return}b=1-h/100;c=e*b;a.getEl().setStyle({top:c+'px'})},setHue:function(e){var b=this,d=b.getDragContainer(),a,c;if(!b.getEl()){return}a=Ext.ux.colorpick.ColorUtils.hsv2rgb(e,1,1);c=Ext.ux.colorpick.ColorUtils.rgb2hex(a.r,a.g,a.b);d.getEl().applyStyles(b.gradientStyleTpl.apply({hex:c}))}});Ext.define('Ext.ux.colorpick.SliderHue',{extend:Ext.ux.colorpick.Slider,alias:'widget.colorpickersliderhue',cls:Ext.baseCSSPrefix+'colorpicker-hue',afterRender:function(){var c=this,a=c.gradientUrl,b=c.el;c.callParent();if(!a){a=b.getStyle('background-image');a=a.substring(4,a.length-1);if(a.indexOf('"')===0){a=a.substring(1,a.length-1)}Ext.ux.colorpick.SliderHue.prototype.gradientUrl=a}b.setStyle('background-image','none');b=c.getDragContainer().layout.getElementTarget();b.createChild({tag:'img',cls:Ext.baseCSSPrefix+'colorpicker-hue-gradient',src:a})},setHue:function(h){var d=this,g=d.getDragContainer(),a=d.getDragHandle(),f=g.getEl(),e=f.getHeight(),c,b;if(!a.dd||!a.dd.constrain){return}if(typeof a.dd.dragEnded!=='undefined'&&!a.dd.dragEnded){return}b=e*(1-h);c=a.getEl();c.setStyle({top:b+'px'})}});Ext.define('Ext.ux.colorpick.Selector',{extend:Ext.container.Container,xtype:'colorselector',mixins:[Ext.ux.colorpick.Selection],controller:'colorpick-selectorcontroller',config:{hexReadOnly:!0},width:580,height:337,cls:Ext.baseCSSPrefix+'colorpicker',padding:10,layout:{type:'hbox',align:'stretch'},defaultBindProperty:'value',twoWayBindable:['value'],fieldWidth:50,fieldPad:5,showPreviousColor:!1,showOkCancelButtons:!1,listeners:{resize:'onResize'},constructor:function(c){var a=this,b=Ext.Factory.viewModel('colorpick-selectormodel');a.childViewModel=b;a.items=[a.getMapAndHexRGBFields(b),a.getSliderAndHField(b),a.getSliderAndSField(b),a.getSliderAndVField(b),a.getSliderAndAField(b),a.getPreviewAndButtons(b,c)];a.childViewModel.bind('{selectedColor}',function(b){a.setColor(b)});a.callParent([c])},updateColor:function(b){var a=this;a.mixins.colorselection.updateColor.call(a,b);a.childViewModel.set('selectedColor',b)},updatePreviousColor:function(a){this.childViewModel.set('previousColor',a)},getMapAndHexRGBFields:function(d){var c=this,a={top:0,right:c.fieldPad,bottom:0,left:0},b=c.fieldWidth;return {xtype:'container',viewModel:d,cls:Ext.baseCSSPrefix+'colorpicker-escape-overflow',flex:1,layout:{type:'vbox',align:'stretch'},margin:'0 10 0 0',items:[{xtype:'colorpickercolormap',reference:'colorMap',flex:1,bind:{position:{bindTo:'{selectedColor}',deep:!0},hue:'{selectedColor.h}'},listeners:{handledrag:'onColorMapHandleDrag'}},{xtype:'container',layout:'hbox',defaults:{labelAlign:'top',labelSeparator:'',allowBlank:!1,onChange:function(){if(this.isValid()){Ext.form.field.Base.prototype.onChange.apply(this,arguments)}}},items:[{xtype:'textfield',fieldLabel:'HEX',flex:1,bind:'{hex}',margin:a,regex:/^#[0-9a-f]{6}$/i,readonly:c.getHexReadOnly()},{xtype:'numberfield',fieldLabel:'R',bind:'{red}',width:b,hideTrigger:!0,maxValue:255,minValue:0,margin:a},{xtype:'numberfield',fieldLabel:'G',bind:'{green}',width:b,hideTrigger:!0,maxValue:255,minValue:0,margin:a},{xtype:'numberfield',fieldLabel:'B',bind:'{blue}',width:b,hideTrigger:!0,maxValue:255,minValue:0,margin:0}]}]}},getSliderAndHField:function(b){var c=this,a=c.fieldWidth;return {xtype:'container',viewModel:b,cls:Ext.baseCSSPrefix+'colorpicker-escape-overflow',width:a,layout:{type:'vbox',align:'stretch'},items:[{xtype:'colorpickersliderhue',reference:'hueSlider',flex:1,bind:{hue:'{selectedColor.h}'},width:a,listeners:{handledrag:'onHueSliderHandleDrag'}},{xtype:'numberfield',fieldLabel:'H',labelAlign:'top',labelSeparator:'',bind:'{hue}',hideTrigger:!0,maxValue:360,minValue:0,allowBlank:!1,margin:0}]}},getSliderAndSField:function(c){var a=this,b=a.fieldWidth;return {xtype:'container',viewModel:c,cls:Ext.baseCSSPrefix+'colorpicker-escape-overflow',width:b,layout:{type:'vbox',align:'stretch'},margin:{right:a.fieldPad,left:a.fieldPad},items:[{xtype:'colorpickerslidersaturation',reference:'satSlider',flex:1,bind:{saturation:'{saturation}',hue:'{selectedColor.h}'},width:b,listeners:{handledrag:'onSaturationSliderHandleDrag'}},{xtype:'numberfield',fieldLabel:'S',labelAlign:'top',labelSeparator:'',bind:'{saturation}',hideTrigger:!0,maxValue:100,minValue:0,allowBlank:!1,margin:0}]}},getSliderAndVField:function(b){var c=this,a=c.fieldWidth;return {xtype:'container',viewModel:b,cls:Ext.baseCSSPrefix+'colorpicker-escape-overflow',width:a,layout:{type:'vbox',align:'stretch'},items:[{xtype:'colorpickerslidervalue',reference:'valueSlider',flex:1,bind:{value:'{value}',hue:'{selectedColor.h}'},width:a,listeners:{handledrag:'onValueSliderHandleDrag'}},{xtype:'numberfield',fieldLabel:'V',labelAlign:'top',labelSeparator:'',bind:'{value}',hideTrigger:!0,maxValue:100,minValue:0,allowBlank:!1,margin:0}]}},getSliderAndAField:function(c){var b=this,a=b.fieldWidth;return {xtype:'container',viewModel:c,cls:Ext.baseCSSPrefix+'colorpicker-escape-overflow',width:a,layout:{type:'vbox',align:'stretch'},margin:{left:b.fieldPad},items:[{xtype:'colorpickerslideralpha',reference:'alphaSlider',flex:1,bind:{alpha:'{alpha}',color:{bindTo:'{selectedColor}',deep:!0}},width:a,listeners:{handledrag:'onAlphaSliderHandleDrag'}},{xtype:'numberfield',fieldLabel:'A',labelAlign:'top',labelSeparator:'',bind:'{alpha}',hideTrigger:!0,maxValue:100,minValue:0,allowBlank:!1,margin:0}]}},getPreviewAndButtons:function(c,b){var a=[{xtype:'colorpickercolorpreview',flex:1,bind:{color:{bindTo:'{selectedColor}',deep:!0}}}];if(b.showPreviousColor){a.push({xtype:'colorpickercolorpreview',flex:1,bind:{color:{bindTo:'{previousColor}',deep:!0}},listeners:{click:'onPreviousColorSelected'}})}if(b.showOkCancelButtons){a.push({xtype:'button',text:'OK',margin:'10 0 0 0',padding:'10 0 10 0',handler:'onOK'},{xtype:'button',text:'Cancel',margin:'10 0 0 0',padding:'10 0 10 0',handler:'onCancel'})}return {xtype:'container',viewModel:c,width:70,margin:'0 0 0 10',items:a,layout:{type:'vbox',align:'stretch'}}}});Ext.define('Ext.ux.layout.ResponsiveColumn',{extend:Ext.layout.container.Auto,alias:'layout.responsivecolumn',states:{small:1000,large:0},_responsiveCls:Ext.baseCSSPrefix+'responsivecolumn',initLayout:function(){this.innerCtCls+=' '+this._responsiveCls;this.callParent()},beginLayout:function(j){var a=this,h=Ext.Element.getViewportWidth(),g=a.states,e=Infinity,i=a.innerCt,f=a._currentState,d,b,c;for(d in g){b=g[d]||Infinity;if(h<=b&&b<=e){e=b;c=d}}if(c!==f){i.replaceCls(f,c,a._responsiveCls);a._currentState=c}a.callParent(arguments)},onAdd:function(b){var a;this.callParent([b]);a=b.responsiveCls;if(a){b.addCls(a)}}},function(a){if(Ext.isIE8){a.override({responsiveSizePolicy:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:0},setsItemSize:!0,calculateItems:function(b,f){var m=this,k=b.targetContext,j=b.childItems,l=j.length,i=f.gotWidth,g=f.width,d,c,e,h;if(i===!1){k.domBlock(m,'width');return !1}if(!i){return !0}for(d=0;d<l;++d){c=j[d];h=parseInt(c.el.getStyle('background-position-x'),10);e=parseInt(c.el.getStyle('background-position-y'),10);c.setWidth(h/100*(g-e)-e)}b.setContentWidth(g+b.paddingContext.getPaddingInfo().width);return !0},getItemSizePolicy:function(){return this.responsiveSizePolicy}})}});Ext.define('Ext.draw.ContainerBase',{extend:Ext.panel.Panel,previewTitleText:'Chart Preview',previewAltText:'Chart preview',layout:'container',addElementListener:function(){var a=this,b=arguments;if(a.rendered){a.el.on.apply(a.el,b)}else {a.on('render',function(){a.el.on.apply(a.el,b)})}},removeElementListener:function(){var a=this;if(a.rendered){a.el.un.apply(a.el,arguments)}},afterRender:function(){this.callParent(arguments);this.initAnimator()},getItems:function(){var a=this,b=a.items;if(!b||!b.isMixedCollection){a.initItems()}return a.items},onRender:function(){this.callParent(arguments);this.element=this.el;this.bodyElement=this.body},setItems:function(a){this.items=a;return a},setSurfaceSize:function(b,a){this.resizeHandler({width:b,height:a});this.renderFrame()},onResize:function(b,a,d,c){this.handleResize({width:b,height:a},!this.size)},preview:function(a){var b;if(Ext.isIE8){return !1}a=a||this.getImage();if(a.type==='svg-markup'){b={xtype:'container',html:a.data}}else {b={xtype:'image',mode:'img',cls:Ext.baseCSSPrefix+'chart-image',alt:this.previewAltText,src:a.data,listeners:{afterrender:function(){var b=this,c=b.imgEl.dom,d=a.type==='svg'?1:window['devicePixelRatio']||1,e;if(!c.naturalWidth||!c.naturalHeight){c.onload=function(){var f=c.naturalWidth,e=c.naturalHeight;b.setWidth(Math.floor(f/d));b.setHeight(Math.floor(e/d))}}else {e=b.getSize();b.setWidth(Math.floor(e.width/d));b.setHeight(Math.floor(e.height/d))}}}}}new Ext.window.Window({title:this.previewTitleText,closable:!0,renderTo:Ext.getBody(),autoShow:!0,maximizeable:!0,maximized:!0,border:!0,layout:{type:'hbox',pack:'center',align:'middle'},items:{xtype:'container',items:b}})},privates:{getTargetEl:function(){return this.bodyElement},reattachToBody:function(){var a=this;if(a.pendingDetachSize){a.handleResize()}a.pendingDetachSize=!1;a.callParent()}}});Ext.define('Ext.draw.SurfaceBase',{extend:Ext.Widget,getOwnerBody:function(){return this.ownerCt.body}});Ext.define('Ext.draw.sprite.AnimationParser',function(){function compute(a,c,b){return a+(c-a)*b}return {singleton:!0,attributeRe:/^url\(#([a-zA-Z-]+)\)$/,color:{parseInitial:function(a,b){if(Ext.isString(a)){a=Ext.util.Color.create(a)}if(Ext.isString(b)){b=Ext.util.Color.create(b)}if(a&&a.isColor&&(b&&b.isColor)){return [[a.r,a.g,a.b,a.a],[b.r,b.g,b.b,b.a]]}else {return [a||b,b||a]}},compute:function(a,b,c){if(!Ext.isArray(a)||!Ext.isArray(b)){return b||a}else {return [compute(a[0],b[0],c),compute(a[1],b[1],c),compute(a[2],b[2],c),compute(a[3],b[3],c)]}},serve:function(a){var b=Ext.util.Color.fly(a[0],a[1],a[2],a[3]);return b.toString()}},number:{parse:function(a){return a===null?null:+a},compute:function(a,b,c){if(!Ext.isNumber(a)||!Ext.isNumber(b)){return b||a}else {return compute(a,b,c)}}},angle:{parseInitial:function(b,a){if(a-b>Math.PI){a-=Math.PI*2}else {if(a-b<-Math.PI){a+=Math.PI*2}}return [b,a]},compute:function(a,b,c){if(!Ext.isNumber(a)||!Ext.isNumber(b)){return b||a}else {return compute(a,b,c)}}},path:{parseInitial:function(m,l){var e=m.toStripes(),c=l.toStripes(),a,i,f=e.length,g=c.length,j,h,k,d=c[g-1],b=[d[d.length-2],d[d.length-1]];for(a=f;a<g;a++){e.push(e[f-1].slice(0))}for(a=g;a<f;a++){c.push(b.slice(0))}k=e.length;c.path=l;c.temp=new Ext.draw.Path();for(a=0;a<k;a++){j=e[a];h=c[a];f=j.length;g=h.length;c.temp.commands.push('M');for(i=g;i<f;i+=6){h.push(b[0],b[1],b[0],b[1],b[0],b[1])}d=c[c.length-1];b=[d[d.length-2],d[d.length-1]];for(i=f;i<g;i+=6){j.push(b[0],b[1],b[0],b[1],b[0],b[1])}for(a=0;a<h.length;a++){h[a]-=j[a]}for(a=2;a<h.length;a+=6){c.temp.commands.push('C')}}return [e,c]},compute:function(e,b,f){if(f>=1){return b.path}var c=0,k=e.length,a=0,g,d,h,i=b.temp.params,j=0;for(;c<k;c++){d=e[c];h=b[c];g=d.length;for(a=0;a<g;a++){i[j++]=h[a]*f+d[a]}}return b.temp}},data:{compute:function(e,i,j,a){var f=e.length-1,g=i.length-1,h=Math.max(f,g),b,d,c;if(!a||a===e){a=[]}a.length=h+1;for(b=0;b<=h;b++){d=e[Math.min(b,f)];c=i[Math.min(b,g)];if(Ext.isNumber(d)){if(!Ext.isNumber(c)){c=0}a[b]=d+(c-d)*j}else {a[b]=c}}return a}},text:{compute:function(b,c,a){return b.substr(0,Math.round(b.length*(1-a)))+c.substr(Math.round(c.length*(1-a)))}},limited:'number',limited01:'number'}});(function(){if(!Ext.global.Float32Array){var a=function(a){var b,c;if(typeof a==='number'){this.length=a}else {if('length' in a){this.length=a.length;for(b=0,c=a.length;b<c;b++){this[b]=+a[b]}}}};a.prototype=[];Ext.global.Float32Array=a}})();Ext.define('Ext.draw.Draw',{singleton:!0,radian:Math.PI/180,pi2:Math.PI*2,reflectFn:function(a){return a},rad:function(a){return a%360*this.radian},degrees:function(a){return a/this.radian%360},isBBoxIntersect:function(a,b,c){c=c||0;return Math.max(a.x,b.x)-c>Math.min(a.x+a.width,b.x+b.width)||Math.max(a.y,b.y)-c>Math.min(a.y+a.height,b.y+b.height)},isPointInBBox:function(b,c,a){return !!a&&b>=a.x&&b<=a.x+a.width&&c>=a.y&&c<=a.y+a.height},naturalSpline:function(c){var a,e,i=c.length,g,j,k,d,h=0,b=new Float32Array(c.length),f=new Float32Array(c.length*3-2);b[0]=0;b[i-1]=0;for(a=1;a<i-1;a++){b[a]=c[a+1]+c[a-1]-2*c[a]-b[a-1];h=1/(4-h);b[a]*=h}for(a=i-2;a>0;a--){h=3.732050807568877+48.248711305964385/(-13.928203230275537+Math.pow(0.07179676972449123,a));b[a]-=b[a+1]*h}d=c[0];g=d-b[0];for(a=0,e=0;a<i-1;e+=3){k=d;j=g;a++;d=c[a];g=d-b[a];f[e]=k;f[e+1]=(g+2*j)/3;f[e+2]=(g*2+j)/3}f[e]=d;return f},spline:function(a){return this.naturalSpline(a)},cardinalToBezier:function(d,a,b,e,c){return [a,a+(b-d)/6*c,b-(e-a)/6*c,b]},cardinalSpline:function(b,f){var e=b.length,d=new Float32Array(e*3-2),c,a;if(f===undefined){f=0.5}a=this.cardinalToBezier(b[0],b[0],b[1],b[2],f);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];for(c=0;c<e-3;c++){a=this.cardinalToBezier(b[c],b[c+1],b[c+2],b[c+3],f);d[4+c*3]=a[1];d[4+c*3+1]=a[2];d[4+c*3+2]=a[3]}a=this.cardinalToBezier(b[e-3],b[e-2],b[e-1],b[e-1],f);d[4+c*3]=a[1];d[4+c*3+1]=a[2];d[4+c*3+2]=a[3];return d},getAnchors:function(s,c,f,a,r,b,m){var j=Math.PI,q=j/2,n=Math.abs,v=Math.sin,u=Math.cos,t=Math.atan,o,p,d,e,k,g,l,h,i;m=m||4;o=(f-s)/m;p=(r-f)/m;if(a>=c&&a>=b||a<=c&&a<=b){d=e=q}else {d=t((f-s)/n(a-c));if(c<a){d=j-d}e=t((r-f)/n(a-b));if(b<a){e=j-e}}i=q-(d+e)%(j*2)/2;if(i>q){i-=j}d+=i;e+=i;k=f-o*v(d);g=a+o*u(d);l=f+p*v(e);h=a+p*u(e);if(a>c&&g<c||a<c&&g>c){k+=n(c-g)*(k-f)/(g-a);g=c}if(a>b&&h<b||a<b&&h>b){l-=n(b-h)*(l-f)/(h-a);h=b}return {x1:k,y1:g,x2:l,y2:h}},smooth:function(i,j,p){var o=i.length,m,n,c,d,k,l,e,f,g=[],h=[],a,b;for(a=0;a<o-1;a++){m=i[a];n=j[a];if(a===0){e=m;f=n;g.push(e);h.push(f);if(o===1){break}}c=i[a+1];d=j[a+1];k=i[a+2];l=j[a+2];if(!(Ext.isNumber(k)&&Ext.isNumber(l))){g.push(e,c,c);h.push(f,d,d);break}b=this.getAnchors(m,n,c,d,k,l,p);g.push(e,b.x1,c);h.push(f,b.y1,d);e=b.x2;f=b.y2}return {smoothX:g,smoothY:h}},beginUpdateIOS:Ext.os.is.iOS?function(){this.iosUpdateEl=Ext.getBody().createChild({style:'position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; '+'background: rgba(0,0,0,0.001); z-index: 100000'})}:Ext.emptyFn,endUpdateIOS:function(){this.iosUpdateEl=Ext.destroy(this.iosUpdateEl)}});Ext.define('Ext.draw.gradient.Gradient',{isGradient:!0,config:{stops:[]},applyStops:function(e){var d=[],f=e.length,c,b,a;for(c=0;c<f;c++){b=e[c];a=b.color;if(!(a&&a.isColor)){a=Ext.util.Color.fly(a||Ext.util.Color.NONE)}d.push({offset:Math.min(1,Math.max(0,'offset' in b?b.offset:b.position||0)),color:a.toString()})}d.sort(function(a,b){return a.offset-b.offset});return d},onClassExtended:function(b,a){if(!a.alias&&a.type){a.alias='gradient.'+a.type}},constructor:function(a){this.initConfig(a)},generateGradient:Ext.emptyFn});Ext.define('Ext.draw.gradient.GradientDefinition',{singleton:!0,urlStringRe:/^url\(#([\w-]+)\)$/,gradients:{},add:function(c){var e=this.gradients,b,d,a;for(b=0,d=c.length;b<d;b++){a=c[b];if(Ext.isString(a.id)){e[a.id]=a}}},get:function(b){var d=this.gradients,a=b.match(this.urlStringRe),c;if(a&&a[1]&&(c=d[a[1]])){return c||b}return b}});Ext.define('Ext.draw.sprite.AttributeParser',{singleton:!0,attributeRe:/^url\(#([a-zA-Z-]+)\)$/,'default':Ext.identityFn,string:function(a){return String(a)},number:function(a){if(Ext.isNumber(+a)){return a}},angle:function(a){if(Ext.isNumber(a)){a%=Math.PI*2;if(a<-Math.PI){a+=Math.PI*2}else {if(a>=Math.PI){a-=Math.PI*2}}return a}},data:function(a){if(Ext.isArray(a)){return a.slice()}else {if(a instanceof Float32Array){return new Float32Array(a)}}},bool:function(a){return !!a},color:function(a){if(a&&a.isColor){return a.toString()}else {if(a&&a.isGradient){return a}else {if(!a){return Ext.util.Color.NONE}else {if(Ext.isString(a)){if(a.substr(0,3)==='url'){a=Ext.draw.gradient.GradientDefinition.get(a);if(Ext.isString(a)){return a}}else {return Ext.util.Color.fly(a).toString()}}}}}if(a.type==='linear'){return Ext.create('Ext.draw.gradient.Linear',a)}else {if(a.type==='radial'){return Ext.create('Ext.draw.gradient.Radial',a)}else {if(a.type==='pattern'){return Ext.create('Ext.draw.gradient.Pattern',a)}else {return Ext.util.Color.NONE}}}},limited:function(a,b){return function(c){c=+c;return Ext.isNumber(c)?Math.min(Math.max(c,a),b):undefined}},limited01:function(a){a=+a;return Ext.isNumber(a)?Math.min(Math.max(a,0),1):undefined},enums:function(){var b={},c=Array.prototype.slice.call(arguments,0),a,d;for(a=0,d=c.length;a<d;a++){b[c[a]]=!0}return function(a){return a in b?a:undefined}}});Ext.define('Ext.draw.sprite.AttributeDefinition',{config:{defaults:{$value:{},lazy:!0},aliases:{},animationProcessors:{},processors:{$value:{},lazy:!0},dirtyTriggers:{},triggers:{},updaters:{}},inheritableStatics:{processorFactoryRe:/^(\w+)\(([\w\-,]*)\)$/},spriteClass:null,constructor:function(a){var b=this;b.initConfig(a)},applyDefaults:function(b,a){a=Ext.apply(a||{},this.normalize(b));return a},applyAliases:function(b,a){return Ext.apply(a||{},b)},applyProcessors:function(g,j){this.getAnimationProcessors();var h=j||{},b=Ext.draw.sprite.AttributeParser,i=this.self.processorFactoryRe,f={},e,d,c,a;for(d in g){a=g[d];if(typeof a==='string'){c=a.match(i);if(c){a=b[c[1]].apply(b,c[2].split(','))}else {if(b[a]){f[d]=a;e=!0;a=b[a]}}}h[d]=a}if(e){this.setAnimationProcessors(f)}return h},applyAnimationProcessors:function(e,b){var d=Ext.draw.sprite.AnimationParser,c,a;if(!b){b={}}for(c in e){a=e[c];if(a==='none'){b[c]=null}else {if(Ext.isString(a)&&!(c in b)){if(a in d){while(Ext.isString(d[a])){a=d[a]}b[c]=d[a]}}else {if(Ext.isObject(a)){b[c]=a}}}}return b},updateDirtyTriggers:function(a){this.setTriggers(a)},applyTriggers:function(c,a){var b;if(!a){a={}}for(b in c){a[b]=c[b].split(',')}return a},applyUpdaters:function(b,a){return Ext.apply(a||{},b)},batchedNormalize:function(d,n){if(!d){return {}}var j=this.getProcessors(),k=this.getAliases(),h=d.translation||d.translate,a={},i,o,c,f,b,e,l,m,g;if('rotation' in d){b=d.rotation}else {b='rotate' in d?d.rotate:undefined}if('scaling' in d){e=d.scaling}else {e='scale' in d?d.scale:undefined}if(typeof e!=='undefined'){if(Ext.isNumber(e)){a.scalingX=e;a.scalingY=e}else {if('x' in e){a.scalingX=e.x}if('y' in e){a.scalingY=e.y}if('centerX' in e){a.scalingCenterX=e.centerX}if('centerY' in e){a.scalingCenterY=e.centerY}}}if(typeof b!=='undefined'){if(Ext.isNumber(b)){b=Ext.draw.Draw.rad(b);a.rotationRads=b}else {if('rads' in b){a.rotationRads=b.rads}else {if('degrees' in b){if(Ext.isArray(b.degrees)){a.rotationRads=Ext.Array.map(b.degrees,function(a){return Ext.draw.Draw.rad(a)})}else {a.rotationRads=Ext.draw.Draw.rad(b.degrees)}}}if('centerX' in b){a.rotationCenterX=b.centerX}if('centerY' in b){a.rotationCenterY=b.centerY}}}if(typeof h!=='undefined'){if('x' in h){a.translationX=h.x}if('y' in h){a.translationY=h.y}}if('matrix' in d){l=Ext.draw.Matrix.create(d.matrix);g=l.split();a.matrix=l;a.rotationRads=g.rotation;a.rotationCenterX=0;a.rotationCenterY=0;a.scalingX=g.scaleX;a.scalingY=g.scaleY;a.scalingCenterX=0;a.scalingCenterY=0;a.translationX=g.translateX;a.translationY=g.translateY}for(c in d){f=d[c];if(typeof f==='undefined'){continue}else {if(Ext.isArray(f)){if(c in k){c=k[c]}if(c in j){a[c]=[];for(i=0,o=f.length;i<o;i++){m=j[c].call(this,f[i]);if(typeof m!=='undefined'){a[c][i]=m}}}else {if(n){a[c]=f}}}else {if(c in k){c=k[c]}if(c in j){f=j[c].call(this,f);if(typeof f!=='undefined'){a[c]=f}}else {if(n){a[c]=f}}}}}return a},normalize:function(c,l){if(!c){return {}}var j=this.getProcessors(),k=this.getAliases(),h=c.translation||c.translate,a={},e,f,b,d,i,g;if('rotation' in c){b=c.rotation}else {b='rotate' in c?c.rotate:undefined}if('scaling' in c){d=c.scaling}else {d='scale' in c?c.scale:undefined}if(h){if('x' in h){a.translationX=h.x}if('y' in h){a.translationY=h.y}}if(typeof d!=='undefined'){if(Ext.isNumber(d)){a.scalingX=d;a.scalingY=d}else {if('x' in d){a.scalingX=d.x}if('y' in d){a.scalingY=d.y}if('centerX' in d){a.scalingCenterX=d.centerX}if('centerY' in d){a.scalingCenterY=d.centerY}}}if(typeof b!=='undefined'){if(Ext.isNumber(b)){b=Ext.draw.Draw.rad(b);a.rotationRads=b}else {if('rads' in b){a.rotationRads=b.rads}else {if('degrees' in b){a.rotationRads=Ext.draw.Draw.rad(b.degrees)}}if('centerX' in b){a.rotationCenterX=b.centerX}if('centerY' in b){a.rotationCenterY=b.centerY}}}if('matrix' in c){i=Ext.draw.Matrix.create(c.matrix);g=i.split();a.matrix=i;a.rotationRads=g.rotation;a.rotationCenterX=0;a.rotationCenterY=0;a.scalingX=g.scaleX;a.scalingY=g.scaleY;a.scalingCenterX=0;a.scalingCenterY=0;a.translationX=g.translateX;a.translationY=g.translateY}for(e in c){f=c[e];if(typeof f==='undefined'){continue}if(e in k){e=k[e]}if(e in j){f=j[e].call(this,f);if(typeof f!=='undefined'){a[e]=f}}else {if(l){a[e]=f}}}return a},setBypassingNormalization:function(c,a,b){return a.pushDown(c,b)},set:function(c,b,a){a=this.normalize(a);return this.setBypassingNormalization(c,b,a)}});Ext.define('Ext.draw.Matrix',{isMatrix:!0,statics:{createAffineMatrixFromTwoPair:function(f,g,n,o,j,k,l,m){var b=n-f,c=o-g,h=l-j,i=m-k,a=1/(b*b+c*c),d=b*h+c*i,e=h*c-b*i,p=-d*f-e*g,q=e*f-d*g;return new this(d*a,-e*a,e*a,d*a,p*a+j,q*a+k)},createPanZoomFromTwoPair:function(b,c,l,m,f,h,g,i){if(arguments.length===2){return this.createPanZoomFromTwoPair.apply(this,b.concat(c))}var j=l-b,k=m-c,p=(b+l)*0.5,q=(c+m)*0.5,d=g-f,e=i-h,n=(f+g)*0.5,o=(h+i)*0.5,s=j*j+k*k,r=d*d+e*e,a=Math.sqrt(r/s);return new this(a,0,0,a,n-a*p,o-a*q)},fly:function(){var a=null,b=function(b){a.elements=b;return a};return function(c){if(!a){a=new Ext.draw.Matrix()}a.elements=c;Ext.draw.Matrix.fly=b;return a}}(),create:function(a){if(a instanceof this){return a}return new this(a)}},constructor:function(a,d,e,f,b,c){if(a&&a.length===6){this.elements=a.slice()}else {if(a!==undefined){this.elements=[a,d,e,f,b,c]}else {this.elements=[1,0,0,1,0,0]}}},prepend:function(b,c,d,e,l,m){var a=this.elements,h=a[0],i=a[1],j=a[2],k=a[3],f=a[4],g=a[5];a[0]=b*h+d*i;a[1]=c*h+e*i;a[2]=b*j+d*k;a[3]=c*j+e*k;a[4]=b*f+d*g+l;a[5]=c*f+e*g+m;return this},prependMatrix:function(a){return this.prepend.apply(this,a.elements)},append:function(h,i,j,k,f,g){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],l=a[4],m=a[5];a[0]=h*b+i*d;a[1]=h*c+i*e;a[2]=j*b+k*d;a[3]=j*c+k*e;a[4]=f*b+g*d+l;a[5]=f*c+g*e+m;return this},appendMatrix:function(a){return this.append.apply(this,a.elements)},set:function(d,e,f,g,b,c){var a=this.elements;a[0]=d;a[1]=e;a[2]=f;a[3]=g;a[4]=b;a[5]=c;return this},inverse:function(i){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],h=a[5],f=1/(b*e-c*d);b*=f;c*=f;d*=f;e*=f;if(i){i.set(e,-c,-d,b,d*h-e*g,c*g-b*h);return i}else {return new Ext.draw.Matrix(e,-c,-d,b,d*h-e*g,c*g-b*h)}},translate:function(a,b,c){if(c){return this.prepend(1,0,0,1,a,b)}else {return this.append(1,0,0,1,a,b)}},scale:function(d,c,a,b,f){var e=this;if(c==null){c=d}if(a===undefined){a=0}if(b===undefined){b=0}if(f){return e.prepend(d,0,0,c,a-a*d,b-b*c)}else {return e.append(d,0,0,c,a-a*d,b-b*c)}},rotate:function(e,b,c,g){var f=this,a=Math.cos(e),d=Math.sin(e);b=b||0;c=c||0;if(g){return f.prepend(a,d,-d,a,b-a*b+c*d,c-a*c-b*d)}else {return f.append(a,d,-d,a,b-a*b+c*d,c-a*c-b*d)}},rotateFromVector:function(c,d,g){var e=this,f=Math.sqrt(c*c+d*d),a=c/f,b=d/f;if(g){return e.prepend(a,b,-b,a,0,0)}else {return e.append(a,b,-b,a,0,0)}},clone:function(){return new Ext.draw.Matrix(this.elements)},flipX:function(){return this.append(-1,0,0,1,0,0)},flipY:function(){return this.append(1,0,0,-1,0,0)},skewX:function(a){return this.append(1,0,Math.tan(a),1,0,0)},skewY:function(a){return this.append(1,Math.tan(a),0,1,0,0)},shearX:function(a){return this.append(1,0,a,1,0,0)},shearY:function(a){return this.append(1,a,0,1,0,0)},reset:function(){return this.set(1,0,0,1,0,0)},precisionCompensate:function(a,b){var c=this.elements,d=c[0],f=c[1],g=c[2],e=c[3],h=c[4],i=c[5],j=f*g-d*e;b.b=a*f/d;b.c=a*g/e;b.d=a;b.xx=d/a;b.yy=e/a;b.dx=(i*d*g-h*d*e)/j/a;b.dy=(h*f*e-i*d*e)/j/a},precisionCompensateRect:function(a,b){var c=this.elements,d=c[0],e=c[1],j=c[2],f=c[3],h=c[4],i=c[5],g=j/d;b.b=a*e/d;b.c=a*g;b.d=a*f/d;b.xx=d/a;b.yy=d/a;b.dx=(i*j-h*f)/(e*g-f)/a;b.dy=-(i*d-h*e)/(e*g-f)/a},x:function(b,c){var a=this.elements;return b*a[0]+c*a[2]+a[4]},y:function(b,c){var a=this.elements;return b*a[1]+c*a[3]+a[5]},get:function(a,b){return +this.elements[a+b*2].toFixed(4)},transformPoint:function(b){var a=this.elements,c,d;if(b.isPoint){c=b.x;d=b.y}else {c=b[0];d=b[1]}return [c*a[0]+d*a[2]+a[4],c*a[1]+d*a[3]+a[5]]},transformBBox:function(h,e,b){var a=this.elements,p=h.x,q=h.y,d=h.width*0.5,c=h.height*0.5,j=a[0],k=a[1],l=a[2],m=a[3],n=p+d,o=q+c,g,f,i;if(e){d-=e;c-=e;i=[Math.sqrt(a[0]*a[0]+a[2]*a[2]),Math.sqrt(a[1]*a[1]+a[3]*a[3])];g=Math.abs(d*j)+Math.abs(c*l)+Math.abs(i[0]*e);f=Math.abs(d*k)+Math.abs(c*m)+Math.abs(i[1]*e)}else {g=Math.abs(d*j)+Math.abs(c*l);f=Math.abs(d*k)+Math.abs(c*m)}if(!b){b={}}b.x=n*j+o*l+a[4]-g;b.y=n*k+o*m+a[5]-f;b.width=g+g;b.height=f+f;return b},transformList:function(d){var a=this.elements,h=a[0],j=a[2],e=a[4],i=a[1],k=a[3],f=a[5],g=d.length,c,b;for(b=0;b<g;b++){c=d[b];d[b]=[c[0]*h+c[1]*j+e,c[0]*i+c[1]*k+f]}return d},isIdentity:function(){var a=this.elements;return a[0]===1&&a[1]===0&&a[2]===0&&a[3]===1&&a[4]===0&&a[5]===0},isEqual:function(c){var b=c&&c.isMatrix?c.elements:c,a=this.elements;return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]},equals:function(a){return this.isEqual(a)},toArray:function(){var a=this.elements;return [a[0],a[2],a[4],a[1],a[3],a[5]]},toVerticalArray:function(){return this.elements.slice()},toString:function(){var a=this;return [a.get(0,0),a.get(0,1),a.get(1,0),a.get(1,1),a.get(2,0),a.get(2,1)].join(',')},toContext:function(a){a.transform.apply(a,this.elements);return this},toSvg:function(){var a=this.elements;return 'matrix('+a[0].toFixed(9)+','+a[1].toFixed(9)+','+a[2].toFixed(9)+','+a[3].toFixed(9)+','+a[4].toFixed(9)+','+a[5].toFixed(9)+')'},getScaleX:function(){var a=this.elements;return Math.sqrt(a[0]*a[0]+a[2]*a[2])},getScaleY:function(){var a=this.elements;return Math.sqrt(a[1]*a[1]+a[3]*a[3])},getXX:function(){return this.elements[0]},getXY:function(){return this.elements[1]},getYX:function(){return this.elements[2]},getYY:function(){return this.elements[3]},getDX:function(){return this.elements[4]},getDY:function(){return this.elements[5]},split:function(){var b=this.elements,c=b[0],d=b[1],e=b[3],a={translateX:b[4],translateY:b[5]};a.rotate=a.rotation=Math.atan2(d,c);a.scaleX=c/Math.cos(a.rotate);a.scaleY=e/c*a.scaleX;return a}},function(){function registerName(b,c,a){b[c]={get:function(){return this.elements[a]},set:function(d){this.elements[a]=d}}}if(Object.defineProperties){var a={};registerName(a,'a',0);registerName(a,'b',1);registerName(a,'c',2);registerName(a,'d',3);registerName(a,'e',4);registerName(a,'f',5);Object.defineProperties(this.prototype,a)}this.prototype.multiply=this.prototype.appendMatrix});Ext.define('Ext.draw.modifier.Modifier',{isModifier:!0,mixins:{observable:Ext.mixin.Observable},config:{lower:null,upper:null,sprite:null},constructor:function(a){this.mixins.observable.constructor.call(this,a)},updateUpper:function(a){if(a){a.setLower(this)}},updateLower:function(a){if(a){a.setUpper(this)}},prepareAttributes:function(a){if(this._lower){this._lower.prepareAttributes(a)}},popUp:function(b,a){if(this._upper){this._upper.popUp(b,a)}else {Ext.apply(b,a)}},filterChanges:function(f,c,e){var d=f.targets,a,b;if(e){for(a in c){b=c[a];if(b!==f[a]||d&&b!==d[a]){e[a]=b}}}else {for(a in c){b=c[a];if(b===f[a]&&(!d||b===d[a])){delete c[a]}}}return e||c},pushDown:function(b,a){return this._lower?this._lower.pushDown(b,a):this.filterChanges(b,a)}});Ext.define('Ext.draw.modifier.Target',{extend:Ext.draw.modifier.Modifier,alias:'modifier.target',statics:{uniqueId:0},prepareAttributes:function(a){if(this._lower){this._lower.prepareAttributes(a)}a.attributeId='attribute-'+Ext.draw.modifier.Target.uniqueId++;if(!a.hasOwnProperty('canvasAttributes')){a.bbox={plain:{dirty:!0},transform:{dirty:!0}};a.dirty=!0;a.pendingUpdaters={};a.canvasAttributes={};a.matrix=new Ext.draw.Matrix();a.inverseMatrix=new Ext.draw.Matrix()}},applyChanges:function(b,h){Ext.apply(b,h);var f=this.getSprite(),g=b.pendingUpdaters,n=f.self.def.getTriggers(),m,k,e,a,l,d,c,j,i;for(a in h){l=!0;if(m=n[a]){f.scheduleUpdaters(b,m,[a])}if(b.template&&h.removeFromInstance&&h.removeFromInstance[a]){delete b[a]}}if(!l){return}if(g.canvas){d=g.canvas;delete g.canvas;for(c=0,i=d.length;c<i;c++){a=d[c];b.canvasAttributes[a]=b[a]}}if(b.hasOwnProperty('children')){k=b.children;for(c=0,i=k.length;c<i;c++){e=k[c];Ext.apply(e.pendingUpdaters,g);if(d){for(j=0;j<d.length;j++){a=d[j];e.canvasAttributes[a]=e[a]}}f.callUpdaters(e)}}f.setDirty(!0);f.callUpdaters(b)},popUp:function(b,a){this.applyChanges(b,a)},pushDown:function(b,a){if(this._lower){a=this._lower.pushDown(b,a)}this.applyChanges(b,a);return a}});Ext.define('Ext.draw.TimingFunctions',function(){var b=Math.pow,k=Math.sin,j=Math.cos,i=Math.sqrt,h=Math.PI,f=['quad','cube','quart','quint'],d={pow:function(a,c){return b(a,c||6)},expo:function(a){return b(2,8*(a-1))},circ:function(a){return 1-i(1-a*a)},sine:function(a){return 1-k((1-a)*h/2)},back:function(b,a){a=a||1.616;return b*b*((a+1)*b-a)},bounce:function(d){var c,a;for(c=0,a=1;1;c+=a,a/=2){if(d>=(7-4*c)/11){return a*a-b((11-6*c-11*d)/4,2)}}},elastic:function(a,c){return b(2,10*--a)*j(20*a*h*(c||1)/3)}},a={},e,g,c;function createPoly(a){return function(c){return b(c,a)}}function addEasing(c,b){a[c+'In']=function(a){return b(a)};a[c+'Out']=function(a){return 1-b(1-a)};a[c+'InOut']=function(a){return a<=0.5?b(2*a)/2:(2-b(2*(1-a)))/2}}for(c=0,g=f.length;c<g;++c){d[f[c]]=createPoly(c+2)}for(e in d){addEasing(e,d[e])}a.linear=Ext.identityFn;a.easeIn=a.quadIn;a.easeOut=a.quadOut;a.easeInOut=a.quadInOut;return {singleton:!0,easingMap:a}},function(a){Ext.apply(a,a.easingMap)});Ext.define('Ext.draw.Animator',{singleton:!0,frameCallbacks:{},frameCallbackId:0,scheduled:0,frameStartTimeOffset:Ext.now(),animations:[],running:!1,animationTime:function(){return Ext.AnimationQueue.frameStartTime-this.frameStartTimeOffset},add:function(a){var b=this;if(!b.contains(a)){b.animations.push(a);b.ignite();if('fireEvent' in a){a.fireEvent('animationstart',a)}}},remove:function(a){var d=this,c=d.animations,b=0,e=c.length;for(;b<e;++b){if(c[b]===a){c.splice(b,1);if('fireEvent' in a){a.fireEvent('animationend',a)}return}}},contains:function(a){return Ext.Array.indexOf(this.animations,a)>-1},empty:function(){return this.animations.length===0},idle:function(){return this.scheduled===0&&this.animations.length===0},step:function(e){var f=this,c=f.animations,a,b=0,d=c.length;for(;b<d;b++){a=c[b];a.step(e);if(!a.animating){c.splice(b,1);b--;d--;if(a.fireEvent){a.fireEvent('animationend',a)}}}},schedule:function(a,b){var c='frameCallback'+this.frameCallbackId++;b=b||this;if(Ext.isString(a)){a=b[a]}Ext.draw.Animator.frameCallbacks[c]={fn:a,scope:b,once:!0};this.scheduled++;Ext.draw.Animator.ignite();return c},scheduleIf:function(a,b){var d=Ext.draw.Animator.frameCallbacks,c,e;b=b||this;if(Ext.isString(a)){a=b[a]}for(e in d){c=d[e];if(c.once&&c.fn===a&&c.scope===b){return null}}return this.schedule(a,b)},cancel:function(a){if(Ext.draw.Animator.frameCallbacks[a]&&Ext.draw.Animator.frameCallbacks[a].once){this.scheduled=Math.max(--this.scheduled,0);delete Ext.draw.Animator.frameCallbacks[a];Ext.draw.Draw.endUpdateIOS()}if(this.idle()){this.extinguish()}},clear:function(){this.animations.length=0;Ext.draw.Animator.frameCallbacks={};this.extinguish()},addFrameCallback:function(a,b){var c='frameCallback'+this.frameCallbackId++;b=b||this;if(Ext.isString(a)){a=b[a]}Ext.draw.Animator.frameCallbacks[c]={fn:a,scope:b};return c},removeFrameCallback:function(a){delete Ext.draw.Animator.frameCallbacks[a];if(this.idle()){this.extinguish()}},fireFrameCallbacks:function(){var c=this.frameCallbacks,d,b,a;for(d in c){a=c[d];b=a.fn;if(Ext.isString(b)){b=a.scope[b]}b.call(a.scope);if(c[d]&&a.once){this.scheduled=Math.max(--this.scheduled,0);delete c[d]}}},handleFrame:function(){var a=this;a.step(a.animationTime());a.fireFrameCallbacks();if(a.idle()){a.extinguish()}},ignite:function(){if(!this.running){this.running=!0;Ext.AnimationQueue.start(this.handleFrame,this);Ext.draw.Draw.beginUpdateIOS()}},extinguish:function(){this.running=!1;Ext.AnimationQueue.stop(this.handleFrame,this);Ext.draw.Draw.endUpdateIOS()}});Ext.define('Ext.draw.modifier.Animation',{extend:Ext.draw.modifier.Modifier,alias:'modifier.animation',config:{easing:Ext.identityFn,duration:0,customEasings:{},customDurations:{}},constructor:function(b){var a=this;a.anyAnimation=a.anySpecialAnimations=!1;a.animating=0;a.animatingPool=[];a.callParent([b])},prepareAttributes:function(a){if(!a.hasOwnProperty('timers')){a.animating=!1;a.timers={};a.targets=Ext.Object.chain(a);a.targets.prototype=a}if(this._lower){this._lower.prepareAttributes(a.targets)}},updateSprite:function(a){this.setConfig(a.config.animation)},updateDuration:function(a){this.anyAnimation=a>0},applyEasing:function(a){if(typeof a==='string'){a=Ext.draw.TimingFunctions.easingMap[a]}return a},applyCustomEasings:function(g,b){var e,f,d,a,c,h;b=b||{};for(f in g){e=!0;a=g[f];d=f.split(',');if(typeof a==='string'){a=Ext.draw.TimingFunctions.easingMap[a]}for(c=0,h=d.length;c<h;c++){b[d[c]]=a}}if(e){this.anySpecialAnimations=e}return b},setEasingOn:function(a,e){var c={},b,d;a=Ext.Array.from(a).slice();for(b=0,d=a.length;b<d;b++){c[a[b]]=e}this.setCustomEasings(c)},clearEasingOn:function(a){var b,c;a=Ext.Array.from(a,!0);for(b=0,c=a.length;b<c;b++){delete this._customEasings[a[b]]}},applyCustomDurations:function(f,a){var d,e,g,c,b,h;a=a||{};for(e in f){d=!0;g=f[e];c=e.split(',');for(b=0,h=c.length;b<h;b++){a[c[b]]=g}}if(d){this.anySpecialAnimations=d}return a},setDurationOn:function(a,e){var c={},b,d;a=Ext.Array.from(a).slice();for(b=0,d=a.length;b<d;b++){c[a[b]]=e}this.setCustomDurations(c)},clearDurationOn:function(a){var b,c;a=Ext.Array.from(a,!0);for(b=0,c=a.length;b<c;b++){delete this._customDurations[a[b]]}},setAnimating:function(c,e){var b=this,a=b.animatingPool,d;if(c.animating!==e){c.animating=e;if(e){a.push(c);if(b.animating===0){Ext.draw.Animator.add(b)}b.animating++}else {for(d=a.length;d--;){if(a[d]===c){a.splice(d,1)}}b.animating=a.length}}},setAttrs:function(h,c){var g=this,j=h.timers,t=g._sprite.self.def._animationProcessors,s=g._easing,r=g._duration,n=g._customDurations,o=g._customEasings,p=g.anySpecialAnimations,u=g.anyAnimation||p,k=h.targets,q=!1,b,a,e,d,f,m,i,l;if(!u){for(a in c){if(h[a]===c[a]){delete c[a]}else {h[a]=c[a]}delete k[a];delete j[a]}return c}else {for(a in c){e=c[a];d=h[a];if(e!==d&&d!==undefined&&d!==null&&(f=t[a])){m=s;i=r;if(p){if(a in o){m=o[a]}if(a in n){i=n[a]}}if(d&&d.isGradient||e&&e.isGradient){i=0}if(i){if(!j[a]){j[a]={}}b=j[a];b.start=0;b.easing=m;b.duration=i;b.compute=f.compute;b.serve=f.serve||Ext.identityFn;b.remove=c.removeFromInstance&&c.removeFromInstance[a];if(f.parseInitial){l=f.parseInitial(d,e);b.source=l[0];b.target=l[1]}else {if(f.parse){b.source=f.parse(d);b.target=f.parse(e)}else {b.source=d;b.target=e}}k[a]=e;delete c[a];q=!0;continue}else {delete k[a]}}else {delete k[a]}delete j[a]}}if(q&&!h.animating){g.setAnimating(h,!0)}return c},updateAttributes:function(c){if(!c.animating){return {}}var d={},i=!1,e=c.timers,h=c.targets,g=Ext.draw.Animator.animationTime(),b,a,f;if(c.lastUpdate===g){return null}for(b in e){a=e[b];if(!a.start){a.start=g;f=0}else {f=(g-a.start)/a.duration}if(f>=1){d[b]=h[b];delete h[b];if(e[b].remove){d.removeFromInstance=d.removeFromInstance||{};d.removeFromInstance[b]=!0}delete e[b]}else {d[b]=a.serve(a.compute(a.source,a.target,a.easing(f),c[b]));i=!0}}c.lastUpdate=g;this.setAnimating(c,i);return d},pushDown:function(b,a){a=this.callParent([b.targets,a]);return this.setAttrs(b,a)},popUp:function(a,b){a=a.prototype;b=this.setAttrs(a,b);if(this._upper){return this._upper.popUp(a,b)}else {return Ext.apply(a,b)}},step:function(g){var a=this,e=a.animatingPool.slice(),f=e.length,d=0,c,b;for(;d<f;d++){c=e[d];b=a.updateAttributes(c);if(b&&a._upper){a._upper.popUp(c,b)}}},stop:function(){var a=this,c=a.animatingPool,b,d;this.step();for(b=0,d=c.length;b<d;b++){c[b].animating=!1}a.animatingPool.length=0;a.animating=0;Ext.draw.Animator.remove(a)},destroy:function(){Ext.draw.Animator.remove(this);this.callParent()}});Ext.define('Ext.draw.modifier.Highlight',{extend:Ext.draw.modifier.Modifier,alias:'modifier.highlight',config:{enabled:!1,style:null},preFx:!0,applyStyle:function(b,a){a=a||{};if(this.getSprite()){Ext.apply(a,this.getSprite().self.def.normalize(b))}else {Ext.apply(a,b)}return a},prepareAttributes:function(a){if(!a.hasOwnProperty('highlightOriginal')){a.highlighted=!1;a.highlightOriginal=Ext.Object.chain(a);a.highlightOriginal.prototype=a;a.highlightOriginal.removeFromInstance={}}if(this._lower){this._lower.prepareAttributes(a.highlightOriginal)}},updateSprite:function(a,e){var c=this,d=c.getStyle(),b;if(a){b=a.self.def;if(d){c._style=b.normalize(d)}c.setStyle(a.config.highlight);b.setConfig({defaults:{highlighted:!1},processors:{highlighted:'bool'}})}this.setSprite(a)},filterChanges:function(c,b){var f=this,d=c.highlightOriginal,e=f.getStyle(),a;if(c.highlighted){for(a in b){if(e.hasOwnProperty(a)){d[a]=b[a];delete b[a]}}}return b},pushDown:function(d,a){var f=this.getStyle(),c=d.highlightOriginal,g=c.removeFromInstance,e,b,h,i;if(a.hasOwnProperty('highlighted')){e=a.highlighted;delete a.highlighted;if(this._lower){a=this._lower.pushDown(c,a)}a=this.filterChanges(d,a);if(e!==d.highlighted){if(e){for(b in f){if(b in a){c[b]=a[b]}else {h=d.template&&d.template.ownAttr;if(h&&!d.prototype.hasOwnProperty(b)){g[b]=!0;c[b]=h.targets[b]}else {i=c.timers[b];if(i&&i.remove){g[b]=!0}c[b]=d[b]}}if(c[b]!==f[b]){a[b]=f[b]}}}else {for(b in f){if(!(b in a)){a[b]=c[b]}delete c[b]}a.removeFromInstance=a.removeFromInstance||{};Ext.apply(a.removeFromInstance,g);c.removeFromInstance={}}a.highlighted=e}}else {if(this._lower){a=this._lower.pushDown(c,a)}a=this.filterChanges(d,a)}return a},popUp:function(b,a){a=this.filterChanges(b,a);this.callParent([b,a])}});Ext.define('Ext.draw.sprite.Sprite',{alias:'sprite.sprite',mixins:{observable:Ext.mixin.Observable},isSprite:!0,$configStrict:!1,statics:{defaultHitTestOptions:{fill:!0,stroke:!0}},inheritableStatics:{def:{processors:{strokeStyle:'color',fillStyle:'color',strokeOpacity:'limited01',fillOpacity:'limited01',lineWidth:'number',lineCap:'enums(butt,round,square)',lineJoin:'enums(round,bevel,miter)',lineDash:'data',lineDashOffset:'number',miterLimit:'number',shadowColor:'color',shadowOffsetX:'number',shadowOffsetY:'number',shadowBlur:'number',globalAlpha:'limited01',globalCompositeOperation:'enums(source-over,destination-over,source-in,destination-in,source-out,destination-out,source-atop,destination-atop,lighter,xor,copy)',hidden:'bool',transformFillStroke:'bool',zIndex:'number',translationX:'number',translationY:'number',rotationRads:'number',rotationCenterX:'number',rotationCenterY:'number',scalingX:'number',scalingY:'number',scalingCenterX:'number',scalingCenterY:'number',constrainGradients:'bool'},aliases:{'stroke':'strokeStyle','fill':'fillStyle','color':'fillStyle','stroke-width':'lineWidth','stroke-linecap':'lineCap','stroke-linejoin':'lineJoin','stroke-miterlimit':'miterLimit','text-anchor':'textAlign','opacity':'globalAlpha',translateX:'translationX',translateY:'translationY',rotateRads:'rotationRads',rotateCenterX:'rotationCenterX',rotateCenterY:'rotationCenterY',scaleX:'scalingX',scaleY:'scalingY',scaleCenterX:'scalingCenterX',scaleCenterY:'scalingCenterY'},defaults:{hidden:!1,zIndex:0,strokeStyle:'none',fillStyle:'none',lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:'butt',lineJoin:'miter',miterLimit:10,shadowColor:'none',shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,globalAlpha:1,strokeOpacity:1,fillOpacity:1,transformFillStroke:!1,translationX:0,translationY:0,rotationRads:0,rotationCenterX:null,rotationCenterY:null,scalingX:1,scalingY:1,scalingCenterX:null,scalingCenterY:null,constrainGradients:!1},triggers:{zIndex:'zIndex',globalAlpha:'canvas',globalCompositeOperation:'canvas',transformFillStroke:'canvas',strokeStyle:'canvas',fillStyle:'canvas',strokeOpacity:'canvas',fillOpacity:'canvas',lineWidth:'canvas',lineCap:'canvas',lineJoin:'canvas',lineDash:'canvas',lineDashOffset:'canvas',miterLimit:'canvas',shadowColor:'canvas',shadowOffsetX:'canvas',shadowOffsetY:'canvas',shadowBlur:'canvas',translationX:'transform',translationY:'transform',rotationRads:'transform',rotationCenterX:'transform',rotationCenterY:'transform',scalingX:'transform',scalingY:'transform',scalingCenterX:'transform',scalingCenterY:'transform',constrainGradients:'canvas'},updaters:{bbox:'bboxUpdater',zIndex:function(a){a.dirtyZIndex=!0},transform:function(a){a.dirtyTransform=!0;a.bbox.transform.dirty=!0}}}},config:{parent:null,surface:null},onClassExtended:function(a,b){var c=a.superclass.self.def.initialConfig,d=b.inheritableStatics&&b.inheritableStatics.def,e;if(d){e=Ext.Object.merge({},c,d);a.def=new Ext.draw.sprite.AttributeDefinition(e);delete b.inheritableStatics.def}else {a.def=new Ext.draw.sprite.AttributeDefinition(c)}a.def.spriteClass=a},constructor:function(b){var a=this,c=a.self.def,e=c.getDefaults(),f=c.getProcessors(),d,g;b=Ext.isObject(b)?b:{};a.id=b.id||Ext.id(null,'ext-sprite-');a.attr={};a.mixins.observable.constructor.apply(a,arguments);d=Ext.Array.from(b.modifiers,!0);a.createModifiers(d);a.initializeAttributes();a.setAttributes(e,!0);a.setAttributes(b)},updateSurface:function(b,a){if(a){a.remove(this)}},getDirty:function(){return this.attr.dirty},setDirty:function(b){var a;this.attr.dirty=b;if(b){a=this.getParent();if(a){a.setDirty(!0)}}},addModifier:function(a,g){var e=this,b=e.modifiers,d=b.animation,f=b.target,c;if(!(a instanceof Ext.draw.modifier.Modifier)){c=typeof a==='string'?a:a.type;if(c&&!b[c]){b[c]=a=Ext.factory(a,null,null,'modifier')}}a.setSprite(e);if(a.preFx||a.config&&a.config.preFx){if(d._lower){d._lower.setUpper(a)}a.setUpper(d)}else {f._lower.setUpper(a);a.setUpper(f)}if(g){e.initializeAttributes()}return a},createModifiers:function(d){var a=this,e=Ext.draw.modifier,g=a.getInitialConfig().animation,b,c,f;a.modifiers=b={target:new e.Target({sprite:a}),animation:new e.Animation(Ext.apply({sprite:a},g))};b.animation.setUpper(b.target);for(c=0,f=d.length;c<f;c++){a.addModifier(d[c],!1)}return b},getAnimation:function(){return this.modifiers.animation},setAnimation:function(a){if(!this.isConfiguring){this.modifiers.animation.setConfig(a||{duration:0})}},initializeAttributes:function(){this.modifiers.target.prepareAttributes(this.attr)},callUpdaters:function(e){var b=this,i=b.self.def.getUpdaters(),f=!1,g=!1,c,h,d,a;e=e||this.attr;c=e.pendingUpdaters;b.callUpdaters=Ext.emptyFn;do{f=!1;for(d in c){f=!0;h=c[d];delete c[d];a=i[d];if(typeof a==='string'){a=b[a]}if(a){a.call(b,e,h)}}g=g||f}while(f);delete b.callUpdaters;if(g){b.setDirty(!0)}},callUpdater:function(a,c,b){this.scheduleUpdater(a,c,b);this.callUpdaters(a)},scheduleUpdaters:function(d,c,b){var a,e,f;d=d||this.attr;if(b){for(e=0,f=c.length;e<f;e++){a=c[e];this.scheduleUpdater(d,a,b)}}else {for(a in c){b=c[a];this.scheduleUpdater(d,a,b)}}},scheduleUpdater:function(d,c,b){var a;b=b||[];d=d||this.attr;a=d.pendingUpdaters;if(c in a){if(b.length){a[c]=Ext.Array.merge(a[c],b)}}else {a[c]=b}},setAttributes:function(b,d,e){var c=this,a;if(d){if(e){a=b}else {a=Ext.apply({},b)}}else {a=c.self.def.normalize(b)}c.modifiers.target.pushDown(c.attr,a)},setAttributesBypassingNormalization:function(b,a){return this.setAttributes(b,!0,a)},bboxUpdater:function(a){var d=a.rotationRads!==0,e=a.scalingX!==1||a.scalingY!==1,b=a.rotationCenterX===null||a.rotationCenterY===null,c=a.scalingCenterX===null||a.scalingCenterY===null;a.bbox.plain.dirty=!0;a.bbox.transform.dirty=!0;if(d&&b||e&&c){this.scheduleUpdater(a,'transform')}},getBBox:function(e){var c=this,f=c.attr,d=f.bbox,a=d.plain,b=d.transform;if(a.dirty){c.updatePlainBBox(a);a.dirty=!1}if(!e){c.applyTransformations();if(b.dirty){c.updateTransformedBBox(b,a);b.dirty=!1}return b}return a},updatePlainBBox:Ext.emptyFn,updateTransformedBBox:function(a,b){this.attr.matrix.transformBBox(b,0,a)},getBBoxCenter:function(b){var a=this.getBBox(b);if(a){return [a.x+a.width*0.5,a.y+a.height*0.5]}else {return [0,0]}},hide:function(){this.attr.hidden=!0;this.setDirty(!0);return this},show:function(){this.attr.hidden=!1;this.setDirty(!0);return this},useAttributes:function(a,i){this.applyTransformations(this.isSpriteInstance);var h=this.attr,b=h.canvasAttributes,d=b.strokeStyle,e=b.fillStyle,g=b.lineDash,f=b.lineDashOffset,c;if(d){if(d.isGradient){a.strokeStyle='black';a.strokeGradient=d}else {a.strokeGradient=!1}}if(e){if(e.isGradient){a.fillStyle='black';a.fillGradient=e}else {a.fillGradient=!1}}if(g){a.setLineDash(g)}if(Ext.isNumber(f)&&Ext.isNumber(a.lineDashOffset)){a.lineDashOffset=f}for(c in b){if(b[c]!==undefined&&b[c]!==a[c]){a[c]=b[c]}}this.setGradientBBox(a,i)},setGradientBBox:function(c,a){var b=this.attr;if(b.constrainGradients){c.setGradientBBox({x:a[0],y:a[1],width:a[2],height:a[3]})}else {c.setGradientBBox(this.getBBox(b.transformFillStroke))}},applyTransformations:function(q){if(!q&&!this.attr.dirtyTransform){return}var p=this,a=p.attr,m=p.getBBoxCenter(!0),k=m[0],l=m[1],r=a.translationX,s=a.translationY,d=a.scalingX,e=a.scalingY===null?a.scalingX:a.scalingY,n=a.scalingCenterX===null?k:a.scalingCenterX,o=a.scalingCenterY===null?l:a.scalingCenterY,h=a.rotationRads,i=a.rotationCenterX===null?k:a.rotationCenterX,j=a.rotationCenterY===null?l:a.rotationCenterY,b=Math.cos(h),c=Math.sin(h),f,g;if(d===1&&e===1){n=0;o=0}if(h===0){i=0;j=0}f=n*(1-d)-i;g=o*(1-e)-j;a.matrix.elements=[b*d,c*d,-c*e,b*e,b*f-c*g+i+r,c*f+b*g+j+s];a.matrix.inverse(a.inverseMatrix);a.dirtyTransform=!1;a.bbox.transform.dirty=!0},transform:function(a,e){var b=this.attr,c=b.matrix,d;if(a&&a.isMatrix){d=a.elements}else {d=a}c.prepend.apply(c,d.slice());c.inverse(b.inverseMatrix);if(e){this.updateTransformAttributes()}b.dirtyTransform=!1;b.bbox.transform.dirty=!0;this.setDirty(!0);return this},updateTransformAttributes:function(){var a=this.attr,b=a.matrix.split();a.rotationRads=b.rotate;a.rotationCenterX=0;a.rotationCenterY=0;a.scalingX=b.scaleX;a.scalingY=b.scaleY;a.scalingCenterX=0;a.scalingCenterY=0;a.translationX=b.translateX;a.translationY=b.translateY},resetTransform:function(b){var a=this.attr;a.matrix.reset();a.inverseMatrix.reset();if(!b){this.updateTransformAttributes()}a.dirtyTransform=!1;a.bbox.transform.dirty=!0;this.setDirty(!0);return this},setTransform:function(b,a){this.resetTransform(!0);this.transform.call(this,b,a);return this},preRender:Ext.emptyFn,render:Ext.emptyFn,hitTest:function(e,f){var b,c,a,d;if(this.isVisible()){b=e[0];c=e[1];a=this.getBBox();d=a&&b>=a.x&&b<=a.x+a.width&&c>=a.y&&c<=a.y+a.height;if(d){return {sprite:this}}}return null},isVisible:function(){var a=this.attr,b=this.getParent(),e=b&&(b.isSurface||b.isVisible()),h=e&&!a.hidden&&a.globalAlpha,c=Ext.util.Color.NONE,d=Ext.util.Color.RGBA_NONE,g=a.fillOpacity&&a.fillStyle!==c&&a.fillStyle!==d,f=a.strokeOpacity&&a.strokeStyle!==c&&a.strokeStyle!==d,i=h&&(g||f);return !!i},repaint:function(){var a=this.getSurface();if(a){a.renderFrame()}},remove:function(){var a=this.getSurface();if(a&&a.isSurface){return a.remove(this)}return null},destroy:function(){var a=this,b=a.modifiers.target,c;while(b){c=b;b=b._lower;c.destroy()}delete a.attr;a.remove();if(a.fireEvent('beforedestroy',a)!==!1){a.fireEvent('destroy',a)}a.callParent()}},function(){this.def=new Ext.draw.sprite.AttributeDefinition(this.def);this.def.spriteClass=this});Ext.define('Ext.draw.Path',{statics:{pathRe:/,?([achlmqrstvxz]),?/gi,pathRe2:/-/gi,pathSplitRe:/\s|,/g},svgString:'',constructor:function(b){var a=this;a.commands=[];a.params=[];a.cursor=null;a.startX=0;a.startY=0;if(b){a.fromSvgString(b)}},clear:function(){var a=this;a.params.length=0;a.commands.length=0;a.cursor=null;a.startX=0;a.startY=0;a.dirt()},dirt:function(){this.svgString=''},moveTo:function(b,c){var a=this;if(!a.cursor){a.cursor=[b,c]}a.params.push(b,c);a.commands.push('M');a.startX=b;a.startY=c;a.cursor[0]=b;a.cursor[1]=c;a.dirt()},lineTo:function(b,c){var a=this;if(!a.cursor){a.cursor=[b,c];a.params.push(b,c);a.commands.push('M')}else {a.params.push(b,c);a.commands.push('L')}a.cursor[0]=b;a.cursor[1]=c;a.dirt()},bezierCurveTo:function(b,c,f,g,d,e){var a=this;if(!a.cursor){a.moveTo(b,c)}a.params.push(b,c,f,g,d,e);a.commands.push('C');a.cursor[0]=d;a.cursor[1]=e;a.dirt()},quadraticCurveTo:function(b,c,d,e){var a=this;if(!a.cursor){a.moveTo(b,c)}a.bezierCurveTo((2*b+a.cursor[0])/3,(2*c+a.cursor[1])/3,(2*b+d)/3,(2*c+e)/3,d,e)},closePath:function(){var a=this;if(a.cursor){a.cursor=null;a.commands.push('Z');a.dirt()}},arcTo:function(l,m,e,f,d,b,n){var i=this;if(b===undefined){b=d}if(n===undefined){n=0}if(!i.cursor){i.moveTo(l,m);return}if(d===0||b===0){i.lineTo(l,m);return}e-=l;f-=m;var g=i.cursor[0]-l,h=i.cursor[1]-m,q=e*h-f*g,j,k,x,z,y,A,v=Math.sqrt(g*g+h*h),w=Math.sqrt(e*e+f*f),u,c,a,t;if(q===0){i.lineTo(l,m);return}if(b!==d){j=Math.cos(n);k=Math.sin(n);x=j/d;z=k/b;y=-k/d;A=j/b;t=x*g+z*h;h=y*g+A*h;g=t;t=x*e+z*f;f=y*e+A*f;e=t}else {g/=d;h/=b;e/=d;f/=b}c=g*w+e*v;a=h*w+f*v;u=1/(Math.sin(Math.asin(Math.abs(q)/(v*w))*0.5)*Math.sqrt(c*c+a*a));c*=u;a*=u;var B=(c*g+a*h)/(g*g+h*h),C=(c*e+a*f)/(e*e+f*f),r=g*B-c,s=h*B-a,D=e*C-c,E=f*C-a,o=Math.atan2(s,r),p=Math.atan2(E,D);if(q>0){if(p<o){p+=Math.PI*2}}else {if(o<p){o+=Math.PI*2}}if(b!==d){c=j*c*d-k*a*b+l;a=k*a*b+j*a*b+m;i.lineTo(j*d*r-k*b*s+c,k*d*r+j*b*s+a);i.ellipse(c,a,d,b,n,o,p,q<0)}else {c=c*d+l;a=a*b+m;i.lineTo(d*r+c,b*s+a);i.ellipse(c,a,d,b,n,o,p,q<0)}},ellipse:function(k,l,h,i,g,d,e,m){var b=this,a=b.params,o=a.length,n,j,c,f;if(e-d>=Math.PI*2){b.ellipse(k,l,h,i,g,d,d+Math.PI,m);b.ellipse(k,l,h,i,g,d+Math.PI,e,m);return}if(!m){if(e<d){e+=Math.PI*2}n=b.approximateArc(a,k,l,h,i,g,d,e)}else {if(d<e){d+=Math.PI*2}n=b.approximateArc(a,k,l,h,i,g,e,d);for(c=o,f=a.length-2;c<f;c+=2,f-=2){j=a[c];a[c]=a[f];a[f]=j;j=a[c+1];a[c+1]=a[f+1];a[f+1]=j}}if(!b.cursor){b.cursor=[a[a.length-2],a[a.length-1]];b.commands.push('M')}else {b.cursor[0]=a[a.length-2];b.cursor[1]=a[a.length-1];b.commands.push('L')}for(c=2;c<n;c+=6){b.commands.push('C')}b.dirt()},arc:function(e,f,a,c,d,b){this.ellipse(e,f,a,a,0,c,d,b)},rect:function(b,c,e,d){var a=this;if(e===0||d===0){return}a.moveTo(b,c);a.lineTo(b+e,c);a.lineTo(b+e,c+d);a.lineTo(b,c+d);a.closePath()},approximateArc:function(s,f,g,q,r,y,t,a){var m=Math.cos(y),n=Math.sin(y),k=Math.cos(t),l=Math.sin(t),z=m*k*q-n*l*r,B=-m*l*q-n*k*r,A=n*k*q+m*l*r,C=-n*l*q+m*k*r,x=Math.PI/2,u=2,d=z,b=B,e=A,c=C,p=0.547443256150549,o,i,h,j,v,w;a-=t;if(a<0){a+=Math.PI*2}s.push(z+f,A+g);while(a>=x){s.push(d+b*p+f,e+c*p+g,d*p+b+f,e*p+c+g,b+f,c+g);u+=6;a-=x;o=d;d=b;b=-o;o=e;e=c;c=-o}if(a){i=(0.3294738052815987+0.012120855841304373*a)*a;h=Math.cos(a);j=Math.sin(a);v=h+i*j;w=j-i*h;s.push(d+b*i+f,e+c*i+g,d*v+b*w+f,e*v+c*w+g,d*h+b*j+f,e*h+c*j+g);u+=6}return u},arcSvg:function(b,c,j,y,m,v,x){if(b<0){b=-b}if(c<0){c=-c}var n=this,u=n.cursor[0],w=n.cursor[1],q=(u-v)/2,r=(w-x)/2,g=Math.cos(j),h=Math.sin(j),o=q*g+r*h,p=-q*h+r*g,k=o/b,l=p/c,a=k*k+l*l,s=(u+v)*0.5,t=(w+x)*0.5,e=0,f=0,i,d;if(a>=1){a=Math.sqrt(a);b*=a;c*=a}else {a=Math.sqrt(1/a-1);if(y===m){a=-a}e=a*b*l;f=-a*c*k;s+=g*e-h*f;t+=h*e+g*f}i=Math.atan2((p-f)/c,(o-e)/b);d=Math.atan2((-p-f)/c,(-o-e)/b)-i;if(m){if(d<=0){d+=Math.PI*2}}else {if(d>=0){d-=Math.PI*2}}n.ellipse(s,t,b,c,j,i,i+d,1-m)},fromSvgString:function(k){if(!k){return}var e=this,b,g={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0,A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},h='',i,j,c=0,d=0,l=!1,a,f;if(Ext.isString(k)){b=k.replace(Ext.draw.Path.pathRe,' $1 ').replace(Ext.draw.Path.pathRe2,' -').split(Ext.draw.Path.pathSplitRe)}else {if(Ext.isArray(k)){b=k.join(',').split(Ext.draw.Path.pathSplitRe)}}for(a=0,f=0;a<b.length;a++){if(b[a]!==''){b[f++]=b[a]}}b.length=f;e.clear();for(a=0;a<b.length;){h=l;l=b[a];a++;switch(l){case 'M':e.moveTo(c=+b[a],d=+b[a+1]);a+=2;while(a<f&&!g.hasOwnProperty(b[a])){e.lineTo(c=+b[a],d=+b[a+1]);a+=2};break;case 'L':e.lineTo(c=+b[a],d=+b[a+1]);a+=2;while(a<f&&!g.hasOwnProperty(b[a])){e.lineTo(c=+b[a],d=+b[a+1]);a+=2};break;case 'A':while(a<f&&!g.hasOwnProperty(b[a])){e.arcSvg(+b[a],+b[a+1],+b[a+2]*Math.PI/180,+b[a+3],+b[a+4],c=+b[a+5],d=+b[a+6]);a+=7};break;case 'C':while(a<f&&!g.hasOwnProperty(b[a])){e.bezierCurveTo(+b[a],+b[a+1],i=+b[a+2],j=+b[a+3],c=+b[a+4],d=+b[a+5]);a+=6};break;case 'Z':e.closePath();break;case 'm':e.moveTo(c+=+b[a],d+=+b[a+1]);a+=2;while(a<f&&!g.hasOwnProperty(b[a])){e.lineTo(c+=+b[a],d+=+b[a+1]);a+=2};break;case 'l':e.lineTo(c+=+b[a],d+=+b[a+1]);a+=2;while(a<f&&!g.hasOwnProperty(b[a])){e.lineTo(c+=+b[a],d+=+b[a+1]);a+=2};break;case 'a':while(a<f&&!g.hasOwnProperty(b[a])){e.arcSvg(+b[a],+b[a+1],+b[a+2]*Math.PI/180,+b[a+3],+b[a+4],c+=+b[a+5],d+=+b[a+6]);a+=7};break;case 'c':while(a<f&&!g.hasOwnProperty(b[a])){e.bezierCurveTo(c+ +b[a],d+ +b[a+1],i=c+ +b[a+2],j=d+ +b[a+3],c+=+b[a+4],d+=+b[a+5]);a+=6};break;case 'z':e.closePath();break;case 's':if(!(h==='c'||h==='C'||h==='s'||h==='S')){i=c;j=d};while(a<f&&!g.hasOwnProperty(b[a])){e.bezierCurveTo(c+c-i,d+d-j,i=c+ +b[a],j=d+ +b[a+1],c+=+b[a+2],d+=+b[a+3]);a+=4};break;case 'S':if(!(h==='c'||h==='C'||h==='s'||h==='S')){i=c;j=d};while(a<f&&!g.hasOwnProperty(b[a])){e.bezierCurveTo(c+c-i,d+d-j,i=+b[a],j=+b[a+1],c=+b[a+2],d=+b[a+3]);a+=4};break;case 'q':while(a<f&&!g.hasOwnProperty(b[a])){e.quadraticCurveTo(i=c+ +b[a],j=d+ +b[a+1],c+=+b[a+2],d+=+b[a+3]);a+=4};break;case 'Q':while(a<f&&!g.hasOwnProperty(b[a])){e.quadraticCurveTo(i=+b[a],j=+b[a+1],c=+b[a+2],d=+b[a+3]);a+=4};break;case 't':if(!(h==='q'||h==='Q'||h==='t'||h==='T')){i=c;j=d};while(a<f&&!g.hasOwnProperty(b[a])){e.quadraticCurveTo(i=c+c-i,j=d+d-j,c+=+b[a+1],d+=+b[a+2]);a+=2};break;case 'T':if(!(h==='q'||h==='Q'||h==='t'||h==='T')){i=c;j=d};while(a<f&&!g.hasOwnProperty(b[a])){e.quadraticCurveTo(i=c+c-i,j=d+d-j,c=+b[a+1],d=+b[a+2]);a+=2};break;case 'h':while(a<f&&!g.hasOwnProperty(b[a])){e.lineTo(c+=+b[a],d);a++};break;case 'H':while(a<f&&!g.hasOwnProperty(b[a])){e.lineTo(c=+b[a],d);a++};break;case 'v':while(a<f&&!g.hasOwnProperty(b[a])){e.lineTo(c,d+=+b[a]);a++};break;case 'V':while(a<f&&!g.hasOwnProperty(b[a])){e.lineTo(c,d=+b[a]);a++};break;}}},clone:function(){var b=this,a=new Ext.draw.Path();a.params=b.params.slice(0);a.commands=b.commands.slice(0);a.cursor=b.cursor?b.cursor.slice(0):null;a.startX=b.startX;a.startY=b.startY;a.svgString=b.svgString;return a},transform:function(a){if(a.isIdentity()){return}var i=a.getXX(),k=a.getYX(),f=a.getDX(),j=a.getXY(),l=a.getYY(),g=a.getDY(),c=this.params,b=0,h=c.length,d,e;for(;b<h;b+=2){d=c[b];e=c[b+1];c[b]=d*i+e*k+f;c[b+1]=d*j+e*l+g}this.dirt()},getDimension:function(a){if(!a){a={}}if(!this.commands||!this.commands.length){a.x=0;a.y=0;a.width=0;a.height=0;return a}a.left=Infinity;a.top=Infinity;a.right=-Infinity;a.bottom=-Infinity;var f=0,b=0,g=this.commands,c=this.params,h=g.length,d,e;for(;f<h;f++){switch(g[f]){case 'M':case 'L':d=c[b];e=c[b+1];a.left=Math.min(d,a.left);a.top=Math.min(e,a.top);a.right=Math.max(d,a.right);a.bottom=Math.max(e,a.bottom);b+=2;break;case 'C':this.expandDimension(a,d,e,c[b],c[b+1],c[b+2],c[b+3],d=c[b+4],e=c[b+5]);b+=6;break;}}a.x=a.left;a.y=a.top;a.width=a.right-a.left;a.height=a.bottom-a.top;return a},getDimensionWithTransform:function(d,a){if(!this.commands||!this.commands.length){if(!a){a={}}a.x=0;a.y=0;a.width=0;a.height=0;return a}a.left=Infinity;a.top=Infinity;a.right=-Infinity;a.bottom=-Infinity;var i=d.getXX(),k=d.getYX(),g=d.getDX(),j=d.getXY(),l=d.getYY(),h=d.getDY(),m=0,b=0,n=this.commands,c=this.params,o=n.length,e,f;for(;m<o;m++){switch(n[m]){case 'M':case 'L':e=c[b]*i+c[b+1]*k+g;f=c[b]*j+c[b+1]*l+h;a.left=Math.min(e,a.left);a.top=Math.min(f,a.top);a.right=Math.max(e,a.right);a.bottom=Math.max(f,a.bottom);b+=2;break;case 'C':this.expandDimension(a,e,f,c[b]*i+c[b+1]*k+g,c[b]*j+c[b+1]*l+h,c[b+2]*i+c[b+3]*k+g,c[b+2]*j+c[b+3]*l+h,e=c[b+4]*i+c[b+5]*k+g,f=c[b+4]*j+c[b+5]*l+h);b+=6;break;}}if(!a){a={}}a.x=a.left;a.y=a.top;a.width=a.right-a.left;a.height=a.bottom-a.top;return a},expandDimension:function(a,l,n,h,j,i,k,m,o){var c=this,e=a.left,f=a.right,g=a.top,d=a.bottom,b=c.dim||(c.dim=[]);c.curveDimension(l,h,i,m,b);e=Math.min(e,b[0]);f=Math.max(f,b[1]);c.curveDimension(n,j,k,o,b);g=Math.min(g,b[0]);d=Math.max(d,b[1]);a.left=e;a.right=f;a.top=g;a.bottom=d},curveDimension:function(e,g,j,h,k){var l=3*(-e+3*(g-j)+h),i=6*(e-2*g+j),m=-3*(e-g),a,b,d=Math.min(e,h),c=Math.max(e,h),f;if(l===0){if(i===0){k[0]=d;k[1]=c;return}else {a=-m/i;if(0<a&&a<1){b=this.interpolate(e,g,j,h,a);d=Math.min(d,b);c=Math.max(c,b)}}}else {f=i*i-4*l*m;if(f>=0){f=Math.sqrt(f);a=(f-i)/2/l;if(0<a&&a<1){b=this.interpolate(e,g,j,h,a);d=Math.min(d,b);c=Math.max(c,b)}if(f>0){a-=f/l;if(0<a&&a<1){b=this.interpolate(e,g,j,h,a);d=Math.min(d,b);c=Math.max(c,b)}}}}k[0]=d;k[1]=c},interpolate:function(c,e,f,d,a){var b;if(a===0){return c}if(a===1){return d}b=(1-a)/a;return a*a*a*(d+b*(3*f+b*(3*e+b*c)))},fromStripes:function(e){var a=this,c=0,g=e.length,d,f,b;a.clear();for(;c<g;c++){b=e[c];a.params.push.apply(a.params,b);a.commands.push('M');for(d=2,f=b.length;d<f;d+=6){a.commands.push('C')}}if(!a.cursor){a.cursor=[]}a.cursor[0]=a.params[a.params.length-2];a.cursor[1]=a.params[a.params.length-1];a.dirt()},toStripes:function(m){var j=m||[],g,e,f,c,d,k,l,h,a,i=this.commands,b=this.params,n=i.length;for(h=0,a=0;h<n;h++){switch(i[h]){case 'M':g=[k=c=b[a++],l=d=b[a++]];j.push(g);break;case 'L':e=b[a++];f=b[a++];g.push((c+c+e)/3,(d+d+f)/3,(c+e+e)/3,(d+f+f)/3,c=e,d=f);break;case 'C':g.push(b[a++],b[a++],b[a++],b[a++],c=b[a++],d=b[a++]);break;case 'Z':e=k;f=l;g.push((c+c+e)/3,(d+d+f)/3,(c+e+e)/3,(d+f+f)/3,c=e,d=f);break;}}return j},updateSvgString:function(){var c=[],e=this.commands,b=this.params,f=e.length,d=0,a=0;for(;d<f;d++){switch(e[d]){case 'M':c.push('M'+b[a]+','+b[a+1]);a+=2;break;case 'L':c.push('L'+b[a]+','+b[a+1]);a+=2;break;case 'C':c.push('C'+b[a]+','+b[a+1]+' '+b[a+2]+','+b[a+3]+' '+b[a+4]+','+b[a+5]);a+=6;break;case 'Z':c.push('Z');break;}}this.svgString=c.join('')},toString:function(){if(!this.svgString){this.updateSvgString()}return this.svgString}});Ext.define('Ext.draw.overrides.hittest.Path',{override:'Ext.draw.Path',rayOrigin:{x:-10000,y:-10000},isPointInPath:function(j,k){var m=this,n=m.commands,h=Ext.draw.PathUtil,c=m.rayOrigin,b=m.params,o=n.length,f=null,l=null,d=0,e=0,g=0,i,a;for(i=0,a=0;i<o;i++){switch(n[i]){case 'M':if(f!==null){if(h.linesIntersection(f,l,d,e,c.x,c.y,j,k)){g+=1}};f=d=b[a];l=e=b[a+1];a+=2;break;case 'L':if(h.linesIntersection(d,e,b[a],b[a+1],c.x,c.y,j,k)){g+=1};d=b[a];e=b[a+1];a+=2;break;case 'C':g+=h.cubicLineIntersections(d,b[a],b[a+2],b[a+4],e,b[a+1],b[a+3],b[a+5],c.x,c.y,j,k).length;d=b[a+4];e=b[a+5];a+=6;break;case 'Z':if(f!==null){if(h.linesIntersection(f,l,d,e,c.x,c.y,j,k)){g+=1}};break;}}return g%2===1},isPointOnPath:function(h,i){var l=this,k=l.commands,f=Ext.draw.PathUtil,b=l.params,m=k.length,e=null,j=null,c=0,d=0,g,a;for(g=0,a=0;g<m;g++){switch(k[g]){case 'M':if(e!==null){if(f.pointOnLine(e,j,c,d,h,i)){return !0}};e=c=b[a];j=d=b[a+1];a+=2;break;case 'L':if(f.pointOnLine(c,d,b[a],b[a+1],h,i)){return !0};c=b[a];d=b[a+1];a+=2;break;case 'C':if(f.pointOnCubic(c,b[a],b[a+2],b[a+4],d,b[a+1],b[a+3],b[a+5],h,i)){return !0};c=b[a+4];d=b[a+5];a+=6;break;case 'Z':if(e!==null){if(f.pointOnLine(e,j,c,d,h,i)){return !0}};break;}}return !1},getSegmentIntersections:function(h,j,i,k,o,q,p,r){var u=this,n=arguments.length,g=Ext.draw.PathUtil,t=u.commands,b=u.params,v=t.length,l=null,m=null,e=0,f=0,d=[],s,a,c;for(s=0,a=0;s<v;s++){switch(t[s]){case 'M':if(l!==null){switch(n){case 4:c=g.linesIntersection(l,m,e,f,h,j,i,k);if(c){d.push(c)};break;case 8:c=g.cubicLineIntersections(h,i,o,p,j,k,q,r,l,m,e,f);d.push.apply(d,c);break;}};l=e=b[a];m=f=b[a+1];a+=2;break;case 'L':switch(n){case 4:c=g.linesIntersection(e,f,b[a],b[a+1],h,j,i,k);if(c){d.push(c)};break;case 8:c=g.cubicLineIntersections(h,i,o,p,j,k,q,r,e,f,b[a],b[a+1]);d.push.apply(d,c);break;};e=b[a];f=b[a+1];a+=2;break;case 'C':switch(n){case 4:c=g.cubicLineIntersections(e,b[a],b[a+2],b[a+4],f,b[a+1],b[a+3],b[a+5],h,j,i,k);d.push.apply(d,c);break;case 8:c=g.cubicsIntersections(e,b[a],b[a+2],b[a+4],f,b[a+1],b[a+3],b[a+5],h,i,o,p,j,k,q,r);d.push.apply(d,c);break;};e=b[a+4];f=b[a+5];a+=6;break;case 'Z':if(l!==null){switch(n){case 4:c=g.linesIntersection(l,m,e,f,h,j,i,k);if(c){d.push(c)};break;case 8:c=g.cubicLineIntersections(h,i,o,p,j,k,q,r,l,m,e,f);d.push.apply(d,c);break;}};break;}}return d},getIntersections:function(e){var l=this,k=l.commands,b=l.params,m=k.length,h=null,j=null,f=0,g=0,c=[],i,a,d;for(i=0,a=0;i<m;i++){switch(k[i]){case 'M':if(h!==null){d=e.getSegmentIntersections.call(e,h,j,f,g);c.push.apply(c,d)};h=f=b[a];j=g=b[a+1];a+=2;break;case 'L':d=e.getSegmentIntersections.call(e,f,g,b[a],b[a+1]);c.push.apply(c,d);f=b[a];g=b[a+1];a+=2;break;case 'C':d=e.getSegmentIntersections.call(e,f,g,b[a],b[a+1],b[a+2],b[a+3],b[a+4],b[a+5]);c.push.apply(c,d);f=b[a+4];g=b[a+5];a+=6;break;case 'Z':if(h!==null){d=e.getSegmentIntersections.call(e,h,j,f,g);c.push.apply(c,d)};break;}}return c}});Ext.define('Ext.draw.sprite.Path',{extend:Ext.draw.sprite.Sprite,alias:['sprite.path','Ext.draw.Sprite'],type:'path',isPath:!0,inheritableStatics:{def:{processors:{path:function(a,b){if(!(a instanceof Ext.draw.Path)){a=new Ext.draw.Path(a)}return a}},aliases:{d:'path'},triggers:{path:'bbox'},updaters:{path:function(b){var a=b.path;if(!a||a.bindAttr!==b){a=new Ext.draw.Path();a.bindAttr=b;b.path=a}a.clear();this.updatePath(a,b);this.scheduleUpdater(b,'bbox',['path'])}}}},updatePlainBBox:function(a){if(this.attr.path){this.attr.path.getDimension(a)}},updateTransformedBBox:function(a){if(this.attr.path){this.attr.path.getDimensionWithTransform(this.attr.matrix,a)}},render:function(d,b){var c=this.attr.matrix,a=this.attr;if(!a.path||a.path.params.length===0){return}c.toContext(b);b.appendPath(a.path);b.fillStroke(a)},updatePath:function(b,a){}});Ext.define('Ext.draw.overrides.hittest.sprite.Path',{override:'Ext.draw.sprite.Path',isPointInPath:function(f,g){var b=this.attr,a,d,c,e;if(b.fillStyle===Ext.util.Color.RGBA_NONE){return this.isPointOnPath(f,g)}a=b.path;d=b.matrix;if(!d.isIdentity()){c=a.params.slice(0);a.transform(b.matrix)}e=a.isPointInPath(f,g);if(c){a.params=c}return e},isPointOnPath:function(f,g){var c=this.attr,a=c.path,e=c.matrix,b,d;if(!e.isIdentity()){b=a.params.slice(0);a.transform(c.matrix)}d=a.isPointOnPath(f,g);if(b){a.params=b}return d},hitTest:function(i,a){var d=this,e=d.attr,b=e.path,l=e.matrix,f=i[0],g=i[1],k=d.callParent([i,a]),c=null,h,j;if(!k){return c}a=a||Ext.draw.sprite.Sprite.defaultHitTestOptions;if(!l.isIdentity()){h=b.params.slice(0);b.transform(e.matrix)}if(a.fill&&a.stroke){j=e.fillStyle!==Ext.util.Color.NONE&&e.fillStyle!==Ext.util.Color.RGBA_NONE;if(j){if(b.isPointInPath(f,g)){c={sprite:d}}}else {if(b.isPointInPath(f,g)||b.isPointOnPath(f,g)){c={sprite:d}}}}else {if(a.stroke&&!a.fill){if(b.isPointOnPath(f,g)){c={sprite:d}}}else {if(a.fill&&!a.stroke){if(b.isPointInPath(f,g)){c={sprite:d}}}}}if(h){b.params=h}return c},getIntersections:function(g){if(!(g.isSprite&&g.isPath)){return []}var e=this.attr,f=g.attr,a=e.path,b=f.path,i=e.matrix,j=f.matrix,c,d,h;if(!i.isIdentity()){c=a.params.slice(0);a.transform(e.matrix)}if(!j.isIdentity()){d=b.params.slice(0);b.transform(f.matrix)}h=a.getIntersections(b);if(c){a.params=c}if(d){b.params=d}return h}});Ext.define('Ext.draw.sprite.Circle',{extend:Ext.draw.sprite.Path,alias:'sprite.circle',type:'circle',inheritableStatics:{def:{processors:{cx:'number',cy:'number',r:'number'},aliases:{radius:'r',x:'cx',y:'cy',centerX:'cx',centerY:'cy'},defaults:{cx:0,cy:0,r:4},triggers:{cx:'path',cy:'path',r:'path'}}},updatePlainBBox:function(b){var c=this.attr,d=c.cx,e=c.cy,a=c.r;b.x=d-a;b.y=e-a;b.width=a+a;b.height=a+a},updateTransformedBBox:function(a){var c=this.attr,f=c.cx,g=c.cy,h=c.r,b=c.matrix,i=b.getScaleX(),j=b.getScaleY(),d,e;d=i*h;e=j*h;a.x=b.x(f,g)-d;a.y=b.y(f,g)-e;a.width=d+d;a.height=e+e},updatePath:function(b,a){b.arc(a.cx,a.cy,a.r,0,Math.PI*2,!1)}});Ext.define('Ext.draw.sprite.Arc',{extend:Ext.draw.sprite.Circle,alias:'sprite.arc',type:'arc',inheritableStatics:{def:{processors:{startAngle:'number',endAngle:'number',anticlockwise:'bool'},aliases:{from:'startAngle',to:'endAngle',start:'startAngle',end:'endAngle'},defaults:{startAngle:0,endAngle:Math.PI*2,anticlockwise:!1},triggers:{startAngle:'path',endAngle:'path',anticlockwise:'path'}}},updatePath:function(b,a){b.arc(a.cx,a.cy,a.r,a.startAngle,a.endAngle,a.anticlockwise)}});Ext.define('Ext.draw.sprite.Arrow',{extend:Ext.draw.sprite.Path,alias:'sprite.arrow',inheritableStatics:{def:{processors:{x:'number',y:'number',size:'number'},defaults:{x:0,y:0,size:4},triggers:{x:'path',y:'path',size:'path'}}},updatePath:function(c,b){var a=b.size*1.5,d=b.x-b.lineWidth/2,e=b.y;c.fromSvgString('M'.concat(d-a*0.7,',',e-a*0.4,'l',[a*0.6,0,0,-a*0.4,a,a*0.8,-a,a*0.8,0,-a*0.4,-a*0.6,0],'z'))}});Ext.define('Ext.draw.sprite.Composite',{extend:Ext.draw.sprite.Sprite,alias:'sprite.composite',type:'composite',isComposite:!0,config:{sprites:[]},constructor:function(a){this.sprites=[];this.map={};this.callParent([a])},addSprite:function(a){var e=0,b,c,d;if(Ext.isArray(a)){c=[];while(e<a.length){c.push(this.addSprite(a[e++]))}return c}if(a&&a.type&&!a.isSprite){a=Ext.create('sprite.'+a.type,a)}if(!a||!a.isSprite||a.isComposite){return null}a.setSurface(null);a.setParent(this);b=this.attr;d=a.applyTransformations;a.applyTransformations=function(c){if(a.attr.dirtyTransform){b.dirtyTransform=!0;b.bbox.plain.dirty=!0;b.bbox.transform.dirty=!0}d.call(a,c)};this.sprites.push(a);this.map[a.id]=a.getId();b.bbox.plain.dirty=!0;b.bbox.transform.dirty=!0;return a},add:function(a){return this.addSprite(a)},removeSprite:function(a,e){var b=this,c,d;if(a){if(a.charAt){a=b.map[a]}if(!a||!a.isSprite){return null}if(a.destroyed||a.destroying){return a}c=a.getId();d=b.map[c];delete b.map[c];if(e){a.destroy()}if(!d){return a}a.setParent(null);Ext.Array.remove(b.sprites,a);b.dirtyZIndex=!0;b.setDirty(!0)}return a||null},addAll:function(a){var b=0;if(a.isSprite||a.type){this.add(a)}else {if(Ext.isArray(a)){while(b<a.length){this.add(a[b++])}}}},updatePlainBBox:function(b){var j=this,c=Infinity,h=-Infinity,d=Infinity,f=-Infinity,g,a,e,i;for(e=0,i=j.sprites.length;e<i;e++){g=j.sprites[e];g.applyTransformations();a=g.getBBox();if(c>a.x){c=a.x}if(h<a.x+a.width){h=a.x+a.width}if(d>a.y){d=a.y}if(f<a.y+a.height){f=a.y+a.height}}b.x=c;b.y=d;b.width=h-c;b.height=f-d},isVisible:function(){var b=this.attr,a=this.getParent(),c=a&&(a.isSurface||a.isVisible()),d=c&&!b.hidden&&b.globalAlpha;return !!d},render:function(d,f,e){var a=this,i=a.attr,g=a.attr.matrix,c=a.sprites,h=c.length,b=0;g.toContext(f);for(;b<h;b++){d.renderSprite(c[b],e)}},destroy:function(){var c=this,b=c.sprites,d=b.length,a;for(a=0;a<d;a++){b[a].destroy()}b.length=0;c.callParent()}});Ext.define('Ext.draw.sprite.Cross',{extend:Ext.draw.sprite.Path,alias:'sprite.cross',inheritableStatics:{def:{processors:{x:'number',y:'number',size:'number'},defaults:{x:0,y:0,size:4},triggers:{x:'path',y:'path',size:'path'}}},updatePath:function(c,b){var a=b.size/1.7,d=b.x-b.lineWidth/2,e=b.y;c.fromSvgString('M'.concat(d-a,',',e,'l',[-a,-a,a,-a,a,a,a,-a,a,a,-a,a,a,a,-a,a,-a,-a,-a,a,-a,-a,'z']))}});Ext.define('Ext.draw.sprite.Diamond',{extend:Ext.draw.sprite.Path,alias:'sprite.diamond',inheritableStatics:{def:{processors:{x:'number',y:'number',size:'number'},defaults:{x:0,y:0,size:4},triggers:{x:'path',y:'path',size:'path'}}},updatePath:function(c,b){var a=b.size*1.25,d=b.x-b.lineWidth/2,e=b.y;c.fromSvgString(['M',d,e-a,'l',a,a,-a,a,-a,-a,a,-a,'z'])}});Ext.define('Ext.draw.sprite.Ellipse',{extend:Ext.draw.sprite.Path,alias:'sprite.ellipse',type:'ellipse',inheritableStatics:{def:{processors:{cx:'number',cy:'number',rx:'number',ry:'number',axisRotation:'number'},aliases:{radius:'r',x:'cx',y:'cy',centerX:'cx',centerY:'cy',radiusX:'rx',radiusY:'ry'},defaults:{cx:0,cy:0,rx:1,ry:1,axisRotation:0},triggers:{cx:'path',cy:'path',rx:'path',ry:'path',axisRotation:'path'}}},updatePlainBBox:function(a){var b=this.attr,e=b.cx,f=b.cy,c=b.rx,d=b.ry;a.x=e-c;a.y=f-d;a.width=c+c;a.height=d+d},updateTransformedBBox:function(c){var b=this.attr,m=b.cx,j=b.cy,k=b.rx,p=b.ry,l=p/k,a=b.matrix.clone(),d,e,f,g,n,o,i,h;a.append(1,0,0,l,0,j*(1-l));d=a.getXX();f=a.getYX();n=a.getDX();e=a.getXY();g=a.getYY();o=a.getDY();i=Math.sqrt(d*d+f*f)*k;h=Math.sqrt(e*e+g*g)*k;c.x=m*d+j*f+n-i;c.y=m*e+j*g+o-h;c.width=i+i;c.height=h+h},updatePath:function(b,a){b.ellipse(a.cx,a.cy,a.rx,a.ry,a.axisRotation,0,Math.PI*2,!1)}});Ext.define('Ext.draw.sprite.EllipticalArc',{extend:Ext.draw.sprite.Ellipse,alias:'sprite.ellipticalArc',type:'ellipticalArc',inheritableStatics:{def:{processors:{startAngle:'number',endAngle:'number',anticlockwise:'bool'},aliases:{from:'startAngle',to:'endAngle',start:'startAngle',end:'endAngle'},defaults:{startAngle:0,endAngle:Math.PI*2,anticlockwise:!1},triggers:{startAngle:'path',endAngle:'path',anticlockwise:'path'}}},updatePath:function(b,a){b.ellipse(a.cx,a.cy,a.rx,a.ry,a.axisRotation,a.startAngle,a.endAngle,a.anticlockwise)}});Ext.define('Ext.draw.sprite.Rect',{extend:Ext.draw.sprite.Path,alias:'sprite.rect',type:'rect',inheritableStatics:{def:{processors:{x:'number',y:'number',width:'number',height:'number',radius:'number'},aliases:{},triggers:{x:'path',y:'path',width:'path',height:'path',radius:'path'},defaults:{x:0,y:0,width:8,height:8,radius:0}}},updatePlainBBox:function(a){var b=this.attr;a.x=b.x;a.y=b.y;a.width=b.width;a.height=b.height},updateTransformedBBox:function(a,b){this.attr.matrix.transformBBox(b,this.attr.radius,a)},updatePath:function(d,g){var a=g.x,b=g.y,f=g.width,e=g.height,c=Math.min(g.radius,Math.abs(e)*0.5,Math.abs(f)*0.5);if(c===0){d.rect(a,b,f,e)}else {d.moveTo(a+c,b);d.arcTo(a+f,b,a+f,b+e,c);d.arcTo(a+f,b+e,a,b+e,c);d.arcTo(a,b+e,a,b,c);d.arcTo(a,b,a+c,b,c);d.closePath()}}});Ext.define('Ext.draw.sprite.Image',{extend:Ext.draw.sprite.Rect,alias:'sprite.image',type:'image',statics:{imageLoaders:{}},inheritableStatics:{def:{processors:{src:'string'},triggers:{src:'src'},updaters:{src:'updateSource'},defaults:{src:'',width:null,height:null}}},updateSurface:function(a){if(a){this.updateSource(this.attr)}},updateSource:function(e){var g=this,f=e.src,d=g.getSurface(),a=Ext.draw.sprite.Image.imageLoaders[f],i=e.width,h=e.height,c,b;if(!d){return}if(!a){c=new Image();a=Ext.draw.sprite.Image.imageLoaders[f]={image:c,done:!1,pendingSprites:[g],pendingSurfaces:[d]};c.width=i;c.height=h;c.onload=function(){var c;if(!a.done){a.done=!0;for(b=0;b<a.pendingSprites.length;b++){c=a.pendingSprites[b];if(!c.destroyed){c.setDirty(!0)}}for(b=0;b<a.pendingSurfaces.length;b++){c=a.pendingSurfaces[b];if(!c.destroyed){c.renderFrame()}}}};c.src=f}else {Ext.Array.include(a.pendingSprites,g);Ext.Array.include(a.pendingSurfaces,d)}},render:function(d,e){var j=this,b=j.attr,h=b.matrix,i=b.src,k=b.x,l=b.y,g=b.width,f=b.height,c=Ext.draw.sprite.Image.imageLoaders[i],a;if(c&&c.done){h.toContext(e);a=c.image;e.drawImage(a,k,l,g||(a.naturalWidth||a.width)/d.devicePixelRatio,f||(a.naturalHeight||a.height)/d.devicePixelRatio)}},isVisible:function(){var b=this.attr,a=this.getParent(),c=a&&(a.isSurface||a.isVisible()),d=c&&!b.hidden&&b.globalAlpha;return !!d}});Ext.define('Ext.draw.sprite.Instancing',{extend:Ext.draw.sprite.Sprite,alias:'sprite.instancing',type:'instancing',isInstancing:!0,config:{template:null,instances:null},instances:null,applyTemplate:function(a){var b;if(!a.isSprite){if(!a.xclass&&!a.type){a.type='circle'}a=Ext.create(a.xclass||'sprite.'+a.type,a)}b=a.getSurface();if(b){b.remove(a)}a.setParent(this);return a},updateTemplate:function(a,b){if(b){delete b.ownAttr}a.setSurface(this.getSurface());a.ownAttr=a.attr;this.clearAll();this.setDirty(!0)},updateInstances:function(b){var a,c;this.clearAll();if(Ext.isArray(b)){for(a=0,c=b.length;a<c;a++){this.add(b[a])}}},updateSurface:function(b){var a=this.getTemplate();if(a&&!a.destroyed){a.setSurface(b)}},get:function(a){return this.instances[a]},getCount:function(){return this.instances.length},clearAll:function(){var a=this.getTemplate();a.attr.children=this.instances=[];this.position=0},createInstance:function(c,a,b){return this.add(c,a,b)},add:function(g,e,f){var c=this,a=c.getTemplate(),d=a.attr,b=Ext.Object.chain(d);a.modifiers.target.prepareAttributes(b);a.attr=b;a.setAttributes(g,e,f);b.template=a;c.instances.push(b);a.attr=d;c.position++;return b},getBBox:function(){return null},getBBoxFor:function(e,c){var a=this.getTemplate(),d=a.attr,b;a.attr=this.instances[e];b=a.getBBox(c);a.attr=d;return b},isVisible:function(){var c=this.attr,a=this.getParent(),b;b=a&&a.isSurface&&!c.hidden&&c.globalAlpha;return !!b},isInstanceVisible:function(b){var d=this,a=d.getTemplate(),f=a.attr,e=d.instances,c=!1;if(!Ext.isNumber(b)||b<0||b>=e.length||!d.isVisible()){return c}a.attr=e[b];c=a.isVisible(point,options);a.attr=f;return c},render:function(e,b,h){var d=this,a=d.getTemplate(),f=e.getRect(),j=d.attr.matrix,i=a.attr,g=d.instances,k=d.position,c;j.toContext(b);a.preRender(e,b,h);a.useAttributes(b,f);a.isSpriteInstance=!0;for(c=0;c<k;c++){if(g[c].hidden){continue}b.save();a.attr=g[c];a.useAttributes(b,f);a.render(e,b,h);b.restore()}a.isSpriteInstance=!1;a.attr=i},setAttributesFor:function(f,b,d){var a=this.getTemplate(),e=a.attr,c=this.instances[f];if(!c){return}a.attr=c;if(d){b=Ext.apply({},b)}else {b=a.self.def.normalize(b)}a.modifiers.target.pushDown(c,b);a.attr=e},destroy:function(){var a=this,b=a.getTemplate();a.instances=null;if(b){b.destroy()}a.callParent()}});Ext.define('Ext.draw.overrides.hittest.sprite.Instancing',{override:'Ext.draw.sprite.Instancing',hitTest:function(h,g){var e=this,c=e.getTemplate(),f=c.attr,d=e.instances,i=d.length,b=0,a=null;if(!e.isVisible()){return a}for(;b<i;b++){c.attr=d[b];a=c.hitTest(h,g);if(a){a.isInstance=!0;a.template=a.sprite;a.sprite=this;a.instance=d[b];a.index=b;return a}}c.attr=f;return a}});Ext.define('Ext.draw.sprite.Line',{extend:Ext.draw.sprite.Sprite,alias:'sprite.line',type:'line',inheritableStatics:{def:{processors:{fromX:'number',fromY:'number',toX:'number',toY:'number',crisp:'bool'},defaults:{fromX:0,fromY:0,toX:1,toY:1,crisp:!1,strokeStyle:'black'},aliases:{x1:'fromX',y1:'fromY',x2:'toX',y2:'toY'},triggers:{crisp:'bbox'}}},updateLineBBox:function(h,s,a,c,b,d){var l=this.attr,p=l.matrix,o=l.lineWidth/2,f,g,i,j,e,k,r,q,m,n;if(l.crisp){a=this.align(a);b=this.align(b);c=this.align(c);d=this.align(d)}if(s){e=p.transformPoint([a,c]);a=e[0];c=e[1];e=p.transformPoint([b,d]);b=e[0];d=e[1]}f=Math.min(a,b);i=Math.max(a,b);g=Math.min(c,d);j=Math.max(c,d);k=Math.atan2(i-f,j-g);r=Math.sin(k);q=Math.cos(k);m=o*q;n=o*r;f-=m;g-=n;i+=m;j+=n;h.x=f;h.y=g;h.width=i-f;h.height=j-g},updatePlainBBox:function(b){var a=this.attr;this.updateLineBBox(b,!1,a.fromX,a.fromY,a.toX,a.toY)},updateTransformedBBox:function(b,c){var a=this.attr;this.updateLineBBox(b,!0,a.fromX,a.fromY,a.toX,a.toY)},align:function(a){return Math.round(a)-0.5},render:function(e,b){var c=this,a=c.attr,d=a.matrix;d.toContext(b);b.beginPath();if(a.crisp){b.moveTo(c.align(a.fromX),c.align(a.fromY));b.lineTo(c.align(a.toX),c.align(a.toY))}else {b.moveTo(a.fromX,a.fromY);b.lineTo(a.toX,a.toY)}b.stroke()}});Ext.define('Ext.draw.sprite.Plus',{extend:Ext.draw.sprite.Path,alias:'sprite.plus',inheritableStatics:{def:{processors:{x:'number',y:'number',size:'number'},defaults:{x:0,y:0,size:4},triggers:{x:'path',y:'path',size:'path'}}},updatePath:function(c,b){var a=b.size/1.3,d=b.x-b.lineWidth/2,e=b.y;c.fromSvgString('M'.concat(d-a/2,',',e-a/2,'l',[0,-a,a,0,0,a,a,0,0,a,-a,0,0,a,-a,0,0,-a,-a,0,0,-a,'z']))}});Ext.define('Ext.draw.sprite.Sector',{extend:Ext.draw.sprite.Path,alias:'sprite.sector',type:'sector',inheritableStatics:{def:{processors:{centerX:'number',centerY:'number',startAngle:'number',endAngle:'number',startRho:'number',endRho:'number',margin:'number'},aliases:{rho:'endRho'},triggers:{centerX:'path,bbox',centerY:'path,bbox',startAngle:'path,bbox',endAngle:'path,bbox',startRho:'path,bbox',endRho:'path,bbox',margin:'path,bbox'},defaults:{centerX:0,centerY:0,startAngle:0,endAngle:0,startRho:0,endRho:150,margin:0,path:'M 0,0'}}},getMidAngle:function(){return this.midAngle||0},updatePath:function(g,a){var b=Math.min(a.startAngle,a.endAngle),c=Math.max(a.startAngle,a.endAngle),j=this.midAngle=(b+c)*0.5,k=Ext.Number.isEqual(Math.abs(c-b),Ext.draw.Draw.pi2,1.0E-10),i=a.margin,d=a.centerX,e=a.centerY,f=Math.min(a.startRho,a.endRho),h=Math.max(a.startRho,a.endRho);if(i){d+=i*Math.cos(j);e+=i*Math.sin(j)}if(!k){g.moveTo(d+f*Math.cos(b),e+f*Math.sin(b));g.lineTo(d+h*Math.cos(b),e+h*Math.sin(b))}g.arc(d,e,h,b,c,!1);g[k?'moveTo':'lineTo'](d+f*Math.cos(c),e+f*Math.sin(c));g.arc(d,e,f,c,b,!0)}});Ext.define('Ext.draw.sprite.Square',{extend:Ext.draw.sprite.Path,alias:'sprite.square',inheritableStatics:{def:{processors:{x:'number',y:'number',size:'number'},defaults:{x:0,y:0,size:4},triggers:{x:'path',y:'path',size:'size'}}},updatePath:function(d,a){var c=a.size*1.2,b=c*2,e=a.x-a.lineWidth/2,f=a.y;d.fromSvgString('M'.concat(e-c,',',f-c,'l',[b,0,0,b,-b,0,0,-b,'z']))}});Ext.define('Ext.draw.TextMeasurer',{singleton:!0,measureDiv:null,measureCache:{},precise:Ext.isIE8,measureDivTpl:{id:'ext-draw-text-measurer',tag:'div',style:{overflow:'hidden',position:'relative','float':'left',width:0,height:0},children:{tag:'div',style:{display:'block',position:'absolute',x:-100000,y:-100000,padding:0,margin:0,'z-index':-100000,'white-space':'nowrap'}}},actualMeasureText:function(g,e){var f=Ext.draw.TextMeasurer,a=f.measureDiv,b=100000,d,c;if(!a){c=Ext.Element.create({style:{'overflow':'hidden','position':'relative','float':'left','width':0,'height':0}});f.measureDiv=a=Ext.Element.create({style:{'position':'absolute','x':b,'y':b,'z-index':-b,'white-space':'nowrap','display':'block','padding':0,'margin':0}});Ext.getBody().appendChild(c);c.appendChild(a)}if(e){a.setStyle({font:e,lineHeight:'normal'})}a.setText('('+g+')');d=a.getSize();a.setText('()');d.width-=a.getSize().width;return d},measureTextSingleLine:function(b,c){var i=0,g=0,a,d,h,e,f,k,j;if(this.precise){return this.preciseMeasureTextSingleLine(b,c)}b=b.toString();a=this.measureCache;h=b.split('');if(!a[c]){a[c]={}}a=a[c];if(a[b]){return a[b]}for(f=0,k=h.length;f<k;f++){e=h[f];if(!(d=a[e])){j=this.actualMeasureText(e,c);d=a[e]=j}i+=d.width;g=Math.max(g,d.height)}return a[b]={width:i,height:g}},preciseMeasureTextSingleLine:function(b,c){var a;b=b.toString();a=this.measureDiv||(this.measureDiv=Ext.getBody().createChild(this.measureDivTpl).down('div'));a.setStyle({font:c||''});return Ext.util.TextMetrics.measure(a,b)},measureText:function(h,g){var f=h.split('\n'),i=f.length,e=0,d=0,a,b,c;if(i===1){return this.measureTextSingleLine(h,g)}c=[];for(b=0;b<i;b++){a=this.measureTextSingleLine(f[b],g);c.push(a);e+=a.height;d=Math.max(d,a.width)}return {width:d,height:e,sizes:c}}});Ext.define('Ext.draw.sprite.Text',function(){var d={'xx-small':!0,'x-small':!0,'small':!0,'medium':!0,'large':!0,'x-large':!0,'xx-large':!0},c={normal:!0,bold:!0,bolder:!0,lighter:!0,100:!0,200:!0,300:!0,400:!0,500:!0,600:!0,700:!0,800:!0,900:!0},a={start:'start',left:'start',center:'center',middle:'center',end:'end',right:'end'},b={top:'top',hanging:'hanging',middle:'middle',center:'middle',alphabetic:'alphabetic',ideographic:'ideographic',bottom:'bottom'};return {extend:Ext.draw.sprite.Sprite,alias:'sprite.text',type:'text',lineBreakRe:/\r?\n/g,inheritableStatics:{def:{animationProcessors:{text:'text'},processors:{x:'number',y:'number',text:'string',fontSize:function(a){if(Ext.isNumber(+a)){return a+'px'}else {if(a.match(Ext.dom.Element.unitRe)){return a}else {if(a in d){return a}}}},fontStyle:'enums(,italic,oblique)',fontVariant:'enums(,small-caps)',fontWeight:function(a){if(a in c){return String(a)}else {return ''}},fontFamily:'string',textAlign:function(b){return a[b]||'center'},textBaseline:function(a){return b[a]||'alphabetic'},font:'string'},aliases:{'font-size':'fontSize','font-family':'fontFamily','font-weight':'fontWeight','font-variant':'fontVariant','text-anchor':'textAlign','dominant-baseline':'textBaseline'},defaults:{fontStyle:'',fontVariant:'',fontWeight:'',fontSize:'10px',fontFamily:'sans-serif',font:'10px sans-serif',textBaseline:'alphabetic',textAlign:'start',strokeStyle:'rgba(0, 0, 0, 0)',fillStyle:'#000',x:0,y:0,text:''},triggers:{fontStyle:'fontX,bbox',fontVariant:'fontX,bbox',fontWeight:'fontX,bbox',fontSize:'fontX,bbox',fontFamily:'fontX,bbox',font:'font,bbox,canvas',textBaseline:'bbox',textAlign:'bbox',x:'bbox',y:'bbox',text:'bbox'},updaters:{fontX:'makeFontShorthand',font:'parseFontShorthand'}}},config:{preciseMeasurement:undefined},constructor:function(a){var b;if(a&&a.font){a=Ext.clone(a);for(b in a){if(b!=='font'&&b.indexOf('font')===0){delete a[b]}}}Ext.draw.sprite.Sprite.prototype.constructor.call(this,a)},fontValuesMap:{'italic':'fontStyle','oblique':'fontStyle','small-caps':'fontVariant','bold':'fontWeight','bolder':'fontWeight','lighter':'fontWeight',100:'fontWeight',200:'fontWeight',300:'fontWeight',400:'fontWeight',500:'fontWeight',600:'fontWeight',700:'fontWeight',800:'fontWeight',900:'fontWeight','xx-small':'fontSize','x-small':'fontSize','small':'fontSize','medium':'fontSize','large':'fontSize','x-large':'fontSize','xx-large':'fontSize'},makeFontShorthand:function(a){var b=[];if(a.fontStyle){b.push(a.fontStyle)}if(a.fontVariant){b.push(a.fontVariant)}if(a.fontWeight){b.push(a.fontWeight)}if(a.fontSize){b.push(a.fontSize)}if(a.fontFamily){b.push(a.fontFamily)}this.setAttributes({font:b.join(' ')},!0)},parseFontShorthand:function(i){var e=i.font,j=e.length,b={},h=this.fontValuesMap,c=0,d,f,a,g;while(c<j&&d!==-1){d=e.indexOf(' ',c);if(d<0){a=e.substr(c)}else {if(d>c){a=e.substr(c,d-c)}else {continue}}f=a.indexOf('/');if(f>0){a=a.substr(0,f)}else {if(f===0){continue}}if(a!=='normal'&&a!=='inherit'){g=h[a];if(g){b[g]=a}else {if(a.match(Ext.dom.Element.unitRe)){b.fontSize=a}else {b.fontFamily=e.substr(c);break}}}c=d+1}if(!b.fontStyle){b.fontStyle=''}if(!b.fontVariant){b.fontVariant=''}if(!b.fontWeight){b.fontWeight=''}this.setAttributes(b,!0)},fontProperties:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,fontFamily:!0},setAttributes:function(a,d,e){var b,c;if(a&&a.font){c={};for(b in a){if(!(b in this.fontProperties)){c[b]=a[b]}}a=c}this.callParent([a,d,e])},getBBox:function(d){var a=this,b=a.attr.bbox.plain,c=a.getSurface();if(b.dirty){a.updatePlainBBox(b);b.dirty=!1}if(c&&c.getInherited().rtl&&c.getFlipRtlText()){a.updatePlainBBox(b,!0)}return a.callParent([d])},rtlAlignments:{start:'end',center:'center',end:'start'},updatePlainBBox:function(l,u){var c=this,b=c.attr,h=b.x,n=b.y,m=[],w=b.font,x=b.text,v=b.textBaseline,o=b.textAlign,s=c.getPreciseMeasurement(),g,r;if(u&&c.oldSize){g=c.oldSize}else {r=Ext.draw.TextMeasurer.precise;if(Ext.isBoolean(s)){Ext.draw.TextMeasurer.precise=s}g=c.oldSize=Ext.draw.TextMeasurer.measureText(x,w);Ext.draw.TextMeasurer.precise=r}var j=c.getSurface(),k=j&&j.getInherited().rtl||!1,t=k&&j.getFlipRtlText(),f=g.sizes,i=g.height,d=g.width,q=f?f.length:0,e,p,a=0;switch(v){case 'hanging':case 'top':break;case 'ideographic':case 'bottom':n-=i;break;case 'alphabetic':n-=i*0.8;break;case 'middle':n-=i*0.5;break;}if(t){p=j.getRect();h=p[2]-p[0]-h;o=c.rtlAlignments[o]}switch(o){case 'start':if(k){for(;a<q;a++){e=f[a].width;m.push(-(d-e))}};break;case 'end':h-=d;if(k){break};for(;a<q;a++){e=f[a].width;m.push(d-e)};break;case 'center':h-=d*0.5;for(;a<q;a++){e=f[a].width;m.push((k?-1:1)*(d-e)*0.5)};break;}b.textAlignOffsets=m;l.x=h;l.y=n;l.width=d;l.height=i},setText:function(a){this.setAttributes({text:a},!0)},render:function(k,d,n){var g=this,b=g.attr,m=Ext.draw.Matrix.fly(b.matrix.elements.slice(0)),l=g.getBBox(!0),j=b.textAlignOffsets,i=Ext.util.Color.RGBA_NONE,f,h,a,c,e;if(b.text.length===0){return}c=b.text.split(g.lineBreakRe);e=l.height/c.length;f=b.bbox.plain.x;h=b.bbox.plain.y+e*0.78;m.toContext(d);if(k.getInherited().rtl){f+=b.bbox.plain.width}for(a=0;a<c.length;a++){if(d.fillStyle!==i){d.fillText(c[a],f+(j[a]||0),h+e*a)}if(d.strokeStyle!==i){d.strokeText(c[a],f+(j[a]||0),h+e*a)}}}}});Ext.define('Ext.draw.sprite.Tick',{extend:Ext.draw.sprite.Line,alias:'sprite.tick',inheritableStatics:{def:{processors:{x:'number',y:'number',size:'number'},defaults:{x:0,y:0,size:4},triggers:{x:'tick',y:'tick',size:'tick'},updaters:{tick:function(a){var c=a.size*1.5,b=a.lineWidth/2,d=a.x,e=a.y;this.setAttributes({fromX:d-b,fromY:e-c,toX:d-b,toY:e+c})}}}}});Ext.define('Ext.draw.sprite.Triangle',{extend:Ext.draw.sprite.Path,alias:'sprite.triangle',inheritableStatics:{def:{processors:{x:'number',y:'number',size:'number'},defaults:{x:0,y:0,size:4},triggers:{x:'path',y:'path',size:'path'}}},updatePath:function(c,b){var a=b.size*2.2,d=b.x,e=b.y;c.fromSvgString('M'.concat(d,',',e,'m0-',a*0.48,'l',a*0.5,',',a*0.87,'-',a,',0z'))}});Ext.define('Ext.draw.gradient.Linear',{extend:Ext.draw.gradient.Gradient,type:'linear',config:{degrees:0,radians:0},applyRadians:function(a,b){if(Ext.isNumber(a)){return a}return b},applyDegrees:function(a,b){if(Ext.isNumber(a)){return a}return b},updateRadians:function(a){this.setDegrees(Ext.draw.Draw.degrees(a))},updateDegrees:function(a){this.setRadians(Ext.draw.Draw.rad(a))},generateGradient:function(m,e){var g=this.getRadians(),k=Math.cos(g),l=Math.sin(g),d=e.width,a=e.height,i=e.x+d*0.5,j=e.y+a*0.5,h=this.getStops(),n=h.length,f,c,b;if(Ext.isNumber(i)&&Ext.isNumber(j)&&a>0&&d>0){c=Math.sqrt(a*a+d*d)*Math.abs(Math.cos(g-Math.atan(a/d)))/2;f=m.createLinearGradient(i+k*c,j+l*c,i-k*c,j-l*c);for(b=0;b<n;b++){f.addColorStop(h[b].offset,h[b].color)}return f}return Ext.util.Color.NONE}});Ext.define('Ext.draw.gradient.Radial',{extend:Ext.draw.gradient.Gradient,type:'radial',config:{start:{x:0,y:0,r:0},end:{x:0,y:0,r:1}},applyStart:function(a,c){var b;if(!c){return a}b={x:c.x,y:c.y,r:c.r};if('x' in a){b.x=a.x}else {if('centerX' in a){b.x=a.centerX}}if('y' in a){b.y=a.y}else {if('centerY' in a){b.y=a.centerY}}if('r' in a){b.r=a.r}else {if('radius' in a){b.r=a.radius}}return b},applyEnd:function(a,c){var b;if(!c){return a}b={x:c.x,y:c.y,r:c.r};if('x' in a){b.x=a.x}else {if('centerX' in a){b.x=a.centerX}}if('y' in a){b.y=a.y}else {if('centerY' in a){b.y=a.centerY}}if('r' in a){b.r=a.r}else {if('radius' in a){b.r=a.radius}}return b},generateGradient:function(k,d){var e=this.getStart(),g=this.getEnd(),c=d.width*0.5,a=d.height*0.5,i=d.x+c,j=d.y+a,h=k.createRadialGradient(i+e.x*c,j+e.y*a,e.r*Math.max(c,a),i+g.x*c,j+g.y*a,g.r*Math.max(c,a)),f=this.getStops(),l=f.length,b;for(b=0;b<l;b++){h.addColorStop(f[b].offset,f[b].color)}return h}});Ext.define('Ext.draw.Surface',{extend:Ext.draw.SurfaceBase,xtype:'surface',devicePixelRatio:window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,deprecated:{'5.1.0':{statics:{methods:{stableSort:function(a){return Ext.Array.sort(a,function(b,c){return b.attr.zIndex-c.attr.zIndex})}}}}},cls:Ext.baseCSSPrefix+'surface',config:{rect:null,background:null,items:[],dirty:!1,flipRtlText:!1},isSurface:!0,isPendingRenderFrame:!1,dirtyPredecessorCount:0,emptyRect:[0,0,0,0],constructor:function(b){var a=this;a.predecessors=[];a.successors=[];a.map={};a.callParent([b]);a.matrix=new Ext.draw.Matrix();a.inverseMatrix=a.matrix.inverse()},roundPixel:function(a){return Math.round(this.devicePixelRatio*a)/this.devicePixelRatio},waitFor:function(a){var b=this,c=b.predecessors;if(!Ext.Array.contains(c,a)){c.push(a);a.successors.push(b);if(a.getDirty()){b.dirtyPredecessorCount++}}},updateDirty:function(d){var c=this.successors,e=c.length,b=0,a;for(;b<e;b++){a=c[b];if(d){a.dirtyPredecessorCount++;a.setDirty(!0)}else {a.dirtyPredecessorCount--;if(a.dirtyPredecessorCount===0&&a.isPendingRenderFrame){a.renderFrame()}}}},applyBackground:function(a,b){this.setDirty(!0);if(Ext.isString(a)){a={fillStyle:a}}return Ext.factory(a,Ext.draw.sprite.Rect,b)},applyRect:function(a,b){if(b&&a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]){return b}if(Ext.isArray(a)){return [a[0],a[1],a[2],a[3]]}else {if(Ext.isObject(a)){return [a.x||a.left,a.y||a.top,a.width||a.right-a.left,a.height||a.bottom-a.top]}}},updateRect:function(a){var d=this,b=a[0],c=a[1],h=b+a[2],g=c+a[3],e=d.getBackground(),f=d.element;f.setLocalXY(Math.floor(b),Math.floor(c));f.setSize(Math.ceil(h-Math.floor(b)),Math.ceil(g-Math.floor(c)));if(e){e.setAttributes({x:0,y:0,width:Math.ceil(h-Math.floor(b)),height:Math.ceil(g-Math.floor(c))})}d.setDirty(!0)},resetTransform:function(){this.matrix.set(1,0,0,1,0,0);this.inverseMatrix.set(1,0,0,1,0,0);this.setDirty(!0)},get:function(a){return this.map[a]||this.getItems()[a]},add:function(){var d=this,h=Array.prototype.slice.call(arguments),j=Ext.isArray(h[0]),i=d.map,e=[],b,c,a,f,g,k;b=Ext.Array.clean(j?h[0]:h);if(!b.length){return e}for(g=0,k=b.length;g<k;g++){c=b[g];if(!c||c.destroyed){continue}a=null;if(c.isSprite&&!i[c.getId()]){a=c}else {if(!i[c.id]){a=this.createItem(c)}}if(a){i[a.getId()]=a;e.push(a);f=a.getSurface();if(f&&f.isSurface){f.remove(a)}a.setParent(d);a.setSurface(d);d.onAdd(a)}}b=d.getItems();if(b){b.push.apply(b,e)}d.dirtyZIndex=!0;d.setDirty(!0);if(!j&&e.length===1){return e[0]}else {return e}},onAdd:Ext.emptyFn,remove:function(a,f){var b=this,e=b.clearing,d,c;if(a){if(a.charAt){a=b.map[a]}if(!a||!a.isSprite){return null}d=a.id;c=b.map[d];delete b.map[d];if(a.destroyed||a.destroying){if(c&&!e){Ext.Array.remove(b.getItems(),a)}return a}if(!c){if(f){a.destroy()}return a}a.setParent(null);a.setSurface(null);if(f){a.destroy()}if(!e){Ext.Array.remove(b.getItems(),a);b.dirtyZIndex=!0;b.setDirty(!0)}}return a||null},removeAll:function(e){var a=this,d=a.getItems(),b,c;a.clearing=!!e;for(c=d.length-1;c>=0;c--){b=d[c];if(e){b.destroy()}else {b.setParent(null);b.setSurface(null)}}a.clearing=!1;d.length=0;a.map={};a.dirtyZIndex=!0;if(!a.destroying){a.setDirty(!0)}},applyItems:function(a){if(this.getItems()){this.removeAll(!0)}return Ext.Array.from(this.add(a))},createItem:function(a){return Ext.create(a.xclass||'sprite.'+a.type,a)},getBBox:function(b,j){var c=Infinity,g=-Infinity,d=Infinity,f=-Infinity,h,a,e,i;b=Ext.Array.from(b);for(e=0,i=b.length;e<i;e++){h=b[e];a=h.getBBox(j);if(c>a.x){c=a.x}if(g<a.x+a.width){g=a.x+a.width}if(d>a.y){d=a.y}if(f<a.y+a.height){f=a.y+a.height}}return {x:c,y:d,width:g-c,height:f-d}},getEventXY:function(i){var b=this,h=b.getInherited().rtl,c=i.getXY(),f=b.getOwnerBody(),e=f.getXY(),d=b.getRect()||b.emptyRect,a=[],g;if(h){g=f.getWidth();a[0]=e[0]-c[0]-d[0]+g}else {a[0]=c[0]-e[0]-d[0]}a[1]=c[1]-e[1]-d[1];return a},clear:Ext.emptyFn,orderByZIndex:function(){var e=this,b=e.getItems(),d=!1,a,c;if(e.getDirty()){for(a=0,c=b.length;a<c;a++){if(b[a].attr.dirtyZIndex){d=!0;break}}if(d){Ext.Array.sort(b,function(a,b){return a.attr.zIndex-b.attr.zIndex});this.setDirty(!0)}for(a=0,c=b.length;a<c;a++){b[a].attr.dirtyZIndex=!1}}},repaint:function(){var a=this;a.repaint=Ext.emptyFn;Ext.defer(function(){delete a.repaint;a.element.repaint()},1)},renderFrame:function(){var a=this,c,d,e,b,f;if(!(a.element&&a.getDirty()&&a.getRect())){return}if(a.dirtyPredecessorCount>0){a.isPendingRenderFrame=!0;return}c=a.getBackground();d=a.getItems();a.orderByZIndex();if(a.getDirty()){a.clear();a.clearTransform();if(c){a.renderSprite(c)}for(b=0,f=d.length;b<f;b++){e=d[b];if(a.renderSprite(e)===!1){return}e.attr.textPositionCount=a.textPosition}a.setDirty(!1)}},renderSprite:Ext.emptyFn,clearTransform:Ext.emptyFn,destroy:function(){var a=this;a.destroying=!0;a.removeAll(!0);a.destroying=!1;a.predecessors=a.successors=null;if(a.hasListeners.destroy){a.fireEvent('destroy',a)}a.callParent()}});Ext.define('Ext.draw.overrides.hittest.Surface',{override:'Ext.draw.Surface',hitTest:function(f,b){var g=this,e=g.getItems(),a,d,c;b=b||Ext.draw.sprite.Sprite.defaultHitTestOptions;for(a=e.length-1;a>=0;a--){d=e[a];if(d.hitTest){c=d.hitTest(f,b);if(c){return c}}}return null},hitTestEvent:function(b,a){var c=this.getEventXY(b);return this.hitTest(c,a)}});Ext.define('Ext.draw.engine.SvgContext',{toSave:['strokeOpacity','strokeStyle','fillOpacity','fillStyle','globalAlpha','lineWidth','lineCap','lineJoin','lineDash','lineDashOffset','miterLimit','shadowOffsetX','shadowOffsetY','shadowBlur','shadowColor','globalCompositeOperation','position','fillGradient','strokeGradient'],strokeOpacity:1,strokeStyle:'none',fillOpacity:1,fillStyle:'none',lineDas:[],lineDashOffset:0,globalAlpha:1,lineWidth:1,lineCap:'butt',lineJoin:'miter',miterLimit:10,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:'none',globalCompositeOperation:'src',urlStringRe:/^url\(#([\w-]+)\)$/,constructor:function(b){var a=this;a.surface=b;a.state=[];a.matrix=new Ext.draw.Matrix();a.path=null;a.clear()},clear:function(){this.group=this.surface.mainGroup;this.position=0;this.path=null},getElement:function(a){return this.surface.getSvgElement(this.group,a,this.position++)},save:function(){var d=this.toSave,c={},e=this.getElement('g'),a,b;for(b=0;b<d.length;b++){a=d[b];if(a in this){c[a]=this[a]}}this.position=0;c.matrix=this.matrix.clone();this.state.push(c);this.group=e;return e},restore:function(){var e=this.toSave,d=this.state.pop(),c=this.group,f=c.dom.childNodes,a,b;while(f.length>this.position){c.last().destroy()}for(b=0;b<e.length;b++){a=e[b];if(a in d){this[a]=d[a]}else {delete this[a]}}this.setTransform.apply(this,d.matrix.elements);this.group=c.getParent()},transform:function(d,f,e,g,b,c){var a;if(this.path){a=Ext.draw.Matrix.fly([d,f,e,g,b,c]).inverse();this.path.transform(a)}this.matrix.append(d,f,e,g,b,c)},setTransform:function(c,e,d,f,a,b){if(this.path){this.path.transform(this.matrix)}this.matrix.reset();this.transform(c,e,d,f,a,b)},scale:function(a,b){this.transform(a,0,0,b,0,0)},rotate:function(a){var b=Math.cos(a),d=Math.sin(a),c=-Math.sin(a),e=Math.cos(a);this.transform(b,d,c,e,0,0)},translate:function(a,b){this.transform(1,0,0,1,a,b)},setGradientBBox:function(a){this.bbox=a},beginPath:function(){this.path=new Ext.draw.Path()},moveTo:function(a,b){if(!this.path){this.beginPath()}this.path.moveTo(a,b);this.path.element=null},lineTo:function(a,b){if(!this.path){this.beginPath()}this.path.lineTo(a,b);this.path.element=null},rect:function(a,b,d,c){this.moveTo(a,b);this.lineTo(a+d,b);this.lineTo(a+d,b+c);this.lineTo(a,b+c);this.closePath()},strokeRect:function(c,d,b,a){this.beginPath();this.rect(c,d,b,a);this.stroke()},fillRect:function(c,d,b,a){this.beginPath();this.rect(c,d,b,a);this.fill()},closePath:function(){if(!this.path){this.beginPath()}this.path.closePath();this.path.element=null},arcSvg:function(d,e,a,b,c,f,g){if(!this.path){this.beginPath()}this.path.arcSvg(d,e,a,b,c,f,g);this.path.element=null},arc:function(e,f,d,b,c,a){if(!this.path){this.beginPath()}this.path.arc(e,f,d,b,c,a);this.path.element=null},ellipse:function(g,h,e,f,d,b,c,a){if(!this.path){this.beginPath()}this.path.ellipse(g,h,e,f,d,b,c,a);this.path.element=null},arcTo:function(d,f,e,g,b,c,a){if(!this.path){this.beginPath()}this.path.arcTo(d,f,e,g,b,c,a);this.path.element=null},bezierCurveTo:function(a,d,b,e,c,f){if(!this.path){this.beginPath()}this.path.bezierCurveTo(a,d,b,e,c,f);this.path.element=null},strokeText:function(c,d,e){var b,a;c=String(c);if(this.strokeStyle){b=this.getElement('text');a=this.surface.getSvgElement(b,'tspan',0);this.surface.setElementAttributes(b,{'x':d,'y':e,'transform':this.matrix.toSvg(),'stroke':this.strokeStyle,'fill':'none','opacity':this.globalAlpha,'stroke-opacity':this.strokeOpacity,'style':'font: '+this.font,'stroke-dasharray':this.lineDash.join(','),'stroke-dashoffset':this.lineDashOffset});if(this.lineDash.length){this.surface.setElementAttributes(b,{'stroke-dasharray':this.lineDash.join(','),'stroke-dashoffset':this.lineDashOffset})}if(a.dom.firstChild){a.dom.removeChild(a.dom.firstChild)}this.surface.setElementAttributes(a,{'alignment-baseline':'alphabetic'});a.dom.appendChild(document.createTextNode(Ext.String.htmlDecode(c)))}},fillText:function(c,d,e){var b,a;c=String(c);if(this.fillStyle){b=this.getElement('text');a=this.surface.getSvgElement(b,'tspan',0);this.surface.setElementAttributes(b,{'x':d,'y':e,'transform':this.matrix.toSvg(),'fill':this.fillStyle,'opacity':this.globalAlpha,'fill-opacity':this.fillOpacity,'style':'font: '+this.font});if(a.dom.firstChild){a.dom.removeChild(a.dom.firstChild)}this.surface.setElementAttributes(a,{'alignment-baseline':'alphabetic'});a.dom.appendChild(document.createTextNode(Ext.String.htmlDecode(c)))}},drawImage:function(b,j,k,d,c,o,p,n,i){var a=this,e=a.getElement('image'),l=j,m=k,h=typeof d==='undefined'?b.width:d,g=typeof c==='undefined'?b.height:c,f=null;if(typeof i!=='undefined'){f=j+' '+k+' '+d+' '+c;l=o;m=p;h=n;g=i}e.dom.setAttributeNS('http:/'+'/www.w3.org/1999/xlink','href',b.src);a.surface.setElementAttributes(e,{viewBox:f,x:l,y:m,width:h,height:g,opacity:a.globalAlpha,transform:a.matrix.toSvg()})},fill:function(){var a=this,f,c,b,d,e;if(!a.path){return}if(a.fillStyle){c=a.fillGradient;b=a.path.element;d=a.bbox;if(!b){f=a.path.toString();b=a.path.element=a.getElement('path');a.surface.setElementAttributes(b,{'d':f,'transform':a.matrix.toSvg()})}if(c&&d){e=c.generateGradient(a,d)}else {e=a.fillStyle}a.surface.setElementAttributes(b,{'fill':e,'fill-opacity':a.fillOpacity*a.globalAlpha})}},stroke:function(){var a=this,f,c,b,e,d;if(!a.path){return}if(a.strokeStyle){c=a.strokeGradient;b=a.path.element;e=a.bbox;if(!b||!a.path.svgString){f=a.path.toString();if(!f){return}b=a.path.element=a.getElement('path');a.surface.setElementAttributes(b,{'fill':'none','d':f,'transform':a.matrix.toSvg()})}if(c&&e){d=c.generateGradient(a,e)}else {d=a.strokeStyle}a.surface.setElementAttributes(b,{'stroke':d,'stroke-linecap':a.lineCap,'stroke-linejoin':a.lineJoin,'stroke-width':a.lineWidth,'stroke-opacity':a.strokeOpacity*a.globalAlpha,'stroke-dasharray':a.lineDash.join(','),'stroke-dashoffset':a.lineDashOffset});if(a.lineDash.length){a.surface.setElementAttributes(b,{'stroke-dasharray':a.lineDash.join(','),'stroke-dashoffset':a.lineDashOffset})}}},fillStroke:function(c,b){var a=this,g=a.fillStyle,f=a.strokeStyle,e=a.fillOpacity,d=a.strokeOpacity;if(b===undefined){b=c.transformFillStroke}if(!b){c.inverseMatrix.toContext(a)}if(g&&e!==0){a.fill()}if(f&&d!==0){a.stroke()}},appendPath:function(a){this.path=a.clone()},setLineDash:function(a){this.lineDash=a},getLineDash:function(){return this.lineDash},createLinearGradient:function(d,f,e,g){var a=this,c=a.surface.getNextDef('linearGradient'),b;a.surface.setElementAttributes(c,{'x1':d,'y1':f,'x2':e,'y2':g,'gradientUnits':'userSpaceOnUse'});b=new Ext.draw.engine.SvgContext.Gradient(a,a.surface,c);return b},createRadialGradient:function(f,h,e,g,i,d){var a=this,c=a.surface.getNextDef('radialGradient'),b;a.surface.setElementAttributes(c,{fx:f,fy:h,cx:g,cy:i,r:d,gradientUnits:'userSpaceOnUse'});b=new Ext.draw.engine.SvgContext.Gradient(a,a.surface,c,e/d);return b}});Ext.define('Ext.draw.engine.SvgContext.Gradient',{isGradient:!0,constructor:function(e,d,c,b){var a=this;a.ctx=e;a.surface=d;a.element=c;a.position=0;a.compression=b||0},addColorStop:function(d,c){var a=this,e=a.surface.getSvgElement(a.element,'stop',a.position++),b=a.compression;a.surface.setElementAttributes(e,{'offset':(((1-b)*d+b)*100).toFixed(2)+'%','stop-color':c,'stop-opacity':Ext.util.Color.fly(c).a.toFixed(15)})},toString:function(){var a=this.element.dom.childNodes;while(a.length>this.position){Ext.fly(a[a.length-1]).destroy()}return 'url(#'+this.element.getId()+')'}});Ext.define('Ext.draw.engine.Svg',{extend:Ext.draw.Surface,isSVG:!0,config:{highPrecision:!1},getElementConfig:function(){return {reference:'element',style:{position:'absolute'},children:[{reference:'bodyElement',style:{width:'100%',height:'100%',position:'relative'},children:[{tag:'svg',reference:'svgElement',namespace:'http://www.w3.org/2000/svg',width:'100%',height:'100%',version:1.1}]}]}},constructor:function(b){var a=this;a.callParent([b]);a.mainGroup=a.createSvgNode('g');a.defsElement=a.createSvgNode('defs');a.svgElement.appendChild(a.mainGroup);a.svgElement.appendChild(a.defsElement);a.ctx=new Ext.draw.engine.SvgContext(a)},createSvgNode:function(b){var a=document.createElementNS('http://www.w3.org/2000/svg',b);return Ext.get(a)},getSvgElement:function(e,f,b){var c=e.dom.childNodes,d=c.length,a;if(b<d){a=c[b];if(a.tagName===f){return Ext.get(a)}else {Ext.destroy(a)}}else {if(b>d){Ext.raise('Invalid position.')}}a=Ext.get(this.createSvgNode(f));if(b===0){e.insertFirst(a)}else {a.insertAfter(Ext.fly(c[b-1]))}a.cache={};return a},setElementAttributes:function(d,c){var f=d.dom,e=d.cache,a,b;for(a in c){b=c[a];if(e[a]!==b){e[a]=b;f.setAttribute(a,b)}}},getNextDef:function(a){return this.getSvgElement(this.defsElement,a,this.defsPosition++)},clearTransform:function(){var a=this;a.mainGroup.set({transform:a.matrix.toSvg()})},clear:function(){this.ctx.clear();this.removeSurplusDefs();this.defsPosition=0},removeSurplusDefs:function(){var b=this.defsElement,c=b.dom.childNodes,d=c.length,a;for(a=d-1;a>this.defsPosition;a--){b.removeChild(c[a])}},renderSprite:function(a){var d=this,c=d.getRect(),b=d.ctx;if(a.attr.hidden||a.attr.globalAlpha===0){b.save();b.restore();return}a.element=b.save();a.preRender(this);a.useAttributes(b,c);if(!1===a.render(this,b,[0,0,c[2],c[3]])){return !1}a.setDirty(!1);b.restore()},toSVG:function(f,e){var g=Ext.getClassName(this),a,b,d,c;a='<svg version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg"'+' width="'+f.width+'"'+' height="'+f.height+'">';for(c=0;c<e.length;c++){b=e[c];if(Ext.getClassName(b)!==g){continue}d=b.getRect();a+='<g transform="translate('+d[0]+','+d[1]+')">';a+=this.serializeNode(b.svgElement.dom);a+='</g>'}a+='</svg>';return a},b64EncodeUnicode:function(a){return btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(c,b){return String.fromCharCode('0x'+b)}))},flatten:function(c,b){var a='<?xml version="1.0" standalone="yes"?>';a+=this.toSVG(c,b);return {data:'data:image/svg+xml;base64,'+this.b64EncodeUnicode(a),type:'svg'}},serializeNode:function(a){var c='',b,d,e,f;if(a.nodeType===document.TEXT_NODE){return a.nodeValue}c+='<'+a.nodeName;if(a.attributes.length){for(b=0,d=a.attributes.length;b<d;b++){e=a.attributes[b];c+=' '+e.name+'="'+Ext.String.htmlEncode(e.value)+'"'}}c+='>';if(a.childNodes&&a.childNodes.length){for(b=0,d=a.childNodes.length;b<d;b++){f=a.childNodes[b];c+=this.serializeNode(f)}}c+='</'+a.nodeName+'>';return c},destroy:function(){var a=this;a.ctx.destroy();a.mainGroup.destroy();a.defsElement.destroy();delete a.mainGroup;delete a.defsElement;delete a.ctx;a.callParent()},remove:function(a,b){if(a&&a.element){a.element.destroy();a.element=null}this.callParent(arguments)}});if(!Ext.draw){Ext.draw={}}if(!Ext.draw.engine){Ext.draw.engine={}}Ext.draw.engine.excanvas=!0;if(!document.createElement('canvas').getContext){(function(){var f=Math;var b=f.round;var n=f.sin;var m=f.cos;var t=f.abs;var s=f.sqrt;var c=10;var e=c/2;var u=+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1];function getContext(){return this.context_||(this.context_=new CanvasRenderingContext2D_(this))}var p=Array.prototype.slice;function bind(c,a,d){var b=p.call(arguments,2);return function(){return c.apply(a,b.concat(p.call(arguments)))}}function encodeHtmlAttribute(a){return String(a).replace(/&/g,'&amp;').replace(/"/g,'&quot;')}function addNamespace(b,a,c){Ext.onReady(function(){if(!b.namespaces[a]){b.namespaces.add(a,c,'#default#VML')}})}function addNamespacesAndStylesheet(a){addNamespace(a,'g_vml_','urn:schemas-microsoft-com:vml');addNamespace(a,'g_o_','urn:schemas-microsoft-com:office:office');if(!a.styleSheets['ex_canvas_']){var b=a.createStyleSheet();b.owningElement.id='ex_canvas_';b.cssText='canvas{display:inline-block;overflow:hidden;'+'text-align:left;width:300px;height:150px}'}}addNamespacesAndStylesheet(document);var o={init:function(b){var a=b||document;a.createElement('canvas');a.attachEvent('onreadystatechange',bind(this.init_,this,a))},init_:function(c){var b=c.getElementsByTagName('canvas');for(var a=0;a<b.length;a++){this.initElement(b[a])}},initElement:function(a){if(!a.getContext){a.getContext=getContext;addNamespacesAndStylesheet(a.ownerDocument);a.innerHTML='';a.attachEvent('onpropertychange',onPropertyChange);a.attachEvent('onresize',onResize);var b=a.attributes;if(b.width&&b.width.specified){a.style.width=b.width.nodeValue+'px'}else {a.width=a.clientWidth}if(b.height&&b.height.specified){a.style.height=b.height.nodeValue+'px'}else {a.height=a.clientHeight}}return a}};function onPropertyChange(b){var a=b.srcElement;switch(b.propertyName){case 'width':a.getContext().clearRect();a.style.width=a.attributes.width.nodeValue+'px';a.firstChild.style.width=a.clientWidth+'px';break;case 'height':a.getContext().clearRect();a.style.height=a.attributes.height.nodeValue+'px';a.firstChild.style.height=a.clientHeight+'px';break;}}function onResize(b){var a=b.srcElement;if(a.firstChild){a.firstChild.style.width=a.clientWidth+'px';a.firstChild.style.height=a.clientHeight+'px'}}o.init();var h=[];for(var i=0;i<16;i++){for(var j=0;j<16;j++){h[i*16+j]=i.toString(16)+j.toString(16)}}function createMatrixIdentity(){return [[1,0,0],[0,1,0],[0,0,1]]}function matrixMultiply(f,g){var d=createMatrixIdentity();for(var a=0;a<3;a++){for(var b=0;b<3;b++){var e=0;for(var c=0;c<3;c++){e+=f[a][c]*g[c][b]}d[a][b]=e}}return d}function copyState(a,b){b.fillStyle=a.fillStyle;b.lineCap=a.lineCap;b.lineJoin=a.lineJoin;b.lineDash=a.lineDash;b.lineWidth=a.lineWidth;b.miterLimit=a.miterLimit;b.shadowBlur=a.shadowBlur;b.shadowColor=a.shadowColor;b.shadowOffsetX=a.shadowOffsetX;b.shadowOffsetY=a.shadowOffsetY;b.strokeStyle=a.strokeStyle;b.globalAlpha=a.globalAlpha;b.font=a.font;b.textAlign=a.textAlign;b.textBaseline=a.textBaseline;b.arcScaleX_=a.arcScaleX_;b.arcScaleY_=a.arcScaleY_;b.lineScale_=a.lineScale_}var r={aliceblue:'#F0F8FF',antiquewhite:'#FAEBD7',aquamarine:'#7FFFD4',azure:'#F0FFFF',beige:'#F5F5DC',bisque:'#FFE4C4',black:'#000000',blanchedalmond:'#FFEBCD',blueviolet:'#8A2BE2',brown:'#A52A2A',burlywood:'#DEB887',cadetblue:'#5F9EA0',chartreuse:'#7FFF00',chocolate:'#D2691E',coral:'#FF7F50',cornflowerblue:'#6495ED',cornsilk:'#FFF8DC',crimson:'#DC143C',cyan:'#00FFFF',darkblue:'#00008B',darkcyan:'#008B8B',darkgoldenrod:'#B8860B',darkgray:'#A9A9A9',darkgreen:'#006400',darkgrey:'#A9A9A9',darkkhaki:'#BDB76B',darkmagenta:'#8B008B',darkolivegreen:'#556B2F',darkorange:'#FF8C00',darkorchid:'#9932CC',darkred:'#8B0000',darksalmon:'#E9967A',darkseagreen:'#8FBC8F',darkslateblue:'#483D8B',darkslategray:'#2F4F4F',darkslategrey:'#2F4F4F',darkturquoise:'#00CED1',darkviolet:'#9400D3',deeppink:'#FF1493',deepskyblue:'#00BFFF',dimgray:'#696969',dimgrey:'#696969',dodgerblue:'#1E90FF',firebrick:'#B22222',floralwhite:'#FFFAF0',forestgreen:'#228B22',gainsboro:'#DCDCDC',ghostwhite:'#F8F8FF',gold:'#FFD700',goldenrod:'#DAA520',grey:'#808080',greenyellow:'#ADFF2F',honeydew:'#F0FFF0',hotpink:'#FF69B4',indianred:'#CD5C5C',indigo:'#4B0082',ivory:'#FFFFF0',khaki:'#F0E68C',lavender:'#E6E6FA',lavenderblush:'#FFF0F5',lawngreen:'#7CFC00',lemonchiffon:'#FFFACD',lightblue:'#ADD8E6',lightcoral:'#F08080',lightcyan:'#E0FFFF',lightgoldenrodyellow:'#FAFAD2',lightgreen:'#90EE90',lightgrey:'#D3D3D3',lightpink:'#FFB6C1',lightsalmon:'#FFA07A',lightseagreen:'#20B2AA',lightskyblue:'#87CEFA',lightslategray:'#778899',lightslategrey:'#778899',lightsteelblue:'#B0C4DE',lightyellow:'#FFFFE0',limegreen:'#32CD32',linen:'#FAF0E6',magenta:'#FF00FF',mediumaquamarine:'#66CDAA',mediumblue:'#0000CD',mediumorchid:'#BA55D3',mediumpurple:'#9370DB',mediumseagreen:'#3CB371',mediumslateblue:'#7B68EE',mediumspringgreen:'#00FA9A',mediumturquoise:'#48D1CC',mediumvioletred:'#C71585',midnightblue:'#191970',mintcream:'#F5FFFA',mistyrose:'#FFE4E1',moccasin:'#FFE4B5',navajowhite:'#FFDEAD',oldlace:'#FDF5E6',olivedrab:'#6B8E23',orange:'#FFA500',orangered:'#FF4500',orchid:'#DA70D6',palegoldenrod:'#EEE8AA',palegreen:'#98FB98',paleturquoise:'#AFEEEE',palevioletred:'#DB7093',papayawhip:'#FFEFD5',peachpuff:'#FFDAB9',peru:'#CD853F',pink:'#FFC0CB',plum:'#DDA0DD',powderblue:'#B0E0E6',rosybrown:'#BC8F8F',royalblue:'#4169E1',saddlebrown:'#8B4513',salmon:'#FA8072',sandybrown:'#F4A460',seagreen:'#2E8B57',seashell:'#FFF5EE',sienna:'#A0522D',skyblue:'#87CEEB',slateblue:'#6A5ACD',slategray:'#708090',slategrey:'#708090',snow:'#FFFAFA',springgreen:'#00FF7F',steelblue:'#4682B4',tan:'#D2B48C',thistle:'#D8BFD8',tomato:'#FF6347',turquoise:'#40E0D0',violet:'#EE82EE',wheat:'#F5DEB3',whitesmoke:'#F5F5F5',yellowgreen:'#9ACD32'};function getRgbHslContent(a){var c=a.indexOf('(',3);var d=a.indexOf(')',c+1);var b=a.substring(c+1,d).split(',');if(b.length!=4||a.charAt(3)!='a'){b[3]=1}return b}function percent(a){return parseFloat(a)/100}function clamp(c,b,a){return Math.min(a,Math.max(b,c))}function hslToRgb(e){var j,g,f,b,c,a;b=parseFloat(e[0])/360%360;if(b<0){b++}c=clamp(percent(e[1]),0,1);a=clamp(percent(e[2]),0,1);if(c==0){j=g=f=a}else {var d=a<0.5?a*(1+c):a+c-a*c;var i=2*a-d;j=hueToRgb(i,d,b+1/3);g=hueToRgb(i,d,b);f=hueToRgb(i,d,b-1/3)}return '#'+h[Math.floor(j*255)]+h[Math.floor(g*255)]+h[Math.floor(f*255)]}function hueToRgb(b,c,a){if(a<0){a++}if(a>1){a--}if(6*a<1){return b+(c-b)*6*a}else {if(2*a<1){return c}else {if(3*a<2){return b+(c-b)*(2/3-a)*6}else {return b}}}}var k={};function processStyle(a){if(a in k){return k[a]}var c,e=1;a=String(a);if(a.charAt(0)=='#'){c=a}else {if(/^rgb/.test(a)){var b=getRgbHslContent(a);var c='#',f;for(var d=0;d<3;d++){if(b[d].indexOf('%')!=-1){f=Math.floor(percent(b[d])*255)}else {f=+b[d]}c+=h[clamp(f,0,255)]}e=+b[3]}else {if(/^hsl/.test(a)){var b=getRgbHslContent(a);c=hslToRgb(b);e=b[3]}else {c=r[a]||a}}}return k[a]={color:c,alpha:e}}var g={style:'normal',variant:'normal',weight:'normal',size:10,family:'sans-serif'};var l={};function processFontStyle(b){if(l[b]){return l[b]}var c=document.createElement('div');var a=c.style;try{a.font=b}catch(v){}return l[b]={style:a.fontStyle||g.style,variant:a.fontVariant||g.variant,weight:a.fontWeight||g.weight,size:a.fontSize||g.size,family:a.fontFamily||g.family}}function getComputedStyle(b,f){var a={};for(var e in b){a[e]=b[e]}var d=parseFloat(f.currentStyle.fontSize),c=parseFloat(b.size);if(typeof b.size=='number'){a.size=b.size}else {if(b.size.indexOf('px')!=-1){a.size=c}else {if(b.size.indexOf('em')!=-1){a.size=d*c}else {if(b.size.indexOf('%')!=-1){a.size=d/100*c}else {if(b.size.indexOf('pt')!=-1){a.size=c/0.75}else {a.size=d}}}}}a.size*=0.981;return a}function buildStyle(a){return a.style+' '+a.variant+' '+a.weight+' '+a.size+'px '+a.family}var q={'butt':'flat','round':'round'};function processLineCap(a){return q[a]||'square'}function CanvasRenderingContext2D_(a){this.m_=createMatrixIdentity();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle='#000';this.fillStyle='#000';this.lineWidth=1;this.lineJoin='miter';this.lineDash=[];this.lineCap='butt';this.miterLimit=c*1;this.globalAlpha=1;this.font='10px sans-serif';this.textAlign='left';this.textBaseline='alphabetic';this.canvas=a;var e='width:'+a.clientWidth+'px;height:'+a.clientHeight+'px;overflow:hidden;position:absolute';var b=a.ownerDocument.createElement('div');b.style.cssText=e;a.appendChild(b);var d=b.cloneNode(!1);d.style.backgroundColor='red';d.style.filter='alpha(opacity=0)';a.appendChild(d);this.element_=b;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var a=CanvasRenderingContext2D_.prototype;a.clearRect=function(){if(this.textMeasureEl_){this.textMeasureEl_.removeNode(!0);this.textMeasureEl_=null}this.element_.innerHTML=''};a.beginPath=function(){this.currentPath_=[]};a.moveTo=function(b,c){var a=getCoords(this,b,c);this.currentPath_.push({type:'moveTo',x:a.x,y:a.y});this.currentX_=a.x;this.currentY_=a.y};a.lineTo=function(b,c){var a=getCoords(this,b,c);this.currentPath_.push({type:'lineTo',x:a.x,y:a.y});this.currentX_=a.x;this.currentY_=a.y};a.bezierCurveTo=function(a,b,c,d,g,h){var i=getCoords(this,g,h);var e=getCoords(this,a,b);var f=getCoords(this,c,d);bezierCurveTo(this,e,f,i)};function bezierCurveTo(b,c,d,a){b.currentPath_.push({type:'bezierCurveTo',cp1x:c.x,cp1y:c.y,cp2x:d.x,cp2y:d.y,x:a.x,y:a.y});b.currentX_=a.x;b.currentY_=a.y}a.quadraticCurveTo=function(d,e,g,h){var c=getCoords(this,d,e);var b=getCoords(this,g,h);var a={x:this.currentX_+2/3*(c.x-this.currentX_),y:this.currentY_+2/3*(c.y-this.currentY_)};var f={x:a.x+(b.x-this.currentX_)/3,y:a.y+(b.y-this.currentY_)/3};bezierCurveTo(this,a,f,b)};a.arc=function(d,f,a,g,i,h){a*=c;var p=h?'at':'wa';var b=d+m(g)*a-e;var q=f+n(g)*a-e;var l=d+m(i)*a-e;var r=f+n(i)*a-e;if(b==l&&!h){b+=0.125}var o=getCoords(this,d,f);var j=getCoords(this,b,q);var k=getCoords(this,l,r);this.currentPath_.push({type:p,x:o.x,y:o.y,radius:a,xStart:j.x,yStart:j.y,xEnd:k.x,yEnd:k.y})};a.rect=function(a,b,d,c){this.moveTo(a,b);this.lineTo(a+d,b);this.lineTo(a+d,b+c);this.lineTo(a,b+c);this.closePath()};a.strokeRect=function(a,b,d,c){var e=this.currentPath_;this.beginPath();this.moveTo(a,b);this.lineTo(a+d,b);this.lineTo(a+d,b+c);this.lineTo(a,b+c);this.closePath();this.stroke();this.currentPath_=e};a.fillRect=function(a,b,d,c){var e=this.currentPath_;this.beginPath();this.moveTo(a,b);this.lineTo(a+d,b);this.lineTo(a+d,b+c);this.lineTo(a,b+c);this.closePath();this.fill();this.currentPath_=e};a.createLinearGradient=function(b,d,c,e){var a=new CanvasGradient_('gradient');a.x0_=b;a.y0_=d;a.x1_=c;a.y1_=e;return a};a.createRadialGradient=function(d,f,b,e,g,c){var a=new CanvasGradient_('gradientradial');a.x0_=d;a.y0_=f;a.r0_=b;a.x1_=e;a.y1_=g;a.r1_=c;return a};a.drawImage=function(a,u){var j,k,i,h,d,e,m,l;var t=a.runtimeStyle.width;var s=a.runtimeStyle.height;a.runtimeStyle.width='auto';a.runtimeStyle.height='auto';var g=a.width;var f=a.height;a.runtimeStyle.width=t;a.runtimeStyle.height=s;if(arguments.length==3){j=arguments[1];k=arguments[2];d=e=0;m=i=g;l=h=f}else {if(arguments.length==5){j=arguments[1];k=arguments[2];i=arguments[3];h=arguments[4];d=e=0;m=g;l=f}else {if(arguments.length==9){d=arguments[1];e=arguments[2];m=arguments[3];l=arguments[4];j=arguments[5];k=arguments[6];i=arguments[7];h=arguments[8]}else {throw Error('Invalid number of arguments')}}}var r=getCoords(this,j,k);var o=[];var q=10;var p=10;var n=this.m_;o.push(' <g_vml_:group',' coordsize="',c*q,',',c*p,'"',' coordorigin="0,0"',' style="width:',b(q*n[0][0]),'px;height:',b(p*n[1][1]),'px;position:absolute;','top:',b(r.y/c),'px;left:',b(r.x/c),'px; rotation:',b(Math.atan(n[0][1]/n[1][1])*180/Math.PI),';');o.push('" >','<g_vml_:image src="',a.src,'"',' style="width:',c*i,'px;',' height:',c*h,'px"',' cropleft="',d/g,'"',' croptop="',e/f,'"',' cropright="',(g-d-m)/g,'"',' cropbottom="',(f-e-l)/f,'"',' />','</g_vml_:group>');this.element_.insertAdjacentHTML('BeforeEnd',o.join(''))};a.setLineDash=function(a){if(a.length===1){a=a.slice();a[1]=a[0]}this.lineDash=a};a.getLineDash=function(){return this.lineDash};a.stroke=function(g){var d=[];var j=10;var i=10;d.push('<g_vml_:shape',' filled="',!!g,'"',' style="position:absolute;width:',j,'px;height:',i,'px;left:0px;top:0px;"',' coordorigin="0,0"',' coordsize="',c*j,',',c*i,'"',' stroked="',!g,'"',' path="');var f={x:null,y:null};var e={x:null,y:null};for(var h=0;h<this.currentPath_.length;h++){var a=this.currentPath_[h];var k;switch(a.type){case 'moveTo':k=a;d.push(' m ',b(a.x),',',b(a.y));break;case 'lineTo':d.push(' l ',b(a.x),',',b(a.y));break;case 'close':d.push(' x ');a=null;break;case 'bezierCurveTo':d.push(' c ',b(a.cp1x),',',b(a.cp1y),',',b(a.cp2x),',',b(a.cp2y),',',b(a.x),',',b(a.y));break;case 'at':case 'wa':d.push(' ',a.type,' ',b(a.x-this.arcScaleX_*a.radius),',',b(a.y-this.arcScaleY_*a.radius),' ',b(a.x+this.arcScaleX_*a.radius),',',b(a.y+this.arcScaleY_*a.radius),' ',b(a.xStart),',',b(a.yStart),' ',b(a.xEnd),',',b(a.yEnd));break;}if(a){if(f.x==null||a.x<f.x){f.x=a.x}if(e.x==null||a.x>e.x){e.x=a.x}if(f.y==null||a.y<f.y){f.y=a.y}if(e.y==null||a.y>e.y){e.y=a.y}}}d.push(' ">');if(!g){appendStroke(this,d)}else {appendFill(this,d,f,e)}d.push('</g_vml_:shape>');this.element_.insertAdjacentHTML('beforeEnd',d.join(''))};function appendStroke(a,e){var d=processStyle(a.strokeStyle);var f=d.color;var c=d.alpha*a.globalAlpha;var b=a.lineScale_*a.lineWidth;if(b<1){c*=b}e.push('<g_vml_:stroke',' opacity="',c,'"',' joinstyle="',a.lineJoin,'"',' dashstyle="',a.lineDash.join(' '),'"',' miterlimit="',a.miterLimit,'"',' endcap="',processLineCap(a.lineCap),'"',' weight="',b,'px"',' color="',f,'" />')}function appendFill(b,m,g,v){var a=b.fillStyle;var h=b.arcScaleX_;var i=b.arcScaleY_;var k=v.x-g.x;var j=v.y-g.y;if(a instanceof CanvasGradient_){var e=0;var o={x:0,y:0};var p=0;var s=1;if(a.type_=='gradient'){var I=a.x0_/h;var K=a.y0_/i;var J=a.x1_/h;var L=a.y1_/i;var l=getCoords(b,I,K);var w=getCoords(b,J,L);var G=w.x-l.x;var H=w.y-l.y;e=Math.atan2(G,H)*180/Math.PI;if(e<0){e+=360}if(e<1.0E-6){e=0}}else {var l=getCoords(b,a.x0_,a.y0_);o={x:(l.x-g.x)/k,y:(l.y-g.y)/j};k/=h*c;j/=i*c;var r=f.max(k,j);p=2*a.r0_/r;s=2*a.r1_/r-p}var d=a.colors_;d.sort(function(a,c){return a.offset-c.offset});var n=d.length;var D=d[0].color;var E=d[n-1].color;var A=d[0].alpha*b.globalAlpha;var B=d[n-1].alpha*b.globalAlpha;var t=[];for(var q=0;q<n;q++){var u=d[q];t.push(u.offset*s+p+' '+u.color)}m.push('<g_vml_:fill type="',a.type_,'"',' method="none" focus="100%"',' color="',D,'"',' color2="',E,'"',' colors="',t.join(','),'"',' opacity="',B,'"',' g_o_:opacity2="',A,'"',' angle="',e,'"',' focusposition="',o.x,',',o.y,'" />')}else {if(a instanceof CanvasPattern_){if(k&&j){var y=-g.x;var z=-g.y;m.push('<g_vml_:fill',' position="',y/k*h*h,',',z/j*i*i,'"',' type="tile"',' src="',a.src_,'" />')}}else {var x=processStyle(b.fillStyle);var F=x.color;var C=x.alpha*b.globalAlpha;m.push('<g_vml_:fill color="',F,'" opacity="',C,'" />')}}}a.fill=function(){this.$stroke(!0)};a.closePath=function(){this.currentPath_.push({type:'close'})};function getCoords(f,b,d){var a=f.m_;return {x:c*(b*a[0][0]+d*a[1][0]+a[2][0])-e,y:c*(b*a[0][1]+d*a[1][1]+a[2][1])-e}}a.save=function(){var a={};copyState(this,a);this.aStack_.push(a);this.mStack_.push(this.m_)};a.restore=function(){if(this.aStack_.length){copyState(this.aStack_.pop(),this);this.m_=this.mStack_.pop()}};function matrixIsFinite(a){return isFinite(a[0][0])&&isFinite(a[0][1])&&isFinite(a[1][0])&&isFinite(a[1][1])&&isFinite(a[2][0])&&isFinite(a[2][1])}function setM(b,a,c){if(!matrixIsFinite(a)){return}b.m_=a;if(c){var d=a[0][0]*a[1][1]-a[0][1]*a[1][0];b.lineScale_=s(t(d))}}a.translate=function(a,b){var c=[[1,0,0],[0,1,0],[a,b,1]];setM(this,matrixMultiply(c,this.m_),!1)};a.rotate=function(a){var b=m(a);var c=n(a);var d=[[b,c,0],[-c,b,0],[0,0,1]];setM(this,matrixMultiply(d,this.m_),!1)};a.scale=function(a,b){this.arcScaleX_*=a;this.arcScaleY_*=b;var c=[[a,0,0],[0,b,0],[0,0,1]];setM(this,matrixMultiply(c,this.m_),!0)};a.transform=function(a,b,c,d,e,f){var g=[[a,b,0],[c,d,0],[e,f,1]];setM(this,matrixMultiply(g,this.m_),!0)};a.setTransform=function(a,b,c,d,e,f){var g=[[a,b,0],[c,d,0],[e,f,1]];setM(this,g,!0)};a.drawText_=function(q,r,s,t,j){var i=this.m_,k=1000,e=0,h=k,g={x:0,y:0},d=[];var f=getComputedStyle(processFontStyle(this.font),this.element_);var n=buildStyle(f);var l=this.element_.currentStyle;var a=this.textAlign.toLowerCase();switch(a){case 'left':case 'center':case 'right':break;case 'end':a=l.direction=='ltr'?'right':'left';break;case 'start':a=l.direction=='rtl'?'right':'left';break;default:a='left';}switch(this.textBaseline){case 'hanging':case 'top':g.y=f.size/1.75;break;case 'middle':break;default:case null:case 'alphabetic':case 'ideographic':case 'bottom':g.y=-f.size/3;break;}switch(a){case 'right':e=k;h=0.05;break;case 'center':e=h=k/2;break;}var m=getCoords(this,r+g.x,s+g.y);d.push('<g_vml_:line from="',-e,' 0" to="',h,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!j,'" stroked="',!!j,'" style="position:absolute;width:1px;height:1px;left:0px;top:0px;">');if(j){appendStroke(this,d)}else {appendFill(this,d,{x:-e,y:0},{x:h,y:f.size})}var p=i[0][0].toFixed(3)+','+i[1][0].toFixed(3)+','+i[0][1].toFixed(3)+','+i[1][1].toFixed(3)+',0,0';var o=b(m.x/c)+','+b(m.y/c);d.push('<g_vml_:skew on="t" matrix="',p,'" ',' offset="',o,'" origin="',e,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',encodeHtmlAttribute(q),'" style="v-text-align:',a,';font:',encodeHtmlAttribute(n),'" /></g_vml_:line>');this.element_.insertAdjacentHTML('beforeEnd',d.join(''))};a.fillText=function(b,c,d,a){this.drawText_(b,c,d,a,!1)};a.strokeText=function(b,c,d,a){this.drawText_(b,c,d,a,!0)};a.measureText=function(a){if(!this.textMeasureEl_){var c='<span style="position:absolute;'+'top:-20000px;left:0;padding:0;margin:0;border:none;'+'white-space:pre;"></span>';this.element_.insertAdjacentHTML('beforeEnd',c);this.textMeasureEl_=this.element_.lastChild}var b=this.element_.ownerDocument;this.textMeasureEl_.innerHTML='';this.textMeasureEl_.style.font=this.font;this.textMeasureEl_.appendChild(b.createTextNode(a));return {width:this.textMeasureEl_.offsetWidth}};a.clip=function(){};a.arcTo=function(){};a.createPattern=function(b,a){return new CanvasPattern_(b,a)};function CanvasGradient_(a){this.type_=a;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}CanvasGradient_.prototype.addColorStop=function(b,a){a=processStyle(a);this.colors_.push({offset:b,color:a.color,alpha:a.alpha})};function CanvasPattern_(a,b){assertImageIsValid(a);switch(b){case 'repeat':case null:case '':this.repetition_='repeat';break;case 'repeat-x':case 'repeat-y':case 'no-repeat':this.repetition_=b;break;default:throwException('SYNTAX_ERR');}this.src_=a.src;this.width_=a.width;this.height_=a.height}function throwException(a){throw new DOMException_(a)}function assertImageIsValid(a){if(!a||a.nodeType!=1||a.tagName!='IMG'){throwException('TYPE_MISMATCH_ERR')}if(a.readyState!='complete'){throwException('INVALID_STATE_ERR')}}function DOMException_(a){this.code=this[a];this.message=a+': DOM Exception '+this.code}var d=DOMException_.prototype=new Error();d.INDEX_SIZE_ERR=1;d.DOMSTRING_SIZE_ERR=2;d.HIERARCHY_REQUEST_ERR=3;d.WRONG_DOCUMENT_ERR=4;d.INVALID_CHARACTER_ERR=5;d.NO_DATA_ALLOWED_ERR=6;d.NO_MODIFICATION_ALLOWED_ERR=7;d.NOT_FOUND_ERR=8;d.NOT_SUPPORTED_ERR=9;d.INUSE_ATTRIBUTE_ERR=10;d.INVALID_STATE_ERR=11;d.SYNTAX_ERR=12;d.INVALID_MODIFICATION_ERR=13;d.NAMESPACE_ERR=14;d.INVALID_ACCESS_ERR=15;d.VALIDATION_ERR=16;d.TYPE_MISMATCH_ERR=17;G_vmlCanvasManager=o;CanvasRenderingContext2D=CanvasRenderingContext2D_;CanvasGradient=CanvasGradient_;CanvasPattern=CanvasPattern_;DOMException=DOMException_})()}Ext.define('Ext.draw.engine.Canvas',{extend:Ext.draw.Surface,isCanvas:!0,config:{highPrecision:!1},statics:{contextOverrides:{setGradientBBox:function(a){this.bbox=a},fill:function(){var d=this.fillStyle,b=this.fillGradient,a=this.fillOpacity,e=this.globalAlpha,c=this.bbox;if(d!==Ext.util.Color.RGBA_NONE&&a!==0){if(b&&c){this.fillStyle=b.generateGradient(this,c)}if(a!==1){this.globalAlpha=e*a}this.$fill();if(a!==1){this.globalAlpha=e}if(b&&c){this.fillStyle=d}}},stroke:function(){var d=this.strokeStyle,b=this.strokeGradient,a=this.strokeOpacity,e=this.globalAlpha,c=this.bbox;if(d!==Ext.util.Color.RGBA_NONE&&a!==0){if(b&&c){this.strokeStyle=b.generateGradient(this,c)}if(a!==1){this.globalAlpha=e*a}this.$stroke();if(a!==1){this.globalAlpha=e}if(b&&c){this.strokeStyle=d}}},fillStroke:function(d,b){var a=this,j=this.fillStyle,f=this.fillOpacity,h=this.strokeStyle,e=this.strokeOpacity,g=a.shadowColor,i=a.shadowBlur,c=Ext.util.Color.RGBA_NONE;if(b===undefined){b=d.transformFillStroke}if(!b){d.inverseMatrix.toContext(a)}if(j!==c&&f!==0){a.fill();a.shadowColor=c;a.shadowBlur=0}if(h!==c&&e!==0){a.stroke()}a.shadowColor=g;a.shadowBlur=i},setLineDash:function(a){if(this.$setLineDash){this.$setLineDash(a)}},getLineDash:function(){if(this.$getLineDash){return this.$getLineDash()}},ellipse:function(e,f,c,d,g,i,j,h){var a=Math.cos(g),b=Math.sin(g);this.transform(a*c,b*c,-b*d,a*d,e,f);this.arc(0,0,1,i,j,h);this.transform(a/c,-b/d,b/c,a/d,-(a*e+b*f)/c,(b*e-a*f)/d)},appendPath:function(f){var c=this,d=0,a=0,e=f.commands,b=f.params,g=e.length;c.beginPath();for(;d<g;d++){switch(e[d]){case 'M':c.moveTo(b[a],b[a+1]);a+=2;break;case 'L':c.lineTo(b[a],b[a+1]);a+=2;break;case 'C':c.bezierCurveTo(b[a],b[a+1],b[a+2],b[a+3],b[a+4],b[a+5]);a+=6;break;case 'Z':c.closePath();break;}}},save:function(){var c=this.toSave,e=c.length,d=e&&{},b=0,a;for(;b<e;b++){a=c[b];if(a in this){d[a]=this[a]}}this.state.push(d);this.$save()},restore:function(){var b=this.state.pop(),a;if(b){for(a in b){this[a]=b[a]}}this.$restore()}}},splitThreshold:3000,toSave:['fillGradient','strokeGradient'],element:{reference:'element',children:[{reference:'bodyElement',style:{width:'100%',height:'100%',position:'relative'}}]},createCanvas:function(){var b,c,a,d;b=Ext.Element.create({tag:'canvas',cls:Ext.baseCSSPrefix+'surface-canvas'});if(window.G_vmlCanvasManager){G_vmlCanvasManager.initElement(b.dom);this.isVML=!0}c=Ext.draw.engine.Canvas.contextOverrides;a=b.dom.getContext('2d');if(a.ellipse){delete c.ellipse}a.state=[];a.toSave=this.toSave;for(d in c){a['$'+d]=a[d]}Ext.apply(a,c);if(this.getHighPrecision()){this.enablePrecisionCompensation(a)}else {this.disablePrecisionCompensation(a)}this.bodyElement.appendChild(b);this.canvases.push(b);this.contexts.push(a)},updateHighPrecision:function(d){var c=this.contexts,e=c.length,a,b;for(a=0;a<e;a++){b=c[a];if(d){this.enablePrecisionCompensation(b)}else {this.disablePrecisionCompensation(b)}}},precisionNames:['rect','fillRect','strokeRect','clearRect','moveTo','lineTo','arc','arcTo','save','restore','updatePrecisionCompensate','setTransform','transform','scale','translate','rotate','quadraticCurveTo','bezierCurveTo','createLinearGradient','createRadialGradient','fillText','strokeText','drawImage'],disablePrecisionCompensation:function(e){var d=Ext.draw.engine.Canvas.contextOverrides,c=this.precisionNames,f=c.length,a,b;for(a=0;a<f;a++){b=c[a];if(!(b in d)){delete e[b]}}this.setDirty(!0)},enablePrecisionCompensation:function(k){var h=this,a=1,c=1,d=0,e=0,g=new Ext.draw.Matrix(),j=[],f={},i=Ext.draw.engine.Canvas.contextOverrides,b=k.constructor.prototype,l={toSave:h.toSave,rect:function(h,i,g,f){return b.rect.call(this,h*a+d,i*c+e,g*a,f*c)},fillRect:function(h,i,g,f){this.updatePrecisionCompensateRect();b.fillRect.call(this,h*a+d,i*c+e,g*a,f*c);this.updatePrecisionCompensate()},strokeRect:function(h,i,g,f){this.updatePrecisionCompensateRect();b.strokeRect.call(this,h*a+d,i*c+e,g*a,f*c);this.updatePrecisionCompensate()},clearRect:function(h,i,g,f){return b.clearRect.call(this,h*a+d,i*c+e,g*a,f*c)},moveTo:function(f,g){return b.moveTo.call(this,f*a+d,g*c+e)},lineTo:function(f,g){return b.lineTo.call(this,f*a+d,g*c+e)},arc:function(i,j,h,f,g,c){this.updatePrecisionCompensateRect();b.arc.call(this,i*a+d,j*a+e,h*a,f,g,c);this.updatePrecisionCompensate()},arcTo:function(g,i,h,j,f){this.updatePrecisionCompensateRect();b.arcTo.call(this,g*a+d,i*c+e,h*a+d,j*c+e,f*a);this.updatePrecisionCompensate()},save:function(){j.push(g);g=g.clone();i.save.call(this);b.save.call(this)},restore:function(){g=j.pop();i.restore.call(this);b.restore.call(this);this.updatePrecisionCompensate()},updatePrecisionCompensate:function(){g.precisionCompensate(h.devicePixelRatio,f);a=f.xx;c=f.yy;d=f.dx;e=f.dy;b.setTransform.call(this,h.devicePixelRatio,f.b,f.c,f.d,0,0)},updatePrecisionCompensateRect:function(){g.precisionCompensateRect(h.devicePixelRatio,f);a=f.xx;c=f.yy;d=f.dx;e=f.dy;b.setTransform.call(this,h.devicePixelRatio,f.b,f.c,f.d,0,0)},setTransform:function(c,d,e,f,a,b){g.set(c,d,e,f,a,b);this.updatePrecisionCompensate()},transform:function(c,d,e,f,a,b){g.append(c,d,e,f,a,b);this.updatePrecisionCompensate()},scale:function(a,b){this.transform(a,0,0,b,0,0)},translate:function(a,b){this.transform(1,0,0,1,a,b)},rotate:function(a){var b=Math.cos(a),c=Math.sin(a);this.transform(b,c,-c,b,0,0)},quadraticCurveTo:function(f,g,h,i){b.quadraticCurveTo.call(this,f*a+d,g*c+e,h*a+d,i*c+e)},bezierCurveTo:function(f,g,h,i,j,l){b.bezierCurveTo.call(this,f*a+d,g*c+e,h*a+d,i*c+e,j*a+d,l*c+e)},createLinearGradient:function(g,i,h,j){var f;this.updatePrecisionCompensateRect();f=b.createLinearGradient.call(this,g*a+d,i*c+e,h*a+d,j*c+e);this.updatePrecisionCompensate();return f},createRadialGradient:function(h,j,f,i,l,g){var c;this.updatePrecisionCompensateRect();c=b.createLinearGradient.call(this,h*a+d,j*a+e,f*a,i*a+d,l*a+e,g*a);this.updatePrecisionCompensate();return c},fillText:function(c,d,e,a){b.setTransform.apply(this,g.elements);if(typeof a==='undefined'){b.fillText.call(this,c,d,e)}else {b.fillText.call(this,c,d,e,a)}this.updatePrecisionCompensate()},strokeText:function(c,d,e,a){b.setTransform.apply(this,g.elements);if(typeof a==='undefined'){b.strokeText.call(this,c,d,e)}else {b.strokeText.call(this,c,d,e,a)}this.updatePrecisionCompensate()},fill:function(){var a=this.fillGradient,c=this.bbox;this.updatePrecisionCompensateRect();if(a&&c){this.fillStyle=a.generateGradient(this,c)}b.fill.call(this);this.updatePrecisionCompensate()},stroke:function(){var a=this.strokeGradient,c=this.bbox;this.updatePrecisionCompensateRect();if(a&&c){this.strokeStyle=a.generateGradient(this,c)}b.stroke.call(this);this.updatePrecisionCompensate()},drawImage:function(f,g,h,i,j,l,m,o,n){switch(arguments.length){case 3:return b.drawImage.call(this,f,g*a+d,h*c+e);case 5:return b.drawImage.call(this,f,g*a+d,h*c+e,i*a,j*c);case 9:return b.drawImage.call(this,f,g,h,i,j,l*a+d,m*c*e,o*a,n*c);}}};Ext.apply(k,l);this.setDirty(!0)},updateRect:function(c){this.callParent([c]);var a=this,s=Math.floor(c[0]),u=Math.floor(c[1]),t=Math.ceil(c[0]+c[2]),r=Math.ceil(c[1]+c[3]),f=a.devicePixelRatio,g=a.canvases,q=t-s,p=r-u,d=Math.round(a.splitThreshold/f),n=a.xSplits=Math.ceil(q/d),o=a.ySplits=Math.ceil(p/d),l,m,e,h,i,b,k,j;for(m=0,i=0;m<o;m++,i+=d){for(l=0,h=0;l<n;l++,h+=d){e=m*n+l;if(e>=g.length){a.createCanvas()}b=g[e].dom;b.style.left=h+'px';b.style.top=i+'px';j=Math.min(d,p-i);if(j*f!==b.height){b.height=j*f;b.style.height=j+'px'}k=Math.min(d,q-h);if(k*f!==b.width){b.width=k*f;b.style.width=k+'px'}a.applyDefaults(a.contexts[e])}}a.activeCanvases=e=n*o;while(g.length>e){g.pop().destroy()}a.clear()},clearTransform:function(){var a=this,g=a.xSplits,j=a.ySplits,i=a.contexts,f=a.splitThreshold,e=a.devicePixelRatio,b,c,h,d;for(b=0;b<g;b++){for(c=0;c<j;c++){h=c*g+b;d=i[h];d.translate(-f*b,-f*c);d.scale(e,e);a.matrix.toContext(d)}}},renderSprite:function(b){var c=this,p=c.getRect(),u=c.matrix,d=b.getParent(),n=Ext.draw.Matrix.fly([1,0,0,1,0,0]),f=c.splitThreshold/c.devicePixelRatio,q=c.xSplits,v=c.ySplits,g,h,e,a,o,m,i=0,s,j=0,r,x=p[2],w=p[3],k,l,t;while(d&&d.isSprite){n.prependMatrix(d.matrix||d.attr&&d.attr.matrix);d=d.getParent()}n.prependMatrix(u);a=b.getBBox();if(a){a=n.transformBBox(a)}b.preRender(c);if(b.attr.hidden||b.attr.globalAlpha===0){b.setDirty(!1);return}for(l=0,h=0;l<v;l++,h+=f){for(k=0,g=0;k<q;k++,g+=f){t=l*q+k;e=c.contexts[t];o=Math.min(f,x-g);m=Math.min(f,w-h);i=g;s=i+o;j=h;r=j+m;if(a){if(a.x>s||a.x+a.width<i||a.y>r||a.y+a.height<j){continue}}e.save();b.useAttributes(e,p);if(!1===b.render(c,e,[i,j,o,m])){return !1}e.restore()}}b.setDirty(!1)},flatten:function(j,i){var b=document.createElement('canvas'),k=Ext.getClassName(this),d=this.devicePixelRatio,l=b.getContext('2d'),a,c,g,e,f,h;b.width=Math.ceil(j.width*d);b.height=Math.ceil(j.height*d);for(e=0;e<i.length;e++){a=i[e];if(Ext.getClassName(a)!==k){continue}g=a.getRect();for(f=0;f<a.canvases.length;f++){c=a.canvases[f];h=c.getOffsetsTo(c.getParent());l.drawImage(c.dom,(g[0]+h[0])*d,(g[1]+h[1])*d)}}return {data:b.toDataURL(),type:'png'}},applyDefaults:function(a){var b=Ext.util.Color.RGBA_NONE;a.strokeStyle=b;a.fillStyle=b;a.textAlign='start';a.textBaseline='alphabetic';a.miterLimit=1},clear:function(){var b=this,e=b.activeCanvases,a,c,d;for(a=0;a<e;a++){c=b.canvases[a].dom;d=b.contexts[a];d.setTransform(1,0,0,1,0,0);d.clearRect(0,0,c.width,c.height)}b.setDirty(!0)},destroy:function(){var b=this,c=b.canvases,d=c.length,a;for(a=0;a<d;a++){b.contexts[a]=null;c[a].destroy();c[a]=null}b.contexts=b.canvases=null;b.callParent()},privates:{initElement:function(){var a=this;a.callParent();a.canvases=[];a.contexts=[];a.activeCanvases=a.xSplits=a.ySplits=0}}},function(){var c=this,b=c.prototype,a=1.0E10;if(Ext.os.is.Android4&&Ext.browser.is.Chrome){a=3000}else {if(Ext.is.iOS){a=2200}}b.splitThreshold=a});Ext.define('Ext.draw.Container',{extend:Ext.draw.ContainerBase,alternateClassName:'Ext.draw.Component',xtype:'draw',defaultType:'surface',isDrawContainer:!0,engine:'Ext.draw.engine.Canvas',config:{cls:[Ext.baseCSSPrefix+'draw-container',Ext.baseCSSPrefix+'unselectable'],resizeHandler:null,sprites:null,gradients:[],downloadServerUrl:undefined,touchAction:{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!1},surfaceZIndexes:{main:1}},defaultDownloadServerUrl:'http://svg.sencha.io',supportedFormats:['png','pdf','jpeg','gif'],supportedOptions:{version:Ext.isNumber,data:Ext.isString,format:function(a){return Ext.Array.indexOf(this.supportedFormats,a)>=0},filename:Ext.isString,width:Ext.isNumber,height:Ext.isNumber,scale:Ext.isNumber,pdf:Ext.isObject,jpeg:Ext.isObject},initAnimator:function(){this.frameCallbackId=Ext.draw.Animator.addFrameCallback('renderFrame',this)},applyDownloadServerUrl:function(a){var b=this.defaultDownloadServerUrl;if(!a){a=b}return a},applyGradients:function(d){var b=[],c,f,a,e;if(!Ext.isArray(d)){return b}for(c=0,f=d.length;c<f;c++){a=d[c];if(!Ext.isObject(a)){continue}if(typeof a.type!=='string'){a.type='linear'}if(a.angle){a.degrees=a.angle;delete a.angle}if(Ext.isObject(a.stops)){a.stops=function(c){var b=[],a;for(e in c){a=c[e];a.offset=e/100;b.push(a)}return b}(a.stops)}b.push(a)}Ext.draw.gradient.GradientDefinition.add(b);return b},applySprites:function(c){var e,a,b,d,f;if(!c){return}c=Ext.Array.from(c);e=[];for(d=0,f=c.length;d<f;d++){b=c[d];a=b.surface;if(!(a&&a.isSurface)){if(Ext.isString(a)){a=this.getSurface(a);delete b.surface}else {a=this.getSurface('main')}}b=a.add(b);e.push(b)}return e},resizeDelay:500,resizeTimerId:0,lastResizeTime:null,size:null,handleResize:function(b,h){var a=this,f=a.element,g=a.getResizeHandler()||a.defaultResizeHandler,d=a.resizeDelay,c=a.lastResizeTime,e,i;if(!f){return}b=b||f.getSize();if(!(b.width&&b.height)){return}a.size=b;a.stopResizeTimer();e=!h&&c&&Ext.Date.now()-c<d;if(e){a.resizeTimerId=Ext.defer(a.handleResize,d,a,[b,!0]);return}a.fireEvent('bodyresize',a,b);Ext.callback(g,null,[b],0,a);if(i!==!1){a.renderFrame()}a.lastResizeTime=Ext.Date.now()},stopResizeTimer:function(){if(this.resizeTimerId){Ext.undefer(this.resizeTimerId);this.resizeTimerId=0}},defaultResizeHandler:function(a){this.getItems().each(function(b){b.setRect([0,0,a.width,a.height])})},getSurface:function(b,a){var c=this,e=c.getItems(),g=e.getCount(),f=c.getSurfaceZIndexes(),d;b=b||'main';a=a||b;d=c.createSurface(b);if(a in f){d.element.setStyle('zIndex',f[a])}if(e.getCount()>g){c.handleResize(null,!0)}return d},createSurface:function(b){var c=this,d=c.getItems(),a;b=this.getId()+'-'+(b||'main');a=d.get(b);if(!a){a=c.add({xclass:c.engine,id:b})}return a},renderFrame:function(){var e=this,c=e.getItems(),a,d,b;for(a=0,d=c.length;a<d;a++){b=c.items[a];if(b.isSurface){b.renderFrame()}}},getSurfaces:function(g){var a=Array.prototype.slice.call(this.items.items),e=this.getSurfaceZIndexes(),b,c,d,f;if(g){for(c=1;c<a.length;c++){d=a[c];f=e[d.type];b=c-1;while(b>=0&&e[a[b].type]>f){a[b+1]=a[b];b--}a[b+1]=d}}return a},getImage:function(e){var f=this.bodyElement.getSize(),c=this.getSurfaces(!0),d=c[0],a,b;if((Ext.isIE||Ext.isEdge)&&d.isSVG){a={data:d.toSVG(f,c),type:'svg-markup'}}else {a=d.flatten(f,c);if(e==='image'){b=new Image();b.src=a.data;a.data=b;return a}if(e==='stream'){a.data=a.data.replace(/^data:image\/[^;]+/,'data:application/octet-stream');return a}}return a},download:function(a){var d=this,e=[],f,b,c;if(Ext.isIE8){return !1}a=a||{};a.version=2;if(!a.data){a.data=d.getImage().data}for(b in a){if(a.hasOwnProperty(b)){c=a[b];if(b in d.supportedOptions){if(d.supportedOptions[b].call(d,c)){e.push({tag:'input',type:'hidden',name:b,value:Ext.String.htmlEncode(Ext.isObject(c)?Ext.JSON.encode(c):c)})}}}}f=Ext.dom.Helper.markup({tag:'html',children:[{tag:'head'},{tag:'body',children:[{tag:'form',method:'POST',action:a.url||d.getDownloadServerUrl(),children:e},{tag:'script',type:'text/javascript',children:'document.getElementsByTagName("form")[0].submit();'}]}]});window.open('','ImageDownload_'+Date.now()).document.write(f)},doDestroy:function(){var a=this,b=a.frameCallbackId;if(b){Ext.draw.Animator.removeFrameCallback(b)}a.stopResizeTimer();a.callParent()}},function(){if(location.search.match('svg')){Ext.draw.Container.prototype.engine='Ext.draw.engine.Svg'}else {if(Ext.os.is.BlackBerry&&Ext.os.version.getMajor()===10||Ext.browser.is.AndroidStock4&&(Ext.os.version.getMinor()===1||Ext.os.version.getMinor()===2||Ext.os.version.getMinor()===3)){Ext.draw.Container.prototype.engine='Ext.draw.engine.Svg'}}});Ext.define('Ext.chart.theme.BaseTheme',{defaultsDivCls:'x-component'});Ext.define('Ext.chart.theme.Base',{extend:Ext.chart.theme.BaseTheme,mixins:{factoryable:Ext.mixin.Factoryable},factoryConfig:{type:'chart.theme'},isTheme:!0,isBase:!0,config:{baseColor:null,colors:undefined,gradients:null,chart:{defaults:{captions:{title:{docked:'top',padding:5,style:{textAlign:'center',fontFamily:'default',fontWeight:'500',fillStyle:'black',fontSize:'default*1.6'}},subtitle:{docked:'top',style:{textAlign:'center',fontFamily:'default',fontWeight:'normal',fillStyle:'black',fontSize:'default*1.3'}},credits:{docked:'bottom',padding:5,style:{textAlign:'left',fontFamily:'default',fontWeight:'lighter',fillStyle:'black',fontSize:'default'}}},background:'white'}},axis:{defaults:{label:{x:0,y:0,textBaseline:'middle',textAlign:'center',fontSize:'default',fontFamily:'default',fontWeight:'default',fillStyle:'black'},title:{fillStyle:'black',fontSize:'default*1.23',fontFamily:'default',fontWeight:'default'},style:{strokeStyle:'black'},grid:{strokeStyle:'rgb(221, 221, 221)'}},top:{style:{textPadding:5}},bottom:{style:{textPadding:5}}},series:{defaults:{label:{fillStyle:'black',strokeStyle:'none',fontFamily:'default',fontWeight:'default',fontSize:'default*1.077',textBaseline:'middle',textAlign:'center'},labelOverflowPadding:5}},sprites:{text:{fontSize:'default',fontWeight:'default',fontFamily:'default',fillStyle:'black'}},legend:{label:{fontSize:14,fontWeight:'default',fontFamily:'default',fillStyle:'black'},border:{lineWidth:1,radius:4,fillStyle:'none',strokeStyle:'gray'},background:'white'},seriesThemes:undefined,markerThemes:{type:['circle','cross','plus','square','triangle','diamond']},useGradients:!1,background:null},colorDefaults:['#94ae0a','#115fa6','#a61120','#ff8809','#ffd13e','#a61187','#24ad9a','#7c7474','#a66111'],constructor:function(a){this.initConfig(a);this.resolveDefaults()},defaultRegEx:/^default([+\-/*]\d+(?:\.\d+)?)?$/,defaultOperators:{'*':function(a,b){return a*b},'+':function(a,b){return a+b},'-':function(a,b){return a-b}},resolveChartDefaults:function(){var c=Ext.clone(this.getChart()),e,d,a,b;for(e in c){a=c[e];if('captions' in a){for(d in a.captions){b=a.captions[d];if(b){this.replaceDefaults(b.style)}}}}this.setChart(c)},resolveDefaults:function(){var a=this;Ext.onInternalReady(function(){var g=Ext.clone(a.getSprites()),h=Ext.clone(a.getLegend()),f=Ext.clone(a.getAxis()),e=Ext.clone(a.getSeries()),b,d,c;if(!a.superclass.defaults){b=Ext.getBody().createChild({tag:'div',cls:a.defaultsDivCls});a.superclass.defaults={fontFamily:b.getStyle('fontFamily'),fontWeight:b.getStyle('fontWeight'),fontSize:parseFloat(b.getStyle('fontSize')),fontVariant:b.getStyle('fontVariant'),fontStyle:b.getStyle('fontStyle')};b.destroy()}a.resolveChartDefaults();a.replaceDefaults(g.text);a.setSprites(g);a.replaceDefaults(h.label);a.setLegend(h);for(d in f){c=f[d];a.replaceDefaults(c.label);a.replaceDefaults(c.title)}a.setAxis(f);for(d in e){c=e[d];a.replaceDefaults(c.label)}a.setSeries(e)})},replaceDefaults:function(d){var e=this,g=e.superclass.defaults,h=e.defaultRegEx,c,b,a,f;if(Ext.isObject(d)){for(c in g){a=h.exec(d[c]);if(a){b=g[c];a=a[1];if(a){f=e.defaultOperators[a.charAt(0)];b=Math.round(f(b,parseFloat(a.substr(1))))}d[c]=b}}}},applyBaseColor:function(b){var a,c;if(b){a=b.isColor?b:Ext.util.Color.fromString(b);c=a.getHSL()[2];if(c<0.15){a=a.createLighter(0.3)}else {if(c<0.3){a=a.createLighter(0.15)}else {if(c>0.85){a=a.createDarker(0.3)}else {if(c>0.7){a=a.createDarker(0.15)}}}}this.setColors([a.createDarker(0.3).toString(),a.createDarker(0.15).toString(),a.toString(),a.createLighter(0.12).toString(),a.createLighter(0.24).toString(),a.createLighter(0.31).toString()])}return b},applyColors:function(a){return a||this.colorDefaults},updateUseGradients:function(a){if(a){this.updateGradients({type:'linear',degrees:90})}},updateBackground:function(b){var a;if(b){a=this.getChart();a.defaults.background=b;this.setChart(a)}},updateGradients:function(d){var c=this.getColors(),g=[],e,a,f,b,h;if(Ext.isObject(d)){for(b=0,h=c&&c.length||0;b<h;b++){a=Ext.util.Color.fromString(c[b]);if(a){f=a.createLighter(0.15).toString();e=Ext.apply(Ext.Object.chain(d),{stops:[{offset:1,color:a.toString()},{offset:0,color:f.toString()}]});g.push(e)}}this.setColors(g)}},applySeriesThemes:function(a){var b,c;this.getBaseColor();this.getUseGradients();this.getGradients();b=this.getColors();if(!a){a={fillStyle:Ext.Array.clone(b),strokeStyle:Ext.Array.map(b,function(b){c=Ext.util.Color.fromString(b.stops?b.stops[0].color:b);return c.createDarker(0.15).toString()})}}return a}});Ext.define('Ext.chart.theme.Default',{extend:Ext.chart.theme.Base,singleton:!0,alias:['chart.theme.default','chart.theme.Default','chart.theme.Base']});Ext.define('Ext.chart.Util',{singleton:!0,expandRange:function(b,f){var g=f.length,d=b[0],c=b[1],e,a;for(e=0;e<g;e++){a=f[e];if(a==null||!isFinite(a)){continue}if(a<d||!isFinite(d)){d=a}if(a>c||!isFinite(c)){c=a}}b[0]=d;b[1]=c},defaultRange:[0,1],validateRange:function(a,b,c){var d,e;b=b||this.defaultRange.slice();if(!(c===0||c>0)){c=0.5}if(!a||a.length!==2){return b}a=[a[0],a[1]];if(!a[0]){a[0]=0}if(!a[1]){a[1]=0}if(c&&a[0]===a[1]){a=[a[0]-c,a[0]+c];if(a[0]===a[1]){return b}}d=isFinite(a[0]);e=isFinite(a[1]);if(!d&&!e){return b}if(d&&!e){a[1]=a[0]+Ext.Number.sign(a[1])*(b[1]-b[0])}else {if(e&&!d){a[0]=a[1]+Ext.Number.sign(a[0])*(b[1]-b[0])}}return [Math.min(a[0],a[1]),Math.max(a[0],a[1])]},applyAnimation:function(a,b){if(!a){a={duration:0}}else {if(a===!0){a={easing:'easeInOut',duration:500}}}return b?Ext.apply({},a,b):a}});Ext.define('Ext.chart.Markers',{extend:Ext.draw.sprite.Instancing,isMarkers:!0,defaultCategory:'default',constructor:function(){this.callParent(arguments);this.categories={};this.revisions={}},destroy:function(){this.categories=null;this.revisions=null;this.callParent()},getMarkerFor:function(b,c){var a;if(b in this.categories){a=this.categories[b];if(c in a){return this.get(a[c])}}},clear:function(a){a=a||this.defaultCategory;if(!(a in this.revisions)){this.revisions[a]=1}else {this.revisions[a]++}},clearAll:function(){this.callParent();this.categories={};this.revisions={}},putMarkerFor:function(b,g,e,f,h){var a=this,c,d;b=b||this.defaultCategory;c=a.categories[b]||(a.categories[b]={});if(e in c){a.setAttributesFor(c[e],g,f)}else {c[e]=a.getCount();a.add(g,f)}d=a.get(c[e]);if(d){d.category=b;if(!h){d.revision=a.revisions[b]||(a.revisions[b]=1)}}},getMarkerBBoxFor:function(b,c,d){var a;if(b in this.categories){a=this.categories[b];if(c in a){return this.getBBoxFor(a[c],d)}}},getBBox:function(){return null},render:function(f,b,h){var d=this,g=f.getRect(),j=d.revisions,k=d.attr.matrix,a=d.getTemplate(),i=a.attr,l=d.instances.length,c,e;k.toContext(b);a.preRender(f,b,h);a.useAttributes(b,g);for(e=0;e<l;e++){c=d.get(e);if(c.hidden||c.revision!==j[c.category]){continue}b.save();a.attr=c;a.useAttributes(b,g);a.render(f,b,h);b.restore()}a.attr=i}});Ext.define('Ext.chart.modifier.Callout',{extend:Ext.draw.modifier.Modifier,alternateClassName:'Ext.chart.label.Callout',prepareAttributes:function(a){if(!a.hasOwnProperty('calloutOriginal')){a.calloutOriginal=Ext.Object.chain(a);a.calloutOriginal.prototype=a}if(this._lower){this._lower.prepareAttributes(a.calloutOriginal)}},setAttrs:function(f,a){var b=f.callout,i=f.calloutOriginal,o=f.bbox.plain,h=(o.width||0)+f.labelOverflowPadding,g=(o.height||0)+f.labelOverflowPadding,d,e,c,l,m,j,k,n,p;if('callout' in a){b=a.callout}if('callout' in a||'calloutPlaceX' in a||'calloutPlaceY' in a||'x' in a||'y' in a){c='rotationRads' in a?i.rotationRads=a.rotationRads:i.rotationRads;l='x' in a?i.x=a.x:i.x;m='y' in a?i.y=a.y:i.y;j='calloutPlaceX' in a?a.calloutPlaceX:f.calloutPlaceX;k='calloutPlaceY' in a?a.calloutPlaceY:f.calloutPlaceY;n='calloutVertical' in a?a.calloutVertical:f.calloutVertical;c%=Math.PI*2;if(Math.cos(c)<0){c=(c+Math.PI)%(Math.PI*2)}if(c>Math.PI){c-=Math.PI*2}if(n){c=c*(1-b)-Math.PI/2*b;p=h;h=g;g=p}else {c=c*(1-b)}a.rotationRads=c;a.x=l*(1-b)+j*b;a.y=m*(1-b)+k*b;d=j-l;e=k-m;if(Math.abs(e*h)>Math.abs(d*g)){if(e>0){a.calloutEndX=a.x-g/2*(d/e)*b;a.calloutEndY=a.y-g/2*b}else {a.calloutEndX=a.x+g/2*(d/e)*b;a.calloutEndY=a.y+g/2*b}}else {if(d>0){a.calloutEndX=a.x-h/2;a.calloutEndY=a.y-h/2*(e/d)*b}else {a.calloutEndX=a.x+h/2;a.calloutEndY=a.y+h/2*(e/d)*b}}if(a.calloutStartX&&a.calloutStartY){a.calloutHasLine=d>0&&a.calloutStartX<a.calloutEndX||d<=0&&a.calloutStartX>a.calloutEndX||e>0&&a.calloutStartY<a.calloutEndY||e<=0&&a.calloutStartY>a.calloutEndY}else {a.calloutHasLine=!0}}return a},pushDown:function(b,a){a=this.callParent([b.calloutOriginal,a]);return this.setAttrs(b,a)},popUp:function(a,b){a=a.prototype;b=this.setAttrs(a,b);if(this._upper){return this._upper.popUp(a,b)}else {return Ext.apply(a,b)}}});Ext.define('Ext.chart.sprite.Label',{extend:Ext.draw.sprite.Text,alternateClassName:'Ext.chart.label.Label',inheritableStatics:{def:{processors:{callout:'limited01',calloutHasLine:'bool',calloutPlaceX:'number',calloutPlaceY:'number',calloutStartX:'number',calloutStartY:'number',calloutEndX:'number',calloutEndY:'number',calloutColor:'color',calloutWidth:'number',calloutVertical:'bool',labelOverflowPadding:'number',display:'enums(none,under,over,rotate,insideStart,insideEnd,inside,outside)',orientation:'enums(horizontal,vertical)',renderer:'default'},defaults:{callout:0,calloutHasLine:!0,calloutPlaceX:0,calloutPlaceY:0,calloutStartX:0,calloutStartY:0,calloutEndX:0,calloutEndY:0,calloutWidth:1,calloutVertical:!1,calloutColor:'black',labelOverflowPadding:5,display:'none',orientation:'',renderer:null},triggers:{callout:'transform',calloutPlaceX:'transform',calloutPlaceY:'transform',labelOverflowPadding:'transform',calloutRotation:'transform',display:'hidden'},updaters:{hidden:function(a){a.hidden=a.display==='none'}}}},config:{animation:{customDurations:{callout:200}},field:null,calloutLine:!0,hideLessThan:20},applyCalloutLine:function(a){if(a){return Ext.apply({},a)}return a},createModifiers:function(){var b=this,a=b.callParent(arguments);a.callout=new Ext.chart.modifier.Callout({sprite:b});a.animation.setUpper(a.callout);a.callout.setUpper(a.target)},render:function(e,a){var b=this,d=b.attr,c=d.calloutColor;a.save();a.globalAlpha*=d.callout;if(a.globalAlpha>0&&d.calloutHasLine){if(c&&c.isGradient){c=c.getStops()[0].color}a.strokeStyle=c;a.fillStyle=c;a.lineWidth=d.calloutWidth;a.beginPath();a.moveTo(b.attr.calloutStartX,b.attr.calloutStartY);a.lineTo(b.attr.calloutEndX,b.attr.calloutEndY);a.stroke();a.beginPath();a.arc(b.attr.calloutStartX,b.attr.calloutStartY,1*d.calloutWidth,0,2*Math.PI,!0);a.fill();a.beginPath();a.arc(b.attr.calloutEndX,b.attr.calloutEndY,1*d.calloutWidth,0,2*Math.PI,!0);a.fill()}a.restore();Ext.draw.sprite.Text.prototype.render.apply(b,arguments)}});Ext.define('Ext.chart.series.Series',{mixins:[Ext.mixin.Observable,Ext.mixin.Bindable],isSeries:!0,defaultBindProperty:'store',type:null,seriesType:'sprite',identifiablePrefix:'ext-line-',observableType:'series',darkerStrokeRatio:0.15,config:{chart:null,title:null,renderer:null,showInLegend:!0,triggerAfterDraw:!1,theme:null,style:{},subStyle:{},themeStyle:{},colors:null,useDarkerStrokeColor:!0,store:null,label:null,labelOverflowPadding:null,showMarkers:!0,marker:null,markerSubStyle:null,itemInstancing:null,background:null,surface:null,overlaySurface:null,hidden:!1,highlight:!1,highlightCfg:{merge:function(a){return a},$value:{fillStyle:'yellow',strokeStyle:'red'}},animation:null,tooltip:null},directions:[],sprites:null,themeColorCount:function(){return 1},isStoreDependantColorCount:!1,themeMarkerCount:function(){return 0},getFields:function(d){var f=this,a=[],e=d.length,c,b;for(c=0;c<e;c++){b=f['get'+d[c]+'Field']();if(Ext.isArray(b)){a.push.apply(a,b)}else {a.push(b)}}return a},applyAnimation:function(b,a){var c=this.getChart();if(!c.isSettingSeriesAnimation){this.isUserAnimation=!0}return Ext.chart.Util.applyAnimation(b,a)},updateAnimation:function(e){var f=this.getSprites(),d,c,b,g,a;for(b=0,g=f.length;b<g;b++){a=f[b];if(a.isMarkerHolder){d=a.getMarker('items');if(d){d.getTemplate().setAnimation(e)}c=a.getMarker('markers');if(c){c.getTemplate().setAnimation(e)}}a.setAnimation(e)}},getAnimation:function(){var b=this.getChart(),a;if(b&&b.animationSuspendCount){a={duration:0}}else {if(this.isUserAnimation){a=this.callParent()}else {a=b.getAnimation()}}return a},updateTitle:function(){var b=this,a=b.getChart();if(a&&!a.isInitializing){a.refreshLegendStore()}},applyHighlight:function(a,c){var d=this,b=d.getHighlightCfg();if(Ext.isObject(a)){a=Ext.merge({},b,a)}else {if(a===!0){a=b}}if(a){a.type='highlight'}return a&&Ext.merge({},c,a)},updateHighlight:function(d){var a=this,g=a.sprites,i=a.getHighlightCfg(),c,h,b,f,e;a.getStyle();a.getMarker();if(!Ext.Object.isEmpty(d)){a.addItemHighlight();for(c=0,h=g.length;c<h;c++){b=g[c];if(b.isMarkerHolder){f=b.getMarker('items');if(f){f.getTemplate().modifiers.highlight.setStyle(d)}e=b.getMarker('markers');if(e){e.getTemplate().modifiers.highlight.setStyle(d)}}}}else {if(!Ext.Object.equals(i,this.defaultConfig.highlightCfg)){this.addItemHighlight()}}},updateHighlightCfg:function(a){if(!this.isConfiguring&&!Ext.Object.equals(a,this.defaultConfig.highlightCfg)){this.addItemHighlight()}},applyItemInstancing:function(a,b){if(a&&b&&(!a.type||a.type===b.type)){a=Ext.merge({},b,a)}if(a&&!a.type){a=null}return a},setAttributesForItem:function(b,c){var a=b&&b.sprite,d;if(a){if(a.isMarkerHolder&&b.category==='items'){a.putMarker(b.category,c,b.index,!1,!0)}if(a.isMarkerHolder&&b.category==='markers'){a.putMarker(b.category,c,b.index,!1,!0)}else {if(a.isInstancing){a.setAttributesFor(b.index,c)}else {if(Ext.isArray(a)){for(d=0;d<a.length;d++){a[d].setAttributes(c)}}else {a.setAttributes(c)}}}}},getBBoxForItem:function(b){var a=b&&b.sprite,c=null;if(a){if(a.getMarker('items')&&b.category==='items'){c=a.getMarkerBBox(b.category,b.index)}else {if(a instanceof Ext.draw.sprite.Instancing){c=a.getBBoxFor(b.index)}else {c=a.getBBox()}}}return c},dataRange:null,constructor:function(a){var b=this,c;a=a||{};if(a.tips){a=Ext.apply({tooltip:a.tips},a)}if(a.highlightCfg){a=Ext.apply({highlight:a.highlightCfg},a)}if('id' in a){c=a.id}else {if('id' in b.config){c=b.config.id}else {c=b.getId()}}b.setId(c);b.sprites=[];b.dataRange=[];b.mixins.observable.constructor.call(b,a);b.initBindable()},lookupViewModel:function(b){var a=this.getChart();return a?a.lookupViewModel(b):null},applyTooltip:function(a,c){var b=Ext.apply({xtype:'tooltip',renderer:Ext.emptyFn,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,hideDelay:200,mouseOffset:[20,20],trackMouse:!0},a);return Ext.create(b)},updateTooltip:function(){this.addItemHighlight()},addItemHighlight:function(){var d=this.getChart(),a,c,e,b;if(!d){return}a=d.getInteractions();for(b=0;b<a.length;b++){c=a[b];if(c.isItemHighlight||c.isItemEdit){e=!0;break}}if(!e){a.push('itemhighlight');d.setInteractions(a)}},showTooltip:function(b,d){var c=this,a=c.getTooltip();if(!a){return}Ext.callback(a.renderer,a.scope,[a,b.record,b],0,c);a.showBy(d)},showTooltipAt:function(c,e,f){var d=this,a=d.getTooltip(),b=a.config.mouseOffset;if(!a||!a.showAt){return}if(b){e+=b[0];f+=b[1]}Ext.callback(a.renderer,a.scope,[a,c.record,c],0,d);a.showAt([e,f])},hideTooltip:function(d,b){var c=this,a=c.getTooltip();if(!a){return}if(b){a.hide()}else {a.delayHide()}},applyStore:function(a){return a&&Ext.StoreManager.lookup(a)},getStore:function(){return this._store||this.getChart()&&this.getChart().getStore()},updateStore:function(c,b){var a=this,g=a.getChart(),i=g&&g.getStore(),e,f,h,d;b=b||i;if(b&&b!==c){b.un({datachanged:'onDataChanged',update:'onDataChanged',scope:a})}if(c){c.on({datachanged:'onDataChanged',update:'onDataChanged',scope:a});e=a.getSprites();for(d=0,h=e.length;d<h;d++){f=e[d];if(f.setStore){f.setStore(c)}}a.onDataChanged()}a.fireEvent('storechange',a,c,b)},onStoreChange:function(c,a,b){if(!this._store){this.updateStore(a,b)}},defaultRange:[0,1],coordinate:function(d,j,n){var a=this,q=a.getStore(),l=a.getHidden(),p=q.getData().items,f=a['get'+d+'Axis'](),c=[NaN,NaN],g=a['fieldCategory'+d]||[d],o=a.getFields(g),b,m,i,e={},h=a.getSprites(),k;if(h.length&&!Ext.isBoolean(l)||!l){for(b=0;b<g.length;b++){m=o[b];i=a.coordinateData(p,m,f);Ext.chart.Util.expandRange(c,i);e['data'+g[b]]=i}c=Ext.chart.Util.validateRange(c,a.defaultRange,0);a.dataRange[j]=c[0];a.dataRange[j+n]=c[1];e['dataMin'+d]=c[0];e['dataMax'+d]=c[1];if(f){k=f.getRange(!0);f.setBoundSeriesRange(k)}for(b=0;b<h.length;b++){h[b].setAttributes(e)}}},coordinateData:function(d,f,g){var c=[],h=d.length,e=g&&g.getLayout(),a,b;for(a=0;a<h;a++){b=d[a].data[f];if(!Ext.isEmpty(b,!0)){if(e){c[a]=e.getCoordFor(b,f,a,d)}else {b=+b;c[a]=Ext.isNumber(b)?b:a}}else {c[a]=b}}return c},updateLabelData:function(){var i=this.getLabel();if(!i){return}var l=this.getStore(),h=l.getData().items,f=this.getSprites(),k=i.getTemplate(),e=Ext.Array.from(k.getField()),a,d,j,g,b,c;if(!f.length||!e.length){return}for(a=0;a<f.length;a++){b=f[a];if(!b.getField){continue}g=[];c=b.getField();if(Ext.Array.indexOf(e,c)<0){c=e[a]}for(d=0,j=h.length;d<j;d++){g.push(h[d].get(c))}b.setAttributes({labels:g})}},processData:function(){var a=this,f=a.directions,c,d,e,b,g;if(a.isProcessingData||!a.getStore()){return}a.isProcessingData=!0;for(b=0,g=f.length;b<g;b++){c=f[b];d=a['get'+c+'Axis']();if(d){d.processData(a);continue}e='coordinate'+c;if(a[e]){a[e]()}}a.updateLabelData();a.isProcessingData=!1},applyBackground:function(c){var a,b;if(this.getChart()){a=this.getSurface();a.setBackground(c);b=a.getBackground()}else {b=c}return b},updateChart:function(b,c){var a=this,d=a._store;if(c){c.un('axeschange','onAxesChange',a);a.clearSprites();a.setSurface(null);a.setOverlaySurface(null);c.unregister(a);a.onChartDetached(c);if(!d){a.updateStore(null)}}if(b){a.setSurface(b.getSurface('series'));a.setOverlaySurface(b.getSurface('overlay'));b.on('axeschange','onAxesChange',a);if(b.getAxes()){a.onAxesChange(b)}a.onChartAttached(b);b.register(a);if(!d){a.updateStore(b.getStore())}}},onAxesChange:function(h,l){if(h.destroying||h.destroyed){return}var f=this,k=h.getAxes(),c,e={},i={},j=!1,g=this.directions,a,b,d;for(b=0,d=g.length;b<d;b++){a=g[b];i[a]=f.getFields(f['fieldCategory'+a])}for(b=0,d=k.length;b<d;b++){c=k[b];a=c.getDirection();if(!e[a]){e[a]=[c]}else {e[a].push(c)}}for(b=0,d=g.length;b<d;b++){a=g[b];if(!l&&f['get'+a+'Axis']()){continue}if(e[a]){c=f.findMatchingAxis(e[a],i[a]);if(c){f['set'+a+'Axis'](c);if(c.getNeedHighPrecision()){j=!0}}}}this.getSurface().setHighPrecision(j)},findMatchingAxis:function(f,d){var a,e,b,c;for(b=0;b<f.length;b++){a=f[b];e=a.getFields();if(!e.length){return a}else {if(d){for(c=0;c<d.length;c++){if(Ext.Array.indexOf(e,d[c])>=0){return a}}}}}},onChartDetached:function(b){var a=this;a.fireEvent('chartdetached',b,a);b.un('storechange','onStoreChange',a)},onChartAttached:function(b){var a=this;a.fireEvent('chartattached',b,a);b.on('storechange','onStoreChange',a);a.processData()},updateOverlaySurface:function(a){var b=this.getLabel();if(a&&b){a.add(b)}},getLabel:function(){return this.labelMarker},setLabel:function(b){var c=this,e=c.getChart(),a=c.labelMarker,d;if(!b&&a){a.getTemplate().destroy();a.destroy();c.labelMarker=a=null}if(b){if(!a){a=c.labelMarker=new Ext.chart.Markers({zIndex:10});a.setTemplate(new Ext.chart.sprite.Label());c.getOverlaySurface().add(a)}d=a.getTemplate();d.setAttributes(b);d.setConfig(b);if(b.field){d.setField(b.field)}if(b.display){a.setAttributes({hidden:b.display==='none'})}a.setDirty(!0)}c.updateLabelData();if(e&&!e.isInitializing&&!c.isConfiguring){e.redraw()}},createItemInstancingSprite:function(g,e){var d=this,a=new Ext.chart.Markers(),f=Ext.apply({modifiers:'highlight'},e),h=d.getStyle(),c,b;a.setAttributes({zIndex:Number.MAX_VALUE});a.setTemplate(f);c=a.getTemplate();c.setAttributes(h);b=c.getAnimation();b.on('animationstart','onSpriteAnimationStart',this);b.on('animationend','onSpriteAnimationEnd',this);g.bindMarker('items',a);d.getSurface().add(a);return a},getDefaultSpriteConfig:function(){return {type:this.seriesType,renderer:this.getRenderer()}},updateRenderer:function(c){var b=this,a=b.getChart();if(a&&a.isInitializing){return}if(b.sprites.length){b.sprites[0].setAttributes({renderer:c||null});if(a&&!a.isInitializing){a.redraw()}}},updateShowMarkers:function(c){var b=this.getSprite(),a=b&&b.getMarker('markers');if(a){a.getTemplate().setAttributes({hidden:!c})}},createSprite:function(){var a=this,f=a.getSurface(),e=a.getItemInstancing(),b=f.add(a.getDefaultSpriteConfig()),d,c;b.setAttributes(a.getStyle());b.setSeries(a);if(e){a.createItemInstancingSprite(b,e)}if(b.isMarkerHolder){c=a.getLabel();if(c&&c.getTemplate().getField()){b.bindMarker('labels',c)}}if(b.setStore){b.setStore(a.getStore())}d=b.getAnimation();d.on('animationstart','onSpriteAnimationStart',a);d.on('animationend','onSpriteAnimationEnd',a);a.sprites.push(b);return b},getSprites:null,getSprite:function(){var a=this.getSprites();return a&&a[0]},withSprite:function(b){var a=this.getSprite();return a&&b(a)||undefined},forEachSprite:function(d){var b=this.getSprites(),a,c;for(a=0,c=b.length;a<c;a++){d(b[a])}},onDataChanged:function(){var a=this,b=a.getChart(),d=b&&b.getStore(),c=a.getStore();if(c!==d){a.processData()}},isXType:function(a){return a==='series'},getItemId:function(){return this.getId()},applyThemeStyle:function(a,e){var d=this,b,c;b=a&&a.subStyle&&a.subStyle.fillStyle;c=b&&a.subStyle.strokeStyle;if(b&&!c){a.subStyle.strokeStyle=d.getStrokeColorsFromFillColors(b)}b=a&&a.markerSubStyle&&a.markerSubStyle.fillStyle;c=b&&a.markerSubStyle.strokeStyle;if(b&&!c){a.markerSubStyle.strokeStyle=d.getStrokeColorsFromFillColors(b)}return Ext.apply(e||{},a)},applyStyle:function(b,a){return Ext.apply({},b,a)},applySubStyle:function(a,c){var d=Ext.ClassManager.getNameByAlias('sprite.'+this.seriesType),b=Ext.ClassManager.get(d);if(b&&b.def){a=b.def.batchedNormalize(a,!0)}return Ext.merge({},c,a)},applyMarker:function(a,d){var b,c;if(a){if(!Ext.isObject(a)){a={}}b=a.type||'circle';if(d&&b===d.type){a=Ext.merge({},d,a)}}if(b){c=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias('sprite.'+b))}if(c&&c.def){a=c.def.normalize(a,!0);a.type=b}else {a=null}return a},updateMarker:function(g){var b=this,f=b.getSprites(),c,a,e,d,h;for(d=0,h=f.length;d<h;d++){c=f[d];if(!c.isMarkerHolder){continue}a=c.getMarker('markers');if(g){if(!a){a=new Ext.chart.Markers();c.bindMarker('markers',a);b.getOverlaySurface().add(a)}e=Ext.Object.merge({modifiers:'highlight'},g);a.setTemplate(e);a.getTemplate().getAnimation().setCustomDurations({translationX:0,translationY:0})}else {if(a){c.releaseMarker('markers');b.getOverlaySurface().remove(a,!0)}}c.setDirty(!0)}if(!b.isConfiguring){b.doUpdateStyles();b.updateHighlight(b.getHighlight())}},applyMarkerSubStyle:function(a,b){var d=a&&a.type||b&&b.type||'circle',c=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias('sprite.'+d));if(c&&c.def){a=c.def.batchedNormalize(a,!0)}return Ext.merge(b||{},a)},updateHidden:function(b){var a=this;a.getColors();a.getSubStyle();a.setSubStyle({hidden:b});a.processData();a.doUpdateStyles();if(!Ext.isArray(b)){a.updateLegendStore(b)}},updateLegendStore:function(c,g){var f=this,d=f.getChart(),b=d&&d.getLegendStore(),e=f.getId(),a;if(b){if(arguments.length>1){a=b.findBy(function(a){return a.get('series')===e&&a.get('index')===g});if(a!==-1){a=b.getAt(a)}}else {a=b.findRecord('series',e)}if(a&&a.get('disabled')!==c){a.set('disabled',c)}}},setHiddenByIndex:function(c,b){var a=this;if(Ext.isArray(a.getHidden())){a.getHidden()[c]=b;a.updateHidden(a.getHidden());a.updateLegendStore(b,c)}else {a.setHidden(b)}},getStrokeColorsFromFillColors:function(c){var d=this,b=d.getUseDarkerStrokeColor(),e=Ext.isNumber(b)?b:d.darkerStrokeRatio,a;if(b){a=Ext.Array.map(c,function(a){a=Ext.isString(a)?a:a.stops[0].color;a=Ext.util.Color.fromString(a);return a.createDarker(e).toString()})}else {a=Ext.Array.clone(c)}return a},updateThemeColors:function(d){var a=this,b=a.getThemeStyle(),f=Ext.Array.clone(d),e=a.getStrokeColorsFromFillColors(d),c={fillStyle:f,strokeStyle:e};b.subStyle=Ext.apply(b.subStyle||{},c);b.markerSubStyle=Ext.apply(b.markerSubStyle||{},c);a.doUpdateStyles();if(!a.isConfiguring){a.getChart().refreshLegendStore()}},themeOnlyIfConfigured:{},updateTheme:function(o){var c=this,d=o.getSeries(),m=c.getInitialConfig(),l=c.defaultConfig,n=c.self.getConfigurator().configs,k=d.defaults,j=d[c.type],i=c.themeOnlyIfConfigured,b,a,g,e,f,h;d=Ext.merge({},k,j);for(b in d){a=d[b];h=n[b];if(a!==null&&a!==undefined&&h){f=m[b];g=Ext.isObject(a);e=f===l[b];if(g){if(e&&i[b]){continue}a=Ext.merge({},a,f)}if(e||g){c[h.names.set](a)}}}},updateChartColors:function(b){var a=this;if(!a.getColors()){a.updateThemeColors(b)}},updateColors:function(b){var a;this.updateThemeColors(b);if(!this.isConfiguring){a=this.getChart();if(a){a.refreshLegendStore()}}},updateStyle:function(){this.doUpdateStyles()},updateSubStyle:function(){this.doUpdateStyles()},updateThemeStyle:function(){this.doUpdateStyles()},doUpdateStyles:function(){var c=this,d=c.sprites,g=c.getItemInstancing(),h=d&&d.length,i=c.getConfig('showMarkers',!0),f,b,e,a;for(a=0;a<h;a++){b=d[a];f=c.getStyleByIndex(a);if(g){b.getMarker('items').getTemplate().setAttributes(f)}b.setAttributes(f);e=b.isMarkerHolder&&b.getMarker('markers');if(e){e.getTemplate().setAttributes(c.getMarkerStyleByIndex(a))}}},getStyleWithTheme:function(){var c=this,a=c.getThemeStyle(),b=Ext.clone(c.getStyle());if(a&&a.style){Ext.applyIf(b,a.style)}return b},getSubStyleWithTheme:function(){var c=this,a=c.getThemeStyle(),b=Ext.clone(c.getSubStyle());if(a&&a.subStyle){Ext.applyIf(b,a.subStyle)}return b},getStyleByIndex:function(h){var b=this,c=b.getThemeStyle(),g,e,f,d,a={};g=b.getStyle();e=c&&c.style||{};f=b.styleDataForIndex(b.getSubStyle(),h);d=b.styleDataForIndex(c&&c.subStyle,h);Ext.apply(a,e);Ext.apply(a,d);Ext.apply(a,g);Ext.apply(a,f);return a},getMarkerStyleByIndex:function(e){var c=this,b=c.getThemeStyle(),l,k,d,i,j,g,h,f,a={};l=c.getStyle();k=b&&b.style||{};d=c.styleDataForIndex(c.getSubStyle(),e);if(d.hasOwnProperty('hidden')){d.hidden=d.hidden||!this.getConfig('showMarkers',!0)}i=c.styleDataForIndex(b&&b.subStyle,e);j=c.getMarker();g=b&&b.marker||{};h=c.getMarkerSubStyle();f=c.styleDataForIndex(b&&b.markerSubStyle,e);Ext.apply(a,k);Ext.apply(a,i);Ext.apply(a,g);Ext.apply(a,f);Ext.apply(a,l);Ext.apply(a,d);Ext.apply(a,j);Ext.apply(a,h);return a},styleDataForIndex:function(d,e){var a,b,c={};if(d){for(b in d){a=d[b];if(Ext.isArray(a)){c[b]=a[e%a.length]}else {c[b]=a}}}return c},getItemForPoint:Ext.emptyFn,getItemByIndex:function(e,a){var c=this,d=c.getSprites(),b=d&&d[0],f;if(!b){return}if(a===undefined&&b.isMarkerHolder){a=c.getItemInstancing()?'items':'markers'}else {if(!a||a===''||a==='sprites'){b=d[e]}}if(b){f={series:c,category:a,index:e,record:c.getStore().getData().items[e],field:c.getYField(),sprite:b};return f}},onSpriteAnimationStart:function(a){this.fireEvent('animationstart',this,a)},onSpriteAnimationEnd:function(a){this.fireEvent('animationend',this,a)},resolveListenerScope:function(d){var c=this,e=Ext._namedScopes[d],a=c.getChart(),b;if(!e){b=a?a.resolveListenerScope(d,!1):d||c}else {if(e.isThis){b=c}else {if(e.isController){b=a?a.resolveListenerScope(d,!1):c}else {if(e.isSelf){b=a?a.resolveListenerScope(d,!1):c;if(b===a&&!a.getInheritedConfig('defaultListenerScope')){b=c}}}}}return b},provideLegendInfo:function(d){var b=this,c=b.getSubStyleWithTheme(),a=c.fillStyle;if(Ext.isArray(a)){a=a[0]}d.push({name:b.getTitle()||b.getYField()||b.getId(),mark:(Ext.isObject(a)?a.stops&&a.stops[0].color:a)||c.strokeStyle||'black',disabled:b.getHidden(),series:b.getId(),index:0})},clearSprites:function(){var c=this.sprites,a,b,d;for(b=0,d=c.length;b<d;b++){a=c[b];if(a&&a.isSprite){a.destroy()}}this.sprites=[]},destroy:function(){var a=this,b=a._store,c=a.getConfig('tooltip',!0);if(b&&b.getAutoDestroy()){Ext.destroy(b)}a.setChart(null);a.clearListeners();if(c){Ext.destroy(c)}a.callParent()}});Ext.define('Ext.chart.interactions.Abstract',{xtype:'interaction',mixins:{observable:Ext.mixin.Observable},config:{gestures:{tap:'onGesture'},chart:null,enabled:!0},throttleGap:0,stopAnimationBeforeSync:!1,constructor:function(b){var a=this,c;b=b||{};if('id' in b){c=b.id}else {if('id' in a.config){c=a.config.id}else {c=a.getId()}}a.setId(c);a.mixins.observable.constructor.call(a,b)},updateChart:function(c,a){var b=this;if(a===c){return}if(a){a.unregister(b);b.removeChartListener(a)}if(c){c.register(b);b.addChartListener()}},updateEnabled:function(c){var a=this,b=a.getChart();if(b){if(c){a.addChartListener()}else {a.removeChartListener(b)}}},onGesture:Ext.emptyFn,getItemForEvent:function(d){var c=this,b=c.getChart(),a=b.getEventXY(d);return b.getItemForPoint(a[0],a[1])},getItemsForEvent:function(d){var c=this,b=c.getChart(),a=b.getEventXY(d);return b.getItemsForPoint(a[0],a[1])},addChartListener:function(){var a=this,d=a.getChart(),c=a.getGestures(),b;if(!a.getEnabled()){return}function insertGesture(b,c){d.addElementListener(b,a.listeners[b]=function(e){var f=a.getLocks(),d;if(a.getEnabled()&&(!(b in f)||f[b]===a)){d=(Ext.isFunction(c)?c:a[c]).apply(this,arguments);if(d===!1&&e&&e.stopPropagation){e.stopPropagation()}return d}},a)}a.listeners=a.listeners||{};for(b in c){insertGesture(b,c[b])}},removeChartListener:function(d){var a=this,c=a.getGestures(),b;function removeGesture(b){var c=a.listeners[b];if(c){d.removeElementListener(b,c);delete a.listeners[b]}}if(a.listeners){for(b in c){removeGesture(b)}}},lockEvents:function(){var b=this,d=b.getLocks(),a=Array.prototype.slice.call(arguments),c=a.length;while(c--){d[a[c]]=b}},unlockEvents:function(){var c=this.getLocks(),a=Array.prototype.slice.call(arguments),b=a.length;while(b--){delete c[a[b]]}},getLocks:function(){var a=this.getChart();return a.lockedEvents||(a.lockedEvents={})},doSync:function(){var a=this,b=a.getChart();if(a.syncTimer){Ext.undefer(a.syncTimer);a.syncTimer=null}if(a.stopAnimationBeforeSync){b.animationSuspendCount++}b.redraw();if(a.stopAnimationBeforeSync){b.animationSuspendCount--}a.syncThrottle=Date.now()+a.throttleGap},sync:function(){var a=this;if(a.throttleGap&&Ext.frameStartTime<a.syncThrottle){if(a.syncTimer){return}a.syncTimer=Ext.defer(function(){a.doSync()},a.throttleGap)}else {a.doSync()}},getItemId:function(){return this.getId()},isXType:function(a){return a==='interaction'},destroy:function(){var a=this;a.setChart(null);delete a.listeners;a.callParent()}},function(){if(Ext.os.is.Android4){this.prototype.throttleGap=40}});Ext.define('Ext.chart.MarkerHolder',{extend:Ext.Mixin,mixinConfig:{id:'markerHolder',after:{constructor:'constructor',preRender:'preRender'},before:{destroy:'destroy'}},isMarkerHolder:!0,surfaceMatrix:null,inverseSurfaceMatrix:null,deprecated:{6:{methods:{getBoundMarker:{message:"Please use the 'getMarker' method instead.",fn:function(b){var a=this.boundMarkers[b];return a?[a]:a}}}}},constructor:function(){this.boundMarkers={};this.cleanRedraw=!1},bindMarker:function(c,a){var b=this,d=b.boundMarkers;if(a&&a.isMarkers){b.releaseMarker(c);d[c]=a;a.on('destroy',b.onMarkerDestroy,b)}},onMarkerDestroy:function(a){this.releaseMarker(a)},releaseMarker:function(a){var c=this.boundMarkers,b;if(a&&a.isMarkers){for(b in c){if(c[b]===a){delete c[b];break}}}else {b=a;a=c[b];delete c[b]}return a||null},getMarker:function(a){return this.boundMarkers[a]||null},preRender:function(h,j,i){var a=this,g=a.getId(),e=a.boundMarkers,b=a.getParent(),f,d,c;if(a.surfaceMatrix){c=a.surfaceMatrix.set(1,0,0,1,0,0)}else {c=a.surfaceMatrix=new Ext.draw.Matrix()}a.cleanRedraw=!a.attr.dirty;if(!a.cleanRedraw){for(f in e){d=e[f];if(d){d.clear(g)}}}while(b&&b.attr&&b.attr.matrix){c.prependMatrix(b.attr.matrix);b=b.getParent()}c.prependMatrix(b.matrix);a.surfaceMatrix=c;a.inverseSurfaceMatrix=c.inverse(a.inverseSurfaceMatrix)},putMarker:function(f,e,d,b,c){var a=this.boundMarkers[f];if(a){a.putMarkerFor(this.getId(),e,d,b,c)}},getMarkerBBox:function(d,c,b){var a=this.boundMarkers[d];if(a){return a.getMarkerBBoxFor(this.getId(),c,b)}},destroy:function(){var a=this.boundMarkers,c,b;for(c in a){b=a[c];b.destroy()}}});Ext.define('Ext.chart.axis.sprite.Axis',{extend:Ext.draw.sprite.Sprite,alias:'sprite.axis',type:'axis',mixins:{markerHolder:Ext.chart.MarkerHolder},inheritableStatics:{def:{processors:{grid:'bool',axisLine:'bool',minorTicks:'bool',minorTickSize:'number',majorTicks:'bool',majorTickSize:'number',length:'number',startGap:'number',endGap:'number',dataMin:'number',dataMax:'number',visibleMin:'number',visibleMax:'number',position:'enums(left,right,top,bottom,angular,radial,gauge)',minStepSize:'number',estStepSize:'number',titleOffset:'number',textPadding:'number',min:'number',max:'number',centerX:'number',centerY:'number',radius:'number',totalAngle:'number',baseRotation:'number',data:'default',enlargeEstStepSizeByText:'bool'},defaults:{grid:!1,axisLine:!0,minorTicks:!1,minorTickSize:3,majorTicks:!0,majorTickSize:5,length:0,startGap:0,endGap:0,visibleMin:0,visibleMax:1,dataMin:0,dataMax:1,position:'',minStepSize:0,estStepSize:20,min:0,max:1,centerX:0,centerY:0,radius:1,baseRotation:0,data:null,titleOffset:0,textPadding:0,scalingCenterY:0,scalingCenterX:0,strokeStyle:'black',enlargeEstStepSizeByText:!1},triggers:{minorTickSize:'bbox',majorTickSize:'bbox',position:'bbox,layout',axisLine:'bbox,layout',minorTicks:'layout',min:'layout',max:'layout',length:'layout',minStepSize:'layout',estStepSize:'layout',data:'layout',dataMin:'layout',dataMax:'layout',visibleMin:'layout',visibleMax:'layout',enlargeEstStepSizeByText:'layout'},updaters:{layout:'layoutUpdater'}}},config:{label:null,labelOffset:10,layout:null,segmenter:null,renderer:null,layoutContext:null,axis:null},thickness:0,stepSize:0,getBBox:function(){return null},defaultRenderer:function(a){return this.segmenter.renderer(a,this)},layoutUpdater:function(){var b=this,i=b.getAxis().getChart();if(i.isInitializing){return}var a=b.attr,h=b.getLayout(),j=i.getInherited().rtl,f=a.dataMax-a.dataMin,e=a.dataMin+f*a.visibleMin,k=a.dataMin+f*a.visibleMax,c=k-e,d=a.position,g={attr:a,segmenter:b.getSegmenter(),renderer:b.defaultRenderer};if(d==='left'||d==='right'){a.translationX=0;a.translationY=k*a.length/c;a.scalingX=1;a.scalingY=-a.length/c;a.scalingCenterY=0;a.scalingCenterX=0;b.applyTransformations(!0)}else {if(d==='top'||d==='bottom'){if(j){a.translationX=a.length+e*a.length/c+1}else {a.translationX=-e*a.length/c}a.translationY=0;a.scalingX=(j?-1:1)*a.length/c;a.scalingY=1;a.scalingCenterY=0;a.scalingCenterX=0;b.applyTransformations(!0)}}if(h){h.calculateLayout(g);b.setLayoutContext(g)}},iterate:function(a,c){var b,f,j,h,g,d,k=Ext.Array.some,l=Math.abs,i,e;if(a.getLabel){if(a.min<a.from){c.call(this,a.min,a.getLabel(a.min),-1,a)}for(b=0;b<=a.steps;b++){c.call(this,a.get(b),a.getLabel(b),b,a)}if(a.max>a.to){c.call(this,a.max,a.getLabel(a.max),a.steps+1,a)}}else {h=this.getAxis();g=h.floatingAxes;d=[];i=(a.to-a.from)/(a.steps+1);if(h.getFloating()){for(j in g){d.push(g[j])}}e=function(b){return !d.length||k(d,function(d){return l(d-b)>i})};if(a.min<a.from&&e(a.min)){c.call(this,a.min,a.min,-1,a)}for(b=0;b<=a.steps;b++){f=a.get(b);if(e(f)){c.call(this,f,f,b,a)}}if(a.max>a.to&&e(a.max)){c.call(this,a.max,a.max,a.steps+1,a)}}},renderTicks:function(j,b,m,i){var c=this,a=c.attr,r=a.position,k=a.matrix,g=0.5*a.lineWidth,p=k.getXX(),n=k.getDX(),q=k.getYY(),o=k.getDY(),f=m.majorTicks,d=a.majorTickSize,e=m.minorTicks,h=a.minorTickSize,l;if(f){switch(r){case 'right':function getRightTickFn(a){return function(c,d,e){c=j.roundPixel(c*q+o)+g;b.moveTo(0,c);b.lineTo(a,c)}};c.iterate(f,getRightTickFn(d));if(e){c.iterate(e,getRightTickFn(h))};break;case 'left':function getLeftTickFn(a){return function(c,d,e){c=j.roundPixel(c*q+o)+g;b.moveTo(i[2]-a,c);b.lineTo(i[2],c)}};c.iterate(f,getLeftTickFn(d));if(e){c.iterate(e,getLeftTickFn(h))};break;case 'bottom':function getBottomTickFn(a){return function(c,d,e){c=j.roundPixel(c*p+n)-g;b.moveTo(c,0);b.lineTo(c,a)}};c.iterate(f,getBottomTickFn(d));if(e){c.iterate(e,getBottomTickFn(h))};break;case 'top':function getTopTickFn(a){return function(c,d,e){c=j.roundPixel(c*p+n)-g;b.moveTo(c,i[3]);b.lineTo(c,i[3]-a)}};c.iterate(f,getTopTickFn(d));if(e){c.iterate(e,getTopTickFn(h))};break;case 'angular':c.iterate(f,function(c,e,f){c=c/(a.max+1)*Math.PI*2+a.baseRotation;b.moveTo(a.centerX+a.length*Math.cos(c),a.centerY+a.length*Math.sin(c));b.lineTo(a.centerX+(a.length+d)*Math.cos(c),a.centerY+(a.length+d)*Math.sin(c))});break;case 'gauge':l=c.getGaugeAngles();c.iterate(f,function(c,e,f){c=(c-a.min)/(a.max-a.min)*a.totalAngle-a.totalAngle+l.start;b.moveTo(a.centerX+a.length*Math.cos(c),a.centerY+a.length*Math.sin(c));b.lineTo(a.centerX+(a.length+d)*Math.cos(c),a.centerY+(a.length+d)*Math.sin(c))});break;}}},renderLabels:function(e,I,i,s){var h=this,a=h.attr,p=0.5*a.lineWidth,t=a.position,C=a.matrix,H=a.textPadding,K=C.getXX(),v=C.getDX(),L=C.getYY(),J=C.getDY(),r=0,x=i.majorTicks,k=Math.max(a.majorTickSize,a.minorTickSize)+a.lineWidth,A=Ext.draw.Draw.isBBoxIntersect,b=h.getLabel(),F,w=h.getLabelOffset(),f=null,o=0,u=0,B=i.segmenter,n=h.getRenderer(),l=h.getAxis(),E=l.getTitle(),m=E&&E.attr.text!==''&&E.getBBox(),D,g=null,c,z,d,j,q,G,y;if(x&&b&&!b.attr.hidden){F=b.attr.font;if(I.font!==F){I.font=F}b.setAttributes({translationX:0,translationY:0},!0);b.applyTransformations();D=b.attr.inverseMatrix.elements.slice(0);switch(t){case 'left':j=m?m.x+m.width:0;switch(b.attr.textAlign){case 'start':q=e.roundPixel(j+v)-p;break;case 'end':q=e.roundPixel(s[2]-k+v)-p;break;default:q=e.roundPixel(j+(s[2]-j-k)/2+v)-p;};b.setAttributes({translationX:q},!0);break;case 'right':j=m?s[2]-m.x:0;switch(b.attr.textAlign){case 'start':q=e.roundPixel(k+v)+p;break;case 'end':q=e.roundPixel(s[2]-j+v)+p;break;default:q=e.roundPixel(k+(s[2]-k-j)/2+v)+p;};b.setAttributes({translationX:q},!0);break;case 'top':j=m?m.y+m.height:0;b.setAttributes({translationY:e.roundPixel(j+(s[3]-j-k)/2)-p},!0);break;case 'bottom':j=m?s[3]-m.y:0;b.setAttributes({translationY:e.roundPixel(k+(s[3]-k-j)/2)+p},!0);break;case 'radial':b.setAttributes({translationX:a.centerX},!0);break;case 'angular':b.setAttributes({translationY:a.centerY},!0);break;case 'gauge':b.setAttributes({translationY:a.centerY},!0);break;}if(t==='left'||t==='right'){h.iterate(x,function(h,a,j){if(a===undefined){return}if(n){d=Ext.callback(n,null,[l,a,i,f],0,l)}else {d=B.renderer(a,i,f)}f=a;b.setAttributes({text:String(d),translationY:e.roundPixel(h*L+J)},!0);b.applyTransformations();r=Math.max(r,b.getBBox().width+k);z=Ext.draw.Matrix.fly(b.attr.matrix.elements.slice(0));c=z.prepend.apply(z,D).transformBBox(b.getBBox(!0));if(g&&!A(c,g,H)){return}e.renderSprite(b);g=c;o+=c.height;u++})}else {if(t==='top'||t==='bottom'){h.iterate(x,function(h,a,j){if(a===undefined){return}if(n){d=Ext.callback(n,null,[l,a,i,f],0,l)}else {d=B.renderer(a,i,f)}f=a;b.setAttributes({text:String(d),translationX:e.roundPixel(h*K+v)},!0);b.applyTransformations();r=Math.max(r,b.getBBox().height+k);z=Ext.draw.Matrix.fly(b.attr.matrix.elements.slice(0));c=z.prepend.apply(z,D).transformBBox(b.getBBox(!0));if(g&&!A(c,g,H)){return}e.renderSprite(b);g=c;o+=c.width;u++})}else {if(t==='radial'){h.iterate(x,function(j,h,k){if(h===undefined){return}if(n){d=Ext.callback(n,null,[l,h,i,f],0,l)}else {d=B.renderer(h,i,f)}f=h;if(typeof d!=='undefined'){b.setAttributes({text:String(d),translationX:a.centerX-e.roundPixel(j)/a.max*a.length*Math.cos(a.baseRotation+Math.PI/2),translationY:a.centerY-e.roundPixel(j)/a.max*a.length*Math.sin(a.baseRotation+Math.PI/2)},!0);b.applyTransformations();c=b.attr.matrix.transformBBox(b.getBBox(!0));if(g&&!A(c,g)){return}e.renderSprite(b);g=c;o+=c.width;u++}})}else {if(t==='angular'){w+=a.majorTickSize+a.lineWidth*0.5;h.iterate(x,function(j,h,k){if(h===undefined){return}if(n){d=Ext.callback(n,null,[l,h,i,f],0,l)}else {d=B.renderer(h,i,f)}f=h;r=Math.max(r,Math.max(a.majorTickSize,a.minorTickSize)+(a.lineCap!=='butt'?a.lineWidth*0.5:0));if(typeof d!=='undefined'){y=j/(a.max+1)*Math.PI*2+a.baseRotation;b.setAttributes({text:String(d),translationX:a.centerX+(a.length+w)*Math.cos(y),translationY:a.centerY+(a.length+w)*Math.sin(y)},!0);b.applyTransformations();c=b.attr.matrix.transformBBox(b.getBBox(!0));if(g&&!A(c,g)){return}e.renderSprite(b);g=c;o+=c.width;u++}})}else {if(t==='gauge'){G=h.getGaugeAngles();w+=a.majorTickSize+a.lineWidth*0.5;h.iterate(x,function(j,h,k){if(h===undefined){return}if(n){d=Ext.callback(n,null,[l,h,i,f],0,l)}else {d=B.renderer(h,i,f)}f=h;if(typeof d!=='undefined'){y=(j-a.min)/(a.max-a.min)*a.totalAngle-a.totalAngle+G.start;b.setAttributes({text:String(d),translationX:a.centerX+(a.length+w)*Math.cos(y),translationY:a.centerY+(a.length+w)*Math.sin(y)},!0);b.applyTransformations();c=b.attr.matrix.transformBBox(b.getBBox(!0));if(g&&!A(c,g)){return}e.renderSprite(b);g=c;o+=c.width;u++}})}}}}}if(a.enlargeEstStepSizeByText&&u){o/=u;o+=k;o*=2;if(a.estStepSize<o){a.estStepSize=o}}if(Math.abs(h.thickness-r)>1){h.thickness=r;a.bbox.plain.dirty=!0;a.bbox.transform.dirty=!0;h.doThicknessChanged();return !1}}},renderAxisLine:function(g,b,j,f){var h=this,a=h.attr,c=a.lineWidth*0.5,i=a.position,d,e;if(a.axisLine&&a.length){switch(i){case 'left':d=g.roundPixel(f[2])-c;b.moveTo(d,-a.endGap);b.lineTo(d,a.length+a.startGap+1);break;case 'right':b.moveTo(c,-a.endGap);b.lineTo(c,a.length+a.startGap+1);break;case 'bottom':b.moveTo(-a.startGap,c);b.lineTo(a.length+a.endGap,c);break;case 'top':d=g.roundPixel(f[3])-c;b.moveTo(-a.startGap,d);b.lineTo(a.length+a.endGap,d);break;case 'angular':b.moveTo(a.centerX+a.length,a.centerY);b.arc(a.centerX,a.centerY,a.length,0,Math.PI*2,!0);break;case 'gauge':e=h.getGaugeAngles();b.moveTo(a.centerX+Math.cos(e.start)*a.length,a.centerY+Math.sin(e.start)*a.length);b.arc(a.centerX,a.centerY,a.length,e.start,e.end,!0);break;}}},getGaugeAngles:function(){var c=this,b=c.attr.totalAngle,a;if(b<=Math.PI){a=(Math.PI-b)*0.5}else {a=-(Math.PI*2-b)*0.5}a=Math.PI*2-a;return {start:a,end:a-b}},renderGridLines:function(s,t,p,r){var c=this,q=c.getAxis(),b=c.attr,j=b.matrix,i=b.startGap,k=b.endGap,n=j.getXX(),o=j.getYY(),l=j.getDX(),m=j.getDY(),g=b.position,f=q.getGridAlignment(),h=p.majorTicks,a,e,d;if(b.grid){if(h){if(g==='left'||g==='right'){d=b.min*o+m+k+i;c.iterate(h,function(g,h,b){a=g*o+m+k;c.putMarker(f+'-'+(b%2?'odd':'even'),{y:a,height:d-a},e=b,!0);d=a});e++;a=0;c.putMarker(f+'-'+(e%2?'odd':'even'),{y:a,height:d-a},e,!0)}else {if(g==='top'||g==='bottom'){d=b.min*n+l+i;if(i){c.putMarker(f+'-even',{x:0,width:d},-1,!0)}c.iterate(h,function(g,h,b){a=g*n+l+i;c.putMarker(f+'-'+(b%2?'odd':'even'),{x:a,width:d-a},e=b,!0);d=a});e++;a=b.length+b.startGap+b.endGap;c.putMarker(f+'-'+(e%2?'odd':'even'),{x:a,width:d-a},e,!0)}else {if(g==='radial'){c.iterate(h,function(e,h,g){if(!e){return}a=e/b.max*b.length;c.putMarker(f+'-'+(g%2?'odd':'even'),{scalingX:a,scalingY:a},g,!0);d=a})}else {if(g==='angular'){c.iterate(h,function(g,h,e){if(!b.length){return}a=g/(b.max+1)*Math.PI*2+b.baseRotation;c.putMarker(f+'-'+(e%2?'odd':'even'),{rotationRads:a,rotationCenterX:0,rotationCenterY:0,scalingX:b.length,scalingY:b.length},e,!0);d=a})}}}}}}},renderLimits:function(u){var k=this,c=k.attr,g=k.getAxis(),i=Ext.Array.from(g.getLimits());if(!i.length||c.dataMin===c.dataMax){if(g.limits){g.limits.titles.attr.hidden=!0}return}var t=g.getChart(),s=t.getInnerPadding(),m=g.limits.surface.getRect(),o=c.matrix,h=c.position,p=Ext.Object.chain,d=g.limits.titles,f,l,n,a,b,e,j,q,r;d.attr.hidden=!1;d.instances=[];d.position=0;if(h==='left'||h==='right'){for(e=0,j=i.length;e<j;e++){a=p(i[e]);if(!a.line){a.line={}}b=Ext.isString(a.value)?g.getCoordFor(a.value):a.value;b=b*o.getYY()+o.getDY();a.line.y=b+s.top;a.line.strokeStyle=a.line.strokeStyle||c.strokeStyle;k.putMarker('horizontal-limit-lines',a.line,e,!0);if(a.line.title){d.add(a.line.title);f=d.getBBoxFor(d.position-1);l=a.line.title.position||(h==='left'?'start':'end');switch(l){case 'start':q=10;break;case 'end':q=m[2]-10;break;case 'middle':q=m[2]/2;break;}d.setAttributesFor(d.position-1,{x:q,y:a.line.y-f.height/2,textAlign:l,fillStyle:a.line.title.fillStyle||a.line.strokeStyle})}}}else {if(h==='top'||h==='bottom'){for(e=0,j=i.length;e<j;e++){a=p(i[e]);if(!a.line){a.line={}}b=Ext.isString(a.value)?g.getCoordFor(a.value):a.value;b=b*o.getXX()+o.getDX();a.line.x=b+s.left;a.line.strokeStyle=a.line.strokeStyle||c.strokeStyle;k.putMarker('vertical-limit-lines',a.line,e,!0);if(a.line.title){d.add(a.line.title);f=d.getBBoxFor(d.position-1);l=a.line.title.position||(h==='top'?'end':'start');switch(l){case 'start':r=m[3]-f.width/2-10;break;case 'end':r=f.width/2+10;break;case 'middle':r=m[3]/2;break;}d.setAttributesFor(d.position-1,{x:a.line.x+f.height/2,y:r,fillStyle:a.line.title.fillStyle||a.line.strokeStyle,rotationRads:Math.PI/2})}}}else {if(h==='radial'){for(e=0,j=i.length;e<j;e++){a=p(i[e]);if(!a.line){a.line={}}b=Ext.isString(a.value)?g.getCoordFor(a.value):a.value;if(b>c.max){continue}b=b/c.max*c.length;a.line.cx=c.centerX;a.line.cy=c.centerY;a.line.scalingX=b;a.line.scalingY=b;a.line.strokeStyle=a.line.strokeStyle||c.strokeStyle;k.putMarker('circular-limit-lines',a.line,e,!0);if(a.line.title){d.add(a.line.title);f=d.getBBoxFor(d.position-1);d.setAttributesFor(d.position-1,{x:c.centerX,y:c.centerY-b-f.height/2,fillStyle:a.line.title.fillStyle||a.line.strokeStyle})}}}else {if(h==='angular'){for(e=0,j=i.length;e<j;e++){a=p(i[e]);if(!a.line){a.line={}}b=Ext.isString(a.value)?g.getCoordFor(a.value):a.value;b=b/(c.max+1)*Math.PI*2+c.baseRotation;a.line.translationX=c.centerX;a.line.translationY=c.centerY;a.line.rotationRads=b;a.line.rotationCenterX=0;a.line.rotationCenterY=0;a.line.scalingX=c.length;a.line.scalingY=c.length;a.line.strokeStyle=a.line.strokeStyle||c.strokeStyle;k.putMarker('radial-limit-lines',a.line,e,!0);if(a.line.title){d.add(a.line.title);f=d.getBBoxFor(d.position-1);n=b>-0.5*Math.PI&&b<0.5*Math.PI||b>1.5*Math.PI&&b<2*Math.PI?1:-1;d.setAttributesFor(d.position-1,{x:c.centerX+0.5*c.length*Math.cos(b)+n*f.height/2*Math.sin(b),y:c.centerY+0.5*c.length*Math.sin(b)-n*f.height/2*Math.cos(b),rotationRads:n===1?b:b-Math.PI,fillStyle:a.line.title.fillStyle||a.line.strokeStyle})}}}else {if(h==='gauge'){}}}}}},doThicknessChanged:function(){var a=this.getAxis();if(a){a.onThicknessChanged()}},render:function(e,a,d){var b=this,c=b.getLayoutContext();if(c){if(b.renderLabels(e,a,c,d)===!1){return !1}a.beginPath();b.renderTicks(e,a,c,d);b.renderAxisLine(e,a,c,d);b.renderGridLines(e,a,c,d);b.renderLimits(d);a.stroke()}}});Ext.define('Ext.chart.axis.segmenter.Segmenter',{config:{axis:null},constructor:function(a){this.initConfig(a)},renderer:function(a,b){return String(a)},from:function(a){return a},diff:Ext.emptyFn,align:Ext.emptyFn,add:Ext.emptyFn,preferredStep:Ext.emptyFn});Ext.define('Ext.chart.axis.segmenter.Names',{extend:Ext.chart.axis.segmenter.Segmenter,alias:'segmenter.names',renderer:function(a,b){return a},diff:function(b,a,c){return Math.floor(a-b)},align:function(a,b,c){return Math.floor(a)},add:function(a,b,c){return a+b},preferredStep:function(d,a,b,c){return {unit:1,step:1}}});Ext.define('Ext.chart.axis.segmenter.Numeric',{extend:Ext.chart.axis.segmenter.Segmenter,alias:'segmenter.numeric',isNumeric:!0,renderer:function(b,a){return b.toFixed(Math.max(0,a.majorTicks.unit.fixes))},diff:function(c,b,a){return Math.floor((b-c)/a.scale)},align:function(b,c,d){var a=d.scale*c;return Math.floor(b/a)*a},add:function(a,b,c){return a+b*c.scale},preferredStep:function(d,a){var b=Math.floor(Math.log(a)*Math.LOG10E),c=Math.pow(10,b);a/=c;if(a<2){a=2}else {if(a<5){a=5}else {if(a<10){a=10;b++}}}return {unit:{fixes:-b,scale:c},step:a}},leadingZeros:function(a){return -Math.floor(Ext.Number.log10(Math.abs(a)))},exactStep:function(d,a){var b=this.leadingZeros(a),c=Math.pow(10,b);return {unit:{fixes:b+(a%c===0?0:1),scale:a<1?a:1},step:a<1?1:a}},adjustByMajorUnit:function(h,g,d){var f=d[0],e=d[1],b=h*g,c,a;a=Math.max(1/(f||1),1/(b||1));a=a>1?a:1;c=f*a%(b*a)/a;if(c!==0){d[0]=f-c+(f<0?-b:0)}a=Math.max(1/(e||1),1/(b||1));a=a>1?a:1;c=e*a%(b*a)/a;if(c!==0){d[1]=e-c+(e>0?b:0)}}});Ext.define('Ext.chart.axis.segmenter.Time',{extend:Ext.chart.axis.segmenter.Segmenter,alias:'segmenter.time',config:{step:null},renderer:function(b,c){var a=Ext.Date;switch(c.majorTicks.unit){case 'y':return a.format(b,'Y');case 'mo':return a.format(b,'Y-m');case 'd':return a.format(b,'Y-m-d');}return a.format(b,'Y-m-d\nH:i:s')},from:function(a){return new Date(a)},diff:function(b,a,c){if(isFinite(b)){b=new Date(b)}if(isFinite(a)){a=new Date(a)}return Ext.Date.diff(b,a,c)},updateStep:function(){var a=this.getAxis();if(a&&!this.isConfiguring){a.performLayout()}},align:function(a,b,c){if(c==='d'&&b>=7){a=Ext.Date.align(a,'d',b);a.setDate(a.getDate()-a.getDay()+1);return a}else {return Ext.Date.align(a,c,b)}},add:function(a,b,c){return Ext.Date.add(new Date(a),c,b)},timeBuckets:[{unit:Ext.Date.YEAR,steps:[1,2,5,10,20,50,100,200,500]},{unit:Ext.Date.MONTH,steps:[1,3,6]},{unit:Ext.Date.DAY,steps:[1,7,14]},{unit:Ext.Date.HOUR,steps:[1,6,12]},{unit:Ext.Date.MINUTE,steps:[1,5,15,30]},{unit:Ext.Date.SECOND,steps:[1,5,15,30]},{unit:Ext.Date.MILLI,steps:[1,2,5,10,20,50,100,200,500]}],getTimeBucket:function(j,i){var e=this.timeBuckets,h,d,f,g,b,a,c;for(a=0;a<e.length;a++){h=e[a].unit;d=this.diff(j,i,h);if(d>0){f=e[a].steps;for(c=0;c<f.length;c++){g=f[c];if(d<=g){break}}b={unit:h,step:g};break}}if(!b){b={unit:Ext.Date.MILLI,step:1}}return b},preferredStep:function(b,c){var a=this.getStep();return a?a:this.getTimeBucket(new Date(+b),new Date(+b+Math.ceil(c)))}});Ext.define('Ext.chart.axis.layout.Layout',{mixins:{observable:Ext.mixin.Observable},config:{axis:null},constructor:function(a){this.mixins.observable.constructor.call(this,a)},processData:function(d){var g=this,e=g.getAxis(),c=e.getDirection(),b=e.boundSeries,a,f;if(d){d['coordinate'+c]()}else {for(a=0,f=b.length;a<f;a++){b[a]['coordinate'+c]()}}},calculateMajorTicks:function(b){var e=this,a=b.attr,d=a.max-a.min,i=d/Math.max(1,a.length)*(a.visibleMax-a.visibleMin),h=a.min+d*a.visibleMin,g=a.min+d*a.visibleMax,f=a.estStepSize*i,c=e.snapEnds(b,a.min,a.max,f);if(c){e.trimByRange(b,c,h,g);b.majorTicks=c}},calculateMinorTicks:function(a){if(this.snapMinorEnds){a.minorTicks=this.snapMinorEnds(a)}},calculateLayout:function(a){var c=this,b=a.attr;if(b.length===0){return null}if(b.majorTicks){c.calculateMajorTicks(a);if(b.minorTicks){c.calculateMinorTicks(a)}}},snapEnds:Ext.emptyFn,trimByRange:function(i,a,d,g){var b=i.segmenter,c=a.unit,h=b.diff(a.from,d,c),j=b.diff(a.from,g,c),e=Math.max(0,Math.ceil(h/a.step)),f=Math.min(a.steps,Math.floor(j/a.step));if(f<a.steps){a.to=b.add(a.from,f*a.step,c)}if(a.max>g){a.max=a.to}if(a.from<d){a.from=b.add(a.from,e*a.step,c);while(a.from<d){e++;a.from=b.add(a.from,a.step,c)}}if(a.min<d){a.min=a.from}a.steps=f-e}});Ext.define('Ext.chart.axis.layout.Discrete',{extend:Ext.chart.axis.layout.Layout,alias:'axisLayout.discrete',isDiscrete:!0,processData:function(){var a=this,b=a.getAxis(),e=b.boundSeries,f=b.getDirection(),c,g,d;a.labels=[];a.labelMap={};for(c=0,g=e.length;c<g;c++){d=e[c];if(d['get'+f+'Axis']()===b){d['coordinate'+f]()}}b.getSprites()[0].setAttributes({data:a.labels});a.fireEvent('datachange',a.labels)},calculateLayout:function(a){a.data=this.labels;this.callParent([a])},calculateMajorTicks:function(b){var e=this,a=b.attr,h=b.data,d=a.max-a.min,g=a.min+d*a.visibleMin,f=a.min+d*a.visibleMax,c;c=e.snapEnds(b,Math.max(0,a.min),Math.min(a.max,h.length-1),1);if(c){e.trimByRange(b,c,g,f);b.majorTicks=c}},snapEnds:function(e,b,d,a){var f=e.data,c;a=Math.ceil(a);c=Math.floor((d-b)/a);return {min:b,max:d,from:b,to:c*a+b,step:a,steps:c,unit:1,getLabel:function(c){return f[this.from+this.step*c]},get:function(c){return this.from+this.step*c}}},trimByRange:function(i,a,c,f){var b=a.unit,g=Math.ceil((c-a.from)/b)*b,h=Math.floor((f-a.from)/b)*b,d=Math.max(0,Math.ceil(g/a.step)),e=Math.min(a.steps,Math.floor(h/a.step));if(e<a.steps){a.to=e}if(a.max>f){a.max=a.to}if(a.from<c&&a.step>0){a.from=a.from+d*a.step*b;while(a.from<c){d++;a.from+=a.step*b}}if(a.min<c){a.min=a.from}a.steps=e-d},getCoordFor:function(a,b,d,c){this.labels.push(a);return this.labels.length-1}});Ext.define('Ext.chart.axis.layout.CombineByIndex',{extend:Ext.chart.axis.layout.Discrete,alias:'axisLayout.combineByIndex',getCoordFor:function(c,e,d,f){var a=this.labels,b=d;if(a[d]!==c){b=a.push(c)-1}return b}});Ext.define('Ext.chart.axis.layout.CombineDuplicate',{extend:Ext.chart.axis.layout.Discrete,alias:'axisLayout.combineDuplicate',getCoordFor:function(a,c,e,d){var b;if(!(a in this.labelMap)){b=this.labelMap[a]=this.labels.length;this.labels.push(a);return b}return this.labelMap[a]}});Ext.define('Ext.chart.axis.layout.Continuous',{extend:Ext.chart.axis.layout.Layout,alias:'axisLayout.continuous',isContinuous:!0,config:{adjustMinimumByMajorUnit:!1,adjustMaximumByMajorUnit:!1},getCoordFor:function(a,b,d,c){return +a},snapEnds:function(n,b,f,l){var a=n.segmenter,j=this.getAxis(),m=!j.spriteAnimationCount,d=j.getMajorTickSteps(),h=d&&a.exactStep?a.exactStep(b,(f-b)/d):a.preferredStep(b,l),c=h.unit,k=h.step,g=a.diff(b,f,c),i=(d||g)+1,e;if(d||m&&+a.add(b,g,c)===f){e=b}else {e=a.align(b,k,c)}return {min:a.from(b),max:a.from(f),from:e,to:a.add(e,i,c),step:k,steps:i,unit:c,get:function(c){return a.add(this.from,this.step*c,this.unit)}}},snapMinorEnds:function(i){var a=i.majorTicks,c=this.getAxis().getMinorTickSteps(),h=i.segmenter,f=a.min,m=a.max,l=a.from,b=a.unit,e=a.step/c,d=e*b.scale,g=l-f,j=Math.floor(g/d),n=j+Math.floor((m-a.to)/d)+1,k=a.steps*c+n;return {min:f,max:m,from:f+g%d,to:h.add(l,k*e,b),step:e,steps:k,unit:b,get:function(a){return a%c+j+1!==0?h.add(this.from,this.step*a,b):null}}}});Ext.define('Ext.chart.axis.Axis',{xtype:'axis',mixins:{observable:Ext.mixin.Observable},isAxis:!0,config:{position:'bottom',fields:[],label:undefined,grid:!1,limits:null,renderer:null,chart:null,style:null,margin:0,titleMargin:4,background:null,minimum:NaN,maximum:NaN,reconcileRange:!1,minZoom:1,maxZoom:10000,layout:'continuous',segmenter:'numeric',hidden:!1,majorTickSteps:0,minorTickSteps:0,adjustByMajorUnit:!0,title:null,expandRangeBy:0,length:0,center:null,radius:null,totalAngle:Math.PI,rotation:null,visibleRange:[0,1],needHighPrecision:!1,linkedTo:null,floating:null},titleOffset:0,spriteAnimationCount:0,boundSeries:[],sprites:null,surface:null,range:null,defaultRange:[0,1],rangePadding:0.5,xValues:[],yValues:[],masterAxis:null,applyRotation:function(b){var a=Math.PI*2;return (b%a+Math.PI)%a-Math.PI},updateRotation:function(c){var a=this.getSprites(),b=this.getPosition();if(!this.getHidden()&&b==='angular'&&a[0]){a[0].setAttributes({baseRotation:c})}},applyTitle:function(b,a){var c;if(Ext.isString(b)){b={text:b}}if(!a){a=Ext.create('sprite.text',b);if(c=this.getSurface()){c.add(a)}}else {a.setAttributes(b)}return a},getAdjustByMajorUnit:function(){return !this.getHidden()&&this.callParent()},applyFloating:function(a,b){if(a===null){a={value:null,alongAxis:null}}else {if(Ext.isNumber(a)){a={value:a,alongAxis:null}}}if(Ext.isObject(a)){if(b&&b.alongAxis){delete this.getChart().getAxis(b.alongAxis).floatingAxes[this.getId()]}return a}return b},constructor:function(b){var a=this,c;a.sprites=[];a.labels=[];a.floatingAxes={};b=b||{};if(b.position==='angular'){b.style=b.style||{};b.style.estStepSize=1}if('id' in b){c=b.id}else {if('id' in a.config){c=a.config.id}else {c=a.getId()}}a.setId(c);a.mixins.observable.constructor.apply(a,arguments)},getAlignment:function(){switch(this.getPosition()){case 'left':case 'right':return 'vertical';case 'top':case 'bottom':return 'horizontal';case 'radial':return 'radial';case 'angular':return 'angular';}},getGridAlignment:function(){switch(this.getPosition()){case 'left':case 'right':return 'horizontal';case 'top':case 'bottom':return 'vertical';case 'radial':return 'circular';case 'angular':return 'radial';}},getSurface:function(){var a=this,b=a.getChart(),d,c;if(b&&!a.surface){d=a.surface=b.getSurface(a.getId(),'axis');c=a.gridSurface=b.getSurface('main');c.waitFor(d);a.getGrid();a.createLimits()}return a.surface},createLimits:function(){var b=this,e=b.getChart(),d=b.getSprites()[0],c=b.getGridAlignment(),a;if(b.getLimits()&&c){c=c.replace('3d','');b.limits=a={surface:e.getSurface('overlay'),lines:new Ext.chart.Markers(),titles:new Ext.draw.sprite.Instancing()};a.lines.setTemplate({xclass:'grid.'+c});a.lines.getTemplate().setAttributes({strokeStyle:'black'},!0);a.surface.add(a.lines);d.bindMarker(c+'-limit-lines',b.limits.lines);b.limitTitleTpl=new Ext.draw.sprite.Text();a.titles.setTemplate(b.limitTitleTpl);a.surface.add(a.titles)}},applyGrid:function(a){if(a===!0){return {}}return a},updateGrid:function(c){var b=this,g=b.getChart(),f=b.gridSurface,e,d,a;if(!g){b.on({chartattached:Ext.bind(b.updateGrid,b,[c]),single:!0});return}e=b.getSprites()[0];d=b.getGridAlignment();if(c){a=b.gridSpriteEven;if(!a){a=b.gridSpriteEven=new Ext.chart.Markers();a.setTemplate({xclass:'grid.'+d});f.add(a);e.bindMarker(d+'-even',a)}if(Ext.isObject(c)){a.getTemplate().setAttributes(c);if(Ext.isObject(c.even)){a.getTemplate().setAttributes(c.even)}}a=b.gridSpriteOdd;if(!a){a=b.gridSpriteOdd=new Ext.chart.Markers();a.setTemplate({xclass:'grid.'+d});f.add(a);e.bindMarker(d+'-odd',a)}if(Ext.isObject(c)){a.getTemplate().setAttributes(c);if(Ext.isObject(c.odd)){a.getTemplate().setAttributes(c.odd)}}}},updateMinorTickSteps:function(e){var b=this,d=b.getSprites(),c=d&&d[0],a;if(c){c.setAttributes({minorTicks:!!e});a=b.getSurface();if(!b.isConfiguring&&a){a.renderFrame()}}},getCoordFor:function(c,a,d,b){return this.getLayout().getCoordFor(c,a,d,b)},applyPosition:function(a){return a.toLowerCase()},applyLength:function(a,b){return a>0?a:b},applyLabel:function(b,a){if(!a){a=new Ext.draw.sprite.Text({})}if(b){if(this.limitTitleTpl){this.limitTitleTpl.setAttributes(b)}a.setAttributes(b)}return a},applyLayout:function(a,b){a=Ext.factory(a,null,b,'axisLayout');a.setAxis(this);return a},applySegmenter:function(a,b){a=Ext.factory(a,null,b,'segmenter');a.setAxis(this);return a},updateMinimum:function(){this.range=null},updateMaximum:function(){this.range=null},hideLabels:function(){this.getSprites()[0].setDirty(!0);this.setLabel({hidden:!0})},showLabels:function(){this.getSprites()[0].setDirty(!0);this.setLabel({hidden:!1})},renderFrame:function(){this.getSurface().renderFrame()},updateChart:function(b,c){var a=this,d;if(c){c.unregister(a);c.un('serieschange',a.onSeriesChange,a);a.linkAxis();a.fireEvent('chartdetached',c,a)}if(b){b.on('serieschange',a.onSeriesChange,a);a.surface=null;d=a.getSurface();a.getLabel().setSurface(d);d.add(a.getSprites());d.add(a.getTitle());b.register(a);a.fireEvent('chartattached',b,a)}},applyBackground:function(a){var b=Ext.ClassManager.getByAlias('sprite.rect');return b.def.normalize(a)},processData:function(){this.getLayout().processData();this.range=null},getDirection:function(){return this.getChart().getDirectionForAxis(this.getPosition())},isSide:function(){var a=this.getPosition();return a==='left'||a==='right'},applyFields:function(a){return Ext.Array.from(a)},applyVisibleRange:function(a,b){var c;this.getChart();if(a[0]>a[1]){c=a[0];a[0]=a[1];a[0]=c}if(a[1]===a[0]){a[1]+=1/this.getMaxZoom()}if(a[1]>a[0]+1){a[0]=0;a[1]=1}else {if(a[0]<0){a[1]-=a[0];a[0]=0}else {if(a[1]>1){a[0]-=a[1]-1;a[1]=1}}}if(b&&a[0]===b[0]&&a[1]===b[1]){return undefined}return a},updateVisibleRange:function(a){this.fireEvent('visiblerangechange',this,a)},onSeriesChange:function(h){var a=this,c=h.getSeries(),g=[],e,d,f,b,i;if(c){f='get'+a.getDirection()+'Axis';for(b=0,i=c.length;b<i;b++){if(this===c[b][f]()){g.push(c[b])}}}a.boundSeries=g;e=a.getLinkedTo();d=!Ext.isEmpty(e)&&h.getAxis(e);if(d){a.linkAxis(d)}else {a.getLayout().processData()}},linkAxis:function(b){var a=this;function link(a,d,c){c.getLayout()[a]('datachange','onDataChange',d);c[a]('rangechange','onMasterAxisRangeChange',d)}if(a.masterAxis){if(!a.masterAxis.destroyed){link('un',a,a.masterAxis)}a.masterAxis=null}if(b){if(b.type!==this.type){Ext.Error.raise('Linked axes must be of the same type.')}link('on',a,b);a.onDataChange(b.getLayout().labels);a.onMasterAxisRangeChange(b,b.range);a.setStyle(Ext.apply({},a.config.style,b.config.style));a.setTitle(Ext.apply({},a.config.title,b.config.title));a.setLabel(Ext.apply({},a.config.label,b.config.label));a.masterAxis=b}},onDataChange:function(a){this.getLayout().labels=a},onMasterAxisRangeChange:function(b,a){this.range=a},applyRange:function(a){if(!a){return this.dataRange.slice(0)}else {return [a[0]===null?this.dataRange[0]:a[0],a[1]===null?this.dataRange[1]:a[1]]}},setBoundSeriesRange:function(h){var e=this.boundSeries,f={},d,a,c,b,g;f['range'+this.getDirection()]=h;for(a=0,g=e.length;a<g;a++){d=e[a];if(d.getHidden()===!0){continue}c=d.getSprites();for(b=0;b<c.length;b++){c[b].setAttributes(f)}}},getRange:function(f){var b=this,a=f?null:b.range,c=b.oldRange,e,d;if(!a){if(b.masterAxis){a=b.masterAxis.range}else {e=b.getMinimum();d=b.getMaximum();if(Ext.isNumber(e)&&Ext.isNumber(d)){a=[e,d]}else {a=b.calculateRange()}b.range=a}}if(a&&(!c||a[0]!==c[0]||a[1]!==c[1])){b.fireEvent('rangechange',b,a,c);b.oldRange=a}return a},isSingleDataPoint:function(a){return a[0]+this.rangePadding===0&&a[1]-this.rangePadding===0},calculateRange:function(){var b=this,l=b.boundSeries,o=b.getLayout(),f=b.getSegmenter(),n=b.getMinimum(),m=b.getMaximum(),k=b.getVisibleRange(),q='get'+b.getDirection()+'Range',h=b.getExpandRangeBy(),e,c,d,j,g,p,i,a=[NaN,NaN];for(g=0,p=l.length;g<p;g++){j=l[g];if(j.getHidden()===!0){continue}i=j[q]();if(i){Ext.chart.Util.expandRange(a,i)}}a=Ext.chart.Util.validateRange(a,b.defaultRange,b.rangePadding);if(h&&!b.isSingleDataPoint(a)){a[0]-=h;a[1]+=h}if(isFinite(n)){a[0]=n}if(isFinite(m)){a[1]=m}a[0]=Ext.Number.correctFloat(a[0]);a[1]=Ext.Number.correctFloat(a[1]);b.range=a;if(b.getReconcileRange()){b.reconcileRange()}if(a[0]!==a[1]&&b.getAdjustByMajorUnit()&&f.adjustByMajorUnit&&!b.getMajorTickSteps()){c=Ext.Object.chain(b.getSprites()[0].attr);c.min=a[0];c.max=a[1];c.visibleMin=k[0];c.visibleMax=k[1];e={attr:c,segmenter:f};o.calculateLayout(e);d=e.majorTicks;if(d){f.adjustByMajorUnit(d.step,d.unit.scale,a);c.min=a[0];c.max=a[1];e.majorTicks=null;o.calculateLayout(e);d=e.majorTicks;f.adjustByMajorUnit(d.step,d.unit.scale,a)}else {if(!b.hasClearRangePending){b.hasClearRangePending=!0;b.getChart().on('layout','clearRange',b)}}}return a},clearRange:function(){this.hasClearRangePending=null;this.range=null},reconcileRange:function(){var a=this,e=a.getChart().getAxes(),g=a.getDirection(),d,f,c,b;if(!e){return}for(d=0,f=e.length;d<f;d++){c=e[d];b=c.getRange();if(c===a||c.getDirection()!==g||!b||!c.getReconcileRange()){continue}if(b[0]<a.range[0]){a.range[0]=b[0]}if(b[1]>a.range[1]){a.range[1]=b[1]}}},applyStyle:function(b,a){var c=Ext.ClassManager.getByAlias('sprite.'+this.seriesType);if(c&&c.def){b=c.def.normalize(b)}a=Ext.apply(a||{},b);return a},themeOnlyIfConfigured:{grid:!0},updateTheme:function(p){var c=this,d=p.getAxis(),n=c.getPosition(),m=c.getInitialConfig(),l=c.defaultConfig,o=c.self.getConfigurator().configs,k=d.defaults,j=d[n],i=c.themeOnlyIfConfigured,b,a,g,e,f,h;d=Ext.merge({},k,j);for(b in d){a=d[b];h=o[b];if(a!==null&&a!==undefined&&h){f=m[b];g=Ext.isObject(a);e=f===l[b];if(g){if(e&&i[b]){continue}a=Ext.merge({},a,f)}if(e||g){c[h.names.set](a)}}}},updateCenter:function(e){var c=this,f=c.getSprites(),d=f[0],a=e[0],b=e[1];if(d){d.setAttributes({centerX:a,centerY:b})}if(c.gridSpriteEven){c.gridSpriteEven.getTemplate().setAttributes({translationX:a,translationY:b,rotationCenterX:a,rotationCenterY:b})}if(c.gridSpriteOdd){c.gridSpriteOdd.getTemplate().setAttributes({translationX:a,translationY:b,rotationCenterX:a,rotationCenterY:b})}},getSprites:function(){if(!this.getChart()){return}var a=this,g=a.getRange(),h=a.getPosition(),j=a.getChart(),f=j.getAnimation(),i=a.getLength(),e=a.superclass,b,c,d;if(f===!1){f={duration:0}}c=Ext.applyIf({position:h,axis:a,length:i,grid:a.getGrid(),hidden:a.getHidden(),titleOffset:a.titleOffset,layout:a.getLayout(),segmenter:a.getSegmenter(),totalAngle:a.getTotalAngle(),label:a.getLabel()},a.getStyle());if(g){c.min=g[0];c.max=g[1]}if(!a.sprites.length){while(!e.xtype){e=e.superclass}b=Ext.create('sprite.'+e.xtype,c);d=b.getAnimation();d.setCustomDurations({baseRotation:0});d.on('animationstart','onAnimationStart',a);d.on('animationend','onAnimationEnd',a);b.setLayout(a.getLayout());b.setSegmenter(a.getSegmenter());b.setLabel(a.getLabel());a.sprites.push(b);a.updateTitleSprite()}else {b=a.sprites[0];b.setAnimation(f);b.setAttributes(c)}if(a.getRenderer()){b.setRenderer(a.getRenderer())}return a.sprites},performLayout:function(){if(this.isConfiguring){return}var a=this,b=a.getSprites(),e=a.getSurface(),d=a.getChart(),c=b&&b[0];if(d&&e&&c){c.callUpdater(null,'layout');d.scheduleLayout()}},updateTitleSprite:function(){var c=this,i=c.getLength(),h,f,a,g,e,b,d;if(!c.sprites[0]||!Ext.isNumber(i)){return}f=this.sprites[0].thickness;h=c.getSurface();a=c.getTitle();g=c.getPosition();e=c.getMargin();b=c.getTitleMargin();d=h.roundPixel(i/2);if(a){switch(g){case 'top':a.setAttributes({x:d,y:e+b/2,textBaseline:'top',textAlign:'center'},!0);a.applyTransformations();c.titleOffset=a.getBBox().height+b;break;case 'bottom':a.setAttributes({x:d,y:f+b/2,textBaseline:'top',textAlign:'center'},!0);a.applyTransformations();c.titleOffset=a.getBBox().height+b;break;case 'left':a.setAttributes({x:e+b/2,y:d,textBaseline:'top',textAlign:'center',rotationCenterX:e+b/2,rotationCenterY:d,rotationRads:-Math.PI/2},!0);a.applyTransformations();c.titleOffset=a.getBBox().width+b;break;case 'right':a.setAttributes({x:f-e+b/2,y:d,textBaseline:'bottom',textAlign:'center',rotationCenterX:f+b/2,rotationCenterY:d,rotationRads:Math.PI/2},!0);a.applyTransformations();c.titleOffset=a.getBBox().width+b;break;}}},onThicknessChanged:function(){this.getChart().onThicknessChanged()},getThickness:function(){if(this.getHidden()){return 0}return (this.sprites[0]&&this.sprites[0].thickness||1)+this.titleOffset+this.getMargin()},onAnimationStart:function(){this.spriteAnimationCount++;if(this.spriteAnimationCount===1){this.fireEvent('animationstart',this)}},onAnimationEnd:function(){this.spriteAnimationCount--;if(this.spriteAnimationCount===0){this.fireEvent('animationend',this)}},getItemId:function(){return this.getId()},getAncestorIds:function(){return [this.getChart().getId()]},isXType:function(a){return a==='axis'},resolveListenerScope:function(d){var c=this,e=Ext._namedScopes[d],a=c.getChart(),b;if(!e){b=a?a.resolveListenerScope(d,!1):d||c}else {if(e.isThis){b=c}else {if(e.isController){b=a?a.resolveListenerScope(d,!1):c}else {if(e.isSelf){b=a?a.resolveListenerScope(d,!1):c;if(b===a&&!a.getInheritedConfig('defaultListenerScope')){b=c}}}}}return b},destroy:function(){var a=this;a.setChart(null);a.surface.destroy();a.surface=null;a.callParent()}});Ext.define('Ext.chart.legend.LegendBase',{extend:Ext.view.View,config:{tpl:['<div class="',Ext.baseCSSPrefix,'legend-inner">','<div class="',Ext.baseCSSPrefix,'legend-container">','<tpl for=".">','<div class="',Ext.baseCSSPrefix,'legend-item">','<span ','class="',Ext.baseCSSPrefix,"legend-item-marker {[ values.disabled ? Ext.baseCSSPrefix + 'legend-item-inactive' : '' ]}\" ",'style="background:{mark};">','</span>{name}','</div>','</tpl>','</div>','</div>'],nodeContainerSelector:'div.'+Ext.baseCSSPrefix+'legend-inner',itemSelector:'div.'+Ext.baseCSSPrefix+'legend-item',docked:'bottom'},setDocked:function(b){var a=this,c=a.ownerCt;a.docked=a.dock=b;switch(b){case 'top':case 'bottom':a.addCls(a.horizontalCls);a.removeCls(a.verticalCls);break;case 'left':case 'right':a.addCls(a.verticalCls);a.removeCls(a.horizontalCls);break;}if(c){c.setDock(b)}},setStore:function(a){this.bindStore(a)},clearViewEl:function(){this.callParent(arguments);Ext.removeNode(this.getNodeContainer())},onItemClick:function(b,c,a,d){this.callParent(arguments);this.toggleItem(a)}});Ext.define('Ext.chart.legend.Legend',{extend:Ext.chart.legend.LegendBase,alternateClassName:'Ext.chart.Legend',xtype:'legend',alias:'legend.dom',type:'dom',isLegend:!0,isDomLegend:!0,config:{rect:null,toggleable:!0},baseCls:Ext.baseCSSPrefix+'legend',horizontalCls:Ext.baseCSSPrefix+'legend-horizontal',verticalCls:Ext.baseCSSPrefix+'legend-vertical',toggleItem:function(h){var f=0,g=!0,d,b,e,a,c;if(!this.getToggleable()){return}b=this.getStore();if(b){e=b.getCount();for(c=0;c<e;c++){a=b.getAt(c);if(a.get('disabled')){f++}}g=e-f>1;a=b.getAt(h);if(a){d=a.get('disabled');if(d||g){a.set('disabled',!d)}}}},onResize:function(f,e,d,c){var b=this,a=b.chart;if(!b.isConfiguring){if(a){a.scheduleLayout()}}}});Ext.define('Ext.chart.legend.sprite.Item',{extend:Ext.draw.sprite.Composite,alias:'sprite.legenditem',type:'legenditem',isLegendItem:!0,inheritableStatics:{def:{processors:{enabled:'limited01',markerLabelGap:'number'},animationProcessors:{enabled:null,markerLabelGap:null},defaults:{enabled:!0,markerLabelGap:5},triggers:{enabled:'enabled',markerLabelGap:'layout'},updaters:{layout:'layoutUpdater',enabled:'enabledUpdater'}}},config:{label:{$value:{type:'text'},lazy:!0},marker:{$value:{type:'circle'},lazy:!0},legend:null,store:null,record:null,series:null},applyLabel:function(a,b){var c;if(a){if(a.isSprite&&a.type==='text'){c=a}else {if(b&&a.type===b.type){b.setConfig(a);c=b;this.scheduleUpdater(this.attr,'layout')}else {c=new Ext.draw.sprite.Text(a)}}}return c},defaultMarkerSize:10,updateLabel:function(b,c){var a=this;a.removeSprite(c);b.setAttributes({textBaseline:'middle'});a.addSprite(b);a.scheduleUpdater(a.attr,'layout')},applyMarker:function(a){var b;if(a){if(a.isSprite){b=a}else {b=this.createMarker(a)}}b=this.resetMarker(b,a);return b},createMarker:function(a){var b;delete a.animation;if(a.type==='image'){delete a.width;delete a.height}b=Ext.create('sprite.'+a.type,a);return b},resetMarker:function(a,e){var d=e.size||this.defaultMarkerSize,c,f,b;a.setTransform([1,0,0,1,0,0],!0);if(e.type==='image'){a.setAttributes({width:d,height:d})}else {c=a.getBBox();f=Math.max(c.width,c.height);b=d/f;a.setAttributes({scalingX:b,scalingY:b})}return a},updateMarker:function(c,b){var a=this;a.removeSprite(b);a.addSprite(c);a.scheduleUpdater(a.attr,'layout')},updateSurface:function(b,c){var a=this;a.callParent([b,c]);if(b){a.scheduleUpdater(a.attr,'layout')}},enabledUpdater:function(b){var a=this.getMarker();if(a){a.setAttributes({globalAlpha:b.enabled?1:0.3})}},layoutUpdater:function(){var c=this,g=c.attr,f=c.getLabel(),e=c.getMarker(),b,a,d;a=e.getBBox();b=f.getBBox();d=Math.max(a.height,b.height);e.transform([1,0,0,1,-a.x,-a.y+(d-a.height)/2],!0);f.transform([1,0,0,1,-b.x+a.width+g.markerLabelGap,-b.y+(d-b.height)/2],!0);c.bboxUpdater(g)}});Ext.define('Ext.chart.legend.sprite.Border',{extend:Ext.draw.sprite.Rect,alias:'sprite.legendborder',type:'legendborder',isLegendBorder:!0});Ext.define('Ext.draw.PathUtil',function(){var a=Math.abs,c=Math.pow,d=Math.cos,f=Math.acos,b=Math.sqrt,e=Math.PI;return {singleton:!0,cubicRoots:function(n){var q=n[0],u=n[1],v=n[2],w=n[3];if(q===0){return this.quadraticRoots(u,v,w)}var h=u/q,t=v/q,x=w/q,l=(3*t-c(h,2))/9,i=(9*h*t-27*x-2*c(h,3))/54,k=c(l,3)+c(i,2),g=[],o,p,s,m,j,r=Ext.Number.sign;if(k>=0){o=r(i+b(k))*c(a(i+b(k)),1/3);p=r(i-b(k))*c(a(i-b(k)),1/3);g[0]=-h/3+(o+p);g[1]=-h/3-(o+p)/2;g[2]=g[1];s=a(b(3)*(o-p)/2);if(s!==0){g[1]=-1;g[2]=-1}}else {m=f(i/b(-c(l,3)));g[0]=2*b(-l)*d(m/3)-h/3;g[1]=2*b(-l)*d((m+2*e)/3)-h/3;g[2]=2*b(-l)*d((m+4*e)/3)-h/3}for(j=0;j<3;j++){if(g[j]<0||g[j]>1){g[j]=-1}}return g},quadraticRoots:function(e,c,h){var f,g,a,d;if(e===0){return this.linearRoot(c,h)}f=c*c-4*e*h;if(f===0){a=[-c/(2*e)]}else {if(f>0){g=b(f);a=[(-c-g)/(2*e),(-c+g)/(2*e)]}else {return []}}for(d=0;d<a.length;d++){if(a[d]<0||a[d]>1){a[d]=-1}}return a},linearRoot:function(b,c){var a=-c/b;if(b===0||a<0||a>1){return []}return [a]},bezierCoeffs:function(b,c,d,e){var a=[];a[0]=-b+3*c-3*d+e;a[1]=3*b-6*c+3*d;a[2]=-3*b+3*c;a[3]=b;return a},cubicLineIntersections:function(s,t,u,v,w,x,y,z,d,e,h,p){var f=[],r=[],i=e-p,j=h-d,A=d*(p-e)-e*(h-d),a=this.bezierCoeffs(s,t,u,v),b=this.bezierCoeffs(w,x,y,z),k,q,l,c,g,m,n,o;f[0]=i*a[0]+j*b[0];f[1]=i*a[1]+j*b[1];f[2]=i*a[2]+j*b[2];f[3]=i*a[3]+j*b[3]+A;q=this.cubicRoots(f);for(k=0;k<q.length;k++){c=q[k];if(c<0||c>1){continue}g=c*c;m=g*c;n=a[0]*m+a[1]*g+a[2]*c+a[3];o=b[0]*m+b[1]*g+b[2]*c+b[3];if(h-d!==0){l=(n-d)/(h-d)}else {l=(o-e)/(p-e)}if(!(l<0||l>1)){r.push([n,o])}}return r},splitCubic:function(d,e,f,g,a){var h=a*a,k=a*h,b=a-1,c=b*b,j=b*c,i=k*g-3*h*b*f+3*a*c*e-j*d;return [[d,a*e-b*d,h*f-2*a*b*e+c*d,i],[i,h*g-2*a*b*f+c*e,a*g-b*f,g]]},cubicDimension:function(f,h,k,i){var l=3*(-f+3*(h-k)+i),j=6*(f-2*h+k),m=-3*(f-h),a,c,e=Math.min(f,i),d=Math.max(f,i),g;if(l===0){if(j===0){return [e,d]}else {a=-m/j;if(0<a&&a<1){c=this.interpolateCubic(f,h,k,i,a);e=Math.min(e,c);d=Math.max(d,c)}}}else {g=j*j-4*l*m;if(g>=0){g=b(g);a=(g-j)/2/l;if(0<a&&a<1){c=this.interpolateCubic(f,h,k,i,a);e=Math.min(e,c);d=Math.max(d,c)}if(g>0){a-=g/l;if(0<a&&a<1){c=this.interpolateCubic(f,h,k,i,a);e=Math.min(e,c);d=Math.max(d,c)}}}}return [e,d]},interpolateCubic:function(c,e,f,d,a){var b;if(a===0){return c}if(a===1){return d}b=(1-a)/a;return a*a*a*(d+b*(3*f+b*(3*e+b*c)))},cubicsIntersections:function(h,l,m,i,j,k,n,o,p,q,r,s,t,u,v,w){var b=this,x=b.cubicDimension(h,l,m,i),y=b.cubicDimension(j,k,n,o),z=b.cubicDimension(p,q,r,s),A=b.cubicDimension(t,u,v,w),d,e,f,g,c=[];if(x[0]>z[1]||x[1]<z[0]||y[0]>A[1]||y[1]<A[0]){return []}if(a(j-k)<1&&a(n-o)<1&&a(h-i)<1&&a(l-m)<1&&a(t-u)<1&&a(v-w)<1&&a(p-s)<1&&a(q-r)<1){return [[(h+i)*0.5,(j+k)*0.5]]}d=b.splitCubic(h,l,m,i,0.5);e=b.splitCubic(j,k,n,o,0.5);f=b.splitCubic(p,q,r,s,0.5);g=b.splitCubic(t,u,v,w,0.5);c.push.apply(c,b.cubicsIntersections.apply(b,d[0].concat(e[0],f[0],g[0])));c.push.apply(c,b.cubicsIntersections.apply(b,d[0].concat(e[0],f[1],g[1])));c.push.apply(c,b.cubicsIntersections.apply(b,d[1].concat(e[1],f[0],g[0])));c.push.apply(c,b.cubicsIntersections.apply(b,d[1].concat(e[1],f[1],g[1])));return c},linesIntersection:function(a,b,g,h,d,e,j,k){var i=(g-a)*(k-e)-(h-b)*(j-d),c,f;if(i===0){return null}c=((j-d)*(b-e)-(a-d)*(k-e))/i;f=((g-a)*(b-e)-(h-b)*(a-d))/i;if(c>=0&&c<=1&&f>=0&&f<=1){return [a+c*(g-a),b+c*(h-b)]}return null},pointOnLine:function(c,d,e,f,h,i){var g,b;if(a(e-c)<a(f-d)){b=c;c=d;d=b;b=e;e=f;f=b;b=h;h=i;i=b}g=(h-c)/(e-c);if(g<0||g>1){return !1}return a(d+g*(f-d)-i)<4},pointOnCubic:function(j,k,l,m,n,o,p,q,r,s){var b=this,h=b.bezierCoeffs(j,k,l,m),i=b.bezierCoeffs(n,o,p,q),c,d,f,g,e;h[3]-=r;i[3]-=s;f=b.cubicRoots(h);g=b.cubicRoots(i);for(c=0;c<f.length;c++){e=f[c];for(d=0;d<g.length;d++){if(e>=0&&e<=1&&a(e-g[d])<0.05){return !0}}}return !1}}});Ext.define('Ext.draw.overrides.hittest.All',{});Ext.define('Ext.chart.legend.SpriteLegend',{alias:'legend.sprite',type:'sprite',isLegend:!0,isSpriteLegend:!0,mixins:[Ext.mixin.Observable],config:{docked:'bottom',store:null,chart:null,surface:null,size:{width:0,height:0},toggleable:!0,padding:10,label:{preciseMeasurement:!0},marker:{},border:{$value:{type:'legendborder'},lazy:!0},background:null,hidden:!1},sprites:null,spriteZIndexes:{background:0,border:1,item:2},dockedValues:{left:!0,right:!0,top:!0,bottom:!0},constructor:function(b){var a=this;a.oldSize={width:0,height:0};a.getId();a.mixins.observable.constructor.call(a,b)},isXType:function(a){return a==='sprite'},applyStore:function(a){return a&&Ext.StoreManager.lookup(a)},updateStore:function(b,c){var a=this;if(c){c.un('datachanged',a.onDataChanged,a);c.un('update',a.onDataUpdate,a)}if(b){b.on('datachanged',a.onDataChanged,a);b.on('update',a.onDataUpdate,a);a.onDataChanged(b)}a.performLayout()},updateDocked:function(a){this.isTop=a==='top';if(!this.isConfiguring){this.layoutChart()}},updateHidden:function(b){var a;this.getChart();a=this.getSurface();if(a){a.setHidden(b)}if(!this.isConfiguring){this.layoutChart()}},layoutChart:function(){var a;if(!this.isConfiguring){a=this.getChart();if(a){a.scheduleLayout()}}},computeRect:function(a){var b,f,e,c,d;if(this.getHidden()){return null}b=[0,0,0,0];f=this.getDocked();e=this.getSize();c=e.height;d=e.width;switch(f){case 'top':b[1]=a[1];b[2]=a[2];b[3]=c;a[1]+=c;a[3]-=c;break;case 'bottom':a[3]-=c;b[1]=a[3];b[2]=a[2];b[3]=c;break;case 'left':a[0]+=d;a[2]-=d;b[2]=d;b[3]=a[3];break;case 'right':a[2]-=d;b[0]=a[2];b[2]=d;b[3]=a[3];break;}return b},applyBorder:function(b){var a;if(b){if(b.isSprite){a=b}else {a=Ext.create('sprite.'+b.type,b)}}if(a){a.isLegendBorder=!0;a.setAttributes({zIndex:this.spriteZIndexes.border})}return a},updateBorder:function(c,b){var a=this.getSurface();this.borderSprite=null;if(a){if(b){a.remove(b)}if(c){this.borderSprite=a.add(c)}}},scheduleLayout:function(){if(!this.scheduledLayoutId){this.scheduledLayoutId=Ext.draw.Animator.schedule('performLayout',this)}},cancelLayout:function(){Ext.draw.Animator.cancel(this.scheduledLayoutId);this.scheduledLayoutId=null},performLayout:function(){var f=this,l=f.getSize(),c=f.getPadding(),n=f.getSprites(),o=f.getSurface(),A=f.getBackground(),w=o.getRect(),E=f.getStore(),k=n&&n.length||0,a,r;if(!o||!w||!E){return !1}f.cancelLayout();var D=f.getDocked(),m=w[2],u=w[3],q=f.borderSprite,p=[],x,y,e,g,b,h,v,j,i,t,C,B,d,z,s;for(a=0;a<k;a++){r=n[a];d=r.getBBox();p.push(d)}if(d){B=d.height}switch(D){case 'bottom':case 'top':if(!m){return !1};e=0;do{h=0;b=0;g=0;e++;for(a=0;a<k;a++){d=p[a];if(d.width>b){b=d.width;b=Math.min(b,m-c*4)}if((a+1)%e===0){h+=b;b=0;g++}}if(a%e!==0){h+=b;g++}j=h+(g-1)*c;t=j+c*4}while(t>m);i=B*e+(e-1)*c;break;case 'right':case 'left':if(!u){return !1};e=k*2;do{e=(e>>1)+e%2;h=0;v=0;b=0;g=0;for(a=0;a<k;a++){d=p[a];if(!g){v+=d.height}if(d.width>b){b=d.width}if((a+1)%e===0){h+=b;b=0;g++}}if(a%e!==0){h+=b;g++}j=h+(g-1)*c;i=v+(e-1)*c;t=j+c*4;C=i+c*4}while(i>u);break;}x=(m-j)/2;y=(u-i)/2;z=0;s=0;b=0;for(a=0;a<k;a++){r=n[a];d=p[a];r.setAttributes({translationX:x+z,translationY:y+s});if(d.width>b){b=d.width}if((a+1)%e===0){z+=b+c;s=0;b=0}else {s+=d.height+c}}if(q){q.setAttributes({hidden:!k,x:x-c,y:y-c,width:j+c*2,height:i+c*2})}l.width=q.attr.width+c*2;l.height=q.attr.height+c*2;if(l.width!==f.oldSize.width||l.height!==f.oldSize.height){Ext.apply(f.oldSize,l);f.getChart().scheduleLayout();return !1}if(A){f.resizeBackground(o,A)}o.renderFrame();return !0},getSprites:function(){this.updateSprites();return this.sprites},createSprite:function(e,h){var c=this,b=h.data,k=c.getChart(),i=k.get(b.series),d=i.getMarker(),j=null,a,g,f;if(e){a=i.getMarkerStyleByIndex(b.index);a.fillStyle=b.mark;a.hidden=!1;if(d&&d.type){a.type=d.type}Ext.apply(a,c.getMarker());a.surface=e;g=c.getLabel();f={type:'legenditem',zIndex:c.spriteZIndexes.item,text:b.name,enabled:!b.disabled,marker:a,label:g,series:b.series,record:h};j=e.add(f)}return j},updateSprites:function(){var a=this,k=a.getChart(),l=a.getStore(),g=a.getSurface(),j,i,c,b,e,d,f,h;if(!(k&&l&&g)){return}a.sprites=d=a.sprites||[];i=l.getData().items;e=i.length;for(b=0;b<e;b++){j=i[b];c=d[b];if(c){a.updateSprite(c,j)}else {c=a.createSprite(g,j);g.add(c);d.push(c)}}f=Ext.Array.splice(d,b,d.length);for(b=0,e=f.length;b<e;b++){c=f[b];c.destroy()}h=a.getBorder();if(h){a.borderSprite=h}a.updateTheme(k.getTheme())},updateSprite:function(a,e){var c=e.data,h=this.getChart(),g=h.get(c.series),d,f,b;if(a){f=a.getLabel();f.setAttributes({text:c.name});a.setAttributes({enabled:!c.disabled});a.setConfig({series:c.series,record:e});b=g.getMarkerStyleByIndex(c.index);b.fillStyle=c.mark;b.hidden=!1;Ext.apply(b,this.getMarker());d=a.getMarker();d.setAttributes({fillStyle:b.fillStyle,strokeStyle:b.strokeStyle});a.layoutUpdater(a.attr)}},updateChart:function(a,c){var b=this;if(c){b.setSurface(null)}if(a){b.setSurface(a.getSurface('legend'))}},updateSurface:function(b,a){if(a){a.el.un('click','onClick',this);a.removeAll(!0)}if(b){b.isLegendSurface=!0;b.el.on('click','onClick',this)}},onClick:function(e){var c=this.getChart(),b=this.getSurface(),a,d;if(c&&c.hasFirstLayout&&b){d=b.getEventXY(e);a=b.hitTest(d);if(a&&a.sprite){this.toggleItem(a.sprite)}}},applyBackground:function(c,d){var b=this,f=b.getChart(),e=b.getSurface(),a;a=f.refreshBackground(e,c,d);if(a){a.setAttributes({zIndex:b.spriteZIndexes.background})}return a},resizeBackground:function(c,b){var e=b.attr.width,d=b.attr.height,a=c.getRect();if(a&&(e!==a[2]||d!==a[3])){b.setAttributes({width:a[2],height:a[3]})}},themeableConfigs:{background:!0},updateTheme:function(w){var e=this,v=e.getSurface(),o=v.getItems(),g=w.getLegend(),u=e.getLabel(),n=e.self.getConfigurator().configs,r=e.themeableConfigs,q=e.themeOnlyIfConfigured,t=e.getInitialConfig(),s=e.defaultConfig,b,h,l,j,k,f,d,m,a,c,i,p;for(i=0,p=o.length;i<p;i++){f=o[i];if(f.isLegendItem){d=g.label;if(d){c=null;for(a in d){if(!(a in u)){c=c||{};c[a]=d[a]}}if(c){m=f.getLabel();m.setAttributes(c)}}continue}else {if(f.isLegendBorder){d=g.border}else {continue}}if(d){c={};for(a in d){if(!(a in f.config)){c[a]=d[a]}}f.setAttributes(c)}}b=g.background;h=n.background;if(b!==null&&b!==undefined&&h){}for(a in g){if(!(a in r)){continue}b=g[a];h=n[a];if(b!==null&&b!==undefined&&h){k=t[a];l=Ext.isObject(b);j=k===s[a];if(l){if(j&&q[a]){continue}b=Ext.merge({},b,k)}if(j||l){e[h.names.set](b)}}}},onDataChanged:function(a){this.updateSprites();this.scheduleLayout()},onDataUpdate:function(i,g){var c=this,f=c.sprites,h=f.length,d=0,a,e,b;for(;d<h;d++){a=f[d];e=a.getRecord();if(e===g){b=a;break}}if(b){c.updateSprite(b,g);c.scheduleLayout()}},toggleItem:function(e){var g=0,h=!0,c,d,f,a,b;if(!this.getToggleable()||!e.isLegendItem){return}c=this.getStore();if(c){f=c.getCount();for(d=0;d<f;d++){a=c.getAt(d);if(a.get('disabled')){g++}}h=f-g>1;a=e.getRecord();if(a){b=a.get('disabled');if(b||h){a.set('disabled',!b);e.setAttributes({enabled:b})}}}},destroy:function(){var a=this;a.destroying=!0;a.cancelLayout();a.setChart(null);a.callParent()}});Ext.define('Ext.chart.legend.SpriteLegendIsXTypePatch',{override:'Ext.chart.legend.SpriteLegend',isXType:function(a){return a==='sprite'},getItemId:function(){return this.getId()}});Ext.define('Ext.chart.Caption',{mixins:[Ext.mixin.Observable,Ext.mixin.Bindable],isCaption:!0,config:{weight:0,text:'',align:'center',alignTo:'series',padding:0,hidden:!1,docked:'top',style:{fontSize:'14px',fontWeight:'bold',fontFamily:'Verdana, Aria, sans-serif'},chart:null,sprite:{type:'text',preciseMeasurement:!0,zIndex:10},rect:null},surfaceName:'caption',constructor:function(c){var a=this,b;if('id' in c){b=c.id}else {if('id' in a.config){b=a.config.id}else {b=a.getId()}}a.setId(b);a.mixins.observable.constructor.call(a,c);a.initBindable()},updateChart:function(){if(!this.isConfiguring){this.setSprite({type:'text'})}},applySprite:function(b){var a=this,d=a.getChart(),c=a.surface=d.getSurface(a.surfaceName);return b&&c.add(b)},updateSprite:function(b,a){if(a){a.destroy()}},updateText:function(a){this.getSprite().setAttributes({text:a})},updateStyle:function(a){this.getSprite().setAttributes(a)},updateRect:function(a){if(this.rectSprite){this.rectSprite.setAttributes({x:a[0],y:a[1],width:a[2],height:a[3]})}},updateDocked:function(){var a=this.getChart();if(a&&!this.isConfiguring){a.scheduleLayout()}},computeRect:function(d,c){if(this.getHidden()){return null}var b=[0,0,d[2],0],g=this.getDocked(),f=this.getPadding(),e=this.getSprite().getBBox(),a=e.height+f*2;switch(g){case 'top':b[1]=c.top;b[3]=a;d[1]+=a;d[3]-=a;c.top+=a;break;case 'bottom':d[3]-=a;c.bottom-=a;b[1]=c.bottom;b[3]=a;break;}this.setRect(b)},alignRect:function(b){var c=this.surface.getRect(),a=this.getRect();a[0]=b[0]-c[0];a[2]=b[2];this.setRect(a.slice())},performLayout:function(){var e=this,c=e.getRect(),f=c[0],m=c[1],g=c[2],i=c[3],b=e.getSprite(),k=b.attr.translationX,l=b.attr.translationY,a=b.getBBox(),j=e.getAlign(),d,h;switch(j){case 'left':d=f-a.x;break;case 'right':d=f+g-(a.x+a.width);break;case 'center':d=f+(g-a.width)/2-a.x;break;}h=m+(i-a.height)/2-a.y;b.setAttributes({translationX:k+d,translationY:l+h})},destroy:function(){var a=this;a.getSprite().destroy();a.callParent()}});Ext.define('Ext.chart.legend.store.Item',{extend:Ext.data.Model,fields:['id','name','mark','disabled','series','index']});Ext.define('Ext.chart.legend.store.Store',{extend:Ext.data.Store,model:'Ext.chart.legend.store.Item',isLegendStore:!0,config:{autoDestroy:!0}});Ext.define('Ext.chart.AbstractChart',{extend:Ext.draw.Container,isChart:!0,defaultBindProperty:'store',config:{store:'ext-empty-store',theme:'default',captions:null,style:null,animation:!Ext.isIE8,series:[],axes:[],legend:null,colors:null,insetPadding:{top:10,left:10,right:10,bottom:10},background:null,interactions:[],mainRect:null,resizeHandler:null,highlightItem:null,surfaceZIndexes:{background:0,main:1,grid:2,series:3,axis:4,chart:5,caption:6,overlay:7,legend:8}},legendStore:null,animationSuspendCount:0,chartLayoutSuspendCount:0,chartLayoutCount:0,scheduledLayoutId:null,axisThicknessSuspendCount:0,isThicknessChanged:!1,constructor:function(b){var a=this;a.itemListeners={};a.surfaceMap={};a.chartComponents={};a.isInitializing=!0;a.suspendChartLayout();a.animationSuspendCount++;a.callParent(arguments);a.isInitializing=!1;a.getSurface('main');a.getSurface('chart').setFlipRtlText(a.getInherited().rtl);a.getSurface('overlay').waitFor(a.getSurface('series'));a.animationSuspendCount--;a.resumeChartLayout()},applyAnimation:function(b,a){return Ext.chart.Util.applyAnimation(b,a)},updateAnimation:function(){if(this.isConfiguring){return}var c=this.getSeries(),d=c.length,b,a;this.isSettingSeriesAnimation=!0;for(b=0;b<d;b++){a=c[b];if(!a.isUserAnimation||this.animationSuspendCount===0){a.setAnimation(a.getAnimation())}}this.isSettingSeriesAnimation=!1},getAnimation:function(){var a;if(this.animationSuspendCount){a={duration:0}}else {a=this.callParent()}return a},suspendAnimation:function(){this.animationSuspendCount++;if(this.animationSuspendCount===1){this.updateAnimation()}},resumeAnimation:function(){this.animationSuspendCount--;if(this.animationSuspendCount===0){this.updateAnimation()}},applyInsetPadding:function(a,c){var b;if(!Ext.isObject(a)){b=Ext.util.Format.parseBox(a)}else {if(!c){b=a}else {b=Ext.apply(c,a)}}return b},suspendChartLayout:function(){var a=this;a.chartLayoutSuspendCount++;if(a.chartLayoutSuspendCount===1){if(a.scheduledLayoutId){a.layoutInSuspension=!0;a.cancelChartLayout()}else {a.layoutInSuspension=!1}}},resumeChartLayout:function(){var a=this;a.chartLayoutSuspendCount--;if(a.chartLayoutSuspendCount===0){if(a.layoutInSuspension){a.scheduleLayout()}}},cancelChartLayout:function(){if(this.scheduledLayoutId){Ext.draw.Animator.cancel(this.scheduledLayoutId);this.scheduledLayoutId=null;this.checkLayoutEnd()}},scheduleLayout:function(){var a=this;if(a.allowSchedule()&&!a.scheduledLayoutId){a.scheduledLayoutId=Ext.draw.Animator.schedule('doScheduleLayout',a)}},allowSchedule:function(){return !0},doScheduleLayout:function(){var a=this;a.scheduledLayoutId=null;if(a.chartLayoutSuspendCount){a.layoutInSuspension=!0}else {a.performLayout()}},suspendThicknessChanged:function(){this.axisThicknessSuspendCount++},resumeThicknessChanged:function(){if(this.axisThicknessSuspendCount>0){this.axisThicknessSuspendCount--;if(this.axisThicknessSuspendCount===0&&this.isThicknessChanged){this.onThicknessChanged()}}},onThicknessChanged:function(){if(this.axisThicknessSuspendCount===0){this.isThicknessChanged=!1;this.performLayout()}else {this.isThicknessChanged=!0}},applySprites:function(a){var b=this.getSurface('chart');a=Ext.Array.from(a);b.removeAll(!0);b.add(a);return a},initItems:function(){var a=this.items,b,d,c;if(a&&!a.isMixedCollection){this.items=[];a=Ext.Array.from(a);for(b=0,d=a.length;b<d;b++){c=a[b];if(c.type){Ext.raise("To add custom sprites to the chart use the 'sprites' config.")}else {this.items.push(c)}}}this.callParent()},applyBackground:function(a,b){var c=this.getSurface('background');return this.refreshBackground(c,a,b)},refreshBackground:function(c,b,a){var f,e,d;if(b){if(a){f=a.attr.width;e=a.attr.height;d=a.type===(b.type||'rect')}if(b.isSprite){a=b}else {if(b.type==='image'&&Ext.isString(b.src)){if(d){a.setAttributes({src:b.src})}else {c.remove(a,!0);a=c.add(b)}}else {if(d){a.setAttributes({fillStyle:b})}else {c.remove(a,!0);a=c.add({type:'rect',fillStyle:b,animation:{customDurations:{x:0,y:0,width:0,height:0}}})}}}}if(f&&e){a.setAttributes({width:f,height:e})}a.setAnimation(this.getAnimation());return a},defaultResizeHandler:function(a){this.scheduleLayout();return !1},applyMainRect:function(a,b){if(!b){return a}this.getSeries();this.getAxes();if(a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]){return b}else {return a}},register:function(a){var b=this.chartComponents,c=a.getId();b[c]=a},unregister:function(a){var b=this.chartComponents,c=a.getId();delete b[c]},get:function(a){return this.chartComponents[a]},getAxis:function(a){if(a instanceof Ext.chart.axis.Axis){return a}else {if(Ext.isNumber(a)){return this.getAxes()[a]}else {if(Ext.isString(a)){return this.get(a)}}}},getSurface:function(d,a){var e=this,c=e.surfaceMap,b;d=d||'main';a=a||d;b=this.callParent([d,a]);if(!c[a]){c[a]=[]}if(Ext.Array.indexOf(c[a],b)<0){b.type=a;c[a].push(b);b.on('destroy',e.forgetSurface,e)}return b},forgetSurface:function(c){var d=this.surfaceMap,a,b;if(!d||this.destroying){return}a=d[c.type];b=a?Ext.Array.indexOf(a,c):-1;if(b>=0){a.splice(b,1)}},applyAxes:function(e,i){var c=this,n={left:'right',right:'left'},g=[],a,b,h,j,f,m,d,l,k;c.animationSuspendCount++;c.getStore();if(!i){i=[];i.map={}}f=i.map;g.map={};e=Ext.Array.from(e,!0);for(d=0,k=e.length;d<k;d++){a=e[d];if(!a){continue}if(a instanceof Ext.chart.axis.Axis){b=f[a.getId()];a.setChart(c)}else {a=Ext.Object.chain(a);h=a.linkedTo;j=a.id;if(Ext.isNumber(h)){a=Ext.merge({},e[h],a)}else {if(Ext.isString(h)){Ext.Array.each(e,function(b){if(b.id===a.linkedTo){a=Ext.merge({},b,a);return !1}})}}a.id=j;a.chart=c;if(c.getInherited().rtl){a.position=n[a.position]||a.position}j=a.getId&&a.getId()||a.id;a=Ext.factory(a,null,b=f[j],'axis')}if(a){g.push(a);g.map[a.getId()]=a}}c.axesChangeSeries={};for(d in f){if(!g.map[d]){b=f[d];if(b&&!b.destroyed){for(l=0,k=b.boundSeries.length;l<k;l++){m=b.boundSeries[l];c.axesChangeSeries[m.getId()]=m}b.destroy()}}}c.animationSuspendCount--;return g},updateAxes:function(e){var a=this,c=a.axesChangeSeries,d,g,b,h,f;for(g in c){d=c[g];d.onAxesChange(a,!0)}for(b=0,h=e.length;b<h;b++){f=e[b];f.onSeriesChange(a)}if(!a.isConfiguring&&!a.destroying){a.scheduleLayout()}},circularCopyArray:function(b,e,f){var c=[],a,d=b&&b.length;if(d){for(a=0;a<f;a++){c.push(b[(e+a)%d])}}return c},circularCopyObject:function(d,f,e){var g=this,a,b,c={};if(e){for(a in d){if(d.hasOwnProperty(a)){b=d[a];if(Ext.isArray(b)){c[a]=g.circularCopyArray(b,f,e)}else {c[a]=b}}}}return c},getColors:function(){var b=this,a=b.config.colors,c=b.getTheme();if(Ext.isArray(a)&&a.length>0){a=b.applyColors(a)}return a||c&&c.getColors()},applyColors:function(a){a=Ext.Array.map(a,function(b){if(Ext.isString(b)){return b}else {return b.toString()}});return a},updateColors:function(k){var a=this,i=a.getTheme(),h=k||i&&i.getColors(),g=0,e=a.getSeries(),j=e&&e.length,b,d,f,c;if(h.length){for(b=0;b<j;b++){d=e[b];c=d.themeColorCount();f=a.circularCopyArray(h,g,c);g+=c;d.updateChartColors(f)}}if(!a.isConfiguring){a.refreshLegendStore()}},applyTheme:function(a){if(a&&a.isTheme){return a}return Ext.Factory.chartTheme(a)},updateGradients:function(a){if(!Ext.isEmpty(a)){this.updateTheme(this.getTheme())}},updateTheme:function(c,f){var a=this,e=a.getAxes(),d=a.getSeries(),g=a.getColors(),b;if(!d){return}a.updateChartTheme(c);for(b=0;b<e.length;b++){e[b].updateTheme(c)}for(b=0;b<d.length;b++){d[b].setTheme(c)}a.updateSpriteTheme(c);a.updateColors(g);a.redraw();a.fireEvent('themechange',a,c,f)},themeOnlyIfConfigured:{captions:!0},updateChartTheme:function(o){var c=this,d=o.getChart(),m=c.getInitialConfig(),l=c.defaultConfig,n=c.self.getConfigurator().configs,k=d.defaults,j=d[c.xtype],i=c.themeOnlyIfConfigured,b,a,g,e,f,h;d=Ext.merge({},k,j);for(b in d){a=d[b];h=n[b];if(a!==null&&a!==undefined&&h){f=m[b];g=Ext.isObject(a);e=f===l[b];if(g){if(e&&i[b]){continue}a=Ext.merge({},a,f)}if(e||g){c[h.names.set](a)}}}},updateSpriteTheme:function(l){var k=this,g,e,i,a,c,b,f,h,d,j;k.getSprites();g=k.getSurface('chart');e=g.getItems();i=l.getSprites();for(d=0,j=e.length;d<j;d++){a=e[d];c=i[a.type];if(c){f={};h=a.type==='text';for(b in c){if(!(b in a.config)){if(!(h&&b.indexOf('font')===0&&a.config.font)){f[b]=c[b]}}}a.setAttributes(f)}}},addSeries:function(b){var a=this.getSeries();a=a.concat(Ext.Array.from(b));this.setSeries(a)},removeSeries:function(c){var e=this.getSeries(),f=[],g={},a,d,b;c=Ext.Array.from(c);for(a=0,d=c.length;a<d;a++){b=c[a];if(typeof b!=='string'){b=b.getId()}g[b]=!0}for(a=0,d=e.length;a<d;a++){if(!g[e[a].getId()]){f.push(e[a])}}this.setSeries(f)},applySeries:function(g,h){var f=this,e=[],d,b,c,i,a;f.animationSuspendCount++;f.getAxes();if(h){d=h.map}else {h=[];d=h.map={}}e.map={};g=Ext.Array.from(g,!0);for(c=0,i=g.length;c<i;c++){a=g[c];if(!a){continue}b=d[a.getId&&a.getId()||a.id];if(a instanceof Ext.chart.series.Series){if(b&&b!==a){b.destroy()}a.setChart(f)}else {if(Ext.isObject(a)){if(b){b.setConfig(a);a=b}else {if(Ext.isString(a)){a={type:a}}a.chart=f;a=Ext.create(a.xclass||'series.'+a.type,a)}}}e.push(a);e.map[a.getId()]=a}for(c in d){if(!e.map[d[c].id]){d[c].destroy()}}f.animationSuspendCount--;return e},updateSeries:function(b,c){var a=this;if(a.destroying){return}a.animationSuspendCount++;a.fireEvent('serieschange',a,b,c);if(!Ext.isEmpty(b)){a.updateTheme(a.getTheme())}a.refreshLegendStore();if(!a.isConfiguring&&!a.destroying){a.scheduleLayout()}a.animationSuspendCount--},defaultLegendType:'sprite',applyLegend:function(b,c){var a=this,d=null,e;if(c&&!(c.destroyed||c.destroying)){if(a.legendStoreListeners){a.legendStoreListeners.destroy()}if(a.legendStore){a.legendStore.destroy()}c.destroy()}if(b){if(Ext.isBoolean(b)){d=Ext.create('legend.'+a.defaultLegendType,{docked:'bottom',chart:a})}else {b.docked=b.docked||'bottom';b.chart=a;e='legend.'+(b.type||a.defaultLegendType);d=Ext.create(e,b)}}return d},updateLegend:function(b){var a=this;a.destroyLegendStore();if(b){a.getItems();b.setStore(a.refreshLegendStore())}if(!a.isConfiguring){a.scheduleLayout()}},captionApplier:function(b,a){var d=this,c;if(a&&!(a.destroyed||a.destroying)){a.destroy()}if(b){b.chart=d;c=new Ext.chart.Caption(b)}return c},applyCaptions:function(e,c){var g={},a,d,b,f;for(b in e){a=e[b];if(a&&!a.length&&!(a.text&&a.text.length)){a=null}else {if(typeof a==='string'){a={text:a};this.getInitialConfig().captions[b]=a}}d=c&&c[b];a=this.captionApplier(a,d);if(a){f=!0;g[b]=a}}return f&&g},updateCaptions:function(){var a=this;if(!a.isConfiguring){a.scheduleLayout()}},getLegendStore:function(){var a=this,b=a.legendStore;if(!b){b=a.legendStore=new Ext.chart.legend.store.Store({chart:a});a.legendStoreListeners=b.on({scope:a,update:'onLegendStoreUpdate',destroyable:!0})}return b},destroyLegendStore:function(){var a=this.legendStore;if(a&&!(a.destroyed||a.destroying)){a.destroy()}this.legendStore=null},refreshLegendStore:function(){var g=this,b=g.getLegendStore(),e,d,c,a,f;if(b){d=g.getSeries();c=[];for(a=0,f=d.length;a<f;a++){e=d[a];if(e.getShowInLegend()){e.provideLegendInfo(c)}}b.setData(c)}return b},onLegendStoreUpdate:function(d,a){var c=this,b;if(a){b=this.getSeries().map[a.get('series')];if(b){b.setHiddenByIndex(a.get('index'),a.get('disabled'));c.redraw()}}},applyInteractions:function(e,d){var h=this,c=[],f,a,b,g;e=Ext.Array.from(e,!0);if(!d){d=[];d.map={}}f=d.map;c.map={};for(b=0,g=e.length;b<g;b++){a=e[b];if(!a){continue}a=Ext.factory(a,null,f[a.getId&&a.getId()||a.id],'interaction');if(a){a.setChart(h);c.push(a);c.map[a.getId()]=a}}for(b in f){if(!c.map[b]){f[b].destroy()}}return c},getInteraction:function(f){var b=this.getInteractions(),d=b&&b.length,e=null,c,a;if(d){for(a=0;a<d;++a){c=b[a];if(c.type===f){e=c;break}}}return e},applyStore:function(a){return a&&Ext.StoreManager.lookup(a)},updateStore:function(c,a){var b=this;if(a&&!a.destroyed){a.un({datachanged:'onDataChanged',update:'onDataChanged',scope:b,order:'after'});if(a.autoDestroy){a.destroy()}}if(c){c.on({datachanged:'onDataChanged',update:'onDataChanged',scope:b,order:'after'})}b.fireEvent('storechange',b,c,a);b.onDataChanged()},redraw:function(){this.fireEvent('redraw',this)},performLayout:function(){if(this.destroying||this.destroyed){return !1}var b=this,a=b.getLegend(),c=b.getChartRect(!0),f=b.getBackground(),e=!0,d;b.cancelChartLayout();if(f){b.getSurface('background').setRect(c.slice());f.setAttributes({width:c[2],height:c[3]})}if(a&&a.isSpriteLegend&&!a.isTop){d=a.computeRect(c)}b.layoutCaptions(c);if(a&&a.isSpriteLegend&&a.isTop){d=a.computeRect(c)}if(d){b.getSurface('legend').setRect(d);e=a.performLayout()}b.getSurface('chart').setRect(c);if(e){b.hasFirstLayout=!0}return e},layoutCaptions:function(c){var d=this.getCaptions(),h={left:0,top:0,right:c[2],bottom:c[3]},e,f,a,b,g;if(d){a=[];for(f in d){a.push(d[f])}a.sort(function(a,b){return a.getWeight()-b.getWeight()});for(b=0,g=a.length;b<g;b++){e=a[b];if(!b){this.getSurface(e.surfaceName).setRect(c.slice())}e.computeRect(c,h)}this.captionList=a}},checkLayoutEnd:function(){if(!this.chartLayoutCount&&!this.scheduledLayoutId){this.onLayoutEnd()}},onLayoutEnd:function(){var a=this;a.fireEvent('layout',a)},getChartRect:function(d){var a=this,b,c;if(d){a.chartRect=null}if(a.chartRect){b=a.chartRect}else {c=a.bodyElement.getSize();b=a.chartRect=[0,0,c.width,c.height]}return b},getEventXY:function(a){return this.getSurface('series').getEventXY(a)},getItemForPoint:function(f,g){var e=this,i=e.getSeries(),d=e.getMainRect(),j=i.length,h=Infinity,c=null,b,a;if(!(e.hasFirstLayout&&d&&f>=0&&f<=d[2]&&g>=0&&g<=d[3])){return null}for(b=j-1;b>=0;b--){a=i[b].getItemForPoint(f,g);if(a){if(!a.distance){c=a;break}if(a.distance<h){h=a.distance;c=a}}}return c},getItemsForPoint:function(h,i){var f=this,c=f.getSeries(),g=c.length,b=f.hasFirstLayout?g-1:-1,e=[],d,a;for(;b>=0;b--){d=c[b];a=d.getItemForPoint(h,i);if(a&&(a.category==='items'||a.category==='markers')){e.push(a)}}return e},onDataChanged:function(){var a=this,e,c,b,d;if(a.isInitializing){return}e=a.getMainRect();c=a.getStore();b=a.getSeries();d=a.getAxes();if(!c||!d||!b){return}if(!e){a.on({redraw:a.onDataChanged,scope:a,single:!0});return}a.processData();a.redraw()},recordCount:0,processData:function(){var a=this,e=a.getStore().getCount(),f=a.getSeries(),g=f.length,b=!1,d=0,c;for(;d<g;d++){c=f[d];c.processData();if(!b&&c.isStoreDependantColorCount){b=!0}}if(b&&e>a.recordCount){a.updateColors(a.getColors());a.recordCount=e}if(!a.isConfiguring){a.refreshLegendStore()}},bindStore:function(a){this.setStore(a)},applyHighlightItem:function(c,d){var a,b,e,f;if(c===d){return}if(Ext.isObject(c)&&Ext.isObject(d)){a=c;b=d;e=a.sprite&&(a.sprite[0]||a.sprite);f=b.sprite&&(b.sprite[0]||b.sprite);if(e===f&&a.index===b.index){return}}return c},updateHighlightItem:function(a,b){var c,d;if(b){d=b.series.getHighlight();if(d){b.series.setAttributesForItem(b,{highlighted:!1})}}if(a){c=a.series.getHighlight();if(c){a.series.setAttributesForItem(a,{highlighted:!0})}}if(d||c){this.fireEvent('itemhighlight',this,a,b)}},destroyChart:function(){var a=this;a.setInteractions(null);a.setAxes(null);a.setSeries(null);a.setLegend(null);a.setStore(null);a.cancelChartLayout()},getRefItems:function(h){var g=this,e=g.getSeries(),f=g.getAxes(),d=g.getInteractions(),i=g.getLegend(),b=[],a,c;for(a=0,c=e.length;a<c;a++){b.push(e[a]);if(e[a].getRefItems){b.push.apply(b,e[a].getRefItems(h))}}for(a=0,c=f.length;a<c;a++){b.push(f[a]);if(f[a].getRefItems){b.push.apply(b,f[a].getRefItems(h))}}for(a=0,c=d.length;a<c;a++){b.push(d[a]);if(d[a].getRefItems){b.push.apply(b,d[a].getRefItems(h))}}if(i){b.push(i)}return b}});Ext.define('Ext.chart.overrides.AbstractChart',{override:'Ext.chart.AbstractChart',updateLegend:function(a,b){this.callParent([a,b]);if(a&&a.isDomLegend){this.addDocked(a)}},performLayout:function(){if(this.isVisible(!0)){return this.callParent()}this.cancelChartLayout();return !1},afterComponentLayout:function(d,c,b,a){this.callParent([d,c,b,a]);if(!this.hasFirstLayout){this.scheduleLayout()}else {this.scheduleRedraw()}},allowSchedule:function(){return this.rendered},scheduleRedraw:function(){var a=this,b=a.scheduleRedrawTask;if(!b){a.scheduleRedrawTask=b=new Ext.util.DelayedTask(a.redraw,a)}b.delay(100)},doDestroy:function(){var a=this.scheduleRedrawTask;if(a){a.cancel()}this.destroyChart();this.callParent()}});Ext.define('Ext.chart.grid.HorizontalGrid',{extend:Ext.draw.sprite.Sprite,alias:'grid.horizontal',inheritableStatics:{def:{processors:{x:'number',y:'number',width:'number',height:'number'},defaults:{x:0,y:0,width:1,height:1,strokeStyle:'#DDD'}}},render:function(c,a,b){var f=this.attr,e=c.roundPixel(f.y),d=a.lineWidth*0.5;a.beginPath();a.rect(b[0]-c.matrix.getDX(),e+d,+b[2],f.height);a.fill();a.beginPath();a.moveTo(b[0]-c.matrix.getDX(),e+d);a.lineTo(b[0]+b[2]-c.matrix.getDX(),e+d);a.stroke()}});Ext.define('Ext.chart.grid.VerticalGrid',{extend:Ext.draw.sprite.Sprite,alias:'grid.vertical',inheritableStatics:{def:{processors:{x:'number',y:'number',width:'number',height:'number'},defaults:{x:0,y:0,width:1,height:1,strokeStyle:'#DDD'}}},render:function(c,a,b){var f=this.attr,e=c.roundPixel(f.x),d=a.lineWidth*0.5;a.beginPath();a.rect(e-d,b[1]-c.matrix.getDY(),f.width,b[3]);a.fill();a.beginPath();a.moveTo(e-d,b[1]-c.matrix.getDY());a.lineTo(e-d,b[1]+b[3]-c.matrix.getDY());a.stroke()}});Ext.define('Ext.chart.CartesianChart',{extend:Ext.chart.AbstractChart,alternateClassName:'Ext.chart.Chart',xtype:['cartesian','chart'],isCartesian:!0,config:{flipXY:!1,innerRect:[0,0,1,1],innerPadding:{top:0,left:0,right:0,bottom:0}},applyInnerPadding:function(a,b){if(!Ext.isObject(a)){return Ext.util.Format.parseBox(a)}else {if(!b){return a}else {return Ext.apply(b,a)}}},getDirectionForAxis:function(b){var c=this.getFlipXY(),a;if(b==='left'||b==='right'){a=c?'X':'Y'}else {a=c?'Y':'X'}return a},performLayout:function(){var a=this;if(a.callParent()===!1){return}a.chartLayoutCount++;a.suspendAnimation();var r=a.getSurface('chart').getRect(),p=r[0],q=r[1],l=r[2],k=r[3],u=a.captionList,t=a.getAxes(),e,A=a.getSeries(),y,f,g,B=a.getInsetPadding(),d=a.getInnerPadding(),j,n,c=Ext.apply({},B),i,o,h,v,w,z,x,b,m,D=a.getInherited().rtl,C=a.getFlipXY(),s;if(l<=0||k<=0){return}a.suspendThicknessChanged();for(b=0;b<t.length;b++){e=t[b];f=e.getSurface();w=e.getFloating();z=w?w.value:null;g=e.getThickness();switch(e.getPosition()){case 'top':f.setRect([p,q+c.top+1,l,g]);break;case 'bottom':f.setRect([p,q+k-(c.bottom+g),l,g]);break;case 'left':f.setRect([p+c.left,q,g,k]);break;case 'right':f.setRect([p+l-(c.right+g),q,g,k]);break;}if(z===null){c[e.getPosition()]+=g}}l-=c.left+c.right;k-=c.top+c.bottom;i=[p+c.left,q+c.top,l,k];c.left+=d.left;c.top+=d.top;c.right+=d.right;c.bottom+=d.bottom;o=l-d.left-d.right;h=k-d.top-d.bottom;a.setInnerRect([c.left,c.top,o,h]);if(o<=0||h<=0){return}a.setMainRect(i);a.getSurface().setRect(i);for(b=0,m=a.surfaceMap.grid&&a.surfaceMap.grid.length;b<m;b++){n=a.surfaceMap.grid[b];n.setRect(i);n.matrix.set(1,0,0,1,d.left,d.top);n.matrix.inverse(n.inverseMatrix)}for(b=0;b<t.length;b++){e=t[b];e.getRange(!0);f=e.getSurface();x=f.matrix;v=x.elements;switch(e.getPosition()){case 'top':case 'bottom':v[4]=c.left;e.setLength(o);break;case 'left':case 'right':v[5]=c.top;e.setLength(h);break;}e.updateTitleSprite();x.inverse(f.inverseMatrix)}for(b=0,m=A.length;b<m;b++){y=A[b];j=y.getSurface();j.setRect(i);if(C){if(D){j.matrix.set(0,-1,-1,0,d.left+o,d.top+h)}else {j.matrix.set(0,-1,1,0,d.left,d.top+h)}}else {j.matrix.set(1,0,0,-1,d.left,d.top+h)}j.matrix.inverse(j.inverseMatrix);y.getOverlaySurface().setRect(i)}if(u){for(b=0,m=u.length;b<m;b++){s=u[b];if(s.getAlignTo()==='series'){s.alignRect(i)}s.performLayout()}}a.afterChartLayout();a.redraw();a.resumeAnimation();a.resumeThicknessChanged();a.chartLayoutCount--;a.checkLayoutEnd()},afterChartLayout:Ext.emptyFn,refloatAxes:function(){var i=this,m=i.getAxes(),q=m&&m.length||0,d,j,c,k,a,e,h,n=i.getChartRect(),f=i.getInsetPadding(),b=i.getInnerPadding(),p=n[2]-f.left-f.right,o=n[3]-f.top-f.bottom,g,l;for(l=0;l<q;l++){d=m[l];k=d.getFloating();a=k?k.value:null;if(a===null){d.floatingAtCoord=null;continue}j=d.getSurface();c=j.getRect();if(!c){continue}c=c.slice();e=i.getAxis(k.alongAxis);if(e){g=e.getAlignment()==='horizontal';if(Ext.isString(a)){a=e.getCoordFor(a)}e.floatingAxes[d.getId()]=a;h=e.getSprites()[0].attr.matrix;if(g){a=a*h.getXX()+h.getDX();d.floatingAtCoord=a+b.left+b.right}else {a=a*h.getYY()+h.getDY();d.floatingAtCoord=a+b.top+b.bottom}}else {g=d.getAlignment()==='horizontal';if(g){d.floatingAtCoord=a+b.top+b.bottom}else {d.floatingAtCoord=a+b.left+b.right}a=j.roundPixel(0.01*a*(g?o:p))}switch(d.getPosition()){case 'top':c[1]=f.top+b.top+a-c[3]+1;break;case 'bottom':c[1]=f.top+b.top+(e?a:o-a);break;case 'left':c[0]=f.left+b.left+a-c[2];break;case 'right':c[0]=f.left+b.left+(e?a:p-a)-1;break;}j.setRect(c)}},redraw:function(){var h=this,x=h.getSeries(),z=h.getAxes(),w=h.getMainRect(),t,s,f=h.getInnerPadding(),i,a,b,y,c,e,g,r,n,p,q,u,d,A=h.getFlipXY(),v=1000,k,o,j,m,l;if(!w){return}t=w[2]-f.left-f.right;s=w[3]-f.top-f.bottom;for(e=0;e<x.length;e++){j=x[e];p=j.getXAxis();if(p){d=p.getVisibleRange();a=p.getRange();a=[a[0]+(a[1]-a[0])*d[0],a[0]+(a[1]-a[0])*d[1]]}else {a=j.getXRange()}q=j.getYAxis();if(q){d=q.getVisibleRange();b=q.getRange();b=[b[0]+(b[1]-b[0])*d[0],b[0]+(b[1]-b[0])*d[1]]}else {b=j.getYRange()}c={visibleMinX:a[0],visibleMaxX:a[1],visibleMinY:b[0],visibleMaxY:b[1],innerWidth:t,innerHeight:s,flipXY:A};i=j.getSprites();for(g=0,r=i.length;g<r;g++){m=i[g];k=m.attr.zIndex;if(k<v){k+=(e+1)*100+v;m.attr.zIndex=k;l=m.getMarker('items');if(l){o=l.attr.zIndex;if(o===Number.MAX_VALUE){l.attr.zIndex=k}else {if(o<v){l.attr.zIndex=k+o}}}}m.setAttributes(c,!0)}}for(e=0;e<z.length;e++){n=z[e];y=n.isSide();i=n.getSprites();u=n.getRange();d=n.getVisibleRange();c={dataMin:u[0],dataMax:u[1],visibleMin:d[0],visibleMax:d[1]};if(y){c.length=s;c.startGap=f.bottom;c.endGap=f.top}else {c.length=t;c.startGap=f.left;c.endGap=f.right}for(g=0,r=i.length;g<r;g++){i[g].setAttributes(c,!0)}}h.renderFrame();h.callParent()},renderFrame:function(){this.refloatAxes();this.callParent()}});Ext.define('Ext.chart.grid.CircularGrid',{extend:Ext.draw.sprite.Circle,alias:'grid.circular',inheritableStatics:{def:{defaults:{r:1,strokeStyle:'#DDD'}}}});Ext.define('Ext.chart.grid.RadialGrid',{extend:Ext.draw.sprite.Path,alias:'grid.radial',inheritableStatics:{def:{processors:{startRadius:'number',endRadius:'number'},defaults:{startRadius:0,endRadius:1,scalingCenterX:0,scalingCenterY:0,strokeStyle:'#DDD'},triggers:{startRadius:'path,bbox',endRadius:'path,bbox'}}},render:function(){this.callParent(arguments)},updatePath:function(b,a){var c=a.startRadius,d=a.endRadius;b.moveTo(c,0);b.lineTo(d,0)}});Ext.define('Ext.chart.PolarChart',{extend:Ext.chart.AbstractChart,xtype:'polar',isPolar:!0,config:{center:[0,0],radius:0,innerPadding:0},getDirectionForAxis:function(a){return a==='radial'?'Y':'X'},updateCenter:function(d){var h=this,f=h.getAxes(),e=h.getSeries(),a,b,g,c;for(a=0,b=f.length;a<b;a++){g=f[a];g.setCenter(d)}for(a=0,b=e.length;a<b;a++){c=e[a];c.setCenter(d)}},applyInnerPadding:function(a,b){return Ext.isNumber(a)?a:b},updateInnerPadding:function(){if(!this.isConfiguring){this.performLayout()}},doSetSurfaceRect:function(c,a){var b=this.getMainRect();c.setRect(a);c.matrix.set(1,0,0,1,b[0]-a[0],b[1]-a[1]);c.inverseMatrix.set(1,0,0,1,a[0]-b[0],a[1]-b[1])},applyAxes:function(a,g){var h=this,b=Ext.Array.from(h.config.series)[0],c,f,e,d;if(b&&b.type==='radar'&&a&&a.length){for(c=0,f=a.length;c<f;c++){e=a[c];if(e.position==='angular'){d=!0;break}}if(!d){a.push({type:'category',position:'angular',fields:b.xField||b.angleField,style:{estStepSize:1},grid:!0})}}return this.callParent([a,g])},performLayout:function(){var a=this,y=!0;try{a.chartLayoutCount++;a.suspendAnimation();if(this.callParent()===!1){y=!1;return}a.suspendThicknessChanged();var d=a.getSurface('chart').getRect(),i=a.getInsetPadding(),h=a.getInnerPadding(),g=Ext.apply({},i),p=Math.max(1,d[2]-d[0]-i.left-i.right),o=Math.max(1,d[3]-d[1]-i.top-i.bottom),j=[d[0]+i.left,d[1]+i.top,p+d[0],o+d[1]],C=a.getSeries(),B=p-h*2,A=o-h*2,G=[(d[0]+B)*0.5+h,(d[1]+A)*0.5+h],E=Math.min(B,A)*0.5,l=a.getAxes(),t=[],v=[],r=E-h,x=a.surfaceMap.grid,u=a.captionList,b,e,s,w,F,f,m,q,k,c,D,z,n;a.setMainRect(j);a.doSetSurfaceRect(a.getSurface(),j);if(x){for(b=0,e=x.length;b<e;b++){a.doSetSurfaceRect(x[b],d)}}for(b=0,e=l.length;b<e;b++){c=l[b];switch(c.getPosition()){case 'angular':t.push(c);break;case 'radial':v.push(c);break;}}for(b=0,e=t.length;b<e;b++){c=t[b];w=c.getFloating();F=w?w.value:null;a.doSetSurfaceRect(c.getSurface(),d);D=c.getThickness();for(q in g){g[q]+=D}p=d[2]-g.left-g.right;o=d[3]-g.top-g.bottom;s=Math.min(p,o)*0.5;if(b===0){r=s-h}c.setMinimum(0);c.setLength(s);c.getSprites();z=c.sprites[0].attr.lineWidth*0.5;for(q in g){g[q]+=z}}for(b=0,e=v.length;b<e;b++){c=v[b];a.doSetSurfaceRect(c.getSurface(),d);c.setMinimum(0);c.setLength(r);c.getSprites()}for(b=0,e=C.length;b<e;b++){k=C[b];if(k.type==='gauge'&&!f){f=k}else {k.setRadius(r)}a.doSetSurfaceRect(k.getSurface(),j)}a.doSetSurfaceRect(a.getSurface('overlay'),d);if(f){f.setRect(j);m=f.getRadius()-h;a.setRadius(m);a.setCenter(f.getCenter());f.setRadius(m);if(l.length&&l[0].getPosition()==='gauge'){c=l[0];a.doSetSurfaceRect(c.getSurface(),d);c.setTotalAngle(f.getTotalAngle());c.setLength(m)}}else {a.setRadius(E);a.setCenter(G)}if(u){for(b=0,e=u.length;b<e;b++){n=u[b];if(n.getAlignTo()==='series'){n.alignRect(j)}n.performLayout()}}a.redraw()}finally{a.resumeAnimation();if(y){a.resumeThicknessChanged()}a.chartLayoutCount--;a.checkLayoutEnd()}},refloatAxes:function(){var g=this,i=g.getAxes(),f=g.getMainRect(),d,a,b,e,j,c,h;if(!f){return}h=0.5*Math.min(f[2],f[3]);for(e=0,j=i.length;e<j;e++){c=i[e];d=c.getFloating();a=d?d.value:null;if(a!==null){b=g.getAxis(d.alongAxis);if(c.getPosition()==='angular'){if(b){a=b.getLength()*a/b.getRange()[1]}else {a=0.01*a*h}c.sprites[0].setAttributes({length:a},!0)}else {if(b){if(Ext.isString(a)){a=b.getCoordFor(a)}a=a/(b.getRange()[1]+1)*Math.PI*2-Math.PI*1.5+c.getRotation()}else {a=Ext.draw.Draw.rad(a)}c.sprites[0].setAttributes({baseRotation:a},!0)}}}},redraw:function(){var c=this,f=c.getAxes(),g,d=c.getSeries(),e,a,b;for(a=0,b=f.length;a<b;a++){g=f[a];g.getSprites()}for(a=0,b=d.length;a<b;a++){e=d[a];e.getSprites()}c.renderFrame();c.callParent()},renderFrame:function(){this.refloatAxes();this.callParent()}});Ext.define('Ext.chart.axis.Category',{extend:Ext.chart.axis.Axis,alias:'axis.category',type:'category',isCategory:!0,config:{layout:'combineDuplicate',segmenter:'names'}});Ext.define('Ext.chart.axis.Numeric',{extend:Ext.chart.axis.Axis,type:'numeric',alias:['axis.numeric','axis.radial'],config:{layout:'continuous',segmenter:'numeric',aggregator:'double'}});Ext.define('Ext.chart.interactions.ItemHighlight',{extend:Ext.chart.interactions.Abstract,type:'itemhighlight',alias:'interaction.itemhighlight',isItemHighlight:!0,config:{gestures:{tap:'onTapGesture',mousemove:'onMouseMoveGesture',mousedown:'onMouseDownGesture',mouseup:'onMouseUpGesture',mouseleave:'onMouseUpGesture'},sticky:!1,multiTooltips:!1},constructor:function(a){this.callParent([a]);this.stickyHighlightItem=null;this.tooltipItems=[]},destroy:function(){this.stickyHighlightItem=this.tooltipItems=null;this.callParent()},onMouseMoveGesture:function(i){var a=this,e=a.tooltipItems,k=i.pointerType==='mouse',m=[],b,g,c,f,l,d,h,j,n;if(a.getSticky()){return !0}if(k&&a.stickyHighlightItem){a.stickyHighlightItem=null;a.highlight(null)}if(a.isDragging){if(e.length&&k){a.hideTooltips(e);e.length=0}}else {if(!a.stickyHighlightItem){if(a.getMultiTooltips()){c=a.getItemsForEvent(i)}else {b=a.getItemForEvent(i);c=b?[b]:[]}for(d=0,h=c.length;d<h;d++){b=c[d];if(d===0&&b!==a.getChart().getHighlightItem()){a.highlight(b);a.sync()}f=b.series.getTooltip();if(f){m.push(f)}}a.highlight(b);if(k){if(c.length){for(d=0,h=c.length;d<h;d++){b=c[d];f=b.series.getTooltip();if(f){for(j=0,n=e.length;j<n;j++){g=e[j];if(!Ext.Array.contains(c,g)){l=g.series.getTooltip();if(!Ext.Array.contains(m,l)){g.series.hideTooltip(g,!0)}}}if(f.getTrackMouse()){b.series.showTooltip(b,i)}else {a.showUntracked(b)}}}a.tooltipItems=c}else {a.hideTooltips(e);e.length=0}}return !1}}},highlight:function(a){this.getChart().setHighlightItem(a)},showTooltip:function(b,a){a.series.showTooltip(a,b);Ext.Array.include(this.tooltipItems,a)},showUntracked:function(c){var e=c.sprite.getMarker(c.category),b,d,g,a,f;if(e){b=e.getSurface();g=b.matrix.elements[3]<0;d=b.element.getXY();a=Ext.clone(e.getBBoxFor(c.index));if(g){if(b.getInherited().rtl){f=b.inverseMatrix.clone().flipX().translate(c.sprite.attr.innerWidth,0,!0)}else {f=b.inverseMatrix}a=f.transformBBox(a)}a.x+=d[0];a.y+=d[1];c.series.showTooltipAt(c,a.x+a.width*0.5,a.y+a.height*0.5)}},onMouseDownGesture:function(){this.isDragging=!0},onMouseUpGesture:function(){this.isDragging=!1},isSameItem:function(a,b){return a&&b&&a.series===b.series&&a.field===b.field&&a.index===b.index},onTapGesture:function(c){var a=this,b;if(c.pointerType==='mouse'&&!a.getSticky()){return}b=a.getItemForEvent(c);if(a.isSameItem(a.stickyHighlightItem,b)){b=null}a.stickyHighlightItem=b;a.highlight(b)},privates:{hideTooltips:function(a,e){var b,c,d;a=Ext.isArray(a)?a:[a];for(c=0,d=a.length;c<d;c++){b=a[c];if(b&&b.series&&!b.series.destroyed){b.series.hideTooltip(b,e)}}}}});Ext.define('Ext.chart.interactions.ItemEdit',{extend:Ext.chart.interactions.ItemHighlight,type:'itemedit',alias:'interaction.itemedit',isItemEdit:!0,config:{style:null,renderer:null,tooltip:!0,gestures:{dragstart:'onDragStart',drag:'onDrag',dragend:'onDragEnd'},cursors:{ewResize:'ew-resize',nsResize:'ns-resize',move:'move'}},item:null,applyTooltip:function(a){var b;if(a){b=Ext.apply({},a,{renderer:this.defaultTooltipRenderer,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,trackMouse:!0,mouseOffset:[20,20]});a=new Ext.tip.ToolTip(b)}return a},defaultTooltipRenderer:function(c,d,a,e){var b=[];if(a.xField){b.push(a.xField+': '+a.xValue)}if(a.yField){b.push(a.yField+': '+a.yValue)}c.setHtml(b.join('<br>'))},onDragStart:function(d){var b=this,a=b.getChart(),c=a.getHighlightItem();d.claimGesture();if(c){a.fireEvent('beginitemedit',a,b,b.item=c);return !1}},onDrag:function(c){var b=this,d=b.getChart(),a=d.getHighlightItem(),e=a&&a.sprite.type;if(a){switch(e){case 'barSeries':return b.onDragBar(c);case 'scatterSeries':return b.onDragScatter(c);}}},highlight:function(a){var e=this,c=e.getChart(),f=c.getFlipXY(),b=e.getCursors(),g=a&&a.sprite.type,d=c.el.dom.style;e.callParent([a]);if(a){switch(g){case 'barSeries':if(f){d.cursor=b.ewResize}else {d.cursor=b.nsResize};break;case 'scatterSeries':d.cursor=b.move;break;}}else {c.el.dom.style.cursor='default'}},onDragBar:function(m){var d=this,e=d.getChart(),q=e.getInherited().rtl,o=e.isCartesian&&e.getFlipXY(),a=e.getHighlightItem(),p=a.sprite.getMarker('items'),c=p.getMarkerFor(a.sprite.getId(),a.index),h=a.sprite.getSurface(),j=h.getRect(),i=h.getEventXY(m),k=a.sprite.attr.matrix,n=d.getRenderer(),f,g,l,b;if(o){b=q?j[2]-i[0]:i[0]}else {b=j[3]-i[1]}f={x:c.x,y:b,width:c.width,height:c.height+(c.y-b),radius:c.radius,fillStyle:'none',lineDash:[4,4],zIndex:100};Ext.apply(f,d.getStyle());if(Ext.isArray(a.series.getYField())){b=b-c.y-c.height}d.target={index:a.index,yField:a.field,yValue:(b-k.getDY())/k.getYY()};l=[e,{target:d.target,style:f,item:a}];g=Ext.callback(n,null,l,0,e);if(g){Ext.apply(f,g)}a.sprite.putMarker('items',f,'itemedit');d.showTooltip(m,d.target,a);h.renderFrame()},onDragScatter:function(s){var c=this,e=c.getChart(),v=e.getInherited().rtl,p=e.isCartesian&&e.getFlipXY(),a=e.getHighlightItem(),u=a.sprite.getMarker('markers'),d=u.getMarkerFor(a.sprite.getId(),a.index),o=a.sprite.getSurface(),l=o.getRect(),b=o.getEventXY(s),h=a.sprite.attr.matrix,r=a.series.getXAxis(),k=r&&r.getLayout().isContinuous,t=c.getRenderer(),f,n,q,g,m,i,j;if(p){m=v?l[2]-b[0]:b[0]}else {m=l[3]-b[1]}if(k){if(p){g=l[3]-b[1]}else {g=b[0]}}else {g=d.translationX}if(k){i=b[0];j=b[1]}else {if(p){i=b[0];j=d.translationY}else {i=d.translationX;j=b[1]}}f={translationX:i,translationY:j,scalingX:d.scalingX,scalingY:d.scalingY,r:d.r,fillStyle:'none',lineDash:[4,4],zIndex:100};Ext.apply(f,c.getStyle());c.target={index:a.index,yField:a.field,yValue:(m-h.getDY())/h.getYY()};if(k){Ext.apply(c.target,{xField:a.series.getXField(),xValue:(g-h.getDX())/h.getXX()})}q=[e,{target:c.target,style:f,item:a}];n=Ext.callback(t,null,q,0,e);if(n){Ext.apply(f,n)}a.sprite.putMarker('markers',f,'itemedit');c.showTooltip(s,c.target,a);o.renderFrame()},showTooltip:function(d,e,f){var a=this.getTooltip(),b,c;if(a&&Ext.toolkit!=='modern'){b=a.config;c=this.getChart();Ext.callback(b.renderer,null,[a,f,e,d],0,c);a.pointerEvent=d;if(a.isVisible()){a.realignToTarget()}else {a.show()}}},hideTooltip:function(){var a=this.getTooltip();if(a&&Ext.toolkit!=='modern'){a.hide()}},onDragEnd:function(f){var b=this,a=b.target,d=b.getChart(),e=d.getStore(),c;if(a){c=e.getAt(a.index);if(a.yField){c.set(a.yField,a.yValue,{convert:!1})}if(a.xField){c.set(a.xField,a.xValue,{convert:!1})}if(a.yField||a.xField){b.getChart().onDataChanged()}b.target=null}b.hideTooltip();if(b.item){d.fireEvent('enditemedit',d,b,b.item,a)}b.highlight(b.item=null)},destroy:function(){var a=this.getConfig('tooltip',!0);Ext.destroy(a);this.callParent()}});Ext.define('Ext.chart.interactions.PanZoom',{extend:Ext.chart.interactions.Abstract,type:'panzoom',alias:'interaction.panzoom',config:{axes:{top:{},right:{},bottom:{},left:{}},minZoom:null,maxZoom:null,showOverflowArrows:!0,panGesture:'drag',zoomGesture:'pinch',zoomOnPanGesture:null,zoomOnPan:!1,doubleTapReset:!1,modeToggleButton:{xtype:'segmentedbutton',width:200,defaults:{ui:'default-toolbar'},cls:Ext.baseCSSPrefix+'panzoom-toggle',items:[{text:'Pan',value:'pan'},{text:'Zoom',value:'zoom'}]},hideLabelInGesture:!1},stopAnimationBeforeSync:!0,applyAxes:function(b,a){return Ext.merge(a||{},b)},updateZoomOnPan:function(a){var b=this.getModeToggleButton();b.setValue(a?'zoom':'pan')},updateZoomOnPanGesture:function(a){this.setZoomOnPan(a)},getZoomOnPanGesture:function(){return this.getZoomOnPan()},applyModeToggleButton:function(b,a){return Ext.factory(b,'Ext.button.Segmented',a)},updateModeToggleButton:function(a){if(a){a.on('change','onModeToggleChange',this)}},onModeToggleChange:function(b,a){this.setZoomOnPan(a==='zoom')},getGestures:function(){var d=this,a={},c=d.getPanGesture(),b=d.getZoomGesture();a[b]='onZoomGestureMove';a[b+'start']='onZoomGestureStart';a[b+'end']='onZoomGestureEnd';a[c]='onPanGestureMove';a[c+'start']='onPanGestureStart';a[c+'end']='onPanGestureEnd';a.doubletap='onDoubleTap';return a},onDoubleTap:function(h){var f=this,g=f.getDoubleTapReset(),b,c,d,a,e;if(g){b=f.getChart();c=b.getAxes();for(a=0,e=c.length;a<e;a++){d=c[a];d.setVisibleRange([0,1])}b.redraw()}},onPanGestureStart:function(b){var a=this,c,d,e;if(!b||!b.touches||b.touches.length<2){c=a.getChart();d=c.getInnerRect();e=c.element.getXY();b.claimGesture();c.suspendAnimation();a.startX=b.getX()-e[0]-d[0];a.startY=b.getY()-e[1]-d[1];a.oldVisibleRanges=null;a.hideLabels();c.suspendThicknessChanged();a.lockEvents(a.getPanGesture());return !1}},onPanGestureMove:function(b){var a=this,g=b.pointerType==='mouse',f=g&&a.getZoomOnPan(),e,c,d;if(a.getLocks()[a.getPanGesture()]===a){e=a.getChart();c=e.getInnerRect();d=e.element.getXY();if(f){a.transformAxesBy(a.getZoomableAxes(b),0,0,(b.getX()-d[0]-c[0])/a.startX,a.startY/(b.getY()-d[1]-c[1]))}else {a.transformAxesBy(a.getPannableAxes(b),b.getX()-d[0]-c[0]-a.startX,b.getY()-d[1]-c[1]-a.startY,1,1)}a.sync();return !1}},onPanGestureEnd:function(d){var a=this,c=a.getPanGesture(),b;if(a.getLocks()[c]===a){b=a.getChart();b.resumeThicknessChanged();a.showLabels();a.sync();a.unlockEvents(c);b.resumeAnimation();return !1}},onZoomGestureStart:function(b){if(b.touches&&b.touches.length===2){var a=this,d=a.getChart(),f=d.element.getXY(),e=d.getInnerRect(),g=f[0]+e[0],h=f[1]+e[1],c=[b.touches[0].point.x-g,b.touches[0].point.y-h,b.touches[1].point.x-g,b.touches[1].point.y-h],i=Math.max(44,Math.abs(c[2]-c[0])),j=Math.max(44,Math.abs(c[3]-c[1]));b.claimGesture();d.suspendAnimation();d.suspendThicknessChanged();a.lastZoomDistances=[i,j];a.lastPoints=c;a.oldVisibleRanges=null;a.hideLabels();a.lockEvents(a.getZoomGesture());return !1}},onZoomGestureMove:function(c){var a=this;if(a.getLocks()[a.getZoomGesture()]===a){var k=a.getChart(),d=k.getInnerRect(),m=k.element.getXY(),n=m[0]+d[0],o=m[1]+d[1],l=Math.abs,h=a.lastPoints,b=[c.touches[0].point.x-n,c.touches[0].point.y-o,c.touches[1].point.x-n,c.touches[1].point.y-o],i=Math.max(44,l(b[2]-b[0])),j=Math.max(44,l(b[3]-b[1])),g=this.lastZoomDistances||[i,j],e=i/g[0],f=j/g[1];a.transformAxesBy(a.getZoomableAxes(c),d[2]*(e-1)/2+b[2]-h[2]*e,d[3]*(f-1)/2+b[3]-h[3]*f,e,f);a.sync();return !1}},onZoomGestureEnd:function(d){var a=this,c=a.getZoomGesture(),b;if(a.getLocks()[c]===a){b=a.getChart();b.resumeThicknessChanged();a.showLabels();a.sync();a.unlockEvents(c);b.resumeAnimation();return !1}},hideLabels:function(){if(this.getHideLabelInGesture()){this.eachInteractiveAxes(function(a){a.hideLabels()})}},showLabels:function(){if(this.getHideLabelInGesture()){this.eachInteractiveAxes(function(a){a.showLabels()})}},isEventOnAxis:function(b,c){var a=c.getSurface().getRect();return a[0]<=b.getX()&&b.getX()<=a[0]+a[2]&&a[1]<=b.getY()&&b.getY()<=a[1]+a[3]},getPannableAxes:function(d){var h=this,i=h.getAxes(),b=h.getChart().getAxes(),a,g=b.length,f=[],e=!1,c;if(d){for(a=0;a<g;a++){if(this.isEventOnAxis(d,b[a])){e=!0;break}}}for(a=0;a<g;a++){c=i[b[a].getPosition()];if(c&&c.allowPan!==!1&&(!e||this.isEventOnAxis(d,b[a]))){f.push(b[a])}}return f},getZoomableAxes:function(e){var i=this,j=i.getAxes(),d=i.getChart().getAxes(),g=[],a,h=d.length,b,f=!1,c;if(e){for(a=0;a<h;a++){if(this.isEventOnAxis(e,d[a])){f=!0;break}}}for(a=0;a<h;a++){b=d[a];c=j[b.getPosition()];if(c&&c.allowZoom!==!1&&(!f||this.isEventOnAxis(e,b))){g.push(b)}}return g},eachInteractiveAxes:function(e){var c=this,d=c.getAxes(),b=c.getChart().getAxes(),a;for(a=0;a<b.length;a++){if(d[b[a].getPosition()]){if(!1===e.call(this,b[a])){return}}}},transformAxesBy:function(c,g,h,j,k){var i=this.getChart().getInnerRect(),f=this.getAxes(),b=this.oldVisibleRanges,e=!1,d,a;if(!b){this.oldVisibleRanges=b={};this.eachInteractiveAxes(function(a){b[a.getId()]=a.getVisibleRange()})}if(!i){return}for(a=0;a<c.length;a++){d=f[c[a].getPosition()];e=this.transformAxisBy(c[a],b[c[a].getId()],g,h,j,k,this.minZoom||d.minZoom,this.maxZoom||d.maxZoom)||e}return e},transformAxisBy:function(c,b,p,q,r,s,o,n){var i=this,a=b[1]-b[0],d=c.getVisibleRange(),m=o||i.getMinZoom()||c.config.minZoom,j=n||i.getMaxZoom()||c.config.maxZoom,g=i.getChart().getInnerRect(),l,k,e,h,f;if(!g){return}e=c.isSide();f=e?g[3]:g[2];h=e?-q:p;a/=e?s:r;if(a<0){a=-a}if(a*m>1){a=1}if(a*j<1){a=1/j}l=b[0];k=b[1];d=d[1]-d[0];if(a===d&&d===1){return}c.setVisibleRange([(b[0]+b[1]-a)*0.5-h/f*a,(b[0]+b[1]+a)*0.5-h/f*a]);return Math.abs(l-c.getVisibleRange()[0])>1.0E-10||Math.abs(k-c.getVisibleRange()[1])>1.0E-10},destroy:function(){this.setModeToggleButton(null);this.callParent()}});Ext.define('Ext.chart.interactions.Rotate',{extend:Ext.chart.interactions.Abstract,type:'rotate',alternateClassName:'Ext.chart.interactions.RotatePie3D',alias:['interaction.rotate','interaction.rotatePie3d'],config:{gesture:'rotate',gestures:{dragstart:'onGestureStart',drag:'onGesture',dragend:'onGestureEnd'},rotation:0},oldRotations:null,getAngle:function(e){var d=this,b=d.getChart(),c=b.getEventXY(e),a=b.getCenter();return Math.atan2(c[1]-a[1],c[0]-a[0])},onGestureStart:function(b){var a=this;b.claimGesture();a.lockEvents('drag');a.angle=a.getAngle(b);a.oldRotations={};a.getChart().suspendAnimation();a.fireEvent('rotatestart',a,a.getRotation());return !1},onGesture:function(c){var a=this,b=a.getAngle(c)-a.angle;if(a.getLocks().drag===a){a.doRotateTo(b,!0);return !1}},doRotateTo:function(l,k){var b=this,m=b.getChart(),n=m.getAxes(),j=m.getSeries(),e=b.oldRotations,d,f,h,g,c,a,i;for(a=0,i=n.length;a<i;a++){h=n[a];c=h.getId();f=e[c]||(e[c]=h.getRotation());d=l+(k?f:0);h.setRotation(d)}for(a=0,i=j.length;a<i;a++){g=j[a];c=g.getId();f=e[c]||(e[c]=g.getRotation());d=Ext.draw.Draw.degrees(l+(k?f:0));g.setRotation(d)}b.setRotation(d);b.fireEvent('rotate',b,b.getRotation());b.sync()},rotateTo:function(e,d,a){var b=this,c=b.getChart();if(!a){c.suspendAnimation()}b.doRotateTo(e,d,a);b.oldRotations={};if(!a){c.resumeAnimation()}},onGestureEnd:function(b){var a=this;if(a.getLocks().drag===a){a.onGesture(b);a.unlockEvents('drag');a.getChart().resumeAnimation();a.fireEvent('rotateend',a,a.getRotation());a.fireEvent('rotationEnd',a,a.getRotation());return !1}}});Ext.define('Ext.chart.series.Cartesian',{extend:Ext.chart.series.Series,config:{xField:null,yField:null,xAxis:null,yAxis:null},directions:['X','Y'],fieldCategoryX:['X'],fieldCategoryY:['Y'],applyXAxis:function(a,b){return this.getChart().getAxis(a)||b},applyYAxis:function(a,b){return this.getChart().getAxis(a)||b},updateXAxis:function(a){a.processData(this)},updateYAxis:function(a){a.processData(this)},coordinateX:function(){return this.coordinate('X',0,2)},coordinateY:function(){return this.coordinate('Y',1,2)},getItemForPoint:function(e,f){var a=this,c=a.getSprites()[0],d=a.getStore(),b;if(c&&!a.getHidden()){b=c.getNearestDataPoint(e,f)}return b?{series:a,sprite:c,category:a.getItemInstancing()?'items':'markers',index:b.index,record:d.getData().items[b.index],field:a.getYField(),distance:b.distance}:null},createSprite:function(){var c=this,a=c.callParent(),d=c.getChart(),b=c.getXAxis();a.setAttributes({flipXY:d.getFlipXY(),xAxis:b});if(a.setAggregator&&b&&b.getAggregator){if(b.getAggregator){a.setAggregator({strategy:b.getAggregator()})}else {a.setAggregator({})}}return a},getSprites:function(){var b=this,c=this.getChart(),a=b.sprites;if(!c){return Ext.emptyArray}if(!a.length){b.createSprite()}return a},getXRange:function(){return [this.dataRange[0],this.dataRange[2]]},getYRange:function(){return [this.dataRange[1],this.dataRange[3]]}});Ext.define('Ext.chart.series.StackedCartesian',{extend:Ext.chart.series.Cartesian,config:{stacked:!0,splitStacks:!0,fullStack:!1,fullStackTotal:100,hidden:[]},reversedSpriteZOrder:!0,spriteAnimationCount:0,themeColorCount:function(){var b=this,a=b.getYField();return Ext.isArray(a)?a.length:1},updateStacked:function(){this.processData()},updateSplitStacks:function(){this.processData()},coordinateY:function(){return this.coordinateStacked('Y',1,2)},coordinateStacked:function(r,w,C){var d=this,D=d.getStore(),B=D.getData().items,u=B.length,E=d['get'+r+'Axis'](),A=d.getHidden(),p=d.getSplitStacks(),t=d.getFullStack(),x=d.getFullStackTotal(),f=[0,0],y=d['fieldCategory'+r],h=[],o=[],n=[],l,z=d.getStacked(),m=d.getSprites(),s=[],i,b,a,v,q,k,j,g,c,e;if(!m.length){return}for(i=0;i<y.length;i++){g=y[i];v=d.getFields([g]);q=v.length;for(b=0;b<u;b++){h[b]=0;o[b]=0;n[b]=0}for(b=0;b<q;b++){if(!A[b]){s[b]=d.coordinateData(B,v[b],E)}}if(z&&t){k=[];if(p){j=[]}for(b=0;b<u;b++){k[b]=0;if(p){j[b]=0}for(a=0;a<q;a++){c=s[a];if(!c){continue}c=c[b];if(c>=0||!p){k[b]+=c}else {if(c<0){j[b]+=c}}}}}for(b=0;b<q;b++){e={};if(A[b]){e['dataStart'+g]=h;e['data'+g]=h;m[b].setAttributes(e);continue}c=s[b];if(z){l=[];for(a=0;a<u;a++){if(!c[a]){c[a]=0}if(c[a]>=0||!p){if(t&&k[a]){c[a]*=x/k[a]}h[a]=o[a];o[a]+=c[a];l[a]=o[a]}else {if(t&&j[a]){c[a]*=x/j[a]}h[a]=n[a];n[a]+=c[a];l[a]=n[a]}}e['dataStart'+g]=h;e['data'+g]=l;Ext.chart.Util.expandRange(f,h);Ext.chart.Util.expandRange(f,l)}else {e['dataStart'+g]=h;e['data'+g]=c;Ext.chart.Util.expandRange(f,c)}m[b].setAttributes(e)}}f=Ext.chart.Util.validateRange(f,d.defaultRange);d.dataRange[w]=f[0];d.dataRange[w+C]=f[1];e={};e['dataMin'+r]=f[0];e['dataMax'+r]=f[1];for(i=0;i<m.length;i++){m[i].setAttributes(e)}},getFields:function(d){var f=this,b=[],e=d.length,c,a;for(c=0;c<e;c++){a=f['get'+d[c]+'Field']();if(Ext.isArray(a)){b.push.apply(b,a)}else {b.push(a)}}return b},updateLabelOverflowPadding:function(c){var b=this,a;if(!b.isConfiguring){a=b.getLabel();if(a){a.setAttributes({labelOverflowPadding:c})}}},updateLabelData:function(){var a=this,b=a.getLabel();if(b){b.setAttributes({labelOverflowPadding:a.getLabelOverflowPadding()})}a.callParent()},getSprites:function(){var a=this,j=a.getChart(),f=a.getFields(a.fieldCategoryY),h=a.getItemInstancing(),e=a.sprites,g=a.getHidden(),d=!1,i=f.length,b,c;if(!j){return []}for(b=0;b<i;b++){c=e[b];if(!c){c=a.createSprite();c.setAttributes({zIndex:(a.reversedSpriteZOrder?-1:1)*b});c.setField(f[b]);d=!0;g.push(!1);if(h){c.getMarker('items').getTemplate().setAttributes(a.getStyleByIndex(b))}else {c.setAttributes(a.getStyleByIndex(b))}}}if(d){a.updateHidden(g)}return e},getItemForPoint:function(n,o){var a=this,h=a.getSprites(),m=a.getStore(),l=a.getHidden(),f=Infinity,j=null,d=-1,g=-1,c,e,i,b,k;for(b=0,k=h.length;b<k;b++){if(l[b]){continue}i=h[b];c=i.getNearestDataPoint(n,o);if(c){if(c.distance<f){f=c.distance;g=c.index;d=b}}}if(d>-1){e=a.getYField();j={series:a,sprite:h[d],category:a.getItemInstancing()?'items':'markers',index:g,record:m.getData().items[g],field:typeof e==='string'?e:e[d],distance:f}}return j},provideLegendInfo:function(k){var b=this,g=b.getSprites(),d=b.getTitle(),h=b.getYField(),i=b.getHidden(),j=g.length===1,f,e,a,c;for(a=0;a<g.length;a++){f=b.getStyleByIndex(a);e=f.fillStyle;if(d){if(Ext.isArray(d)){c=d[a]}else {if(j){c=d}}}if(!d||!c){if(Ext.isArray(h)){c=h[a]}else {c=b.getId()}}k.push({name:c,mark:(Ext.isObject(e)?e.stops&&e.stops[0].color:e)||f.strokeStyle||'black',disabled:i[a],series:b.getId(),index:a})}},onSpriteAnimationStart:function(a){this.spriteAnimationCount++;if(this.spriteAnimationCount===1){this.fireEvent('animationstart')}},onSpriteAnimationEnd:function(a){this.spriteAnimationCount--;if(this.spriteAnimationCount===0){this.fireEvent('animationend')}}});Ext.define('Ext.chart.series.sprite.Series',{extend:Ext.draw.sprite.Sprite,mixins:{markerHolder:Ext.chart.MarkerHolder},inheritableStatics:{def:{processors:{dataMinX:'number',dataMaxX:'number',dataMinY:'number',dataMaxY:'number',rangeX:'data',rangeY:'data',dataX:'data',dataY:'data',labels:'default',labelOverflowPadding:'number'},defaults:{dataMinX:0,dataMaxX:1,dataMinY:0,dataMaxY:1,rangeX:null,rangeY:null,dataX:null,dataY:null,labels:null,labelOverflowPadding:10},triggers:{dataX:'bbox',dataY:'bbox',dataMinX:'bbox',dataMaxX:'bbox',dataMinY:'bbox',dataMaxY:'bbox'}}},config:{store:null,series:null,field:null}});Ext.define('Ext.chart.series.sprite.Cartesian',{extend:Ext.chart.series.sprite.Series,inheritableStatics:{def:{processors:{selectionTolerance:'number',flipXY:'bool',renderer:'default',visibleMinX:'number',visibleMinY:'number',visibleMaxX:'number',visibleMaxY:'number',innerWidth:'number',innerHeight:'number'},defaults:{selectionTolerance:20,flipXY:!1,renderer:null,transformFillStroke:!1,visibleMinX:0,visibleMinY:0,visibleMaxX:1,visibleMaxY:1,innerWidth:1,innerHeight:1},triggers:{dataX:'dataX,bbox',dataY:'dataY,bbox',visibleMinX:'panzoom',visibleMinY:'panzoom',visibleMaxX:'panzoom',visibleMaxY:'panzoom',innerWidth:'panzoom',innerHeight:'panzoom'},updaters:{dataX:function(a){this.processDataX();this.scheduleUpdater(a,'dataY',['dataY'])},dataY:function(){this.processDataY()},panzoom:function(a){var f=a.visibleMaxX-a.visibleMinX,g=a.visibleMaxY-a.visibleMinY,b=a.flipXY?a.innerHeight:a.innerWidth,d=!a.flipXY?a.innerHeight:a.innerWidth,c=this.getSurface(),e=c?c.getInherited().rtl:!1;a.scalingCenterX=0;a.scalingCenterY=0;a.scalingX=b/f;a.scalingY=d/g;a.translationX=-(a.visibleMinX*a.scalingX);a.translationY=-(a.visibleMinY*a.scalingY);if(e&&!a.flipXY){a.scalingX*=-1;a.translationX*=-1;a.translationX+=b}this.applyTransformations(!0)}}}},processDataY:Ext.emptyFn,processDataX:Ext.emptyFn,updatePlainBBox:function(b){var a=this.attr;b.x=a.dataMinX;b.y=a.dataMinY;b.width=a.dataMaxX-a.dataMinX;b.height=a.dataMaxY-a.dataMinY},binarySearch:function(d){var e=this.attr.dataX,a=0,b=e.length,c,f;if(d<=e[0]){return a}if(d>=e[b-1]){return b-1}while(a+1<b){c=a+b>>1;f=e[c];if(f===d){return c}else {if(f<d){a=c}else {b=c}}}return a},render:function(f,h,b){var g=this,d=g.attr,e=1,a=d.inverseMatrix.clone(),c;a.appendMatrix(f.inverseMatrix);if(d.dataX===null||d.dataX===undefined){return}if(d.dataY===null||d.dataY===undefined){return}if(a.getXX()*a.getYX()||a.getXY()*a.getYY()){Ext.Logger.warn('Cartesian Series sprite does not support rotation/sheering');return}c=a.transformList([[b[0]-e,b[3]+e],[b[0]+b[2]+e,-e]]);c=c[0].concat(c[1]);g.renderClipped(f,h,c,b)},renderClipped:Ext.emptyFn,getIndexNearPoint:function(b,c){var a=this.getNearestDataPoint(b,c);return a?a.index:-1},getNearestDataPoint:function(r,s){var d=this,h=d.attr,u=d.getSeries(),o=d.getSurface(),w=d.boundMarkers.items,t=h.matrix,i=h.dataX,v=h.dataY,n=h.selectionTolerance,e=Infinity,g=-1,p=null,f,l,m,b,a,c,j,k,q;if(w){c=i.length;if(u.reversedSpriteZOrder){a=c-1;j=-1;k=-1}else {a=0;j=c;k=1}for(;a!==j;a+=k){q=d.getMarkerBBox('items',a);b=o.inverseMatrix.transformPoint([r,s]);if(Ext.draw.Draw.isPointInBBox(b[0],b[1],q)){g=a;e=0;break}}}else {for(a=0,c=i.length;a<c;a++){b=t.transformPoint([i[a],v[a]]);b=o.matrix.transformPoint(b);l=r-b[0];m=s-b[1];f=Math.sqrt(l*l+m*m);if(n&&f>n){continue}if(f<e){e=f;g=a}}}if(g>-1){p={index:g,distance:e}}return p}});Ext.define('Ext.chart.series.sprite.StackedCartesian',{extend:Ext.chart.series.sprite.Cartesian,inheritableStatics:{def:{processors:{groupCount:'number',groupOffset:'number',dataStartY:'data'},defaults:{selectionTolerance:20,groupCount:1,groupOffset:0,dataStartY:null},triggers:{dataStartY:'dataY,bbox'}}}});Ext.define('Ext.chart.series.sprite.Area',{alias:'sprite.areaSeries',extend:Ext.chart.series.sprite.StackedCartesian,inheritableStatics:{def:{processors:{step:'bool'},defaults:{selectionTolerance:0,step:!1}}},renderClipped:function(E,b,u){var m=this,B=m.getStore(),A=m.getSeries(),e=m.attr,f=e.dataX,p=e.dataY,x=e.dataStartY,v=e.matrix,c,d,a,y,r,q,w,j=v.elements[0],h=v.elements[4],n=v.elements[3],i=v.elements[5],t=m.surfaceMatrix,g={},D=Math.min(u[0],u[2]),C=Math.max(u[0],u[2]),l=Math.max(0,this.binarySearch(D)),k=Math.min(f.length-1,this.binarySearch(C)+1),o=e.renderer,z={store:B},s;b.beginPath();q=f[l]*j+h;w=p[l]*n+i;b.moveTo(q,w);if(e.step){r=w;for(a=l;a<=k;a++){c=f[a]*j+h;d=p[a]*n+i;b.lineTo(c,r);b.lineTo(c,r=d)}}else {for(a=l;a<=k;a++){c=f[a]*j+h;d=p[a]*n+i;b.lineTo(c,d)}}if(x){if(e.step){y=f[k]*j+h;for(a=k;a>=l;a--){c=f[a]*j+h;d=x[a]*n+i;b.lineTo(y,d);b.lineTo(y=c,d)}}else {for(a=k;a>=l;a--){c=f[a]*j+h;d=x[a]*n+i;b.lineTo(c,d)}}}else {b.lineTo(f[k]*j+h,d);b.lineTo(f[k]*j+h,i);b.lineTo(q,i);b.lineTo(q,p[a]*n+i)}if(e.transformFillStroke){e.matrix.toContext(b)}b.fill();if(e.transformFillStroke){e.inverseMatrix.toContext(b)}b.beginPath();b.moveTo(q,w);if(e.step){for(a=l;a<=k;a++){c=f[a]*j+h;d=p[a]*n+i;b.lineTo(c,r);b.lineTo(c,r=d);g.translationX=t.x(c,d);g.translationY=t.y(c,d);if(o){s=Ext.callback(o,null,[m,g,z,a],0,A);Ext.apply(g,s)}m.putMarker('markers',g,a,!o)}}else {for(a=l;a<=k;a++){c=f[a]*j+h;d=p[a]*n+i;b.lineTo(c,d);g.translationX=t.x(c,d);g.translationY=t.y(c,d);if(o){s=Ext.callback(o,null,[m,g,z,a],0,A);Ext.apply(g,s)}m.putMarker('markers',g,a,!o)}}if(e.transformFillStroke){e.matrix.toContext(b)}b.stroke()}});Ext.define('Ext.chart.series.Area',{extend:Ext.chart.series.StackedCartesian,alias:'series.area',type:'area',seriesType:'areaSeries',isArea:!0,config:{splitStacks:!1}});Ext.define('Ext.chart.series.sprite.Bar',{alias:'sprite.barSeries',extend:Ext.chart.series.sprite.StackedCartesian,inheritableStatics:{def:{processors:{minBarWidth:'number',maxBarWidth:'number',minGapWidth:'number',radius:'number',inGroupGapWidth:'number'},defaults:{minBarWidth:2,maxBarWidth:100,minGapWidth:5,inGroupGapWidth:3,radius:0}}},drawLabel:function(y,e,n,j,i,z){var b=this,p=b.attr,t=b.getMarker('labels'),o=t.getTemplate(),a=b.labelCfg||(b.labelCfg={}),d=b.surfaceMatrix,v=p.labelOverflowPadding,r=o.attr.display,q=o.attr.orientation,u=q==='horizontal'&&p.flipXY||q==='vertical'&&!p.flipXY||!q,f=o.getCalloutLine(),s,c,g,k,h,w,x,l,m;a.x=d.x(e,j);a.y=d.y(e,j);if(f){k=f.length}else {k=0}if(!p.flipXY){a.rotationRads=-Math.PI*0.5}else {a.rotationRads=0}a.calloutVertical=!p.flipXY;switch(q){case 'horizontal':a.rotationRads=0;a.calloutVertical=!1;break;case 'vertical':a.rotationRads=-Math.PI*0.5;a.calloutVertical=!0;break;}a.text=y;if(o.attr.renderer){if(!t.get(i)){t.putMarkerFor('labels',{},i)}x=[y,t,a,{store:b.getStore()},i];h=Ext.callback(o.attr.renderer,null,x,0,b.getSeries());if(typeof h==='string'){a.text=h}else {if(typeof h==='object'){if('text' in h){a.text=h.text}w=!0}}}g=b.getMarkerBBox('labels',i,!0);if(!g){b.putMarker('labels',a,i);g=b.getMarkerBBox('labels',i,!0)}if(k>0){c=k}else {if(k===0){c=(u?g.width:g.height)/2}else {c=(u?g.width:g.height)/2+v}}l=v*2;if(n>j){c=-c;l=-l}if(u){s=r==='insideStart'?n+c:j-c}else {s=r==='insideStart'?n+l:j-l}a.x=d.x(e,s);a.y=d.y(e,s);m=this.getCalloutYPos(r,n,j,c,z);a.calloutStartX=d.x(e,m.start);a.calloutStartY=d.y(e,m.start);a.calloutPlaceX=d.x(e,m.place);a.calloutPlaceY=d.y(e,m.place);a.calloutColor=f&&f.color||b.attr.fillStyle;if(f){if(f.width){a.calloutWidth=f.width}}else {a.calloutColor='none'}a.callout=+(Math.abs(j-n)<=Math.abs(c*2)||r==='outside');if(w){Ext.apply(a,h)}b.putMarker('labels',a,i)},callOutObj:{start:0,place:0},getCalloutYPos:function(k,e,g,b,f){var a=this,c=a.callOutObj,d=k==='insideStart',l=d?e:g,i=d?e-b:g+b,j=b*2,h=i+j;if(!a.fromSelf&&!d&&(h<=f[1]||h>=f[3])){a.fromSelf=!0;c=a.getCalloutYPos('insideStart',e,g,b,f);delete a.fromSelf}else {c.start=l;c.place=i}return c},drawBar:function(l,j,k,f,g,i,h,e){var b=this,a={},c=b.attr.renderer,d;a.x=f;a.y=g;a.width=i-f;a.height=h-g;a.radius=b.attr.radius;if(c){d=Ext.callback(c,null,[b,a,{store:b.getStore()},e],0,b.getSeries());Ext.apply(a,d)}b.putMarker('items',a,e,!c)},renderClipped:function(c,v,f,A){if(this.cleanRedraw){return}var e=this,a=e.attr,r=a.dataX,F=a.dataY,l=a.labels,p=a.dataStartY,j=a.groupCount,C=a.groupOffset-(j-1)*0.5,n=a.inGroupGapWidth,q=v.lineWidth,i=a.matrix,y=i.elements[0],z=i.elements[3],K=i.elements[4],x=c.roundPixel(i.elements[5])-1,D=Math.abs(y)-a.minGapWidth,E=(Math.min(D,a.maxBarWidth)-n*(j-1))/j,k=c.roundPixel(Math.max(a.minBarWidth,E)),o=e.surfaceMatrix,t,s,m,g,b,d,h=0.5*a.lineWidth,J=Math.min(f[0],f[2]),I=Math.max(f[0],f[2]),G=Math.max(0,Math.floor(J)),H=Math.min(r.length-1,Math.ceil(I)),B=l&&e.getMarker('labels'),u,w;for(b=G;b<=H;b++){u=p?p[b]:0;w=F[b];d=r[b]*y+K+C*(k+n);t=c.roundPixel(d-k/2)+h;g=c.roundPixel(w*z+x+q);s=c.roundPixel(d+k/2)-h;m=c.roundPixel(u*z+x+q);e.drawBar(v,c,f,t,g-h,s,m-h,b);if(B&&l[b]!=null){e.drawLabel(l[b],d,m,g,b,A)}e.putMarker('markers',{translationX:o.x(d,g),translationY:o.y(d,g)},b,!0)}}});Ext.define('Ext.chart.series.Bar',{extend:Ext.chart.series.StackedCartesian,alias:'series.bar',type:'bar',seriesType:'barSeries',isBar:!0,config:{itemInstancing:{type:'rect',animation:{customDurations:{x:0,y:0,width:0,height:0,radius:0}}}},getItemForPoint:function(d,e){var b,a,c;if(this.getSprites().length){b=this.getChart();a=b.getInnerPadding();c=b.getInherited().rtl;arguments[0]=d+(c?a.right:-a.left);arguments[1]=e+a.bottom;return this.callParent(arguments)}},updateXAxis:function(a){a.setExpandRangeBy(0.5);this.callParent(arguments)},updateHidden:function(a){this.callParent(arguments);this.updateStacked()},updateStacked:function(h){var f=this,b={},e=f.getSprites(),g=e.length,d=[],c,a;for(a=0;a<g;a++){if(!e[a].attr.hidden){d.push(e[a])}}c=d.length;if(f.getStacked()){b.groupCount=1;b.groupOffset=0;for(a=0;a<c;a++){d[a].setAttributes(b)}}else {b.groupCount=c;for(a=0;a<c;a++){b.groupOffset=a;d[a].setAttributes(b)}}f.callParent(arguments)}});Ext.define('Ext.draw.LimitedCache',{config:{limit:40,feeder:function(){return 0},scope:null},cache:null,constructor:function(a){this.cache={};this.cache.list=[];this.cache.tail=0;this.initConfig(a)},get:function(b){var a=this.cache,d=this.getLimit(),c=this.getFeeder(),e=this.getScope()||this;if(a[b]){return a[b].value}if(a.list[a.tail]){delete a[a.list[a.tail].cacheId]}a[b]=a.list[a.tail]={value:c.apply(e,Array.prototype.slice.call(arguments,1)),cacheId:b};a.tail++;if(a.tail===d){a.tail=0}return a[b].value},clear:function(){this.cache={};this.cache.list=[];this.cache.tail=0}});Ext.define('Ext.draw.SegmentTree',{config:{strategy:'double'},time:function(d,a,r,C,B,D,A){var s=0,f,v,q=new Date(r[d.startIdx[0]]),z=new Date(r[d.endIdx[a-1]]),b=Ext.Date,w=[[b.MILLI,1,'ms1',null],[b.MILLI,2,'ms2','ms1'],[b.MILLI,5,'ms5','ms1'],[b.MILLI,10,'ms10','ms5'],[b.MILLI,50,'ms50','ms10'],[b.MILLI,100,'ms100','ms50'],[b.MILLI,500,'ms500','ms100'],[b.SECOND,1,'s1','ms500'],[b.SECOND,10,'s10','s1'],[b.SECOND,30,'s30','s10'],[b.MINUTE,1,'mi1','s10'],[b.MINUTE,5,'mi5','mi1'],[b.MINUTE,10,'mi10','mi5'],[b.MINUTE,30,'mi30','mi10'],[b.HOUR,1,'h1','mi30'],[b.HOUR,6,'h6','h1'],[b.HOUR,12,'h12','h6'],[b.DAY,1,'d1','h12'],[b.DAY,7,'d7','d1'],[b.MONTH,1,'mo1','d1'],[b.MONTH,3,'mo3','mo1'],[b.MONTH,6,'mo6','mo3'],[b.YEAR,1,'y1','mo3'],[b.YEAR,5,'y5','y1'],[b.YEAR,10,'y10','y5'],[b.YEAR,100,'y100','y10']],t,e,x=s,y=a,p=d.startIdx,i=d.endIdx,l=d.minIdx,k=d.maxIdx,u=d.open,m=d.close,o=d.minX,h=d.minY,n=d.maxX,g=d.maxY,c,j;for(t=0;a>s+1&&t<w.length;t++){q=new Date(r[p[0]]);e=w[t];q=b.align(q,e[0],e[1]);if(b.diff(q,z,e[0])>r.length*2*e[1]){continue}if(e[3]&&d.map['time_'+e[3]]){f=d.map['time_'+e[3]][0];v=d.map['time_'+e[3]][1]}else {f=x;v=y}s=a;j=q;p[a]=p[f];i[a]=i[f];l[a]=l[f];k[a]=k[f];u[a]=u[f];m[a]=m[f];o[a]=o[f];h[a]=h[f];n[a]=n[f];g[a]=g[f];j=Ext.Date.add(j,e[0],e[1]);for(c=f+1;c<v;c++){if(r[i[c]]<+j){i[a]=i[c];m[a]=m[c];if(g[c]>g[a]){g[a]=g[c];n[a]=n[c];k[a]=k[c]}if(h[c]<h[a]){h[a]=h[c];o[a]=o[c];l[a]=l[c]}}else {a++;p[a]=p[c];i[a]=i[c];l[a]=l[c];k[a]=k[c];u[a]=u[c];m[a]=m[c];o[a]=o[c];h[a]=h[c];n[a]=n[c];g[a]=g[c];j=Ext.Date.add(j,e[0],e[1])}}if(a>s){d.map['time_'+e[2]]=[s,a]}}},'double':function(a,c,u,s,r,t,q){var d=0,p,o=1,b,k,l,f,e,n,m,i,j,g,h;while(c>d+1){p=d;d=c;o+=o;for(b=p;b<d;b+=2){if(b===d-1){k=a.startIdx[b];l=a.endIdx[b];f=a.minIdx[b];e=a.maxIdx[b];n=a.open[b];m=a.close[b];i=a.minX[b];j=a.minY[b];g=a.maxX[b];h=a.maxY[b]}else {k=a.startIdx[b];l=a.endIdx[b+1];n=a.open[b];m=a.close[b];if(a.minY[b]<=a.minY[b+1]){f=a.minIdx[b];i=a.minX[b];j=a.minY[b]}else {f=a.minIdx[b+1];i=a.minX[b+1];j=a.minY[b+1]}if(a.maxY[b]>=a.maxY[b+1]){e=a.maxIdx[b];g=a.maxX[b];h=a.maxY[b]}else {e=a.maxIdx[b+1];g=a.maxX[b+1];h=a.maxY[b+1]}}a.startIdx[c]=k;a.endIdx[c]=l;a.minIdx[c]=f;a.maxIdx[c]=e;a.open[c]=n;a.close[c]=m;a.minX[c]=i;a.minY[c]=j;a.maxX[c]=g;a.maxY[c]=h;c++}a.map['double_'+o]=[d,c]}},none:Ext.emptyFn,aggregateData:function(g,j,i,l,h){var c=g.length,k=[],m=[],o=[],n=[],u=[],s=[],t=[],q=[],r=[],p=[],d={startIdx:k,endIdx:m,minIdx:o,maxIdx:n,open:u,minX:s,minY:t,maxX:q,maxY:r,close:p},f=Infinity,e=-Infinity,a,b;for(a=0;a<c;a++){b=g[a];k[a]=a;m[a]=a;o[a]=a;n[a]=a;u[a]=j[a];s[a]=b;t[a]=l[a];q[a]=b;r[a]=i[a];p[a]=h[a];if(b<f){f=b}if(b>e){e=b}}d.map={original:[0,c]};d.range=Math.abs(e-f);if(c){this[this.getStrategy()](d,c,g,j,i,l,h)}return d},binarySearch:function(e,b,a,d,h){var g=this.dataX,c,f;if(d<=g[e[0]]){return b}if(d>=g[e[a-1]]){return a-1}while(b+1<a){c=b+a>>1;f=g[e[c]];if(f===d){return c}else {if(f<d){b=c}else {a=c}}}return h?b:a},constructor:function(a){this.initConfig(a)},setData:function(c,e,a,b,d){if(!a){d=b=a=e}this.dataX=c;this.dataOpen=e;this.dataHigh=a;this.dataLow=b;this.dataClose=d;if(c.length===a.length&&c.length===b.length){this.cache=this.aggregateData(c,e,a,b,d)}},getAggregation:function(n,m,k){if(!this.cache){return null}var g=Infinity,b=this.cache,l=b.range,e=b.map,a=e.original,j,c,f,d,i,h;for(j in e){c=e[j];f=c[1]-c[0]-1;if(f===0){continue}d=l/f;if(k<=d&&d<g){a=c;g=d}}i=Math.max(this.binarySearch(b.startIdx,a[0],a[1],n,!0),a[0]);h=Math.min(this.binarySearch(b.endIdx,a[0],a[1],m,!1)+1,a[1]);return {data:b,start:i,end:h}}});Ext.define('Ext.chart.series.sprite.Aggregative',{extend:Ext.chart.series.sprite.Cartesian,inheritableStatics:{def:{processors:{dataHigh:'data',dataLow:'data',dataClose:'data'},aliases:{dataOpen:'dataY'},defaults:{dataHigh:null,dataLow:null,dataClose:null}}},config:{aggregator:{}},applyAggregator:function(a,b){return Ext.factory(a,Ext.draw.SegmentTree,b)},constructor:function(){this.callParent(arguments)},processDataY:function(){var c=this,a=c.attr,d=a.dataHigh,g=a.dataLow,f=a.dataClose,e=a.dataY,b;c.callParent(arguments);if(a.dataX&&e&&e.length>0){b=c.getAggregator();if(d){b.setData(a.dataX,a.dataY,d,g,f)}else {b.setData(a.dataX,a.dataY)}}},getGapWidth:function(){return 1},renderClipped:function(h,i,b,d){var c=this,g=Math.min(b[0],b[2]),f=Math.max(b[0],b[2]),e=c.getAggregator(),a=e&&e.getAggregation(g,f,(f-g)/d[2]*c.getGapWidth());if(a){c.dataStart=a.data.startIdx[a.start];c.dataEnd=a.data.endIdx[a.end-1];c.renderAggregates(a.data,a.start,a.end,h,i,b,d)}}});Ext.define('Ext.chart.series.Polar',{extend:Ext.chart.series.Series,config:{rotation:0,radius:null,center:[0,0],offsetX:0,offsetY:0,showInLegend:!0,xField:null,yField:null,angleField:null,radiusField:null,xAxis:null,yAxis:null},directions:['X','Y'],fieldCategoryX:['X'],fieldCategoryY:['Y'],deprecatedConfigs:{field:'angleField',lengthField:'radiusField'},constructor:function(a){var b=this,d=b.self.getConfigurator(),e=d.configs,c;if(a){for(c in b.deprecatedConfigs){if(c in a&&!(a in e)){Ext.raise("'"+c+"' config has been deprecated. Please use the '"+b.deprecatedConfigs[c]+"' config instead.")}}}b.callParent([a])},getXField:function(){return this.getAngleField()},updateXField:function(a){this.setAngleField(a)},getYField:function(){return this.getRadiusField()},updateYField:function(a){this.setRadiusField(a)},applyXAxis:function(a,b){return this.getChart().getAxis(a)||b},applyYAxis:function(a,b){return this.getChart().getAxis(a)||b},getXRange:function(){return [this.dataRange[0],this.dataRange[2]]},getYRange:function(){return [this.dataRange[1],this.dataRange[3]]},themeColorCount:function(){var c=this,a=c.getStore(),b=a&&a.getCount()||0;return b},isStoreDependantColorCount:!0,getDefaultSpriteConfig:function(){return {type:this.seriesType,renderer:this.getRenderer(),centerX:0,centerY:0,rotationCenterX:0,rotationCenterY:0}},applyRotation:function(a){return Ext.draw.sprite.AttributeParser.angle(Ext.draw.Draw.rad(a))},updateRotation:function(b){var a=this.getSprites();if(a&&a[0]){a[0].setAttributes({baseRotation:b})}}});Ext.define('Ext.chart.series.Gauge',{alias:'series.gauge',extend:Ext.chart.series.Polar,type:'gauge',seriesType:'pieslice',config:{needle:!1,needleLength:90,needleWidth:4,donut:30,showInLegend:!1,value:null,colors:null,sectors:null,minimum:0,maximum:100,rotation:0,totalAngle:Math.PI/2,rect:[0,0,1,1],center:[0.5,0.75],radius:0.5,wholeDisk:!1},coordinateX:function(){return this.coordinate('X',0,2)},coordinateY:function(){return this.coordinate('Y',1,2)},updateNeedle:function(c){var a=this,b=a.getSprites(),d=a.valueToAngle(a.getValue());if(b&&b.length){b[0].setAttributes({startAngle:c?d:0,endAngle:d,strokeOpacity:c?1:0,lineWidth:c?a.getNeedleWidth():0});a.doUpdateStyles()}},themeColorCount:function(){var b=this,a=b.getStore(),c=a&&a.getCount()||0;return c+(b.getNeedle()?0:1)},updateColors:function(c,i){var g=this,d=g.getSectors(),h=d&&d.length,f=g.getSprites(),b=Ext.Array.clone(c),e=c&&c.length,a;if(!e||!c[0]){return}for(a=0;a<h;a++){b[a+1]=d[a].color||b[a+1]||c[a%e]}if(f.length){f[0].setAttributes({strokeStyle:b[0]})}this.setSubStyle({fillStyle:b,strokeStyle:b});this.doUpdateStyles()},updateRect:function(d){var f=this.getWholeDisk(),a=f?Math.PI:this.getTotalAngle()/2,g=this.getDonut()/100,e,b,c;if(a<=Math.PI/2){e=2*Math.sin(a);b=1-g*Math.cos(a)}else {e=2;b=1-Math.cos(a)}c=Math.min(d[2]/e,d[3]/b);this.setRadius(c);this.setCenter([d[2]/2,c+(d[3]-b*c)/2])},updateCenter:function(a){this.setStyle({centerX:a[0],centerY:a[1],rotationCenterX:a[0],rotationCenterY:a[1]});this.doUpdateStyles()},updateRotation:function(a){this.setStyle({rotationRads:a-(this.getTotalAngle()+Math.PI)/2});this.doUpdateStyles()},doUpdateShape:function(a,g){var b=this,d=b.getSectors(),f=d&&d.length||0,e=b.getNeedleLength()/100,c;c=[a*e,a];while(f--){c.push(a)}b.setSubStyle({endRho:c,startRho:a/100*g});b.doUpdateStyles()},updateRadius:function(a){var b=this.getDonut();this.doUpdateShape(a,b)},updateDonut:function(b){var a=this.getRadius();this.doUpdateShape(a,b)},valueToAngle:function(a){a=this.applyValue(a);return this.getTotalAngle()*(a-this.getMinimum())/(this.getMaximum()-this.getMinimum())},applyValue:function(a){return Math.min(this.getMaximum(),Math.max(a,this.getMinimum()))},updateValue:function(d){var a=this,e=a.getNeedle(),c=a.valueToAngle(d),b=a.getSprites();b[0].getRendererData().value=d;b[0].setAttributes({startAngle:e?c:0,endAngle:c});a.doUpdateStyles()},processData:function(){var a=this,j=a.getStore(),i=j&&j.first(),c,h,b,g,f,e,d;if(i){e=a.getXField();if(e){d=i.get(e)}}b=a.getXAxis();if(b){g=b.getMinimum();f=b.getMaximum();c=b.getSprites()[0].getAnimation();h=c.getDuration();c.setDuration(0);if(Ext.isNumber(g)){a.setMinimum(g)}else {b.setMinimum(a.getMinimum())}if(Ext.isNumber(f)){a.setMaximum(f)}else {b.setMaximum(a.getMaximum())}c.setDuration(h)}if(!Ext.isNumber(d)){d=a.getMinimum()}a.setValue(d)},getDefaultSpriteConfig:function(){return {type:this.seriesType,renderer:this.getRenderer(),animation:{customDurations:{translationX:0,translationY:0,rotationCenterX:0,rotationCenterY:0,centerX:0,centerY:0,startRho:0,endRho:0,baseRotation:0}}}},normalizeSectors:function(b){var c=this,e=b&&b.length||0,a,d,f,g;if(e){for(a=0;a<e;a++){d=b[a];if(typeof d==='number'){b[a]={start:a>0?b[a-1].end:c.getMinimum(),end:Math.min(d,c.getMaximum())};if(a===e-1&&b[a].end<c.getMaximum()){b[a+1]={start:b[a].end,end:c.getMaximum()}}}else {if(typeof d.start==='number'){f=Math.max(d.start,c.getMinimum())}else {f=a>0?b[a-1].end:c.getMinimum()}if(typeof d.end==='number'){g=Math.min(d.end,c.getMaximum())}else {g=c.getMaximum()}b[a].start=f;b[a].end=g}}}else {b=[{start:c.getMinimum(),end:c.getMaximum()}]}return b},getSprites:function(){var a=this,l=a.getStore(),m=a.getValue(),k=a.getLabel(),c,n;if(!l&&!Ext.isNumber(m)){return Ext.emptyArray}var j=a.getChart(),o=a.getAnimation()||j&&j.getAnimation(),e=a.sprites,i=0,b,d,f,g,h=[];if(e&&e.length){e[0].setAnimation(o);return e}g={store:l,field:a.getXField(),angleField:a.getXField(),value:m,series:a};a.needleSprite=b=a.createSprite();b.setAttributes({zIndex:10},!0);b.setRendererData(g);b.setRendererIndex(i++);h.push(a.getNeedleWidth());if(k){k.getTemplate().setField(!0)}d=a.normalizeSectors(a.getSectors());for(c=0,n=d.length;c<n;c++){f={startAngle:a.valueToAngle(d[c].start),endAngle:a.valueToAngle(d[c].end),label:d[c].label,fillStyle:d[c].color,strokeOpacity:0,doCallout:!1,labelOverflowPadding:-1};Ext.apply(f,d[c].style);b=a.createSprite();b.setRendererData(g);b.setRendererIndex(i++);b.setAttributes(f,!0);h.push(f.lineWidth)}a.setSubStyle({lineWidth:h});a.doUpdateStyles();return e},doUpdateStyles:function(){var a=this;a.callParent();if(a.sprites.length){a.needleSprite.setAttributes({startRho:a.getNeedle()?0:a.getRadius()/100*a.getDonut()})}}});Ext.define('Ext.chart.series.sprite.Line',{alias:'sprite.lineSeries',extend:Ext.chart.series.sprite.Aggregative,inheritableStatics:{def:{processors:{curve:'default',fillArea:'bool',nullStyle:'enums(gap,connect,origin)',preciseStroke:'bool',xAxis:'default',yCap:'default'},defaults:{curve:{type:'linear'},nullStyle:'connect',fillArea:!1,preciseStroke:!0,xAxis:null,yCap:Math.pow(2,20),yJump:50},triggers:{dataX:'dataX,bbox,curve',dataY:'dataY,bbox,curve',curve:'curve'},updaters:{curve:'curveUpdater'}}},list:null,curveUpdater:function(f){var a=this,b=f.dataX,c=f.dataY,e=f.curve,d=b&&c&&b.length>2&&c.length>2,g=e.type;if(d){if(g==='natural'){a.smoothX=Ext.draw.Draw.naturalSpline(b);a.smoothY=Ext.draw.Draw.naturalSpline(c)}else {if(g==='cardinal'){a.smoothX=Ext.draw.Draw.cardinalSpline(b,e.tension);a.smoothY=Ext.draw.Draw.cardinalSpline(c,e.tension)}else {d=!1}}}if(!d){delete a.smoothX;delete a.smoothY}},updatePlainBBox:function(b){var a=this.attr,c=Math.min(0,a.dataMinY),d=Math.max(0,a.dataMaxY);b.x=a.dataMinX;b.y=c;b.width=a.dataMaxX-a.dataMinX;b.height=d-c},drawStrip:function(c,a){var b,d;c.moveTo(a[0],a[1]);for(b=2,d=a.length;b<d;b+=2){c.lineTo(a[b],a[b+1])}},drawStraightStroke:function(K,a,I,L,i,n){var o=this,s=o.attr,C=s.nullStyle,B=C==='connect',G=C==='origin',D=s.renderer,H=s.curve,z=H.type==='step-after',m=!0,J=i.length,l={type:'line',smooth:!1,step:z},q,E,u,v,x,w,h,k,r,y,f,t,p,e,j,b,c,F,A,d,g=[];a.beginPath();for(d=3;d<J;d+=3){b=i[d-3];c=i[d-2];e=i[d];j=i[d+1];F=i[d+3];A=i[d+4];v=Ext.isNumber(b);x=Ext.isNumber(e);w=Ext.isNumber(F);h=v&&Ext.isNumber(c);k=x&&Ext.isNumber(j);r=w&&Ext.isNumber(A);if(G){if(!h&&v){c=n;h=!0}if(!k&&x){j=n;k=!0}if(!r&&w){A=n;r=!0}}if(D){l.x=e;l.y=j;l.x0=b;l.y0=c;E=[o,l,o.rendererData,I+d/3];q=Ext.callback(D,null,E,0,o.getSeries())}if(y&&B&&h&&f){t=f[0];p=f[1];if(m){a.beginPath();a.moveTo(t,p);g.push(t,p);u=t;m=!1}if(z){a.lineTo(b,p);g.push(b,p)}a.lineTo(b,c);g.push(b,c);f=[b,c];y=!1}if(B&&f&&k&&!h){b=f[0];c=f[1];h=!0}if(k){f=[e,j]}if(h&&k){if(m){a.beginPath();a.moveTo(b,c);g.push(b,c);u=b;m=!1}}else {y=!0;continue}if(z){a.lineTo(e,c);g.push(e,c)}a.lineTo(e,j);g.push(e,j);if(q||!r){a.save();Ext.apply(a,q);q=null;if(s.fillArea){a.lineTo(e,n);a.lineTo(u,n);a.closePath();a.fill()}a.beginPath();o.drawStrip(a,g);g=[];a.stroke();a.restore();a.beginPath();m=!0}}},calculateScale:function(b,d){var a=0,c=b;while(c<d&&b>0){a++;c+=b>>a}return Math.pow(2,a>0?a-1:a)},drawSmoothStroke:function(z,a,m,E,j,B){var d=this,i=d.attr,D=i.step,l=i.matrix,r=i.renderer,w=l.getXX(),x=l.getYY(),u=l.getDX(),v=l.getDY(),s=d.smoothX,t=d.smoothY,C=d.calculateScale(i.dataX.length,E),n,p,o,q,h,k,e,f,c,g,y,A,b={type:'line',smooth:!0,step:D};a.beginPath();a.moveTo(s[m*3]*w+u,t[m*3]*x+v);for(c=0,g=m*3+1;c<j.length-3;c+=3,g+=3*C){n=s[g]*w+u;p=t[g]*x+v;o=s[g+1]*w+u;q=t[g+1]*x+v;h=z.roundPixel(j[c+3]);k=j[c+4];e=z.roundPixel(j[c]);f=j[c+1];if(r){b.x0=e;b.y0=f;b.cx1=n;b.cy1=p;b.cx2=o;b.cy2=q;b.x=h;b.y=k;A=[d,b,d.rendererData,m+c/3+1];y=Ext.callback(r,null,A,0,d.getSeries());a.save();Ext.apply(a,y)}if(i.fillArea){a.moveTo(e,f);a.bezierCurveTo(n,p,o,q,h,k);a.lineTo(h,B);a.lineTo(e,B);a.lineTo(e,f);a.closePath();a.fill();a.beginPath()}a.moveTo(e,f);a.bezierCurveTo(n,p,o,q,h,k);a.stroke();a.moveTo(e,f);a.closePath();if(r){a.restore()}a.beginPath();a.moveTo(h,k)}a.beginPath()},drawLabel:function(r,m,f,d,s){var b=this,q=b.attr,p=b.getMarker('labels'),l=p.getTemplate(),a=b.labelCfg||(b.labelCfg={}),h=b.surfaceMatrix,j,e,g=q.labelOverflowPadding,k,i,c,o,n;a.x=h.x(m,f);a.y=h.y(m,f);if(q.flipXY){a.rotationRads=Math.PI*0.5}else {a.rotationRads=0}a.text=r;if(l.attr.renderer){o=[r,p,a,b.rendererData,d];c=Ext.callback(l.attr.renderer,null,o,0,b.getSeries());if(typeof c==='string'){a.text=c}else {if(typeof c==='object'){if('text' in c){a.text=c.text}n=!0}}}i=b.getMarkerBBox('labels',d,!0);if(!i){b.putMarker('labels',a,d);i=b.getMarkerBBox('labels',d,!0)}k=i.height/2;j=m;switch(l.attr.display){case 'under':e=f-k-g;break;case 'rotate':j+=g;e=f-g;a.rotationRads=-Math.PI/4;break;default:e=f+k+g;}a.x=h.x(j,e);a.y=h.y(j,e);if(n){Ext.apply(a,c)}b.putMarker('labels',a,d)},drawMarker:function(e,f,i){var b=this,j=b.attr,c=j.renderer,g=b.surfaceMatrix,a={},d,h;if(c&&b.getMarker('markers')){a.type='marker';a.x=e;a.y=f;h=[b,a,b.rendererData,i];d=Ext.callback(c,null,h,0,b.getSeries());if(d){Ext.apply(a,d)}}a.translationX=g.x(e,f);a.translationY=g.y(e,f);delete a.x;delete a.y;b.putMarker('markers',a,i,!c)},drawStroke:function(b,f,c,g,e,d){var a=this,h=a.smoothX&&a.smoothY;if(h){a.drawSmoothStroke(b,f,c,g,e,d)}else {a.drawStraightStroke(b,f,c,g,e,d)}},renderAggregates:function(o,J,K,F,e,V,i){var d=this,a=d.attr,H=a.dataX,I=a.dataY,G=a.labels,w=a.xAxis,y=a.yCap,N=a.smooth&&d.smoothX&&d.smoothY,Q=G&&d.getMarker('labels'),P=d.getMarker('markers'),v=a.matrix,O=F.devicePixelRatio,l=v.getXX(),m=v.getYY(),j=v.getDX(),k=v.getDY(),c=d.list||(d.list=[]),T=o.minX,R=o.maxX,U=o.minY,S=o.maxY,r=o.startIdx,s=!0,B,t,C,u,g,D,z,f,b,p,n,h,x,q,E,M,A,L;d.rendererData={store:d.getStore()};c.length=0;for(b=J;b<K;b++){n=T[b];h=R[b];x=U[b];q=S[b];B=Ext.isNumber(n);C=Ext.isNumber(x);t=Ext.isNumber(h);u=Ext.isNumber(q);if(n<h){c.push(B?n*l+j:null,C?x*m+k:null,r[b]);c.push(t?h*l+j:null,u?q*m+k:null,r[b])}else {if(n>h){c.push(t?h*l+j:null,u?q*m+k:null,r[b]);c.push(B?n*l+j:null,C?x*m+k:null,r[b])}else {c.push(t?h*l+j:null,u?q*m+k:null,r[b])}}}if(c.length){for(b=0;b<c.length;b+=3){z=c[b];f=c[b+1];if(Ext.isNumber(z)&&Ext.isNumber(f)){if(f>y){f=y}else {if(f<-y){f=-y}}c[b+1]=f}else {s=!1;continue}p=c[b+2];if(P){d.drawMarker(z,f,p)}if(Q&&G[p]){d.drawLabel(G[p],z,f,p,i)}}d.isContinuousLine=s;if(N&&!s){Ext.raise('Line smoothing in only supported for gapless data, '+'where all data points are finite numbers.')}if(w){D=w.getAlignment()==='vertical';if(Ext.isNumber(w.floatingAtCoord)){g=(D?i[2]:i[3])-w.floatingAtCoord}else {g=D?i[0]:i[1]}}else {g=a.flipXY?i[0]:i[1]}if(a.preciseStroke){if(a.fillArea){e.fill()}if(a.transformFillStroke){a.inverseMatrix.toContext(e)}d.drawStroke(F,e,J,K,c,g);if(a.transformFillStroke){a.matrix.toContext(e)}e.stroke()}else {d.drawStroke(F,e,J,K,c,g);if(s&&N&&a.fillArea&&!a.renderer){E=H[H.length-1]*l+j+O;M=I[I.length-1]*m+k;A=H[0]*l+j-O;L=I[0]*m+k;e.lineTo(E,M);e.lineTo(E,g-a.lineWidth);e.lineTo(A,g-a.lineWidth);e.lineTo(A,L)}if(a.transformFillStroke){a.matrix.toContext(e)}if(a.fillArea){e.fillStroke(a,!0)}else {e.stroke(!0)}}}}});Ext.define('Ext.chart.series.Line',{extend:Ext.chart.series.Cartesian,alias:'series.line',type:'line',seriesType:'lineSeries',isLine:!0,config:{selectionTolerance:20,curve:{type:'linear'},smooth:null,step:null,nullStyle:'gap',fill:undefined,aggregator:{strategy:'double'}},themeMarkerCount:function(){return 1},getDefaultSpriteConfig:function(){var b=this,e=b.callParent(arguments),a=Ext.apply({},b.getStyle()),d,c=!1;if(b.config.fill!==undefined){if(b.config.fill){c=!0;if(a.fillStyle===undefined){if(a.strokeStyle===undefined){d=b.getStyleWithTheme();a.fillStyle=d.fillStyle;a.strokeStyle=d.strokeStyle}else {a.fillStyle=a.strokeStyle}}}}else {if(a.fillStyle){c=!0}}if(!c){delete a.fillStyle}a=Ext.apply(e||{},a);return Ext.apply(a,{fillArea:c,selectionTolerance:b.config.selectionTolerance})},updateFill:function(a){this.withSprite(function(b){return b.setAttributes({fillArea:a})})},updateCurve:function(a){this.withSprite(function(b){return b.setAttributes({curve:a})})},getCurve:function(){return this.withSprite(function(a){return a.attr.curve})},updateNullStyle:function(a){this.withSprite(function(b){return b.setAttributes({nullStyle:a})})},updateSmooth:function(a){this.setCurve({type:a?'natural':'linear'})},updateStep:function(a){this.setCurve({type:a?'step-after':'linear'})}});Ext.define('Ext.chart.series.sprite.PieSlice',{extend:Ext.draw.sprite.Sector,mixins:{markerHolder:Ext.chart.MarkerHolder},alias:'sprite.pieslice',inheritableStatics:{def:{processors:{doCallout:'bool',label:'string',rotateLabels:'bool',labelOverflowPadding:'number',renderer:'default'},defaults:{doCallout:!0,rotateLabels:!0,label:'',labelOverflowPadding:10,renderer:null}}},config:{rendererData:null,rendererIndex:0,series:null},setGradientBBox:function(k,p){var g=this,a=g.attr,m=a.fillStyle&&a.fillStyle.isGradient||a.strokeStyle&&a.strokeStyle.isGradient;if(m&&!a.constrainGradients){var j=g.getMidAngle(),c=a.margin,e=a.centerX,f=a.centerY,l=a.endRho,b=a.matrix,n=b.getScaleX(),o=b.getScaleY(),i=n*l,h=o*l,d={width:i+i,height:h+h};if(c){e+=c*Math.cos(j);f+=c*Math.sin(j)}d.x=b.x(e,f)-i;d.y=b.y(e,f)-h;k.setGradientBBox(d)}else {g.callParent([k,p])}},render:function(g,f,e){var b=this,a=b.attr,d={},c;if(a.renderer){d={type:'sector',centerX:a.centerX,centerY:a.centerY,margin:a.margin,startAngle:Math.min(a.startAngle,a.endAngle),endAngle:Math.max(a.startAngle,a.endAngle),startRho:Math.min(a.startRho,a.endRho),endRho:Math.max(a.startRho,a.endRho)};c=Ext.callback(a.renderer,null,[b,d,b.getRendererData(),b.getRendererIndex()],0,b.getSeries());b.setAttributes(c);b.useAttributes(f,e)}b.callParent([g,f,e]);if(a.label&&b.getMarker('labels')){b.placeLabel()}},placeLabel:function(){var c=this,a=c.attr,i=a.attributeId,s=Math.min(a.startAngle,a.endAngle),t=Math.max(a.startAngle,a.endAngle),m=(s+t)*0.5,u=a.margin,q=a.centerX,r=a.centerY,p=Math.sin(m),o=Math.cos(m),z=Math.min(a.startRho,a.endRho)+u,j=Math.max(a.startRho,a.endRho)+u,v=(z+j)*0.5,d=c.surfaceMatrix,b=c.labelCfg||(c.labelCfg={}),x=c.getMarker('labels'),g=x.getTemplate(),y=g.getHideLessThan(),h=g.getCalloutLine(),l,e,f,n,w,k;if(h){k=h.length||40}else {k=0}d.appendMatrix(a.matrix);b.text=a.label;e=q+o*v;f=r+p*v;b.x=d.x(e,f);b.y=d.y(e,f);e=q+o*j;f=r+p*j;b.calloutStartX=d.x(e,f);b.calloutStartY=d.y(e,f);e=q+o*(j+k);f=r+p*(j+k);b.calloutPlaceX=d.x(e,f);b.calloutPlaceY=d.y(e,f);if(!a.rotateLabels){b.rotationRads=0}else {switch(g.attr.orientation){case 'horizontal':b.rotationRads=m+Math.atan2(d.y(1,0)-d.y(0,0),d.x(1,0)-d.x(0,0))+Math.PI/2;break;case 'vertical':b.rotationRads=m+Math.atan2(d.y(1,0)-d.y(0,0),d.x(1,0)-d.x(0,0));break;}}b.calloutColor=h&&h.color||c.attr.fillStyle;if(h){if(h.width){b.calloutWidth=h.width}}else {b.calloutColor='none'}b.globalAlpha=a.globalAlpha*a.fillOpacity;if(g.display!=='none'){b.hidden=a.startAngle==a.endAngle}if(g.attr.renderer){w=[c.attr.label,x,b,c.getRendererData(),c.getRendererIndex()];n=Ext.callback(g.attr.renderer,null,w,0,c.getSeries());if(typeof n==='string'){b.text=n}else {Ext.apply(b,n)}}c.putMarker('labels',b,i);l=c.getMarkerBBox('labels',i,!0);if(l){if(a.doCallout&&((t-s)*j>y||a.highlighted)){if(g.attr.display==='outside'){c.putMarker('labels',{callout:1},i)}else {if(g.attr.display==='inside'){c.putMarker('labels',{callout:0},i)}else {c.putMarker('labels',{callout:1-c.sliceContainsLabel(a,l)},i)}}}else {c.putMarker('labels',{globalAlpha:c.sliceContainsLabel(a,l)},i)}}},sliceContainsLabel:function(a,d){var b=a.labelOverflowPadding,f=(a.endRho+a.startRho)/2,g=f+(d.width+b)/2,c=f-(d.width+b)/2,e,h,i,j;if(b<0){return 1}if(d.width+b*2>a.endRho-a.startRho){return 0}h=Math.sqrt(a.endRho*a.endRho-g*g);i=Math.sqrt(a.endRho*a.endRho-c*c);e=Math.abs(a.endAngle-a.startAngle);j=e>Math.PI/2?c:Math.abs(Math.tan(e/2))*c;if(d.height+b*2>Math.min(h,i,j)*2){return 0}return 1}});Ext.define('Ext.chart.series.Pie',{extend:Ext.chart.series.Polar,type:'pie',alias:'series.pie',seriesType:'pieslice',isPie:!0,config:{donut:0,rotation:0,clockwise:!0,totalAngle:2*Math.PI,hidden:[],radiusFactor:100,highlightCfg:{margin:20},style:{}},directions:['X'],applyLabel:function(a,b){if(Ext.isObject(a)&&!Ext.isString(a.orientation)){Ext.apply(a=Ext.Object.chain(a),{orientation:'vertical'})}return a},updateLabelData:function(){var d=this,k=d.getStore(),h=k.getData().items,e=d.getSprites(),i=d.getLabel(),g=i&&i.getTemplate().getField(),j=d.getHidden(),a,c,f,b;if(e.length&&g){f=[];for(a=0,c=h.length;a<c;a++){f.push(h[a].get(g))}for(a=0,c=e.length;a<c;a++){b=e[a];b.setAttributes({label:f[a]});b.putMarker('labels',{hidden:j[a]},b.attr.attributeId)}}},coordinateX:function(){var d=this,t=d.getStore(),i=t.getData().items,e=i.length,s=d.getXField(),p=d.getYField(),q,g=0,l,m,k=0,f=d.getHidden(),o=[],a,n=0,h=d.getTotalAngle(),r=d.getClockwise()?1:-1,b=d.getSprites(),c,j;if(!b){return}for(a=0;a<e;a++){q=Math.abs(Number(i[a].get(s)))||0;m=p&&Math.abs(Number(i[a].get(p)))||0;if(!f[a]){g+=q;if(m>k){k=m}}o[a]=g;if(a>=f.length){f[a]=!1}}f.length=e;d.maxY=k;if(g!==0){l=h/g}for(a=0;a<e;a++){c=b[a];if(c){c.setAttributes({startAngle:n,endAngle:n=l?r*o[a]*l:0,globalAlpha:1})}}if(e<b.length){for(a=e;a<b.length;a++){c=b[a];j=c.getMarker('labels');if(j){j.clear(c.getId());c.releaseMarker('labels')}c.destroy()}b.length=e}for(a=e;a<b.length;a++){b[a].setAttributes({startAngle:h,endAngle:h,globalAlpha:0})}},updateCenter:function(a){this.setStyle({translationX:a[0]+this.getOffsetX(),translationY:a[1]+this.getOffsetY()});this.doUpdateStyles()},updateRadius:function(a){this.setStyle({startRho:a*this.getDonut()*0.01,endRho:a*this.getRadiusFactor()*0.01});this.doUpdateStyles()},getStyleByIndex:function(h){var a=this,j=a.getStore(),g=j.getAt(h),f=a.getYField(),e=a.getRadius(),c={},b,d,i;if(g){i=f&&Math.abs(Number(g.get(f)))||0;b=e*a.getDonut()*0.01;d=e*a.getRadiusFactor()*0.01;c=a.callParent([h]);c.startRho=b;c.endRho=a.maxY?b+(d-b)*i/a.maxY:d}return c},updateDonut:function(b){var a=this.getRadius();this.setStyle({startRho:a*b*0.01,endRho:a*this.getRadiusFactor()*0.01});this.doUpdateStyles()},rotationOffset:-Math.PI/2,updateRotation:function(a){this.setStyle({rotationRads:a+this.rotationOffset});this.doUpdateStyles()},updateTotalAngle:function(a){this.processData()},getSprites:function(){var a=this,f=a.getChart(),e=a.getXField(),p=a.getYField(),g=a.getStore();if(!f||!g){return Ext.emptyArray}a.getColors();a.getSubStyle();var j=g.getData().items,o=j.length,m=a.getAnimation()||f&&f.getAnimation(),n=a.sprites,b,h=!1,l=0,k=a.getLabel(),d=k&&k.getTemplate(),c,i;i={store:g,field:e,angleField:e,radiusField:p,series:a};for(c=0;c<o;c++){b=n[c];if(!b&&j[c].get(e)){b=a.createSprite();if(a.getHighlight()){b.config.highlight=a.getHighlight();b.addModifier('highlight',!0)}if(d&&d.getField()){d.setAttributes({labelOverflowPadding:a.getLabelOverflowPadding()});d.getAnimation().setCustomDurations({'callout':200})}b.setAttributes(a.getStyleByIndex(c));b.setRendererData(i);h=!0}if(b){b.setRendererIndex(l++);b.setAnimation(m)}}if(h){a.doUpdateStyles()}return a.sprites},betweenAngle:function(d,c,a){var b=Math.PI*2,e=this.rotationOffset;if(c===a){return !1}if(!this.getClockwise()){d*=-1;c*=-1;a*=-1;c-=e;a-=e}else {c+=e;a+=e}d-=c;a-=c;d%=b;a%=b;d+=b;a+=b;d%=b;a%=b;return d<a||Ext.Number.isEqual(a,0,1.0E-8)},getItemByIndex:function(b,a){a=a||'sprites';return this.callParent([b,a])},getItemForAngle:function(b){var c=this,d=c.getSprites(),f,e,h,g,a,i;b%=Math.PI*2;while(b<0){b+=Math.PI*2}if(d){e=c.getStore();h=e.getData().items;g=c.getHidden();for(a=0,i=e.getCount();a<i;a++){if(!g[a]){f=d[a].attr;if(f.startAngle<=b&&f.endAngle>=b){return {series:c,sprite:d[a],index:a,record:h[a],field:c.getXField()}}}}}return null},getItemForPoint:function(t,u){var a=this,h=a.getSprites(),i=a.getCenter(),o=a.getOffsetX(),p=a.getOffsetY(),e=t-i[0]+o,f=u-i[1]+p,s=a.getStore(),r=a.getDonut(),g=s.getData().items,n=Math.atan2(f,e)-a.getRotation(),j=Math.sqrt(e*e+f*f),m=a.getRadius()*r*0.01,q=a.getHidden(),k=null,b,l,c,d;for(b=0,l=g.length;b<l;b++){if(q[b]){continue}d=h[b];if(!d){break}c=d.attr;if(j>=m+c.margin&&j<=c.endRho+c.margin&&a.betweenAngle(n,c.startAngle,c.endAngle)){k={series:a,sprite:h[b],index:b,record:g[b],field:a.getXField()};break}}return k},provideLegendInfo:function(j){var c=this,i=c.getStore(),e,d,h,g,a,f,b;if(i){e=i.getData().items;d=c.getLabel().getTemplate().getField();h=c.getXField();g=c.getHidden();for(a=0;a<e.length;a++){f=c.getStyleByIndex(a);b=f.fillStyle;if(Ext.isObject(b)){b=b.stops&&b.stops[0].color}j.push({name:d?String(e[a].get(d)):h+' '+a,mark:b||f.strokeStyle||'black',disabled:g[a],series:c.getId(),index:a})}}}});Ext.define('Ext.chart.theme.DefaultGradients',{extend:Ext.chart.theme.Base,singleton:!0,alias:['chart.theme.default-gradients','chart.theme.Base:gradients'],config:{gradients:{type:'linear',degrees:90}}});Ext.define('Ext.draw.plugin.SpriteEvents',{extend:Ext.plugin.Abstract,alias:'plugin.spriteevents',mouseMoveEvents:{mousemove:!0,mouseover:!0,mouseout:!0},spriteMouseMoveEvents:{spritemousemove:!0,spritemouseover:!0,spritemouseout:!0},init:function(b){var a='handleEvent';this.drawContainer=b;b.addElementListener({click:a,dblclick:a,mousedown:a,mousemove:a,mouseup:a,mouseover:a,mouseout:a,priority:1001,scope:this})},hasSpriteMouseMoveListeners:function(){var b=this.drawContainer.hasListeners,a;for(a in this.spriteMouseMoveEvents){if(a in b){return !0}}return !1},hitTestEvent:function(e){var d=this.drawContainer.getItems(),c,b,a;for(a=d.length-1;a>=0;a--){c=d.get(a);b=c.hitTestEvent(e);if(b){return b}}return null},handleEvent:function(c){var b=this,d=b.drawContainer,f=c.type in b.mouseMoveEvents,e=b.lastSprite,a;if(f&&!b.hasSpriteMouseMoveListeners()){return}a=b.hitTestEvent(c);if(f&&!Ext.Object.equals(a,e)){if(e){d.fireEvent('spritemouseout',e,c)}if(a){d.fireEvent('spritemouseover',a,c)}}if(a){d.fireEvent('sprite'+c.type,a,c)}b.lastSprite=a}});Ext.define('Ext.exporter.File',{singleton:!0,textPopupWait:'You may close this window after the file is downloaded!',textPopupBlocker:'The file was not saved because pop-up blocker might be enabled! '+'Please check your browser settings.',url:'https://exporter.sencha.com',forceDownload:!1,requiresPopup:function(){var a=Ext.platformTags;return this.forceDownload||Ext.isSafari||a.phone||a.tablet},initializePopup:function(d){var a=this,c=a.requiresPopup(),b;if(!c&&d){c=!a.saveBlobAs}a.popup=null;if(c){b=window.open('','_blank');if(b){a.popup=b;b.document.write(Ext.dom.Helper.markup({tag:'html',children:[{tag:'head'},{tag:'body',children:[{tag:'p',html:a.textPopupWait}]}]}))}}},saveBinaryAs:function(f,c,e,d){var a=this,b=a.downloadBinaryAs;if(!a.requiresPopup()&&a.saveBlobAs){b=a.saveBlobAs}return b.call(a,f,c,e,d)},downloadBinaryAs:function(g,d,f,e){var a=new Ext.Deferred(),c,b;c=Ext.dom.Helper.markup({tag:'html',children:[{tag:'head'},{tag:'body',children:[{tag:'form',method:'POST',action:this.url,children:[{tag:'input',type:'hidden',name:'content',value:Ext.util.Base64.encode(g)},{tag:'input',type:'hidden',name:'filename',value:d},{tag:'input',type:'hidden',name:'charset',value:f||'UTF-8'},{tag:'input',type:'hidden',name:'mime',value:e||'application/octet-stream'}]},{tag:'script',type:'text/javascript',children:'document.getElementsByTagName("form")[0].submit();'}]}]});b=this.popup||window.open('','_blank');if(b){b.document.write(c);a.resolve()}else {a.reject(this.textPopupBlocker)}this.popup=null;return a.promise}},function(c){var a=window.navigator,b=window.saveAs||function(b){if(typeof a!=='undefined'&&/MSIE [1-9]\./.test(a.userAgent)){return}var u=b.document,i=function(){return b.URL||b.webkitURL||b},e=u.createElementNS('http://www.w3.org/1999/xhtml','a'),q='download' in e,t=function(d){var a=new MouseEvent('click');d.dispatchEvent(a)},m=/Version\/[\d.]+.*Safari/.test(a.userAgent),g=b.webkitRequestFileSystem,o=b.requestFileSystem||g||b.mozRequestFileSystem,r=function(a){(b.setImmediate||b.setTimeout)(function(){throw a},0)},f='application/octet-stream',k=0,p=1000*40,j=function(a){var d=function(){if(typeof a==='string'){i().revokeObjectURL(a)}else {a.remove()}};setTimeout(d,p)},h=function(d,a,g){var f,e;a=[].concat(a);f=a.length;while(f--){e=d['on'+a[f]];if(typeof e==='function'){try{e.call(d,g||d)}catch(v){r(v)}}}},n=function(a){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)){return new Blob(['\ufeff',a],{type:a.type})}return a},l=function(d,r,A){if(!A){d=n(d)}var a=this,w=d.type,y=!1,l,s,v=function(){h(a,'writestart progress write writeend'.split(' '))},p=function(){var e,f;if(s&&m&&typeof FileReader!=='undefined'){e=new FileReader();e.onloadend=function(){var f=e.result;s.location.href='data:attachment/file'+f.slice(f.search(/[,;]/));a.readyState=a.DONE;v()};e.readAsDataURL(d);a.readyState=a.INIT;return}if(y||!l){l=i().createObjectURL(d)}if(s){s.location.href=l}else {f=b.open(l,'_blank');if(f===undefined&&m){b.location.href=l}}a.readyState=a.DONE;v();j(l)},u=function(e){return function(){if(a.readyState!==a.DONE){return e.apply(this,arguments)}}},x={create:!0,exclusive:!1},z;a.readyState=a.INIT;if(!r){r='download'}if(q){l=i().createObjectURL(d);setTimeout(function(){e.href=l;e.download=r;t(e);v();j(l);a.readyState=a.DONE});return}if(b.chrome&&w&&w!==f){z=d.slice||d.webkitSlice;d=z.call(d,0,d.size,f);y=!0}if(g&&r!=='download'){r+='.download'}if(w===f||g){s=b}if(!o){p();return}k+=d.size;o(b.TEMPORARY,k,u(function(e){e.root.getDirectory('saved',x,u(function(g){var f=function(){g.getFile(r,x,u(function(f){f.createWriter(u(function(i){i.onwriteend=function(k){s.location.href=f.toURL();a.readyState=a.DONE;h(a,'writeend',k);j(f)};i.onerror=function(){var a=i.error;if(a.code!==a.ABORT_ERR){p()}};['writestart','progress','write','abort'].forEach(function(h){i['on'+h]=a['on'+h]});i.write(d);a.abort=function(){i.abort();a.readyState=a.DONE};a.readyState=a.WRITING}),p)}),p)};g.getFile(r,{create:!1},u(function(a){a.remove();f()}),u(function(a){if(a.code===a.NOT_FOUND_ERR){f()}else {p()}}))}),p)}),p)},d=l.prototype,s=function(d,e,a){return new l(d,e,a)};if(typeof a!=='undefined'&&a.msSaveOrOpenBlob){return function(d,f,e){if(!e){d=n(d)}return a.msSaveOrOpenBlob(d,f||'download')}}d.abort=function(){var a=this;a.readyState=a.DONE;h(a,'abort')};d.readyState=d.INIT=0;d.WRITING=1;d.DONE=2;d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null;return s}(typeof self!=='undefined'&&self||typeof window!=='undefined'&&window||this.content);if(typeof module!=='undefined'&&module.exports){module.exports.saveAs=b}else {if(typeof define!=='undefined'&&define!==null&&define.amd!==null){define([],function(){return b})}}var d=window.saveTextAs||function(e,f,g){var i,a,d,h;f=f||'download.txt';g=g||'utf-8';e=(e||'').replace(/\r?\n/g,'\r\n');if(b&&Blob){i=new Blob([e],{type:'text/plain;charset='+g});b(i,f);return !0}else {a=window.frames.saveTxtWindow;if(!a){a=document.createElement('iframe');a.id='saveTxtWindow';a.style.display='none';document.body.insertBefore(a,null);a=window.frames.saveTxtWindow;if(!a){a=c.popup||window.open('','_temp','width=100,height=100');if(!a){return !1}}}d=a.document;d.open('text/html','replace');d.charset=g;d.write(e);d.close();h=d.execCommand('SaveAs',null,f);a.close();return h}};c.saveAs=function(f,b,e,g){var a;if(this.requiresPopup()){return this.downloadBinaryAs(f,b,e||'UTF-8',g||'text/plain')}else {a=new Ext.Deferred();if(d(f,b,e)){a.resolve()}else {a.reject()}return a.promise}};if(b&&Blob){c.saveBlobAs=function(e,h,l,i){var f=new Ext.Deferred(),d=new Uint8Array(e.length),k=d.length,j={type:i||'application/octet-stream'},g,a;for(a=0;a<k;a++){d[a]=e.charCodeAt(a)}g=new Blob([d],j);b(g,h);f.resolve();return f.promise}}});Ext.define('Ext.pivot.Aggregators',{alternateClassName:['Mz.aggregate.Aggregators'],singleton:!0,customText:'Custom',sumText:'Sum',avgText:'Avg',minText:'Min',maxText:'Max',countText:'Count',countNumbersText:'Count numbers',groupSumPercentageText:'Group sum percentage',groupCountPercentageText:'Group count percentage',varianceText:'Var',variancePText:'Varp',stdDevText:'StdDev',stdDevPText:'StdDevp',sum:function(d,e,g,i,h){var f=d.length,a=g.calculateAsExcel?null:0,c,b;for(c=0;c<f;c++){b=d[c].get(e);if(b!==null){if(a===null){a=0}if(typeof b==='number'){a+=b}}}return a},avg:function(f,h,i,k,j){var g=f.length,e=i.calculateAsExcel,a=e?null:0,b=0,c,d;for(c=0;c<g;c++){d=f[c].get(h);if(typeof d==='number'){if(a===null){a=0}a+=d;b++}}if(!e){b=g}return b>0&&a!==null?a/b:null},min:function(e,f,h,j,i){var g=e.length,b=null,d,a,c;for(d=0;d<g;d++){a=e[d].get(f);c=!0;if(h.calculateAsExcel){if(a!==null){if(typeof a!=='number'){a=0;c=!1}if(b===null){b=a}}else {c=!1}}if(c&&a<b){b=a}}return b},max:function(e,f,h,j,i){var g=e.length,b=null,d,a,c;for(d=0;d<g;d++){a=e[d].get(f);c=!0;if(h.calculateAsExcel){if(a!==null){if(typeof a!=='number'){a=0;c=!1}if(b===null){b=a}}else {c=!1}}if(c&&a>b){b=a}}return b},count:function(c,f,g,i,h){var d=c.length,a=null,b,e;if(g.calculateAsExcel){for(b=0;b<d;b++){e=c[b].get(f);if(e!==null){if(a===null){a=0}a++}}}else {a=d}return a},countNumbers:function(d,e,g,i,h){var f=d.length,a=null,b,c;for(b=0;b<f;b++){c=d[b].get(e);if(c!==null){if(a===null){a=0}if(typeof c==='number'){a++}}}return g.calculateAsExcel?a:a||0},groupSumPercentage:function(k,i,d,h,g){var j=Ext.pivot.Aggregators.sum,l=k.length,a=h.split(d.keysSeparator),f=null,c=null,e,b;if(!l){return null}a.pop();a=a.join(d.keysSeparator);if(Ext.isEmpty(a)){a=d.grandTotalKey}e=d.results.get(h,g);if(e){if(e.hasValue('groupSum')){f=e.getValue('groupSum')}else {f=e.calculateByFn('groupSum',i,j)}}b=d.results.get(a,g);if(b){if(b.hasValue('groupSum')){c=b.getValue('groupSum')}else {c=b.calculateByFn('groupSum',i,j)}}return c!==null&&f!==null&&c!==0?f/c*100:null},groupCountPercentage:function(k,j,d,h,g){var i=Ext.pivot.Aggregators.count,l=k.length,a=h.split(d.keysSeparator),f=null,c=null,e,b;if(!l){return null}a.pop();a=a.join(d.keysSeparator);if(Ext.isEmpty(a)){a=d.grandTotalKey}e=d.results.get(h,g);if(e){if(e.hasValue('groupCount')){f=e.getValue('groupCount')}else {f=e.calculateByFn('groupCount',j,i)}}b=d.results.get(a,g);if(b){if(b.hasValue('groupCount')){c=b.getValue('groupCount')}else {c=b.calculateByFn('groupCount',j,i)}}return c!==null&&f!==null&&c!==0?f/c*100:null},variance:function(e,i,k,m,l){var g=k.calculateAsExcel,c=Ext.pivot.Aggregators,h=g?c.countNumbers.apply(c,arguments):e.length,f=c.avg.apply(c,arguments),j=e.length,a=0,d,b;if(f>0){for(d=0;d<j;d++){b=e[d].get(i);if(g){if(typeof b==='number'){a+=Math.pow(b-f,2)}}else {a+=Math.pow(Ext.Number.from(b,0)-f,2)}}}return a>0&&h>1?a/(h-1):null},varianceP:function(e,i,k,m,l){var g=k.calculateAsExcel,c=Ext.pivot.Aggregators,h=g?c.countNumbers.apply(c,arguments):e.length,f=c.avg.apply(c,arguments),j=e.length,a=0,d,b;if(f>0){for(d=0;d<j;d++){b=e[d].get(i);if(g){if(typeof b==='number'){a+=Math.pow(b-f,2)}}else {a+=Math.pow(Ext.Number.from(b,0)-f,2)}}}return a>0&&h>0?a/h:null},stdDev:function(f,e,g,d,c){var a=Ext.pivot.Aggregators,b=a.variance.apply(a,arguments);return b>0?Math.sqrt(b):null},stdDevP:function(f,e,g,d,c){var a=Ext.pivot.Aggregators,b=a.varianceP.apply(a,arguments);return b>0?Math.sqrt(b):null}});Ext.define('Ext.pivot.MixedCollection',{extend:Ext.util.MixedCollection,alternateClassName:['Mz.aggregate.MixedCollection'],removeAt:function(a){Ext.destroy(this.callParent(arguments))},clear:function(){this.destroyItems();this.callParent(arguments)},removeAll:function(){this.destroyItems();this.callParent(arguments)},destroy:function(){this.clear()},destroyItems:function(){var b=this.items,d,a,c;if(b){d=b.length;for(a=0;a<d;a++){c=b[a];if(c.destroy){c.destroy()}}}}});Ext.define('Ext.pivot.filter.Base',{alternateClassName:['Mz.aggregate.filter.Abstract'],alias:'pivotfilter.base',mixins:[Ext.mixin.Factoryable],isFilter:!0,operator:null,value:null,caseSensitive:!0,parent:null,constructor:function(a){var c=this,b=Ext.util.Format;c.thousandRe=new RegExp('['+b.thousandSeparator+']','g');c.decimalRe=new RegExp('['+b.decimalSeparator+']');Ext.apply(this,a);return this.callParent([a])},destroy:function(){var a=this;a.parent=a.thousandRe=a.decimalRe=null;a.callParent()},serialize:function(){var a=this;return Ext.apply({type:a.type,operator:a.operator,value:a.value,caseSensitive:a.caseSensitive},a.getSerialArgs()||{})},getSerialArgs:Ext.emptyFn,isMatch:function(f){var a=this,b=a.value,c,d,e,g,h;b=(Ext.isArray(b)?b[0]:b)||'';c=a.compare(f,b);if(a.operator==='='){return c===0}if(a.operator==='!='){return c!==0}if(a.operator==='>'){return c>0}if(a.operator==='>='){return c>=0}if(a.operator==='<'){return c<0}if(a.operator==='<='){return c<=0}b=a.value;g=(Ext.isArray(b)?b[0]:b)||'';h=(Ext.isArray(b)?b[1]:b)||'';d=a.compare(f,g);e=a.compare(f,h);if(a.operator==='between'){return d>=0&&e<=0}if(a.operator==='not between'){return !(d>=0&&e<=0)}return !0},parseNumber:function(a){var b;if(typeof a==='number'){return a}if(Ext.isEmpty(a)){a=''}b=String(a).replace(this.thousandRe,'');b=b.replace(this.decimalRe,'.');if(Ext.isNumeric(b)){return parseFloat(b)}return null},compare:function(a,b){var c=Ext.pivot.matrix.Base.prototype.naturalSort,d=this.parseNumber(a),e=this.parseNumber(b);if(Ext.isNumber(d)&&Ext.isNumber(e)){return c(d,e)}if(Ext.isDate(a)){if(Ext.isDate(b)){return c(a,b)}else {return c(a,Ext.Date.parse(b,Ext.Date.defaultFormat))}}return this.caseSensitive?c(a||'',b||''):c(String(a||'').toLowerCase(),String(b||'').toLowerCase())},deprecated:{'6.0':{properties:{mztype:null,from:null,to:null}}}});Ext.define('Ext.pivot.filter.Label',{alternateClassName:['Mz.aggregate.filter.Label'],extend:Ext.pivot.filter.Base,alias:'pivotfilter.label',isMatch:function(b){var a=this;if(a.operator==='begins'){return Ext.String.startsWith(String(b||''),String(a.value||''),!a.caseSensitive)}if(a.operator==='not begins'){return !Ext.String.startsWith(String(b||''),String(a.value||''),!a.caseSensitive)}if(a.operator==='ends'){return Ext.String.endsWith(String(b||''),String(a.value||''),!a.caseSensitive)}if(a.operator==='not ends'){return !Ext.String.endsWith(String(b||''),String(a.value||''),!a.caseSensitive)}if(a.operator==='contains'){return a.stringContains(String(b||''),String(a.value||''),!a.caseSensitive)}if(a.operator==='not contains'){return !a.stringContains(String(b||''),String(a.value||''),!a.caseSensitive)}if(a.operator==='in'){return a.foundInArray(a.value)}if(a.operator==='not in'){return !a.foundInArray(a.value)}return a.callParent(arguments)},foundInArray:function(d){var c=Ext.Array.from(this.value),e=c.length,a=!1,b;if(this.caseSensitive){return Ext.Array.indexOf(c,d)>=0}else {for(b=0;b<e;b++){a=a||String(d).toLowerCase()===String(c[b]).toLowerCase();if(a){break}}return a}},stringContains:function(b,a,d){var c=a.length<=b.length;if(c){if(d){b=b.toLowerCase();a=a.toLowerCase()}c=b.lastIndexOf(a)>=0}return c},deprecated:{'6.0':{methods:{startsWith:Ext.emptyFn,endsWith:Ext.emptyFn}}}});Ext.define('Ext.pivot.filter.Value',{alternateClassName:['Mz.aggregate.filter.Value'],extend:Ext.pivot.filter.Base,alias:'pivotfilter.value',dimensionId:'',topType:'items',topOrder:'top',topSort:!0,isTopFilter:!1,constructor:function(a){var b=this.callParent([a]);this.isTopFilter=this.operator==='top10';return b},destroy:function(){this.dimension=null;this.callParent()},getDimension:function(){return this.parent.matrix.aggregate.getByKey(this.dimensionId)},getSerialArgs:function(){var a=this;return {dimensionId:a.dimensionId,topType:a.topType,topOrder:a.topOrder,topSort:a.topSort}},applyFilter:function(e,d){var a=this,b=a.topSort?d:Ext.Array.clone(d),c=[];if(d.length===0){return c}a.sortItemsByGrandTotal(e,b);switch(a.topType){case 'items':c=a.extractTop10Items(b);break;case 'sum':c=a.extractTop10Sum(b);break;case 'percent':c=a.extractTop10Percent(e,b);break;}if(!a.topSort){b.length=0}return c},extractTop10Items:function(b){var d=this,c=[],a;for(a=0;a<b.length;a++){if(c.indexOf(b[a].tempVar)<0){c.push(b[a].tempVar);if(c.length>d.value||d.value<a+1&&a>0){break}}}return Ext.Array.slice(b,a)},extractTop10Sum:function(b){var d=this,c=0,a;for(a=0;a<b.length;a++){c+=b[a].tempVar;if(c>=d.value){break}}return Ext.Array.slice(b,a+1)},extractTop10Percent:function(a,c){var k=this,j=0,f=c[0].key.split(a.matrix.keysSeparator),b,h,i,d,e,g;f.length--;d=f.length>0?f.join(a.matrix.keysSeparator):a.matrix.grandTotalKey;h=a.isLeftAxis?d:a.matrix.grandTotalKey;i=a.isLeftAxis?a.matrix.grandTotalKey:d;e=a.matrix.results.get(h,i);g=e?e.getValue(k.dimensionId):0;for(b=0;b<c.length;b++){j+=c[b].tempVar;if(j*100/g>=k.value){break}}return Ext.Array.slice(c,b+1)},sortItemsByGrandTotal:function(a,c){var e=this,f,g,d,b;for(b=0;b<c.length;b++){f=a.isLeftAxis?c[b].key:a.matrix.grandTotalKey;g=a.isLeftAxis?a.matrix.grandTotalKey:c[b].key;d=a.matrix.results.get(f,g);c[b].tempVar=d?d.getValue(e.dimensionId):0}Ext.Array.sort(c,function(d,f){var b=a.matrix.naturalSort(d.tempVar,f.tempVar);if(b<0&&e.topOrder==='top'){return 1}if(b>0&&e.topOrder==='top'){return -1}return b})}});Ext.define('Ext.pivot.dimension.Item',{alternateClassName:['Mz.aggregate.dimension.Item'],$configPrefixed:!1,$configStrict:!1,config:{id:null,header:'',dataIndex:'',sortIndex:'',width:100,flex:0,align:'left',sortable:!0,direction:'ASC',sorterFn:null,caseSensitiveSort:!0,filter:null,labelRenderer:null,renderer:null,formatter:null,column:null,exportStyle:null,scope:null,grouperFn:null,blankText:'(blank)',showZeroAsBlank:!1,aggregator:'sum',values:[]},isAggregate:!1,matrix:null,constructor:function(b){var a=this;this.initConfig(b);if(!a.getId()){a.setId(Ext.id())}if(!a.grouperFn){a.groupFn=Ext.bind(a.defaultGrouperFn,a)}if(a.sortable){if(!a.sorterFn){a.sortFn=Ext.bind(a.defaultSorterFn,a)}}else {a.sortFn=Ext.bind(a.manualSorterFn,a)}if(Ext.isEmpty(a.getSortIndex())){a.setSortIndex(a.getDataIndex())}if(a.isAggregate&&!a.getFormatter()&&!a.getRenderer()){a.setRenderer(a.getDefaultFormatRenderer('0,000.00'))}return this.callParent([b])},destroy:function(){this.setConfig({values:null,grouperFn:null,sorterFn:null,filter:null,renderer:null,labelRenderer:null,aggregator:null});this.callParent()},serialize:function(){return this.getConfiguration(!0)},getConfiguration:function(b){var c=this,a=c.getConfig();delete a.values;if(a.filter){a.filter=a.filter.serialize()}if(b&&typeof a.aggregator==='function'){a.aggregator='sum'}if(b&&typeof a.renderer==='function'){a.renderer=null}if(b&&typeof a.labelRenderer==='function'){a.labelRenderer=null}return a},applyId:function(a){return a?a:Ext.id()},updateExportStyle:function(a){if(a&&!a.id){a.id=this.getId()}},applyFilter:function(a,b){if(a==null){return a}if(a&&a.isFilter){a.parent=this;return a}if(Ext.isObject(a)){Ext.applyIf(a,{type:'label',parent:this});a=Ext.Factory.pivotfilter(a)}else {a=!1}return a},updateAggregator:function(a){var b=Ext.pivot.Aggregators;if(Ext.isString(a)&&Ext.isFunction(b[a])){this.aggregatorFn=Ext.bind(b[a],b)}else {this.aggregatorFn=a||'sum'}},updateGrouperFn:function(a){this.groupFn=Ext.isFunction(a)?Ext.bind(a,this):a},updateSorterFn:function(a){this.sortFn=Ext.isFunction(a)?Ext.bind(a,this):a},addValue:function(a,c){var b=this.values;if(!b.getByKey(a)){b.add({sortValue:a,value:a,display:c})}},applyValues:function(a,c){var b;Ext.destroy(c);if(a&&!a.isInstance){b=new Ext.pivot.MixedCollection();b.getKey=function(b){return b.value};b.addAll(a);return b}return a},sortValues:function(){if(this.sortable){this.values.sortBy(this.sortFn)}},defaultSorterFn:function(e,f){var d=this,a=e.sortValue,b=f.sortValue,c;if(a instanceof Date){a=a.getTime()}if(b instanceof Date){b=b.getTime()}if(!d.caseSensitiveSort){a=typeof a==='string'?a.toUpperCase():a;b=typeof b==='string'?b.toUpperCase():b}if(d.matrix.useNaturalSorting){c=d.matrix.naturalSort(a,b)}else {c=a===b?0:a<b?-1:1}if(c<0&&d.direction==='DESC'){return 1}if(c>0&&d.direction==='DESC'){return -1}return c},manualSorterFn:function(d,e){var a=this.values,b=a?a.indexOfKey(d.value):0,c=a?a.indexOfKey(e.value):0;return b===c?0:b<c?-1:1},getDefaultFormatRenderer:function(a){var b=this;return function(c){var d;if(Ext.isEmpty(a)){return c}if(Ext.isFunction(a)){return a.apply(b,arguments)}if(!Ext.isNumber(c)){return c}if(b.isAggregate&&c===0&&b.showZeroAsBlank){return ''}d=c>=0;c=Math.abs(c);c=Ext.util.Format.number(c,a);return d?c:'-'+c}},defaultGrouperFn:function(a){return a.get(this.dataIndex)},getFormatterFn:function(){var c=this,a=c.getFormatter(),b;if(a){b=a.indexOf('this.')===0;if(b){a=a.substring(5)}a=Ext.app.bind.Template.prototype.parseFormat(a);if(b){a.scope=null}return function(b){return a.format(b,a.scope||c.getScope()||c.matrix.cmp.resolveListenerScope('self.controller')||this)}}},aggregatorFn:Ext.emptyFn,groupFn:Ext.emptyFn,sortFn:Ext.emptyFn});Ext.define('Ext.pivot.axis.Item',{alternateClassName:['Mz.aggregate.axis.Item'],level:0,key:'',value:'',sortValue:'',name:'',dimensionId:'',dimension:null,children:null,record:null,records:null,axis:null,data:null,expanded:!1,constructor:function(c){var a=this,b;Ext.apply(a,c||{});if(Ext.isEmpty(a.sortValue)){a.sortValue=a.value}b=a.axis;a.expanded=b&&(b.isLeftAxis&&!b.matrix.collapsibleRows||!b.isLeftAxis&&!b.matrix.collapsibleColumns);a.callParent(arguments)},destroy:function(){var a=this;Ext.destroy(a.children);a.axis=a.data=a.dimension=a.record=a.children=a.records=null;a.callParent(arguments)},getTextTotal:function(){var a=this,b=Ext.XTemplate.getTpl(a.axis.matrix,'textTotalTpl');return b.apply({groupField:a.dimension.dataIndex,columnName:a.dimension.dataIndex,name:a.name,rows:a.children||[]})},expand:function(b){var a=this;a.expanded=!0;if(b===!0){a.expandCollapseChildrenTree(!0)}a.axis.matrix.fireEvent('groupexpand',a.axis.matrix,a.axis.isLeftAxis?'row':'col',a)},collapse:function(b){var a=this;a.expanded=!1;if(b===!0){a.expandCollapseChildrenTree(!1)}a.axis.matrix.fireEvent('groupcollapse',a.axis.matrix,a.axis.isLeftAxis?'row':'col',a)},expandCollapseChildrenTree:function(c){var a=this,b;a.expanded=c;if(Ext.isArray(a.children)){for(b=0;b<a.children.length;b++){a.children[b].expandCollapseChildrenTree(c)}}}});Ext.define('Ext.pivot.axis.Base',{alternateClassName:['Mz.aggregate.axis.Abstract'],alias:'pivotaxis.base',mixins:[Ext.mixin.Factoryable],dimensions:null,matrix:null,items:null,tree:null,levels:0,isLeftAxis:!1,constructor:function(b){var a=this;if(!b||!b.matrix){return}a.isLeftAxis=b.isLeftAxis||a.isLeftAxis;a.matrix=b.matrix;a.tree=[];a.dimensions=new Ext.pivot.MixedCollection();a.dimensions.getKey=function(a){return a.getId()};a.items=new Ext.pivot.MixedCollection();a.items.getKey=function(a){return a.key};Ext.Array.each(Ext.Array.from(b.dimensions||[]),a.addDimension,a)},destroy:function(){var a=this;Ext.destroyMembers(a,'dimensions','items','tree');a.matrix=a.dimensions=a.items=a.tree=null},addDimension:function(a){var b=a;if(!a){return}if(!a.isInstance){b=new Ext.pivot.dimension.Item(a)}b.matrix=this.matrix;this.dimensions.add(b)},addItem:function(a){var b=this;if(!Ext.isObject(a)||Ext.isEmpty(a.key)||Ext.isEmpty(a.value)||Ext.isEmpty(a.dimensionId)){return !1}a.key=String(a.key);a.dimension=b.dimensions.getByKey(a.dimensionId);a.name=a.name||Ext.callback(a.dimension.labelRenderer,a.dimension.scope||'self.controller',[a.value],0,b.matrix.cmp)||a.value;a.dimension.addValue(a.value,a.name);a.axis=b;if(!b.items.map[a.key]&&a.dimension){b.items.add(new Ext.pivot.axis.Item(a));return !0}return !1},clear:function(){this.items.clear();this.tree=null},getTree:function(){if(!this.tree){this.buildTree()}return this.tree},expandAll:function(){var a=this,c=a.getTree(),d=c.length,b;for(b=0;b<d;b++){c[b].expandCollapseChildrenTree(!0)}if(d>0){a.matrix.fireEvent('groupexpand',a.matrix,a.isLeftAxis?'row':'col',null)}},collapseAll:function(){var a=this,c=a.getTree(),d=c.length,b;for(b=0;b<d;b++){c[b].expandCollapseChildrenTree(!1)}if(d>0){a.matrix.fireEvent('groupcollapse',a.matrix,a.isLeftAxis?'row':'col',null)}},findTreeElement:function(d,c){var f=this.items,g=f.getCount(),e=!1,b,a;for(b=0;b<g;b++){a=f.items[b];if(Ext.isDate(c)?Ext.Date.isEqual(a[d],c):a[d]===c){e=!0;break}}return e?{level:a.level,node:a}:null},buildTree:function(){var b=this,e=b.dimensions.items,g=e.length,c,a,f,h,d;for(c=0;c<g;c++){e[c].sortValues()}b.tree=[];e=b.items.items;g=e.length;for(c=0;c<g;c++){a=e[c];f=String(a.key).split(b.matrix.keysSeparator);f=Ext.Array.slice(f,0,f.length-1);h=f.join(b.matrix.keysSeparator);d=b.items.map[h];if(d){a.level=d.level+1;a.data=Ext.clone(d.data||{});d.children=d.children||[];d.children.push(a)}else {a.level=0;a.data={};b.tree.push(a)}a.data[a.dimension.getId()]=a.name;b.levels=Math.max(b.levels,a.level)}b.sortTree()},rebuildTree:function(){var b=this.items.items,c=b.length,a;this.tree=null;for(a=0;a<c;a++){b[a].children=null}this.buildTree()},sortTree:function(){var a=arguments[0]||this.tree,e=a.length,c,b,d;if(a.length>0){c=a[0].dimension}if(c){Ext.Array.sort(a,c.sortFn)}for(b=0;b<e;b++){d=a[b];if(d.children){this.sortTree(d.children)}}},sortTreeByField:function(f,b){var a=this,d=!1,c,g,e;if(f===a.matrix.compactViewKey){d=a.sortTreeByDimension(a.tree,a.dimensions.items,b);g=a.dimensions.items.length;for(e=0;e<g;e++){a.dimensions.items[e].direction=b}}else {b=b||'ASC';c=a.dimensions.getByKey(f);if(c){d=a.sortTreeByDimension(a.tree,c,b);c.direction=b}else {d=a.sortTreeByRecords(a.tree,f,b)}}return d},sortTreeByDimension:function(b,f,g){var c=!1,i=Ext.Array.from(f),a,e,d,h;b=b||[];e=b.length;if(e>0){a=b[0].dimension}if(Ext.Array.indexOf(i,a)>=0){if(a.sortable){h=a.direction;a.direction=g;Ext.Array.sort(b,a.sortFn);a.direction=h}c=a.sortable}for(d=0;d<e;d++){c=this.sortTreeByDimension(b[d].children,f,g)||c}return c},sortTreeByRecords:function(a,d,c){var b,e;a=a||[];e=a.length;if(e<=0){return !1}if(a[0].record){this.sortTreeRecords(a,d,c)}else {this.sortTreeLeaves(a,d,c)}for(b=0;b<e;b++){this.sortTreeByRecords(a[b].children,d,c)}return !0},sortTreeRecords:function(d,b,a){var c=this.matrix.naturalSort;a=a||'ASC';Ext.Array.sort(d||[],function(h,i){var e,f=h.record,g=i.record;if(!(f&&f.isModel&&g&&g.isModel)){return 0}e=c(f.get(b)||'',g.get(b)||'');if(e<0&&a==='DESC'){return 1}if(e>0&&a==='DESC'){return -1}return e})},sortTreeLeaves:function(i,h,a){var g=this.matrix.naturalSort,f=this.matrix.results,b=this.matrix.model,e=Ext.Array.indexOf(Ext.Array.pluck(b,'name'),h),d,c;if(e<0){return !1}d=b[e].col;c=b[e].agg;a=a||'ASC';Ext.Array.sort(i||[],function(k,l){var j,b,e;b=f.get(k.key,d);if(b){b=b.getValue(c)}else {b=0}e=f.get(l.key,d);if(e){e=e.getValue(c)}else {e=0}j=g(b,e);if(j<0&&a==='DESC'){return 1}if(j>0&&a==='DESC'){return -1}return j})}});Ext.define('Ext.pivot.axis.Local',{alternateClassName:['Mz.aggregate.axis.Local'],extend:Ext.pivot.axis.Base,alias:'pivotaxis.local',processRecord:function(h){var c=this,i=[],f='',g=!0,j=c.dimensions.items.length,b,d,a,e;for(e=0;e<j;e++){a=c.dimensions.items[e];b=Ext.callback(a.groupFn,a.scope||'self.controller',[h],0,c.matrix.cmp);d=f?f+c.matrix.keysSeparator:'';b=Ext.isEmpty(b)?a.blankText:b;d+=c.matrix.getKey(b);if(a.filter instanceof Ext.pivot.filter.Label){g=a.filter.isMatch(b)}if(!g){break}i.push({value:b,sortValue:h.get(a.sortIndex),key:d,dimensionId:a.getId()});f=d}if(g){return i}else {return null}},buildTree:function(){this.callParent(arguments);this.filterTree()},filterTree:function(){var a=this,d=a.dimensions.items.length,c=!1,b;for(b=0;b<d;b++){c=c||a.dimensions.items[b].filter instanceof Ext.pivot.filter.Value}if(!c){return}a.matrix.filterApplied=!0;a.filterTreeItems(a.tree)},filterTreeItems:function(a){var c=this,e,b,d;if(!a||!Ext.isArray(a)||a.length<=0){return}e=a[0].dimension.filter;if(e&&e instanceof Ext.pivot.filter.Value){if(e.isTopFilter){d=e.applyFilter(c,a)||[]}else {d=Ext.Array.filter(a,c.canRemoveItem,c)}c.removeRecordsFromResults(d);c.removeItemsFromArray(a,d);for(b=0;b<d.length;b++){c.removeTreeChildren(d[b])}}for(b=0;b<a.length;b++){if(a[b].children){c.filterTreeItems(a[b].children);if(a[b].children.length===0){c.items.remove(a[b]);Ext.Array.erase(a,b,1);b--}}}},removeTreeChildren:function(a){var b,c;if(a.children){c=a.children.length;for(b=0;b<c;b++){this.removeTreeChildren(a.children[b])}}this.items.remove(a)},canRemoveItem:function(b){var a=this,e=a.isLeftAxis?b.key:a.matrix.grandTotalKey,f=a.isLeftAxis?a.matrix.grandTotalKey:b.key,d=a.matrix.results.get(e,f),c=b.dimension.filter;return d?!c.isMatch(d.getValue(c.dimensionId)):!1},removeItemsFromArray:function(b,c){var a;for(a=0;a<b.length;a++){if(Ext.Array.indexOf(c,b[a])>=0){Ext.Array.erase(b,a,1);a--}}},removeRecordsFromResults:function(b){var a;for(a=0;a<b.length;a++){this.removeRecordsByItem(b[a])}},removeRecordsByItem:function(f){var a=this,c,d,b,e;if(f.children){a.removeRecordsFromResults(f.children)}if(a.isLeftAxis){e=a.matrix.results.get(f.key,a.matrix.grandTotalKey);b=a.matrix.results.getByLeftKey(a.matrix.grandTotalKey)}else {e=a.matrix.results.get(a.matrix.grandTotalKey,f.key);b=a.matrix.results.getByTopKey(a.matrix.grandTotalKey)}if(!e){return}for(d=0;d<b.length;d++){a.removeItemsFromArray(b[d].records,e.records)}c=f.key.split(a.matrix.keysSeparator);c.length=c.length-1;while(c.length>0){if(a.isLeftAxis){b=a.matrix.results.getByLeftKey(c.join(a.matrix.keysSeparator))}else {b=a.matrix.results.getByTopKey(c.join(a.matrix.keysSeparator))}for(d=0;d<b.length;d++){a.removeItemsFromArray(b[d].records,e.records)}c.length=c.length-1}}});Ext.define('Ext.pivot.feature.PivotStore',{config:{store:null,grid:null,matrix:null,clsGrandTotal:'',clsGroupTotal:''},totalRowEvent:'pivottotal',groupRowEvent:'pivotgroup',itemRowEvent:'pivotitem',constructor:function(a){this.initConfig(a);return this.callParent(arguments)},destroy:function(){var a=this;Ext.destroy(a.storeListeners,a.matrixListeners);a.setConfig({store:null,matrix:null,grid:null});a.storeInfo=a.storeListeners=null;a.callParent(arguments)},updateStore:function(b){var a=this;Ext.destroy(a.storeListeners);if(b){a.storeListeners=b.on({pivotstoreremodel:a.processStore,scope:a,destroyable:!0})}},updateMatrix:function(b){var a=this;Ext.destroy(a.matrixListeners);if(b){a.matrixListeners=b.on({groupexpand:a.onGroupExpand,groupcollapse:a.onGroupCollapse,scope:a,destroyable:!0})}},processStore:function(){var c=this,b=c.getStore(),e=c.getMatrix(),a=[],f,h,d,i,g;if(!e||!b){return}g=e.getColumns();b.suspendEvents();b.model.replaceFields(g,!0);c.storeInfo={};if(e.rowGrandTotalsPosition==='first'){a.push.apply(a,c.processGrandTotal()||[])}f=e.leftAxis.getTree();h=f.length;for(d=0;d<h;d++){i=f[d];a.push.apply(a,c.processGroup({group:i,previousExpanded:d>0?f[d-1].expanded:!1})||[])}if(e.rowGrandTotalsPosition==='last'){a.push.apply(a,c.processGrandTotal()||[])}b.loadData(a);b.resumeEvents();b.fireEvent('refresh',b)},processGroup:function(c){var a=this,b=a['processGroup'+Ext.String.capitalize(a.getMatrix().viewLayoutType)];if(!Ext.isFunction(b)){b=a.processGroupOutline}return b.call(a,c)},processGrandTotal:function(){var c=this,m=!1,b=c.getMatrix(),i={key:b.grandTotalKey},l=[],o=b.totals.length,k=b.leftAxis.dimensions.items,n=k.length,f,d,g,j,h,a,e;for(f=0;f<o;f++){j=b.totals[f];a=j.record;g=n;if(a&&a.isModel){c.storeInfo[a.internalId]={leftKey:i.key,rowStyle:'',rowClasses:[c.getClsGrandTotal()],rowEvent:c.totalRowEvent,rendererParams:{}};for(d=0;d<n;d++){h=k[d];if(b.viewLayoutType==='compact'||d===0){if(b.viewLayoutType==='compact'){e=b.compactViewKey;g=1}else {e=h.getId()}a.data[e]=j.title;c.storeInfo[a.internalId].rendererParams[e]={fn:'groupOutlineRenderer',group:i,colspan:g,hidden:!1,subtotalRow:!0};m=!0}else {c.storeInfo[a.internalId].rendererParams[h.id]={fn:'groupOutlineRenderer',group:i,colspan:0,hidden:m,subtotalRow:!0};g--}}c.storeInfo[a.internalId].rendererParams.topaxis={fn:'topAxisRenderer'};l.push(a)}}return l},processGroupOutline:function(c){var d=this,b=c.group,a=[];if(b.record){d.processRecordOutline({results:a,group:b})}else {d.processGroupOutlineWithChildren({results:a,group:b,previousExpanded:c.previousExpanded})}return a},processGroupOutlineWithChildren:function(b){var d=this,h=d.getMatrix(),a=b.group,f=b.previousExpanded,g,e,c,i;g=!a.expanded||a.expanded&&h.rowSubTotalsPosition==='first';e=a.expanded?a.records.expanded:a.records.collapsed;d.processGroupHeaderRecordOutline({results:b.results,group:a,record:e,previousExpanded:f,hasSummaryData:g});if(a.expanded){if(a.children){i=a.children.length;for(c=0;c<i;c++){if(a.children[c].children){d.processGroupOutlineWithChildren({results:b.results,group:a.children[c]})}else {d.processRecordOutline({results:b.results,group:a.children[c]})}}}if(h.rowSubTotalsPosition==='last'){e=a.records.footer;d.processGroupHeaderRecordOutline({results:b.results,group:a,record:e,previousExpanded:f,subtotalRow:!0,hasSummaryData:!0})}}},processGroupHeaderRecordOutline:function(b){var a=this,n=a.getMatrix(),d=b.group,c=b.record,g=b.previousExpanded,h=b.subtotalRow,m=b.hasSummaryData,j=n.leftAxis.dimensions.items,k=j.length,l=k,i=!1,f,e;a.storeInfo[c.internalId]={leftKey:d.key,rowStyle:'',rowClasses:[a.getClsGroupTotal()],rowEvent:a.groupRowEvent,rendererParams:{}};for(f=0;f<k;f++){e=j[f];if(e.id===d.dimension.id){a.storeInfo[c.internalId].rendererParams[e.id]={fn:'groupOutlineRenderer',group:d,colspan:l,hidden:!1,previousExpanded:g,subtotalRow:h};i=!0}else {a.storeInfo[c.internalId].rendererParams[e.id]={fn:'groupOutlineRenderer',group:d,colspan:0,hidden:i,previousExpanded:g,subtotalRow:h};l--}}a.storeInfo[c.internalId].rendererParams.topaxis={fn:m?'topAxisRenderer':'topAxisNoRenderer',group:d};b.results.push(c)},processRecordOutline:function(f){var b=this,a=f.group,g=!1,c=a.record,h=b.getMatrix().leftAxis.dimensions.items,i=h.length,d,e;b.storeInfo[c.internalId]={leftKey:a.key,rowStyle:'',rowClasses:[],rowEvent:b.itemRowEvent,rendererParams:{}};for(d=0;d<i;d++){e=h[d];if(e.id===a.dimension.id){g=!0}b.storeInfo[c.internalId].rendererParams[e.id]={fn:'recordOutlineRenderer',group:a,hidden:!g}}b.storeInfo[c.internalId].rendererParams.topaxis={fn:'topAxisRenderer',group:a};f.results.push(c)},processGroupCompact:function(c){var d=this,b=c.group,e=c.previousExpanded,a=[];if(b.record){d.processRecordCompact({results:a,group:b})}else {d.processGroupCompactWithChildren({results:a,group:b,previousExpanded:e})}return a},processGroupCompactWithChildren:function(b){var d=this,g=d.getMatrix(),a=b.group,e=b.previousExpanded,f,c,h;f=!a.expanded||a.expanded&&g.rowSubTotalsPosition==='first';d.processGroupHeaderRecordCompact({results:b.results,group:a,record:a.expanded?a.records.expanded:a.records.collapsed,previousExpanded:e,hasSummaryData:f});if(a.expanded){if(a.children){h=a.children.length;for(c=0;c<h;c++){if(a.children[c].children){d.processGroupCompactWithChildren({results:b.results,group:a.children[c]})}else {d.processRecordCompact({results:b.results,group:a.children[c]})}}}if(g.rowSubTotalsPosition==='last'){d.processGroupHeaderRecordCompact({results:b.results,group:a,record:a.records.footer,previousExpanded:e,subtotalRow:!0,hasSummaryData:!0})}}},processGroupHeaderRecordCompact:function(a){var b=this,h=b.getMatrix(),d=a.group,c=a.record,e=a.previousExpanded,g=a.subtotalRow,f=a.hasSummaryData;b.storeInfo[c.internalId]={leftKey:d.key,rowStyle:'',rowClasses:[b.getClsGroupTotal()],rowEvent:b.groupRowEvent,rendererParams:{}};b.storeInfo[c.internalId].rendererParams[h.compactViewKey]={fn:'groupCompactRenderer',group:d,colspan:0,previousExpanded:e,subtotalRow:g};b.storeInfo[c.internalId].rendererParams.topaxis={fn:f?'topAxisRenderer':'topAxisNoRenderer',group:d};a.results.push(c)},processRecordCompact:function(d){var a=this,c=d.group,b=c.record;a.storeInfo[b.internalId]={leftKey:c.key,rowStyle:'',rowClasses:[],rowEvent:a.itemRowEvent,rendererParams:{}};a.storeInfo[b.internalId].rendererParams[a.getMatrix().compactViewKey]={fn:'recordCompactRenderer',group:c};a.storeInfo[b.internalId].rendererParams.topaxis={fn:'topAxisRenderer',group:c};d.results.push(b)},processGroupTabular:function(c){var d=this,b=c.group,a=[];if(b.record){d.processRecordTabular({results:a,group:b})}else {d.processGroupTabularWithChildren({results:a,group:b,previousExpanded:c.previousExpanded})}return a},processGroupTabularWithChildren:function(b,i){var d=this,j=d.getMatrix(),a=b.group,f=b.previousExpanded,g,e,c,h;if(!i){d.processGroupHeaderRecordTabular({results:b.results,group:a,previousExpanded:f,hasSummaryData:!a.expanded})}if(a.expanded){if(a.children){h=a.children.length;for(e=0;e<h;e++){c=a.children[e];if(e===0&&c.children&&c.expanded){d.processGroupTabularWithChildren({results:b.results,group:c},!0)}else {if(e>0){if(c.children){d.processGroupTabularWithChildren({results:b.results,group:c})}else {d.processRecordTabular({results:b.results,group:c})}}}}}if(j.rowSubTotalsPosition!=='none'){g=a.records.footer;d.processGroupHeaderRecordTabular({results:b.results,group:a,record:g,previousExpanded:f,subtotalRow:!0,hasSummaryData:!0})}}},getTabularGroupRecord:function(b){var a=b.record;if(!a){if(!b.expanded){a=b.records.collapsed}else {a=this.getTabularGroupRecord(b.children[0])}}return a},processGroupHeaderRecordTabular:function(i){var k=this,f=k.getMatrix(),g=i.group,b=i.record,n=i.previousExpanded,o=i.subtotalRow,t=i.hasSummaryData,u=f.leftAxis.dimensions,p=u.length,s=p,m=!1,d={},q=[],r=k.itemRowEvent,h,c,a,j,e,l;if(!b){a=g;b=a.record;while(!b){d[a.dimension.id]={fn:'groupTabularRenderer',group:a,colspan:0,hidden:!1,previousExpanded:n,subtotalRow:o};if(a.children){if(!a.expanded){b=a.records.collapsed;d[a.dimension.id].colspan=p-a.level}else {a=a.children[0]}}else {b=a.record}}m=!1;for(h=0;h<p;h++){c=f.leftAxis.dimensions.items[h];if(d[c.id]){b.data[c.id]=d[c.id].group.name;m=!0}else {if(m){d[c.id]={fn:'groupTabularRenderer',group:g,colspan:0,hidden:!0,previousExpanded:n,subtotalRow:o}}else {b.data[c.id]=''}}}if(g.level>0){l=g;j=l.key.split(f.keysSeparator);j.length--;e=f.leftAxis.items.getByKey(j.join(f.keysSeparator));while(e&&e.children[0]===l){d[e.dimension.id]={fn:'groupTabularRenderer',group:e,colspan:0,hidden:!1,previousExpanded:n,subtotalRow:o};b.data[e.dimension.id]=e.name;l=e;j=l.key.split(f.keysSeparator);j.length--;e=f.leftAxis.items.getByKey(j.join(f.keysSeparator))}}}else {for(h=0;h<p;h++){c=f.leftAxis.dimensions.items[h];d[c.id]={fn:'groupTabularRenderer',group:g,colspan:0,hidden:!1,previousExpanded:n,subtotalRow:o};if(c.id===g.dimension.id){d[c.id].colspan=s;m=!0}else {d[c.id].hidden=m;s--}}a=g}if(t){q.push(k.getClsGroupTotal());r=k.groupRowEvent}k.storeInfo[b.internalId]={leftKey:g.key,rowStyle:'',rowClasses:q,rowEvent:r,rendererParams:d};k.storeInfo[b.internalId].rendererParams.topaxis={fn:'topAxisRenderer',group:a};i.results.push(b)},processRecordTabular:function(f){var c=this,b=f.group,g=!1,a=b.record,h=c.getMatrix().leftAxis.dimensions.items,i=h.length,e,d;c.storeInfo[a.internalId]={leftKey:b.key,rowStyle:'',rowClasses:[],rowEvent:c.itemRowEvent,rendererParams:{}};for(e=0;e<i;e++){d=h[e];if(d.id===b.dimension.id){g=!0}else {a.data[d.id]=null}c.storeInfo[a.internalId].rendererParams[d.id]={fn:'recordTabularRenderer',group:b,hidden:!g}}c.storeInfo[a.internalId].rendererParams.topaxis={fn:'topAxisRenderer',group:b};f.results.push(a)},doExpandCollapse:function(e,d){var b=this,c=b.getGrid(),a;a=b.getMatrix().leftAxis.findTreeElement('key',e);if(!a){return}b.doExpandCollapseInternal(a.node,d);c.fireEvent(a.node.expanded?'pivotgroupexpand':'pivotgroupcollapse',c,'row',a.node)},doExpandCollapseInternal:function(b,h){var f=this,a=f.getStore(),g=Ext.isClassic,e,c,d;b.expanded=!b.expanded;c=f.processGroup({group:b,previousExpanded:!1});b.expanded=!b.expanded;e=f.processGroup({group:b,previousExpanded:!1});if(e.length&&c.length&&(d=a.indexOf(c[0]))!==-1){a.suspendEvents();if(b.expanded){a.remove(a.getAt(d));a.insert(d,e)}else {a.remove(c);a.insert(d,e)}f.removeStoreInfoData(c);a.resumeEvents();if(g){a.fireEvent('replace',a,d,c,e)}else {a.fireEvent('refresh',a)}}},removeStoreInfoData:function(c){var d=c.length,b,a;for(a=0;a<d;a++){b=c[a];if(this.storeInfo[b.internalId]){delete this.storeInfo[b.internalId]}}},onGroupExpand:function(c,b,a){if(b==='row'){if(a){this.doExpandCollapseInternal(a,a.records.collapsed)}else {this.processStore()}}},onGroupCollapse:function(c,b,a){if(b==='row'){if(a){this.doExpandCollapseInternal(a,a.records.expanded)}else {this.processStore()}}}});Ext.define('Ext.pivot.result.Base',{alias:'pivotresult.base',mixins:[Ext.mixin.Factoryable],leftKey:'',topKey:'',dirty:!1,values:null,matrix:null,constructor:function(b){var a=this;Ext.apply(a,b||{});a.values={};return a.callParent(arguments)},destroy:function(){var a=this;a.matrix=a.values=null;a.leftAxisItem=a.topAxisItem=null;return a.callParent(arguments)},calculate:Ext.emptyFn,calculateByFn:Ext.emptyFn,addValue:function(a,b){this.values[a]=b},getValue:function(a){return this.values[a]},hasValue:function(a){return a in this.values},getLeftAxisItem:function(){return this.matrix.leftAxis.items.getByKey(this.leftKey)},getTopAxisItem:function(){return this.matrix.topAxis.items.getByKey(this.topKey)}});Ext.define('Ext.pivot.result.Collection',{alternateClassName:['Mz.aggregate.matrix.Results'],resultType:'base',items:null,matrix:null,constructor:function(b){var a=this;Ext.apply(a,b||{});a.items=new Ext.pivot.MixedCollection();a.items.getKey=function(a){return a.leftKey+'/'+a.topKey};return a.callParent(arguments)},destroy:function(){var a=this;Ext.destroy(a.items);a.matrix=a.items=null;a.callParent(arguments)},clear:function(){this.items.clear()},add:function(b,c){var a=this.get(b,c);if(!a){a=this.items.add(Ext.Factory.pivotresult({type:this.resultType,leftKey:b,topKey:c,matrix:this.matrix}))}return a},get:function(a,b){return this.items.getByKey(a+'/'+b)},remove:function(a,b){this.items.removeAtKey(a+'/'+b)},getByLeftKey:function(a){var b=this.items.filterBy(function(d,c){var b=String(c).split('/');return a===b[0]});return b.getRange()},getByTopKey:function(a){var b=this.items.filterBy(function(d,c){var b=String(c).split('/');return b.length>1&&a===b[1]});return b.getRange()},calculate:function(){var b=this.items.getCount(),a;for(a=0;a<b;a++){this.items.getAt(a).calculate()}}});Ext.define('Ext.pivot.matrix.Base',{alternateClassName:['Mz.aggregate.matrix.Abstract'],extend:Ext.util.Observable,alias:'pivotmatrix.base',mixins:[Ext.mixin.Factoryable],resultType:'base',leftAxisType:'base',topAxisType:'base',textRowLabels:'Row labels',textTotalTpl:'Total ({name})',textGrandTotalTpl:'Grand total',keysSeparator:'#_#',grandTotalKey:'grandtotal',compactViewKey:'_compactview_',compactViewColumnWidth:200,viewLayoutType:'outline',rowSubTotalsPosition:'first',rowGrandTotalsPosition:'last',colSubTotalsPosition:'last',colGrandTotalsPosition:'last',showZeroAsBlank:!1,calculateAsExcel:!1,leftAxis:null,topAxis:null,aggregate:null,results:null,pivotStore:null,isDestroyed:!1,cmp:null,useNaturalSorting:!1,collapsibleRows:!0,collapsibleColumns:!0,isPivotMatrix:!0,serializeProperties:['viewLayoutType','rowSubTotalsPosition','rowGrandTotalsPosition','colSubTotalsPosition','colGrandTotalsPosition','showZeroAsBlank','collapsibleRows','collapsibleColumns'],constructor:function(a){var b=this.callParent(arguments);this.initialize(!0,a);return b},destroy:function(){var a=this;a.delayedTask.cancel();a.delayedTask=null;if(Ext.isFunction(a.onDestroy)){a.onDestroy()}Ext.destroy(a.results,a.leftAxis,a.topAxis,a.aggregate,a.pivotStore);a.results=a.leftAxis=a.topAxis=a.aggregate=a.pivotStore=null;if(Ext.isArray(a.columns)){a.columns.length=0}if(Ext.isArray(a.model)){a.model.length=0}if(Ext.isArray(a.totals)){a.totals.length=0}a.columns=a.model=a.totals=a.keysMap=a.cmp=a.modelInfo=null;a.isDestroyed=!0;a.callParent(arguments)},getKey:function(b){var a=this;a.keysMap=a.keysMap||{};if(!Ext.isDefined(a.keysMap[b])){a.keysMap[b]=Ext.id()}return a.keysMap[b]},naturalSort:function(){var d=/(^([+\-]?(?:\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[\da-fA-F]+$|\d+)/g,a=/^\s+|\s+$/g,e=/\s+/g,f=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=/^0x[0-9a-f]+$/i,g=/^0/,b=function(b,c){b=b||'';return (!b.match(g)||c===1)&&parseFloat(b)||b.replace(e,' ').replace(a,'')||0};return function(o,p){var q=String(o instanceof Date?o.getTime():o||'').replace(a,''),i=String(p instanceof Date?p.getTime():p||'').replace(a,''),m=q.replace(d,'\x00$1\x00').replace(/\0$/,'').replace(/^\0/,'').split('\x00'),s=i.replace(d,'\x00$1\x00').replace(/\0$/,'').replace(/^\0/,'').split('\x00'),l=parseInt(q.match(c),16)||m.length!==1&&Date.parse(q),n=parseInt(i.match(c),16)||l&&i.match(f)&&Date.parse(i)||null,e,g,h,j,k,r;if(n){if(l<n){return -1}else {if(l>n){return 1}}}for(h=0,j=m.length,k=s.length,r=Math.max(j,k);h<r;h++){e=b(m[h],j);g=b(s[h],k);if(isNaN(e)!==isNaN(g)){return isNaN(e)?1:-1}else {if(typeof e!==typeof g){e+='';g+=''}}if(e<g){return -1}if(e>g){return 1}}return 0}}(),initialize:function(d,b){var a=this,e=a.serializeProperties,c;b=b||{};a.initResults();if(d||b.aggregate){a.initAggregates(b.aggregate||[])}if(d||b.leftAxis){a.initLeftAxis(b.leftAxis||[])}if(d||b.topAxis){a.initTopAxis(b.topAxis||[])}for(c=0;c<e.length;c++){if(Ext.isDefined(b[e[c]])){a[e[c]]=b[e[c]]}}a.totals=[];a.modelInfo={};a.keysMap=null;if(!d){if(!a.collapsibleRows){a.leftAxis.expandAll()}if(!a.collapsibleColumns){a.topAxis.expandAll()}}if(d){a.pivotStore=new Ext.data.ArrayStore({autoDestroy:!1,fields:[]});a.delayedTask=new Ext.util.DelayedTask(a.startProcess,a);if(Ext.isFunction(a.onInitialize)){a.onInitialize()}}a.delayedTask.delay(5)},onInitialize:Ext.emptyFn,onDestroy:Ext.emptyFn,reconfigure:function(c){var a=this,b=Ext.clone(c||{});if(a.fireEvent('beforereconfigure',a,b)!==!1){if(Ext.isFunction(a.onReconfigure)){a.onReconfigure(b)}a.fireEvent('reconfigure',a,b);a.initialize(!1,b);a.clearData()}else {a.delayedTask.cancel()}},onReconfigure:Ext.emptyFn,serialize:function(){var a=this,e=a.serializeProperties,f=e.length,b={},c,d;for(c=0;c<f;c++){d=e[c];b[d]=a[d]}b.leftAxis=a.serializeDimensions(a.leftAxis.dimensions);b.topAxis=a.serializeDimensions(a.topAxis.dimensions);b.aggregate=a.serializeDimensions(a.aggregate);return b},serializeDimensions:function(b){var d=b.getCount(),c=[],a;for(a=0;a<d;a++){c.push(b.getAt(a).serialize())}return c},initResults:function(){Ext.destroy(this.results);this.results=new Ext.pivot.result.Collection({resultType:this.resultType,matrix:this})},initAggregates:function(b){var c=this,d,a;Ext.destroy(c.aggregate);c.aggregate=new Ext.pivot.MixedCollection();c.aggregate.getKey=function(a){return a.getId()};if(Ext.isEmpty(b)){return}b=Ext.Array.from(b);for(d=0;d<b.length;d++){a=b[d];if(!a.isInstance){Ext.applyIf(a,{isAggregate:!0,align:'right',showZeroAsBlank:c.showZeroAsBlank});a=new Ext.pivot.dimension.Item(a)}a.matrix=this;c.aggregate.add(a)}},initLeftAxis:function(b){var a=this;b=Ext.Array.from(b||[]);Ext.destroy(a.leftAxis);a.leftAxis=Ext.Factory.pivotaxis({type:a.leftAxisType,matrix:a,dimensions:b,isLeftAxis:!0})},initTopAxis:function(b){var a=this;b=Ext.Array.from(b||[]);Ext.destroy(a.topAxis);a.topAxis=Ext.Factory.pivotaxis({type:a.topAxisType,matrix:a,dimensions:b,isLeftAxis:!1})},clearData:function(){var a=this;a.fireEvent('cleardata',a);a.leftAxis.clear();a.topAxis.clear();a.results.clear();if(Ext.isArray(a.columns)){a.columns.length=0}if(Ext.isArray(a.model)){a.model.length=0}a.totals=[];a.modelInfo={};a.keysMap=null;if(a.pivotStore){a.pivotStore.removeAll(!0)}},startProcess:Ext.emptyFn,endProcess:function(){var a=this;a.leftAxis.getTree();a.topAxis.getTree();a.buildModelAndColumns();a.buildPivotStore();if(Ext.isFunction(a.onBuildStore)){a.onBuildStore(a.pivotStore)}a.fireEvent('storebuilt',a,a.pivotStore);a.fireEvent('done',a)},onBuildModel:Ext.emptyFn,onBuildColumns:Ext.emptyFn,onBuildRecord:Ext.emptyFn,onBuildTotals:Ext.emptyFn,onBuildStore:Ext.emptyFn,buildModelAndColumns:function(){var a=this;a.model=[{name:'id',type:'string'},{name:'isRowGroupHeader',type:'boolean',defaultValue:!1},{name:'isRowGroupTotal',type:'boolean',defaultValue:!1},{name:'isRowGrandTotal',type:'boolean',defaultValue:!1},{name:'leftAxisKey',type:'string',defaultValue:null}];a.internalCounter=0;a.columns=[];if(a.viewLayoutType==='compact'){a.generateCompactLeftAxis()}else {a.leftAxis.dimensions.each(a.parseLeftAxisDimension,a)}if(a.colGrandTotalsPosition==='first'){a.columns.push(a.parseAggregateForColumn(null,{text:a.textGrandTotalTpl,grandTotal:!0}))}Ext.Array.each(a.topAxis.getTree(),a.parseTopAxisItem,a);if(a.colGrandTotalsPosition==='last'){a.columns.push(a.parseAggregateForColumn(null,{text:a.textGrandTotalTpl,grandTotal:!0}))}if(Ext.isFunction(a.onBuildModel)){a.onBuildModel(a.model)}a.fireEvent('modelbuilt',a,a.model);if(Ext.isFunction(a.onBuildColumns)){a.onBuildColumns(a.columns)}a.fireEvent('columnsbuilt',a,a.columns)},getDefaultFieldInfo:function(a){return Ext.apply({isColGroupTotal:!1,isColGrandTotal:!1,leftAxisColumn:!1,topAxisColumn:!1,topAxisKey:null},a)},parseLeftAxisDimension:function(a){var b=this,c=a.getId();b.model.push({name:c,type:'auto'});b.columns.push(Ext.merge({dataIndex:c,text:a.header,dimension:a,leftAxis:!0},a.column));b.modelInfo[c]=b.getDefaultFieldInfo({leftAxisColumn:!0})},generateCompactLeftAxis:function(){var a=this;a.model.push({name:a.compactViewKey,type:'auto'});a.columns.push({dataIndex:a.compactViewKey,text:a.textRowLabels,leftAxis:!0,width:a.compactViewColumnWidth});a.modelInfo[a.compactViewKey]=a.getDefaultFieldInfo({leftAxisColumn:!0})},parseTopAxisItem:function(a){var b=this,d=[],e=[],h,c,i,g,f;if(!a.children){d=b.parseAggregateForColumn(a,null);if(a.level===0){b.columns.push(d)}else {return d}}else {if(b.colSubTotalsPosition==='first'){c=b.addColSummary(a);if(c){e.push(c)}}i=a.children.length;for(g=0;g<i;g++){f=b.parseTopAxisItem(a.children[g]);if(Ext.isArray(f)){Ext.Array.insert(d,d.length,f)}else {d.push(f)}}h={text:a.name,group:a,columns:d,key:a.key,xexpandable:!0,xgrouped:!0};if(a.level===0){b.columns.push(h)}e.push(h);if(b.colSubTotalsPosition==='last'){c=b.addColSummary(a);if(c){e.push(c)}}if(b.colSubTotalsPosition==='none'){c=b.addColSummary(a);if(c){e.push(c)}}return e}},addColSummary:function(a){var c=this,b;b=c.parseAggregateForColumn(a,{text:a.expanded?a.getTextTotal():a.name,group:a,subTotal:!0});if(a.level===0){c.columns.push(b)}Ext.apply(b,{key:a.key,xexpandable:!0,xgrouped:!0});return b},parseAggregateForColumn:function(c,b){var a=this,e=[],d={},h=a.aggregate.getRange(),i=h.length,g,f;for(g=0;g<i;g++){f=h[g];a.internalCounter++;a.model.push({name:'c'+a.internalCounter,type:'auto',defaultValue:undefined,useNull:!0,col:c?c.key:a.grandTotalKey,agg:f.getId()});e.push(Ext.merge({dataIndex:'c'+a.internalCounter,text:f.header,topAxis:!0,subTotal:b?b.subTotal===!0:!1,grandTotal:b?b.grandTotal===!0:!1,dimension:f},f.column));a.modelInfo['c'+a.internalCounter]=a.getDefaultFieldInfo({isColGroupTotal:b?b.subTotal===!0:!1,isColGrandTotal:b?b.grandTotal===!0:!1,topAxisColumn:!0,topAxisKey:c?c.key:a.grandTotalKey})}if(e.length===0&&a.aggregate.getCount()===0){a.internalCounter++;d=Ext.apply({text:c?c.name:'',dataIndex:'c'+a.internalCounter},b||{})}else {if(e.length===1){d=Ext.applyIf({text:c?c.name:''},e[0]);Ext.apply(d,b||{});if(b&&b.grandTotal&&a.aggregate.getCount()===1){d.text=a.aggregate.getAt(0).header||b.text}}else {d=Ext.apply({text:c?c.name:'',columns:e},b||{})}}return d},buildPivotStore:function(){var a=this;if(Ext.isFunction(a.pivotStore.model.setFields)){a.pivotStore.model.setFields(a.model)}else {a.pivotStore.model.replaceFields(a.model,!0)}a.pivotStore.removeAll(!0);Ext.Array.each(a.leftAxis.getTree(),a.addRecordToPivotStore,a);a.addGrandTotalsToPivotStore()},addGrandTotalsToPivotStore:function(){var a=this,c=[],e,d,b;c.push({title:a.textGrandTotalTpl,values:a.preparePivotStoreRecordData({key:a.grandTotalKey},{isRowGrandTotal:!0})});if(Ext.isFunction(a.onBuildTotals)){a.onBuildTotals(c)}a.fireEvent('buildtotals',a,c);e=c.length;for(d=0;d<e;d++){b=c[d];if(Ext.isObject(b)&&Ext.isObject(b.values)){Ext.applyIf(b.values,{isRowGrandTotal:!0});a.totals.push({title:b.title||'',record:a.pivotStore.add(b.values)[0]})}}},addRecordToPivotStore:function(b){var a=this,c,d;if(!b.children){c=a.pivotStore.add(a.preparePivotStoreRecordData(b))[0];b.record=c;if(Ext.isFunction(a.onBuildRecord)){a.onBuildRecord(c,b)}a.fireEvent('recordbuilt',a,c,b)}else {b.records={};d=a.viewLayoutType==='compact'?a.compactViewKey:b.dimensionId;b.records.collapsed=a.pivotStore.add(a.preparePivotStoreRecordData(b,{isRowGroupHeader:!0,isRowGroupTotal:!0}))[0];if(a.rowSubTotalsPosition==='first'&&a.viewLayoutType!=='tabular'){b.records.expanded=a.pivotStore.add(a.preparePivotStoreRecordData(b,{isRowGroupHeader:!0}))[0]}else {c={};c=a.preparePivotStoreRecordData(b,{isRowGroupHeader:!0});c[d]=b.name;b.records.expanded=a.pivotStore.add(c)[0];if(a.rowSubTotalsPosition==='last'||a.viewLayoutType==='tabular'){c=a.preparePivotStoreRecordData(b,{isRowGroupTotal:!0});c[d]=b.getTextTotal();b.records.footer=a.pivotStore.add(c)[0]}}Ext.Array.each(b.children,a.addRecordToPivotStore,a)}},preparePivotStoreRecordData:function(a,g){var d=this,c={},h=d.model.length,e,b,f;if(a){if(a.dimensionId){c[a.dimensionId]=a.name}c.leftAxisKey=a.key;for(e=0;e<h;e++){b=d.model[e];if(b.col&&b.agg){f=d.results.items.map[a.key+'/'+b.col];c[b.name]=f?f.values[b.agg]:null}}if(d.viewLayoutType==='compact'){c[d.compactViewKey]=a.name}}return Ext.applyIf(c,g)},getColumns:function(){return this.model},getColumnHeaders:function(){var a=this;if(!a.model){a.buildModelAndColumns()}return a.columns},isGroupRow:function(b){var a=this.leftAxis.findTreeElement('key',b);if(!a){return !1}return a.node.children&&a.node.children.length===0?0:a.level},isGroupCol:function(b){var a=this.topAxis.findTreeElement('key',b);if(!a){return !1}return a.node.children&&a.node.children.length===0?0:a.level},deprecated:{'6.0':{properties:{mztype:'type',mztypeLeftAxis:'leftAxisType',mztypeTopAxis:'topAxisType'}}}});Ext.define('Ext.pivot.result.Local',{extend:Ext.pivot.result.Base,alias:'pivotresult.local',alternateClassName:['Mz.aggregate.matrix.Result'],records:null,constructor:function(a){this.records=[];return this.callParent(arguments)},destroy:function(){this.records.length=0;this.records=null;return this.callParent(arguments)},calculate:function(){var a=this,c,b,d=a.matrix.aggregate.getCount();for(c=0;c<d;c++){b=a.matrix.aggregate.getAt(c);a.addValue(b.getId(),Ext.callback(b.aggregatorFn,b.getScope()||'self.controller',[a.records,b.dataIndex,a.matrix,a.leftKey,a.topKey],0,a.matrix.cmp))}},calculateByFn:function(e,d,b){var a=this,c;if(Ext.isString(b)){b=Ext.pivot.Aggregators[b]}c=b(a.records,d,a.matrix,a.leftKey,a.topKey);a.addValue(e,c);return c},addRecord:function(a){this.records.push(a)},removeRecord:function(a){Ext.Array.remove(this.records,a)}});Ext.define('Ext.pivot.matrix.Local',{alternateClassName:['Mz.aggregate.matrix.Local'],extend:Ext.pivot.matrix.Base,alias:'pivotmatrix.local',isLocalMatrix:!0,resultType:'local',leftAxisType:'local',topAxisType:'local',store:null,recordsPerJob:1000,timeBetweenJobs:2,onInitialize:function(){var a=this;a.localDelayedTask=new Ext.util.DelayedTask(a.delayedProcess,a);a.storeCleanDelayedTask=new Ext.util.DelayedTask(a.onOriginalStoreCleanDelayed,a);a.storeChangedDelayedTask=new Ext.util.DelayedTask(a.onOriginalStoreChangedDelayed,a);a.initializeStore({store:a.store});a.callParent(arguments)},initializeStore:function(d){var a=this,b,c;a.processedRecords={};if(d.store){c=d.store}else {if(a.store){if(a.store.isStore&&!a.storeListeners){b=a.store}else {c=a.store}}}if(c){b=Ext.getStore(c||'');if(Ext.isEmpty(b)&&Ext.isString(c)){b=Ext.create(c)}}if(b&&b.isStore){Ext.destroy(a.storeListeners);if(a.store&&a.store.autoDestroy&&b!==a.store){Ext.destroy(a.store)}a.store=b;a.storeListeners=a.store.on({refresh:a.startProcess,beforeload:a.onOriginalStoreBeforeLoad,add:a.onOriginalStoreAdd,update:a.onOriginalStoreUpdate,remove:a.onOriginalStoreRemove,commit:a.onOriginalStoreClean,reject:a.onOriginalStoreClean,clear:a.startProcess,scope:a,destroyable:!0});if(b.isLoaded()){a.startProcess()}}},onReconfigure:function(a){this.initializeStore(a);this.callParent(arguments)},onDestroy:function(){var a=this;a.localDelayedTask.cancel();a.localDelayedTask=null;a.storeCleanDelayedTask.cancel();a.storeCleanDelayedTask=null;a.storeChangedDelayedTask.cancel();a.storeChangedDelayedTask=null;if(Ext.isArray(a.records)){a.records.length=0}a.records=a.changedRecords=null;Ext.destroy(a.storeListeners);if(a.store&&a.store.isStore&&a.store.autoDestroy){Ext.destroy(a.store)}a.store=a.storeListeners=a.processedRecords=null;a.callParent(arguments)},onOriginalStoreBeforeLoad:function(a){this.fireEvent('start',this)},createStoreChangesQueue:function(){var a=this;a.changedRecords=a.changedRecords||{};a.changedRecords.add=a.changedRecords.add||[];a.changedRecords.update=a.changedRecords.update||[];a.changedRecords.remove=a.changedRecords.remove||[]},dropStoreChangesQueue:function(){var a=this;if(a.changedRecords){a.changedRecords.add.length=0;a.changedRecords.update.length=0;a.changedRecords.remove.length=0}},onOriginalStoreAdd:function(c,b){var a=this;a.createStoreChangesQueue();Ext.Array.insert(a.changedRecords.add,a.changedRecords.add.length,b);a.storeChangedDelayedTask.delay(100)},onOriginalStoreUpdate:function(c,b){var a=this;a.createStoreChangesQueue();if(Ext.Array.indexOf(a.changedRecords.add,b)<0){Ext.Array.insert(a.changedRecords.update,a.changedRecords.update.length,[b])}a.storeChangedDelayedTask.delay(100)},onOriginalStoreRemove:function(g,c,f,d){var a=this,e=c.length,b;if(d){return}a.createStoreChangesQueue();for(b=0;b<e;b++){Ext.Array.remove(a.changedRecords.update,c[b]);Ext.Array.remove(a.changedRecords.add,c[b])}Ext.Array.insert(a.changedRecords.remove,a.changedRecords.remove.length,c);a.storeChangedDelayedTask.delay(100)},onOriginalStoreChangedDelayed:function(){var a=this,b=a.changedRecords;if(a.isDestroyed){return}a.storeChanged=!!(b.add.length||b.update.length||b.remove.length);if(a.storeChanged){a.onOriginalStoreAddDelayed();a.onOriginalStoreUpdateDelayed();a.onOriginalStoreRemoveDelayed()}},onOriginalStoreAddDelayed:function(){var c=this,g=[],f=!1,d,b,e,h,a;e=c.changedRecords.add;d=e.length;if(!d){return}for(b=0;b<d;b++){h=e[b];c.processRecord(h,b,d);a=c.processedRecords[h.internalId];f=f||a.left.length||a.top.length;if(a.left.length){Ext.Array.insert(g,g.length,a.left)}}e.length=0;if(f){c.leftAxis.rebuildTree();c.topAxis.rebuildTree()}d=g.length;if(d){for(b=0;b<d;b++){a=g[b];if(a.children&&!a.records||!a.children&&!a.record){c.addRecordToPivotStore(a)}}}c.recalculateResults(c.store,e,f)},onOriginalStoreUpdateDelayed:function(){var a=this,i=[],h=!1,c,b,f,g,d,j,e,k,l;f=a.changedRecords.update;c=f.length;if(!c){return}for(b=0;b<c;b++){g=f[b];j=a.processedRecords[g.internalId];a.removeRecordFromResults(g);a.processRecord(g,b,c);e=a.processedRecords[g.internalId];if(j&&e){k=Ext.Array.equals(j.left,e.left);l=Ext.Array.equals(j.top,e.top);h=h||!k||!l;if(!k){Ext.Array.insert(i,i.length,e.left)}}}f.length=0;if(h){a.leftAxis.rebuildTree();a.topAxis.rebuildTree()}c=i.length;for(b=0;b<c;b++){d=i[b];if(d.children&&!d.records||!d.children&&!d.record){a.addRecordToPivotStore(d)}}a.recalculateResults(a.store,f,h)},onOriginalStoreRemoveDelayed:function(){var a=this,e,d,b,c;b=a.changedRecords.remove;e=b.length;if(!e){return}for(d=0;d<e;d++){c=a.removeRecordFromResults(b[d])||c}b.length=0;if(c){a.leftAxis.rebuildTree();a.topAxis.rebuildTree()}a.recalculateResults(a.store,b,c)},onOriginalStoreClean:function(){var a=this;if(a.localDelayedTask.id){a.dropStoreChangesQueue();a.storeChanged=!1}else {a.storeCleanDelayedTask.delay(100)}},onOriginalStoreCleanDelayed:function(){var a=this,c,d,b;if(a.isDestroyed){return}c=a.pivotStore.getRange();d=c.length;for(b=0;b<d;b++){c[b].commit(!0)}a.storeChanged=!1;a.fireEvent('afterupdate',a,!1)},removeRecordFromResults:function(g){var b=this,c=b.processedRecords[g.internalId],e=b.grandTotalKey,i=!1,a,f,d,h,j,k;if(!c){return i}a=b.results.get(e,e);if(a){a.removeRecord(g);if(a.records.length===0){b.results.remove(e,e)}}j=c.top.length;for(d=0;d<j;d++){f=c.top[d];a=b.results.get(e,f.key);if(a){a.removeRecord(g);if(a.records.length===0){b.results.remove(e,f.key);b.topAxis.items.remove(f);i=!0}}}j=c.left.length;for(d=0;d<j;d++){f=c.left[d];a=b.results.get(f.key,e);if(a){a.removeRecord(g);if(a.records.length===0){b.results.remove(f.key,e);b.leftAxis.items.remove(f);i=!0}}k=c.top.length;for(h=0;h<k;h++){a=b.results.get(c.left[d].key,c.top[h].key);if(a){a.removeRecord(g);if(a.records.length===0){b.results.remove(c.left[d].key,c.top[h].key)}}}}return i},recalculateResults:function(d,c,b){var a=this;a.fireEvent('beforeupdate',a,b);a.buildModelAndColumns();a.results.calculate();Ext.Array.each(a.leftAxis.getTree(),a.updateRecordToPivotStore,a);a.updateGrandTotalsToPivotStore();a.fireEvent('afterupdate',a,b)},updateGrandTotalsToPivotStore:function(){var a=this,c=[],b;if(a.totals.length<=0){return}c.push({title:a.textGrandTotalTpl,values:a.preparePivotStoreRecordData({key:a.grandTotalKey})});if(Ext.isFunction(a.onBuildTotals)){a.onBuildTotals(c)}a.fireEvent('buildtotals',a,c);if(a.totals.length===c.length){for(b=0;b<a.totals.length;b++){if(Ext.isObject(c[b])&&Ext.isObject(c[b].values)&&a.totals[b].record instanceof Ext.data.Model){delete c[b].values.id;a.totals[b].record.set(c[b].values)}}}},updateRecordToPivotStore:function(a){var c=this,d,b;if(!a.children){if(a.record){b=c.preparePivotStoreRecordData(a);delete b.id;a.record.set(b)}}else {if(a.records){d=c.viewLayoutType==='compact'?c.compactViewKey:a.dimensionId;b=c.preparePivotStoreRecordData(a);delete b.id;delete b[d];a.records.collapsed.set(b);if(a.records.expanded){a.records.expanded.set(b)}if(a.records.footer){a.records.footer.set(b)}}Ext.Array.each(a.children,c.updateRecordToPivotStore,c)}},startProcess:function(){var a=this;if(!a.store||a.store&&!a.store.isStore||a.isDestroyed||a.store.isLoading()){return}a.dropStoreChangesQueue();a.clearData();a.localDelayedTask.delay(50)},delayedProcess:function(){var a=this;if(a.isDestroyed){return}a.fireEvent('start',a);a.records=a.store.getRange();if(a.records.length===0){a.endProcess();return}a.statusInProgress=!1;a.processRecords(0)},processRecords:function(d){var a=this,b=d,c;if(a.isDestroyed){return}c=a.records.length;a.statusInProgress=!0;while(b<c&&b<d+a.recordsPerJob&&a.statusInProgress){a.processRecord(a.records[b],b,c);b++}if(b>=c){a.statusInProgress=!1;a.results.calculate();a.leftAxis.buildTree();a.topAxis.buildTree();if(a.filterApplied){a.results.calculate()}a.records=null;a.endProcess();return}if(a.statusInProgress&&c>0){Ext.defer(a.processRecords,a.timeBetweenJobs,a,[b])}},processRecord:function(d,l,m){var a=this,f=a.grandTotalKey,g,e,c,h,j,k,i,b;a.processedRecords[d.internalId]=i={left:[],top:[]};g=a.leftAxis.processRecord(d);e=a.topAxis.processRecord(d);if(g&&e){a.results.add(f,f).addRecord(d);j=e.length;for(c=0;c<j;c++){b=e[c];a.topAxis.addItem(b);i.top.push(a.topAxis.items.map[b.key]);a.results.add(f,b.key).addRecord(d)}k=g.length;for(c=0;c<k;c++){b=g[c];a.leftAxis.addItem(b);i.left.push(a.leftAxis.items.map[b.key]);a.results.add(b.key,f).addRecord(d);for(h=0;h<j;h++){a.results.add(b.key,e[h].key).addRecord(d)}}}a.fireEvent('progress',a,l+1,m)},getRecordsByRowGroup:function(e){var c=this.results.getByLeftKey(e),d=c.length,b=[],a;for(a=0;a<d;a++){Ext.Array.insert(b,b.length,c[a].records||[])}return b},getRecordsByColGroup:function(e){var c=this.results.getByTopKey(e),d=c.length,b=[],a;for(a=0;a<d;a++){Ext.Array.insert(b,b.length,c[a].records||[])}return b},getRecordsByGroups:function(c,b){var a=this.results.get(c,b);return a?a.records||[]:[]}});Ext.define('Ext.pivot.matrix.Remote',{alternateClassName:['Mz.aggregate.matrix.Remote'],extend:Ext.pivot.matrix.Base,alias:'pivotmatrix.remote',isRemoteMatrix:!0,url:'',timeout:3000,onBeforeRequest:Ext.emptyFn,onRequestException:Ext.emptyFn,onInitialize:function(){var a=this;a.remoteDelayedTask=new Ext.util.DelayedTask(a.delayedProcess,a);a.callParent(arguments)},onDestroy:function(){this.remoteDelayedTask.cancel();this.remoteDelayedTask=null;this.callParent()},startProcess:function(){var a=this;if(Ext.isEmpty(a.url)){return}a.clearData();a.fireEvent('start',a);a.statusInProgress=!1;a.remoteDelayedTask.delay(5)},delayedProcess:function(){var a=this,d=a.serialize(),c,b;b={keysSeparator:a.keysSeparator,grandTotalKey:a.grandTotalKey,leftAxis:d.leftAxis,topAxis:d.topAxis,aggregate:d.aggregate};c=a.fireEvent('beforerequest',a,b);if(c!==!1){if(Ext.isFunction(a.onBeforeRequest)){c=a.onBeforeRequest(b)}}if(c===!1){a.endProcess()}else {Ext.Ajax.request({url:a.url,timeout:a.timeout,jsonData:b,callback:a.processRemoteResults,scope:a})}},processRemoteResults:function(k,j,g){var d=this,i=!j,f=Ext.JSON.decode(g.responseText,!0),c,b,e,a,h;if(j){i=!f||!f.success}if(i){d.fireEvent('requestexception',d,g);if(Ext.isFunction(d.onRequestException)){d.onRequestException(g)}d.endProcess();return}c=Ext.Array.from(f.leftAxis||[]);e=c.length;for(a=0;a<e;a++){b=c[a];if(Ext.isObject(b)){d.leftAxis.addItem(b)}}c=Ext.Array.from(f.topAxis||[]);e=c.length;for(a=0;a<e;a++){b=c[a];if(Ext.isObject(b)){d.topAxis.addItem(b)}}c=Ext.Array.from(f.results||[]);e=c.length;for(a=0;a<e;a++){b=c[a];if(Ext.isObject(b)){h=d.results.add(b.leftKey||'',b.topKey||'');Ext.Object.each(b.values||{},h.addValue,h)}}d.endProcess()}});Ext.define('Ext.pivot.feature.PivotEvents',{alternateClassName:['Mz.pivot.feature.PivotEvents'],extend:Ext.grid.feature.Feature,alias:'feature.pivotevents',eventPrefix:'pivotcell',eventSelector:'.'+Ext.baseCSSPrefix+'grid-cell',cellSelector:'.'+Ext.baseCSSPrefix+'grid-cell',rowSelector:'.'+Ext.baseCSSPrefix+'grid-row',groupHeaderCls:Ext.baseCSSPrefix+'pivot-grid-group-header',groupHeaderCollapsibleCls:Ext.baseCSSPrefix+'pivot-grid-group-header-collapsible',init:function(a){this.initEventsListeners();this.callParent(arguments)},destroy:function(){var a=this;a.destroyEventsListeners();Ext.destroy(a.dataSource);a.view=a.grid=a.gridMaster=a.matrix=a.dataSource=null;a.callParent(arguments)},initEventsListeners:function(){var a=this;a.eventsViewListeners=a.view.on(Ext.apply({scope:a,destroyable:!0},a.getViewListeners()||{}));a.gridListeners=a.grid.on(Ext.apply({scope:a,destroyable:!0},a.getGridListeners()||{}))},getViewListeners:function(){var a=this,b={afterrender:a.onViewAfterRender};b[a.eventPrefix+'click']=a.onCellEvent;b[a.eventPrefix+'dblclick']=a.onCellEvent;b[a.eventPrefix+'contextmenu']=a.onCellEvent;return b},getGridListeners:Ext.emptyFn,destroyEventsListeners:function(){Ext.destroyMembers(this,'eventsViewListeners','gridListeners');this.eventsViewListeners=this.gridListeners=null},onViewAfterRender:function(){var a=this,b;a.gridMaster=a.view.up('pivotgrid');a.matrix=a.gridMaster.getMatrix();b=a.lockingPartner;if(b&&b.dataSource){a.dataSource=b.dataSource}else {a.dataSource=new Ext.pivot.feature.PivotStore({store:a.grid.store,matrix:a.matrix,grid:a.gridMaster,clsGrandTotal:a.gridMaster.clsGrandTotal,clsGroupTotal:a.gridMaster.clsGroupTotal})}},getRowId:function(a){return this.view.id+'-record-'+a.internalId},getRecord:function(a){return this.view.getRecord(a)},onCellEvent:function(r,e,n){var b=this,h=Ext.fly(e).findParent(b.rowSelector),p=b.getRecord(h),l={grid:b.gridMaster,view:b.view,cellEl:e},j,q,i,d,f,o,m,g,a,k,c;if(!h||!p){return !1}g=b.gridMaster.getMatrix();j=Ext.getDom(e).getAttribute('data-columnid');d=b.getColumnHeaderById(j);c=b.dataSource.storeInfo[p.internalId];a=c.rendererParams[d.dataIndex];if(!a){a=c.rendererParams.topaxis}a=a?a.group:null;o=a?a.key:c.leftKey;h=Ext.fly(h);i=c.rowEvent;Ext.apply(l,{columnId:j,column:d,leftKey:o,leftItem:a});if(Ext.fly(e).hasCls(b.groupHeaderCls)){}else {if(d){i+='cell';f=b.getTopAxisGroupByDataIndex(d.dataIndex);if(f){m=f.col;k=g.topAxis.findTreeElement('key',m);Ext.apply(l,{topKey:m,topItem:k?k.node:null,dimensionId:f.agg})}}}q=b.gridMaster.fireEvent(i+n.type,l,n);if(q!==!1&&n.type==='click'&&Ext.fly(e).hasCls(b.groupHeaderCollapsibleCls)){if(a.expanded){a.collapse();b.view.focusNode(g.viewLayoutType==='tabular'?b.dataSource.getTabularGroupRecord(a):a.records.collapsed)}else {a.expand();b.view.focusNode(g.viewLayoutType==='tabular'?b.dataSource.getTabularGroupRecord(a):a.records.expanded)}}return !1},getColumnHeaderById:function(c){var b=this.view.getGridColumns(),a;for(a=0;a<b.length;a++){if(b[a].id===c){return b[a]}}},getTopAxisGroupByDataIndex:function(c){var b=this.gridMaster.matrix.getColumns(),a;for(a=0;a<b.length;a++){if(b[a].name===c){return b[a]}}}});Ext.define('Ext.pivot.feature.PivotView',{extend:Ext.pivot.feature.PivotEvents,alias:'feature.pivotview',groupCls:Ext.baseCSSPrefix+'pivot-grid-group',groupTitleCls:Ext.baseCSSPrefix+'pivot-grid-group-title',groupHeaderCollapsedCls:Ext.baseCSSPrefix+'pivot-grid-group-header-collapsed',outlineCellHiddenCls:Ext.baseCSSPrefix+'pivot-grid-outline-cell-hidden',outlineCellGroupExpandedCls:Ext.baseCSSPrefix+'pivot-grid-outline-cell-previous-expanded',compactGroupHeaderCls:Ext.baseCSSPrefix+'pivot-grid-group-header-compact',outlineGroupHeaderCls:Ext.baseCSSPrefix+'pivot-grid-group-header-outline',tabularGroupHeaderCls:Ext.baseCSSPrefix+'pivot-grid-group-header-tabular',compactLayoutPadding:25,outerTpl:['{%','var me = this.pivotViewFeature;','if (!(me.disabled)) {','me.setup();','}','this.nextTpl.applyOut(values, out, parent);','%}',{priority:200}],rowTpl:['{%','var me = this.pivotViewFeature;','me.setupRowData(values.record, values.rowIndex, values);','values.view.renderColumnSizer(values, out);','this.nextTpl.applyOut(values, out, parent);','me.resetRenderers();','%}',{priority:200,syncRowHeights:function(b,a){var d,c;b=Ext.fly(b,'syncDest');if(b){d=b.offsetHeight}a=Ext.fly(a,'sycSrc');if(a){c=a.offsetHeight}if(b&&a){if(d>c){Ext.fly(a).setHeight(d)}else {if(c>d){Ext.fly(b).setHeight(c)}}}}}],cellTpl:['{%','values.hideCell = values.tdAttr == "hidden";\n','%}','<tpl if="!hideCell">','<td class="{tdCls}" role="{cellRole}" {tdAttr} {cellAttr:attributes}',' style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>"',' tabindex="-1" data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner {innerCls}" ','style="text-align:{align};<tpl if="style">{style}</tpl>" ','{cellInnerAttr:attributes}>{value}</div>','</td>','</tpl>',{priority:0}],rtlCellTpl:['{%','values.hideCell = values.tdAttr == "hidden";\n','%}','<tpl if="!hideCell">','<td class="{tdCls}" role="{cellRole}" {tdAttr} {cellAttr:attributes}',' style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>"',' tabindex="-1" data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner {innerCls}" ','style="text-align:{[this.getAlign(values.align)]};<tpl if="style">{style}</tpl>" ','{cellInnerAttr:attributes}>{value}</div>','</td>','</tpl>',{priority:200,rtlAlign:{right:'left',left:'right',center:'center'},getAlign:function(a){return this.rtlAlign[a]}}],init:function(c){var b=this,a=b.view;b.callParent(arguments);a.addTpl(Ext.XTemplate.getTpl(b,'outerTpl')).pivotViewFeature=b;a.addRowTpl(Ext.XTemplate.getTpl(b,'rowTpl')).pivotViewFeature=b;a.preserveScrollOnRefresh=!0;if(a.bufferedRenderer){a.bufferedRenderer.variableRowHeight=!0}else {c.variableRowHeight=a.variableRowHeight=!0}},destroy:function(){this.columns=null;this.callParent(arguments)},setup:function(){this.columns=this.view.getGridColumns()},isRTL:function(){var b=this,a=b.gridMaster||b.grid;if(Ext.isFunction(a.isLocalRtl)){return a.isLocalRtl()}return !1},getGridListeners:function(){var a=this;return Ext.apply(a.callParent(arguments)||{},{beforerender:a.onBeforeGridRendered})},onBeforeGridRendered:function(b){var a=this;if(a.isRTL()){a.view.addCellTpl(Ext.XTemplate.getTpl(a,'rtlCellTpl'))}else {a.view.addCellTpl(Ext.XTemplate.getTpl(a,'cellTpl'))}},vetoEvent:function(c,d,b,a){if(a.type!=='mouseover'&&a.type!=='mouseout'&&a.type!=='mouseenter'&&a.type!=='mouseleave'&&a.getTarget(this.eventSelector)){return !1}},setupRowData:function(d,e,b){var a=this.dataSource.storeInfo[d.internalId],c=a?a.rendererParams:{};b.rowClasses.length=0;Ext.Array.insert(b.rowClasses,0,a?a.rowClasses:[]);this.setRenderers(c)},setRenderers:function(b){var d=this.columns.length,c,a;for(c=0;c<d;c++){a=this.columns[c];if(a.leftAxis&&b[a.dataIndex]){a.savedRenderer=a.renderer;a.renderer=this[b[a.dataIndex].fn](Ext.apply({renderer:a.savedRenderer},b[a.dataIndex]))}if(a.topAxis&&b.topaxis){a.savedRenderer=a.renderer;a.renderer=this[b.topaxis.fn](Ext.apply({renderer:a.savedRenderer},b[a.dataIndex]))}}},resetRenderers:function(){var c=this.columns.length,b,a;for(b=0;b<c;b++){a=this.columns[b];if(Ext.isDefined(a.savedRenderer)){a.renderer=a.savedRenderer;delete a.savedRenderer}}},groupOutlineRenderer:function(b){var a=this,d=b.renderer,c=b.group,e=b.colspan,h=b.hidden,f=b.previousExpanded,g=b.subtotalRow;return function(j,i,m,l,k,n,o){if(Ext.isFunction(d)){j=d.apply(this,arguments)}if(e>0){i.tdAttr='colspan = "'+e+'"';i.tdCls=a.groupHeaderCls+' '+a.outlineGroupHeaderCls;if(!g){if(c&&c.children&&c.axis.matrix.collapsibleRows){i.tdCls+=' '+a.groupHeaderCollapsibleCls;if(!c.expanded){i.tdCls+=' '+a.groupHeaderCollapsedCls}}if(f){i.tdCls+=' '+a.outlineCellGroupExpandedCls}}return '<div class="'+a.groupTitleCls+' '+a.groupCls+'">'+j+'</div>'}if(h){i.tdAttr='hidden'}i.tdCls=a.outlineCellHiddenCls;return ''}},recordOutlineRenderer:function(c){var a=this,b=c.renderer,d=c.hidden;return function(f,e,i,h,g,j,k){if(Ext.isFunction(b)){f=b.apply(this,arguments)}if(d){e.tdCls=a.outlineCellHiddenCls;return ''}e.tdCls=a.groupHeaderCls+' '+a.groupTitleCls;return f}},groupCompactRenderer:function(c){var a=this,d=c.renderer,b=c.group,e=c.previousExpanded,f=c.subtotalRow;return function(h,g,k,j,i,l,m){if(Ext.isFunction(d)){h=d.apply(this,arguments)}if(b.level>0){g.style=(a.isRTL()?'margin-right: ':'margin-left: ')+a.compactLayoutPadding*b.level+'px;'}g.tdCls=a.groupHeaderCls+' '+a.compactGroupHeaderCls;if(!f){if(b&&b.children&&b.axis.matrix.collapsibleRows){g.tdCls+=' '+a.groupHeaderCollapsibleCls;if(!b.expanded){g.tdCls+=' '+a.groupHeaderCollapsedCls}}if(e){g.tdCls+=' '+a.outlineCellGroupExpandedCls}}return '<div class="'+a.groupTitleCls+' '+a.groupCls+'">'+h+'</div>'}},recordCompactRenderer:function(c){var a=this,b=c.renderer,d=c.group;return function(f,e,i,h,g,j,k){if(Ext.isFunction(b)){f=b.apply(this,arguments)}if(d.level>0){e.style=(a.isRTL()?'margin-right: ':'margin-left: ')+a.compactLayoutPadding*d.level+'px;'}e.tdCls=a.groupHeaderCls+' '+a.groupTitleCls+' '+a.compactGroupHeaderCls;return f}},groupTabularRenderer:function(b){var a=this,d=b.renderer,c=b.group,e=b.colspan,g=b.hidden,f=b.subtotalRow;return function(i,h,l,k,j,m,n){if(Ext.isFunction(d)){i=d.apply(this,arguments)}if(e>0){h.tdAttr='colspan = "'+e+'"'}h.tdCls=a.groupHeaderCls+' '+a.tabularGroupHeaderCls;if(!f){if(c&&c.children&&c.axis.matrix.collapsibleRows){h.tdCls+=' '+a.groupHeaderCollapsibleCls;if(!c.expanded){h.tdCls+=' '+a.groupHeaderCollapsedCls}}}if(g){h.tdAttr='hidden'}return '<div class="'+a.groupTitleCls+' '+a.groupCls+'">'+i+'</div>'}},recordTabularRenderer:function(b){var c=this,a=b.renderer,d=b.hidden;return function(e,f,i,h,g,j,k){if(d){return ''}if(Ext.isFunction(a)){e=a.apply(this,arguments)}f.tdCls=c.groupHeaderCls+' '+c.groupTitleCls;return e}},topAxisNoRenderer:function(a){return function(g,c,e,d,b,f,h){return ''}},topAxisRenderer:function(b){var c=this,a=b.renderer;return function(d,g,i,h,f,j,k){var e=d===0&&c.gridMaster.showZeroAsBlank;if(Ext.isFunction(a)){d=a.apply(this,arguments)}return e?'':d}}});Ext.define('Ext.pivot.Grid',{extend:Ext.grid.Panel,alternateClassName:['Mz.pivot.Grid','Mz.pivot.Table'],xtype:['pivotgrid','mzpivotgrid'],subGridXType:'gridpanel',isPivotGrid:!0,isPivotComponent:!0,enableLoadMask:!0,enableLocking:!1,enableColumnSort:!0,columnLines:!0,clsGroupTotal:Ext.baseCSSPrefix+'pivot-grid-group-total',clsGrandTotal:Ext.baseCSSPrefix+'pivot-grid-grand-total',startRowGroupsCollapsed:!0,startColGroupsCollapsed:!0,stateEvents:['pivotgroupexpand','pivotgroupcollapse','pivotdone'],groupHeaderCollapsedCls:Ext.baseCSSPrefix+'pivot-grid-group-header-collapsed',groupHeaderCollapsibleCls:Ext.baseCSSPrefix+'pivot-grid-group-header-collapsible',groupCls:Ext.baseCSSPrefix+'pivot-grid-group',relayedMatrixEvents:['beforereconfigure','reconfigure','start','progress','done','modelbuilt','columnsbuilt','recordbuilt','buildtotals','storebuilt','groupexpand','groupcollapse','beforerequest','requestexception'],deprecatedConfigs:['matrixConfig','leftAxis','topAxis','aggregate','showZeroAsBlank','textTotalTpl','textGrandTotalTpl','viewLayoutType','rowSubTotalsPosition','rowGrandTotalsPosition','colSubTotalsPosition','colGrandTotalsPosition'],config:{matrix:{type:'local'}},initComponent:function(){var a=this;a.columns=[];a.preInitialize();a.callParent(arguments);a.postInitialize()},preInitialize:function(){var a=this;a.features=[{id:'group',ftype:'pivotview',summaryRowCls:a.clsGroupTotal,grandSummaryRowCls:a.clsGrandTotal}];a.addCls(Ext.baseCSSPrefix+'pivot-grid');if(a.store){a.originalStore=a.store}a.store=new Ext.data.ArrayStore({fields:[]});a.enableColumnMove=!1},postInitialize:function(){var a=this,f={headerclick:a.onHeaderClick,scope:a,destroyable:!0},h=a.getView(),e=[],j=a.deprecatedConfigs,i=j.length,g=a.getMatrix(),c,b,d;if(a.enableLocking){a.lockedHeaderCtListeners=h.lockedView.getHeaderCt().on(f);a.headerCtListeners=h.normalView.getHeaderCt().on(f)}else {a.headerCtListeners=h.getHeaderCt().on(f)}for(c=0;c<i;c++){d=j[c];if(!!a[d]){e.push(d)}}if(e.length>0){b={};i=e.length;for(c=0;c<i;c++){d=e[c];if(d==='matrixConfig'){Ext.apply(b,a.matrixConfig)}else {b[d]=a[d]}}if(a.originalStore){b.store=a.originalStore}if(g){if(b.type&&g.type===b.type){g.reconfigure(b);return}}else {if(!b.type){b.type='local'}b.cmp=a}a.setMatrix(b)}},destroy:function(){var a=this;a.setMatrix(null);Ext.destroy(a.headerCtListeners,a.lockedHeaderCtListeners);Ext.destroy(a.originalStore);a.headerCtListeners=a.lockedHeaderCtListeners=null;a.originalStore=a.pivotColumns=null;a.callParent(arguments);Ext.destroy(a.store);a.store=null},applyMatrix:function(a,b){Ext.destroy(b);if(a==null){return a}if(a&&a.isPivotMatrix){a.cmp=this;return a}Ext.applyIf(a,{type:'local'});a.cmp=this;if(a.type==='local'&&this.originalStore){Ext.applyIf(a,{store:this.originalStore})}return Ext.Factory.pivotmatrix(a)},updateMatrix:function(c,d){var a=this,b;a.matrixRelayedListeners=a.matrixListeners=Ext.destroy(d,a.matrixListeners,a.matrixRelayedListeners);if(c){a.matrixListeners=a.matrix.on({cleardata:a.onMatrixClearData,start:a.onMatrixProcessStart,progress:a.onMatrixProcessProgress,done:a.onMatrixDataReady,afterupdate:a.onMatrixAfterUpdate,groupexpand:a.onMatrixGroupExpandCollapse,groupcollapse:a.onMatrixGroupExpandCollapse,scope:a,destroyable:!0});a.matrixRelayedListeners=a.relayEvents(a.matrix,a.relayedMatrixEvents,'pivot');b=a.getFeatureDataSource();if(b&&!a.isConfiguring){b.setMatrix(c)}}},refreshView:function(){var a=this;if(a.destroyed||a.destroying){return}a.store.fireEvent('pivotstoreremodel',a)},updateHeaderContainerColumns:function(f){var b=this,c=this.getView(),l=c.normalView?c.normalView.getHeaderCt():c.getHeaderCt(),g=c.normalGrid?c.normalGrid:b,i=0,j=[],a,k,d,h,e;if(f){e=b.getColumnForGroup(l.items,f);if(e.found){g.reconfiguring=!0;d=e.item.ownerCt;k=e.index;while(i<d.items.length){h=d.items.getAt(i);if(h.group===f){j.push(h)}i++}a=Ext.clone(b.pivotColumns);b.preparePivotColumns(a);a=b.getVisiblePivotColumns(b.prepareVisiblePivotColumns(a),f);a=d.insert(k,a);Ext.destroy(j);g.reconfiguring=!1;if(a&&a.length){a[0].focus()}g.onHeadersChanged()}}else {a=Ext.clone(b.pivotColumns);b.preparePivotColumns(a);a=b.prepareVisiblePivotColumns(a);b.reconfigure(undefined,a)}},getColumnForGroup:function(e,d){var f=e.length,a={found:!1,index:-1,item:null},c,b;for(c=0;c<f;c++){b=e.getAt(c);if(b.group===d){a.found=!0;a.index=c;a.item=b}else {if(b.items){a=this.getColumnForGroup(b.items,d)}}if(a.found){break}}return a},onMatrixClearData:function(){var a=this;a.store.removeAll(!0);if(!a.expandedItemsState){a.lastColumnsState=null}a.sortedColumn=null},onMatrixProcessStart:function(){if(this.enableLoadMask){this.setLoading(!0)}},onMatrixProcessProgress:function(f,e,d){var a=this,c=(e||0.1)*100/(d||0.1),b;if(a.loadMask){if(a.loadMask.msgTextEl){b=a.loadMask.msgTextEl}else {if(a.loadMask.msgEl){b=a.loadMask.msgEl}}if(b){b.update(Ext.util.Format.number(c,'0')+'%')}}},onMatrixDataReady:function(a){this.refreshMatrixData(a,!1)},onMatrixAfterUpdate:function(b,a){if(a){this.refreshMatrixData(b,!0)}else {this.refreshView()}},onMatrixGroupExpandCollapse:function(c,b,a){if(b==='col'){this.updateHeaderContainerColumns(a)}},refreshMatrixData:function(b,j){var a=this,d=b.getColumnHeaders(),g=!1,h=b.leftAxis.items.items,i=b.topAxis.items.items,c,f,e;if(a.enableLoadMask){a.setLoading(!1)}if(!j){if(a.expandedItemsState){f=h.length;for(c=0;c<f;c++){e=h[c];if(Ext.Array.indexOf(a.expandedItemsState.rows,e.value)>=0){e.expanded=!0;g=!0}}f=i.length;for(c=0;c<f;c++){e=i[c];if(Ext.Array.indexOf(a.expandedItemsState.cols,e.value)>=0){e.expanded=!0;g=!0}}if(g){delete a.expandedItemsState}}else {if(b.collapsibleRows){a.doExpandCollapseTree(b.leftAxis.getTree(),!a.startRowGroupsCollapsed)}if(b.collapsibleColumns){a.doExpandCollapseTree(b.topAxis.getTree(),!a.startColGroupsCollapsed)}}}a.pivotColumns=Ext.clone(d);d=Ext.clone(a.pivotColumns);a.preparePivotColumns(d);a.restorePivotColumnsState(d);d=a.prepareVisiblePivotColumns(d);a.reconfigure(undefined,d,null,!1);if(!Ext.isEmpty(a.sortedColumn)){b.leftAxis.sortTreeByField(a.sortedColumn.dataIndex,a.sortedColumn.direction)}a.store.fireEvent('pivotstoreremodel',a);if(!Ext.isEmpty(a.sortedColumn)){a.updateColumnSortState(a.sortedColumn.dataIndex,a.sortedColumn.direction)}},getVisiblePivotColumns:function(d,e){var b=[],f=d.length,c,a;for(c=0;c<f;c++){a=d[c];if(a.group===e){b.push(a)}if(a.columns){b=Ext.Array.merge(b,this.getVisiblePivotColumns(a.columns,e))}}return b},prepareVisiblePivotColumns:function(c){var e=c.length,d=[],b,a;for(b=0;b<e;b++){a=c[b];if(!a.hidden){d.push(a)}if(a.columns){a.columns=this.prepareVisiblePivotColumns(a.columns)}}return d},preparePivotColumns:function(d){var b=this,e={menuDisabled:!0,sortable:!1,lockable:!1},f=d.length,c,a;for(c=0;c<f;c++){a=d[c];a.cls=a.cls||'';Ext.apply(a,e);if(a.leftAxis){a.locked=b.enableLocking}if(a.subTotal){a.cls=a.tdCls=b.clsGroupTotal}if(a.grandTotal){a.cls=a.tdCls=b.clsGrandTotal}if(a.group&&a.xgrouped){if(a.group.expanded){if(!a.subTotal&&b.matrix.collapsibleColumns){a.cls+=(Ext.isEmpty(a.cls)?'':' ')+b.groupHeaderCollapsibleCls}}else {if(a.subTotal&&b.matrix.collapsibleColumns){a.cls+=(Ext.isEmpty(a.cls)?'':' ')+b.groupHeaderCollapsibleCls+' '+b.groupHeaderCollapsedCls}}if(a.subTotal){a.text=a.group.expanded?a.group.getTextTotal():Ext.String.format('<span class="'+this.groupCls+'">{0}</span>',a.group.name)}else {if(a.group){a.text=Ext.String.format('<span class="'+this.groupCls+'">{0}</span>',a.group.name)}}a.xexpandable=a.subTotal?!a.group.expanded:a.group.expanded;if(!a.group.expanded&&!a.subTotal||a.group.expanded&&a.subTotal&&this.getMatrix().colSubTotalsPosition==='none'){a.hidden=!0}}if(Ext.isEmpty(a.columns)){if(a.dimension){a.renderer=a.dimension?a.dimension.getRenderer():!1;a.formatter=a.dimension?a.dimension.getFormatter():!1;a.scope=a.dimension?a.dimension.scope:null;a.align=a.dimension.align;if(a.dimension.flex>0){a.flex=a.flex||a.dimension.flex}else {a.width=a.width||a.dimension.width}}}else {a.focusable=!0;a.enableFocusableContainer=!0;b.preparePivotColumns(a.columns)}}},reconfigurePivot:function(a){var b=this.getMatrix();a=a||{};if(b){if(a.type&&b.type!==a.type){this.setMatrix(a)}else {b.reconfigure(a)}}else {this.setMatrix(a)}},doExpandCollapseTree:function(b,c){var a;for(a=0;a<b.length;a++){b[a].expanded=c;if(b[a].children){this.doExpandCollapseTree(b[a].children,c)}}},doExpandCollapse:function(f,e,b,d){var c=this.getMatrix(),a;if(!c){return}a=(f==='row'?c.leftAxis:c.topAxis).findTreeElement('key',e);if(!a){return}a=a.node;b=Ext.isDefined(b)?b:!a.expanded;if(b){a.expand(d)}else {a.collapse(d)}},setHeaderGroupVisibility:function(a){if(a.xgrouped){if(a.subTotal){a.setText(a.group.expanded?a.group.getTextTotal():Ext.String.format('<span class="'+this.groupCls+'">{0}</span>',a.group.name));if(!a.group.expanded){a.addCls(this.groupHeaderCollapsibleCls);a.addCls(this.groupHeaderCollapsedCls)}else {a.removeCls(this.groupHeaderCollapsibleCls);a.removeCls(this.groupHeaderCollapsedCls)}}else {a.setText(Ext.String.format('<span class="'+this.groupCls+'">{0}</span>',a.group.name));a.addCls(this.groupHeaderCollapsibleCls)}a.xexpandable=a.subTotal?!a.group.expanded:a.group.expanded;if(!a.group.expanded&&!a.subTotal||a.group.expanded&&a.subTotal&&this.getMatrix().colSubTotalsPosition==='none'){a.hide();return}}a.show();a.items.each(this.setHeaderGroupVisibility,this)},expandRow:function(b,a){this.doExpandCollapse('row',b,!0,a)},collapseRow:function(b,a){this.doExpandCollapse('row',b,!1,a)},expandCol:function(b,a){this.doExpandCollapse('col',b,!0,a)},collapseCol:function(b,a){this.doExpandCollapse('col',b,!1,a)},expandAll:function(){this.expandAllColumns();this.expandAllRows()},expandAllRows:function(){this.getMatrix().leftAxis.expandAll()},expandAllColumns:function(){this.getMatrix().topAxis.expandAll()},collapseAll:function(){this.collapseAllRows();this.collapseAllColumns()},collapseAllRows:function(){this.getMatrix().leftAxis.collapseAll()},collapseAllColumns:function(){this.getMatrix().topAxis.collapseAll()},setStore:function(b){var a=this.getMatrix();if(a&&a.type==='local'){a.initializeStore({store:b})}},getStore:function(){var a=this,b=a.getMatrix();return (b instanceof Ext.pivot.matrix.Local?b.store:a.originalStore)||a.store},getPivotStore:function(){return this.store},getTopAxisItem:function(d){var f=this,e=f.getMatrix(),b=e.getColumns(),c,a;if(!d){return null}for(a=0;a<b.length;a++){if(b[a].name===d.dataIndex){c=b[a].col;break}}return Ext.isEmpty(c)?null:e.topAxis.items.getByKey(c)},getLeftAxisItem:function(c){var b=this.getFeatureDataSource(),a;if(!c||!b){return null}a=b.storeInfo[c.internalId];return a?this.getMatrix().leftAxis.items.getByKey(a.leftKey):null},getFeatureDataSource:function(){var a=this.rendered?this.getView():null,b;if(!a){return}a=a.normalView||a;b=a.getFeature('group');return b?b.dataSource:null},onHeaderClick:function(f,a,e){var b=this,d=a.sortState?a.sortState==='ASC'?'DESC':'ASC':'ASC',c;if(e){e.stopEvent()}if(!a.xexpandable){c=b.getTopAxisItem(a);if(!b.enableColumnSort||!b.sortableColumns||c&&c.dimension&&!c.dimension.getSortable()){return}if((a.leftAxis||a.topAxis)&&!Ext.isEmpty(a.dataIndex)){if(b.getMatrix().leftAxis.sortTreeByField(a.dataIndex,d)){b.refreshView();b.updateColumnSortState(a,d)}}return !1}if(b.matrix.collapsibleColumns){b.doExpandCollapse('col',a.key)}return !1},updateColumnSortState:function(a,b){if(Ext.isString(a)){a=this.down('[dataIndex="'+a+'"]')}if(!a){return}a.setSortState(new Ext.util.Sorter({direction:b,property:'dummy'}));a.sortState=b;this.sortedColumn={dataIndex:a.dataIndex,direction:b}},getStateProperties:function(){return ['enableColumnSort','sortedColumn','startRowGroupsCollapsed','startColGroupsCollapsed']},applyState:function(a){var b=this,f=b.getStateProperties(),e=b.getMatrix(),d,c;for(d=0;d<f.length;d++){c=f[d];if(a[c]){b[c]=a[c]}}if(a.expandedItems){b.expandedItemsState=a.expandedItems}b.lastColumnsState=a.pivotcolumns||{};if(e){e.reconfigure(a.matrix)}else {b.setMatrix(a.matrix)}},getState:function(){var c={},f=this.getStateProperties(),b=this.getMatrix(),a,e,d;e=f.length;for(a=0;a<e;a++){c[f[a]]=this[f[a]]}c.expandedItems={cols:[],rows:[]};if(b){c.matrix=b.serialize();e=b.leftAxis.items.getCount();for(a=0;a<e;a++){d=b.leftAxis.items.getAt(a);if(d.expanded){c.expandedItems.rows.push(d.value)}}e=b.leftAxis.dimensions.getCount();for(a=0;a<e;a++){d=b.leftAxis.dimensions.getAt(a);c.matrix.leftAxis[a].id=d.getId()}e=b.topAxis.items.getCount();for(a=0;a<e;a++){d=b.topAxis.items.getAt(a);if(d.expanded){c.expandedItems.cols.push(d.value)}}}c.pivotcolumns=this.getPivotColumnsState();return c},getPivotColumnsState:function(){var c=this,a,b;if(!c.lastColumnsState){b=c.getDataIndexColumns(c.getMatrix().getColumnHeaders());c.lastColumnsState={};for(a=0;a<b.length;a++){if(b[a].dataIndex){c.lastColumnsState[b[a].dataIndex]={width:b[a].width,flex:b[a].flex||0}}}}b=c.getView().getGridColumns();for(a=0;a<b.length;a++){if(b[a].dataIndex){c.lastColumnsState[b[a].dataIndex]={width:b[a].rendered?b[a].getWidth():b[a].width,flex:b[a].flex||0}}}return c.lastColumnsState},getDataIndexColumns:function(b){var c=[],a;for(a=0;a<b.length;a++){if(b[a].dataIndex){c.push(b[a].dataIndex)}else {if(Ext.isArray(b[a].columns)){c=Ext.Array.merge(c,this.getDataIndexColumns(b[a].columns))}}}return c},restorePivotColumnsState:function(a){this.parsePivotColumnsState(this.getPivotColumnsState(),a)},parsePivotColumnsState:function(d,b){var c,a;if(!b){return}for(a=0;a<b.length;a++){c=d[b[a].dataIndex];if(c){if(c.flex){b[a].flex=c.flex}else {if(c.width){b[a].width=c.width}}}this.parsePivotColumnsState(d,b[a].columns)}},deprecated:{'6.2':{properties:{matrixConfig:null,viewLayoutType:'outline',rowSubTotalsPosition:'first',rowGrandTotalsPosition:'last',colSubTotalsPosition:'last',colGrandTotalsPosition:'last',textTotalTpl:'Total ({name})',textGrandTotalTpl:'Grand total',showZeroAsBlank:!1,leftAxis:null,topAxis:null,aggregate:null}}}});Ext.define('Bigmedia.model.User',{extend:Ext.data.Model,fields:[{name:'id',type:'string',defaultValue:'anonymous'},{name:'login'},{name:'name',type:'string',defaultValue:'Anonymous'},{name:'firstName',type:'string'},{name:'lastName',type:'string'},{name:'showPlanner',calculate:function(a){if(a.org){return a.org.showPlanner}return !1}},{name:'userPicture',type:'string'},{name:'accessToken',type:'string'},{name:'displayName',calculate:function(a){var b=a.name?a.name:(a.firstName?a.firstName:'')+(a.lastName?(a.firstName?' ':'')+a.lastName:'');return b}},{name:'email',type:'string'},{name:'address',type:'string'},{name:'loggedIn',type:'date'},{name:'regDate',type:'date'},{name:'providerId',type:'int'},{name:'actions'},{name:'orgId',type:'int'},{name:'org'},{name:'clientType',calculate:function(a){if(a.org){return a.org.clientType}}},{name:'orgName',calculate:function(a){if(a.org){return a.org.name}}},{name:'cityId',type:'int'},{name:'cityName',calculate:function(a){if(a.cityId){var b=Ext.getStore('Cities');return b.getById(a.cityId).get('name')}}},{name:'hasFacebookAccount',defaultValue:!1},{name:'isManager',calculate:function(a){var b=[3427,1641,9447,4786,4787,2181,1,2911,5382,1065,12713,10522,11728];return a.org&&a.orgId&&b.indexOf(+a.orgId)>=0}},{name:'defaultManagerId',calculate:function(a){if(a.isManager){return a.id}else {if(a.org&&a.org.managers&&a.org.managers.length>0){return a.org.managers[0].id}else {return 911}}}},{name:'hasLocalAccount',calculate:function(a){return a.login&&a.login!==''}},{name:'isRegistered',calculate:function(a){return a.id!=='anonymous'}},{name:'showHeatmap',calculate:function(a){if(a.org){return a.org.showHeatmap}return !1}},{name:'showMonitoring',calculate:function(a){let c=[3427,1641,9447,4786,4787,2181,1,2911,5382,1065,12713,10522,11728],b=a.org&&a.orgId&&c.indexOf(+a.orgId)>=0?1:0;return b}}],isRegistered:function(){return this.getId()!=='anonymous'},constructor:function(a,c){if(a){var b={};if(a.id!=='anonymous'){var f=Ext.util.LocalStorage.get('user'+a.id);if(!c){c=+f.getItem('providerId')}if(c===1&&a.tokens&&a.tokens.length>0){var e=a.tokens;if(e&&e.length>0){for(var d=0;d<e.length;d++){if(e[d].providerId==c){break}}if(d<e.length){b={name:a.tokens[d].displayName,email:a.tokens[d].email,pictureUrl:a.tokens[d].pictureUrl,profileId:a.tokens[d].profileId,token:a.tokens[d].token};c=1}}}else {b={name:a.name,email:a.emails&&a.emails.length>0?a.emails[0].email:''};c=2}var f=Ext.util.LocalStorage.get('user'+a.id);if(c){f.setItem('providerId',c)}f.release();b.hasFacebookAccount=a.tokens&&a.tokens.some(function(b){return b.providerId===1});b.id=a.id;b.orgId=a.orgId;b.providerId=c;b.origConfig=a;b.actions=a.actions;b.org=a.org;b.login=a.login;b.regDate=a.regDate;b.firstName=a.firstName;b.lastName=a.lastName;b.address=a.address;if(a.org&&a.org.showPlanner){b.actions['showPlanner']='showPlanner'}if(!b.pictureUrl){if(b.email){var g=md5(b.email.trim().toLowerCase());b.pictureUrl='https://www.gravatar.com/avatar/'+g+'?d=identicon'}else {b.pictureUrl='resources/images/anonymous.png'}}}else {b={id:'anonymous',name:'Anonymous',pictureUrl:'resources/images/anonymous.png'}}this.callParent([b])}else {this.callParent([])}},proxy:{type:'rest',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/auth/user',appendId:!1}});Ext.define('Bigmedia.model.Org',{extend:Ext.data.Model,fields:[{name:'id',type:'int'},{name:'logoBlob'}],proxy:{type:'rest',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/orgs',writer:{writeAllFields:!0}}});Ext.define('Bigmedia.Anonymous',{required:['Bigmedia.model.User'],extend:Bigmedia.model.User,singleton:!0,data:{id:0,displayName:'Anonymous',pictureUrl:'resources/anonymous-icon.png'}});Ext.define('Bigmedia.AutoPlan',{mixins:[Ext.mixin.Observable],required:['Bigmedia.Vars'],singleton:!0,algorithms:['MinPrice','MaxGRPDivPrice','MaxCoverage'],workers:[],busyWorkers:[],freeWorkers:[],nextId:0,constructor:function(a){this.mixins.observable.constructor.call(this,a)},listeners:{start:function(c,a,b){var d=this;d.startAutoPlan(c,a,b)},stop:function(){var a=this;a.stopAll()}},startAutoPlan:function(d,b,c){var a=this;a.params=c;a.cities=b;if(!a.pWorker){a.pWorker=new a.QueryableWorker(a,'packages/local/autoplan/prepare.min.js?ver='+Bigmedia.appVersion);a.pWorker.wid=a.getNextId();a.pWorker.addListener('citycompleted',a.cityPrepared)}a.pWorker.sendQuery('prepareFaces',d,b,c)},getNextId:function(){return this.nextId++},getCityWorker:function(){var b=this,a=b.freeWorkers.pop();if(!a){a=new b.QueryableWorker(b,'packages/local/autoplan/plancity.min.js?ver='+Bigmedia.appVersion);a.addListener('algorithmcompleted',b.algorithmCompleted);b.freeWorkers.push(a);b.workers.push(a)}return a},cityPrepared:function(b,c,d,e){var a=this;if(a.stopped){return}a.fireEventArgs('cityprepared',[b,c],a);a.busyWorkers.splice(a.busyWorkers.indexOf(a.pWorker),1);a.algorithms.forEach(function(g){var f=a.getCityWorker();a.freeWorkers.splice(a.freeWorkers.indexOf(f),1);f.sendQuery('getFacesByAlgorithm',a.cities[b],g,c,a.params,d);a.busyWorkers.push(f)})},algorithmCompleted:function(d,c,e,b){var a=this;if(a.stopped){return}a.busyWorkers.splice(a.busyWorkers.indexOf(b),1);a.freeWorkers.push(b);a.fireEventArgs('algorithmcompleted',[d,c,e],a)},stopAll:function(){var a=this;a.stopped=!0;a.pWorker.terminate();delete a.pWorker;while(a.busyWorkers.length>0){var b=a.busyWorkers.pop();b.terminate()}a.stopped=!1;a.fireEvent('terminated',a)},QueryableWorker:function(c,f,e,d){var a=this,b=new window.Worker(f);a.listeners={};a.handler=c;a.wid=c.getNextId();a.defaultListener=e||function(){};if(d){b.onerror=d}a.postMessage=function(a){b.postMessage(a)};a.terminate=function(){b.terminate()};a.addListener=function(g,b){a.listeners[g]=b};a.removeListener=function(b){delete a.listeners[b]};a.sendQuery=function(){if(arguments.length<1){throw new TypeError('QueryableWorker.sendQuery takes at least one argument');return}b.postMessage({'queryMethod':arguments[0],'queryMethodArguments':Array.prototype.slice.call(arguments,1)})};b.onmessage=function(b){if(b.data instanceof Object&&b.data.hasOwnProperty('queryMethodListener')&&b.data.hasOwnProperty('queryMethodArguments')){a.listeners[b.data.queryMethodListener].apply(a.handler,b.data.queryMethodArguments.concat(a))}else {a.defaultListener.call(a.handler,b.data)}}}});Ext.define('Bigmedia.GridExport',{singleton:!0,exportToExcel:function(a,m,g,j,r){function generateArray(q){var o=[];var n=q.querySelectorAll('tr');var h=[];for(var d=0;d<n.length;++d){var b=[];var s=n[d];var l=s.querySelectorAll('td');for(var k=0;k<l.length;++k){var i=l[k];var e=i.getAttribute('colspan');var f=i.getAttribute('rowspan');var c=i.innerText;if(c!==''&&c==+c){c=+c}h.forEach(function(c){if(d>=c.s.r&&d<=c.e.r&&b.length>=c.s.c&&b.length<=c.e.c){for(var e=0;e<=c.e.c-c.s.c;++e){b.push(null)}}});if(f||e){f=f||1;e=e||1;h.push({s:{r:d,c:b.length},e:{r:d+f-1,c:b.length+e-1}})}b.push(c!==''?c:null);if(e){for(var p=0;p<e-1;++p){b.push(null)}}}o.push(b)}return [o,h]}function datenum(b,c){if(c){b+=1462}var d=Date.parse(b);return (d-new Date(Date.UTC(1899,11,30)))/(24*60*60*1000)}function encode_row(b){return ''+(b+1)}function encode_col(b){if(b<0){throw new Error('invalid column '+b)}var c='';for(++b;b;b=Math.floor((b-1)/26)){c=String.fromCharCode((b-1)%26+65)+c}return c}function encode_cell(b){return encode_col(b.c)+encode_row(b.r)}function encode_range(b,c){if(typeof c==='undefined'||typeof c==='number'){return encode_range(b.s,b.e)}if(typeof b!=='string'){b=encode_cell(b)}if(typeof c!=='string'){c=encode_cell(c)}return b==c?b:b+':'+c}function sheet_from_array_of_arrays(i,c){var k={},h=[];var f={s:{c:10000000,r:10000000},e:{c:0,r:0}};for(var e=0;e!=i.length;++e){for(var d=0;d!=i[e].length;++d){if(f.s.r>e){f.s.r=e}if(f.s.c>d){f.s.c=d}if(f.e.r<e){f.e.r=e}if(f.e.c<d){f.e.c=d}var b={v:i[e][d]};if(b.v==null){continue}var l=encode_cell({c:d,r:e});if(typeof b.v==='number'){b.t='n'}else {if(typeof b.v==='boolean'){b.t='b'}else {if(b.v instanceof Date){b.t='n';b.z='m/d/yy';b.v=datenum(b.v)}else {if(b.v&&b.v.url){b.l={Target:b.v.url,Tooltip:b.v}}else {b.t='s'}}}}if(c.numIndex!==undefined){if(e>=c.headerRows&&e<c.headerRows+c.rowCount&&(c.addressIndex!==undefined&&c.addressIndex===d||c.addressIndex===undefined&&c.numIndex===d)){var n=Math.floor(i[e][c.numIndex]);b.l={Target:'http://www.bigmedia.ua/cgi/detside.pl?sn='+n,Tooltip:'Photo&amp;Schema'}}}if(e==0||c.headerRows!==undefined&&c.headerRows>e){b.s='2'}if(e>=c.headerRows&&e<c.headerRows+c.rowCount&&(c.occIndex!==undefined&&d>=c.occIndex&&d<c.occIndex+c.monsCount)){b.s='3'}if(h[d]===undefined){h[d]={}}if(b.v.length>0&&(h[d].wch===undefined||h[d].wch<b.v.length)){h[d].wch=b.v.length;h[d].bestFit=!0}k[l]=b}}h.forEach(function(b){if(b.wch&&b.wch>100){b.wch=100;b.bestFit=!1}});if(f.s.c<10000000){k['!ref']=encode_range(f)}if(c.addressIndex!==undefined){k['!cols']=h}return k}function Workbook(){if(!(this instanceof Workbook)){return new Workbook()}this.SheetNames=[];this.Sheets={}}function s2ab(c){var d=new ArrayBuffer(c.length);var e=new Uint8Array(d);for(var b=0;b!=c.length;++b){e[b]=c.charCodeAt(b)&255}return d}function sheet_from_array_of_cells(i){var h={},e=[];var c={s:{c:10000000,r:10000000},e:{c:0,r:0}};for(var d=0;d!=i.length;++d){for(var b=0;b!=i[d].length;++b){if(c.s.r>d){c.s.r=d}if(c.s.c>b){c.s.c=b}if(c.e.r<d){c.e.r=d}if(c.e.c<b){c.e.c=b}var f=i[d][b];if(!f||f.v==null){continue}var k=encode_cell({c:b,r:d});if(e[b]===undefined){e[b]={}}if(f.v.length>0&&(e[b].wch===undefined||e[b].wch<f.v.length)){e[b].wch=f.v.length;e[b].bestFit=!0}h[k]=f}}e.forEach(function(b){if(b.wch&&b.wch>100){b.wch=100;b.bestFit=!1}});if(c.s.c<10000000){h['!ref']=encode_range(c)}h['!cols']=e;return h}var t=a.getColumns(),b=[],i=[],x=!1,c=[],C=[],z,E=0,f,A,w,y,D=[],B=[];t.forEach(function(b){if(b.isVisible()&&b.text!=='&#160;'&&!b.ignoreExport){i.push(b)}});var k=a.getMapView&&a.getMapView()&&(a.getMapView().getMap().filterFaces.getActive()||!!r)&&a.getMapView().getMap().poiLayer.getSource().getFeatures().length>0;var d=0,f=[];if(a.getSelectionModel().getCount()>0){a.getSelection().forEach(function(b){if(b.get('parsedOccupancy')&&d<b.get('parsedOccupancy').length){f=b.get('parsedOccupancy');d=b.get('parsedOccupancy').length}})}else {a.getStore().each(function(b){if(b.get('parsedOccupancy')&&d<b.get('parsedOccupancy').length){f=b.get('parsedOccupancy');d=b.get('parsedOccupancy').length}})}function validURL(c){var b=new RegExp('^(https?:\\/\\/)?'+'((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+'((\\d{1,3}\\.){3}\\d{1,3}))'+'(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+'(\\?[;&a-z\\d%_.~+=-]*)?'+'(\\#[-a-z\\d_]*)?$','i');return !!b.test(c)}var e={};var q=function(d,h){var b=d.get('angle'),e=ol.proj.toLonLat(d.get('geometry').getCoordinates()),f=ol.proj.toLonLat(h.get('origObj').get('centroid').getCoordinates()),c=turf.bearingToAzimuth(turf.bearing(e,f));return b>=0&&b<=90&&c>=90-b&&c<=270-b||b>90&&b<270&&(c>=450-b||c<=270-b)||b>=270&&b<=360&&c<=630-b&&c>=450-b};function getRecordCells(b){var c=[];i.forEach(function(e){var d={};if(e.xtype==='datecolumn'){d.v=Ext.Date.format(b.get(e.dataIndex),e.format)}else {if(e.dataIndex){d.v=b.get(e.dataIndex)}else {d.v=null}}if(typeof d.v==='number'){d.t='n'}else {if(typeof d.v==='boolean'){d.t='b'}else {if(d.v instanceof Date){d.t='n';d.z='m/d/yy';d.v=datenum(d.v)}else {d.t='s'}}}if(e.dataIndex&&e.dataIndex.match(/address/i)&&b.get('supplier')&&(b.get('supplier').match(/bigmedia/i)||b.get('supplier').match(/-/i)||b.get('supplier').match(/-/i))){var f;if(b.sides&&b.sides.length>0){f=b.sides[0].num}else {if(b.get('supplierNo')){f=b.get('supplierNo')}}var h=b.get('faceId')||b.get('id_face')||b.getId();if(f){d.l={Target:'https://bma.bigmedia.ua/photohub/detface/'+h,Tooltip:'Photo&amp;Schema'}}}c.push(d)});var s=b.get('faceId')||b.get('id_face')||b.getId();if(b.get('supplier')&&b.get('supplier').match(/bigmedia/i)){var t;if(b.sides&&b.sides.length>0){t=b.sides[0].num}else {if(b.get('supplierNo')){t=b.get('supplierNo')}}if(t){c.push({v:Bigmedia.Locales.exportExcelPhotoText,s:'1',f:'HYPERLINK("https://bma.bigmedia.ua/photohub/face/'+s+'", "'+Bigmedia.Locales.exportExcelPhotoText+'")'});c.push({v:Bigmedia.Locales.exportExcelSchemaText,s:'1',f:'HYPERLINK("https://bma.bigmedia.ua/photohub/schema/'+s+'", "'+Bigmedia.Locales.exportExcelSchemaText+'")'})}else {c.push({v:null});c.push({v:null})}}else {if(b.get('urlPhoto')&&validURL(b.get('urlPhoto'))){c.push({v:Bigmedia.Locales.exportExcelPhotoText,s:'1',f:'HYPERLINK("https://bma.bigmedia.ua/photohub/face/'+s+'", "'+Bigmedia.Locales.exportExcelPhotoText+'")'});if(b.get('urlSchema')&&validURL(b.get('urlSchema'))){c.push({v:Bigmedia.Locales.exportExcelSchemaText,s:'1',f:'HYPERLINK("'+b.get('urlSchema')+'", "'+Bigmedia.Locales.exportExcelSchemaText+'")'})}else {c.push({v:null})}}else {if(b.get('doorsNo')||b.get('doors_no')){var x=b.get('doorsNo')||b.get('doors_no');c.push({v:Bigmedia.Locales.exportExcelPhotoText,s:'1',f:'HYPERLINK("https://bma.bigmedia.ua/photohub/doors/'+x+'", "'+Bigmedia.Locales.exportExcelPhotoText+'")'});c.push({v:null})}else {c.push({v:null});c.push({v:null})}}}if(k){var f,o;var h;f=a.getMapView().getMap().poiLayer.getSource().getClosestFeatureToCoordinate(b.get('geometry').getCoordinates(),function(c){return c.getGeometry().getType()==='Point'&&(!a.getMapView().getMap().getBeforePoi()||q(b,c))});if(f){h=turf.distance(ol.proj.toLonLat(b.get('geometry').getCoordinates()),ol.proj.toLonLat(f.get('geometry').getCoordinates()),{units:'kilometers'});o=f.get('geometry')}a.getMapView().getMap().poiLayer.getSource().getFeatures().forEach(function(c){if(c.getGeometry().getType()==='LineString'){var k=Bigmedia.Vars.convertOlToTurf(c.getGeometry()),i=Bigmedia.Vars.convertOlToTurf(b.get('geometry'));var d=turf.nearestPointOnLine(k,i,{units:'kilometers'});if(h===undefined||d.properties.dist<h){f=c;o=Bigmedia.Vars.convertTurfToOl(d.geometry);h=d.properties.dist}}else {if(c.getGeometry().getType()!=='Point'){var e=turf.distance(ol.proj.toLonLat(b.get('geometry').getCoordinates()),ol.proj.toLonLat(c.get('origObj').get('centroid').getCoordinates()),{units:'kilometers'});if(h===undefined||e<h){f=c;o=f.get('origObj').get('centroid');h=e}}}});if(f){c.push({v:f.get('origObj').get('name'),l:{Target:'https://www.google.com/maps/dir/'+ol.proj.toLonLat(b.get('geometry').getCoordinates()).reverse().join(',')+'/'+ol.proj.toLonLat(o.getCoordinates()).reverse().join(','),Tooltip:'Powered by Bigmedia Assistant (https://bma.bigmedia.ua)'}});distance=Math.round(h*1000);c.push({v:distance,t:'n'})}else {c.push({v:null});c.push({v:null})}}if(j){var v=b.get('parsedOccupancy');for(var u=0;u<d;u++){var p=v?v[u]:null;if(!p){c.push({v:null});continue}var l,w=typeof p.monthStatus==='function'?p.monthStatus():p.monthStatus,n;switch(w){case 'r':l=Bigmedia.Locales.occReserved;n=7;break;case 't':l=Bigmedia.Locales.occTempReserved;n=6;break;case 's':l=Bigmedia.Locales.occSold;n=5;break;case 'f':l=Bigmedia.Locales.occFree;n=4;break;case 'd':l=Bigmedia.Locales.occDemounted;n=8;break;default:l=Bigmedia.Locales.occUnknown;n=9;}c.push({v:l.slice(0,1).toLowerCase(),s:n.toString()});e[w]=l}}return c}var o=[];i.forEach(function(b,d){c.push({v:b.text,s:'2'})});c.push({v:Bigmedia.Locales.exportExcelPhotoText,s:'2'});c.push({v:Bigmedia.Locales.exportExcelSchemaText,s:'2'});if(k){c.push({v:'POI name',s:'2'});c.push({v:'Distance (m)',s:'2'})}if(j){f.forEach(function(b){c.push({v:Ext.Date.monthNames[b.month]+"'"+b.year.toString().slice(-2),s:'2'})})}b.push(c);if(a.getSelectionModel().getCount()>0){a.getSelection().forEach(function(c){b.push(getRecordCells(c))})}else {a.getStore().each(function(c){b.push(getRecordCells(c))})}b.push([{v:null}]);if(Object.keys(e).length>0){b.push([{v:null},{v:null},{v:null},{v:Bigmedia.Locales.exportExcelStatusDescription}]);Object.keys(e).forEach(function(c){b.push([{v:null},{v:null},{v:null},{v:e[c].slice(0,1).toLowerCase()+' - '+e[c]}])})}b.push([{v:null}]);var v=new Date();b.push([{v:null},{v:null},{v:null},{v:Bigmedia.Locales.exportExcelDateGenerated+Ext.Date.format(v,'d.m.Y H:i:s')}]);var n='Bigmedia';var h=new Workbook(),p=sheet_from_array_of_cells(b);if(o.length>0){p['!merges']=o}h.SheetNames.push(n);h.Sheets[n]=p;var s=typeof Worker!=='undefined';if(!s){var u=XLSX.write(h,{bookType:'xlsx',bookSST:!1,type:'array'});saveAs(new Blob([u],{type:'application/octet-stream'}),m);if(g){g()}}else {var l=new window.Worker('packages/local/xlsx/xlsxworker.js');l.onmessage=function(b){switch(b.data.t){case 'ready':break;case 'error':console.error(b.data.d);break;case 'xlsx':var c=b.data.d;saveAs(new Blob([c],{type:'application/octet-stream'}),m);if(g){g()};break;}};l.postMessage({wb:h})}}});Ext.define('Bigmedia.Vars',{mixins:[Ext.mixin.Observable],required:['Bigmedia.model.User','Bigmedia.view.user.UserContainerWrap','Bigmedia.view.dialog.DlgPriceEncryption'],RANDOM_HASH:'HRtuEoJfSu5pMLVZNQVo5CLPUHBdyTGnEPPynviX',config:{user:null,curCamp:null,publishedUrl:'http://probillboard.com/Presenter/?uuid=',promocode:null,defaultRulesGroup:null,currentRulesGroup:null,showKSHitmap:!1},singleton:!0,coverageDays:[1,3,7,15,30],jsonReader:new jsts.io.GeoJSONReader(),jsonWriter:new jsts.io.GeoJSONWriter(),olFormat:new ol.format.GeoJSON(),cacheOccupancies:{},processObject:function(d,c){const b=a=>a&&typeof a==='object'&&!Array.isArray(a)&&!(a instanceof Date);const a=f=>{var e={};Object.entries(f).forEach(function(h){var i=h[0],g=h[1];e[i]=b(g)?a(g):c(g)});return e};return a(d||{})},readFeatureGeometry:function(b){try{var c=this,a=JSON.parse(b);if(a.type==='Circle'){return new ol.geom.Circle(a.center,a.radius)}else {return c.olFormat.readGeometry(b)}}catch(d){console.log('error readingFeatureGeometry');console.log(d)}},writeFeatureGeometry:function(a){var b=this;if(typeof a!='object'||!a.getType){return ''}if(a.getType()==='Circle'){return JSON.stringify({type:'Circle',center:a.getCenter(),radius:a.getRadius()})}else {return b.olFormat.writeGeometry(a)}},hashPwd:function(a){try{return CryptoJS.MD5(a).toString()}catch(b){return null}},updateFacesFinalPrice:function(){var d=this,b=Ext.getStore('Faces'),a=d.getCurrentRulesGroup();b.beginUpdate();Ext.suspendLayouts();b.suspendEvents();var c=b.getData().getSource()||b.getData();c.each(function(b){var c={faceId:b.getId(),netCost:a?a.getFaceMonthPrice(b.getData()):b.get('price')};b.set({finalPrice:a?a.getFaceMonthPrice(b.getData()):b.get('price'),clientPrice:a?a.getFaceMonthClientPrice(c):b.get('price')},{commit:!0})});b.resumeEvents();Ext.resumeLayouts(!0);b.endUpdate()},updateCurrentRulesGroup:function(b,c){var a=this;if(Ext.getStore('Faces')&&Ext.getStore('Faces').isLoaded()){a.updateFacesFinalPrice()}a.fireEventArgs('discountgroupchanged',[b,c])},updateDefaultRulesGroup:function(b,d){var c=this,a=Ext.util.LocalStorage.get('user'+c.getUser().getId());if(!b){a.removeItem('default_RulesGroupId');a.release();return}if(a.getItem('default_RulesGroupId')!==b.getId()){a.setItem('default_RulesGroupId',b.getId())}a.release()},getPubPassphrase:function(b){var e=this,c=Ext.util.LocalStorage.get('user'+e.getUser().getId());var d=b?c.getItem('salt_pubCampaign'+b):null;var a;if(d){a=e.decryptSalt(d)}c.release();return a},setPubPassphrase:function(c,a){var d=this,b=Ext.util.LocalStorage.get('user'+d.getUser().getId());if(!c&&a){b.removeItem('salt_pubCampaign'+a);b.release();return}var e=d.encryptSalt(c);if(a){b.setItem('salt_pubCampaign'+a,e)}b.release()},showPubPriceEncryptDialog:function(a,b){if(!a){return}var c=this,d=Ext.create('Bigmedia.view.dialog.DlgPriceEncryption',{hideSaveGlobal:!0,listeners:{success:function(d){if(d){c.setPubPassphrase(d,a)}if(b){Ext.callback(b,c)}}}});d.show()},showPriceEncryptDialog:function(b,c){var a=this,d=Ext.create('Bigmedia.view.dialog.DlgPriceEncryption',{listeners:{success:function(d,e){if(d){if(e){if(b){a.setSalt(null,b)}a.setSalt(d)}else {a.setSalt(d,b)}}if(c){Ext.callback(c,a)}}}});d.show()},getSalt:function(d){var b=this;if(!b.getUser()){return null}var a=Ext.util.LocalStorage.get('user'+b.getUser().getId());var e=d?a.getItem('salt_campaign'+d)||a.getItem('salt_global'):a.getItem('salt_global');var c;if(e){c=b.decryptSalt(e)}a.release();return c},encryptSalt:function(b){var a=CryptoJS.AES.encrypt(b,this.RANDOM_HASH);return a?a.toString():null},decryptSalt:function(c){var b;var a=CryptoJS.AES.decrypt(c,this.RANDOM_HASH);if(a&&a.words&&a.words.length){b=a.toString(CryptoJS.enc.Utf8)}return b},encryptPrice:function(c,b){if(!b||!c){return null}var a=CryptoJS.AES.encrypt(b.toString(),c);return a?a.toString():null},decryptPrice:function(d,b){if(!b||!d){return null}var c;var a=CryptoJS.AES.decrypt(b,d);if(a&&a.words&&a.words.length){try{c=a.toString(CryptoJS.enc.Utf8)}catch(e){return null}}return +c},setSalt:function(d,b){var e=this,a=Ext.util.LocalStorage.get('user'+e.getUser().getId());if(!d&&b){a.removeItem('salt_campaign'+b);a.release();return}var c=e.encryptSalt(d);if(b){a.setItem('salt_campaign'+b,c)}else {a.setItem('salt_global',c)}a.release()},updatePromocode:function(a,b){var c=this,e=Ext.getStore('Faces');var d=a&&a.discount?a.discount:0;c.fireEventArgs('promocodechanged',[a,b])},convertOlToTurf:function(a){if(!a){return null}var b;try{switch(a.getType()){case 'Point':b=turf.point(ol.proj.toLonLat(a.getCoordinates()));break;case 'LineString':b=turf.lineString(a.getCoordinates().map(function(b){return ol.proj.toLonLat(b)}));break;case 'Circle':var c=ol.geom.Polygon.fromCircle(a);b=turf.polygon(c.getCoordinates().map(function(b){return b.map(function(c){return ol.proj.toLonLat(c)})}));break;default:b=turf.polygon(a.getCoordinates().map(function(b){return b.map(function(c){return ol.proj.toLonLat(c)})}));}}catch(d){console.error('Error converting geometry from ol to turf')}finally{}return b?b.geometry:null},getOlGeometryCentroid:function(a){var c=this,b=null;switch(a.getType()){case 'Point':b=a;break;case 'Circle':b=new ol.geom.Point(a.getCenter());break;default:var d=c.convertOlToTurf(a),e=turf.centroid(d);b=c.convertTurfToOl(e.geometry);}return b},convertTurfToOl:function(a){if(!a){return null}return a.type==='Polygon'?new ol.geom.Polygon(a.coordinates.map(function(b){return b.map(function(c){return ol.proj.fromLonLat(c)})})):a.type==='LineString'?new ol.geom.LineString(a.coordinates.map(function(b){return ol.proj.fromLonLat(b)})):a.type==='Point'?new ol.geom.Point(ol.proj.fromLonLat(a.coordinates)):null},convertJstsToTurf:function(a){var d=this;var b=d.jsonWriter.write(a);var c=turf.feature(b);return c},convertJstsToOl:function(f,d){var a=this;var c=a.jsonWriter.write(f);var b={featureProjection:d};var e=a.olFormat.readFeature(c,b);return e},convertTurfToJsts:function(a){var c=this;var b=c.jsonReader.read(a.geometry);return b},getRadius:function(b,e,c){var f=this;var d=e||0.01;var a=Math.sqrt(2*b*d/(100*Math.PI*1.6));if(c>0){a=Math.sqrt(2*b*Math.log(Math.pow(f.coverageDays[c],Math.E))/(Math.PI*100*1.6)+Math.pow(a,2))}return a},getCoverages:function(a,o,r,c){var e=this,n=Ext.getStore('CityBoundaries');var k=r||0.01;if(a&&k&&a.length===2){if(!a[0]||!a[1]){return null}var g=[];var l=n.getById(o),d=0;if(l){d=l.get('area')}if(!d){return null}var q=e.coverageDays;for(var f=0;f<q.length;f++){var p=e.getRadius(d,k,f);if(!c||c==='NULL'){c=0}var i=turf.point(a);var j=turf.circle(i,p/1000,{steps:16,units:'kilometers'});var b;var h=c*-1+90;b=turf.polygon([j.geometry.coordinates[0].slice(0,9).concat([j.geometry.coordinates[0][0]])]);if(h!==0){b=turf.transformRotate(b,h,{pivot:i})}var m=e.convertTurfToJsts(turf.truncate(b));g.push(m)}return g}else {console.log('no coords: %o',a);return null}},calculateFaceCoverages:function(a){var b=a.get('coverages');if(!b){b=this.getCoverages([parseFloat(a.get('lon')),parseFloat(a.get('lat'))],a.get('id_city'),a.get('grp'),a.get('angle'));a.set('coverages',b,{commit:!0,silent:!0})}return b},calculateCoverages:function(a){try{if(a&&a.lon&&a.lat){return this.getCoverages([parseFloat(a.lon),parseFloat(a.lat)],a.cityId,a.grp,a.angle)}else {return null}}catch(b){console.error('error calculate coverage: %o',a);return null}},constructor:function(b){var a=this;a.mixins.observable.constructor.call(a,b);a.initConfig(b)},getViewport:function(){return Ext.ComponentQuery.query('mainviewport')[0]},updateCurCamp:function(a,b){this.fireEvent('curcampchanged')},updateShowKSHitmap:function(a,b){this.showKSHitmap=a;this.fireEvent('showKSHitmap',a)},getShowKSHitmap:function(){return this.showKSHitmap},updateUser:function(a,b){var k=Ext.getCmp('mainViewport'),j=k.getReferences(),d=j.mainCardPanel,g=d.child('component[routeId=faces]'),f=b?d.child('component[restrictedArea='+b.get('id')+']'):null;if(b&&b.get('id')!=='anonymous'&&!b.phantom&&(!a||a.phantom||a.get('id')==='anonymous')){Ext.getCmp('mainViewport').getController().redirectTo('faces');if(g){d.setActiveItem(g)}Ext.toast(Bigmedia.Locales.varsLoggedOutToastText);this.taglog('user logged out',{userId:b.get('id')})}if(b&&b.get('id')!=='anonymous'&&!b.phantom){if(f&&(!a||a.get('id')==='anonymous'||b.get('id')!==a.get('id'))){f.destroy()}}if(a){if(a.get('id')!=='anonymous'&&!a.phantom){Ext.getCmp('mainViewport').getController().getRestrictedArea();var e=Ext.util.LocalStorage.get('user'+a.getId()),i=Ext.getStore('RulesGroups');if(e.getItem('default_RulesGroupId')){var h=i.getById(e.getItem('default_RulesGroupId'));this.setDefaultRulesGroup(h)}e.release();this.taglog('user logged in',{userId:a.get('id')})}else {this.setDefaultRulesGroup(null)}}Ext.getCmp('mainViewport').getViewModel().set('user',a);var c='Anonymous';if(a){if(a.get('orgId')&&[1,2181,2911,3427,9447].indexOf(+a.get('orgId'))>=0){c='Bigmedia'}else {switch(+a.get('clientType')){case 474:c='Network Agency';break;case 475:c='Agency';break;default:c='Direct Client';}}this.pushToDataLayer({'userOrgName':a.get('orgName')})}else {this.pushToDataLayer({'userOrgName':null})}this.pushToDataLayer({'userOrgType':c});if(a&&a.get('id')!=='anonymous'&&!a.phantom){this.pushToDataLayer({'event':'userLoggedIn'})}else {if(b&&b.get('id')!=='anonymous'&&!a.phantom){this.pushToDataLayer({'event':'userLoggedOut'})}}this.fireEventArgs('userchanged',[a])},pushToDataLayer:function(a){if(window.dataLayer){window.dataLayer.push(a)}},loadUserConfig:function(a,d){var f;if(a.id!='anonymous'){var e=Ext.util.LocalStorage.get('user'+a.id);if(!d){d=e.getItem('providerId')}else {e.setItem('providerId',d)}e.release();if(d!==2){var c=a.tokens;if(c&&c.length>0){for(var b=0;b<c.length;b++){if(c[b].providerId==1){break}}if(b<c.length){f={id:a.id,name:a.tokens[b].displayName,email:a.tokens[b].email,pictureUrl:a.tokens[b].pictureUrl,profileId:a.profileId}}}}}else {f={id:'anonymous',name:'Anonymous',pictureUrl:'resources/images/anonymous.png'}}},loadUser:function(b){var c=this;var a=new XMLHttpRequest();a.open('GET','/api/v1/auth/user');a.onreadystatechange=function(){if(a.readyState!=4){return}if(a.status!=200){console.log('Request auth/user error, status: '+a.statusText);Bigmedia.Vars.setUser(Ext.create('Bigmedia.model.User',{id:'anonymous'}));if(b){b()}}else {var d=JSON.parse(a.responseText),c;if(d){c=Ext.create('Bigmedia.model.User',d)}else {c=Ext.create('Bigmedia.model.User',{id:'anonymous'})}Bigmedia.Vars.setUser(c);if(b){b()}}};a.send()},logoutUser:function(b){var a=new XMLHttpRequest();a.open('POST','/api/v1/auth/logout');a.onreadystatechange=function(){if(a.readyState!=4){return}if(a.status!=200){Ext.Msg.alert('Logout error','Status: '+a.statusText)}else {Bigmedia.lib.provider.Facebook.logout();var c=Ext.create('Bigmedia.model.User',{id:'anonymous'});Bigmedia.Vars.setUser(c);if(b){b()}}};a.send()},buildUrl:function(a){var b=this;if(this.getUser()&&this.getUser().get('id')!=='anonymous'){return '/user/'+this.getUser().get('id')+'/'+a}else {return a}},getFacesByPeriod:function(a){var g=a.startDate,l=a.endDate,k=!!a.wholePeriod,j=a.minFreeDays||15,i=!!a.allowTempRes,e=new Date(),m=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()+1)),d={};var f=Math.round((g-m)/(3600*24*1000)),c=Math.round((l-g)/(3600*24*1000));var n,o=/(\d+)(\w)/g;var b=a.store.getData();if(b.filtered){b=b.getSource()}var h=new RegExp('^.{'+f+(k?'':','+(f+c-j))+'}('+(i?'[tf]':'f')+'{'+c+'})');b.each(function(e){var b=e.get('occByDays');if(!b){d[e.getId()]=c}else {if(h.test(b)){d[e.getId()]=h.exec(b)[1].length}}});return d},getFaceApproxCells:function(a){var c=this,d=a.getData(),b=c.getFaceDataApproxCells(a);a.set({cells:b},{silent:!0});return b},isInsideCircle:function(a,b,c){return turf.distance(a,c)<=b/1000},inSector:function(d,a,e){var b=turf.bearing(d,e);var c;if(a>=0&&a<=90){c=b>=-90-a&&b<=90-a}else {if(a>=270){c=b>=270-a&&b<=270+180-a}else {c=b<90-a||b>a-90}}return c},getPeriodText:function(g,h,p){if(p){return ' '}if(!g||!h){return ''}if(!(g instanceof Date)||!(h instanceof Date)){return g+' - '+h}var e='';var c=Ext.Date.clearTime(g,!0),d=Ext.Date.clearTime(h,!0),m=c.getFullYear(),l=c.getMonth(),r=c.getDate(),k=d.getFullYear(),j=d.getMonth(),q=d.getDate(),f=m===k,i=l===j,n=Ext.Date.isEqual(c,Ext.Date.getFirstDateOfMonth(c)),o=Ext.Date.isEqual(d,Ext.Date.getLastDateOfMonth(d));if(r===1&&l===0&&q===31&&j===11){e=m.toString();if(f){e+=' '}else {e+=' - '+k.toString()+' '}}else {var a,b='';if(!n||!o){a='d';b='d';if(!f||!i){a+=' M';if(!f){a+=" 'y"}}b+=" M 'y"}else {if(!f||!i){a='M';b='M';if(!f){a+=" 'y"}}else {b='F'}b+=" 'y"}e=a?Ext.Date.format(c,a)+' - ':'';e+=Ext.Date.format(d,b)}return e},getTimeAgo:function(){},getFaceDataApproxCells:function(u){var k=this,a=u.getData();if(a.cells){return a.cells}var c=0.1,s=2;var b=Ext.getStore('CityBoundaries').getById(a['id_city']);if(!b){return []}if(parseFloat(a.lon)&&parseFloat(a.lat)){var d=[parseFloat(a.lon),parseFloat(a.lat)],p=a.pos;if(+p!==0){var n=[p*5.0E-5,0],r=a.angle*Math.PI/180;ol.coordinate.rotate(n,r);ol.coordinate.add(d,n)}var v=a.grp;var j=k.getRadius(b.get('area'),v,s);var l=Math.round(2*j/1000/c);var q=l;var i=turf.destination(d,j*Math.SQRT2/1000,-135);var g=Math.round(turf.distance([b.get('bbox')[0],b.get('bbox')[1]],[i.geometry.coordinates[0],b.get('bbox')[1]])/c);if(g<0){g=0}var h=Math.round(turf.distance([b.get('bbox')[0],b.get('bbox')[1]],[b.get('bbox')[0],i.geometry.coordinates[1]])/c);if(h<0){h=0}var t=Math.round(b.get('x')/c);var o=[];for(var f=0;f<q;f++){for(var e=0;e<l;e++){var m=turf.destination(turf.destination(i,e*c+c/2,90),f*c+c/2,0);if(k.isInsideCircle(d,j,m.geometry.coordinates)&&k.inSector(d,a.angle,m.geometry.coordinates)){o.push((f+h)*t+e+g)}}}return o}else {return []}},taglog:function(c,b){var a=this;if(b){b.site='bma'}else {b={site:'bma'}}if(a.taglogqueue&&a.taglogqueue[c]){Ext.undefer(a.taglogqueue[c])}if(!a.taglogqueue){a.taglogqueue={}}a.taglogqueue[c]=Ext.defer(a.sendTaglog,1000,a,[c,b])},sendTaglog:function(b,a){fetch('/api/v1/taglog',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tag:b,params:a})}).then()},toastSuccess:function(a){this.showToast(a,'x-fa fa-check bm-green')},toastFailure:function(a){this.showToast(a,'x-fa fa-exclamation bm-red')},showToast:function(d,b,c){var a='';if(b){if(c){a='<font color="'+c+'"><i class = "'+b+'"></i></font>&nbsp;&nbsp;'}else {a='<i class = "'+b+'"></i>&nbsp;&nbsp;'}}a+=d;Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400})},QueryableWorker:function(f,e,d){var a=this,b=new window.Worker(f),c={};a.defaultListener=e||function(){};if(d){b.onerror=d}a.postMessage=function(a){b.postMessage(a)};a.terminate=function(){b.terminate()};a.addListener=function(b,a){c[b]=a};a.removeListener=function(a){delete c[a]};a.sendQuery=function(){if(arguments.length<1){throw new TypeError('QueryableWorker.sendQuery takes at least one argument');return}b.postMessage({'queryMethod':arguments[0],'queryMethodArguments':Array.prototype.slice.call(arguments,1)})};b.onmessage=function(b){if(b.data instanceof Object&&b.data.hasOwnProperty('queryMethodListener')&&b.data.hasOwnProperty('queryMethodArguments')){c[b.data.queryMethodListener].apply(a,b.data.queryMethodArguments)}else {a.defaultListener.call(a,b.data)}}}});Ext.define('Bigmedia.carousel.CarouselContainer',{extend:Ext.container.Container,xtype:'carousel',layout:{type:'hbox',align:'stretch'},defaults:{flex:1},config:{single:!0},initComponent:function(){var a=this;a.callParent(arguments);a.on('add',a.itemsAdd,a,{buffer:20});a.on('remove',a.itemRemove,a);a.on('afterlayout',function(c,b){a.el.first().setTop(0)});a.on('childmove',function(b,a){console.log('childmove')})},itemsAdd:function(){var a=this;a.syncSizeToOwner();a.setSingle(a.items.items.length<=1);a.currentItem=a.items.items[0];a.showChild(a.currentItem)},itemRemove:function(){var a=this;a.setSingle(a.items.items.length<=1)},onDocMouseup:function(f){var a=this;a.drag=!1;var e=a.items.items;var d=a.ownerCt.el.getLeft();var c=1000000;var b;Ext.each(e,function(a,e){l=Math.abs(a.el.getLeft()-d);if(l<c){c=l;b=a}});a.showChild(b);f.stopEvent()},onMousedown:function(c){c.stopEvent();var a=this;a.drag=!0;a.startX=c.getX();var b=a.el.first();b.on({mousemove:function(d){d.stopEvent();if(a.drag){var e=1;if(b.getLeft()>a.ownerCt.el.getLeft()||b.getRight()<a.ownerCt.el.getRight()){e=2}b.move('l',(a.startX-d.getX())/e,!1);a.startX=d.getX()}}})},syncSizeToOwner:function(){var a=this;if(a.ownerCt&&a.ownerCt.el){a.setSize(a.ownerCt.el.getWidth()*a.items.items.length,a.ownerCt.el.getHeight())}},showChild:function(b){if(!b){return}var a=this,c=b.el.getLeft()-a.el.getLeft();a.el.first().move('l',c,!0);a.currentItem=b;a.fireEvent('itemchange',a,b)},nextChild:function(){var a=this;var b=a.currentItem.nextSibling();a.showChild(b||a.items.items[0])},previousChild:function(){var a=this;var b=a.currentItem.previousSibling();a.showChild(b||a.items.items[a.items.items.length-1])},onRender:function(){var a=this;a.currentItem=a.items.items[0];if(a.ownerCt){a.relayEvents(a.ownerCt,['resize'],'owner');a.on({ownerresize:a.syncSizeToOwner})}a.mon(Ext.fly(a.el.dom),'mouseup',a.onDocMouseup,a);a.mon(Ext.fly(a.el.dom),'mousedown',a.onMousedown,a);a.callParent(arguments)}});Ext.define('Bigmedia.carousel.CarouselToolbar',{extend:Ext.toolbar.Toolbar,xtype:'bmcarouseltoolbar',directionals:!0,style:{'background-color':'transparent !important'},initComponent:function(){var a=this;a.items=[{xtype:'tbfill'},{xtype:'tbfill'}];a.callParent(arguments)},handleCarouselEvents:function(b){var a=this;a.relayEvents(b,['itemchange','add'],'carousel');a.on('carouselitemchange',a.onCarouselChange,a,{buffer:20});a.on('carouseladd',a.onCarouselItemsAdd,a,{buffer:20})},onCarouselItemsAdd:function(){this.initSprites();this.down('draw').getSurface().renderFrame()},initSprites:function(){var a=this,g=a.items.indexOf(a.down('tbfill')),d=[],f=0,b=5,c=0,e=a.down('draw');if(e){a.remove(e,!0)}Ext.each(a.ownerCt.down('carousel').items.items,function(e){var a={type:'circle',cx:f+b,cy:b,index:c,r:b,fillStyle:'#5fa2dd',fillOpacity:c==0?0.8:0.4,group:'carousel'};d.push(a);f+=5+b*2;c++});a.insert(g+1,{plugins:['spriteevents'],xtype:'draw',height:b*2+1,width:c*(b*2+5)-4,sprites:d,style:{'background':'transparent'},bodyStyle:{background:'transparent'},listeners:{spriteclick:function(d,e){var b=d&&d.sprite;if(b){b.setAttributes({fillOpacity:0.4},!0);var c=a.ownerCt.down('carousel');c.showChild(c.items.items[b.index]);b.getSurface().renderFrame()}},spritemouseover:function(a,c){var b=a&&a.sprite;if(b){}},spritemouseout:function(a,c){var b=a&&a.sprite;if(b){}}}})},onCarouselChange:function(c,d){var b=this;var a=b.down('draw').getSprites();a.forEach(function(a){a.setAttributes({fillOpacity:0.4},!0)});var e=c.items.indexOf(d);Ext.each(a,function(a){if(a.index==e){a.setAttributes({fillOpacity:0.8},!0)}});b.down('draw').getSurface().renderFrame()},onRender:function(){var a=this;var d={iconCls:'x-fa fa-chevron-left',handler:function(){a.ownerCt.down('carousel').previousChild()}};var c={iconCls:'x-fa fa-chevron-right',handler:function(){a.ownerCt.down('carousel').nextChild()}};Ext.suspendLayouts();if(a.directionals){a.insert(0,d);a.insert(a.items.items.length,c)}this.initSprites();Ext.resumeLayouts();var b=a.ownerCt.down('carousel');if(b){a.handleCarouselEvents(b)}a.callParent(arguments)}});Ext.define('Bigmedia.component.AutoPlanCityParamsController',{extend:Ext.app.ViewController,alias:'controller.autoplancityparams',onParamsChange:function(c){var a=this;var b=Ext.merge(a.getView().getParams(),c);a.getView().setParams(b)},onSaveSplitsClick:function(a){var c=this,b=c.getView();b.getParams().oData=a.oData;b.getParams().sData=a.sData;c.getViewModel().set('hasSplits',!!a.oData||!!a.sData)}});Ext.define('Bigmedia.component.AutoPlanCityParams',{extend:Ext.container.Container,alias:'widget.autoplancityparams',controller:'autoplancityparams',config:{city:null,params:null,cityRec:null,hideParams:!1},updateCity:function(a){this.getViewModel().set('city',a)},updateCityRec:function(a){this.getViewModel().set('cityRec',a)},updateHideParams:function(a){this.getViewModel().set('hideParams',a)},viewModel:{data:{city:null,budget:null,count:null,coverage:null,hasSplits:!1,cityRec:null,hideParams:!1}},layout:'anchor',defaults:{anchor:'100%'},margin:'20px 0 10px 0',items:[{layout:{type:'hbox',align:'stretch'},items:[{bind:{html:'<span style="font-weight: bold; font-size: 12px; line-height: 13px">{city}</span>',margin:'10px 0 0 0'},flex:1},{xtype:'button',iconCls:'x-fa fa-sliders-h',bind:{text:'<div style="margin-top: -4px; font-size: 13px">{hasSplits ? "": "&nbsp"}</div>',hidden:'{hideParams}'},handler:function(){var a=this.up('autoplancityparams'),d=a.getViewModel(),c=d.get('city');var b=Ext.create('Bigmedia.view.dialog.DlgAutoPlanSplit');b.setCity(c);b.setParams(a.getParams());b.on('saveclick',a.getController().onSaveSplitsClick,a.getController());b.show()}}]},{layout:{type:'hbox',align:'stretch'},defaults:{labelAlign:'top',hideTrigger:!1,allowDecimals:!1},items:[{xtype:'customnumberfield',fieldLabel:'',labelStyle:'z-index: 1',step:1000,ui:'plannerfield',grow:!0,flex:1,minValue:0,bind:'{cityRec.budget}',triggers:{hryvnia:{cls:'x-fa fa-hryvnia'}}},{xtype:'customnumberfield',fieldLabel:'- ',labelStyle:'z-index: 1',ui:'plannerfield',padding:'0 0 0 10px',grow:!0,step:1,width:100,bind:'{cityRec.quantity}',minValue:1,maxValue:999},{xtype:'customnumberfield',fieldLabel:'',labelStyle:'z-index: 1',ui:'plannerfield',padding:'0 0 0 10px',grow:!0,step:1,width:100,bind:'{cityRec.coverage}',minValue:1,maxValue:100,triggers:{percent:{weight:-1,cls:'x-fa fa-percent'}}}]}]});Ext.define('Bigmedia.component.AutoPlanSplitOperator',{extend:Ext.container.Container,alias:'widget.autoplansplitoperator',mixins:[Ext.form.field.Field],controller:{bindings:{onParamsChange:{operator:'{operator}',min:'{min}',max:'{max}'}},onParamsChange:function(a){var c=this;c.getView().setParams(a);var b=c.getView().getCityRec();if(b){b.set({operator:a.operator,min:a.min,max:a.max})}},init:function(a){var b=this;b.callParent(a);var c=b.getViewModel();c.set({operator:a.getParams()&&a.getParams().operator,min:a.getParams()&&a.getParams().min,max:a.getParams()&&a.getParams().max})}},config:{city:null,params:null,cityRec:null,oStore:null,removable:!0,initData:null,selOperators:[]},updateSelOperators:function(a){if(!a){return}var b=this,d=b.getViewModel(),c=d.get('operators');c.addFilter({id:'filterRemoveSelected',filterFn:function(c){return a.indexOf(c.get('name'))<0||c.get('name')==b.lookup('operator').getValue()}})},isValid:function(){var a=this,b=a.lookup('operator').getValue(),d=a.lookup('min').getValue(),c=a.lookup('max').getValue();return !!b&&(d!==null||c!==null)},getValue:function(){var a=this;return {operator:a.lookup('operator').getValue(),min:a.lookup('min').getValue(),max:a.lookup('max').getValue()}},updateOStore:function(b){var a=new Ext.data.ChainedStore({source:b});this.getViewModel().set('operators',a)},updateCity:function(a){this.getViewModel().set('city',a)},updateRemovable:function(a){this.getViewModel().set('removable',a)},updateInitData:function(a){if(!a){return}var c=this,b=c.getViewModel();b.set('operatorName',a.operator?a.operator.value:null);b.set('operatorReadOnly',a.operator?a.operator.readOnly:!1);b.set('minValue',a.min?a.min.value:null);b.set('minMinValue',a.min?a.min.minValue:0);b.set('maxMinValue',a.max?a.max.minValue:0)},viewModel:{data:{city:null,operatorName:null,operatorReadOnly:!1,minValue:null,minMinValue:0,maxValue:null,maxMinValue:0,operators:null,removable:!0}},layout:'anchor',defaults:{anchor:'100%'},margin:'20px 0 10px 0',items:[{layout:{type:'hbox',align:'stretchmax'},defaults:{labelAlign:'top',hideTrigger:!1,allowDecimals:!1,minWidth:30,listeners:{change:function(a,b){a.up('autoplansplitoperator').validate();if(a.el){a.el.toggleCls('not-empty',b||a.emptyText)}a.up('autoplansplitoperator').fireEvent('valuechanged')}}},items:[{reference:'operator',xtype:'combo',bind:{store:'{operators}',value:'{operatorName}',readOnly:'{operatorReadOnly}'},labelStyle:'z-index: 1',fieldLabel:'',ui:'plannerfield',queryMode:'local',forceSelection:!0,valueField:'name',grow:!0,flex:1,displayField:'name'},{reference:'min',xtype:'customnumberfield',fieldLabel:'Min',labelStyle:'z-index: 1',step:1,ui:'plannerfield',grow:!0,maxValue:100,width:60,minWidth:60,margin:'0 0 0 10px',bind:{value:'{minValue}',minValue:'{minMinValue}'},triggers:{percent:{cls:'x-fa fa-percent'}}},{reference:'max',xtype:'customnumberfield',fieldLabel:'Max',labelStyle:'z-index: 1',ui:'plannerfield',margin:'0 0 0 10px',grow:!0,step:1,width:60,minWidth:60,bind:{value:'{maxValue}',minValue:'{maxMinValue}'},maxValue:100,triggers:{percent:{weight:-1,cls:'x-fa fa-percent'}}},{xtype:'button',iconCls:'x-fa fa-trash-alt',width:30,margin:'0 0 0 10px',bind:{hidden:'{!removable}'},handler:function(a){a.up('autoplansplitoperator').fireEvent('removeclick',a.up('autoplansplitoperator'))}}]}]});Ext.define('Bigmedia.component.AutoPlanSplitSize',{extend:Ext.container.Container,alias:'widget.autoplansplitsize',mixins:[Ext.form.field.Field],controller:{bindings:{onParamsChange:{size:'{size}',count:'{count}'}},onParamsChange:function(a){var c=this;c.getView().setParams(a);var b=c.getView().getCityRec();if(b){b.set({size:a.size,count:a.count})}},init:function(b){var a=this;a.callParent(b);var c=a.getViewModel()}},config:{city:null,params:null,cityRec:null,sStore:null,removable:!0,initData:null,selSizes:[]},updateSelSizes:function(a){if(!a){return}var b=this,d=b.getViewModel(),c=d.get('sizes');c.addFilter({id:'filterRemoveSelected',filterFn:function(c){return a.indexOf(c.get('name'))<0||c.get('name')==b.lookup('size').getValue()}})},isValid:function(){var a=this,c=a.lookup('size').getValue(),b=a.lookup('countfield').getValue();return !!c&&b!==null},getValue:function(){var a=this;return {size:a.lookup('size').getValue(),count:a.lookup('countfield').getValue()}},updateSStore:function(b){var a=new Ext.data.ChainedStore({source:b});this.getViewModel().set('sizes',a)},updateCity:function(a){this.getViewModel().set('city',a)},updateInitData:function(a){if(!a){return}var c=this,b=c.getViewModel();b.set('sizeName',a.size);b.set('count',a.count)},viewModel:{data:{city:null,sizeName:null,count:null,sizes:null}},layout:'anchor',defaults:{anchor:'100%'},margin:'20px 0 10px 0',items:[{layout:{type:'hbox',align:'stretchmax'},defaults:{labelAlign:'top',hideTrigger:!1,allowDecimals:!1,minWidth:30,listeners:{change:function(a,b){a.up('autoplansplitsize').validate();if(a.el){a.el.toggleCls('not-empty',b||a.emptyText)}a.up('autoplansplitsize').fireEvent('valuechanged')}}},items:[{reference:'size',xtype:'combo',bind:{store:'{sizes}',value:'{sizeName}'},labelStyle:'z-index: 1',fieldLabel:'',ui:'plannerfield',queryMode:'local',forceSelection:!0,valueField:'name',grow:!0,flex:1,displayField:'name'},{reference:'countfield',xtype:'customnumberfield',fieldLabel:'',labelStyle:'z-index: 1',step:1,ui:'plannerfield',grow:!0,minValue:0,width:60,minWidth:60,margin:'0 0 0 10px',bind:{value:'{count}',maxValue:'{size.selection.maxValue}'},triggers:{}},{xtype:'button',iconCls:'x-fa fa-trash-alt',width:30,margin:'0 0 0 10px',handler:function(a){a.up('autoplansplitsize').fireEvent('removeclick',a.up('autoplansplitsize'))}}]}]});Ext.define('Bigmedia.component.CustomMonthPicker',{extend:Ext.Component,alias:'widget.custommonthpicker',isMonthPicker:!0,focusable:!0,childEls:['bodyEl','prevEl','nextEl','monthEl','yearEl','buttons'],renderTpl:['<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseCls}-body">','<div id="{id}-yearEl" data-ref="yearEl" class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-prev" hidefocus="on" role="button"></a>','</div>','<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year">','<a hidefocus="on" class="{parent.baseCls}-item-inner" role="button">{.}</a>','</div>','</tpl>','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-next" hidefocus="on" role="button"></a>','</div>','</div>','</div>','<div class="'+Ext.baseCSSPrefix+'clear"></div>','<div id="{id}-monthEl" data-ref="monthEl" class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month">','<a style="{parent.monthStyle}" role="button" hidefocus="on" class="{parent.baseCls}-item-inner">{.}</a>','</div>','</tpl>','</div>','<div class="'+Ext.baseCSSPrefix+'clear"></div>','<tpl if="showButtons">','<div id="{id}-buttons" data-ref="buttons" class="{baseCls}-buttons">{%','var me=values.$comp, okBtn=me.okBtn, cancelBtn=me.cancelBtn;','okBtn.ownerLayout = cancelBtn.ownerLayout = me.componentLayout;','okBtn.ownerCt = cancelBtn.ownerCt = me;','Ext.DomHelper.generateMarkup(okBtn.getRenderTree(), out);','Ext.DomHelper.generateMarkup(cancelBtn.getRenderTree(), out);','%}</div>','</tpl>','</div>'],okText:'OK',cancelText:'Cancel',baseCls:'custommonthpicker',showButtons:!0,footerButtonUI:'default',measureWidth:35,measureMaxHeight:20,smallCls:Ext.baseCSSPrefix+'-small',totalYears:1,yearOffset:0,monthOffset:6,alignOnScroll:!1,initComponent:function(){var a=this;a.selectedCls=a.baseCls+'-selected';if(a.small){a.addCls(a.smallCls)}a.setValue(a.value);a.activeYear=a.getYear((new Date()).getFullYear(),0);if(a.showButtons){a.okBtn=new Ext.button.Button({ui:a.footerButtonUI,text:a.okText,handler:a.onOkClick,scope:a});a.cancelBtn=new Ext.button.Button({ui:a.footerButtonUI,text:a.cancelText,handler:a.onCancelClick,scope:a})}a.callParent()},beforeRender:function(){var a=this,b=0,d=[],f=Ext.Date.getShortMonthName,g=a.monthOffset,c=a.monthMargin,e='';if(a.padding&&!a.width){a.cacheWidth()}a.callParent();for(;b<12;b++){d.push(Ext.Date.monthNames[b])}if(Ext.isDefined(c)){e='margin: 0 '+c+'px;'}Ext.apply(a.renderData,{months:d,years:a.getYears(),showButtons:a.showButtons,monthStyle:e})},cacheWidth:function(){var a=this,b=a.parseBox(a.padding),c=Ext.getBody().createChild({cls:a.baseCls+' '+a.borderBoxCls,style:'position:absolute;top:-1000px;left:-1000px;',html:'&nbsp;'});a.self.prototype.width=c.getWidth()+b.left+b.right;c.destroy()},afterRender:function(){var a=this,b=a.bodyEl;a.callParent();if(a.up('[floating=true]')){a.el.on('mousedown',a.onElClick,a,{translate:!1})}b.on({scope:a,click:'onBodyClick',dblclick:'onBodyClick'});a.years=b.select('.'+a.baseCls+'-year a');a.months=b.select('.'+a.baseCls+'-month a');a.backRepeater=new Ext.util.ClickRepeater(a.prevEl,{handler:Ext.Function.bind(a.adjustYear,a,[-a.totalYears])});a.prevEl.addClsOnOver(a.baseCls+'-yearnav-prev-over');a.nextRepeater=new Ext.util.ClickRepeater(a.nextEl,{handler:Ext.Function.bind(a.adjustYear,a,[a.totalYears])});a.nextEl.addClsOnOver(a.baseCls+'-yearnav-next-over');a.updateBody();if(!Ext.isDefined(a.monthMargin)){Ext.picker.Month.prototype.monthMargin=a.calculateMonthMargin()}},calculateMonthMargin:function(){var b=this,c=b.months,d=c.first(),a=d.getMargin('l');while(a&&b.getLargest()>b.measureMaxHeight){--a;c.setStyle('margin','0 '+a+'px')}return a},getLargest:function(b){var a=0;this.months.each(function(d){var c=d.getHeight();if(c>a){a=c}});return a},setValue:function(b){var a=this,d=a.activeYear,c;if(!b){a.value=[null,null]}else {if(Ext.isDate(b)){a.value=[b.getMonth(),b.getFullYear()]}else {a.value=[b[0],b[1]]}}if(a.rendered){c=a.value[1];if(c!==null){if(c<d||c>d+a.yearOffset){a.activeYear=c-a.yearOffset+1}}a.updateBody()}return a},getValue:function(){return this.value},hasSelection:function(){var a=this.value;return a[0]!==null&&a[1]!==null},getYears:function(){var e=this,d=e.yearOffset,c=e.activeYear,f=c+d,b=c,a=[];for(;b<f;++b){a.push(b,b+d)}if(a.length==0){a.push(c)}return a},updateBody:function(){var a=this,i=a.years,g=a.months,k=a.getYears(),c=a.selectedCls,l=a.getYear(null),h=a.value[0],m=a.monthOffset,e,d,b,j,f;if(a.rendered){i.removeCls(c);g.removeCls(c);d=i.elements;j=d.length;for(b=0;b<j;b++){f=Ext.fly(d[b]);e=k[b];f.dom.innerHTML=e;if(e===l){f.addCls(c)}}if(h!==null){g.item(h).addCls(c)}}},getYear:function(c,a){var b=this.value[1];a=a||0;return b===null?c:b+a},onElClick:function(a){a.stopEvent()},onBodyClick:function(a,d){var b=this,c=a.type==='dblclick';if(a.getTarget('.'+b.baseCls+'-month')){a.stopEvent();b.onMonthClick(d,c)}else {if(a.getTarget('.'+b.baseCls+'-year')){a.stopEvent()}}},adjustYear:function(a){if(typeof a!=='number'){a=this.totalYears}this.activeYear+=a;this.value[1]=this.activeYear;this.updateBody()},onOkClick:function(){this.fireEvent('okclick',this,this.value)},onCancelClick:function(){this.fireEvent('cancelclick',this)},onMonthClick:function(c,b){var a=this;a.value[0]=a.months.indexOf(c);a.updateBody();a.fireEvent('month'+(b?'dbl':'')+'click',a,a.value);a.fireEvent('select',a,a.value)},onYearClick:function(c,b){var a=this;a.value[1]=a.activeYear;a.updateBody();a.fireEvent('year'+(b?'dbl':'')+'click',a,a.value);a.fireEvent('select',a,a.value)},resolveOffset:function(a,b){if(a%2===0){return a/2}else {return b+Math.floor(a/2)}},doDestroy:function(){Ext.destroy(this.backRepeater,this.nextRepeater,this.okBtn,this.cancelBtn);this.callParent()},privates:{finishRenderChildren:function(){var a=this;this.callParent(arguments);if(this.showButtons){a.okBtn.finishRender();a.cancelBtn.finishRender()}}}});Ext.define('Bigmedia.component.CustomNumberField',{extend:Ext.form.field.Number,alias:'widget.customnumberfield',initComponent:function(){var a=this;a.callParent();a.getTriggers().spinner.hidden=!0}});Ext.define('Bigmedia.component.GoogleMapSearchField',{extend:Ext.form.field.Text,alias:['widget.googlemapsearchfield'],emptyText:' ',triggers:{clear:{weight:1,cls:Ext.baseCSSPrefix+'form-clear-trigger',hidden:!0,handler:'onClearClick',scope:'this'},search:{weight:2,cls:'x-fa fa-search-location',scope:'this'},add:{weight:3,cls:'x-fa fa-plus-circle',handler:'onPlusClick',hidden:!0,scope:'this'}},onPlusClick:function(){var g=this,j=g.up('facesmapview').lookupViewModel(),i=j.get('pois'),a=g.googlePlace;var b=a.address_components,e=b?b.find(a=>a.types.indexOf('locality')>=0&&a.types.indexOf('political')>=0):null,c,d=b?b.find(a=>a.types.indexOf('street_number')>=0):null,h,f=[];if(e){c=e.short_name||e.long_name;if(c){f.push(c)}}if(d){h=d.long_name||d.short_name}f.push(a.name);i.add({name:f.join(', '),geometry:new ol.geom.Point(ol.proj.fromLonLat([a.geometry.location.lng(),a.geometry.location.lat()])),lat:a.geometry.location.lat(),lon:a.geometry.location.lng(),city:c,address:a.formatted_address,housenumber:h,centroid:new ol.geom.Point(ol.proj.fromLonLat([a.geometry.location.lng(),a.geometry.location.lat()]))});g.getTrigger('add').hide()},onClearClick:function(){var a=this;a.setValue('')},listeners:{change:function(a,b){var c=this;if(!a.getValue()){a.getTrigger('clear').hide();a.fireEvent('clearplace');a.getTrigger('add').hide()}else {a.getTrigger('clear').show()}},afterrender:function(a){var b=this;const c=new google.maps.places.SearchBox(a.getEl().dom.querySelector('input'));c.addListener('places_changed',()=>{const d=c.getPlaces();if(d.length==0){console.log('no places found');b.googlePlace=null;return}d.forEach(c=>{if(!c.geometry||!c.geometry.location){console.log('Returned place contains no geometry');return}b.googlePlace=c;var e=b.up('facesmapview').lookupViewModel();var d=e.get('pois');if(d.getDataSource().findBy(b=>b.get('lon')===c.geometry.location.lng()&&b.get('lat')===c.geometry.location.lat())){a.getTrigger('add').hide()}else {a.getTrigger('add').show()}});a.fireEventArgs('selectplace',[b.googlePlace])})}}});Ext.define('Bigmedia.component.PoiCatSimplePanel',{extend:Ext.panel.Panel,alias:'widget.poicatsimplepanel',config:{cat:null},updateCat:function(c){var b=Ext.getStore('PoiCategoriesTree'),a=this,d=a.getViewModel().getStore('children');if(!b.isLoaded()){b.on('load',function(){a.loadCatNodes(c)});return}a.loadCatNodes(c)},getChildren:function(b){var c=this,a=[];b.childNodes.forEach(d=>{if(!d.childNodes.length){a.push(d)}else {a=a.concat(c.getChildren(d))}});return a},loadCatNodes:function(h){var g=Ext.getStore('PoiCategoriesTree'),a=this,d=a.getViewModel().getStore('children');var c=g.getNodeById(h.id),f;if(c){a.getViewModel().set('catName',c.get('name'));a.setIconCls(c.get('iconCls'));f=a.getChildren(c);var b=[];f.forEach(a=>{d.add({id:a.getId(),name:a.get('name')});if(b.length<5){b.push(a.get('name'))}});var e=b.join(', ');if(d.getCount()>5){e+='   '+(d.getCount()-b.length).toString()}a.getViewModel().set('childrenText',e)}},getSelCats:function(){var b=this.lookup('cats'),a=[];b.getSelectionModel().getSelection().forEach(b=>a.push(b.getId()));return a},bind:{title:'{catName}<br><span style="font-size: 12px; font-weight: normal;">{selCount > 0 ? "  " + selCount : childrenText}</span>'},style:'border: 1px solid #e2e2e2; border-radius: 5px',margin:'10px 0 5px 0',referenceHolder:!0,viewModel:{stores:{children:{fields:['id','name']}},data:{catName:null,childrenText:null,selCount:0}},items:[{xtype:'grid',reference:'cats',bind:{store:'{children}'},selModel:{type:'checkboxmodel',checkOnly:!0},columnLines:!1,columns:[{text:' ',dataIndex:'name',sortable:!1,menuDisabled:!0}],listeners:{selectionchange:function(b,a){this.up('panel').getViewModel().set('selCount',a.length)}}}]});Ext.define('Bigmedia.lib.Constants',{singleton:!0,authAction:{'setPermissions':1,'editUsers':2,'editReferences':3,'showAdvCampaigns':4,'showCampaignCard':5,'showPlaceCard':6,'showOrgCard':7,'showUserCard':8,'showPosterCard':9,'showProposalCard':10,'showSideCard':11,'editDemounts':12,'showReservations':13,'showOrgs':14,'showFreeSides':15,'showServOpers':16,'showStatistics':17,'genPresentation':18,'showMessages':19,'showElectricity':20,'showSupplierCard':21,'showStatisticsManagers':23,'showCalendar':24,'showPhotoRep':25,'showStatisticsPrice':27,'editMap':28,'showServWorks':29,'showPrice':30,'showStoreHouse':31,'setPresentationPhoto':32,'setPhotoReportFee':33,'changePhotoRepDeadline':34,'deleteServOpers':35,'approvePrice':36,'approveFinance':37,'showStatisticsDebit':38,'showContracts':39,'showInvoices':40,'showStatisticsFinanceInput':41,'approvePayments':42,'showStatisticsPayments':43,'showRents':44,'showRentContracts':45,'showPayments':46,'calculateBonuses':47,'setNewClientField':48,'showClientCard':22,'genHardPhotoRep':26,'showPlanner':'showPlanner'},authAccessType:{'readOnly':1,'full':2,'special':3},campPosterType:{'Poster':1,'Flex':2,'Extender':3,'PosterWithExtender':4,'Sticker':5,'Scroll':6},campCampaignType:{'CommercialNeutral':1,'Social':2,'CommercialTobaccoAlcohol':3,'Politics':4}},function(){Bigmedia.Enum=this});Ext.define('Bigmedia.lib.provider.Facebook',{mixins:[Ext.mixin.Observable],singleton:!0,config:{appId:'1308134669200550'},constructor:function(b){var a=this;a.mixins.observable.constructor.call(a,b);a.initConfig(b);a.callParent([b]);window.fbAsyncInit=Ext.bind(a.onFacebookInit,a);(function(c,f,e){var a,d=c.getElementsByTagName(f)[0];if(c.getElementById(e)){return}a=c.createElement(f);a.id=e;a.src='//connect.facebook.com/en_US/sdk.js';d.parentNode.insertBefore(a,d)})(document,'script','facebook-jssdk')},removeToken:function(){var a=this;Ext.Ajax.request({url:'/api/v1/auth/facebook-token',method:'DELETE',success:function(b,c){if(FB.getAccessToken()){a.logout()}else {Bigmedia.Vars.loadUser()}},failure:function(a,b){console.log('server-side failure with status code '+a.status)}})},login:function(a,b){var c=[].slice.call(arguments,2);FB.login(function(d){if(d.status==='connected'&&a){Ext.callback(a,b,c)}},{scope:'email',return_scopes:!0})},logout:function(){if(FB.getAccessToken()){FB.logout()}},onFacebookInit:function(){var a=this;FB.init({appId:a.getAppId(),cookie:!0,version:'v2.12'});FB.Event.subscribe('auth.authResponseChange',Ext.bind(a.onFacebookAuthResponseChange,a))},loginByToken:function(a){Ext.Ajax.request({url:'/api/v1/auth/facebook-token',params:{access_token:a},success:function(d,f){var c=JSON.parse(d.responseText);c.provider=1;var e=Ext.create('Bigmedia.model.User',c,1);Bigmedia.Vars.setUser(e);var b=Ext.ComponentQuery.query('mainviewport');if(b&&b.length>0){b=b[0];if(b.getViewModel().get('targetLoginRouteId')){b.getController().redirectTo(b.getViewModel().get('targetLoginRouteId'),!0)}else {b.getController().redirectTo('faces',!0)}}},failure:function(c,d){if(c&&c.status==500){var b=Ext.ComponentQuery.query('mainviewport');if(b&&b.length>0){b=b[0];Ext.ComponentQuery.query('mainviewport')[0].getController().showPage('error500')}}else {if(c&&c.status==401){}}console.log('error facebook-token request')}})},onFacebookAuthResponseChange:function(a){if(a.status==='connected'){var b=a.authResponse.accessToken;userId=a.authResponse.userID;this.loginByToken(b)}else {Bigmedia.Vars.loadUser()}}});Ext.define('Bigmedia.lib.validator.DateRange',{extend:Ext.data.validator.Validator,alias:'data.validator.daterange',type:'daterange',config:{message:'Start date must be less or equal then End date',isStart:!0,otherField:'endDate',format:'d.m.y'},validate:function(b,c){var a=this;if(b===undefined||b===null||b===''){return !0}var d=b instanceof Date?b:Ext.Date.parse(b,a.getFormat());if(!d){return a.getMessage()}var e=!c.get(a.getOtherField())||a.getIsStart()&&+d<=+c.get(a.getOtherField())||!a.getIsStart()&&+d>=+c.get(a.getOtherField());return e?!0:a.getMessage()}});Ext.define('Bigmedia.model.BaseSchema',{extend:Ext.data.Model,idProperty:'id',schema:{namespace:'Bigmedia.model',proxy:{type:'ajax',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/{entityName:lowercase}.json',reader:{type:'json'}}}});Ext.define('Bigmedia.model.Base',{extend:Bigmedia.model.BaseSchema,fields:[{name:'id',type:'int'}],idProperty:'id'});Ext.define('Bigmedia.model.RefData',{extend:Bigmedia.model.Base,fields:[{name:'name',calculate:function(a){return a['name_'+Bigmedia.Locales.currentLocale]||''}},{name:'name_ukr',type:'string'},{name:'name_en',type:'string'},{name:'name_ru',type:'string'},{name:'totalCount',type:'int',defaultValue:'0'},{name:'addCount',type:'int',defaultValue:'0'},{name:'subCount',type:'int',defaultValue:'0'},{name:'records',defaultValue:{}}]});Ext.define('Bigmedia.model.City',{extend:Bigmedia.model.RefData,store:{type:'store.cities',autoLoad:!0}});Ext.define('Bigmedia.model.CityBoundary',{extend:Bigmedia.model.Base,fields:[{name:'coords'},{name:'geometry',calculate:function(a){if(a.turf){var b=a.turf.geometry.coordinates[0];return new ol.geom.Polygon([b.map(function(b){return ol.proj.fromLonLat(b)})])}else {return null}}},{name:'turf',calculate:function(a){if(a.coords&&a.coords.length>0){var b=turf.polygon(a.coords);return b}else {return null}}},{name:'jsts',calculate:function(b){var a=Bigmedia.Vars.convertTurfToJsts(turf.truncate(b.turf));return a}},{name:'area'},{name:'bbox',calculate:function(a){if(a.turf){var b=turf.bbox(a.turf);return b}}},{name:'x',calculate:function(a){if(a.bbox){return turf.distance(turf.point([a.bbox[0],a.bbox[1]]),turf.point([a.bbox[2],a.bbox[1]]))}}},{name:'y',calculate:function(a){if(a.bbox){return turf.distance(turf.point([a.bbox[0],a.bbox[1]]),turf.point([a.bbox[0],a.bbox[3]]))}}}],proxy:{type:'ajax',limitParam:null,pageParam:'',startParam:'',url:'city_boundary.json',reader:{type:'json'}}});Ext.define('Bigmedia.model.Catab',{extend:Bigmedia.model.RefData,store:{type:'store.catabs',autoLoad:!0}});Ext.define('Bigmedia.model.Size',{extend:Bigmedia.model.RefData,store:{type:'store.sizes',autoLoad:!0}});Ext.define('Bigmedia.model.Network',{extend:Bigmedia.model.RefData,store:{type:'store.networks',autoLoad:!0}});Ext.define('Bigmedia.model.Sidetype',{extend:Bigmedia.model.RefData,store:{type:'store.sidetypes',autoLoad:!0}});Ext.define('Bigmedia.model.PoiCategory',{extend:Bigmedia.model.RefData,store:{type:'store.poicategories',autoLoad:!0}});Ext.define('Bigmedia.model.Face',{extend:Ext.data.Model,idProperty:'id',fields:[{name:'id',type:'int'},{name:'num',type:'number'},{name:'inPlatform',type:'boolean',defaultValue:!0},{name:'sides'},{name:'supplierNo',calculate:function(a){return a.num}},{name:'address',type:'string'},{name:'occupancy'},{name:'id_city',type:'int'},{name:'id_size',type:'int'},{name:'id_network',type:'int'},{name:'id_catab',type:'int'},{name:'city',calculate:function(a){return Bigmedia.Locales.refCity[a.id_city]}},{name:'doorsNo',calculate:function(a){return a.doors_no}},{name:'supplier_size'},{name:'size',calculate:function(a){return Bigmedia.Locales.refSize[a.id_size]||a.supplier_size}},{name:'supplier_sidetype'},{name:'sidetype',calculate:function(a){return Bigmedia.Locales.refSupplierSidetype[a.supplier_sidetype]}},{name:'source',defaultValue:'server'},{name:'supplier_type'},{name:'network',calculate:function(a){return Bigmedia.Locales.refNetwork[a.id_network]||a.supplier_type}},{name:'catab',calculate:function(a){return Bigmedia.Locales.refAB[a.id_catab]}},{name:'hide_doors_data'},{name:'grp',type:'float',defaultValue:0.01,allowNull:!0},{name:'displayGrp',calculate:function(a){if(!a.hide_doors_data){return a.grp}}},{name:'ots',type:'float',defaultValue:1,allowNull:!0},{name:'displayOts',calculate:function(a){if(!a.hide_doors_data){return a.ots}}},{name:'lon',type:'float'},{name:'lat',type:'float'},{name:'pos'},{name:'angle'},{name:'geometry',calculate:function(a){if(parseFloat(a.lon)&&parseFloat(a.lat)){var b=[parseFloat(a.lon),parseFloat(a.lat)];return new ol.geom.Point(ol.proj.fromLonLat(b))}else {return null}}},{name:'icon',calculate:function(b){var a='l';switch(b.size){case '1.2x1.8':case '1.2x3.6':case '1.5x3':case '2.3x3.14':case '2.3x3.5':a='s';break;case '3x4':case '3x6':case '6x3':case '7x4':case '3x11':case '3x12':a='b';break;}return a}},{name:'selected',type:'boolean',defaultValue:!1},{name:'rating',type:'int'},{name:'zone',calculate:function(a){return Bigmedia.Locales.refSideZone[a.rating]}},{name:'doors_no',type:'int',allowNull:!0},{name:'light',type:'string'},{name:'busy',type:'int'},{name:'inCart',type:'boolean',defaultValue:!1},{name:'streets',type:'string'},{name:'supplierName',allowNull:!0},{name:'supplier',calculate:function(a){return Bigmedia.Locales.refSupplier[a.id_supplier]||a.supplierName}},{name:'supplierNo',mapping:'supplier_sn'},{name:'id_supplier',type:'int'},{name:'urlPhoto',mapping:'photo_url'},{name:'urlSchema',mapping:'schema_url'},{name:'price',type:'number',allowNull:!0},{name:'finalPrice',type:'number',defaultValue:0},{name:'netPrice',type:'number',defaultValue:0},{name:'clientPrice',type:'number',defaultValue:0},{name:'occByDays'},{name:'parsedOccupancy'},{name:'ks'},{name:'useKSData',type:'boolean','default':!1},{name:'ksOTS',type:'float',defaultValue:0,allowNull:!0},{name:'displayksOTS',calculate:function(a){return a.ksOTS}},{name:'ksGRP',type:'float',defaultValue:0,allowNull:!0},{name:'displayksGRP',calculate:function(a){return a.ksGRP}},{name:'ksTRP',type:'float',defaultValue:0,allowNull:!0},{name:'displayksTRP',calculate:function(a){return a.ksTRP}},{name:'cityRegion',mapping:'city_region'}],setCampaign:function(a){if(a){this.campaignId=a.getId()}},proxy:{type:'memory'}});Ext.define('Bigmedia.model.Side',{extend:Ext.data.Model,idProperty:'id',fields:[{name:'id',type:'int'},{name:'faceId'},{name:'num',type:'int'},{name:'supplierNo',type:'string'},{name:'doorsNo',type:'int',allowNull:!0},{name:'occ',type:'string'}],proxy:{type:'ajax',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/sides',reader:{type:'json'}}});Ext.define('Bigmedia.model.Campaign',{extend:Bigmedia.model.BaseSchema,convertOnSet:!1,fields:[{name:'id',type:'int'},{name:'name',type:'string',defaultValue:'   '+Ext.Date.format(new Date(),'Ymd')},{name:'client'},{name:'manager'},{name:'clientId',convert:function(a){if(!a&&Bigmedia.Vars.getUser()){return Bigmedia.Vars.getUser().get('orgId')}}},{name:'managerId',convert:function(a){if(!a&&Bigmedia.Vars.getUser()){return Bigmedia.Vars.getUser().get('defaultManagerId')}}},{name:'managerName',defaultValue:Bigmedia.Vars.getUser()&&Bigmedia.Vars.getUser().get('isManager')?Bigmedia.Vars.getUser().get('name'):'',persist:!1},{name:'owner',defaultValue:Bigmedia.Vars.getUser()?Bigmedia.Vars.getUser().get('name'):'',persist:!1},{name:'subjectId',persist:!1},{name:'startDate',type:'date',dateFormat:'c',defaultValue:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()+1,1)),dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'endDate',type:'date',dateFormat:'c',defaultValue:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()+2,0)),dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'finBalance'},{name:'finBudget'},{name:'docStatus'},{name:'mediaStatus'},{name:'advertiserId'},{name:'advertiser',calculate:function(a){return a.advertiserId?Ext.getStore('Advertisers').getById(a.advertiserId):null}},{name:'createdAt',type:'date',dateFormat:'c',defaultValue:new Date(),dateWriteFormat:'Y-m-d\\TH:i:s.u\\Z'},{name:'modifiedAt',type:'date',dateFormat:'c',defaultValue:new Date(),dateWriteFormat:'Y-m-d\\TH:i:s.u\\Z'},{name:'publishedId',type:'string'},{name:'hasPresentation',calculate:function(a){return !!a.publishedId}},{name:'periodText',calculate:function(a){return Bigmedia.Vars.getPeriodText(a.startDate,a.endDate)}},{name:'filterPeriod',calculate:function(a){if(a.filters&&a.filters.filter_period){return a.filters.filter_period}else {return {startDate:a.startDate,endDate:a.endDate}}}},{name:'filters',convert:function(a){if(!a){return null}if(typeof a==='object'){return a}var b=null;try{b=Bigmedia.Vars.processObject(JSON.parse(a),function(b){return typeof b==='object'?b:Ext.Date.parse(b,'c',!0)||b})}catch(c){console.log('filters value: %o',a);console.log('error parsing saved filters: %o',c)}finally{return b}},serialize:function(a){if(!a){return null}var b=Bigmedia.Vars.processObject(a,function(b){return b instanceof Date?Ext.Date.localToUtc(Ext.Date.clearTime(b)):b});return JSON.stringify(b)}},{name:'params',convert:function(a){if(!a){return null}var b=null;try{var c=typeof a==='object'?a:JSON.parse(a);b=Bigmedia.Vars.processObject(c,function(b){return typeof b==='object'?b:Ext.Date.parse(b,'c',!0)||b})}catch(d){console.log('params: %o',a);console.log('error parsing saved params: %o',d)}finally{return b}},serialize:function(a){if(!a){return null}var b=Bigmedia.Vars.processObject(a,function(b){return b instanceof Date?Ext.Date.localToUtc(Ext.Date.clearTime(b)):b});return JSON.stringify(b)}},{name:'discountId',calculate:function(a){return a.params?a.params.discountId:null}},{name:'filterPeriodText',calculate:function(a){return Bigmedia.Vars.getPeriodText(a.filterPeriod.startDate,a.filterPeriod.endDate,a.filterPeriod.disabled)}},{name:'timeAgo',calculate:function(j){var b=new Date(),h=b.getFullYear(),f=b.getMonth(),m=b.getDate(),k=b.getDay(),s=Ext.Date.getWeekOfYear(b);var e=new Date(+new Date(h,f,m+1)-1);var a=j.createdAt,r=a.getFullYear(),l=a.getMonth(),p=a.getDate(),i=a.getDay(),q=Ext.Date.getWeekOfYear(a);var c=Ext.Date.diff(a,e,Ext.Date.DAY),d=Math.floor(c/Ext.Date.DAYS_IN_WEEK),n=Ext.Date.diff(a,e,Ext.Date.MONTH),o=Ext.Date.diff(a,e,Ext.Date.YEAR);if(c<1){return ''}if(c<2){return ''}if(c<k){return Ext.Date.dayNames[i]}if(f===l){if(d<2){return '  '}if(d<3){return '  '}if(d<4){return '  '}if(d<5){return '  '}}var g=new Date(+new Date(h,f,1)-1);if(Ext.Date.diff(a,g,Ext.Date.MONTH)<1){return '  '}if(Ext.Date.diff(a,g,Ext.Date.MONTH)<2){return '  '}return ''}}],validators:{name:'presence',startDate:['presence',{type:'daterange',isStart:!0,otherField:'endDate'}],endDate:['presence',{type:'daterange',isStart:!1,otherField:'startDate'}],managerId:'presence',clientId:'presence'},idProperty:'id',proxy:{type:'rest',limitParam:null,extraParams:{fromDate:Ext.Date.format(Ext.Date.add(new Date(),Ext.Date.MONTH,-3),'c')},pageParam:'',startParam:'',url:'/api/v1/campaigns',reader:{type:'json'},writer:{writeAllFields:!0}},getDefaultStartDate:function(){var a=new Date(),b=new Date(Date.UTC(a.getFullYear(),a.getMonth()+1,1));return b},getDefaultEndDate:function(){var a=this.getDefaultStartDate();return new Date(a.getUTCFullYear(),a.getUTCMonth()+1,a.getUTCDate()-1)}});Ext.define('Bigmedia.model.Advertiser',{extend:Ext.data.Model,fields:[{name:'id',type:'int'},{name:'name',type:'string'}],idProperty:'id',proxy:{type:'rest',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/advertisers',reader:{type:'json'}}});Ext.define('Bigmedia.proxy.CampProxy',{extend:Ext.data.proxy.Rest,alias:'proxy.campproxy',buildUrl:function(b){var f=this,g=b.getOperation(),h=g.getRecords(),d=h?h[0]:null,i=f.getFormat(),a=f.getUrl(b),j=b.getParams(),e;if(d&&!d.phantom){e=d.getId()}else {e=g.getId()}if(i){if(!a.match(f.periodRe)){a+='.'}a+=i}if(!d){var c=j.filter;if(c){c=Ext.decode(c);e=c[0].value;var k=a.charAt()!=='/'?'/':'';a='/api/v1/campaigns/'+encodeURIComponent(e)+k+a;delete j['filter']}}else {a='/api/v1/'+a}b.setUrl(a);return f.callParent([b])}});Ext.define('Bigmedia.model.CampBase',{extend:Bigmedia.model.BaseSchema,idProperty:'id',fields:[{name:'id'},{name:'campaignId',reference:{parent:'Campaign'},allowBlank:!1}],proxy:'campproxy'});Ext.define('Bigmedia.model.Poster',{extend:Bigmedia.model.CampBase,fields:[{name:'name',type:'string'},{name:'type',defaultValue:1},{name:'subject'},{name:'subjectId',type:'int',calculate:function(a){return a.subject?a.subject.id:null}},{name:'subjectBlob'},{name:'ownerId',type:'int'}],validators:{name:'presence'},proxy:{type:'campproxy',limitParam:null,pageParam:'',startParam:'',url:'posters',writer:{writeAllFields:!0}}});Ext.define('Bigmedia.model.Document',{extend:Bigmedia.model.CampBase,fields:[{name:'num',calculate:function(a){return a.common?a.common.num:''}},{name:'common'},{name:'typeId'},{name:'type',calculate:function(a){return Bigmedia.Locales.refDocumentType[a.typeId]}},{name:'status',convert:function(a){return Bigmedia.Locales.refDocumentStatus[a]}},{name:'createdAt',type:'date',format:'c'},{name:'updatedAt',type:'date',format:'c'},{name:'pdf'},{name:'pdfId',calculate:function(a){return a.pdf?a.pdf.id:null}}],proxy:{type:'campproxy',limitParam:null,pageParam:'',startParam:'',url:'documents'}});Ext.define('Bigmedia.model.CampServiceOperation',{extend:Bigmedia.model.CampBase,fields:[{name:'sideId',type:'int'},{name:'type',type:'int'},{name:'typeName',calculate:function(a){return Bigmedia.Locales.refServiceOperationType[a.type]}},{name:'status',type:'int',convert:function(b){var a;switch(+b){case 2:case 4:a=2;break;case 3:case 5:a=3;break;default:a=1;}return a}},{name:'statusName',calculate:function(a){return Bigmedia.Locales.refServiceOperationStatus[a.status]}},{name:'performedAt',type:'date',format:'c'},{name:'performedAtDay',type:'date',format:'c',calculate:function(a){return Ext.util.Format.date(a.performedAt,'Y-m-d')}},{name:'coverAt',type:'date',format:'c'},{name:'note',type:'string'},{name:'photoRec'},{name:'photoRecObj',calculate:function(b){var a=Ext.clone(b.photoRec);if(a){a.toString=function(){return Bigmedia.Locales.exportServicePhotoText}}return a}},{name:'photoRecId',type:'int'},{name:'posterId',type:'int'},{name:'face',calculate:function(e){var d=Ext.getStore('Sides'),c=Ext.getStore('Faces'),b=d.getById(e.sideId);if(b){var a=c.getById(b.get('faceId'));if(a){return a}}return {get:function(){return ''}}}},{name:'side',calculate:function(c){var b=Ext.getStore('Sides'),a=b.getById(c.sideId);return a?a.getData():{}}},{name:'sideNum',type:'number',calculate:function(a){return a.side.num}},{name:'faceSupplierNo',type:'string',calculate:function(a){return a.face.get('supplierNo')}},{name:'faceNum',type:'number',calculate:function(a){return a.face.get('num')}},{name:'faceCity',calculate:function(a){return a.face.get('city')}},{name:'faceAddress',calculate:function(a){return a.face.get('address')}}],proxy:{type:'campproxy',limitParam:null,pageParam:'',startParam:'',url:'serviceOperations'}});Ext.define('Bigmedia.model.CampPhoto',{extend:Bigmedia.model.CampBase,fields:[{name:'sideId',type:'int'},{name:'type',type:'int'},{name:'typeName',calculate:function(a){return Bigmedia.Locales.refPhotoType[a.type]}},{name:'deadline',type:'date',format:'c'},{name:'createdAt',type:'date',format:'c'},{name:'updatedAt',type:'date',format:'c'},{name:'personId',type:'int'},{name:'photoRecs'},{name:'takenAtDay',type:'date',format:'c',calculate:function(a){if(a.photoRecs&&a.photoRecs.length>0){return Ext.util.Format.date(a.photoRecs[0].takenAt,'Y-m-d')}}},{name:'face',calculate:function(e){var d=Ext.getStore('Sides'),c=Ext.getStore('Faces'),b=d.getById(e.sideId);if(b){var a=c.getById(b.get('faceId'));if(a){return a.getData()}}return {}}},{name:'side',calculate:function(c){var b=Ext.getStore('Sides'),a=b.getById(c.sideId);return a?a.getData():{}}},{name:'sideNum',type:'number',calculate:function(a){return a.side.num}},{name:'faceNum',type:'number',calculate:function(a){return a.face.num}},{name:'faceCity',calculate:function(a){return a.face.city}},{name:'faceAddress',calculate:function(a){return a.face.address}},{name:'faceSupplierNo',type:'string',calculate:function(a){return a.face.supplierNo}}],proxy:{type:'campproxy',limitParam:null,pageParam:'',startParam:'',url:'photos'}});Ext.define('Bigmedia.model.Proposal',{extend:Bigmedia.model.CampBase,fields:[{name:'num',calculate:function(a){var b=a.doorsNo||'';if(a.supplierNo){b+='('+a.supplierNo+')'}return b}},{name:'sideId',type:'int'},{name:'operationId',type:'int'},{name:'startDate',type:'date',dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'endDate',type:'date',dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'confirmDate',type:'date',dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'confirmed',type:'int'},{name:'propCreatedAt',type:'date',dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'propUpdatedAt',type:'date',dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'faceId',type:'int'},{name:'netCost',calculate:function(a){if(a.supplierPriceEnc){return Bigmedia.Vars.decryptPrice(Bigmedia.Vars.getSalt(a.campaignId)||'gw2AM1XDucz7rPYbQ4q4',a.supplierPriceEnc)}else {return a.supplierPrice}}},{name:'supplierPrice'},{name:'supplierPriceEnc'},{name:'supplierNo',type:'string'},{name:'doorsNo',type:'int',allowNull:!0},{name:'byPlanner',type:'int'},{name:'proposalId',type:'int'},{name:'webProposalId',type:'int'},{name:'pubCampaignId',type:'string'},{name:'cityId',type:'int'},{name:'id_city',calculate:function(a){return a.cityId}},{name:'supplierCity',type:'string'},{name:'city',calculate:function(a){return a.cityId?Bigmedia.Locales.refCity[a.cityId]:a.supplierCity}},{name:'sidetypeId',type:'int'},{name:'supplierSidetype',type:'string'},{name:'sidetype',calculate:function(a){return a.sidetypeId?Bigmedia.Locales.refSidetype[a.sidetypeId]:a.supplierSidetype}},{name:'sizeId',type:'int'},{name:'supplierSize',type:'string'},{name:'size',calculate:function(a){return a.sizeId?Bigmedia.Locales.refSize[a.sizeId]:a.supplierSize}},{name:'catab',type:'string'},{name:'light',type:'string'},{name:'hide_doors_data'},{name:'grp',allowNull:!0},{name:'displayGrp',calculate:function(a){if(!a.hide_doors_data){return a.grp}}},{name:'ots',allowNull:!0},{name:'displayOts',calculate:function(a){if(!a.hide_doors_data){return a.ots}}},{name:'lon'},{name:'lat'},{name:'pos'},{name:'angle'},{name:'pubCustomRating'},{name:'pubDecision'},{name:'pubCreatedAt',type:'date',dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'pubUpdatedAt',type:'date',dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'pubProcessed'},{name:'pubProcessedAt',type:'date',dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'address_ukr',type:'string'},{name:'address_ru',type:'string'},{name:'address_en',type:'string'},{name:'address',calculate:function(a){return a['address_'+Bigmedia.Locales.currentLocale]||a['address_ru']}},{name:'photos',convert:function(a,b){if(!a){return null}return typeof a==='object'?a:JSON.parse(a)}},{name:'urlPhoto',mapping:'photo_url'},{name:'urlSchema',mapping:'schema_url'},{name:'pubNote',type:'string'},{name:'displayPubPrice',calculate:function(a){if(a.pubPriceEnc){return Bigmedia.Vars.decryptPrice(Bigmedia.Vars.getPubPassphrase(a.pubCampaignId),a.pubPriceEnc)}else {return a.pubPrice}}},{name:'pubPrice'},{name:'pubPriceEnc'},{name:'pubOwnerNote',type:'string'},{name:'selected',type:'boolean',defaultValue:!1,persist:!1},{name:'inCart',type:'boolean',defaultValue:!1,persist:!1},{name:'operationName',calculate:function(a){return Bigmedia.Locales.refSaleOpers[a.operationId]||''}},{name:'posterId',type:'int'},{name:'geometry',calculate:function(a){if(parseFloat(a.lon)&&parseFloat(a.lat)){var b=[parseFloat(a.lon),parseFloat(a.lat)];return new ol.geom.Point(ol.proj.fromLonLat(b))}else {return null}}},{name:'icon',calculate:function(b){var a='l';switch(b.size){case '1.2x1.8':case '1.2x3.6':case '1.5x3':case '2.3x3.14':case '2.3x3.5':a='s';break;case '3x4':case '3x6':case '6x3':case '7x4':case '3x11':case '3x12':a='b';break;}return a}},{name:'coverages',calculate:function(a){return Bigmedia.Vars.calculateCoverages(a)}},{name:'parsedOccupancy',calculate:function(a){if(!a.faceId){return null}var b=Ext.getStore('Faces').getById(a.faceId);return b?b.get('parsedOccupancy'):null}}],setCampaign:function(a){},proxy:{type:'campproxy',limitParam:null,pageParam:'',startParam:'',url:'proposals',listeners:{exception:function(c,b,a){}}}});Ext.define('Bigmedia.model.CampPoi',{extend:Bigmedia.model.CampBase,fields:[{name:'id_category',type:'int'},{name:'categoryId',type:'int'},{name:'category',calculate:function(a){var d=Ext.getStore('PoiCategoriesTree');var b=d.getNodeById(+a.id_category||+a.categoryId);var c='';if(b){c=b.get('name')}return c}},{name:'custom_category'},{name:'iconId'},{name:'color'},{name:'name',type:'string'},{name:'address'},{name:'housenumber'},{name:'city'},{name:'lon'},{name:'lat'},{name:'geometry',serialize:function(b,a){return Bigmedia.Vars.writeFeatureGeometry(a.get('geometry'))}},{name:'centroid',persist:!1},{name:'feature',persist:!1}],setCampaign:function(a){},proxy:{type:'campproxy',limitParam:null,pageParam:'',startParam:'',url:'pois',listeners:{exception:function(c,b,a){}},reader:{type:'json',transform:{fn:function(a){var b=this;a.forEach(function(b){try{if(b.geometry&&typeof b.geometry!=='object'){b.geometry=Bigmedia.Vars.readFeatureGeometry(b.geometry)}if(parseFloat(b.lon)&&parseFloat(b.lat)){var c=[parseFloat(b.lon),parseFloat(b.lat)];b.centroid=new ol.geom.Point(ol.proj.fromLonLat(c));if(!b.geometry){b.geometry=b.centroid}}}catch(d){console.log('error converting geometry')}});return a},scope:this}}}});Ext.define('Bigmedia.model.PosterTask',{extend:Bigmedia.model.CampBase,idProperty:'id',fields:[{name:'id'},{name:'proposalId',reference:{parent:'Proposal'},allowBlank:!1},{name:'posterId',reference:{parent:'Poster'},allowBlank:!1},{name:'coverDate',type:'date',dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'}],proxy:{type:'rest',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/postertasks',writer:{writeAllFields:!0}}});Ext.define('Bigmedia.model.Estimation',{extend:Bigmedia.model.CampBase,fields:[{name:'startDate',type:'date'},{name:'endDate',type:'date'},{name:'total'},{name:'measureUnit',type:'int'}],proxy:{type:'campproxy',limitParam:null,pageParam:'',startParam:'',url:'estimations'}});Ext.define('Bigmedia.proxy.CampProxy2',{extend:Ext.data.proxy.Rest,alias:'proxy.campproxy2',buildUrl:function(d){var f=this,h=d.getOperation(),i=h.getRecords(),b=i?i[0]:null,j=f.getFormat(),a=f.getUrl(d),k=d.getParams(),c;if(b&&!b.phantom){c=b.getId()}else {c=h.getId()}if(j){if(!a.match(f.periodRe)){a+='.'}a+=j}if(!b){var e=k.filter;if(e){e=Ext.decode(e);c=e[0].value;var g=a.charAt()!=='/'?'/':'';a='/api/v1/campaigns/'+encodeURIComponent(c)+g+a;delete k['filter']}}else {if(b.get('campaignId')){c=b.get('campaignId');var g=a.charAt()!=='/'?'/':'';a='/api/v1/campaigns/'+encodeURIComponent(c)+g+a}else {a='/api/v1/'+a}}d.setUrl(a);return f.callParent([d])}});Ext.define('Bigmedia.model.Published',{extend:Bigmedia.model.CampBase,fields:[{name:'id',type:'string'},{name:'name',type:'string'},{name:'startDate',type:'date',dateFormat:'c',defaultValue:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()+1,1)),dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'endDate',type:'date',dateFormat:'c',defaultValue:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()+2,0)),dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'note',type:'string',defaultValue:''},{name:'closed',type:'int',defaultValue:0},{name:'deleted',type:'int'},{name:'email',type:'string'},{name:'cryptoHash',type:'string'},{name:'createdAt',type:'date',dateFormat:'c',persist:!1},{name:'updatedAt',type:'date',dateFormat:'c',persist:!1},{name:'ownerId',type:'int'},{name:'showBigmediaCodes',defaultValue:!0,serialize:function(a){return a?1:0}},{name:'showSupplierCodes',defaultValue:!1,serialize:function(a){return a?1:0}},{name:'showDoorsCodes',defaultValue:!1,serialize:function(a){return a?1:0}},{name:'showSuppliers',defaultValue:!1,serialize:function(a){return a?1:0}},{name:'showMetrics',defaultValue:!1,serialize:function(a){return a?1:0}},{name:'showCptMetrics',defaultValue:!1,serialize:function(a){return a?1:0}},{name:'showCoverage',defaultValue:!1,serialize:function(a){return a?1:0}},{name:'showPrices',defaultValue:!1,serialize:function(a){return a?1:0}},{name:'showHeatmap',defaultValue:!1,serialize:function(a){return a?1:0}},{name:'heatmapName'},{name:'heatmapParams',convert:function(a){try{return a&&typeof a!='object'?JSON.parse(a):a}catch(b){console.error(b);return null}},serialize:function(a){return a?JSON.stringify(a):null}},{name:'heatmapParamsXml'}],proxy:{type:'campproxy',limitParam:null,pageParam:'',startParam:'',url:'published',writer:{writeAllFields:!0}}});Ext.define('Bigmedia.model.ByNumber',{extend:Ext.data.Model,fields:[{name:'id',type:'string'},{name:'name',type:'string'},{name:'faces'},{name:'addCount',type:'int'},{name:'totalCount',type:'int'}]});Ext.define('Bigmedia.model.CityPolygon',{extend:Ext.data.Model,fields:[{name:'id',type:'int'},{name:'idCity',type:'int'},{name:'idPolygon',type:'int'},{name:'lat',type:'float'},{name:'lon',type:'float'},{name:'type',type:'string'},{name:'geog',type:'array'},{name:'transit',type:'float'},{name:'weight',type:'float'}]});Ext.define('Bigmedia.model.Coverage',{extend:Ext.data.Model,fields:['id','day','id_city',{name:'cityName',calculate:function(b){var a=Ext.getStore('Cities');return a.getById(b.id_city).get('name')}},{name:'covMax',type:'float',defaultValue:0},{name:'one',calculate:function(a){if(a.covMax&&a.grps){return a.covMax*a.grps/(a.covMax+a.grps)}else {return 0}}},{name:'three',calculate:function(a){if(a.covMax&&a.grps){return a.covMax*Math.pow(a.grps/(a.covMax+a.grps),3)}else {return 0}}},{name:'five',calculate:function(a){if(a.covMax&&a.grps){return a.covMax*Math.pow(a.grps/(a.covMax+a.grps),5)}else {return 0}}},{name:'ten',calculate:function(a){if(a.covMax&&a.grps){return a.covMax*Math.pow(a.grps/(a.covMax+a.grps),10)}else {return 0}}},{name:'fifteen',calculate:function(a){if(a.covMax&&a.grps){return a.covMax*Math.pow(a.grps/(a.covMax+a.grps),15)}else {return 0}}},{name:'twenty',calculate:function(a){if(a.covMax&&a.grps){return a.covMax*Math.pow(a.grps/(a.covMax+a.grps),20)}else {return 0}}},{name:'thirty',calculate:function(a){if(a.covMax&&a.grps){return a.covMax*Math.pow(a.grps/(a.covMax+a.grps),30)}else {return 0}}},{name:'fourty',calculate:function(a){if(a.covMax&&a.grps){return a.covMax*Math.pow(a.grps/(a.covMax+a.grps),40)}else {return 0}}},{name:'fifty',calculate:function(a){if(a.covMax&&a.grps){return a.covMax*Math.pow(a.grps/(a.covMax+a.grps),50)}else {return 0}}},{name:'sixty',calculate:function(a){if(a.covMax&&a.grps){return a.covMax*Math.pow(a.grps/(a.covMax+a.grps),60)}else {return 0}}},{name:'seventy',calculate:function(a){if(a.covMax&&a.grps){return a.covMax*Math.pow(a.grps/(a.covMax+a.grps),70)}else {return 0}}},{name:'eighty',calculate:function(a){if(a.covMax&&a.grps){return a.covMax*Math.pow(a.grps/(a.covMax+a.grps),80)}else {return 0}}},{name:'coverages'},{name:'grps'}],proxy:{type:'memory',reader:{type:'json',rootProperty:'items'}}});Ext.define('Bigmedia.model.FaceInfo',{extend:Ext.data.Model,fields:[{name:'id',type:'int'},{name:'id_sidetype',type:'int'},{name:'num',calculate:function(d){var c=Ext.getStore('Faces');var a=c.getById(d.id);var b='';if(a){b=a.get('num')}return b}},{name:'sidetype',calculate:function(d){var c=Ext.getStore('Sidetypes');var a=c.findRecord('id',d.id_sidetype);var b='';if(a){b=a.get('name')}return b}},{name:'city',calculate:function(d){var c=Ext.getStore('Faces');var a=c.getById(d.id);var b='';if(a){b=a.get('city')}return b}},{name:'address',calculate:function(d){var c=Ext.getStore('Faces');var a=c.getById(d.id);var b='';if(a){b=a.get('address')}return b}},{name:'size',calculate:function(d){var c=Ext.getStore('Faces');var a=c.getById(d.id);var b='';if(a){b=a.get('size')}return b}},{name:'network',calculate:function(d){var c=Ext.getStore('Faces');var a=c.getById(d.id);var b='';if(a){b=a.get('network')}return b}}],idProperty:'id',proxy:{type:'ajax',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/data?faceinfo=1&locale='+Bigmedia.Locales.currentLocale,reader:{type:'json'}}});Ext.define('Bigmedia.model.FacePhoto',{extend:Ext.data.Model,fields:[{name:'faceId',reference:'FaceInfo'},{name:'src',type:'string'}],idProperty:'id',proxy:{type:'ajax',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/data?facephoto=1&locale='+Bigmedia.Locales.currentLocale,reader:{type:'json',rootProperty:'face'}}});Ext.define('Bigmedia.model.GoogleMapSearchCache',{extend:Bigmedia.model.Base,fields:['text','lon','lat']});Ext.define('Bigmedia.model.KSPolygon',{extend:Ext.data.Model,fields:[{name:'id',type:'int'},{name:'lat1'},{name:'lat2'},{name:'lon1'},{name:'lon2'},{name:'lon'},{name:'lat'},{name:'transit'}]});Ext.define('Bigmedia.model.PeriodMonitoring',{extend:Bigmedia.model.BaseSchema,model:'PeriodMonitoring',idProperty:'id',convertOnSet:!1,fields:[{name:'id',type:'int'},{name:'date',type:'string'},{name:'startDate',type:'date',dateFormat:'c',defaultValue:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()-1,1)),dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'endDate',type:'date',dateFormat:'c',defaultValue:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth(),0)),dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'minDate',type:'date',dateFormat:'c',dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'maxDate',type:'date',dateFormat:'c',dateWriteFormat:'Y-m-d\\T00:00:00.000\\Z'},{name:'periodText',calculate:function(a){return Bigmedia.Vars.getPeriodText(a.startDate,a.endDate)}},{name:'periodYear',calculate:function(a){return a.startDate.getFullYear()}},{name:'periodMonth',calculate:function(a){return a.startDate.getMonth()}},{name:'periods',convert:function(a){if(!a){return null}if(typeof a==='object'){return a}var b=null;try{b=Bigmedia.Vars.processObject(JSON.parse(a),function(b){return typeof b==='object'?b:Ext.Date.parse(b,'c',!0)||b})}catch(c){console.log('select value: %o',a);console.log('error parsing saved select: %o',c)}finally{return b}},serialize:function(a){if(!a){return null}var b=Bigmedia.Vars.processObject(a,function(b){return b instanceof Date?Ext.Date.localToUtc(Ext.Date.clearTime(b)):b});return JSON.stringify(b)}}],proxy:{type:'rest',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/monitoring',reader:{type:'json'},appendId:!1}});Ext.define('Bigmedia.proxy.MonitoringProxy',{extend:Ext.data.proxy.Rest,alias:'proxy.monitoringproxy',buildUrl:function(b){var c=this,g=b.getOperation(),e=g.getRecords(),d=e?e[0]:null,h=c.getFormat(),a=c.getUrl(b),k=b.getParams(),i;if(d&&!d.phantom){i=d.getId()}else {i=g.getId()}if(h){if(!a.match(c.periodRe)){a+='.'}a+=h}if(!d){var f=Ext.decode(k.MonitoringId);if(f){var j=a.charAt()!=='/'?'/':'';a='/api/v1/monitoring/'+encodeURIComponent(f)+j+a}}else {console.log([c,e]);a='/api/v1/monitoring/'+a}b.setUrl(a);return c.callParent([b])}});Ext.define('Bigmedia.model.MonitoringBase',{extend:Bigmedia.model.BaseSchema,idProperty:'id',fields:[{name:'id'},{name:'MonitoringId',reference:{parent:'PeriodMonitoring'},allowBlank:!1}],proxy:'monitoringproxy'});Ext.define('Bigmedia.model.MonitoringData',{extend:Bigmedia.model.MonitoringBase,fields:[{name:'id',type:'int'},{name:'MonitoringId',type:'int'},{name:'date',type:'string'},{name:'fConstr',type:'int'},{name:'supplierNo',type:'string'},{name:'city',type:'string'},{name:'address',type:'string'},{name:'constrtype',type:'string'},{name:'sizetype',type:'string'},{name:'owner',type:'string'},{name:'advertisingCategory',type:'string'},{name:'brand',type:'string'},{name:'advevents',type:'string'},{name:'translate',type:'string'},{name:'damage',type:'int'},{name:'note',type:'string'},{name:'lon',type:'float'},{name:'lat',type:'float'},{name:'catab',type:'string'},{name:'brandId',type:'int'}],setMonitoring:function(a){console.log('setMonitoring',a)},proxy:{type:'monitoringproxy',limitParam:null,pageParam:'',startParam:'',url:'data',listeners:{exception:function(c,b,a){console.log('request: %o',b);console.log('operation: %o',a)}},reader:{type:'json'}}});Ext.define('Bigmedia.model.Period',{extend:Ext.data.Model,fields:[{name:'id',type:'string'},{name:'name',type:'string'},{name:'faces'},{name:'facesReserved'},{name:'addCount',type:'int'},{name:'totalCount',type:'int'}]});Ext.define('Bigmedia.model.PlanCity',{extend:Ext.data.Model,hasMany:[{model:'Split',name:'sizes'},{model:'Split',name:'selsizes'},{model:'Split',name:'suppliers'},{model:'Face',name:'faces'},{model:'Split',name:'selsuppliers'}],fields:[{name:'id'},{name:'name',type:'string'},{name:'budget',type:'float',defaultValue:null,allowNull:!0},{name:'coverage',type:'float',defaultValue:null,allowNull:!0},{name:'quantity',type:'integer',defaultValue:null,allowNull:!0},{name:'facesCount',type:'integer'},{name:'population',calculate:function(b){var a=Ext.getStore('Cities').getById(b.id);if(a){return a.get('population')/1000}}},{name:'area'},{name:'populationPart',calculate:function(a){return a.population/40000*100}},{name:'selected'},{name:'progress'}],proxy:{type:'memory',autoLoad:!0}});Ext.define('Bigmedia.model.Split',{extend:Ext.data.Model,fields:[{name:'id'},{name:'name',type:'string'},{name:'min'},{name:'max'},{name:'count'},{name:'limits'},{name:'quantity'},{name:'longname',calculate:function(a){return a.name+' ('+a.quantity+' found)'}}],proxy:{type:'memory',autoLoad:!0}});Ext.define('Bigmedia.model.ResAlgorithm',{extend:Ext.data.Model,hasMany:{model:'Face',name:'faces'},fields:[{name:'id'},{name:'algorithm',type:'string'},{name:'boards',type:'integer'},{name:'sumOts',type:'float'},{name:'ots',type:'float'},{name:'grp',type:'float'},{name:'cpt',calculate:function(a){return a.budget/(a.sumOts*30)}},{name:'budget',type:'float'},{name:'coverage',type:'float'},{name:'selected',type:'boolean'},{name:'descr',calculate:function(a){return Ext.String.format(Bigmedia.Locales.simpleResult.btnDescription,a.boards,a.ots,a.coverage,Ext.util.Format.currency(Math.round(a.cpt*100)/100),Ext.util.Format.currency(Math.round(a.budget)))}}],proxy:{type:'memory'}});Ext.define('Bigmedia.model.PlanVariant',{extend:Ext.data.Model,hasMany:{model:'Face',name:'faces'},fields:[{name:'id'},{name:'algorithm',type:'string'},{name:'id_city',type:'integer'},{name:'city',type:'string'},{name:'boards',type:'integer'},{name:'ots',type:'float'},{name:'grp',type:'float'},{name:'cpt',calculate:function(a){return a.budget/(a.ots*30)}},{name:'budget',type:'float'},{name:'coverage',type:'float'},{name:'selected',type:'boolean'},{name:'descr',calculate:function(a){return Ext.String.format(Bigmedia.Locales.simpleResult.btnDescription,a.boards,a.ots,a.coverage,Ext.util.Format.currency(Math.round(a.cpt*100)/100),Ext.util.Format.currency(Math.round(a.budget)))}}],proxy:{type:'memory'},getCovStat:function(f){var d=this,e=Ext.getStore('CityBoundaries'),a=f||Bigmedia.Vars.coverageDays.length-1;day=Bigmedia.Vars.coverageDays[a],res={coverage:null,grps:0,coverages:[],dayIndex:a,day:day},city=e.getById(d.get('id_city'));d.faces().each(function(c){var b=c.get('face')?c.get('face'):c;if(city){res.grps+=b.get('grp')?b.get('grp'):0.01;if(!b.get('coverages')){Bigmedia.Vars.calculateFaceCoverages(b)}if(b.get('coverages')&&b.get('coverages')[a]){res.coverages.push(b.get('coverages')[a])}else {console.log('no coverage: %o',b)}}});res.coverage=res.coverages.reduce(function(a,c){if(!a){return c}else {var b;try{b=a.union(c)}catch(h){console.error('error union geometry');b=a}return b}},null);if(res.coverage){try{var g=jsts.operation.union.UnaryUnionOp.union(res.coverage);var b=jsts.operation.overlay.OverlayOp.intersection(city.get('jsts'),g);var c=turf.area(Bigmedia.Vars.convertJstsToTurf(b));res.coverage=b;res.area=c;res.covMax=c*100/city.get('area');res.grps=res.grps*day}catch(h){console.error('error calculate coverage')}}return res}});Ext.define('Bigmedia.model.Poi',{extend:Ext.data.Model,idProperty:'id',fields:[{name:'id',type:'int'},{name:'id_category',type:'int'},{name:'categoryId',type:'int'},{name:'category',calculate:function(a){var d=Ext.getStore('PoiCategoriesTree');var b=d.getNodeById(+a.id_category||+a.categoryId);var c='';if(b){c=b.get('name')}return c}},{name:'custom_category'},{name:'iconId'},{name:'color'},{name:'name',type:'string'},{name:'name_ukr',type:'string',persist:!1},{name:'name_ru',type:'string',persist:!1},{name:'name_en',type:'string',persist:!1},{name:'address'},{name:'housenumber'},{name:'city'},{name:'lon'},{name:'lat'},{name:'geometry',mapping:function(a){if(a.geometry){return a.geometry}else {if(a.lon&&a.lat){return {'type':'Point','coordinates':ol.proj.fromLonLat([a.lon,a.lat])}}}},serialize:function(b,a){return Bigmedia.Vars.writeFeatureGeometry(a.get('geometry'))},persist:!0},{name:'centroid',persist:!1},{name:'feature',persist:!1},{name:'iconPath',calculate:function(a){var c;if(a.id_category||a.categoryId){var d=Ext.getStore('PoiCategoriesTree');var b=d.getNodeById(+a.id_category||+a.categoryId);if(b&&b.get('iconPath')){c='resources/images/symbols/'+b.get('iconPath')}}else {if(a.iconId){c='api/v1/icons/'+a.iconId+'/image'}}return c}},{name:'addCount',type:'int',defaultValue:'0',persist:!1},{name:'subCount',type:'int',defaultValue:'0',persist:!1},{name:'totalCount',type:'int',defaultValue:'0',persist:!1}]});Ext.define('Bigmedia.model.PoiCategoryFaces',{extend:Ext.data.TreeModel,idProperty:'id',fields:[{name:'id',type:'int'},{name:'id_parent',type:'int'},{name:'name',calculate:function(d){var a=Ext.getStore('PoiCategories');if(!a){return ''}var b=a.getById(d.id);var c='';if(b){c=b.get('name')}return c}},{name:'addCount',type:'int',defaultValue:'0'},{name:'subCount',type:'int',defaultValue:'0'},{name:'totalCount',type:'int',defaultValue:'0'}]});Ext.define('Bigmedia.model.PoiFilter',{extend:Ext.data.Model,idProperty:'name_ukr',fields:[{name:'id_category',type:'int'},{name:'category',calculate:function(d){var c=Ext.getStore('PoiCategories');var a=c.getById(+d.id_category);var b='';if(a){b=a.get('name')}return b}},{name:'name',calculate:function(a){return a['name_'+Bigmedia.Locales.currentLocale]||a['name_ru']||''}},{name:'name_ukr',type:'string'},{name:'name_ru',type:'string'},{name:'name_en',type:'string'},{name:'addCount',type:'int',defaultValue:'0'},{name:'subCount',type:'int',defaultValue:'0'},{name:'totalCount',type:'int',defaultValue:'0'}]});Ext.define('Bigmedia.model.PoiManual',{extend:Ext.data.Model,idProperty:'id',fields:[{name:'id',type:'int'},{name:'name',type:'string'},{name:'mixedAddress',type:'string'},{name:'address'},{name:'housenumber'},{name:'city'},{name:'lon',defaultValue:null},{name:'lat',defaultValue:null},{name:'resultName'},{name:'resultAddress'},{name:'resultHousenumber'},{name:'resultCity'},{name:'resultLon',type:'number',defaultValue:null},{name:'resultLat',type:'number',defaultValue:null},{name:'resultLatLon',calculate:function(a){return a.resultLat?a.resultLat.toString()+', '+a.resultLon.toString():''}},{name:'resultGeometry'}]});Ext.define('Bigmedia.model.RulesGroup',{extend:Ext.data.Model,identifier:'uuid',fields:['id','name'],proxy:{type:'localstorage',id:'RulesGroup'},getFaceMonthPrice:function(a){var d=this;dtStore=Ext.getStore('DiscountTypes'),rules=d.rules().getData();for(var c=0;c<rules.length;c++){var b=rules.items[c].meetRule(a);if(b){return dtStore.getMonthPrice(a.price,b.type,b.value)}}return a.price},getFaceMonthClientPrice:function(c){var e=this;mtStore=Ext.getStore('MarginTypes'),rules=e.rules().getData(),fStore=Ext.getStore('Faces'),face=fStore.getById(c.faceId);if(!face){return null}var d=face.getData();for(var b=0;b<rules.length;b++){var a=rules.items[b].meetRule(d);if(a){return mtStore.getPriceWithMargin(c.netCost,a.marginType,a.marginValue,a.marginRoundType)}}return null},getFacePeriodPrice:function(a,d,e){var f=this;dtStore=Ext.getStore('DiscountTypes'),rules=f.rules().getData();for(var c=0;c<rules.length;c++){var b=rules.items[c].meetRule(a);if(b){return dtStore.getPeriodPrice(a.price,b.type,b.value,d,e)}}return dtStore.getPeriodPrice(a.price,'fixedPricePerMonth',a.price,d,e)}});Ext.define('Bigmedia.model.Rule',{extend:Ext.data.Model,fields:['id',{name:'rulesGroupId',reference:{parent:'RulesGroup',inverse:{autoLoad:!0}}},'suppliers','cities','sizes','sidetypes',{name:'lookup',calculate:function(a){var b={};if(a.suppliers&&a.suppliers.length>0){b.suppliers={};a.suppliers.forEach(function(c){b.suppliers[c]=c})}if(a.cities&&a.cities.length>0){b.cities={};a.cities.forEach(function(c){b.cities[c]=c})}if(a.sizes&&a.sizes.length>0){b.sizes={};a.sizes.forEach(function(c){b.sizes[c]=c})}if(a.sidetypes&&a.sidetypes.length>0){b.sidetypes={};a.sidetypes.forEach(function(c){b.sidetypes[c]=c})}return b}},'type','value','marginType','marginValue','marginRoundType',{name:'conditionText',calculate:function(a){var c=[],d='';if(a.suppliers&&a.suppliers.length>0){var b=[];Ext.getStore('Suppliers').each(function(c){if(a.lookup.suppliers[c.getId()]){b.push(c.get('name'))}});c.push(Ext.String.ellipsis(b.join(','),20))}if(a.cities&&a.cities.length>0){var b=[];Ext.getStore('Cities').each(function(c){if(a.lookup.cities[c.getId()]){b.push(c.get('name'))}});c.push(Ext.String.ellipsis(b.join(','),20))}if(a.sizes&&a.sizes.length>0){var b=[];Ext.getStore('Sizes').each(function(c){if(a.lookup.sizes[c.getId()]){b.push(c.get('name'))}});c.push(Ext.String.ellipsis(b.join(','),20))}if(a.sidetypes&&a.sidetypes.length>0){var b=[];Ext.getStore('Networks').each(function(c){if(a.lookup.sidetypes[c.getId()]){b.push(c.get('name'))}});c.push(Ext.String.ellipsis(b.join(','),20))}d=c.join('|');return d}},{name:'description',calculate:function(b){var c=[],d='';if(b.suppliers&&b.suppliers.length>0){var a=[];Ext.getStore('Suppliers').each(function(c){if(b.lookup.suppliers[c.getId()]){a.push(c.get('name'))}});c.push(Bigmedia.Locales.discountBuilder.descrSuppliers+' ('+a.length+'): '+a.join(','))}if(b.cities&&b.cities.length>0){var a=[];Ext.getStore('Cities').each(function(c){if(b.lookup.cities[c.getId()]){a.push(c.get('name'))}});c.push(Bigmedia.Locales.discountBuilder.descrCities+' ('+a.length+'): '+a.join(','))}if(b.sizes&&b.sizes.length>0){var a=[];Ext.getStore('Sizes').each(function(c){if(b.lookup.sizes[c.getId()]){a.push(c.get('name'))}});c.push(Bigmedia.Locales.discountBuilder.descrSizes+' ('+a.length+'): '+a.join(','))}if(b.sidetypes&&b.sidetypes.length>0){var a=[];Ext.getStore('Networks').each(function(c){if(b.lookup.sidetypes[c.getId()]){a.push(c.get('name'))}});c.push(Bigmedia.Locales.discountBuilder.descrTypes+' ('+a.length+'): '+a.join(','))}if(c.length>0){d=Bigmedia.Locales.discountBuilder.appliedConditions+':<br>'+c.join('<br>')+'<br>'}else {d=Bigmedia.Locales.discountBuilder.forAll+' '}var e=Ext.getStore('DiscountTypes').getById(b.type);if(e){d+=e.get('name')}d+=' '+b.valueText;return d}},{name:'valueText',calculate:function(a){var b='';switch(a.type){case 'percentDiscount':b='-'+a.value+'%';break;case 'fixedDiscount':b='-'+a.value+' UAH';break;default:b=a.value+' UAH';}return b}}],validators:{suppliers:{type:'length',min:1},type:'presence',value:'presence'},meetRule:function(c){var b=this,a=b.get('lookup');if((!a['suppliers']||a['suppliers'][c.id_supplier])&&(!a['cities']||a['cities'][c.id_city])&&(!a['sizes']||a['sizes'][c.id_size])&&(!a['sidetypes']||a['sidetypes'][c.id_network])){return {type:b.get('type'),value:b.get('value'),marginType:b.get('marginType'),marginValue:b.get('marginValue'),marginRoundType:b.get('marginRoundType')}}else {return null}},proxy:{type:'localstorage',id:'Rule'}});Ext.define('Bigmedia.model.Search',{extend:Ext.data.Model,fields:[{name:'id'},{name:'type'},{name:'name'},{name:'faces'}]});Ext.define('Bigmedia.model.SearchFaceByNumber',{extend:Ext.data.Model,fields:[{name:'id'},{name:'manualNo',type:'string'},{name:'faceId'},{name:'supplierNo',calculate:function(a){if(!a.manualNo||!a.faceId){return null}var b=Ext.getStore('Faces').getById(a.faceId);return b?b.get('supplierNo'):null}},{name:'isFree',calculate:function(a){if(!a.manualNo||!a.faceId){return null}var c=Ext.getStore('Faces').getById(a.faceId);if(!c){return null}var b=Ext.getStore('Faces').getFilters().getByKey('filter_period');return !b||b.filter(c)}},{name:'status',calculate:function(a){return a.isFree===null?null:a.isFree?'':''}},{name:'supplier',calculate:function(a){if(!a.manualNo||!a.faceId){return null}var b=Ext.getStore('Faces').getById(a.faceId);return b?b.get('supplier'):null}},{name:'city',calculate:function(a){if(!a.manualNo||!a.faceId){return null}var b=Ext.getStore('Faces').getById(a.faceId);return b?b.get('city'):null}},{name:'address',calculate:function(a){if(!a.manualNo||!a.faceId){return null}var b=Ext.getStore('Faces').getById(a.faceId);return b?b.get('address'):null}},{name:'catab',calculate:function(a){if(!a.manualNo||!a.faceId){return null}var b=Ext.getStore('Faces').getById(a.faceId);return b?b.get('catab'):null}},{name:'size',calculate:function(a){if(!a.manualNo||!a.faceId){return null}var b=Ext.getStore('Faces').getById(a.faceId);return b?b.get('size'):null}},{name:'doorsNo',calculate:function(a){if(!a.manualNo||!a.faceId){return null}var b=Ext.getStore('Faces').getById(a.faceId);return b?b.get('doorsNo'):null}},{name:'price',calculate:function(a){if(!a.manualNo||!a.faceId){return null}var b=Ext.getStore('Faces').getById(a.faceId);return b?b.get('price'):null}}]});Ext.define('Bigmedia.model.Street',{extend:Ext.data.Model,fields:[{name:'id',type:'int'},{name:'id_city',type:'int'},{name:'city',calculate:function(d){var c=Ext.getStore('Cities');var a=c.findRecord('id',d.id_city);var b='';if(a){b=a.get('name')}return b}},{name:'name',calculate:function(a){return a['name_'+Bigmedia.Locales.currentLocale]||''}},{name:'name_ukr',type:'string'},{name:'name_ru',type:'string'},{name:'name_en',type:'string'},{name:'faces'},{name:'addCount',type:'int'},{name:'subCount',type:'int'},{name:'totalCount',type:'int'}]});Ext.define('Bigmedia.model.ThirdParty',{extend:Ext.data.Model,idProperty:'id',fields:[{name:'id',type:'int'},{name:'supplier_no',type:'string',allowNull:!0},{name:'inPlatform',type:'boolean',defaultValue:!1},{name:'supplierNo',calculate:function(a){return a.supplier_no},allowNull:!0},{name:'doors_no',type:'int',allowNull:!0},{name:'doorsNo',calculate:function(a){return a.doors_no},allowNull:!0},{name:'id_city',type:'int'},{name:'id_size',type:'int'},{name:'id_network',type:'int'},{name:'id_catab',type:'int'},{name:'city',calculate:function(a){return Bigmedia.Locales.refCity[a.id_city]}},{name:'address'},{name:'type'},{name:'catab'},{name:'supplier_size'},{name:'supplier'},{name:'streets'},{name:'grp',allowNull:!0},{name:'ots',allowNull:!0},{name:'lon',type:'float'},{name:'lat',type:'float'},{name:'geometry',calculate:function(a){if(parseFloat(a.lon)&&parseFloat(a.lat)){var b=[parseFloat(a.lon),parseFloat(a.lat)];return new ol.geom.Point(ol.proj.fromLonLat(b))}else {return null}}},{name:'angle'},{name:'size',calculate:function(a){return Bigmedia.Locales.refSize[a.id_size]}},{name:'icon',calculate:function(b){var a='l';switch(b.size){case '1.2x1.8':case '1.2x3.6':case '1.5x3':case '2.3x3.14':case '2.3x3.5':a='s';break;case '3x4':case '3x6':case '6x3':case '7x4':case '3x11':case '3x12':a='b';break;}return a}},{name:'price',type:'number',allowNull:!0},{name:'finalPrice',calculate:function(a){return a.price},allowNull:!0}],proxy:{type:'memory'}});Ext.define('Bigmedia.proxy.SearchMapNominatimProxy',{extend:Ext.data.proxy.Ajax,alias:'proxy.searchmapnominatimproxy',useDefaultXhrHeader:!1,reader:{type:'json',rootProperty:'features'},buildUrl:function(a){var e=this,f=a.getOperation(),b=f.getRecords(),g=b?b[0]:null,d=e.getUrl(a),c=a.getParams(),h;d='geocoding/search?q='+encodeURIComponent(c.query)+'&format=geojson&accept-language=uk,en,ru&countrycodes=ua&addressdetails=1&polygon_geojson=1&polygon_threshold=0.001';delete c.query;a.setUrl(d);return e.callParent([a])}});Ext.define('Bigmedia.proxy.SearchMapTilerProxy',{extend:Ext.data.proxy.Ajax,alias:'proxy.searchmaptilerproxy',useDefaultXhrHeader:!1,reader:{type:'json',rootProperty:'features'},buildUrl:function(a){var e=this,f=a.getOperation(),b=f.getRecords(),g=b?b[0]:null,d=e.getUrl(a),c=a.getParams(),h;d='https://api.maptiler.com/geocoding/'+encodeURIComponent(c.query)+'.json?key=GmaJe1y4hHa7LFEFyCtk&language=uk,en,ru';delete c.query;a.setUrl(d);return e.callParent([a])}});Ext.define('Bigmedia.store.SearchMapTiler',{extend:Ext.data.Store,alias:'store.search-maptiler',fields:[{name:'properties'},{name:'bbox'},{name:'geometry'},{name:'place_id',calculate:function(a){return a.properties.place_id}},{name:'osm_type',calculate:function(a){return a.properties.osm_type}},{name:'osm_id',calculate:function(a){return a.properties.osm_id}},{name:'category',calculate:function(a){return a.properties.category}},{name:'type',calculate:function(a){return a.properties.type}},{name:'display_name',calculate:function(a){return a.properties.display_name}},{name:'icon',calculate:function(a){return a.properties.icon}},{name:'address',calculate:function(a){return a.properties.address}},{name:'centroid',calculate:function(a){return turf.centroid(a.geometry)}},{name:'olGeometry',calculate:function(a){return a.properties.category==='boundary'?new ol.geom.Polygon(a.geometry.coordinates.map(function(b){return b.map(function(c){return ol.proj.fromLonLat(c)})})):a.properties.category==='highway'?new ol.geom.LineString(a.geometry.coordinates.map(function(b){return ol.proj.fromLonLat(b)})):new ol.geom.Point(ol.proj.fromLonLat(a.centroid.geometry.coordinates))}}],autoLoad:!1,groupField:'name',proxy:{type:'searchmapnominatimproxy',limitParam:null,pageParam:'',startParam:''},listeners:{load:function(c,d,a,b,e){}}});Ext.define('Bigmedia.store.Advertisers',{extend:Ext.data.Store,alias:'store.advertisers',storeId:'Advertisers',model:'Bigmedia.model.Advertiser',autoLoad:!0});Ext.define('Bigmedia.store.CampChartStore',{extend:Ext.data.Store,alias:'store.campchartstore',fields:[{name:'label',type:'string'},{name:'count',type:'float'},{name:'budget',type:'float'},{name:'cpt',type:'float'}]});Ext.define('Bigmedia.store.Campaigns',{extend:Ext.data.Store,alias:'store.campaigns',storeId:'Campaigns',model:'Bigmedia.model.Campaign',autoLoad:!0});Ext.define('Bigmedia.store.CartCoverages',{extend:Ext.data.Store,storeId:'CartCoverages',alias:'store.cartcoverages',idProperty:'id',model:'Bigmedia.model.Coverage'});Ext.define('Bigmedia.store.Catabs',{extend:Ext.data.Store,alias:'store.catabs',storeId:'Catabs',fields:[{name:'id',type:'int'},{name:'name',type:'string'},{name:'totalCount',type:'int',defaultValue:'0'},{name:'addCount',type:'int',defaultValue:'0'},{name:'subCount',type:'int',defaultValue:'0'}],data:Bigmedia.Locales.getRefStoreData('refAB'),proxy:{type:'memory'},autoLoad:!0});Ext.define('Bigmedia.store.Cities',{extend:Ext.data.Store,alias:'store.cities',storeId:'Cities',fields:[{name:'id',type:'int'},{name:'id_type',type:'int'},{name:'name',calculate:function(a){return a['name_'+Bigmedia.Locales.currentLocale]||''}},{name:'name_ukr',type:'string'},{name:'name_en',type:'string'},{name:'name_ru',type:'string'},{name:'population',type:'int'},{name:'totalCount',type:'int',defaultValue:'0'},{name:'addCount',type:'int',defaultValue:'0'},{name:'subCount',type:'int',defaultValue:'0'}],sorters:[{property:'id_type',direction:'ASC'},{property:'name',direction:'ASC'}],data:[{'id':1,'id_type':1,'name_ru':'','name_ukr':'','name_en':'Kyiv','population':2934522},{'id':3,'id_type':2,'name_ru':'','name_ukr':'','name_en':'Kharkiv','population':1450082},{'id':4,'id_type':2,'name_ru':'','name_ukr':'','name_en':'Lviv','population':757883},{'id':5,'id_type':2,'name_ru':'','name_ukr':'','name_en':'Odessa','population':1011494},{'id':6,'id_type':3,'name_ru':'','name_ukr':'','name_en':'Zaporizhya','population':745432},{'id':10,'id_type':2,'name_ru':'','name_ukr':'','name_en':'Dnipro','population':1002944},{'id':11,'id_type':3,'name_ru':' ','name_ukr':' ','name_en':'Kryviy Rig','population':632422},{'id':12,'id_type':4,'name_ru':'-','name_ukr':'-','name_en':'Ivano-Frankivsk','population':257477},{'id':13,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Lutsk','population':216505},{'id':14,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Sumy','population':267343},{'id':15,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Chenivtsi','population':265682},{'id':19,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Kherson','population':291428},{'id':20,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Khmelnitskiy','population':268417},{'id':21,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Kremenchuk','population':221251},{'id':22,'id_type':3,'name_ru':'','name_ukr':'','name_en':'Mykolayiv','population':486255},{'id':23,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Poltava','population':289544},{'id':24,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Rivne','population':246574},{'id':25,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Ternopil','population':218653},{'id':26,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Vinnytsya','population':371855},{'id':29,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Zhitomir','population':266936},{'id':30,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Kropyvnytskiy','population':228630},{'id':31,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Uzhgorod','population':113996},{'id':32,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Mariupil','population':465735},{'id':33,'id_type':5,'name_ru':' ','name_ukr':' ','name_en':'Kyiv Region','population':null},{'id':36,'id_type':3,'name_ru':'','name_ukr':'','name_en':'Chernigiv','population':289399},{'id':38,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Cherkassy','population':278830},{'id':39,'id_type':4,'name_ru':' ','name_ukr':' ','name_en':'Bila Tserkva','population':209176},{'id':41,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Kramatorsk','population':188456},{'id':42,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Konstantynivka','population':71853},{'id':43,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Illichivsk','population':72338},{'id':48,'id_type':4,'name_ru':'','name_ukr':"'",'name_en':'Slavyansk','population':115919},{'id':49,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Krasnoarmiysk','population':null},{'id':50,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Pavlograd','population':106184},{'id':51,'id_type':4,'name_ru':'','name_ukr':"'",'name_en':'Kamyanske','population':241990},{'id':54,'id_type':5,'name_ru':' ','name_ukr':' ','name_en':'Kyiv Routes','population':null},{'id':56,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Boryspil','population':61807},{'id':57,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Melitopol','population':153992},{'id':58,'id_type':4,'name_ru':'-','name_ukr':"'-",'name_en':'Kamianets-Podilskyi','population':100281},{'id':59,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Berdiansk','population':114787},{'id':60,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Chop','population':8949},{'id':61,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Mukachevo','population':85892},{'id':62,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Kalush','population':66404},{'id':63,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Shepetivka','population':42062},{'id':64,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Oleksandriia','population':89847},{'id':65,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Kovel','population':69089},{'id':66,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Drohobych','population':97159},{'id':67,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Truskavets','population':28792},{'id':69,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Berdychiv','population':null},{'id':70,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Lubny','population':null},{'id':71,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Romny','population':null},{'id':72,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Pryluky','population':null},{'id':73,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Svitlovodsk','population':null},{'id':74,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Bershad','population':null},{'id':75,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Bratslav','population':null},{'id':76,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Wapnyarka','population':null},{'id':77,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Hnyvan','population':null},{'id':78,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Zhmerynka','population':null},{'id':79,'id_type':4,'name_ru':'','name_ukr':"'",'name_en':'Illyintsi','population':null},{'id':80,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Kalynivka','population':null},{'id':81,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Kryzhopil','population':null},{'id':82,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Ladyzhin','population':null},{'id':83,'id_type':4,'name_ru':'-','name_ukr':'-','name_en':'Luka-Meleshkovska','population':null},{'id':84,'id_type':4,'name_ru':'-','name_ukr':'-','name_en':'Mohyliv-Podilskii','population':null},{'id':85,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Orativ','population':null},{'id':86,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Pohrebische','population':null},{'id':87,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Tyvriv','population':null},{'id':88,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Tomashpil','population':null},{'id':89,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Trostyanets','population':null},{'id':90,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Tulchyn','population':null},{'id':91,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Turbov','population':null},{'id':92,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Shargorod','population':null},{'id':93,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Shpykiv','population':null},{'id':94,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Bezpillya','population':null},{'id':95,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Borislav','population':null},{'id':96,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Brody','population':null},{'id':97,'id_type':4,'name_ru':' ()','name_ukr':' ()','name_en':"Varash (Kuznetsovs'k)",'population':null},{'id':98,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Dubno','population':null},{'id':99,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Zdolbuniv','population':null},{'id':100,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Kolomiya','population':null},{'id':101,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Korosten','population':null},{'id':102,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Kremenets','population':null},{'id':103,'id_type':4,'name_ru':' ','name_ukr':' ','name_en':'Lviv Routes','population':null},{'id':104,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Malin','population':null},{'id':105,'id_type':4,'name_ru':'-','name_ukr':'-','name_en':'Mogiliv-Podilsky','population':null},{'id':106,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Nikopol','population':null},{'id':107,'id_type':4,'name_ru':' ','name_ukr':' ','name_en':'Nova Kakhovka','population':null},{'id':108,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Novovolynsk','population':null},{'id':109,'id_type':4,'name_ru':' ','name_ukr':' ','name_en':'Odessa Routes','population':null},{'id':110,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Piryatin','population':null},{'id':111,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Putivl','population':null},{'id':112,'id_type':4,'name_ru':'-','name_ukr':'-','name_en':'Rava-Ruska','population':null},{'id':113,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Sarni','population':null},{'id':114,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Smila','population':null},{'id':115,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Khorol','population':null},{'id':116,'id_type':4,'name_ru':'','name_ukr':'','name_en':'Chervonograd','population':null}],proxy:{type:'memory'},autoLoad:!0});Ext.define('Bigmedia.store.CityBoundaries',{extend:Ext.data.Store,alias:'store.cityboundaries',storeId:'CityBoundaries',model:'Bigmedia.model.CityBoundary',autoLoad:!0});Ext.define('Bigmedia.store.CityPolygon',{extend:Ext.data.Store,alias:'store.citypolygons',storeId:'CityPolygon',model:'Bigmedia.model.CityPolygon',autoLoad:!1,proxy:{type:'memory',reader:{type:'json'}}});Ext.define('Bigmedia.store.DataMonitoring',{extend:Ext.data.Store,alias:'store.DataMonitoring',storeId:'DataMonitoring',model:'Bigmedia.model.MonitoringData'});Ext.define('Bigmedia.store.DimensionStore',{extend:Ext.data.Store,alias:'store.dimensionstore',config:{dimensions:null},bgLoading:!1,dimStore:{},dimStores:{},updateDimensions:function(b,d){var a=this;if(b){b.forEach(function(c){if(!a.dimStore[c]){a.dimStore[c]={}}if(!a.dimStores[c]){a.dimStores[c]=new Ext.data.Store({fields:['id','name','totalCount','addCount'],proxy:'memory',sorters:[{property:'totalCount',direction:'DESC'}]})}});var c=a.getData().getSource()||a.getData();c.each(function(c){b.forEach(function(e){if(!a.dimStore[e]){a.dimStore[e]={}}if(c.get(e)){if(!a.dimStore[e][c.get(e)]){a.dimStore[e][c.get(e)]={totalCount:0,count:0,indexKeys:{}}}a.dimStore[e][c.get(e)].totalCount++;if(!a.getData().isItemFiltered(c)){a.dimStore[e][c.get(e)].count++}a.dimStore[e][c.get(e)].indexKeys[c.getId()]=c}})})}},syncDimensions:function(){var a=this,b=a.getDimensions();a.dimStore={};if(!b){return}var c={},d=!1;b.forEach(function(d){a.dimStore[d]={};if(a.getFilters()&&a.getFilters().getCount()>0){var b=a.getFilters().clone();if(b.get('filter'+d)){b.remove(b.get('filter'+d))}if(b.getCount()>0){c[d]=Ext.util.Filter.createFilterFn(b)}}});var e=a.getData().getSource()||a.getData();e.each(function(e){b.forEach(function(b){if(e.get(b)){if(!a.dimStore[b][e.get(b)]){a.dimStore[b][e.get(b)]={totalCount:0,count:0,indexKeys:{}}}a.dimStore[b][e.get(b)].totalCount++;if(!c[b]||c[b](e)){a.dimStore[b][e.get(b)].count++}a.dimStore[b][e.get(b)].indexKeys[e.getId()]=e;d=!0}})});b.forEach(function(b){a.dimStores[b].beginUpdate();Object.keys(a.dimStore[b]).forEach(function(c){if(!a.dimStores[b].getById(c)){a.dimStores[b].add({id:c,name:c,totalCount:a.dimStore[b][c].totalCount,addCount:a.dimStore[b][c].count})}else {a.dimStores[b].getById(c).set({totalCount:a.dimStore[b][c].totalCount,addCount:a.dimStore[b][c].count})}});a.dimStores[b].endUpdate()});if(d){a.fireEventArgs('dimensionschange',[])}},listeners:{clear:function(a){this.syncDimensions()},filterchange:function(c,b){var a=this;if(a.isLoading()||a.bgLoading){return}this.syncDimensions()},load:function(a){this.syncDimensions()},add:function(f,d){var a=this,e=a.getDimensions(),b={},c=!1;if(a.isLoading()||a.bgLoading){return}e.forEach(function(e){if(a.getFilters()&&a.getFilters().getCount()>0){var c=a.getFilters().clone();if(c.get('filter'+e)){c.remove(c.get('filter'+e))}if(c.getCount()>0){b[e]=Ext.util.Filter.createFilterFn(c)}}});d.forEach(function(e){Object.keys(a.dimStore).forEach(function(g){if(e.get(g)){if(!a.dimStore[g][e.get(g)]){a.dimStore[g][e.get(g)]={totalCount:0,count:0,indexKeys:{}}}a.dimStore[g][e.get(g)].totalCount++;if(b[g]&&b[g](e)){a.dimStore[g][e.get(g)].count++}a.dimStore[g][e.get(g)].indexKeys[e.getId()]=e;c=!0}})});if(c){a.fireEventArgs('dimensionschange',[])}},remove:function(f,d){var a=this,e=a.getDimensions(),b={},c=!1;if(a.isLoading()||a.bgLoading){return}e.forEach(function(e){if(a.getFilters()&&a.getFilters().getCount()>0){var c=a.getFilters().clone();if(c.get('filter'+e)){c.remove(c.get('filter'+e))}if(c.getCount()>0){b[e]=Ext.util.Filter.createFilterFn(c)}}});d.forEach(function(e){Object.keys(a.dimStore).forEach(function(g){if(e.get(g)&&a.dimStore[g][e.get(g)]){if(a.dimStore[g][e.get(g)].indexKeys[e.getId()]){a.dimStore[g][e.get(g)].totalCount--;if(b[g]&&b[g](e)){a.dimStore[g][e.get(g)].count--}delete a.dimStore[g][e.get(g)].indexKeys[e.getId()];c=!0}}})});if(c){a.fireEventArgs('dimensionschange',[])}}}});Ext.define('Bigmedia.store.DiscountTypes',{extend:Ext.data.Store,alias:'store.discounttypes',storeId:'DiscountTypes',fields:[{name:'id',type:'string'},{name:'name',type:'string'}],data:Bigmedia.Locales.getRefStoreData('refDiscountType'),proxy:{type:'memory'},autoLoad:!0,getMonthPrice:function(c,d,b){if(!d){return c}var a;switch(d){case 'fixedPricePerMonth':a=b;break;case 'fixedPricePerDay':a=b*30;break;case 'fixedPricePerWeek':a=Math.round(b*(4+2/7));break;case 'fixedPricePerTwoWeeks':a=Math.round(b*(2+1/7));break;case 'fixedDiscount':a=c-b;break;case 'percentDiscount':a=Math.round(c-c*b/100);break;default:a=c;}return a},getPeriodPrice:function(b,e,a,g,o){if(!e){return b}var c,d=24*60*60*1000,j=new Date(o.getTime()+d);switch(e){case 'fixedPricePerMonth':case 'fixedDiscount':case 'percentDiscount':var v=g.getDate(),w=j.getDate(),h=g.getMonth(),k=j.getMonth(),i=g.getFullYear(),p=j.getFullYear(),f=(p-i)*12+(k-h)-(v>w?1:0);if(v===w){if(e==='fixedDiscount'){c=f*b-a*f}else {if(e==='percentDiscount'){c=f*(b-b*a/100)}else {c=f*a}}}else {if(h===k){var l=Math.round((j-g)/d);var u=Math.round((new Date(i,h+1,1,0,0,0,0)-new Date(i,h,1,0,0,0,0))/d);if(e==='fixedDiscount'){c=(b-a)*l/u}else {if(e==='percentDiscount'){c=(b-b*a/100)*l/u}else {c=a*l/u}}}else {var s=Math.round((new Date(i,h+1,1,0,0,0,0)-g)/d),q=Math.round((new Date(i,h+1,1,0,0,0,0)-new Date(i,h,1,0,0,0,0))/d),m;if(e==='fixedDiscount'){m=(b-a)*s/q}else {if(e==='percentDiscount'){m=(b-b*a/100)*s/q}else {m=s/q*a}}var t=Math.round((j-new Date(p,k,1,0,0,0,0))/d),r=Math.round((new Date(p,k+1,1,0,0,0,0)-new Date(p,k,1,0,0,0,0))/d),n;if(e==='fixedDiscount'){n=(b-a)*t/r}else {if(e==='percentDiscount'){n=(b-b*a/100)*t/r}else {n=t/r*a}}c=m+n;if(f>0&&v<w){f--}if(e==='fixedDiscount'){c+=(b-a)*f}else {if(e==='percentDiscount'){c+=(b-b*a/100)*f}else {c+=f*a}}}};break;case 'fixedPricePerDay':var l=Math.floor((o-g+d)/d);c=a*l;break;case 'fixedPricePerWeek':var y=(o-g+d)/(7*d);c=Math.round(a*y);break;case 'fixedPricePerTwoWeeks':var x=(o-g+d)/(14*d);c=Math.round(a*x);break;default:c=b;}return c}});Ext.define('Bigmedia.store.Faces',{extend:Ext.data.Store,alias:'store.faces',storeId:'Faces',model:'Bigmedia.model.Face',refTables:{},statefulFilters:!0,proxy:{type:'ajax',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/data?face=1&locale='+Bigmedia.Locales.currentLocale,reader:{type:'json'}},updateCartFilter:function(){var b=this,a=Ext.getStore('ShoppingCart'),c=a.filtered?a.getData().getSource:a.getData();if(c.getCount()==0){b.removeCartFilter();return}var e=c.getValues('id');b.removeFilter('filtercart',!0);var d=new Ext.util.Filter({property:'id',id:'filtercart',operator:'notin',value:e});b.addFilter(d)},removeCartFilter:function(){this.removeFilter('filtercart')},listeners:{cartadd:function(){this.updateCartFilter()},cartremove:function(){this.updateCartFilter()},cartclear:function(){this.removeCartFilter()},beforesync:function(a){return {update:[],create:[],destroy:[]}},beforesort:function(c,a,b){this.isSorting=!0},sort:function(b,a){this.isSorting=!1},beforeload:function(c){var a=this;a.bgLoading=!0;a.fireEvent('beforeworkerload',a);var b=new Worker('packages/local/workers/loadfaces.min.js?v=2');b.onmessage=function(b){if(b.data.error){console.error('load failed: %o',b.data.error);a.bgLoading=!1}else {a.loadRawData(b.data.faces);var d=Ext.getStore('Sides');d.loadRawData(b.data.sides,!0);a.bgLoading=!1;a.fireEventArgs('load',[a,c.getData().getSource()||c.getData(),!0]);a.fireEvent('workerload')}};b.postMessage({locale:Bigmedia.Locales.currentLocale});return !1},filterchange:function(){var a=this;if(a.isLoading()||a.bgLoading){return}a.fireEvent('updatemap',a)},load:function(g,e,b,d,f){var a=this;var c=Ext.getStore('ShoppingCart');if(a.cartRelays===undefined){a.cartRelays=this.relayEvents(c,['add','remove','clear'],'cart')}if(b){Bigmedia.Vars.updateFacesFinalPrice()}a.fireEventArgs('updatemap',[a])}}});Ext.define('Bigmedia.store.FacesInfo',{extend:Ext.data.Store,alias:'store.facesinfo',storeId:'FacesInfo',model:'Bigmedia.model.FaceInfo',proxy:{type:'memory',reader:{type:'json'}},autoLoad:!1});Ext.define('Bigmedia.store.FormatsTree',{extend:Ext.data.TreeStore,storeId:'FormatsTree',alias:'store.FormatsTree',root:{expanded:!0,children:[{text:'3x6',leaf:!0,ref:'3x6',refId:1,filterFn:function(a){return a.id_size==1}},{text:'2.3x3.14',leaf:!0,ref:'2.3x3.14',refId:34,filterFn:function(a){return a.id_size==34}},{text:'1.2x1.8',leaf:!0,ref:'1.2x1.8',refId:13,filterFn:function(a){return a.id_size==13}},{text:'',leaf:!0,ref:'OTHER',refId:-1,filterFn:function(a){return a.id_size!=1&&a.id_size!=13&&a.id_size!=34}}]},fields:[{name:'text'},{name:'ref'},{name:'refId'}]});Ext.define('Bigmedia.store.GoogleMapSearchHistory',{extend:Ext.data.Store,alias:'store.googlemapsearchhistory',storeId:'GoogleMapSearchHistory',model:'Bigmedia.model.GoogleMapSearchCache',autoLoad:!1,proxy:{type:'ajax',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/googlemapsearchhistory',reader:{type:'json'}}});Ext.define('Bigmedia.store.KSParamsTree',{extend:Ext.data.TreeStore,storeId:'KSParamsTree',alias:'store.KSParamsTree',root:{expanded:!0,children:[{text:'Version 2',checked:!1,group:'version',code:'ver2',leaf:!0},{text:' ',expanded:!0,checked:!0,children:[{text:'0-17',code:'0-17',group:'age',leaf:!0,checked:!0},{text:'18-24',code:'18-24',group:'age',leaf:!0,checked:!0},{text:'25-34',code:'25-34',group:'age',leaf:!0,checked:!0},{text:'35-44',code:'35-44',group:'age',leaf:!0,checked:!0},{text:'45-54',code:'45-54',group:'age',leaf:!0,checked:!0},{text:'55-64',code:'55-64',group:'age',leaf:!0,checked:!0},{text:'65+',code:'65+',group:'age',leaf:!0,checked:!0}]},{text:' ',expanded:!0,checked:!0,children:[{text:'',qtip:'   ',code:'Low',group:'incomeLevel',leaf:!0,checked:!0},{text:'',qtip:'   ',code:'Medium',group:'incomeLevel',leaf:!0,checked:!0},{text:'',qtip:'   ',code:'High',group:'incomeLevel',leaf:!0,checked:!0}]},{text:'',expanded:!0,checked:!0,children:[{id:'sex_male',text:'',code:'male',group:'sex',leaf:!0,checked:!0},{id:'sex_female',text:'',code:'female',group:'sex',leaf:!0,checked:!0}]},{text:' ',expanded:!0,checked:!0,children:[{text:'',code:1,group:'daysOfWeek',leaf:!0,checked:!0},{text:'',code:2,group:'daysOfWeek',leaf:!0,checked:!0},{text:'',code:3,group:'daysOfWeek',leaf:!0,checked:!0},{text:'',code:4,group:'daysOfWeek',leaf:!0,checked:!0},{text:"'",code:5,group:'daysOfWeek',leaf:!0,checked:!0},{text:'',code:6,group:'daysOfWeek',leaf:!0,checked:!0},{text:'',code:7,group:'daysOfWeek',leaf:!0,checked:!0}]},{text:' ',expanded:!0,checked:!0,children:[{text:'00-08',code:'00-08',group:'hours',leaf:!0,checked:!0},{text:'08-12',code:'08-12',group:'hours',leaf:!0,checked:!0},{text:'12-17',code:'12-17',group:'hours',leaf:!0,checked:!0},{text:'17-21',code:'17-21',group:'hours',leaf:!0,checked:!0},{text:'21-00',code:'21-00',group:'hours',leaf:!0,checked:!0}]},{text:' ',expanded:!0,checked:!0,children:[{text:'',code:'cnt_only_home',group:'types',leaf:!0,checked:!0},{text:'',code:'cnt_only_work',group:'types',leaf:!0,checked:!0},{text:'-',code:'cnt_home_work',group:'types',leaf:!0,checked:!0},{text:'',code:'cnt_transit',group:'types',leaf:!0,checked:!0}]}]},fields:[{name:'text'},{name:'code'},{name:'group'}]});Ext.define('Bigmedia.store.KSPolygons',{extend:Ext.data.Store,alias:'store.kspolygons',storeId:'KSPolygons',model:'Bigmedia.model.KSPolygon',autoLoad:!1,proxy:{type:'memory',reader:{type:'json'}}});Ext.define('Bigmedia.store.KSStreets',{extend:Ext.data.Store,alias:'store.ksstreets',storeId:'KSStreets',fields:['id','direction','geometry'],autoLoad:!1,proxy:{type:'memory',reader:{type:'json'}}});Ext.define('Bigmedia.store.LinkPoiRulesTree',{extend:Ext.data.TreeStore,storeId:'LinkPoiRulesTree',alias:'store.LinkPoiRulesTree',root:{expanded:!0,children:[{text:'',leaf:!0,ref:'CLOSEST',sortFn:function(a,b){return Math.round(a.distance/50)-Math.round(b.distance/50)}},{text:'',leaf:!0,ref:'CHEAPEST',sortFn:function(a,b){return a.price-b.price}},{text:'  ',leaf:!0,ref:'COOLEST',sortFn:function(b,a){return a.ots-b.ots}}]},fields:[{name:'text'},{name:'ref'},{name:'sortFn'}]});Ext.define('Bigmedia.store.LocalCampaigns',{extend:Ext.data.Store,alias:'store.localcampaigns',storeId:'LocalCampaigns',model:'Bigmedia.model.Campaign',proxy:{type:'localstorage',id:'campaigns'},autoLoad:!0});Ext.define('Bigmedia.store.LocalProposals',{extend:Ext.data.Store,alias:'store.localproposals',storeId:'LocalProposals',model:'Bigmedia.model.Proposal',proxy:{type:'localstorage',id:'proposals'},autoLoad:!0});Ext.define('Bigmedia.store.MarginRoundTypes',{extend:Ext.data.Store,alias:'store.marginroundtypes',storeId:'MarginRoundTypes',fields:[{name:'id',type:'string'},{name:'name',type:'string'}],data:Bigmedia.Locales.getRefStoreData('refMarginRoundType'),proxy:{type:'memory'},autoLoad:!0,getPriceWithMargin:function(b,c,d,e){if(!c){return b}var a;switch(c){case 'percentMargin':a=Math.round(b+b*d/100);break;case 'fixedMargin':a=b+d;break;default:a=b;}switch(e){case 'ceilBy50':a=Math.ceil(a/50)*50;break;case 'ceilBy100':a=Math.ceil(a/100)*100;break;}return a}});Ext.define('Bigmedia.store.MarginTypes',{extend:Ext.data.Store,alias:'store.margintypes',storeId:'MarginTypes',fields:[{name:'id',type:'string'},{name:'name',type:'string'}],data:Bigmedia.Locales.getRefStoreData('refMarginType'),proxy:{type:'memory'},autoLoad:!0,getPriceWithMargin:function(b,d,c,e){if(!d){return b}var a;switch(d){case 'percentMarkup':a=Math.round(b+b*c/100);break;case 'fixedMarkup':a=b+c;break;case 'percentMargin':a=Math.round(b/(100-c)*100);break;default:a=b;}switch(e){case 'ceilBy50':a=Math.ceil(a/50)*50;break;case 'ceilBy100':a=Math.ceil(a/100)*100;break;}return a}});Ext.define('Bigmedia.store.NavigationTree',{extend:Ext.data.TreeStore,storeId:'NavigationTree',root:{expanded:!0,children:[{text:'Bigmedia network',view:'FacesView',leaf:!0,iconCls:'right-icon x-fa fa-desktop',routeId:'faces'},{text:'Campaigns',view:'campaign.CampaignsView',leaf:!0,userAction:'showAdvCampaigns',routeId:'campaigns'},{text:'Campaign',view:'campaign.CampView',leaf:!0,userAction:'showCampaignCard',routeId:'campView'},{view:'authentication.Login',hideMode:'offsets',routeId:'auth.login',isWindow:!0},{view:'authentication.PasswordReset',hideMode:'offsets',routeId:'auth.reset',isWindow:!0},{view:'authentication.LoginByCode',hideMode:'offsets',routeId:'auth.loginByCode',isWindow:!0},{view:'authentication.Register',hideMode:'offsets',routeId:'auth.signup',isWindow:!0},{text:'Profile',view:'profile.UserProfile',leaf:!0,iconCls:'x-fa fa-user',routeId:'profile'},{view:'authentication.CheckOut',hideMode:'offsets',isPersistent:!0,routeId:'checkout',isWindow:!0},{view:'authentication.ShoppingCart',hideMode:'offsets',isPersistent:!0,routeId:'cart',isWindow:!0},{text:'FAQ',view:'pages.FAQ',leaf:!0,hideMode:'offsets',iconCls:'x-fa fa-question',isPersistent:!0,routeId:'faq',isWindow:!0},{view:'error.Error404Window',leaf:!0,isPersistent:!1,routeId:'error404',isWindow:!0},{view:'error.Error500Window',leaf:!0,isPersistent:!1,routeId:'error500',isWindow:!0},{view:'error.BlankPage',leaf:!0,isPersistent:!1,routeId:'blank',isWindow:!0},{view:'det.DetPoster',leaf:!0,isPersistent:!1,routeId:'det.poster',isWindow:!0},{view:'det.DetMonitoring',leaf:!0,isPersistent:!1,routeId:'det.monitoring',isWindow:!0},{view:'dialog.DlgAddToCampaign',leaf:!0,isPersistent:!1,routeId:'dialog.DlgAddToCampaign',isWindow:!0},{view:'dialog.DlgChangePassword',leaf:!0,isPersistent:!1,routeId:'dialog.DlgChangePassword',isWindow:!0},{view:'dialog.DlgLogin',leaf:!0,isPersistent:!1,routeId:'dialog.DlgLogin',isWindow:!0},{view:'dialog.DlgUserInfo',leaf:!0,isPersistent:!1,routeId:'dialog.DlgUserInfo',isWindow:!0},{view:'drag.Image',leaf:!0,isPersistent:!1,routeId:'drag.Image',isWindow:!0},{view:'dialog.DlgAutoPlan',leaf:!0,isPersistent:!0,routeId:'planner',isWindow:!0},{view:'dialog.DlgAutoPlanNoob',leaf:!0,isPersistent:!1,routeId:'bma-noob',isWindow:!0}]},fields:[{name:'text'}]});Ext.define('Bigmedia.store.Networks',{extend:Ext.data.Store,alias:'store.networks',storeId:'Networks',fields:[{name:'id',type:'int'},{name:'name',type:'string'},{name:'totalCount',type:'int',defaultValue:'0'},{name:'addCount',type:'int',defaultValue:'0'},{name:'subCount',type:'int',defaultValue:'0'}],data:Bigmedia.Locales.getRefStoreData('refNetwork'),proxy:{type:'memory'},autoLoad:!0});Ext.define('Bigmedia.store.OTSParamsTree',{extend:Ext.data.TreeStore,storeId:'OTSParamsTree',alias:'store.OTSParamsTree',root:{expanded:!0,children:[{text:' ',expanded:!0,checked:!0,children:[{text:'18-24',code:'18-24',group:'age',leaf:!0,checked:!0},{text:'25-34',code:'25-34',group:'age',leaf:!0,checked:!0},{text:'35-44',code:'35-44',group:'age',leaf:!0,checked:!0},{text:'45-54',code:'45-54',group:'age',leaf:!0,checked:!0},{text:'55-64',code:'55-64',group:'age',leaf:!0,checked:!0}]},{text:' ',expanded:!0,checked:!0,children:[{text:'',qtip:'  5 ..',code:'Low',group:'incomeLevel',leaf:!0,checked:!0},{text:' ',qtip:'  5  10 ..',code:'BelowAverage',group:'incomeLevel',leaf:!0,checked:!0},{text:'',qtip:'  10  20 ..',code:'Average',group:'incomeLevel',leaf:!0,checked:!0},{text:' ',qtip:'  20  30 ..',code:'AboveAverage',group:'incomeLevel',leaf:!0,checked:!0},{text:'',qtip:'  30 ..',code:'High',group:'incomeLevel',leaf:!0,checked:!0}]},{text:'',expanded:!0,checked:!0,children:[{id:'sex_male',text:'',code:'Male',group:'sex',leaf:!0,checked:!0},{id:'sex_female',text:'',code:'Female',group:'sex',leaf:!0,checked:!0}]},{text:' ',expanded:!0,checked:!0,children:[{text:'',code:'Monday',group:'daysOfWeek',leaf:!0,checked:!0},{text:'',code:'Tuesday',group:'daysOfWeek',leaf:!0,checked:!0},{text:'',code:'Wednesday',group:'daysOfWeek',leaf:!0,checked:!0},{text:'',code:'Thursday',group:'daysOfWeek',leaf:!0,checked:!0},{text:"'",code:'Friday',group:'daysOfWeek',leaf:!0,checked:!0},{text:'',code:'Saturday',group:'daysOfWeek',leaf:!0,checked:!0},{text:'',code:'Sunday',group:'daysOfWeek',leaf:!0,checked:!0}]}]},fields:[{name:'text'},{name:'code'},{name:'group'}]});Ext.define('Bigmedia.store.OTSParamsTreeClient',{extend:Ext.data.TreeStore,storeId:'OTSParamsTreeClient',alias:'store.OTSParamsTreeClient',root:{expanded:!0,children:[{text:' ',expanded:!0,checked:!0,children:[{text:'18-24',code:'18-24',group:'age',leaf:!0,checked:!0},{text:'25-34',code:'25-34',group:'age',leaf:!0,checked:!0},{text:'35-44',code:'35-44',group:'age',leaf:!0,checked:!0},{text:'45-54',code:'45-54',group:'age',leaf:!0,checked:!0},{text:'55-64',code:'55-64',group:'age',leaf:!0,checked:!0}]},{text:' ',expanded:!0,checked:!0,children:[{text:'',qtip:'  5 ..',code:'Low',group:'incomeLevel',leaf:!0,checked:!0},{text:' ',qtip:'  5  10 ..',code:'BelowAverage',group:'incomeLevel',leaf:!0,checked:!0},{text:'',qtip:'  10  20 ..',code:'Average',group:'incomeLevel',leaf:!0,checked:!0},{text:' ',qtip:'  20  30 ..',code:'AboveAverage',group:'incomeLevel',leaf:!0,checked:!0},{text:'',qtip:'  30 ..',code:'High',group:'incomeLevel',leaf:!0,checked:!0}]},{text:'',expanded:!0,checked:!0,children:[{id:'sex_male',text:'',code:'Male',group:'sex',leaf:!0,checked:!0},{id:'sex_female',text:'',code:'Female',group:'sex',leaf:!0,checked:!0}]}]},fields:[{name:'text'},{name:'code'},{name:'group'}]});Ext.define('Bigmedia.store.PeriodMonitoring',{extend:Ext.data.Store,alias:'store.periodMonitoring',storeId:'PeriodMonitoring',model:'Bigmedia.model.PeriodMonitoring',autoLoad:!0});Ext.define('Bigmedia.store.PlanVariantStore',{extend:Ext.data.Store,alias:'store.planvarstore',model:'Bigmedia.model.PlanVariant',proxy:{type:'memory'},listeners:{add:function(b,a){a.forEach(function(c){c.faces().on('datachanged',function(){var d=c.getCovStat();c.set({boards:c.faces().getCount(),ots:c.faces().sum('ots'),grp:c.faces().sum('grp'),budget:c.faces().sum('finalPrice'),coverage:Math.round(d.covMax*d.grps*100/(d.covMax+d.grps))/100})})})},update:function(b,a,e,d){if(a.get('selected')){var c=a.get('city');b.each(function(f){if(f.get('city')===c&&f!==a){f.set('selected',!1)}})}}}});Ext.define('Bigmedia.store.PlannerStore',{extend:Ext.data.Store,alias:'store.plannerstore',model:'Bigmedia.model.Face',asynchronousLoad:!1,autoLoad:!0,proxy:{type:'memory'},getCoverageStat:function(b,d){var c=this,e=d||Bigmedia.Vars.coverageDays.length-1,f=c.getCoveragesAt(d);if(!b&&c.getAt(0)){b=c.getAt(0).get('id_city')}var a=f.filter(function(a){return +a['id_city']===+b&&+a.dayIndex===+e});if(a&&a.length>0){a=a[0];return {covMax:a.covMax,coverage:a.coverage,grps:a.grps,day:a.day}}else {return null}},getCoveragesAt:function(e){var f=this,c=Ext.getStore('CityBoundaries'),a={},b=e||Bigmedia.Vars.coverageDays.length-1;f.each(function(f){var d=f.get('face')?f.get('face'):f;if(c.getById(d.get('id_city'))){if(!a[d.get('id_city')]){a[d.get('id_city')]={coverage:null,grps:0,coverages:[]}}a[d.get('id_city')].grps+=d.get('grp')?d.get('grp'):0.01;if(!d.get('coverages')){Bigmedia.Vars.calculateFaceCoverages(d)}if(d.get('coverages')&&d.get('coverages')[b]){a[d.get('id_city')].coverages.push(d.get('coverages')[b])}else {console.log('no coverage: %o',d)}}});var d=[];Object.keys(a).forEach(function(f){var h=c.getById(f);if(h){a[f].coverage=a[f].coverages.reduce(function(a,c){if(!a){return c}else {var b;try{b=a.union(c)}catch(l){console.error('error union geometry');b=a}return b}},null);if(a[f].coverage){var i,g,j=0;try{i=jsts.operation.union.UnaryUnionOp.union(a[f].coverage);g=jsts.operation.overlay.OverlayOp.intersection(h.get('jsts'),i);j=turf.area(Bigmedia.Vars.convertJstsToTurf(g))}catch(l){console.error('error calculate city coverage')}var k=Bigmedia.Vars.coverageDays[b];d.push({id_city:f,dayIndex:b,day:k,covMax:j*100/h.get('area'),grps:a[f].grps*k,coverages:a[f].coverages,coverage:g})}}});return d},getCoverages:function(){var b=this,a=[];Bigmedia.Vars.coverageDays.forEach(function(d,c){a=a.concat(b.getCoveragesAt(c))});return a}});Ext.define('Bigmedia.store.PoiCategories',{extend:Ext.data.Store,alias:'store.poicategories',storeId:'PoiCategories',fields:[{name:'id',type:'int'},{name:'name',type:'string'},{name:'totalCount',type:'int',defaultValue:'0'},{name:'addCount',type:'int',defaultValue:'0'},{name:'subCount',type:'int',defaultValue:'0'}],data:Bigmedia.Locales.getRefStoreData('refPoiCategory'),proxy:{type:'memory'},autoLoad:!0});Ext.define('Bigmedia.store.PoiCategoriesTree',{extend:Ext.data.TreeStore,alias:'store.poicategoriestree',storeId:'PoiCategoriesTree',fields:[{name:'id'},{name:'id_parent',type:'int'},{name:'name',calculate:function(a){return a['name_'+Bigmedia.Locales.currentLocale]||a['name_ru']||''}},{name:'iconPath',calculate:function(a){return a.map_icon?a.map_icon+'.svg':null}},{name:'map_icon'},{name:'name_ukr'},{name:'name_ru'},{name:'name_en'}],proxy:{type:'ajax',limitParam:null,pageParam:'',startParam:'',url:'poicategorytree.json',reader:{type:'json'}},autoLoad:!0});Ext.define('Bigmedia.store.PoiCats',{extend:Ext.data.Store,alias:'store.poicats',storeId:'PoiCats',model:{fields:[{name:'id'},{name:'name_ukr'},{name:'name_ru'},{name:'name_en'},{name:'name',calculate:function(a){return a['name_'+Bigmedia.Locales.currentLocale]||a['name_ru']||''}},{name:'icon'}]},data:[{id:1,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:2,name_ru:'HiFi ',name_ukr:'HiFi ',name_en:'HiFi ',icon:'shop/hifi'},{id:3,name_ru:'',name_ukr:'',name_en:'',icon:'shop/car_parts'},{id:4,name_ru:', ',name_ukr:', ',name_en:', ',icon:''},{id:6,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:10,name_ru:'',name_ukr:'',name_en:'',icon:'amenity/embassy'},{id:11,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:12,name_ru:'',name_ukr:'',name_en:'',icon:'amenity/bar'},{id:13,name_ru:'',name_ukr:'',name_en:'',icon:'amenity/cafe'},{id:14,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:15,name_ru:'',name_ukr:'',name_en:'',icon:'amenity/pub'},{id:16,name_ru:'',name_ukr:'',name_en:'',icon:'amenity/restaurant'},{id:17,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:18,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:19,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:162,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:163,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:164,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:165,name_ru:', ',name_ukr:', ',name_en:', ',icon:''},{id:166,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:167,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:168,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:169,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:170,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:171,name_ru:',  ',name_ukr:',  ',name_en:',  ',icon:''},{id:173,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:174,name_ru:'  ',name_ukr:'  ',name_en:'  ',icon:''},{id:175,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:176,name_ru:' Lux',name_ukr:' Lux',name_en:' Lux',icon:''},{id:177,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:178,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:179,name_ru:' , ',name_ukr:' , ',name_en:' , ',icon:''},{id:180,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:181,name_ru:'   ',name_ukr:'   ',name_en:'   ',icon:''},{id:182,name_ru:'  ',name_ukr:'  ',name_en:'  ',icon:''},{id:183,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:184,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:185,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:186,name_ru:'  ',name_ukr:'  ',name_en:'  ',icon:''},{id:187,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:188,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:189,name_ru:', ',name_ukr:', ',name_en:', ',icon:''},{id:190,name_ru:', ',name_ukr:', ',name_en:', ',icon:''},{id:191,name_ru:'  ',name_ukr:'  ',name_en:'  ',icon:''},{id:192,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:193,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:194,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:195,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:196,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:197,name_ru:' ,   ',name_ukr:' ,   ',name_en:' ,   ',icon:''},{id:198,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:199,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:200,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:201,name_ru:', ',name_ukr:', ',name_en:', ',icon:''},{id:202,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:203,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:204,name_ru:',  ',name_ukr:',  ',name_en:',  ',icon:''},{id:205,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:206,name_ru:'-',name_ukr:'-',name_en:'-',icon:''},{id:207,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:208,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:209,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:210,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:211,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:212,name_ru:', ',name_ukr:', ',name_en:', ',icon:''},{id:213,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:214,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:215,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:216,name_ru:', ',name_ukr:', ',name_en:', ',icon:''},{id:217,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:218,name_ru:', , , ',name_ukr:', , , ',name_en:', , , ',icon:''},{id:219,name_ru:',  ',name_ukr:',  ',name_en:',  ',icon:''},{id:220,name_ru:'   ',name_ukr:'   ',name_en:'   ',icon:''},{id:221,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:222,name_ru:', ',name_ukr:', ',name_en:', ',icon:''},{id:223,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:224,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:225,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:226,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:227,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:228,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:229,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:230,name_ru:', ',name_ukr:', ',name_en:', ',icon:''},{id:231,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:232,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:233,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:234,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:235,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:236,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:237,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:238,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:239,name_ru:'  ()',name_ukr:'  ()',name_en:'  ()',icon:''},{id:240,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:241,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:242,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:243,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:244,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:245,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:246,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:247,name_ru:'  ',name_ukr:'  ',name_en:'  ',icon:''},{id:248,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:249,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:250,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:251,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:252,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:253,name_ru:'-',name_ukr:'-',name_en:'-',icon:''},{id:254,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:255,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:256,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:257,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:258,name_ru:'  ',name_ukr:'  ',name_en:'  ',icon:''},{id:259,name_ru:' , , ',name_ukr:' , , ',name_en:' , , ',icon:''},{id:260,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:261,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:262,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:263,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:264,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:265,name_ru:'/',name_ukr:'/',name_en:'/',icon:''},{id:266,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:267,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:268,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:269,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:270,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:271,name_ru:'  ',name_ukr:'  ',name_en:'  ',icon:''},{id:272,name_ru:'/ ',name_ukr:'/ ',name_en:'/ ',icon:''},{id:273,name_ru:'/ ',name_ukr:'/ ',name_en:'/ ',icon:''},{id:274,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:275,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:276,name_ru:'-',name_ukr:'-',name_en:'-',icon:''},{id:277,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:278,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:279,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:280,name_ru:', ',name_ukr:', ',name_en:', ',icon:''},{id:281,name_ru:' ()',name_ukr:' ()',name_en:' ()',icon:''},{id:282,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:283,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:284,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:285,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:286,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:287,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:288,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:289,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:290,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:291,name_ru:'-',name_ukr:'-',name_en:'-',icon:''},{id:292,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:293,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:294,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:295,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:296,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:297,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:298,name_ru:' ',name_ukr:' ',name_en:' ',icon:''},{id:299,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:300,name_ru:'',name_ukr:'',name_en:'',icon:''},{id:301,name_ru:' ',name_ukr:' ',name_en:' '}],autoLoad:!0});Ext.define('Bigmedia.store.PoiLinkCatFaces',{extend:Ext.data.TreeStore,alias:'store.poilinkcatfaces',storeId:'PoiLinkCatFaces',model:'Bigmedia.model.PoiCategoryFaces',autoLoad:!1,root:{id:0,text:'Categories',name:'Categories',expanded:!1,checked:null},proxy:{type:'ajax',limitParam:null,pageParam:'',startParam:'',url:'poicat.json',reader:{type:'json'}}});Ext.define('Bigmedia.store.PoiSearch',{extend:Ext.data.Store,alias:'store.poisearch',storeId:'PoiSearch',model:'Bigmedia.model.Poi',autoLoad:!1,groupField:'name',proxy:{type:'ajax',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/data?poi=1&locale='+Bigmedia.Locales.currentLocale,reader:{type:'json'}},listeners:{load:function(c,d,a,b,e){}}});Ext.define('Bigmedia.store.Pois',{extend:Ext.data.Store,alias:'store.pois',storeId:'Pois',model:'Bigmedia.model.Poi',autoLoad:!1,proxy:{type:'memory',reader:{type:'json'}},listeners:{load:function(c,d,a,b,e){}}});Ext.define('Bigmedia.store.PoisManual',{extend:Ext.data.Store,alias:'store.poismanual',storeId:'PoisManual',model:'Bigmedia.model.PoiManual',autoLoad:!0,autoSync:!0,proxy:{type:'memory',reader:{type:'json'}},listeners:{update:function(b,a){if(!a.get('mixedAddress')&&!a.get('lat')&&!a.get('lon')&&a.get('resultLat')){a.set({resultName:null,resultCity:null,resultStreet:null,resultHousenumber:null,resultLat:null,resultLon:null,resultLatLon:null,resultGeometry:null})}}}});Ext.define('Bigmedia.store.RulesGroups',{extend:Ext.data.Store,alias:'store.rulesgroups',storeId:'RulesGroups',model:'Bigmedia.model.RulesGroup',autoLoad:!0,autoSync:!0});Ext.define('Bigmedia.store.Search',{extend:Ext.data.Store,alias:'store.search',storeId:'Search',model:'Bigmedia.model.Search',autoLoad:!1,proxy:{type:'ajax',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/data?search=1&locale='+Bigmedia.Locales.currentLocale,reader:{type:'json'}}});Ext.define('Bigmedia.store.ShoppingCart',{extend:Bigmedia.store.PlannerStore,alias:'store.shoppingcart',storeId:'ShoppingCart',model:'Bigmedia.model.Face',proxy:{type:'memory'}});Ext.define('Bigmedia.store.Sides',{extend:Ext.data.Store,alias:'store.sides',storeId:'Sides',model:'Bigmedia.model.Side',autoLoad:!1});Ext.define('Bigmedia.store.Sidetypes',{extend:Ext.data.Store,alias:'store.sidetypes',storeId:'Sidetypes',fields:[{name:'id',type:'string'},{name:'name',type:'string'},{name:'totalCount',type:'int',defaultValue:'0'},{name:'addCount',type:'int',defaultValue:'0'},{name:'subCount',type:'int',defaultValue:'0'}],data:Bigmedia.Locales.getRefStoreData('refSupplierSidetype'),proxy:{type:'memory'},autoLoad:!0});Ext.define('Bigmedia.store.Sizes',{extend:Ext.data.Store,alias:'store.sizes',storeId:'Sizes',fields:[{name:'id',type:'int'},{name:'name',type:'string'},{name:'totalCount',type:'int',defaultValue:'0'},{name:'addCount',type:'int',defaultValue:'0'},{name:'subCount',type:'int',defaultValue:'0'}],data:Bigmedia.Locales.getRefStoreData('refSize'),proxy:{type:'memory'},autoLoad:!0});Ext.define('Bigmedia.store.Streets',{extend:Ext.data.Store,alias:'store.streets',storeId:'Streets',model:'Bigmedia.model.Street',autoLoad:!1,proxy:{type:'ajax',limitParam:null,pageParam:'',startParam:'',url:'/api/v1/data?street=1&locale='+Bigmedia.Locales.currentLocale,reader:{type:'json'}}});Ext.define('Bigmedia.store.Suppliers',{extend:Ext.data.Store,alias:'store.suppliers',storeId:'Suppliers',fields:[{name:'id',type:'int'},{name:'name',type:'string'},{name:'totalCount',type:'int',defaultValue:'0'},{name:'addCount',type:'int',defaultValue:'0'},{name:'subCount',type:'int',defaultValue:'0'}],data:Bigmedia.Locales.getRefStoreData('refSupplier'),proxy:{type:'memory'},autoLoad:!0});Ext.define('Bigmedia.store.ThirdPartyBoards',{extend:Ext.data.Store,alias:'store.thirdpartyboards',storeId:'ThirdPartyBoards',model:'Bigmedia.model.ThirdParty',autoLoad:!0,proxy:{type:'memory'}});Ext.define('Bigmedia.store.UserIcons',{extend:Ext.data.Store,alias:'store.usericons',storeId:'UserIcons',fields:['id',{name:'createdAt',type:'date',dateFormat:'c'}],autoLoad:!0,autoSync:!1,proxy:{type:'rest',url:'api/v1/icons',reader:{type:'json'}}});Ext.define('Bigmedia.view.AppHeaderModel',{extend:Ext.app.ViewModel,alias:'viewmodel.appheader',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.authentication.AuthenticationModel',{extend:Ext.app.ViewModel,alias:'viewmodel.authentication',formulas:{curUser:function(){return Bigmedia.Vars.getUser()}},data:{username:'',password:'',rememberMe:!0,reset:{email:'',code:''},signup:{fullName:'',orgName:'',username:'',email:'',password:'',confirmpassword:'',agrees:!1}}});Ext.define('Bigmedia.view.AppHeader',{extend:Ext.panel.Panel,controller:'appheader',xtype:'appHeader',title:'Bigmedia',header:!1,id:'app-header',height:52,layout:{type:'hbox',align:'middle'},cls:'bigmedia-headerbar toolbar-btn-shadow',items:[{xtype:'component',id:'app-header-logo',reference:'senchaLogo'},{cls:'delete-focus-bg',ui:'faces',reference:'autoSelectBtn',id:'headerautoselect',scale:'large',iconCls:'x-fa fa-magic',tooltip:'Auto select',text:'',html:'<div class="autoselectbadge">NEW</div>',xtype:'button',margin:'0 10 0 0',listeners:{click:'onAutoSelectClick'}},{xtype:'tbspacer',flex:1},{cls:'delete-focus-bg',ui:'faces',reference:'facesBtn',id:'headerfaces',scale:'large',iconCls:'x-fa fa-desktop',tooltip:'Faces',text:Bigmedia.Locales.appHeaderBtnFacesText,xtype:'button',toggleGroup:'mainNavGroup',allowDepress:!1,pressed:!0,margin:'0 10 0 0',listeners:{click:'onFacesClick'}},{cls:'delete-focus-bg',ui:'campaigns',reference:'campaignsBtn',id:'headercampaigns',scale:'large',iconCls:'x-fa fa-briefcase',tooltip:'Campaigns',text:Bigmedia.Locales.appHeaderBtnCampaignsText,xtype:'button',toggleGroup:'mainNavGroup',allowDepress:!1,margin:'0 10 0 0',listeners:{click:'onCampaignsClick'}},{cls:'delete-focus-bg',ui:'monitoring',reference:'monitoringBtn',id:'headermonitoring',scale:'large',iconCls:'x-fa fa-briefcase',tooltip:'Monitoring',text:Bigmedia.Locales.appHeaderBtnMonitoringText,xtype:'button',toggleGroup:'mainNavGroup',allowDepress:!1,margin:'0 20 0 0',listeners:{click:'onMonitoringClick'}},{xtype:'tbspacer',width:'100px'},{cls:'delete-focus-bg',ui:'shopping-cart',reference:'shoppingcartlarge',id:'headercart',scale:'large',disabled:!0,iconCls:'x-fa fa-shopping-cart',tooltip:Bigmedia.Locales.headerShoppingCartEmpty,xtype:'splitbutton',margin:'0 10 0 0',handler:function(){window.location='#cart'},menu:{items:[{text:Bigmedia.Locales.headerShoppingCartMenuShowText,href:'#cart',hrefTarget:'_self'},{text:Bigmedia.Locales.headerShoppingCartMenuEmptyText,handler:'emptyCart'}]}},{xtype:'combobox',id:'app-header-locale',cls:'app-header-text',fieldLabel:Bigmedia.Locales.headerSelectLocale,store:{fields:['code','name'],data:[{'code':'ukr','name':Bigmedia.Locales.localeUkr},{'code':'ru','name':Bigmedia.Locales.localeRu},{'code':'en','name':Bigmedia.Locales.localeEn}]},displayField:'name',valueField:'code',value:Bigmedia.Locales.currentLocale,listeners:{change:'onSelectLocale'},margin:'0 10 0 0'},{xtype:'image',cls:'header-right-profile-image',height:35,width:35,alt:'current user image',bind:{src:{bindTo:'{curUser.pictureUrl}',deep:!0}},margin:'0',scale:'large'},{cls:'delete-focus-bg',ui:'user-menu',iconCls:'x-fa',scale:'large',xtype:'splitbutton',text:'',menu:{items:[{text:'Login',bind:{hidden:'{curUser.id}'},handler:function(a){Bigmedia.showPage()}},{xtype:'menuitem',bind:{text:'{curUser.displayName}'},href:'#profile',hrefTarget:'_self'},{text:'Logout',bind:{hidden:'{!curUser.id}'},handler:function(){Bigmedia.Vars.logoutUser()}}]},margin:'0 10 0 0'}]});Ext.define('Bigmedia.view.AppHeaderController',{extend:Ext.app.ViewController,alias:'controller.appheader',listen:{store:{'#ShoppingCart':{add:'onShoppingCartChange',remove:'onShoppingCartChange',clear:'onShoppingCartChange'}}},onAutoSelectClick:function(a){this.redirectTo('autoselect')},onCampaignsClick:function(a){console.log('campaigns',a);this.redirectTo('campaigns')},onMonitoringClick:function(a){console.log('monitoring',a);this.redirectTo('monitoring')},onFacesClick:function(a){this.redirectTo('faces')},onBeforeCampaignsToggle:function(b,a){this.redirectTo('campaigns');return window.location.hash='#campaigns'},onBeforeFacesToggle:function(b,a){this.redirectTo('faces');return !0},onBeforeMonitoringToggle:function(b,a){console.log('onBeforeMonitoringToggle',b,a);this.redirectTo('monitoring');return window.location.hash='#monitoring'},emptyCart:function(){var a=this,c=Ext.getStore('Faces'),b=Ext.getStore('ShoppingCart'),d=Ext.getCmp('headercart');Ext.MessageBox.show({msg:Bigmedia.Locales.cartPrepareItemsRemoveFromCartMsg,progressText:Bigmedia.Locales.cartPrepareItemsRemoveProgressText,width:300,wait:{interval:200},animateTarget:d});a.timer=Ext.defer(function(){var d;b.each(function(a){d=c.getById(a.getId());if(d){d.set({inCart:!1,selected:!1},{silent:!0})}});b.removeAll();a.timer=null;Ext.MessageBox.hide();a.showToast(Bigmedia.Locales.cartRemoveItemsToastText)},500)},onShoppingCartChange:function(c){var d=this,a=d.lookupReference('shoppingcartlarge'),b=c.getCount();a.setDisabled(b===0);if(b===0){a.setText('');a.setTooltip(Bigmedia.Locales.headerShoppingCartEmpty)}else {a.setText('<span class="cart-badge">'+b+'</span>');a.setTooltip(Ext.String.format(Bigmedia.Locales.headerShoppingCartNotEmpty,b))}},onSelectLocale:function(d,c){var b=Ext.Object.fromQueryString(location.search),a;b['locale']=c;a=Ext.Object.toQueryString(b);location.search=a},showToast:function(a,b){Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400,minWidth:400})}});Ext.define('Bigmedia.view.dialog.DlgEditCampaign',{extend:Ext.window.Window,viewModel:{data:{camp:null}},config:{camp:null},updateCamp:function(a){this.getViewModel().set('camp',a)},title:Bigmedia.Locales.campaignsCreateNewCampaignText,width:400,height:240,collapsible:!1,minWidth:300,minHeight:240,layout:'fit',resizable:!0,modal:!0,referenceHolder:!0,defaultFocus:'campName',closeAction:'destroy',items:[{xtype:'form',reference:'infoform',defaultType:'textfield',modelValidation:!0,padding:5,defaults:{labelWidth:90,labelAlign:'top',labelSeparator:'',submitEmptyText:!1,anchor:'100%',padding:5},dockedItems:[{xtype:'toolbar',dock:'bottom',itemId:'actionBar',items:[{xtype:'button',text:Bigmedia.Locales.campCardCancelBtnText,handler:function(b){var a=b.up('window');a.fireEvent('dialogcancelled');a.close()}},'->',{xtype:'button',text:Bigmedia.Locales.campCardSaveBtnText,itemId:'saveBtn',handler:function(c){var a=c.up('window'),b=a.getViewModel().get('camp'),d=Bigmedia.Vars.getUser();a.fireEventArgs('campaignchanged',[b])}}]}],items:[{emptyText:Bigmedia.Locales.campCardCampaignNameEmptyText,reference:'campName',bind:{value:'{camp.name}'}},{xtype:'fieldcontainer',fieldLabel:Bigmedia.Locales.campCardPeriodLabel,layout:'hbox',items:[{xtype:'datefield',flex:1,itemId:'startDate',name:'startDate',reference:'startDate',twoWayBindable:'value',bind:{value:'{camp.startDate}'},listeners:{change:function(d,b,f){var e=Ext.Date.parse(b);if(!e){return}var c=b,a=d.nextSibling(),g=Math.round(+b-+f);if(c&&+c<=+a.getValue()){a.clearInvalid();a.checkChange()}else {a.setValue(new Date(+a.getValue()+g))}d.validate()}}},{xtype:'datefield',flex:1,itemId:'endDate',name:'endDate',reference:'endDate',twoWayBindable:'value',bind:{value:'{camp.endDate}'},listeners:{change:function(f,b,e){var d=Ext.Date.parse(b);if(!d){return}var c=b,a=this.previousSibling(),g=Math.round(+e-+b);if(c&&+c>=+a.getValue()){a.clearInvalid();a.checkChange()}else {a.setValue(new Date(+a.getValue()-g))}f.validate()}}}]}],listeners:{dirtychange:function(b,a){},validitychange:function(b,a){b.owner.down('#saveBtn').setDisabled(!a)}}}]});Ext.define('Bigmedia.view.det.DetPublishedCampaign',{extend:Ext.window.Window,reference:'detpublishedcamp',viewModel:{data:{pwd:null,enableCrypto:!0,isNew:!1,thePublished:null}},title:'  ',width:600,defaults:{anchor:'100%'},collapsible:!1,minWidth:500,bodyPadding:10,resizable:!0,modal:!0,referenceHolder:!0,closeAction:'destroy',config:{campaignId:null,publishedId:null},updateCampaignId:function(a){var b=this,c=b.getViewModel();if(a){b.pubStore=new Ext.data.Store({model:'Bigmedia.model.Published',proxy:{type:'rest',url:'/api/v1/campaigns/'+encodeURIComponent(a)+'/published',limitParam:null,pageParam:'',startParam:'',writer:{writeAllFields:!0}},autoLoad:!0,listeners:{load:function(f){var d=f.first();if(!d){var e=Ext.getStore('Campaigns').getById(a),g=Bigmedia.Vars.getUser();var h=new Bigmedia.model.Published({campaignId:e.get('id'),name:e.get('name'),startDate:e.get('startDate'),endDate:e.get('endDate'),email:g.get('email'),ownerId:g.get('id')});d=f.add(h)[0];f.on('write',function(){e.set('publishedId',d.getId());c.set({thePublished:d,isNew:!0});b.setPublishedId(d.getId())},{single:!0});f.sync()}else {c.set('thePublished',d)}}}})}},updatePublishedId:function(b){if(!b){return}var a=this;if(a.rendered){var d=a.lookup('publishedcampaignurl'),c=Bigmedia.Vars.getPublishedUrl()+b;d.setValue(c);a.paintQrCode(c)}else {a.on('afterrender',function(){console.log(b);var d=a.lookup('publishedcampaignurl'),c=Bigmedia.Vars.getPublishedUrl()+b;d.setValue(c);a.paintQrCode(c)},{single:!0})}},paintQrCode:function(b){var c=this.lookup('qrcode');var a={errorCorrectionLevel:'H',type:'image/png',rendererOpts:{quality:0.3}};qrcodelib.toDataURL(b,a,function(a,d){if(a){throw a}c.setSrc(d)})},showEmailPrompt:function(b){var a=this;Ext.Msg.prompt('Email','Please enter client email:',function(d,c){if(d=='ok'){if(!Ext.form.field.VTypes.email(c)){Ext.Msg.show({title:'Error',message:'Entered email address is invalid. Do you want to try one more time?',buttons:Ext.Msg.YESNOCANCEL,icon:Ext.Msg.ERROR,fn:function(e){if(e==='yes'){a.showEmailPrompt(b)}},scope:a})}else {a.sendInvitation(c)}}},a,!1,b)},sendInvitation:function(d){var b=this,c=b.getCampaignId(),a=b.getPublishedId();if(a){var e=new Ext.data.Store({fields:[{name:'id',type:'int'},{name:'email',type:'string'}],proxy:{type:'rest',url:'/api/v1/campaigns/'+c+'/published/'+a+'/presenterInvitations'},autoSync:!0,autoLoad:!1,listeners:{write:function(a){Bigmedia.Vars.toastSuccess(' ')}}});e.add({email:d})}},layout:{type:'vbox',align:'stretch'},items:[{xtype:'container',height:80,layout:{type:'hbox',align:'stretch'},items:[{xtype:'container',width:80,height:80,cls:'qrcode-container',items:[{xtype:'image',cls:'qrcode',reference:'qrcode'}]},{xtype:'container',flex:1,layout:{type:'vbox',align:'stretch',pack:'middle'},items:[{xtype:'container',layout:{type:'hbox'},items:[{xtype:'textfield',flex:1,reference:'publishedcampaignurl',readOnly:!0},{xtype:'button',iconCls:'x-fa fa-clipboard',tooltip:'',handler:function(b){if(!navigator||!navigator.clipboard||!navigator.clipboard.writeText){Bigmedia.Vars.toastSuccess('    ');return}var c=b.up('window'),a=c.lookup('publishedcampaignurl');navigator.clipboard.writeText(a.getValue()).then(function(){Bigmedia.Vars.toastSuccess('    ')},function(){Bigmedia.Vars.toastSuccess('    ')})}},{xtype:'button',iconCls:'x-fa fa-external-link-alt',tooltip:' ',handler:function(c){var b=c.up('window'),a=b.lookup('publishedcampaignurl'),d=a.getValue();window.open(d+'&preview=true','_blank')}},{xtype:'button',iconCls:'x-fa fa-paper-plane',tooltip:' ',handler:function(c){var a=c.up('window'),b=a.getViewModel().get('thePublished');if(b&&b.get('closed')&&a.pubStore){Ext.Msg.show({title:Bigmedia.Locales.campCardPresentationInviteOpenAccessConfirmTitle,message:Bigmedia.Locales.campCardPresentationInviteOpenAccessConfirmText,buttons:Ext.Msg.YESNOCANCEL,icon:Ext.Msg.QUESTION,fn:function(d){if(d==='yes'){b.set('closed',0);b.save({success:function(){Ext.callback(a.showEmailPrompt,a,[''])}})}}})}else {Ext.callback(a.showEmailPrompt,a,[''])}}}]}]}]},{xtype:'fieldset',title:'',height:300,collapsible:!0,collapsed:!1,flex:1,layout:'fit',items:[{xtype:'tabpanel',bodyPadding:5,tabPosition:'left',activeTab:0,items:[{title:'',items:[{xtype:'form',reference:'windowForm',modelValidation:!0,layout:{type:'vbox',align:'stretch'},border:!1,bodyPadding:10,fieldDefaults:{msgTarget:'side',labelAlign:'top',labelWidth:200},defaults:{},items:[{xtype:'textfield',name:'campaignName',itemId:'publishedCampaignName',fieldLabel:'   ',allowBlank:!1,bind:{value:'{thePublished.name}'}},{xtype:'fieldcontainer',fieldLabel:Bigmedia.Locales.campCardPeriodLabel,layout:'hbox',items:[{xtype:'datefield',flex:1,bind:{value:'{thePublished.startDate}'},margin:'0 10px 0 0'},{xtype:'datefield',flex:1,bind:{value:'{thePublished.endDate}'}}]},{xtype:'textfield',name:'campaignEmail',itemId:'publishedCampaignEmail',fieldLabel:"    '",bind:{value:'{thePublished.email}'}},{xtype:'checkbox',boxLabel:'   ',bind:'{enableCrypto}',listeners:{change:function(f,d){var e=this.up('window'),a=e.getViewModel(),b=a.get('thePublished'),c=null;if(d&&a.get('pwd')){c=Bigmedia.Vars.hashPwd(a.get('pwd'))}if(b){b.set('cryptoHash',c)}}}},{xtype:'textfield',name:'pwd',itemId:'pwd',bind:{hidden:'{!enableCrypto}',value:'{pwd}'},fieldLabel:'    ',validator:function(b){var a='    ';return this.isHidden()||!!b?!0:a},listeners:{change:function(d){var e=d.up('window'),a=e.getViewModel(),b=a.get('thePublished'),c=null;if(a.get('enableCrypto')&&a.get('pwd')){c=Bigmedia.Vars.hashPwd(a.get('pwd'))}if(b){b.set('cryptoHash',c)}}}},{xtype:'textarea',name:'campaignNote',itemId:'publishedCampaignNote',fieldLabel:'',flex:1,bind:{value:'{thePublished.note}'}}]}]},{title:'',layout:'vbox',items:[{xtype:'form',reference:'windowFormAdd',modelValidation:!0,layout:{type:'vbox',align:'stretch'},border:!1,bodyPadding:10,fieldDefaults:{msgTarget:'side',labelAlign:'left',labelWidth:170},defaults:{},items:[{xtype:'checkboxgroup',fieldLabel:'  :',defaults:{padding:'0 20'},items:[{boxLabel:'',name:'codes-bigmedia',padding:0,bind:{value:'{thePublished.showBigmediaCodes}'}},{boxLabel:'',name:'codes-supplier',bind:{value:'{thePublished.showSupplierCodes}'}},{boxLabel:'',name:'codes-doors',padding:0,bind:{value:'{thePublished.showDoorsCodes}'}}]},{xtype:'checkbox',fieldLabel:' ',checked:!0,bind:{value:'{thePublished.showSuppliers}'}},{xtype:'checkboxgroup',fieldLabel:' :',defaults:{padding:'0 20'},items:[{boxLabel:'GRP/OTS',name:'Metrics',padding:0,bind:{value:'{thePublished.showMetrics}'}},{boxLabel:'CPT',name:'CptMetrics',bind:{value:'{thePublished.showCptMetrics}'}}]},{xtype:'checkbox',fieldLabel:' ',checked:!0,bind:{value:'{thePublished.showCoverage}'}},{xtype:'checkbox',fieldLabel:' ',checked:!0,bind:{value:'{thePublished.showPrices}'}}]}]},{title:'Heatmap',bind:{hidden:'{user.showHeatmap}'},layout:'fit',items:[{xtype:'form',reference:'windowFormHeatmap',modelValidation:!0,layout:{type:'hbox',align:'stretch'},border:!1,bodyPadding:0,fieldDefaults:{msgTarget:'side',labelAlign:'top',labelWidth:200},defaults:{},items:[{width:300,layout:'vbox',items:[{xtype:'checkbox',fieldLabel:' Heatmap',checked:!1,bind:{value:'{thePublished.showHeatmap}',disabled:'{!user.showHeatmap}'}},{xtype:'textfield',name:'Heatmap name',itemId:'publishedCampaignHeatmapName',fieldLabel:' ',bind:{value:'{thePublished.heatmapName}',disabled:'{!thePublished.showHeatmap}'}}]},{xtype:'container',flex:1,layout:'fit',items:[{xtype:'treepanel',reference:'tpHeatmap',checkPropagation:'both',rootVisible:!1,store:'OTSParamsTree',scrollable:!0,bind:{disabled:'{!thePublished.showHeatmap}'},listeners:{checkchange:function(){this.up('window').lookupViewModel().get('thePublished').set('heatmapParams',{changed:!0})}}}]}]}]}]}]}],dockedItems:[{xtype:'toolbar',dock:'bottom',ui:'footer',defaults:{minWidth:200},bind:{hidden:'{thePublished.phantom || !thePublished.dirty}'},items:[{xtype:'component',flex:1},{text:Bigmedia.Locales.btnCancelText,handler:function(b){var a=b.up('window');a.close()}},{text:Bigmedia.Locales.btnSaveText,handler:function(l){var b=l.up('window'),g=b.lookupReference('windowForm'),k=g.getForm(),a=b.getViewModel();if(k.isValid()){var c=a.get('thePublished'),n;function getCheckedNodes(a){if(a.get('group')&&a.get('checked')){return [a]}if(a.childNodes.length>0){var b=a.childNodes;return b.reduce(function(b,c){return b.concat(getCheckedNodes(c))},[])}else {return []}}var m=Ext.getStore('OTSParamsTree'),h=b.lookup('tpHeatmap'),i=h.getRootNode(),d={},f='';var j=getCheckedNodes(i);j.filter(a=>!!a.get('group')).forEach(a=>{if(!d[a.get('group')]){d[a.get('group')]=[]}d[a.get('group')].push(a.get('code'))});f='<root>'+Object.keys(d).map(a=>'<group name="'+a+'">'+d[a].map(b=>'<item>'+b+'</item>').join('')+'</group>')+'</root>';c.set('heatmapParams',d);c.set('heatmapParamsXml',f);var e=null;if(a.get('enableCrypto')&&a.get('pwd')){e=Bigmedia.Vars.hashPwd(a.get('pwd'))}c.set('cryptoHash',e);b.pubStore.sync({success:function(){if(a.get('enableCrypto')&&a.get('pwd')){Bigmedia.Vars.setPubPassphrase(a.get('pwd'),c.getId())}else {Bigmedia.Vars.setPubPassphrase(null,c.getId())}b.fireEvent('save',c)},callback:function(){b.close()}})}}}]}],listeners:{show:function(c){var a=c.getViewModel();a.set('enableCrypto',!1);a.set('pwd',null);if(c.getPublishedId()){a.set('pwd',Bigmedia.Vars.getPubPassphrase(c.getPublishedId()));a.set('enableCrypto',!!a.get('pwd'))}var e=c.lookup('tpHeatmap'),f=e.getRootNode(),d=a.get('pubCamp');if(!d){return}var b=d.get('heatmapParams');if(!b){return}f.childNodes.forEach(a=>{a.set('checked',!1);a.childNodes.forEach(d=>{d.set('checked',b[d.get('group')]&&b[d.get('group')].indexOf(d.get('code'))>=0);a.set('checked',a.get('checked')||b[d.get('group')]&&b[d.get('group')].indexOf(d.get('code'))>=0)})})},close:function(a){var b=a.getViewModel();if(b.get('isNew')){a.fireEvent('save',b.get('thePublished'))}}}});Ext.define('Bigmedia.view.dialog.MaterialDialog',{extend:Ext.window.Window,modal:!0,minWidth:400,width:400,titlePosition:1,ui:'material-dialog',draggable:!1,resizable:{handles:'w'},bodyPadding:20,syncPosAndSize:function(){var a=this;a.setX((a.ownerCt?a.ownerCt.getWidth():document.body.clientWidth)-a.getWidth());a.setY(0);a.setHeight(a.ownerCt?a.ownerCt.getHeight():document.body.clientHeight)},constructor:function(b){var a=this;a.callParent(b);Ext.on('resize',a.syncPosAndSize,a)},listeners:{show:function(){this.syncPosAndSize()},destroy:function(){var a=this;Ext.un('resize',a.syncPosAndSize,a)}}});Ext.define('Bigmedia.view.dialog.DlgAutoPlanController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgautoplan',init:function(h){var a=this;var e=Ext.getStore('Faces');var d=[];e.each(a=>{if(d.indexOf(a.get('city'))<0){d.push(a.get('city'))}});a.callParent(h);var b=a.getViewModel();Bigmedia.AutoPlan.on('cityprepared',a.cityPrepared,a);Bigmedia.AutoPlan.on('algorithmcompleted',a.algorithmCompleted,a);Bigmedia.AutoPlan.on('terminated',a.onAutoPlanTerminate,a);var f=[];e.each(function(a){if(a.get('price')>0&&!!a.get('lon')&&!!a.get('lat')){var b=a.copy();b.set('inCart',!1);f.push(b)}});b.getStore('srcFaces').add(f);a.loadCities();a.updateFacesInCities(b.getStore('srcFaces'));var c=[];b.getStore('allCities').each(b=>{var d=[],e=[],a={};b.faces().each(c=>{if(d.indexOf(c.get('supplier'))<0){d.push(c.get('supplier'))}if(e.indexOf(c.get('size'))<0){e.push(c.get('size'));a[c.get('size')]=1}else {a[c.get('size')]=a[c.get('size')]+1}});c.push({xtype:'autoplancityparams',reference:'cityparams-'+b.getId(),city:b.get('name'),cityRec:b,anchor:'100%',params:{operators:d,sizes:e.map(c=>{return {name:c,totalCount:a[c]}})}})});var g=a.lookup('cities');g.add(c)},onCoverageChange:function(a,b){var d=this,e=d.getViewModel(),c=e.getStore('allCities');c.each(c=>{c.set('coverage',b>0?b:null)});if(a.el){a.el.toggleCls('not-empty',b!=null||a.emptyText)}},onTotalBudgetChange:function(d,a){var f=this,h=f.getViewModel(),c=h.getStore('allCities'),g=c.sum('population'),e=c.last(),b=0;c.each(c=>{if(c!=e){var f=Math.round(a*c.get('population')/(g*100))*100;b+=f;var h=f>0?f:null;c.set('budget',h)}else {if(a-b>=0){c.set('budget',a-b>0?a-b:null)}}});if(d.el){d.el.toggleCls('not-empty',a!=null||d.emptyText)}},onSelectClick:function(){var a=this,e=a.lookup('minPrice'),d=a.lookup('maxCoverage'),i=a.lookup('optimal'),c=a.getViewModel(),h=c.get('planVarStore');var g=e.getValue()?'MinPrice':d.getValue()?'MaxCoverage':'MaxGRPDivPrice';var f=c.get('resAlgorithms'),b=f.getById(g);if(b){a.getView().fireEvent('finished',b.get('faces'));a.getView().close()}},initPlanVarStore:function(){var d=this,a=d.getViewModel(),b=a.get('planVarStore'),c=a.get('finalStore');b.removeAll();c.removeAll()},onStartClick:function(){var b=this,p=this.getView(),a=b.getViewModel(),l=a.getStore('srcFaces'),k=a.getStore('repStore'),g=a.get('planStore'),j=Ext.getStore('CityBoundaries');b.lookup('progress').wait({text:'Planning is in progress...'});a.set('step',3);k.removeAll();var e={A:a.get('A'),B:a.get('B')};var o=new Ext.data.ChainedStore({source:l,filters:[function(a){return g.findExact('id',a.get('id_city'))>=0&&(!e||e[a.get('catab')]>0)}]});b.initPlanVarStore();var f={maxOnStreet:a.get('maxOnStreet'),minDistance:a.get('minDistance'),minDistanceOnStreet:a.get('minDistanceOnStreet'),approxCellSize:0.1,coverageDays:Ext.clone(Bigmedia.Vars.coverageDays)};var h={},c=b.lookup('cities');g.each(function(a){var b=j.getById(a.getId());var g={},f={};a.set('progress',0);for(var i=0;i<c.items.getCount();i++){if(c.items.getAt(i).isXType('autoplancityparams')){var d=c.items.getAt(i);if(d.getCity()===a.get('name')){if(d.getParams().sData){d.getParams().sData.forEach(b=>{g[b.size]=b.count})}if(d.getParams().oData){d.getParams().oData.forEach(b=>{f[b.operator]={min:b.min,max:b.max}})}}}}if(Object.keys(g).length===0){g=null}if(Object.keys(f).length===0){f=null}h[a.getId()]={id:b.getId(),planBudget:a.get('budget'),planBoards:a.get('quantity'),planCoverage:a.get('coverage'),planSizes:g,jsts:b.get('jsts'),turf:b.get('turf'),area:b.get('area'),bbox:b.get('bbox'),x:b.get('x'),y:b.get('y'),splits:[{fieldName:'catab',values:e,type:'count'},{fieldName:'supplier',values:f,type:'budget'}]}});var n=b.getPreparedFaces(o);var m=a.get('curCamp');var i=m.proposals(),d=[];i.each(function(a){var c=Ext.getStore('Faces').getById(a.get('faceId'));d.push(b.getPlainFace(c))});if(d.length>0){f.initialCampaign=d}Bigmedia.AutoPlan.fireEventArgs('start',[n,h,f],Bigmedia.AutoPlan)},getPlainFace:function(a){return {coveragesTurf:a.get('coveragesTurf'),cells:a.get('cells'),doors_no:a.get('doors_no'),grp:a.get('useKSData')?a.get('ksTRP')||0.01:a.get('grp')||0.01,id:a.get('id'),ots:a.get('useKSData')?a.get('ksOTS')||1:a.get('ots')||1,streets:a.get('streets'),supplier:a.get('supplier'),finalPrice:a.get('finalPrice')||0,id_city:a.get('id_city'),id_size:a.get('id_size'),id_catab:a.get('id_catab'),catab:a.get('catab'),angle:a.get('angle'),lat:a.get('lat'),lon:a.get('lon'),num:a.get('num'),turf:a.get('lat')&&a.get('lon')?turf.point([parseFloat(a.get('lon')),parseFloat(a.get('lat'))]):null}},getPreparedFaces:function(b){var c=this,a=[];b.each(function(d){a.push(c.getPlainFace(d))});return a},updateFacesInCities:function(b){var c=this,d=c.getViewModel(),a=d.getStore('allCities');if(!a){return}a.each(function(a){a.faces().removeAll()});b.each(function(d){var c=a.getById(d.get('id_city'));if(c){c.faces().add(d);c.set('facesCount',c.faces().count())}})},onDestroy:function(){var a=this;Bigmedia.AutoPlan.un('cityprepared',a.cityPrepared);Bigmedia.AutoPlan.un('algorithmcompleted',a.algorithmCompleted);Bigmedia.AutoPlan.un('terminated',a.onAutoPlanTerminate)},algorithmCompleted:function(m,g,n){var p=this,c=p.getViewModel(),h=c.get('planStore'),d=c.get('planVarStore'),k=c.get('srcFaces');var a=h.getById(m);if(a){a.set({progress:a.get('progress')+0.3});var r=Ext.getStore('Faces'),q=Ext.getStore('ThirdPartyBoards');var e=n.map(function(b){var a=k.getById(b.id).copy();return a});a.set(g,e);d.loadRawData({algorithm:g,id_city:a.getId(),city:a.get('name'),boards:e.length,coverage:0,faces:[]},!0);var f=d.last();d.fireEventArgs('add',[d,[f]]);f.faces().add(e)}var o=h.min('progress')===1;if(o){var b=c.get('resAlgorithms');b.removeAll();d.each(a=>{var c=b.getById(a.get('algorithm'));if(!c){b.add({id:a.get('algorithm'),algorithm:a.get('algorithm'),boards:a.get('boards'),sumOts:a.get('ots'),budget:a.get('budget'),coverage:Math.round(a.get('coverage')*100)/100,faces:a.faces().getRange()})}else {c.set('boards',c.get('boards')+a.get('boards'));c.set('sumOts',c.get('sumOts')+a.get('ots'));c.set('budget',c.get('budget')+a.get('budget'));c.set('coverage',(c.get('coverage')+a.get('coverage'))/2);c.set('faces',c.get('faces').concat(a.faces().getRange()))}});var j=b.getById('MinPrice'),i=b.getById('MaxCoverage'),l=b.getById('MaxGRPDivPrice');c.set({minPrice:j,maxCoverage:i,optimal:l});c.set('step',4)}},cityPrepared:function(f,g){var c=this,d=c.getViewModel().get('planStore'),a=Ext.getStore('Faces'),e=c.getViewModel().get('repStore');var b=d.getById(f);if(b){b.set('progress',0.1)}g.forEach(function(c){var d=null,b;if(a.getById(c.id)){b=a.getById(c.id)}else {b=tpStore.getById(c.id)}if(b){if(!b.get('cells')||!b.get('coverages')){var h=c.coveragesTurf.map(function(a){return Bigmedia.Vars.convertTurfToJsts(a)});d={cells:c.cells,coverages:h,coveragesTurf:c.coveragesTurf}}if(d){b.set(d,{commit:!0,silent:!0})}e.add(b)}})},onAutoPlanTerminate:function(){var a=this},loadCities:function(){var b=this,d=b.getViewModel().getStore('allCities'),c=Ext.getStore('Cities'),a=Ext.getStore('CityBoundaries');if(!a.isLoaded()){a.on({load:{fn:b.loadCities,scope:b,single:!0}});return}c.each(function(c){var b=a.getById(c.getId());if(b&&b.get('area')){d.add({id:c.getId(),name:c.get('name'),area:b?b.get('area')/1000000:null})}})}});Ext.define('Bigmedia.view.dialog.DlgAutoPlanModel',{extend:Ext.app.ViewModel,alias:'viewmodel.dialog-dlgautoplan',stores:{planVarStore:{type:'planvarstore'},chainedVarStore:{source:'{planVarStore}',filters:[{property:'id_city',value:'{selectedCity.id}',operator:'='}],sorters:[{property:'city',direction:'ASC'}]},finalStore:{type:'plannerstore'},resCitiesStore:{fields:['id','name'],proxy:'memory'},srcFaces:{model:'Face',autoLoad:!0,proxy:{type:'memory'}},allCities:{model:'PlanCity',proxy:'memory',filters:[{property:'facesCount',value:0,operator:'>'}],sorters:[{property:'population',direction:'DESC'}]},planStore:{source:'{allCities}',filters:[function(a){return !!a.get('budget')||!!a.get('quantity')||!!a.get('coverage')}]},repStore:{model:'Face',autoLoad:!0,proxy:{type:'memory'}},resAlgorithms:{model:'ResAlgorithm',autoLoad:!0,proxy:{type:'memory'}}},formulas:{B:function(a){return 100-a('A')}},data:{steps:2,step:1,A:80,maxOnStreet:5,minDistanceOnStreet:500,minDistance:700,otsFrom:1,minPrice:null,maxCoverage:null,optimal:null,saving:!1}});Ext.define('Bigmedia.view.dialog.DlgAutoPlan',{extend:Bigmedia.view.dialog.MaterialDialog,controller:'dialog-dlgautoplan',viewModel:{type:'dialog-dlgautoplan'},title:' ',layout:'fit',items:[{xtype:'container',reference:'step1',bind:{hidden:'{step != 1}'},layout:'anchor',defaults:{anchor:'100%'},scrollable:'y',items:[{bind:{html:'<span style="font-size: 10px; color: #111"> {step}  {steps}</span>'}},{html:'<span style="font-weight: bold; font-size: 2em; line-height: 1.3em"> ,     </span>'},{html:'<span style="font-weight: bold; font-size: 12px; line-height: 13px"></span>',margin:'20px 0 5px 0'},{layout:{type:'hbox',align:'stretch'},defaults:{labelAlign:'top',hideTrigger:!1,allowDecimals:!1},items:[{xtype:'customnumberfield',fieldLabel:'',labelStyle:'z-index: 1',step:1000,ui:'plannerfield',grow:!0,flex:1,minValue:0,triggers:{hryvnia:{cls:'x-fa fa-hryvnia'}},listeners:{change:'onTotalBudgetChange'}},{xtype:'customnumberfield',fieldLabel:'',labelStyle:'z-index: 1',ui:'plannerfield',padding:'0 0 0 10px',grow:!0,step:1,width:100,minValue:1,maxValue:100,triggers:{percent:{weight:-1,cls:'x-fa fa-percent'}},listeners:{change:'onCoverageChange'}}]},{xtype:'container',reference:'cities',layout:'anchor',defaults:{anchor:'100%'}}]},{xtype:'container',reference:'step2',layout:{type:'vbox',align:'stretch'},scrollable:'y',bind:{hidden:'{step != 2}'},defaults:{width:'100%'},items:[{bind:{html:'<span style="font-size: 10px; color: #111"> {step}  {steps}</span>'}},{html:'<span style="font-weight: bold; font-size: 2em; line-height: 1.3em">  </span>'},{html:'<span style="font-weight: bold; font-size: 12px; line-height: 13px">  </span>',margin:'20px 0 5px 0'},{xtype:'slider',bind:'{A}',margin:0},{layout:{type:'hbox',align:'stretch'},items:[{bind:{html:'A - {A}%'}},{flex:1},{bind:{html:'B - {B}%'}}]},{html:'<span style="font-weight: bold; font-size: 12px; line-height: 13px"> </span>',margin:'20px 0 5px 0'},{xtype:'customnumberfield',fieldLabel:'     ()',labelAlign:'top',labelStyle:'z-index: 1',minValue:1,ui:'plannerfield',width:'100%',bind:'{maxOnStreet}'},{xtype:'customnumberfield',fieldLabel:'          ()',labelAlign:'top',labelStyle:'z-index: 1',minValue:1,ui:'plannerfield',width:'100%',bind:'{minDistanceOnStreet}'},{xtype:'customnumberfield',fieldLabel:'     ()',labelAlign:'top',labelStyle:'z-index: 1',minValue:1,ui:'plannerfield',width:'100%',bind:'{minDistance}'},{xtype:'customnumberfield',fieldLabel:'OTS',labelStyle:'z-index: 1',labelAlign:'top',ui:'plannerfield',minValue:0,maxValue:150,width:'100%',bind:'{otsFrom}'}]},{xtype:'container',reference:'step3',layout:{type:'vbox',align:'stretch'},bind:{hidden:'{step != 3}'},height:'100%',defaults:{width:'100%'},items:[{bind:{html:'<span style="font-size: 10px; color: #111">,  ,    ...</span>'}},{flex:1},{xtype:'progressbar',reference:'progress'},{flex:1}]},{xtype:'container',reference:'step4',layout:{type:'vbox',align:'stretch'},scrollable:'y',bind:{hidden:'{step != 4}'},defaults:{width:'100%'},items:[{html:'<span style="font-weight: bold; font-size: 2em; line-height: 1.3em"> ,     </span>'},{style:'border: 1px solid #e2e2e2; border-radius: 5px',margin:'20px 0 10px 0',padding:10,layout:{type:'vbox',align:'stretch'},items:[{xtype:'radio',name:'planVariant',bind:{boxLabel:'  \u2022 <b>{minPrice.boards}</b> '},reference:'minPrice'},{margin:'0 0 0 35px',bind:{html:'<span> - <b>{minPrice.budget:number("0,000")} </b>.  - <b>{minPrice.coverage:number("0.00")}%</b>. OTS - <b>{minPrice.sumOts:number("0,000")}</b></span>'}}]},{style:'border: 1px solid #e2e2e2; border-radius: 5px',margin:'20px 0 10px 0',padding:10,layout:{type:'vbox',align:'stretch'},items:[{xtype:'radio',name:'planVariant',bind:{boxLabel:'  \u2022 <b>{maxCoverage.boards}</b> '},reference:'maxCoverage'},{margin:'0 0 0 35px',bind:{html:'<span> - <b>{maxCoverage.budget:number("0,000")} </b>.  - <b>{maxCoverage.coverage:number("0.00")}%</b>. OTS - <b>{maxCoverage.sumOts:number("0,000")}</b></span>'}}]},{style:'border: 1px solid #e2e2e2; border-radius: 5px',margin:'20px 0 10px 0',padding:10,layout:{type:'vbox',align:'stretch'},items:[{xtype:'radio',name:'planVariant',bind:{boxLabel:' \u2022 <b>{optimal.boards}</b> '},reference:'optimal'},{margin:'0 0 0 35px',bind:{html:'<span> - <b>{optimal.budget:number("0,000")} </b>.  - <b>{optimal.coverage:number("0.00")}%</b>. OTS - <b>{optimal.sumOts:number("0,000")}</b></span>'}}]}]}],bbar:{items:[{scale:'large',ui:'base-blue',text:'',bind:{hidden:'{!(step == 2)}'},handler:function(a){a.up('window').getViewModel().set('step',1)}},'->',{scale:'large',ui:'base-blue',text:'',bind:{hidden:'{!(step == 1)}'},handler:function(a){a.up('window').getViewModel().set('step',2)}},{scale:'large',ui:'base-blue',text:' ',bind:{hidden:'{!(step == 2)}'},handler:'onStartClick'},{scale:'large',ui:'base-blue',text:'',bind:{hidden:'{!(step == 4)}'},handler:'onSelectClick'}]},listeners:{close:'onDestroy'}});Ext.define('Bigmedia.view.dialog.DlgImportFromDoorsController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgimportfromdoors',listen:{store:{'#storeDoorsFaces':{datachanged:function(b){var a=this;if(a.searchingDoorsData){return}Ext.undefer(a.deferedRecalc);a.deferedRecalc=Ext.defer(a.recalcTotals,500,a)},update:function(e,c,d,b){var a=this;if(a.searchingDoorsData){return}Ext.undefer(a.deferedLoadFromDoors);if(d===Ext.data.Model.EDIT&&(b&&b.indexOf('doorsNo')>=0)){a.recBuffer[c.getId()]=c}a.deferedLoadFromDoors=Ext.defer(a.searchDoorsData,500,a)}}}},bindings:{onInputVariantChange:'{inputVariant}'},loadFromServerPromise:function(a){return fetch('/api/v1/thirdparty',{method:'POST',headers:{'Content-Type':'application/json;charset=utf-8'},body:JSON.stringify({dixes:a})}).then(b=>b.json())},searchDoorsData:function(){var a=this,f=a.getViewModel().getStore('storeDoorsFaces'),g=Ext.getStore('Faces').getDataSource();a.deferedLoadFromDoors=null;var b=[];a.searchingDoorsData=!0;var d=Object.values(a.recBuffer);if(!d.length){return}a.loadMask.show();try{d.forEach(c=>{var d=c.get('doorsNo');if(!d){c.set({status:null,faceId:null,supplierNo:null,supplierName:null,id_city:null,city:null,address:null,streets:null,grp:null,ots:null,lat:null,lon:null,angle:null,id_catab:null,id_size:null,supplier_size:null,supplier_type:null,source:null});return}var f=a.loadedNums[d];if(f){var e=f.copy(null).getData({persist:!0});delete e.id;e.status=' ';c.set(e)}else {c.set('status',null);b.push(d)}});if(!b.length){a.recalcTotals();a.loadMask.hide();a.recBuffer={};return}var c=a.getView().getConfig('maxDixesCount');var e=[];for(let g=0;g<Math.ceil(b.length/c);g++){e[g]=b.slice(g*c,g*c+c)}Promise.all(e.map(b=>a.loadFromServerPromise(b))).then(a=>a.reduce(function(b,c){return c?b.concat(c):b},[])).then(b=>{if(!b||!b.length){a.recalcTotals();a.loadMask.hide();return}a.searchingDoorsData=!0;f.each(c=>{var d=c.get('doorsNo');if(!d){c.set('status',null);return}if(c.get('status')==' '){return}var a=b.find(a=>{return a&&a.doors_no==c.get('doorsNo')});if(!a){c.set({status:' ',faceId:null,supplierNo:null,supplierName:null,id_city:null,city:null,address:null,streets:null,grp:null,ots:null,lat:null,lon:null,angle:null,id_catab:null,id_size:null,supplier_size:null,supplier_type:null,source:null})}else {c.set({status:'  Doors',faceId:a.id,supplierNo:a.supplier_no,supplierName:a.supplierName,id_city:a.id_city,city:a.city,address:a.address,streets:a.streets,grp:a.grp,ots:a.ots,lat:a.lat,lon:a.lon,angle:a.angle,id_catab:a.id_catab,id_size:a.id_size,supplier_size:a.supplier_size,supplier_type:a.type,source:'doors'})}});a.recalcTotals();a.searchingDoorsData=!1;a.loadMask.hide();a.recBuffer={}})}finally{a.searchingDoorsData=!1}},init:function(b){var a=this,e=b.getViewModel(),f=e.getStore('storeDoorsFaces'),c=b.lookup('gridimportfromdoors'),g=[];a.callParent(b);a.recBuffer={};a.searchingDoorsData=!0;a.refreshData();a.loadMask=new Ext.LoadMask({msg:' , ...',target:c});var d=b.etc;c.reconfigure(d.columns);a.initLoaded();a.searchingDoorsData=!1},recalcTotals:function(){var g=this,e=g.getView().getViewModel(),d=e.getStore('storeDoorsFaces'),a={},b=0,f=Ext.getStore('Faces').getDataSource();d.each(function(b){if(b.get('status')=='  Doors'){a[b.get('doorsNo')]=1}});var c={};d.each(a=>{if(a.get('doorsNo')){c[a.get('faceId')]=1}});f.each(a=>{if(a.get('source')=='doors'&&!c[a.getId()]){b++;return !0}});e.set({'readyToImport':Object.keys(a).length,'deleteCount':b})},onBeforeDestroy:function(){Ext.destroy(this.loadMask);delete this.loadMask},onInputVariantChange:function(a){if(a){this.searchFaces()}},onPreviewPOIClick:function(f){var b=this,a=b.getView().getViewModel(),e=a.getStore('storeManualFaces'),c=a.get('inputVariant'),d=Bigmedia.Locales.currentLocale},initLoaded:function(){var a=this,f=a.getView(),e=a.getView().getViewModel(),d=e.getStore('storeDoorsFaces'),c=Ext.getStore('Faces').getDataSource(),b=0;a.loadedNums={};c.each(c=>{if(c.get('doordNo')){a.loadedNums[c.get('doordNo')]=c}if(c.get('source')==='doors'){var f=d.getAt(b);if(f){var e=c.clone(null).getData({persist:!0});delete e.id;e.faceId=c.getId();e.source='doors';e.status=' ';f.set(e);b++}}})},refreshData:function(){var c=this,f=c.getView(),e=f.getConfig('rowsCount'),g=c.getView().getViewModel(),a=g.getStore('storeDoorsFaces');a.beginUpdate();a.removeAll();var b=[];for(var d=0;d<e;d++){b.push({})}a.add(b);a.endUpdate()},onClearAllClick:function(){var a=this;a.refreshData()},searchFaces:function(){var a=this,c=a.getViewModel(),b=c.getStore('storeManualFaces');b.each(b=>a.searchFace(b))},searchFace:function(a){var n=this,m=n.getViewModel(),e=m.get('inputVariant'),h=Ext.getStore('Faces'),f=Ext.getStore('Sides'),k=m.getStore('storeManualFaces');if(!a.get('manualNo')){a.set('faceId',null);return}var g,c,b=0;var i=e=='supplierNo'?a.get('manualNo').toString():+a.get('manualNo');if(a.get('faceId')&&h.getById(a.get('faceId'))){var l=f.findBy(b=>b.get(e)==i&&b.get('faceId')==a.get('faceId'));if(l>=0){g=h.getAt(l)}if(g){b++}}if(!b){var d=f.findExact(e,i);while(d>=0){var j=f.getAt(d).get('faceId');g=h.getById(j);if(g){c={faceId:j}}else {c={}}if(b===0){a.set(c)}else {c.manualNo=a.get('manualNo');k.insert(k.indexOf(a)+1,c)}b++;d++;d=f.findExact(e,i,d)}}if(!b){a.set('faceId',null)}},reconfigureGrid:function(c){if(!c.checked){return}var d=this,a=d.lookup('gridpoi'),b=d.getView(),f=b.etc[c.inputValue],g=a.getStore(),e=f.columns.concat(b.resultColumns);a.reconfigure(e)},createCommonStore:function(){var c=this,a=[];for(var b=0;b<1000;b++){a.push({})}return new Ext.data.Store({model:Bigmedia.model.PoiManual,data:a})},onImportClick:function(){var c=this,b=c.getView(),e=c.getViewModel(),d=e.getStore('storeDoorsFaces'),a={};d.each(function(b){if(b.get('faceId')&&Ext.isNumber(b.get('faceId'))){a[b.get('faceId')]=b.copy(b.get('faceId'))}});b.fireEventArgs('importfromdoors',[a]);b.close()},onShowView:function(a){},onCloseWindowClick:function(){var b=this,a=b.getView();a.close()}});Ext.define('Bigmedia.view.dialog.DlgImportFromDoors',{extend:Ext.window.Window,xtype:'dlgimportfromdoors',controller:'dialog-dlgimportfromdoors',viewModel:{stores:{storeDoorsFaces:{id:'storeDoorsFaces',model:'Face',proxy:{type:'memory'}}},data:{readyToImport:0,deleteCount:0}},config:{manualNo:null,inputVariant:'supplierNo',rowsCount:100000,maxDixesCount:10000},width:'80%',minWidth:400,height:'80%',minHeight:380,modal:!0,autoShow:!1,closeAction:'destroy',title:'  ',referenceHolder:!0,layout:'vbox',padding:10,items:[{xtype:'grid',reference:'gridimportfromdoors',width:'100%',flex:1,viewConfig:{markDirty:!1},selModel:{type:'spreadsheet'},plugins:{clipboard:{formats:{text:{get:'getTextData',put:'putTextData'}}},cellediting:{clicksToEdit:2},selectionreplicator:!0},bind:{store:'{storeDoorsFaces}'},listeners:{cellkeydown:function(i,g,c,e,h,d,b,f){var a=this;if(b.event.key==='Delete'){a.getSelectionModel().getSelected().eachRow(j=>{a.getStore().insert(a.getStore().indexOf(j),{});a.getStore().remove(j)})}}}}],buttons:[{text:Bigmedia.Locales.dlgPoiCategoriesCancelBtnLabel,listeners:{click:'onCloseWindowClick'}},{text:'Clear All',listeners:{click:'onClearAllClick'}},'->',{reference:'btnCreateFilter',bind:{disabled:'{(!readyToImport) && (!deleteCount)}',text:' {readyToImport},  {deleteCount}'},listeners:{click:'onImportClick'}}],listeners:{beforedestroy:'onBeforeDestroy'},etc:{columns:[{text:Bigmedia.Locales.colDoorsNo,sortable:!0,dataIndex:'doors_no',groupable:!1,hideable:!1,width:60,editor:!0},{text:'Price',width:60,sortable:!0,dataIndex:'price',hideable:!1,editor:!0,filter:'number'},{text:'',sortable:!0,dataIndex:'status',groupable:!1,width:120,filter:'list',editor:!1,ignoreExport:!0},{text:Bigmedia.Locales.colOriginalNo,sortable:!0,dataIndex:'supplierNo',groupable:!1,hideable:!0,hidden:!1,draggable:!1,width:80,locked:!1,editor:!1,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}},ignoreExport:!0},{text:Bigmedia.Locales.colSupplier,sortable:!0,dataIndex:'supplier',groupable:!1,width:120,filter:'list',editor:!1,ignoreExport:!0},{text:Bigmedia.Locales.colCity,sortable:!0,dataIndex:'city',groupable:!1,width:120,filter:'list',editor:!1,ignoreExport:!0},{text:Bigmedia.Locales.colAddress,sortable:!0,dataIndex:'address',groupable:!1,width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}},renderer:function(a,b){b.tdAttr='data-qtip="'+Ext.htmlEncode(a)+'"';return Ext.htmlEncode(a)},editor:!1,ignoreExport:!0},{text:Bigmedia.Locales.colCat,sortable:!0,dataIndex:'catab',groupable:!1,width:40,filter:'list',editor:!1,ignoreExport:!0},{text:Bigmedia.Locales.colSize,sortable:!0,dataIndex:'size',groupable:!1,width:100,filter:'list',editor:!1,ignoreExport:!0},{text:Bigmedia.Locales.colNetwork,sortable:!0,dataIndex:'network',groupable:!1,width:100,filter:'list',editor:!1,ignoreExport:!0}]}});Ext.define('Bigmedia.view.dialog.DlgOTSData',{extend:Bigmedia.view.dialog.MaterialDialog,xtype:'dlgotsdata',viewModel:{reference:'ots_analysis',data:{detsetOTSUpdate:!1,detsetOTSDoors:!1}},closeAction:'hide',referenceHolder:!0,title:'  ',layout:{type:'vbox',align:'stretch'},tbar:[{xtype:'button',text:' ',disabled:!0,handler:function(c){var a=c.up('window'),b=a.recalcOTSData().data;a.updateOTSData(b,a);a.getViewModel().set('detsetOTSDoors',!1)},bind:{disabled:'{detsetOTSUpdate}'}},{xtype:'button',text:' DOORS',disabled:!1,handler:function(c){var a=c.up('window'),b={ages:[],groups:[],sex:[],doors:!0};a.updateOTSData(b,a)},bind:{disabled:'{detsetOTSDoors}'}}],updateOTSData:function(c,d){var b=(+new Date()).toString();fetch('/api/v1/heatinfoots?_dc='+b,{method:'POST',cache:'no-cache',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify(c)}).then(a=>a.json()).then(e=>{var a=Ext.getStore('Faces');console.log(e);a.beginUpdate();Ext.suspendLayouts();a.suspendEvents();try{var f=CryptoJS.Rabbit.decrypt(e,b+'j8Z5f644XYePh4g7sEfE');decrypted=f.toString(CryptoJS.enc.Utf8);var g=JSON.parse(decrypted);g.forEach(f=>{var b=a.getById(f.id_face);if(b){b.set('ots',f.ots);b.set('grp',f.grp)}})}catch(h){console.log(h)}finally{a.resumeEvents();Ext.resumeLayouts(!0);a.endUpdate()}});let a=(+new Date()).toString();fetch('/api/v1/heatinfoots/map?_dc='+a,{method:'POST',cache:'no-cache',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify(c)}).then(a=>a.json()).then(f=>{var b=Ext.getStore('KSPolygons');b.beginUpdate();Ext.suspendLayouts();b.suspendEvents();b.removeAll();try{var e=CryptoJS.Rabbit.decrypt(f,a+'j8Z5f644XYePh4g7sEfE');decrypted=e.toString(CryptoJS.enc.Utf8);var g=JSON.parse(decrypted);g.forEach(a=>{var e=b.getById(a.id);if(e){e.set({cnt_transit:a.cnt_transit})}else {b.add(a)}})}catch(h){console.log(h)}finally{b.resumeEvents();Ext.resumeLayouts(!0);b.endUpdate();b.fireEvent('endupdate');d.close()}})},recalcOTSData:function(){var f=this,e=f.lookup('treepanel'),c=e.getChecked(),b=!1,a={ages:[],groups:[],sex:[],daysOfWeek:[],doors:!1};Ext.Array.each(c,function(b){if(a[b.get('group')]){a[b.get('group')].push(b.get('code'))}else {if(b.get('group')=='age'){a['ages'].push(b.get('code'))}if(b.get('group')=='incomeLevel'){a['groups'].push(b.get('code'))}}});b=a['ages'].length==0||a['groups'].length==0||a['sex'].length==0||a['daysOfWeek'].length==0;var d={btOTS:b,data:a};return d},items:[{xtype:'treepanel',reference:'treepanel',checkPropagation:'both',rootVisible:!1,width:'100%',flex:1,store:'OTSParamsTree',listeners:{checkchange:function(d,c){var a=this.up('window');var b=a.recalcOTSData();a.getViewModel().set('detsetOTSUpdate',b.btOTS)}}}]});Ext.define('Bigmedia.view.FacesViewController',{extend:Ext.app.ViewController,alias:'controller.facesview',listen:{store:{'#ShoppingCart':{add:'onShoppingCartChange',remove:'onShoppingCartChange',clear:'onShoppingCartChange'},'#Faces':{filterchange:'onStoreFacesFilterChange'}}},bindings:{onCurCampChange:'{curCamp}',onSelStore:'{selstore}',onCampPoisChange:'{curCamp.campPois}'},onAnalyticsClick:function(){var a=Ext.create('Bigmedia.view.dialog.DlgAnalyticsIFrame');a.show()},exportAllPhotosToArchiveClick:function(){this.exportToArchive()},exportToArchive:function(a){var b=this,d=b.lookup('gridPhotos'),h=d.getSelection(),c=b.getViewModel().get('curCamp'),i=new Date(),g='/api/v1/campaigns/'+c.get('id')+'/photorecs/',e='photos_'+encodeURIComponent(b.cleanFileName(c.get('name')))+'_'+(a?a.replace(/\//g,'-'):'all')+'.zip',f=a?a+'/':'';if(d.getStore().getTotalCount()>0){window.open(g+f+e,'_blank')}},fillMonthlyExportMenu:function(b){var f=this,d=b.up('grid').getStore();var a={};d.each(function(e){if(e.get('photoRecs')&&e.get('photoRecs').length>0){var c=e.get('deadline'),d=Ext.Date.format(c,'Y\\-m');if(!a[d]){a[d]={name:Ext.Date.format(c,"F\\'y"),year:c.getFullYear(),month:c.getMonth(),count:1,days:{}};a[d].days[c.getDate()]={name:Ext.Date.format(c,'d\\.m\\.Y'),count:1}}else {a[d].count++;if(a[d].days[c.getDate()]){a[d].days[c.getDate()].count++}else {a[d].days[c.getDate()]={name:Ext.Date.format(c,'d\\.m\\.Y'),count:1}}}}});var c=Object.keys(a).sort().reverse().map(function(c){var d=a[c],e=Object.keys(d.days).sort(function(a,d){return a>d?1:a<d?-1:0}).map(function(a){return {text:d.days[a].name+' ('+d.days[a].count+')',day:a}});return {text:a[c].name+' ('+a[c].count+')',menu:new Ext.menu.Menu({items:e.length>1?(new Array({text:'All'})).concat(e):e,year:a[c].year,month:a[c].month,plain:!0,listeners:{click:function(d,a){if(a){f.exportToArchive(d.year+'/'+(d.month+1).toString()+(a.day?'/'+a.day:''))}}}})}});var e=new Ext.menu.Menu({items:c,plain:!0});b.setMenu(e);b.showMenu()},transliterateFileName:function(a){var b={'':'YO','':'I','':'TS','':'U','':'K','':'E','':'N','':'G','':'SH','':'SCH','':'Z','':'H','':"'",'':'yo','':'i','':'ts','':'u','':'k','':'e','':'n','':'g','':'sh','':'sch','':'z','':'h','':"'",'':'F','':'I','':'V','':'a','':'P','':'R','':'O','':'L','':'D','':'ZH','':'E','':'f','':'i','':'v','':'a','':'p','':'r','':'o','':'l','':'d','':'zh','':'e','':'Ya','':'CH','':'S','':'M','':'I','':'T','':"'",'':'B','':'YU','':'ya','':'ch','':'s','':'m','':'i','':'t','':"'",'':'b','':'yu','':'YI','':'yi','':'YE','':'ye','':'I','':'i'};function transliterateWord(c){return c.split('').map(function(d){return b[d]||d}).join('')}return a.split(' ').map(function(b){return transliterateWord(b)}).join('_')},cleanFileName:function(a){return a.replace(/[\*\|\\:"<>\?\/]/g,'')},onLinkPoiRulesChanged:function(){var a=this,b=a.lookupReference('mapFaces');a.getView().lookupViewModel().set('maximumfaces',a.lookup('dlglinkfacestopoisettings').getMaximumFaces());Ext.callback(b.getController().onFormatsRulesRefresh,b.getController())},onPrevVersionClick:function(){window.open('www.bigmedia.ua/old/#campaigns','_blank')},onImportFromDoorsClick:function(){var a=Ext.create('Bigmedia.view.dialog.DlgImportFromDoors');a.on('importfromdoors',function(a){fStore=Ext.getStore('Faces');var b=[],c=[];fStore.each(c=>{if(c.get('source')=='doors'){if(!a[c.getId()]){b.push(c)}else {c.set('price',a[c.getId()].get('price'))}}});Object.keys(a).forEach(b=>{if(!fStore.getById(b)){c.push(a[b])}});fStore.remove(b);fStore.add(c);Bigmedia.Vars.updateFacesFinalPrice()},{single:!0});a.show()},onOTSFilterClick:function(){var a=Ext.create('Bigmedia.view.dialog.DlgOTSData');a.show()},onClearFiltersClick:function(){var a=this,b=a.getViewModel();Ext.Msg.confirm({title:' ',message:'  ?',buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(f){if(f==='yes'){var e=a.lookup('gridFaces'),c=e.getStore(),d=c.getFilters();d.beginUpdate();try{c.getFilters().each(a=>{if(a.isGridFilter){c.removeFilter(a)}});b.set('filterPoi',!1);b.set('manualNoFiltered',!1);e.filters.clearFilters()}finally{d.endUpdate()}}}})},onRemoveCampaignClick:function(){var b=this,a=b.getViewModel();Ext.Msg.confirm({title:Bigmedia.Locales.campViewConfirmDeleteCampaignTitle,message:Bigmedia.Locales.campViewConfirmDeleteCampaignMessage,buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(c){if(c==='yes'){var b=a.get('curCamp');store=Ext.getStore('Campaigns');store.remove(b);store.sync({success:function(){Bigmedia.Vars.toastSuccess(' ');a.set('curCamp',store.first())},failure:function(){Bigmedia.Vars.toastFailure('    .')}})}}})},onAutoPlanClick:function(){var b=this;var a=Ext.create('Bigmedia.view.dialog.DlgAutoPlan',{closeAction:'destroy'});a.on('finished',b.addPlannedFaces,b);a.show()},addPlannedFaces:function(i){var j=this,c=j.getViewModel(),a=c.get('curCamp'),d=[],f=c.get('savePrice'),h=c.get('useEncryption'),g=Bigmedia.Vars.getCurrentRulesGroup(),b=c.get('pubCamp'),e;if(b&&b.get('cryptoHash')){e=Bigmedia.Vars.getPubPassphrase(a.get('publishedId'))}i.forEach(c=>{var j=Ext.Object.merge(Ext.clone(c.getData()),{id:null,faceId:c.getId(),startDate:a.get('filterPeriod').startDate,endDate:a.get('filterPeriod').endDate,operationId:1});if(h){var l=f?Bigmedia.Vars.encryptPrice(Bigmedia.Vars.getSalt(c.get('campaignId')),c.get('finalPrice')):null;j.supplierPriceEnc=l;j.supplierPrice=null}else {j.supplierPrice=f?c.get('finalPrice'):null;j.supplierPriceEnc=null}if(b&&c.get('finalPrice')&&g){var k=g.getFaceMonthClientPrice({faceId:c.getId(),netCost:c.get('finalPrice')});if(b.get('cryptoHash')){if(e){j.pubPriceEnc=Bigmedia.Vars.encryptPrice(e,k)}}else {j.pubPrice=k}}d.push(j)});if(d.length>0){a.proposals().add(d)}},onBeforeToggleFilterByNumber:function(i,g){var e=this,h=e.getViewModel(),d=Ext.getStore('Faces'),f=h.get('curCamp'),c=f.get('filters'),a=c?c.filter_manual_no:null;if(g){if(a){var b=new Ext.util.Filter({id:'filter_manual_no',property:'id',operator:'in',value:a.manual_no.map(a=>a[1])});b.inputVariant=a.inputVariant;b.manual_no=a.manual_no;Ext.getStore('Faces').addFilter(b)}else {e.showManualNoDialog()}}else {if(d.getFilters().getByKey('filter_manual_no')){d.removeFilter('filter_manual_no')}}},onSetupFilterByNumber:function(){var a=this,b=a.getViewModel();if(!b.get('manualNoFiltered')){b.set('manualNoFiltered',!0);return}a.showManualNoDialog()},showManualNoDialog:function(){var g=this,c=g.getViewModel(),d=c.get('curCamp'),b=d.get('filters'),a=b?b.filter_manual_no:null,e=Ext.getStore('Faces');var f=new Bigmedia.view.dialog.DlgFilterByNumber({inputVariant:a?a.inputVariant:'supplierNo',manualNo:a?a.manual_no:null,listeners:{createfilter:function(b,c){var a=new Ext.util.Filter({id:'filter_manual_no',property:'id',operator:'in',value:b.map(a=>a.get('faceId'))});a.inputVariant=c;a.manual_no=b.map(a=>[a.get('manualNo'),a.get('faceId')]);Ext.getStore('Faces').addFilter(a)},close:function(){if(!e.getFilters().getByKey('filter_manual_no')){c.set('manualNoFiltered',!1)}}}});f.show()},onExportToExcelClick:function(d){var a=this,c=a.lookup('maintabpanel'),b=c.getActiveTab();a.exportToExcel(d,b.down('grid'),'bma.xlsx',!0,!0)},bulkAddPubPrices:function(f,e){var g=this,d=g.getViewModel().get('curCamp'),b=[],h;f.forEach(function(a){b.push('<proposal id="'+a.id+'" price_encrypted = "'+a.pubPriceEnc+'" price = "'+a.pubPrice+'"></proposal>')});var c=new FormData();c.append('proposals',b.join(''));var a=new XMLHttpRequest();a.onload=function(){d.proposals().load()};a.open('POST','/api/v1/published/campaigns/'+encodeURIComponent(e.getId())+'/bulkAddPubPrices');a.send(c)},updatePubPricesByDiscountGroup:function(a){var e=this,g=e.getViewModel(),f=g.get('curCamp'),c=[],d=Bigmedia.Vars.getCurrentRulesGroup(),b;if(a.get('cryptoHash')){b=Bigmedia.Vars.getPubPassphrase(a.getId());if(!b){return}}f.proposals().each(f=>{var e={id:f.getId()};if(a&&f.get('netCost')&&d){var g=d.getFaceMonthClientPrice({faceId:f.get('faceId'),netCost:f.get('netCost')});if(a.get('cryptoHash')){if(b){e.pubPriceEnc=Bigmedia.Vars.encryptPrice(b,g);e.pubPrice=''}}else {e.pubPrice=g;e.pubPriceEnc=''}}if(g&&(e.pubPriceEnc||e.pubPrice)){c.push(e)}});e.bulkAddPubPrices(c,a)},onGetPresentationClick:function(){var b=this,a=b.getViewModel().get('curCamp'),c=Ext.create('Bigmedia.view.det.DetPublishedCampaign',{campaignId:a.getId(),publishedId:a.get('publishedId'),listeners:{save:function(a){Ext.getApplication().getMainView().getViewModel().set('pubCamp',a);b.updatePubPricesByDiscountGroup(a)}}});c.show()},onCampPoisChange:function(a){this.lookup('mapFaces').setPoiStore(a)},onUseEncryptionBeforeToggle:function(d,c){if(!c){return !0}var e=this,a=e.getViewModel().get('curCamp'),b=a&&!a.phantom?a.getId():null;if(!Bigmedia.Vars.getSalt(b)){Bigmedia.Vars.showPriceEncryptDialog(b,function(){d.setPressed(!0)});return !1}},onEditSaltClick:function(){var b=this,a=b.getViewModel().get('curCamp');campaignId=a&&!a.phantom?a.getId():null;Bigmedia.Vars.showPriceEncryptDialog(campaignId)},onAddProposalsClick:function(){var b=this,c=b.getViewModel(),j=c.getStore('selstore'),a=c.get('curCamp'),e=[],g=c.get('savePrice'),i=c.get('useEncryption'),h=Bigmedia.Vars.getCurrentRulesGroup(),d=c.get('pubCamp'),f;if(d&&d.get('cryptoHash')){f=Bigmedia.Vars.getPubPassphrase(a.get('publishedId'))}j.each(b=>{var c=Ext.Object.merge(Ext.clone(b.getData()),{id:null,faceId:b.getId(),startDate:a.get('filterPeriod').startDate,endDate:a.get('filterPeriod').endDate,operationId:1});if(i){var k=g?Bigmedia.Vars.encryptPrice(Bigmedia.Vars.getSalt(b.get('campaignId')),b.get('finalPrice')):null;c.supplierPriceEnc=k;c.supplierPrice=null}else {c.supplierPrice=g?b.get('finalPrice'):null;c.supplierPriceEnc=null}if(d&&b.get('finalPrice')&&h){var j=h.getFaceMonthClientPrice({faceId:b.getId(),netCost:b.get('finalPrice')});if(d.get('cryptoHash')){if(f){c.pubPriceEnc=Bigmedia.Vars.encryptPrice(f,j)}}else {c.pubPrice=j}}e.push(c)});if(e.length>0){a.proposals().on({saved:{fn:function(){var d=b.lookup('gridFaces'),a=b.lookup('maintabpanel'),c=b.lookup('tabshoppingcart');a.setActiveTab(c);d.getSelectionModel().deselectAll()},scope:b,single:!0}});a.proposals().add(e)}},onSelStore:function(b){var a=this,c=a.lookupReference('gridFaces'),d=a.getViewModel();c.on('selectionchange',function(c,a){b.addFilter(new Ext.util.Filter({id:'filter_selected',filterFn:function(d){return a.find(e=>e.getId()===d.getId())}}))})},onStoreFacesFilterChange:function(e){var f=this,c=[],b=f.getViewModel().get('curCamp'),a=b&&b.get('filters')?Ext.clone(b.get('filters')):{};if(!b){return}e.getFilters().each(a=>{if(a.isGridFilter){var b={id:a.getId(),property:a.getProperty(),operator:a.getOperator(),value:a.getValue(),isGridFilter:!0};c.push(b)}if(a.getId()==='filter_period'){c.push({id:a.getId(),startDate:a.startDate,endDate:a.endDate,disabled:a.disabled,wholePeriod:a.wholePeriod})}if(a.getId()==='filter_manual_no'){c.push({id:a.getId(),inputVariant:a.inputVariant,manual_no:a.manual_no})}});function isEqualGridFilter(a,b){if(a.property!==b.property){return !1}if(a.operator!==b.operator){return !1}if(a.value===b.value){return !0}if(Ext.isArray(a.value)&&Ext.isArray(b.value)){return Ext.Array.equals(a.value,b.value)}return !1}function isEqualPeriodFilter(a,b){return +a.startDate===+b.startDate&&+a.endDate===+b.endDate&&a.disabled==b.disabled&&a.wholePeriod==b.wholePeriod}function isEqualManualNoFilter(a,b){if(a.inputVariant!==b.inputVariant){return !1}if(Ext.isArray(a.manual_no)&&Ext.isArray(b.manual_no)){if(a.manual_no.length!=b.manual_no.length){return !1}for(var c=0;c<a.manual_no.length;c++){if(!Ext.Array.equals(a.manual_no[c],b.manual_no[c])){return !1}}return !0}return !1}var d=!1;Object.keys(a).forEach(b=>{if(!c.find(function(a){a.id===b})){d=!0;if(b!='filter_manual_no'){delete a[b]}else {a[b].disabled=!0}}});if(c.some(function(b){return b.isGridFilter&&!Object.values(a).find(a=>{return isEqualGridFilter(b,a)})||b.startDate&&!Object.values(a).find(a=>{return isEqualPeriodFilter(b,a)})||b.manual_no&&!Object.values(a).find(a=>{return isEqualManualNoFilter(b,a)})})||d){c.forEach(b=>{a[b.id]=b});b.set('filters',a);if(!b.phantom||b.proposals().getDataSource().getCount()>0){b.save()}}},onShowAllToggle:function(e,c){var b=this,d=b.getViewModel(),a=d.get('curCamp');b.onDateRangePeriodChanged({startDate:a.get('filterPeriod').startDate,endDate:a.get('filterPeriod').endDate,disabled:c,wholePeriod:a.get('filterPeriod').wholePeriod})},onDateRangePeriodChanged:function(a){var d=this,e=d.getViewModel();var b=e.get('curCamp');if(!b.get('filters')){b.set('filters',{filter_period:{startDate:a.startDate,endDate:a.endDate,disabled:a.disabled,wholePeriod:a.wholePeriod}})}else {var c=Ext.clone(b.get('filters'));c.filter_period={startDate:a.startDate,endDate:a.endDate,disabled:a.disabled,wholePeriod:a.wholePeriod};b.set('filters',c)}console.log('filters->period->',c,a);d.updatePeriodFilter(a)},updatePeriodFilter:function(a){var i=Ext.getStore('Faces'),n=i.getFilters();var b=n.getByKey('filter_period');if(b&&+b.startDate===+a.startDate&&+b.endDate===+a.endDate&&b.disabled==a.disabled&&b.wholePeriod==a.wholePeriod){return}try{var h=!!a.wholePeriod,k=14,j=!0,f=new Date(),c=new Date(Date.UTC(f.getFullYear(),f.getMonth(),f.getDate()+1)),g=+a.startDate<+c?c:a.startDate,l=+a.endDate<+c?c:a.endDate,e=Math.round((g-c)/(3600*24*1000)),m=Math.round((l-g)/(3600*24*1000));if(e<0){e=0}var p,q=/(\d+)(\w)/g;var o=new RegExp('^'+(h?'':'.*?')+'('+(j?'[tf]':'f')+(h?')+$':'{'+k+'})'));var d=new Ext.util.Filter({id:'filter_period',filterFn:function(c){if(a.disabled){return !0}var b=c.get('occByDays');return !b||o.test(b.substring(e,e+m))}});d.startDate=a.startDate;d.endDate=a.endDate;d.disabled=a.disabled;d.wholePeriod=a.wholePeriod;i.addFilter(d)}catch(r){console.log(r)}finally{}},updateManualNoFilter:function(b,c){var d=Ext.getStore('Faces'),f=Ext.getStore('Sides'),e=b.map(a=>a[1]).filter(a=>!!a);var a=new Ext.util.Filter({id:'filter_manual_no',property:'id',operator:'in',value:e});a.manual_no=b;a.inputVariant=c;d.addFilter(a)},onCurCampChange:function(a,g){console.log('onCurCampChange',a,g);var c=this,b=c.lookup('gridFaces'),h=b.getStore(),f=h.getFilters(),e=c.lookup('daterange');f.beginUpdate();try{c.columnsIniting=!0;if(a&&a.get('filterPeriod')){if(e){e.updatePeriod({startDate:a.get('startDate'),endDate:a.get('endDate')})}var j=a.get('filterPeriod');c.updatePeriodFilter(j)}if(!a||!g){return}b.filters.clearFilters();var i=[];if(a.get('filters')&&Object.keys(a.get('filters')).length>0){var d=a.get('filters')['filter_manual_no'];if(d&&!d.disabled){c.updateManualNoFilter(d.manual_no,d.inputVariant)}Object.values(a.get('filters')).filter(b=>b.isGridFilter).forEach(c=>{var h=c.property;var f=b.columnManager.getHeaderByDataIndex(h);if(f){var d='string';if(c.operator==='in'||Array.isArray(c.value)){d='list'}else {if(typeof c.value=='boolean'){d='boolean'}else {if(typeof c.value=='number'&&['eq','lt','gt'].indexOf(c.operator)>=0){d='number'}}}var j={grid:b,owner:b.filters,column:f,type:d};var e=Ext.Factory.gridFilter(j);if(d=='number'){e.filter[c.operator].setValue(c.value)}else {e.filter.setValue(c.value)}e.active=!0;f.addCls('x-grid-filters-filtered-column');i.push(e)}});b.filters.addFilter(i);b.filters.applyFilters(h)}}catch(k){console.log('error during filters initalization: %o',k)}finally{f.endUpdate();c.columnsIniting=!1}},init:function(i){var b=this,e=b.lookupReference('gridFaces'),d=b.lookupReference('gridCart'),f=b.lookup('gridSelected'),a=b.lookupReference('mapFaces'),h=b.lookup('detface'),g=b.lookup('detschema'),c=b.lookupReference('monitoringGrid'),j=b.getViewModel();b.callParent(i);a.getMap().setGrid(e);a.getMap().setGridMoitoring(c);a.getMap().setCartGrid(d);a.getMap().setSelGrid(f);a.setPoiStore(Ext.getStore('Pois'));a.setCityPolygonStore(Ext.getStore('CityPolygon'));e.setMapView(a);c.setMapView(a);d.setMapView(a);Ext.defer(function(){a.getMap().setSelStore(j.getStore('selstore'));a.setDetFace(h);g.setMap(a.getMap())},500)},onEditCampaignClick:function(){var d=this,e=d.getViewModel(),b=e.get('curCamp'),a=b.copy(null);var c=Ext.create('Bigmedia.view.dialog.DlgEditCampaign',{modal:!0,closeAction:'destroy',camp:a,listeners:{dialogcancelled:function(){a.destroy()},campaignchanged:function(d){b.set({name:d.get('name'),startDate:d.get('startDate'),endDate:d.get('endDate')});b.save({failure:function(b,a){console.error('failed to save campaign');Bigmedia.Vars.toastFailure('  ')},success:function(e,b){Bigmedia.Vars.toastSuccess(' ');c.close();a.destroy()}})}}});c.show()},exportToExcel:function(f,d,c,a,b){Ext.MessageBox.show({msg:Bigmedia.Locales.exportExcelSavingData,progressText:Bigmedia.Locales.exportExcelProgressText,width:300,wait:{interval:200},animateTarget:f});var e=this;if(window.Worker){Bigmedia.GridExport.exportToExcel(d,c,function(){Ext.MessageBox.hide();Bigmedia.Vars.toastSuccess(Bigmedia.Locales.exportExcelDone);Bigmedia.Vars.toastSuccess(Bigmedia.Locales.exportExcelFileSaved)},a,b)}else {e.timer=Ext.defer(function(){Bigmedia.GridExport.exportToExcel(d,c,function(){},a,b);e.timer=null;Ext.MessageBox.hide();Bigmedia.Vars.toastSuccess(Bigmedia.Locales.exportExcelDone);Bigmedia.Vars.toastSuccess(Bigmedia.Locales.exportExcelFileSaved)},3000)}},onFacesGridSelectionChange:function(a){var b=this,c=b.lookup('maintabpanel');if(a.getSelection().length>0){}},onMonitoringGridSelectionChange:function(c){var a=this,b=a.lookup('monitoringGrid');console.log('onMonitoringGridSelectionChange++')},onMonitoringGridShow:function(c){var a=this,b=a.lookup('monitoringGrid');console.log('onMonitoringGridShow+++')},onMonitoringGridHide:function(c){var a=this,b=a.lookup('monitoringGrid');console.log('onMonitoringGridHide---')},onShoppingCartChange:function(c){var d=this,b=d.lookup('tabshoppingcart'),a=c.getCount();if(a===0){b.setTitle(Bigmedia.Locales.tabCartTitle)}else {b.setTitle(Bigmedia.Locales.tabCartTitle+'<span class="tabcart-badge">'+a+'</span>')}},onFilterSetCollapse:function(b){var a=b.items.get(0);if(b.items.length>1){a.targetStore.removeFilter('filter_min_grp');a.targetStore.removeFilter('filter_max_grp');a.targetStore.removeFilter('filter_min_ots');a.targetStore.removeFilter('filter_max_ots')}else {if(a&&a.targetStore){a.targetStore.removeFilter('filter'+a.filterField)}}},onFilterSetExpand:function(b){var a=b.items.get(0);if(b.items.length>1){var c=b.items.get(0),d=b.items.get(1);c.applyFilters();d.applyFilters()}else {if(a&&a.targetStore){a.fireEvent('change',a,a.getValue(),[])}}}});Ext.define('Bigmedia.view.FacesViewModel',{extend:Ext.app.ViewModel,alias:'viewmodel.facesview',stores:{selstore:{source:'{gridfaces}',filters:new Ext.util.Filter({id:'filter_selected',filterFn:function(){return !1}})}},data:{manualNoFiltered:!1,filterPoi:!1,buffer:500,beforepoi:!1,maximumfaces:null,filterPeriodDisabled:!1,showKS:!1}});Ext.define('Bigmedia.view.map.MapViewController',{extend:Ext.app.ViewController,alias:'controller.map-mapview',listen:{store:{'#FormatsTree':{needrefresh:'onFormatsRulesRefresh'},'#LinkPoiRulesTree':{needrefresh:'onFormatsRulesRefresh'}}},bindings:{onBufferChanged:'{buffer}',onBeforePoiChanged:'{beforepoi}',onFilterPoi:'{filterPoi}',onMaximumFacesChanged:'{maximumfaces}',onShowKSHitmapChanged:'{showKSHitmap}'},onShowKSHitmapChanged:function(b){var c=this,a=c.lookupReference('facesmap');if(a.CityHeatmapLayer){a.CityHeatmapLayer.setVisible(b)}},onFocusGooglePlace:function(c){var b=this,a=b.lookupReference('facesmap');a.showPlace()},onClearGooglePlace:function(){var b=this,a=b.lookupReference('facesmap');a.updatePlace()},onSelectGooglePlace:function(a){var c=this,b=c.lookupReference('facesmap');b.updatePlace([a.geometry.location.lng(),a.geometry.location.lat()]);Bigmedia.Vars.taglog('googlesearch',{formatted_address:a.formatted_address,name:a.name,place_id:a.place_id,url:a.url,vicinity:a.vicinity,lat:a.geometry.location.lat(),lon:a.geometry.location.lng(),plus_code:a.plus_code})},onManagePOI:function(){var b=this,a=b.lookup('dlgmanagepoi');a.show()},onCreatePoint:function(){var b=this,a=b.lookupReference('facesmap');a.maskDraw.setActive(!0,'Point')},onCreateLine:function(){var b=this,a=b.lookupReference('facesmap');a.maskDraw.setActive(!0,'LineString')},onCreatePolygon:function(){var b=this,a=b.lookupReference('facesmap');a.maskDraw.setActive(!0,'Polygon')},onCreateCircle:function(){var b=this,a=b.lookupReference('facesmap');a.maskDraw.setActive(!0,'Circle')},onMaskEdit:function(a){var c=this,b=c.lookupReference('facesmap');b.maskModify.setActive(a.pressed)},deferedOnMaximumFacesChanged:function(b){var a=this,c=a.lookupReference('facesmap');delete a.maximumFacesChangedDefer;c.setMaximumFaces(b)},onMaximumFacesChanged:function(b){var a=this;if(a.maximumFacesChangedDefer){Ext.undefer(a.maximumFacesChangedDefer);delete a.maximumFacesChangedDefer}a.maximumFacesChangedDefer=Ext.defer(a.deferedOnMaximumFacesChanged,700,a,[b])},deferedOnFormatsRulesRefresh:function(){var a=this,b=a.lookupReference('facesmap');delete a.formatsRulesRefreshDefer;b.formatsRulesChanged()},onFormatsRulesRefresh:function(){var a=this;if(a.formatsRulesRefreshDefer){Ext.undefer(a.formatsRulesRefreshDefer);delete a.formatsRulesRefreshDefer}a.formatsRulesRefreshDefer=Ext.defer(a.deferedOnFormatsRulesRefresh,700,a)},deferedOnBufferChanged:function(b){var a=this,c=a.lookupReference('facesmap');delete a.bufferChangesDefer;c.setBuffer(b)},onBufferChanged:function(b){var a=this;if(a.bufferChangesDefer){Ext.undefer(a.bufferChangesDefer);delete a.bufferChangesDefer}a.bufferChangesDefer=Ext.defer(a.deferedOnBufferChanged,700,a,[b])},deferedOnBeforePoiChanged:function(b){var a=this,c=a.lookupReference('facesmap');delete a.beforepoiChangesDefer;c.setBeforePoi(b)},onBeforePoiChanged:function(b){var a=this;if(a.beforepoiChangesDefer){Ext.undefer(a.beforepoiChangesDefer);delete a.beforepoiChangesDefer}a.beforepoiChangesDefer=Ext.defer(a.deferedOnBeforePoiChanged,700,a,[b])},onMaskSelect:function(){var b=this,a=b.lookupReference('facesmap');a.maskDraw.setActive(!1);a.maskModify.setActive(!1)},onMaskClear:function(){var b=this,a=b.lookupReference('facesmap');a.maskLayer.getSource().clear(!0);a.maskDraw.setActive(!1);a.maskModify.setActive(!1);a.recalcBuffer()},onFilterPoi:function(a){var c=this,b=c.lookupReference('facesmap');b.filterFaces.setActive(a)},onFilter:function(a){}});Ext.define('Bigmedia.view.map.MapViewModel',{extend:Ext.app.ViewModel,alias:'viewmodel.map-mapview',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.map.MapController',{extend:Ext.app.ViewController,alias:'controller.main-map'});Ext.define('Bigmedia.view.map.MapModel',{extend:Ext.app.ViewModel,alias:'viewmodel.main-map',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.map.MapHint',{extend:Ext.Container,xtype:'maphint',cls:'ol-hint',width:220,header:!1,config:{record:null,map:null,popupHtml:null},padding:5,viewModel:{data:{gridRecord:null,popupRecord:null,popupHtml:null}},layout:{type:'container'},updateRecord:function(a){var c=this,b=c.getViewModel();b.set('gridRecord',a);b.set('popupRecord',a)},updatePopupHtml:function(a){var b=this;if(a){b.getViewModel().set('popupHtml',a)}},items:[{type:'component',baseCls:'',width:'auto',height:'auto',cls:'hint-info',bind:{html:'{popupHtml}'}}],listeners:{hide:function(a){}}});Ext.define('Bigmedia.view.map.FacePopupController',{extend:Ext.app.ViewController,alias:'controller.facepopup',onCloseClick:function(a){}});Ext.define('Bigmedia.view.map.FacePopup',{extend:Ext.Container,xtype:'facepopup',cls:'ol-popup',width:280,height:250,header:!1,controller:'facepopup',config:{record:null,map:null},padding:8,viewModel:{data:{gridRecord:null,popupFace:null,popupPhotoId:null,origFace:null,btnIcon:'plus',btnHidden:!1}},layout:{type:'auto'},updateRecord:function(b){var a=this,l=Ext.getStore('Faces'),k=Ext.getStore('ThirdPartyBoards');vm=a.getViewModel(),cartStore=a.getMap().getCartStore();if(!cartStore){vm.set('btnHidden',!0)}else {if(cartStore.indexOf(b)>=0){vm.set('btnIcon','minus')}else {vm.set('btnIcon','plus')}}if(a.carouselTimer){clearTimeout(a.carouselTimer);delete a.carouselTimer;if(a.carouselPhoto){delete a.carouselPhoto}}vm.set('gridRecord',b);if(b.get('face')){vm.set('popupFace',b.get('face'))}else {vm.set('popupFace',b)}if(b){var i=a.getViewModel().get('popupFace.id');var c=l.getById(i);if(!c){c=k.getById(i)}vm.set('origFace',c);vm.set('popupPhotoId',b.get('popupPhotoId'));var f=vm.get('popupFace.photos');var e=function(d){if(!d||d.length===0){var c=a.down('#facephoto');a.carouselPhoto=null;if(c){c.setStyle('background-image','url(/photohub/doors/'+b.get('doorsNo')+')')}return}a.photos=d.map(function(a){var c=new Image();if(a.id){c.src='http://www.bigmedia.ua/cgi/getphoto_.pl?id='+a.id}else {if(a.src){c.src=a.src}}return c});a.photoIndex=0;var c=a.down('#facephoto');if(c){a.carouselPhoto=function(){a.photoIndex=(a.photoIndex+1)%a.photos.length;if(c.getEl().dom){c.setStyle('background-image','url('+a.photos[a.photoIndex].src+')')}a.carouselTimer=setTimeout(a.carouselPhoto,2000)};if(c.getEl().dom){c.setStyle('background-image','url('+a.photos[a.photoIndex].src+')')}}a.carouselTimer=setTimeout(a.carouselPhoto,2000)};if(f&&f.length>0){e(f)}else {if(!c){if(b.get('doorsNo')){var d=a.down('#facephoto');a.carouselPhoto=null;if(d&&d.getEl().dom){d.setStyle('background-image','url(/photohub/doors/'+b.get('doorsNo')+')')}}}else {if(c.get('urlPhoto')){var d=a.down('#facephoto');a.carouselPhoto=null;if(d&&d.getEl().dom){d.setStyle('background-image','url('+c.get('urlPhoto')+')')}}else {var g=Ext.getStore('FacesInfo');var h=vm.get('popupFace.id');var j=g.getById(h);if(!j){Bigmedia.model.FaceInfo.load(h,{success:function(a,c){g.add(a);e(a.get('photos'))},failure:function(){if(c.get('doorsNo')){var d=a.down('#facephoto');a.carouselPhoto=null;if(d&&d.getEl().dom){d.setStyle('background-image','url(/photohub/doors/'+c.get('doorsNo')+')')}}}})}else {e(j.get('photos'))}}}}}},suspendCarousel:function(){var a=this;if(a.carouselTimer){clearTimeout(a.carouselTimer);delete a.carouselTimer}},resumeCarousel:function(){if(this.carouselPhoto){this.carouselPhoto()}},items:[{type:'container',baseCls:'',itemId:'faceinfo',width:'100%',height:40,padding:'0 0 8 0',cls:'face-info',bind:{html:'<b>{popupFace.num}</b> - '+Bigmedia.Locales.colCity+': <b>{popupFace.city}</b>. '+Bigmedia.Locales.colSize+': <b>{popupFace.size}</b><br>'+Bigmedia.Locales.colAddress+': <b><span data-qtip="{popupFace.address}">{popupFace.address}</span></b>'}},{type:'component',reference:'facephoto',itemId:'facephoto',width:'100%',height:152,cls:'face-photo',listeners:{afterrender:function(a){var b=a.up('facepopup');a.getEl().dom.onclick=function(){if(b.carouselPhoto){window.open(b.photos[b.photoIndex].src,'_blank')}else {var c=a.getEl().dom.style.backgroundImage;c=c.match(/url\("(.*)"\)/)[1];window.open(c,'_blank')}};a.getEl().dom.onmouseover=function(){b.suspendCarousel()};a.getEl().dom.onmouseout=function(){b.resumeCarousel()}}}},{xtype:'container',width:'100%',cls:'face-toolbar',height:40,layout:{type:'auto'},items:[{xtype:'checkbox',reference:'selectedInGrid',cls:'face-selected',boxLabel:Bigmedia.Locales.mapFacePopupSelectedLabel,flex:1,bind:{value:'{gridRecord.selected}'},listeners:{change:function(e,f){var b=e.up('facepopup').getViewModel().get('gridRecord');var c=e.up('facepopup').getMap();if(!c){return}var d=c.getCartStore();var a;if(d&&d.getById(b.getId())&&c.getCartGrid()){a=c.getCartGrid()}else {a=c.getGrid()}if(!a){return}if(f){if(a.select){a.select([b],!0)}else {a.getView().focusRow(b);a.getSelectionModel().select([b],!0)}}else {if(a.deselect){a.deselect([b])}else {a.getSelectionModel().deselect([b])}}}}},{xtype:'button',reference:'like',enableToggle:!0,toggleGroup:'like',bind:{pressed:'{origFace.inCart}',iconCls:'x-fa fa-{btnIcon}',hidden:'{btnHidden}'},cls:'face-like',listeners:{afterrender:function(a){a.getEl().dom.onclick=function(c){var b=new Ext.event.Event(c);a.onClick(b)}},click:function(c){var b=c.up('facepopup').getViewModel().get('origFace');var a=c.up('facepopup').getMap();if(!a){return}var d=a.getCartStore();if(c.pressed){b.set({inCart:!0,selected:!1},{silent:!0});if(a.getActions().add){Ext.callback(a.getActions().add,a.getActions().scope,[b])}else {d.add(b)}}else {b.set({inCart:!1,selected:!1},{silent:!0});if(a.getActions().remove){Ext.callback(a.getActions().remove,a.getActions().scope,[b])}else {d.remove(b)}}}}}]}],listeners:{hide:function(a){if(a.carouselTimer){clearTimeout(a.carouselTimer);delete a.carouselTimer}delete a.photos}}});Ext.define('Bigmedia.view.drag.ImageController',{extend:Ext.app.ViewController,alias:'controller.drag-image',afterRender:function(b){var a=b.body;if(window.File&&window.FileList&&window.FileReader){this.target=new Ext.drag.Target({element:a,listeners:{scope:this,dragenter:this.onDragEnter,dragleave:this.onDragLeave,drop:this.onDrop}})}else {a.down('.drag-file-label').setHtml('File dragging is not supported by your browser');a.el.addCls('nosupport')}},onImageClick:function(){},onDragEnter:function(e,g){var d=this.getView(),a=d.body,c=a.down('.drag-file-icon'),f=a.down('.drag-image-content'),b=a.down('.drag-file-label');c.setStyle('visibility','visible');b.setStyle('visibility','visible');a.addCls('active')},onDragLeave:function(){this.getView().body.removeCls('active');var d=this.getView(),a=d.body,c=a.down('.drag-file-icon'),e=a.down('.drag-image-content'),b=a.down('.drag-file-label');c.setStyle('visibility','hidden');b.setStyle('visibility','hidden')},destroy:function(){clearInterval(this.timer);this.target=Ext.destroy(this.target);this.callParent()},onDrop:function(e,b){var d=this,a=b.files,c=a.length;if(c!==1||!a[0].type.match(/^image\//)){return}d.loadImage(a[0])},loadImage:function(e){var f=this,c=this.getView(),b=c.body,a=b.down('.drag-file-icon'),d=b.down('.drag-image-content'),i=b.down('.drag-file-label');b.removeCls('active').addCls('dropped');d.setStyle('visibility','hidden');a.setStyle('visibility','visible');a.addCls('fa-spin');var h=document.createElement('img'),g=new FileReader();g.onload=function(g){h.src=g.target.result;Ext.defer(f.scaleImage,500,f,[h,function(k,f,h){var j=[].slice.call(arguments,3);if(!c.destroyed){a.removeCls('fa-spin');a.fadeOut({callback:function(){b.removeCls('dropped');a.setOpacity(1);a.show();i.setStyle('visibility','hidden');a.setStyle('visibility','hidden');d.setStyle('background-image','url('+k+')');d.setStyle('visibility','visible');if(f){Ext.callback(f,h,j)}var l=c.up('form').child('textfield'),m=c.up('form').child('filefield');if(l&&!l.getValue()){var n=e.name.replace(/\..{3,4}?$/,'');l.setValue(n)}if(m){m.setRawValue(e.name)}}})}},f])};g.readAsDataURL(e)},scaleImage:function(c,h,f){var d=this,a=document.createElement('canvas'),g=[].slice.call(arguments,3),b=d.getView();a.width=c.width;a.height=c.height;a.getContext('2d').drawImage(c,0,0,a.width,a.height);while(a.width>=2*b.getMaxImageWidth()){a=this.getHalfScaleCanvas(a)}while(a.height>=2*b.getMaxImageHeight()){a=this.getHalfScaleCanvas(a)}if(a.width>b.getMaxImageWidth()||a.height>b.getMaxImageHeight()){a=this.scaleCanvasWithAlgorithm(a)}var e=b.getImageFormat()||'image/jpeg';b.dataURL=a.toDataURL(e,b.getImageQuality());b.imageChanged=!0;Ext.callback(h,f,[b.dataURL,d].concat(g))},scaleCanvasWithAlgorithm:function(b){var h=this,g=h.getView(),a=document.createElement('canvas');var e=g.getMaxImageWidth()/b.width,f=g.getMaxImageHeight()/b.height,c=e>f?f:e;a.width=b.width*c;a.height=b.height*c;var i=b.getContext('2d').getImageData(0,0,b.width,b.height);var d=a.getContext('2d').createImageData(a.width,a.height);h.applyBilinearInterpolation(i,d,c);a.getContext('2d').putImageData(d,0,0);return a},getHalfScaleCanvas:function(b){var a=document.createElement('canvas');a.width=b.width/2;a.height=b.height/2;a.getContext('2d').drawImage(b,0,0,a.width,a.height);return a},applyBilinearInterpolation:function(a,b,r){function inner(g,i,h,j,c,d){var e=1-c;var f=1-d;return g*e*f+i*c*f+h*e*d+j*c*d}var l,m;var i,o,q,h,n,p;var g,c,e,d,f;var j,k;var v,u,t,s;for(l=0;l<b.height;++l){i=l/r;o=Math.floor(i);q=Math.ceil(i)>a.height-1?a.height-1:Math.ceil(i);for(m=0;m<b.width;++m){h=m/r;n=Math.floor(h);p=Math.ceil(h)>a.width-1?a.width-1:Math.ceil(h);g=(m+b.width*l)*4;c=(n+a.width*o)*4;e=(p+a.width*o)*4;d=(n+a.width*q)*4;f=(p+a.width*q)*4;j=h-n;k=i-o;v=inner(a.data[c],a.data[e],a.data[d],a.data[f],j,k);b.data[g]=v;u=inner(a.data[c+1],a.data[e+1],a.data[d+1],a.data[f+1],j,k);b.data[g+1]=u;t=inner(a.data[c+2],a.data[e+2],a.data[d+2],a.data[f+2],j,k);b.data[g+2]=t;s=inner(a.data[c+3],a.data[e+3],a.data[d+3],a.data[f+3],j,k);b.data[g+3]=s}}}});Ext.define('Bigmedia.view.drag.Image',{extend:Ext.panel.Panel,xtype:'drag-image',controller:'drag-image',title:Bigmedia.Locales.dragImageTitle,header:!1,width:500,height:300,layout:'fit',config:{imageFormat:'image/jpeg',maxImageWidth:1024,maxImageHeight:1024,imageQuality:0.8},bodyCls:'drag-file-ct',html:'<div class="drag-image-content"></div>'+'<div class="drag-file-label">'+Bigmedia.Locales.dragImageDropText+'<br>'+'<div class="drag-file-icon"></div>'+'</div>'});Ext.define('Bigmedia.view.det.DetSchema',{extend:Ext.window.Window,xtype:'detschema',title:'',width:300,height:250,collapsible:!1,minWidth:250,minHeight:180,layout:'fit',resizable:!0,modal:!1,referenceHolder:!0,closeAction:'hide',config:{record:null,face:null,map:null},viewModel:{data:{record:null}},updateRecord:function(a){var b=this;b.setFace(a)},updateFace:function(a){var b=this;b.getViewModel().set('record',a);if(a){var c=a.get('supplierNo')+(a.get('doorsNo')?' ('+a.get('doorsNo')+')':'');b.setTitle(c)}},updateMap:function(a){var c=this,b=c.lookup('schema');if(a){b.setGrid(a.getGrid());b.setCartGrid(a.getCartGrid());b.setSelStore(a.getSelStore());b.setPoiStore(Ext.getStore('Pois'))}},items:[{xtype:'panel',layout:'fit',items:{xtype:'facesmap',detFace:!1,reference:'schema'}}],listeners:{render:function(b){var a=b.lookup('schema');a.map.getView().setZoom(17)}}});'use strict';Ext.define('Bigmedia.view.det.DetFace',{extend:Ext.window.Window,xtype:'detface',title:'',width:300,height:250,collapsible:!1,minWidth:250,minHeight:180,layout:'fit',resizable:!0,modal:!1,referenceHolder:!0,closeAction:'hide',config:{record:null,face:null,map:null},viewModel:{data:{record:null}},listeners:{show:function show(b){var a=b.up().lookup('detschema');if(a&&!a.rendered){a.setHidden(!1)}}},updateRecord:function updateRecord(a){var b=this;b.setFace(a)},updateFace:function updateFace(a){var c=this,d=c.up().lookup('doorsphoto');c.getViewModel().set('record',a);var b=c.lookup('carousel');if(a){if(a.get('doorsNo')!=null){d.setTitle('DoorsNo. '+a.get('doorsNo'));d.setBodyStyle('background','center / cover no-repeat url(/photohub/doors/'+a.get('doorsNo')+')')}var i=a.get('supplierNo')+(a.get('doorsNo')?' ('+a.get('doorsNo')+')':'');c.setTitle(i);if(a.get('photos')||a.get('photoUrl')){b.setFace(a)}else {var f=Ext.getStore('FacesInfo'),g=a.getId(),j=a.get('faceId');var e=f.getById(g);if(!e){Bigmedia.model.FaceInfo.load(g,{success:function success(c,d){f.add(c);if(c.get('photos')){b.setFace(c)}else {b.setFace(a)}},failure:function failure(){b.setFace(a)}})}else {if(e.get('photos')){b.setFace(e)}else {b.setFace(a)}}}c.show()}else {b.setFace(null);c.setTitle('');d.setTitle('');d.setBodyStyle('background','#FFFFFF')}var h=c.up().lookup('detschema');h.setFace(a)},updateMap:function updateMap(a){},items:[{xtype:'panel',layout:'fit',items:{xtype:'facephotoscarousel',reference:'carousel'}}],tools:[{iconCls:'x-fas fa-map-marked-alt',handler:function handler(e,d){var c=this,b=c.up('window'),a=b.up().lookup('detschema');a.setHidden(!a.getHidden())}},{iconCls:'x-fa fa-binoculars',bind:{disabled:'{!record.doorsNo}'},handler:function handler(e,d){var c=this,a=c.up('window'),b=a.up().lookup('doorsphoto');if(!a.getFace()||!a.getFace().get('doorsNo')){return}b.setHidden(!b.getHidden())}}]});Ext.define('Bigmedia.view.map.Map',{extend:GeoExt.component.Map,xtype:'facesmap',controller:'main-map',config:{geoStore:null,grid:null,gridMoitoring:null,cartStore:null,cartGrid:null,selStore:null,selGrid:null,buffer:500,faceAsCircleRes:8,replaceStore:null,replaceGrid:null,replaceBuffer:300,replaceFaceId:null,replaceMode:!1,facePopupVisible:!1,actions:{},filterCart:!1,poiStore:null,beforePoi:!1,detFace:null,maximumFaces:0,CityPolygonStore:null,KSPolygonsStore:null,KSStreetsStore:null},viewModel:{data:{replaceMode:!1,hiddenShowCoverageBtn:!0}},fid:1,autoId:function(){return this.fid++},listeners:{beforerender:function(){var a=this;a.popup=Ext.create('Bigmedia.view.map.FacePopup',{map:a,renderTo:a.up('panel').getEl()});if(a.popup){a.popupOverlay=new ol.Overlay({element:a.popup.getEl().dom,autoPan:!0,autoPanAnimation:{duration:250}});a.popupOverlay.on('change:position',function(b){if(!a.popupOverlay.getPosition()){a.fireEvent('overlayclosed')}if(a.popupOverlay.getPosition()&&a.getReplaceStore()&&a.getViewModel().get('replaceMode')&&a.getReplaceStore().findExact('id',a.popup.getRecord().getId())<0){a.setReplaceFaceId(a.popup.getRecord().getId())}a.getViewModel().set('facePopupVisible',!!a.popupOverlay.getPosition())});a.map.addOverlay(a.popupOverlay)}a.hint=Ext.create('Bigmedia.view.map.MapHint',{map:a,renderTo:a.up('panel').getEl()});a.faceHint=Ext.create('Bigmedia.view.map.MapHint',{map:a,renderTo:a.up('panel').getEl()});if(a.hint){a.hintOverlay=new ol.Overlay({element:a.hint.getEl().dom,autoPan:!1,autoPanAnimation:{duration:250}});a.hintOverlay.on('change:position',function(b){if(!a.hintOverlay.getPosition()){a.fireEvent('overlayclosed')}});a.map.addOverlay(a.hintOverlay)}if(a.faceHint){a.faceHintOverlay=new ol.Overlay({element:a.faceHint.getEl().dom,autoPan:!1,autoPanAnimation:{duration:250}});a.faceHintOverlay.on('change:position',function(b){if(!a.faceHintOverlay.getPosition()){a.fireEvent('faceoverlayclosed')}});a.map.addOverlay(a.faceHintOverlay)}a.btnCoverage=Ext.create('Ext.button.Button',{text:Bigmedia.Locales.mapBtnCoverageText,renderTo:a.up('panel').getEl(),ui:'map-soft-red',enableToggle:!0,disabled:!1,hidden:!(a.getCartStore()&&a.getCartStore().getCount()>0),style:'left: 5px; bottom: 5px; position: absolute',toggleHandler:function(c,b){a.cartCoveragesLayer.setVisible(b);if(b&&!a.cartCoveragesLoaded){a.syncCoverages()}},listeners:{afterrender:function(a){}}});var c=new ol.control.Control({element:a.btnCoverage.getEl().dom});c.setMap(a.map);a.btnReplace=Ext.create('Ext.button.Button',{text:Bigmedia.Locales.mapBtnReplacementText,renderTo:Ext.getBody(),ui:'map-soft-red',enableToggle:!0,hidden:!0,ariaLabelledBy:'Replace',style:'right: 5px; top: 5px; position: absolute',toggleHandler:function(d,c){if(c&&(a.getDetFace()||a.popupOverlay.getPosition())){var b=a.getDetFace()&&a.getDetFace().getRecord()?a.getDetFace().getRecord().getId():a.popup&&a.popup.getRecord()?a.popup.getRecord().getId():null;if(!b){return !1}a.setReplaceFaceId(b)}a.getViewModel().set('replaceMode',c)},listeners:{afterrender:function(a){}}});var b=new ol.control.Control({element:a.btnReplace.getEl().dom});b.setMap(a.map)},render:function(){var a=this;a.initLayers()}},updateDetFace:function(b){var a=this;if(b){b.addListener('show',function(){a.getViewModel().set('facePopupVisible',!0)},a);b.addListener('hide',function(){a.getViewModel().set('facePopupVisible',!1)},a)}},constructor:function(f){var a=this;a.mixins.observable.constructor.call(a,f);var i=[30.524474,50.460969];var d='HUkTvNkEjgvRtcMbm1TvYPD4fC-nHjbhzX-fBfOKiLc';var e=[{base:'base',type:'maptile',scheme:'normal.day',apiKey:d},{base:'aerial',type:'maptile',scheme:'satellite.day',apiKey:d},{base:'aerial',type:'maptile',scheme:'hybrid.day',apiKey:d}];var j='https://{1-4}.{base}.maps.ls.hereapi.com'+'/{type}/2.1/maptile/newest/{scheme}/{z}/{x}/{y}/256/png'+'?apiKey={apiKey}&lg=ukr';a.tileLayers=[];var b,g;for(b=0,g=e.length;b<g;b++){var h=e[b];a.tileLayers.push(new ol.layer.Tile({visible:!1,preload:Infinity,source:new ol.source.XYZ({url:createUrl(j,h),attributions:'Map Tiles &copy; '+(new Date()).getFullYear()+' '+'<a href="http://developer.here.com">HERE</a>'})}))}function createUrl(b,a){return b.replace('{base}',a.base).replace('{type}',a.type).replace('{scheme}',a.scheme).replace('{apiKey}',a.apiKey)}a.tileLayers[0].setVisible(!0);a.tileLayer=a.tileLayers[0];a.map=new ol.Map({layers:a.tileLayers,view:new ol.View({constrainResolution:!0,center:ol.proj.fromLonLat(i),zoom:17,minZoom:5,maxZoom:18})});a.initMap();a.callParent(f);var c=Ext.getStore('CityBoundaries');if(c){if(c.getCount()>0){a.loadCityBoundaries()}else {c.on('load',a.loadCityBoundaries,a)}}a.getViewModel().bind('{replaceMode}',function(b){if(a.btnReplace){a.btnReplace.setPressed(b)}a.fireEventArgs('replacemodechanged',[b])});a.getViewModel().bind('{facePopupVisible}',function(b){if(a.btnReplace){a.btnReplace.setVisible((a.getDetFace()&&a.getDetFace().isVisible()||!!a.popupOverlay.getPosition())&&!!a.getReplaceStore())}})},flashFace:function(e){var a=this,b=3000,d=(new Date()).getTime(),c=a.tileLayer.on('postrender',animate);function animate(j){var f=ol.render.getVectorContext(j);var k=j.frameState;var l=e.get('geometry').clone();var h=k.time-d;var g=h/b;var m=ol.easing.easeOut(g)*25+5;var i=ol.easing.easeOut(1-g);var n=new ol.style.Style({image:new ol.style.Circle({radius:m,stroke:new ol.style.Stroke({color:'rgba(255, 0, 0, '+i+')',width:0.25+i})})});f.setStyle(n);f.drawGeometry(l);if(h>b){ol.Observable.unByKey(c);return}a.map.render()}a.map.render()},showStreet:function(b){var a=this;if(a.map.getView().getZoom()<13){a.map.getView().setZoom(15);a.map.getView().setCenter(ol.proj.fromLonLat(b))}else {a.map.getView().setCenter(ol.proj.fromLonLat(b))}},showOSMFeature:function(b){var a=this;if(a.map.getView().getZoom()<13){a.map.getView().setZoom(15);a.maskLayer.getSource().addFeature(b)}else {a.maskLayer.getSource().addFeature(b)}},popupFace:function(b){var a=this;if(a.getDetFace()){a.getDetFace().setRecord(b)}var c=a.map.getView().calculateExtent();if(ol.extent.containsCoordinate(c,b.get('geometry').getCoordinates())){}else {if(a.map.getView().getZoom()<13){a.map.getView().setCenter(b.get('geometry').getCoordinates())}else {a.map.getView().setCenter(b.get('geometry').getCoordinates())}}a.flashFace(b)},hintPoi:function(a){var b=this;if(b.map.getView().getZoom()<13){b.map.getView().once('change:center',function(){b.hint.setHtml('<b>'+a.get('name')+'</b><br>'+(a.get('city')?a.get('city')+', ':'')+'<span data-qtip="'+a.get('address')+'">'+(a.get('address')?' '+a.get('address'):'')+(a.get('housenumber')?' '+a.get('housenumber'):'')+'</span>');b.hintOverlay.setPosition(a.get('centroid').getCoordinates())});b.map.getView().setCenter(a.get('centroid').getCoordinates())}else {b.map.getView().once('change:center',function(){b.hint.setHtml('<b>'+a.get('name')+'</b><br>'+(a.get('city')?a.get('city')+', ':'')+'<span data-qtip="'+a.get('address')+'">'+(a.get('address')?' '+a.get('address'):'')+(a.get('housenumber')?' '+a.get('housenumber'):'')+'</span>');b.hintOverlay.setPosition(a.get('centroid').getCoordinates())});b.map.getView().setCenter(a.get('centroid').getCoordinates())}},hintFace:function(b){var a=this;if(a.map.getView().getZoom()<13){a.map.getView().once('change:center',function(){a.hint.setRecord(poi);a.hintOverlay.setPosition(poi.get('geometry').getCoordinates())});a.map.getView().setCenter(poi.get('geometry').getCoordinates())}else {a.map.getView().once('change:center',function(){a.hint.setRecord(poi);a.hintOverlay.setPosition(poi.get('geometry').getCoordinates())});a.map.getView().setCenter(poi.get('geometry').getCoordinates())}},updateReplaceMode:function(a){this.getViewModel().set('replaceMode',a)},updateBuffer:function(a,b){if(a>=0){this.recalcBuffer()}},removeLinkToPoiFilter:function(){var b=this,a=b.getGeoStore()||b.getCartStore();if(!a){return}a.removeFilter('filterLinkToPoi')},addLinkToPoiFilter:function(){},updateMaximumFaces:function(b,c){var a=this;a.removeLinkToPoiFilter();if(b||c){if(a.filterFaces&&a.filterFaces.getActive()){a.filterFaces.refresh()}a.addLinkToPoiFilter()}},formatsRulesChanged:function(){var a=this;if(a.filterFaces&&a.filterFaces.getActive()){a.filterFaces.refresh()}a.addLinkToPoiFilter()},updateBeforePoi:function(b,c){var a=this;if(a.filterFaces&&a.filterFaces.getActive()){a.filterFaces.refresh()}},loadCityBoundaries:function(){var c=this,b=Ext.getStore('CityBoundaries'),a=[],d=[];b.each(function(b){var c=new ol.Feature(b.data);a.push(c)});c.citiesLayer.getSource().addFeatures(a)},updateReplaceFaceId:function(b){var a=this;a.replaceBufferLayer.getSource().clear(!0);if(b){a.replaceFace.create(b,a.getReplaceBuffer())}else {a.replaceFace.setActive(!1)}a.fireEventArgs('replacefaceidchanged',[b])},updateReplaceBuffer:function(a,b){if(a>=0){this.recalcReplaceBuffer(a)}},recalcReplaceBuffer:function(b){var a=this,c=a.replaceBufferLayer.getSource(),e=a.getReplaceBuffer(),d=[];c.clear(!0);if(b){a.replaceFace.create(a.getReplaceFaceId(),b)}},recalcBuffer:function(d){var a=this,b=a.bufferLayer.getSource(),e=a.getBuffer(),c=[];if(d){if(b.getFeatureById(d.getId())){b.removeFeature(b.getFeatureById(d.getId()))}c=[d]}else {b.clear(!0);c=a.maskLayer.getSource().getFeatures()}if(c.length>0){a.createBuffer(c);if(a.filterFaces&&a.filterFaces.getActive()){a.filterFaces.refresh()}}},createBuffer:function(c){var a=this,e='kilometers',b=a.getBuffer();function pointToLonLat(a){return ol.proj.toLonLat(a)}function lineToLonLat(a){return a.map(function(b){return pointToLonLat(b)})}function multiLineToLonLat(a){return a.map(function(b){return lineToLonLat(b)})}var d=c.map(function(d){var g,i=d.getGeometry().getType();var j=a.map.getView().getProjection().getMetersPerUnit();if(d.getGeometry().getType()==='Point'){var h=turf.circle(pointToLonLat(d.getGeometry().getCoordinates()),b/1000,{steps:32,units:'kilometers'});var f=new ol.Feature({geometry:new ol.geom.Polygon([h.geometry.coordinates[0].map(function(a){return ol.proj.fromLonLat(a)})])});f.setId(d.getId());return f}else {if(d.getGeometry().getType()==='Circle'){var k=a.map.getView().getProjection().getUnits();if(j!=0){var f=new ol.Feature({geometry:ol.geom.Polygon.fromCircle(new ol.geom.Circle(d.getGeometry().getCenter(),d.getGeometry().getRadius()))});f.setId(d.getId());return f}else {g=multiLineToLonLat(ol.geom.Polygon.fromCircle(d.getGeometry()).getCoordinates());i='Polygon'}}else {if(d.getGeometry().getType()==='LineString'){g=lineToLonLat(d.getGeometry().getCoordinates())}else {var f=d.clone();f.setId(d.getId());return f}}}var h=turf.buffer({type:'Feature',geometry:{type:i,coordinates:g}},b/1000,{units:e});var f=new ol.Feature({geometry:new ol.geom.Polygon([h.geometry.coordinates[0].map(function(a){return ol.proj.fromLonLat(a)})])});f.setId(d.getId());return f});a.bufferLayer.getSource().addFeatures(d)},updateKSPolygonsStore:function(b,c){var a=this;if(c){c.removeListener('endupdate',a.onKSPolygonsStoreChanged,a)}if(b){b.on('endupdate',a.onKSPolygonsStoreChanged,a)}},updateCityPolygonStore:function(b,c){var a=this;if(c){c.removeListener('endupdate',a.onCityPolygonStoreChanged,a)}if(b){b.on('endupdate',a.onCityPolygonStoreChanged,a)}},updateKSStreetsStore:function(b,c){console.log('updateKSStreetsStore');var a=this;if(c){c.removeListener('endupdate',a.onKSStreetsStoreChanged,a)}if(b){b.on('endupdate',a.onKSStreetsStoreChanged,a)}},updateGeoStore:function(c,b){var a=this;if(b){b.removeListener('endupdate',a.onGeoStoreDataChanged,a);b.removeListener('filterchange',a.onGeoStoreDataChanged,a);b.removeListener('updatemap',a.onGeoStoreDataChanged,a)}if(c){c.on('updatemap',a.onGeoStoreDataChanged,a);if(a.facesLayer.getSource().getFeatures().length!=c.getDataSource().getCount()){a.reloadFaces()}}},updatePoiStore:function(b,c){var a=this;if(c){c.removeListener('endupdate',a.onPoiStoreDataChanged,a)}if(b){b.on('endupdate',a.onPoiStoreDataChanged,a);if(a.poiLayer.getSource().getFeatures().length===0){a.reloadPoi()}}},updateReplaceStore:function(b,c){var a=this;if(c){c.removeListener('datachanged',a.onReplaceStoreDataChanged,a)}if(b){b.on('datachanged',a.onReplaceStoreDataChanged,a);a.reloadReplaceFaces()}},updateGrid:function(b,c){var a=this;if(c){c.removeListener('selectionchange',a.onGridSelectionChanged,a);b.removeListener('reconfigure',a.onGridReconfigure,a);b.getSelectionModel().removeListener('focuschange',a.onGridFocusChange,a);a.setGeoStore(null)}if(b){b.on('selectionchange',a.onGridSelectionChanged,a);b.on('reconfigure',a.onGridReconfigure,a);b.getSelectionModel().on('focuschange',a.onGridFocusChange,a);a.setGeoStore(b.getStore())}},onGridReconfigure:function(c,b){var a=this;a.setGeoStore(b);a.reloadFaces()},onGridSelectionChanged:function(a){var c=this,b=a.getStore()},onGridFocusChange:function(f,e,c){var a=this;if(a.focusLayer){a.focusLayer.getSource().clear()}if(c){var d=c.get('geometry');if(d){if(a.popup){a.popupFace(c)}else {a.map.getView().setCenter(d.getCoordinates())}}var b;if(a.cartLayer){b=a.cartLayer.getSource().getFeatureById(c.getId());if(b){a.focusLayer.getSource().addFeature(b.clone())}}if(!b&&a.facesLayer){b=a.facesLayer.getSource().getFeatureById(c.getId());if(b){a.focusLayer.getSource().addFeature(b.clone())}}if(!b&&a.selLayer){b=a.selLayer.getSource().getFeatureById(c.getId());if(b){a.focusLayer.getSource().addFeature(b.clone())}}}else {}},onGridRowClick:function(f,b,g,d,h,e){var a=this,c=b.get('geometry');if(c){if(a.popup){a.popupFace(b)}else {a.map.getView().setCenter(c.getCoordinates())}}},reloadFaces:function(){var a=this,e=[],f=a.getGeoStore(),d=a.facesLayer,c=d.getSource();if(!d){return}c.forEachFeature(function(b){if(!f.getData().getByKey(b.getId())){if(a.popupOverlay&&a.popup&&a.popup.getRecord()&&a.popup.getRecord().getId()===b.getId()){a.popupOverlay.setPosition(undefined);a.coveragesLayer.getSource().clear();if(a.getDetFace()){a.getDetFace().hide()}}c.removeFeature(b)}});var b=ol.extent.createEmpty();f.getData().each(function(d){if(d.data.geometry&&!c.getFeatureById(d.getId())){var f=new ol.Feature(d.data);f.setId(d.getId());f.set('origObj',d);e.push(f);if(!a.extended){ol.extent.extend(b,f.getGeometry().getExtent())}}return !0});d.getSource().addFeatures(e);if(b&&!ol.extent.isEmpty(b)&&!a.extended){a.extended=!0;a.map.getView().fit(b,a.map.getSize(),{minResolution:0.4})}},reloadReplaceFaces:function(){var c=this,b=[],d=c.getReplaceStore(),a=c.replaceLayer;if(!a){return}d.getData().each(function(a){if(a.data.geometry){var c=new ol.Feature(a.data);c.setId(a.getId());c.set('origObj',a);b.push(c)}return !0});a.getSource().clear(!0);a.getSource().addFeatures(b)},blueStyle:new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:'#0099CC'}),stroke:new ol.style.Stroke({color:'#fff',width:2})})}),defaultPoiColor:'0099CC',createPoiStyleIcon:function(a,h){var b=this,e=14,f=Ext.getStore('PoiCategoriesTree'),d=a?f.getNodeById(a):null,c=h||b.defaultPoiColor;blueStyle=b.blueStyle;if(!d){return blueStyle}var g='resources/images/symbols/'+d.get('iconPath');return Ext.Ajax.request({url:g,method:'GET'}).then(function(g,j){try{var f=document.createElement('canvas');var i=f.getContext('2d');var d=canvg.Canvg.fromString(i,g.responseText);d.documentElement.children.forEach(function(b){if(b.type==='path'){b.styles['fill']=new canvg.Property(d.document,'fill','#'+c)}});d.render();style=new ol.style.Style({image:new ol.style.Icon({img:f,imgSize:[e,e]})});if(!b.poiStyleCache[a]){b.poiStyleCache[a]={}}b.poiStyleCache[a][c]=style;return style}catch(k){console.error(k);b.poiStyleCache[a]={};b.poiStyleCache[a][c]=blueStyle;return blueStyle}},function(d,e){console.error('server-side failure with status code '+d.status);b.poiStyleCache[a]={};b.poiStyleCache[a][c]=blueStyle;return blueStyle})},reloadPoi:function(){var b=this,c=[],e=b.getPoiStore(),d=b.poiLayer;if(!d){return}var a={};d.getSource().clear();e.getData().each(function(d){var f=new ol.Feature(d.data),e=d.data.color||b.defaultPoiColor;f.setId(d.getId());f.set('origObj',d);c.push(f);if(d.data.categoryId&&(!b.poiStyleCache[d.data.categoryId]||!b.poiStyleCache[d.data.categoryId][e])&&(!a[d.data.categoryId]||!a[d.data.categoryId][e])){if(!a[d.data.categoryId]){a[d.data.categoryId]={}}a[d.data.categoryId][e]=d.data.categoryId}return !0});if(Object.keys(a).length>0){Promise.all(Object.keys(a).reduce(function(d,c){for(var e in a[c]){d.push(b.createPoiStyleIcon(c,e))}return d},[])).then(function(){d.getSource().addFeatures(c);b.recalcBuffer()})}else {if(c.length){d.getSource().addFeatures(c)}b.recalcBuffer()}},onPoiStoreDataChanged:function(a){this.reloadPoi()},onCityPolygonStoreChanged:function(b){var a=this;a.reloadCityPolygons()},reloadCityPolygons:function(){var a=this,d=[],e=a.getCityPolygonStore(),b=a.CityHeatmapLayer,f=b.getSource();if(!b){return}e.getData().each(function(a){var b=f.getFeatureById(a.getId());if(!b){b=new ol.Feature(a.data);b.setGeometry(new ol.geom.Point(ol.proj.fromLonLat([a.data.lon,a.data.lat])));b.setId(a.getId());b.set('origObj',a);b.set('transit',a.data.transit);b.set('weight',a.data.weight);d.push(b)}else {b.set('transit',a.data.transit);b.set('weight',a.data.weight)}});b.getSource().addFeatures(d);a.CityPolygonLayer.getSource().clear();var c=[];e.each(b=>{var d=b.getData();var a=new ol.Feature();a.setGeometry(new ol.geom.Polygon([d.geog[0].map(a=>{return ol.proj.fromLonLat(a)})]));a.setId(b.getId());c.push(a)});a.CityPolygonLayer.getSource().addFeatures(c)},onKSPolygonsStoreChanged:function(a){var b=this;this.reloadKSPolygons()},reloadKSPolygons:function(){var a=this,f=[],d=a.getKSPolygonsStore(),c=a.KSHeatmapLayer,b=c.getSource();if(!c){return}b.forEachFeature(function(a){if(!d.getData().getByKey(a.getId())){b.removeFeature(a)}});d.getData().each(function(a){var c=b.getFeatureById(a.getId());if(!c){c=new ol.Feature(a.data);c.setGeometry(new ol.geom.Point(ol.proj.fromLonLat([a.data.lon,a.data.lat])));c.setId(a.getId());c.set('origObj',a);f.push(c)}else {c.set('transit',a.data.transit)}});c.getSource().addFeatures(f);a.KSPolygonLayer.getSource().clear();var e=[];d.each(c=>{var a=c.getData();var b=new ol.Feature();b.setGeometry(new ol.geom.Polygon([[ol.proj.fromLonLat([a.lon1,a.lat1]),ol.proj.fromLonLat([a.lon1,a.lat2]),ol.proj.fromLonLat([a.lon2,a.lat2]),ol.proj.fromLonLat([a.lon2,a.lat1]),ol.proj.fromLonLat([a.lon1,a.lat1])]]));b.setId(c.getId());e.push(b)});a.KSPolygonLayer.getSource().addFeatures(e)},onKSStreetsStoreChanged:function(a){var b=this;this.reloadKSStreets()},reloadKSStreets:function(){var e=this,c=[],d=e.getKSStreetsStore(),b=e.KSStreetLayer,a=b.getSource();if(!b){return}a.forEachFeature(function(b){if(!d.getData().getByKey(b.getId())){a.removeFeature(b)}});d.getData().each(function(d){var b=a.getFeatureById(d.getId());if(!b){b=new ol.Feature();b.setId(d.getId());b.set('direction',d.get('direction'));var e=Bigmedia.Vars.convertTurfToOl(d.get('geometry'));b.setGeometry(e);c.push(b)}});b.getSource().addFeatures(c)},onGeoStoreDataChanged:function(b){var a=this;if(!a.getGeoStore().isLoading()&&!a.getGeoStore().bgLoading){this.reloadFaces()}},onGeoStoreRemove:function(a){this.reloadFaces()},refreshReplaced:function(){this.updateReplaceBuffer(this.getReplaceBuffer())},onReplaceStoreDataChanged:function(a){var b=this;if(!a.holdReload){var c=!!a.getFilters().get('filterReplaceMapMask');if(c){b.refreshReplaced()}else {b.reloadReplaceFaces()}}},updateCartStore:function(b,c){var a=this;if(c){c.removeListener('datachanged',a.onCartStoreDataChanged,a)}if(b){b.on('datachanged',a.onCartStoreDataChanged,a);if(a.cartLayer.getSource().getFeatures().length===0){a.reloadCartFaces()}}a.extended=!1;if(a.btnCoverage&&a.btnCoverage.getEl().dom){a.btnCoverage.setVisible(b&&b.getCount()>0)}},updateCartGrid:function(b,c){var a=this;if(c){c.removeListener('selectionchange',a.onGridSelectionChanged,a);b.removeListener('reconfigure',a.onCartGridReconfigure,a);b.getSelectionModel().removeListener('focuschange',a.onGridFocusChange,a);a.setCartStore(null)}if(b){b.on('selectionchange',a.onGridSelectionChanged,a);b.on('reconfigure',a.onCartGridReconfigure,a);b.getSelectionModel().on('focuschange',a.onGridFocusChange,a);if(!a.getCartStore()){a.setCartStore(b.getStore())}}if(a.btnCoverage){a.btnCoverage.setVisible(b&&b.getStore().getCount()>0)}},onCartGridReconfigure:function(c,b){var a=this;a.extended=!1;a.setCartStore(b);a.reloadCartFaces()},updateSelStore:function(b,c){var a=this;if(c){c.removeListener('datachanged',a.onSelStoreDataChanged,a)}if(b){b.on('datachanged',a.onSelStoreDataChanged,a);if(a.selLayer.getSource().getFeatures().length===0){a.reloadSelFaces()}}},updateSelGrid:function(b,c){var a=this;if(c){c.removeListener('selectionchange',a.onGridSelectionChanged,a);b.removeListener('reconfigure',a.onSelGridReconfigure,a);b.getSelectionModel().removeListener('focuschange',a.onGridFocusChange,a);a.setCartStore(null)}if(b){b.on('selectionchange',a.onGridSelectionChanged,a);b.on('reconfigure',a.onSelGridReconfigure,a);b.getSelectionModel().on('focuschange',a.onGridFocusChange,a);if(!a.getSelStore()){a.setSelStore(b.getStore())}}},onSelGridReconfigure:function(c,b){var a=this;a.setSelStore(b);a.reloadSelFaces()},syncCoverages:function(){var b=this,g=[],f=b.getCartStore(),c=Ext.getStore('CityBoundaries'),e=b.cartLayer,a={};if(!e){return}b.cartCoveragesLayer.getSource().clear(!0);f.each(function(d){var b=d.get('face')?d.get('face'):d;if(c.getById(b.get('id_city'))){if(!a[b.get('id_city')]){a[b.get('id_city')]={coverages:[],grps:0}}a[b.get('id_city')].grps+=b.get('grp')?b.get('grp'):0.01;Bigmedia.Vars.coverageDays.forEach(function(f,c){if(!b.get('coverages')){var e=Bigmedia.Vars.calculateFaceCoverages(b)}if(b.get('coverages')&&b.get('coverages')[c]){if(!a[b.get('id_city')].coverages[c]){a[b.get('id_city')].coverages.push(b.get('coverages')[c])}else {try{a[b.get('id_city')].coverages[c]=a[b.get('id_city')].coverages[c].union(b.get('coverages')[c])}catch(h){console.error('error union coverages map001')}}}else {}})}});var d=[];Object.keys(a).forEach(function(e){var g=c.getById(e);if(g){if(a[e].coverages[4]){try{var i=jsts.operation.union.UnaryUnionOp.union(a[e].coverages[4]);var h=jsts.operation.overlay.OverlayOp.intersection(g.get('jsts'),i);var f=Bigmedia.Vars.convertJstsToOl(h,b.getView().getProjection());if(f){d.push(f)}}catch(j){console.error('error calculate covFeatures')}}}});b.cartCoveragesLayer.getSource().addFeatures(d);b.cartCoveragesLoaded=!0},reloadCartFaces:function(){var a=this,e=[],c=a.getCartStore(),d=a.cartLayer;if(!d||!c){return}if(a.popupOverlay){a.popupOverlay.setPosition(undefined);a.coveragesLayer.getSource().clear();if(a.getDetFace()){a.getDetFace().hide()}}var b=ol.extent.createEmpty();c.getData().each(function(c){if(c.data.geometry){var d=new ol.Feature(c.data);d.setId(c.getId());d.set('origObj',c);e.push(d);if(!a.extended){ol.extent.extend(b,d.getGeometry().getExtent())}}return !0});d.getSource().clear(!0);d.getSource().addFeatures(e);if(a.btnCoverage&&a.btnCoverage.getEl().dom){a.btnCoverage.setHidden(!c||c.getCount()===0)}if(a.cartCoveragesLayer.getVisible()){a.syncCoverages()}else {a.cartCoveragesLoaded=!1}if(b&&!ol.extent.isEmpty(b)&&!a.extended){a.extended=!0;a.map.getView().fit(b,a.map.getSize(),{minResolution:0.4})}},onCartStoreDataChanged:function(a){this.reloadCartFaces()},reloadSelFaces:function(){var a=this,c=[],d=a.getSelStore(),b=a.selLayer;if(!b||!d){return}if(a.popupOverlay){a.popupOverlay.setPosition(undefined);if(a.getDetFace()){a.getDetFace().hide()}}d.getData().each(function(a){if(a.data.geometry){var b=new ol.Feature(a.data);b.setId(a.getId());b.set('origObj',a);c.push(b)}return !0});b.getSource().clear(!0);b.getSource().addFeatures(c)},onSelStoreDataChanged:function(a){this.reloadSelFaces()},initMap:function(){var a=this;a.poiStyleCache={};var H=new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:'rgba(100, 100, 100, 0.8)'}),stroke:new ol.style.Stroke({color:'rgba(50, 50, 50, 0.6)',width:2})})});var X=new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:'#0099CC'}),stroke:new ol.style.Stroke({color:'#fff',width:2})})});var Z=new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:'#8B0000'}),stroke:new ol.style.Stroke({color:'#fff',width:2})})});var G=new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:'#2c9f2c'}),stroke:new ol.style.Stroke({color:'#fff',width:2})})});var A=new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:'#f5db24'}),stroke:new ol.style.Stroke({color:'#2c9f2c',width:2})})});var w=new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:'#f5db24'}),stroke:new ol.style.Stroke({color:'#8B0000',width:2})})});var F=new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:'#8B0000'}),stroke:new ol.style.Stroke({color:'#fff',width:2})})});var K=new ol.style.Fill({color:'#fff'});var E=new ol.style.Stroke({color:'rgba(0, 0, 0, 0.6)',width:3});a.invisibleFill=new ol.style.Fill({color:'rgba(255, 255, 255, 0.01)'});var Q=new ol.style.Style({image:new ol.style.Circle({radius:4,fill:new ol.style.Fill({color:'#8B0000'}),stroke:new ol.style.Stroke({color:'#000',width:1})})});var f={},l={};function createVectorStyle(e,h){var g=e.get('angle')|0;if(e.get('hidden')){return null}if(h>a.getFaceAsCircleRes()){return H}var d=11;var c=l[g];if(!c){var b=document.createElement('canvas');var f=ol.render.toContext(b.getContext('2d'),{size:[d,d]});f.setFillStrokeStyle(new ol.style.Fill({color:'rgba(100, 100, 100, 0.8)'}),new ol.style.Stroke({color:'rgba(50, 50, 50, 0.6)',width:1}));f.drawPolygon(new ol.geom.Polygon([[[0,0],[0,2],[4,2],[1,4],[4,3],[4,8],[6,8],[6,3],[10,4],[6,2],[11,2],[11,0],[0,0]]]));c=new ol.style.Style({image:new ol.style.Icon({img:b,imgSize:[b.width,b.height],rotation:-1*(g+180)*Math.PI/180,anchor:[5,0],anchorXUnits:'pixels',anchorYUnits:'pixels',rotateWithView:!0})});l[d]=c}return c}var v=function(e,n){if(e.get('hidden')){return null}if(n>a.getFaceAsCircleRes()){return G}var c=e.get('angle')||0,b=e.get('icon'),h=e.get('pos')||0;var g=f[b]&&f[b][c]?f[b][c][h]:null;if(!g){var i=12,j=6,d=9,k=12,m=18,l=18;switch(b){case 'b':i=168;j=3;d=12;k=17;m=24;l=24;break;case 'l':i=325;j=2;d=15;k=18;m=30;l=30;break;}if(h){d-=d*h/2}g=new ol.style.Style({image:new ol.style.Icon({rotation:-1*c*Math.PI/180,offset:[i,j],size:[m,l],src:'resources/sides_ico.png',anchor:[d,k],anchorXUnits:'pixels',anchorYUnits:'pixels',rotateWithView:!0})});if(!f[b]){f[b]={}}if(!f[b][c]){f[b][c]={}}f[b][c][h]=g}return g};var c={};var s=function(f,n){if(f.get('hidden')){return null}if(n>a.getFaceAsCircleRes()){if(a.cartLayer.getSource().getFeatureById(f.getId())){return w}return A}var d=f.get('angle')||0,b=f.get('icon'),h=f.get('pos')||0;var g=c[b]&&c[b][d]?c[b][d][h]:null;if(!g){var i=52,j=6,e=9,k=12,m=18,l=18;switch(b){case 'b':i=208;j=3;e=12;k=17;m=24;l=24;break;case 'l':i=365;j=2;e=15;k=18;m=30;l=30;break;}if(h){e-=e*h/2}g=new ol.style.Style({image:new ol.style.Icon({rotation:-1*d*Math.PI/180,offset:[i,j],size:[m,l],src:'resources/sides_ico.png',anchor:[e,k],anchorXUnits:'pixels',anchorYUnits:'pixels',rotateWithView:!0})});if(!c[b]){c[b]={}}if(!c[b][d]){c[b][d]={}}c[b][d][h]=g}return g};var e={};var t=function(f,n){if(f.get('hidden')){return null}if(n>a.getFaceAsCircleRes()){return F}var c=f.get('angle')||0,b=f.get('icon'),h=f.get('pos')||0;var g=e[b]&&e[b][c]?e[b][c][h]:null;if(!g){var i=12,j=6,d=9,k=12,m=18,l=18;switch(b){case 'b':i=168;j=3;d=12;k=17;m=24;l=24;break;case 'l':i=325;j=2;d=15;k=18;m=30;l=30;break;}if(h){d-=d*h/2}g=new ol.style.Style({image:new ol.style.Icon({rotation:-1*c*Math.PI/180,offset:[i,j],size:[m,l],src:'resources/sides_ico.png',anchor:[d,k],anchorXUnits:'pixels',anchorYUnits:'pixels',rotateWithView:!0})});if(!e[b]){e[b]={}}if(!e[b][c]){e[b][c]={}}e[b][c][h]=g}return g};source=new ol.source.Vector({});a.webglPointsStyle={'variables':{},symbol:{symbolType:'image',src:'resources/sides_ico_v6.png','size':['interpolate',['exponential',2.5],['zoom'],2,26,14,38],rotation:['/',['*',3.14159265,['-',360,['get','angle']]],180],color:'#0288d1',rotateWithView:!0,offset:[0,0],textureCoord:['case',['>=',['zoom'],15],[0,0.5,0.5,1],[0.5,0.5,1,1]]}};a.webglSelPointsStyle={'variables':{},symbol:{symbolType:'image',src:'resources/sides_ico_v6.png','size':['interpolate',['exponential',2.5],['zoom'],2,30,14,42],rotation:['/',['*',3.14159265,['-',360,['get','angle']]],180],color:'#CA17D1',rotateWithView:!0,offset:[0,0],textureCoord:['case',['>=',['zoom'],15],[0,0,0.5,0.5],[0.5,0,1,0.5]]}};a.webglFocusPointsStyle={'variables':{},'symbol':{symbolType:'image',src:'resources/sides_ico_v6.png','size':['interpolate',['exponential',2.5],['zoom'],2,30,14,42],rotation:['/',['*',3.14159265,['-',360,['get','angle']]],180],color:'#193E52',rotateWithView:!0,offset:[0,0],textureCoord:['case',['>=',['zoom'],15],[0,0,0.5,0.5],[0.5,0,1,0.5]]}};var h=new ol.layer.WebGLPoints({source:source,style:a.webglPointsStyle,disableHitDetection:!1,name:'faces'});a.facesLayer=h;var J=new ol.layer.WebGLPoints({source:new ol.source.Vector(),style:a.webglSelPointsStyle,disableHitDetection:!1,name:'selfaces'});a.selLayer=J;var C=new ol.layer.WebGLPoints({source:new ol.source.Vector(),style:a.webglFocusPointsStyle,disableHitDetection:!1,name:'selfaces'});a.focusLayer=C;var B=new ol.source.Vector({});var i=new ol.layer.Vector({source:B,style:t,name:'cartFaces'});a.cartLayer=i;var z=new ol.source.Vector({});var n=new ol.layer.Vector({source:z,style:createVectorStyle,name:'replaces',visible:!1});a.replaceLayer=n;var T=new ol.style.Fill({color:'rgba(255, 255, 255, 0.01)'});var j;var O=function(i){j=0;var g=clusterSource.getFeatures();var b,a;for(var d=g.length-1;d>=0;--d){b=g[d];var f=b.get('features');var c=ol.extent.createEmpty();for(var e=0,h=f.length;e<h;++e){ol.extent.extend(c,f[e].getGeometry().getExtent())}j=Math.max(j,h);a=1*Math.min(ol.extent.getWidth(c),ol.extent.getHeight(c))/i;a=a<12?12:a;b.set('radius',a)}};var P;var V=function(a,e){var b;var c=a.get('features').length;if(c>1){b=[new ol.style.Style({image:new ol.style.Circle({radius:a.get('radius'),fill:new ol.style.Fill({color:[80,185,72,0.5]})}),text:new ol.style.Text({text:c.toString(),fill:K,stroke:E})})]}else {var d=a.get('features')[0];b=[v(d,e)]}return b};var b=a.getMap();var Y=b.getLayers().item(0);a.citiesLayer=new ol.layer.Vector({source:new ol.source.Vector(),style:new ol.style.Style({fill:new ol.style.Fill({color:'rgba(0, 0, 255, 0.1)'}),stroke:new ol.style.Stroke({color:'#ffcc33',width:3})}),minResolution:30});var W=ol.has.DEVICE_PIXEL_RATIO;var L=document.createElement('canvas');var $=L.getContext('2d');var R=Ext.getStore('CityBoundaries');var r=new ol.style.Fill();var M=new ol.style.Style({fill:r,stroke:new ol.style.Stroke({color:'#ddd',width:1})});var S=function(b,a){r.setColor(gradient(b,a));return M};a.cartCoveragesLayer=new ol.layer.Vector({source:new ol.source.Vector(),visible:!1,minResolution:3,style:new ol.style.Style({fill:new ol.style.Fill({color:'rgba(255, 0, 0, 0.3)'}),stroke:new ol.style.Stroke({color:'#ddd',width:1})})});a.coveragesLayer=new ol.layer.Vector({source:new ol.source.Vector(),minResolution:3,maxResolution:50,style:new ol.style.Style({fill:new ol.style.Fill({color:'rgba(255, 255, 255, 0.3)'}),stroke:new ol.style.Stroke({color:'#ddd',width:1})})});a.bufferLayer=new ol.layer.Vector({source:new ol.source.Vector(),style:new ol.style.Style({fill:new ol.style.Fill({color:'rgba(0, 255, 0, 0.1)'}),stroke:new ol.style.Stroke({color:'#ffcc33',width:1}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:'#ffcc33'})})})});a.replaceBufferLayer=new ol.layer.Vector({source:new ol.source.Vector(),style:new ol.style.Style({fill:new ol.style.Fill({color:'rgba(0, 0, 255, 0.1)'}),stroke:new ol.style.Stroke({color:'#888888',width:1}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:'#ffcc33'})})})});var o=new ol.layer.Vector({source:new ol.source.Vector()});a.radiusLayer=o;var k=new ol.Collection();var d=new ol.interaction.Select({layers:[h,i,n],style:s,addCondition:function(a){return ol.events.condition.singleClick(a)},removeCondition:function(a){return ol.events.condition.singleClick(a)},features:k});b.addInteraction(d);a.map.on('singleclick',function(b){a.popupOverlay.setPosition(undefined);a.coveragesLayer.getSource().clear()});var I=function(f){if(f.selected.length==0&&f.deselected.length==0){a.popupOverlay.setPosition(undefined);return}var p=a.getGrid();var j=a.getGeoStore(),i=a.getCartStore(),h=a.getReplaceStore();if(f.selected.length>0){var e=f.selected[0];if(e.get('features')){var m=e.get('features');var n=ol.extent.createEmpty();for(var l=0,o=m.length;l<o;++l){ol.extent.extend(n,m[l].getGeometry().getExtent())}b.getView().fit(n,b.getSize(),{minResolution:0.4});d.getFeatures().remove(e);return}var c;if(i){c=i.getById(e.getId());if(c&&a.getCartGrid()){a.getCartGrid().getView().focusRow(c)}}if(!c&&j){c=j.getById(e.getId());if(c&&a.getGrid()){a.getGrid().getView().focusRow(c)}}if(!c&&h){c=h.getById(e.getId());if(c&&a.getReplaceGrid()){a.getReplaceGrid().getView().focusRow(c)}}if(c){if(a.getDetFace()){a.getDetFace().setRecord(c)}else {if(a.getDetFace()!=!1){a.popup.setRecord(c);a.popupOverlay.setPosition(e.getGeometry().getCoordinates())}}}k.remove(e)}if(f.deselected.length>0){var g=f.deselected[0];var c;if(i){c=i.getById(g.getId())}if(!c&&j){c=j.getById(g.getId())}if(!c&&h){c=h.getById(g.getId())}if(c){if(a.getDetFace()){a.getDetFace().setRecord(c)}else {if(a.getDetFace()!=!1){a.popup.setRecord(c);a.popupOverlay.setPosition(g.getGeometry().getCoordinates())}}}k.push(g)}};var U=function(b){if(b.selected.length==0&&b.deselected.length==0){return}var c=a.getGrid();var f=a.getGeoStore();if(b.selected.length>0){var e=b.selected[0];if(e.get('features')){return}var d=b.selected.map(function(a){return c.getStore().getById(a.getId())});selectDoubleClick.getFeatures().remove(e);if(d.length>0){if(c.select){}else {c.getView().focusRow(d[0]);c.fireEventArgs('celldblclick',[null,null,null,d[0]])}}}};function syncSelMap2Grid(){var c=a.getGrid();var b=d.getFeatures();b.forEach(function(a){c.getSelection().select(a.get('num'))})}a.selectAll=function(){d.getFeatures().extend(h.getSource().getFeatures())};a.deselectAll=function(){d.getFeatures().clear()};a.selectFace=function(b){var a=h.getSource().getFeatureById(b.getId());if(!a){a=i.getSource().getFeatureById(b.getId())}if(a){d.getFeatures().push(a)}};a.deselectFace=function(b){var a=h.getSource().getFeatureById(b.getId());if(!a){a=i.getSource().getFeatureById(b.getId())}if(a){d.getFeatures().remove(a)}};a.showFaceCoverage=function(b){a.coveragesLayer.getSource().clear(!0);var c=Bigmedia.Vars.getCoverages([parseFloat(b.get('lon')),parseFloat(b.get('lat'))],b.get('id_city'),b.get('grp'),b.get('angle'));if(c){var d=Bigmedia.Vars.convertJstsToOl(c[0],a.map.getView().getProjection());d.setProperties({id_city:b.get('id_city'),origin:b.get('geometry'),grp:b.get('grp')});a.coveragesLayer.getSource().addFeatures([d])}delete a.highlightFaceCoverageTimer};a.showPoiHint=function(b,c){a.hint.setHtml('<b>'+b.get('origObj').get('name')+'</b><br>'+(b.get('origObj').get('city')?b.get('origObj').get('city')+', ':'')+'<span data-qtip="'+b.get('origObj').get('address')+'">'+(b.get('origObj').get('address')?' '+b.get('origObj').get('address'):'')+(b.get('origObj').get('housenumber')?' '+b.get('origObj').get('housenumber'):'')+'</span>');if(c){a.hintOverlay.setPosition(c)}else {a.hintOverlay.setPosition(b.getGeometry().getCoordinates())}delete a.showPoiHintTimer};a.showFaceHint=function(e){var b=e.get('origObj');var f=a.getGrid(),d=a.getCartGrid(),c=a.getReplaceGrid();a.faceHint.setHtml('<b>'+b.get('supplierNo')+'</b> ('+b.get('doorsNo')+')<br>'+b.get('city')+' <b>'+b.get('catab')+' '+b.get('size')+' '+b.get('sidetype')+'</b><br><span data-qtip="'+b.get('address')+'"> '+b.get('address')+'</span>');a.faceHintOverlay.setPosition(e.getGeometry().getCoordinates());delete a.showFaceHintTimer;if(f){f.getView().focusRow(b)}if(d){d.getView().focusRow(b)}if(c){c.getView().focusRow(b)}};b.on('pointermove',function(b){a.hintOverlay.setPosition(undefined);if(a.highlightFaceCoverageTimer){clearTimeout(a.highlightFaceCoverageTimer);delete a.highlightFaceCoverageTimer}if(a.showPoiHintTimer){clearTimeout(a.showPoiHintTimer);delete a.showPoiHintTimer}if(b.dragging){return}});d.on('select',I);var q=new ol.style.Style({fill:new ol.style.Fill({color:'rgba(255, 255, 255, 0.2)'}),stroke:new ol.style.Stroke({color:'#ffcc33',width:2}),image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:'rgba(255, 204, 51, 0.6)'})})});a.poiIconStyleCache={};a.poiCircleStyleCache={};function createPoiStyle(b,f){if(b.get('hidden')){return null}var e=b.get('categoryId'),d=b.get('color')||a.defaultPoiColor,c=b.get('iconId');if(e){return a.poiStyleCache[e][d]||q}if(c){if(!a.poiIconStyleCache[c]){a.poiIconStyleCache[c]=new ol.style.Style({image:new ol.style.Icon({src:'api/v1/icons/'+c+'/image',rotateWithView:!1})})}return a.poiIconStyleCache[c]}if(b.get('color')!==a.defaultPoiColor){if(!a.poiCircleStyleCache[d]){a.poiCircleStyleCache[d]=new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:'#'+d}),stroke:new ol.style.Stroke({color:'#fff',width:2})})})}return a.poiCircleStyleCache[d]}if(b.getGeometry().getType()==='Point'){return a.blueStyle}return q}var g=new ol.layer.Vector({source:new ol.source.Vector(),style:createPoiStyle});a.maskLayer=g;a.poiLayer=g;function updateFeatureInPoiStore(b){if(!a.getPoiStore()){return}var c=Bigmedia.Vars.getOlGeometryCentroid(b.getGeometry()),d=ol.proj.toLonLat(c.getCoordinates());var e=b.get('origObj');if(e){e.set({lon:d[0],lat:d[1],centroid:c,geometry:b.getGeometry()})}}a.maskModify={init:function(){this.select=new ol.interaction.Select({layers:[g]});b.addInteraction(this.select);this.modify=new ol.interaction.Modify({features:this.select.getFeatures(),deleteCondition:function(a){return ol.events.condition.shiftKeyOnly(a)&&ol.events.condition.singleClick(a)}});b.addInteraction(this.modify);this.setEvents()},setEvents:function(){this.modify.on('modifyend',function(b){b.features.forEach(function(c){updateFeatureInPoiStore(c);a.recalcBuffer(c)})})},setActive:function(b){this.modify.setActive(b);if(b){a.maskDraw.setActive(!1)}}};a.maskModify.init();function addFeatureToPoiStore(d){if(!a.getPoiStore()){return}var b,c='';var e=Bigmedia.Vars.getOlGeometryCentroid(d.getGeometry());b=ol.proj.toLonLat(e.getCoordinates());switch(d.getGeometry().getType()){case 'Point':c='Point on ';break;case 'LineString':c='Line near ';break;case 'Circle':c='Circle around ';break;default:c='Polygon with centroid on ';}Ext.Ajax.request({url:'geocoding/reverse?lat='+b[1]+'&lon='+b[0]+'&format=geojson&accept-language=uk,en,ru&countrycodes=ua&addressdetails=1&polygon_geojson=1',callback:function(k,j,i){var f={name:c+b[0]+', '+b[1],geometry:d.getGeometry(),lon:b[0],lat:b[1],centroid:e};if(j){try{var g=JSON.parse(i.responseText);if(g.features){f.name=c+g.features[0].properties.display_name;f.address=g.features[0].properties.address.road;f.city=g.features[0].properties.address.city;f.housenumber=g.features[0].properties.address.housenumber}}catch(_){}}a.getPoiStore().beginUpdate();var h=a.getPoiStore().add(f)[0];d.set('origObj',h);d.setId(h.getId());a.getPoiStore().endUpdate()}})}a.maskDraw={init:function(){b.addInteraction(this.Point);this.Point.setActive(!1);b.addInteraction(this.LineString);this.LineString.setActive(!1);b.addInteraction(this.Polygon);this.Polygon.setActive(!1);b.addInteraction(this.Circle);this.Circle.setActive(!1);this.setEvents()},Point:new ol.interaction.Draw({source:g.getSource(),type:'Point'}),LineString:new ol.interaction.Draw({source:g.getSource(),type:'LineString'}),Polygon:new ol.interaction.Draw({source:g.getSource(),type:'Polygon'}),Circle:new ol.interaction.Draw({source:g.getSource(),type:'Circle'}),setEvents:function(){this.Point.on('drawend',function(b){b.feature.setId(a.autoId());addFeatureToPoiStore(b.feature);a.recalcBuffer(b.feature)});this.LineString.on('drawend',function(b){b.feature.setId(a.autoId());addFeatureToPoiStore(b.feature);a.recalcBuffer(b.feature)});this.Circle.on('drawend',function(b){b.feature.setId(a.autoId());addFeatureToPoiStore(b.feature);a.recalcBuffer(b.feature)});this.Polygon.on('drawend',function(b){b.feature.setId(a.autoId());addFeatureToPoiStore(b.feature);a.recalcBuffer(b.feature)})},getActive:function(){return this.activeType?this[this.activeType].getActive():!1},setActive:function(c,b){if(c&&b){this.activeType&&this[this.activeType].setActive(!1);this[b].setActive(!0);this.activeType=b;a.maskModify.setActive(!1)}else {this.activeType&&this[this.activeType].setActive(!1);this.activeType=null}}};a.maskDraw.init();a.maskDraw.setActive(!1);a.maskModify.setActive(!1);var N=new ol.interaction.Snap({source:g.getSource()});b.addInteraction(N);var D=new ol.style.Style({image:new ol.style.Icon({src:'resources/images/place.svg',rotateWithView:!1})});a.placeLayer=new ol.layer.Vector({source:new ol.source.Vector({features:[]}),style:D});a.CityHeatmapLayer=new ol.layer.Heatmap({source:new ol.source.Vector({features:[]}),minResolution:5,maxResolution:350,opacity:0.7,blur:15,radius:20,weight:function(a){return a.get('weight')}});b.getView().on('change:resolution',function(){if(a.CityHeatmapLayer){a.CityHeatmapLayer.setRadius(15*50/b.getView().getResolution());a.CityHeatmapLayer.setBlur(10*80/b.getView().getResolution())}});var u=new ol.style.Style({fill:new ol.style.Fill({color:'rgba(255, 255, 255, 0.1)'}),stroke:new ol.style.Stroke({color:'#000000',width:1})});a.CityPolygonLayer=new ol.layer.Vector({source:new ol.source.Vector({features:[]}),name:'CityPolygon',style:u,minResolution:5,maxResolution:20});a.KSHeatmapLayer=new ol.layer.Heatmap({source:new ol.source.Vector({features:[]}),minResolution:5,maxResolution:350,opacity:0.7,blur:15,radius:20,weight:function(a){return a.get('transit')/Ext.getStore('KSPolygons').max('transit')}});b.getView().on('change:resolution',function(){if(a.KSHeatmapLayer){a.KSHeatmapLayer.setRadius(15*50/b.getView().getResolution());a.KSHeatmapLayer.setBlur(10*80/b.getView().getResolution())}});var x=new ol.style.Style({fill:new ol.style.Fill({color:'rgba(255, 255, 255, 0.1)'}),stroke:new ol.style.Stroke({color:'#000000',width:1})});a.KSPolygonLayer=new ol.layer.Vector({source:new ol.source.Vector({features:[]}),style:x,minResolution:5,maxResolution:20});a.initLayers=function(){b.addLayer(a.citiesLayer);b.addLayer(a.cartCoveragesLayer);b.addLayer(a.coveragesLayer);b.addLayer(a.bufferLayer);b.addLayer(a.maskLayer);b.addLayer(a.replaceBufferLayer);b.addLayer(a.placeLayer);b.addLayer(a.replaceLayer);b.addLayer(a.facesLayer);b.addLayer(a.cartLayer);b.addLayer(a.selLayer);b.addLayer(a.radiusLayer);b.addLayer(a.focusLayer);b.addLayer(a.CityPolygonLayer);b.addLayer(a.CityHeatmapLayer)};var y=function(a,b){return a>=0&&a<=90&&b>=90-a&&b<=270-a||a>90&&a<270&&(b>=450-a||b<=270-a)||a>=270&&a<=360&&b<=630-a&&b>=450-a};var m=function(d,i){var c=[],h=[],f={};a.linksPoiToFace={};a.linksFaceToBuffer={};a.bufferLayer.getSource().forEachFeature(function(a){if(a.getGeometry().getType()!=='Point'&&a.getGeometry().getType()!=='LineString'){c.push({type:'Feature',properties:{},geometry:{type:'Polygon',coordinates:a.getGeometry().getCoordinates()},id:a.getId()})}});d.removeFilter('filterMapMask',!0);var b=d.getRange();if(c.length>0){b.forEach(b=>{var e=b.get('geometry').getCoordinates();c.forEach(c=>{if(turf.booleanPointInPolygon(turf.point(e),c)){if(!a.linksFaceToBuffer[b.getId()]){a.linksFaceToBuffer[b.getId()]={}}a.linksFaceToBuffer[b.getId()][c.id]=c.id}})});b=b.filter(b=>!!a.linksFaceToBuffer[b.getId()])}var g=a.poiLayer.getSource().getFeatures();for(var e=0;e<g.length;e++){p=g[e];b.filter(b=>a.linksFaceToBuffer[b.getId()]&&a.linksFaceToBuffer[b.getId()][p.getId()]).forEach(b=>{var h=b.get('geometry').getCoordinates(),e=ol.proj.toLonLat(h),g=Bigmedia.Vars.getOlGeometryCentroid(p.getGeometry()),f=ol.proj.toLonLat(g.getCoordinates()),c=turf.distance(e,f,{units:'kilometers'})*1000;if((p.getGeometry().getType()!='Point'||c<=a.getBuffer())&&(!a.getBeforePoi()||y(b.get('angle'),turf.bearingToAzimuth(turf.bearing(e,f))))){if(!a.linksPoiToFace[p.getId()]){a.linksPoiToFace[p.getId()]=[]}a.linksPoiToFace[p.getId()].push({id:b.getId(),id_size:b.get('id_size'),distance:c,price:b.get('finalPrice'),ots:b.get('ots')})}})}d.addFilter(new Ext.util.Filter({id:'filterMapMask',filterFn:function(l){var g=a.getMaximumFaces();if(g>0){var k=Ext.getStore('FormatsTree'),j=Ext.getStore('LinkPoiRulesTree'),c={},h=0,b=k.getRoot().firstChild;while(b){c[b.id_size]=h;h++;b=b.nextSibling}var e=function(a){return c[a]||c[-1]};try{Object.keys(a.linksPoiToFace).forEach(f=>{var c=a.linksPoiToFace[f];c.sort((a,b)=>e(a.id_size)-e(b.id_size));var b=j.getRoot().lastChild;while(b){c.sort(b.get('sortFn'));b=b.previousSibling}a.linksPoiToFace[f]=c.slice(0,g)})}catch(_){console.log('error link faces to poi filter')}finally{}}Object.values(a.linksPoiToFace).forEach(a=>{a.forEach(b=>{f[b.id]=+b.id})});return !!f[l.getId()]}}))};a.filterFaces={refresh:function(){if(a.getGeoStore()){m(a.getGeoStore(),a.facesLayer)}if(a.getFilterCart()&&a.getCartStore()){m(a.getCartStore(),a.cartLayer)}},setActive:function(b){if(b){this.refresh()}else {if(a.getGeoStore()){a.getGeoStore().removeFilter('filterMapMask')}if(a.getFilterCart()&&a.getCartStore()){a.getCartStore().removeFilter('filterMapMask')}}},getActive:function(){return a.getGeoStore()&&!!a.getGeoStore().getFilters().get('filterMapMask')||a.getFilterCart()&&a.getCartStore()&&a.getCartStore().getFilters().get('filterMapMask')}};a.resolutionFactor=function(e){var a=b.getView().getResolution();var d=ol.proj.getPointResolution(b.getView().getProjection(),a,e,'m');var c=a/d;return c};a.replaceFace={createRadius:function(d){var h=this.replaceFace,b=d.getGeometry().getCenter(),c=d.getGeometry().getLastCoordinate(),f=new ol.geom.LineString([b,c],'XY'),a=turf.distance(ol.proj.toLonLat(b),ol.proj.toLonLat(c),{units:'kilometers'}),g=a<1?Math.round(a*1000)+'m':Math.round(a*100)/100+'km';var e=new ol.Feature({geometry:f});e.setStyle(new ol.style.Style({stroke:new ol.style.Stroke({color:'#0500BD',width:3}),text:new ol.style.Text({font:'12px Verdana',text:g,offsetY:-10,placement:'line',textAlign:'center',fill:new ol.style.Fill({color:'#0500BD'}),stroke:new ol.style.Stroke({color:'#FFFFFF',width:2})})}));o.getSource().addFeature(e)},create:function(g,m){var d=a.getGeoStore()||(a.getGrid()?a.getGrid().getStore():null),e=a.getCartStore()||(a.getCartGrid()?getCartGrid().getStore():null),c=a.getReplaceStore(),b,i=[];if(!c){return}a.replaceLayer.setVisible(!1);a.replaceBufferLayer.getSource().clear(!0);c.holdReload=!0;c.removeFilter('filterReplaceMapMask',!0);b=(d?d.getById(g):null)||(e?e.getById(g):null);if(!b){return}this.faceId=g;this.replaceFace=b;a.reloadReplaceFaces();c.each(function(a){if(!(d&&d.getById(a.getId())||e&&e.getById(a.getId()))){i.push({type:'Feature',properties:{id:a.getId()},geometry:{type:'Point',coordinates:a.get('geometry').getCoordinates()}})}});var l=m*a.resolutionFactor(b.get('geometry').getCoordinates());var k=new ol.geom.Circle(b.get('geometry').getCoordinates(),l,'XY');var f=new ol.Feature({geometry:k,properties:{id:b.getId()}});f.setId(b.getId());a.radiusLayer.getSource().clear(!0);a.replaceBufferLayer.getSource().addFeature(f);a.replaceFace.createRadius(f);var h=[];a.replaceBufferLayer.getSource().forEachFeature(function(b){var a=ol.geom.Polygon.fromCircle(b.getGeometry());h.push({type:'Feature',properties:{},geometry:{type:'Polygon',coordinates:a.getCoordinates()}})});var n=turf.within({'type':'FeatureCollection','features':i},{'type':'FeatureCollection','features':h}),j=n.features.map(function(a){return a.properties.id});c.addFilter(new Ext.util.Filter({property:'id',id:'filterReplaceMapMask',operator:'in',value:j}));this.updateDeltas();c.holdReload=!1;a.reloadReplaceFaces();this.setActive(!0)},updateReplaceBuffer:function(){var c=a.getGeoStore()||(a.getGrid()?a.getGrid().getStore():null),d=a.getCartStore()||(a.getCartGrid()?getCartGrid().getStore():null),b=a.getReplaceStore(),g,f=[];if(!b){return}a.replaceLayer.setVisible(!1);var h=this.faceId;g=(c?c.getById(h):null)||(d?d.getById(h):null);if(!g){return}b.holdReload=!0;b.removeFilter('filterReplaceMapMask',!0);a.reloadReplaceFaces();b.each(function(a){if(!(c&&c.getById(a.getId())||d&&d.getById(a.getId()))){f.push({type:'Feature',properties:{id:a.getId()},geometry:{type:'Point',coordinates:a.get('geometry').getCoordinates()}})}});var e=[];a.radiusLayer.getSource().clear(!0);a.replaceBufferLayer.getSource().forEachFeature(function(b){var c=ol.geom.Polygon.fromCircle(b.getGeometry());e.push({type:'Feature',properties:{},geometry:{type:'Polygon',coordinates:c.getCoordinates()}});a.replaceFace.createRadius(b)});var j=turf.within({'type':'FeatureCollection','features':f},{'type':'FeatureCollection','features':e}),i=j.features.map(function(a){return a.properties.id});b.addFilter(new Ext.util.Filter({property:'id',id:'filterReplaceMapMask',operator:'in',value:i}));this.updateDeltas();b.holdReload=!1;a.reloadReplaceFaces();a.replaceLayer.setVisible(!0)},updateDeltas:function(){var c=function(a){if(!a){return}return a>0?'<span style="color:red"><sup>+'+Math.round(a*100)/100+'</sup></span>':'<span style="color:blue"><sub>'+Math.round(a*100)/100+'</sub></span>'};var b=this.replaceFace;a.getReplaceStore().each(function(a){var d=turf.distance(ol.proj.toLonLat(a.get('geometry').getCoordinates()),ol.proj.toLonLat(b.get('geometry').getCoordinates()),{units:'kilometers'});d=Math.round(d*1000);var f=a.get('grp')-b.get('grp'),g=a.get('ots')-b.get('ots'),e=a.get('finalPrice')-b.get('finalPrice');a.set({distance:d,deltaGrp:c(a.get('grp')-b.get('grp')),deltaOts:c(a.get('ots')-b.get('ots')),deltaPrice:c(a.get('finalPrice')-b.get('finalPrice'))})})},setActive:function(b){if(b){a.replaceBufferLayer.setVisible(!0);a.replaceLayer.setVisible(!0);a.replaceMaskModify.setActive(!0)}else {a.replaceMaskModify.setActive(!1);a.replaceBufferLayer.setVisible(!1);a.replaceLayer.setVisible(!1);a.radiusLayer.getSource().clear(!0);a.replaceBufferLayer.getSource().clear(!0);a.getReplaceStore().removeFilter('filterReplaceMapMask')}},getActive:function(){return !!a.getReplaceStore().getFilters().get('filterReplaceMapMask')}};a.replaceMaskModify={init:function(){this.modify=new ol.interaction.Modify({source:a.replaceBufferLayer.getSource()});b.addInteraction(this.modify);this.setEvents()},setEvents:function(){this.modify.on('modifystart',function(){a.radiusLayer.setVisible(!1);a.replaceLayer.setVisible(!1)});this.modify.on('modifyend',function(){var c=a.replaceBufferLayer.getSource().getFeatures();if(c.length>0){var b=c[0];if(b.getGeometry().getType()==='Circle'){var d=b.getGeometry().getRadius();a.setReplaceBuffer(d/a.resolutionFactor(b.getGeometry().getCenter()))}}a.radiusLayer.setVisible(!0);a.replaceLayer.setVisible(!0);a.fireEventArgs('replaceradiuschanged',[a.getReplaceBuffer()])})},setActive:function(a){this.modify.setActive(a)}};a.replaceMaskModify.init()},updatePlace:function(b){var a=this;a.placeLayer.getSource().clear();if(b){var c=new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat(b))});a.placeLayer.getSource().addFeature(c);a.showPlace()}},showPlace:function(){var b=this;var a=b.placeLayer.getSource().getFeatures();if(a&&a[0]){if(b.map.getView().getZoom()<15){b.map.getView().animate({center:a[0].getGeometry().getCoordinates(),zoom:15})}else {b.map.getView().animate({center:a[0].getGeometry().getCoordinates()})}}}});Ext.define('Bigmedia.view.grid.ThirdPartyController',{extend:Ext.app.ViewController,alias:'controller.grid-thirdparty',init:function(e){var c=this;c.callParent(e);var a=c.getView(),b=a.getStore();if(b){b.addListener('datachanged',a.getController().onStoreDataChanged,a.getController());b.addListener('beforeload',a.getController().onStoreBeforeLoad,a.getController());b.addListener('load',a.getController().onStoreLoad,a.getController())}var d=a.lookupReference('statusGrid');a.updateStatusBar();if(b&&b.isLoading()){if(d){d.showBusy()}}},initPriceColumn:function(){var a=this,b=a.getView()},onClearClick:function(a){var b=this;Ext.getStore('ThirdPartyBoards').clearFilter(!0);Ext.getStore('ThirdPartyBoards').removeAll()},onGridRefresh:function(){var b=this,a=b.getView().getStore();a.load()},onGridAddThirdParty:function(d){var b=Ext.getStore('ThirdPartyBoards');var c=d.up('window'),a=c.lookupReference('dlgImportPrices');if(!a){a=new Bigmedia.view.dialog.DlgImportPrices({onlyDoorsNo:!0,reference:'dlgImportPrices',callbackImport:function(a,e){var c=Object.keys(a);Ext.Ajax.request({url:'/api/v1/thirdparty',method:'POST',jsonData:{dixes:c}}).then(function(f,g){var c=Ext.decode(f.responseText);c.forEach(function(b){b.price=a[b.doors_no]});b.loadRawData(c,!0);b.fireEventArgs('add',[b,c])},function(b,c){console.log('server-side failure with status code '+b.status)})},callbackScope:null});c.add(a)}a.show()},onStoreDataChanged:function(){var b=this,a=b.getView();a.updateStatusBar()},onStoreBeforeLoad:function(c){var b=this,a=b.lookup('statusGrid');if(a){a.showBusy()}},onStoreLoad:function(a){this.getView().updateStatusBar()},showSelectedOnlyToggle:function(g,c){var f=this,b=f.getView(),a=b.getStore();if(c){a.removeFilter('filterselected',!0);var e=b.getSelectionModel().getSelection().map(function(a){return a.id});var d=new Ext.util.Filter({property:'id',id:'filterselected',operator:'in',value:e});a.addFilter(d)}else {a.removeFilter('filterselected')}},exportToExcel:function(b){Ext.MessageBox.show({msg:Bigmedia.Locales.exportExcelSavingData,progressText:Bigmedia.Locales.exportExcelProgressText,width:300,wait:{interval:200},animateTarget:b});var a=this;a.timer=Ext.defer(function(){Bigmedia.GridExport.exportToExcel(a.getView(),'bigmedia_faces.xlsx',function(){},!0);a.timer=null;Ext.MessageBox.hide();a.showToast(Bigmedia.Locales.exportExcelFileSaved,Bigmedia.Locales.exportExcelDone)},3000)},showToast:function(a,b){Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400,minWidth:400})},destroy:function(){if(this.timer){window.clearTimeout(this.timer)}Ext.Msg.hide();this.callParent()}});Ext.define('Bigmedia.view.grid.ThirdParty',{extend:Ext.grid.Panel,controller:'grid-thirdparty',plugins:[{ptype:'cellediting',clicksToEdit:1},{ptype:'gridfilters'}],xtype:'thirdparty-grid',columnLines:!0,padding:0,bodyPadding:0,margin:0,referenceHolder:!0,split:!1,stateful:!0,forceFit:!0,viewConfig:{trackOver:!1,stripeRows:!0,enableTextSelection:!1,markDirty:!1},trackMouseOver:!1,viewModel:{data:{hiddenToolBar:!1,hiddenStatusBar:!1,visiblePrice:!1}},config:{hideToolBar:!1,hideStatusBar:!1,showPrice:!0,showDelete:!0},updateHideToolBar:function(a){var b=this;b.getViewModel().set('hiddenToolBar',a)},updateHideStatusBar:function(a){var b=this;b.getViewModel().set('hiddenStatusBar',a)},updateShowPrice:function(a){var b=this;b.getViewModel().set('visiblePrice',a)},updateShowDelete:function(a){var b=this;b.getViewModel().set('showDelete',a)},updateShowAddToCart:function(a){var b=this;b.getViewModel().set('showAddToCart',a)},dockedItems:[{xtype:'toolbar',dock:'top',reference:'toolBar',bind:{hidden:'{hiddenToolBar}'},items:[{xtype:'button',reference:'addthirdpartybtn',iconCls:'x-fa fa-plus',text:'Add boards',listeners:{click:'onGridAddThirdParty'}},'->',{text:'Clear',xtype:'button',reference:'clearbtn',iconCls:'x-fa fa-trash',disabled:!0,listeners:{click:'onClearClick'}}]},{xtype:'statusbar',dock:'bottom',reference:'statusGrid',bind:{hidden:'{hiddenStatusBar}'},defaultText:'',defaultIconCls:'default-icon',text:'',iconCls:'x-status-ready',busyText:Bigmedia.Locales.statusBarLoading}],title:Bigmedia.Locales.facesTitle,header:!1,columns:[{text:Bigmedia.Locales.colDoorsNo,sortable:!0,dataIndex:'doors_no',groupable:!1,hideable:!1,draggable:!1,width:60},{text:'SupplierNo',sortable:!0,dataIndex:'supplier_no',groupable:!1,hideable:!0,hidden:!0,draggable:!1,width:80},{text:Bigmedia.Locales.colSupplier,sortable:!0,dataIndex:'supplier',groupable:!1,width:120,filter:'list'},{text:Bigmedia.Locales.colCity,sortable:!0,dataIndex:'city',groupable:!1,width:120,filter:'list'},{text:Bigmedia.Locales.colAddress,sortable:!0,dataIndex:'address',flex:1,groupable:!1,width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:Bigmedia.Locales.colCat,sortable:!0,dataIndex:'catab',groupable:!1,width:40,filter:'list'},{text:Bigmedia.Locales.colSize,sortable:!0,dataIndex:'size',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colGRP,sortable:!0,dataIndex:'grp',groupable:!1,width:60,filter:'number'},{text:Bigmedia.Locales.colOTS,sortable:!0,dataIndex:'ots',groupable:!1,width:60,filter:'number'},{text:'Price',width:100,sortable:!0,reference:'columnprice',dataIndex:'price',hideable:!1,filter:'number',editor:{xtype:'numberfield',allowBlank:!0,minValue:0,maxValue:100000}},{xtype:'actioncolumn',width:50,bind:{hidden:'{!showDelete}'},items:[{iconCls:'x-fa fa-minus',tooltip:'Delete',handler:function(a,b,d){var c=a.getStore().getAt(b);a.getStore().remove(c)}}]}],updateStatusBar:function(){var c=this,f=c.lookupReference('statusGrid'),a=c.getStore(),d=(a.getData().getSource()||a.getData()).getCount(),e=a.getCount(),g=c.getSelectionModel().getCount();if(!d){d=e}var b=Ext.String.format(Bigmedia.Locales.statusBarTotal,d);if(d!=e){b+=' | '+Ext.String.format(Bigmedia.Locales.statusBarFiltered,e)}if(g>0){b+=' | '+Ext.String.format(Bigmedia.Locales.statusBarChecked,g)}var i=[a.min('ots'),a.max('ots'),Math.round(a.average('ots')*100)/100,Math.round(a.sum('ots')*100)/100];b+='  | OTS(min,max,avg) = '+i.slice(0,3).join(', ')+' | OTS(sum) = '+i[3];var h=a.collect('city');if(h.length==1){grp=[a.min('grp'),a.max('grp'),Math.round(a.average('grp')*100)/100,Math.round(a.sum('grp')*100)/100];b+='  | GRP '+h[0]+'(min,max,avg) = '+grp.slice(0,3).join(', ')+' | GRP(sum) = '+grp[3]}var k=c.lookupReference('exportbtn'),j=c.lookupReference('clearbtn');j.setDisabled(e==0);if(a&&a.isLoading()){if(f){f.showBusy()}}else {f.setStatus({text:b,iconCls:'x-ready-icon'})}},listeners:{reconfigure:function(a,b,f,c,e){if(b!==c){if(c){c.removeListener('datachanged',a.getController().onStoreDataChanged);c.removeListener('beforeload',a.getController().onStoreBeforeLoad);c.removeListener('load',a.getController().onStoreLoad)}if(b){b.addListener('datachanged',a.getController().onStoreDataChanged,a.getController());b.addListener('beforeload',a.getController().onStoreBeforeLoad,a.getController());b.addListener('load',a.getController().onStoreLoad,a.getController())}var d=a.lookupReference('statusGrid');a.updateStatusBar();if(b&&b.isLoading()){if(d){d.showBusy()}}}},selectionchange:function(b,c){var a=b.getStore(),d=a.getFilters();this.updateStatusBar()}}});Ext.define('Bigmedia.view.dialog.DlgManageFacesForReplace',{extend:Ext.window.Window,xtype:'dlgmanagefacesforreplace',viewModel:{data:{thirdpartyreplace:null}},config:{callbackImport:null,callbackScope:null,store:new Bigmedia.store.ThirdPartyBoards()},updateStore:function(a){var b=this;b.getViewModel().set('thirdpartyreplace',a)},showDialog:function(b){var a=this;a.onSuccess=b.success;a.onCancel=b.cancel;a.show()},width:500,minWidth:400,height:380,minHeight:380,modal:!0,hidden:!0,autoDestroy:!1,autoShow:!1,closeAction:'hide',title:Bigmedia.Locales.dlgImportThirdPartyTitle,referenceHolder:!0,layout:'fit',padding:10,items:[{xtype:'thirdparty-grid',itemId:'thirdpartygrid',flex:1,bind:{store:'{thirdpartyreplace}'}}],buttons:[{text:Bigmedia.Locales.btnCancelText,listeners:{click:function(b){var a=b.up('window');if(a.onCancel){Ext.callback(a.onCancel,a,[a])}a.hide()}}},'->',{text:'OK',reference:'btnImport',listeners:{click:function(b){var a=b.up('window');if(a.onSuccess){Ext.callback(a.onSuccess,a,[a]);a.hide()}}}}]});Ext.define('Bigmedia.view.grid.ReplacesController',{extend:Ext.app.ViewController,alias:'controller.grid-replaces',init:function(e){var d=this;d.callParent(e);var a=d.getView(),b=a.getStore(),c=a.up('window');if(b){b.addListener('datachanged',a.getController().onStoreDataChanged,a.getController());b.addListener('beforeload',a.getController().onStoreBeforeLoad,a.getController());b.addListener('load',a.getController().onStoreLoad,a.getController())}d.dlgManageFaces=Ext.create('Bigmedia.view.dialog.DlgManageFacesForReplace',{listeners:{show:function(){if(c){c.setAlwaysOnTop(!1)}},hide:function(){if(c){c.setAlwaysOnTop(!0)}}}})},onAddClick:function(a,b,d){var c=a.getStore().getAt(b);this.getView().fireEventArgs('addclick',[c])},onReplaceClick:function(a,c,e){var d=a.getStore().getAt(c),b=a.lookupViewModel().get('replaceFaceId');this.getView().fireEventArgs('replaceclick',[d,b])},onRadiusChange:function(c,a){var b=this;b.getView().fireEventArgs('radiuschanged',[a])},onConfigClick:function(e){var c=this,b=c.dlgManageFaces.getStore(),d=c.getView(),a=d.getStore();(a.getData().getSource()||a.getData()).each(function(a){if(a.get('supplier')!=='BIGMEDIA'){if(!b.getById(a.getId())){b.add(a)}}});c.dlgManageFaces.showDialog({success:function(g){var d=[];(a.getData().getSource()||a.getData()).each(function(a){if(a.get('supplier')!=='BIGMEDIA'){if(!b.getById(a.getId())){d.push(a)}}});a.remove(d);var f=[];(b.getData().getSource()||b.getData()).each(function(b){if(b.get('supplier')!=='BIGMEDIA'){if(!a.getById(b.getId())){f.push(b.getData())}}});a.loadRawData(f,!0);if(d.length||f.length){c.getView().fireEvent('sourcechanged')}},cancel:function(){}})},showToast:function(a,b){Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400,minWidth:400})}});Ext.define('Bigmedia.view.grid.Replaces',{extend:Ext.grid.Panel,controller:'grid-replaces',xtype:'replaces-grid',plugins:{gridfilters:!0},columnLines:!0,padding:0,bodyPadding:0,margin:0,referenceHolder:!0,split:!1,stateful:!0,viewConfig:{cartStore:null,trackOver:!1,stripeRows:!0,enableTextSelection:!1,markDirty:!1},trackMouseOver:!1,viewModel:{data:{hiddenToolBar:!1,hiddenStatusBar:!1,visiblePrice:!1}},config:{showPrice:!0,showDelete:!0,detFace:null},initComponent:function(){this.callParent();this.enableBubble(['radiuschanged','addclick','replaceclick','sourcechanged'])},updateHideToolBar:function(a){var b=this;b.getViewModel().set('hiddenToolBar',a)},updateHideStatusBar:function(a){var b=this;b.getViewModel().set('hiddenStatusBar',a)},updateShowPrice:function(a){var b=this;b.getViewModel().set('visiblePrice',a)},updateShowDelete:function(a){var b=this;b.getViewModel().set('showDelete',a)},updateShowAddToCart:function(a){var b=this;b.getViewModel().set('showAddToCart',a)},dockedItems:[{xtype:'toolbar',dock:'top',reference:'toolBar',bind:{hidden:'{!showToolbar}'},items:[{text:'Configure',xtype:'button',reference:'configbtn',iconCls:'x-fa fa-cogs',listeners:{click:'onConfigClick'}},'->',{xtype:'slider',fieldLabel:'Radius',labelWidth:80,bind:{value:'{replaceRadius}'},minValue:10,maxValue:2000,width:400,useTips:!0,tipText:function(a){return a.value<1000?a.value+' m':Math.round(a.value/1000*100)/100+' km'},listeners:{changecomplete:'onRadiusChange'}}]}],header:!1,columns:[{text:Bigmedia.Locales.colDoorsNo,tdCls:'tip',sortable:!0,dataIndex:'doorsNo',groupable:!1,hideable:!1,draggable:!1,width:60,filter:{type:'string'}},{text:'SupplierNo',tdCls:'tip',sortable:!0,dataIndex:'supplierNo',groupable:!1,hideable:!0,hidden:!1,draggable:!1,width:80,filter:{type:'string'}},{text:'Distance',tdCls:'tip',sortable:!0,dataIndex:'distance',groupable:!1,width:60,filter:'number'},{text:Bigmedia.Locales.colSupplier,tdCls:'tip',sortable:!0,dataIndex:'supplier',groupable:!1,width:120,filter:'list'},{text:Bigmedia.Locales.colAddress,tdCls:'tip',sortable:!0,dataIndex:'address',flex:1,groupable:!1,width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:Bigmedia.Locales.colCat,tdCls:'tip',sortable:!0,dataIndex:'catab',groupable:!1,width:40,filter:'list'},{text:Bigmedia.Locales.colSize,tdCls:'tip',sortable:!0,dataIndex:'size',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colGRP,tdCls:'tip',xtype:'templatecolumn',sortable:!0,dataIndex:'grp',groupable:!1,tpl:'{grp}{deltaGrp}',width:60,filter:'number'},{text:Bigmedia.Locales.colOTS,tdCls:'tip',xtype:'templatecolumn',sortable:!0,dataIndex:'ots',tpl:'{ots}{deltaOts}',groupable:!1,width:60,filter:'number'},{text:'Price',tdCls:'tip',xtype:'templatecolumn',width:100,sortable:!0,reference:'columnprice',dataIndex:'finalPrice',hideable:!1,filter:'number',tpl:'{finalPrice}{deltaPrice}'},{xtype:'actioncolumn',width:70,items:[{iconCls:'x-fa fa-retweet',bind:{disabled:'{!replaceFaceId}'},tooltip:'Replace',handler:'onReplaceClick'},{xtype:'tbspacer'},{iconCls:'x-fa fa-plus',tooltip:'Add',handler:'onAddClick'}]}],listeners:{render:function(a){var b=a.getView();a.tip=Ext.create('Ext.tip.ToolTip',{target:b.getId(),delegate:b.itemSelector+' .tip',trackMouse:!0,listeners:{beforeshow:function(c){var d=c.target.component,b=d.getRecord(c.triggerElement);c.update(b.get('doorsNo')+'('+b.get('supplierNo')+') '+b.get('city')+', '+b.get('address'))}}})},destroy:function(a){delete a.tip},reconfigure:function(e,d,c,b,a){},selectionchange:function(b,c){var a=b.getStore(),d=a.getFilters()}}});Ext.define('Bigmedia.view.dialog.DlgReplaceGrid',{extend:Ext.window.Window,xtype:'dlgreplacegrid',config:{replaceStore:null,mapView:null},tools:[{xtype:'button',bind:{pressed:'{showToolbar}'},padding:2,iconCls:'x-fa fa-gear',enableToggle:!0}],viewModel:{data:{replaceStore:null,replaceRadius:300,showToolbar:!1,replaceFaceId:null}},initComponent:function(){this.callParent();this.enableBubble(['radiuschanged','addclick','replaceclick','sourcechanged'])},updateReplaceStore:function(a){this.getViewModel().set('replaceStore',a)},width:700,minWidth:400,height:250,minHeight:200,autoShow:!1,alwaysOnTop:!0,closeAction:'hide',modal:!1,closable:!0,title:Bigmedia.Locales.dlgReplaceTitle,referenceHolder:!0,layout:'fit',items:[{xtype:'replaces-grid',bind:'{replaceStore}',listeners:{radiuschanged:function(a){this.up('window').fireEventArgs('radiuschanged',[a])},select:function(b,a){this.up('window').fireEventArgs('recordselected',[a])}}}]});Ext.define('Bigmedia.view.dialog.DlgSearchPoiController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgsearchpoi',onGetPOIClick:function(){var b=this,e=b.getView(),h=b.lookup('wizard').lookup('poinamecontainer'),j=b.lookup('wizard').lookup('treeCat'),k=b.lookup('searchstatus'),a=e.getPoiStore(),f=[],g=[],i=e.lookupViewModel().get('curCamp'),c=i.get('filters'),d;if(c&&c['x-gridfilter-city']){d=c['x-gridfilter-city'].value}k.showBusy();h.items.each(function(a){if(a.getValue()){f.push(a.getValue())}});j.getChecked().forEach(function(a){g.push(a.get('id'))});Ext.Ajax.request({url:'/api/v1/pois/',method:'POST',jsonData:{cats:g,names:f}}).then(function(b,g){var f=Ext.decode(b.responseText);var c=f.filter(a=>!d||d.indexOf(a.city)>=0).map(c=>{c.name=c['name_'+Bigmedia.Locales.currentLocale]||c['name_ukr']||c['name_ru']||c['name_en']||'';c.geometry=parseFloat(c.lon)&&parseFloat(c.lat)?new ol.geom.Point(ol.proj.fromLonLat([parseFloat(c.lon),parseFloat(c.lat)])):null;c.centroid=c.geometry;if(a.getAssociatedEntity()){delete c.id;c[a.foreignKeyName]=a.getAssociatedEntity().getId()}return c});a.add(c);e.close()},function(a,b){console.log('server-side failure with status code '+a.status)})},updateSearchCondition:function(){var a=this,g=a.getView(),e=a.lookup('wizard').lookup('poinamecontainer'),f=a.lookup('wizard').lookup('treeCat'),d=a.lookup('searchstatus'),b=[],c=[];d.showBusy();e.items.each(function(a){if(a.getValue()){b.push(a.getValue())}});f.getChecked().forEach(function(a){c.push(a.get('id'))});Ext.Ajax.request({url:'/api/v1/pois/count',method:'POST',jsonData:{cats:c,names:b,countOnly:!0}}).then(function(b,f){var a=Ext.decode(b.responseText);var e=a&&a.length?a[0].poi_count:0;var c='Found '+e+' POI';d.setStatus({text:c,iconCls:'x-ready-icon'})},function(a,b){console.log('server-side failure with status code '+a.status)})},clearTreeView:function(){var a=this.lookup('wizard').lookup('treeCat');function clearNode(b){b.set('checked',!1);if(b!==a.getRootNode()){a.collapseNode(b)}var c=b.childNodes;c.forEach(function(a){clearNode(a)})}clearNode(a.getRootNode())},clearWindow:function(){var a=this;a.clearTreeView();a.lookupReference('poisearch').setValue([]);a.dist.setValue(3000);a.before.setValue(!1);a.lookupReference('fieldsetDistBefore').collapse();a.lookupReference('fieldsetPoiTreeCat').collapse();a.lookupReference('fieldsetPoiSearch').collapse();a.poiFaces={};a.catFaces={};a.selFaces={};a.emptyFaces={total:!0,cat:!0,poi:!0};a.updateCreateButton()},updateCreateButton:function(){var a=this,c=a.lookupReference('btnCreateFilter'),d=Object.keys(a.selFaces).length,b=a.lookupReference('statusBar');if(!a.emptyFaces.total){c.enable();b.setStatus({text:Bigmedia.Locales.dlgPoiCategoriesStatusReady,iconCls:'ready-icon'});b.items.get(0).text=Ext.String.format(Bigmedia.Locales.dlgPoiCategoriesStatusReady,d)}else {c.disable();b.clearStatus();b.items.get(0).text=''}},onFieldsetTreeCatExpand:function(){var d=this,b=Ext.getStore('PoiLinkCatFaces'),a=d.lookupReference('treeCat');if(!b.isLoaded()){var c=a.getRootNode();a.expandNode(c);a.collapseAll()}},onCloseWindowClick:function(){this.getView().hide()},onShowView:function(b){var a=this;a.clearTreeView()},mergeFaces:function(d,c){var b={};for(var a in d){b[a]=d[a]}for(var a in c){if(!b[a]){b[a]=c[a]}else {b[a].d=Math.min(d[a].d,c[a].d);if(b[a].b==null){b[a].b=c[a].b}else {if(c[a].b!=null){b[a].b=Math.min(b[a].b,c[a].b)}}}}return b},setCatFaces:function(b){var a=this;a.catFaces=b;a.emptyFaces.cat=Object.keys(b).length==0;a.selFaces=a.mergeFaces(b,a.poiFaces);a.emptyFaces.total=a.emptyFaces.cat&&a.emptyFaces.poi;a.updateCreateButton()},setPoiFaces:function(b){var a=this;a.poiFaces=b;a.emptyFaces.poi=Object.keys(b).length==0;a.selFaces=a.mergeFaces(b,a.catFaces);a.emptyFaces.total=a.emptyFaces.cat&&a.emptyFaces.poi;a.updateCreateButton()},initTargetFaces:function(){var d=this.facesStore;if(!d.getData().filtered){return null}var a=d.getData().getFilters().clone();if(a.get('filterpoi')){a.removeByKey('filterpoi')}if(a.length>0){var b={};var c=d.getData().getSource().clone();c.setFilters(a);c.each(function(a){if(!b[a.get('id')]){b[a.get('id')]=1}else {b[a.get('id')]++}});c.destroy();return b}a.destroy();return null},getTargetFaces:function(){return this.targetFaces},genNewName:function(){var b=this,e=b.getView(),c=b.lookupReference('treeCat'),d=b.lookupReference('poisearch'),a='';function getPoiNames(){var a=[];b.selPoiStore.each(function(b){a.push(b.get('name'))});return a.join(', ')}function getCheckedNodes(a){if(a.get('checked')){return [a]}if(a.childNodes.length>0){var b=a.childNodes;return b.reduce(function(b,c){return b.concat(getCheckedNodes(c))},[])}else {return []}}function getCatNames(){var b=getCheckedNodes(c.getRootNode());var a=b.map(function(a){return a.get('name')});return a.join(', ')}if(d.getValue().length>0){a=getPoiNames()}else {if(c.getChecked().length>0){a=getCatNames()}}a=Ext.String.ellipsis(a,30);if(b.dist.getValue()<3000||b.before.getValue()){a+=' '+Bigmedia.Locales.poiFilterSetNameParamLimits}return a},genNewDescr:function(){var a=this,e=a.getView(),c=a.lookupReference('treeCat'),d=a.lookupReference('poisearch'),b='';function getPoiNames(){var b=[];a.selPoiStore.each(function(a){b.push(a.get('name'))});return b.join(', ')}function getCheckedNodes(a){if(a.get('checked')){return [a]}if(a.childNodes.length>0){var b=a.childNodes;return b.reduce(function(b,c){return b.concat(getCheckedNodes(c))},[])}else {return []}}function getCatNames(){var b=getCheckedNodes(c.getRootNode());var a=b.map(function(a){return a.get('name')});return a.join(', ')}if(d.getValue().length>0){b=Ext.String.format(Bigmedia.Locales.poiFilterSetDescrObjects,d.getValue().length)+' '+getPoiNames()}if(c.getChecked().length>0){b=Ext.String.format(Bigmedia.Locales.poiFilterSetDescrCategories,c.getChecked().length)+' '+getCatNames()}b=Ext.String.ellipsis(b,40);if(a.dist.getValue()<3000||a.before.getValue()){b+=' '+Bigmedia.Locales.poiFilterSetDescrParamLimits;if(a.dist.getValue()<3000){b+=' '+Ext.String.format(Bigmedia.Locales.poiFilterSetDescrParamDist,a.dist.getValue())}if(a.before.getValue()){b+=' '+Bigmedia.Locales.poiFilterSetDescrParamBefore}}return b},onCreateFilterClick:function(){var b=this,e=b.getView(),a=e.cbPoiTag,f=a.getStore();var c=Object.keys(b.selFaces).reduce(function(c,a){if(b.isFittingDistance(b.selFaces[a])){c[a]=a}return c},{});var g=f.add({name:b.genNewName(),descr:b.genNewDescr(),totalCount:Object.keys(c).length,addCount:Object.keys(c).length,faces:c});var d=a.getValue();tagVal=d.concat(g[0].id);a.setValue(tagVal);a.updateValue();a.fireEventArgs('change',[a,tagVal,d,!0]);e.hide()},getCurrentFaceList:function(){},isFittingDistance:function(a){var b=this,c=b.dist,d=b.before;return a.d<=c.getValue()&&(!d.getValue()||a.b!=null&&a.b<=c.getValue())},inCatFaces:function(b){var a=this;return a.emptyFaces?a.emptyFaces.cat||a.catFaces[b]:null},inPoiFaces:function(b){var a=this;return a.emptyFaces.poi||a.poiFaces[b]},isFittingFace:function(b,c){var a=this,e=a.dist,d=a.before;return (a.emptyFaces.total||a.selFaces[c])&&a.isFittingDistance(b)},onPoiCategoriesLoad:function(e,d,c){if(!c){return}var a=this,f=a.facesStore;var b=a.getTargetFaces();function initCategory(g){var f={};if(g.childNodes.length>0){var j=g.childNodes;j.forEach(function(h){var b=initCategory(h);f=a.mergeFaces(f,b)})}var i={};if(g.get('faces')&&g.get('faces')!==null){i=g.get('faces')}f=a.mergeFaces(f,i);var k=Object.keys(f).length;var h=0,l=0;Object.keys(f).forEach(function(i){if((!b||b[i])&&a.isFittingDistance(f[i])&&a.inPoiFaces(i)){h++}});g.set({totalCount:k,faces:f,addCount:h},{commit:!0,silent:!1});return f}d.forEach(function(a){initCategory(a)})},getSelectedTreeFaces:function(){var a=this,c=a.lookupReference('treeCat');function getChecked(a){if(a.get('checked')){return [a]}if(a.childNodes.length>0){var b=a.childNodes;return b.reduce(function(b,c){return b.concat(getChecked(c))},[])}else {return []}}var b=getChecked(c.getRootNode());return b.reduce(function(b,c){return a.mergeFaces(b,c.get('faces'))},{})},onTreeCheckChanged:function(b,a){function checkChange(c){c.set('checked',a);if(c.childNodes.length>0){var d=c.childNodes;d.forEach(function(d){checkChange(d)})}}checkChange(b)},onParamsChanged:function(b,a,d,c){this.recalcCats();this.recalcPoi()},onPoiValueChanged:function(e,b,d){var a=this;a.selPoiStore.removeAll(!0);if(b!==d){if(b.length>0){b.forEach(function(c){var f=e.getStore().getById(c);a.selPoiStore.add(f)})}}var c={};a.selPoiStore.each(function(f){c=a.mergeFaces(c,f.get('faces'))});a.setPoiFaces(c);a.recalcCats()},onPoiSearchLoad:function(d,e,c){var a=this,f=a.facesStore;a.selPoiStore.each(function(a){d.add(a)});if(!c){return}var b=a.getTargetFaces();function initPoi(g){var f={};if(g.get('faces')&&g.get('faces')!==null){f=g.get('faces')}var i=Object.keys(f).length;var h=0;Object.keys(f).forEach(function(i){if((!b||b[i])&&a.isFittingDistance(f[i])&&a.inCatFaces(i)){h++}});g.set({totalCount:i,addCount:h},{commit:!0,silent:!1})}e.forEach(function(a){initPoi(a)})},recalcCats:function(){var a=this,b=a.lookupReference('treeCat').getStore();var c=a.getTargetFaces();function recalcCategory(b){if(b.childNodes.length>0){var f=b.childNodes;f.forEach(function(a){recalcCategory(a)})}var e={};if(b.get('faces')&&b.get('faces')!==null){e=b.get('faces')}var d=0;Object.keys(e).forEach(function(f){if(a.isFittingDistance(e[f])&&a.inPoiFaces(f)){if(!c||c[f]){d++}}});if(d==0&&b.get('checked')){b.set('checked',!1)}b.set({addCount:d},{commit:!0,silent:!1})}if(b){b.each(function(a){recalcCategory(a)})}},recalcPoi:function(){var a=this,d=a.lookupReference('poisearch'),b=d.getStore(),e=a.selPoiStore;var c=a.getTargetFaces();e.each(function(a){if(!b.getById(a.id)){b.add(a)}});var f=b.getData().getSource()||b.getData();f.each(function(b){var d={};if(b.get('faces')&&b.get('faces')!==null){d=b.get('faces')}var e=0;Object.keys(d).forEach(function(f){if((!c||c[f])&&a.isFittingDistance(d[f])&&a.inCatFaces(f)){e++}});b.set({addCount:e},{commit:!0,silent:!1})});d.updateValue()}});Ext.define('Bigmedia.view.wizard.WizardPage',{extend:Ext.panel.Panel,xtype:'wizardpage',config:{isCompleted:!1},updateIsCompleted:function(a,b){var c=this.up('wizardform');this.fireEvent('pagechanged')}});Ext.define('Bigmedia.view.dialog.DlgSearchPoi',{extend:Ext.window.Window,controller:'dialog-dlgsearchpoi',config:{poiStore:null},width:500,height:600,modal:!0,hidden:!0,autoDestroy:!0,autoShow:!0,alwaysOnTop:!0,closeAction:'destroy',title:'Search POI',layout:'fit',bbar:{xtype:'statusbar',reference:'searchstatus',defaultText:'Select category to find POI',defaultIconCls:'default-icon',iconCls:'x-ready-icon'},items:[{xtype:'wizardform',reference:'wizard',defaults:{header:!1,xtype:'wizardpage'},items:[{xtype:'wizardpage',title:'POI categories',reference:'poicat',layout:{type:'fit'},items:[{xtype:'treepanel',store:'PoiCategoriesTree',reference:'treeCat',rootVisible:!1,columns:[{xtype:'treecolumn',text:'POI',dataIndex:'name',flex:1},{text:'Icon',dataIndex:'iconPath',width:80,renderer:function(a){return '<img src="resources/images/symbols/'+a+'"'}}],listeners:{checkchange:function(c,b){function checkChange(a){a.set('checked',b);if(a.childNodes.length>0){var d=a.childNodes;d.forEach(function(d){checkChange(d)})}}checkChange(c);var a=this;a.up('wizardpage').setIsCompleted(this.getChecked().length>0);if(a.deferId){Ext.undefer(a.deferId)}a.deferId=Ext.defer(a.up('window').getController().updateSearchCondition,1000,a.up('window').getController())}}}]},{xtype:'wizardpage',title:'POI name',layout:{type:'vbox',align:'stretch',pack:'center'},hideNextButton:!0,items:[{xtype:'container',scrollable:!0,flex:1,layout:'anchor',reference:'poinamecontainer',items:[{xtype:'textfield',plugins:{fieldreplicator:!0},fieldLabel:'Name',anchor:'0',selectOnTab:!1,name:'poiname',onReplicate:function(){},listeners:{change:function(c,a,b){if(this.deferId){Ext.undefer(this.deferId)}this.deferId=Ext.defer(this.up('window').getController().updateSearchCondition,500,this.up('window').getController())}}}]},{xtype:'button',text:'Get POIs',listeners:{click:function(a){this.up('window').getController().onGetPOIClick()}}}]}]}],listeners:{show:'onShowView'},showDialog:function(a){this.cbPoiTag=a;this.show()}});Ext.define('Bigmedia.view.dialog.DlgImportPoiFromFile',{extend:Ext.window.Window,xtype:'dlgimportpoifromfile',title:'Import POI from file',layout:'fit',modal:!0,width:440,height:200,resizable:!0,closable:!0,closeAction:'destroy',referenceHolder:!0,items:[{xtype:'form',width:400,bodyPadding:10,items:[{xtype:'filefield',name:'pois',reference:'poifile',fieldLabel:'POI file',labelWidth:50,msgTarget:'side',allowBlank:!1,anchor:'100%',buttonText:'Select file...'}],buttons:[{text:'Upload',handler:function(){var c=this.up('form').getForm(),a=this.up('window'),b=a.lookup('poifile');if(c.isValid()){a.fireEventArgs('uploadfile',[b.fileInputEl.dom.files[0]]);a.close()}}}]}]});Ext.define('Bigmedia.view.dialog.DlgImportUserPOIController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgimportuserpoi',listen:{store:{'#PoisManual':{endupdate:function(b,e){var d=this,c=d.getView().getViewModel(),b=c.getStore('storePoiManual'),a=0;b.each(function(c){if(c.get('resultLat')){a++}});c.set('readyToImport',a)}}}},init:function(a){var h=a.getViewModel(),b=h.getStore('storePoiManual'),f=a.lookup('gridpoi'),c=[];for(var d=0;d<1000;d++){c.push({})}b.beginUpdate();b.add(c);b.endUpdate();var g=a.etc['addressmix'],e=g.columns.concat(a.resultColumns);f.reconfigure(e)},onPreviewPOIClick:function(k){var i=this,d=i.getView().getViewModel(),h=d.getStore('storePoiManual'),c=d.get('inputVariant'),a=Bigmedia.Locales.currentLocale;if(a==='ukr'){a='uk'}var f='https://script.bigmedia.ua/client/geocoding/',j='&format=geojson&accept-language='+a+'&countrycodes=ua&addressdetails=1&polygon_geojson=1&polygon_threshold=0.001',e='&format=geojson&accept-language='+a+'&countrycodes=ua&addressdetails=1&polygon_geojson=1',b,g='/api/v1/geocoding/?language='+a+'&address=';h.each(function(a){b='';if(c==='addressmix'&&a.get('mixedAddress')){b=g+encodeURIComponent(a.get('mixedAddress'))+'&name='+encodeURIComponent(a.get('name'))}else {if(c==='latlon'&&a.get('lat')&&a.get('lon')){var d=a.get('lat'),h=a.get('lon');d=d.replace(/,/,'.');h=h.replace(/,/,'.');b=f+'reverse?lat='+d.toString()+'&lon='+h.toString()+e}}if(b){fetch(b).then(b=>b.json()).then(c=>{var b={};if(c.features){b.resultGeometry=c.features[0].geometry;b.resultStreet=c.features[0].properties.address.road;b.resultCity=c.features[0].properties.address.city;b.resultHousenumber=c.features[0].properties.address.house_number;if(a.get('name')){b.resultName=a.get('name')}else {var d=[];if(b.resultCity){d.push(b.resultCity)}if(b.resultStreet){d.push(b.resultStreet)}if(b.resultHousenumber&&b.resultStreet){d.push(b.resultHousenumber)}if(d.length>0){b.resultName=d.join(', ')}else {b.resultName=c.features[0].properties.display_name}}if(c.features[0].geometry){var e=turf.centroid(c.features[0].geometry);b.resultLat=e.geometry.coordinates[1];b.resultLon=e.geometry.coordinates[0];b.resultLatLon=e.geometry.coordinates.reverse().join(', ')}}if(c.results){c.results[0].address_components.forEach(function(d){if(d.types.some(function(b){return b==='street_number'})){b.resultHousenumber=d.long_name}else {if(d.types.some(function(b){return b==='route'})){b.resultStreet=d.long_name}else {if(d.types.some(function(b){return b==='locality'})){b.resultCity=d.long_name}}}});if(a.get('name')){b.resultName=a.get('name')}else {var d=[];if(b.resultCity){d.push(b.resultCity)}if(b.resultStreet){d.push(b.resultStreet)}if(b.resultHousenumber&&b.resultStreet){d.push(b.resultHousenumber)}if(d.length>0){b.resultName=d.join(', ')}else {b.resultName=c.results[0].formatted_address}}if(c.results[0].geometry){b.resultLat=c.results[0].geometry.location.lat;b.resultLon=c.results[0].geometry.location.lng;b.resultLatLon=b.resultLat+', '+b.resultLon;var e=turf.point([b.resultLon,b.resultLat]);b.resultGeometry=e}}a.set(b)})}})},refreshData:function(){var d=this,e=d.getView().getViewModel(),a=e.getStore('storePoiManual');a.beginUpdate();a.removeAll();var b=[];for(var c=0;c<1000;c++){b.push({})}a.add(b);a.endUpdate()},onClearAllClick:function(){var a=this;a.refreshData()},reconfigureGrid:function(c){if(!c.checked){return}var d=this,a=d.lookup('gridpoi'),b=d.getView(),f=b.etc[c.inputValue],g=a.getStore(),e=f.columns.concat(b.resultColumns);a.reconfigure(e)},createCommonStore:function(){var c=this,a=[];for(var b=0;b<1000;b++){a.push({})}return new Ext.data.Store({model:Bigmedia.model.PoiManual,data:a})},onImportClick:function(){var d=this,a=d.getView(),c=a.getViewModel().getStore('storePoiManual'),b=[];c.each(function(a){if(a.get('resultLat')){b.push(a)}});a.fireEventArgs('importpoi',[b]);a.close()},onShowView:function(a){},onCloseWindowClick:function(){var b=this,a=b.getView();a.close()}});Ext.define('Bigmedia.view.dialog.DlgImportUserPOI',{extend:Ext.window.Window,xtype:'dlgimportuserpoi',controller:'dialog-dlgimportuserpoi',viewModel:{stores:{storePoiManual:'PoisManual'},data:{inputVariant:'addressmix',readyToImport:0}},width:700,minWidth:400,height:500,minHeight:380,modal:!0,autoShow:!1,closeAction:'destroy',title:'Import user POI',referenceHolder:!0,layout:'vbox',padding:10,items:[{xtype:'radiogroup',padding:'0 10',fieldLabel:'  ',columns:2,vertical:!0,width:'100%',labelWidth:180,simpleValue:!0,bind:'{inputVariant}',items:[{boxLabel:' ',reference:'chbaddressmix',inputValue:'addressmix',checked:!0,listeners:{change:'reconfigureGrid'}},{boxLabel:'',reference:'chblatlon',inputValue:'latlon',listeners:{change:'reconfigureGrid'}}]},{xtype:'grid',reference:'gridpoi',width:'100%',flex:1,selModel:{type:'spreadsheet'},plugins:{clipboard:{formats:{text:{get:'getTextData',put:'putTextData'}}},cellediting:{clicksToEdit:2},selectionreplicator:!0},bind:{store:'{storePoiManual}'},listeners:{cellkeydown:function(i,g,c,e,h,d,b,f){var a=this;if(b.event.key==='Delete'){a.getSelectionModel().getSelected().eachCell(function(a){a.record.set(a.column.dataIndex,null)})}}}}],buttons:[{text:Bigmedia.Locales.dlgPoiCategoriesCancelBtnLabel,listeners:{click:'onCloseWindowClick'}},{text:'Clear All',listeners:{click:'onClearAllClick'}},'->',{text:'Preview POI',reference:'btnPreviewPOI',listeners:{click:'onPreviewPOIClick'}},{reference:'btnCreateFilter',bind:{disabled:'{!readyToImport}',text:'Import {readyToImport} POI'},listeners:{click:'onImportClick'}}],etc:{addressmix:{columns:[{text:'Mixed Address',dataIndex:'mixedAddress',width:150,editor:!0,locked:!0},{text:'Name',width:100,dataIndex:'name',editor:!0,locked:!0}]},latlon:{columns:[{text:'Lat',dataIndex:'lat',editor:!0,locked:!0},{text:'Lon',dataIndex:'lon',editor:!0,locked:!0},{text:'Name',dataIndex:'name',editor:!0,locked:!0}]}},resultColumns:[{text:'POI Name',dataIndex:'resultName',editor:!0,ignoreExport:!0},{text:'City',dataIndex:'resultCity',editor:!0,ignoreExport:!0},{text:'Street',dataIndex:'resultStreet',editor:!0,ignoreExport:!0},{text:'House No',dataIndex:'resultHousenumber',editor:!0,ignoreExport:!0},{text:'Lat/Lon',dataIndex:'resultLatLon',ignoreExport:!0}]});Ext.define('Bigmedia.view.dialog.DlgIconImage',{extend:Ext.window.Window,reference:'dlgiconimage',viewModel:{data:{theIcon:null}},config:{record:null},updateRecord:function(a){var b=this,c=b.getViewModel();c.set('theIcon',a)},title:'Custom icon style',alwaysOnTop:!0,width:300,height:380,collapsible:!1,minWidth:300,minHeight:380,layout:'fit',resizable:!0,modal:!0,referenceHolder:!0,closeAction:'destroy',items:[{xtype:'form',reference:'windowForm',modelValidation:!0,layout:{type:'vbox',align:'stretch'},border:!1,bodyPadding:10,fieldDefaults:{msgTarget:'side',labelAlign:'top',labelWidth:200,margin:'0 0 10px 0',margin:0},defaults:{margin:'0 0 10px 0',margin:0},items:[{xtype:'drag-image',maxImageWidth:120,maxImageHeight:120,imageFormat:'image/png',padding:'10px 0',flex:1},{xtype:'filefield',accept:'image/*',margin:0,emptyText:Bigmedia.Locales.detPosterSelectImageEmptyText,name:'photo-path',buttonText:'',buttonConfig:{iconCls:'x-fa fa-file-image-o'},listeners:{change:function(b,c){var a=b.fileInputEl.dom;if(a.files&&a.files[0]){b.up('form').down('drag-image').getController().loadImage(a.files[0])}}}}],buttons:[{text:Bigmedia.Locales.btnCancelText,handler:function(c){var a=c.up('window'),d=a.getViewModel(),b=d.get('theIcon');b.store.rejectChanges();a.close()}},{text:Bigmedia.Locales.btnSaveText,handler:function(f){var b=f.up('window'),e=b.lookupReference('windowForm'),d=e.getForm(),a=b.down('drag-image');if(d.isValid()){var c=b.getViewModel().get('theIcon');if(a.imageChanged&&a.dataURL){c.set('iconBlob',a.dataURL)}if(c.store){if(a.imageChanged&&a.dataURL){c.store.on('update',function(b,a){a.load()},{single:!0})}c.store.sync()}d.reset();b.hide()}}}]}],listeners:{show:function(a){var b=a.getViewModel().get('theIcon'),c=a.body,d=a.down('drag-image'),e=c.down('.drag-image-content'),f=c.down('.drag-file-label'),g=c.down('.drag-file-icon'),h=a.down('filefield');d.imageChanged=!1;d.dataURL=null;if(b.phantom){this.lookupReference('windowForm').getForm().reset()}if(b.getId()&&!b.phantom){e.setStyle('background-image','url(/api/v1/icons/'+b.getId()+'/image)');f.setStyle('visibility','hidden');g.setStyle('visibility','hidden');h.setRawValue(null)}else {e.setStyle('background-image','none');f.setStyle('visibility','visible');g.setStyle('visibility','visible')}}}});Ext.define('Bigmedia.view.dialog.DlgIconStyle',{extend:Ext.window.Window,reference:'dlgiconstyle',viewModel:{data:{iconStyle:'default',isCategoryChecked:!1,color:'0099CC'}},title:'Icon style',width:600,height:580,collapsible:!1,minWidth:300,minHeight:380,layout:{type:'vbox',align:'stretch'},resizable:!0,modal:!0,referenceHolder:!0,closeAction:'destroy',items:[{xtype:'container',flex:1,layout:{type:'hbox',align:'stretch'},items:[{xtype:'container',layout:{type:'vbox',align:'stretch'},width:220,items:[{xtype:'radiogroup',fieldLabel:'Select icon type',labelAlign:'top',padding:10,columns:1,vertical:!0,width:'100%',simpleValue:!0,bind:'{iconStyle}',items:[{boxLabel:'Default icon',reference:'chbdefault',inputValue:'default',checked:!0},{boxLabel:'Standard type icon',reference:'chbcategory',inputValue:'category'},{boxLabel:'Custom image icon',reference:'chbcustom',inputValue:'custom'}]},{xtype:'panel',title:'Preview',flex:1}]},{xtype:'container',layout:'fit',flex:1,items:[{xtype:'panel',padding:20,html:'Default circle style for icon.',flex:1,bind:{hidden:'{iconStyle !== "default"}'}},{xtype:'panel',html:'Category',flex:1,layout:'fit',bind:{hidden:'{iconStyle !== "category"}'},items:[{xtype:'treepanel',store:'PoiCategoriesTree',reference:'treecat',rootVisible:!1,selModel:{type:'rowmodel',mode:'SINGLE'},listeners:{beforecheckchange:function(b,d){var a=this,c=a.lookupViewModel();if(!b.isLeaf()){return !1}a.getChecked().forEach(function(a){a.set('checked',!1)});c.set('isCategoryChecked',a.getChecked().length>0)},checkchange:function(){var a=this,b=a.lookupViewModel();b.set('isCategoryChecked',a.getChecked().length>0)}},columns:[{xtype:'treecolumn',text:'POI',dataIndex:'name',flex:1},{text:'Icon',dataIndex:'iconPath',width:80,renderer:function(a){return '<img src="resources/images/symbols/'+a+'"'}}]}]},{xtype:'panel',html:'Custom',flex:1,bind:{hidden:'{iconStyle !== "custom"}'},layout:'fit',items:[{xtype:'grid',reference:'usericons',store:'UserIcons',allowDeselect:!0,selModel:{type:'checkboxmodel',mode:'SINGLE'},tbar:[{xtype:'button',text:'Create',handler:function(){var c=this,d=c.up('window'),a=Ext.getStore('UserIcons'),b=Ext.create('Bigmedia.view.dialog.DlgIconImage',{record:a.add({})[0]});b.show()}},'->',{xtype:'button',text:'Remove',iconCls:'x-fa fa-trash',bind:{disabled:'{!usericons.selection}'},handler:function(){var e=this,d=e.up('window'),b=d.lookup('usericons'),a=Ext.getStore('UserIcons');var c=b.getSelectionModel().getSelection();Ext.create('Ext.window.MessageBox',{closeAction:'destroy',alwaysOnTop:!0,modal:!0}).show({title:'Are you sure?',message:'Do you want to remove selected images?',buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(b){if(b==='yes'){a.remove(c);a.sync()}else {}}})}}],columns:[{text:'Icon image',dataIndex:'id',sortable:!1,width:250,renderer:function(b){var a='api/v1/icons/'+b+'/image';var c='<div class="poster-picture"></div>';if(b&&a){c='<a href="'+a+'" target="_blank"><div class="poster-picture" style="background-image: url('+a+')"></div></a>'}return c}},{xtype:'datecolumn',format:'d.m.Y H:i',text:'createdAt',dataIndex:'createdAt'}]}]}]}]},{xtype:'panel',collapsed:!1,collapsible:!0,title:'Color',layout:'fit',height:200,items:[{xtype:'colorselector',flex:1,bind:{value:'{color}'}}]}],buttons:[{text:Bigmedia.Locales.btnCancelText,handler:function(b){var a=b.up('window');a.close()}},{text:Bigmedia.Locales.btnSaveText,bind:{disabled:'{!(iconStyle === "default" || (iconStyle === "category" && isCategoryChecked) || (iconStyle === "custom" && usericons.selection))}'},handler:function(e){var a=e.up('window'),b=a.getViewModel(),d=a.lookup('treecat'),c=a.lookup('usericons');try{a.fireEventArgs('selectedstyle',[{type:b.get('iconStyle'),color:b.get('color'),categoryId:b.get('iconStyle')==='category'&&b.get('isCategoryChecked')?d.getChecked()[0].getId():null,iconId:b.get('iconStyle')==='custom'?c.getSelectionModel().getSelection()[0].getId():null}])}catch(f){console.error('error validate dialog: %o',f)}finally{a.close()}}}]});Ext.define('Bigmedia.view.grid.ManagePoiController',{extend:Ext.app.ViewController,alias:'controller.grid-managepoi',onChangeIconClick:function(){var c=this,a=c.getView(),b=Ext.create('Bigmedia.view.dialog.DlgIconStyle',{alwaysOnTop:!0,listeners:{selectedstyle:function(b){console.log([a,a.getStore()]);a.getStore().getSource().setAutoSync(!1);a.getSelectionModel().getSelection().forEach(function(a){a.set({color:b.color,iconId:b.iconId,categoryId:b.categoryId})});a.getStore().getSource().sync();a.getStore().getSource().setAutoSync(!0)}}});b.show()},onAddUserPOIClick:function(){var c=this,a=c.getView().getStore(),b=Ext.create('Bigmedia.view.dialog.DlgImportUserPOI',{alwaysOnTop:!0,listeners:{importpoi:function(c){var b=[];c.forEach(function(d){if(a.findBy(function(a){return a.get('lon')===d.get('resultLon')&&a.get('lat')===d.get('resultLat')})===-1){var e=turf.centroid(d.get('resultGeometry'));b.push({name:d.get('resultName'),geometry:new ol.geom.Point(ol.proj.fromLonLat(e.geometry.coordinates)),lat:d.get('resultLat'),lon:d.get('resultLon'),city:d.get('resultCity'),address:d.get('resultStreet'),housenumber:d.get('resultHousenumber'),centroid:Bigmedia.Vars.convertTurfToOl(e.geometry)})}});a.add(b)}}});b.show()},onAddFilePOIClick:function(){var a=this,b=Ext.create('Bigmedia.view.dialog.DlgImportPoiFromFile',{alwaysOnTop:!0,listeners:{uploadfile:a.uploadFile,scope:a}});b.show()},onSaveToCampaignClick:function(){function getQuoted(b,a){return a===null||a===undefined?'':' '+b.toString()+'="'+a.toString().replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&apos;').replace(/</g,'&lt;').replace(/>/g,'&gt;')+'"'}function objtoxml(b,a){return '<'+a+Object.keys(b).map(function(c){return getQuoted(c,b[c])}).join('')+'></'+a+'>'}var a=this,b=a.getView(),c=Ext.create('Bigmedia.view.dialog.DlgSelectCampaign',{listeners:{selectcampaign:function(c){var d=[],e=b.getSelectionModel().getSelection();e.forEach(function(b){var a=b.getData({persist:!0,serialize:!0});d.push(objtoxml(a,'poi'))});Ext.Ajax.request({url:'/api/v1/campaigns/'+encodeURIComponent(c.getId())+'/bulkAddPois',params:{pois:d.join('')},success:function(b,d){c.campPois().load();Ext.create('Ext.window.MessageBox',{closeAction:'destroy',alwaysOnTop:!0}).show({title:'Poi were saved',message:'Do you want to open the campaign?',buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(e){if(e==='yes'){a.redirectTo('campaigns/'+c.getId())}}})},failure:function(a,b){console.log('server-side failure with status code '+a.status)}})}}});c.show()},uploadFile:function(b){var d=this,a=new FileReader(),c=d.getView().getStore();a.onload=function(){try{var f=a.result;var e=CryptoJS.Rabbit.decrypt(f,'DOjev0E4sACyiauIGP493bW7ayXKC9y9sTpJQQY8');decrypted=e.toString(CryptoJS.enc.Utf8);var d=JSON.parse(decrypted);d.forEach(function(a){a.geometry=Bigmedia.Vars.readFeatureGeometry(a.geometry);a.centroid=new ol.geom.Point(ol.proj.fromLonLat([parseFloat(a.lon),parseFloat(a.lat)]))});c.add(d)}catch(g){Ext.Msg.alert('File import error','File can not be imported: wrong file format.')}finally{}};a.readAsText(b)},onSaveToFileClick:function(){var c=this,b=c.getView(),a=b.getSelectionModel().getSelection().map(function(a){return a.getData({serialize:!0,persist:!0})});var d=CryptoJS.Rabbit.encrypt(JSON.stringify(a),'DOjev0E4sACyiauIGP493bW7ayXKC9y9sTpJQQY8');Ext.exporter.File.saveAs(JSON.stringify(a),'pois.json')},onAddPOIClick:function(){var c=this,a=c.getView();var b=Ext.create('Bigmedia.view.dialog.DlgSearchPoi',{poiStore:a.lookupViewModel().get('curCamp').campPois()});b.show()},onRemovePOIClick:function(){var c=this,a=c.getView(),b=a.getSelectionModel().getSelection();var d=Ext.create('Ext.window.MessageBox',{closeAction:'destroy',alwaysOnTop:!0,modal:!0}).show({title:'Are you sure?',message:'Do you want to remove selected POI?',buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(c){if(c==='yes'){a.getStore().remove(b)}else {}}})},onAddClick:function(a,b,d){var c=a.getStore().getAt(b);this.getView().fireEventArgs('addclick',[c])},onReplaceClick:function(a,c,e){var d=a.getStore().getAt(c),b=a.lookupViewModel().get('replaceFaceId');this.getView().fireEventArgs('replaceclick',[d,b])},onRadiusChange:function(c,a){var b=this;b.getView().fireEventArgs('radiuschanged',[a])},onConfigClick:function(a){},showToast:function(a,b){Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400,minWidth:400})}});Ext.define('Bigmedia.view.dialog.DlgSelectCampaign',{extend:Ext.window.Window,xtype:'dlgselectcampaign',viewModel:{stores:{dialogcampaigns:{source:'Campaigns',grouper:{property:'timeAgo',sortProperty:'createdAt',direction:'DESC'},sorters:[{property:'createdAt',direction:'DESC'}]}},data:{selCamp:null}},config:{curCamp:null},updateCurCamp:function(a){var c=this,b=c.lookup('campgrid');b.setSelection(a)},width:700,minWidth:400,height:500,minHeight:380,modal:!0,closable:!0,title:' ',referenceHolder:!0,layout:'fit',bodyPadding:10,tbar:[{xtype:'textfield',flex:1,name:'searchCamp',emptyText:Bigmedia.Locales.campViewSearchCampEmptyText,enableKeyEvents:!0,listeners:{change:function(c,b,d){var a=this.up('window').lookup('campgrid').getStore();if(c.getValue()){a.removeFilter('filterName',!0);a.addFilter(new Ext.util.Filter({id:'filterName',filterFn:function(a){var e=new RegExp(b,'i');return e.test(a.get('name'))}}))}else {a.removeFilter('filterName')}}}}],bbar:['->',{xtype:'button',text:'Cancel',handler:function(){var b=this,a=b.up('window');a.close()}},{xtype:'button',bind:{disabled:'{!selCamp}'},text:'OK',handler:function(){var b=this,a=b.up('window'),c=a.getViewModel();a.fireEventArgs('selectcampaign',[c.get('selCamp')]);a.close()}}],items:[{xtype:'grid',reference:'campgrid',headerBorders:!1,enableColumnHide:!1,enableColumnMove:!1,stateId:'campsgrid',stateful:{storeState:!1},selModel:{type:'checkboxmodel',mode:'SINGLE'},bind:{store:'{dialogcampaigns}',selection:{bindTo:'{selCamp}'}},features:[{ftype:'grouping',collapsible:!1,enableGroupingMenu:!1,enableNoGroups:!1,groupHeaderTpl:': {name}'}],listeners:{rowdblclick:function(d,b){var c=this,a=c.up('window'),e=a.getViewModel();a.fireEventArgs('selectcampaign',[b]);a.close()}},hideHeaders:!1,columns:[{text:'',dataIndex:'name',menuDisabled:!0,flex:1,filter:{type:'list',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:' ',sortable:!0,dataIndex:'periodText',menuDisabled:!0,width:120,sorter:{property:'startDate'}},{text:'',dataIndex:'managerName',menuDisabled:!0,groupable:!1,width:100},{text:'',dataIndex:'owner',menuDisabled:!0,groupable:!1,width:100},{text:'',dataIndex:'createdAt',menuDisabled:!0,xtype:'datecolumn',format:'d.m.Y',groupable:!1,width:100},{xtype:'widgetcolumn',menuDisabled:!0,width:40,widget:{xtype:'button',width:20,iconCls:'x-fa fa-ellipsis-v grid-btn',arrowVisible:!1,menuAlign:'tr-br?',menu:{plain:!0,items:[{iconCls:'x-fa fa-edit',text:' / '},{iconCls:'x-fa fa-link',text:'  ',handler:function(b){var a=b.parentMenu.up('button').getWidgetRecord(),c=Ext.create('Bigmedia.view.det.DetPublishedCampaign',{campaignId:a.getId(),publishedId:a.get('publishedId')});c.show()}},{iconCls:'x-fa fa-copy',text:' '},{iconCls:'x-fa fa-trash-alt',text:''}]}}}]}]});Ext.define('Bigmedia.view.dialog.DlgLinkFacesToPOISettings',{extend:Ext.window.Window,xtype:'dlglinkfacestopoisettings',config:{maximumFaces:null},updateMaximumFaces:function(a){this.getViewModel().set('localmaximumfaces',a)},viewModel:{data:{localmaximumfaces:null,fTree:new Ext.data.TreeStore({root:{expanded:!0,children:[]},fields:[{name:'text'}]}),lprTree:new Ext.data.TreeStore({root:{expanded:!0,children:[]},fields:[{name:'text'}]})}},width:300,minWidth:300,height:400,minHeight:300,autoShow:!1,alwaysOnTop:!0,closeAction:'hide',modal:!0,closable:!0,collapsible:!1,hideCollapseTool:!0,maskClickAction:'hide',title:'  ',referenceHolder:!0,bodyPadding:10,layout:{type:'vbox',align:'stretch'},bbar:{items:[{xtype:'button',text:'',handler:function(a){a.up('window').close()}},{xtype:'tbspacer',flex:1},{xtype:'button',text:'',handler:function(a){a.up('window').fireEvent('savesettings',a.up('window'));a.up('window').close()}}]},items:[{width:'100%',xtype:'numberfield',bind:{value:'{localmaximumfaces}'},minValue:1,maxValue:100,step:1,fieldLabel:'   (max)'},{xtype:'tabpanel',flex:1,items:[{title:' ',layout:'fit',items:[{xtype:'treepanel',rootVisible:!1,useArrows:!0,frame:!0,bind:{store:'{lprTree}'},viewConfig:{plugins:{treeviewdragdrop:{containerScroll:!0}}}}]},{title:' ',layout:'fit',items:[{xtype:'treepanel',rootVisible:!1,checkPropagation:'down',bind:{store:'{fTree}'},viewConfig:{plugins:{treeviewdragdrop:{containerScroll:!0}}}}]}]}],listeners:{show:function(b){var a=b.getViewModel(),d=Ext.getStore('FormatsTree'),c=Ext.getStore('LinkPoiRulesTree');a.get('fTree').getRoot().removeAll();d.getRoot().eachChild(c=>{a.get('fTree').getRoot().appendChild(c.copy())});a.get('lprTree').getRoot().removeAll();c.getRoot().eachChild(c=>{a.get('lprTree').getRoot().appendChild(c.copy())});a.set('localmaximumfaces',b.getMaximumFaces())},savesettings:function(d){var a=d.getViewModel(),c=Ext.getStore('FormatsTree'),b=Ext.getStore('LinkPoiRulesTree');c.getRoot().removeAll();a.get('fTree').getRoot().eachChild(a=>{c.getRoot().appendChild(a.copy())});b.getRoot().removeAll();a.get('lprTree').getRoot().eachChild(a=>{b.getRoot().appendChild(a.copy())});d.setMaximumFaces(a.get('localmaximumfaces'))}}});Ext.define('Bigmedia.view.grid.ManagePoi',{extend:Ext.grid.Panel,controller:'grid-managepoi',xtype:'managepoi-grid',columnLines:!0,padding:0,bodyPadding:0,margin:0,referenceHolder:!0,split:!1,stateful:!0,stateId:'managePoi',viewConfig:{cartStore:null,trackOver:!1,stripeRows:!0,enableTextSelection:!1,markDirty:!0},trackMouseOver:!1,viewModel:{data:{hiddenToolBar:!1,hiddenStatusBar:!1,visiblePrice:!1}},config:{showPrice:!0,showDelete:!0},updateHideToolBar:function(a){var b=this;b.getViewModel().set('hiddenToolBar',a)},updateHideStatusBar:function(a){var b=this;b.getViewModel().set('hiddenStatusBar',a)},updateShowPrice:function(a){var b=this;b.getViewModel().set('visiblePrice',a)},updateShowDelete:function(a){var b=this;b.getViewModel().set('showDelete',a)},updateShowAddToCart:function(a){var b=this;b.getViewModel().set('showAddToCart',a)},selModel:{type:'checkboxmodel',checkOnly:!0},plugins:{cellediting:{clicksToEdit:1},gridfilters:!0},dockedItems:[{xtype:'toolbar',dock:'top',reference:'toolBar',bind:{hidden:'{!showToolbar}'},items:[{xtype:'button',iconCls:'x-fa fa-map-marker-alt',text:' ',menu:{plain:!0,items:[{reference:'addpoibtn',text:' ',listeners:{click:'onAddPOIClick'}},{reference:'addpoimanualbtn',text:'  /',listeners:{click:'onAddUserPOIClick'}},{text:' ',reference:'addpoifilebtn',listeners:{click:'onAddFilePOIClick'}}]}},{text:' ',xtype:'button',reference:'changeiconbtn',iconCls:'x-fa fa-wrench',bind:{disabled:'{!poigrid.selection}'},listeners:{click:'onChangeIconClick'}},{xtype:'splitbutton',iconCls:'x-fa fa-filter',enableToggle:!0,tooltip:' ',bind:{pressed:'{filterPoi}'},menu:{plain:!0,items:[{xtype:'container',layout:{type:'vbox',align:'stretch'},items:[{xtype:'container',layout:{type:'hbox',pack:'center',align:'middle'},items:[{xtype:'slider',fieldLabel:Bigmedia.Locales.mapViewBufferText,padding:10,width:350,bind:'{buffer}',increment:10,minValue:0,maxValue:1500},{xtype:'numberfield',width:50,minValue:0,maxValue:1500,step:100,value:500,hideTrigger:!0,bind:'{buffer}'},{xtype:'checkbox',hideLabel:!0,bind:{value:'{beforepoi}'},padding:10,boxLabel:" '"}]},{xtype:'button',iconCls:'x-fa fa-cogs',text:'   ',handler:function(b){var a=Ext.getCmp('dlglinkfacestopoisettings');a.show()}}]}]}},'->',{xtype:'button',text:'',iconCls:'x-fa fa-download',handler:'onSaveToFileClick',bind:{disabled:'{!poigrid.selection}'}},{text:'',xtype:'button',reference:'clearpoibtn',iconCls:'x-fa fa-trash',bind:{disabled:'{!poigrid.selection}'},listeners:{click:'onRemovePOIClick'}}]}],header:!1,columns:[{text:'POI name',tdCls:'tip',sortable:!0,dataIndex:'name',groupable:!1,hideable:!1,draggable:!1,width:120,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}},editor:{completeOnEnter:!0,field:{xtype:'textfield',allowBlank:!1}}},{text:'POI category',tdCls:'tip',sortable:!0,dataIndex:'category',groupable:!0,hideable:!0,draggable:!0,width:120,filter:{type:'list'}},{text:'City',tdCls:'tip',sortable:!0,dataIndex:'city',groupable:!1,hideable:!0,hidden:!1,draggable:!1,width:80,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}},editor:{completeOnEnter:!0,field:{xtype:'textfield',allowBlank:!1}}},{text:Bigmedia.Locales.colAddress,tdCls:'tip',sortable:!0,dataIndex:'address',flex:1,groupable:!1,width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}},editor:{completeOnEnter:!0,field:{xtype:'textfield',allowBlank:!1}}},{text:'House number',tdCls:'tip',sortable:!0,dataIndex:'housenumber',groupable:!1,width:100,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}},editor:{completeOnEnter:!0,field:{xtype:'textfield',allowBlank:!1}}},{text:'Icon',dataIndex:'iconPath',width:80,renderer:function(a){return a?'<img src="'+a+'">':''}}],listeners:{render:function(a){var b=a.getView();a.tip=Ext.create('Ext.tip.ToolTip',{target:b.getId(),delegate:b.itemSelector+' .tip',trackMouse:!0,listeners:{beforeshow:function(c){var d=c.target.component,b=d.getRecord(c.triggerElement);c.update(b.get('name')+' '+(b.get('city')?'('+b.get('city')+') ':'')+(b.get('address')||'')+(b.get('housenumber')?', '+b.get('housenumber'):''))}}})},destroy:function(a){delete a.tip},reconfigure:function(e,d,c,b,a){},selectionchange:function(b,c){var a=b.getStore(),d=a.getFilters()}}});Ext.define('Bigmedia.view.dialog.DlgManagePOI',{extend:Ext.window.Window,xtype:'dlgmanagepoi',config:{poiStore:null,mapView:null},viewModel:{data:{showToolbar:!0}},initComponent:function(){this.callParent();this.enableBubble(['radiuschanged','addclick','replaceclick','sourcechanged'])},updatePoiStore:function(a){this.lookup('poigrid').setStore(a)},width:700,minWidth:400,height:250,minHeight:200,autoShow:!1,alwaysOnTop:!0,closeAction:'hide',modal:!1,closable:!0,title:'Manage POI',referenceHolder:!0,layout:'fit',items:[{xtype:'managepoi-grid',reference:'poigrid',listeners:{select:function(b,a){this.up('window').fireEventArgs('recordselected',[a])}}}]});Ext.define('Bigmedia.view.map.MapView',{extend:Ext.panel.Panel,xtype:'facesmapview',controller:'map-mapview',viewModel:{data:{replaceMode:!1,toolbarPosition:'top',replaceStore:null,showKSHitmap:!1}},config:{toolbarPosition:'top',toolbarHidden:!1,geoStore:null,grid:null,gridMoitoring:null,cartStore:null,cartGrid:null,replaceStore:null,poiStore:null,faceAsCircleRes:8,actions:{},filterCart:!1,detFace:null,CityPolygonStore:null,showHeatmapBtn:!1,showKSHitmap:!1},initComponent:function(){var a=this;a.dlgReplace=Ext.create('Bigmedia.view.dialog.DlgReplaceGrid',{listeners:{hide:function(b){a.getViewModel().set('replaceMode',!1);a.getMap().getViewModel().set('replaceMode',!1);a.getMap().setReplaceFaceId(null)},recordselected:function(b){a.getMap().popupFace(b)},radiuschanged:function(b){a.getMap().setReplaceBuffer(b)},sourcechanged:function(){a.getMap().refreshReplaced()},addclick:function(b){var d=a.getMap().getReplaceFaceId();if(a.getActions().add){Ext.callback(a.getActions().add,a.getActions().scope,[b])}else {var c=a.getCartStore()||a.getCartGrid().getStore();try{if(c){if(a.getReplaceStore()){a.getReplaceStore().remove(b)}c.add(b)}}catch(e){console.log(e)}finally{a.getMap().refreshReplaced()}}},replaceclick:function(d,c){if(a.getActions().replace){Ext.callback(a.getActions().replace,a.getActions().scope,[d,c])}else {var b=a.getCartStore()||(a.getCartGrid()?a.getCartGrid().getStore():null);if(b&&b.getById(c)){b.add(d);if(!a.getReplaceStore().getById(c)){a.getReplaceStore().add(b.getById(c))}b.remove(b.getById(c))}}a.getMap().setReplaceFaceId(d.getId());a.getMap().popupFace(d)}}});a.callParent();a.dlgReplace.setMapView(this)},updateShowKSHitmap:function(a){Bigmedia.Vars.updateShowKSHitmap(a)},updateShowHeatmapBtn:function(a){this.getViewModel().set('showHeatmapBtn',a)},updateDetFace:function(a){if(!a){return}var b=this;b.getMap().setDetFace(a);a.setMap(b.getMap())},updateActions:function(a){if(this.getMap()){this.getMap().setActions(a)}},updateFilterCart:function(c){var b=this,a=b.getMap();if(a){a.setFilterCart(c)}else {b.on({afterrender:{fn:function(){a=b.getMap();a.setFilterCart(c)},single:!0,scope:b}})}},updateFaceAsCircleRes:function(c){var b=this,a=b.getMap();if(a){a.setFaceAsCircleRes(c)}else {b.on({afterrender:{fn:function(){a=b.getMap();a.setFaceAsCircleRes(c)},single:!0,scope:b}})}},deferTipShow:function(a){a.show()},listeners:{afterrender:function(){var a=this;if(!a.getMap()){return}var b=a.lookup('mapcontainer').getEl();b.on('mousemove',function(b){b=b.parentEvent.event;var g=b.target||b.srcElement,d=g.getBoundingClientRect(),e=b.clientX-d.left,f=b.clientY-d.top;a.tipCoords={x:Math.floor(e),y:Math.floor(f)};if(Bigmedia.Vars.getUser().get('orgId')!==1){return}if(a.tip&&a.getViewModel().get('showKSHitmap')){var c=a.getToolTipData(a.tipCoords)}else {return}if(!a.getViewModel().get('showKSHitmap')){a.tip.hide();return}if(a.deferTipShowTimer){Ext.undefer(a.deferTipShowTimer)}if(c.transit){a.tip.update(c);a.deferTipShowTimer=Ext.defer(a.deferTipShow,200,a,[a.tip])}else {a.tip.hide()}});if(Bigmedia.Vars.getUser().get('orgId')===1){a.tip=Ext.create('Ext.tip.ToolTip',{target:'mapcontainer',trackMouse:!0,dismissDelay:0,autoHide:!1,showDelay:500,tpl:new Ext.XTemplate('<div  style="font-size: .75rem">polygonId: {polygonId}</div>','<div style="color: RED; font-size: .80rem">Transit Used in the report: {transit}</div>'),anchor:'left',showOnTap:!0,listeners:{beforeshow:function(c,d){if(!a.getViewModel().get('showKSHitmap')){return !1}var b=a.getToolTipData();if(b.transit){c.update(b)}else {return !1}}}})}}},getToolTipData:function(g){var c=this,d=g||c.tipCoords,f=c.getMap().map;var h=d.x,i=d.y,a=f.getCoordinateFromPixel([h,i]),j=ol.proj.toLonLat(a);var b;if(!c.getViewModel().get('showKSHitmap')){return}let e=c.getMap().getLayers();e.forEach(c=>{if(c.get('name')==='CityPolygon'){let d=c.getSource().getFeatures();d.forEach(e=>{var d=e.getGeometry().getCoordinates();if(a[0]>=d[0][0][0]&&a[0]<=d[0][2][0]&&a[1]>=d[0][0][1]&&a[1]<=d[0][2][1]){b=Ext.getStore('CityPolygon').findRecord('id',e.getId()).getData()}})}});return {polygonId:b?b.idPolygon:null,transit:b?Math.ceil(b.transit):null}},refreshReplaceStore:function(){var a=this;if(a.copyReplaceStore&&a.getReplaceStore()){a.copyReplaceStore.beginUpdate();a.copyReplaceStore.removeAll();var b=[];a.getReplaceStore().each(function(c){var a=c.clone();a.setId(c.getId());a.set('inCart',!1);b.push(a)});a.copyReplaceStore.add(b);a.copyReplaceStore.endUpdate()}},updateReplaceStore:function(b,c){var a=this,d=a.getMap();if(c&&a.copyReplaceStore){c.un('refreshonmap',a.refreshReplaceStore);a.copyReplaceStore.destroy();a.copyReplaceStore=null}if(b){a.copyReplaceStore=new Ext.data.Store({model:'Face',proxy:'memory'});b.on('refreshonmap',a.refreshReplaceStore,a);a.refreshReplaceStore()}a.getViewModel().set('replaceStore',a.copyReplaceStore);a.dlgReplace.setReplaceStore(a.copyReplaceStore);if(b){d.setReplaceStore(a.copyReplaceStore)}},updateToolbarHidden:function(a){this.lookupViewModel().set('toolbarHidden',a)},updateToolbarPosition:function(a){if(a){this.lookupViewModel().set('mapToolbarOnLeft',a==='left')}this.lookupViewModel().set('toolbarPosition',a)},updateGeoStore:function(a,d){var c=this,b=c.getMap();if(a){b.setGeoStore(a)}},updateKSPolygonsStore:function(a,d){var c=this,b=c.getMap();if(a){b.setKSPolygonsStore(a);b.setKSStreetsStore(Ext.getStore('KSStreets'))}},updateCityPolygonStore:function(a,d){var c=this,b=c.getMap();if(a){b.setCityPolygonStore(a);b.setCityPolygonStore(Ext.getStore('CityPolygon'))}},updatePoiStore:function(a,d){var c=this,b=c.getMap();if(a){b.setPoiStore(a)}},updateGrid:function(a,d){var c=this,b=c.getMap();if(a){b.setGrid(a)}},updateCartStore:function(a,d){var c=this,b=c.getMap();if(a){b.setCartStore(a)}},updateCartGrid:function(a,d){var c=this,b=c.getMap();if(a){b.setCartGrid(a)}},recalcKSData:function(){},deferRefreshKSData:function(){var a=this;if(a.refreshKSDataTimer){Ext.undefer(a.refreshKSDataTimer)}a.refreshKSDataTimer=Ext.defer(a.refreshKSData,800,a)},deferRefreshOTSData:function(){var a=this;map=a.getMap();if(a.refreshKSDataTimer){Ext.undefer(a.refreshKSDataTimer)}a.refreshKSDataTimer=Ext.defer(a.recalcOTSData,800,a)},refreshKSData:function(){var h=this,g=h.lookup('treepanel');var f=g.getChecked();var a={daysOfWeek:[],hours:[],groups:[],sex:[],types:[],version:[]};var d=[],c=[],e=[];Ext.Array.each(f,function(b){if(a[b.get('group')]){a[b.get('group')].push(b.get('code'))}else {if(b.get('group')=='age'){d.push(b.get('code'))}if(b.get('group')=='incomeLevel'){c.push(b.get('code'))}if(b.get('group')=='columns'){e.push(b.get('code'))}}});d.forEach(b=>{c.forEach((c,d)=>{a.groups.push(b+' '+c)})});var b=(+new Date()).toString();fetch('/api/v1/heatmap?_dc='+b,{method:'POST',cache:'no-cache',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify(a)}).then(a=>a.json()).then(d=>{var a=Ext.getStore('KSPolygons');a.beginUpdate();Ext.suspendLayouts();a.suspendEvents();a.removeAll();try{var c=CryptoJS.Rabbit.decrypt(d,b+'yQeKcGT1ydcKvHXbedkQ');decrypted=c.toString(CryptoJS.enc.Utf8);var e=JSON.parse(decrypted);e.forEach(b=>{var c=a.getById(b.id);if(c){c.set({cnt_transit:b.full_cnt_transit,transit:b.transit,full_cnt_unique_transit:b.full_cnt_unique_transit})}else {a.add(b)}})}catch(i){console.error(i)}finally{a.resumeEvents();Ext.resumeLayouts(!0);a.endUpdate();a.fireEvent('endupdate')}});fetch('/api/v1/heatmap/streets?_dc='+b,{method:'GET',cache:'no-cache',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer'}).then(a=>a.json()).then(b=>{var a=Ext.getStore('KSStreets');a.beginUpdate();Ext.suspendLayouts();a.suspendEvents();a.removeAll();try{b.forEach(c=>{c.geometry=JSON.parse(c.geometry);a.add(c)})}catch(i){console.error(i)}finally{a.resumeEvents();Ext.resumeLayouts(!0);a.endUpdate();a.fireEvent('endupdate')}})},loadMapPolygonsData:function(b){let c=(+new Date()).toString(),d=this;var a=Ext.getStore('CityPolygon');if(a.getData().length!=0){d.recalcMapTransitData(b);return}fetch('/api/v1/heatinfoots/polygons?_dc='+c,{method:'POST',cache:'no-cache',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify(b)}).then(a=>a.json()).then(f=>{a.beginUpdate();Ext.suspendLayouts();a.suspendEvents();a.removeAll();try{var e=CryptoJS.Rabbit.decrypt(f,c+'j8Z5f644XYePh4g7sEfE');decrypted=e.toString(CryptoJS.enc.Utf8);var g=JSON.parse(decrypted);g.forEach(c=>{a.add(c)})}catch(h){console.log(h)}finally{a.resumeEvents();Ext.resumeLayouts(!0);a.endUpdate();a.fireEvent('endupdate');d.recalcMapTransitData(b)}})},recalcMapTransitData:function(a){let b=(+new Date()).toString(),c=this;fetch('/api/v1/heatinfoots/traff?_dc='+b,{method:'POST',cache:'no-cache',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify(a)}).then(b=>b.json()).then(f=>{var d=Ext.getStore('CityPolygon');d.beginUpdate();Ext.suspendLayouts();d.suspendEvents();try{var e=CryptoJS.Rabbit.decrypt(f,b+'j8Z5f644XYePh4g7sEfE');decrypted=e.toString(CryptoJS.enc.Utf8);var g=JSON.parse(decrypted);g.forEach(c=>{var b=d.getData().getByKey(id=c.id);if(b){b.set({transit:c.transit});b.set({weight:c.weight})}})}catch(h){console.log(h)}finally{d.resumeEvents();Ext.resumeLayouts(!0);d.endUpdate();d.fireEvent('endupdate');c.recalcTableOTSSData(a)}})},recalcMapsOTSSData:function(b){let a=(+new Date()).toString();fetch('/api/v1/heatinfoots/map?_dc='+a,{method:'POST',cache:'no-cache',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify(b)}).then(a=>a.json()).then(e=>{console.log('recalcMapsOTSSData',prop);var c=Ext.getStore('CityPolygon');c.beginUpdate();Ext.suspendLayouts();c.suspendEvents();c.removeAll();try{var d=CryptoJS.Rabbit.decrypt(e,a+'j8Z5f644XYePh4g7sEfE');decrypted=d.toString(CryptoJS.enc.Utf8);var f=JSON.parse(decrypted);f.forEach(a=>{c.add(a)})}catch(g){console.log(g)}finally{c.resumeEvents();Ext.resumeLayouts(!0);c.endUpdate();c.fireEvent('endupdate')}})},recalcTableOTSSData:function(b){var a=(+new Date()).toString(),c=this;map=this.getMap();fetch('/api/v1/heatinfoots?_dc='+a,{method:'POST',cache:'no-cache',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify(b)}).then(a=>a.json()).then(h=>{var e=Ext.getStore('Faces'),d=c.getViewModel().get('curCamp.proposals');if(d){d.beginUpdate();d.suspendEvents()}e.beginUpdate();Ext.suspendLayouts();e.suspendEvents();try{var g=CryptoJS.Rabbit.decrypt(h,a+'j8Z5f644XYePh4g7sEfE');decrypted=g.toString(CryptoJS.enc.Utf8);var f=JSON.parse(decrypted);if(d){d.each(function(a){var d=a.getData(),c=f.find(c=>c.idFace==d.faceId);console.log(d.faceId,c);if(typeof c!=='undefined'){a.set('ksOTS',c.ots);a.set('ksGRP',c.grp);a.set('ksTRP',c.trp);a.set('useKSData',!0)}else {a.set('ksOTS',0);a.set('ksGRP',0);a.set('ksTRP',0);a.set('useKSData',!1)}})}f.forEach(c=>{var a=e.getById(c.idFace);if(a){a.set('ksOTS',c.ots);a.set('ksGRP',c.grp);a.set('ksTRP',c.trp);a.set('useKSData',!0)}})}catch(i){console.log(i)}finally{if(d){d.resumeEvents();d.endUpdate()}e.resumeEvents();Ext.resumeLayouts(!0);e.endUpdate()}})},setNullFilter:function(){var b=[],c=this,a=Ext.getStore('Faces');b.push(new Ext.util.Filter({id:'ks_fm_city',property:'city',operator:'in',value:[Ext.getStore('Cities').getById(1).data.name,Ext.getStore('Cities').getById(4).data.name,Ext.getStore('Cities').getById(5).data.name,Ext.getStore('Cities').getById(12).data.name,Ext.getStore('Cities').getById(24).data.name]}));if(Bigmedia.Vars.getUser().get('orgId')!==1&&!(Bigmedia.Vars.getUser().get('clientType')===474&&Bigmedia.Vars.getUser().get('showHeatmap'))){b.push(new Ext.util.Filter({id:'ks_fm_supplier',property:'supplier',operator:'in',value:['BIGMEDIA']}))}a.addFilter(b);a.beginUpdate();Ext.suspendLayouts();a.suspendEvents();a.each(function(a){a.set('ksOTS',0);a.set('ksGRP',0);a.set('ksTRP',0);a.set('useKSData',!1)});a.resumeEvents();Ext.resumeLayouts(!0);a.endUpdate()},filterOTSData:function(){var a=this;a.setNullFilter();if(Ext.getStore('KSPolygons').getCount()===0&&a.getViewModel().get('showKSHitmap')){a.recalcOTSData()}},recalcOTSData:function(){var b=this,d=b.lookup('treepanel');var c=d.getChecked();var a={ages:[],groups:[],sex:[],daysOfWeek:[]};Ext.Array.each(c,function(b){if(a[b.get('group')]){a[b.get('group')].push(b.get('code'))}else {if(b.get('group')=='age'){a['ages'].push(b.get('code'))}if(b.get('group')=='incomeLevel'){a['groups'].push(b.get('code'))}}});if(a['ages'].length!=0&&a['groups'].length!=0&&a['sex'].length!=0&&a['daysOfWeek'].length!=0){b.loadMapPolygonsData(a)}else {b.setNullFilter()}},layout:'border',minWidth:300,dockedItems:[{xtype:'toolbar',dock:'top',bind:{hidden:'{toolbarHidden || mapToolbarOnLeft}'},vertical:!1,cls:'map-toolbar',overflowHandler:'scroller',items:[{xtype:'button',iconCls:'x-fa fa-mouse-pointer',toggleGroup:'maskActions',handler:'onMaskSelect',pressed:!0,tooltip:'Select mode'},{xtype:'button',iconCls:'x-fa fa-pencil-alt',toggleGroup:'maskActions',tooltip:'Draw mode',menu:{plain:!0,items:[{iconCls:'x-fa fa-map-marker',text:Bigmedia.Locales.mapViewPointText,handler:'onCreatePoint',tooltip:'Draw point'},{iconCls:'x-fa fa-route',text:Bigmedia.Locales.mapViewRouteText,handler:'onCreateLine',tooltip:'Draw line'},{iconCls:'x-fa fa-draw-polygon',text:Bigmedia.Locales.mapViewPolygonText,handler:'onCreatePolygon',tooltip:'Draw polygon'},{iconCls:'x-fa fa-circle',text:Bigmedia.Locales.mapViewCircleText,handler:'onCreateCircle',tooltip:'Draw circle'}]}},{xtype:'button',enableToggle:!0,iconCls:'x-fa fa-arrows-alt',toggleGroup:'maskActions',handler:'onMaskEdit',tooltip:'Edit mode'},{xtype:'button',iconCls:'x-fa fa-eraser',handler:'onMaskClear',hidden:!0,tooltip:'Remove all drawings'},{xtype:'splitbutton',iconCls:'x-fa fa-filter',enableToggle:!0,tooltip:'Apply filter',bind:{pressed:'{filterPoi}'},menu:{plain:!0,items:[{xtype:'container',layout:{type:'hbox',pack:'center',align:'middle'},items:[{xtype:'slider',fieldLabel:Bigmedia.Locales.mapViewBufferText,padding:10,width:350,bind:'{buffer}',increment:10,minValue:0,maxValue:1500},{xtype:'numberfield',width:50,minValue:0,maxValue:1500,step:100,value:500,hideTrigger:!0,bind:'{buffer}'},{xtype:'checkbox',hideLabel:!0,bind:{value:'{beforepoi}'},padding:10,boxLabel:" '"}]}]}},{xtype:'button',iconCls:'x-fa fa-restroom',enableToggle:!0,tooltip:'  ',hidden:!0,bind:{hidden:'{ !user.showHeatmap }',pressed:'{showKSHitmap}'},listeners:{click:function(b){var a=this.up('facesmapview');this.up('facesmapview').updateShowKSHitmap(a.getViewModel().get('showKSHitmap'));b.up('facesmapview').filterOTSData();if(!a.getViewModel().get('showKSHitmap')){Ext.getStore('Faces').filters.removeAtKey('ks_fm_city');Ext.getStore('Faces').filters.removeAtKey('ks_fm_supplier');var c={ages:[],groups:[],sex:[],daysOfWeek:[],doors:!0};b.up('facesmapview').recalcTableOTSSData(c)}}}}]},{dock:'right',xtype:'treepanel',reference:'treepanel',hidden:!0,bind:{hidden:'{!showKSHitmap}'},checkPropagation:'both',rootVisible:!1,width:160,store:'OTSParamsTree',listeners:{checkchange:function(c,b){var a=this.up('facesmapview');a.deferRefreshOTSData()}}}],items:[{xtype:'panel',reference:'mapcontainer',id:'mapcontainer',layout:'absolute',region:'center',items:[{xtype:'facesmap',reference:'facesmap',anchor:'100% 100%',minWidth:100,listeners:{replacemodechanged:function(a){var b=this.up('facesmapview');b.getViewModel().set('replaceMode',a);b.dlgReplace.setVisible(a)},overlayclosed:function(){},replaceradiuschanged:function(a){var b=this.up('facesmapview');b.dlgReplace.getViewModel().set('replaceRadius',a)},replacefaceidchanged:function(a){var b=this.up('facesmapview');b.dlgReplace.getViewModel().set('replaceFaceId',a)}}},{xtype:'googlemapsearchfield',store:'GoogleMapSearchHistory',anchor:'100%',padding:'10px 40px 0 40px',reference:'searchmap',bind:{hidden:'{!userLoggedIn}'},listeners:{clearplace:'onClearGooglePlace',selectplace:'onSelectGooglePlace',focus:'onFocusGooglePlace'}}],listeners:{render:function(a){a.down('textfield').show()}}}],getMap:function(){return this.lookupReference('facesmap')}});Ext.define('Bigmedia.view.grid.FacesModel',{extend:Ext.app.ViewModel,alias:'viewmodel.grid-faces',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.grid.FacesController',{extend:Ext.app.ViewController,alias:'controller.grid-faces',init:function(b){var a=this;a.callParent(b);Bigmedia.Vars.on('discountgroupchanged',function(c){a.initPriceColumn();a.initVisibleSupplierColumn()});Bigmedia.Vars.on('userchanged',function(c){a.initPriceColumn();a.initVisibleSupplierColumn()});a.loadMask=new Ext.LoadMask({msg:'Please wait...',target:a.getView()})},onRowClick:function(e,b){var d=this,c=d.getView(),a=c.getDetFace();if(a){a.setFace(b)}},onGridShow:function(b){var a=this;a.initPriceColumn();a.initVisibleSupplierColumn()},onGridLoad:function(b){var a=this;a.initPriceColumn();a.initVisibleSupplierColumn()},initPriceColumn:function(){var d=this,c=d.getView();var a=Bigmedia.Vars.getPromocode(),b=Bigmedia.Vars.getUser();c.getViewModel().set('visiblePrice',c.getShowPrice()||a&&a.discount||b&&b.get('id')!=='anonymous')},initVisibleSupplierColumn:function(){var c=this,b=c.getView(),a=Bigmedia.Vars.getUser();b.getViewModel().set('visibleSupplier',b.getShowPrice()||a&&a.get('id')!=='anonymous')},onGridRefresh:function(){var b=this,a=b.getView().getStore();a.load(function(){b.getView().getView().refresh();a.fireEventArgs('datachanged',[a])})},onStoreDataChanged:function(a){var c=this,b=c.getView(),a=b.getStore();if(a.isLoading()||a.bgLoading){return}},onStoreBeforeLoad:function(c){var a=this,b=a.lookup('statusGrid');if(b){b.showBusy()}if(!a.loadMask){a.loadMask=new Ext.LoadMask({msg:'Please wait...',target:a.getView(),autoShow:!0});console.log(a.loadMask)}else {a.loadMask.show()}},onStoreLoad:function(b){var a=this;a.initPriceColumn();a.hideLoadMask()},hideLoadMask:function(){if(this.loadMask){this.loadMask.hide()}},showSelectedOnlyToggle:function(g,c){var f=this,b=f.getView(),a=b.getStore();if(c){a.removeFilter('filterselected',!0);var e=b.getSelectionModel().getSelection().map(function(a){return a.id});var d=new Ext.util.Filter({property:'id',id:'filterselected',operator:'in',value:e});a.addFilter(d)}else {a.removeFilter('filterselected')}},addToCart:function(){var b=this,a=b.getView(),c=Ext.getStore('ShoppingCart'),e=a.getStore(),d=Ext.getCmp('headercart');Ext.MessageBox.show({msg:Bigmedia.Locales.facesPrepareItemsForCartMsg,progressText:Bigmedia.Locales.facesPrepareItemsProgressText,width:300,wait:{interval:200},animateTarget:d});b.timer=Ext.defer(function(){a.getSelection().forEach(function(a){a.set({inCart:!0,selected:!1},{silent:!0})});var d=a.getSelection();c.add(d);a.getSelectionModel().deselectAll();b.timer=null;Ext.MessageBox.hide();b.showToast(Bigmedia.Locales.facesPrepareItemsAdded)},500)},addFaceToCartAction:function(b,a,d){var c=b.getStore().getAt(a);this.addFaceToCart(c.getId())},cartAction:function(s,q,p,r,t,a){var o=this,n=o.getView(),e=n.lookupViewModel(),h=e.get('savePrice'),k=e.get('useEncryption'),c=e.get('curCamp'),i=Bigmedia.Vars.getCurrentRulesGroup(),d=e.get('pubCamp'),f;if(c){if(!a.get('inCart')){var b=a.copy(null);b.set({faceId:a.getId(),startDate:c.get('filterPeriod').startDate,endDate:c.get('filterPeriod').endDate,operationId:1});if(k){var m=h?Bigmedia.Vars.encryptPrice(Bigmedia.Vars.getSalt(a.get('campaignId')),a.get('finalPrice')):null;b.set('supplierPriceEnc',m);b.set('supplierPrice',null)}else {b.set('supplierPrice',h?a.get('finalPrice'):null);b.set('supplierPriceEnc',null)}if(d&&d.get('cryptoHash')){f=Bigmedia.Vars.getPubPassphrase(publishedId)}if(d&&a.get('finalPrice')&&i){var g=i.getFaceMonthClientPrice({faceId:a.getId(),netCost:a.get('finalPrice')});if(d.get('cryptoHash')){if(f){b.set('pubPriceEnc',Bigmedia.Vars.encryptPrice(f,g))}}else {b.set('pubPrice',g)}}c.proposals().add(b)}else {var j=c.proposals().findBy(b=>b.get('faceId')===a.getId());if(j>=0){var l=c.proposals().getAt(j);c.proposals().remove(l)}}a.set({inCart:!a.get('inCart'),selected:!1})}},addFaceToCart:function(f){var d=this,b=d.getView(),g=Ext.getStore('ShoppingCart'),e=b.getStore(),h=Ext.getCmp('headercart');var c=e.getById(f);c.set({inCart:!0,selected:!1},{silent:!0});var a=b.lookupViewModel().get('curCamp');if(a){a.proposals().add(c);d.showToast(Bigmedia.Locales.facesPrepareItemsAdded)}},onDoubleClick:function(f,g,c,b,h,d,i,e){var a=this.getView().findParentByType('mainviewport');if(a){a.detFace.showFace(b.getId())}},exportToExcel:function(b){Ext.MessageBox.show({msg:Bigmedia.Locales.exportExcelSavingData,progressText:Bigmedia.Locales.exportExcelProgressText,width:300,wait:{interval:200},animateTarget:b});var a=this;if(window.Worker){Bigmedia.GridExport.exportToExcel(a.getView(),'bigmedia_faces.xlsx',function(){Ext.MessageBox.hide();a.showToast(Bigmedia.Locales.exportExcelFileSaved,Bigmedia.Locales.exportExcelDone)},!1,!0)}else {a.timer=Ext.defer(function(){Bigmedia.GridExport.exportToExcel(a.getView(),'bigmedia_faces.xlsx',function(){},!1,!0);a.timer=null;Ext.MessageBox.hide();a.showToast(Bigmedia.Locales.exportExcelFileSaved,Bigmedia.Locales.exportExcelDone)},3000)}},showToast:function(a,b){Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400,minWidth:400})},destroy:function(){if(this.timer){window.clearTimeout(this.timer)}Ext.Msg.hide();this.callParent()}});Ext.define('Bigmedia.view.grid.Faces',{extend:Ext.grid.Panel,controller:'grid-faces',features:[{ftype:'rowbody',getAdditionalData:function(m,o,b,n){if(this.view.isLockedView||this.grid.ownerGrid.hideRowBody||!b.get('parsedOccupancy')){return null}var a=b.get('parsedOccupancy');var j=a.reduce(function(c,a){return c+a.actualDays},0);var l=a&&a.length>0?a.map(function(a){var c='<span class="tableRow_month" style="width: '+Math.round(a.actualDays*1000000/j)/10000+'%;">';a.periods.forEach(function(d){c+='<span class="month_line month_line-'+d.status+'" style="width: '+Math.round(d.days*1000000/a.actualDays)/10000+'%;" data-qtip="'+Ext.Date.getShortMonthName(a.month)+'`'+a.year.toString().slice(-2)+' - '+Bigmedia.Locales.occupancyTooltip[d.status]+'"></span>'});c+='</span>';return c}):[];var h='',i='';if(b.get('startDate')||b.get('endDate')){var f,d,c,e;if(b.get('startDate')&&+b.get('startDate')>=Date.UTC(a[0].year,a[0].month,a[0].day)){h='<div id="before" class="mask_opaque" style="width: calc(';f=Ext.Date.diff(new Date(Date.UTC(a[0].year,a[0].month,a[0].day)),b.get('startDate'),Ext.Date.DAY);d=0,c=0;while(c<a.length&&Date.UTC(a[c].year,a[c].month,a[c].day)<+b.get('startDate')){d++;c++}e=f/j*100;h+=e+'% - '+(d*3+3)+'px)"></div>'}var g=a.length,k=new Date(Date.UTC(a[g-1].year,a[g-1].month,0));if(b.get('endDate')&&+b.get('endDate')<+k){i='<div id="after" class="mask_opaque" style="width: calc(';f=Ext.Date.diff(b.get('endDate'),k,Ext.Date.DAY);d=0,c=g-1;while(c>=0&&Date.UTC(a[c].year,a[c].month,a[c].day)>+b.get('endDate')){d++;c--}e=Math.round(f/j*100);i+=e+'% - '+(d*3+6)+'px)"></div>'}}return {rowBody:'<div class="tableRow_calendar"><div class="tableRow_calendar_inner">'+h+l.join('')+i+'</div></div>',rowBodyCls:'rowbody_occupancy'}}}],plugins:{gridfilters:{}},xtype:'faces-grid',columnLines:!0,padding:0,bodyPadding:0,margin:0,referenceHolder:!0,split:!1,viewConfig:{trackOver:!1,enableTextSelection:!1,markDirty:!1},rowLines:!0,trackMouseOver:!1,viewModel:{data:{hiddenToolBar:!1,hiddenStatusBar:!1,visiblePrice:!1,visibleSupplier:!1}},config:{hideToolBar:!1,hideStatusBar:!1,showPrice:!1,showAddToCart:!0,showDelete:!1,mapView:null,detFace:null,showKSHitmap:!1},updateShowKSHitmap:function(a){var b=this;b.getViewModel().set('showKSHitmap',a)},updateHideToolBar:function(a){var b=this;b.getViewModel().set('hiddenToolBar',a)},updateHideStatusBar:function(a){var b=this;b.getViewModel().set('hiddenStatusBar',a)},updateShowPrice:function(a){var b=this;b.getViewModel().set('visiblePrice',a)},updateVisibleSupplier:function(a){var b=this;b.getViewModel().set('visibleSupplier',a)},updateShowDelete:function(a){var b=this;b.getViewModel().set('showDelete',a)},updateShowAddToCart:function(a){var b=this;b.getViewModel().set('showAddToCart',a)},selModel:{type:'checkboxmodel',checkOnly:!0,listeners:{focuschange:function(d,b,c){var a=d.view;if(!c){if(b){a.oldFocused=b}return}if(b){a.removeRowCls(b,'bm-row-focused')}if(a.oldFocused){a.removeRowCls(a.oldFocused,'bm-row-focused')}if(c){a.addRowCls(c,'bm-row-focused')}},selectionchange:function(a,b){}}},dockedItems:[{xtype:'toolbar',dock:'top',reference:'toolBar',bind:{hidden:'{hiddenToolBar}'},items:[{text:'Refresh',xtype:'button',reference:'refreshbtn',iconCls:'x-fa fa-refresh',listeners:{click:'onGridRefresh'}},{text:Bigmedia.Locales.gridBtnShowSelectedOnly,xtype:'button',iconCls:'x-fa fa-check',reference:'showselectedonlybtn',enableToggle:!0,disabled:!1,listeners:{toggle:'showSelectedOnlyToggle'}},'->',{text:Bigmedia.Locales.gridBtnAddToCartText,xtype:'button',reference:'addtocartbtn',iconCls:'x-fa fa-cart-plus',disabled:!0,listeners:{click:'addToCart'}},{reference:'exportbtn',xtype:'button',text:Bigmedia.Locales.gridBtnExportToExcelText,iconCls:'x-fa fa-file-excel-o',listeners:{click:'exportToExcel'}}]}],title:Bigmedia.Locales.facesTitle,header:!1,columns:[{text:Bigmedia.Locales.colFaceNum,sortable:!0,dataIndex:'num',groupable:!1,hideable:!1,draggable:!1,width:80,hidden:!0},{text:Bigmedia.Locales.colOriginalNo,sortable:!0,dataIndex:'supplierNo',groupable:!1,hideable:!0,hidden:!1,draggable:!1,width:80,locked:!1,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:Bigmedia.Locales.colSupplier,sortable:!0,dataIndex:'supplier',groupable:!1,width:120,filter:'list',hideable:!1,bind:{hidden:'{!userLoggedIn}'}},{text:Bigmedia.Locales.colCity,sortable:!0,dataIndex:'city',groupable:!1,width:120,filter:'list'},{text:Bigmedia.Locales.colCityRegion,sortable:!0,dataIndex:'cityRegion',groupable:!1,width:90,filter:'list'},{text:Bigmedia.Locales.colAddress,sortable:!0,dataIndex:'address',groupable:!1,width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}},renderer:function(a,b){b.tdAttr='data-qtip="'+Ext.htmlEncode(a)+'"';return Ext.htmlEncode(a)}},{text:Bigmedia.Locales.colCat,sortable:!0,dataIndex:'catab',groupable:!1,width:40,filter:'list'},{text:Bigmedia.Locales.colSize,sortable:!0,dataIndex:'size',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colLight,sortable:!0,dataIndex:'light',groupable:!1,width:40,filter:'list',align:'center',width:40,renderer:function(b){var a='';switch(b){case '+':a='<span class="x-fa fa-lightbulb-o" style="color: #ffd633"></span>';break;case 'off':a='<span class="x-fa fa-lightbulb-o" style="color: #8c8c8c"></span>';break;}return a}},{text:Bigmedia.Locales.colNetwork,sortable:!0,dataIndex:'network',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colZone,sortable:!0,dataIndex:'zone',groupable:!1,width:90,filter:'list'},{text:Bigmedia.Locales.colGRP,sortable:!0,dataIndex:'displayGrp',groupable:!1,width:60,filter:'number',bind:{hidden:'{showKSHitmap==true}'}},{text:Bigmedia.Locales.colOTS,sortable:!0,dataIndex:'displayOts',groupable:!1,width:60,filter:'number',bind:{hidden:'{showKSHitmap==true}'}},{text:Bigmedia.Locales.colDoorsNo,sortable:!0,dataIndex:'doors_no',groupable:!1,width:60,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:Bigmedia.Locales.colOTS,sortable:!0,dataIndex:'displayksOTS',groupable:!1,hideable:!1,width:60,filter:'number',bind:{hidden:'{showKSHitmap==false}'}},{text:Bigmedia.Locales.colTRP,sortable:!0,dataIndex:'displayksTRP',groupable:!1,hideable:!1,width:60,filter:'number',bind:{hidden:'{showKSHitmap==false}'}},{text:Bigmedia.Locales.colGRP,sortable:!0,dataIndex:'displayksGRP',groupable:!1,width:60,filter:'number',hideable:!1,bind:{hidden:'{showKSHitmap==false}'}},{text:'Price',bind:{hidden:'{!visiblePrice}'},width:60,sortable:!0,dataIndex:'price',hideable:!1,filter:'number'},{text:'Net',bind:{hidden:'{!visiblePrice}'},width:60,sortable:!0,reference:'columnprice',dataIndex:'finalPrice',hideable:!1,filter:'number'},{text:'Client Price',hidden:!0,width:60,sortable:!0,dataIndex:'clientPrice',hideable:!0,filter:'number'},{xtype:'actioncolumn',dataIndex:'inCart',width:50,hideable:!1,sortable:!1,menuDisabled:!0,bind:{hidden:'{!showAddToCart}'},isActionDisabled:function(e,c,b,d,a){return !!a.get('inCart')},tooltip:'Add to campaign',getClass:function(a){return 'x-fa fa-'+(a?'minus':'plus')},handler:'cartAction'},{xtype:'actioncolumn',width:50,bind:{hidden:'{!showDelete}'},hideable:!1,sortable:!1,menuDisabled:!0,items:[{iconCls:'x-fa fa-minus',tooltip:'Delete',handler:function(a,b,d){var c=a.getStore().getAt(b);a.ownerGrid.fireEventArgs('deleterecord',[a.ownerGrid,c])}}]}],updateStatusBar:function(){var b=this,i=b.lookupReference('statusGrid'),a=b.getStore(),h=(a.getData().getSource()||a.getData()).getCount(),g=a.getCount(),d=b.getSelectionModel().getCount();var f=b.lookupReference('exportbtn'),e=b.lookupReference('addtocartbtn'),c=b.lookupReference('showselectedonlybtn');f.setDisabled(g==0&&d==0);e.setDisabled(d==0);if(c.pressed&&(!a.getFilters()||!a.getFilters().getByKey('filterselected'))||!c.pressed&&a.getFilters()&&a.getFilters().getByKey('filterselected')){c.toggle(!1,!0)}c.setDisabled(d==0)},onStoreEndUpdate:function(){var a=this.getViewModel();if(a.get('showKSHitmap')!=Bigmedia.Vars.getShowKSHitmap()){a.set('showKSHitmap',Bigmedia.Vars.getShowKSHitmap())}this.getView().refresh()},listeners:{show:'onGridShow',viewready:'onGridLoad',itemkeydown:function(d,a,g,f,c,e){var b=d.getSelectionModel();if(c.keyCode===32&&c.position.colIdx!==0){if(b.isSelected(a)){b.deselect(a)}else {b.select(a,!0)}}},reconfigure:function(a,c,f,b,e){var d=this;if(c!==b){if(b){b.removeListener('endupdate',d.onStoreEndUpdate);b.removeListener('filterchange',a.getController().onStoreDataChanged);b.removeListener('beforeload',a.getController().onStoreBeforeLoad);b.removeListener('workerload',a.getController().onStoreLoad)}if(c){c.addListener('endupdate',d.onStoreEndUpdate,d);c.addListener('filterchange',a.getController().onStoreDataChanged,a.getController());c.addListener('beforeload',a.getController().onStoreBeforeLoad,a.getController(),{order:'before'});c.addListener('workerload',a.getController().onStoreLoad,a.getController(),{order:'after'})}var g=a.lookupReference('statusGrid');a.updateStatusBar()}},selectionchange:function(b,f){var a=b.getStore(),c=a.getFilters();if(c!==undefined&&c.getByKey('filterselected')){if(b.getSelection().length==0){a.removeFilter('filterselected')}else {a.removeFilter('filterselected',!0);var e=b.getSelection().map(function(a){return a.id});var d=new Ext.util.Filter({property:'id',id:'filterselected',operator:'in',value:e});a.addFilter(d)}}this.updateStatusBar()}}});Ext.define('Bigmedia.view.field.RefTagController',{extend:Ext.app.ViewController,alias:'controller.field-reftag',filterChanged:!1,suppressRefresh:!1,onTargetStoreDataChanged:function(){var b=this,a=b.getView();if(!a.getStore()){return}a.getPicker().refresh();if(!a.getTargetStore().isSorting&&!b.suppressRefresh){b.filterChanged=!0;if(a.getValue()&&(typeof a.getValue()==='object'&&a.getValue().length>0||typeof a.getValue()!=='object')){b.syncVisible();a.updateValue()}}b.suppressRefresh=!1},onTargetStoreAdd:function(e,c){var d=this,a=d.getView(),b=a.getStore();c.forEach(function(d){b.each(function(f){if(f.get('name')===d.get(a.getFilterField())){var b=f.get('records');if(!b){b={};f.set('records',b)}b[d.getId()]=d.getId();var g=Object.keys(b).length;f.set({totalCount:g,addCount:g})}})})},onTargetStoreRemove:function(e,c){var d=this,a=d.getView(),b=a.getStore();c.forEach(function(d){b.each(function(b){if(b.get('name')===d.get(a.getFilterField())){var f=b.get('records');delete f[d.getId()];var g=Object.keys(f).length;b.set({totalCount:g,addCount:g})}})})},onTagValueChanged:function(b,a,c){if(a!==c){var e=this;var d=b.getTargetStore();if(a&&(typeof a==='object'&&a.length>0||typeof a!=='object')){if(c&&(typeof c==='object'&&c.length>0||typeof c!=='object')){e.suppressRefresh=!0;d.removeFilter('filter'+b.getFilterField(),!0)}var f=b.getStore(),h;if(typeof a==='object'){fVal=a.map(function(d){return f.getById(d).get('name')})}else {fVal=f.getById(a).get('name')}var g=new Ext.util.Filter({property:b.getFilterField(),id:'filter'+b.getFilterField(),operator:typeof fVal==='object'?'in':'=',value:fVal});e.suppressRefresh=!0;d.addFilter(g)}else {e.suppressRefresh=!0;d.removeFilter('filter'+b.getFilterField())}}},onBeforeTagExpand:function(){var b=this,a=b.getView();if(!a.getValue()||typeof a.getValue()==='object'&&!a.getValue().length){b.initTotal()}if(b.filterChanged){b.syncAll();a.getPicker().refresh()}},initTotal:function(){var e=this,a=e.getView(),d=a.getStore(),c=a.getTargetStore(),b={};if(c.dimStore[a.getFilterField()]){d.each(function(b){if(c.dimStore[a.getFilterField()][b.get('name')]){b.set({totalCount:c.dimStore[a.getFilterField()][b.get('name')].totalCount,addCount:c.dimStore[a.getFilterField()][b.get('name')].count})}});a.initialized=!0;return}var b={};c.each(function(c){var d=b[c.get(a.getFilterField())];if(!d){b[c.get(a.getFilterField())]={}}b[c.get(a.getFilterField())][c.getId()]=c.getId()});d.each(function(d){var a={},c=0,e=d.get('name');if(b[e]){a=b[e];c=Object.keys(a).length}d.set({records:a,totalCount:c,addCount:c})});a.initialized=!0},syncVisible:function(){var g=this,a=g.getView(),b=a.getStore(),e=a.getTargetStore(),d=a.getValue(),c={};if(d.length==0){return}if(e.dimStore[a.getFilterField()]){b.each(function(b){if(e.dimStore[a.getFilterField()][b.get('name')]){b.set({totalCount:e.dimStore[a.getFilterField()][b.get('name')].totalCount,addCount:e.dimStore[a.getFilterField()][b.get('name')].count})}});a.initialized=!0;return}e.each(function(b){if(!c[b.get(a.getFilterField())]){c[b.get(a.getFilterField())]=1}else {c[b.get(a.getFilterField())]++}});if(typeof d==='object'){d.forEach(function(a){var d=b.getAt(b.findExact('name',a));if(d){d.set('addCount',c[a])}})}else {var f=b.getAt(b.findExact('name',d));if(f){f.set('addCount',c[d])}}},syncAll:function(){var f=this,b=f.getView(),a=b.getTargetStore(),e=b.getStore(),i=b.getFilterField(),g={},h={},d;if(a.dimStore[b.getFilterField()]){e.each(function(c){if(a.dimStore[b.getFilterField()][c.get('name')]){c.set({totalCount:a.dimStore[b.getFilterField()][c.get('name')].totalCount,addCount:a.dimStore[b.getFilterField()][c.get('name')].count})}});b.initialized=!0;return}if(a.getData().filtered){var c=a.getData().getFilters().clone();if(c.get('filter'+b.getFilterField())){c.removeByKey('filter'+b.getFilterField())}var d=(a.getData().getSource()||a.getData()).createFiltered(c)}else {d=a.getData()}e.each(function(b){var c=0,f=0;if(a.getData().filtered){var e=b.get('records');if(e){c=Object.keys(e).filter(function(a){return !!d.get(a)}).length}}else {c=b.get('totalCount')||0;f=b.get('totalCount')||0}b.set({addCount:c,subCount:f},{commit:!0,silent:!0})})}});Ext.define('Bigmedia.view.field.RefTagModel',{extend:Ext.app.ViewModel,alias:'viewmodel.field-reftag',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.field.RefTag',{extend:Ext.form.field.Tag,xtype:'reftag',controller:'field-reftag',config:{filterField:null,targetStore:null},updateFilterField:function(b){var a=this;if(a.getTargetStore()){a.setStore(a.getTargetStore().dimStores[a.getFilterField])}},updateTargetStore:function(b,c){var a=this;if(c){c.removeListener('dimensionschange',a.getController().onTargetStoreDataChanged)}if(b){b.addListener('dimensionschange',a.getController().onTargetStoreDataChanged,a.getController());a.setStore(b.dimStores[a.getFilterField()])}},displayField:'name',valueField:'id',filterPickList:!0,editable:!1,selectOnFocus:!1,queryMode:'local',publishes:'value',suppressRefresh:!1,forceRefresh:!1,labelTpl:new Ext.XTemplate('{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl>',{disableFormats:!0}),tipTpl:new Ext.XTemplate(Bigmedia.Locales.refTagTip,{disableFromats:!0}),tpl:new Ext.XTemplate('<ul class="x-list-plain"><tpl for=".">','<li role="option" class="x-boundlist-item <tpl if="addCount &lt;= 0">x-boundlist-item-disabled</tpl>">{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl></li>','</tpl></ul>',{disableFormats:!0}),listeners:{beforeselect:function(b,a){return a.get('addCount')>0},change:'onTagValueChanged'}});Ext.define('Bigmedia.view.field.FilterContainerTag',{extend:Ext.form.FieldContainer,xtype:'filtercontainertag',layout:'hbox',width:'100%',labelFilter:'',targetGrid:'',filterField:'',items:[{xtype:'checkboxfield',checked:!1,width:30},{xtype:'reftag',labelWidth:60,layout:'fit',flex:1}],initTagItem:function(){this.items.get(1).targetGrid=this.targetGrid;this.items.get(1).filterField=this.filterField;this.items.get(1).fieldLabel=this.labelFilter;this.items.get(0).onBefore('change',this.onCheckChange,this);this.items.get(1).onAfter('change',this.onTagChange,this)},initComponent:function(){this.callParent(arguments)},onTagChange:function(b){var a=this;this.suppressRefresh=!0;if(!!a.items.get(0).getValue()!==a.items.get(1).getValue().length>0){a.items.get(0).setValue(a.items.get(1).getValue().length>0)}},onCheckChange:function(c,b){var a=this;if(b){if(a.items.get(1).getRawValue()!==''){if(!this.suppressRefresh){a.items.get(1).fireEvent('change',a.items.get(1),a.items.get(1).getValue(),[])}this.suppressRefresh=!1}else {a.items.get(1).expand();c.setValue(!1);return !1}}else {if(!this.suppressRefresh){Ext.getCmp(a.targetGrid).getStore().removeFilter('filter'+a.filterField)}this.suppressRefresh=!1}return !0}});Ext.define('Bigmedia.view.field.StreetSearchTag',{extend:Ext.form.field.Tag,xtype:'streetsearchtag',controller:'field-streetsearchtag',store:{type:'streets'},queryParam:'sname',typeAhead:!1,hideTrigger:!0,queryMode:'remote',minChars:4,triggerOnClick:!1,filterField:'street',displayField:'name',valueField:'id',filterPickList:!0,publishes:'value',labelTpl:new Ext.XTemplate('{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl>',{disableFormats:!0}),tipTpl:new Ext.XTemplate(Bigmedia.Locales.refTagTip,{disableFormats:!0}),tpl:new Ext.XTemplate('<ul class="x-list-plain"><tpl for=".">','<li role="option" class="x-boundlist-item <tpl if="addCount &lt;= 0">x-boundlist-item-disabled</tpl>">{city}, {name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl></li>','</tpl></ul>',{disableFormats:!0}),setTargetStore:function(a){this.targetStore=a;this.getController().connectToStore(a)},listeners:{beforeselect:function(b,a){return a.get('addCount')>0},change:'onTagValueChanged'}});Ext.define('Bigmedia.view.dialog.DlgPoiCategoriesController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgpoicategories',listen:{store:{'#PoiSearch':{load:'onPoiSearchLoad'},'#PoiLinkCatFaces':{load:'onPoiCategoriesLoad'}}},init:function(b){var a=this;a.cbPoiTag=b.cbPoiTag;if(a.cbPoiTag){a.facesStore=a.cbPoiTag.targetStore;a.targetFaces=a.initTargetFaces()}a.dist=a.lookupReference('Dstn');a.before=a.lookupReference('Bfr');a.selPoiStore=new Ext.data.Store({model:'Bigmedia.model.Poi'})},clearTreeView:function(){var a=this.lookupReference('treeCat');function clearNode(b){b.set('checked',!1);if(b!==a.getRootNode()){a.collapseNode(b)}var c=b.childNodes;c.forEach(function(a){clearNode(a)})}clearNode(a.getRootNode())},clearWindow:function(){var a=this;a.clearTreeView();a.lookupReference('poisearch').setValue([]);a.dist.setValue(3000);a.before.setValue(!1);a.lookupReference('fieldsetDistBefore').collapse();a.lookupReference('fieldsetPoiTreeCat').collapse();a.lookupReference('fieldsetPoiSearch').collapse();a.poiFaces={};a.catFaces={};a.selFaces={};a.emptyFaces={total:!0,cat:!0,poi:!0};a.updateCreateButton()},updateCreateButton:function(){var a=this,c=a.lookupReference('btnCreateFilter'),d=Object.keys(a.selFaces).length,b=a.lookupReference('statusBar');if(!a.emptyFaces.total){c.enable();b.setStatus({text:Bigmedia.Locales.dlgPoiCategoriesStatusReady,iconCls:'ready-icon'});b.items.get(0).text=Ext.String.format(Bigmedia.Locales.dlgPoiCategoriesStatusReady,d)}else {c.disable();b.clearStatus();b.items.get(0).text=''}},onFieldsetTreeCatExpand:function(){var d=this,b=Ext.getStore('PoiLinkCatFaces'),a=d.lookupReference('treeCat');if(!b.isLoaded()){var c=a.getRootNode();a.expandNode(c);a.collapseAll()}},onCloseWindowClick:function(){this.getView().hide()},onShowView:function(b){var a=this,c=Ext.getStore('PoiLinkCatFaces'),d=a.lookupReference('treeCat');if(b.cbPoiTag){a.facesStore=b.cbPoiTag.targetStore;a.targetFaces=a.initTargetFaces()}a.clearWindow()},mergeFaces:function(d,c){var b={};for(var a in d){b[a]=d[a]}for(var a in c){if(!b[a]){b[a]=c[a]}else {b[a].d=Math.min(d[a].d,c[a].d);if(b[a].b==null){b[a].b=c[a].b}else {if(c[a].b!=null){b[a].b=Math.min(b[a].b,c[a].b)}}}}return b},setCatFaces:function(b){var a=this;a.catFaces=b;a.emptyFaces.cat=Object.keys(b).length==0;a.selFaces=a.mergeFaces(b,a.poiFaces);a.emptyFaces.total=a.emptyFaces.cat&&a.emptyFaces.poi;a.updateCreateButton()},setPoiFaces:function(b){var a=this;a.poiFaces=b;a.emptyFaces.poi=Object.keys(b).length==0;a.selFaces=a.mergeFaces(b,a.catFaces);a.emptyFaces.total=a.emptyFaces.cat&&a.emptyFaces.poi;a.updateCreateButton()},initTargetFaces:function(){var d=this.facesStore;if(!d.getData().filtered){return null}var a=d.getData().getFilters().clone();if(a.get('filterpoi')){a.removeByKey('filterpoi')}if(a.length>0){var b={};var c=d.getData().getSource().clone();c.setFilters(a);c.each(function(a){if(!b[a.get('id')]){b[a.get('id')]=1}else {b[a.get('id')]++}});c.destroy();return b}a.destroy();return null},getTargetFaces:function(){return this.targetFaces},genNewName:function(){var b=this,e=b.getView(),c=b.lookupReference('treeCat'),d=b.lookupReference('poisearch'),a='';function getPoiNames(){var a=[];b.selPoiStore.each(function(b){a.push(b.get('name'))});return a.join(', ')}function getCheckedNodes(a){if(a.get('checked')){return [a]}if(a.childNodes.length>0){var b=a.childNodes;return b.reduce(function(b,c){return b.concat(getCheckedNodes(c))},[])}else {return []}}function getCatNames(){var b=getCheckedNodes(c.getRootNode());var a=b.map(function(a){return a.get('name')});return a.join(', ')}if(d.getValue().length>0){a=getPoiNames()}else {if(c.getChecked().length>0){a=getCatNames()}}a=Ext.String.ellipsis(a,30);if(b.dist.getValue()<3000||b.before.getValue()){a+=' '+Bigmedia.Locales.poiFilterSetNameParamLimits}return a},genNewDescr:function(){var a=this,e=a.getView(),c=a.lookupReference('treeCat'),d=a.lookupReference('poisearch'),b='';function getPoiNames(){var b=[];a.selPoiStore.each(function(a){b.push(a.get('name'))});return b.join(', ')}function getCheckedNodes(a){if(a.get('checked')){return [a]}if(a.childNodes.length>0){var b=a.childNodes;return b.reduce(function(b,c){return b.concat(getCheckedNodes(c))},[])}else {return []}}function getCatNames(){var b=getCheckedNodes(c.getRootNode());var a=b.map(function(a){return a.get('name')});return a.join(', ')}if(d.getValue().length>0){b=Ext.String.format(Bigmedia.Locales.poiFilterSetDescrObjects,d.getValue().length)+' '+getPoiNames()}if(c.getChecked().length>0){b=Ext.String.format(Bigmedia.Locales.poiFilterSetDescrCategories,c.getChecked().length)+' '+getCatNames()}b=Ext.String.ellipsis(b,40);if(a.dist.getValue()<3000||a.before.getValue()){b+=' '+Bigmedia.Locales.poiFilterSetDescrParamLimits;if(a.dist.getValue()<3000){b+=' '+Ext.String.format(Bigmedia.Locales.poiFilterSetDescrParamDist,a.dist.getValue())}if(a.before.getValue()){b+=' '+Bigmedia.Locales.poiFilterSetDescrParamBefore}}return b},onCreateFilterClick:function(){var b=this,e=b.getView(),a=e.cbPoiTag,f=a.getStore();var c=Object.keys(b.selFaces).reduce(function(c,a){if(b.isFittingDistance(b.selFaces[a])){c[a]=a}return c},{});var g=f.add({name:b.genNewName(),descr:b.genNewDescr(),totalCount:Object.keys(c).length,addCount:Object.keys(c).length,faces:c});var d=a.getValue();tagVal=d.concat(g[0].id);a.setValue(tagVal);a.updateValue();a.fireEventArgs('change',[a,tagVal,d,!0]);e.hide()},getCurrentFaceList:function(){},isFittingDistance:function(a){var b=this,c=b.dist,d=b.before;return a.d<=c.getValue()&&(!d.getValue()||a.b!=null&&a.b<=c.getValue())},inCatFaces:function(b){var a=this;return a.emptyFaces?a.emptyFaces.cat||a.catFaces[b]:null},inPoiFaces:function(b){var a=this;return a.emptyFaces.poi||a.poiFaces[b]},isFittingFace:function(b,c){var a=this,e=a.dist,d=a.before;return (a.emptyFaces.total||a.selFaces[c])&&a.isFittingDistance(b)},onPoiCategoriesLoad:function(e,d,c){if(!c){return}var a=this,f=a.facesStore;var b=a.getTargetFaces();function initCategory(g){var f={};if(g.childNodes.length>0){var j=g.childNodes;j.forEach(function(h){var b=initCategory(h);f=a.mergeFaces(f,b)})}var i={};if(g.get('faces')&&g.get('faces')!==null){i=g.get('faces')}f=a.mergeFaces(f,i);var k=Object.keys(f).length;var h=0,l=0;Object.keys(f).forEach(function(i){if((!b||b[i])&&a.isFittingDistance(f[i])&&a.inPoiFaces(i)){h++}});g.set({totalCount:k,faces:f,addCount:h},{commit:!0,silent:!1});return f}d.forEach(function(a){initCategory(a)})},getSelectedTreeFaces:function(){var a=this,c=a.lookupReference('treeCat');function getChecked(a){if(a.get('checked')){return [a]}if(a.childNodes.length>0){var b=a.childNodes;return b.reduce(function(b,c){return b.concat(getChecked(c))},[])}else {return []}}var b=getChecked(c.getRootNode());return b.reduce(function(b,c){return a.mergeFaces(b,c.get('faces'))},{})},onTreeCheckChanged:function(b,a){function checkChange(c){c.set('checked',c.get('addCount')>0&&a);if(c.childNodes.length>0){var d=c.childNodes;d.forEach(function(d){checkChange(d)})}}checkChange(b);this.setCatFaces(this.getSelectedTreeFaces());this.recalcPoi()},onParamsChanged:function(b,a,d,c){this.recalcCats();this.recalcPoi()},onPoiValueChanged:function(e,b,d){var a=this;a.selPoiStore.removeAll(!0);if(b!==d){if(b.length>0){b.forEach(function(c){var f=e.getStore().getById(c);a.selPoiStore.add(f)})}}var c={};a.selPoiStore.each(function(f){c=a.mergeFaces(c,f.get('faces'))});a.setPoiFaces(c);a.recalcCats()},onPoiSearchLoad:function(d,e,c){var a=this,f=a.facesStore;a.selPoiStore.each(function(a){d.add(a)});if(!c){return}var b=a.getTargetFaces();function initPoi(g){var f={};if(g.get('faces')&&g.get('faces')!==null){f=g.get('faces')}var i=Object.keys(f).length;var h=0;Object.keys(f).forEach(function(i){if((!b||b[i])&&a.isFittingDistance(f[i])&&a.inCatFaces(i)){h++}});g.set({totalCount:i,addCount:h},{commit:!0,silent:!1})}e.forEach(function(a){initPoi(a)})},recalcCats:function(){var a=this,b=a.lookupReference('treeCat').getStore();var c=a.getTargetFaces();function recalcCategory(b){if(b.childNodes.length>0){var f=b.childNodes;f.forEach(function(a){recalcCategory(a)})}var e={};if(b.get('faces')&&b.get('faces')!==null){e=b.get('faces')}var d=0;Object.keys(e).forEach(function(f){if(a.isFittingDistance(e[f])&&a.inPoiFaces(f)){if(!c||c[f]){d++}}});if(d==0&&b.get('checked')){b.set('checked',!1)}b.set({addCount:d},{commit:!0,silent:!1})}if(b){b.each(function(a){recalcCategory(a)})}},recalcPoi:function(){var a=this,d=a.lookupReference('poisearch'),b=d.getStore(),e=a.selPoiStore;var c=a.getTargetFaces();e.each(function(a){if(!b.getById(a.id)){b.add(a)}});var f=b.getData().getSource()||b.getData();f.each(function(b){var d={};if(b.get('faces')&&b.get('faces')!==null){d=b.get('faces')}var e=0;Object.keys(d).forEach(function(f){if((!c||c[f])&&a.isFittingDistance(d[f])&&a.inCatFaces(f)){e++}});b.set({addCount:e},{commit:!0,silent:!1})});d.updateValue()}});Ext.define('Bigmedia.view.dialog.DlgPoiCategoriesModel',{extend:Ext.app.ViewModel,alias:'viewmodel.dialog-dlgpoicategories',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.dialog.DlgPoiCategories',{extend:Ext.window.Window,controller:'dialog-dlgpoicategories',width:400,height:500,modal:!0,hidden:!0,autoDestroy:!1,autoShow:!1,closeAction:'hide',title:Bigmedia.Locales.dlgPoiCategoriesTitle,layout:'fit',items:{xtype:'container',layout:'vbox',defaults:{collapsed:!0,padding:3,margin:3},items:[{xtype:'fieldset',reference:'fieldsetDistBefore',title:Bigmedia.Locales.dlgPoiCategoriesFieldSetParams,collapsible:!0,width:'100%',layout:'anchor',defaults:{anchor:'100%',hideEmptyLabel:!0},items:[{xtype:'slider',maxValue:1000,value:1000,increment:10,reference:'Dstn',fieldLabel:Bigmedia.Locales.dlgPoiCategoriesDistanceLabel,width:350,labelWidth:200,listeners:{changecomplete:'onParamsChanged'}},{xtype:'checkbox',reference:'Bfr',fieldLabel:Bigmedia.Locales.dlgPoiCategoriesBeforeLabel,labelWidth:200,checked:!1,listeners:{change:'onParamsChanged'}}]},{xtype:'fieldset',reference:'fieldsetPoiTreeCat',flex:1,title:Bigmedia.Locales.dlgPoiCategoriesFieldSetCat,collapsible:!0,width:'100%',layout:'fit',defaults:{hideEmptyLabel:!0},items:{xtype:'treepanel',store:new Bigmedia.store.PoiLinkCatFaces(),reference:'treeCat',rootVisible:!1,columns:[{xtype:'treecolumn',text:'POI',dataIndex:'name',flex:1},{text:'Faces',dataIndex:'addCount',width:100}],listeners:{checkchange:'onTreeCheckChanged'}},listeners:{beforeexpand:'onFieldsetTreeCatExpand'}},{xtype:'fieldset',reference:'fieldsetPoiSearch',title:Bigmedia.Locales.dlgPoiCategoriesFieldSetPoiSearch,collapsible:!0,width:'100%',layout:'anchor',defaults:{anchor:'100%',hideEmptyLabel:!0},items:{xtype:'tagfield',reference:'poisearch',layout:'fit',flex:1,queryParam:'pname',typeAhead:!1,hideTrigger:!0,queryMode:'remote',minChars:3,filterPickList:!0,triggerOnClick:!1,displayField:'name',valueField:'name',publishes:'value',labelTpl:new Ext.XTemplate('{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl>',{disableFormats:!0}),tpl:new Ext.XTemplate('<ul class="x-list-plain"><tpl for=".">','<li role="option" class="x-boundlist-item <tpl if="addCount &lt;= 0">x-boundlist-item-disabled</tpl>">{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">+{addCount}</span></tpl></li>','</tpl></ul>',{disableFormats:!0}),listeners:{beforeselect:function(b,a){return a.get('addCount')>0},change:'onPoiValueChanged'},store:{type:'poisearch'}}}]},bbar:Ext.create('Ext.ux.StatusBar',{reference:'statusBar',defaultText:Bigmedia.Locales.dlgPoiCategoriesStatusDefault,defaultIconCls:'default-icon',text:Bigmedia.Locales.dlgPoiCategoriesStatusDefault,iconCls:'default-icon',items:[' ']}),buttons:[{text:Bigmedia.Locales.dlgPoiCategoriesCancelBtnLabel,listeners:{click:'onCloseWindowClick'}},'->',{text:Bigmedia.Locales.dlgPoiCategoriesCreateBtnLabel,reference:'btnCreateFilter',listeners:{click:'onCreateFilterClick'}}],listeners:{show:'onShowView'},showDialog:function(a){this.cbPoiTag=a;this.show()}});Ext.define('Bigmedia.view.field.PoiFilterTagController',{extend:Ext.app.ViewController,alias:'controller.field-poifiltertag',filterChanged:!1,suppressRefresh:!1,listeners:{targetstoreadd:function(){this.onTargetStoreDataChanged()},targetstoreremove:function(){this.onTargetStoreDataChanged()}},newPoiFilterClick:function(){var a=this,b=a.getView().findParentByType('mainviewport');if(b){b.dlgPoiCat.showDialog(a.getView())}},connectToStore:function(a){var c=this,d=c.getView();if(this.storeRelayers){Ext.destroy(this.storeRelayers);this.storeRelayers=null;var b=!0}this.storeRelayers=this.relayEvents(a,['add','remove'],'targetstore');if(b){this.syncAll()}},onTargetStoreDataChanged:function(){var a=this,b=a.getView();if(!b.targetStore.isSorting&&!a.suppressRefresh){a.filterChanged=!0;if(b.getValue().length>0){a.syncVisible();b.updateValue()}}a.suppressRefresh=!1},onTagValueChanged:function(b,d,f,g){var c=this;if(d!==f){var e=b.targetStore,i=b.getStore();if(d.length>0){if(f.length>0){c.suppressRefresh=!0;e.removeFilter('filter'+b.filterField,!0)}var a=[];d.forEach(function(e){var c=i.getById(e);if(c&&c.get('faces')){a=a.concat(Object.keys(c.get('faces')))}});a=a.map(function(a){return +a});var h=new Ext.util.Filter({property:'id',id:'filter'+b.filterField,operator:'in',value:a});if(g){c.suppressRefresh=!1;c.forceRefresh=!0}e.addFilter(h)}else {c.suppressRefresh=!0;e.removeFilter('filter'+b.filterField)}}},onBeforeTagExpand:function(){var a=this,b=a.getView();if(a.filterChanged){a.syncAll();b.getPicker().refresh()}},initTotal:function(){var c=this,b=c.getView(),a=b.getStore();a.each(function(c){var b=c.get('faces'),a=0;if(b){a=Object.keys(b).length}c.set({totalCount:a,addCount:a},{commit:!0,silent:!1})})},syncVisible:function(){var f=this,c=f.getView(),d=c.getStore(),e=c.targetStore,b=c.getValue(),a={};if(b.length==0){return}e.each(function(c){b.forEach(function(b){var e=d.getById(b);if(!e){}else {var f=e.get('faces');if(f&&f[c.id]){if(!a[b]){a[b]=1}else {a[b]++}}}})});b.forEach(function(b){var c=d.getById(b);if(c){c.set('addCount',a[b])}})},syncAll:function(){var g=this,d=g.getView(),f=d.targetStore,b=d.getStore();if(f.getData().filtered){var a=f.getData().getFilters().clone();if(a.get('filter'+d.filterField)){a.removeByKey('filter'+d.filterField)}if(a.length==0){Ext.destroy(a);b.each(function(a){a.set('addCount',a.get('totalCount'))})}else {var e=f.getData().getSource().clone();e.setFilters(a);var c={};b.each(function(a){if(!c[a.id]){c[a.id]=0}var b=a.get('faces');if(b){Object.keys(b).forEach(function(b){if(e.find('id',b)){c[a.id]++}})}});b.each(function(a){a.set('addCount',c[a.id])});Ext.destroy(e);Ext.destroy(a)}}else {b.each(function(a){a.set({addCount:a.get('totalCount')})})}}});Ext.define('Bigmedia.view.field.PoiFilterTagModel',{extend:Ext.app.ViewModel,alias:'viewmodel.field-poifiltertag',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.field.PoiFilterTag',{extend:Ext.form.field.Tag,xtype:'poifiltertag',controller:'field-poifiltertag',store:new Ext.data.Store({model:'Bigmedia.model.PoiFilter',autoLoad:!1}),triggers:{newPoi:{cls:'newpoifilter-trigger',weight:-1,handler:function(){this.getController().newPoiFilterClick()}}},typeAhead:!1,editable:!1,selectOnFocus:!1,hideTrigger:!1,queryMode:'local',triggerOnClick:!0,filterField:'poi',displayField:'name',valueField:'id',filterPickList:!0,labelTpl:new Ext.XTemplate('{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl>',{disableFormats:!0}),tipTpl:new Ext.XTemplate('{descr} '+Bigmedia.Locales.refTagTip,{disableFormats:!0}),tpl:new Ext.XTemplate('<ul class="x-list-plain"><tpl for=".">','<li role="option" class="x-boundlist-item <tpl if="addCount &lt;= 0">x-boundlist-item-disabled</tpl>">{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl></li>','</tpl></ul>',{disableFormats:!0}),setTargetStore:function(a){this.targetStore=a;this.getController().connectToStore(a)},initComponent:function(){this.onBefore('expand','onBeforeTagExpand',this.getController());this.callParent([arguments])},listeners:{beforeselect:function(b,a){return a.get('addCount')>0},change:'onTagValueChanged'}});Ext.define('Bigmedia.view.field.MediaParamSliderController',{extend:Ext.app.ViewController,alias:'controller.field-mediaparamslidercontroller',filterChanged:!1,suppressRefresh:!1,onSliderChangeComplete:function(c,b,a,d){this.applyFilterValue(a.index)},applyFilterValue:function(d){var g=this,a=g.getView(),e=a.getTargetStore(),b=d==0?'min':'max',c=a.getValue(d);op=b==='min'?'>':'<';e.removeFilter('filter_'+b+'_'+a.getFilterField(),b==='min'&&c>a.minValue||b==='max'&&c<a.maxValue);if(b==='min'&&c>a.minValue||b==='max'&&c<a.maxValue){var f=new Ext.util.Filter({property:a.getFilterField(),id:'filter_'+b+'_'+a.getFilterField(),operator:op,value:c});e.addFilter(f)}},applyFilters:function(){this.applyFilterValue(0);this.applyFilterValue(1)}});Ext.define('Bigmedia.view.field.MediaParamSlider',{extend:Ext.slider.Multi,xtype:'refmediaparamslider',controller:'field-mediaparamslidercontroller',config:{targetStore:null,filterField:null},updateTargetStore:function(a,b){if(a){this.getController().applyFilters()}},listeners:{changecomplete:'onSliderChangeComplete'},setValues:function(a){if(a instanceof Array){this.setValue(a)}else {this.setValue([a])}},applyFilters:function(){this.getController().applyFilters()}});Ext.define('Bigmedia.view.field.SelectedFilterTagController',{extend:Ext.app.ViewController,alias:'controller.field-selectedfiltertag',filterChanged:!1,suppressRefresh:!1,listeners:{targetstoreadd:function(){console.log('targetstoreadd');this.onTargetStoreDataChanged()},targetstoreremove:function(){this.onTargetStoreDataChanged()},targetstoreupdate:function(d,c,b,a){this.onTargetStoreUpdate(d,c,b,a)},targetgridselectionchange:function(b,a){this.onTargetGridSelectionChange(b,a)}},connectToGrid:function(b){var a=this,d=a.getView();if(a.gridRelayers){Ext.destroy(a.gridRelayers);a.gridRelayers=null;var c=!0}a.initTotal();a.gridRelayers=this.relayEvents(b,['selectionchange'],'targetgrid');if(c){a.syncAll()}},connectToStore:function(b){var a=this,d=a.getView();if(a.storeRelayers){Ext.destroy(a.storeRelayers);a.storeRelayers=null;var c=!0}a.initTotal();a.storeRelayers=this.relayEvents(b,['add','remove'],'targetstore');if(c){a.syncAll()}},onTargetGridSelectionChange:function(i,l){var j=this,f=j.getView(),e=f.getStore(),b=f.targetStore,m=(b.getData().getSource()||b.getData()).getCount(),k=i.getSelection();var n={},d=0,h=0,c=0,g=0;var a=b.getData();if(a.filtered){a=a.getSource()}a.each(function(a){recSelected=a.get('selected');if(!b.getData().isItemFiltered(a)){if(recSelected){d++;h++}else {g++;c++}}else {if(recSelected){d++}else {c++}}});e.beginUpdate();e.each(function(a){if(a.getId()==0){a.set({totalCount:c,addCount:g})}else {a.set({totalCount:d,addCount:h})}});e.endUpdate();f.updateValue()},onTargetStoreUpdate:function(h,d,g,a){if(a.some(function(b){return b==='selected'})){var b=d.get('selected');var f=this,e=f.getView(),c=e.getStore();c.each(function(c){var e=c.getId()===+b?1:-1;c.set({totalCount:c.get('totalCount')+e,addCount:c.get('addCount')+e})})}},onTargetStoreDataChanged:function(){var a=this,b=a.getView();if(!b.targetStore.isSorting&&!a.suppressRefresh){a.filterChanged=!0;if(b.getValue().length>0){a.syncVisible();b.updateValue()}}a.suppressRefresh=!1},onTagValueChanged:function(b,a,e,g){var c=this;if(a!==e){var d=b.targetStore,i=b.getStore();if(a.length>0){if(e.length>0||a.length==2){c.suppressRefresh=!0;d.removeFilter('filter'+b.filterField,!0);if(a.length==2){return}}var h=a[0]==1;var f=new Ext.util.Filter({property:'selected',id:'filter'+b.filterField,operator:'=',value:h});if(g){c.suppressRefresh=!1;c.forceRefresh=!0}d.addFilter(f)}else {c.suppressRefresh=!0;d.removeFilter('filter'+b.filterField)}}},onBeforeTagExpand:function(){var a=this,b=a.getView();if(a.filterChanged){a.syncAll();b.getPicker().refresh()}},initTotal:function(){var f=this,c=f.getView(),d=c.getStore(),b=c.targetStore,a=(b.getData().getSource()||b.getData()).getCount(),e=d.getById(0);e.set({totalCount:a,addCount:a})},syncVisible:function(){var f=this,b=f.getView(),c=b.getStore(),e=b.targetStore,a=b.getValue(),d={0:0,1:0};if(a.length==0){return}e.each(function(b){a.forEach(function(f){var e=c.getById(f);var a=e.get('selected');d[+a]++})});a.forEach(function(a){var b=c.getById(a);if(b){b.set('addCount',d[a])}})},syncAll:function(){var g=this,b=g.getView(),e=b.targetStore,d=b.getStore();if(e.getData().filtered){var a=e.getData().getFilters().clone();if(a.get('filter'+b.filterField)){a.removeByKey('filter'+b.filterField)}if(a.length==0){Ext.destroy(a);d.each(function(a){a.set('addCount',a.get('totalCount'))})}else {var c=e.getData().getSource().clone();c.setFilters(a);var f={0:0,1:0};c.each(function(b){var a=b.get('selected');f[+a]++});d.each(function(a){a.set({'addCount':f[a.getId()]})});Ext.destroy(c);Ext.destroy(a)}}else {d.each(function(a){a.set({addCount:a.get('totalCount')})})}}});Ext.define('Bigmedia.view.field.SelectedFilterTagModel',{extend:Ext.app.ViewModel,alias:'viewmodel.field-selectedfiltertag',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.field.SelectedFilterTag',{extend:Ext.form.field.Tag,xtype:'selectedfiltertag',controller:'field-selectedfiltertag',store:new Ext.data.Store({fields:[{name:'id',type:'int'},{name:'name',type:'string'},{name:'totalCount',type:'int',defaultValue:'0'},{name:'addCount',type:'int',defaultValue:'0'}],data:[{id:0,name:Bigmedia.Locales.selectedFilterUnselected},{id:1,name:Bigmedia.Locales.selectedFilterSelected}]}),typeAhead:!1,editable:!1,selectOnFocus:!1,hideTrigger:!1,queryMode:'local',triggerOnClick:!0,filterField:'selected',displayField:'name',valueField:'id',filterPickList:!0,labelTpl:new Ext.XTemplate('{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl>',{disableFormats:!0}),tipTpl:new Ext.XTemplate(Bigmedia.Locales.refTagTip,{disableFormats:!0}),tpl:new Ext.XTemplate('<ul class="x-list-plain"><tpl for=".">','<li role="option" class="x-boundlist-item <tpl if="addCount &lt;= 0">x-boundlist-item-disabled</tpl>">{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl></li>','</tpl></ul>',{disableFormats:!0}),setTargetStore:function(a){this.targetStore=a;this.getController().connectToStore(a)},setTargetGrid:function(a){this.targetGrid=a;this.getController().connectToGrid(a)},initComponent:function(){this.onBefore('expand','onBeforeTagExpand',this.getController());this.callParent([arguments])},listeners:{beforeselect:function(b,a){return a.get('addCount')>0},change:'onTagValueChanged'}});Ext.define('Bigmedia.view.field.ByNumberFilterTagController',{extend:Ext.app.ViewController,alias:'controller.field-bynumberfiltertag',filterChanged:!1,suppressRefresh:!1,newFilterByNumberClick:function(){var a=this,b=a.getView().findParentByType('mainviewport');if(b){b.dlgFilterByNumber.showDialog(a.getView())}},onBeforeTagExpand:function(){var a=this,b=a.getView();if(a.filterChanged){a.syncAll();b.getPicker().refresh()}},onTargetStoreDataChanged:function(){var a=this,b=a.getView();if(!b.targetStore.isSorting&&!a.suppressRefresh){a.filterChanged=!0;if(b.getValue().length>0){a.syncVisible();b.updateValue()}}a.suppressRefresh=!1},onTagValueChanged:function(b,d,f,h){var c=this;if(d!==f){var e=b.targetStore,i=b.getStore();if(d.length>0){if(f.length>0){c.suppressRefresh=!0;e.removeFilter('filter'+b.filterField,!0)}var a=[];d.forEach(function(c){rec=i.getById(c);if(rec&&rec.get('faces')){a=a.concat(Object.keys(rec.get('faces')))}});a=a.map(function(a){return +a});var g=new Ext.util.Filter({property:'id',id:'filter'+b.filterField,operator:'in',value:a});if(h){c.suppressRefresh=!1;c.forceRefresh=!0}e.addFilter(g)}else {c.suppressRefresh=!0;e.removeFilter('filter'+b.filterField)}}},onBeforeTagExpand:function(){var a=this,b=a.getView();if(a.filterChanged){a.syncAll();b.getPicker().refresh()}},initTotal:function(){var c=this,b=c.getView(),a=b.getStore();a.each(function(c){var b=c.get('faces'),a=0;if(b){a=Object.keys(b).length}c.set({totalCount:a,addCount:a},{commit:!0,silent:!1})})},syncVisible:function(){var f=this,c=f.getView(),d=c.getStore(),e=c.targetStore,b=c.getValue(),a={};if(b.length==0){return}e.each(function(c){b.forEach(function(b){var e=d.getById(b);if(!e){}else {var f=e.get('faces');if(f&&f[c.id]){if(!a[b]){a[b]=1}else {a[b]++}}}})});b.forEach(function(b){var c=d.getById(b);if(c){c.set('addCount',a[b])}})},syncAll:function(){var g=this,d=g.getView(),f=d.targetStore,b=d.getStore();if(f.getData().filtered){var a=f.getData().getFilters().clone();if(a.get('filter'+d.filterField)){a.removeByKey('filter'+d.filterField)}if(a.length==0){Ext.destroy(a);b.each(function(a){a.set('addCount',a.get('totalCount'))})}else {var e=f.getData().getSource().clone();e.setFilters(a);var c={};b.each(function(a){if(!c[a.id]){c[a.id]=0}var b=a.get('faces');if(b){Object.keys(b).forEach(function(b){if(e.find('id',b)){c[a.id]++}})}});b.each(function(a){a.set('addCount',c[a.id])});Ext.destroy(e);Ext.destroy(a)}}else {b.each(function(a){a.set({addCount:a.get('totalCount')})})}}});Ext.define('Bigmedia.view.field.ByNumberFilterTagModel',{extend:Ext.app.ViewModel,alias:'viewmodel.field-bynumberfiltertag',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.field.ByNumberFilterTag',{extend:Ext.form.field.Tag,controller:'field-bynumberfiltertag',viewModel:{type:'field-bynumberfiltertag'},xtype:'bynumbertag',config:{filterField:null,targetStore:null},store:new Ext.data.Store({model:Bigmedia.model.ByNumber}),triggers:{newPeriod:{cls:'newpoifilter-trigger',weight:-1,handler:function(){this.getController().newFilterByNumberClick()}}},hideTrigger:!1,queryMode:'local',triggerOnClick:!0,filterField:'bynumber',displayField:'name',valueField:'id',filterPickList:!0,publishes:'value',labelTpl:new Ext.XTemplate('{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl>',{disableFormats:!0}),tipTpl:new Ext.XTemplate('{descr} '+Bigmedia.Locales.refTagTip,{disableFormats:!0}),tpl:new Ext.XTemplate('<ul class="x-list-plain"><tpl for=".">','<li role="option" class="x-boundlist-item <tpl if="addCount &lt;= 0">x-boundlist-item-disabled</tpl>">{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl></li>','</tpl></ul>',{disableFormats:!0}),updateTargetStore:function(b,c){var a=this;if(c){c.removeListener('add',a.getController().onTargetStoreDataChanged);c.removeListener('remove',a.getController().onTargetStoreDataChanged)}if(b){b.addListener('add',a.getController().onTargetStoreDataChanged,a.getController());b.addListener('remove',a.getController().onTargetStoreDataChanged,a.getController())}a.getController().initTotal()},initComponent:function(){this.onBefore('expand','onBeforeTagExpand',this.getController());this.callParent([arguments])},listeners:{beforeselect:function(b,a){return a.get('addCount')>0},change:'onTagValueChanged'}});Ext.define('Bigmedia.view.chart.CoverageController',{extend:Ext.app.ViewController,alias:'controller.coverage',onFacesStoreAdd:function(h,g){var b=this,f=b.getViewModel(),c=f.getStore('allCovers'),a={};a=g.reduce(function(b,c){var a=c.get('face')?c.get('face'):c;if(!a.get('coverages')){var d=Bigmedia.Vars.calculateFaceCoverages(a);if(!d){return b}}if(!b[a.get('id_city')]){b[a.get('id_city')]={id_city:a.get('id_city'),records:[a],coverages:a.get('coverages'),grps:a.get('grp')||0.01}}else {b[a.get('id_city')].records.push(a);b[a.get('id_city')].coverages=b[a.get('id_city')].coverages.map(function(e,f){var d;try{d=e.union(a.get('coverages')[f])}catch(i){console.error('error calculate union 001');d=e}return d});b[a.get('id_city')].grps+=a.get('grp')?a.get('grp'):0.01}return b},{});var d=Ext.getStore('CityBoundaries');Object.keys(a).forEach(function(a){var e=c.findExact('id_city',a);if(e<0){var f=d.getById(a);if(f){var b=[];Bigmedia.Vars.coverageDays.forEach(function(c,d){b.push({id_city:a,day:c,dayIndex:d,covMax:0,grps:0,coverages:null})});c.add(b)}}});c.each(function(b){if(a[b.get('id_city')]){var e=b.get('id_city');var k=d.getById(e);var c=b.get('coverages');var l=a[e].grps;if(c){try{c=c.union(a[e].coverages[b.get('dayIndex')])}catch(m){console.error('error calculate union 002')}}else {c=a[e].coverages[b.get('dayIndex')]}if(c){var i,f,j=0;try{i=jsts.operation.union.UnaryUnionOp.union(c);f=jsts.operation.overlay.OverlayOp.intersection(k.get('jsts'),i);j=turf.area(Bigmedia.Vars.convertJstsToTurf(f))}catch(n){console.error('error calculate union 003')}b.set({covMax:j*100/k.get('area'),grps:b.get('grps')+l*b.get('day'),coverages:c,coverage:f})}}});var e=b.getCitiesStore(h);b.getViewModel().set('citiesData',e);b.updateMapData()},onFacesStoreClear:function(d){var a=this,e=a.getViewModel(),c=a.getViewModel().getStore('allCovers');c.removeAll();var b=a.getCitiesStore(d);a.getViewModel().set('citiesData',b);a.updateMapData()},onFacesStoreRemove:function(g,i){var b=this,j=b.getViewModel(),d=b.getViewModel().getStore('allCovers'),e={};e=i.reduce(function(b,a){if(!b[a.get('id_city')]){b[a.get('id_city')]={id_city:a.get('id_city')}}return b},{});var c=Ext.getStore('CityBoundaries');Object.keys(e).forEach(function(a){while(d.findExact('id_city',a)>=0){d.removeAt(d.findExact('id_city',a))}});var a={};g.each(function(d){var b=d.get('face')?d.get('face'):d;if(c.getById(b.get('id_city'))&&e[b.get('id_city')]){if(!a[b.get('id_city')]){a[b.get('id_city')]={coverages:[],grps:0}}a[b.get('id_city')].grps+=b.get('grp')?b.get('grp'):0.01;Bigmedia.Vars.coverageDays.forEach(function(f,c){if(!b.get('coverages')){var e=Bigmedia.Vars.calculateFaceCoverages(b)}if(b.get('coverages')&&b.get('coverages')[c]){if(!a[b.get('id_city')].coverages[c]){a[b.get('id_city')].coverages.push(b.get('coverages')[c])}else {try{a[b.get('id_city')].coverages[c]=a[b.get('id_city')].coverages[c].union(b.get('coverages')[c])}catch(k){console.error('error calculate union 004')}}}})}});var h=[];var f=null;Object.keys(a).forEach(function(b){var d=c.getById(b);if(d){Bigmedia.Vars.coverageDays.forEach(function(k,c){if(a[b].coverages[c]){var f,e,j=0;try{f=jsts.operation.union.UnaryUnionOp.union(a[b].coverages[c]);e=jsts.operation.overlay.OverlayOp.intersection(d.get('jsts'),f);j=turf.area(Bigmedia.Vars.convertJstsToTurf(e))}catch(l){console.error('error calculate union 005')}h.push({id_city:b,dayIndex:c,day:k,covMax:j*100/d.get('area'),grps:a[b].grps*k,coverages:a[b].coverages[c],coverage:e})}});if(!f||f.get('area')<d.get('area')){f=d}}});d.add(h);var c=b.getCitiesStore(g);b.getViewModel().set('citiesData',c);b.updateMapData()},updateMapData:function(){var b=this,a=b.getView().getMapView();if(a&&a.getMap()){var d=a.getMap(),c=b.getViewModel().getStore('allCovers')}},onCityItemHighlight:function(c,a){var b=this;b.updateCity(a.record.getId(),a.record.get('value'))},updateCity:function(d,c){var a=this,b=a.lookup('chartCoverage');b.getSurface('chart').get('cityName').setAttributes({text:c});a.getViewModel().set('cityId',d)},loadData:function(i){var b=this,e=i||b.getView().getFacesStore(),d=Ext.getStore('CityBoundaries'),h=b.getViewModel().getStore('allCovers'),a={};b.updateCity(null,'');if(!e){return}e.each(function(c){var b=c.get('face')?c.get('face'):c;if(d.getById(b.get('id_city'))){if(!a[b.get('id_city')]){a[b.get('id_city')]={coverages:[],grps:0}}a[b.get('id_city')].grps+=b.get('grp')?b.get('grp'):0.01;Bigmedia.Vars.coverageDays.forEach(function(f,d){if(!b.get('coverages')){var e=Bigmedia.Vars.calculateFaceCoverages(b)}if(b.get('coverages')&&b.get('coverages')[d]){if(!a[b.get('id_city')].coverages[d]){a[b.get('id_city')].coverages.push(b.get('coverages')[d])}else {try{a[b.get('id_city')].coverages[d]=a[b.get('id_city')].coverages[d].union(b.get('coverages')[d])}catch(j){console.error('error union coverages: %o',b)}finally{}}}})}});var g=[];var c=null;Object.keys(a).forEach(function(b){var e=d.getById(b);if(e){Bigmedia.Vars.coverageDays.forEach(function(j,c){if(a[b].coverages[c]){var f,d,h=0;try{f=jsts.operation.union.UnaryUnionOp.union(a[b].coverages[c]);d=jsts.operation.overlay.OverlayOp.intersection(e.get('jsts'),f);h=turf.area(Bigmedia.Vars.convertJstsToTurf(d))}catch(k){console.error('error calculate union 006')}g.push({id_city:b,dayIndex:c,day:j,covMax:h*100/e.get('area'),grps:a[b].grps*j,coverages:a[b].coverages[c],coverage:d})}});if(!c||c.get('area')<e.get('area')){c=e}}});h.add(g);if(!b.getViewModel().get('cityId')&&c){var f=Ext.getStore('Cities').getById(c.getId());if(f){b.updateCity(f.getId(),f.get('name'))}}var d=b.getCitiesStore(e);b.getViewModel().set('citiesData',d);b.updateMapData()},onBeforeRender:function(a){var b=this},getCitiesStore:function(e){var f=this,b=Ext.create('Ext.data.ChainedStore',{source:e}),c;var a={};b.each(function(d){var b=d.get('face')?d.get('face'):d;var c=a[b.get('id_city')];if(!c){a[b.get('id_city')]={value:b.get('city'),count:0,id:b.get('id_city')};c=a[b.get('id_city')]}c.count++});c=Object.keys(a).sort().map(function(b){return a[b]});var d=Ext.create('Ext.data.Store',{fields:[{name:'id'},{name:'value'},{name:'count'},{name:'budget'}],data:c});b.destroy();return d}});Ext.define('Bigmedia.view.chart.CoverageInteractive',{extend:Ext.panel.Panel,xtype:'chartscoverageinteractive',controller:'coverage',viewModel:{type:'coverage'},config:{facesStore:null,mapView:null,hideCitiesBar:!1},layout:{type:'vbox',pack:'center',align:'stretch'},title:'Coverage',iconCls:'x-fa fa-line-chart',height:600,updateHideCitiesBar:function(a){this.getViewModel().set('hideCitiesBar',a)},updateFacesStore:function(b,c){var a=this;a.getViewModel().getStore('allCovers').removeAll();if(c){c.un('add',a.getController().onFacesStoreAdd);c.un('remove',a.getController().onFacesStoreRemove);c.un('clear',a.getController().onFacesStoreClear,a.getController());c.un('load',a.getController().loadData)}if(b){b.on('add',a.getController().onFacesStoreAdd,a.getController());b.on('remove',a.getController().onFacesStoreRemove,a.getController());b.on('clear',a.getController().onFacesStoreClear,a.getController());b.on('load',a.getController().loadData,a.getController());a.getController().loadData(b)}},updateMapView:function(a,b){if(a){this.getController().updateMapData()}},items:[{xtype:'cartesian',reference:'chartCoverage',flex:!0,width:'100%',animation:!1,bind:{store:'{coverStore}'},insetPadding:{top:55,right:20,bottom:10,left:20},legend:{type:'sprite',docked:'right'},sprites:{id:'cityName',type:'text',fillStyle:'black',text:'',textBaseline:'top',textAlign:'left',font:'bold 30px Charter, Georgia, "Droid Serif"',x:100,y:10},axes:[{type:'numeric',adjustByMajorUnit:!0,fields:['covMax','one','three','five','ten','fifteen','twenty','thirty','fourty','fifty','sixty','seventy','eighty'],position:'left',grid:!0},{type:'numeric',title:'Day',fields:'day',position:'bottom',minimum:1,majorTickSteps:29,maximum:30,style:{textPadding:0},label:{rotate:{degrees:-45}}}],series:[{type:'line',xField:'day',yField:'one',title:'1+',smooth:!0,style:{lineWidth:1},marker:{radius:4},highlight:{fillStyle:'#000',radius:5,lineWidth:2,strokeStyle:'#fff'},tooltip:{renderer:function(b,c,d){var a=c.get(d.field);a=Math.round(a*100)/100;b.setHtml('1<sup>+</sup> = '+a)}}},{type:'line',xField:'day',yField:'three',title:'3+',smooth:!0,style:{lineWidth:1},marker:{radius:4},highlight:{fillStyle:'#000',radius:5,lineWidth:2,strokeStyle:'#fff'},tooltip:{renderer:function(b,c,d){var a=c.get(d.field);a=Math.round(a*100)/100;b.setHtml('3<sup>+</sup> = '+a)}}},{type:'line',xField:'day',yField:'five',title:'5+',smooth:!0,style:{lineWidth:1},marker:{radius:4},highlight:{fillStyle:'#000',radius:5,lineWidth:2,strokeStyle:'#fff'},tooltip:{renderer:function(b,c,d){var a=c.get(d.field);a=Math.round(a*100)/100;b.setHtml('5<sup>+</sup> = '+a)}}},{type:'line',xField:'day',yField:'ten',title:'10+',smooth:!0,style:{lineWidth:1},marker:{radius:4},highlight:{fillStyle:'#000',radius:5,lineWidth:2,strokeStyle:'#fff'},tooltip:{renderer:function(b,c,d){var a=c.get(d.field);a=Math.round(a*100)/100;b.setHtml('10<sup>+</sup> = '+a)}}},{type:'line',xField:'day',yField:'fifteen',title:'15+',smooth:!0,hidden:!0,style:{lineWidth:1},marker:{radius:4},highlight:{fillStyle:'#000',radius:5,lineWidth:2,strokeStyle:'#fff'},tooltip:{renderer:function(b,c,d){var a=c.get(d.field);a=Math.round(a*100)/100;b.setHtml('15<sup>+</sup> = '+a)}}},{type:'line',xField:'day',yField:'twenty',title:'20+',smooth:!0,style:{lineWidth:1},marker:{radius:4},highlight:{fillStyle:'#000',radius:5,lineWidth:2,strokeStyle:'#fff'},tooltip:{renderer:function(b,c,d){var a=c.get(d.field);a=Math.round(a*100)/100;b.setHtml('20<sup>+</sup> = '+a)}}},{type:'line',xField:'day',yField:'thirty',title:'30+',hidden:!0,smooth:!0,style:{lineWidth:1},marker:{radius:4},highlight:{fillStyle:'#000',radius:5,lineWidth:2,strokeStyle:'#fff'},tooltip:{renderer:function(b,c,d){var a=c.get(d.field);a=Math.round(a*100)/100;b.setHtml('30<sup>+</sup> = '+a)}}},{type:'line',xField:'day',yField:'fourty',title:'40+',smooth:!0,hidden:!0,style:{lineWidth:1},marker:{radius:4},highlight:{fillStyle:'#000',radius:5,lineWidth:2,strokeStyle:'#fff'},tooltip:{renderer:function(b,c,d){var a=c.get(d.field);a=Math.round(a*100)/100;b.setHtml('40<sup>+</sup> = '+a)}}},{type:'line',xField:'day',yField:'fifty',title:'50+',smooth:!0,style:{lineWidth:1},marker:{radius:4},highlight:{fillStyle:'#000',radius:5,lineWidth:2,strokeStyle:'#fff'},tooltip:{renderer:function(b,c,d){var a=c.get(d.field);a=Math.round(a*100)/100;b.setHtml('50<sup>+</sup> = '+a)}}},{type:'line',xField:'day',yField:'sixty',title:'60+',smooth:!0,hidden:!0,style:{lineWidth:1},marker:{radius:4},highlight:{fillStyle:'#000',radius:5,lineWidth:2,strokeStyle:'#fff'},tooltip:{renderer:function(b,c,d){var a=c.get(d.field);a=Math.round(a*100)/100;b.setHtml('60<sup>+</sup> = '+a)}}},{type:'line',xField:'day',yField:'seventy',title:'70+',smooth:!0,hidden:!0,style:{lineWidth:1},marker:{radius:4},highlight:{fillStyle:'#000',radius:5,lineWidth:2,strokeStyle:'#fff'},tooltip:{renderer:function(b,c,d){var a=c.get(d.field);a=Math.round(a*100)/100;b.setHtml('70<sup>+</sup> = '+a)}}},{type:'line',xField:'day',yField:'eighty',title:'80+',smooth:!0,hidden:!0,style:{lineWidth:1},marker:{radius:4},highlight:{fillStyle:'#000',radius:5,lineWidth:2,strokeStyle:'#fff'},tooltip:{renderer:function(b,c,d){var a=c.get(d.field);a=Math.round(a*100)/100;b.setHtml('80<sup>+</sup> = '+a)}}}]},{xtype:'cartesian',colors:['#458fd2'],height:170,bind:{store:'{citiesData}',hidden:'{hideCitiesBar}'},reference:'citiesBars',interactions:['itemhighlight'],axes:[{type:'category',fields:['value'],position:'bottom'},{type:'numeric',minimum:0,fields:['count'],grid:{odd:{fill:'#e8e8e8'}},position:'left'}],series:{type:'bar',xField:'value',yField:'count',style:{minGapWidth:10},highlight:{strokeStyle:'black',fillStyle:'gold'},tooltip:{renderer:function(b,a,d){var c=a.get('value');b.setHtml(c+' - '+a.get('count')+' '+Bigmedia.Locales.dashboardProposalsTooltipSidesText)}},label:{field:'count',orientation:'horizontal',display:'insideEnd'}},platformConfig:{phone:{touchAction:{panX:!0,panY:!0}},'!phone':{interactions:{type:'panzoom',zoomOnPanGesture:!0}}},listeners:{itemhighlight:'onCityItemHighlight'}}]});Ext.define('Bigmedia.view.cart.WinCoverage',{extend:Ext.window.Window,xtype:'wincoverage',width:600,height:500,title:'Coverage',iconCls:'x-fa fa-line-chart',hidden:!0,autoShow:!1,alwaysOnTop:!0,closeAction:'hide',layout:'fit',items:[{xtype:'chartscoverageinteractive',header:!1,hideCitiesBar:!1,bind:{facesStore:'{facesStore}',mapView:'{mapView}'}}]});Ext.define('Bigmedia.view.field.UniversalSearchTag',{extend:Ext.form.field.Tag,xtype:'universalsearchtag',store:{type:'search'},cls:'searchIcon',queryParam:'q',typeAhead:!1,queryMode:'remote',minChars:3,triggerOnClick:!1,displayField:'short',valueField:'faces',filterPickList:!0,publishes:'value',labelTpl:new Ext.XTemplate('{short}',{disableFormats:!0}),tipTpl:new Ext.XTemplate(Bigmedia.Locales.refTagTip,{disableFormats:!0}),tpl:new Ext.XTemplate('<ul class="x-list-plain"><tpl for=".">','<li role="option" class="x-boundlist-item">[{type}]-{name}</li>','</tpl></ul>',{disableFormats:!0})});Ext.define('Bigmedia.view.field.DateRangeController',{extend:Ext.app.ViewController,alias:'controller.field-daterange',bindings:{onPeriodChanged:{bindTo:'{period}',deep:!0}},onPeriodChanged:function(a,b){if(b&&a.startDate&&a.endDate){this.getView().fireEventArgs('periodchanged',[a])}},onStartDateChanged:function(d,a){var b=this,c=b.getViewModel();if(a&&c.get('endDate')){}},onEndDateChanged:function(d,a){var b=this,c=b.getViewModel();if(a&&c.get('startDate')){}}});Ext.define('Bigmedia.view.field.DateRangeModel',{extend:Ext.app.ViewModel,alias:'viewmodel.field-daterange',data:{name:'Bigmedia',period:{startDate:null,endDate:null},hideDaysMode:!1,hideWholePeriodMode:!1,hideTwoMonthMode:!1}});Ext.define('Bigmedia.view.field.DateRange',{extend:Ext.panel.Panel,xtype:'customdaterange',controller:'field-daterange',viewModel:{type:'field-daterange'},config:{startDate:null,endDate:null,hideDaysMode:!1,hideWholePeriodMode:!1,hideTwoMonthMode:!1,wholePeriod:null},layout:{type:'vbox'},bodyPadding:3,items:[{xtype:'panel',layout:{type:'hbox'},items:[{xtype:'panel',header:!1,layout:{type:'vbox',align:'stretch'},items:[{xtype:'datefield',fieldLabel:'',padding:'0px 3px',bind:{value:'{period.startDate}'}},{xtype:'datepicker',reference:'startdate',bind:{hidden:'{!daysmode.checked}',value:'{period.startDate}'},listeners:{select:function(a,b){a.lookupViewModel().set('period.startDate',b)}}},{xtype:'custommonthpicker',reference:'startmonth',showButtons:!1,bind:{hidden:'{daysmode.checked}',value:'{period.startDate}'},listeners:{select:function(e,a){var c=e.lookupViewModel(),d=c.get('period.endDate');var b=new Date(a[1],a[0],1);if(+b>d){c.set('period',{startDate:b,endDate:new Date(a[1],a[0]+1,0)})}else {c.set('period.startDate',b)}},monthdblclick:function(b,d){var a=b.up('customdaterange'),c=a.getViewModel();a.fireEvent('selectperiod',a,c.get('period'))}}}]},{xtype:'panel',header:!1,bind:{hidden:'{hideTwoMonthMode}'},layout:{type:'vbox',align:'stretch'},defaults:{padding:'0px 3px'},items:[{xtype:'datefield',fieldLabel:'',padding:'0px 3px',bind:{value:'{period.endDate}'}},{xtype:'datepicker',reference:'enddate',bind:{hidden:'{!daysmode.checked}',value:'{period.endDate}'},listeners:{select:function(a,b){a.lookupViewModel().set('period.endDate',b)}}},{xtype:'custommonthpicker',reference:'endmonth',showButtons:!1,bind:{hidden:'{daysmode.checked}',value:'{period.endDate}'},listeners:{select:function(e,a){var c=e.lookupViewModel(),d=c.get('period.startDate');var b=new Date(a[1],a[0]+1,0);if(+b<d){c.set('period',{startDate:new Date(a[1],a[0],1),endDate:b})}else {c.set('period.endDate',b)}},monthdblclick:function(b,d){var a=b.up('customdaterange'),c=a.getViewModel();a.fireEvent('selectperiod',a,c.get('period'))}}}]}]},{xtype:'container',width:'100%',layout:{type:'hbox',align:'stretch'},items:[{xtype:'checkbox',boxLabel:' ',reference:'daysmode',bind:{hidden:'{hideDaysMode}'},flex:1},{xtype:'checkbox',boxLabel:' ',reference:'wholePeriod',bind:{value:'{period.wholePeriod}',hidden:'{hideWholePeriodMode}'},flex:1}]}],updateHideTwoMonthMode:function(a){this.getViewModel().set('hideTwoMonthMode',a)},updateHideWholePeriodMode:function(a){this.getViewModel().set('hideWholePeriodMode',a)},updateHideDaysMode:function(a){this.getViewModel().set('hideDaysMode',a)},updateStartDate:function(a){this.getViewModel().set('period.startDate',a)},updateEndDate:function(a){this.getViewModel().set('period.endDate',a)},updateWholePeriod:function(a){this.getViewModel().set('period.wholePeriod',a)},updatePeriod:function(a){this.getViewModel().set('period',a)}});Ext.define('Bigmedia.view.grid.ProposalsController',{extend:Ext.app.ViewController,alias:'controller.grid-proposals',init:function(b){var a=this;a.callParent(b);Bigmedia.Vars.on('discountgroupchanged',function(c){a.initPriceColumn()});Bigmedia.Vars.on('userchanged',function(c){a.initPriceColumn()})},onRemoveProposals:function(){var c=this,b=c.getView(),a=b.getStore();Ext.Msg.confirm({title:Bigmedia.Locales.campCardProposalsConfirmDeleteTitle,message:Bigmedia.Locales.campCardProposalsConfirmDeleteMessage,buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(c){if(c==='yes'){a.beginUpdate();b.getSelection().forEach(function(b){a.remove(b)});a.endUpdate();if(a.getSource()){a.getSource().sync()}}}})},onRowClick:function(e,b){var d=this,c=d.getView(),a=c.getDetFace();console.log('rowclick');if(a){a.setFace(b)}},onGridShow:function(b){var a=this;a.initPriceColumn()},onGridLoad:function(b){var a=this;a.initPriceColumn()},initPriceColumn:function(){var a=this,d=a.getView();var b=Bigmedia.Vars.getPromocode(),c=Bigmedia.Vars.getUser()},onGridRefresh:function(){var b=this,a=b.getView().getStore();a.load(function(){b.getView().getView().refresh();a.fireEventArgs('datachanged',[a])})},onStoreDataChanged:function(a){var c=this,b=c.getView(),a=b.getStore();if(a.isLoading()||a.bgLoading){return}},onStoreBeforeLoad:function(a){},onStoreLoad:function(a){this.initPriceColumn()},showSelectedOnlyToggle:function(g,c){var f=this,b=f.getView(),a=b.getStore();if(c){a.removeFilter('filterselected',!0);var e=b.getSelectionModel().getSelection().map(function(a){return a.id});var d=new Ext.util.Filter({property:'id',id:'filterselected',operator:'in',value:e});a.addFilter(d)}else {a.removeFilter('filterselected')}},addToCart:function(){var b=this,a=b.getView(),c=Ext.getStore('ShoppingCart'),e=a.getStore(),d=Ext.getCmp('headercart');Ext.MessageBox.show({msg:Bigmedia.Locales.facesPrepareItemsForCartMsg,progressText:Bigmedia.Locales.facesPrepareItemsProgressText,width:300,wait:{interval:200},animateTarget:d});b.timer=Ext.defer(function(){a.getSelection().forEach(function(a){a.set({inCart:!0,selected:!1},{silent:!0})});var d=a.getSelection();c.add(d);a.getSelectionModel().deselectAll();b.timer=null;Ext.MessageBox.hide();b.showToast(Bigmedia.Locales.facesPrepareItemsAdded)},500)},addFaceToCartAction:function(b,a,d){var c=b.getStore().getAt(a);this.addFaceToCart(c.getId())},cartAction:function(h,f,e,g,i,a){var c=this,d=c.getView();var b=d.lookupViewModel().get('curCamp');if(b){if(!a.get('inCart')){b.proposals().add(a)}else {b.proposals().remove(a)}c.showToast(Bigmedia.Locales.facesPrepareItemsAdded);a.set({inCart:!a.get('inCart'),selected:!1})}},addFaceToCart:function(f){var d=this,b=d.getView(),g=Ext.getStore('ShoppingCart'),e=b.getStore(),h=Ext.getCmp('headercart');var c=e.getById(f);c.set({inCart:!0,selected:!1},{silent:!0});var a=b.lookupViewModel().get('curCamp');if(a){a.proposals().add(c);d.showToast(Bigmedia.Locales.facesPrepareItemsAdded)}},onDoubleClick:function(f,g,c,b,h,d,i,e){var a=this.getView().findParentByType('mainviewport');if(a){a.detFace.showFace(b.getId())}},exportToExcel:function(c){Ext.MessageBox.show({msg:Bigmedia.Locales.exportExcelSavingData,progressText:Bigmedia.Locales.exportExcelProgressText,width:300,wait:{interval:200},animateTarget:c});var a=this;if(window.Worker){var b=a.getViewModel().get('curCamp').get('id');Bigmedia.GridExport.exportToExcel(a.getView(),'bigmedia_campaign_'+b+'.xlsx',function(){Ext.MessageBox.hide();a.showToast(Bigmedia.Locales.exportExcelFileSaved,Bigmedia.Locales.exportExcelDone)},!1,!0)}else {a.timer=Ext.defer(function(){Bigmedia.GridExport.exportToExcel(a.getView(),'bigmedia_faces.xlsx',function(){},!1,!0);a.timer=null;Ext.MessageBox.hide();a.showToast(Bigmedia.Locales.exportExcelFileSaved,Bigmedia.Locales.exportExcelDone)},3000)}},showToast:function(a,b){Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400,minWidth:400})},destroy:function(){if(this.timer){window.clearTimeout(this.timer)}Ext.Msg.hide();this.callParent()}});Ext.define('Bigmedia.view.grid.Proposals',{extend:Ext.grid.Panel,controller:'grid-proposals',config:{hideToolBar:!1,showAddToCart:!0,showDelete:!1,mapView:null},header:!1,xtype:'proposals-grid',hideRowBody:!0,selModel:{type:'checkboxmodel',checkOnly:!0,listeners:{focuschange:function(d,b,c){var a=d.view;if(!c){if(b){a.oldFocused=b}return}if(b){a.removeRowCls(b,'bm-row-focused')}if(a.oldFocused){a.removeRowCls(a.oldFocused,'bm-row-focused')}if(c){a.addRowCls(c,'bm-row-focused')}}}},dockedItems:[{xtype:'toolbar',dock:'top',items:['->',{reference:'removebtn',xtype:'button',text:Bigmedia.Locales.gridBtnRemoveSidesText,bind:{disabled:'{!campProposals.selection}'},iconCls:'x-fa fa-trash',listeners:{click:'onRemoveProposals'}},{reference:'showoccupationbtn',xtype:'button',text:Bigmedia.Locales.gridBtnShowOccupancyText,enableToggle:!0,handler:function(){var a=this.up('grid');a.hideRowBody=!this.pressed;a.getView().refresh()}}]}],plugins:{gridfilters:!0,cellediting:{clicksToEdit:1}},features:[{ftype:'rowbody',getAdditionalData:function(s,u,a,t){if(this.view.isLockedView||this.grid.ownerGrid.hideRowBody||!a.get('parsedOccupancy')){return null}else {}var b=a.get('parsedOccupancy');if(!b){return null}var h=b.reduce(function(c,b){return c+b.actualDays},0);var p=b.map(function(b){var c='<span class="tableRow_month" style="width: '+Math.round(b.actualDays*1000000/h)/10000+'%;">';b.periods.forEach(function(d){c+='<span class="month_line month_line-'+d.status+'" style="width: '+Math.round(d.days*1000000/b.actualDays)/10000+'%;" data-qtip="'+Bigmedia.Locales.occupancyTooltip[d.status]+'"></span>'});c+='<div class="date_name">'+Ext.Date.getShortMonthName(b.month)+'`'+b.year.toString().slice(-2)+'</div>';c+='</span>';return c});var m='',q='';if(a.get('startDate')&&a.get('endDate')){var f,i,c,j,o,r,g,d=Date.UTC(b[0].year,b[0].month,b[0].day),l=b.length,e=Date.UTC(b[l-1].year,b[l-1].month+1,0);if(a.get('startDate')&&+a.get('startDate')>=d&&+a.get('startDate')<=e){f=Ext.Date.diff(new Date(d),a.get('startDate'),Ext.Date.DAY);i=0,c=0;while(c<b.length&&Date.UTC(b[c].year,b[c].month,b[c].day)<+a.get('startDate')){i++;c++}g=Math.round(f*1000000/h)/10000;o='calc('+g+'% + 6px);'}if(+a.get('endDate')<=e&&+a.get('endDate')>=d){var n=+a.get('endDate')<=e?a.get('endDate'):new Date(e),k=+a.get('startDate')>=d?a.get('startDate'):new Date(d);f=Ext.Date.diff(k,n,Ext.Date.DAY)+1;i=Ext.Date.diff(k,n,Ext.Date.MONTH);g=Math.round(f*1000000/h)/10000;j='calc('+g+'%);'}if(j){m='<div id="before" class="mask_opaque" style="left: '+(o||'0px;')+'width: '+j+'"></div>'}}return {rowBody:'<div class="tableRow_calendar"><div class="tableRow_calendar_inner">'+m+p.join('')+'</div></div>',rowBodyCls:'rowbody_occupancy'}}}],columns:[{header:Bigmedia.Locales.colSideNumber,dataIndex:'supplierNo',sortable:!0,groupable:!1,hideable:!0,draggable:!1,width:80,hidden:!1},{header:Bigmedia.Locales.colDoorsNo,dataIndex:'doorsNo',sortable:!0,groupable:!1,hideable:!0,draggable:!1,width:80},{text:'Supplier',sortable:!0,dataIndex:'supplier',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colCity,sortable:!0,dataIndex:'city',groupable:!1,width:120,filter:'list'},{text:Bigmedia.Locales.colAddress,sortable:!0,dataIndex:'address',groupable:!1,width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:Bigmedia.Locales.colStartDate,sortable:!0,dataIndex:'startDate',groupable:!1,xtype:'datecolumn',format:'d.m.Y',width:100},{text:Bigmedia.Locales.colEndDate,sortable:!0,dataIndex:'endDate',xtype:'datecolumn',format:'d.m.Y',groupable:!1,width:100},{text:Bigmedia.Locales.colProposalStatus,sortable:!0,dataIndex:'operationName',groupable:!0,width:100},{text:Bigmedia.Locales.colCat,sortable:!0,dataIndex:'catab',groupable:!1,width:40,filter:'list'},{text:Bigmedia.Locales.colSize,sortable:!0,dataIndex:'size',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colLight,sortable:!0,dataIndex:'light',groupable:!1,align:'center',width:40,filter:'list',width:40,renderer:function(b){var a='';switch(b){case '+':a='<span class="x-fa fa-lightbulb-o" style="color: #ffd633"></span>';break;case 'off':a='<span class="x-fa fa-lightbulb-o" style="color: #8c8c8c"></span>';break;}return a}},{text:Bigmedia.Locales.colNetwork,sortable:!0,dataIndex:'sidetype',groupable:!1,width:90,filter:'list',hidden:!1},{text:Bigmedia.Locales.colZone,sortable:!0,dataIndex:'zone',groupable:!1,width:90,filter:'list',hidden:!0},{text:Bigmedia.Locales.colGRP,sortable:!0,dataIndex:'displayGrp',groupable:!1,width:60,filter:'number'},{text:Bigmedia.Locales.colOTS,sortable:!0,dataIndex:'displayOts',groupable:!1,width:60,filter:'number'},{header:'Vendor price',dataIndex:'netCost',width:70,align:'right',hideable:!1,editor:{xtype:'numberfield',allowBlank:!0,minValue:0,maxValue:100000},renderer:function(a,b,c){if(c.get('supplierPriceEnc')&&!a){b.align='center';return '<span class="x-fa fa-lock" style="color: #929292"></span>'}return a}},{dataIndex:'pubDecision',bind:{hidden:'{!pubCamp}'},menuDisabled:!0,sortable:!0,hideable:!1,text:'<span class="x-fa fa-thumbs-o-up"></span>',width:40,renderer:function(a){if(!a){return ''}return '<span class="x-fa fa-thumbs'+(a==='A'?'-up':'-down')+'"></span>'},sorter:{sorterFn:function(c,d){var a=c.get('pubDecision')||'Z',b=d.get('pubDecision')||'Z';return a>b?1:a===b?0:-1}}},{text:'rating',bind:{hidden:'{!pubCamp}'},sortable:!0,hideable:!1,dataIndex:'pubCustomRating',groupable:!1,width:60,filter:'list'},{header:Bigmedia.Locales.colCusomerNote,bind:{hidden:'{!pubCamp}'},dataIndex:'pubNote',sortable:!0,hideable:!1,width:80,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{header:Bigmedia.Locales.colPrice,bind:{hidden:'{!pubCamp}'},dataIndex:'displayPubPrice',width:70,align:'right',hideable:!1,editor:{xtype:'numberfield',allowBlank:!0,minValue:0,maxValue:100000},renderer:function(a,b,c){if(c.get('pubPriceEnc')&&!a){b.align='center';return '<span class="x-fa fa-lock" style="color: #929292"></span>'}return a}},{header:Bigmedia.Locales.colNote,bind:{hidden:'{!pubCamp}'},dataIndex:'pubOwnerNote',width:70,align:'right',hideable:!1,editor:{xtype:'textfield',allowBlank:!0}},{xtype:'actioncolumn',width:50,hideable:!1,items:[{iconCls:'x-fa fa-minus',tooltip:'Delete',handler:function(b,c,e){var a=b.getStore(),d=a.getAt(c);Ext.Msg.confirm({title:Bigmedia.Locales.campCardProposalsConfirmDeleteTitle,message:Bigmedia.Locales.campCardProposalsConfirmDeleteMessage,buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(f){if(f==='yes'){a.remove(d)}}})},isActionDisabled:function(e,c,b,d,a){return !(a.get('operationId')==1||a.get('operationId')==4||a.get('operationId')==21||a.get('operationId')==22||a.get('operationId')==20)}}]}],listeners:{beforeedit:function(e,a){var d=this;if(a.field==='netCost'&&(!Bigmedia.Vars.getSalt(a.record.get('campaignId'))||a.record.get('supplierPriceEnc')&&!a.value)){Bigmedia.Vars.showPriceEncryptDialog(a.record.get('campaignId'),function(){(a.grid.getStore().getData().getSource()||a.grid.getStore().getData()).each(function(b){b.set('netCost',b.get('netCost'))})});return !1}else {if(a.field==='displayPubPrice'){var b=d.lookupViewModel().get('pubCamp'),c=Bigmedia.Vars.getPubPassphrase(a.record.get('pubCampaignId'));if(!b){console.log('no pubCamp');return !1}if(!b.get('cryptoHash')||c&&b.get('cryptoHash')===Bigmedia.Vars.hashPwd(c)){return !0}else {Bigmedia.Vars.showPubPriceEncryptDialog(a.record.get('pubCampaignId'),function(){(a.grid.getStore().getData().getSource()||a.grid.getStore().getData()).each(function(b){b.set('displayPubPrice',b.get('displayPubPrice'))})});return !1}return !1}}},edit:function(f,a){var e=this;if(a.field==='netCost'){var b=Bigmedia.Vars.encryptPrice(Bigmedia.Vars.getSalt(a.record.get('campaignId')),a.value);if(!+a.value){a.record.set({supplierPriceEnc:null,supplierPrice:null})}else {if(b){a.record.set({supplierPriceEnc:b,supplierPrice:null})}else {a.record.set({supplierPriceEnc:null,supplierPrice:a.value})}}}else {if(a.field==='displayPubPrice'){var c=e.lookupViewModel().get('pubCamp'),d=Bigmedia.Vars.getPubPassphrase(a.record.get('pubCampaignId'));if(!c){return}if(c.get('cryptoHash')&&(d&&c.get('cryptoHash')===Bigmedia.Vars.hashPwd(d))){var b=Bigmedia.Vars.encryptPrice(Bigmedia.Vars.getPubPassphrase(a.record.get('pubCampaignId')),a.value);a.record.set({pubPriceEnc:b,pubPrice:null})}else {if(!c.get('cryptoHash')){a.record.set({pubPriceEnc:null,pubPrice:a.value})}}}}}}});Ext.define('Bigmedia.view.grid.CampPhotosController',{extend:Ext.app.ViewController,alias:'controller.grid-photos',init:function(a){var b=this;b.callParent(a)},onGridRefresh:function(){var a=this,b=a.getView().getStore()},onStoreDataChanged:function(a){var c=this,b=c.getView(),a=b.getStore();if(a.isLoading()||a.bgLoading){return}},onStoreBeforeLoad:function(a){},onStoreLoad:function(a){},showSelectedOnlyToggle:function(g,c){var f=this,b=f.getView(),a=b.getStore();if(c){a.removeFilter('filterselected',!0);var e=b.getSelectionModel().getSelection().map(function(a){return a.id});var d=new Ext.util.Filter({property:'id',id:'filterselected',operator:'in',value:e});a.addFilter(d)}else {a.removeFilter('filterselected')}},destroy:function(){if(this.timer){window.clearTimeout(this.timer)}this.callParent()}});Ext.define('Bigmedia.view.grid.CampPhotos',{extend:Ext.grid.Panel,controller:'grid-photos',config:{hideToolBar:!1,mapView:null},header:!1,xtype:'photos-grid',dockedItems:[{xtype:'toolbar',dock:'top',items:['->',{reference:'exportPhotosBtn',xtype:'splitbutton',text:Bigmedia.Locales.campCardPhotosExportToZip,iconCls:'x-fa fa-archive',handler:'exportAllPhotosToArchiveClick'}]}],plugins:{gridfilters:!0},columns:[{header:Bigmedia.Locales.colSideNumber,dataIndex:'sideNum',width:60},{header:Bigmedia.Locales.colFaceNum,dataIndex:'faceNum',width:60},{header:Bigmedia.Locales.colCity,dataIndex:'faceCity',width:100,filter:'list'},{header:Bigmedia.Locales.colAddress,dataIndex:'faceAddress',width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{header:Bigmedia.Locales.colPhotoType,dataIndex:'typeName',width:120,filter:'list'},{header:Bigmedia.Locales.colDeadline,dataIndex:'deadline',xtype:'datecolumn',format:'d.m.Y',width:120,filter:'list'},{header:Bigmedia.Locales.colPhoto,dataIndex:'photoRecs',sortable:!1,width:250,renderer:function(a){var b='<div class="poster-picture"></div>';console.log(a);if(a&&a.length>0){b='<a href="'+a[0].url+'" target="_blank"><div class="poster-picture" style="background-image: url('+a[0].url+')"></div></a>'}return b}}]});Ext.define('Bigmedia.view.dialog.DlgFilterByNumberController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgfilterbynumber',listen:{store:{'#storeManualFaces':{update:function(d,b,g,a){var e=this,f=e.getView().getViewModel(),d=f.getStore('storeManualFaces'),c=0;if(g===Ext.data.Model.EDIT&&(a&&a.indexOf('manualNo')>=0)){if(a.indexOf('faceId')<0&&b.get('faceId')){b.set('faceId',null)}e.searchFace(b)}if(a.indexOf('supplierNo')>=0){d.each(function(e){if(e.get('supplierNo')){c++}});f.set('readyToImport',c)}}}}},bindings:{onInputVariantChange:'{inputVariant}'},init:function(a){var e=this,f=a.getViewModel(),d=f.getStore('storeManualFaces'),g=a.lookup('gridfilterfaces'),c=a.getManualNo(),b=a.getInputVariant(),i=[];e.callParent(a);if(b){f.set('inputVariant',b)}e.refreshData();if(c){c.forEach((c,e)=>{var b=d.getAt(e);if(!b){b=d.add({})[0]}b.set({manualNo:c[0],faceId:c[1]})})}var h=a.etc;g.reconfigure(h.columns)},onInputVariantChange:function(a){if(a){this.searchFaces()}},onPreviewPOIClick:function(f){var b=this,a=b.getView().getViewModel(),e=a.getStore('storeManualFaces'),c=a.get('inputVariant'),d=Bigmedia.Locales.currentLocale},refreshData:function(){var d=this,e=d.getView().getViewModel(),a=e.getStore('storeManualFaces');a.beginUpdate();a.removeAll();var b=[];for(var c=0;c<10000;c++){b.push({})}a.add(b);a.endUpdate()},onClearAllClick:function(){var a=this;a.refreshData()},searchFaces:function(){var a=this,c=a.getViewModel(),b=c.getStore('storeManualFaces');b.each(b=>a.searchFace(b))},searchFace:function(a){var n=this,m=n.getViewModel(),e=m.get('inputVariant'),h=Ext.getStore('Faces'),f=Ext.getStore('Sides'),k=m.getStore('storeManualFaces');if(!a.get('manualNo')){a.set('faceId',null);return}var g,c,b=0;var i=e=='supplierNo'?a.get('manualNo').toString():+a.get('manualNo');if(a.get('faceId')&&h.getById(a.get('faceId'))){var l=f.findBy(b=>b.get(e)==i&&b.get('faceId')==a.get('faceId'));if(l>=0){g=h.getAt(l)}if(g){b++}}if(!b){var d=f.findExact(e,i);while(d>=0){var j=f.getAt(d).get('faceId');g=h.getById(j);if(g){c={faceId:j}}else {c={}}if(b===0){a.set(c)}else {c.manualNo=a.get('manualNo');k.insert(k.indexOf(a)+1,c)}b++;d++;d=f.findExact(e,i,d)}}if(!b){a.set('faceId',null)}},reconfigureGrid:function(c){if(!c.checked){return}var d=this,a=d.lookup('gridpoi'),b=d.getView(),f=b.etc[c.inputValue],g=a.getStore(),e=f.columns.concat(b.resultColumns);a.reconfigure(e)},createCommonStore:function(){var c=this,a=[];for(var b=0;b<1000;b++){a.push({})}return new Ext.data.Store({model:Bigmedia.model.PoiManual,data:a})},onFilterClick:function(){var c=this,b=c.getView(),d=c.getViewModel(),f=d.getStore('storeManualFaces'),e=d.get('inputVariant'),a=[];f.each(function(b){if(b.get('manualNo')){a.push(b)}});b.fireEventArgs('createfilter',[a,e]);b.close()},onShowView:function(a){},onCloseWindowClick:function(){var b=this,a=b.getView();a.close()}});Ext.define('Bigmedia.view.dialog.DlgFilterByNumber',{extend:Ext.window.Window,xtype:'dlgfilterbynumber',controller:'dialog-dlgfilterbynumber',viewModel:{stores:{storeManualFaces:{id:'storeManualFaces',model:'SearchFaceByNumber',proxy:{type:'memory'}}},data:{inputVariant:'supplierNo',readyToImport:0}},config:{manualNo:null,inputVariant:'supplierNo'},width:'70%',minWidth:400,height:'70%',minHeight:380,modal:!0,autoShow:!1,closeAction:'destroy',title:'   ',referenceHolder:!0,layout:'vbox',padding:10,items:[{xtype:'radiogroup',padding:'0 10',fieldLabel:'  ',columns:2,vertical:!0,width:'100%',labelWidth:180,simpleValue:!0,bind:'{inputVariant}',allowBlank:!1,items:[{boxLabel:'  ',reference:'chbsuppliernumber',inputValue:'supplierNo'},{boxLabel:' Doors',reference:'chbdoorsnumber',inputValue:'doorsNo'}]},{xtype:'grid',reference:'gridfilterfaces',width:'100%',flex:1,viewConfig:{markDirty:!1},selModel:{type:'spreadsheet'},plugins:{clipboard:{formats:{text:{get:'getTextData',put:'putTextData'}}},cellediting:{clicksToEdit:2},selectionreplicator:!0},bind:{store:'{storeManualFaces}'},listeners:{cellkeydown:function(i,g,c,e,h,d,b,f){var a=this;if(b.event.key==='Delete'){a.getSelectionModel().getSelected().eachCell(function(a){a.record.set(a.column.dataIndex,null)})}}}}],buttons:[{text:Bigmedia.Locales.dlgPoiCategoriesCancelBtnLabel,listeners:{click:'onCloseWindowClick'}},{text:'Clear All',listeners:{click:'onClearAllClick'}},'->',{reference:'btnCreateFilter',bind:{disabled:'{!readyToImport}',text:'   {readyToImport} ()'},listeners:{click:'onFilterClick'}}],etc:{columns:[{text:'',dataIndex:'manualNo',width:150,editor:!0,locked:!0,renderer:function(a,b){b.style='background-color:#f5f5f5';return Ext.htmlEncode(a)}},{text:Bigmedia.Locales.colOriginalNo,sortable:!0,dataIndex:'supplierNo',groupable:!1,hideable:!0,hidden:!1,draggable:!1,width:80,locked:!1,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}},ignoreExport:!0},{text:' ',sortable:!0,dataIndex:'status',groupable:!1,width:120,filter:'list',ignoreExport:!0},{text:Bigmedia.Locales.colSupplier,sortable:!0,dataIndex:'supplier',groupable:!1,width:120,filter:'list',ignoreExport:!0},{text:Bigmedia.Locales.colCity,sortable:!0,dataIndex:'city',groupable:!1,width:120,filter:'list',ignoreExport:!0},{text:Bigmedia.Locales.colAddress,sortable:!0,dataIndex:'address',groupable:!1,width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}},renderer:function(a,b){b.tdAttr='data-qtip="'+Ext.htmlEncode(a)+'"';return Ext.htmlEncode(a)},ignoreExport:!0},{text:Bigmedia.Locales.colCat,sortable:!0,dataIndex:'catab',groupable:!1,width:40,filter:'list',ignoreExport:!0},{text:Bigmedia.Locales.colSize,sortable:!0,dataIndex:'size',groupable:!1,width:100,filter:'list',ignoreExport:!0},{text:Bigmedia.Locales.colDoorsNo,sortable:!0,dataIndex:'doorsNo',groupable:!1,width:60,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}},ignoreExport:!0},{text:'Price',width:60,sortable:!0,dataIndex:'price',hideable:!1,filter:'number'}]}});Ext.define('Bigmedia.view.monitoring.MonitoringController',{extend:Ext.app.ViewController,alias:'controller.monitoring-grid-controller',controller:'monitoring-grid-controller',init:function(b){var a=this;a.callParent(b);grid=a.lookupReference('DataMonitoring')},onGridShow:function(a){console.log('onGridShow grid',a);var b=this},onGridLoad:function(a){var b=this;console.log('onGridLoad grid',a)},bindings:{onUpdateStore:'{DataMonitoring}',onLoadMonitoringInspection:'{idIns}'},onUpdateStore:function(b){var a=this,c=a.getView(),d=a.getViewModel(),b=c.getStore(),e=d.get('gridMonitoring')},onLoadMonitoringInspection:function(d,e){var b=this,a=b.getView(),f=b.getViewModel(),c=Ext.getStore('DataMonitoring');a.mask('Please wait...');c.load({params:{MonitoringId:encodeURIComponent(d)}});a.unmask()},onDateRangePeriodChanged:function(c){var e=this,g=e.getViewModel(),a=g.get('curMonitoring'),f=a.get('id');if(!a.get('periods')){console.log('Error Load data')}else {var d=a.get('periods'),b=c.startDate<a.get('minDate')?d[0]:c.endDate>a.get('maxDate')?d[d.length-1]:d.find(a=>a.periodYear==c.startDate.getFullYear()&&a.periodMonth==c.startDate.getMonth());c.startDate=b.startDate;c.endDate=b.endDate;if(f!=b.id){a.set('id',b.id);a.set('startDate',b.startDate);a.set('endDate',b.endDate);a.set('name',b.name);e.onLoadMonitoringInspection(b.id)}}},destroy:function(){if(this.timer){window.clearTimeout(this.timer)}Ext.Msg.hide();this.callParent()}});Ext.define('Bigmedia.view.monitoring.Monitoring',{extend:Ext.grid.Panel,viewModel:{data:{selection:null}},config:{mapView:null,detMonitoring:null},controller:'monitoring-grid-controller',header:!1,xtype:'monitoring-grid',hideRowBody:!0,columnLines:!0,dockedItems:[{tbar:{items:[{xtype:'button',iconCls:'x-fa fa-calendar-alt',bind:{text:'{curMonitoring.periodText}'},menu:{plain:!0,allowOtherMenus:!0,items:[{xtype:'customdaterange',reference:'daterange',bind:{startDate:'{curMonitoring.startDate}',endDate:'{curMonitoring.endDate}',hideDaysMode:!0,hideWholePeriodMode:!0,hideTwoMonthMode:!0},listeners:{periodchanged:'onDateRangePeriodChanged',selectperiod:function(a){a.up('menu').hide()}}}]}}]}}],plugins:{gridfilters:!0},columns:[{text:' ',sortable:!0,dataIndex:'date',groupable:!1,hideable:!0,draggable:!1,width:30,filter:'list',hidden:!0},{text:'Constr ',sortable:!0,dataIndex:'fConstr',groupable:!1,hideable:!0,draggable:!1,width:50},{text:Bigmedia.Locales.colOriginalNo,sortable:!0,dataIndex:'supplierNo',groupable:!1,hideable:!0,hidden:!1,draggable:!1,width:80,locked:!1,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:Bigmedia.Locales.colCity,sortable:!0,dataIndex:'city',groupable:!1,width:120,filter:'list'},{text:Bigmedia.Locales.colAddress,sortable:!0,dataIndex:'address',groupable:!1,width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}},renderer:function(a,b){b.tdAttr='data-qtip="'+Ext.htmlEncode(a)+'"';return Ext.htmlEncode(a)}},{text:Bigmedia.Locales.colNetwork,sortable:!0,dataIndex:'constrtype',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colSize,sortable:!0,dataIndex:'sizetype',groupable:!1,width:100,filter:'list'},{text:'/',sortable:!0,dataIndex:'catab',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colSupplier,sortable:!0,dataIndex:'owner',groupable:!1,width:120,filter:'list'},{text:'',sortable:!0,dataIndex:'advertisingCategory',groupable:!1,width:100,filter:'list'},{text:'Brand',sortable:!0,dataIndex:'brand',groupable:!1,width:100,filter:'list'},{text:'Advevents',sortable:!0,dataIndex:'advevents',groupable:!1,width:100,filter:'list'},{text:'',sortable:!0,dataIndex:'translate',groupable:!1,width:100,filter:'list',hidden:!0,bind:{disabled:!0}},{text:'',sortable:!0,dataIndex:'damage',groupable:!1,width:10,filter:'list'},{text:'',sortable:!0,dataIndex:'note',groupable:!1,width:100,filter:'list'},{header:Bigmedia.Locales.colPhoto,dataIndex:'brandId',sortable:!1,width:100,renderer:function(c){var a='<div class="poster-monitoring"></div>';var b='/photohub/monitoring/'+c;a='<a href="'+b+'" target="_blank"><div class="poster-monitoring" style="background-image: url('+b+')"></div></a>';return a}},{text:'lon',sortable:!0,dataIndex:'lon',groupable:!1,width:20,hidden:!0,hideable:!1,bind:{disabled:!0}},{text:'lat',sortable:!0,dataIndex:'lat',groupable:!1,width:20,hidden:!0,hideable:!1,bind:{disabled:!0}}],listeners:{show:'onGridShow',viewready:'onGridLoad',selectionchange:'grid_selectionchange',render:function(d){var a=d.getView(),b=this,a=b.getView(),f=b.getViewModel(),c=f.get('curMonitoring').id,e=Ext.getStore('DataMonitoring');a.mask('Data Loading.......');e.load({params:{MonitoringId:encodeURIComponent(c)}});a.unmask()},itemkeydown:function(a,b,e,d,g,c){var f=a.getSelectionModel()},afterrender:function(a){},selectionchange:function(b,a){console.log('-------->',b,a)}},grid_selectionchange:function(b,a){var c=a[0];connsole.log('grid_selectionchange',b,a,c)}});Ext.define('Bigmedia.view.det.DetMonitoring',{extend:Ext.window.Window,xtype:'detmonitoring',title:Bigmedia.Locales.detMotinoringTitle,width:500,height:600,collapsible:!1,minWidth:300,minHeight:380,layout:'fit',resizable:!0,modal:!0,referenceHolder:!0,defaultFocus:'brandId',closeAction:'hide',items:[{xtype:'form',reference:'windowForm',modelValidation:!0,layout:{type:'vbox',align:'stretch'},border:!1,bodyPadding:10,fieldDefaults:{msgTarget:'brandId',labelAlign:'top',labelWidth:200,margin:'0 0 10px 0',margin:0},defaults:{margin:'0 0 10px 0',margin:0},items:[{xtype:'textfield',name:'Advevents',itemId:'Advevents',fieldLabel:Bigmedia.Locales.detMonitoringBrandName,allowBlank:!1,bind:{value:'{monitoring.Advevents}'}},{xtype:'drag-image',padding:'10px 0',flex:1},{xtype:'filefield',accept:'image/*',margin:0,name:'photo-path',buttonText:'',buttonConfig:{iconCls:'x-fa fa-file-image-o'},listeners:{change:function(b,c){var a=b.fileInputEl.dom;if(a.files&&a.files[0]){b.up('form').down('drag-image').getController().loadImage(a.files[0])}}}}],buttons:[{text:Bigmedia.Locales.btnCancelText,handler:function(b){var a=b.up('window');a.hide()}},{text:Bigmedia.Locales.btnSaveText,handler:function(i){var a=i.up('window'),f=a.lookupReference('windowForm'),e=f.getForm(),b=a.down('drag-image');if(e.isValid()){var c=a.getViewModel().get('theMonitoring');if(b.imageChanged&&b.dataURL){c.set('subjectBlob',b.dataURL)}if(c.store){if(b.imageChanged&&b.dataURL){c.store.on('update',function(b,a){a.load()},{single:!0})}c.store.sync()}else {var h=a.up('mainviewport'),g=h.down('campcard');var d=g.lookupViewModel().get('DataMonitoring');d.add(thePoster);d.sync()}e.reset();a.hide()}}}]}],listeners:{show:function(a){}}});Ext.define('Bigmedia.view.FacesView',{extend:Ext.panel.Panel,controller:'facesview',viewModel:{type:'facesview'},xtype:'faces-view',title:'Faces View',header:!1,closeAction:'hide',layout:'border',bodyBorder:!1,defaults:{collapsible:!0,split:{width:8}},items:[{xtype:'panel',header:!1,layout:{type:'vbox',align:'stretch'},region:'center',items:[{xtype:'panel',padding:'0px 20px',layout:{type:'hbox',align:'center'},items:[{xtype:'component',style:'font-size: larger',bind:{html:'{curCamp.name} ({curCamp.periodText})'}},{xtype:'button',iconCls:'x-fa fa-ellipsis-v grid-btn',arrowVisible:!1,menu:{plain:!0,items:[{iconCls:'x-fa fa-edit',text:' / ',handler:'onEditCampaignClick'},{iconCls:'x-fa fa-link',bind:{text:'{curCamp.hasPresentation?"  ":" "}',disabled:'{curCamp.phantom}'},handler:'onGetPresentationClick'},{iconCls:'x-fa fa-copy',text:' '},{iconCls:'x-fa fa-trash-alt',text:'',handler:'onRemoveCampaignClick'}]}},{xtype:'component',flex:1}]},{xtype:'tabpanel',collapsible:!1,header:!1,reference:'maintabpanel',autoDestroy:!1,publishes:['width','height'],flex:1,style:'background-color: #ffffff',tabBar:{layout:{pack:'left'},items:[{xtype:'tbspacer',flex:1},{xtype:'button',ui:'blue-btn',text:'',margin:'0 20px 0 0',handler:'onAutoPlanClick',bind:{hidden:'{user.showPlanner != 1}'}},{xtype:'button',ui:'grey-btn',text:' ',margin:'0 20px 0 0',hidden:!0,bind:{hidden:'{user.showPlanner != 1}'},handler:function(b){var a=Ext.create('Bigmedia.view.dialog.DlgEditRulesGroups',{});a.show()}},{xtype:'button',ui:'grey-btn',margin:'0 20px 0 0',text:'  Excel',handler:'onExportToExcelClick'},{xtype:'button',ui:'grey-btn',hidden:!0,bind:{hidden:'{user.showPlanner != 1}'},margin:'0 20px 0 0',text:'',handler:'onAnalyticsClick'}]},defaults:{border:!1},bodyPadding:0,plain:!0,items:[{bind:{title:'   {gridfaces.count}'},layout:'fit',tbar:{items:[{xtype:'button',iconCls:'x-fa fa-calendar-alt',bind:{text:'{curCamp.filterPeriodText}'},menu:{plain:!0,allowOtherMenus:!0,items:[{xtype:'checkbox',boxLabel:' ',handler:'onShowAllToggle',bind:{hidden:'{user.showPlanner != 1}',value:'{filterPeriodDisabled}'}},{xtype:'customdaterange',reference:'daterange',bind:{startDate:'{curCamp.filterPeriod.startDate}',endDate:'{curCamp.filterPeriod.endDate}',hidden:'{filterPeriodDisabled}'},listeners:{periodchanged:'onDateRangePeriodChanged',selectperiod:function(a){a.up('menu').hide()}}}]}},{xtype:'button',text:'  Doors',iconCls:'x-fa fa-file-import',hidden:!0,bind:{hidden:'{user.showPlanner != 1}'},handler:'onImportFromDoorsClick'},{xtype:'splitbutton',text:'  ',enableToggle:!0,bind:{iconCls:'x-far fa{manualNoFiltered?"-check":""}-square',pressed:'{manualNoFiltered}'},listeners:{toggle:'onBeforeToggleFilterByNumber'},menu:{plain:!0,items:[{text:'',iconCls:'x-fa fa-cogs',handler:'onSetupFilterByNumber'}]}},{xtype:'button',text:'  ',iconCls:'x-fa fa-broom',handler:'onClearFiltersClick'},{xtype:'tbspacer',flex:1},{xtype:'combo',width:150,padding:10,fieldLabel:'',forceSelection:!0,editable:!1,store:'RulesGroups',displayField:'name',valueField:'id',queryMode:'local',hidden:!0,bind:{hidden:'{user.showPlanner != 1}',selection:'{discountGroup}'}},{xtype:'splitbutton',focusCls:'',bind:{iconCls:'x-fa fa-{savePrice?(useEncryption?"lock":"lock-open"):"ban"}',pressed:'{useEncryption}',hidden:'{!userLoggedIn}'},tooltip:'   ',enableToggle:!0,listeners:{beforetoggle:'onUseEncryptionBeforeToggle'},menu:{plain:!0,items:[{text:'    ',handler:'onEditSaltClick'},{xtype:'menucheckitem',text:'   ',bind:{checked:'{!savePrice}'},checkHandler:function(b,a){b.up('faces-view').lookupViewModel().set('savePrice',!a)}}]}}]},items:[{xtype:'faces-grid',hideToolBar:!0,reference:'gridFaces',stateId:'mainFacesGrid',stateful:!0,plugins:{gridfilters:{stateId:'mainFacesFilters',id:'maingridfilters'}},bind:{store:'{gridfaces}',showKSHitmap:!1},showAddToCart:!0,showDelete:!1,region:'center',collapsible:!1,margin:0,padding:0,bodyPadding:0,minWidth:100,listeners:{selectionchange:'onFacesGridSelectionChange'}}]},{tabConfig:{bind:{hidden:'{!selstore.count}'}},bind:{title:'  {selstore.count}'},reference:'tabselected',layout:{type:'fit'},tbar:{items:[{xtype:'button',iconCls:'x-fa fa-cart-plus',text:'  ',handler:'onAddProposalsClick'}]},items:[{xtype:'faces-grid',hideToolBar:!0,reference:'gridSelected',scrollable:!0,bind:{store:'{selstore}'},selModel:{type:'rowmodel'},collapsible:!1,margin:0,padding:0,bodyPadding:0,minWidth:100}]},{bind:{title:'    {proposals.count}'},reference:'tabshoppingcart',autoRender:!0,autoShow:!0,layout:{type:'fit'},items:[{xtype:'container',layout:'fit',autoRender:!0,autoShow:!0,items:{xtype:'proposals-grid',autoRender:!0,autoShow:!0,reference:'gridCart',scrollable:!0,bind:{store:'{proposals}'},collapsible:!1,margin:0,padding:0,bodyPadding:0,minWidth:100}}]},{bind:{title:"'  {pois.count}"},reference:'tabcamppoi',layout:{type:'fit'},items:[{xtype:'container',layout:'fit',items:{xtype:'managepoi-grid',reference:'gridCampPoi',scrollable:!0,bind:{store:'{pois}'},collapsible:!1,margin:0,padding:0,bodyPadding:0,minWidth:100}}]},{title:Bigmedia.Locales.campCardtabLiningProgressTitle,layout:'fit',items:[{xtype:'grid',bind:'{curCamp.campServiceOperations}',reference:'campServices',scrollable:!0,tbar:['->',{reference:'exportservicebtn',xtype:'button',text:Bigmedia.Locales.gridBtnExportToExcelText,iconCls:'x-fa fa-file-excel-o',listeners:{click:'exportCampServicesToExcel'}}],columns:[{header:Bigmedia.Locales.colSideNumber,dataIndex:'faceSupplierNo',width:80},{header:Bigmedia.Locales.colFaceNum,dataIndex:'faceNum',width:60},{header:Bigmedia.Locales.colCity,dataIndex:'faceCity',width:100},{header:Bigmedia.Locales.colAddress,dataIndex:'faceAddress',width:250},{header:Bigmedia.Locales.colServiceStatus,dataIndex:'statusName',width:100},{header:Bigmedia.Locales.colCoverDate,dataIndex:'coverAt',xtype:'datecolumn',format:'d.m.Y'},{header:Bigmedia.Locales.colNote,dataIndex:'note'},{header:Bigmedia.Locales.colServicePhoto,dataIndex:'photoRecObj',sortable:!1,width:250,renderer:function(a){var b='<div class="poster-picture"></div>';if(a&&a.url){b='<a href="'+a.url+'" target="_blank"><div class="poster-picture" style="background-image: url('+a.url+')"></div></a>'}return b}}]}]},{title:Bigmedia.Locales.campCardtabPhotosTitle,layout:'fit',padding:0,defaults:{padding:0},items:[{xtype:'grid',reference:'gridPhotos',plugins:'gridfilters',tbar:['->',{reference:'exportPhotosBtn',xtype:'splitbutton',text:Bigmedia.Locales.campCardPhotosExportToZip,iconCls:'x-fa fa-archive',handler:'exportAllPhotosToArchiveClick',arrowHandler:function(a){a.up('faces-view').getController().fillMonthlyExportMenu(a)}}],bind:'{curCamp.campPhotos}',columns:[{header:Bigmedia.Locales.colSideNumber,dataIndex:'faceSupplierNo',width:80},{header:Bigmedia.Locales.colFaceNum,dataIndex:'faceNum',width:60},{header:Bigmedia.Locales.colCity,dataIndex:'faceCity',width:100,filter:'list'},{header:Bigmedia.Locales.colAddress,dataIndex:'faceAddress',width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{header:Bigmedia.Locales.colPhotoType,dataIndex:'typeName',width:120,filter:'list'},{header:Bigmedia.Locales.colDeadline,dataIndex:'deadline',xtype:'datecolumn',format:'d.m.Y',width:120,filter:'list'},{header:Bigmedia.Locales.colPhoto,dataIndex:'photoRecs',sortable:!1,width:250,renderer:function(a){var b='<div class="poster-picture"></div>';if(a&&a.length>0){b='<a href="'+a[0].url+'" target="_blank"><div class="poster-picture" style="background-image: url('+a[0].url+')"></div></a>'}return b}}]}]},{title:Bigmedia.Locales.campCardtabDocumentsTitle,layout:'fit',items:[{xtype:'grid',bind:'{curCamp.documents}',columns:[{header:Bigmedia.Locales.colDocNum,dataIndex:'num'},{header:Bigmedia.Locales.colDocType,dataIndex:'type'},{header:Bigmedia.Locales.colDocStatus,dataIndex:'status',flex:1},{header:Bigmedia.Locales.colCreatedAt,dataIndex:'createdAt',xtype:'datecolumn',format:'d.m.Y H:i'},{header:Bigmedia.Locales.colModifiedAt,dataIndex:'updatedAt',xtype:'datecolumn',format:'d.m.Y H:i'},{header:Bigmedia.Locales.colDownload,width:50,groupable:!1,hidable:!1,sortable:!1,xtype:'templatecolumn',tpl:new Ext.XTemplate('<tpl if="pdfId &gt; 0">','<a target="_blank" href="/api/v1/campaigns/{campaignId}/documents/{id}/pdf" class="x-btn x-unselectable x-btn-default-small x-border-box" style="width:40px;" hidefocus="on" unselectable="on" role="button" aria-hidden="false" aria-disabled="false" tabindex="-1" data-tabindex-value="0" data-tabindex-counter="1">','<span data-ref="btnWrap" role="presentation" unselectable="on" style="table-layout:fixed;" class="x-btn-wrap x-btn-wrap-default-small ">','<span data-ref="btnEl" role="presentation" unselectable="on" style="" class="x-btn-button x-btn-button-default-small  x-btn-no-text x-btn-icon x-btn-icon-left x-btn-button-center ">','<span data-ref="btnIconEl" role="presentation" unselectable="on" class="x-btn-icon-el x-btn-icon-el-default-small x-fa fa-download " style=""></span>','<span data-ref="btnInnerEl" unselectable="on" class="x-btn-inner x-btn-inner-default-small">&nbsp;</span></span></span>','</a>','</tpl>')}]}]},{tabConfig:{bind:{hidden:'{user.showMonitoring != 1}'}},bind:{title:Bigmedia.Locales.campCardtabMonitoringTitle},layout:'fit',items:[{xtype:'monitoring-grid',scrollable:!0,stateId:'mainMonitoringGrid',reference:'monitoringGrid',stateful:!0,bind:'{gridMonitoring}',region:'center',collapsible:!1,margin:0,padding:0,bodyPadding:0,minWidth:100}],listeners:{beforeactivate:'onMonitoringGridSelectionChange',beforeshow:'onMonitoringGridShow',beforehide:'onMonitoringGridHide'}}]}]},{items:[{xtype:'facesmapview',reference:'mapFaces',bind:{showHeatmapBtn:'{user.showHeatmap}'}}],layout:'fit',title:Bigmedia.Locales.mapTitle,stateful:!0,stateId:'mainFacesMap',reference:'mapcontainer',collapsible:!0,region:'east',minWidth:150,width:350,listeners:{'float':function(a){a.expand()}},header:{hidden:!0,listeners:{click:function(a){a.up('panel').toggleCollapse()}}}},{xtype:'detface',reference:'detface',stateId:'detFaceFacesView',stateful:{x:!0,y:!0,width:!0,height:!0},constrainHeader:!0,closeAction:'hide',hidden:!0,collapsible:!1,bodyPadding:0,width:300,heigth:250,closable:!0},{xtype:'detmonitoring',reference:'detmonitoring',stateId:'detMonitoringView',stateful:{x:!0,y:!0,width:!0,height:!0},constrainHeader:!0,closeAction:'hide',hidden:!0,collapsible:!1,bodyPadding:0,width:300,heigth:250,closable:!0},{xtype:'window',title:'',reference:'doorsphoto',alwaysOnTop:!0,hidden:!0,closeAction:'hide',width:300,height:250,collapsible:!1,minWidth:250,minHeight:180,layout:'fit',resizable:!0,modal:!1,stateId:'doorsPhotoFacesView',stateful:{x:!0,y:!0,width:!0,height:!0},constrainHeader:!0},{xtype:'detschema',reference:'detschema',stateId:'detSchemaFacesView',stateful:{x:!0,y:!0,width:!0,height:!0},constrainHeader:!0,closeAction:'hide',hidden:!0,collapsible:!1,bodyPadding:0,width:300,heigth:250,closable:!0},{xtype:'dlglinkfacestopoisettings',id:'dlglinkfacestopoisettings',reference:'dlglinkfacestopoisettings',bind:{maximumFaces:'{maximumfaces}'},listeners:{savesettings:'onLinkPoiRulesChanged'}}]});Ext.define('Bigmedia.view.authentication.AuthenticationController',{extend:Ext.app.ViewController,alias:'controller.authentication',onFaceBookLogin:function(a,b){if(!FB.getAccessToken()){Bigmedia.lib.provider.Facebook.login()}else {Bigmedia.lib.provider.Facebook.loginByToken(FB.getAccessToken())}},onLoginSuccess:function(){this.fireViewEvent('login',this.getView())},validatePwd:function(a){a.next().validate()},onLoginButton:function(d,f,e){var c=this,b=c.getViewModel(),a=Ext.ComponentQuery.query('mainviewport');if(a){a=a[0]}Ext.Ajax.request({url:'/api/v1/auth/local/login',params:{username:b.get('username'),password:b.get('password'),rememberme:b.get('rememberMe')},success:function(g,i){var b=JSON.parse(g.responseText);b.provider=2;var h=Ext.create('Bigmedia.model.User',b,2);Bigmedia.Vars.setUser(h);if(a&&a.getViewModel().get('targetLoginRouteId')){c.redirectTo(a.getViewModel().get('targetLoginRouteId'),!0)}else {c.redirectTo('faces',!0)}},failure:function(a,b){if(a.status===401){Ext.Msg.alert(Bigmedia.Locales.authLoginErrorAlertTitle,Bigmedia.Locales.authLoginErrorAlertText)}else {}}});Ext.getElementById('submitButton').click()},onLoginAsButton:function(a,c,b){Ext.ComponentQuery.query('mainviewport')[0].getController().showPage('auth.login')},onNewAccount:function(a,c,b){Ext.ComponentQuery.query('mainviewport')[0].getController().showPage('auth.signup')},onSignupClick:function(d,f,e){var c=this,a=c.getViewModel(),b=Ext.ComponentQuery.query('mainviewport');if(b){b=b[0]}Ext.Ajax.request({url:'/api/v1/auth/local/signup',params:{username:a.get('signup.username').trim(),password:a.get('signup.password'),email:a.get('signup.email').trim(),orgname:a.get('signup.orgName').trim(),firstname:a.get('signup.fullName').trim().split(/\s+/)[0],lastname:a.get('signup.fullName').trim().split(/\s+/)[1]||''},success:function(a,c){Ext.Msg.alert(Bigmedia.Locales.authSignupSuccessAlertTitle,Bigmedia.Locales.authSignupSuccessAlertText);b.getController().setCurrentView('auth.login')},failure:function(a,b){if(a.status==500){Ext.ComponentQuery.query('mainviewport')[0].getController().showPage('error500')}else {Ext.Msg.alert(Bigmedia.Locales.authSignupErrorAlertTitle,Bigmedia.Locales.authSignupErrorAlertText)}}})},onLoginByCodeClick:function(c,e,d){var b=this,a=b.getViewModel();Ext.Ajax.request({url:'/api/v1/auth/password/'+a.get('reset.code'),success:function(a,b){Bigmedia.Vars.loadUser(function(){var f=Ext.ComponentQuery.query('mainviewport');if(f){f=f[0]}if(f&&f.getViewModel().get('targetLoginRouteId')){f.getController().redirectTo(f.getViewModel().get('targetLoginRouteId'))}else {f.getController().redirectTo('campaigns')}})},failure:function(a,b){Ext.Msg.confirm({title:Bigmedia.Locales.authLoginByCodeErrorTitle,message:Bigmedia.Locales.authLoginByCodeErrorMsg,buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(g){if(g==='yes'){Ext.ComponentQuery.query('mainviewport')[0].getController().showPage('auth.reset')}else {var f=Ext.ComponentQuery.query('mainviewport');if(f){f=f[0]}if(f&&f.getViewModel().get('beforeLoginRouteId')){f.getController().redirectTo(f.getViewModel().get('beforeLoginRouteId'))}else {f.getController().redirectTo('faces')}}}})}})},onResetClick:function(c,e,d){var b=this,a=b.getViewModel();Ext.Ajax.request({url:'/api/v1/auth/password',params:{email:a.get('reset.email').trim(),locale:Bigmedia.Locales.currentLocale},success:function(a,b){Ext.ComponentQuery.query('mainviewport')[0].getController().showPage('auth.loginByCode')},failure:function(a,b){console.log('server-side failure with status code '+a.status);Ext.Msg.alert(Bigmedia.Locales.authPasswordResetErrorTitle,Bigmedia.Locales.authPasswordResetErrorMsg)}})}});Ext.define('Bigmedia.view.authentication.LockingWindow',{extend:Ext.window.Window,xtype:'lockingwindow',cls:'auth-locked-window',closable:!1,resizable:!1,autoShow:!0,titleAlign:'center',maximized:!0,modal:!0,frameHeader:!1,layout:{type:'vbox',align:'center',pack:'center'}});Ext.define('Bigmedia.view.authentication.CheckOutController',{extend:Ext.app.ViewController,alias:'controller.authentication-checkout'});Ext.define('Bigmedia.view.authentication.CheckOutFormController',{extend:Ext.app.ViewController,alias:'controller.authentication-checkoutform',onResetClick:function(){this.getView().getForm().reset()},onBackToCartClick:function(){var a=this.getView().up('checkoutdialog');a.close();window.location='#cart'},verifyAuthCode:function(){var a=this,b=a.getView().getForm();Ext.MessageBox.prompt(Bigmedia.Locales.checkoutFormMsgVerifyTitle,Bigmedia.Locales.checkoutFormMsgVerifyText,function(c,a,d){if(c==='ok'){if(+a===+this.authCode){this.showToast(Bigmedia.Locales.checkoutFormToastCodeVerified);b.submit({clientValidation:!0,params:{authCode:this.authCode,idOrder:this.idOrder}});this.onSuccessSubmit()}else {this.showToast(Bigmedia.Locales.checkoutFormToastCodeWrong);this.verifyAuthCode()}}else {this.showToast(Bigmedia.Locales.checkoutFormToastCodeCanceled)}},a)},onCompleteClick:function(){var a=this,c=a.getView().getForm();if(c.isValid()){var b=[],d=Ext.getStore('ShoppingCart');d.each(function(a){b.push(a.id)});if(b.length>0){c.submit({clientValidation:!1,params:{faces:b,locale:Bigmedia.Locales.currentLocale},success:function(d,b){var c=b.result.verified;a.idOrder=b.result.idOrder;a.authCode=b.result.authCode;if(!c){a.verifyAuthCode()}else {a.onSuccessSubmit()}},failure:function(b,a){switch(a.failureType){case Ext.form.action.Action.CLIENT_INVALID:Ext.Msg.alert('Failure','Form fields may not be submitted with invalid values');break;case Ext.form.action.Action.CONNECT_FAILURE:Ext.Msg.alert('Failure','Ajax communication failed');break;case Ext.form.action.Action.SERVER_INVALID:Ext.Msg.alert('Failure',a.result.msg);}}})}else {Ext.Msg.alert('Failure','Shopping cart is empty')}}},onSuccessSubmit:function(){var a=this,d=Ext.getStore('Faces'),b=Ext.getStore('ShoppingCart'),c=Ext.getCmp('headercart');Ext.MessageBox.show({msg:Bigmedia.Locales.cartPrepareItemsRemoveFromCartMsg,progressText:Bigmedia.Locales.cartPrepareItemsRemoveProgressText,width:300,wait:{interval:200},animateTarget:c});a.timer=Ext.defer(function(){b.removeAll();a.timer=null;Ext.MessageBox.hide();a.showToast("Order was sent successfully. We'll contact you as soon as possible.");a.redirectTo('#');var d=a.getView().up('checkoutdialog');d.close();var c=Ext.getCmp('mainView');if(c.getController().cartView){c.getController().cartView.close()}},500)},showToast:function(a,b){Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400,minWidth:400})}});Ext.define('Bigmedia.view.authentication.CheckOutFormModel',{extend:Ext.app.ViewModel,alias:'viewmodel.authentication-checkoutform',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.authentication.CheckOutForm',{extend:Ext.form.Panel,controller:'authentication-checkoutform',xtype:'form-checkout',frame:!0,title:Bigmedia.Locales.checkoutFormTitle,bodyPadding:5,url:'/api/v1/submitCheckout',jsonSubmit:!0,referenceHolder:!0,initComponent:function(){Ext.apply(this,{width:550,fieldDefaults:{labelAlign:'right',labelWidth:90,msgTarget:Ext.supports.Touch?'side':'qtip'},items:[{xtype:'fieldset',title:Bigmedia.Locales.checkoutFormFieldsetContactInfo,defaultType:'textfield',layout:'anchor',defaults:{anchor:'100%'},items:[{xtype:'fieldcontainer',fieldLabel:Bigmedia.Locales.checkoutFormNameLabel,layout:'hbox',combineErrors:!1,defaultType:'textfield',defaults:{hideLabel:'true'},items:[{name:'firstName',fieldLabel:Bigmedia.Locales.checkoutFormFirstNameLabel,flex:2,emptyText:Bigmedia.Locales.checkoutFormFirstNameEmpty,allowBlank:!1},{name:'lastName',fieldLabel:Bigmedia.Locales.checkoutFormLastNameLabel,flex:3,margin:'0 0 0 6',emptyText:Bigmedia.Locales.checkoutFormLastNameEmpty,allowBlank:!1}]},{fieldLabel:Bigmedia.Locales.checkoutFormEmailLabel,name:'email',vtype:'email',allowBlank:!1},{fieldLabel:Bigmedia.Locales.checkoutFormOrgLabel,name:'organization',allowBlank:!1},{xtype:'fieldcontainer',fieldLabel:Bigmedia.Locales.checkoutFormPhoneLabel,combineErrors:!1,msgTarget:'under',defaultType:'textfield',labelWidth:90,anchor:'100%',layout:'hbox',defaults:{hideLabel:!0,enforceMaxLength:!0,maskRe:/[0-9.]/},items:[{xtype:'displayfield',value:'(',margin:'0 2 0 0'},{fieldLabel:Bigmedia.Locales.checkoutFormPhoneCodeLabel,name:'phoneCode',width:45,allowBlank:!1,maxLength:3},{xtype:'displayfield',value:')',margin:'0 5 0 2'},{fieldLabel:Bigmedia.Locales.checkoutFormPhoneNumberLabel,name:'phoneNumber',allowBlank:!1,maxLength:8,width:150,emptyText:'xxxxxxx',maskRe:/[\d\-]/,regex:/^\d{7}$/,regexText:Bigmedia.Locales.checkoutFormPhoneNumberRegexText}]}]},{xtype:'fieldset',title:Bigmedia.Locales.checkoutFormPeriodTitle,layout:{type:'hbox',align:'stretch'},defaults:{format:'d.m.Y',minDate:new Date(Date.now()+86400000),maxDate:new Date(Date.now()+86400000*365)},items:[{xtype:'datefield',reference:'seldatebeg',name:'dateBeg',flex:1,filedLabel:Bigmedia.Locales.dlgCustomPeriodFrom,value:new Date(Date.now()+86400000),validator:function(d){var a=Ext.Date.parse(d,this.format),c=Bigmedia.Locales.dlgCustomPeriodBegErrMsg,b=this.up('form-checkout').lookupReference('seldateend');if(a&&+a<=+b.getValue()){b.clearInvalid();return !0}return c}},{xtype:'datefield',reference:'seldateend',name:'dateEnd',flex:1,filedLabel:Bigmedia.Locales.dlgCustomPeriodTo,value:new Date(Date.now()+86400000*31),validator:function(d){var a=Ext.Date.parse(d,this.format),c=Bigmedia.Locales.dlgCustomPeriodEndErrMsg,b=this.up('form-checkout').lookupReference('seldatebeg');if(a&&+a>=+b.getValue()){b.clearInvalid();return !0}return c}}]},{xtype:'fieldset',title:Bigmedia.Locales.checkoutFormDescrTitle,layout:'anchor',defaults:{anchor:'100%'},items:[{xtype:'textareafield',name:'note',fieldLabel:Bigmedia.Locales.checkoutFormNoteLabel,emptyText:Bigmedia.Locales.checkoutFormNoteEmpty}]},{xtype:'container',layout:{type:'hbox',align:'stretch'},items:[{xtype:'button',scale:'large',ui:'gray',iconAlign:'left',iconCls:'x-fa fa-angle-left',text:Bigmedia.Locales.checkoutFormBtnBackToCartText,listeners:{click:'onBackToCartClick'}},{xtype:'button',scale:'large',ui:'gray',iconAlign:'left',iconCls:'x-fa fa-square-o',text:Bigmedia.Locales.checkoutFormBtnClearFormText,listeners:{click:'onResetClick'}},{flex:1},{xtype:'button',scale:'large',ui:'soft-green',iconAlign:'left',iconCls:'x-fa fa-envelope',text:Bigmedia.Locales.checkoutFormBtnSendText,formBind:!0,listeners:{click:'onCompleteClick'}}]}]});this.callParent()}});Ext.define('Bigmedia.view.authentication.CheckOut',{extend:Bigmedia.view.authentication.LockingWindow,xtype:'checkoutdialog',controller:'authentication-checkout',title:Bigmedia.Locales.checkoutTitle,defaultFocus:'form-checkout',closable:!0,closeAction:'hide',items:[{xtype:'form-checkout'}],listeners:{close:function(a){window.location='#cart'}},initComponent:function(){this.addCls('user-login-register-container');this.callParent(arguments)}});Ext.define('Bigmedia.view.authentication.Dialog',{extend:Ext.form.Panel,xtype:'authdialog',controller:'authentication',viewModel:{type:'authentication'},defaultFocus:'textfield:focusable:not([hidden]):not([disabled]):not([value])',autoComplete:!1,initComponent:function(){var a=this,b;if(a.autoComplete){a.autoEl=Ext.applyIf(a.autoEl||{},{tag:'form',name:'authdialog',method:'post',onsubmit:'return false;'})}a.addCls('auth-dialog');a.callParent();if(a.autoComplete){b={afterrender:'doAutoComplete',scope:a,single:!0};Ext.each(a.query('textfield'),function(a){a.on(b)})}},doAutoComplete:function(a){if(a.inputEl&&a.autoComplete!==!1){a.inputEl.set({autocomplete:'on'})}}});Ext.define('Bigmedia.view.authentication.LockScreen',{extend:Bigmedia.view.authentication.LockingWindow,xtype:'lockscreen',title:'Session Expired',defaultFocus:'authdialog',items:[{xtype:'authdialog',reference:'authDialog',defaultButton:'loginButton',autoComplete:!1,width:455,cls:'auth-dialog-login',defaultFocus:'textfield[inputType=password]',layout:{type:'vbox',align:'stretch'},items:[{xtype:'container',cls:'auth-profile-wrap',height:120,layout:{type:'hbox',align:'center'},items:[{xtype:'image',height:80,margin:20,width:80,alt:'lockscreen-image',cls:'lockscreen-profile-img auth-profile-img',src:'resources/images/user-profile/2.png'},{xtype:'box',html:"<div class='user-name-text'> Goff Smith </div><div class='user-post-text'> Project manager </div>"}]},{xtype:'container',padding:'0 20',layout:{type:'vbox',align:'stretch'},defaults:{margin:'10 0'},items:[{xtype:'textfield',labelAlign:'top',cls:'lock-screen-password-textbox',labelSeparator:'',fieldLabel:"It's been a while. please enter your password to resume",emptyText:'Password',inputType:'password',allowBlank:!1,triggers:{glyphed:{cls:'trigger-glyph-noop password-trigger'}}},{xtype:'button',reference:'loginButton',scale:'large',ui:'soft-blue',iconAlign:'right',iconCls:'x-fa fa-angle-right',text:'Login',formBind:!0,listeners:{click:'onLoginButton'}},{xtype:'component',html:'<div style="text-align:right">'+'<a href="#authentication.login" class="link-forgot-password">'+'or, sign in using other credentials</a>'+'</div>'}]}]}]});Ext.define('Bigmedia.view.authentication.Login',{extend:Bigmedia.view.authentication.LockingWindow,xtype:'loginform',title:Bigmedia.Locales.authLoginFormTitle,defaultFocus:'authdialog',closable:!0,items:[{xtype:'authdialog',defaultButton:'loginButton',autoComplete:!0,bodyPadding:'20 20',cls:'auth-dialog-login',header:!1,width:415,layout:{type:'vbox',align:'stretch'},defaults:{margin:'5 0'},items:[{xtype:'label',text:Bigmedia.Locales.authLoginFormSignToAccountText},{xtype:'textfield',cls:'auth-textbox',name:'username',bind:'{username}',hideLabel:!0,allowBlank:!1,emptyText:Bigmedia.Locales.authLoginFormLoginEmptyText,triggers:{glyphed:{cls:'trigger-glyph-noop auth-email-trigger'}}},{xtype:'textfield',cls:'auth-textbox',hideLabel:!0,emptyText:Bigmedia.Locales.authLoginFormPasswordEmptyText,inputType:'password',name:'password',bind:'{password}',allowBlank:!1,triggers:{glyphed:{cls:'trigger-glyph-noop auth-password-trigger'}}},{xtype:'container',layout:'hbox',items:[{xtype:'checkboxfield',flex:1,cls:'form-panel-font-color rememberMeCheckbox',height:30,bind:'{rememberMe}',boxLabel:Bigmedia.Locales.authLoginFormRememberMeLabel},{xtype:'button',cls:'link-text',text:Bigmedia.Locales.authLoginFormForgotPasswordText,handler:function(){Ext.ComponentQuery.query('mainviewport')[0].getController().showPage('auth.reset')}}]},{xtype:'component',html:'<input type="submit" id="submitButton" style="display:none">'},{xtype:'button',reference:'loginButton',scale:'large',ui:'soft-green',iconAlign:'right',iconCls:'x-fa fa-angle-right',text:Bigmedia.Locales.authLoginFormLoginBtnText,formBind:!0,listeners:{click:'onLoginButton'}},{xtype:'box',html:'<div class="outer-div"><div class="separator">'+Bigmedia.Locales.authFormFieldSeparatorOR+'</div></div>',margin:'10 0'},{xtype:'button',scale:'large',ui:'soft-blue',iconAlign:'right',iconCls:'x-fa fa-facebook',text:Bigmedia.Locales.authLoginFormFacebookBtnText,listeners:{click:'onFaceBookLogin'}},{xtype:'box',html:'<div class="outer-div"><div class="separator">'+Bigmedia.Locales.authFormFieldSeparatorOR+'</div></div>',margin:'10 0'},{xtype:'button',scale:'large',ui:'gray',iconAlign:'right',iconCls:'x-fa fa-user-plus',text:Bigmedia.Locales.authLoginFormSignupBtnText,listeners:{click:'onNewAccount'}}]}],initComponent:function(){this.addCls('user-login-register-container');this.callParent(arguments)}});Ext.define('Bigmedia.view.authentication.LoginByCode',{extend:Bigmedia.view.authentication.LockingWindow,xtype:'loginbycode',title:Bigmedia.Locales.authLoginByCodeTitle,closable:!0,defaultFocus:'authdialog',items:[{xtype:'authdialog',width:455,defaultButton:'loginByCodeBtn',autoComplete:!0,bodyPadding:'20 20',layout:{type:'vbox',align:'stretch'},defaults:{margin:'10 0'},cls:'auth-dialog-login',items:[{xtype:'label',cls:'lock-screen-top-label',text:Bigmedia.Locales.authLoginByCodeEnterCodeLabel},{xtype:'textfield',cls:'auth-textbox',reference:'inputcode',height:55,name:'code',bind:{value:'{reset.code}'},hideLabel:!0,allowBlank:!1,emptyText:Bigmedia.Locales.authLoginByCodeEnterCodeEmptyText,triggers:{glyphed:{cls:'trigger-glyph-noop auth-email-trigger'}}},{xtype:'button',reference:'loginByCodeBtn',scale:'large',ui:'soft-blue',formBind:!0,iconAlign:'right',iconCls:'x-fa fa-angle-right',text:Bigmedia.Locales.authLoginFormLoginBtnText,listeners:{click:'onLoginByCodeClick'}}]}]});Ext.define('Bigmedia.view.authentication.PasswordReset',{extend:Bigmedia.view.authentication.LockingWindow,xtype:'passwordreset',title:Bigmedia.Locales.authResetPasswordFormTitle,closable:!0,defaultFocus:'authdialog',items:[{xtype:'authdialog',width:455,defaultButton:'resetPassword',autoComplete:!0,bodyPadding:'20 20',layout:{type:'vbox',align:'stretch'},defaults:{margin:'10 0'},cls:'auth-dialog-login',items:[{xtype:'label',cls:'lock-screen-top-label',text:Bigmedia.Locales.authResetPasswordEmailLabel},{xtype:'textfield',cls:'auth-textbox',height:55,name:'email',bind:{value:'{reset.email}'},hideLabel:!0,allowBlank:!1,emptyText:'user@example.com',vtype:'email',triggers:{glyphed:{cls:'trigger-glyph-noop auth-email-trigger'}}},{xtype:'button',reference:'resetPassword',scale:'large',ui:'soft-blue',formBind:!0,iconAlign:'right',iconCls:'x-fa fa-angle-right',text:Bigmedia.Locales.authResetPasswordFormResetBtnText,listeners:{click:'onResetClick'}}]}]});Ext.define('Bigmedia.view.authentication.Register',{extend:Bigmedia.view.authentication.LockingWindow,xtype:'authregister',title:Bigmedia.Locales.authRegisterFormTitle,defaultFocus:'authdialog',closable:!0,items:[{xtype:'authdialog',bodyPadding:'20 20',width:455,reference:'authDialog',referenceHolder:!0,defaultButton:'submitButton',autoComplete:!0,cls:'auth-dialog',layout:{type:'vbox',align:'stretch'},defaults:{margin:'10 0',selectOnFocus:!0},items:[{xtype:'label',cls:'lock-screen-top-label',text:Bigmedia.Locales.authRegisterFormCreateAccountLabel},{xtype:'textfield',cls:'auth-textbox',hideLabel:!0,allowBlank:!1,emptyText:Bigmedia.Locales.authRegisterFormFullnameEmptyText,name:'fullName',bind:'{signup.fullName}',triggers:{glyphed:{cls:'trigger-glyph-noop auth-email-trigger'}}},{xtype:'textfield',cls:'auth-textbox',hideLabel:!0,allowBlank:!1,emptyText:Bigmedia.Locales.authRegisterFormOrgNameEmptyText,name:'orgName',bind:'{signup.orgName}',triggers:{glyphed:{cls:'trigger-glyph-noop auth-email-trigger'}}},{xtype:'textfield',cls:'auth-textbox',hideLabel:!0,allowBlank:!1,name:'userid',bind:'{signup.username}',maskRe:/[\d\.@a-zA-Z_]/i,invalidText:Bigmedia.Locales.dlgRegisterLoginErrMsg,emptyText:Bigmedia.Locales.authRegisterFormLoginEmptyText,triggers:{glyphed:{cls:'trigger-glyph-noop auth-email-trigger'}}},{xtype:'textfield',cls:'auth-textbox',hideLabel:!0,allowBlank:!1,name:'email',emptyText:'user@example.com',vtype:'email',bind:'{signup.email}',allowBlank:!1,triggers:{glyphed:{cls:'trigger-glyph-noop auth-envelope-trigger'}}},{xtype:'textfield',cls:'auth-textbox',hideLabel:!0,emptyText:Bigmedia.Locales.authRegisterFormPasswordEmptyText,reference:'password',itemId:'password',name:'password',inputType:'password',bind:'{signup.password}',allowBlank:!1,triggers:{glyphed:{cls:'trigger-glyph-noop auth-password-trigger'}},listeners:{validitychange:'validatePwd',blur:'validatePwd'}},{xtype:'textfield',cls:'auth-textbox',hideLabel:!0,allowBlank:!1,emptyText:Bigmedia.Locales.authRegisterFormConfirmPasswordEmptyText,reference:'confirmpassword',name:'confirmpassword',inputType:'password',initialPassField:'password',vtype:'password',triggers:{glyphed:{cls:'trigger-glyph-noop auth-password-trigger'}}},{xtype:'checkbox',flex:1,name:'agrees',cls:'form-panel-font-color rememberMeCheckbox',height:32,bind:'{signup.agrees}',allowBlank:!1,boxLabel:Bigmedia.Locales.dlgRegisterAgreeBoxMsg,isValid:function(){var a=this;return a.checked||a.disabled}},{xtype:'button',scale:'large',ui:'soft-blue',formBind:!0,reference:'submitButton',bind:!1,margin:'5 0',iconAlign:'right',iconCls:'x-fa fa-angle-right',text:Bigmedia.Locales.authRegisterFormSignupBtnText,listeners:{click:'onSignupClick'}},{xtype:'box',html:'<div class="outer-div"><div class="separator">'+Bigmedia.Locales.authFormFieldSeparatorOR+'</div></div>'},{xtype:'button',scale:'large',ui:'soft-blue',margin:'5 0',iconAlign:'right',iconCls:'x-fa fa-facebook',text:Bigmedia.Locales.authLoginFormFacebookBtnText,listeners:{click:'onFaceBookLogin'}}]}]});Ext.define('Bigmedia.view.wizard.WizardFormModel',{extend:Ext.app.ViewModel,alias:'viewmodel.wizardform',formulas:{nextDisabled:function(a){return a('atEnd')||a('isUncompleted')}},data:{atBeginning:!0,atEnd:!1,isUncompleted:!0}});Ext.define('Bigmedia.view.wizard.WizardFormController',{extend:Ext.app.ViewController,alias:'controller.wizardform',onNextClick:function(a){var b=a.up('panel');b.getViewModel().set('atBeginning',!1);this.navigate(a,b,'next')},goNext:function(){var a=this.getView();a.getViewModel().set('atBeginning',!1);this.navigate(null,a,'next')},goPrevious:function(){var a=this.getView();a.getViewModel().set('atEnd',!1);this.navigate(null,a,'prev')},onPreviousClick:function(a){var b=a.up('panel');b.getViewModel().set('atEnd',!1);this.navigate(a,b,'prev')},navigate:function(m,b,j){var f=b.getLayout(),l=this.lookupReference('progress'),i=b.getViewModel(),g=l.items.items,c,d,e,a;var h=f.getActiveItem(),k=h?b.items.indexOf(h):-1;f[j]();e=f.getActiveItem();a=b.items.indexOf(e);this.getView().fireEventArgs('curpagechanged',[k,a]);for(d=0;d<g.length;d++){c=g[d];if(a===c.step){c.setPressed(!0)}else {c.setPressed(!1)}if(Ext.isIE8){c.btnIconEl.syncRepaint()}}e.focus();if(a===0){i.set('atBeginning',!0)}if(a===b.items.length-1){i.set('atEnd',!0)}this.getView().updateNavigation()},goTo:function(b,a){var i=b.getLayout();var e=b.items.getAt(a);if(!e){return}var h=this.lookupReference('progress'),g=b.getViewModel(),f=h.items.items,c,d,k,j;i.setActiveItem(e);for(d=0;d<f.length;d++){c=f[d];if(a===c.step){c.setPressed(!0)}else {c.setPressed(!1)}}g.set('atBeginning',a===0);g.set('atEnd',a===b.items.length-1);this.getView().updateNavigation();return e}});Ext.define('Bigmedia.view.wizard.WizardForm',{extend:Ext.panel.Panel,xtype:'wizardform',bodyPadding:15,height:340,config:{tempStore:null},layout:'card',viewModel:{type:'wizardform'},cls:'wizardthree',controller:'wizardform',defaults:{defaultFocus:'textfield:not([value]):focusable:not([disabled])',defaultButton:'nextbutton'},tbar:{reference:'progress',defaultButtonUI:'wizard-soft-green',cls:'wizardprogressbar',defaults:{disabled:!0,iconAlign:'top',enableToggle:!0},layout:{pack:'center'}},bbar:{reference:'navigation-toolbar',margin:8,items:['->',{text:Bigmedia.Locales.wizardPreviousBtnText,ui:'soft-green',formBind:!0,reference:'prevbutton',bind:{disabled:'{atBeginning}'},listeners:{click:'onPreviousClick'}},{text:Bigmedia.Locales.wizardNextBtnText,ui:'soft-green',formBind:!0,reference:'nextbutton',bind:{disabled:'{nextDisabled}'},listeners:{click:'onNextClick'}}]},items:[],initComponent:function(){var a=this;a.callParent();var b=a.getDockedItems('toolbar[dock="top"]')[0],e=a.getDockedItems('toolbar[dock="bottom"]')[0],c=a.getLayout(),d=c.getLayoutItems();d.forEach(function(c,d){if(c.getTitle()){b.add({step:d,pressed:d==0,iconCls:c.getIconCls(),text:c.getTitle()})}else {b.add({step:d,text:''})}c.on('pagechanged',a.updateNavigation,a)})},updateNavigation:function(){var b=this,c=b.getLayout(),a=c.getActiveItem(),f=b.getViewModel(),e=b.lookup('prevbutton'),d=b.lookup('nextbutton');f.set({isUncompleted:!a.getIsCompleted()});e.setHidden(a.hideNavButtons||a.hidePrevButton);d.setHidden(a.hideNavButtons||a.hideNextButton)},goNext:function(){this.getController().goNext()},goPrevious:function(){this.getController().goPrevious()},goTo:function(b){var a=this;a.getController().goTo(a,b)},getActivePage:function(){var b=this,a=b.getLayout();return a.getActiveItem()},getActiveIndex:function(){var a=this;return a.items.indexOf(a.getActivePage())}});Ext.define('Bigmedia.view.dialog.DlgAddToCampaign',{extend:Ext.window.Window,viewModel:{data:{curCamp:null,defaultManagerId:911}},width:700,minWidth:400,height:500,minHeight:380,modal:!0,closable:!0,title:Bigmedia.Locales.dlgAddToCampaignTitle,referenceHolder:!0,layout:'fit',items:[{xtype:'wizardform',reference:'wizard',defaults:{header:!1},items:[{xtype:'wizardpage',title:Bigmedia.Locales.dlgAddToCampaignSelectTitle,reference:'campaignscard',iconCls:'x-fa fa-briefcase',defaults:{margin:'0 0 10 0'},layout:'vbox',items:[{xtype:'toolbar',dock:'top',layout:{type:'hbox'},width:'100%',items:[{xtype:'textfield',flex:1,name:'searchCamp',emptyText:Bigmedia.Locales.campViewSearchCampEmptyText,enableKeyEvents:!0,listeners:{change:function(b,c,d){var a=b.up('toolbar').nextSibling('campdataview').getStore();if(b.getValue()){a.removeFilter('filterName',!0);a.addFilter(new Ext.util.Filter({id:'filterName',filterFn:function(a){var e=new RegExp(c,'i');return e.test(a.get('name'))}}))}else {a.removeFilter('filterName')}}}}]},{xtype:'campdataview',reference:'campaignsDataView',tpl:new Ext.XTemplate('<tpl for=".">','<div class="campview-item camp-preview-100 shadow camp-dataitem">','<div class="camp-picture"','<tpl if="this.hasSubject(subjectId) == true"> style="background-image: url(/api/v1/subjects/{subjectId}/image.jpeg)"</tpl>>','<div class="camp-info">','<div class="camp-name">{name}</div>','<div class="camp-period">{startDate:date("d.m.Y")}&nbsp;-&nbsp;{endDate:date("d.m.Y")}</div>','</div>','</div>','</div>','</tpl>',{formatDate:function(a){return Ext.Date.format(a,'d.m.Y')},hasSubject:function(a){return !!a}}),bind:{store:'{campaigns}',selection:{bindTo:'{curCamp}'}},width:'100%',flex:1,listeners:{itemclick:function(a,b){var d=a.getStore().getSource(),e=a.up('window'),c=a.up('wizardform');d.rejectChanges();e.getViewModel().set('curCamp',b);c.getController().goNext()}}},{xtype:'button',ui:'soft-green',scale:'large',iconCls:'fa fa-plus-square',width:'100%',text:Bigmedia.Locales.campaignsCreateNewCampaignText,handler:function(e){var a=e.previousSibling(),b=a.getStore().getSource(),f=a.up('window'),d=a.up('wizardform'),g=Bigmedia.Vars.getUser();b.rejectChanges();var c=b.add({})[0];f.getViewModel().set('curCamp',c);d.getController().goNext()}}]},{xtype:'wizardpage',reference:'infopage',title:Bigmedia.Locales.dlgAddToCampaignEditTitle,iconCls:'fa fa-info',layout:'fit',items:[{xtype:'form',reference:'infoform',defaultType:'textfield',modelValidation:!0,defaults:{labelWidth:90,labelAlign:'top',labelSeparator:'',submitEmptyText:!1,anchor:'100%'},items:[{fieldLabel:Bigmedia.Locales.dlgAddToCampaignNameLabel,emptyText:Bigmedia.Locales.dlgAddToCampaignNameEmptyText,bind:{value:'{curCamp.name}'}},{xtype:'fieldcontainer',fieldLabel:Bigmedia.Locales.dlgAddToCampaignPeriodLabel,layout:'hbox',items:[{xtype:'datefield',flex:1,bind:{value:'{curCamp.startDate}'},listeners:{change:function(e,c,d){var b=c,a=e.nextSibling(),f=Math.round(+c-+d);if(b&&+b<=+a.getValue()){a.clearInvalid();a.checkChange()}else {a.setValue(new Date(+a.getValue()+f))}}}},{xtype:'datefield',flex:1,bind:{value:'{curCamp.endDate}'},listeners:{change:function(f,c,d){var b=c,a=this.previousSibling(),e=Math.round(+d-+c);if(b&&+b>=+a.getValue()){a.clearInvalid();a.checkChange()}else {a.setValue(new Date(+a.getValue()-e))}}}}]}],listeners:{validitychange:function(b,a){b.owner.up('wizardpage').setIsCompleted(a)}}}]},{xtype:'wizardpage',title:Bigmedia.Locales.dlgAddToCampaignSetPeriodLabel,reference:'period',iconCls:'x-fa fa-calendar',layout:'fit',items:[{xtype:'form',reference:'periodform',defaultType:'datefield',defaults:{labelWidth:90,labelAlign:'top',labelSeparator:'',submitEmptyText:!1,anchor:'100%'},items:[{fieldLabel:Bigmedia.Locales.fieldStartDateLabel,itemId:'startDate',name:'startDate',reference:'startDate',validator:function(d){var a=Ext.Date.parse(d,this.format),c=Bigmedia.Locales.dlgCustomPeriodBegErrMsg,b=this.up('form').child('#endDate');if(a&&+a<=+b.getValue()){b.clearInvalid();return !0}return c},listeners:{change:function(e,c,d){var b=c,a=e.nextSibling(),f=Math.round(+c-+d);if(b&&+b<=+a.getValue()){a.clearInvalid();a.checkChange()}else {a.setValue(new Date(+a.getValue()+f))}}}},{fieldLabel:Bigmedia.Locales.fieldEndDateLabel,itemId:'endDate',name:'endDate',reference:'endDate',validator:function(d){var a=Ext.Date.parse(d,this.format),c=Bigmedia.Locales.dlgCustomPeriodEndErrMsg,b=this.up('form').child('#startDate');if(a&&+a>=+b.getValue()){b.clearInvalid();return !0}return c},listeners:{change:function(f,c,d){var b=c,a=this.previousSibling(),e=Math.round(+d-+c);if(b&&+b>=+a.getValue()){a.clearInvalid();a.checkChange()}else {a.setValue(new Date(+a.getValue()-e))}}}}],listeners:{validitychange:function(b,a){b.owner.up('wizardpage').setIsCompleted(a)}}}],listeners:{show:function(c){var g=c.up('window'),a=g.lookupViewModel().get('curCamp'),b=c.down('datefield#startDate'),d=c.down('datefield#endDate');b.setMinValue(a.get('startDate'));b.setMaxValue(a.get('endDate'));d.setMinValue(a.get('startDate'));d.setMaxValue(a.get('endDate'));var f=new Date(),e=new Date(Date.UTC(f.getFullYear(),f.getMonth()+1,1));if(Ext.Date.between(e,a.get('startDate'),a.get('endDate'))){b.setValue(e)}else {b.setValue(a.get('startDate'))}d.setValue(a.get('endDate'))}}},{xtype:'wizardpage',title:Bigmedia.Locales.dlgAddToCampaignFinishTitle,iconCls:'x-fa fa-flag-checkered',layout:{type:'vbox',pack:'center',align:'middle'},html:'<h4>'+Bigmedia.Locales.dlgAddToCampaignReadyText+'</h4>',items:[{xtype:'button',scale:'large',ui:'soft-green',text:Bigmedia.Locales.dlgAddToCampaignSaveBtnText,handler:function(a){var d=a.up('window').getViewModel().getStore('campaigns').getSource(),c=a.up('window').lookupViewModel().get('curCamp'),b=a.nextSibling('progressbar');b.show();b.wait({text:'Saving data...'});function bulkSaveProposals(f){var h=Ext.getStore('ShoppingCart'),g=[],d=a.up('wizardform').down('datefield#startDate').getValue(),e=a.up('wizardform').down('datefield#endDate').getValue();d=Ext.Date.localToUtc(d);e=Ext.Date.localToUtc(e);h.each(function(b){g.push('<face date_beg="'+Ext.Date.format(d,'Y-m-d')+'" date_end="'+Ext.Date.format(e,'Y-m-d')+'" id="'+b.getId()+'"></face>')});Ext.Ajax.request({url:'/api/v1/campaigns/'+encodeURIComponent(c.getId())+'/bulkAddProposals',params:{faces:g.join(''),doorsNums:'',startDate:d,endDate:e},success:function(){b.reset();b.updateText('Done!');var c=Ext.getStore('ShoppingCart');c.removeAll();if(f){f()}b.hide()},failure:function(){b.reset();b.updateText('Error');storeProps.rejectChanges();if(f){f()}b.hide()}})}if(c.dirty||c.phantom){d.sync({success:function(){bulkSaveProposals(function(){a.up('window').destroy();a.lookupController().redirectTo('campaigns/'+c.get('id'))})},failure:function(){d.rejectChanges()}})}else {bulkSaveProposals(function(){a.up('window').destroy();a.lookupController().redirectTo('campaigns/'+c.get('id'))})}}},{xtype:'progressbar',reference:'progressbar',width:'100%',margin:20,hidden:!0,value:0}]}]}],onCurCamp:function(b){var d=this,c=d.lookupReference('wizard'),a=c.lookupReference('campaignscard');if(a){a.setIsCompleted(!!b)}},initComponent:function(){var a=this;a.callParent();a.getViewModel().bind('{curCamp}',a.onCurCamp,a);var e=Ext.ComponentQuery.query('mainviewport')[0],g=e.getController().getRestrictedArea();a.getViewModel().setStores({campaigns:{source:g.getViewModel().getStore('campaigns'),sorters:[{property:'name',direction:'ASC'}]}});var f=Bigmedia.Vars.getUser(),d=a.lookupReference('wizard'),c=d.lookupReference('infoform'),b=Ext.create('Ext.data.Store',{fields:['id','name'],data:f.get('org').managers.map(function(a){return {id:a.id,name:a.firstName+' '+a.lastName}})});if(b.getCount()>0){a.getViewModel().set('defaultManagerId',b.getAt(0).getId())}else {a.getViewModel().set('defaultManagerId',911)}if(b.getCount()>1){c.add(Ext.create('Ext.form.field.ComboBox',{reference:'managers',queryMode:'local',displayField:'name',valueField:'id',fieldLabel:'Manager',bind:{value:'{curCamp.managerId}'},store:b}))}else {if(b.getCount()===1){c.add(Ext.create('Ext.form.field.Text',{readOnly:!0,fieldLabel:'Manager',value:b.getAt(0).get('name')}))}else {a.noManagers=!0}}}});Ext.define('Bigmedia.view.authentication.ShoppingCartController',{extend:Ext.app.ViewController,alias:'controller.authentication-shoppingcart',listen:{store:{'#ShoppingCart':{add:'onShoppingCartChange',remove:'onShoppingCartChange'}}},init:function(){var a=this;this.callParent();a.onUserChanged();Bigmedia.Vars.on('userchanged',a.onUserChanged,a)},onUserChanged:function(){var b=this.getViewModel(),a=Bigmedia.Vars.getUser();b.set('isAnonymous',!a||a.get('id')==='anonymous')},onShoppingCartChange:function(a){this.updateStatusBar(a)},onCheckoutButton:function(){},backToFaces:function(){this.getView().close();this.redirectTo('#faces')},onCampaignButton:function(f){var c=this,b=c.lookupReference('cartGrid'),d=Ext.getStore('Faces'),e=b.getStore(),a=Bigmedia.Vars.getViewport();a.getController().setCurrentView('dialog.DlgAddToCampaign')},removeItemFromCart:function(d){var a=d.getWidgetRecord();var b=Ext.getStore('Faces'),c=Ext.getStore('ShoppingCart');b.getById(a.id).set({inCart:!1,selected:!1},{silent:!0});c.remove(a);this.showToast(Bigmedia.Locales.cartRemoveItemToastText)},onDoubleClick:function(f,g,c,b,h,d,i,e){var a=Ext.getCmp('mainView');if(a){a.detFace.showFace(b.getId())}},removeFromCart:function(){var b=this,c=b.lookupReference('cartGrid'),a=Ext.getStore('Faces'),d=c.getStore(),e=Ext.getCmp('headercart');Ext.MessageBox.show({msg:Bigmedia.Locales.cartPrepareItemsRemoveFromCartMsg,progressText:Bigmedia.Locales.cartPrepareItemsRemoveProgressText,width:300,wait:{interval:200},animateTarget:e});b.timer=Ext.defer(function(){var e=c.getSelection();a.beginUpdate();a.suspendEvents(!0);c.getSelection().forEach(function(c){var b=a.getById(c.id);b.set({inCart:!1,selected:!1},{silent:!0})});d.remove(e);a.resumeEvents();a.endUpdate();b.timer=null;Ext.MessageBox.hide();b.showToast(Bigmedia.Locales.cartRemoveItemsToastText)},500)},onGridSelectionChange:function(a){this.updateStatusBar(a.getStore())},updateStatusBar:function(g){var a=this,j=a.getView(),h=a.lookupReference('cartGrid'),i=a.lookupReference('statusCartGrid'),c=g.getCount(),b=h.getSelectionModel().getCount();status=Ext.String.format(Bigmedia.Locales.statusBarTotal,c);if(b>0){status+=' | '+Ext.String.format(Bigmedia.Locales.statusBarChecked,b)}var f=a.lookupReference('exportbtn'),d=a.lookupReference('removefromcartbtn'),e=a.lookupReference('checkoutBtn').setDisabled();f.setDisabled(c==0&&b==0);d.setDisabled(b==0);e.setDisabled(c==0);i.setStatus({text:status,iconCls:'ready-icon'})},exportToExcel:function(b){Ext.MessageBox.show({msg:Bigmedia.Locales.exportExcelSavingData,progressText:Bigmedia.Locales.exportExcelProgressText,width:300,wait:{interval:200},animateTarget:b});var a=this;a.timer=Ext.defer(function(){Bigmedia.GridExport.exportToExcel(a.lookupReference('cartGrid'),'bigmedia_cart.xlsx',function(){},!0);a.timer=null;Ext.MessageBox.hide();a.showToast(Bigmedia.Locales.exportExcelFileSaved,Bigmedia.Locales.exportExcelDone)},3000)},showToast:function(a,b){Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400,minWidth:400})},destroy:function(){if(this.timer){window.clearTimeout(this.timer)}Ext.Msg.hide();this.callParent()}});Ext.define('Bigmedia.view.authentication.ShoppingCartModel',{extend:Ext.app.ViewModel,alias:'viewmodel.authentication-shoppingcart',data:{name:'Bigmedia'}});Ext.define('OccupancyStateWidget',{extend:Ext.sparkline.BarBase,alias:'widget.occupancystate',occSold:'Sold',occFree:'Free',occReserved:'Sold',occTempReserved:'Reserved',occUnknown:'Unknown',occDemounted:'Demounted',config:{barWidth:16,barSpacing:2,freeBarColor:'#6f6',soldBarColor:'#C92424',unknownBarColor:'#999',demountedBarColor:'#333',tempReservedBarColor:'#edd400',reservedBarColor:'#ff0000',colorMap:{},tipTpl:new Ext.XTemplate('{value:this.states}',{states:function(b){var a=b;if(a.periods.length==1){res='&#9679; '+Ext.Date.monthNames[a.month-1]+'&#39;'+a.year.toString().slice(-2)+': ';switch(a.periods[0].status){case 'r':res+=a.widget.occReserved;break;case 't':res+=a.widget.occTempReserved;break;case 's':res+=a.widget.occSold;break;case 'f':res+=a.widget.occFree;break;case 'd':res+=a.widget.occDemounted;break;default:res+=a.widget.occUnknown;}}else {res=b.widget.genCalendar(b)}return res}})},genCalendar:function(c){var e=this;var i=new Date(Date.UTC(c.year,+c.month-1,1));var q=i.getUTCDate(),h=i.getUTCMonth(),j=i.getUTCFullYear();var n=new Date(Date.UTC(j,h,1));var p=new Date(Date.UTC(j,h+1,1));var k=n.getUTCDay();var m=c.days;var l=1;var a='<table style="background-color:#666699; color:#ffffff;">';a+='<tr><td colspan="7" style="background-color:#9999cc; color:#000000; text-align: center;">'+Ext.Date.monthNames[h]+' '+j+'</td></tr>';a+='<tr>';for(var d=l;d<k;d++){a+='<td style="background-color:#9999cc; color:#000000;"> </td>'}d=k;var b=c.periods[0],o=0,g=b.days;for(var f=1;f<=m;f++){d%=7;if(d==l){a+='</tr><tr>'}a+='<td style="text-align: center; ';if(f<c.day||g==0){a+='background-color: #aaaaaa; color: #fff'}else {if(b.status=='r'){a+='background-color: '+e.config.reservedBarColor+'; color: #000'}else {if(b.status=='t'){a+='background-color: '+e.config.tempReservedBarColor+'; color: #000'}else {if(b.status=='s'){a+='background-color: '+e.config.soldBarColor+'; color: #000'}else {if(b.status=='f'){a+='background-color: '+e.config.freeBarColor+'; color: #000'}else {if(b.status=='d'){a+='background-color: '+e.config.demountedBarColor+'; color: #000'}else {a+='background-color: '+e.config.unknownBarColor+'; color: #000'}}}}}g--;if(g==0){if(b=c.periods[++o]){g=b.days}}}a+='">'+f+'</td>';d++}a+='</tr>';a+='</table>';return a},applyColorMap:function(b){var a=this;if(Ext.isArray(b)){a.colorMapByIndex=b;a.colorMapByValue=null}else {a.colorMapByIndex=null;a.colorMapByValue=b;if(a.colorMapByValue&&a.colorMapByValue.get==null){a.colorMapByValue=new Ext.sparkline.RangeMap(b)}}return b},applyValues:function(i){var k=this;var b=[],m=[],e=new Date(),c=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()+1)),g=[c.getUTCDate(),c.getUTCMonth()+1,c.getUTCFullYear()];var h=function(a,b,c){this.day=c||1;if(b>12){this.month=1;this.year=a+1}else {this.month=b;this.year=a}this.days=(new Date(Date.UTC(a,b,0))).getUTCDate();this.emptyDays=this.days-this.day+1;this.periods=[];this.widget=k;this.addPeriod=function(f,g){var e=f-this.emptyDays;var d={};d.status=g;if(e<=0){d.days=f;this.emptyDays=Math.abs(e)}else {d.days=this.emptyDays;this.emptyDays=0}if(d.days>0){this.periods.push(d)}return e}};var a=new h(+g[2],+g[1],+g[0]);var f,l=/(\d+)(\w)/g;while((f=l.exec(i))!=null){var d=+f[1],j=f[2];while(d>0){if(a.emptyDays==0){b.push(a);a=new h(a.year,a.month+1)}d=a.addPeriod(d,j)}}b.push(a);return b},onUpdate:function(){this.totalBarWidth=this.getBarWidth()+this.getBarSpacing()},getBarWidth:function(){var a=this.values;return this._barWidth||(this.getWidth()-(a.length-1)*this.getBarSpacing())/a.length},getRegion:function(a,b){return Math.floor(a/this.totalBarWidth)},getRegionFields:function(a){return {isNull:this.values[a]==null,value:this.values[a],offset:a}},calcColor:function(h,c){var b=this,g=b.values,d=b.colorMapByIndex,e=b.colorMapByValue,a,f;if(e&&(f=e.get(h))){a=f}else {if(d&&d.length>c){a=d[c]}else {if(g[c]<0){a=b.getNegBarColor()}else {if(g[c]>0){a=b.getPosBarColor()}else {a=b.getZeroBarColor()}}}}return a},getColorByStatus:function(b){var a;switch(b){case 'r':a=this.config.reservedBarColor;break;case 's':a=this.config.soldBarColor;break;case 't':a=this.config.tempReservedBarColor;break;case 'f':a=this.config.freeBarColor;break;case 'd':a=this.config.demountedBarColor;break;default:a=this.config.unknownBarColor;}return a},renderRegion:function(e,k){var a=this,l=a.values,f=a.canvas,d,g,j,h,i,b;d=f.pixelHeight;j=Math.round(d/2);h=e*a.totalBarWidth;i=0;g=d;var c=l[e];if(c){c.periods.reduce(function(j,l,n,m){var d;if(j<a.getBarWidth()){d=Math.round(l.days*a.getBarWidth()/c.days);if(d==0){d=1}if(j+d>a.getBarWidth()){d=a.getBarWidth()-j}b=a.getColorByStatus(l.status);if(k){b=a.calcHighlightColor(b)}f.drawRect(h+j,i,d-1,g-1,b,b).append()}return j+d},Math.round(c.day*a.getBarWidth()/c.days))}}});Ext.define('Bigmedia.locale.en.OccupancyStateWidget',{override:'OccupancyStateWidget',occSold:'Sold',occFree:'Free',occReserved:'Reserved',occTempReserved:'Temporary Reserved',occUnknown:'Unknown',occDemounted:'Demounted'});Ext.define('Bigmedia.view.authentication.ShoppingCart',{extend:Bigmedia.view.authentication.LockingWindow,xtype:'shoppingcartform',title:Bigmedia.Locales.cartTitle,closable:!0,closeAction:'hide',layout:'center',controller:'authentication-shoppingcart',viewModel:{data:{isAnonymous:!0}},items:[{xtype:'panel',bodyPadding:'20 20',cls:'auth-dialog-login',header:!1,scrollable:!0,width:'70%',height:'80%',layout:{type:'vbox',align:'stretch',pack:'center'},defaults:{margin:'5 0'},items:[{xtype:'grid',id:'cartGrid',reference:'cartGrid',flex:1,store:'ShoppingCart',selModel:{type:'checkboxmodel',checkOnly:!0},bbar:{xtype:'statusbar',reference:'statusCartGrid',defaultText:'',defaultIconCls:'default-icon',text:'Ready',iconCls:'ready-icon',busyText:Bigmedia.Locales.statusBarLoading,items:[{text:Bigmedia.Locales.cartBtnRemoveFromCart,reference:'removefromcartbtn',iconCls:'x-fa fa-trash',disabled:!0,listeners:{click:'removeFromCart'}},{reference:'exportbtn',text:Bigmedia.Locales.gridBtnExportToExcelText,iconCls:'x-fa fa-file-excel-o',listeners:{click:'exportToExcel'}}]},columns:[{xtype:'rownumberer',width:40,sortable:!1,locked:!0},{text:Bigmedia.Locales.colFaceNum,sortable:!0,dataIndex:'num',groupable:!1,width:80},{text:Bigmedia.Locales.colCity,sortable:!0,dataIndex:'city',groupable:!1,width:120,filter:'list'},{text:Bigmedia.Locales.colAddress,sortable:!0,dataIndex:'address',flex:1,groupable:!1,width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:Bigmedia.Locales.colCat,sortable:!0,dataIndex:'catab',groupable:!1,width:40,filter:'list'},{text:Bigmedia.Locales.colSize,sortable:!0,dataIndex:'size',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colNetwork,sortable:!0,dataIndex:'network',groupable:!1,hidden:!0,width:100,filter:'list'},{text:Bigmedia.Locales.colZone,sortable:!0,dataIndex:'zone',groupable:!1,width:90,filter:'list'},{text:Bigmedia.Locales.colGRP,sortable:!0,dataIndex:'grp',groupable:!1,width:60,hidden:!0,filter:'number'},{text:Bigmedia.Locales.colOTS,sortable:!0,dataIndex:'ots',groupable:!1,width:60,hidden:!0,filter:'number'},{text:Bigmedia.Locales.colDoorsNo,sortable:!0,dataIndex:'doors_no',groupable:!1,width:60,hidden:!0,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:Bigmedia.Locales.colOccupancy,sortable:!1,dataIndex:'occupancy',xtype:'widgetcolumn',width:220,minWidth:150,hidden:!0,widget:{xtype:'occupancystate'}},{width:40,xtype:'widgetcolumn',draggable:!1,hideable:!1,groupable:!1,sortable:!1,menuDisabled:!0,tooltip:Bigmedia.Locales.cartBtnRemoveItemTooltip,widget:{xtype:'button',cls:'delete-focus-bg',ui:'shopping-cart',iconCls:'x-fa fa-trash',listeners:{click:'removeItemFromCart'}}}],listeners:{celldblclick:'onDoubleClick',selectionchange:'onGridSelectionChange'}},{xtype:'container',layout:{type:'hbox',align:'stretch'},items:[{xtype:'button',scale:'large',ui:'gray',iconAlign:'left',iconCls:'x-fa fa-angle-left',text:Bigmedia.Locales.cartBtnBackToFacesText,handler:'backToFaces'},{flex:1},{xtype:'button',reference:'campaignBtn',scale:'large',ui:'soft-green',iconAlign:'right',iconCls:'x-fa fa-briefcase',text:Bigmedia.Locales.cartBtnCampaignText,bind:{hidden:'{isAnonymous}'},listeners:{click:'onCampaignButton'}},{xtype:'button',reference:'checkoutBtn',scale:'large',ui:'soft-green',iconAlign:'right',iconCls:'x-fa fa-angle-right',bind:{hidden:'{!isAnonymous}'},text:Bigmedia.Locales.cartBtnCheckoutText,href:'#checkout',hrefTarget:'_self'}]}]}],listeners:{close:function(a){this.getController().redirectTo('#')},show:function(){this.getController().updateStatusBar(this.lookupReference('cartGrid').getStore())}}});Ext.define('Bigmedia.view.autoselectfaces.AutoPlanResult',{extend:Ext.panel.Panel,xtype:'autoplanresult',referenceHolder:!0,initComponent:function(){var a=this;a.callParent();var c=a.lookup('resgrid'),d=a.lookup('resmap'),b=a.lookup('detface');d.setCartGrid(c);c.setDetFace(b);d.setDetFace(b)},safeClean:function(){var a=this},layout:{type:'hbox',align:'stretch',pack:'center'},items:[{layout:{type:'vbox',align:'stretch',pack:'center'},width:200,items:[{xtype:'grid',hideHeaders:!0,reference:'vargrid',flex:1,scrollable:'y',selModel:{type:'rowmodel',mode:'SINGLE',allowDeselect:!1},resetFocusPosition:!0,bind:{store:'{chainedVarStore}',selection:'{selectedVariant}'},viewConfig:{enableTextSelection:!1,markDirty:!1},tbar:[{itemId:'prev',iconCls:'x-fa fa-chevron-left',tooltip:'Previous',overflowText:'Previous',handler:function(e){var a=e.lookupViewModel(),b=a.get('planStore'),d=a.get('selectedCity'),c=b.indexOf(d);if(c>0){a.set('selectedCity',b.getAt(c-1))}}},{xtype:'combobox',displayField:'name',valueField:'id',reference:'combocity',flex:1,editable:!1,forceSelection:!0,queryMode:'local',triggerAction:'all',bind:{store:'{resCitiesStore}',selection:'{selectedCity}'}},{itemId:'next',iconCls:'x-fa fa-chevron-right',tooltip:'Next',overflowText:'Next',handler:function(e){var b=e.lookupViewModel(),a=b.get('planStore'),d=b.get('selectedCity'),c=a.indexOf(d);if(c<a.getCount()-1){b.set('selectedCity',a.getAt(c+1))}}}],columns:[{xtype:'checkcolumn',dataIndex:'selected',sortable:!1,width:20},{dataIndex:'descr',flex:1,sortable:!1}]},{xtype:'button',iconCls:'x-fa fa-undo',toggleGroup:null,enableToggle:!1,ui:'soft-red',text:'Back',handler:function(b){var a=b.up('autoplanresult');a.fireEvent('goback')}}]},{flex:1,xtype:'tabpanel',reference:'resultTabPanel',margin:'0 0 0 5',defaults:{layout:'fit'},items:[{title:Bigmedia.Locales.simpleResult.tabListMapTitle,layout:'border',items:[{xtype:'faces-grid',selModel:{type:'rowmodel',mode:'SINGLE',listeners:{focuschange:function(d,b,c){var a=d.view;if(!c){if(b){a.oldFocused=b}return}if(b){a.removeRowCls(b,'bm-row-focused')}if(a.oldFocused){a.removeRowCls(a.oldFocused,'bm-row-focused')}if(c){a.addRowCls(c,'bm-row-focused')}}}},region:'center',plugins:{},stateful:!1,reference:'resgrid',hideToolBar:!0,showPrice:!0,showAddToCart:!1,showDelete:!0,bind:{store:'{selectedVariant.faces}'},columns:[{text:Bigmedia.Locales.colDoorsNo,sortable:!0,dataIndex:'doors_no',groupable:!1,locked:!0,width:60,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:Bigmedia.Locales.colFaceNum,sortable:!0,dataIndex:'num',groupable:!1,hidden:!0,hideable:!0,draggable:!1,width:80,locked:!0},{text:Bigmedia.Locales.colSupplier,sortable:!0,dataIndex:'supplier',hidable:!0,groupable:!0,width:100,filter:'list'},{text:Bigmedia.Locales.colCity,sortable:!0,dataIndex:'city',groupable:!1,width:120,filter:'list'},{text:Bigmedia.Locales.colAddress,sortable:!0,dataIndex:'address',groupable:!1,width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:Bigmedia.Locales.colCat,sortable:!0,dataIndex:'catab',groupable:!1,width:40,filter:'list'},{text:Bigmedia.Locales.colSize,sortable:!0,dataIndex:'size',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colLight,sortable:!0,dataIndex:'light',groupable:!1,width:40,filter:'list',align:'center',width:40,renderer:function(b){var a='';switch(b){case '+':a='<span class="x-fa fa-lightbulb-o" style="color: #ffd633"></span>';break;case 'off':a='<span class="x-fa fa-lightbulb-o" style="color: #8c8c8c"></span>';break;}return a}},{text:Bigmedia.Locales.colNetwork,sortable:!0,dataIndex:'network',groupable:!1,width:100,filter:'list',hidden:!0},{text:Bigmedia.Locales.colZone,sortable:!0,dataIndex:'zone',groupable:!1,width:90,filter:'list',hidden:!0},{text:Bigmedia.Locales.colGRP,sortable:!0,dataIndex:'grp',groupable:!1,width:60,filter:'number'},{text:Bigmedia.Locales.colOTS,sortable:!0,dataIndex:'ots',groupable:!1,width:60,filter:'number'},{text:'Price',bind:{hidden:'{!visiblePrice}'},width:60,sortable:!0,reference:'columnprice',dataIndex:'price',hidden:!0,hideable:!1,filter:'number'},{text:'Net',bind:{hidden:'{!visiblePrice}'},width:60,sortable:!0,reference:'columnnetprice',dataIndex:'netPrice',hidden:!0,hideable:!1,filter:'number'},{text:'Total',bind:{hidden:'{!visiblePrice}'},width:60,sortable:!0,reference:'columntotalprice',dataIndex:'finalPrice',hidden:!0,hideable:!1,filter:'number'},{xtype:'actioncolumn',width:50,bind:{hidden:'{!showDelete}'},items:[{iconCls:'x-fa fa-minus',tooltip:'Delete',handler:function(a,b,d){var c=a.getStore().getAt(b);a.getStore().remove(c)}}]}]},{xtype:'panel',header:!1,layout:'fit',width:400,split:!0,region:'east',collapsible:!0,items:[{xtype:'facesmapview',toolbarHidden:!0,reference:'resmap',faceAsCircleRes:60,bind:{replaceStore:'{repStore}'}}]}]},{title:Bigmedia.Locales.simpleResult.tabCoverageTitle,items:[{xtype:'chartscoverageinteractive',reference:'chartcoverage',header:!1,hideCitiesBar:!0,bind:{facesStore:'{selectedVariant.faces}'}}]},{title:Bigmedia.Locales.simpleResult.tabChartsTitle,items:[{xtype:'campstat',bind:{source:'{selectedVariant.faces}'}}]},{title:Bigmedia.Locales.simpleResult.tabMediaPlanTitle,items:[{xtype:'pivot-planvariant',bind:{source:'{selectedVariant.faces}'}}]}]},{xtype:'detface',reference:'detface',stateful:{x:!0,y:!0,width:!0,height:!0},constrainHeader:!0,closeAction:'hide',hidden:!0,collapsible:!1,bodyPadding:0,width:300,heigth:250,closable:!0}]});Ext.define('Bigmedia.view.det.DetPoster',{extend:Ext.window.Window,reference:'detposter',title:Bigmedia.Locales.detPosterTitle,width:500,height:600,collapsible:!1,minWidth:300,minHeight:380,layout:'fit',resizable:!0,modal:!0,referenceHolder:!0,defaultFocus:'posterName',closeAction:'hide',items:[{xtype:'form',reference:'windowForm',modelValidation:!0,layout:{type:'vbox',align:'stretch'},border:!1,bodyPadding:10,fieldDefaults:{msgTarget:'side',labelAlign:'top',labelWidth:200,margin:'0 0 10px 0',margin:0},defaults:{margin:'0 0 10px 0',margin:0},items:[{xtype:'textfield',name:'posterName',itemId:'posterName',fieldLabel:Bigmedia.Locales.detPosterNameLabel,allowBlank:!1,bind:{value:'{thePoster.name}'}},{xtype:'drag-image',padding:'10px 0',flex:1},{xtype:'filefield',accept:'image/*',margin:0,emptyText:Bigmedia.Locales.detPosterSelectImageEmptyText,name:'photo-path',buttonText:'',buttonConfig:{iconCls:'x-fa fa-file-image-o'},listeners:{change:function(b,c){var a=b.fileInputEl.dom;if(a.files&&a.files[0]){b.up('form').down('drag-image').getController().loadImage(a.files[0])}}}}],buttons:[{text:Bigmedia.Locales.btnCancelText,handler:function(b){var a=b.up('window');a.hide()}},{text:Bigmedia.Locales.btnSaveText,handler:function(i){var a=i.up('window'),f=a.lookupReference('windowForm'),e=f.getForm(),b=a.down('drag-image');if(e.isValid()){var c=a.getViewModel().get('thePoster');if(b.imageChanged&&b.dataURL){c.set('subjectBlob',b.dataURL)}if(c.store){if(b.imageChanged&&b.dataURL){c.store.on('update',function(b,a){a.load()},{single:!0})}c.store.sync()}else {var h=a.up('mainviewport'),g=h.down('campcard');var d=g.lookupViewModel().get('curCamp.posters');d.add(c);d.sync()}e.reset();a.hide()}}}]}],listeners:{show:function(a){var b=a.getViewModel().get('thePoster'),c=a.body,d=a.down('drag-image'),e=c.down('.drag-image-content'),f=c.down('.drag-file-label'),g=c.down('.drag-file-icon'),h=a.down('filefield');d.imageChanged=!1;d.dataURL=null;if(b.phantom){this.lookupReference('windowForm').getForm().reset()}if(b.get('subjectId')){e.setStyle('background-image','url(/api/v1/subjects/'+b.get('subjectId')+'/image.jpeg)');f.setStyle('visibility','hidden');g.setStyle('visibility','hidden');h.setRawValue(null)}else {e.setStyle('background-image','none');f.setStyle('visibility','visible');g.setStyle('visibility','visible')}}}});Ext.define('Bigmedia.view.dialog.DlgPosterTask',{extend:Ext.window.Window,viewModel:{data:{curPoster:null}},width:700,minWidth:400,height:500,minHeight:380,modal:!0,closable:!0,title:'Select subject',referenceHolder:!0,layout:'fit',items:[{xtype:'wizardform',reference:'wizard',defaults:{header:!1},bind:{tempStore:'{curCamp.posters}'},items:[{xtype:'wizardpage',title:'Select subject',reference:'subjectscard',iconCls:'x-fa fa-briefcase',defaults:{margin:'0 0 10 0'},layout:'fit',items:[{xtype:'dataview',cls:'poster-dataview',itemSelector:'div.posterview-item',scrollable:'y',reference:'postersDataView',tpl:new Ext.XTemplate('<tpl for=".">','<div class="posterview-item poster-preview-100 shadow poster-dataitem">','<div class="poster-picture-bg"','<tpl if="this.hasSubject(subjectId) == true"> style="background-image: url(/api/v1/subjects/{subjectId}/image.jpeg)"</tpl>>','<div class="poster-info">','<div class="poster-name">{name}</div>','</div>','</div>','</div>','</tpl>',{hasSubject:function(a){return !!a}}),bind:{store:'{curCamp.posters}',selection:{bindTo:'{curPoster}'}},width:'100%',flex:1,listeners:{itemclick:function(a,b){var d=a.getStore(),e=a.up('window'),c=a.up('wizardform');d.rejectChanges();e.getViewModel().set('curPoster',b);c.getController().goNext()}}}]},{xtype:'wizardpage',title:'Select cover date',reference:'datecoverpage',iconCls:'x-fa fa-calendar',isCompleted:!0,layout:'fit',items:[{xtype:'form',reference:'periodform',defaultType:'radiofield',defaults:{labelWidth:90,labelAlign:'top',labelSeparator:'',submitEmptyText:!1,anchor:'100%'},items:[{boxLabel:"From proposal's begin",name:'datecovertype',reference:'datecoverauto',itemId:'datecoverauto',checked:!0},{boxLabel:'Select date',name:'datecovertype'},{xtype:'datefield',reference:'datecover',itemId:'datecover',bind:{hidden:'{datecoverauto.checked}',disabled:'{datecoverauto.checked}'},validation:'Must be selected',listeners:{change:function(a){if(a.getValue()){a.setValidation(null)}else {a.setValidation('Must be selected')}}}}],listeners:{validitychange:function(a,b){var a=a.owner,c=a.down('#datecoverauto'),d=a.down('#datecover');a.up('wizardpage').setIsCompleted(b)}}}],listeners:{show:function(a){}}},{xtype:'wizardpage',title:'Finish',iconCls:'x-fa fa-flag-checkered',layout:{type:'vbox',pack:'center',align:'middle'},html:'<h4>'+Bigmedia.Locales.dlgAddToCampaignReadyText+'</h4>',items:[{xtype:'button',scale:'large',ui:'soft-green',text:Bigmedia.Locales.dlgAddToCampaignSaveBtnText,handler:function(b){var h=b.up('window').lookupViewModel().get('curCamp'),d=new Ext.data.Store({model:Bigmedia.model.PosterTask}),f=b.up('window').lookupViewModel().get('grid'),e=b.up('window').down('#datecoverauto').getValue(),a=b.up('window').down('#datecover').getValue(),g=b.up('window').lookupViewModel().get('curPoster').getId(),c=[];if(a){a=Ext.Date.localToUtc(a)}f.getSelection().forEach(function(d){if(e||d.get('startDate')<=a&&d.get('endDate')>=a){c.push({proposalId:d.getId(),posterId:g,coverDate:e?d.get('startDate'):a})}});if(c.length>0){d.add(c);d.sync()}}}]}]}],onCurCamp:function(a){}});Ext.define('Bigmedia.view.dialog.DlgImportPricesController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgimportprices',onShowView:function(b){var a=this;a.validateForm()},onCancelClick:function(){this.getView().hide()},validateForm:function(){var b=this,a=b.lookupReference('btnImport'),c=b.lookupReference('numbers');var d=c.getValue().split(/\n+/g).filter(function(a){return a.match(/\w+[^.,\w\d]+\d+[.,]?\d*/g)});if(d.length>0){a.enable()}else {a.disable()}},onImportClick:function(){var b=this,a=b.getView(),e=b.lookupReference('numbers'),d=a.getCallbackImport(),i=a.getCallbackScope(),f=b.lookupReference('chbsideno'),g=f.getValue()?'supplierNo':'doorsNo';if(d){var h=e.getValue().split(/\n+/g).filter(function(a){return a.match(/\w+[^.,\w\d]+\d+[.,]?\d*/)}),c;c=h.reduce(function(b,d){var a=d.match(/(\w+)[^.,\w\d]+(\d+[.,]?\d*)/);if(a){var c=a[2].replace(/,/,'.');b[a[1]]=c}return b},{});Ext.callback(d,i,[c,g])}a.hide()}});Ext.define('Bigmedia.view.dialog.DlgImportPrices',{extend:Ext.window.Window,controller:'dialog-dlgimportprices',config:{callbackImport:null,callbackScope:null,onlyDoorsNo:!1},updateOnlyDoorsNo:function(a){this.lookupViewModel().set('onlyDoorsNo',a);if(a){this.lookupViewModel().set('doorsNo',a)}},width:500,minWidth:400,height:380,minHeight:380,modal:!0,hidden:!0,autoDestroy:!1,autoShow:!1,closeAction:'hide',title:Bigmedia.Locales.dlgImportPricesTitle,referenceHolder:!0,layout:'vbox',padding:10,defaultFocus:'numbers',items:[{xtype:'radiogroup',padding:'0 10',fieldLabel:Bigmedia.Locales.dlgImportPricesBindingColumnLabel,columns:2,vertical:!0,width:'100%',labelWidth:180,items:[{boxLabel:Bigmedia.Locales.dlgFilterByNumberSideNoLabel,reference:'chbsideno',inputValue:'sideNo',bind:{disabled:'{onlyDoorsNo}'},checked:!0,listeners:{change:'validateForm'}},{boxLabel:Bigmedia.Locales.dlgFilterByNumberDoorsNoLabel,reference:'chbdoorsno',inputValue:'doorsNo',bind:{value:'{doorsNo}'}}]},{xtype:'textarea',reference:'numbers',itemId:'numbers',emptyText:Bigmedia.Locales.dlgImportPricesDataEmptyText,width:'100%',listeners:{change:'validateForm'},flex:1}],buttons:[{text:Bigmedia.Locales.btnCancelText,listeners:{click:'onCancelClick'}},'->',{text:Bigmedia.Locales.btnImportText,reference:'btnImport',listeners:{click:'onImportClick'}}],listeners:{show:'onShowView'}});Ext.define('Bigmedia.view.campaign.CampCardController',{extend:Ext.app.ViewController,alias:'controller.campaign-campcard',init:function(g){var b=this,f=b.lookupReference('gridPhotos');b.callParent();var d=Bigmedia.Vars.getUser(),c=b.lookupReference('infoform'),a=Ext.create('Ext.data.Store',{fields:['id','name'],data:d.get('org').managers.map(function(a){return {id:a.id,name:a.firstName+' '+a.lastName}})});if(a.getCount()>1){c.add(Ext.create('Ext.form.field.ComboBox',{reference:'managers',queryMode:'local',displayField:'name',valueField:'id',fieldLabel:'Manager',bind:{value:'{curCamp.managerId}'},store:a}))}else {if(a.getCount()===1&&a.getAt(0).getId()!==911){c.add(Ext.create('Ext.form.field.Text',{readOnly:!0,fieldLabel:'Manager',value:a.getAt(0).get('name')}))}}var e=Ext.ComponentQuery.query('restrictedarea')[0];e.getViewModel().bind({bindTo:'{curCamp}'},function(a){b.updateCurrentCampaign(a)})},addPosterTask:function(d){var b=this,c=b.getView().up('mainviewport'),a=c.lookupReference('dlgPosterTask');if(!a){a=new Bigmedia.view.dialog.DlgPosterTask({reference:'dlgPosterTask'});c.add(a)}else {}a.getViewModel().set('curCamp',b.getViewModel().get('curCamp'));a.getViewModel().set('grid',b.lookup('campProposals'));a.show()},exportCampServicesToExcel:function(b){Ext.MessageBox.show({msg:Bigmedia.Locales.exportExcelSavingData,progressText:Bigmedia.Locales.exportExcelProgressText,width:300,wait:{interval:200},animateTarget:b});var a=this;a.timer=Ext.defer(function(){var c=a.getViewModel().get('curCamp').get('id');Bigmedia.GridExport.exportToExcel(a.lookup('campServices'),'bigmedia_campaign_'+c+'_services.xlsx',function(){});a.timer=null;Ext.MessageBox.hide();a.showToast(Bigmedia.Locales.exportExcelFileSaved,Bigmedia.Locales.exportExcelDone)},3000)},showToast:function(a,b){Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400,minWidth:400})},fillMonthlyExportMenu:function(b){var e=b.up('grid').getStore(),c=b.up('campcard').getController();var a={};e.each(function(e){if(e.get('photoRecs')&&e.get('photoRecs').length>0){var c=e.get('deadline'),d=Ext.Date.format(c,'Y\\-m');if(!a[d]){a[d]={name:Ext.Date.format(c,"F\\'y"),year:c.getFullYear(),month:c.getMonth(),count:1,days:{}};a[d].days[c.getDate()]={name:Ext.Date.format(c,'d\\.m\\.Y'),count:1}}else {a[d].count++;if(a[d].days[c.getDate()]){a[d].days[c.getDate()].count++}else {a[d].days[c.getDate()]={name:Ext.Date.format(c,'d\\.m\\.Y'),count:1}}}}});var d=Object.keys(a).sort().reverse().map(function(d){var e=a[d],f=Object.keys(e.days).sort(function(a,c){return a>c?1:a<c?-1:0}).map(function(a){return {text:e.days[a].name+' ('+e.days[a].count+')',day:a}});return {text:a[d].name+' ('+a[d].count+')',menu:new Ext.menu.Menu({items:f.length>1?(new Array({text:'All'})).concat(f):f,year:a[d].year,month:a[d].month,plain:!0,listeners:{click:function(e,a){if(a){c.exportToArchive(e.year+'/'+(e.month+1).toString()+(a.day?'/'+a.day:''))}}}})}});var f=new Ext.menu.Menu({items:d,plain:!0});b.setMenu(f);b.showMenu()},transliterateFileName:function(a){var b={'':'YO','':'I','':'TS','':'U','':'K','':'E','':'N','':'G','':'SH','':'SCH','':'Z','':'H','':"'",'':'yo','':'i','':'ts','':'u','':'k','':'e','':'n','':'g','':'sh','':'sch','':'z','':'h','':"'",'':'F','':'I','':'V','':'a','':'P','':'R','':'O','':'L','':'D','':'ZH','':'E','':'f','':'i','':'v','':'a','':'p','':'r','':'o','':'l','':'d','':'zh','':'e','':'Ya','':'CH','':'S','':'M','':'I','':'T','':"'",'':'B','':'YU','':'ya','':'ch','':'s','':'m','':'i','':'t','':"'",'':'b','':'yu','':'YI','':'yi','':'YE','':'ye','':'I','':'i'};function transliterateWord(c){return c.split('').map(function(d){return b[d]||d}).join('')}return a.split(' ').map(function(b){return transliterateWord(b)}).join('_')},cleanFileName:function(a){return a.replace(/[\*\|\\:"<>\?\/]/g,'')},paintQrCode:function(b){var c=this.lookup('qrcode');var a={errorCorrectionLevel:'H',type:'image/png',rendererOpts:{quality:0.3}};qrcodelib.toDataURL(b,a,function(a,d){if(a){throw a}c.setSrc(d)})},openPresentationClick:function(d){var c=this,a=c.lookup('publishedcampaignurl'),b=a.getValue();window.open(b+'&preview=true','_blank')},sendInvitation:function(d){var a=this,f=a.getView(),c=a.getViewModel().get('curCamp'),b=f.getPublishedCampaign();if(b){var e=new Ext.data.Store({fields:[{name:'id',type:'int'},{name:'email',type:'string'}],proxy:{type:'rest',url:'/api/v1/campaigns/'+c.getId()+'/published/'+b.getId()+'/presenterInvitations'},autoSync:!0,listeners:{write:function(b){a.showToast(Bigmedia.Locales.campCardPresentationInvitationSentTitle,Bigmedia.Locales.campCardPresentationInvitationSentText)}}});e.add({email:d})}},showEmailPrompt:function(b){var a=this;Ext.Msg.prompt('Email','Please enter client email:',function(d,c){if(d=='ok'){if(!Ext.form.field.VTypes.email(c)){Ext.Msg.show({title:'Error',message:'Entered email address is invalid. Do you want to try one more time?',buttons:Ext.Msg.YESNOCANCEL,icon:Ext.Msg.ERROR,fn:function(e){if(e==='yes'){a.showEmailPrompt(b)}},scope:a})}else {a.sendInvitation(c)}}},a,!1,b)},sendInvitationClick:function(f){var a=this,d=a.getView(),e=a.getViewModel().get('curCamp'),b=d.getPublishedCampaign(),c=d.up('campview');if(b&&b.get('closed')&&c.publishedCamps){Ext.Msg.show({title:Bigmedia.Locales.campCardPresentationInviteOpenAccessConfirmTitle,message:Bigmedia.Locales.campCardPresentationInviteOpenAccessConfirmText,buttons:Ext.Msg.YESNOCANCEL,icon:Ext.Msg.QUESTION,fn:function(d){if(d==='yes'){b.set('closed',0);c.publishedCamps.sync({success:function(){a.showEmailPrompt('')}})}}})}else {a.showEmailPrompt('')}},editPresentationClick:function(b){var a=this;a.showDetPublished(a.getView().getPublishedCampaign())},updateCurrentCampaign:function(c){var a=this,b=a.getView()},updatePublishedCampaign:function(a,c){var b=this;b.initPublishedCampTab(a)},initPublishedCampTab:function(a){var c=this.getView(),b=c.lookup('presentationCard'),d=c.lookup('publishedcampaignurl');if(a){url=Bigmedia.Vars.getPublishedUrl()+a.getId(),d.setValue(url);this.paintQrCode(url);b.setActiveItem(1)}else {b.setActiveItem(0)}},showDetPoster:function(b){var c=this.getView().up('mainviewport'),a=c.lookupReference('detPoster');if(!a){a=new Bigmedia.view.det.DetPoster({reference:'detPoster',viewModel:{data:{thePoster:b}}});c.add(a)}else {a.getViewModel().set('thePoster',b)}a.show()},showDetPublished:function(c){var e=this,d=e.getView().up('mainviewport'),a=d.lookupReference('detPublished'),b=e.getView().up('campview');if(!a){a=new Bigmedia.view.det.DetPublishedCampaign({reference:'detPublished',store:b.publishedCamps,viewModel:{data:{thePublished:c}}});a.on({save:b.setPublishedCampaign,scope:b});d.add(a)}else {a.setStore(b.publishedCamps);a.getViewModel().set('thePublished',c)}a.show()},closePresentationClick:function(e){var d=this,c=d.getView(),a=c.getPublishedCampaign(),b=c.up('campview');if(a&&b.publishedCamps){Ext.Msg.show({title:Bigmedia.Locales.campCardPresentationCloseConfirmTitle,message:Bigmedia.Locales.campCardPresentationCloseConfirmText,buttons:Ext.Msg.YESNOCANCEL,icon:Ext.Msg.QUESTION,fn:function(c){if(c==='yes'){a.set('closed',1);b.publishedCamps.sync({success:function(){d.showToast(Bigmedia.Locales.campCardPresentationCloseToastTitle,Bigmedia.Locales.campCardPresentationCloseToastText)}})}}})}},openAccessPresentationClick:function(e){var d=this,c=d.getView(),a=c.getPublishedCampaign(),b=c.up('campview');if(a&&b.publishedCamps){Ext.Msg.show({title:Bigmedia.Locales.campCardPresentationOpenAccessConfirmTitle,message:Bigmedia.Locales.campCardPresentationOpenAccessConfirmText,buttons:Ext.Msg.YESNOCANCEL,icon:Ext.Msg.QUESTION,fn:function(c){if(c==='yes'){a.set('closed',0);b.publishedCamps.sync({success:function(){d.showToast(Bigmedia.Locales.campCardPresentationOpenAccessToastTitle,Bigmedia.Locales.campCardPresentationOpenAccessToastText)}})}}})}},editPosterClick:function(b,a){this.showDetPoster(a)},addPosterClick:function(b){var a=new Bigmedia.model.Poster({campaignId:this.getViewModel().get('curCamp').get('id'),ownerId:Bigmedia.Vars.getUser().get('id')});this.showDetPoster(a)},addPublishedClick:function(d){var a=this.getViewModel().get('curCamp'),b=Bigmedia.Vars.getUser();var c=new Bigmedia.model.Published({campaignId:a.get('id'),name:a.get('name'),startDate:a.get('startDate'),endDate:a.get('endDate'),email:b.get('email'),ownerId:b.get('id')});this.showDetPublished(c)},exportToArchive:function(a){var b=this,d=b.lookupReference('gridPhotos'),h=d.getSelection(),c=b.getViewModel().get('curCamp'),i=new Date(),g='/api/v1/campaigns/'+c.get('id')+'/photorecs/',e='photos_'+encodeURIComponent(b.cleanFileName(c.get('name')))+'_'+(a?a.replace(/\//g,'-'):'all')+'.zip',f=a?a+'/':'';if(d.getStore().getTotalCount()>0){window.open(g+f+e,'_blank')}}});Ext.define('Bigmedia.view.campaign.CampCardModel',{extend:Ext.app.ViewModel,alias:'viewmodel.campaign-campcard',formulas:{isNotEditable:function(a){return !a('unlockEditing')},btnEditSaveText:function(a){return a('unlockEditing')?'Save':'Edit'}},data:{name:'Bigmedia',unlockEditing:!1}});Ext.define('Bigmedia.view.campaign.CampCard',{extend:Ext.tab.Panel,xtype:'campcard',controller:'campaign-campcard',config:{publishedCampaign:null},updatePublishedCampaign:function(a,b){this.getController().updatePublishedCampaign(a,b)},layout:'card',title:Bigmedia.Locales.campCardInformationTitle,header:!1,defaults:{defaultFocus:'textfield:not([value]):focusable:not([disabled])',iconAlign:'left',padding:0},tabBar:{cls:'campcardtabbar',layout:{pack:'center'}},items:[{title:Bigmedia.Locales.campCardtabInfoTitle,iconCls:'fa fa-info',xtype:'form',reference:'infoform',defaultType:'textfield',modelValidation:!0,padding:'15px 0 15px 15px',defaults:{labelWidth:90,labelAlign:'top',labelSeparator:'',submitEmptyText:!1,anchor:'100%'},dockedItems:[{xtype:'toolbar',dock:'bottom',itemId:'actionBar',items:[{xtype:'button',text:Bigmedia.Locales.campCardCancelBtnText,handler:function(a){a.up('campcard').lookupViewModel().getStore('campaigns').rejectChanges()}},'->',{xtype:'button',text:Bigmedia.Locales.campCardSaveBtnText,itemId:'saveBtn',handler:function(c){var b=c.up('campcard').lookupViewModel().getStore('campaigns'),a=c.up('campcard').lookupViewModel().get('curCamp');if(a.modified||a.phantom){b.on('write',function(){Ext.toast({html:Bigmedia.Locales.campCardOnWriteToast,closable:!1,align:'t',slideInDuration:400,minWidth:400})},{single:!0});b.sync()}}}]}],items:[{emptyText:Bigmedia.Locales.campCardCampaignNameEmptyText,bind:{value:'{curCamp.name}'}},{xtype:'fieldcontainer',fieldLabel:Bigmedia.Locales.campCardPeriodLabel,layout:'hbox',items:[{xtype:'datefield',flex:1,bind:{value:'{curCamp.startDate}'}},{xtype:'datefield',flex:1,bind:{value:'{curCamp.endDate}'}}]}],listeners:{dirtychange:function(b,a){},validitychange:function(b,a){b.owner.down('#saveBtn').setDisabled(!a)}}},{title:Bigmedia.Locales.campCardtabSubjectsTitle,iconCls:'fa fa-picture-o',layout:'fit',items:[{xtype:'grid',tbar:[{reference:'addPosterBtn',xtype:'button',text:Bigmedia.Locales.campCardAddPosterBtnText,iconCls:'x-fa fa-plus-square',handler:'addPosterClick'}],bind:'{curCamp.posters}',columns:[{header:Bigmedia.Locales.colImage,dataIndex:'subjectId',sortable:!1,width:250,renderer:function(b,c){var a='';if(b){a=' style="background-image: url(/api/v1/subjects/'+b+'/image.jpeg)"'}return '<div class="poster-picture"'+a+'/>'}},{header:Bigmedia.Locales.colPosterName,dataIndex:'name',flex:1},{header:'',width:50,xtype:'widgetcolumn',groupable:!1,hidable:!1,sortable:!1,widget:{width:40,xtype:'button',iconCls:'x-fa fa-edit',handler:function(a){var b=a.getWidgetRecord();a.up('campcard').getController().showDetPoster(b)}},onWidgetAttach:function(c,a,b){a.setDisabled(+b.get('ownerId')!==+Bigmedia.Vars.getUser().get('id'))}},{header:'',width:50,xtype:'widgetcolumn',groupable:!1,hidable:!1,sortable:!1,widget:{width:40,xtype:'button',iconCls:'x-fa fa-remove',handler:function(a){Ext.Msg.confirm({title:'Confirm delete subject',message:'Are you sure?',buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(d){if(d==='yes'){var c=a.getWidgetRecord(),b=c.store;if(b){b.remove(c);b.sync()}}},scope:a})}},onWidgetAttach:function(c,a,b){a.setDisabled(+b.get('ownerId')!==+Bigmedia.Vars.getUser().get('id'))}}]}]},{title:Bigmedia.Locales.campCardtabLiningProgressTitle,iconCls:'fa fa-truck',layout:'fit',items:[{xtype:'grid',bind:'{curCamp.campServiceOperations}',reference:'campServices',scrollable:!0,tbar:['->',{reference:'exportservicebtn',xtype:'button',text:Bigmedia.Locales.gridBtnExportToExcelText,iconCls:'x-fa fa-file-excel-o',listeners:{click:'exportCampServicesToExcel'}}],columns:[{header:Bigmedia.Locales.colSideNumber,dataIndex:'sideNum',width:60},{header:Bigmedia.Locales.colFaceNum,dataIndex:'faceNum',width:60},{header:Bigmedia.Locales.colCity,dataIndex:'faceCity',width:100},{header:Bigmedia.Locales.colAddress,dataIndex:'faceAddress',width:250},{header:Bigmedia.Locales.colServiceStatus,dataIndex:'statusName',width:100},{header:Bigmedia.Locales.colCoverDate,dataIndex:'coverAt',xtype:'datecolumn',format:'d.m.Y'},{header:Bigmedia.Locales.colNote,dataIndex:'note'},{header:Bigmedia.Locales.colServicePhoto,dataIndex:'photoRecObj',sortable:!1,width:250,renderer:function(a){var b='<div class="poster-picture"></div>';if(a&&a.url){b='<a href="'+a.url+'" target="_blank"><div class="poster-picture" style="background-image: url('+a.url+')"></div></a>'}return b}}]}]},{title:Bigmedia.Locales.campCardtabPhotosTitle,iconCls:'fa fa-camera',layout:'fit',padding:0,defaults:{padding:0},items:[{xtype:'grid',reference:'gridPhotos',plugins:'gridfilters',tbar:['->',{reference:'exportPhotosBtn',xtype:'splitbutton',text:Bigmedia.Locales.campCardPhotosExportToZip,iconCls:'x-fa fa-archive',handler:function(a){a.up('campcard').getController().exportToArchive()},arrowHandler:function(a){a.up('campcard').getController().fillMonthlyExportMenu(a)}}],bind:'{curCamp.campPhotos}',columns:[{header:Bigmedia.Locales.colSideNumber,dataIndex:'sideNum',width:60},{header:Bigmedia.Locales.colFaceNum,dataIndex:'faceNum',width:60},{header:Bigmedia.Locales.colCity,dataIndex:'faceCity',width:100,filter:'list'},{header:Bigmedia.Locales.colAddress,dataIndex:'faceAddress',width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{header:Bigmedia.Locales.colPhotoType,dataIndex:'typeName',width:120,filter:'list'},{header:Bigmedia.Locales.colDeadline,dataIndex:'deadline',xtype:'datecolumn',format:'d.m.Y',width:120,filter:'list'},{header:Bigmedia.Locales.colPhoto,dataIndex:'photoRecs',sortable:!1,width:250,renderer:function(a){console.log(a);var b='<div class="poster-picture"></div>';if(a&&a.length>0){b='<a href="'+a[0].url+'" target="_blank"><div class="poster-picture" style="background-image: url('+a[0].url+')"></div></a>'}return b}}]}]},{title:Bigmedia.Locales.campCardtabDocumentsTitle,iconCls:'fa fa-file-pdf-o',layout:'fit',items:[{xtype:'grid',bind:'{curCamp.documents}',columns:[{header:Bigmedia.Locales.colDocNum,dataIndex:'num'},{header:Bigmedia.Locales.colDocType,dataIndex:'type'},{header:Bigmedia.Locales.colDocStatus,dataIndex:'status',flex:1},{header:Bigmedia.Locales.colCreatedAt,dataIndex:'createdAt',xtype:'datecolumn',format:'d.m.Y H:i'},{header:Bigmedia.Locales.colModifiedAt,dataIndex:'updatedAt',xtype:'datecolumn',format:'d.m.Y H:i'},{header:Bigmedia.Locales.colDownload,width:50,groupable:!1,hidable:!1,sortable:!1,xtype:'templatecolumn',tpl:new Ext.XTemplate('<tpl if="pdfId &gt; 0">','<a target="_blank" href="/api/v1/campaigns/{campaignId}/documents/{id}/pdf" class="x-btn x-unselectable x-btn-default-small x-border-box" style="width:40px;" hidefocus="on" unselectable="on" role="button" aria-hidden="false" aria-disabled="false" tabindex="-1" data-tabindex-value="0" data-tabindex-counter="1">','<span data-ref="btnWrap" role="presentation" unselectable="on" style="table-layout:fixed;" class="x-btn-wrap x-btn-wrap-default-small ">','<span data-ref="btnEl" role="presentation" unselectable="on" style="" class="x-btn-button x-btn-button-default-small  x-btn-no-text x-btn-icon x-btn-icon-left x-btn-button-center ">','<span data-ref="btnIconEl" role="presentation" unselectable="on" class="x-btn-icon-el x-btn-icon-el-default-small x-fa fa-download " style=""></span>','<span data-ref="btnInnerEl" unselectable="on" class="x-btn-inner x-btn-inner-default-small">&nbsp;</span></span></span>','</a>','</tpl>')}]}]},{title:Bigmedia.Locales.campCardtabPresentationTitle,iconCls:'fa fa-line-chart',layout:'fit',items:[{xtype:'panel',reference:'presentationCard',layout:'card',items:[{xtype:'container',width:'100%',height:'100%',layout:{type:'hbox',pack:'center',align:'middle'},items:[{reference:'addPublishedBtn',xtype:'button',text:Bigmedia.Locales.campCardPresentationCreateBtn,iconCls:'x-fa fa-plus-square',handler:'addPublishedClick'}]},{xtype:'container',height:'100%',layout:{type:'hbox',align:'stretch'},items:[{xtype:'container',flex:1,cls:'qrcode-container',items:[{xtype:'image',cls:'qrcode',reference:'qrcode'}]},{xtype:'container',flex:2,layout:{type:'vbox',align:'stretch',pack:'middle'},items:[{xtype:'container',layout:{type:'hbox'},items:[{xtype:'textfield',flex:1,reference:'publishedcampaignurl',readOnly:!0},{xtype:'button',text:Bigmedia.Locales.campCardPresentationOpenBtn,handler:'openPresentationClick'},{xtype:'button',text:Bigmedia.Locales.campCardPresentationInviteBtn,handler:'sendInvitationClick'}]},{xtype:'toolbar',items:[{xtype:'button',text:Bigmedia.Locales.campCardPresentationEditBtn,handler:'editPresentationClick'},'->',{xtype:'button',bind:{hidden:'{pubCamp.closed}'},text:Bigmedia.Locales.campCardPresentationCloseBtn,handler:'closePresentationClick'},{xtype:'button',bind:{hidden:'{!pubCamp.closed}'},text:Bigmedia.Locales.campCardPresentationOpenAccessBtn,handler:'openAccessPresentationClick'}]}]}]}]}]}]});Ext.define('Bigmedia.view.campaign.CampDataView',{extend:Ext.view.View,xtype:'campdataview',cls:'camp-dataview',itemSelector:'div.campview-item',scrollable:'y',tpl:new Ext.XTemplate('<a href="#campaigns/new"><div class="newcamp-item camp-preview-100 shadow camp-dataitem">','<div class="camp-picture" style="background-image: url(resources/images/newcamp.png)">','<div class="camp-info">','<div class="camp-name">'+Bigmedia.Locales.campaignsCreateNewCampaignText+'</div>','<div class="camp-period">'+Bigmedia.Locales.campaignsWithCustomPeriodText+'</div>','</div>','</div>','</div></a>','<tpl for=".">','<div class="campview-item camp-preview-100 shadow camp-dataitem">','<div class="camp-picture"','<tpl if="this.hasSubject(subjectId) == true"> style="background-image: url(/api/v1/subjects/{subjectId}/image.jpeg)"</tpl>>','<div class="camp-info">','<div class="camp-name">{name}</div>','<div class="camp-period">{startDate:date("d.m.Y")}&nbsp;-&nbsp;{endDate:date("d.m.Y")}</div>','<div class="camp-toolbar"><div></div></div>','</div>','</div>','</div>','</tpl>',{formatDate:function(a){return Ext.Date.format(a,'d.m.Y')},hasSubject:function(a){return !!a}}),emptyText:'No active campains yet',listeners:{itemclick:function(c,b){var a=this.up('campaignsview')||this.up('campview');if(a){a.getController().redirectTo('campaigns/'+b.getId())}}}});Ext.define('Bigmedia.view.dialog.DlgImportSupplierPricesController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgimportsupplierprices',onShowView:function(b){var a=this;if(Bigmedia.Vars.getSalt()){a.getViewModel().set('savepriceoption','2');a.getViewModel().set('savepriceglobaldisable',!1);a.getViewModel().set('savepricepasswordglobal',!1)}else {a.getViewModel().set('savepricepasswordglobal',!0);a.getViewModel().set('savepriceglobaldisable',!0)}a.getViewModel().set({savepricepassword:''});a.validateForm()},onCancelClick:function(){this.getView().hide()},validateForm:function(){var b=this,a=b.lookupReference('btnImport'),c=b.lookupReference('numbers');var d=c.getValue().split(/\n+/g).filter(function(a){return a.match(/\w+[^.,\w\d]+\d+[.,]?\d*/g)});if(d.length>0){a.enable()}else {a.disable()}},onImportClick:function(){var a=this,b=a.getView(),c=a.getViewModel(),h=a.lookupReference('numbers'),e=b.getCallbackImport(),m=b.getCallbackScope(),j=a.lookupReference('chbsideno'),k=j.getValue()?'supplierNo':'doorsNo',i=c.get('savepriceoption'),g=c.get('savepricepassword'),f=c.get('savepricepasswordglobal'),n={linkField:k,savepriceoption:i,savepricepassword:g,savepricepasswordglobal:f};if(e){var l=h.getValue().split(/\n+/g).filter(function(a){return a.match(/\w+[^.,\w\d]+\d+[.,]?\d*/)}),d;d=l.reduce(function(b,d){var a=d.match(/(\w+)[^.,\w\d]+(\d+[.,]?\d*)/);if(a){var c=a[2].replace(/,/,'.');b[a[1]]=c}return b},{});Ext.callback(e,m,[d,n])}b.hide()}});Ext.define('Bigmedia.view.dialog.DlgImportSupplierPrices',{extend:Ext.window.Window,controller:'dialog-dlgimportsupplierprices',config:{callbackImport:null,callbackScope:null,onlyDoorsNo:!1},viewModel:{savepriceoption:'3',savepricepassword:null,savepriceglobaldisable:!1,savepricepasswordglobal:!1},updateOnlyDoorsNo:function(a){this.lookupViewModel().set('onlyDoorsNo',a);if(a){this.lookupViewModel().set('doorsNo',a)}},width:500,minWidth:400,height:380,minHeight:380,modal:!0,hidden:!0,autoDestroy:!1,autoShow:!1,closeAction:'hide',title:Bigmedia.Locales.dlgImportPricesTitle,referenceHolder:!0,layout:'vbox',padding:10,defaultFocus:'numbers',items:[{xtype:'radiogroup',padding:'0 10',fieldLabel:Bigmedia.Locales.dlgImportPricesBindingColumnLabel,columns:2,vertical:!0,width:'100%',labelWidth:180,items:[{boxLabel:Bigmedia.Locales.dlgFilterByNumberSideNoLabel,reference:'chbsideno',inputValue:'sideNo',bind:{disabled:'{onlyDoorsNo}'},checked:!0,listeners:{change:'validateForm'}},{boxLabel:Bigmedia.Locales.dlgFilterByNumberDoorsNoLabel,reference:'chbdoorsno',inputValue:'doorsNo',bind:{value:'{doorsNo}'}}]},{xtype:'textarea',reference:'numbers',itemId:'numbers',emptyText:Bigmedia.Locales.dlgImportPricesDataEmptyText,width:'100%',listeners:{change:'validateForm'},flex:1},{xtype:'radiogroup',bind:'{savepriceoption}',vertical:!0,simpleValue:!0,items:[{boxLabel:'Save using global password',name:'sp',inputValue:'2',bind:{disabled:'{savepriceglobaldisable}'}},{boxLabel:'Input special password',name:'sp',inputValue:'3'}]},{xtype:'textfield',bind:{hidden:'{savepriceoption != "3"}',value:'{savepricepassword}'},width:'100%',validator:function(b){var a='    ';return this.isHidden()||!!b?!0:a}},{xtype:'checkbox',bind:{hidden:'{savepriceoption != "3"}',value:'{savepricepasswordglobal}'},fieldLabel:'Save as global password'}],buttons:[{text:Bigmedia.Locales.btnCancelText,listeners:{click:'onCancelClick'}},'->',{text:Bigmedia.Locales.btnImportText,reference:'btnImport',listeners:{click:'onImportClick'}}],listeners:{show:'onShowView'}});Ext.define('Bigmedia.view.campaign.CampSides',{extend:Ext.Container,xtype:'campsides',controller:'campaign-campsides',layout:'border',title:Bigmedia.Locales.campCardProposalsTitle,collapsible:!1,defaults:{split:!0,bodyPadding:'5 0',padding:0},margin:0,padding:0,config:{publishedCampaign:null},updatePublishedCampaign:function(a,b){},items:[{xtype:'container',region:'center',layout:'fit',items:{header:!1,xtype:'grid',reference:'campProposals',bind:{store:'{curCamp.proposals}'},hideRowBody:!0,selModel:{type:'checkboxmodel',checkOnly:!0,listeners:{focuschange:function(d,b,c){var a=d.view;if(!c){if(b){a.oldFocused=b}return}if(b){a.removeRowCls(b,'bm-row-focused')}if(a.oldFocused){a.removeRowCls(a.oldFocused,'bm-row-focused')}if(c){a.addRowCls(c,'bm-row-focused')}}}},dockedItems:[{xtype:'toolbar',dock:'top',items:[{reference:'addpostertaskbtn',xtype:'button',text:Bigmedia.Locales.campCardLinkSubjectBtn,iconCls:'x-fa fa-link',bind:{disabled:'{!campProposals.selection}'},listeners:{click:'addPosterTask'}},{reference:'importthirdpartybtn',xtype:'button',text:'Import boards',iconCls:'x-fa fa-upload',listeners:{click:'importThirdpartyClick'}},{reference:'importpricesbtn',xtype:'button',text:Bigmedia.Locales.btnImportText,iconCls:'x-fa fa-upload',menu:[{text:'Import supplier prices',listeners:{click:'importSupplierPricesClick'}},{text:'Import client prices',bind:{hidden:'{!pubCamp}'},listeners:{click:'importPricesClick'}}]},'->',{reference:'removebtn',xtype:'button',text:Bigmedia.Locales.gridBtnRemoveSidesText,bind:{disabled:'{!campProposals.selection}'},iconCls:'x-fa fa-trash',listeners:{click:'removeSides'}},{reference:'showoccupationbtn',xtype:'button',text:Bigmedia.Locales.gridBtnShowOccupancyText,enableToggle:!0,handler:function(){var a=this.up('grid');a.hideRowBody=!this.pressed;a.getView().refresh()}},{reference:'exportbtn',xtype:'button',text:Bigmedia.Locales.gridBtnExportToExcelText,iconCls:'x-fa fa-file-excel-o',listeners:{click:'exportToExcel'}}]},{xtype:'statusbar',dock:'bottom',reference:'statusGrid',defaultText:'',defaultIconCls:'default-icon',text:Bigmedia.Locales.statusBarLoading,iconCls:'x-status-busy',busyText:Bigmedia.Locales.statusBarLoading}],plugins:{gridfilters:!0,cellediting:{clicksToEdit:1}},features:[{ftype:'rowbody',getAdditionalData:function(s,u,a,t){if(this.view.isLockedView||this.grid.ownerGrid.hideRowBody){return null}else {}var b=a.get('parsedOccupancy');if(!b){return null}var h=b.reduce(function(c,b){return c+b.actualDays},0);var p=b.map(function(b){var c='<span class="tableRow_month" style="width: '+Math.round(b.actualDays*1000000/h)/10000+'%;">';b.periods.forEach(function(d){c+='<span class="month_line month_line-'+d.status+'" style="width: '+Math.round(d.days*1000000/b.actualDays)/10000+'%;" data-qtip="'+Bigmedia.Locales.occupancyTooltip[d.status]+'"></span>'});c+='<div class="date_name">'+Ext.Date.getShortMonthName(b.month)+'`'+b.year.toString().slice(-2)+'</div>';c+='</span>';return c});var m='',q='';if(a.get('startDate')&&a.get('endDate')){var f,i,c,j,o,r,g,d=Date.UTC(b[0].year,b[0].month,b[0].day),l=b.length,e=Date.UTC(b[l-1].year,b[l-1].month+1,0);if(a.get('startDate')&&+a.get('startDate')>=d&&+a.get('startDate')<=e){f=Ext.Date.diff(new Date(d),a.get('startDate'),Ext.Date.DAY);i=0,c=0;while(c<b.length&&Date.UTC(b[c].year,b[c].month,b[c].day)<+a.get('startDate')){i++;c++}g=Math.round(f*1000000/h)/10000;o='calc('+g+'% + 6px);'}if(+a.get('endDate')<=e&&+a.get('endDate')>=d){var n=+a.get('endDate')<=e?a.get('endDate'):new Date(e),k=+a.get('startDate')>=d?a.get('startDate'):new Date(d);f=Ext.Date.diff(k,n,Ext.Date.DAY)+1;i=Ext.Date.diff(k,n,Ext.Date.MONTH);g=Math.round(f*1000000/h)/10000;j='calc('+g+'%);'}if(j){m='<div id="before" class="mask_opaque" style="left: '+(o||'0px;')+'width: '+j+'"></div>'}}return {rowBody:'<div class="tableRow_calendar"><div class="tableRow_calendar_inner">'+m+p.join('')+'</div></div>',rowBodyCls:'rowbody_occupancy'}}}],columns:[{header:Bigmedia.Locales.colSideNumber,dataIndex:'supplierNo',sortable:!0,groupable:!1,hideable:!0,draggable:!1,width:80,hidden:!1},{header:Bigmedia.Locales.colDoorsNo,dataIndex:'doorsNo',sortable:!0,groupable:!1,hideable:!0,draggable:!1,width:80},{text:'Supplier',sortable:!0,dataIndex:'supplier',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colCity,sortable:!0,dataIndex:'city',groupable:!1,width:120,filter:'list'},{text:Bigmedia.Locales.colAddress,sortable:!0,dataIndex:'address',groupable:!1,width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:Bigmedia.Locales.colStartDate,sortable:!0,dataIndex:'startDate',groupable:!1,xtype:'datecolumn',format:'d.m.Y',width:100},{text:Bigmedia.Locales.colEndDate,sortable:!0,dataIndex:'endDate',xtype:'datecolumn',format:'d.m.Y',groupable:!1,width:100},{text:Bigmedia.Locales.colProposalStatus,sortable:!0,dataIndex:'operationName',groupable:!0,width:100},{text:Bigmedia.Locales.colCat,sortable:!0,dataIndex:'catab',groupable:!1,width:40,filter:'list'},{text:Bigmedia.Locales.colSize,sortable:!0,dataIndex:'size',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colLight,sortable:!0,dataIndex:'light',groupable:!1,align:'center',width:40,filter:'list',width:40,renderer:function(b){var a='';switch(b){case '+':a='<span class="x-fa fa-lightbulb-o" style="color: #ffd633"></span>';break;case 'off':a='<span class="x-fa fa-lightbulb-o" style="color: #8c8c8c"></span>';break;}return a}},{text:Bigmedia.Locales.colNetwork,sortable:!0,dataIndex:'network',groupable:!1,width:90,filter:'list',hidden:!1},{text:Bigmedia.Locales.colZone,sortable:!0,dataIndex:'zone',groupable:!1,width:90,filter:'list',hidden:!0},{text:Bigmedia.Locales.colGRP,sortable:!0,dataIndex:'grp',groupable:!1,width:60,filter:'number'},{text:Bigmedia.Locales.colOTS,sortable:!0,dataIndex:'ots',groupable:!1,width:60,filter:'number'},{header:'Vendor price',dataIndex:'netPrice',width:70,align:'right',hideable:!1,editor:{xtype:'numberfield',allowBlank:!0,minValue:0,maxValue:100000},renderer:function(a,b,c){if(c.get('supplierPriceEnc')&&!a){b.align='center';return '<span class="x-fa fa-lock" style="color: #929292"></span>'}return a}},{dataIndex:'pubDecision',bind:{hidden:'{!pubCamp}'},menuDisabled:!0,sortable:!0,hideable:!1,text:'<span class="x-fa fa-thumbs-o-up"></span>',width:40,renderer:function(a){return '<span class="x-fa fa-thumbs'+(a==='A'?'':'-o')+'-up'+'"></span>'},sorter:{sorterFn:function(c,d){var a=c.get('pubDecision')||'Z',b=d.get('pubDecision')||'Z';return a>b?1:a===b?0:-1}}},{text:'rating',bind:{hidden:'{!pubCamp}'},sortable:!0,hideable:!1,dataIndex:'pubCustomRating',xtype:'widgetcolumn',widget:{xtype:'rating',minimum:0,trackOver:!1,disabled:!0,listeners:{beforechange:function(){return !1}}},groupable:!1,width:90,filter:'list'},{dataIndex:'pubDecision',bind:{hidden:'{!pubCamp}'},menuDisabled:!0,hideable:!1,sortable:!0,text:'<span class="x-fa fa-thumbs-o-down"></span>',width:40,renderer:function(a){return '<span class="x-fa fa-thumbs'+(a==='D'?'':'-o')+'-down'+'"></span>'},sorter:{sorterFn:function(c,d){var a=c.get('pubDecision')||'Z',b=d.get('pubDecision')||'Z';return a>b?1:a===b?0:-1}}},{header:Bigmedia.Locales.colCusomerNote,bind:{hidden:'{!pubCamp}'},dataIndex:'pubNote',sortable:!0,hideable:!1,width:80,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{header:Bigmedia.Locales.colPrice,bind:{hidden:'{!pubCamp}'},dataIndex:'displayPubPrice',width:70,align:'right',hideable:!1,editor:{xtype:'numberfield',allowBlank:!0,minValue:0,maxValue:100000},renderer:function(a,b,c){if(c.get('pubPriceEnc')&&!a){b.align='center';return '<span class="x-fa fa-lock" style="color: #929292"></span>'}return a}},{header:Bigmedia.Locales.colNote,bind:{hidden:'{!pubCamp}'},dataIndex:'pubOwnerNote',width:70,align:'right',hideable:!1,editor:{xtype:'textfield',allowBlank:!0}},{xtype:'actioncolumn',width:50,hideable:!1,items:[{iconCls:'x-fa fa-minus',tooltip:'Delete',handler:function(b,c,e){var a=b.getStore(),d=a.getAt(c);Ext.Msg.confirm({title:Bigmedia.Locales.campCardProposalsConfirmDeleteTitle,message:Bigmedia.Locales.campCardProposalsConfirmDeleteMessage,buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(f){if(f==='yes'){a.remove(d)}}})},isActionDisabled:function(e,c,b,d,a){return !(a.get('operationId')==1||a.get('operationId')==4||a.get('operationId')==21||a.get('operationId')==22||a.get('operationId')==20)}}]}],listeners:{beforeedit:function(e,a){var d=this;if(a.field==='netPrice'&&(!Bigmedia.Vars.getSalt(a.record.get('campaignId'))||a.record.get('supplierPriceEnc')&&!a.value)){Bigmedia.Vars.showPriceEncryptDialog(a.record.get('campaignId'),function(){(a.grid.getStore().getData().getSource()||a.grid.getStore().getData()).each(function(b){b.set('netPrice',b.get('netPrice'))})});return !1}else {if(a.field==='displayPubPrice'){var b=d.lookupViewModel().get('pubCamp'),c=Bigmedia.Vars.getPubPassphrase(a.record.get('pubCampaignId'));if(!b){console.log('no pubCamp');return !1}if(!b.get('cryptoHash')||c&&b.get('cryptoHash')===Bigmedia.Vars.hashPwd(c)){return !0}else {Bigmedia.Vars.showPubPriceEncryptDialog(a.record.get('pubCampaignId'),function(){(a.grid.getStore().getData().getSource()||a.grid.getStore().getData()).each(function(b){b.set('displayPubPrice',b.get('displayPubPrice'))})});return !1}return !1}}},edit:function(f,a){var e=this;if(a.field==='netPrice'){var c=Bigmedia.Vars.encryptPrice(Bigmedia.Vars.getSalt(a.record.get('campaignId')),a.value);a.record.set('supplierPriceEnc',c)}else {if(a.field==='displayPubPrice'){var b=e.lookupViewModel().get('pubCamp'),d=Bigmedia.Vars.getPubPassphrase(a.record.get('pubCampaignId'));if(!b){return}if(b.get('cryptoHash')&&(d&&b.get('cryptoHash')===Bigmedia.Vars.hashPwd(d))){var c=Bigmedia.Vars.encryptPrice(Bigmedia.Vars.getPubPassphrase(a.record.get('pubCampaignId')),a.value);a.record.set({pubPriceEnc:c,pubPrice:null})}else {if(!b.get('cryptoHash')){a.record.set({pubPriceEnc:null,pubPrice:a.value})}}}}},deselect:function(c,a,b){a.set('selected',!1)},select:function(c,a,b){a.set('selected',!0)},reconfigure:'onGridReconfigure'}}},{layout:'fit',title:'Map',collapsible:!0,header:!1,region:'south',height:400,items:{xtype:'facesmapview',reference:'campMap',filterCart:!0,toolbarPosition:'left'}},{xtype:'detface',reference:'detface',stateId:'detFaceCampSides',stateful:{x:!0,y:!0,width:!0,height:!0},constrainHeader:!0,closeAction:'hide',hidden:!0,collapsible:!1,bodyPadding:0,width:300,heigth:250,closable:!0}],updateStatusBar:function(){console.log('here updateStatusBar');var j=this,e=j.lookupReference('statusGrid'),h=j.lookupReference('campProposals'),a=h.getStore(),c=(a.getData().getSource()||a.getData()).getCount(),d=a.getCount(),f=h.getSelectionModel().getCount();if(!c){c=d}var b=Ext.String.format(Bigmedia.Locales.statusBarTotal,c);if(c!=d){b+=' | '+Ext.String.format(Bigmedia.Locales.statusBarFiltered,d)}if(f>0){b+=' | '+Ext.String.format(Bigmedia.Locales.statusBarChecked,f)}var i=[a.min('ots')||0,a.max('ots'),Math.round(a.average('ots')*100)/100,Math.round(a.sum('ots')*100)/100];b+='  | OTS(min,max,avg) = '+i.slice(0,3).join(', ')+' | OTS(sum) = '+i[3];var g=a.collect('city');if(g.length==1){grp=[a.min('grp')||0,a.max('grp'),Math.round(a.average('grp')*100)/100,Math.round(a.sum('grp')*100)/100];b+='  | GRP '+g[0]+'(min,max,avg) = '+grp.slice(0,3).join(', ')+' | GRP(sum) = '+grp[3]}if(a&&a.isLoading()){if(e){e.showBusy()}}else {e.setStatus({text:b,iconCls:'x-ready-icon'})}}});Ext.define('Bigmedia.view.campaign.CampSidesController',{extend:Ext.app.ViewController,alias:'controller.campaign-campsides',init:function(g){var a=this,b=a.lookupReference('campMap'),c=a.lookupReference('campProposals'),f=a.lookupReference('gridPhotos'),d=a.lookup('detface');a.replaceStore=new Ext.data.Store({model:'Bigmedia.model.Face',proxy:{type:'memory'}});b.getMap().setCartGrid(c);b.setReplaceStore(a.replaceStore);b.setDetFace(d);c.getMapView=function(){return b};b.setActions({add:a.onProposalAdd,replace:a.onProposalReplace,scope:a});a.callParent();var e=Ext.ComponentQuery.query('restrictedarea')[0];e.getViewModel().bind({bindTo:'{curCamp.campPois}'},function(b){a.updateCampPois(b)})},updateCampPois:function(a){var c=this,b=c.getViewModel().get('curCamp');function getQuoted(c,b){return b===null||b===undefined?'':' '+c.toString()+'="'+b.toString().replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&apos;').replace(/</g,'&lt;').replace(/>/g,'&gt;')+'"'}function objtoxml(c,b){return '<'+b+Object.keys(c).map(function(d){return getQuoted(d,c[d])}).join('')+'></'+b+'>'}if(a){a.setAutoSync(!0);a.setRemoteFilter(!1);a.on('beforeload',function(c){a.getProxy().setUrl('/api/v1/campaigns/'+encodeURIComponent(b.getId())+'/pois')});a.on('beforesync',function(f){if(f.create){var e=[];f.create.forEach(function(c){var b=c.getData({persist:!0,serialize:!0});e.push(objtoxml(b,'poi'))});var d=new FormData();d.append('pois',e.join(''));var c=new XMLHttpRequest();c.onload=function(){b.campPois().load()};c.open('POST','/api/v1/campaigns/'+encodeURIComponent(b.getId())+'/bulkAddPois');c.send(d)}if(f.update){var e=[];f.update.forEach(function(c){var b=c.getData({persist:!0,serialize:!0});e.push(objtoxml(b,'poi'))});var d=new FormData();d.append('pois',e.join(''));var c=new XMLHttpRequest();c.onload=function(){};c.open('POST','/api/v1/campaigns/'+encodeURIComponent(b.getId())+'/bulkUpdatePois');c.send(d)}if(f.destroy){var e=[];f.destroy.forEach(function(c){var b={id:c.getId()};e.push(objtoxml(b,'poi'))});var d=new FormData();d.append('pois',e.join(''));var c=new XMLHttpRequest();c.onload=function(){};c.open('POST','/api/v1/campaigns/'+encodeURIComponent(b.getId())+'/bulkDeletePois');c.send(d)}return !1});this.lookup('campMap').setPoiStore(a)}else {this.lookup('campMap').setPoiStore(null)}},onProposalAdd:function(c){var e=this,b=e.getViewModel().get('curCamp'),a;var d=Ext.create('Ext.data.Store',{model:'Bigmedia.model.Proposal',proxy:{type:'rest',url:'/api/v1/campaigns/'+encodeURIComponent(b.getId())+'/proposals',limitParam:null,pageParam:'',startParam:''},autoSync:!1});if(c.get('supplier')==='BIGMEDIA'){a={faceId:c.get('faceId')||c.getId(),campaignId:b.getId(),startDate:b.get('startDate'),endDate:b.get('endDate'),operationId:1,supplierPrice:c.get('finalPrice')}}else {a={doorsNo:c.get('doorsNo'),campaignId:b.getId(),startDate:b.get('startDate'),endDate:b.get('endDate'),operationId:1,supplierPrice:c.get('finalPrice')}}a=d.add(a);if(a&&a.length>0){a=a[0];d.sync({success:function(){b.proposals().loadRawData([a.getData()],!0);Ext.defer(function(){d.destroy()},100)},failure:function(){console.log('saving failure')}})}return !1},onProposalReplace:function(f,d){var c=this,e=c.getViewModel().get('curCamp'),b=e.proposals(),a=b.getById(d);if(a){b.remove(a);c.onProposalAdd(f)}},onProposalRemove:function(a){var b=this},onGridReconfigure:function(f,b){var a=this,d=a.lookupReference('campMap');b.setAutoSync(!0);if(!a.getViewModel().get('curCamp')){return}var e=Bigmedia.Vars.getFacesByPeriod({store:Ext.getStore('Faces'),startDate:a.getViewModel().get('curCamp').get('startDate'),endDate:a.getViewModel().get('curCamp').get('endDate'),wholePeriod:!0,allowTempRes:!0});var c=Object.keys(e).map(function(a){return Ext.getStore('Faces').getById(+a)}).filter(function(a){return a&&a.get('geometry')}).map(function(a){return a.clone()});a.replaceStore.removeAll();a.replaceStore.add(c);d.updateReplaceStore(a.replaceStore,a.replaceStore);b.setRemoteFilter(!1);b.on('datachanged',a.getView().updateStatusBar,a.getView())},removeSides:function(){var c=this,b=c.lookup('campProposals'),a=b.getStore();Ext.Msg.confirm({title:Bigmedia.Locales.campCardProposalsConfirmDeleteTitle,message:Bigmedia.Locales.campCardProposalsConfirmDeleteMessage,buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(c){if(c==='yes'){a.beginUpdate();b.getSelection().forEach(function(b){a.remove(b)});a.endUpdate()}}})},importThirdpartyFaces:function(j,k,o,a){var p=this,c=Ext.getStore('Faces'),b=p.getViewModel().get('curCamp'),l=[],i=[];if(!b||b.phantom){return}var m=o.split(/\n+/g).filter(function(b){return b.match(/(\w+)[^.,\w\d]?(\d+[.,]?\d*)*/)}),f;f=m.reduce(function(c,d){var b=d.match(/(\w+)[^.,\w\d]+(\d+[.,]?\d*)*/);if(b){if(b[2]){c[b[1]]=b[2].replace(/,/,'.')}else {c[b[1]]=null}}return c},{});if(a.savepriceoption==='3'&&a.savepricepasswordglobal){Bigmedia.Vars.setSalt(a.savepricepassword)}if(a.savepriceoption==='3'&&!a.savepricepasswordglobal&&b.getId()){Bigmedia.Vars.setSalt(a.savepricepassword,b.getId())}var h;if(a.savepriceoption!=='1'){h=Bigmedia.Vars.getSalt(b.getId())||Bigmedia.Vars.getSalt()}var d='';var n=c.getFilters().clone();try{c.clearFilter();Object.keys(f).forEach(function(b){var e=f[b];if(h&&e){d=Bigmedia.Vars.encryptPrice(h,e)}else {d=''}var g=c.findExact(a.linkField==='doorsNo'?'doorsNo':'supplierNo',a.linkField==='doorsNo'?+b:b);if(g>=0){var m=c.getAt(g);l.push('<face date_beg="'+Ext.Date.format(j,'Y-m-d')+'" date_end="'+Ext.Date.format(k,'Y-m-d')+'" id="'+m.getId()+'" price_encrypted = "'+d+'"></face>')}else {if(a.linkField==='doorsNo'){i.push('<doors date_beg="'+Ext.Date.format(j,'Y-m-d')+'" date_end="'+Ext.Date.format(k,'Y-m-d')+'" doors_no="'+b+'" price_encrypted = "'+d+'"></doors>')}}})}catch(q){}finally{c.addFilter(n.getRange())}var e=new FormData();e.append('faces',l.join(''));e.append('doorsNums',i.join(''));var g=new XMLHttpRequest();g.onload=function(){b.proposals().load()};g.open('POST','/api/v1/campaigns/'+encodeURIComponent(b.getId())+'/bulkAddProposals');g.send(e)},importThirdpartyClick:function(d){var b=this,c=b.getView().up('mainviewport'),a=c.lookupReference('dlgImportThirdpartyFaces');if(!a){a=new Bigmedia.view.dialog.DlgImportThirdpartyFaces({reference:'dlgImportThirdpartyFaces',callbackImport:b.importThirdpartyFaces,callbackScope:b});c.add(a)}a.show()},importSupplierPrices:function(g,a){var i=this,j=i.lookup('campProposals'),b=i.getViewModel().get('curCamp'),h=j.getStore(),e=[],c;if(!b||b.phantom){return}if(a.savepriceoption==='3'&&a.savepricepasswordglobal){Bigmedia.Vars.setSalt(a.savepricepassword)}if(a.savepriceoption==='3'&&!a.savepricepasswordglobal&&b.getId()){Bigmedia.Vars.setSalt(a.savepricepassword,b.getId())}var c;c=Bigmedia.Vars.getSalt(b.getId())||Bigmedia.Vars.getSalt();Object.keys(g).forEach(function(d){var j=d;if(a.linkField==='doorsNo'){j=+d}var i=h.findExact(a.linkField,j);if(i>=0){var f=g[d],b='';if(c&&f){b=Bigmedia.Vars.encryptPrice(c,f)}else {b=''}var k=h.getAt(i);e.push('<proposal id="'+k.getId()+'" supplier_price_encrypted = "'+b+'"></proposal>')}});var f=new FormData();f.append('proposals',e.join(''));var d=new XMLHttpRequest();d.onload=function(){b.proposals().load()};d.open('POST','/api/v1/campaigns/'+encodeURIComponent(b.getId())+'/bulkAddSupplierPrices');d.send(f)},importPrices:function(h,e){var d=this,k=d.lookup('campProposals'),j=d.getViewModel().get('curCamp'),b=d.getViewModel().get('pubCamp'),i=k.getStore(),f=[],a;if(b.get('cryptoHash')){a=Bigmedia.Vars.getPubPassphrase(b.getId());if(!a){return}}Object.keys(h).forEach(function(d){var j=d;if(e==='doorsNo'){j=+d}var g=i.findExact(e,j);if(g>=0){var b=h[d],c='';if(a&&b){c=Bigmedia.Vars.encryptPrice(a,b);b=''}else {c=''}var k=i.getAt(g);f.push('<proposal id="'+k.getId()+'" price_encrypted = "'+c+'" price = "'+b+'"></proposal>')}});var g=new FormData();g.append('proposals',f.join(''));var c=new XMLHttpRequest();c.onload=function(){j.proposals().load()};c.open('POST','/api/v1/published/campaigns/'+encodeURIComponent(b.getId())+'/bulkAddPubPrices');c.send(g)},importSupplierPricesClick:function(e){var b=this,c=b.getView().up('mainviewport'),d=b.getViewModel().get('curCamp'),a=c.lookupReference('dlgImportSupplierPrices');if(!d||d.phantom){return}if(!a){a=new Bigmedia.view.dialog.DlgImportSupplierPrices({reference:'dlgImportSupplierPrices',callbackImport:b.importSupplierPrices,callbackScope:b});c.add(a)}a.show()},importPricesClick:function(f){var b=this,d=b.getView().up('mainviewport'),c=b.getViewModel().get('pubCamp'),e=b.getViewModel().get('curCamp'),a=d.lookupReference('dlgImportPrices');if(!c){return}if(!a){a=new Bigmedia.view.dialog.DlgImportPrices({reference:'dlgImportPrices',callbackImport:b.importPrices,callbackScope:b});d.add(a)}if(c.get('cryptoHash')&&!Bigmedia.Vars.getPubPassphrase(c.getId())){Bigmedia.Vars.showPubPriceEncryptDialog(c.getId(),function(){a.show()})}else {a.show()}},addPosterTask:function(d){var b=this,c=b.getView().up('mainviewport'),a=c.lookupReference('dlgPosterTask');if(!a){a=new Bigmedia.view.dialog.DlgPosterTask({reference:'dlgPosterTask'});c.add(a)}else {}a.getViewModel().set('curCamp',b.getViewModel().get('curCamp'));a.getViewModel().set('grid',b.lookup('campProposals'));a.show()},showSelectedOnlyToggle:function(g,c){var f=this,b=f.lookup('campProposals'),a=b.getStore();if(c){a.removeFilter('filterselected',!0);var e=b.getSelectionModel().getSelection().map(function(a){return a.id});var d=new Ext.util.Filter({property:'id',id:'filterselected',operator:'in',value:e});a.addFilter(d)}else {a.removeFilter('filterselected')}},exportToExcel:function(b){Ext.MessageBox.show({msg:Bigmedia.Locales.exportExcelSavingData,progressText:Bigmedia.Locales.exportExcelProgressText,width:300,wait:{interval:200},animateTarget:b});var a=this;a.timer=Ext.defer(function(){var c=a.getViewModel().get('curCamp').get('id');Bigmedia.GridExport.exportToExcel(a.lookup('campProposals'),'bigmedia_campaign_'+c+'.xlsx',function(){},!1,!0);a.timer=null;Ext.MessageBox.hide();a.showToast(Bigmedia.Locales.exportExcelFileSaved,Bigmedia.Locales.exportExcelDone)},3000)},showToast:function(a,b){Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400,minWidth:400})},transliterateFileName:function(a){var b={'':'YO','':'I','':'TS','':'U','':'K','':'E','':'N','':'G','':'SH','':'SCH','':'Z','':'H','':"'",'':'yo','':'i','':'ts','':'u','':'k','':'e','':'n','':'g','':'sh','':'sch','':'z','':'h','':"'",'':'F','':'I','':'V','':'a','':'P','':'R','':'O','':'L','':'D','':'ZH','':'E','':'f','':'i','':'v','':'a','':'p','':'r','':'o','':'l','':'d','':'zh','':'e','':'Ya','':'CH','':'S','':'M','':'I','':'T','':"'",'':'B','':'YU','':'ya','':'ch','':'s','':'m','':'i','':'t','':"'",'':'b','':'yu','':'YI','':'yi','':'YE','':'ye','':'I','':'i'};function transliterateWord(c){return c.split('').map(function(d){return b[d]||d}).join('')}return a.split(' ').map(function(b){return transliterateWord(b)}).join('_')},cleanFileName:function(a){return a.replace(/[\*\|\\:"<>\?\/]/g,'')},cellDblClickProposals:function(f,g,c,b,h,d,i,e){var a=this.getView().findParentByType('mainviewport');if(a){a.detFace.showFace(b.get('face').id)}},updatePublishedCampaign:function(c,e){var a=this,d=a.lookup('campProposals'),b=a.getViewModel().get('curCamp');if(c){delete a.proposals;a.publishedProposals=new Ext.data.Store({model:'Bigmedia.model.JoinedProposal',proxy:{type:'rest',url:'/api/v1/campaigns/'+encodeURIComponent(b.getId())+'/published/'+encodeURIComponent(c.getId())+'/proposals',limitParam:null,pageParam:'',startParam:''},autoLoad:!0,autoSync:!0});a.getViewModel().set('proposals',a.publishedProposals);d.reconfigure(a.publishedProposals,a.getView().etc.published.columns);a.thirdpartyProposals=new Ext.data.Store({model:'Bigmedia.model.ThirdpartyProposal',proxy:{type:'rest',url:'/api/v1/campaigns/'+encodeURIComponent(b.getId())+'/published/'+encodeURIComponent(c.getId())+'/third-party',limitParam:null,pageParam:'',startParam:''},autoLoad:!0,autoSync:!0});a.getViewModel().set('thirdparty',a.thirdpartyProposals)}else {delete a.publishedProposals;delete a.thirdpartyProposals;a.proposals=new Ext.data.Store({model:'Bigmedia.model.Proposal',proxy:{type:'rest',url:'/api/v1/campaigns/'+encodeURIComponent(b.getId())+'/proposalsmix',limitParam:null,pageParam:'',startParam:''},autoLoad:!0,autoSync:!0});a.getViewModel().set('proposals',a.proposals);d.reconfigure(a.proposals,a.getView().etc.proposals.columns)}},createPublishedProposalsStore:function(){var b=this;var d=b.getViewModel().get('curCamp.proposals'),c=b.publishedProposals;var a=[];d.each(function(e){var b=e.getData();var d=c.findRecord('proposalId',b.id);if(d){b.published=d.getData()}a.push(b)});return new Ext.data.Store({idProperty:'publishedId',model:'Bigmedia.model.JoinedProposal',data:a,proxy:{type:'rest',url:'publishedproposals'},listeners:{update:function(){}}})},showDetPoster:function(b){var c=this.getView().up('mainviewport'),a=c.lookupReference('detPoster');if(!a){a=new Bigmedia.view.det.DetPoster({reference:'detPoster',viewModel:{data:{thePoster:b}}});c.add(a)}else {a.getViewModel().set('thePoster',b)}a.show()},onDetPublishedSave:function(a){this.getView().setPublishedCampaign(a)},addPublishedClick:function(d){var a=this.getViewModel().get('curCamp'),b=Bigmedia.Vars.getUser();var c=new Bigmedia.model.Published({campaignId:a.get('id'),name:a.get('name'),startDate:a.get('startDate'),endDate:a.get('endDate'),email:b.get('email'),ownerId:b.get('id')});this.showDetPublished(c)}});Ext.define('Bigmedia.view.campaign.CampViewController',{extend:Ext.app.ViewController,alias:'controller.campaign-campview',init:function(){var a=this;a.callParent();var b=Ext.ComponentQuery.query('restrictedarea')[0];b.getViewModel().bind({bindTo:'{curCamp}'},function(b){a.updateCurrentCampaign(b)})},updateCurrentCampaign:function(c){var b=this,a=b.getView();if(b.view.publishedCamps){b.view.publishedCamps.destroy()}if(c){b.view.publishedCamps=new Ext.data.Store({model:'Bigmedia.model.Published',proxy:{type:'rest',url:'/api/v1/campaigns/'+encodeURIComponent(c.getId())+'/published',limitParam:null,pageParam:'',startParam:'',writer:{writeAllFields:!0}},autoLoad:!0,listeners:{load:function(d){var b=d.first();if(b){a.setPublishedCampaign(b)}else {if(a.getPublishedCampaign()){a.setPublishedCampaign(null)}else {a.updatePublishedCampaign(null)}}}}})}else {a.setPublishedCampaign(null)}}});Ext.define('Bigmedia.view.campaign.CampViewModel',{extend:Ext.app.ViewModel,alias:'viewmodel.campaign-campview',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.campaign.dashboard.Info',{extend:Ext.Component,xtype:'campinfo',baseCls:'campinfo-panel',border:!1,height:80,tpl:new Ext.XTemplate('<div class="campinfo-container"><i class="fa fa-info" aria-hidden="true"></i></div>','<div class="campinfo-details-container">','<div>{campName}</div>',"<div>{campStartDate:date('d.m.Y')}-{campEndDate:date('d.m.Y')}</div>",'</div>')});Ext.define('Bigmedia.view.campaign.dashboard.ServiceActivity',{extend:Ext.panel.Panel,xtype:'campserviceactivity',referenceHolder:!0,title:Bigmedia.Locales.dashboardServiceActivityTitle,ui:'light',iconCls:'x-fa fa-paint-brush',headerPosition:'bottom',config:{dataStore:null},cls:'quick-graph-panel shadow',height:130,layout:'fit',items:[{xtype:'cartesian',animation:!Ext.isIE9m&&Ext.os.is.Desktop,reference:'chart',constrain:!0,constrainHeader:!0,background:'#70bf73',colors:['#a9d9ab'],axes:[{type:'category',fields:['day'],hidden:!0,position:'bottom'},{type:'numeric',fields:['total'],grid:{odd:{fill:'#e8e8e8'}},hidden:!0,position:'left'}],series:[{type:'area',style:{stroke:'#FFFFFF','stroke-width':'2px'},useDarkerStrokeColor:!1,xField:'day',yField:['total']}],interactions:[{type:'panzoom'}]}],updateDataStore:function(b,d){if(b){var a=this,c=a.lookupReference('chart');c.setStore(a.getGroupedStore())}},getGroupedStore:function(){var e=this,a=Ext.create('Ext.data.ChainedStore',{source:e.getDataStore()});a.group('performedAtDay');var c=a.getGroups();var d=c.items.map(function(a){return {day:a.getGroupKey(),total:a.length}});var b=Ext.create('Ext.data.Store',{fields:[{name:'day'},{name:'total'}],data:d});return b}});Ext.define('Bigmedia.view.campaign.dashboard.ServiceOperations',{extend:Ext.Panel,xtype:'campservices',referenceHolder:!0,cls:'service-type shadow',height:320,bodyPadding:15,title:Bigmedia.Locales.dashboardServiceOperationsTitle,layout:{type:'hbox',align:'stretch'},viewModel:{data:{status1:{count:0,percent:0},status2:{count:0,percent:0},status3:{count:0,percent:0}}},config:{dataSource:null},runStore:null,items:[{xtype:'container',width:170,padding:'0 20px 0 0',layout:{type:'vbox',align:'stretch'},items:[{xtype:'polar',reference:'chart',flex:1,background:'rgba(255, 255, 255, 1)',colors:['#ffc000','#6aa5db','#ee929c'],series:[{type:'pie',useDarkerStrokeColor:!1,xField:'total',donut:50,padding:0}],interactions:[{type:'rotate'}]},{xtype:'combobox',reference:'filtercities',displayField:'value',valueField:'id',forceSelection:!0,emptyText:Bigmedia.Locales.dashboardFilterCityEmptyText,listeners:{change:function(a,b,c){a.up('campservices').onFilterCityChange(a,b,c)}}},{xtype:'combobox',reference:'filterdates',displayField:'value',valueField:'id',emptyText:Bigmedia.Locales.dashboardFilterCoverDateEmptyText,forceSelection:!0,listeners:{change:function(a,b,c){a.up('campservices').onFilterDateChange(a,b,c)}}}]},{xtype:'container',flex:1,layout:{type:'vbox',align:'stretch'},items:[{xtype:'component',bind:{data:{name:Bigmedia.Locales.refServiceOperationStatus[1]+' ({status1.count})',value:'{status1.percent}'}},tpl:'<div class="left-aligned-div">{name}</div><div class="right-aligned-div">{value:percent}</div>'},{xtype:'progressbar',cls:'bottom-indent service-tasked',height:4,minHeight:4,bind:{value:'{status1.percent}'}},{xtype:'component',bind:{data:{name:Bigmedia.Locales.refServiceOperationStatus[2]+' ({status2.count})',value:'{status2.percent}'}},tpl:'<div class="left-aligned-div">{name}</div><div class="right-aligned-div">{value:percent}</div>'},{xtype:'progressbar',cls:'bottom-indent service-performing',height:4,minHeight:4,bind:{value:'{status2.percent}'}},{xtype:'component',bind:{data:{name:Bigmedia.Locales.refServiceOperationStatus[3]+' ({status3.count})',value:'{status3.percent}'}},tpl:'<div class="left-aligned-div">{name}</div><div class="right-aligned-div">{value:percent}</div>'},{xtype:'progressbar',cls:'bottom-indent service-done',height:4,bind:{value:'{status3.percent}'}},{xtype:'component',bind:{data:{status1:Bigmedia.Locales.refServiceOperationStatus[1],status2:Bigmedia.Locales.refServiceOperationStatus[2],status3:Bigmedia.Locales.refServiceOperationStatus[3]}},tpl:'<div class="services-legend">'+'<span><div class="legend-tasked"></div>{status1}</span>'+'<span><div class="legend-performing"></div>{status2}</span>'+'<span><div class="legend-done"></div>{status3}</span>'+'<div>'}]}],onFilterCityChange:function(e,d,f){var b=this,a=b.runStore,c=b.lookupReference('filterdates');a.removeFilter('filterCity');if(d){a.addFilter(new Ext.util.Filter({id:'filterCity',property:'faceCity',operator:'=',value:d}));b.initFilterCombo(c,a,'coverAt','coverAt',Ext.util.Format.date,'d.m.Y')}else {b.initFilterCombo(e,a,'faceCity','faceCity');c.setStore(c.fullStore)}b.recalcData(a)},onFilterDateChange:function(e,d,f){var b=this,a=b.runStore,c=b.lookupReference('filtercities');a.removeFilter('filterDate');if(d){a.addFilter(new Ext.util.Filter({id:'filterDate',property:'coverAt',operator:'=',value:d}));b.initFilterCombo(c,a,'faceCity','faceCity')}else {b.initFilterCombo(e,a,'coverAt','coverAt',Ext.util.Format.date,'d.m.Y');c.setStore(c.fullStore)}b.recalcData(a)},updateDataSource:function(d,e){var a=this;if(d){var b=a.lookupReference('filtercities'),c=a.lookupReference('filterdates');if(a.runStore){b.setValue();c.setValue();a.runStore.destroy()}a.runStore=new Ext.data.ChainedStore({source:d});a.recalcData(a.runStore);a.initFilterCombo(b,a.runStore,'faceCity','faceCity');b.fullStore=b.getStore();a.initFilterCombo(c,a.runStore,'coverAt','coverAt',Ext.util.Format.date,'d.m.Y');c.fullStore=c.getStore()}},initFilterCombo:function(f,g,d,c,b,e){var a={};g.each(function(h){a[h.get(d)]={display:h.get(c)}});var h=Object.keys(a).sort(function(a,h){return a-h}).map(function(h){return {id:h,value:b?b(a[h].display,e):a[h].display}});f.setStore({data:h})},recalcData:function(e){var c=this,d=c.lookupReference('chart'),a=c.getGroupedStore(e),f=c.getViewModel();d.setStore(a);var b=a.sum('total');a.each(function(a){f.set('status'+a.get('status'),{name:Bigmedia.Locales.refServiceOperationStatus[a.get('status')],count:a.get('total'),percent:b&&b!=0?a.get('total')/b:0})})},getGroupedStore:function(d){var f=this,b=Ext.create('Ext.data.ChainedStore',{source:d});b.group('status');var a=b.getGroups();var e=[{status:1,total:a.map[1]?a.map[1].length:0},{status:2,total:a.map[2]?a.map[2].length:0},{status:3,total:a.map[3]?a.map[3].length:0}];var c=Ext.create('Ext.data.Store',{fields:[{name:'status'},{name:'total'}],data:e});b.destroy();return c}});Ext.define('Bigmedia.view.campaign.dashboard.Proposals',{extend:Ext.panel.Panel,xtype:'campproposals',referenceHolder:!0,cls:'dashboard-main-chart shadow',height:380,bodyPadding:15,config:{dataSource:null},runStore:null,periods:null,title:Bigmedia.Locales.dashboardProposalsTitle,layout:{type:'hbox',align:'stretch'},items:[{xtype:'container',layout:'fit',flex:1,items:[{xtype:'cartesian',reference:'chart',axes:[{type:'numeric',position:'left',increment:1,titleMargin:20},{type:'category',position:'bottom'}],animation:Ext.isIE8?!1:!0,series:{type:'bar',xField:'value',yField:'count',colors:['#8561c5'],style:{minGapWidth:10},highlight:{strokeStyle:'black',fillStyle:'gold'},tooltip:{renderer:function(b,a,d){var c=a.get('value');b.setHtml(c+' - '+a.get('count')+' '+Bigmedia.Locales.dashboardProposalsTooltipSidesText)}},label:{field:'count',display:'insideEnd'}},interactions:[{type:'panzoom'}]}]},{xtype:'container',width:170,layout:{type:'vbox',align:'stretch'},items:[{xtype:'fieldset',title:Bigmedia.Locales.dashboardProposalsModeLabel,collapsible:!0,defaultType:'combobox',layout:'anchor',items:[{reference:'combomode',anchor:'100%',store:{fields:['id','name'],data:[{id:1,name:Bigmedia.Locales.dashboardProposalsModeCitiesText},{id:2,name:Bigmedia.Locales.dashboardProposalsModeSizetypesText},{id:3,name:Bigmedia.Locales.dashboardProposalsModeSidetypesText},{id:4,name:Bigmedia.Locales.dashboardProposalsModeSuppliersText},{id:5,name:Bigmedia.Locales.dashboardProposalsModePeriodsText}]},queryMode:'local',displayField:'name',valueField:'id',value:1,listeners:{change:function(a,b,c){a.up('campproposals').onModeChange(a,b,c)}}}]},{xtype:'fieldset',title:Bigmedia.Locales.dashboardFilterText,collapsible:!0,collapsed:!0,defaultType:'combobox',defaults:{anchor:'100%',queryMode:'local',displayField:'value',valueField:'value',forceSelection:!0,listeners:{change:function(a,b,c){a.up('campproposals').onFilterChange(a,b,c)}}},layout:'anchor',items:[{reference:'filtercities',emptyText:Bigmedia.Locales.dashboardFilterCityEmptyText,filter:{id:'filterCities',property:'city'}},{reference:'filternetworks',emptyText:Bigmedia.Locales.dashboardFilterSidetypeEmptyText,filter:{id:'filterNetworks',property:'type'}},{reference:'filterperiods',emptyText:Bigmedia.Locales.dashboardFilterPeriodEmptyText,displayField:'value',valueField:'startDate',listeners:{change:function(a,b,c){a.up('campproposals').onFilterDateChange(a,b,c)}}}]}]}],onModeChange:function(c,a,b){if(a){this.recalcData(this.runStore)}},onFilterChange:function(b,e,h){var a=this,c=a.runStore,d=a.lookupReference('filtercities'),g=a.lookupReference('filterperiods'),f=a.lookupReference('filternetworks');if(b.config.filter){c.removeFilter(b.config.filter.id);if(e){c.addFilter(new Ext.util.Filter({id:b.config.filter.id,property:b.config.filter.property,operator:'=',value:e}))}else {a.initFilterCombo(b,c)}}a.initFilterCombo(b==d?f:d,c);a.initFilterPeriod(g,c);a.recalcData(c)},onFilterDateChange:function(f,c,h){var b=this,a=b.runStore,d=b.lookupReference('filtercities'),g=b.lookupReference('filterperiods'),e=b.lookupReference('filternetworks');a.removeFilter('filterPeriodStart',!0);a.removeFilter('filterPeriodEnd');if(c){a.addFilter(new Ext.util.Filter({id:'filterPeriodStart',property:'endDate',operator:'>=',value:c}));a.addFilter(new Ext.util.Filter({id:'filterPeriodEnd',property:'startDate',operator:'<=',value:new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth()+1,0))}));b.initFilterCombo(d,a)}else {b.initFilterPeriod(f,a)}b.initFilterCombo(d,a);b.initFilterCombo(e,a);b.recalcData(a)},updateAll:function(){var a=this,d=a.lookupReference('filtercities'),c=a.lookupReference('filterperiods'),b=a.lookupReference('filternetworks');a.recalcData(a.runStore);a.initFilterCombo(d,a.runStore);d.fullStore=d.getStore();a.initFilterCombo(b,a.runStore);b.fullStore=b.getStore();a.initFilterPeriod(c,a.runStore);c.fullStore=c.getStore()},updateDataSource:function(b,f){var a=this;if(b){var e=a.lookupReference('filtercities'),d=a.lookupReference('filterperiods'),c=a.lookupReference('filternetworks');if(a.runStore){e.setValue();d.setValue();c.setValue();a.runStore.destroy()}a.runStore=new Ext.data.ChainedStore({source:b});a.updateAll();b.on('load',a.updateAll,a);b.on('add',a.updateAll,a);b.on('remove',a.updateAll,a)}},recalcData:function(d){var a=this,c=a.lookupReference('chart'),b=a.getGroupedStore(d),e=a.getViewModel();c.setStore(b)},getGroupedStore:function(i){var e=this,b=Ext.create('Ext.data.ChainedStore',{source:i}),g=e.lookupReference('combomode'),a,d;switch(+g.getValue()){case 1:a='city';break;case 2:a='size';break;case 3:a='type';break;case 4:a='supplier';break;}if(a){b.group(a);var h=b.getGroups();d=h.items.map(function(a){return {value:a.getGroupKey(),count:a.length}})}else {var c=e.getPeriods(b);d=Object.keys(c).sort().map(function(a){var b=Object.keys(c[a].sides).length;return {value:c[a].name,count:b}})}var f=Ext.create('Ext.data.Store',{fields:[{name:'value'},{name:'count'}],data:d});b.destroy();return f},getPeriods:function(c){var a={},b;function addSide(e,b){var d=b.getUTCFullYear()+'-'+(b.getUTCMonth()<10?'0':'')+b.getUTCMonth();if(!a[d]){a[d]={name:Ext.Date.monthNames[b.getUTCMonth()]+"'"+b.getUTCFullYear().toString().slice(-2),startDate:new Date(Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),1)),endDate:new Date(Date.UTC(b.getUTCFullYear(),b.getUTCMonth()+1,0)),sides:{}}}a[d].sides[e]=1;return d}c.each(function(d){b=addSide(d.get('sideId'),d.get('startDate'));if(b!==d.get('endDate').getUTCMonth()+'-'+d.get('endDate').getUTCFullYear()){var a=d.get('startDate');a=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth()+1,a.getUTCDate()));while(a<=d.get('endDate')){addSide(d.get('sideId'),a);a=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth()+1,a.getUTCDate()))}}});return a},initFilterPeriod:function(b,c){var a=this.getPeriods(c);var d=Object.keys(a).sort().map(function(d){return {id:d,value:a[d].name,startDate:a[d].startDate,endDate:a[d].endDate}});b.setStore({data:d})},initFilterCombo:function(b,g,c,f){var a={},e=b.config.filter.property,d=b.config.filter.property;g.each(function(h){a[h.get(e)]={display:h.get(d)}});var h=Object.keys(a).sort(function(a,d){return a-d}).map(function(d){return {id:d,value:c?c(a[d].display,f):a[d].display}});b.setStore({data:h})}});Ext.define('Bigmedia.view.campaign.dashboard.SidesBars',{extend:Ext.panel.Panel,xtype:'campsidesbars',referenceHolder:!0,title:Bigmedia.Locales.dashboardSidesTitle,ui:'light',iconCls:'x-fa fa-briefcase',headerPosition:'bottom',cls:'quick-graph-panel shadow',height:130,layout:'fit',config:{dataStore:null},items:[{xtype:'cartesian',reference:'chart',animation:!Ext.isIE9m&&Ext.os.is.Desktop,height:75,background:'#8561c5',colors:['#ffffff'],axes:[{type:'category',fields:['period'],hidden:!0,position:'bottom'},{type:'numeric',fields:['count'],grid:{odd:{fill:'#e8e8e8'}},hidden:!0,position:'left'}],series:[{type:'bar',xField:'period',yField:['count']}],interactions:[{type:'panzoom'}]}],updateDataStore:function(b,d){if(b){var a=this,c=a.lookupReference('chart');c.setStore(a.getGroupedStore())}},getGroupedStore:function(){var b=this,d=Ext.create('Ext.data.ChainedStore',{source:b.getDataStore()}),a=b.getPeriods(d),e=Object.keys(a).sort().reduce(function(b,d,e,f){if(e>0){while(+b[b.length-1].endDate+1000*60*60*24<+a[d].startDate){var c=new Date(+b[b.length-1].endDate+1000*60*60*24);b.push({period:Ext.Date.monthNames[c.getUTCMonth()]+"'"+c.getUTCFullYear().toString().slice(-2),startDate:new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth(),1)),endDate:new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth()+1,0)),count:0})}}b.push({period:a[d].name,startDate:a[d].startDate,endDate:a[d].endDate,count:Object.keys(a[d].sides).length});return b},[]);var c=Ext.create('Ext.data.Store',{fields:[{name:'period'},{name:'count'}],data:e});return c},getPeriods:function(c){var a={},b;function addSide(e,b){var d=b.getUTCFullYear()+'-'+(b.getUTCMonth()<10?'0':'')+b.getUTCMonth();if(!a[d]){a[d]={name:Ext.Date.monthNames[b.getUTCMonth()]+"'"+b.getUTCFullYear().toString().slice(-2),startDate:new Date(Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),1)),endDate:new Date(Date.UTC(b.getUTCFullYear(),b.getUTCMonth()+1,0)),sides:{}}}a[d].sides[e]=1;return d}c.each(function(d){b=addSide(d.get('sideId'),d.get('startDate'));if(b!==d.get('endDate').getUTCMonth()+'-'+d.get('endDate').getUTCFullYear()){var a=d.get('startDate');a=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth()+1,a.getUTCDate()));while(a<=d.get('endDate')){addSide(d.get('sideId'),a);a=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth()+1,a.getUTCDate()))}}});return a}});Ext.define('Bigmedia.view.campaign.dashboard.PhotoRepActivity',{extend:Ext.panel.Panel,xtype:'campphotorepactivity',referenceHolder:!0,title:Bigmedia.Locales.dashboardPhotosReceivedTitle,ui:'light',iconCls:'x-fa fa-camera',headerPosition:'bottom',cls:'quick-graph-panel shadow',height:130,layout:'fit',config:{dataStore:null},items:[{xtype:'cartesian',reference:'chart',animation:!Ext.isIE9m&&Ext.os.is.Desktop,background:'#35baf6',colors:['#483D8B','#94ae0a','#a61120','#ff8809','#ffd13e','#a61187','#24ad9a','#7c7474','#a66111'],bind:{store:'{earnings}'},axes:[{type:'category',fields:['day'],hidden:!0,position:'bottom'},{type:'numeric',fields:['total'],grid:{odd:{fill:'#e8e8e8'}},hidden:!0,position:'left'}],series:[{type:'line',style:{stroke:'#FFFFFF','stroke-width':'2px'},xField:'day',yField:['total']}],interactions:[{type:'panzoom'}]}],tools:[{xtype:'tool',cls:'quick-graph-panel-tool x-fa fa-ellipsis-v'}],updateDataStore:function(b,d){if(b){var a=this,c=a.lookupReference('chart');c.setStore(a.getGroupedStore())}},getGroupedStore:function(){var e=this,a=e.getDataStore();a.group('takenAtDay');var c=a.getGroups();var d=c.items.map(function(a){return {day:a.getGroupKey(),total:a.length}});var b=Ext.create('Ext.data.Store',{fields:[{name:'day'},{name:'total'}],data:d});return b}});Ext.define('Bigmedia.view.campaign.dashboard.BudgetBars',{extend:Ext.panel.Panel,xtype:'campbudgetbars',referenceHolder:!0,title:'Budget',ui:'light',iconCls:'x-fa fa-usd',headerPosition:'bottom',cls:'quick-graph-panel shadow',height:130,layout:'fit',config:{dataStore:null},items:[{xtype:'cartesian',reference:'chart',animation:!Ext.isIE9m&&Ext.os.is.Desktop,height:75,background:'#33abaa',colors:['#ffffff'],axes:[{type:'category',fields:['period'],hidden:!0,position:'bottom'},{type:'numeric',fields:['total'],grid:{odd:{fill:'#e8e8e8'}},hidden:!0,position:'left'}],series:[{type:'bar',xField:'period',yField:['total']}],interactions:[{type:'panzoom'}]}],updateDataStore:function(b,d){if(b){var a=this,c=a.lookupReference('chart');c.setStore(a.getGroupedStore())}},getGroupedStore:function(){var b=this,d=Ext.create('Ext.data.ChainedStore',{source:b.getDataStore()}),a=b.getPeriods(d),e=Object.keys(a).sort().reduce(function(b,d,e,f){if(e>0){while(+b[b.length-1].endDate+1000*60*60*24<+a[d].startDate){var c=new Date(+b[b.length-1].endDate+1000*60*60*24);b.push({period:Ext.Date.monthNames[c.getUTCMonth()]+"'"+c.getUTCFullYear().toString().slice(-2),startDate:new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth(),1)),endDate:new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth()+1,0)),total:0})}}b.push({period:a[d].name,startDate:a[d].startDate,endDate:a[d].endDate,total:a[d].total});return b},[]);var c=Ext.create('Ext.data.Store',{fields:[{name:'period'},{name:'total'}],data:e});return c},getPeriods:function(b){var a={},c;function addAmount(g,c,d){if(c&&d){var f=c.getUTCFullYear()+'-'+(c.getUTCMonth()<10?'0':'')+c.getUTCMonth(),e=c;if(!a[f]){a[f]={name:Ext.Date.monthNames[e.getUTCMonth()]+"'"+e.getUTCFullYear().toString().slice(-2),startDate:new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),1)),endDate:new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth()+1,0)),total:0}}if(f==d.getUTCFullYear()+'-'+(d.getUTCMonth()<10?'0':'')+d.getUTCMonth()){a[f].total+=g}else {var i=1000*60*60*24,j=(+d-+c)/i,h=new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth()+1,1));a[f].total+=g*(+h-+c)/(i*j);var k=g-g*(+h-+c)/(i*j);if(+h<+d){addAmount(k,h,d)}}}}b.each(function(a){addAmount(a.get('total'),a.get('startDate'),a.get('endDate'))});return a}});Ext.define('Bigmedia.view.campaign.dashboard.PhotoRepExecution',{extend:Ext.Panel,xtype:'campphotorepexecution',referenceHolder:!0,cls:'service-type shadow',height:320,bodyPadding:15,title:Bigmedia.Locales.dashboardPhotorepExecutionTitle,layout:{type:'hbox',align:'stretch'},viewModel:{data:{status1:{count:0,percent:0},status3:{count:0,percent:0}}},config:{dataSource:null},runStore:null,items:[{xtype:'container',width:240,padding:'0 20px 0 0',layout:{type:'vbox',align:'stretch'},items:[{xtype:'polar',colors:['#aed581','#6aa5db'],flex:1,reference:'chart',series:[{type:'gauge',angleField:'done',minimum:0,needleLength:100}]},{xtype:'component',bind:{data:{status1:Bigmedia.Locales.refServiceOperationStatus[1],status3:Bigmedia.Locales.refServiceOperationStatus[3]}},tpl:'<div class="photorep-legend">'+'<span><div class="legend-tasked"></div>{status1}</span>'+'<span><div class="legend-done"></div>{status3}</span>'+'</div>'}]},{xtype:'container',flex:1,layout:{type:'vbox',align:'stretch'},items:[{xtype:'component',bind:{data:{name:Bigmedia.Locales.refServiceOperationStatus[1]+' ({status1.count})',value:'{status1.percent}'}},tpl:'<div class="left-aligned-div">{name}</div><div class="right-aligned-div">{value:percent}</div>'},{xtype:'progressbar',cls:'bottom-indent photorep-tasked',height:4,minHeight:4,bind:{value:'{status1.percent}'}},{xtype:'component',bind:{data:{name:Bigmedia.Locales.refServiceOperationStatus[3]+' ({status3.count})',value:'{status3.percent}'}},tpl:'<div class="left-aligned-div">{name}</div><div class="right-aligned-div">{value:percent}</div>'},{xtype:'progressbar',cls:'bottom-indent photorep-done',height:4,bind:{value:'{status3.percent}'}},{flex:1},{xtype:'container',layout:{type:'hbox',align:'stretch'},defaults:{xtype:'combobox',displayField:'value',valueField:'id',forceSelection:!0,flex:1,margin:'0 10px 0 0'},items:[{reference:'filtercities',emptyText:'City',listeners:{change:function(a,b,c){a.up('campphotorepexecution').onFilterCityChange(a,b,c)}}},{reference:'filtertypes',emptyText:'Type',listeners:{change:function(a,b,c){a.up('campphotorepexecution').onFilterTypeChange(a,b,c)}}},{reference:'filterdates',margin:'0',emptyText:'Deadline',listeners:{change:function(a,b,c){a.up('campphotorepexecution').onFilterDateChange(a,b,c)}}}]}]}],onFilterCityChange:function(e,c,f){var a=this,b=a.runStore,d=a.lookupReference('filtertypes');comboDates=a.lookupReference('filterdates');b.removeFilter('filterCity');if(c){b.addFilter(new Ext.util.Filter({id:'filterCity',property:'faceCity',operator:'=',value:c}))}else {a.initFilterCombo(e,b,'faceCity','faceCity')}a.initFilterCombo(d,b,'type','typeName');a.initFilterCombo(comboDates,b,'deadline','deadline',Ext.util.Format.date,'d.m.Y');a.recalcData(b)},onFilterTypeChange:function(f,c,g){var a=this,b=a.runStore,d=a.lookupReference('filtercities'),e=a.lookupReference('filterdates');b.removeFilter('filterType');if(c){b.addFilter(new Ext.util.Filter({id:'filterType',property:'type',operator:'=',value:+c}))}else {a.initFilterCombo(f,b,'type','typeName')}a.initFilterCombo(e,b,'deadline','deadline',Ext.util.Format.date,'d.m.Y');a.initFilterCombo(d,b,'faceCity','faceCity');a.recalcData(b)},onFilterDateChange:function(f,c,g){var a=this,b=a.runStore,e=a.lookupReference('filtertypes'),d=a.lookupReference('filtercities');b.removeFilter('filterDate');if(c){b.addFilter(new Ext.util.Filter({id:'filterDate',property:'deadline',operator:'=',value:c}))}else {a.initFilterCombo(f,b,'deadline','deadline',Ext.util.Format.date,'d.m.Y')}a.initFilterCombo(d,b,'faceCity','faceCity');a.initFilterCombo(e,b,'type','typeName');a.recalcData(b)},updateDataSource:function(e,f){var a=this;if(e){var b=a.lookupReference('filtercities'),d=a.lookupReference('filtertypes'),c=a.lookupReference('filterdates');if(a.runStore){b.setValue();d.setValue();c.setValue();a.runStore.destroy()}a.runStore=new Ext.data.ChainedStore({source:e});a.recalcData(a.runStore);a.initFilterCombo(b,a.runStore,'faceCity','faceCity');a.initFilterCombo(d,a.runStore,'type','typeName');a.initFilterCombo(c,a.runStore,'deadline','deadline',Ext.util.Format.date,'d.m.Y')}},initFilterCombo:function(f,g,d,c,b,e){var a={};g.each(function(h){a[h.get(d)]={display:h.get(c)}});var h=Object.keys(a).sort(function(a,h){return a-h}).map(function(h){return {id:h,value:b?b(a[h].display,e):a[h].display}});f.setStore({data:h})},recalcData:function(e){var c=this,d=c.lookupReference('chart'),b=c.getGroupedStore(e),f=c.getViewModel();var a=b.sum('total');d.getSeries()[0].setMaximum(a||1);d.setStore(b);f.set({status1:{name:Bigmedia.Locales.refServiceOperationStatus[1],count:b.getAt(0).get('tasked'),percent:a&&a!=0?b.getAt(0).get('tasked')/a:0},status3:{name:Bigmedia.Locales.refServiceOperationStatus[3],count:b.getAt(0).get('done'),percent:a&&a!=0?b.getAt(0).get('done')/a:0}})},getGroupedStore:function(d){var f=this,a=0,b=0;d.each(function(c){if(c.get('photoRecs')&&c.get('photoRecs').length>0){b++}else {a++}});var e=[{tasked:a,done:b,total:a+b}];var c=Ext.create('Ext.data.Store',{fields:['tasked','done','total'],data:e});return c}});Ext.define('Bigmedia.view.campaign.dashboard.DashboardController',{extend:Ext.app.ViewController,alias:'controller.dashboard',init:function(){var a=this;a.callParent();var b=Ext.ComponentQuery.query('restrictedarea')[0];b.getViewModel().bind({bindTo:'{curCamp.proposals}'},function(b){a.updateProposals(b)})},updateProposals:function(a){var b=this.lookup('chartcoverage');if(a){a.setRemoteFilter(!1);b.setFacesStore(a)}else {b.setFacesStore(null)}},updateCurrentCampaign:function(a){console.log(a);var b=this.lookup('chartcoverage');if(a){b.setFacesStore(a.proposals())}else {b.setFacesStore(null)}}});Ext.define('Bigmedia.view.campaign.dashboard.Dashboard',{extend:Ext.container.Container,xtype:'campaigndashboard',controller:'dashboard',layout:'responsivecolumn',scrollable:'y',items:[{xtype:'container',userCls:'big-40 small-100',margin:0,padding:0,defaults:{style:{margin:'0 20px 20px 0','float':'left'}},items:[{xtype:'campinfo',bind:{data:{campName:'{curCamp.name}',campStartDate:'{curCamp.startDate}',campEndDate:'{curCamp.endDate}',curCamp:'{curCamp}'}},cls:'infocampaign-panel shadow',userCls:'small-100'},{xtype:'campserviceactivity',bind:{dataStore:'{curCamp.campServiceOperations}'},userCls:'small-50'},{xtype:'campsidesbars',bind:{dataStore:'{curCamp.proposals}'},userCls:'small-50'},{xtype:'campbudgetbars',bind:{dataStore:'{curCamp.estimations}'},userCls:'small-50'},{xtype:'campphotorepactivity',bind:{dataStore:'{curCamp.campPhotos}'},userCls:'small-50'}]},{xtype:'campproposals',bind:{dataSource:{bindTo:'{curCamp.proposals}'}},userCls:'big-60 small-100'},{xtype:'chartscoverageinteractive',reference:'chartcoverage',bind:{facesStore:'{curCamp.proposals}'},hideCitiesBar:!1,userCls:'big-100 small-100'},{xtype:'campservices',bind:{dataSource:'{curCamp.campServiceOperations}',hidden:'{curCamp.campServiceOperations.count == 0}'},userCls:'big-50 small-100'},{xtype:'campphotorepexecution',bind:{dataSource:'{curCamp.campPhotos}',hidden:'{curCamp.campPhotos.count == 0}'},userCls:'big-50 small-100'}]});Ext.define('Bigmedia.view.campaign.CampView',{extend:Ext.Panel,xtype:'campview',controller:'campaign-campview',layout:{type:'border'},closeAction:'hide',bodyBorder:!1,defaults:{collapsible:!0,split:!0,bodyPadding:10},config:{campaignId:null,publishedCampaign:null},updatePublishedCampaign:function(a,e){var b=this,d=b.lookup('campcard'),c=b.lookup('campsides');b.lookupViewModel().set('pubCamp',a);if(a==e){d.updatePublishedCampaign(a);c.updatePublishedCampaign(a)}else {d.setPublishedCampaign(a);c.setPublishedCampaign(a)}},items:[{title:Bigmedia.Locales.campViewTitle,region:'west',collapsed:!0,minWidth:300,maxWidth:700,width:500,bodyPadding:0,layout:'vbox',items:[{xtype:'toolbar',dock:'top',layout:{type:'hbox'},width:'100%',items:[{xtype:'textfield',flex:1,name:'searchCamp',emptyText:Bigmedia.Locales.campViewSearchCampEmptyText,enableKeyEvents:!0,listeners:{change:function(c,b,d){var a=this.up('campview').lookupReference('campaignsDataView').getStore();if(c.getValue()){a.removeFilter('filterName',!0);a.addFilter(new Ext.util.Filter({id:'filterName',filterFn:function(a){var e=new RegExp(b,'i');return e.test(a.get('name'))}}))}else {a.removeFilter('filterName')}}}}]},{xtype:'campdataview',reference:'campaignsDataView',bind:{store:'{campcardstore}',selection:{bindTo:'{curCamp}'}},width:'100%',flex:1}]},{header:!1,xtype:'tabpanel',itemId:'viewmodeTabPanel',region:'center',layout:'card',activeTab:0,tabBar:{items:[{xtype:'tbfill'},{xtype:'button',iconCls:'x-fa fa-remove',reference:'delCampaignBtn',text:Bigmedia.Locales.campViewDeleteCampaignBtnText,handler:function(a){Ext.Msg.confirm({title:Bigmedia.Locales.campViewConfirmDeleteCampaignTitle,message:Bigmedia.Locales.campViewConfirmDeleteCampaignMessage,buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(d){if(d==='yes'){var c=a.up('restrictedarea').getViewModel().get('curCamp'),b=a.up('campview').lookupViewModel().getStore('campaigns');b.remove(c);b.sync();a.up('restrictedarea').getController().redirectTo('campaigns')}},scope:a})}}]},items:[{title:Bigmedia.Locales.campCardProposalsTitle,xtype:'campsides',reference:'campsides'},{title:Bigmedia.Locales.campViewDashboardTitle,xtype:'campaigndashboard',reference:'campdashboard'},{title:Bigmedia.Locales.campViewDetailsTitle,xtype:'campcard',reference:'campcard',flex:1}]}],listeners:{show:function(a){}}});Ext.define('Bigmedia.view.campaign.CampaignsViewController',{extend:Ext.app.ViewController,alias:'controller.campaign-campaignsview'});Ext.define('Bigmedia.view.campaign.CampaignsViewModel',{extend:Ext.app.ViewModel,alias:'viewmodel.campaign-campaignsview',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.campaign.CampaignsView',{extend:Ext.panel.Panel,xtype:'campaignsview',controller:'campaign-campaignsview',layout:'fit',tbar:{layout:{type:'hbox'},width:'100%',items:[{xtype:'datefield',fieldLabel:Bigmedia.Locales.campViewFromDateLabel,value:Ext.Date.add(new Date(),Ext.Date.MONTH,-3),maxValue:new Date(),listeners:{change:function(d,a,c){if(a&&a!==c&&d.isValid()){var b=this.lookupViewModel().getStore('campaigns');b.getProxy().setExtraParams({fromDate:Ext.Date.format(a,'c')});b.load()}}}},{xtype:'textfield',flex:1,name:'searchCamp',emptyText:Bigmedia.Locales.campViewSearchCampEmptyText,enableKeyEvents:!0,listeners:{change:function(c,b,d){var a=this.up('campaignsview').lookupReference('bigcampview').getStore();if(c.getValue()){a.removeFilter('filterName',!0);a.addFilter(new Ext.util.Filter({id:'filterName',filterFn:function(a){var e=new RegExp(b,'i');return e.test(a.get('name'))}}))}else {a.removeFilter('filterName')}}}}]},items:[{xtype:'campdataview',reference:'bigcampview',bind:{store:'{campsviewstore}',selection:{bindTo:'{curCamp}'}},tpl:new Ext.XTemplate('<a href="#campaigns/new"><div class="newcamp-item big-50 small-100 shadow camp-dataitem">','<div class="camp-picture" style="background-image: url(resources/images/newcamp.png)">','<div class="camp-info">','<div class="camp-name">'+Bigmedia.Locales.campaignsCreateNewCampaignText+'</div>','<div class="camp-period">'+Bigmedia.Locales.campaignsWithCustomPeriodText+'</div>','</div>','</div>','</div></a>','<tpl for=".">','<div class="campview-item big-50 small-100 shadow camp-dataitem">','<div class="camp-picture"','<tpl if="this.hasSubject(subjectId) == true"> style="background-image: url(/api/v1/subjects/{subjectId}/image.jpeg)"</tpl>>','<div class="camp-info">','<div class="camp-name">{name}</div>','<div class="camp-period">{startDate:date("d.m.Y")}&nbsp;-&nbsp;{endDate:date("d.m.Y")}</div>','</div>','</div>','</div>','</tpl>',{formatDate:function(a){return Ext.Date.format(a,'d.m.Y')},hasSubject:function(a){return !!a}})}]});Ext.define('Bigmedia.view.campaign.dashboard.Sales',{extend:Ext.panel.Panel,xtype:'sales',title:'Sales',ui:'light',iconCls:'x-fa fa-briefcase',headerPosition:'bottom',cls:'quick-graph-panel shadow',height:130,layout:'fit',items:[{xtype:'cartesian',animation:!Ext.isIE9m&&Ext.os.is.Desktop,height:75,background:'#8561c5',colors:['#ffffff'],bind:'{quarterlyGrowth}',axes:[{type:'category',fields:['xvalue'],hidden:!0,position:'bottom'},{type:'numeric',fields:['yvalue'],grid:{odd:{fill:'#e8e8e8'}},hidden:!0,position:'left'}],series:[{type:'bar',xField:'xvalue',yField:['yvalue']}],interactions:[{type:'panzoom'}]}]});'use strict';Ext.define('Bigmedia.view.carousel.FacePhotos',{extend:Ext.container.Container,xtype:'facephotoscarousel',config:{face:null},viewModel:{},layout:'anchor',referenceHolder:!0,items:[{xtype:'panel',shrinkWrap:!1,shrinkWrapDock:!1,manageHeight:!1,listeners:{afterlayout:function afterlayout(a){a.body.setStyle('height','auto')}},anchor:'100% 100%',bodyStyle:{height:'100% !important'},items:{reference:'carousel',xtype:'carousel',publishes:'single',items:[]},dockedItems:[{xtype:'bmcarouseltoolbar',dock:'bottom',bind:{hidden:'{carousel.single}'}}]}],updateFace:function updateFace(a){var c=this;var b=[];if(!a){c.initCarousel(b);return}if(a.get('photos')){a.get('photos').forEach(function(c){if(c.id){b.push('/photohub/photo/'+c.id)}else {if(c.src){if(a.get('faceId')){b.push('/photohub/face/'+a.get('faceId'))}else {b.push('/photohub/face/'+a.getId())}}}})}else {if(a.get('urlPhoto')){if(a.get('faceId')){b.push('/photohub/face/'+a.get('faceId'))}else {b.push('/photohub/face/'+a.getId())}}else {if(a.get('doorsNo')){b.push('/photohub/doors/'+a.get('doorsNo'))}}}c.initCarousel(b)},initCarousel:function initCarousel(b){var c=this,a=c.lookupReference('carousel');a.removeAll(!0);if(b.length>0){b.forEach(function(c){a.add(new Ext.panel.Panel({bodyStyle:'background: center / cover no-repeat url('+c+')'}))})}}});Ext.define('Bigmedia.view.carousel.FacePhotos',{extend:Ext.container.Container,xtype:'facephotoscarousel',config:{face:null},viewModel:{},layout:'anchor',referenceHolder:!0,items:[{xtype:'panel',shrinkWrap:!1,shrinkWrapDock:!1,manageHeight:!1,listeners:{afterlayout:function(a){a.body.setStyle('height','auto')}},anchor:'100% 100%',bodyStyle:{height:'100% !important'},items:{reference:'carousel',xtype:'carousel',publishes:'single',items:[]},dockedItems:[{xtype:'bmcarouseltoolbar',dock:'bottom',bind:{hidden:'{carousel.single}'}}]}],updateFace:function(a){var c=this;var b=[];if(!a){c.initCarousel(b);return}if(a.get('photos')){a.get('photos').forEach(function(c){if(c.id){b.push('/photohub/photo/'+c.id)}else {if(c.src){if(a.get('faceId')){b.push('/photohub/face/'+a.get('faceId'))}else {b.push('/photohub/face/'+a.getId())}}}})}else {if(a.get('urlPhoto')){if(a.get('faceId')){b.push('/photohub/face/'+a.get('faceId'))}else {b.push('/photohub/face/'+a.getId())}}else {if(a.get('doorsNo')){b.push('/photohub/doors/'+a.get('doorsNo'))}}}c.initCarousel(b)},initCarousel:function(b){var c=this,a=c.lookupReference('carousel');a.removeAll(!0);if(b.length>0){b.forEach(function(c){a.add(new Ext.panel.Panel({bodyStyle:'background: center / cover no-repeat url('+c+')'}))})}}});Ext.define('Bigmedia.view.cart.CartGridController',{extend:Ext.app.ViewController,alias:'controller.cartgridcontroller',listen:{store:{'#ShoppingCart':{add:'onShoppingCartChange',remove:'onShoppingCartChange'}}},init:function(){var a=this;this.callParent();a.onUserChanged();Bigmedia.Vars.on('userchanged',a.onUserChanged,a);a.getView().winCoverage=Ext.create('Bigmedia.view.cart.WinCoverage',{viewModel:{stores:{facesStore:Ext.getStore('ShoppingCart')},data:{mapView:null}}});a.getView().winCoverage.on('hide',a.onWinCoverageHide,a);a.getView().winCoverage.on('show',a.onWinCoverageShow,a)},onUserChanged:function(){var b=this.getViewModel(),a=Bigmedia.Vars.getUser();b.set('isAnonymous',!a||a.get('id')==='anonymous')},onWinCoverageShow:function(c){var b=this,a=b.getView().getMapView().getMap();if(a){a.cartCoveragesLayer.setVisible(!0)}},onWinCoverageHide:function(d){var b=this,c=b.lookup('showcoveragebtn'),a=b.getView().getMapView().getMap();c.setPressed(!1);if(a){a.cartCoveragesLayer.setVisible(!1)}},onShoppingCartChange:function(a){this.updateStatusBar(a)},onToggleCoverage:function(e,a){var d=this,b=d.getView(),c=b.winCoverage;c.setVisible(a)},onCheckoutButton:function(){},onCampaignButton:function(f){var c=this,b=c.lookupReference('cartGrid'),d=Ext.getStore('Faces'),e=b.getStore(),a=Bigmedia.Vars.getViewport();a.getController().setCurrentView('dialog.DlgAddToCampaign')},removeItemFromCartAction:function(e,d,f){var b=e.getStore().getAt(d);var a=Ext.getStore('Faces'),c=Ext.getStore('ShoppingCart');a.beginUpdate();a.suspendEvents(!0);a.getById(b.id).set({inCart:!1,selected:!1},{silent:!0});c.remove(b);a.resumeEvents();a.endUpdate();this.showToast(Bigmedia.Locales.cartRemoveItemToastText)},removeItemFromCart:function(d){var b=d.getWidgetRecord();var a=Ext.getStore('Faces'),c=Ext.getStore('ShoppingCart');a.beginUpdate();a.suspendEvents(!0);a.getById(b.id).set({inCart:!1,selected:!1},{silent:!0});c.remove(b);a.resumeEvents();a.endUpdate();this.showToast(Bigmedia.Locales.cartRemoveItemToastText)},removeFromCart:function(){var b=this,c=b.getView(),a=Ext.getStore('Faces'),d=c.getStore(),e=Ext.getCmp('headercart');Ext.MessageBox.show({msg:Bigmedia.Locales.cartPrepareItemsRemoveFromCartMsg,progressText:Bigmedia.Locales.cartPrepareItemsRemoveProgressText,width:300,wait:{interval:200},animateTarget:e});b.timer=Ext.defer(function(){var e=c.getSelection();a.beginUpdate();a.suspendEvents(!0);c.getSelection().forEach(function(c){var b=a.getById(c.id);b.set({inCart:!1,selected:!1},{silent:!0})});d.remove(e);a.resumeEvents();a.endUpdate();b.timer=null;Ext.MessageBox.hide();b.showToast(Bigmedia.Locales.cartRemoveItemsToastText)},500)},onGridSelectionChange:function(a){this.updateStatusBar(a.getStore())},updateStatusBar:function(f){var b=this,g=b.getView(),h=b.lookupReference('statusCartGrid'),c=f.getCount(),a=g.getSelectionModel().getCount();status=Ext.String.format(Bigmedia.Locales.statusBarTotal,c);if(a>0){status+=' | '+Ext.String.format(Bigmedia.Locales.statusBarChecked,a)}var e=b.lookupReference('exportbtn'),d=b.lookupReference('removefromcartbtn');e.setDisabled(c==0&&a==0);d.setDisabled(a==0);h.setStatus({text:status,iconCls:'ready-icon'})},exportToExcel:function(b){Ext.MessageBox.show({msg:Bigmedia.Locales.exportExcelSavingData,progressText:Bigmedia.Locales.exportExcelProgressText,width:300,wait:{interval:200},animateTarget:b});var a=this;a.timer=Ext.defer(function(){Bigmedia.GridExport.exportToExcel(a.getView(),'bigmedia_cart.xlsx',function(){},!0);a.timer=null;Ext.MessageBox.hide();a.showToast(Bigmedia.Locales.exportExcelFileSaved,Bigmedia.Locales.exportExcelDone)},3000)},showToast:function(a,b){Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400,minWidth:400})},destroy:function(){if(this.timer){window.clearTimeout(this.timer)}Ext.Msg.hide();this.callParent()}});Ext.define('Bigmedia.view.cart.CartGrid',{extend:Ext.grid.Panel,controller:'cartgridcontroller',plugins:'gridfilters',xtype:'cart-grid',columnLines:!0,padding:0,bodyPadding:0,margin:0,config:{mapView:null},referenceHolder:!0,selModel:{type:'checkboxmodel',checkOnly:!0,listeners:{focuschange:function(d,b,c){var a=d.view;if(!c){if(b){a.oldFocused=b}return}if(b){a.removeRowCls(b,'bm-row-focused')}if(a.oldFocused){a.removeRowCls(a.oldFocused,'bm-row-focused')}if(c){a.addRowCls(c,'bm-row-focused')}}}},updateMapView:function(a){this.winCoverage.getViewModel().set('mapView',a)},features:[{ftype:'rowbody',getAdditionalData:function(m,o,c,n){var a=c.get('parsedOccupancy');var j=a.reduce(function(b,a){return b+a.actualDays},0);var l=a.map(function(a){var b='<span class="tableRow_month" style="width: '+Math.round(a.actualDays*1000000/j)/10000+'%;">';a.periods.forEach(function(d){b+='<span class="month_line month_line-'+d.status+'" style="width: '+Math.round(d.days*1000000/a.actualDays)/10000+'%;" data-qtip="'+Bigmedia.Locales.occupancyTooltip[d.status]+'"></span>'});b+='<div class="date_name">'+Ext.Date.getShortMonthName(a.month)+'`'+a.year.toString().slice(-2)+'</div>';b+='</span>';return b});var h='',i='';if(c.get('startDate')||c.get('endDate')){var f,d,b,e;if(c.get('startDate')&&+c.get('startDate')>=Date.UTC(a[0].year,a[0].month,a[0].day)){h='<div id="before" class="mask_opaque" style="width: calc(';f=Ext.Date.diff(new Date(Date.UTC(a[0].year,a[0].month,a[0].day)),c.get('startDate'),Ext.Date.DAY);d=0,b=0;while(b<a.length&&Date.UTC(a[b].year,a[b].month,a[b].day)<+c.get('startDate')){d++;b++}e=f/j*100;h+=e+'% - '+(d*3+3)+'px)"></div>'}var g=a.length,k=new Date(Date.UTC(a[g-1].year,a[g-1].month,0));if(c.get('endDate')&&+c.get('endDate')<+k){i='<div id="after" class="mask_opaque" style="width: calc(';f=Ext.Date.diff(c.get('endDate'),k,Ext.Date.DAY);d=0,b=g-1;while(b>=0&&Date.UTC(a[b].year,a[b].month,a[b].day)>+c.get('endDate')){d++;b--}e=Math.round(f/j*100);i+=e+'% - '+(d*3+6)+'px)"></div>'}}return {rowBody:'<div class="tableRow_calendar"><div class="tableRow_calendar_inner">'+h+l.join('')+i+'</div></div>',rowBodyCls:'rowbody_occupancy'}}}],tbar:['->',{text:'Show Coverage',xtype:'button',reference:'showcoveragebtn',iconCls:'x-fa fa-line-chart',disabled:!1,enableToggle:!0,listeners:{toggle:'onToggleCoverage'}},{text:Bigmedia.Locales.gridBtnRemoveFromCartText,xtype:'button',reference:'removefromcartbtn',iconCls:'x-fa fa-minus',disabled:!0,listeners:{click:'removeFromCart'}},{reference:'exportbtn',xtype:'button',text:Bigmedia.Locales.gridBtnExportToExcelText,iconCls:'x-fa fa-file-excel-o',listeners:{click:'exportToExcel'}}],bbar:{xtype:'statusbar',reference:'statusCartGrid',defaultText:'',defaultIconCls:'default-icon',text:'Ready',iconCls:'ready-icon',busyText:Bigmedia.Locales.statusBarLoading},title:Bigmedia.Locales.facesTitle,header:!1,columns:[{text:Bigmedia.Locales.colFaceNum,sortable:!0,dataIndex:'num',groupable:!1,width:80},{text:Bigmedia.Locales.colCity,sortable:!0,dataIndex:'city',groupable:!1,width:120,filter:'list'},{text:Bigmedia.Locales.colAddress,sortable:!0,dataIndex:'address',groupable:!1,width:250,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{text:Bigmedia.Locales.colCat,sortable:!0,dataIndex:'catab',groupable:!1,width:40,filter:'list'},{text:Bigmedia.Locales.colSize,sortable:!0,dataIndex:'size',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colLight,sortable:!0,dataIndex:'light',groupable:!1,width:40,filter:'list',align:'center',width:40,renderer:function(b){var a='';switch(b){case '+':a='<span class="x-fa fa-lightbulb-o" style="color: #ffd633"></span>';break;case 'off':a='<span class="x-fa fa-lightbulb-o" style="color: #8c8c8c"></span>';break;}return a}},{text:Bigmedia.Locales.colNetwork,sortable:!0,dataIndex:'network',groupable:!1,width:100,filter:'list'},{text:Bigmedia.Locales.colZone,sortable:!0,dataIndex:'zone',groupable:!1,width:90,filter:'list'},{text:Bigmedia.Locales.colGRP,sortable:!0,dataIndex:'grp',groupable:!1,width:60,filter:'number'},{text:Bigmedia.Locales.colOTS,sortable:!0,dataIndex:'ots',groupable:!1,width:60,filter:'number'},{text:Bigmedia.Locales.colDoorsNo,sortable:!0,dataIndex:'doors_no',groupable:!1,width:60,filter:{type:'string',itemDefaults:{emptyText:Bigmedia.Locales.gridColumnStrFilterText}}},{xtype:'actioncolumn',width:50,items:[{iconCls:'x-fa fa-minus',tooltip:'Delete',handler:'removeItemFromCartAction'}]}],updateCartStatusBar:function(){var c=this,k=c.lookupReference('statusCartGrid'),a=c.getStore(),g=(a.getData().getSource()||a.getData()).getCount(),e=a.getCount(),d=c.getSelectionModel().getCount();var b=Ext.String.format(Bigmedia.Locales.statusBarTotal,g);if(g!=e){b+=' | '+Ext.String.format(Bigmedia.Locales.statusBarFiltered,e)}if(d>0){b+=' | '+Ext.String.format(Bigmedia.Locales.statusBarChecked,d)}var i=[a.min('ots'),a.max('ots'),Math.round(a.average('ots')*100)/100,Math.round(a.sum('ots')*100)/100];b+='  | OTS(min,max,avg) = '+i.slice(0,3).join(', ')+' | OTS(sum) = '+i[3];var h=a.collect('city');if(h.length==1){grp=[a.min('grp'),a.max('grp'),Math.round(a.average('grp')*100)/100,Math.round(a.sum('grp')*100)/100];b+='  | GRP '+h[0]+'(min,max,avg) = '+grp.slice(0,3).join(', ')+' | GRP(sum) = '+grp[3]}var j=c.lookupReference('exportbtn'),f=c.lookupReference('removefromcartbtn');j.setDisabled(e==0&&d==0);if(f){f.setDisabled(d==0)}k.setStatus({text:b,iconCls:'ready-icon'})},listeners:{deselect:function(c,a,b){a.set('selected',!1)},select:function(c,a,b){a.set('selected',!0)},rowclick:function(a){},selectionchange:function(b,a){this.updateCartStatusBar()}}});Ext.define('Bigmedia.view.chart.CampStatPolar',{extend:Ext.chart.PolarChart,xtype:'campstatpolar',theme:'default-gradients',width:'100%',insetPadding:0,innerPadding:10,legend:!1,interactions:['rotate'],series:[{type:'pie',angleField:'budget',donut:80,colors:['#94ae0a','#115fa6','#a61120','#ff8809','#ffd13e','#a61187','#24ad9a','#7c7474','#a66111'],label:{field:'label',calloutLine:{length:60,width:3}},tooltip:{trackMouse:!0,renderer:function(b,a,c){var d=a.get('label');b.setHtml(d+' - '+a.get(c.field))}}},{type:'pie',angleField:'count',radiusFactor:70,donut:20,showInLegend:!1,colors:['#94ae0a','#115fa6','#a61120','#ff8809','#ffd13e','#a61187','#24ad9a','#7c7474','#a66111'],label:{field:'label'},tooltip:{trackMouse:!0,renderer:function(b,a,c){var d=a.get('label');b.setHtml(d+' - '+a.get(c.field))}}}]});Ext.define('Bigmedia.view.chart.CampStatModel',{extend:Ext.app.ViewModel,alias:'viewmodel.campstat',stores:{srcStore:{type:'plannerstore'},campByCities:{type:'campchartstore'},campBySizes:{type:'campchartstore'},campByNetworks:{type:'campchartstore'},campByCatabs:{type:'campchartstore'},campByZones:{type:'campchartstore'},campBySuppliers:{type:'campchartstore'}},data:{selectedCity:null,citiesHidden:!0}});Ext.define('Bigmedia.view.chart.CampStatController',{extend:Ext.app.ViewController,alias:'controller.campstat',initViewModel:function(b){var a=this;b.bind({bindTo:'{srcStore}'},function(c){a.recalcStores(c);if(c){c.on('datachanged',a.sourceDataChanged,a)}})},recalcStores:function(f,d){var a=this,b=a.getViewModel(),e=f||b.get('campStore'),c={cities:{},sizes:{},catabs:{},networks:{},zones:{},suppliers:{}};if(!e){b.get('campByCities').removeAll();b.get('campBySizes').removeAll();b.get('campByCatabs').removeAll();b.get('campByNetworks').removeAll();b.get('campByZones').removeAll();b.get('campBySuppliers').removeAll();return}e.each(function(b){if(!d||b.get('city')==d){a.addItemToGroup(c.cities,'city',b);a.addItemToGroup(c.sizes,'size',b);a.addItemToGroup(c.catabs,'catab',b);a.addItemToGroup(c.networks,'network',b);a.addItemToGroup(c.zones,'zone',b);a.addItemToGroup(c.suppliers,'supplier',b)}});if(!d){b.get('campByCities').loadData(a.getGroupData(c,'cities'))}b.get('campBySizes').loadData(a.getGroupData(c,'sizes'));b.get('campByCatabs').loadData(a.getGroupData(c,'catabs'));b.get('campByNetworks').loadData(a.getGroupData(c,'networks'));b.get('campByZones').loadData(a.getGroupData(c,'zones'));b.get('campBySuppliers').loadData(a.getGroupData(c,'suppliers'))},getGroupData:function(a,b){return Object.keys(a[b]).reduce(function(d,e){var c=a[b][e];d.push({label:c.name,budget:c.budget,count:c.count});return d},[])},addItemToGroup:function(c,b,a){if(!c[a.get(b)]){c[a.get(b)]={name:a.get(b),budget:a.get('finalPrice'),count:1}}else {c[a.get(b)].budget+=a.get('finalPrice');c[a.get(b)].count++}},sourceDataChanged:function(a){var b=this;b.recalcStores(a)},onCityItemHighlight:function(d,b){var a=this,c=a.getViewModel();a.recalcStores(c.get('srcStore'),b.record.get('label'))}});Ext.define('Bigmedia.view.chart.CampStat',{extend:Ext.panel.Panel,xtype:'campstat',viewModel:{type:'campstat'},controller:'campstat',config:{source:null,citiesHidden:!0},updateCitiesHidden:function(a){this.getViewModel().set('citiesHidden',a)},updateSource:function(a,d){var b=this,c=b.getViewModel();c.set('srcStore',a)},width:'100%',layout:{type:'hbox',align:'begin',pack:'center'},items:[{xtype:'cartesian',colors:['#458fd2'],width:250,height:'100%',bind:{store:'{campByCities}',hidden:'{citiesHidden}'},reference:'citiesBars',interactions:['itemhighlight'],insetPadding:'10 30 10 10',flipXY:!0,axes:[{type:'numeric',fields:'count',hidden:!0,minimum:0,position:'bottom'},{type:'category',fields:'label',position:'left'}],series:{type:'bar',xField:'label',yField:'count',style:{minGapWidth:10},highlight:{strokeStyle:'black',fillStyle:'gold'},tooltip:{renderer:function(b,a,d){var c=a.get('label');b.setHtml(c+' - '+a.get('count')+' '+Bigmedia.Locales.dashboardProposalsTooltipSidesText)}},label:{field:'count',orientation:'horizontal',display:'insideEnd'}},platformConfig:{phone:{touchAction:{panX:!0,panY:!0}},'!phone':{interactions:{type:'panzoom',zoomOnPanGesture:!0}}},listeners:{itemhighlight:'onCityItemHighlight'}},{xtype:'container',layout:{type:'vbox',align:'stretch',pack:'center'},height:'100%',flex:1,items:[{xtype:'container',flex:1,layout:{type:'hbox',align:'stretch',pack:'center'},items:[{xtype:'campstatpolar',bind:{store:'{campBySizes}'},flex:1},{xtype:'campstatpolar',bind:'{campByCatabs}',flex:1}]},{xtype:'container',flex:1,layout:{type:'hbox',align:'stretch',pack:'center'},items:[{xtype:'campstatpolar',bind:'{campByNetworks}',flex:1},{xtype:'campstatpolar',bind:'{campBySuppliers}',flex:1}]}]}]});Ext.define('Bigmedia.view.chart.CoverageModel',{extend:Ext.app.ViewModel,alias:'viewmodel.coverage',stores:{allCovers:{model:'Bigmedia.model.Coverage',autoLoad:!0},coverStore:{source:'{allCovers}',filters:[{property:'id_city',value:'{cityId}',exactMatch:!0}]},citiesStore:new Ext.data.Store()},data:{cityId:null,hideCitiesBar:!0}});Ext.define('Bigmedia.view.det.DetFace',{extend:Ext.window.Window,xtype:'detface',title:'',width:300,height:250,collapsible:!1,minWidth:250,minHeight:180,layout:'fit',resizable:!0,modal:!1,referenceHolder:!0,closeAction:'hide',config:{record:null,face:null,map:null},viewModel:{data:{record:null}},listeners:{show:function(b){var a=b.up().lookup('detschema');if(a&&!a.rendered){a.setHidden(!1)}}},updateRecord:function(a){var b=this;b.setFace(a)},updateFace:function(a){var c=this,d=c.up().lookup('doorsphoto');c.getViewModel().set('record',a);var b=c.lookup('carousel');if(a){if(a.get('doorsNo')!=null){d.setTitle('DoorsNo. '+a.get('doorsNo'));d.setBodyStyle('background','center / cover no-repeat url(/photohub/doors/'+a.get('doorsNo')+')')}var i=a.get('supplierNo')+(a.get('doorsNo')?' ('+a.get('doorsNo')+')':'');c.setTitle(i);if(a.get('photos')||a.get('photoUrl')){b.setFace(a)}else {var f=Ext.getStore('FacesInfo'),g=a.getId(),j=a.get('faceId');var e=f.getById(g);if(!e){Bigmedia.model.FaceInfo.load(g,{success:function(c,d){f.add(c);if(c.get('photos')){b.setFace(c)}else {b.setFace(a)}},failure:function(){b.setFace(a)}})}else {if(e.get('photos')){b.setFace(e)}else {b.setFace(a)}}}c.show()}else {b.setFace(null);c.setTitle('');d.setTitle('');d.setBodyStyle('background','#FFFFFF')}var h=c.up().lookup('detschema');h.setFace(a)},updateMap:function(a){},items:[{xtype:'panel',layout:'fit',items:{xtype:'facephotoscarousel',reference:'carousel'}}],tools:[{iconCls:'x-fas fa-map-marked-alt',handler:function(e,d){var c=this,b=c.up('window'),a=b.up().lookup('detschema');a.setHidden(!a.getHidden())}},{iconCls:'x-fa fa-binoculars',bind:{disabled:'{!record.doorsNo}'},handler:function(e,d){var c=this,a=c.up('window'),b=a.up().lookup('doorsphoto');if(!a.getFace()||!a.getFace().get('doorsNo')){return}b.setHidden(!b.getHidden())}}]});Ext.define('Bigmedia.view.det.DetLogo',{extend:Ext.window.Window,reference:'detlogo',title:'Logo image',width:500,height:600,collapsible:!1,minWidth:300,minHeight:380,layout:'fit',resizable:!0,modal:!0,referenceHolder:!0,closeAction:'hide',items:[{xtype:'form',reference:'windowForm',modelValidation:!0,layout:{type:'vbox',align:'stretch'},border:!1,bodyPadding:10,fieldDefaults:{msgTarget:'side',labelAlign:'top',labelWidth:200,margin:'0 0 10px 0',margin:0},defaults:{margin:'0 0 10px 0',margin:0},items:[{xtype:'drag-image',imageFormat:'image/png',padding:'10px 0',flex:1},{xtype:'filefield',accept:'image/*',margin:0,emptyText:Bigmedia.Locales.detLogoSelectImageEmptyText,name:'photo-path',buttonText:'',buttonConfig:{iconCls:'x-fa fa-file-image-o'},listeners:{change:function(b,c){var a=b.fileInputEl.dom;if(a.files&&a.files[0]){b.up('form').down('drag-image').getController().loadImage(a.files[0])}}}}],buttons:[{text:Bigmedia.Locales.btnCancelText,handler:function(b){var a=b.up('window');a.hide()}},{text:Bigmedia.Locales.btnSaveText,handler:function(d){var a=d.up('window'),c=a.lookupReference('windowForm'),b=c.getForm(),e=a.down('drag-image');if(b.isValid()){a.fireEvent('imagesave');b.reset();a.hide()}}}]}],getDataURL:function(){var a=this.down('drag-image');return a.dataURL},listeners:{show:function(a){var b=a.getViewModel().get('logoURL'),c=a.body,d=a.down('drag-image'),e=c.down('.drag-image-content'),f=c.down('.drag-file-label'),g=c.down('.drag-file-icon'),h=a.down('filefield');d.imageChanged=!1;d.dataURL=b;if(!b){this.lookupReference('windowForm').getForm().reset()}if(b){e.setStyle('background-image','url('+b+')');f.setStyle('visibility','hidden');g.setStyle('visibility','hidden');h.setRawValue(null)}else {e.setStyle('background-image','none');f.setStyle('visibility','visible');g.setStyle('visibility','visible')}}}});Ext.define('Bigmedia.view.dialog.DlgAnalyticsIFrame',{extend:Ext.window.Window,modal:!0,autoShow:!0,closeAction:'destroy',width:'100%',height:'100%',maximized:!0,layout:'fit',title:'      ',closable:!0,items:[{xtype:'box',autoEl:{tag:'iframe',src:'https://app.powerbi.com/view?r=eyJrIjoiZjFmYjIzYmYtY2RlZC00NTdiLTliODQtMTMyZmRjNmIyMDIzIiwidCI6IjNkMjIzNmU5LTg1OTgtNDdlMi1hM2QyLTQ5N2QyNWQ2NjFiMSIsImMiOjl9',title:'OOH_Market_Category',frameborder:'0',allowFullScreen:'true'}}],bbar:{items:['->',{scale:'large',ui:'base-blue',text:'  ',handler:function(a){a.up('window').close()}}]}});Ext.define('Bigmedia.view.dialog.DlgAutoPlanNoobController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgautoplannoob',listen:{store:{'#simpleplancities':{datachanged:function(a){this.getViewModel().set('planCitiesCount',a.count())}}}},bindings:{onPlanCitiesChange:'{planCities}',onStepChange:'{step}'},onStepChange:function(c){var a=this,d=a.getViewModel();if(c==2){if(!a.citiesSelected){var b=['gridobl','gridmil','gridwest'];b.forEach(b=>{a.lookup(b).getSelectionModel().selectAll()})}}},onCityRadioChange:function(c,b){var a=this;if(b){a.citiesSelected=!0;Ext.defer(a.updateAutoPlanCitiesParams,100,a)}},onCitiesSelectionChange:function(){var a=this;if(a.citiesSelected){a.updateAutoPlanCitiesParams()}},updateAutoPlanCitiesParams:function(){var a=this,d=a.lookup('citiesparamscontainer'),b=a.getViewModel(),i=b.get('oblCenters'),g=b.get('westUkraine'),h=b.get('milCities'),j=b.get('manualCities');var c;b.getStore('allCities').each(a=>a.set('checked',!1));if(i){c=a.lookup('gridobl')}else {if(g){c=a.lookup('gridwest')}else {if(h){c=a.lookup('gridmil')}else {c=a.lookup('gridall')}}}d.items.each(a=>{a.setHidden(!0)});var f=[];c.getSelectionModel().getSelection().forEach(a=>{a.set('checked',!0);var b=d.queryById('cityparams-'+a.getId());if(b){b.setHidden(!1)}else {f.push({xtype:'autoplancityparams',reference:'cityparams-'+a.getId(),id:'cityparams-'+a.getId(),city:a.get('name'),cityRec:a,anchor:'100%',hideParams:!0,hidden:!1})}});d.add(f);var e=[];d.items.each(a=>{if(!a.getHidden()){a.getCityRec().faces().each(function(b){e.push(b)})}});b.set('foundFaces',e)},onPlanCitiesChange:function(a){console.log(a)},init:function(c){var a=this;var b=Ext.getStore('Faces');a.callParent(c);var d=a.getViewModel();Bigmedia.AutoPlan.on('cityprepared',a.cityPrepared,a);Bigmedia.AutoPlan.on('algorithmcompleted',a.algorithmCompleted,a);Bigmedia.AutoPlan.on('terminated',a.onAutoPlanTerminate,a);if(!b.isLoaded()){b.on({workerload:{fn:a.loadFaces,scope:a,single:!0}});return}a.loadFaces()},onDateRangePeriodChanged:function(b){var a=this,c=a.getViewModel();c.set({startDate:b.startDate,endDate:b.endDate});Ext.defer(a.updateFacesInCities,100,a,[c.getStore('srcFaces')])},loadFaces:function(){var a=this,c=a.getViewModel(),d=Ext.getStore('Faces');var b=[];d.getDataSource().each(function(a){if(a.get('price')>0&&!!a.get('lon')&&!!a.get('lat')){var c=a.copy();b.push(c)}});c.getStore('srcFaces').add(b);a.loadCities();a.updateFacesInCities(c.getStore('srcFaces'))},onCoverageChange:function(a,b){var d=this,e=d.getViewModel(),c=e.getStore('allCities');c.each(c=>{c.set('coverage',b>0?b:null)});if(a.el){a.el.toggleCls('not-empty',b!=null||a.emptyText)}},onTotalBudgetChange:function(d,a){var f=this,h=f.getViewModel(),c=h.getStore('checkedCitiesStore'),g=c.sum('population'),e=c.last(),b=0;c.each(c=>{if(c!=e){var f=Math.round(a*c.get('population')/(g*100))*100;b+=f;var h=f>0?f:null;c.set('budget',h)}else {if(a-b>=0){c.set('budget',a-b>0?a-b:null)}}});if(d.el){d.el.toggleCls('not-empty',a!=null||d.emptyText)}},onSelectClick:function(){var a=this,e=a.lookup('minPrice'),c=a.lookup('maxCoverage'),p=a.lookup('optimal'),b=a.getViewModel(),o=b.get('planVarStore'),j=b.get('planStore');var n=e.getValue()?'MinPrice':c.getValue()?'MaxCoverage':'MaxGRPDivPrice',l=e.getValue()?' ':c.getValue()?' ':'';var k=b.get('resAlgorithms'),i=k.getById(n);if(i){var g=[];j.each(a=>g.push({id:a.getId(),budget:a.get('budget'),quantity:a.get('quantity'),coverage:a.get('coverage')}));var d=i.get('faces').reduce((b,a)=>{b[a.getId()]={id:+a.getId(),price:a.get('finalPrice')};return b},{});var f={};if(a.filteredFacesByPoiCats){a.filteredFacesByPoiCats.forEach(a=>{if(d[a.id_face]){f[a.id_poi]=+a.id_poi}})}var m={startDate:Ext.Date.localToUtc(b.get('startDate')),endDate:Ext.Date.localToUtc(b.get('endDate')),cities:g,poicats:b.get('selPoiCats'),pois:Object.values(f),faces:d,algorithm:l};var h=Ext.create('Bigmedia.view.dialog.DlgNoobSaveResult');h.on('send',a.onSendClick,a,{args:[m]});h.show()}},onSendClick:function(e,d){var b=this,a=b.lookup('simplefinish'),c=b.getViewModel();c.set('saving',!0);a.show();var f=Ext.merge(e,d);fetch('/api/v1/noobcreatecampaign',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(f)}).then(b=>{if(!b||!b.ok){a.hide();Bigmedia.Vars.showToast('     ','x-fa fa-sad-tear','#FF0000')}else {c.set('saving',!1)}})},initPlanVarStore:function(){var d=this,a=d.getViewModel(),b=a.get('planVarStore'),c=a.get('finalStore');b.removeAll();c.removeAll()},startPlanning:function(l){var a=this,n=this.getView(),b=a.getViewModel(),i=b.getStore('srcFaces'),m=b.getStore('repStore'),d=b.get('planStore'),h=Ext.getStore('CityBoundaries');var c={A:80,B:20};var j=new Ext.data.ChainedStore({source:i,filters:[function(a){return d.findExact('id',a.get('id_city'))>=0&&(!c||c[a.get('catab')]>0)}]});a.initPlanVarStore();var g={maxOnStreet:10,minDistance:200,minDistanceOnStreet:200,approxCellSize:0.1,coverageDays:Ext.clone(Bigmedia.Vars.coverageDays)};var e={},k=a.lookup('cities');d.each(function(b){var a=h.getById(b.getId());var f={},d={};b.set('progress',0);e[b.getId()]={id:a.getId(),planBudget:b.get('budget'),planBoards:b.get('quantity'),planCoverage:b.get('coverage'),planSizes:null,jsts:a.get('jsts'),turf:a.get('turf'),area:a.get('area'),bbox:a.get('bbox'),x:a.get('x'),y:a.get('y'),splits:[{fieldName:'catab',values:c,type:'count'},{fieldName:'supplier',values:null,type:'budget'}]}});var f=a.getPreparedFaces(j);b.set('facesCount',f.length);Bigmedia.AutoPlan.fireEventArgs('start',[f,e,g],Bigmedia.AutoPlan)},onStartClick:function(){var a=this,c=a.getViewModel();delete a.filteredFacesByPoiCats;a.lookup('progress').wait({text:'Planning is in progress...'});c.set('step',5);var b=[],e=a.lookup('poicatsaccordion'),h;e.items.each(a=>{b=b.concat(a.getSelCats())});c.set('selPoiCats',b);if(b.length>0){var f=c.get('planStore'),d=[];f.each(a=>d.push(a.getId()));var g={poicats:b,cities:d};fetch('/api/v1/facesbypoicats',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(g)}).then(a=>{return a.json()}).then(b=>{if(!b.length){c.set('step',4);Bigmedia.Vars.showToast(",        '",'x-fa fa-sad-tear','#FF0000');return}a.filteredFacesByPoiCats=b;a.startPlanning()})}else {a.startPlanning()}},getPlainFace:function(a){return {coveragesTurf:a.get('coveragesTurf'),cells:a.get('cells'),doors_no:a.get('doors_no'),grp:a.get('grp')||0.01,id:a.get('id'),ots:a.get('ots')||1,streets:a.get('streets'),supplier:a.get('supplier'),finalPrice:a.get('finalPrice')||0,id_city:a.get('id_city'),id_size:a.get('id_size'),id_catab:a.get('id_catab'),catab:a.get('catab'),angle:a.get('angle'),lat:a.get('lat'),lon:a.get('lon'),num:a.get('num'),turf:a.get('lat')&&a.get('lon')?turf.point([parseFloat(a.get('lon')),parseFloat(a.get('lat'))]):null}},getPreparedFaces:function(d){var a=this,c=[],b={};if(a.filteredFacesByPoiCats){a.filteredFacesByPoiCats.forEach(a=>{b[a.id_face]=a.id_face})}d.each(function(e){if(!a.filteredFacesByPoiCats||b[e.getId()]){c.push(a.getPlainFace(e))}});return c},updateFacesInCities:function(d){var c=this,a=c.getViewModel(),b=a.getStore('allCities');if(!b){return}b.each(function(a){a.faces().removeAll()});if(a.get('startDate')&&a.get('endDate')){c.updatePeriodFilter({startDate:a.get('startDate'),endDate:a.get('endDate')})}d.each(function(c){var a=b.getById(c.get('id_city'));if(a){a.faces().add(c)}});b.getDataSource().each(function(a){a.set('facesCount',a.faces().count())})},updatePeriodFilter:function(a){var i=this.getViewModel().getStore('srcFaces'),n=i.getFilters();var d=n.getByKey('filter_period');if(d&&+d.startDate===+a.startDate&&+d.endDate===+a.endDate){return}try{var h=!1,k=14,j=!0,f=new Date(),b=new Date(Date.UTC(f.getFullYear(),f.getMonth(),f.getDate()+1)),g=+a.startDate<+b?b:a.startDate,l=+a.endDate<+b?b:a.endDate,c=Math.round((g-b)/(3600*24*1000)),m=Math.round((l-g)/(3600*24*1000));if(c<0){c=0}var p,q=/(\d+)(\w)/g;var o=new RegExp('^'+(h?'':'.*?')+'('+(j?'[tf]':'f')+(h?')+$':'{'+k+'})'));var e=new Ext.util.Filter({id:'filter_period',filterFn:function(d){var b=d.get('occByDays');return !b||o.test(b.substring(c,c+m))}});e.startDate=a.startDate;e.endDate=a.endDate;i.addFilter(e)}catch(r){console.log(r)}finally{}},onDestroy:function(){var a=this;Bigmedia.AutoPlan.un('cityprepared',a.cityPrepared);Bigmedia.AutoPlan.un('algorithmcompleted',a.algorithmCompleted);Bigmedia.AutoPlan.un('terminated',a.onAutoPlanTerminate)},algorithmCompleted:function(m,g,n){var p=this,c=p.getViewModel(),h=c.get('planStore'),d=c.get('planVarStore'),k=c.get('srcFaces');var a=h.getById(m);if(a){a.set({progress:a.get('progress')+0.3});var r=Ext.getStore('Faces'),q=Ext.getStore('ThirdPartyBoards');var e=n.map(function(b){var a=k.getById(b.id).copy();return a});a.set(g,e);d.loadRawData({algorithm:g,id_city:a.getId(),city:a.get('name'),boards:e.length,coverage:0,faces:[]},!0);var f=d.last();d.fireEventArgs('add',[d,[f]]);f.faces().add(e)}var o=h.min('progress')===1;if(o){var b=c.get('resAlgorithms');b.removeAll();d.each(a=>{var c=b.getById(a.get('algorithm'));if(!c){b.add({id:a.get('algorithm'),algorithm:a.get('algorithm'),boards:a.get('boards'),sumOts:a.get('ots'),budget:a.get('budget'),coverage:Math.round(a.get('coverage')*100)/100,faces:a.faces().getRange()})}else {c.set('boards',c.get('boards')+a.get('boards'));c.set('sumOts',c.get('sumOts')+a.get('ots'));c.set('budget',c.get('budget')+a.get('budget'));c.set('coverage',(c.get('coverage')+a.get('coverage'))/2);c.set('faces',c.get('faces').concat(a.faces().getRange()))}});var j=b.getById('MinPrice'),i=b.getById('MaxCoverage'),l=b.getById('MaxGRPDivPrice');c.set({minPrice:j,maxCoverage:i,optimal:l});c.set('step',6)}},cityPrepared:function(f,g){var c=this,d=c.getViewModel().get('planStore'),a=Ext.getStore('Faces'),e=c.getViewModel().get('repStore');var b=d.getById(f);if(b){b.set('progress',0.1)}g.forEach(function(c){var d=null,b;if(a.getById(c.id)){b=a.getById(c.id)}else {b=tpStore.getById(c.id)}if(b){if(!b.get('cells')||!b.get('coverages')){var h=c.coveragesTurf.map(function(a){return Bigmedia.Vars.convertTurfToJsts(a)});d={cells:c.cells,coverages:h,coveragesTurf:c.coveragesTurf}}if(d){b.set(d,{commit:!0,silent:!0})}e.add(b)}})},onAutoPlanTerminate:function(){var a=this},loadCities:function(){var b=this,d=b.getViewModel().getStore('allCities'),c=Ext.getStore('Cities'),a=Ext.getStore('CityBoundaries');if(!a.isLoaded()){a.on({load:{fn:b.loadCities,scope:b,single:!0}});return}c.each(function(c){var b=a.getById(c.getId());if(b&&b.get('area')){d.add({id:c.getId(),name:c.get('name'),area:b?b.get('area')/1000000:null})}})}});Ext.define('Bigmedia.view.dialog.DlgAutoPlanNoobModel',{extend:Ext.app.ViewModel,alias:'viewmodel.dialog-dlgautoplannoob',stores:{planVarStore:{type:'planvarstore'},chainedVarStore:{source:'{planVarStore}',filters:[{property:'id_city',value:'{selectedCity.id}',operator:'='}],sorters:[{property:'city',direction:'ASC'}]},finalStore:{type:'plannerstore'},resCitiesStore:{fields:['id','name'],proxy:'memory'},srcFaces:{model:'Face',autoLoad:!0,proxy:{type:'memory'}},allCities:{model:'PlanCity',id:'simplecities',proxy:'memory',filters:[{property:'facesCount',value:0,operator:'>'}],sorters:[{property:'population',direction:'DESC'}]},millions:{source:'{allCities}',filters:[function(a){return a.get('population')>=700}]},west:{source:'{allCities}',filters:[function(a){return [4,12,13,15,20,24,25,31].indexOf(a.getId())>=0}]},obls:{source:'{allCities}',filters:[function(a){return [1,3,4,5,6,10,12,13,14,15,19,20,22,23,24,25,26,29,30,31,36,38].indexOf(a.getId())>=0}]},checkedCitiesStore:{source:'{allCities}',filters:[function(a){return a.get('checked')}],sorters:[{property:'population',direction:'DESC'}]},planStore:{source:'{allCities}',id:'simpleplancities',filters:[function(a){return a.get('checked')&&(!!a.get('budget')||!!a.get('quantity')||!!a.get('coverage'))}]},repStore:{model:'Face',autoLoad:!0,proxy:{type:'memory'}},resAlgorithms:{model:'ResAlgorithm',autoLoad:!0,proxy:{type:'memory'}}},formulas:{B:function(a){return 100-a('A')},disabledNext:function(a){var b=a('step')<=1||a('step')==2&&a('foundFaces').length>0||a('step')>=3&&a('planCitiesCount')>0;return !b}},data:{startDate:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()+1,1)),endDate:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()+2,0)),steps:6,step:0,A:80,maxOnStreet:5,minDistanceOnStreet:500,minDistance:700,otsFrom:1,minPrice:null,maxCoverage:null,optimal:null,oblCenters:!1,westUkraine:!1,milCities:!1,manualCities:!1,foundFaces:[],planCitiesCount:0,facesCount:null,selPoiCats:[]}});Ext.define('Bigmedia.view.dialog.DlgNoobSaveResultController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgnoobsaveresult',onSendClick:function(){var a=this,b=a.getView();b.fireEventArgs('send',[{email:a.lookup('useremail').getValue(),phone:a.lookup('userphone').getValue()}]);b.close()}});Ext.define('Bigmedia.view.dialog.DlgNoobSaveResult',{extend:Bigmedia.view.dialog.MaterialDialog,controller:'dialog-dlgnoobsaveresult',title:' ',modal:!0,closeAction:'destroy',autoSize:!0,width:340,layout:{type:'vbox',align:'middle'},scrollable:'y',items:[{xtype:'form',reference:'formCheckout',layout:{type:'vbox',align:'middle'},bodyPadding:30,items:[{xtype:'image',height:40,width:235,margin:'0 0 0 0',alt:'bma-logo-image',src:'resources/images/bma.png'},{xtype:'component',margin:'14 0 0 0',width:260,html:'  ,          ',style:{'font-size':'14px','text-align':'center','line-height':'1.4'}},{xtype:'component',reference:'formSendFailure',tpl:'<tpl if="errors.length">'+'<span class="x-fa fa-exclamation-circle" style="color: red;">'+' EMAIL ALREADY EXISTS</span>'+'</tpl>',height:26,width:260,margin:'7 0 0 0',style:{'font-size':'20px','text-align':'center','letter-spacing':'0.25px','font-weight':'500'}},{xtype:'textfield',allowBlank:!1,required:!0,width:260,margin:'24 0 0 0',fieldLabel:'Email',msgTarget:'qtip',reference:'useremail',name:'useremail',placeholder:'user@example.com',vtype:'email',responsiveConfig:{'desktop':{msgTarget:'side'}}},{xtype:'textfield',allowBlank:!0,required:!1,width:260,margin:'24 0 0 0',fieldLabel:'',msgTarget:'qtip',name:'userphone',reference:'userphone',placeholder:'(xxx)xxx-xx-xx',responsiveConfig:{'desktop':{msgTarget:'side'}}}],buttons:[{text:'',disabled:!0,formBind:!0,handler:'onSendClick'}]}]});Ext.define('Bigmedia.view.dialog.DlgAutoPlanNoobFinish',{extend:Ext.window.Window,xtype:'simplefinish',closeAction:'destroy',width:600,height:500,header:!1,maximized:!1,layout:'fit',modal:!0,items:[{layout:'fit',bind:{hidden:'{!saving}'},height:'100%',items:[{xtype:'container',width:600,minWidth:400,layout:{type:'vbox',pack:'middle',align:'stretch'},defaults:{width:'100%'},items:[{padding:20,bind:{html:'<span style="font-size: 13px; color: #111; line-height: 16px">,  .<br>   </span>'}},{flex:1},{html:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: rgb(255, 255, 255) none repeat scroll 0% 0%; display: block;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
              <rect fill="#0289d1" x="15" y="15" width="30" height="30" rx="3" ry="3">
              <animate attributeName="x" dur="2s" repeatCount="indefinite" keyTimes="0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1" values="15;55;55;55;55;15;15;15;15" begin="-1.8333333333333333s"></animate>
              <animate attributeName="y" dur="2s" repeatCount="indefinite" keyTimes="0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1" values="15;55;55;55;55;15;15;15;15" begin="-1.3333333333333333s"></animate>
              </rect><rect fill="#d11724" x="15" y="15" width="30" height="30" rx="3" ry="3">
              <animate attributeName="x" dur="2s" repeatCount="indefinite" keyTimes="0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1" values="15;55;55;55;55;15;15;15;15" begin="-1.1666666666666667s"></animate>
              <animate attributeName="y" dur="2s" repeatCount="indefinite" keyTimes="0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1" values="15;55;55;55;55;15;15;15;15" begin="-0.6666666666666666s"></animate>
              </rect><rect fill="#31a851" x="15" y="15" width="30" height="30" rx="3" ry="3">
              <animate attributeName="x" dur="2s" repeatCount="indefinite" keyTimes="0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1" values="15;55;55;55;55;15;15;15;15" begin="-0.5s"></animate>
              <animate attributeName="y" dur="2s" repeatCount="indefinite" keyTimes="0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1" values="15;55;55;55;55;15;15;15;15" begin="0s"></animate>
              </rect>
              </svg>`},{flex:1}]}]},{xtype:'container',layout:{type:'center'},bind:{hidden:'{saving}'},height:'100%',width:'100%',items:[{layout:{type:'vbox',align:'center'},items:[{xtype:'image',src:'resources/simplebmafinish.png',width:350,height:250},{html:"<h2> </h2><p>   '    </p><p>           </p>"}]}]}],bbar:{bind:{hidden:'{saving}'},hidden:!0,items:[{scale:'large',ui:'base-blue',text:'   ',handler:function(a){var b=a.up('window').lookupViewModel(),c=b.get('step');b.set('step',1);a.up('window').hide()}},'->',{scale:'large',ui:'base-blue',text:'   Bigmedia',handler:function(a){window.location.href='https://www.bigmedia.ua/'}}]}});Ext.define('Bigmedia.view.dialog.DlgAutoPlanNoob',{extend:Ext.window.Window,controller:'dialog-dlgautoplannoob',viewModel:{type:'dialog-dlgautoplannoob'},closeAction:'destroy',width:'100%',height:'100%',header:!1,maximized:!0,layout:'fit',items:[{xtype:'container',layout:{type:'hbox',align:'stretch',pack:'center'},reference:'step0',bind:{hidden:'{step !== 0}'},items:[{xtype:'container',layout:{type:'vbox',align:'stretch'},width:600,items:[{bind:{html:'<span style="font-weight: bold; font-size: 11px; color: #111">  bigmedia assistant</span>'},padding:'80 0 20 0'},{html:'<span style="font-weight: bold; font-size: 4em; line-height: 1.3em">    4 </span>',margin:'0 0 30px 0'},{xtype:'container',items:[{xtype:'button',scale:'large',ui:'base-blue',text:'',handler:function(a){a.up('window').getViewModel().set('step',1)}}]},{flex:2},{html:'<hr style="border-top: 1px solid #eee">'},{html:'<span style="font-size: 10px; color: #111">       - <a href="#faces"> </a></span>',padding:'40 0'}]}]},{xtype:'container',reference:'step1',layout:{type:'vbox',pack:'start',align:'stretch'},scrollable:'y',bind:{hidden:'{!(step > 0)}'},items:[{xtype:'container',layout:{type:'center'},items:[{xtype:'container',bind:{hidden:'{!(step == 1)}'},layout:{type:'vbox',align:'stretch'},items:[{padding:'30 0',html:'<span style="font-weight: bold; font-size: 2em; line-height: 1.3em">   </span>'},{xtype:'customdaterange',reference:'daterange',startDate:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()+1,1)),endDate:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()+2,0)),hideDaysMode:!0,listeners:{periodchanged:'onDateRangePeriodChanged'}}]},{xtype:'container',width:400,minWidth:400,bind:{hidden:'{!(step == 2)}'},layout:{type:'vbox',pack:'start',align:'stretch'},items:[{padding:'30 0 10 0',html:'<span style="font-weight: bold; font-size: 2em; line-height: 1.3em">   </span>'},{style:'border: 1px solid #e2e2e2; border-radius: 5px',margin:'20px 0 10px 0',padding:10,layout:{type:'vbox',align:'stretch'},items:[{xtype:'radio',name:'planCities',boxLabel:' ',reference:'oblCenterRadio',inputValue:'oblCenter',bind:'{oblCenters}',listeners:{change:'onCityRadioChange'}},{margin:'0 0 0 35px',bind:{html:'<span>, , , , ,    16 </span>'}},{xtype:'container',scrollable:'y',height:200,bind:{hidden:'{!oblCenters}'},items:[{xtype:'grid',reference:'gridobl',flex:1,bind:{store:'{obls}'},selModel:{type:'checkboxmodel',checkOnly:!0},columns:[{dataIndex:'name',text:'',flex:1,sortable:!0,menuDisabled:!0}],listeners:{selectionchange:'onCitiesSelectionChange'}}]}]},{style:'border: 1px solid #e2e2e2; border-radius: 5px',margin:'20px 0 10px 0',padding:10,layout:{type:'vbox',align:'stretch'},items:[{xtype:'radio',name:'planCities',boxLabel:' ',reference:'westUkraineRadio',inputValue:'westUkraine',bind:'{westUkraine}',listeners:{change:'onCityRadioChange'}},{margin:'0 0 0 35px',bind:{html:'<span>, , , -   3 </span>'}},{xtype:'container',scrollable:'y',height:200,bind:{hidden:'{!westUkraine}'},items:[{xtype:'grid',reference:'gridwest',flex:1,bind:{store:'{west}'},selModel:{type:'checkboxmodel',checkOnly:!0},columns:[{dataIndex:'name',text:'',flex:1,sortable:!0,menuDisabled:!0}],listeners:{selectionchange:'onCitiesSelectionChange'}}]}]},{style:'border: 1px solid #e2e2e2; border-radius: 5px',margin:'20px 0 10px 0',padding:10,layout:{type:'vbox',align:'stretch'},items:[{xtype:'radio',name:'planCities',boxLabel:'-',reference:'milCitiesRadio',bind:'{milCities}',listeners:{change:'onCityRadioChange'}},{margin:'0 0 0 35px',bind:{html:'<span>, , , , , </span>'}},{xtype:'container',scrollable:'y',height:200,bind:{hidden:'{!milCities}'},items:[{xtype:'grid',reference:'gridmil',flex:1,bind:{store:'{millions}'},selModel:{type:'checkboxmodel',checkOnly:!0},columns:[{dataIndex:'name',text:'',flex:1,sortable:!0,menuDisabled:!0}],listeners:{selectionchange:'onCitiesSelectionChange'}}]}]},{style:'border: 1px solid #e2e2e2; border-radius: 5px',margin:'20px 0 10px 0',padding:10,layout:{type:'vbox',align:'stretch'},items:[{xtype:'radio',name:'planCities',boxLabel:'   ',reference:'manualCitiesRadio',bind:'{manualCities}',listeners:{change:'onCityRadioChange'}},{margin:'0 0 0 35px',bind:{html:'<span></span>'}},{xtype:'container',scrollable:'y',height:200,bind:{hidden:'{!manualCities}'},items:[{xtype:'grid',reference:'gridall',flex:1,bind:{store:'{allCities}'},selModel:{type:'checkboxmodel',checkOnly:!0},columns:[{dataIndex:'name',text:'',flex:1,sortable:!0,menuDisabled:!0}],listeners:{selectionchange:'onCitiesSelectionChange'}}]}]}]},{xtype:'container',width:400,minWidth:400,bind:{hidden:'{!(step == 3)}'},height:'100%',layout:{type:'vbox',pack:'start',align:'stretch'},items:[{padding:'30 0 10 0',html:'<span style="font-weight: bold; font-size: 2em; line-height: 1.3em"> ,     </span>'},{layout:{type:'hbox',align:'stretch'},flex:1,width:'100%',defaults:{labelAlign:'top',hideTrigger:!1,allowDecimals:!1},items:[{xtype:'customnumberfield',fieldLabel:'',labelStyle:'z-index: 1',step:1000,ui:'plannerfield',grow:!0,flex:1,minValue:0,triggers:{hryvnia:{cls:'x-fa fa-hryvnia'}},listeners:{change:'onTotalBudgetChange'}},{xtype:'customnumberfield',fieldLabel:'',labelStyle:'z-index: 1',ui:'plannerfield',padding:'0 0 0 10px',grow:!0,step:1,width:100,minValue:1,maxValue:100,triggers:{percent:{weight:-1,cls:'x-fa fa-percent'}},listeners:{change:'onCoverageChange'}}]},{xtype:'container',reference:'citiesparamscontainer',layout:'anchor',defaults:{anchor:'100%'}}]},{xtype:'container',width:400,minWidth:400,bind:{hidden:'{!(step == 4)}'},height:'100%',items:[{padding:'30 0 10 0',html:'<span style="font-weight: bold; font-size: 2em; line-height: 1.3em">   </span><br><span style="font-weight: normal; font-size: 1.4em; line-height: 1.0em">( \')</span>'},{xtype:'container',reference:'poicatsaccordion',layout:{type:'accordion',hideCollapseTool:!0,vertical:!0},flex:1,items:[{xtype:'poicatsimplepanel',cat:{id:162}},{xtype:'poicatsimplepanel',cat:{id:4}},{xtype:'poicatsimplepanel',cat:{id:178}},{xtype:'poicatsimplepanel',cat:{id:233}},{xtype:'poicatsimplepanel',cat:{id:247}},{xtype:'poicatsimplepanel',cat:{id:11}}]}]},{layout:'fit',reference:'step5',bind:{hidden:'{step != 5}'},height:'100%',items:[{xtype:'container',width:400,minWidth:400,layout:{type:'vbox',pack:'middle',align:'stretch'},defaults:{width:'100%'},items:[{padding:'50 0 40 0',bind:{html:'<span style="font-size: 13px; color: #111; line-height: 16px">,  .<br>    - {facesCount}  ...</span>'}},{flex:1},{xtype:'progressbar',reference:'progress',hidden:!0},{html:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: rgb(255, 255, 255) none repeat scroll 0% 0%; display: block;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                      <rect fill="#0289d1" x="15" y="15" width="30" height="30" rx="3" ry="3">
                      <animate attributeName="x" dur="2s" repeatCount="indefinite" keyTimes="0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1" values="15;55;55;55;55;15;15;15;15" begin="-1.8333333333333333s"></animate>
                      <animate attributeName="y" dur="2s" repeatCount="indefinite" keyTimes="0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1" values="15;55;55;55;55;15;15;15;15" begin="-1.3333333333333333s"></animate>
                      </rect><rect fill="#d11724" x="15" y="15" width="30" height="30" rx="3" ry="3">
                      <animate attributeName="x" dur="2s" repeatCount="indefinite" keyTimes="0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1" values="15;55;55;55;55;15;15;15;15" begin="-1.1666666666666667s"></animate>
                      <animate attributeName="y" dur="2s" repeatCount="indefinite" keyTimes="0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1" values="15;55;55;55;55;15;15;15;15" begin="-0.6666666666666666s"></animate>
                      </rect><rect fill="#31a851" x="15" y="15" width="30" height="30" rx="3" ry="3">
                      <animate attributeName="x" dur="2s" repeatCount="indefinite" keyTimes="0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1" values="15;55;55;55;55;15;15;15;15" begin="-0.5s"></animate>
                      <animate attributeName="y" dur="2s" repeatCount="indefinite" keyTimes="0;0.083;0.25;0.333;0.5;0.583;0.75;0.833;1" values="15;55;55;55;55;15;15;15;15" begin="0s"></animate>
                      </rect>
                      </svg>`},{flex:1}]}]},{xtype:'container',reference:'step6',width:400,minWidth:400,layout:{type:'vbox',align:'stretch'},scrollable:'y',bind:{hidden:'{step != 6}'},defaults:{width:'100%'},items:[{padding:'30 0 20 0',html:'<span style="font-weight: bold; font-size: 2em; line-height: 1.3em"> ,     </span>'},{style:'border: 1px solid #e2e2e2; border-radius: 5px',margin:'20px 0 10px 0',padding:10,layout:{type:'vbox',align:'stretch'},items:[{xtype:'radio',name:'planVariant',bind:{boxLabel:'   {minPrice.boards} '},reference:'minPrice'},{margin:'0 0 0 35px',bind:{html:'<span> - {minPrice.budget:number("0")}.  - {minPrice.coverage:number("0.00")}%. OTS - {minPrice.sumOts:number("0")}</span>'}}]},{style:'border: 1px solid #e2e2e2; border-radius: 5px',margin:'20px 0 10px 0',padding:10,layout:{type:'vbox',align:'stretch'},items:[{xtype:'radio',name:'planVariant',bind:{boxLabel:'   {maxCoverage.boards} '},reference:'maxCoverage'},{margin:'0 0 0 35px',bind:{html:'<span> - {maxCoverage.budget:number("0")}.  - {maxCoverage.coverage:number("0.00")}%. OTS - {maxCoverage.sumOts:number("0")}</span>'}}]},{style:'border: 1px solid #e2e2e2; border-radius: 5px',margin:'20px 0 10px 0',padding:10,layout:{type:'vbox',align:'stretch'},items:[{xtype:'radio',name:'planVariant',bind:{boxLabel:'  {optimal.boards} '},reference:'optimal'},{margin:'0 0 0 35px',bind:{html:'<span> - {optimal.budget:number("0")}.  - {optimal.coverage:number("0.00")}%. OTS - {optimal.sumOts:number("0")}</span>'}}]}]}]}]},{xtype:'simplefinish',reference:'simplefinish',floated:!0,hidden:!0}],tbar:{xtype:'container',reference:'tbar',layout:{type:'vbox',pack:'start',align:'stretch'},bind:{hidden:'{!(step > 0)}'},hidden:!0,items:[{padding:'5 0',layout:{type:'hbox',align:'center'},items:[{width:220,height:30,style:'border-right: 1px solid #eee',html:'<div style="background: center / contain no-repeat url(resources/images/bma.png); width: 220px; height: 30px"></div>"'},{bind:{hidden:'{!(step > 0 && step < 5)}'},layout:{type:'hbox',pack:'start'},items:[{padding:'0 10',bind:{html:'<span style="{step == 1 ? "color: #027dc0;" : ""}{step > 0 ? "font-weight: bolder" : ""}">1. </span>'}},{html:'<i class="fas fa-chevron-right" style="font-size: 7px;"></i>'},{padding:'0 10',bind:{html:'<span style="{step == 2 ? "color: #027dc0;" : ""}{step > 1 ? "font-weight: bolder" : ""}">2. </span>'}},{html:'<i class="fas fa-chevron-right" style="font-size: 7px;"></i>'},{padding:'0 10',bind:{html:'<span style="{step == 3 ? "color: #027dc0;" : ""}{step > 2 ? "font-weight: bolder" : ""}">3. </span>'}},{html:'<i class="fas fa-chevron-right" style="font-size: 7px;"></i>'},{padding:'0 10',bind:{html:'<span style="{step == 4 ? "color: #027dc0;" : ""}{step > 3 ? "font-weight: bolder" : ""}">4. </span>'}}]}]},{html:'<hr style="border-top: 1px solid #eee">'}]},bbar:{bind:{hidden:'{!step}'},hidden:!0,items:[{scale:'large',ui:'base-blue',text:'',bind:{hidden:'{step == 0 || (step > 4 && step < 6)}'},handler:function(c){var b=c.up('window').getViewModel(),a=b.get('step');if(a==6){b.set('step',a-2)}else {b.set('step',a-1)}}},'->',{scale:'large',ui:'base-blue',text:'',bind:{hidden:'{step > 3}',disabled:'{disabledNext}'},handler:function(c){var a=c.up('window').getViewModel(),b=a.get('step');a.set('step',b+1)}},{scale:'large',ui:'base-blue',text:' ',bind:{hidden:'{!(step == 4)}'},handler:'onStartClick'},{scale:'large',ui:'base-blue',text:'',bind:{hidden:'{!(step == 6)}'},handler:'onSelectClick'}]},listeners:{beforedestroy:'onDestroy'}});Ext.define('Bigmedia.view.dialog.DlgGiveMePromoCode',{extend:Ext.window.Window,closable:!0,closeAction:'destroy',title:Bigmedia.Locales.dlgGiveMePromoCode.title,width:400,height:500,minWidth:300,minHeight:380,layout:'fit',resizable:!1,modal:!0,defaultFocus:'name',closeAction:'hide',referenceHolder:!0,viewModel:{data:{userName:null,userEmail:null,userOrganization:null}},items:[{xtype:'form',reference:'windowForm',layout:{type:'vbox',align:'stretch'},border:!1,bodyPadding:10,url:'api/v1/givemepromocode',method:'POST',jsonSubmit:!0,fieldDefaults:{msgTarget:'side',labelAlign:'top',labelWidth:100,labelStyle:'font-weight:bold'},items:[{xtype:'component',margin:'5 5 10 5',html:Bigmedia.Locales.dlgGiveMePromoCode.descrText},{xtype:'textfield',name:'name',itemId:'name',bind:{value:'{userName}'},afterLabelTextTpl:['<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'],fieldLabel:Bigmedia.Locales.dlgGiveMePromoCode.nameLabel,allowBlank:!1},{xtype:'textfield',fieldLabel:Bigmedia.Locales.dlgGiveMePromoCode.emailLabel,name:'email',bind:{value:'{userEmail}'},afterLabelTextTpl:['<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'],vtype:'email',allowBlank:!1},{xtype:'textfield',name:'organization',bind:{value:'{userOrganization}'},fieldLabel:Bigmedia.Locales.dlgGiveMePromoCode.orgLabel,allowBlank:!0},{xtype:'textareafield',fieldLabel:Bigmedia.Locales.dlgGiveMePromoCode.messageLabel,name:'message',labelAlign:'top',flex:1,margin:'0',allowBlank:!0}],buttons:[{text:Bigmedia.Locales.btnCancelText,handler:function(a){a.up('window').close()}},{text:Bigmedia.Locales.btnSendText,handler:function(b){var c=b.up('window').lookupReference('windowForm'),a=c.getForm();if(a.isValid()){a.submit({success:function(c,a){Ext.Msg.alert(Bigmedia.Locales.dlgGiveMePromoCode.successTitle,Bigmedia.Locales.dlgGiveMePromoCode.successText)},failure:function(c,a){switch(a.failureType){case Ext.form.action.Action.CLIENT_INVALID:Ext.Msg.alert('Failure','Form fields may not be submitted with invalid values');break;case Ext.form.action.Action.CONNECT_FAILURE:Ext.Msg.alert('Failure','Ajax communication failed');break;case Ext.form.action.Action.SERVER_INVALID:Ext.Msg.alert('Failure',a.result.msg);}}});b.up('window').close()}}}]}]});Ext.define('Bigmedia.view.field.SplitsField',{extend:Ext.Panel,xtype:'splitsfield',config:{facesStore:null,dimensionField:null,dimensionName:null,store:null,series:null,limits:null},getSplits:function(){var b=this,c=b.lookup('chart'),d=c.getStore().getAt(0),a={};b.getSeries().title.forEach(function(b,c){a[b]=d.get('data'+c)});return a},updateFacesStore:function(a,c){var b=this;if(a){a.on('datachanged',b.onFacesStoreChanged,b)}},onFacesStoreChanged:function(h){var a=this,b={};h.each(function(c){if(!b[c.get(a.getDimensionField())]){b[c.get(a.getDimensionField())]=[]}b[c.get(a.getDimensionField())].push(c)});var c={dimension:a.getDimensionName()},d=['dimension'],g=[],e=[],f=[];Object.keys(b).forEach(function(i,a){c['data'+a]=Math.round(b[i].length/h.getCount()*100);c['name'+a]=i;d.push('data'+a,'name'+a);g.push(i);e.push('data'+a);f.push('name'+a)});var i=new Ext.data.Store({data:[c],fields:d,autoLoad:!0,proxy:{type:'memory'}});a.setStore(i);a.setSeries({title:g,xField:'dimension',yField:e,labelField:f})},updateStore:function(a){var c=this,b=c.lookup('chart');if(a&&b){b.setStore(a)}},updateSeries:function(a){var c=this,b=c.lookup('chart');if(a&&b){if(a.xField){}if(a.yField){b.getSeries()[0].setYField(a.yField)}if(a.title){b.getSeries()[0].setTitle(a.title)}if(a.labelField){b.getSeries()[0].setLabel({field:a.labelField,font:'11px Helvetica',display:'insideStart',renderer:c.onSeriesLabelRender})}b.redraw()}},width:'100%',height:80,layout:'fit',onSeriesLabelRender:function(a,d,c,b,e){return a},controller:{init:function(a){var b=this,c=b.lookup('chart');a.updateSeries(a.getSeries());a.updateStore(a.getStore())},onSeriesLabelRender:function(a,d,c,b,e){return a},onAxisLabelRender:function(c,b,a){return a.renderer(b)+'%'},onSeriesTooltipRender:function(d,e,a){var b=Ext.Array.indexOf(a.series.getYField(),a.field),c=a.series.getTitle()[b];d.setHtml(c+' - '+e.get(a.field)+'%')},onColumnRender:function(a){return a+'%'},onPreview:function(){if(Ext.isIE8){Ext.Msg.alert('Unsupported Operation','This operation requires a newer version of Internet Explorer.');return}var a=this.lookup('chart');a.preview()}},items:[{xtype:'cartesian',reference:'chart',height:'100%',width:'100%',listeners:{beginitemedit:function(b,c,a){b.prevItemValue=a.record.get(a.field)},enditemedit:function(d,q,c,f){var l=c.series.getYField(),i=l.indexOf(f.yField),p=i<l.length-1?i+1:i-1,e=l[p],o=i>0?i-1:-1,h=o>=0?l[o]:null,a=Math.round(c.record.get(c.field)),b={},k=d.up('splitsfield').getLimits(),m=c.series.getTitle(),n=+c.field.replace(/\D/g,'');var j=a>=0?Math.floor(a/10)*10:Math.ceil(a/10)*10;part=Math.abs(a-j);if(!(part===0||part===5)){if(part<=2){a=j}else {if(part>=8){a=j+(a<0?-1:1)*10}else {a=j+(a<0?-1:1)*5}}}if(k&&k[m[n]]&&k[m[n]].min>a){a=k[m[n]].min}var g=a-d.prevItemValue;if(a<-1){if(!h){b[f.yField]=d.prevItemValue;c.record.set(b);d.redraw();return}else {if(c.record.get(h)<=Math.abs(a)){b[h]=0;b[f.yField]=c.record.get(h)+d.prevItemValue}else {b[h]=c.record.get(h)+a;b[f.yField]=d.prevItemValue-a}c.record.set(b);d.redraw();return}}else {if(a<1){b[e]=c.record.get(e)+d.prevItemValue;b[f.yField]=0;c.record.set(b);d.redraw();return}}if(g>0){if(c.record.get(e)-g<0){g=g-c.record.get(e);b[e]=0;b[f.yField]=a-g}else {b[e]=c.record.get(e)-g;b[f.yField]=a}}else {b[e]=c.record.get(e)-g;b[f.yField]=a}c.record.set(b);d.redraw()}},interactions:[{type:'itemedit',style:{lineWidth:2},tooltip:{renderer:function(d,c,e,g){var a=Math.round(e.yValue),f=c.series.getChart();if(a<0){a=f.prevItemValue-a}var b=a-Math.floor(a/10)*10;if(!(b===0||b===5)){if(b<=2){a=Math.floor(a/10)*10}else {if(b>=8){a=Math.floor(a/10)*10+10}else {a=a=Math.floor(a/10)*10+5}}}d.setHtml(c.sprite.labelCfg.text+' - '+a+'%')},constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,trackMouse:!0,mouseOffset:[20,20]}}],flipXY:!0,axes:[{type:'numeric',fields:'data0',position:'bottom',grid:!0,minimum:0,maximum:100,majorTickSteps:10,renderer:'onAxisLabelRender'},{type:'category',fields:'dimension',position:'left',label:{hidden:!0},grid:!1}],series:[{type:'bar',fullStack:!0,title:['A','B'],xField:'dimension',yField:['data0','data1'],axis:'bottom',label:{field:['name0','name1'],display:'insideStart',renderer:'onSeriesLabelRender'},stacked:!0,style:{opacity:0.8},highlight:{fillStyle:'yellow'},tooltip:{trackMouse:!0,renderer:'onSeriesTooltipRender'}}]}]});Ext.define('Bigmedia.view.field.MultiSelectSplitField',{extend:Ext.Panel,xtype:'multiselectsplitfield',config:{selStore:null,searchStore:null,dimensionName:null,dimensionField:null,parentName:null,limits:null,splitMode:'splits'},referenceHolder:!0,updateSelStore:function(b){var a=this;a.getViewModel().set('selStore',b);a.updateLimits(a.getLimits())},updateSearchStore:function(b){var a=this;a.getViewModel().set('searchStore',b);a.updateLimits(a.getLimits())},updateDimensionName:function(a){this.getViewModel().set('dimensionName',a)},updateSplitMode:function(a){this.getViewModel().set('splitMode',a)},updateDimensionField:function(a){this.getViewModel().set('dimensionField',a)},updateParentName:function(a){this.getViewModel().set('gridTitle',Ext.String.format(Bigmedia.Locales.dlgAutoSelectFaces.multiselectGridTitle,this.getDimensionName(),a))},updateLimits:function(a){var d=this,c=d.getViewModel().get('selStore'),b=d.getViewModel().get('searchStore');if(a&&c&&b){Object.keys(a).forEach(function(d){var f=b.findExact('name',d);if(f>=0){var e=b.getAt(f);e.set({min:a[d].min,max:a[d].max,limits:a[d]});if(c.indexOf(e)<0){c.add(e)}}})}},layout:'fit',viewModel:{data:{selStore:null,searchStore:null,dimensionName:null,dimensionField:null,parentName:null,gridTitle:null}},items:[{xtype:'multiselector',reference:'multisel',autoLoad:!0,fieldName:'name',plugins:{cellediting:{clicksToEdit:1}},viewConfig:{markDirty:!1},bind:{store:'{selStore}',title:'{gridTitle}',search:{xtype:'multiselector-search',width:150,height:200,field:'{dimensionField}',store:'{searchStore}',makeItems:function(){return [{xtype:'grid',bind:{store:'{searchStore}'},reference:'searchGrid',trailingBufferZone:2,leadingBufferZone:2,viewConfig:{deferEmptyText:!1,emptyText:'No results.'},listeners:{selectionchange:function(b,a){var d=this,c=d.getStore();c.each(function(c){if(!!c.get('limits')&&!a.some(function(d){return d.getId()===c.getId()})){b.select(c,!0)}})}}}]}}},columns:[{bind:{text:'{dimensionName}',hidden:'{splitMode !== "splits"}'},dataIndex:'name',menuDisabled:!0,hideable:!1,width:150},{text:'Min (%)',dataIndex:'min',menuDisabled:!0,bind:{hidden:'{splitMode !== "splits"}'},hideable:!1,width:80,editor:{xtype:'numberfield',minValue:0,maxValue:100}},{text:'Max (%)',dataIndex:'max',bind:{hidden:'{splitMode !== "splits"}'},menuDisabled:!0,hideable:!1,width:80,editor:{xtype:'numberfield',minValue:0,maxValue:100}},{bind:{text:'{dimensionName}',hidden:'{splitMode !== "limits"}'},dataIndex:'longname',menuDisabled:!0,hideable:!1,width:150},{text:Bigmedia.Locales.dlgAutoSelectFaces.colLimits,dataIndex:'limit',bind:{hidden:'{splitMode !== "limits"}'},menuDisabled:!0,hideable:!1,width:80,editor:{xtype:'numberfield',minValue:0}},{text:'',xtype:'actioncolumn',flex:1,align:'end',menuDisabled:!0,hideable:!1,items:[{iconCls:'x-fa fa-times',tooltip:Bigmedia.Locales.gridBtnRemoveSidesText,handler:function(a,d,f){var b=a.getStore().getAt(d);if(b.get('limits')){return}a.getStore().remove(b);var e=a.up('multiselector'),c=e.searchPopup.lookup('searchGrid');c.getSelectionModel().deselect([b])}}]}]}]});Ext.define('Bigmedia.view.grid.Cities',{extend:Ext.grid.Panel,xtype:'cities-grid',updateFacesStore:function(b,c){var a=this;if(c){c.removeListener('datachanged',a.onFacesStoreDataChanged);c.removeListener('beforeload',a.onFacesStoreDataChanged);c.removeListener('load',a.onFacesStoreDataChanged)}if(b){b.on('datachanged',a.onFacesStoreDataChanged,a);b.on('beforeload',a.onFacesStoreDataChanged,a);b.on('load',a.onFacesStoreDataChanged,a)}a.onFacesStoreDataChanged()},onFacesStoreDataChanged:function(b){if(!b){return}var c=this,a=c.getViewModel().getStore('allCities');a.each(function(a){a.faces().removeAll()});b.each(function(d){var c=a.getById(d.get('id_city'));if(c){c.faces().add(d)}});a.each(function(a){a.set('facesCount',a.faces().count())})},columnLines:!0,padding:0,bodyPadding:0,margin:0,referenceHolder:!0,split:!1,stateful:!0,forceFit:!0,features:[{ftype:'summary',dock:'bottom'}],viewConfig:{trackOver:!1,stripeRows:!0,enableTextSelection:!1,markDirty:!1},trackMouseOver:!1,selModel:{type:'checkboxmodel',checkOnly:!0},dockedItems:[{xtype:'toolbar',dock:'top',reference:'toolBar',bind:{hidden:'{hiddenToolBar}'},items:[]}],title:'Cities',header:!1,columns:[{text:Bigmedia.Locales.colCity,sortable:!0,dataIndex:'name',groupable:!1,hideable:!1,draggable:!1,width:150},{text:'Faces amount',sortable:!0,dataIndex:'facesCount',groupable:!1,hideable:!0,draggable:!1,width:100,summaryType:'sum',summaryFormatter:'number("0")',formatter:'number("0")'},{text:'Population (thousands)',sortable:!0,dataIndex:'population',groupable:!1,width:80,summaryType:'sum',summaryFormatter:'number("0")',formatter:'number("0")'},{text:'Area (square kms)',sortable:!0,dataIndex:'area',groupable:!1,width:80,summaryType:'sum',summaryFormatter:'number("0.00")',formatter:'number("0.00")'},{text:'Part of total population',sortable:!0,dataIndex:'populationPart',groupable:!1,width:250,summaryType:'sum',summaryFormatter:'number("0.00%")',formatter:'number("0.00%")'}],updateStatusBar:function(){var c=this,f=c.lookupReference('statusGrid'),a=c.getStore(),d=(a.getData().getSource()||a.getData()).getCount(),e=a.getCount(),g=c.getSelectionModel().getCount();if(!d){d=e}var b=Ext.String.format(Bigmedia.Locales.statusBarTotal,d);if(d!=e){b+=' | '+Ext.String.format(Bigmedia.Locales.statusBarFiltered,e)}if(g>0){b+=' | '+Ext.String.format(Bigmedia.Locales.statusBarChecked,g)}var i=[a.min('ots'),a.max('ots'),Math.round(a.average('ots')*100)/100,Math.round(a.sum('ots')*100)/100];b+='  | OTS(min,max,avg) = '+i.slice(0,3).join(', ')+' | OTS(sum) = '+i[3];var h=a.collect('city');if(h.length==1){grp=[a.min('grp'),a.max('grp'),Math.round(a.average('grp')*100)/100,Math.round(a.sum('grp')*100)/100];b+='  | GRP '+h[0]+'(min,max,avg) = '+grp.slice(0,3).join(', ')+' | GRP(sum) = '+grp[3]}var k=c.lookupReference('exportbtn'),j=c.lookupReference('clearbtn');j.setDisabled(e==0);if(a&&a.isLoading()){if(f){f.showBusy()}}else {f.setStatus({text:b,iconCls:'x-ready-icon'})}},listeners:{selectionchange:function(c,b){var a=c.getStore();a.beginUpdate();a.each(function(a){if(a.get('selected')&&!b.some(function(d){return a.getId()===d.getId()})){a.set('selected',!1)}});b.forEach(function(a){if(!a.get('selected')){a.set('selected',!0)}});a.endUpdate()}}});Ext.define('Bigmedia.view.dialog.DlgAutoPlanOld',{extend:Ext.window.Window,controller:'dialog-dlgautoplan',viewModel:{type:'dialog-dlgautoplan'},width:'99%',height:'99%',minWidth:400,minHeight:380,modal:!0,closable:!0,closeAction:'hide',title:Bigmedia.Locales.dlgAutoSelectFaces.title,referenceHolder:!0,layout:'fit',items:[{xtype:'wizardform',reference:'wizard',defaults:{header:!1,xtype:'wizardpage'},items:[{xtype:'wizardpage',title:Bigmedia.Locales.dlgAutoSelectFaces.wpPeriodTitle,reference:'period',iconCls:'x-fa fa-calendar',layout:{type:'vbox',align:'middle',pack:'begin'},hideNextButton:!0,hidePrevButton:!0,bind:{isCompleted:'{!(startFrom === "campaign") || startFromCampaignId}'},items:[{xtype:'form',reference:'periodform',itemId:'periodform',defaultType:'datefield',layout:{type:'hbox',align:'middle',pack:'center'},defaults:{padding:10,labelWidth:90,labelAlign:'top',labelSeparator:'',submitEmptyText:!1,anchor:'50%'},items:[{fieldLabel:Bigmedia.Locales.fieldStartDateLabel,itemId:'startDate',name:'startDate',reference:'startDate',twoWayBindable:'value',bind:{value:'{startDate}'},validator:function(d){var b=Ext.Date.parse(d,this.format),c=Bigmedia.Locales.dlgCustomPeriodBegErrMsg,a=this.up('form').child('#endDate');if(b&&+b<=+a.getValue()){a.checkChange();a.publishState('value',a.getValue());return !0}return c},listeners:{change:function(i,c,e){var f=i.up('form').child('#endDate');if(e&&c&&+e<+c&&+f.getValue()<+c){var g=0,h=0,b=new Date(+e),d=f.getValue();d.setDate(d.getDate()+1);var a=new Date(+b);while(a<=d){a.setMonth(b.getMonth()+1);if(a<=d){g++;b=a}}a=new Date(+b);while(a<d){h++;a.setDate(b.getDate()+1);b=a}var j=new Date(Date.UTC(c.getFullYear(),c.getMonth()+g,c.getDate()+h-1));f.setValue(j)}i.up('window').getController().onUpdatePeriod()}}},{fieldLabel:Bigmedia.Locales.fieldEndDateLabel,itemId:'endDate',name:'endDate',reference:'endDate',twoWayBindable:'value',bind:{value:'{endDate}'},validator:function(d){var b=Ext.Date.parse(d,this.format),c=Bigmedia.Locales.dlgCustomPeriodEndErrMsg,a=this.up('form').child('#startDate');if(b&&+b>=+a.getValue()){a.checkChange();a.publishState('value',a.getValue());return !0}return c},listeners:{change:function(i,c,e){var f=i.up('form').child('#startDate');if(e&&c&&+e>+c&&+f.getValue()>+c){var g=0,h=0,b=new Date(+e),d=f.getValue();d.setDate(d.getDate()-1);var a=new Date(+b);while(a>=d){a.setMonth(b.getMonth()-1);if(a>=d){g++;b=a}}a=new Date(+b);while(a>=d){h++;a.setDate(b.getDate()-1);b=a}var j=new Date(Date.UTC(c.getFullYear(),c.getMonth()-g,c.getDate()-h+1));f.setValue(j)}i.up('window').getController().onUpdatePeriod()}}}],listeners:{validitychange:function(b,a){b.owner.up('wizardpage').setIsCompleted(a)}}},{xtype:'container',reference:'startfrom',layout:{type:'hbox',align:'stretchmax',pack:'center'},width:'90%',defaultType:'fieldset',padding:10,defaults:{margin:5,layout:{type:'vbox',align:'stretch',pack:'start'},flex:1,defaults:{margin:5}},items:[{items:[{xtype:'button',scale:'large',ui:'soft-green',width:'90%',text:Bigmedia.Locales.dlgAutoSelectFaces.startFromBlankBtnText,handler:function(a){a.lookupViewModel().set('startFrom','blank');a.up('wizardform').goNext()}},{xtype:'component',html:'<center>'+Bigmedia.Locales.dlgAutoSelectFaces.startFromBlankDescr+'</center>',flex:1}]},{items:[{xtype:'button',scale:'large',ui:'soft-green',width:'90%',text:Bigmedia.Locales.dlgAutoSelectFaces.startFromCartBtnText,bind:{disabled:'{cartIsEmpty}'},handler:function(a){a.lookupViewModel().set('startFrom','cart');a.up('wizardform').goNext()}},{xtype:'component',html:'<center>'+Bigmedia.Locales.dlgAutoSelectFaces.startFromCartDescr+'</center>',flex:1}]},{items:[{xtype:'button',scale:'large',ui:'soft-green',width:'90%',text:Bigmedia.Locales.dlgAutoSelectFaces.startFromCampaignBtnText,bind:{disabled:'{!startFromCampaignId}'},handler:function(a){a.lookupViewModel().set('startFrom','campaign');a.up('wizardform').goNext()}},{xtype:'component',html:'<center>'+Bigmedia.Locales.dlgAutoSelectFaces.startFromCampaignDescr+'</center>',flex:1},{xtype:'combo',bind:{store:'{campaigns}',value:'{startFromCampaignId}'},width:'100%',forceSelection:!0,queryMode:'local',valueField:'id',reference:'startFromCampaignCombo',itemId:'startFromCampaignCombo',listConfig:{minWidth:150},displayField:'name',tpl:Ext.create('Ext.XTemplate','<tpl for=".">','<li class="campview-combo-item camp-combo-preview-100 camp-combo-dataitem x-boundlist-item">','<div class="camp-picture "','<tpl if="this.hasSubject(subjectId) == true"> style="background-image: url(/api/v1/subjects/{subjectId}/image.jpeg)"</tpl>>','<div class="camp-combo-info">','<div class="camp-combo-name">{name}</div>','<div class="camp-combo-period">{startDate:date("d.m.Y")}&nbsp;-&nbsp;{endDate:date("d.m.Y")}</div>','</div>','</div>','</li>','</tpl>',{hasSubject:function(a){return !!a}}),displayTpl:Ext.create('Ext.XTemplate','<tpl for=".">','{name} ({startDate:date("d.m.Y")}..{endDate:date("d.m.Y")})','</tpl>'),listeners:{select:function(a){a.up('wizardpage').setIsCompleted(!0)}}}]}]}],listeners:{show:function(h){var l=h.up('window'),c=h.down('datefield#startDate'),d=h.down('datefield#endDate'),a=new Date();var g=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()+1));var b;var f=l.getViewModel().getStore('srcFaces');if(f&&f.getAt(0)){var e=f.getAt(0).get('occupancy');if(e){e=e[0];var k=+e.split(/\D/).reduce(function(b,a){return b+ +a},0);b=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()+k))}}if(!b){b=new Date(g.getFullYear()+1,11,31)}c.setMinValue(g);c.setMaxValue(b);d.setMinValue(g);d.setMaxValue(b);var i=new Date(Date.UTC(a.getFullYear(),a.getMonth()+1,1)),j=new Date(Date.UTC(a.getFullYear(),a.getMonth()+2,0));if(!c.getValue()){c.setValue(i)}if(!d.getValue()){d.setValue(j)}}}},{xtype:'wizardpage',title:Bigmedia.Locales.dlgAutoSelectFaces.addThirdPartyTitle,reference:'sourcepage',iconCls:'x-fa fa-database',isCompleted:!0,layout:{type:'vbox',align:'stretch',pack:'begin'},items:[{xtype:'component',html:'<center>'+Bigmedia.Locales.dlgAutoSelectFaces.addThirdPartyDescr+'</center>'},{xtype:'thirdparty-grid',itemId:'thirdpartygrid',flex:1,store:'ThirdPartyBoards'}]},{title:Bigmedia.Locales.dlgAutoSelectFaces.wpCitiesTitle,iconCls:'x-fa fa-map-marker',layout:{type:'vbox',pack:'center',align:'stretch'},scrollable:'y',bind:{isCompleted:'{planStore.count > 0}'},items:[{xtype:'cities-grid',reference:'citiesGrid',bind:{store:'{cities}'},flex:1}],listeners:{show:function(e){var c=e.child('cities-grid'),a=c.getStore(),d=c.getSelectionModel(),b=d.getSelection();a.beginUpdate();a.each(function(a){if(a.get('selected')&&!b.some(function(b){return a.getId()===b.getId()})){a.set('selected',!1)}});b.forEach(function(a){if(!a.get('selected')){a.set('selected',!0)}});a.endUpdate()}}},{xtype:'wizardpage',title:Bigmedia.Locales.dlgAutoSelectFaces.splitsTitle,reference:'planSplits',iconCls:'x-fa fa-arrows-h',width:'100%',layout:{type:'vbox',pack:'center',align:'middle'},isCompleted:!0,defaults:{padding:10},items:[{xtype:'container',layout:{type:'hbox',align:'middle'},width:'100%',scrollable:'y',defaults:{padding:5},items:[{xtype:'checkbox',boxLabel:'A/B',reference:'splitAB',publishes:'value',checked:!0},{xtype:'numberfield',reference:'fieldcata',bind:{disabled:'{!splitAB.value}',value:'{fieldcata}'},minValue:0,step:5,maxValue:100,width:70},{xtype:'splitsfield',flex:1,height:90,reference:'splitsfieldcatab',bind:{disabled:'{!splitAB.value}',store:'{catabStore}'},dimensionField:'catab',dimensionName:'A/B',series:{title:['A','B'],xField:'dimension',yField:['data0','data1'],labelField:['name0','name1']}},{xtype:'numberfield',reference:'fieldcatb',bind:{disabled:'{!splitAB.value}',value:'{fieldcatb}'},minValue:0,step:5,maxValue:100,width:70}]},{xtype:'reftag',reference:'reftagsize',width:'100%',filterField:'size',multiSelect:!0,fieldLabel:Bigmedia.Locales.colSize,bind:{targetStore:'{srcFaces}'}},{xtype:'reftag',reference:'reftagsidetype',width:'100%',filterField:'sidetype',multiSelect:!0,fieldLabel:Bigmedia.Locales.colSidetype,bind:{targetStore:'{srcFaces}'}},{xtype:'fieldset',title:Bigmedia.Locales.dlgAutoSelectFaces.additParameters,collapsible:!0,collapsed:!0,layout:'vbox',width:'100%',defaults:{xtype:'numberfield',width:'100%',minValue:0,labelWidth:200},items:[{bind:{value:'{maxOnStreet}'},fieldLabel:Bigmedia.Locales.dlgAutoSelectFaces.maxOnStreetLabel,step:1},{bind:{value:'{minDistanceOnStreet}'},fieldLabel:Bigmedia.Locales.dlgAutoSelectFaces.minDistanceOnStreetLabel,step:10},{bind:{value:'{minDistance}'},fieldLabel:Bigmedia.Locales.dlgAutoSelectFaces.minDistanceLabel,step:1},{xtype:'refmediaparamslider',hideEmptyLabel:!0,labelWidth:30,anchor:'0',bind:{targetStore:'{srcFaces}'},width:'90%',reference:'refOTS',fieldLabel:'OTS',values:[1,101],increment:1,minValue:0,maxValue:101,filterField:'ots'}]}]},{xtype:'wizardpage',title:Bigmedia.Locales.dlgAutoSelectFaces.wpBudgetTitle,reference:'planPage',iconCls:'x-fa fa-money',layout:{type:'vbox',pack:'center',align:'stretch'},bind:{isCompleted:'{planReady && (ruleType === "1" || theGroup)}'},items:[{xtype:'grid',reference:'planGrid',flex:1,bind:{store:'{planStore}'},viewConfig:{listeners:{expandbody:function(d,e,f,g){var a=this,c=a.ownerGrid;var b=c.getPlugin('rowwidget');c.getStore().each(function(j){var c=a.getNodeByRecord(j);if(c&&c!==d){var i=Ext.fly(c),h=i.hasCls(b.rowCollapsedCls);if(!h){b.toggleRow(a.indexOf(c),e)}}})}},markDirty:!1},forceFit:!0,columns:[{text:Bigmedia.Locales.colCity,dataIndex:'name',width:300},{text:Bigmedia.Locales.dlgAutoSelectFaces.planBudgetLabel,dataIndex:'budget',width:120,editor:{xtype:'numberfield',step:1000,minValue:0}},{text:Bigmedia.Locales.dlgAutoSelectFaces.planBoardsLabel,dataIndex:'quantity',width:120,editor:{xtype:'numberfield',step:1,minValue:0}},{text:Bigmedia.Locales.dlgAutoSelectFaces.planCoverageLabel,dataIndex:'coverage',width:120,editor:{xtype:'numberfield',step:1,minValue:0,maxValue:90}}],plugins:{cellediting:{clicksToEdit:1},rowwidget:{selectRowOnExpand:!0,widget:{xtype:'container',layout:{type:'hbox',align:'stretchmax',pack:'start'},config:{record:null},bind:{record:'{record}'},defaultBindProperty:'record',defaults:{padding:3},items:[{xtype:'multiselectsplitfield',width:370,bind:{selStore:'{record.selsuppliers}',searchStore:'{record.suppliers}',parentName:'{record.name}'},dimensionField:'name',dimensionName:Bigmedia.Locales.colSupplier,limits:{BIGMEDIA:{min:25,max:null}}},{xtype:'multiselectsplitfield',width:370,bind:{selStore:'{record.selsizes}',searchStore:'{record.sizes}',parentName:'{record.name}'},splitMode:'limits',dimensionField:'name',dimensionName:Bigmedia.Locales.colSize}]}}}},{xtype:'fieldcontainer',margin:'20 0 0 0',layout:{type:'vbox',align:'center',pack:'center'},items:[{xtype:'radiogroup',fieldLabel:Bigmedia.Locales.dlgAutoSelectFaces.rgDiscountTypeLabel,name:'rb-horiz-1',columns:2,bind:'{ruleType}',simpleValue:!0,items:[{boxLabel:Bigmedia.Locales.dlgAutoSelectFaces.discountForBigmediaLabel,name:'rb',inputValue:'1',width:150},{boxLabel:Bigmedia.Locales.dlgAutoSelectFaces.flexibleDiscountLabel,name:'rb',inputValue:'2'}]},{xtype:'numberfield',fieldLabel:Bigmedia.Locales.dlgAutoSelectFaces.fixedDiscountLabel,labelWidth:130,width:300,min:0,max:99,bind:{hidden:'{ruleType !== "1"}',value:'{discountSimple}'}},{xtype:'container',bind:{hidden:'{ruleType !== "2"}'},layout:{type:'hbox',align:'middle',pack:'center'},items:[{xtype:'combo',flex:1,padding:10,fieldLabel:Bigmedia.Locales.dlgAutoSelectFaces.selectDiscountGroup,store:'RulesGroups',displayField:'name',valueField:'id',queryMode:'local',bind:{selection:'{theGroup}'}},{xtype:'button',text:Bigmedia.Locales.dlgAutoSelectFaces.manageGroups,handler:function(b){var a=Ext.create('Bigmedia.view.dialog.DlgEditRulesGroups',{});a.show()}}]}]}]},{xtype:'wizardpage',layout:{type:'vbox',align:'stretch',pack:'center'},hideNavButtons:!0,items:[{xtype:'grid',reference:'progressGrid',width:'100%',flex:1,bind:{store:'{planStore}'},viewConfig:{markDirty:!1,throttledUpdate:!0},columns:[{text:Bigmedia.Locales.colCity,dataIndex:'name',menuDisabled:!0,sortable:!1,hideable:!1,width:120},{text:Bigmedia.Locales.dlgAutoSelectFaces.colProgress,flex:1,xtype:'widgetcolumn',menuDisabled:!0,sortable:!1,hideable:!1,widget:{bind:'{record.progress}',xtype:'progressbarwidget',textTpl:['{percent:number("0")}% done']}}]},{xtype:'progressbar',width:'90%',margin:20,listeners:{render:function(a){a.wait({interval:500,text:Bigmedia.Locales.dlgAutoSelectFaces.planningInProgress})}}},{xtype:'container',layout:{type:'hbox',align:'middle'},items:[{xtype:'container',flex:1},{xtype:'button',scale:'large',ui:'soft-red',text:Bigmedia.Locales.btnCancelText,handler:function(a){a.up('window').getController().cancelPlanningClick()}},{xtype:'container',flex:1}]}],listeners:{show:function(a){a.up('window').getController().onProgressPageShow(a)}}},{title:Bigmedia.Locales.dlgAutoSelectFaces.wpResultTitle,iconCls:'x-fa fa-flag-checkered',reference:'resultpage',layout:'fit',bind:{isCompleted:'{finalStore.count > 0}'},hidePrevButton:!0,items:[{xtype:'autoplanresult',reference:'searchresult',listeners:{goback:function(){var a=this.up('window');a.lookup('wizard').goTo(4)}}}]},{title:Bigmedia.Locales.dlgAutoSelectFaces.wpCampStat,iconCls:'x-fa fa-line-chart',reference:'campstatpage',layout:'fit',isCompleted:!0,items:[{xtype:'tabpanel',items:[{title:Bigmedia.Locales.dlgAutoSelectFaces.mediaPlan,layout:'fit',items:[{xtype:'pivot-planvariant',bind:{source:'{finalStore}'}}]},{title:Bigmedia.Locales.dlgAutoSelectFaces.charts,layout:'fit',items:[{xtype:'campstat',bind:{source:'{finalStore}'}}]}]}],listeners:{show:function(a){}}},{title:Bigmedia.Locales.dlgAutoSelectFaces.wpAddToCampaign,iconCls:'x-fa fa-trophy',reference:'addtocampaignpage',layout:{type:'vbox',align:'middle',pack:'center'},isCompleted:!0,hideNextButton:!0,items:[{xtype:'container',bind:{hidden:'{startFrom === "campaign" && startFromCampaignId}'},reference:'saveto',title:'Save to',layout:{type:'hbox',align:'stretchmax',pack:'center'},width:'80%',defaultType:'fieldset',padding:10,defaults:{margin:5,layout:{type:'vbox',align:'stretch',pack:'start'},flex:1,defaults:{margin:5}},items:[{items:[{xtype:'textfield',width:'90%',reference:'saveToCampaignName',bind:{value:'{saveToNewCampaignName}'},emptyText:Bigmedia.Locales.dlgAutoSelectFaces.campaignNameEmptyText},{xtype:'component',html:'<center>'+Bigmedia.Locales.dlgAutoSelectFaces.createCampaignDescr+'</center>',flex:1},{xtype:'radiogroup',bind:'{savepriceoption}',vertical:!0,simpleValue:!0,items:[{boxLabel:'Do not save price',name:'sp',inputValue:'1',checked:!0},{boxLabel:'Save using global password',name:'sp',inputValue:'2',bind:{disabled:'{savepriceglobaldisable}'}},{boxLabel:'Input special password',name:'sp',inputValue:'3'}]},{xtype:'textfield',bind:{hidden:'{savepriceoption != "3"}',value:'{savepricepassword}'},width:'100%'},{xtype:'checkbox',bind:{hidden:'{savepriceoption != "3"}',value:'{savepricepasswordglobal}'},fieldLabel:'Save as global password'},{xtype:'button',scale:'large',ui:'soft-green',width:'90%',text:Bigmedia.Locales.dlgAutoSelectFaces.createCampaignBtnText,bind:{disabled:'{saveToNewCampaignName == "" || (savepriceoption === "3" && !savepricepassword)}'},handler:function(a){a.lookupViewModel().set('saveToNewCampaign',!0);a.up('window').getController().addSelectedToCampaign()}}]},{items:[{xtype:'combo',bind:{store:'{campaigns}',value:'{saveToCampaignId}'},width:250,forceSelection:!0,queryMode:'local',valueField:'id',reference:'saveToCampaignCombo',itemId:'saveToCampaignCombo',listConfig:{minWidth:150},displayField:'name',tpl:Ext.create('Ext.XTemplate','<tpl for=".">','<li class="campview-combo-item camp-combo-preview-100 camp-combo-dataitem x-boundlist-item">','<div class="camp-picture "','<tpl if="this.hasSubject(subjectId) == true"> style="background-image: url(/api/v1/subjects/{subjectId}/image.jpeg)"</tpl>>','<div class="camp-combo-info">','<div class="camp-combo-name">{name}</div>','<div class="camp-combo-period">{startDate:date("d.m.Y")}&nbsp;-&nbsp;{endDate:date("d.m.Y")}</div>','</div>','</div>','</li>','</tpl>',{hasSubject:function(a){return !!a}}),displayTpl:Ext.create('Ext.XTemplate','<tpl for=".">','{name} ({startDate:date("d.m.Y")}..{endDate:date("d.m.Y")})','</tpl>'),listeners:{select:function(a){a.up('wizardpage').setIsCompleted(!0)}}},{xtype:'component',html:'<center>'+Bigmedia.Locales.dlgAutoSelectFaces.saveToCampaignDescr+'</center>',flex:1},{xtype:'button',scale:'large',ui:'soft-green',width:'90%',text:Bigmedia.Locales.dlgAutoSelectFaces.saveToCampaignBtnText,bind:{disabled:'{!saveToCampaignId}'},handler:function(a){a.lookupViewModel().set('saveToCampaign',!0);a.up('window').getController().addSelectedToCampaign(a.lookupViewModel().get('saveToCampaignId'))}}]}]},{xtype:'container',bind:{hidden:'{!(startFrom === "campaign" && startFromCampaignId)}'},reference:'savetostarted',title:'Save to',layout:{type:'hbox',align:'stretchmax',pack:'center'},width:'80%',defaultType:'fieldset',padding:10,defaults:{margin:5,layout:{type:'vbox',align:'middle',pack:'center'},flex:1,defaults:{margin:5}},items:[{xtype:'button',scale:'large',ui:'soft-green',width:300,text:Bigmedia.Locales.dlgAutoSelectFaces.saveToCampaignBtnText,handler:function(a){a.lookupViewModel().set('saveToCampaign',!0);a.lookupViewModel().set('saveToCampaignId',a.lookupViewModel().get('startFromCampaignId'));a.up('window').getController().addSelectedToCampaign(a.lookupViewModel().get('startFromCampaignId'))}}]}]}],listeners:{curpagechanged:function(f,n){var a=this,c=a.getViewModel();if(f===0){var b=c.get('startFrom'),m=b==='blank',g=b==='cart';startFromCampaign=b==='campaign';var e={};if(g){var i=Ext.getStore('ShoppingCart');i.each(function(a){e[a.get('id_city')]=1})}else {if(startFromCampaign){var l=a.lookup('startFromCampaignCombo');var d=l.getValue();if(d){var c=a.lookupViewModel(!0),h=c.getStore('campaigns');var k=h.getById(d);var j=k.proposals();j.load({scope:a,callback:function(a,b,c){a.forEach(function(g){var d=Ext.getStore('Faces').getById(g.get('faceId'));if(d){e[d.get('id_city')]=1}})}})}}}}}}}],loadCities:function(){var b=this,d=b.getViewModel().getStore('allCities'),c=Ext.getStore('Cities'),a=Ext.getStore('CityBoundaries');if(!a.isLoaded()){a.on({load:{fn:b.loadCities,scope:b,single:!0}});return}c.each(function(c){var b=a.getById(c.getId());if(b&&b.get('area')){d.add({id:c.getId(),name:c.get('name'),area:b?b.get('area')/1000000:null})}})},discardRemoveBigmedia:function(b,a){a.forEach(function(c){if(c.get('name')==='BIGMEDIA'){b.insert(0,c)}})},discardUpdateBigmedia:function(b,a){if(a.get('name')==='BIGMEDIA'&&(!a.get('min')||a.get('min')<25)){a.set('min',25)}},listeners:{hide:function(a){var b=a.getViewModel();b.getStore('srcFaces').removeListener('datachanged',a.getController().onStoreDataChanged);b.getStore('srcFaces').removeListener('load',a.getController().onStoreLoad);var c=a.lookup('wizard').lookup('citiesGrid');c.getSelectionModel().deselectAll()},show:function(b){var a=this,c=b.lookup('wizard');var d=b.getViewModel();var k=Ext.getStore('Faces'),g=c.lookup('foundFaces');if(!g){var h=c.getDockedItems('toolbar[dock="bottom"]')[0];h.insert(0,Ext.create({xtype:'displayfield',reference:'foundFaces',bind:{value:'Found <b>{availableFaces}</b> boards'}}))}var i=Ext.ComponentQuery.query('mainviewport')[0],j=i.getController().getRestrictedArea();d.setStores({srcFaces:{type:'dimensionstore',model:'Face',autoLoad:!0,dimensions:['size','sidetype'],proxy:{type:'memory'}},campaigns:{source:j.getViewModel().getStore('campaigns'),sorters:[{property:'name',direction:'ASC'}]},allCities:new Ext.data.Store({model:'PlanCity',proxy:'memory',listeners:{add:function(d,c){c.forEach(function(e){e.selsuppliers().on({remove:a.discardRemoveBigmedia,update:a.discardUpdateBigmedia,scope:a});e.selsizes().on('datachanged',function(f){a.getController().updatePlanPageCompleted()},a.getController());e.selsizes().setRemoteFilter(!1);e.selsuppliers().setRemoteFilter(!1);e.sizes().setRemoteFilter(!1);e.suppliers().setRemoteFilter(!1);e.selsizes().addFilter({id:'notemptyquantity',property:'quantity',operator:'>',value:0});e.selsuppliers().addFilter({id:'notemptyquantity',property:'quantity',operator:'>',value:0});e.sizes().addFilter({id:'notemptyquantity',property:'quantity',operator:'>',value:0});e.suppliers().addFilter({id:'notemptyquantity',property:'quantity',operator:'>',value:0})})},datachanged:function(c){a.getController().updateAvailableFaces();a.getController().updatePlanPageCompleted()}}}),cities:{source:'{allCities}',filters:[function(a){return a.faces().count()>0}],sorters:[{property:'population',direction:'DESC'}]},planStore:{source:'{cities}',filters:[function(a){return a.get('selected')}]},repStore:{model:'Face',autoLoad:!0,proxy:{type:'memory'}}});var e=[];Ext.getStore('Faces').each(function(a){if(a.get('price')>0&&!!a.get('lon')&&!!a.get('lat')){var c=a.copy();c.set('inCart',!1);e.push(c)}});d.getStore('srcFaces').add(e);this.loadCities();if(d.get('thirdpartySource')){Ext.getStore('ThirdPartyBoards').each(function(a){if(!!a.get('lon')&&!!a.get('lat')){var c=a.copy();c.set('inCart',!1);d.getStore('srcFaces').add(c)}})}d.getStore('srcFaces').addListener('datachanged',b.getController().onStoreDataChanged,b.getController());d.getStore('srcFaces').addListener('load',b.getController().onStoreLoad,b.getController());var f=b.lookup('wizard').lookup('period').child('form(true)');if(c.getActiveIndex()===0){c.getActivePage().fireEventArgs('show',[c.getActivePage()])}c.goTo(0);f.checkChange();b.getController().onUpdatePeriod();if(Bigmedia.Vars.getSalt()){a.getViewModel().set('savepriceoption','2');a.getViewModel().set('savepriceglobaldisable',!1);a.getViewModel().set('savepricepasswordglobal',!1)}else {a.getViewModel().set('savepricepasswordglobal',!0);a.getViewModel().set('savepriceglobaldisable',!0)}a.getViewModel().set({savepricepassword:'',saveToCampaignName:''})}}});Ext.define('Bigmedia.view.dialog.DlgAutoPlanOldController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgautoplanold',listen:{store:{'planvarstore':{update:'onPlanVarStoreUpdate'},'#ShoppingCart':{datachanged:function(a){this.getViewModel().set('cartIsEmpty',a.getCount()==0)}},'#Faces':{load:function(d){var e=this.getViewModel(),a=e.getStore('srcFaces');var b=[];a.beginUpdate;a.each(function(a){if(a.get('inPlatform')){b.push(a)}});a.remove(b);var c=[];d.each(function(a){if(a.get('price')>0&&!!a.get('lon')&&!!a.get('lat')){c.push(a)}});a.add(c);a.endUpdate();a.fireEventArgs('load',[a])}},'#ThirdPartyBoards':{load:function(d,c){var a=this.getViewModel(),b=a.get('thirdpartySource');srcFaces=a.getStore('srcFaces');if(b&&srcFaces){srcFaces.loadRawData(c,!0);srcFaces.fireEventArgs('load',[srcFaces])}},add:function(d,c){var a=this.getViewModel(),b=a.get('thirdpartySource');srcFaces=a.getStore('srcFaces');if(b&&srcFaces){srcFaces.loadRawData(c,!0);srcFaces.fireEventArgs('load',[srcFaces])}},remove:function(d,c){var a=this.getViewModel(),b=a.get('thirdpartySource');srcFaces=a.getStore('srcFaces');if(b&&srcFaces){srcFaces.remove(c);srcFaces.fireEventArgs('load',[srcFaces])}}}}},onPlanVarStoreUpdate:function(f,a,e,b){if(b.length!==1){return}else {if(b[0]==='selected'){var d=this,c=d.getViewModel().get('finalStore');if(a.get('selected')){c.add(a.faces().getRange())}else {c.remove(a.faces().getRange())}}}},init:function(b){var a=this,c=a.getViewModel();a.callParent(b);Bigmedia.AutoPlan.on('cityprepared',function(c,d){a.cityPrepared(c,d)},a);Bigmedia.AutoPlan.on('algorithmcompleted',function(d,c,e){a.algorithmCompleted(d,c,e)},a);Bigmedia.AutoPlan.on('terminated',function(){var c=a.lookup('wizard');c.goPrevious()},a)},initViewModel:function(a){var b=this;a.set('cartIsEmpty',Ext.getStore('ShoppingCart').getCount()==0)},movePrevious:function(a){},moveNext:function(a){},initPlanVarStore:function(){var d=this,a=d.getViewModel(),b=a.get('planVarStore'),c=a.get('finalStore');b.removeAll();c.removeAll();a.set('selectedCity','');a.set('selectedVariant','')},startFrom:function(){var b=this,a=b.getViewModel();if(a.get('startFromNew')&&a.get('startFromNew').checked){return 'new'}else {if(a.get('startFromCart')&&a.get('startFromCart').checked){return 'cart'}else {if(a.get('startFromCampaign')&&a.get('startFromCampaign').checked){return 'campaign'}}}},onProgressPageShow:function(v){var b=this,w=this.getView(),a=b.getViewModel(),r=a.getStore('srcFaces'),q=a.getStore('repStore'),g=a.get('planStore'),n=Ext.getStore('CityBoundaries'),p=Ext.getStore('ShoppingCart'),k=b.lookup('wizard'),u=Ext.getStore('ThirdPartyBoards'),h=b.startFrom(),o=k.lookup('splitAB').getValue(),m=k.lookup('splitsfieldcatab'),d=o?m.getSplits():null;q.removeAll();var t=new Ext.data.ChainedStore({source:r,filters:[function(a){return g.findExact('id',a.get('id_city'))>=0&&(!d||d[a.get('catab')]>0)}]});b.initPlanVarStore();var c={startDate:a.get('startDate'),endDate:a.get('endDate'),maxOnStreet:a.get('maxOnStreet'),minDistance:a.get('minDistance'),minDistanceOnStreet:a.get('minDistanceOnStreet'),approxCellSize:0.1,coverageDays:Ext.clone(Bigmedia.Vars.coverageDays)};var j={};g.each(function(a){var b=n.getById(a.getId());var e={},c={};a.set('progress',0);a.selsizes().each(function(b){e[b.getId()]=b.get('limit')});if(Object.keys(e).length===0){e=null}a.selsuppliers().each(function(b){c[b.get('name')]={min:b.get('min'),max:b.get('max')}});if(Object.keys(c).length===0){c=null}j[a.getId()]={id:b.getId(),planBudget:a.get('budget'),planBoards:a.get('quantity'),planCoverage:a.get('coverage'),planSizes:e,jsts:b.get('jsts'),turf:b.get('turf'),area:b.get('area'),bbox:b.get('bbox'),x:b.get('x'),y:b.get('y'),splits:[{fieldName:'catab',values:d,type:'count'},{fieldName:'supplier',values:c,type:'budget'}]}});var s=b.getPreparedFaces(t);var e=[];if(h==='cart'){e=b.getPreparedFaces(p);c.initialCampaign=e}else {if(h==='campaign'){var i=a.getStore('campaigns').getById(a.get('startFromCampaignId'));if(i){var l=i.proposals(),f=[];l.each(function(a){var c=Ext.getStore('Faces').getById(a.get('faceId'));f.push(b.getPlainFace(c))});c.initialCampaign=f}}}Bigmedia.AutoPlan.fireEventArgs('start',[s,j,c],Bigmedia.AutoPlan)},getPlainFace:function(a){a.set({finalPrice:this.getPriceForFace(a)||0,netPrice:this.getFaceNetPrice(a)||0},{silent:!0});return {coveragesTurf:a.get('coveragesTurf'),cells:a.get('cells'),doors_no:a.get('doors_no'),grp:a.get('grp')||0.01,id:a.get('id'),ots:a.get('ots')||1,streets:a.get('streets'),supplier:a.get('supplier'),finalPrice:a.get('finalPrice')||0,id_city:a.get('id_city'),id_size:a.get('id_size'),id_catab:a.get('id_catab'),catab:a.get('catab'),angle:a.get('angle'),lat:a.get('lat'),lon:a.get('lon'),num:a.get('num'),turf:a.get('lat')&&a.get('lon')?turf.point([parseFloat(a.get('lon')),parseFloat(a.get('lat'))]):null}},getPriceForFace:function(a,i,j){var k=this,b=k.getViewModel(),g=b.get('ruleType'),f=b.get('discountSimple'),d=b.get('theGroup'),h=Ext.getStore('DiscountTypes'),c=i||b.get('startDate'),e=j||b.get('endDate');if(!a.get('inPlatform')){return a.get('price')}if(g==='1'){return h.getPeriodPrice(a.get('price'),'percentDiscount',f,c,e)}else {if(d){return d.getFacePeriodPrice(a.getData(),c,e)}else {return a.get('price')}}},getFaceNetPrice:function(a){var g=this,b=g.getViewModel(),e=b.get('ruleType'),d=b.get('discountSimple'),c=b.get('theGroup'),f=Ext.getStore('DiscountTypes');if(!a.get('inPlatform')){return a.get('price')}if(e==='1'){return f.getMonthPrice(a.get('price'),'percentDiscount',d)}else {if(c){return c.getFaceMonthPrice(a.getData())}else {return a.get('price')}}},getPreparedFaces:function(b){var c=this,a=[];b.each(function(d){a.push(c.getPlainFace(d))});return a},cancelPlanningClick:function(){Bigmedia.AutoPlan.fireEventArgs('stop',[],Bigmedia.AutoPlan)},algorithmCompleted:function(l,h,n){var j=this,a=j.getViewModel(),d=a.get('planStore'),c=a.get('planVarStore'),k=a.get('srcFaces');var b=d.getById(l);if(b){b.set({progress:b.get('progress')+0.3});var q=Ext.getStore('Faces'),p=Ext.getStore('ThirdPartyBoards');var e=n.map(function(b){var a=k.getById(b.id).copy();return a});b.set(h,e);c.loadRawData({algorithm:h,id_city:b.getId(),city:b.get('name'),boards:e.length,coverage:0,faces:[]},!0);var g=c.last();c.fireEventArgs('add',[c,[g]]);g.faces().add(e)}var o=d.min('progress')===1;if(o){a.set({selectedCity:d.getAt(0)});a.notify();a.get('chainedVarStore').sort([{property:'cpt',direction:'ASC'},{property:'budget',direction:'ASC'}]);a.get('chainedVarStore').sort('city','ASC');a.set({selectedVariant:a.get('chainedVarStore').getAt(0)});a.notify();var f=a.get('resCitiesStore');f.removeAll();d.each(function(a){f.add({id:a.getId(),name:a.get('name')})});var i=a.get('repStore');i.fireEventArgs('refreshonmap',[i]);var m=j.lookup('wizard');m.goNext()}},cityPrepared:function(g,h){var c=this,d=c.getViewModel().get('planStore'),a=Ext.getStore('Faces'),f=Ext.getStore('ThirdPartyBoards'),e=c.getViewModel().get('repStore');var b=d.getById(g);if(b){b.set('progress',0.1)}h.forEach(function(c){var d=null,b;if(a.getById(c.id)){b=a.getById(c.id)}else {b=f.getById(c.id)}if(b){if(!b.get('cells')||!b.get('coverages')){var i=c.coveragesTurf.map(function(a){return Bigmedia.Vars.convertTurfToJsts(a)});d={cells:c.cells,coverages:i,coveragesTurf:c.coveragesTurf}}if(d){b.set(d,{commit:!0,silent:!0})}e.add(b)}})},processPlanCity:function(a,b){me.testWorker=new Bigmedia.Vars.QueryableWorker('/test_worker.js');me.testWorker.addListener('Finish',function(c){});me.testWorker.sendQuery('getFacesByMethod',storeArray,'minPrice',params)},onUpdatePeriod:function(){var c=this,g=c.getViewModel(),a=g.getStore('srcFaces'),j=c.getView().down('form#periodform'),e=c.getView().down('datefield#startDate').getValue(),f=c.getView().down('datefield#endDate').getValue();if(!a){return}if(!j.isValid()){return}var l=Bigmedia.Vars.getFacesByPeriod({store:a,startDate:e,endDate:f,wholePeriod:!0,minFreeDays:10,allowTempRes:!0});a.removeFilter('filterPeriod',!0);var d=Object.keys(l).map(function(a){return +a});if(d&&d.length>0){var h=new Ext.util.Filter({property:'id',id:'filterPeriod',operator:'in',value:d});a.addFilter(h)}else {a.addFilter(new Ext.util.Filter({property:'id',id:'filterPeriod',operator:'=',value:'nop'}))}var b=g.getStore('campaigns');b.removeFilter('periodStart',!0);b.removeFilter('periodEnd',!0);var i=new Ext.util.Filter({property:'startDate',id:'periodStart',operator:'<',value:f});var k=new Ext.util.Filter({property:'endDate',id:'periodEnd',operator:'>',value:e});b.addFilter(i);b.addFilter(k)},updateAvailableFaces:function(){var g=this,a=g.getViewModel(),c=a.getStore('allCities'),e=a.getStore('srcFaces'),d=[],b=0;if(!c||!e){a.set('availableFaces',0)}else {c.each(function(a){if(a.get('selected')){d.push(a.getId());b+=a.faces().count()}});var f=e.count();if(d.length>0){a.set('availableFaces',b)}else {a.set('availableFaces',f)}}a.notify()},onStoreDataChanged:function(b){var a=this;a.updateFacesInCities(b);a.updatePlanStore(b);a.updateAvailableFaces()},updateFacesInCities:function(b){var c=this,d=c.getViewModel(),a=d.getStore('allCities');if(!a){return}a.each(function(a){a.faces().removeAll()});b.each(function(d){var c=a.getById(d.get('id_city'));if(c){c.faces().add(d)}});a.each(function(a){a.set('facesCount',a.faces().count())})},updatePlanPageCompleted:function(){var d=this,e=d.lookup('wizard'),c=d.getViewModel();var b=c.get('planStore');if(!b){c.set('planReady',!1);return}var a=!!b.getCount();b.each(function(c){var b=!!c.get('budget')||!!c.get('quantity')||!!c.get('coverage');if(!b){c.selsizes().each(function(a){b=b||!!a.get('limit')})}a=a&&b});c.set('planReady',a)},updatePlanStore:function(c){var d=this,f=d.getViewModel();var b=f.get('allCities');if(!b){return}var a={};c.each(function(b){if(!a[b.get('id_city')]){a[b.get('id_city')]={id:b.get('id_city'),name:b.get('city'),plansizes:{},plansuppliers:{},faces:[]}}if(!a[b.get('id_city')].plansizes[b.get('id_size')]){a[b.get('id_city')].plansizes[b.get('id_size')]=1}else {a[b.get('id_city')].plansizes[b.get('id_size')]++}if(!a[b.get('id_city')].plansuppliers[b.get('supplier')]){a[b.get('id_city')].plansuppliers[b.get('supplier')]=1}else {a[b.get('id_city')].plansuppliers[b.get('supplier')]++}a[b.get('id_city')].faces.push(b)});var e=[];b.each(function(b){if(!a[b.getId()]){e.push(b)}});var h=[],g=c.getFilters().getByKey('filtersize');Object.keys(a).forEach(function(e){var f={id:e,name:Bigmedia.Locales.refCity[e],plansizes:Object.keys(a[e].plansizes).reduce(function(d,b){d.push({id:b,name:Bigmedia.Locales.refSize[b],quantity:a[e].plansizes[b],limit:a[e].plansizes[b]});return d},[]),selsizes:[],plansuppliers:Object.keys(a[e].plansuppliers).reduce(function(d,b){d.push({id:b,name:b,quantity:a[e].plansuppliers[b],min:b==='BIGMEDIA'?25:null});return d},[]),selsuppliers:[],progress:0,faces:a[e].faces};var d=b.getById(e);var h=[];if(d){f.plansizes.forEach(function(a){if(!d.sizes().getById(a.id)){h.push(a)}else {d.sizes().getById(a.id).set({quantity:a.quantity})}});d.sizes().each(function(a){if(!f.plansizes.some(function(b){return a.getId()===b.id})){a.set('quantity',0)}});d.sizes().loadRawData(h,!0);var g=[];f.plansuppliers.forEach(function(a){if(!d.suppliers().getById(a.id)){g.push(a)}else {d.suppliers().getById(a.id).set({quantity:a.quantity})}});d.suppliers().each(function(a){if(!f.plansuppliers.some(function(b){return a.getId()===b.id})){a.set('quantity',0)}});d.suppliers().loadRawData(g,!0);d.faces().loadRawData(f.faces)}});b.each(function(a){a.sizes().sort('quantity','DESC');a.suppliers().sort('quantity','DESC');ix=a.suppliers().findExact('name','BIGMEDIA');if(ix>=0){var b=a.suppliers().getAt(ix);if(a.selsuppliers().indexOf(b)<0){a.selsuppliers().add(b)}}});d.updatePlanPageCompleted()},onStoreLoad:function(d){var a=this,e=a.getViewModel();a.onUpdatePeriod();var b=a.lookup('wizard').lookup('period'),c=b.child('form(true)');if(c.isValid()){b.setIsCompleted(!0)}a.updateFacesInCities(d);a.updateAvailableFaces()},startAutoSelect:function(){var b=this,a=b.lookup('wizard');a.goNext()},addSelectedToCampaign:function(c){var d=this,e=d.getViewModel(),o=d.getView(),t=d.lookup('wizard'),q=d.getViewModel().get('finalStore');var p=e.get('saveToNewCampaignName');startDate=e.get('startDate'),endDate=e.get('endDate');var r=Ext.ComponentQuery.query('mainviewport')[0],s=r.getController().getRestrictedArea(),i=s.getViewModel().getStore('campaigns'),a=null;var l={},n=[],m=[];var b=e.get('savepriceoption'),g=e.get('savepricepassword'),j=e.get('savepricepasswordglobal');if(b==='3'&&j){Bigmedia.Vars.setSalt(g)}if(b==='3'&&!j&&c){Bigmedia.Vars.setSalt(g,c)}Ext.MessageBox.show({msg:Bigmedia.Locales.dlgAutoSelectFaces.mbBulkAddFacesToCampaign,progressText:Bigmedia.Locales.dlgAutoSelectFaces.mbBulkAddFacesToCampaignProgress,width:300,wait:{interval:200}});var f;if(c){if(b!=='1'){f=Bigmedia.Vars.getSalt(c)||Bigmedia.Vars.getSalt()}}else {if(b==='2'){f=Bigmedia.Vars.getSalt()}else {if(b==='3'){f=g}}}var h='';q.each(function(a){if(f&&a.get('netPrice')){h=Bigmedia.Vars.encryptPrice(f,a.get('netPrice'))}else {h=''}if(a.get('inPlatform')){n.push('<face id="'+a.getId()+'" price_encrypted = "'+h+'" by_planner="1"></face>')}else {m.push('<doors doors_no="'+a.get('doors_no')+'" price_encrypted = "'+h+'" by_planner="1"></doors>')}});l.faces=n.join('');l.doorsNums=m.join('');function bulkAddProposals(b){if(a&&a.getId()){Ext.Ajax.request({url:'/api/v1/campaigns/'+encodeURIComponent(a.getId())+'/bulkAddProposals',params:l,success:function(a,d){Ext.MessageBox.hide();if(b){b()}},failure:function(a,d){Ext.MessageBox.hide();console.log('server-side failure with status code '+a.status)}})}else {Ext.MessageBox.hide()}}if(!c){var k=i.add({name:p,startDate:startDate,endDate:endDate});if(k&&k.length>0){a=k[0];i.sync({success:function(){bulkAddProposals(function(){if(b==='3'&&!j){Bigmedia.Vars.setSalt(g,a.get('id'))}o.hide();d.redirectTo('campaigns/'+a.get('id'))})},failure:function(){Ext.MessageBox.hide();i.rejectChanges()}})}}else {a=i.getById(c);bulkAddProposals(function(){o.hide();d.redirectTo('campaigns/'+a.get('id'))})}}});Ext.define('Bigmedia.view.dialog.DlgAutoPlanOldModel',{extend:Ext.app.ViewModel,alias:'viewmodel.dialog-dlgautoplanold',stores:{planVarStore:{type:'planvarstore'},chainedVarStore:{source:'{planVarStore}',filters:[{property:'id_city',value:'{selectedCity.id}',operator:'='}],sorters:[{property:'city',direction:'ASC'}]},finalStore:{type:'plannerstore'},resCitiesStore:{fields:['id','name'],proxy:'memory'},catabStore:{data:[{dimension:'A/B',data0:80,data1:20,name0:'A',name1:'B'}],fields:['dimension','data0','data1','name0','name1'],autoLoad:!0,proxy:{type:'memory'}},rulesgroups:{type:'rulesgroups'}},formulas:{fieldcata:{bind:{bindTo:'{catabStore.first}',deep:!0},get:function(a){return a.get('data0')},set:function(a){this.get('catabStore').first().set({'data0':a,'data1':100-a});return a}},fieldcatb:{bind:{bindTo:'{catabStore.first}',deep:!0},get:function(a){return a.get('data1')},set:function(a){this.get('catabStore').first().set({'data0':100-a,'data1':a});return a}}},data:{splitab:{cata:80,catb:20},startFrom:'blank',startFromNew:null,startFromCart:null,startFromCampaign:null,startFromCampaignId:null,cartIsEmpty:!0,selectedCity:null,selectedVariant:null,thirdpartySource:!0,promo:{code:'',status:'frown',value:null},availableFaces:0,startDate:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()+1,1)),endDate:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()+2,0)),maxOnStreet:5,minDistanceOnStreet:500,minDistance:700,planBoards:null,textTypicals:'',textBests:'',textWorsts:'',planSplits:{bigmedia:0.5},planBudget:null,planCoverage:null,descrSelectedCampaign:'',saveToNewCampaign:null,saveToNewCampaignName:'',saveToCampaign:null,saveToCampaignId:null,savepriceoption:'1',savepricepassword:null,savepriceglobaldisable:!1,savepricepasswordglobal:!1,ruleType:'1',discountSimple:0,theGroup:null,planReady:!1}});Ext.define('Bigmedia.view.dialog.DlgAutoPlanSplit',{extend:Bigmedia.view.dialog.MaterialDialog,xtype:'dlgautoplansplit',closeAction:'destroy',referenceHolder:!0,viewModel:{stores:{operators:{fields:['name']},sizes:{fields:['name','maxValue']}},data:{city:null,hideAddOperator:!1,totalSelOperators:[],totalSelSizes:[]}},config:{city:null,params:null,cityRec:null},updateParams:function(b){var f=this,c=f.getViewModel(),d=c.getStore('operators'),e=c.getStore('sizes'),a=[];b.operators.forEach(c=>{a.push({name:c})});d.add(a);a=[];b.sizes.forEach(c=>{a.push({name:c.name,maxValue:c.totalCount})});e.add(a)},updateCity:function(a){this.getViewModel().set('city',a)},onUpdateOperators:function(){var e=this,f=e.getViewModel(),c=e.lookup('splitoperators'),b=[];for(var a=0;a<c.items.getCount();a++){var d=c.items.getAt(a);if(d.isXType('autoplansplitoperator')){b.push(d.getValue().operator)}}f.set('totalSelOperators',b)},onUpdateSizes:function(){var e=this,f=e.getViewModel(),c=e.lookup('splitsizes'),b=[];for(var a=0;a<c.items.getCount();a++){var d=c.items.getAt(a);if(d.isXType('autoplansplitsize')){b.push(d.getValue().size)}}f.set('totalSelSizes',b)},title:'',tools:[{type:'prev',callback:function(a){a.close()}}],titlePosition:1,closable:!1,resizable:!1,layout:{type:'vbox',align:'stretch'},items:[{xtype:'component',bind:{html:'<span style="font-weight: bold; font-size: 2em; line-height: 1.3em">{city}</span>'}},{xtype:'container',layout:'anchor',flex:1,layout:'fit',items:[{xtype:'tabpanel',plain:!0,items:[{reference:'splitoperators',title:' ',scrollable:'y',layout:{type:'vbox',align:'stretch'},items:[{xtype:'button',text:' ',iconCls:'x-fa fa-plus',bind:{hidden:'{hideAddOperator}'},handler:function(e){var b=e.up(),g=b.items.getCount()-1,a=e.up('window'),d=a.getViewModel().getStore('operators'),f=a.getViewModel().get('totalSelOperators'),c;d.each(a=>{if(f.indexOf(a.get('name'))<0){c=a.get('name');return !1}});if(c){b.insert(g,{xtype:'autoplansplitoperator',oStore:d,bind:{selOperators:'{totalSelOperators}'},initData:{operator:{value:c,readOnly:!1}},listeners:{validitychange:function(c,b){a.getViewModel().set('hideAddOperator',!b)},valuechanged:function(){Ext.callback(a.onUpdateOperators,a)},removeclick:function(c){b.remove(c);Ext.callback(a.onUpdateOperators,a)}}})}}}]},{reference:'splitsizes',title:' ',scrollable:'y',layout:{type:'vbox',align:'stretch'},items:[{xtype:'button',text:' ',iconCls:'x-fa fa-plus',bind:{hidden:'{hideAddSize}'},handler:function(e){var b=e.up(),g=b.items.getCount()-1,a=e.up('window'),d=a.getViewModel().getStore('sizes'),f=a.getViewModel().get('totalSelSizes'),c;d.each(a=>{if(f.indexOf(a.get('name'))<0){c=a.get('name');return !1}});if(c){b.insert(g,{xtype:'autoplansplitsize',sStore:d,bind:{selSizes:'{totalSelSizes}'},initData:{size:c},listeners:{validitychange:function(c,b){a.getViewModel().set('hideAddSize',!b)},valuechanged:function(){Ext.callback(a.onUpdateSizes,a)},removeclick:function(c){b.remove(c);Ext.callback(a.onUpdateSizes,a)}}})}}}]}]}]}],bbar:{items:['->',{scale:'large',ui:'base-blue',text:'',handler:function(h){var c=h.up('window');var f=[],g=[],d=c.lookup('splitoperators'),e=c.lookup('splitsizes');for(var a=0;a<d.items.getCount();a++){var b=d.items.getAt(a);if(b.isXType('autoplansplitoperator')){f.push(b.getValue())}}for(var a=0;a<e.items.getCount();a++){var b=e.items.getAt(a);if(b.isXType('autoplansplitsize')){g.push(b.getValue())}}c.fireEvent('saveclick',{oData:f,sData:g});c.close()}}]},listeners:{render:function(){var a=this,f=a.getViewModel(),b=f.getStore('operators'),c=a.lookup('splitoperators'),d=a.getParams().oData,h=f.getStore('sizes'),g=a.lookup('splitsizes'),e=a.getParams().sData;if(d){d.forEach((e,f)=>{c.insert(f,{xtype:'autoplansplitoperator',oStore:b,bind:{selOperators:'{totaSelOperators}'},initData:{operator:{value:e.operator,readOnly:e.operator=='BIGMEDIA'},min:{value:e.min,minValue:e.operator=='BIGMEDIA'?25:0},max:{value:e.max,minValue:e.operator=='BIGMEDIA'?25:0}},removable:e.operator!='BIGMEDIA',listeners:{validitychange:function(g,c){a.getViewModel().set('hideAddOperator',d.length===b.getCount())},valuechanged:function(){Ext.callback(a.onUpdateOperators,a)},removeclick:function(b){c.remove(b);Ext.callback(a.onUpdateOperators,a)}}})})}else {if(b.findExact('name','BIGMEDIA')>=0){f.set('totalSelOperators',['BIGMEDIA']);c.insert(0,{xtype:'autoplansplitoperator',oStore:b,bind:{selOperators:'{totaSelOperators}'},initData:{operator:{value:'BIGMEDIA',readOnly:!0},min:{value:25,minValue:25},max:{value:null,minValue:25}},removable:!1})}}if(e){e.forEach((b,c)=>{g.insert(c,{xtype:'autoplansplitsize',sStore:h,bind:{selSizes:'{totaSelSizes}'},initData:{size:b.size,count:b.count},listeners:{validitychange:function(f,d){a.getViewModel().set('hideAddSize',e.length===h.getCount())},valuechanged:function(){Ext.callback(a.onUpdateSizes,a)},removeclick:function(d){g.remove(d);Ext.callback(a.onUpdateSizes,a)}}})})}}}});Ext.define('Bigmedia.view.dialog.DlgChangePassword',{extend:Ext.window.Window,xtype:'dialog-changepassword',viewModel:{data:{password:null}},title:Bigmedia.Locales.dlgChangePasswordTitle,frame:!0,width:320,closable:!0,bodyPadding:10,items:[{xtype:'form',defaultType:'textfield',items:[{allowBlank:!1,fieldLabel:Bigmedia.Locales.fieldPasswordLabel,name:'password',itemId:'password',bind:{value:'{password}'},emptyText:'password',inputType:'password',listeners:{validitychange:function(a){a.next().validate()},blur:function(a){a.next().validate()}}},{allowBlank:!1,fieldLabel:Bigmedia.Locales.fieldConfirmPasswordLabel,name:'confirmpassword',initialPassField:'password',emptyText:'password',inputType:'password',vtype:'password'}],buttons:[{text:Bigmedia.Locales.btnCancelText,handler:function(a){var b=a.up('window');b.close()}},{text:Bigmedia.Locales.btnSaveText,formBind:!0,handler:function(d){var a=d.up('window'),c=a.getViewModel(),b;b='/api/v1/auth/password';Ext.Ajax.request({url:b,method:'PUT',params:{password:c.get('password')},success:function(b){Bigmedia.Vars.loadUser();Ext.toast(Bigmedia.Locales.dlgChangePasswordSuccessToastText);a.close()},failure:function(){var a;a=Bigmedia.Locales.dlgChangePasswordErrorAlertMsg;Ext.Msg.alert(Bigmedia.Locales.dlgChangePasswordErrorAlertTitle,a)}})}}],defaults:{anchor:'100%',labelWidth:120}}]});Ext.define('Bigmedia.view.dialog.DlgCustomPeriodController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgcustomperiod',onShowView:function(a){var b=this;if(a.cbPoiTag){b.facesStore=a.cbPoiTag.getTargetStore()}},onCloseWindowClick:function(){this.getView().hide()},getPeriodText:function(a,b){var d=new Date(b),c='';d.setDate(b.getUTCDate()+1);if(a.getUTCDate()==1&&a.getUTCDate()==d.getUTCDate()){var e=Ext.Date.diff(a,d,Ext.Date.MONTH);if(e==1){c=Ext.Date.monthNames[a.getUTCMonth()]+'&#39;'+a.getYear().toString().slice(-2)}else {if(a.getYear()==b.getYear()){c=Ext.Date.monthNames[a.getUTCMonth()]+' - '+Ext.Date.monthNames[b.getUTCMonth()]}else {c=Ext.Date.monthNames[a.getUTCMonth()]+'&#39;'+a.getYear().toString().slice(-2)+' - '+Ext.Date.monthNames[b.getUTCMonth()]+'&#39;'+b.getYear().toString().slice(-2)}}}else {c=Ext.Date.format(a,'d.m.y')+'-'+Ext.Date.format(b,'d.m.y')}return c},genNewName:function(){var a=this,b=a.lookupReference('seldatebeg').getValue(),c=a.lookupReference('seldateend').getValue();var d=Ext.String.format(Bigmedia.Locales.periodTagDescrPeriod,a.getPeriodText(b,c));return d},genNewDescr:function(){var a=this,f=a.lookupReference('seldatebeg').getValue(),g=a.lookupReference('seldateend').getValue(),c=a.lookupReference('allowtempres').getValue(),d=a.lookupReference('minfreedays').getValue(),e=a.lookupReference('wholeperiod').getValue();var b=Ext.String.format(Bigmedia.Locales.periodTagDescrPeriod,a.getPeriodText(f,g));if(e){b+=', '+Bigmedia.Locales.periodTagDescrWhole}else {b+=', '+Ext.String.format(Bigmedia.Locales.periodTagDescrParts,d)}if(c){b+=', '+Bigmedia.Locales.periodTagDescrAllowTempRes}else {b+=', '+Bigmedia.Locales.periodTagDescrFreeOnly}return b},onCreateFilterClick:function(){var a=this,g=a.getView(),b=g.cbPoiTag,k=b.getStore(),d=a.lookupReference('seldatebeg').getValue(),e=a.lookupReference('seldateend').getValue(),h=a.lookupReference('allowtempres').getValue(),i=a.lookupReference('minfreedays').getValue(),j=a.lookupReference('wholeperiod').getValue();startDate=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate()));endDate=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));var c=Bigmedia.Vars.getFacesByPeriod({store:b.getTargetStore(),startDate:startDate,endDate:endDate,wholePeriod:j,minFreeDays:i,allowTempRes:h});var l=k.add({name:a.genNewName(),descr:a.genNewDescr(),totalCount:Object.keys(c).length,addCount:Object.keys(c).length,faces:c,startDate:startDate,endDate:endDate});var f=b.getValue();tagVal=f.concat(l[0].id);b.setValue(tagVal);b.updateValue();b.fireEventArgs('change',[b,tagVal,f,!0]);g.hide()},parseOccupancy:function(){var a=this,d=a.lookupReference('seldatebeg').getValue(),b=a.lookupReference('seldateend').getValue(),h=new Date(Date.now()+86400000),k=a.lookupReference('allowtempres').getValue(),l=a.lookupReference('minfreedays').getValue(),f=a.lookupReference('wholeperiod').getValue(),i={};d.setHours(0,0,0,0);b.setHours(0,0,0,0);h.setHours(0,0,0,0);b.setDate(b.getUTCDate()+1);var m=Math.round((d-h)/(3600*24*1000)),g=Math.round((b-d)/(3600*24*1000));var e,j=/(\d+)(\w)/g;var c=a.getView().cbPoiTag.getTargetStore().getData();if(c.filtered){c=c.getSource()}c.each(function(p){var q=p.get('occupancy'),d=!0,n=[],a=m,h=g;j.lastIndex=0;while((e=j.exec(q))!=null&&h>0){var b=+e[1],o=e[2];if(d&&b<=a){a-=b;continue}else {if(d){d=!1;b-=a;a=0}}if(a===0&&(o==='f'||o==='t'&&k)){n.push(Math.min(h,b))}h-=b}var c=Math.max(n);if(f&&c>=g||!f&&c>=l){i[p.getId()]=c}});return i}});Ext.define('Bigmedia.view.dialog.DlgCustomPeriodModel',{extend:Ext.app.ViewModel,alias:'viewmodel.dialog-dlgcustomperiod',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.dialog.DlgCustomPeriod',{extend:Ext.window.Window,controller:'dialog-dlgcustomperiod',width:500,minWidth:400,height:380,minHeight:380,modal:!0,hidden:!0,autoDestroy:!1,autoShow:!1,closeAction:'hide',title:Bigmedia.Locales.dlgCustomPeriodTitle,referenceHolder:!0,layout:'vbox',items:[{xtype:'fieldset',width:'100%',title:Bigmedia.Locales.dlgCustomPeriodPeriod,layout:'hbox',defaults:{format:'d.m.Y',minDate:new Date(Date.now()+86400000),maxDate:new Date(Date.now()+86400000*365)},items:[{xtype:'datefield',reference:'seldatebeg',flex:1,filedLabel:Bigmedia.Locales.dlgCustomPeriodFrom,value:new Date(Date.now()+86400000),validator:function(e){var a=Ext.Date.parse(e,this.format),d=Bigmedia.Locales.dlgCustomPeriodBegErrMsg,b=this.up('window').lookupReference('seldateend'),c=this.up('window').lookupReference('btnCreateFilter');if(a&&+a<=+b.getValue()){b.clearInvalid();c.enable();return !0}c.disable();return d}},{xtype:'datefield',reference:'seldateend',flex:1,filedLabel:Bigmedia.Locales.dlgCustomPeriodTo,value:new Date(Date.now()+86400000*31),validator:function(e){var a=Ext.Date.parse(e,this.format),d=Bigmedia.Locales.dlgCustomPeriodEndErrMsg,b=this.up('window').lookupReference('seldatebeg'),c=this.up('window').lookupReference('btnCreateFilter');if(a&&+a>=+b.getValue()){b.clearInvalid();c.enable();return !0}c.disable();return d}}]},{xtype:'fieldset',title:Bigmedia.Locales.dlgCustomPeriodAdditParams,width:'100%',layout:'vbox',items:[{xtype:'radio',name:'periodtype',fieldLabel:Bigmedia.Locales.dlgCustomPeriodWholePeriod,reference:'wholeperiod',inputValue:'whole',value:!0,width:'100%'},{xtype:'container',layout:'hbox',width:'100%',items:[{xtype:'radio',name:'periodtype',reference:'allowparts',fieldLabel:Bigmedia.Locales.dlgCustomPeriodAllowParts,publishes:'value',inputValue:'parts',value:!1,width:130},{xtype:'slider',reference:'minfreedays',flex:1,minValue:1,maxValue:31,increment:1,bind:{disabled:'{!allowparts.value}'},value:10,fieldLabel:Bigmedia.Locales.dlgCustomPeriodMinDaysAmount,labelWidth:150}]},{xtype:'checkbox',reference:'allowtempres',checked:!0,width:'100%',fieldLabel:Bigmedia.Locales.dlgCustomPeriodShowTempReserved,labelWidth:250}]}],buttons:[{text:Bigmedia.Locales.dlgPoiCategoriesCancelBtnLabel,listeners:{click:'onCloseWindowClick'}},'->',{text:Bigmedia.Locales.dlgPoiCategoriesCreateBtnLabel,reference:'btnCreateFilter',listeners:{click:'onCreateFilterClick'}}],listeners:{show:'onShowView'},showDialog:function(a){this.cbPoiTag=a;this.show()}});Ext.define('Bigmedia.view.dialog.DlgEditRule',{extend:Ext.window.Window,xtype:'dlgeditrule',title:Bigmedia.Locales.discountBuilder.dlgEditRuleTitle,layout:'fit',modal:!0,width:500,height:420,resizable:!0,closable:!0,items:{xtype:'form',reference:'form',bodyPadding:10,border:!1,modelValidation:!0,scrollable:'y',layout:{type:'vbox',align:'stretch'},items:[{xtype:'tagfield',fieldLabel:Bigmedia.Locales.discountBuilder.selSuppliersLabel,allowBlank:!1,displayField:'name',valueField:'id',queryMode:'local',filterPickList:!0,bind:{value:'{theRule.suppliers}',store:'{lookupSuppliers}'}},{xtype:'tagfield',fieldLabel:Bigmedia.Locales.discountBuilder.selCitiesLabel,displayField:'name',valueField:'id',queryMode:'local',filterPickList:!0,bind:{value:'{theRule.cities}',store:'{lookupCities}'}},{xtype:'tagfield',fieldLabel:Bigmedia.Locales.discountBuilder.selSizesLabel,displayField:'name',valueField:'id',queryMode:'local',filterPickList:!0,bind:{value:'{theRule.sizes}',store:'{lookupSizes}'}},{xtype:'tagfield',fieldLabel:Bigmedia.Locales.discountBuilder.selTypesLabel,displayField:'name',valueField:'id',queryMode:'local',filterPickList:!0,bind:{value:'{theRule.sidetypes}',store:'{lookupSidetypes}'}},{xtype:'combobox',fieldLabel:Bigmedia.Locales.discountBuilder.discountTypeLabel,displayField:'name',valueField:'id',queryMode:'local',allowBlank:!1,bind:{value:'{theRule.type}',store:'{lookupTypes}'}},{xtype:'numberfield',fieldLabel:Bigmedia.Locales.discountBuilder.discountValueLabel,allowBlank:!1,bind:{value:'{theRule.value}'}},{xtype:'combobox',fieldLabel:' /',displayField:'name',valueField:'id',queryMode:'local',allowBlank:!0,bind:{value:'{theRule.marginType}',store:'{lookupMarginType}'}},{xtype:'numberfield',fieldLabel:' /',allowBlank:!0,bind:{value:'{theRule.marginValue}'}},{xtype:'combobox',fieldLabel:' ',displayField:'name',valueField:'id',queryMode:'local',allowBlank:!0,bind:{value:'{theRule.marginRoundType}',store:'{lookupMarginRoundType}'}}]},buttons:[{text:Bigmedia.Locales.btnCancelText,handler:'onCancelClick'},{text:Bigmedia.Locales.btnSaveText,formBind:!0,handler:'onSaveClick'}]});Ext.define('Bigmedia.view.dialog.DlgImportGroups',{extend:Ext.window.Window,xtype:'dlgimportgroups',title:Bigmedia.Locales.discountBuilder.dlgImportGroupsTitle,layout:'fit',modal:!0,width:600,height:420,resizable:!0,closable:!0,buttons:[{text:Bigmedia.Locales.btnCancelText,handler:'onImportGroupsCancelClick'},{text:Bigmedia.Locales.btnImportText,bind:{disabled:'{!importGroupGrid.selection}'},handler:'onImportGroupsImportClick'}],items:[{xtype:'grid',reference:'importGroupGrid',selModel:{type:'checkboxmodel',checkOnly:!0},plugins:{cellediting:{clicksToEdit:1},rowwidget:{widget:{xtype:'grid',autoLoad:!0,bind:{store:'{record.rules}',title:Bigmedia.Locales.discountBuilder.rulesForTitle+'{record.name}'},columns:[{text:Bigmedia.Locales.discountBuilder.colCondition,dataIndex:'conditionText',flex:1},{text:Bigmedia.Locales.discountBuilder.colValue,dataIndex:'valueText',width:80}]}}},store:{model:'RulesGroup',proxy:{type:'memory'},autoLoad:!0,autoSync:!0},tbar:['->',{xtype:'fileuploadfield',buttonOnly:!0,hideLabel:!0,listeners:{change:'uploadFileChange'}}],columns:[{text:Bigmedia.Locales.discountBuilder.colGroupName,dataIndex:'name',flex:1,editor:{completeOnEnter:!0,field:{xtype:'textfield',allowBlank:!1}}}]}]});Ext.define('Bigmedia.view.dialog.DlgImportRules',{extend:Ext.window.Window,xtype:'dlgimportrules',title:Bigmedia.Locales.discountBuilder.dlgImportRulesTitle,layout:'fit',modal:!0,width:600,height:420,resizable:!0,closable:!0,viewModel:{data:{rulesselected:!1}},selectedObj:{},buttons:[{text:Bigmedia.Locales.btnCancelText,handler:'onImportRulesCancelClick'},{text:Bigmedia.Locales.btnImportText,bind:{disabled:'{(!importRulesGrid.selection) && (!rulesselected)}'},handler:'onImportRulesImportClick'}],items:[{xtype:'grid',reference:'importRulesGrid',bind:{store:'{groupsForImport}'},selModel:{type:'checkboxmodel',checkOnly:!0},plugins:{cellediting:{clicksToEdit:1},rowwidget:{widget:{xtype:'grid',selModel:{type:'checkboxmodel',checkOnly:!0},autoLoad:!0,bind:{store:'{record.rules}',title:Bigmedia.Locales.discountBuilder.rulesForTitle+'{record.name}'},columns:[{text:Bigmedia.Locales.discountBuilder.colCondition,dataIndex:'conditionText',flex:1},{text:Bigmedia.Locales.discountBuilder.colValue,dataIndex:'valueText',width:80}],listeners:{select:function(d,b){var a=this.up('window'),c=a.getViewModel();a.selectedObj[b.getId()]=b;c.set('rulesselected',Object.keys(a.selectedObj).length>0)},deselect:function(d,b){var a=this.up('window'),c=a.getViewModel();delete a.selectedObj[b.getId()];c.set('rulesselected',Object.keys(a.selectedObj).length>0)}}}}},columns:[{text:Bigmedia.Locales.discountBuilder.colGroupName,dataIndex:'name',flex:1}]}]});Ext.define('Bigmedia.view.dialog.DlgEditRulesGroupsController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgeditrulesgroups',onImportRulesImportClick:function(g){var a=this,c=Ext.getStore('RulesGroups').getById(a.importRulesDialog.destinationGroupId),b=a.importRulesDialog.selectedObj,d=Object.keys(b).map(function(a){return b[a].copy(null)});var e=a.importRulesDialog.child('grid'),f=e.getSelectionModel().getSelection();f.forEach(function(a){a.rules().each(function(c){if(!b[c.getId()]){d.push(c.copy(null))}})});c.rules().add(d);c.rules().sync();a.importRulesDialog=Ext.destroy(a.importRulesDialog)},onImportRulesCancelClick:function(a){this.importRulesDialog=Ext.destroy(this.importRulesDialog)},onImportRulesToolClick:function(e){var a=this,d=a.getView(),f=a.getViewModel(),c=e.up('grid'),b=f.getStore('groupsForImport');b.removeFilter('filterDestinationGroup');b.addFilter({id:'filterDestinationGroup',property:'id',operator:'!=',value:c.getParentGroup().getId()});a.importRulesDialog=d.add({xtype:'dlgimportrules',destinationGroupId:c.getParentGroup().getId(),listeners:{close:function(){a.importRulesDialog=Ext.destroy(a.importRulesDialog)}}});a.importRulesDialog.show()},onAddGroupClick:function(a){Ext.getStore('RulesGroups').add({name:Bigmedia.Locales.discountBuilder.newGroupName})},onImportGroupsImportClick:function(d){var a=this,c=a.lookup('importGroupGrid'),b=Ext.getStore('RulesGroups');c.getSelectionModel().getSelection().forEach(function(e){var c=b.add(e.copy(null))[0],a=[];e.rules().each(function(b){a.push(b.copy(null))});if(a.length>0){c.rules().add(a);c.rules().sync()}});a.importGroupsDialog=Ext.destroy(a.importGroupsDialog)},onImportGroupsCancelClick:function(a){this.importGroupsDialog=Ext.destroy(this.importGroupsDialog)},onImportClick:function(c){var a=this,b=a.getView();a.importGroupsDialog=b.add({xtype:'dlgimportgroups',listeners:{close:function(){a.importGroupsDialog=Ext.destroy(a.importGroupsDialog)}}});a.importGroupsDialog.show()},uploadFileChange:function(b,d){var c=this,a=new FileReader();a.onload=function(){try{var e=a.result;var f=JSON.parse(e);c.lookup('importGroupGrid').getStore().loadRawData(f,!0)}catch(g){Ext.Msg.alert('File import error','File can not be imported: wrong file format.')}finally{}};a.readAsText(b.fileInputEl.dom.files[0])},onSaveToFileClick:function(d){var a=this,e=a.groupsDialog,b=a.lookup('groupGrid'),c=b.getSelectionModel().getSelection().map(function(a){a.rules().load();return a.getData(!0)});Ext.exporter.File.saveAs(JSON.stringify(c),'groups.json')},onAddRuleToolClick:function(c){var b=c.up('grid'),a=b.getStore().getAssociatedEntity();this.createDialog(a.rules().add({})[0])},onEditRuleActionClick:function(b,a,d){var c=b.getStore().getAt(a);this.createDialog(c)},onRemoveRuleActionClick:function(b,a,d){var c=b.getStore().getAt(a);Ext.Msg.confirm(Bigmedia.Locales.discountBuilder.msgRemoveRuleTitle,Bigmedia.Locales.discountBuilder.msgRemoveText,function(e,f){if(e=='yes'){c.erase()}})},onRemoveGroupClick:function(b){var a=b.getWidgetRecord();Ext.Msg.confirm(Bigmedia.Locales.discountBuilder.msgRemoveGroupTitle,Bigmedia.Locales.discountBuilder.msgRemoveText,function(c,d){if(c=='yes'){a.rules().removeAll();a.rules().sync();a.drop()}})},onSaveClick:function(){var b=this.dialog,a=this.lookupReference('form'),c=this.isEdit,d;if(a.isValid()){this.dialog.getViewModel().get('theRule').save();this.dialog=Ext.destroy(this.dialog)}},onCancelClick:function(){this.dialog.getViewModel().get('theRule').reject();this.dialog=Ext.destroy(this.dialog)},createDialog:function(b){var a=this,c=a.getView();a.isEdit=!!b;a.dialog=c.add({xtype:'dlgeditrule',viewModel:{data:{title:b?Bigmedia.Locales.discountBuilder.dlgEditRuleTitle:Bigmedia.Locales.discountBuilder.addRuleTitle,theRule:b||this.getViewModel().get('theGroup.rules').add({})[0]}},listeners:{close:function(){a.dialog.getViewModel().get('theRule').reject();a.dialog=Ext.destroy(this.dialog)}}});this.dialog.show()}});Ext.define('Bigmedia.view.dialog.DlgEditRulesGroupsModel',{extend:Ext.app.ViewModel,alias:'viewmodel.dialog-dlgeditrulesgroups',stores:{lookupSuppliers:{source:'Suppliers'},lookupCities:{source:'Cities'},lookupSizes:{source:'Sizes'},lookupSidetypes:{source:'Networks'},lookupTypes:{source:'DiscountTypes'},groupsForImport:{source:'RulesGroups'},lookupMarginType:{source:'MarginTypes'},lookupMarginRoundType:{source:'MarginRoundTypes'}}});Ext.define('Bigmedia.view.grid.DiscountRules',{extend:Ext.grid.Panel,xtype:'rules-grid',columnLines:!0,padding:'0 20 0 0',bodyPadding:0,margin:0,split:!1,config:{parentGroup:null},autoLoad:!0,config:{parentGroup:null},tbar:{items:[{iconCls:'x-fa fa-plus-square',text:' ',tooltip:Bigmedia.Locales.discountBuilder.btnAddRuleTooltip,handler:'onAddRuleToolClick'},{iconCls:'x-fa fa-file-import',text:' ',tooltip:Bigmedia.Locales.discountBuilder.btnCopyRulesFromTooltip,handler:'onImportRulesToolClick'}]},columns:[{text:Bigmedia.Locales.discountBuilder.colCondition,dataIndex:'conditionText',tdCls:'tip',flex:1},{text:Bigmedia.Locales.discountBuilder.colValue,dataIndex:'valueText',tdCls:'tip',width:80},{xtype:'actioncolumn',width:30,menuDisabled:!0,sortable:!1,hideable:!1,items:[{iconCls:'x-fa fa-list green',tooltip:Bigmedia.Locales.discountBuilder.btnEditRuleTooltip,handler:'onEditRuleActionClick'}]},{xtype:'actioncolumn',width:30,menuDisabled:!0,sortable:!1,hideable:!1,items:[{iconCls:'x-fa fa-ban red',tooltip:Bigmedia.Locales.discountBuilder.btnDeleteRuleTooltip,handler:'onRemoveRuleActionClick'}]}],listeners:{render:function(a){var b=a.getView();a.tip=Ext.create('Ext.tip.ToolTip',{target:b.getId(),delegate:b.itemSelector+' .tip',trackMouse:!0,listeners:{beforeshow:function(b){var c=b.target.component,d=c.getRecord(b.triggerElement);b.update(d.get('description'))}}})},destroy:function(a){delete a.tip}}});Ext.define('Bigmedia.view.dialog.DlgEditRulesGroups',{extend:Ext.window.Window,xtype:'editgroupsdialog',controller:'dialog-dlgeditrulesgroups',viewModel:{type:'dialog-dlgeditrulesgroups'},title:Bigmedia.Locales.discountBuilder.dlgEditGroupsTitle,layout:'fit',modal:!0,width:700,height:520,resizable:!0,closable:!0,items:{xtype:'grid',reference:'groupGrid',selModel:{type:'checkboxmodel',checkOnly:!0},plugins:{cellediting:{clicksToEdit:1},rowwidget:{widget:{xtype:'rules-grid',bind:{store:'{record.rules}',parentGroup:'{record}',title:Bigmedia.Locales.discountBuilder.rulesForTitle+'{record.name}'}}}},store:'RulesGroups',tbar:[{text:Bigmedia.Locales.discountBuilder.addGroupText,handler:'onAddGroupClick'},'->',{text:Bigmedia.Locales.discountBuilder.importGroupsText,handler:'onImportClick'},{text:Bigmedia.Locales.discountBuilder.saveToFileText,handler:'onSaveToFileClick',bind:{disabled:'{!groupGrid.selection}'}}],columns:[{text:Bigmedia.Locales.discountBuilder.colGroupName,dataIndex:'name',flex:1,editor:{completeOnEnter:!0,field:{xtype:'textfield',allowBlank:!1}}},{xtype:'widgetcolumn',width:90,widget:{xtype:'button',text:Bigmedia.Locales.discountBuilder.btnDeleteText,handler:'onRemoveGroupClick'}}]}});Ext.define('Bigmedia.view.dialog.DlgFilterByNumberControllerOld',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgfilterbynumberold',onShowView:function(b){var a=this,d=a.lookupReference('filtername');a.validateForm();if(b.cbPoiTag){a.facesStore=b.cbPoiTag.getTargetStore();var c=b.cbPoiTag.getValue().length+b.cbPoiTag.getStore().getCount()+1;a.lookupReference('filtername').setValue(a.genDefaultName())}},onCloseWindowClick:function(){this.getView().hide()},validateForm:function(){var a=this,e=a.lookupReference('chbsideno').getValue(),d=a.lookupReference('chbdoorsno').getValue(),b=a.lookupReference('btnCreateFilter'),c=a.lookupReference('numbers');var f=c.getValue().split(/[\s,;\n]+/).filter(function(a){return a.match(/\w+/)});if((e||d)&&f.length>0){b.enable()}else {b.disable()}},genDefaultName:function(){var c=this,a=c.getView(),b=a.cbPoiTag.getValue().length+a.cbPoiTag.getStore().getCount()+1;return Bigmedia.Locales.dlgFilterByNumberDefaultFilterName+b},genNewName:function(){var a=this,d=a.lookupReference('numbers').getValue(),b=a.lookupReference('filtername').getValue();var c=b||a.genDefaultName();return c},genNewDescr:function(){var d=this,a=d.lookupReference('numbers').getValue();var b=a.split(/[\s,;\n]+/).filter(function(a){return a.match(/\w+/)});var c=Bigmedia.Locales.dlgFilterByNumberFilterDescr+Ext.String.ellipsis(b.join(','),50);return c},onCreateFilterClick:function(){var b=this,e=b.getView(),a=e.cbPoiTag,f=a.getStore(),g=b.lookupReference('numbers').getValue();var c=b.parseNumbers(g);var h=f.add({name:b.genNewName(),descr:b.genNewDescr(),totalCount:Object.keys(c).length,addCount:Object.keys(c).length,faces:c});var d=a.getValue();tagVal=d.concat(h[0].id);a.setValue(tagVal);a.updateValue();a.fireEventArgs('change',[a,tagVal,d,!0]);e.hide()},parseNumbers:function(f){var c=this,e=c.lookupReference('chbsideno').getValue(),d=c.lookupReference('chbdoorsno').getValue(),b={};testObj=f.split(/[\s,;\n]+/).reduce(function(b,a){b[a]=a;return b},{});var a=c.getView().cbPoiTag.getTargetStore().getData();var g=Ext.getStore('Sides');if(a.filtered){a=a.getSource()}a.each(function(a){if(e&&testObj[a.get('num')]||d&&testObj[a.get('doors_no')]){b[a.getId()]=a.getId()}});g.each(function(a){if(e&&testObj[a.get('num')]||d&&testObj[a.get('doorsNo')]){b[a.get('faceId')]=a.get('faceId')}});return b}});Ext.define('Bigmedia.view.dialog.DlgFilterByNumberModelOld',{extend:Ext.app.ViewModel,alias:'viewmodel.dialog-dlgfilterbynumberold',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.dialog.DlgFilterByNumberOld',{extend:Ext.window.Window,controller:'dialog-dlgfilterbynumberold',width:500,minWidth:400,height:380,minHeight:380,modal:!0,hidden:!0,autoDestroy:!1,autoShow:!1,closeAction:'hide',title:Bigmedia.Locales.dlgFilterByNumberTitle,referenceHolder:!0,layout:'vbox',padding:10,items:[{xtype:'radiogroup',padding:'0 10',fieldLabel:Bigmedia.Locales.dlgFilterByNumberSearchColumnsLabel,columns:2,vertical:!0,width:'100%',labelWidth:180,items:[{boxLabel:Bigmedia.Locales.dlgFilterByNumberSideNoLabel,reference:'chbsideno',inputValue:'sideNo',checked:!0,listeners:{change:'validateForm'}},{boxLabel:Bigmedia.Locales.dlgFilterByNumberDoorsNoLabel,reference:'chbdoorsno',inputValue:'doorsNo',listeners:{change:'validateForm'}}]},{xtype:'textfield',reference:'filtername',emptyText:Bigmedia.Locales.dlgFilterByNumberNameEmpty,width:'100%'},{xtype:'textarea',reference:'numbers',emptyText:Bigmedia.Locales.dlgFilterByNumberNumbersEmpty,width:'100%',listeners:{change:'validateForm'},flex:1}],buttons:[{text:Bigmedia.Locales.dlgPoiCategoriesCancelBtnLabel,listeners:{click:'onCloseWindowClick'}},'->',{text:Bigmedia.Locales.dlgPoiCategoriesCreateBtnLabel,reference:'btnCreateFilter',listeners:{click:'onCreateFilterClick'}}],listeners:{show:'onShowView'},showDialog:function(a){this.cbPoiTag=a;this.show()}});Ext.define('Bigmedia.view.dialog.DlgImportThirdpartyFacesController',{extend:Ext.app.ViewController,alias:'controller.dialog-dlgimportthirdpartyfaces',onShowView:function(b){var a=this;if(Bigmedia.Vars.getSalt()){a.getViewModel().set('savepriceoption','2');a.getViewModel().set('savepriceglobaldisable',!1);a.getViewModel().set('savepricepasswordglobal',!1)}else {a.getViewModel().set('savepricepasswordglobal',!0);a.getViewModel().set('savepriceglobaldisable',!0)}a.validateForm()},onCancelClick:function(){this.getView().hide()},validateForm:function(){var b=this,a=b.lookupReference('btnImport'),c=b.lookupReference('numbers');var d=c.getValue().split(/[\s,;\n]+/);if(d.length>0){a.enable()}else {a.disable()}},onImportClick:function(){var a=this,b=a.getView(),c=b.getViewModel(),g=a.lookupReference('numbers'),k=a.lookupReference('seldatebeg'),l=a.lookupReference('seldateend'),d=b.getCallbackImport(),n=b.getCallbackScope(),i=a.lookupReference('chbsideno'),j=i.getValue()?'supplierNo':'doorsNo',h=c.get('savepriceoption'),f=c.get('savepricepassword'),e=c.get('savepricepasswordglobal'),o={linkField:j,savepriceoption:h,savepricepassword:f,savepricepasswordglobal:e};if(d){var m=g.getValue();Ext.callback(d,n,[k.getValue(),l.getValue(),m,o])}b.hide()}});Ext.define('Bigmedia.view.dialog.DlgImportThirdpartyFaces',{extend:Ext.window.Window,controller:'dialog-dlgimportthirdpartyfaces',viewModel:{savepriceoption:'1',savepricepassword:null,savepriceglobaldisable:!1,savepricepasswordglobal:!1,sideNo:'sideNo',doorsNo:null,startDate:null,endDate:null},config:{callbackImport:null,callbackScope:null,startDate:null,endDate:null},updateStartDate:function(a){this.getViewModel().set('startDate',a)},updateEndDate:function(a){this.getViewModel().set('endDate',a)},width:500,minWidth:400,height:600,minHeight:380,modal:!0,hidden:!0,autoDestroy:!1,autoShow:!1,closeAction:'hide',title:Bigmedia.Locales.dlgImportThirdPartyTitle,referenceHolder:!0,layout:'vbox',padding:10,items:[{xtype:'fieldset',width:'100%',title:Bigmedia.Locales.dlgCustomPeriodPeriod,layout:'hbox',defaults:{format:'d.m.Y',minDate:new Date(Date.now()+86400000),maxDate:new Date(Date.now()+86400000*365)},items:[{xtype:'datefield',reference:'seldatebeg',flex:1,filedLabel:Bigmedia.Locales.dlgCustomPeriodFrom,value:new Date(Date.now()+86400000),listeners:{change:'validateForm'},validator:function(d){var a=Ext.Date.parse(d,this.format),c=Bigmedia.Locales.dlgCustomPeriodBegErrMsg,b=this.up('window').lookupReference('seldateend');if(a&&+a<=+b.getValue()){b.clearInvalid();return !0}return c}},{xtype:'datefield',reference:'seldateend',flex:1,filedLabel:Bigmedia.Locales.dlgCustomPeriodTo,value:new Date(Date.now()+86400000*31),listeners:{change:'validateForm'},validator:function(d){var a=Ext.Date.parse(d,this.format),c=Bigmedia.Locales.dlgCustomPeriodEndErrMsg,b=this.up('window').lookupReference('seldatebeg');if(a&&+a>=+b.getValue()){b.clearInvalid();return !0}return c}}]},{xtype:'radiogroup',padding:'0 10',fieldLabel:Bigmedia.Locales.dlgImportPricesBindingColumnLabel,columns:2,vertical:!0,width:'100%',labelWidth:180,items:[{boxLabel:Bigmedia.Locales.dlgFilterByNumberSideNoLabel,reference:'chbsideno',inputValue:'sideNo',bind:{value:'{sideNo}'},checked:!0,listeners:{change:'validateForm'}},{boxLabel:Bigmedia.Locales.dlgFilterByNumberDoorsNoLabel,reference:'chbdoorsno',inputValue:'doorsNo',bind:{value:'{doorsNo}'}}]},{xtype:'textarea',reference:'numbers',emptyText:Bigmedia.Locales.dlgImportThirdPartyNumbersEmpty,width:'100%',listeners:{change:'validateForm'},flex:1},{xtype:'radiogroup',bind:'{savepriceoption}',vertical:!0,simpleValue:!0,items:[{boxLabel:'Do not save price',name:'sp',inputValue:'1',checked:!0},{boxLabel:'Save using global password',name:'sp',inputValue:'2',bind:{disabled:'{savepriceglobaldisable}'}},{boxLabel:'Input special password',name:'sp',inputValue:'3'}]},{xtype:'textfield',bind:{hidden:'{savepriceoption != "3"}',value:'{savepricepassword}'},width:'100%',validator:function(b){var a='    ';return this.isHidden()||!!b?!0:a}},{xtype:'checkbox',bind:{hidden:'{savepriceoption != "3"}',value:'{savepricepasswordglobal}'},fieldLabel:'Save as global password'}],buttons:[{text:Bigmedia.Locales.btnCancelText,listeners:{click:'onCancelClick'}},'->',{text:Bigmedia.Locales.btnImportThirdPartyText,reference:'btnImport',listeners:{click:'onImportClick'}}],listeners:{show:'onShowView'}});Ext.define('Bigmedia.view.dialog.DlgKyivstarData',{extend:Bigmedia.view.dialog.MaterialDialog,xtype:'dlgksdata',viewModel:{data:{}},closeAction:'hide',referenceHolder:!0,title:' Kyivstar',layout:{type:'vbox',align:'stretch'},tbar:[{xtype:'button',text:' ',handler:function(j){var d=j.up('window'),i=d.lookup('treepanel'),f=detPublished.lookupReference('windowForm'),l=f.getForm(),m=detPublished.getViewModel();var h=i.getChecked();var a={daysOfWeek:[],hours:[],groups:[]};var c=[],b=[],g=[],e=!1,k=!1;Ext.Array.each(h,function(d){if(a[d.get('group')]){a[d.get('group')].push(d.get('code'))}else {if(d.get('group')=='age'){c.push(d.get('code'))}if(d.get('group')=='incomeLevel'){b.push(d.get('code'))}if(d.get('group')=='columns'){g.push(d.get('code'))}if(d.get('code')=='considermarketshare'){e=!0}}});c.forEach(c=>{b.forEach((b,d)=>{a.groups.push(c+' '+b)})});fetch('/api/v1/ksdata',{method:'POST',cache:'no-cache',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify(a)}).then(a=>a.json()).then(b=>{var a=Ext.getStore('Faces');a.beginUpdate();Ext.suspendLayouts();a.suspendEvents();try{b.forEach(c=>{var d=a.getById(c.id_face);if(d){d.set({cnt_only_home:c.cnt_only_home,cnt_only_work:c.cnt_only_work,cnt_home_work:c.cnt_home_work,cnt_transit:c.cnt_transit,cnt_all_subs:c.cnt_all_subs,cnt_home_general:c.cnt_home_general,cnt_work_general:c.cnt_work_general})}});d.recalcKSData()}catch(n){}finally{a.resumeEvents();Ext.resumeLayouts(!0);a.endUpdate()}});fetch('/api/v1/ksdata/polygons',{method:'POST',cache:'no-cache',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify(a)}).then(a=>a.json()).then(b=>{var a=Ext.getStore('KSPolygons');a.beginUpdate();Ext.suspendLayouts();a.suspendEvents();try{b.forEach(c=>{var d=a.getById(c.id);if(d){d.set({cnt_transit_male:c.cnt_transit_male,cnt_transit_female:c.cnt_transit_female,cnt_transit:c.cnt_transit})}else {a.add(c)}})}catch(n){console.error(n)}finally{a.resumeEvents();Ext.resumeLayouts(!0);a.endUpdate();a.fireEvent('endupdate')}})}}],recalcKSData:function(){var f=this,e=f.lookup('treepanel');var d=e.getChecked();var c=[],b=!1;Ext.Array.each(d,function(a){if(a.get('group')=='columns'){c.push(a.get('code'))}if(a.get('code')=='considermarketshare'){b=!0}});var a=Ext.getStore('Faces');a.beginUpdate();Ext.suspendLayouts();a.suspendEvents();try{a.getDataSource().each(d=>{var a=c.reduce((a,b)=>{return a+ +d.get(b)},0);if(b){a=Math.round(a/0.45)}if(!a){a=null}d.set('ks',a)})}catch(g){console.error(g)}finally{a.resumeEvents();Ext.resumeLayouts(!0);a.endUpdate()}},items:[{xtype:'treepanel',reference:'treepanel',checkPropagation:'both',rootVisible:!1,width:'100%',flex:1,store:'KSParamsTree',listeners:{checkchange:function(a,c){var b=this.up('window');if(a.get('group')=='sex'||a.get('group')=='columns'||a.get('code')=='considermarketshare'){b.recalcKSData()}}}}]});Ext.define('Bigmedia.view.dialog.DlgLogin',{extend:Ext.window.Window,xtype:'dialog-login',viewModel:{data:{username:null,password:null,isSignup:!1}},title:Bigmedia.Locales.dlgLoginTitle,frame:!0,width:320,closable:!0,bodyPadding:10,items:[{xtype:'form',defaultType:'textfield',items:[{allowBlank:!1,fieldLabel:Bigmedia.Locales.fieldLoginLabel,name:'username',bind:{value:'{username}'},maskRe:/[\d\.@a-zA-Z_]/i,invalidText:Bigmedia.Locales.dlgRegisterLoginErrMsg,emptyText:'login'},{allowBlank:!1,fieldLabel:Bigmedia.Locales.fieldPasswordLabel,name:'password',itemId:'password',bind:{value:'{password}'},emptyText:'password',inputType:'password'}],buttons:[{text:Bigmedia.Locales.btnCancelText,handler:function(a){var b=a.up('window');b.close()}},{text:Bigmedia.Locales.btnSaveText,formBind:!0,handler:function(d){var c=d.up('window'),a=c.getViewModel(),b;if(a.get('isSignup')){b='/api/v1/auth/local/signup'}else {b='/api/v1/auth/local/login'}Ext.Ajax.request({url:b,params:{username:a.get('username'),password:a.get('password')},success:function(a){Bigmedia.Vars.loadUser();Ext.toast(Bigmedia.Locales.dlgLoginSuccessToastText);c.close()},failure:function(){var b;if(a.get('isSignup')){b=Bigmedia.Locales.dlgLoginErrorIsSignupAlertMsg}else {b=Bigmedia.Locales.dlgLoginErrorAlertMsg}Ext.Msg.alert(Bigmedia.Locales.dlgLoginErrorAlertTitle,b)}})}}],defaults:{anchor:'100%',labelWidth:120}}]});Ext.define('Bigmedia.view.dialog.DlgLoginCreate',{extend:Ext.window.Window,xtype:'dialog-logincreate',viewModel:{data:{username:null,password:null,isSignup:!0}},title:Bigmedia.Locales.dlgLoginTitle,frame:!0,width:320,closable:!0,bodyPadding:10,items:[{xtype:'form',defaultType:'textfield',items:[{allowBlank:!1,fieldLabel:Bigmedia.Locales.fieldLoginLabel,name:'username',bind:{value:'{username}'},maskRe:/[\d\.@a-zA-Z_]/i,invalidText:Bigmedia.Locales.dlgRegisterLoginErrMsg,emptyText:'login'},{allowBlank:!1,fieldLabel:Bigmedia.Locales.fieldPasswordLabel,name:'password',itemId:'password',bind:{value:'{password}'},emptyText:'password',inputType:'password',listeners:{validitychange:function(a){a.next().validate()},blur:function(a){a.next().validate()}}},{allowBlank:!1,fieldLabel:Bigmedia.Locales.fieldConfirmPasswordLabel,name:'confirmpassword',initialPassField:'password',bind:{hidden:'{!isSignup}'},emptyText:'password',inputType:'password',vtype:'password'}],buttons:[{text:Bigmedia.Locales.btnCancelText,handler:function(a){var b=a.up('window');b.close()}},{text:Bigmedia.Locales.btnSaveText,formBind:!0,handler:function(d){var c=d.up('window'),a=c.getViewModel(),b;if(a.get('isSignup')){b='/api/v1/auth/local/signup'}else {b='/api/v1/auth/local/login'}Ext.Ajax.request({url:b,params:{username:a.get('username'),password:a.get('password')},success:function(a){Bigmedia.Vars.loadUser();Ext.toast(Bigmedia.Locales.dlgLoginSuccessToastText);c.close()},failure:function(){var b;if(a.get('isSignup')){b=Bigmedia.Locales.dlgLoginErrorIsSignupAlertMsg}else {b=Bigmedia.Locales.dlgLoginErrorAlertMsg}Ext.Msg.alert(Bigmedia.Locales.dlgLoginErrorAlertTitle,b)}})}}],defaults:{anchor:'100%',labelWidth:120}}]});Ext.define('Bigmedia.view.dialog.DlgPriceEncryption',{extend:Ext.window.Window,closable:!0,closeAction:'destroy',title:' ',width:400,height:240,minWidth:300,minHeight:140,layout:'fit',resizable:!0,modal:!0,defaultFocus:'name',closeAction:'destroy',referenceHolder:!0,config:{hideSaveGlobal:!1},viewModel:{data:{pwd:'',isGlobal:!1,savePwd:!0,hideSaveGlobal:!1}},updateHideSaveGlobal:function(a){this.getViewModel().set('hideSaveGlobal',a)},items:[{xtype:'form',reference:'windowForm',layout:{type:'vbox',align:'stretch'},border:!1,bodyPadding:10,fieldDefaults:{msgTarget:'side',labelAlign:'top',labelWidth:100,labelStyle:'font-weight:bold'},items:[{xtype:'component',margin:'5 5 10 5',html:" /     .<br>      '     "},{xtype:'textfield',name:'pwd',itemId:'pwd',bind:{value:'{pwd}'},fieldLabel:' ',allowBlank:!1},{xtype:'checkbox',boxLabel:'   .  ,          .',bind:{value:'{isGlobal}',hidden:'{hideSaveGlobal}'}}],buttons:[{text:Bigmedia.Locales.btnCancelText,handler:function(a){a.up('window').close()}},{text:'OK',handler:function(b){var a=b.up('window'),d=b.up('window').lookupReference('windowForm'),e=d.getForm(),c=a.getViewModel();if(e.isValid()){a.fireEventArgs('success',[c.get('pwd'),c.get('isGlobal')]);a.close()}}}]}],listeners:{show:function(a){if(!Bigmedia.Vars.getSalt()){a.getViewModel().set('isGlobal',!0)}}}});Ext.define('Bigmedia.view.dialog.DlgPublishedCampaign',{extend:Ext.window.Window,xtype:'dialog-publishedcamp',viewModel:{data:{publishedCamp:null,password:null}},title:'Presentation properties',frame:!0,width:400,closable:!0,bodyPadding:10,closeAction:'hide',defaultType:'textfield',items:[{fieldLabel:'Name',emptyText:"Enter presentation's title",name:'name',bind:{value:'{publishedCamp.name}'}},{fieldLabel:'Description',emptyText:'',name:'note',bind:{value:'{publishedCamp.note}'}},{fieldLabel:'Feedback email',emptyText:'',name:'email',bind:{value:'{publishedCamp.email}'}}],buttons:[{text:Bigmedia.Locales.btnCancelText,handler:function(a){var b=a.up('window');b.close()}},{text:Bigmedia.Locales.btnSaveText,handler:function(g){var b=g.up('window'),f=b.getViewModel(),a=f.get('publishedCamp');if(a.store){a.store.on('update',function(){},{single:!0});a.store.sync()}else {var e=b.up('mainviewport'),d=e.down('campcard');var c=d.lookupViewModel().get('curCamp.publisheds');c.add(a);c.sync()}b.close()}}],listeners:{show:function(a){a.getViewModel().set('password',null)}},defaults:{anchor:'100%',labelWidth:120}});Ext.define('Bigmedia.view.dialog.DlgUserInfo',{extend:Ext.window.Window,xtype:'dialog-userinfo',viewModel:{data:{user:null}},title:Bigmedia.Locales.dlgUserInfoTitle,frame:!0,width:320,closable:!0,bodyPadding:10,defaultType:'textfield',items:[{fieldLabel:Bigmedia.Locales.fieldFirstNameLabel,emptyText:Bigmedia.Locales.fieldFirstNameEmptyText,name:'first',bind:{value:'{user.firstName}'}},{fieldLabel:Bigmedia.Locales.fieldLastNameLabel,emptyText:Bigmedia.Locales.fieldLastNameEmptyText,name:'last',bind:{value:'{user.lastName}'}},{xtype:'combobox',fieldLabel:Bigmedia.Locales.fieldCityLabel,name:'city',store:{type:'cities'},valueField:'id',displayField:'name',bind:{value:'{user.cityId}'},typeAhead:!0,queryMode:'local',emptyText:Bigmedia.Locales.fieldCityEmptyText},{fieldLabel:Bigmedia.Locales.fieldAddressLabel,emptyText:Bigmedia.Locales.fieldAddressEmptyText,name:'address',bind:{value:'{user.address}'}}],buttons:[{text:Bigmedia.Locales.btnCancelText,handler:function(a){var b=a.up('window');b.close()}},{text:Bigmedia.Locales.btnSaveText,handler:function(c){var a=c.up('window'),d=a.getViewModel(),b=Bigmedia.Vars.getUser();b.save({failure:function(b,a){Ext.Msg.alert(Bigmedia.Locales.dlgUserInfoErrorTitle,Bigmedia.Locales.dlgUserInfoErrorMsg)},success:function(d,b){a.close()}})}}],listeners:{show:function(b){var a=this.getViewModel();a.set('user',Bigmedia.Vars.getUser())}},defaults:{anchor:'100%',labelWidth:120}});Ext.define('Bigmedia.view.error.BlankPage',{extend:Ext.container.Container,xtype:'pageblank',anchor:'100% -1',layout:{type:'vbox',pack:'center',align:'center'},items:[{xtype:'box',cls:'blank-page-container',html:"<div class='fa-outer-class'><span class='x-fa fa-clock-o'></span></div><h1>Coming Soon!</h1><span class='blank-page-text'>Stay tuned for updates</span>"}]});Ext.define('Bigmedia.view.error.ErrorBase',{extend:Ext.window.Window,controller:'authentication',autoShow:!0,cls:'error-page-container',closable:!1,title:'Bigmedia',titleAlign:'center',maximized:!0,modal:!0,layout:{type:'vbox',align:'center',pack:'center'}});Ext.define('Bigmedia.view.error.Error404Window',{extend:Bigmedia.view.error.ErrorBase,xtype:'page404',items:[{xtype:'container',width:400,cls:'error-page-inner-container',layout:{type:'vbox',align:'center',pack:'center'},items:[{xtype:'label',cls:'error-page-top-text',text:'404'},{xtype:'label',cls:'error-page-desc',html:'<div>Seems you\'ve hit a wall!</div><div>Try going back to our <a href="#faces"> Home page </a></div>'},{xtype:'tbspacer',flex:1}]}]});Ext.define('Bigmedia.view.error.Error500Window',{extend:Bigmedia.view.error.ErrorBase,xtype:'page500',items:[{xtype:'container',width:600,cls:'error-page-inner-container',layout:{type:'vbox',align:'center',pack:'center'},items:[{xtype:'label',cls:'error-page-top-text',text:'500'},{xtype:'label',cls:'error-page-desc',html:'<div>Something went wrong and server could not process your request.</div>'+'<div>Try going back to our <a href="#faces"> Home page </a></div>',listeners:{element:'el',delegate:'a',click:function(a){},scope:this}},{xtype:'tbspacer',flex:1}]}]});Ext.define('Bigmedia.view.field.PeriodFilterTagController',{extend:Ext.app.ViewController,alias:'controller.field-periodfiltertag',filterChanged:!1,suppressRefresh:!1,newPeriodFilterClick:function(){var a=this,b=a.getView().findParentByType('mainviewport');if(b){b.dlgCustomPeriod.showDialog(a.getView())}},onBeforeTagExpand:function(){var a=this,b=a.getView();if(a.filterChanged){a.syncAll();b.getPicker().refresh()}},onTargetStoreDataChanged:function(){console.log('targetstorechanged');var a=this,b=a.getView();if(!b.targetStore.isSorting&&!a.suppressRefresh){a.filterChanged=!0;if(b.getValue().length>0){a.syncVisible();b.updateValue()}}a.suppressRefresh=!1},onTagValueChanged:function(b,d,f,g){var c=this;if(d!==f){var e=b.targetStore,i=b.getStore();if(d.length>0){if(f.length>0){c.suppressRefresh=!0;e.removeFilter('filter'+b.filterField,!0)}var a=[];d.forEach(function(c){rec=i.getById(c);if(rec&&rec.get('faces')){a=a.concat(Object.keys(rec.get('faces')))}});a=a.map(function(a){return +a});var h=new Ext.util.Filter({property:'id',id:'filter'+b.filterField,operator:'in',value:a});if(g){c.suppressRefresh=!1;c.forceRefresh=!0}e.addFilter(h)}else {c.suppressRefresh=!0;e.removeFilter('filter'+b.filterField)}}},initTotal:function(){var i=this,h=i.getView(),j=h.getStore(),g=h.targetStore,d=new Date(),c=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate()+1)),e=[c.getUTCDate(),c.getUTCMonth()+1,c.getUTCFullYear()],a={};var f=function(c,b,e){mem=this;mem.day=e||1;mem.month=b>12?b-12:b;mem.year=b>12?c+1:c;mem.days=(new Date(Date.UTC(c,b,0))).getUTCDate()-mem.day+1;mem.emptyDays=mem.days-mem.day+1;mem.free=0;var d=/([ft]+)/g;mem.execOcc=function(g){var h=mem.days;var f=g.slice(0,h);var a;if(f.matchAll){a=Array.from(f.matchAll(/([ft]+)/g))}else {var i;a=[];while(i=d.exec(f)){a.push(i[1])}}mem.free=a.reduce(function(d,a){return d>=a.length?d:a.length},0);return g.slice(h)};mem.saveMonth=function(d,g){if(a[mem.year+'_'+mem.month]){a[mem.year+'_'+mem.month].totalCount++;a[mem.year+'_'+mem.month].addCount++;a[mem.year+'_'+mem.month].faces[d]=d}else {var f={};f[d]=d;a[mem.year+'_'+mem.month]={name:Ext.Date.monthNames[mem.month%12?mem.month%12-1:11]+'&#39;'+mem.year.toString().slice(-2),totalCount:1,addCount:1,faces:f}}}};var b=g.getData();if(b.filtered){b=b.getSource()}b.each(function(c){var b=c.get('occByDays'),d=g.getData().isItemFiltered(c);if(b){var a=new f(+e[2],+e[1],+e[0]);while(b.length>0){b=a.execOcc(b);if(a.free>0){a.saveMonth(c.getId(),d)}a=new f(a.year,a.month+1)}}});j.loadRawData(Object.values(a));i.filterChanged=!1},syncVisible:function(){var f=this,c=f.getView(),d=c.getStore(),e=c.targetStore,b=c.getValue(),a={};if(b.length==0){return}e.each(function(c){b.forEach(function(b){var e=d.getById(b);if(!e){}else {var f=e.get('faces');if(f&&f[c.id]){if(!a[b]){a[b]=1}else {a[b]++}}}})});b.forEach(function(b){var c=d.getById(b);if(c){c.set('addCount',a[b])}})},syncAll:function(){var g=this,d=g.getView(),f=d.targetStore,b=d.getStore();if(f.getData().filtered){var a=f.getData().getFilters().clone();if(a.get('filter'+d.filterField)){a.removeByKey('filter'+d.filterField)}if(a.length==0){Ext.destroy(a);b.each(function(a){a.set('addCount',a.get('totalCount'))})}else {var e=f.getData().getSource().clone();e.setFilters(a);var c={};b.each(function(a){if(!c[a.id]){c[a.id]=0}var b=a.get('faces');if(b){Object.keys(b).forEach(function(b){if(e.find('id',b)){c[a.id]++}})}});b.each(function(a){a.set('addCount',c[a.id])});Ext.destroy(e);Ext.destroy(a)}}else {b.each(function(a){a.set({addCount:a.get('totalCount')})})}}});Ext.define('Bigmedia.view.field.PeriodFilterTagModel',{extend:Ext.app.ViewModel,alias:'viewmodel.field-periodfiltertag',data:{name:'Bigmedia'}});Ext.define('Bigmedia.view.field.PeriodFilterTag',{extend:Ext.form.field.Tag,controller:'field-periodfiltertag',viewModel:{type:'field-periodfiltertag'},xtype:'periodtag',config:{filterField:null,targetStore:null},store:new Ext.data.Store({model:Bigmedia.model.Period}),triggers:{newPeriod:{cls:'newpoifilter-trigger',weight:-1,handler:function(){this.getController().newPeriodFilterClick()}}},hideTrigger:!1,queryMode:'local',triggerOnClick:!0,filterField:'period',displayField:'name',valueField:'id',filterPickList:!0,publishes:'value',labelTpl:new Ext.XTemplate('{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl>',{disableFormats:!0}),tipTpl:new Ext.XTemplate('{descr} '+Bigmedia.Locales.refTagTip,{disableFormats:!0}),tpl:new Ext.XTemplate('<ul class="x-list-plain"><tpl for=".">','<li role="option" class="x-boundlist-item <tpl if="addCount &lt;= 0">x-boundlist-item-disabled</tpl>">{name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">{addCount}</span></tpl></li>','</tpl></ul>',{disableFormats:!0}),updateTargetStore:function(b,c){var a=this;if(c){c.removeListener('add',a.getController().onTargetStoreDataChanged);c.removeListener('remove',a.getController().onTargetStoreDataChanged)}if(b){b.addListener('add',a.getController().onTargetStoreDataChanged,a.getController());b.addListener('remove',a.getController().onTargetStoreDataChanged,a.getController())}a.getController().initTotal()},initComponent:function(){this.onBefore('expand','onBeforeTagExpand',this.getController());this.callParent([arguments])},listeners:{beforeselect:function(b,a){return a.get('addCount')>0},change:'onTagValueChanged'}});Ext.define('Bigmedia.view.field.PoiSearchCombo',{extend:Ext.form.field.ComboBox,xtype:'poisearchcombobox',queryParam:'pname',typeAhead:!0,hideTrigger:!0,queryMode:'remote',minChars:4,triggerOnClick:!1,displayField:'name',valueField:'id',publishes:'value',store:{type:'poisearch'},setTargetGrid:function(a){this.targetGrid=a},setFilterField:function(a){this.filterField=a},initTag:function(){this.labelTpl=new Ext.XTemplate('{name}<tpl if="subCount &gt; 0"><span class="tagfield-badge">-{subCount}</span></tpl>',{disableFormats:!0});this.tipTpl=new Ext.XTemplate(Bigmedia.Locales.refTagTip,{disableFromats:!0});this.tpl=new Ext.XTemplate('<ul class="x-list-plain"><tpl for=".">','<li role="option" class="x-boundlist-item <tpl if="addCount &lt;= 0">x-boundlist-item-disabled</tpl>">{category}: {name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">+{addCount}</span></tpl></li>','</tpl></ul>',{disableFormats:!0});var a=this;Ext.getCmp(a.targetGrid).onAfter('datachanged',function(){if(!Ext.getCmp(a.targetGrid).isSorting){a.filterChanged=!0;a.syncTag()}})},syncTag:function(){if((this.forceRefresh||this.getRawValue()!=='')&&!this.suppressRefresh){this.recalcRefData()}this.forceRefresh=!1;if(!this.suppressRefresh){this.updateValue()}this.suppressRefresh=!1},initComponent:function(){this.onBefore('expand',this.beforeExpand);this.callParent([arguments])},beforeExpand:function(){},recalcRefData:function(){var f=this;var a=Ext.getCmp(f.targetGrid).getStore();var g=this.getStore();if(a.getData().filtered){var e=a.getData().getSource().clone();var c={},d={};var b=a.getData().getFilters().clone();if(b.get('filter'+f.filterField)){b.removeByKey('filter'+f.filterField)}e.setFilters(b);e.each(function(b){if(a.getData().find('id',b.get('id'))){if(!d[b.get('id')]){d[b.get('id')]=1}else {d[b.get('id')]++}}if(!c[b.get('id')]){c[b.get('id')]=1}else {c[b.get('id')]++}});b.destroy();e.destroy()}if(g){g.getData().getSource().each(function(b){var e=0,f=0;if(a.getData().filtered){var g=b.get('faces');g.forEach(function(a){if(c[a]){e++}if(d[a]){f++}})}else {e=b.get('totalCount')||0;f=b.get('totalCount')||0}b.set({addCount:e,subCount:f},{commit:!0,silent:!0})})}this.filterChanged=!1},listeners:{keypress:function(a,c,b){},beforeselect:function(b,a){return a.get('addCount')>0},change:function(a,b,d){if(b!==d){if(b.length>0){var g=Ext.getCmp(a.targetGrid).getStore();if(d.length>0){a.suppressRefresh=!0;g.removeFilter('filter'+a.filterField,!0)}var f=this.getStore();var c=[];b.forEach(function(g){var e=f.getById(g);if(e){c=c.concat(e.get('faces'))}});var e=new Ext.util.Filter({property:'id',id:'filter'+a.filterField,operator:'in',value:c});a.suppressRefresh=!0;Ext.getCmp(a.targetGrid).getStore().addFilter(e)}else {a.suppressRefresh=!0;Ext.getCmp(a.targetGrid).getStore().removeFilter('filter'+a.filterField)}}}}});Ext.define('Bigmedia.view.field.PoiTag',{extend:Bigmedia.view.field.RefTag,xtype:'poitag',ref_name:'poi',targetGrid:'',filterField:'poi',labelWidth:60,displayField:'name',valueField:'id',filterPickList:!0,publishes:'value',filterChanged:!0,suppressRefresh:!1,forceRefresh:!1,store:{fields:['id','name','descr',{name:'totalCount',type:'int',defaultValue:'0'},{name:'addCount',type:'int',defaultValue:'0'},{name:'subCount',type:'int',defaultValue:'0'}],data:[]},labelTpl:new Ext.XTemplate('{name}<tpl if="subCount &gt; 0"><span class="tagfield-badge">-{subCount}</span></tpl>',{disableFormats:!0}),tipTpl:new Ext.XTemplate('{descr}',{disableFromats:!0}),tpl:new Ext.XTemplate('<ul class="x-list-plain"><tpl for=".">','<li role="option" class="x-boundlist-item <tpl if="addCount &lt;= 0">x-boundlist-item-disabled</tpl>">{city}, {name}<tpl if="addCount &gt; 0"><span class="tagfield-badge">+{addCount}</span></tpl></li>','</tpl></ul>',{disableFormats:!0}),initTag:function(){var a=this;Ext.getCmp(a.targetGrid).onAfter('datachanged',function(){if(!Ext.getCmp(a.targetGrid).isSorting){a.filterChanged=!0;a.syncTag()}})},syncTag:function(){if((this.forceRefresh||this.getRawValue()!=='')&&!this.suppressRefresh){this.recalcRefData()}this.forceRefresh=!1;if(!this.suppressRefresh){this.updateValue()}this.suppressRefresh=!1},initComponent:function(){this.onBefore('expand',this.beforeExpand);this.callParent([arguments])},beforeExpand:function(){},recalcRefData:function(){var f=this;var a=Ext.getCmp(f.targetGrid).getStore();var g=this.getStore();if(a.getData().filtered){var e=a.getData().getSource().clone();var c={},d={};var b=a.getData().getFilters().clone();if(b.get('filter'+f.filterField)){b.removeByKey('filter'+f.filterField)}e.setFilters(b);e.each(function(b){if(a.getData().find('id',b.get('id'))){if(!d[b.get('id')]){d[b.get('id')]=1}else {d[b.get('id')]++}}if(!c[b.get('id')]){c[b.get('id')]=1}else {c[b.get('id')]++}});b.destroy();e.destroy()}if(g){g.getData().getSource().each(function(b){var e=0,f=0;if(a.getData().filtered){var g=b.get('faces');g.forEach(function(a){if(c[a]){e++}if(d[a]){f++}})}else {e=b.get('totalCount')||0;f=b.get('totalCount')||0}b.set({addCount:e,subCount:f},{commit:!0,silent:!0})})}this.filterChanged=!1},listeners:{beforeselect:function(b,a){return a.get('addCount')>0},change:function(a,b,d){if(b!==d){if(b.length>0){var g=Ext.getCmp(a.targetGrid).getStore();if(d.length>0){a.suppressRefresh=!0;g.removeFilter('filterpoi',!0)}var f=this.getStore();var c=[];b.forEach(function(g){var e=f.getById(g);if(e){c=c.concat(e.get('faces'))}});var e=new Ext.util.Filter({property:'id',id:'filterpoi',operator:'in',value:c});a.suppressRefresh=!0;Ext.getCmp(a.targetGrid).getStore().addFilter(e)}else {a.suppressRefresh=!0;Ext.getCmp(a.targetGrid).getStore().removeFilter('filterpoi')}}}}});Ext.define('Bigmedia.view.field.StreetSearchTagController',{extend:Ext.app.ViewController,alias:'controller.field-streetsearchtag',filterChanged:!1,suppressRefresh:!1,init:function(a){this.selStore=new Ext.data.Store({model:'Bigmedia.model.Street'})},listen:{store:{'#Streets':{load:'onStreetsLoad'}}},listeners:{targetstoreadd:function(){this.onTargetStoreDataChanged()},targetstoreremove:function(){this.onTargetStoreDataChanged()}},connectToStore:function(a){var c=this,d=c.getView();if(this.storeRelayers){Ext.destroy(this.storeRelayers);this.storeRelayers=null;var b=!0}this.storeRelayers=this.relayEvents(a,['add','remove'],'targetstore');if(b){this.syncAll()}},onStreetsLoad:function(c,e,b,d,f){if(!b){return}var a=this;a.selStore.each(function(a){c.add(a)});a.initTotal();if(a.getView().targetStore.getData().filtered){a.syncAll()}},onTargetStoreDataChanged:function(){var a=this,b=a.getView();if(!b.targetStore.isSorting&&!a.suppressRefresh){a.filterChanged=!0;if(b.getValue().length>0){a.syncVisible();b.updateValue()}}a.suppressRefresh=!1},onTagValueChanged:function(c,d,f){var a=this;a.selStore.each(function(b){var e=Ext.Array.some(d,function(a){return a==b.id});if(!e){a.selStore.remove(b)}});if(d!==f){var e=c.targetStore,h=c.getStore();if(d.length>0){if(f.length>0){a.suppressRefresh=!0;e.removeFilter('filter'+c.filterField,!0)}var b=[];d.forEach(function(g){var e=a.selStore.getById(g);if(!e){e=h.getById(g);a.selStore.add(e)}if(e&&e.get('faces')){b=b.concat(Object.keys(e.get('faces')))}});b=b.map(function(a){return +a});var g=new Ext.util.Filter({property:'id',id:'filter'+c.filterField,operator:'in',value:b});a.suppressRefresh=!0;e.addFilter(g)}else {a.suppressRefresh=!0;e.removeFilter('filter'+c.filterField)}}},initTotal:function(){var c=this,b=c.getView(),a=b.getStore();a.each(function(c){var b=c.get('faces'),a=0;if(b){a=Object.keys(b).length}c.set({totalCount:a,addCount:a},{commit:!0,silent:!1})})},syncVisible:function(){var f=this,c=f.getView(),d=c.getStore(),e=c.targetStore,b=c.getValue(),a={};if(b.length==0){return}e.each(function(c){b.forEach(function(b){var e=d.getById(b);if(!e){}else {var f=e.get('faces');if(f&&f[c.id]){if(!a[b]){a[b]=1}else {a[b]++}}}})});b.forEach(function(b){var c=d.getById(b);if(c){c.set('addCount',a[b])}})},syncAll:function(){var g=this,d=g.getView(),f=d.targetStore,b=d.getStore();if(f.getData().filtered){var a=f.getData().getFilters().clone();if(a.get('filter'+d.filterField)){a.removeByKey('filter'+d.filterField)}if(a.length==0){Ext.destroy(a);b.each(function(a){a.set('addCount',a.get('totalCount'))})}else {var e=f.getData().getSource().clone();e.setFilters(a);var c={};b.each(function(a){if(!c[a.id]){c[a.id]=0}var b=a.get('faces');if(b){Object.keys(b).forEach(function(b){if(e.find('id',b)){c[a.id]++}})}});b.each(function(a){a.set('addCount',c[a.id])});Ext.destroy(e);Ext.destroy(a)}}else {b.each(function(a){a.set({addCount:a.get('totalCount')})})}}});Ext.define('Bigmedia.view.grid.GridWrapperController',{extend:Ext.app.ViewController,alias:'controller.gridwrappercontroller',init:function(c){var a=this,e=a.getView(),d=e.child(),b=a.lookup('detface');a.callParent(c);d.setDetFace(b)},initParamsConfig:function(){var c=this,a=c.getView(),b=a.child();if(a.getStore()!==null){b.setStore(a.getStore())}if(a.getHideToolBar()!==null){b.setHideToolBar(a.getHideToolBar())}if(a.getHideStatusBar()!==null){b.setStatusBar(a.getHideStatusBar())}if(a.getShowPrice()!==null){b.setShowPrice(a.getShowPrice())}if(a.getShowAddToCart()!==null){b.setShowAddToCart(a.getShowAddToCart())}if(a.getShowDelete()!==null){b.setShowDelete(a.getShowDelete())}if(a.getMapView()!==null){b.setMapView(a.getMapView())}if(a.getShowSupplier()!==null){b.setShowSupplier(a.getShowSupplier())}}});Ext.define('Bigmedia.view.grid.GridWrapper',{xtype:'gridwrapper',extend:Ext.panel.Panel,controller:'gridwrappercontroller',config:{store:null,hideToolBar:null,hideStatusBar:null,showPrice:null,showAddToCart:null,showDelete:null,mapView:null,showSupplier:null},layout:'fit',getSelectionModel:function(){var a=this;return a.child().getSelectionModel()},updateStore:function(a){if(!a){return}var b=this;b.child().setStore(a)},listeners:{render:function(){var a=this;a.getController().initParamsConfig()}},items:[{xtype:'faces-grid'},{xtype:'detface',reference:'detface',title:'Face #',closeAction:'hide',hidden:!0,x:0,y:0,width:300,heigth:250,closable:!0}]});Ext.define('Bigmedia.view.main.MainContainerWrap',{extend:Ext.container.Container,xtype:'maincontainerwrap',scrollable:'y',layout:{type:'hbox',align:'stretchmax',animate:!0,animatePolicy:{x:!0,width:!0}},beforeLayout:function(){var a=this,b=Ext.Element.getViewportHeight()-64,c=a.getComponent('navigationTreeList');a.minHeight=b;c.setStyle({'min-height':b+'px'});a.callParent(arguments)}});Ext.define('Bigmedia.view.user.UserContainerWrapController',{extend:Ext.app.ViewController,alias:'controller.user-usercontainerwrap',onSaveClick:function(){this.getViewModel().get('currentCampaign').save()}});Ext.define('Bigmedia.view.user.UserContainerWrap',{extend:Ext.container.Container,xtype:'restrictedarea',config:{curCamp:null,pubCamp:null},controller:'user-usercontainerwrap',autoShow:!1,flex:1,layout:{type:'card',anchor:'100%'},updateCurCamp:function(b,a){var c=this;if(a&&(a.dirty||a.phantom)){Ext.Msg.show({title:Bigmedia.Locales.userContainerSaveCampaignConfirmTitle,message:Bigmedia.Locales.userContainerSaveCampaignConfirmMsg,buttons:Ext.Msg.YESNOCANCEL,icon:Ext.Msg.QUESTION,fn:function(d){if(d==='yes'){c.getViewModel().getStore('campaigns').sync();return b}else {if(d==='no'){c.getViewModel().getStore('campaigns').rejectChanges();return b}else {return}}}})}else {return b}}});Ext.define('Bigmedia.view.main.ViewportController',{extend:Ext.app.ViewController,alias:'controller.mainviewport',firstTime:!0,routes:{'faces/:filter':{before:'beforeFacesFiltered',action:'onFacesFiltered',conditions:{':filter':'([%a-zA-Z0-9\\-\\_]+)'}},'campaigns/:id':{before:'beforeShowCampaign',action:'onShowCampaign',conditions:{':id':'([%a-zA-Z0-9\\-\\_]+)'}},':node':{before:'handleUserAccessCheck',action:'onRouteChange',conditions:{':node':'([%a-zA-Z0-9\\-\\_\\s,\\.]+)'}}},listen:{store:{'#ShoppingCart':{add:'onShoppingCartChange',remove:'onShoppingCartChange',clear:'onShoppingCartChange'},'#Campaigns':{load:'onCampaignsLoad',update:'onCampaignsUpdate'}}},bindings:{onUserChange:'{user}',onCurCampChange:'{currentCampaign}',onDiscountGroupChanged:'{discountGroup}'},bulkAddPubPrices:function(h,g){var i=this,j=i.getViewModel(),f=j.get('curCamp'),d=f.get('publishedId'),b=[],a;if(h.get('cryptoHash')){a=Bigmedia.Vars.getPubPassphrase(d);if(!a){return}}Object.keys(g).forEach(function(e){var c=g[e],d='';if(a&&c){d=Bigmedia.Vars.encryptPrice(a,c);c=''}else {d=''}b.push('<proposal id="'+e+'" price_encrypted = "'+d+'" price = "'+c+'"></proposal>')});if(!b.length){return}var e=new FormData();e.append('proposals',b.join(''));var c=new XMLHttpRequest();c.onload=function(){f.proposals().load()};c.open('POST','/api/v1/published/campaigns/'+encodeURIComponent(d)+'/bulkAddPubPrices');c.send(e)},fillPubPricesByDiscountGroup:function(e){var c=this,f=c.getViewModel(),d=f.get('curCamp'),b={},a=Bigmedia.Vars.getCurrentRulesGroup();if(!a){return}d.proposals().each(c=>{if(c.get('netCost')){var d=a.getFaceMonthClientPrice({faceId:c.get('faceId'),netCost:c.get('netCost')});if(d){b[c.getId()]=d}}});c.bulkAddPubPrices(e,b)},onCampaignsUpdate:function(g,c,f,a){var d=this,e=d.getViewModel(),b=e.get('curCamp');if(a&&a.indexOf('publishedId')>=0){if(c.getId()===b.getId()&&b.get('publishedId')){}}},syncUseEncriptionFlag:function(){var b=this,e=b.getViewModel(),a=e.get('curCamp');var d=a&&!a.phantom?a.getId():null;var c=!!Bigmedia.Vars.getSalt(d);b.getViewModel().set('useEncryption',c)},onDiscountGroupChanged:function(b){var e=this,f=e.getViewModel(),a=f.get('curCamp'),c=b?b.getId():null;if(!Bigmedia.Vars.getUser()){return}if(b!==Bigmedia.Vars.getCurrentRulesGroup()){Bigmedia.Vars.setCurrentRulesGroup(b)}if(a&&(!a.get('params')||a.get('params').discountId!==c)){var d=a.get('params')?Ext.clone(a.get('params')):{};d.discountId=c;a.set('params',d)}},onMyCampaignsClick:function(){var a=this;if(!a.selCampDlg){a.selCampDlg=Ext.create('Bigmedia.view.dialog.DlgSelectCampaign',{closeAction:'hide',modal:!0,listeners:{selectcampaign:function(b){a.getViewModel().set('curCamp',b)}}})}a.selCampDlg.setCurCamp(a.getViewModel().get('curCamp'));a.selCampDlg.show()},onShowMonitoring:function(k){var a=this,e=a.getReferences(),c=e.mainCardPanel,g=c.getLayout(),b=a.getViewModel(),d=b.getData(),h=d.currentView,j=Bigmedia.Vars.getUser(),f=a.getRestrictedArea(),i},beforeShowMonitoring:function(c,b){var f=this,e=Bigmedia.app,a='showMonitoringCard',d=Bigmedia.Vars.getUser()},onCurCampChange:function(b){var a=this,d=a.getViewModel(),c=null;b.proposals().on('add',a.onAddProposals,a);b.campPois().on('add',a.onAddPois,a);b.campPois().on('update',a.onUpdatePois,a);b.campPois().on('remove',a.onRemovePois,a);if(b.phantom){a.syncInCartField(b.proposals());d.set('pubCamp',null)}else {b.proposals().on('load',a.syncInCartField,a);a.loadPublishedCampaign(b)}if(b.get('discountId')){var e=Ext.getStore('RulesGroups');c=e.getById(b.get('discountId'))}d.set('discountGroup',c);a.syncUseEncriptionFlag()},makePublished:function(){var a=this.getViewModel().get('curCamp'),b=Bigmedia.Vars.getUser();var c=new Bigmedia.model.Published({campaignId:a.get('id'),name:a.get('name'),startDate:a.get('startDate'),endDate:a.get('endDate'),email:b.get('email'),ownerId:b.get('id')});this.showDetPublished(c)},bulkAddPubPrices:function(g){var d=this,e=d.getViewModel().get('curCamp'),f=d.getViewModel().get('pubCamp'),b=[],h;g.forEach(function(a){b.push('<proposal id="'+a.id+'" price_encrypted = "'+a.pubPriceEnc+'" price = "'+a.pubPrice+'"></proposal>')});var c=new FormData();c.append('proposals',b.join(''));var a=new XMLHttpRequest();a.onload=function(){e.proposals().load()};a.open('POST','/api/v1/published/campaigns/'+encodeURIComponent(f.getId())+'/bulkAddPubPrices');a.send(c)},updatePubPricesByDiscountGroup:function(){var e=this,f=e.getViewModel(),g=f.get('curCamp'),a=f.get('pubCamp'),c=[],d=Bigmedia.Vars.getCurrentRulesGroup(),b;if(a.get('cryptoHash')){b=Bigmedia.Vars.getPubPassphrase(a.getId());if(!b){return}}g.proposals().each(f=>{var e={id:f.getId()};if(a&&f.get('netCost')&&d){var g=d.getFaceMonthClientPrice({faceId:f.get('faceId'),netCost:f.get('netCost')});if(a.get('cryptoHash')){if(b){e.pubPriceEnc=Bigmedia.Vars.encryptPrice(b,g);e.pubPrice=''}}else {e.pubPrice=g;e.pubPriceEnc=''}}c.push(e)});e.bulkAddPubPrices(c)},showDetPublished:function(b){var a=this,e=a.getView(),d=a.getViewModel();var c=new Bigmedia.view.det.DetPublishedCampaign({reference:'detPublished',campaignId:b.getId(),publishedId:b.get('publishedId'),modal:!0,listeners:{save:function(c){a.loadPublishedCampaign(d.get('curCamp'),a.updatePubPricesByDiscountGroup)}}});c.show()},loadPublishedCampaign:function(c,b){var a=this,e=a.getView(),d=a.getViewModel();if(a.view.publishedCamps){a.view.publishedCamps.destroy()}a.view.publishedCamps=new Ext.data.Store({model:'Bigmedia.model.Published',proxy:{type:'rest',url:'/api/v1/campaigns/'+encodeURIComponent(c.getId())+'/published',limitParam:null,pageParam:'',startParam:'',writer:{writeAllFields:!0}},autoLoad:!0,listeners:{load:function(f){var e=f.first();d.set('pubCamp',e);if(b){Ext.callback(b,a,[e])}}}})},syncInCartField:function(c){var a=Ext.getStore('Faces');if(!a){return}var e=a.getDataSource(),d=c.getDataSource();var b={};d.each(a=>b[a.get('faceId')]=a.get('faceId'));a.beginUpdate();e.each(a=>{a.set('inCart',!!b[a.getId()])});a.endUpdate()},saveCurCamp:function(c,e){var f=this,d=f.getViewModel(),a=d.get('curCamp'),b=d.get('user');if(!b.isRegistered()){return}if(a.phantom){a.set({clientId:b.get('orgId'),managerId:b.get('defaultManagerId')})}a.save({callback:function(d,a,b){if(c){Ext.callback(c,e,[d,a,b])}},failure:function(b,a){console.log('Error during save campaign')}})},bulkPoiOperation:function(h,f,b,e){function getQuoted(c,a){return a===null||a===undefined?'':' '+c.toString()+'="'+a.toString().replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&apos;').replace(/</g,'&lt;').replace(/>/g,'&gt;')+'"'}function objtoxml(c,a){return '<'+a+Object.keys(c).map(function(d){return getQuoted(d,c[d])}).join('')+'></'+a+'>'}var j=this,k=j.getViewModel(),g=k.get('curCamp'),i='/api/v1/campaigns/'+encodeURIComponent(g.getId())+'/'+f,c=[];h.forEach(function(a){if(a.getData){c.push(objtoxml(a.getData({persist:!0,serialize:!0}),'poi'))}else {c.push(objtoxml(a,'poi'))}});var d=new FormData();d.append('pois',c.join(''));var a=new XMLHttpRequest();a.open('POST',i,!0);a.onload=function(c){if(a.status>=200&&a.status<300){if(b){Ext.callback(b,e,[{success:!0}])}}else {if(b){Ext.callback(b,e,[{success:!1,error:a.status}])}console.log('Error '+a.status+' occurred when trying to remove pois')}};a.send(d)},onRemovePois:function(f,c){var a=this,b=a.getViewModel(),e=b.get('curCamp'),d=b.get('user');if(!d.isRegistered()){return}a.bulkPoiOperation(c,'bulkDeletePois',function(a){if(a&&a.success){Bigmedia.Vars.showToast("' ")}else {Bigmedia.Vars.showToast('    ')}})},onUpdatePois:function(h,b,e,a){var c=this,d=c.getViewModel(),g=d.get('curCamp'),f=d.get('user');if(a&&a.indexOf('campaignId')>=0){return}if(!f.isRegistered()||e!==Ext.data.Model.EDIT){return}c.bulkPoiOperation([b],'bulkUpdatePois',function(c){if(c&&c.success){b.commit();Bigmedia.Vars.showToast(' ')}else {Bigmedia.Vars.showToast('      ')}})},onAddPois:function(f,c){var a=this,d=a.getViewModel(),b=d.get('curCamp'),e=d.get('user');if(!e.isRegistered()){return}if(b.phantom&&c.length>0){a.saveCurCamp(function(g,e,d){if(d){a.bulkPoiOperation(c,'bulkAddPois',function(a){if(a&&a.success){Bigmedia.Vars.showToast(' ');b.campPois().load()}else {Bigmedia.Vars.showToast('      ')}})}},a)}else {a.bulkPoiOperation(c,'bulkAddPois',function(a){if(a&&a.success){Bigmedia.Vars.showToast(' ');b.campPois().load()}else {Bigmedia.Vars.showToast('      ')}})}},onAddProposals:function(g,c){var b=this,d=b.getViewModel(),a=d.get('curCamp'),f=d.get('pubCamp'),e=d.get('user');if(!e.isRegistered()){return}if(a.phantom&&c.length>0){b.saveCurCamp(function(f,e,d){if(d){b.bulkSaveProposals(c,function(b){if(b&&b.success){Bigmedia.Vars.toastSuccess(' ');a.proposals().load(()=>a.proposals().fireEvent('saved'))}else {Bigmedia.Vars.toastFailure('      ')}})}else {Bigmedia.Vars.toastFailure('      ')}},b)}else {b.bulkSaveProposals(c,function(b){if(b&&b.success){Bigmedia.Vars.toastSuccess(' ');a.proposals().load(()=>a.proposals().fireEvent('saved'))}else {Bigmedia.Vars.toastFailure('      ')}})}},onUserChange:function(d){var c=this,a=this.getViewModel().get('curCamp');if(d){Ext.getStore('Faces').load()}if(!a){return}var b=[];a.proposals().each(a=>{b.push(a.copy(null))});if(d.isRegistered()&&a.phantom&&b.length>0){a.set({clientId:Bigmedia.Vars.getUser().get('orgId'),managerId:Bigmedia.Vars.getUser().get('defaultManagerId')});Ext.getStore('Campaigns').on('write',()=>{c.bulkSaveProposals(b)},c,{single:!0});Ext.getStore('Campaigns').sync()}c.syncUseEncriptionFlag()},bulkSaveProposals:function(e,a){var f=this,d=f.getViewModel(),c=[],b=d.get('curCamp'),g=d.get('pubCamp'),h=Bigmedia.Vars.getCurrentRulesGroup(),i;e.forEach(b=>{var f=b.get('supplierPrice')?' price="'+b.get('supplierPrice').toString()+'"':'',d=b.get('supplierPriceEnc')?' price_encrypted="'+b.get('supplierPriceEnc').toString()+'"':'';var h=b.get('pubPrice')?' pub_price="'+b.get('pubPrice').toString()+'"':'',g=b.get('pubPriceEnc')?' pub_price_encrypted="'+b.get('pubPriceEnc').toString()+'"':'';c.push('<face date_beg="'+Ext.Date.format(Ext.Date.localToUtc(Ext.Date.clearTime(b.get('startDate'))),'Y-m-d')+'" date_end="'+Ext.Date.format(Ext.Date.localToUtc(Ext.Date.clearTime(b.get('endDate'))),'Y-m-d')+'" id="'+b.get('faceId')+'"'+f+d+h+g+'></face>')});Ext.Ajax.request({url:'/api/v1/campaigns/'+encodeURIComponent(b.getId())+'/bulkAddProposals',params:{faces:c.join(''),doorsNums:'',startDate:b.get('filterPeriod').startDate,endDate:b.get('filterPeriod').endDate},success:function(){if(a){a({success:!0})}},failure:function(){if(a){a({success:!1})}}})},onCampaignsLoad:function(b){var d=this,c=d.getView().getViewModel(),a=c.get('curCamp');if(Bigmedia.Vars.getUser().isRegistered()){if(a&&(a.phantom&&a.proposals().getCount()>0||a.dirty)){if(a.phantom){b.add(a);b.sync()}else {a.save()}}else {c.set('curCamp',b.add({})[0])}}},showPage:function(a){this.setCurrentView(a)},onCampaignsStoreChange:function(c){var d=this,b=d.lookupReference('campaignsBtn'),a=c.getCount();if(a===0){b.setText(Bigmedia.Locales.headerCampaignsBtnText)}else {b.setText(Bigmedia.Locales.headerCampaignsBtnText+'<span class="camp-badge">'+a+'</span>')}},getRestrictedArea:function(){var b=this,d=Bigmedia.Vars.getUser(),e=b.getReferences(),c=e.mainCardPanel,a=c.child('component[restrictedArea='+d.get('id')+']');if(!a){a=Ext.create('Bigmedia.view.user.UserContainerWrap',{session:!0,restrictedArea:d.get('id'),viewModel:{},listeners:{beforedestroy:b.onRestrictedAreaDestroy,scope:b}});c.add(a)}return a},onRestrictedAreaDestroy:function(a){var b=this,c=b.lookupReference('campaignsBtn');a.getViewModel().destroy()},showRestrictedPage:function(d,p,q){var e=this,s=Bigmedia.app,j=Ext.getStore('NavigationTree'),a=j.findNode('routeId',d),f=a?a.get('userAction'):undefined,m=f==undefined,g=e.getViewModel(),i=g.getData(),r=Bigmedia.Vars.getUser(),k=e.getReferences(),h=k.mainCardPanel,l=a?a.get('view'):d,n=a?a.get('isPersistent'):null,o=i.currentView;Ext.suspendLayouts();try{var b=e.getRestrictedArea(),c=b.child('component[routeId='+d+']');if(!c){c=Ext.create('Bigmedia.view.'+l,{routeId:d});b.setActiveItem(b.add(c))}else {b.setActiveItem(c)}h.setActiveItem(b)}finally{Ext.resumeLayouts(!0)}},beforeShowCampaign:function(c,b){var a=this,f=Bigmedia.app,h='showCampaignCard',d=Bigmedia.Vars.getUser();if(f.appready){if(d&&d.get('id')!=='anonymous'){if(c==='new'){var i=Ext.create('Bigmedia.view.det.DetNewCampaign');i.show();return}if(d.get('actions')&&d.get('actions')[Bigmedia.Enum.authAction[h]]){var g=a.getRestrictedArea(),e=g.getViewModel().getStore('campaigns');if(!e.isLoaded()){e.on('load',Ext.Function.bind(a.beforeShowCampaign,a,[c,b]),a,{single:!0});return !0}else {if(c!=='new'&&!e.getById(c)){b.stop();a.redirectTo('faces');Bigmedia.app.showPage('error403');return !1}}b.resume()}else {b.stop();a.redirectTo('faces');Bigmedia.app.showPage('error403');return !1}}else {b.stop();a.getViewModel().set('targetLoginRouteId','campaigns/'+c);a.setCurrentView('auth.login');return !1}}else {f.on('appready',Ext.Function.bind(a.beforeShowCampaign,a,[c,b]),a,{single:!0})}},onShowCampaign:function(c){var b=this,j=b.getReferences(),h=j.mainCardPanel,l=h.getLayout(),g=b.getViewModel(),i=g.getData(),m=i.currentView,k=Bigmedia.Vars.getUser(),e=b.getRestrictedArea(),n;if(c){var d=e.getViewModel().getStore('campaigns');if(d){var a;if(c==='new'){var f=d.add({clientId:k.get('orgId')});if(f.length>0){a=f[0]}}else {a=d.getById(c)}if(a){e.getViewModel().set({curCamp:a})}}}b.showRestrictedPage('campView')},beforeFacesFiltered:function(g,d){var f=this,h=f.getReferences(),e=h.mainCardPanel,c=e.child('component[routeId=faces]');if(!c){f.setCurrentView('faces');c=e.child('component[routeId=faces]')}if(!c){d.stop();return}var a=c.lookupReference('reftagsize'),b=c.lookupReference('reftagnetwork');switch(g){case 'shelters':b.setValue(522);b.up('fieldset').expand();break;case 'citylights':b.setValue(487);b.up('fieldset').expand();break;case 'columns':a.setValue(31);a.up('fieldset').expand();break;case 'scrolls':b.setValue(488);b.up('fieldset').expand();break;case 'tri-visions':b.setValue(492);b.up('fieldset').expand();break;case 'billboards':a.setValue(1);a.up('fieldset').expand();b.setValue(493);b.up('fieldset').expand();break;case 'backlights':b.setValue(489);b.up('fieldset').expand();a.setValue([7,36]);a.up('fieldset').expand();break;case '5x12':a.setValue(4);a.up('fieldset').expand();break;case '3x12':a.setValue(3);a.up('fieldset').expand();break;case 'supersites':a.setValue([2,3,4,6,7,15,26,27,28,32,33,36]);a.up('fieldset').expand();break;case 'classic':a.setValue([1,8]);a.up('fieldset').expand();break;default:d.stop(!0);}d.resume()},onUserClick:function(){if(Bigmedia.Vars.getUser().get('id')!=='anonymous'){this.redirectTo('profile')}else {this.redirectTo('auth.login')}},onAutoSelectClick:function(a){this.redirectTo('planner')},onFacesFiltered:function(a){this.redirectTo('faces')},emptyCart:function(){var a=this,d=Ext.getStore('Faces'),b=Ext.getStore('ShoppingCart'),c=Ext.getCmp('headercart');Ext.MessageBox.show({msg:Bigmedia.Locales.cartPrepareItemsRemoveFromCartMsg,progressText:Bigmedia.Locales.cartPrepareItemsRemoveProgressText,width:300,wait:{interval:200},animateTarget:c});a.timer=Ext.defer(function(){b.removeAll();a.timer=null;Ext.MessageBox.hide();a.showToast(Bigmedia.Locales.cartRemoveItemsToastText)},500)},onShoppingCartChange:function(c){var d=this,a=d.lookupReference('shoppingcartlarge'),b=c.getCount();a.setDisabled(b===0);if(b===0){a.setText('');a.setTooltip(Bigmedia.Locales.headerShoppingCartEmpty)}else {a.setText('<span class="cart-badge">'+b+'</span>');a.setTooltip(Ext.String.format(Bigmedia.Locales.headerShoppingCartNotEmpty,b))}},onSelectLocale:function(d,c){var b=Ext.Object.fromQueryString(location.search),a;b['locale']=c;a=Ext.Object.toQueryString(b);location.search=a},showToast:function(a,b){Ext.toast({html:a,closable:!1,align:'t',slideInDuration:400,minWidth:400})},setCurrentView:function(c){c=c||'';var g=this,r=g.getReferences(),j=r.mainCardPanel,i=j.getLayout(),p=g.getViewModel(),f=p.getData(),q=Ext.getStore('NavigationTree'),e=q.findNode('routeId',c),n=e?e.get('userAction'):undefined,m=n!==undefined,k=e?e.get('view'):null,h=e?e.get('isPersistent'):null,d=f.currentView,b=j.child('component[routeId='+c+']'),a;if(!b){b=f.persistentViews[c]}if(c=='auth.login'){if(d){if(d.routeId.indexOf('auth')<0){f.beforeLoginRouteId=d.routeId}}else {f.beforeLoginRouteId='faces'}}if(d&&d.isWindow){if(d.isPersistent){d.hide()}else {d.destroy()}}if(m){g.showRestrictedPage(c);return}if(!b){if(e&&e.get('stores')){var o=e.get('stores');o.forEach(function(a){if(!Ext.getStore(a)){Ext.create('Bigmedia.store.'+a)}})}if(e&&e.get('isWindow')){a=Ext.create('Bigmedia.view.'+(k||'error.Error404Window'),{routeId:c,isPersistent:h,listeners:{close:function(){if(c==='auth.login'){g.redirectTo(f.beforeLoginRouteId)||g.setCurrentView(f.beforeLoginRouteId)}else {if(d){g.redirectTo(d.routeId)||g.setCurrentView(d.routeId)}else {g.redirectTo('faces')}}}}})}else {a=Ext.create('Bigmedia.view.'+(k||'error.Error404Window'),{routeId:c,isPersistent:h})}if(h){f.persistentViews[c]=a}}if(b&&b.isWindow&&b.isPersistent){b.show();a=b}else {if(!a||!a.isWindow){if(b){if(b!==i.getActiveItem()){i.setActiveItem(b)}a=b}else {Ext.suspendLayouts();i.setActiveItem(j.add(a));Ext.resumeLayouts(!0)}}else {if(a&&a.isWindow){a.show()}}}if(a.isFocusable(!0)){a.focus()}f.currentView=a;var l=window.localStorage;if(!l.getItem('bma-professional')&&c!='bma-noob'){l.setItem('bma-professional',!0)}},onNavigationTreeSelectionChange:function(b,a){if(a&&a.get('view')){this.redirectTo(a.get('routeId'))}},onToggleNavigationSize:function(){var f=this,e=f.getReferences(),a=e.navigationTreeList,b=e.mainContainerWrap,c=!a.getMicro(),d=c?64:250;if(Ext.isIE9m||!Ext.os.is.Desktop){Ext.suspendLayouts();e.senchaLogo.setWidth(d);a.setWidth(d);a.setMicro(c);Ext.resumeLayouts();b.layout.animatePolicy=b.layout.animate=null;b.updateLayout()}else {if(!c){a.setMicro(!1)}e.senchaLogo.animate({dynamic:!0,to:{width:d}});a.width=d;b.updateLayout({isRoot:!0});if(c){a.on({afterlayoutanimation:function(){a.setMicro(!0)},single:!0})}}},onMainViewRender:function(){var b=this;var a=Ext.get('preload');if(a){Ext.removeNode(a)}var c=window.localStorage;if(!c.getItem('bma-professional')&&!window.location.hash){b.setCurrentView('bma-noob');return}if(!window.location.hash){b.redirectTo('faces')}},syncHeaderButtonsPressed:function(){var b=this,d=b.lookupReference('facesBtn'),c=b.lookupReference('campaignsBtn'),e=b.getViewModel(),a=e.getData();if(d){d.setPressed(a.currentView&&a.currentView.routeId=='faces')}if(c){c.setPressed(a.currentView&&a.currentView.routeId in {'campaigns':1,'campView':1})}},handleUserAccessCheck:function(d,b){var a=this,h=Bigmedia.app,k=Ext.getStore('NavigationTree'),g=k.findNode('routeId',d),f=g?g.get('userAction'):undefined,i=f==undefined,j=a.getViewModel(),e=j.getData(),c=Bigmedia.Vars.getUser();if(e.currentView&&e.currentView.routeId=='auth.login'&&e.targetLoginRouteId==d&&(!c||c.get('id')=='anonymous')){b.stop();a.redirectTo(e.beforeLoginRouteId||'faces');return !1}if(h.appready){if(d&&d==='planner'&&!c.get('showPlanner')){b.stop();a.redirectTo('faces');return !1}if(i){b.resume()}else {if(c&&c.get('id')!=='anonymous'){if(c.get('actions')&&c.get('actions')[Bigmedia.Enum.authAction[f]]){b.resume()}else {b.stop();a.getViewModel().set('showMonitoring',!1);a.redirectTo('faces');return !1}}else {b.stop();e.targetLoginRouteId=d;a.setCurrentView('auth.login');return !1}}}else {h.on('appready',Ext.Function.bind(a.handleUserAccessCheck,a,[d,b]),a,{single:!0})}},onCampaignsClick:function(){this.redirectTo('campaigns')},onFacesClick:function(){this.redirectTo('faces')},onCartClick:function(){this.redirectTo('cart')},onRouteChange:function(a){this.setCurrentView(a)}});Ext.define('Bigmedia.view.main.ViewportModel',{extend:Ext.app.ViewModel,alias:'viewmodel.mainviewport',stores:{campaigns:{model:'Campaign',autoLoad:!0,storeId:'Campaigns'},gridfaces:{type:'faces',id:'Faces',statefulFilters:!0,listeners:{}},proposals:{source:'{curCamp.proposals}'},pois:{source:'{curCamp.campPois}'},periodMonitoring:{model:'PeriodMonitoring',type:'periodMonitoring',storeId:'periodMonitoring',statefulFilters:!0},gridMonitoring:{source:'MonitoringData',model:'MonitoringData',type:'DataMonitoring',storeId:'DataMonitoring',statefulFilters:!0}},formulas:{curCamp:{get:function(a){if(!a('currentCampaign')){var b=Ext.getStore('Campaigns').add({})[0];this.set({currentCampaign:b})}else {return a('currentCampaign')}},set:function(a){this.set({currentCampaign:a})}},curMonitoring:{get:function(b){if(!b('currentMonitoring')){var d=this;var a=Ext.getStore('periodMonitoring').add({})[0];this.set({currentMonitoring:a});var c=Ext.getStore('periodMonitoring');c.load({callback:function(e,k,j){if(j==!0){var f=[],h,g;for(var c=0;c<e.length;c++){f.push(e[c].data);if(c==0){h=e[c].data.startDate;g=e[c].data.endDate}else {h=e[c].data.startDate<h?e[c].data.startDate:h;g=e[c].data.endDate>g?e[c].data.endDate:g}}var i=e.length-1;a.set('id',f[i].id);a.set('name',f[i].name);a.set('minDate',h);a.set('maxDate',g);a.set('startDate',f[i].startDate);a.set('endDate',f[i].endDate);a.set('periods',f);d.set({currentMonitoring:a})}else {console.warn('Error Connection to Store')}}})}else {return b('currentMonitoring')}},set:function(a){console.log('currentMonitoring -->  v -->',a);this.set({currentMonitoring:a})}},pubCamp:{get:function(a){return a('publishedCampaign')},set:function(a){this.set({publishedCampaign:a})}},curCampDirty:function(a){if(a('currentCampaign')){return a('currentCampaign').dirty||a('currentCampaign').phantom}},curCampValid:function(a){if(a('currentCampaign')){return a('currentCampaign').isValid()}},userLoggedIn:function(a){return !!a('user')&&a('user').get('id')!=='anonymous'},visiblePrice:function(a){return a('userLoggedIn')}},data:{currentCampaign:null,publishedCampaign:null,currentMonitoring:null,filterStart:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()+1,1)),filterEnd:new Date(Date.UTC((new Date()).getFullYear(),(new Date()).getMonth()+2,0)),currentView:null,beforeLoginRouteId:null,targetLoginRouteId:null,user:null,persistentViews:{},discountGroup:null,useEncryption:!1,showMonitoring:!1,savePrice:!0}});Ext.define('Bigmedia.view.main.Viewport',{extend:Ext.container.Viewport,xtype:'mainviewport',responsiveConfig:{},controller:'mainviewport',viewModel:{type:'mainviewport'},dlgPoiCat:null,dlgCustomPeriod:null,dlgFilterByNumber:null,cls:'sencha-dash-viewport',itemId:'mainView',id:'mainViewport',layout:{type:'vbox',align:'stretch'},listeners:{render:'onMainViewRender'},items:[{region:'north',xtype:'panel',id:'app-header',reference:'app-header',title:'Bigmedia',header:!1,height:40,layout:{type:'hbox',align:'middle'},items:[{xtype:'component',reference:'senchaLogo',margin:'0 0 0 10',style:{background:'center / contain no-repeat url(resources/images/bma.png)'},width:100,height:30},{xtype:'tbspacer',width:20},{xtype:'button',text:Bigmedia.Locales.appHeaderBtnMyCampaignsText,menu:[],handler:'onMyCampaignsClick',arrowHandler:'onMyCampaignsClick',bind:{hidden:'{showMonitoring}'}},{xtype:'tbspacer',flex:1},{xtype:'button',iconCls:'x-fa fa-globe',tooltip:'Select language',menu:{plain:!0,indent:!1,minWidth:50,items:[{text:Bigmedia.Locales.locales[0].full},{text:Bigmedia.Locales.locales[1].full},{text:Bigmedia.Locales.locales[2].full}],listeners:{click:function(e,d){var b=Ext.Object.fromQueryString(location.search),a;var c=Bigmedia.Locales.getLocaleByFull(d.text);if(!c){return}b['locale']=c.code;a=Ext.Object.toQueryString(b);location.search=a}}},handler:function(){this.getMenu().show()},arrowHandler:function(){}},{xtype:'splitbutton',iconCls:'user-icon',text:'',listeners:{click:'onUserClick'},menu:{plain:!0,items:[{text:Bigmedia.Locales.appHeaderBtnLoginText,bind:{hidden:'{userLoggedIn}'},href:'#auth.login',hrefTarget:'_self'},{xtype:'menuitem',bind:{text:'{user.displayName}'},href:'#profile',hrefTarget:'_self'},{text:Bigmedia.Locales.appHeaderBtnLogoutText,bind:{hidden:'{!userLoggedIn}'},handler:function(){Bigmedia.Vars.logoutUser()}}]}}]},{xtype:'container',region:'center',flex:1,reference:'mainCardPanel',cls:'sencha-dash-right-main-container',itemId:'contentPanel',layout:{type:'card',anchor:'100%'}}],constructor:function(a){var b=this;b.callParent([a])}});Ext.define('Bigmedia.view.pivot.PivotPlanVariant',{extend:Ext.pivot.Grid,xtype:'pivot-planvariant',config:{source:null},updateSource:function(b){var a=this.getStore();a.removeAll();if(b){var c=[];b.each(function(a){c.push(a)});a.add(c);this.setStore(a)}},viewModel:{stores:{localStore:{model:'Face',data:[],proxy:{type:'memory'},autoLoad:!0}}},header:!1,width:750,height:350,multiSelect:!0,viewConfig:{markDirty:!1},selModel:{type:'rowmodel'},startRowGroupsCollapsed:!1,matrix:{type:'local',viewLayoutType:'outline',colGrandTotalsPosition:'first',store:new Ext.data.Store({model:'Face',data:[],proxy:{type:'memory'},autoLoad:!0}),collapsibleRows:!0,showZeroAsBlank:!0,textRowLabels:'City / Size',aggregate:[{dataIndex:'finalPrice',header:'Budget',aggregator:'sum',width:80,renderer:Ext.util.Format.numberRenderer('0,000')},{dataIndex:'id',header:'Qty',aggregator:'count',width:50,renderer:Ext.util.Format.numberRenderer('0,000')},{dataIndex:'finalPrice',header:'Avg. Price',aggregator:'avg',width:80,renderer:Ext.util.Format.numberRenderer('0,000')}],leftAxis:[{dataIndex:'city',header:'City',width:80},{dataIndex:'size',header:'Size',sortable:!1,width:80}],topAxis:[{dataIndex:'supplier',header:'Supplier'}]}});Ext.define('Bigmedia.view.profile.Description',{extend:Ext.container.Container,xtype:'profiledescriptionpanel',height:300,layout:{type:'vbox',align:'stretch'},cls:'timeline-items-wrap user-profile-desc shadow-panel',items:[{xtype:'container',flex:1,layout:{type:'hbox',align:'stretch'},items:[{xtype:'container',flex:1,layout:{type:'vbox',align:'stretch'},items:[{xtype:'box',componentCls:'x-fa fa-home',bind:{html:'{user.cityName}, '+Bigmedia.Locales.profileUkraineText+'<br>{user.address}'},padding:'0 0 12 0'},{xtype:'box',componentCls:'x-fa fa-clock-o',bind:{html:Bigmedia.Locales.profileMemberSinceText+' {user.regDate:date("F j, Y")}'},padding:'0 0 12 0'},{xtype:'container',flex:1,cls:'about-me-wrap',bind:{html:'<h3 class="x-fa fa-user">{user.orgName}</p>'}},{xtype:'button',scale:'large',margin:'20px 20px 0 0',text:Bigmedia.Locales.profileChangeInfoBtnText,handler:function(b){var a=Ext.create('Bigmedia.view.dialog.DlgUserInfo',{modal:!0});a.show()}}]},{xtype:'container',flex:1,layout:{type:'vbox',align:'stretch'},items:[{xtype:'container',cls:'user-org-logo-container',padding:20,flex:1,items:[{xtype:'image',reference:'imageLogo',cls:'user-org-logo',bind:{src:'/api/v1/orgs/{user.orgId}/logo.png'}}]},{xtype:'button',scale:'large',margin:'20px 0 0 20px',text:'Upload logo',handler:function(d){var b=d.up('mainviewport'),a=b.lookupReference('detLogo'),e=d.up('profiledescriptionpanel').down('image'),c=e.getSrc();if(!a){a=new Bigmedia.view.det.DetLogo({reference:'detLogo',viewModel:{data:{logoURL:c}}});a.on('imagesave',function(){var c=Bigmedia.Vars.getUser();var b=new Bigmedia.model.Org({id:c.get('orgId'),logoBlob:a.getDataURL()});b.save({success:function(){e.setSrc(a.getDataURL())},failure:function(b,a){Ext.toast({html:'Image upload was interrupted. Please, choose other picture.',closable:!1,align:'t',slideInDuration:400,minWidth:400})}})});b.add(a)}else {a.getViewModel().set('logoURL',c)}a.show()}}]}]},{xtype:'toolbar',layout:{type:'hbox',align:'middle',pack:'center'},items:[{xtype:'combo',flex:1,padding:10,fieldLabel:Bigmedia.Locales.profileSelectDefaultDiscountLabel,labelWidth:180,store:'RulesGroups',displayField:'name',valueField:'id',queryMode:'local',bind:{selection:'{theGroup}'}},{xtype:'button',text:Bigmedia.Locales.profileManageGroupsText,handler:function(b){var a=Ext.create('Bigmedia.view.dialog.DlgEditRulesGroups',{});a.show()}}]}]});Ext.define('Bigmedia.view.profile.Social',{extend:Ext.panel.Panel,xtype:'profilesocialpanel',height:300,bodyPadding:10,layout:{type:'vbox',align:'middle'},cls:'social-panel shadow-panel',items:[{xtype:'image',cls:'userProfilePic',height:120,width:120,alt:'profile-picture',bind:{src:'{user.pictureUrl}'}},{xtype:'component',cls:'userProfileName',height:'',bind:{html:'{user.displayName}'}},{xtype:'component',cls:'userProfileDesc',bind:{html:'{user.orgName}'}},{xtype:'container',layout:'hbox',defaults:{xtype:'button',margin:5},margin:5,items:[{ui:'blue',iconCls:'x-fa fa-facebook',text:Bigmedia.Locales.profileAddFacebookBtnText,bind:{hidden:'{user.hasFacebookAccount}'},handler:function(a){Bigmedia.lib.provider.Facebook.login()}},{ui:'green',text:Bigmedia.Locales.profileAddLocalBtnText,bind:{hidden:'{user.hasLocalAccount}'},handler:function(b){var a=Ext.create('Bigmedia.view.dialog.DlgLogin',{modal:!0,viewModel:{data:{username:null,password:null,isSignup:!1}}});a.show()}},{ui:'green',text:Bigmedia.Locales.profileCreateLocalBtnText,bind:{hidden:'{user.hasLocalAccount}'},handler:function(b){var a=Ext.create('Bigmedia.view.dialog.DlgLoginCreate',{modal:!0});a.show()}},{ui:'blue',iconCls:'x-fa fa-facebook',text:Bigmedia.Locales.profileRemoveFacebookBtnText,bind:{hidden:'{!user.hasFacebookAccount || !user.hasLocalAccount}',disabled:'{!user.hasLocalAccount}'},handler:function(a){Bigmedia.lib.provider.Facebook.removeToken()}},{ui:'green',width:220,text:Bigmedia.Locales.profileChangePasswordBtnText,bind:{hidden:'{!user.hasLocalAccount}'},handler:function(b){var a=Ext.create('Bigmedia.view.dialog.DlgChangePassword',{modal:!0});a.show()}}]}]});Ext.define('Bigmedia.view.profile.UserProfile',{extend:Ext.container.Container,xtype:'userprofile',controller:'userprofile',viewModel:{type:'userprofile'},cls:'userProfile-container',layout:'responsivecolumn',items:[{xtype:'profilesocialpanel',responsiveCls:'big-50 small-100'},{xtype:'profiledescriptionpanel',responsiveCls:'big-50 small-100'}]});Ext.define('Bigmedia.view.profile.UserProfileController',{extend:Ext.app.ViewController,alias:'controller.userprofile',init:function(){var a=this;Bigmedia.Vars.on('userchanged',a.onUserChanged,a);a.callParent();if(Bigmedia.Vars.getUser()){a.getViewModel().set('theGroup',Bigmedia.Vars.getDefaultRulesGroup())}a.getViewModel().bind({bindTo:'{theGroup}'},function(b){a.onGroupChanged(b)})},onUserChanged:function(a){this.getViewModel().set('theGroup',Bigmedia.Vars.getDefaultRulesGroup())},onGroupChanged:function(a){if(!Bigmedia.Vars.getUser()){return}if(a!==Bigmedia.Vars.getDefaultRulesGroup()){Bigmedia.Vars.setDefaultRulesGroup(a)}}});Ext.define('Bigmedia.view.profile.UserProfileModel',{extend:Ext.app.ViewModel,alias:'viewmodel.userprofile',data:{theGroup:null}});Ext.define('Bigmedia.Application',{extend:Ext.app.Application,namespace:'Bigmedia',name:'Bigmedia',stores:['Cities','CityBoundaries','Sizes','Networks','Sidetypes','FacesInfo','PoiCategories','PoiCategoriesTree','Catabs','Sides','ShoppingCart','NavigationTree','ThirdPartyBoards','RulesGroups','DiscountTypes','MarginTypes','MarginRoundTypes','Suppliers','Pois','PoisManual','UserIcons','LocalCampaigns','GoogleMapSearchHistory','FormatsTree','LinkPoiRulesTree','KSParamsTree','OTSParamsTree','OTSParamsTreeClient','KSPolygons','CityPolygon','KSStreets','DataMonitoring'],views:['Bigmedia.view.main.Viewport','Bigmedia.view.authentication.ShoppingCart'],mainView:'Bigmedia.view.main.Viewport',constructor:function(a){Bigmedia.localStorageStateProvider=new Ext.state.LocalStorageProvider({prefix:'bma-state-'});Ext.state.Manager.setProvider(Bigmedia.localStorageStateProvider);this.callParent();this.initConfig(a);Bigmedia.appVersion='2.0.2'},launch:function(){myDateFormatter=function(a){return Ext.Date.utc(a.getFullYear(),a.getMonth(),a.getDate())};Ext.Date.formatFunctions['utc-date']=myDateFormatter;Ext.util.Format.currencySign='';Ext.ariaWarn=Ext.emptyFn;var a=this;a.appready=!1;Bigmedia.Vars.on('userchanged',a.onUser,a);Bigmedia.Vars.loadUser()},initCurrentCampaign:function(){var a=this},onUser:function(b){var a=this;a.appready=!0;a.fireEvent('appready',a,b)},showPage:function(b){var a=this;if(a.appready){a.getMainView().getController().showPage(b)}else {a.on('appready',Ext.Function.bind(a.showPage,a,[b]),a,{single:!0})}}});var cptable={version:'1.3.7'};cptable[874]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2026\u2018\u2019\u201c\u201d\u2022\u2013\u2014\xa0',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[932]=function(){var c=[],d={},b=[],a;b[0]='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~'.split('');for(a=0;a!=b[0].length;++a){if(b[0][a].charCodeAt(0)!==65533){d[b[0][a]]=0+a;c[0+a]=b[0][a]}}b[129]='\u3000\u2015\u2010\u2026\u2025\u2018\u2019\u201c\u201d\u2032\u2033\u203b\u2030\u2020\u2021'.split('');for(a=0;a!=b[129].length;++a){if(b[129][a].charCodeAt(0)!==65533){d[b[129][a]]=33024+a;c[33024+a]=b[129][a]}}b[130]=''.split('');for(a=0;a!=b[130].length;++a){if(b[130][a].charCodeAt(0)!==65533){d[b[130][a]]=33280+a;c[33280+a]=b[130][a]}}b[131]=''.split('');for(a=0;a!=b[131].length;++a){if(b[131][a].charCodeAt(0)!==65533){d[b[131][a]]=33536+a;c[33536+a]=b[131][a]}}b[132]=''.split('');for(a=0;a!=b[132].length;++a){if(b[132][a].charCodeAt(0)!==65533){d[b[132][a]]=33792+a;c[33792+a]=b[132][a]}}b[135]=''.split('');for(a=0;a!=b[135].length;++a){if(b[135][a].charCodeAt(0)!==65533){d[b[135][a]]=34560+a;c[34560+a]=b[135][a]}}b[136]=''.split('');for(a=0;a!=b[136].length;++a){if(b[136][a].charCodeAt(0)!==65533){d[b[136][a]]=34816+a;c[34816+a]=b[136][a]}}b[137]=''.split('');for(a=0;a!=b[137].length;++a){if(b[137][a].charCodeAt(0)!==65533){d[b[137][a]]=35072+a;c[35072+a]=b[137][a]}}b[138]=''.split('');for(a=0;a!=b[138].length;++a){if(b[138][a].charCodeAt(0)!==65533){d[b[138][a]]=35328+a;c[35328+a]=b[138][a]}}b[139]=''.split('');for(a=0;a!=b[139].length;++a){if(b[139][a].charCodeAt(0)!==65533){d[b[139][a]]=35584+a;c[35584+a]=b[139][a]}}b[140]=''.split('');for(a=0;a!=b[140].length;++a){if(b[140][a].charCodeAt(0)!==65533){d[b[140][a]]=35840+a;c[35840+a]=b[140][a]}}b[141]=''.split('');for(a=0;a!=b[141].length;++a){if(b[141][a].charCodeAt(0)!==65533){d[b[141][a]]=36096+a;c[36096+a]=b[141][a]}}b[142]=''.split('');for(a=0;a!=b[142].length;++a){if(b[142][a].charCodeAt(0)!==65533){d[b[142][a]]=36352+a;c[36352+a]=b[142][a]}}b[143]=''.split('');for(a=0;a!=b[143].length;++a){if(b[143][a].charCodeAt(0)!==65533){d[b[143][a]]=36608+a;c[36608+a]=b[143][a]}}b[144]=''.split('');for(a=0;a!=b[144].length;++a){if(b[144][a].charCodeAt(0)!==65533){d[b[144][a]]=36864+a;c[36864+a]=b[144][a]}}b[145]=''.split('');for(a=0;a!=b[145].length;++a){if(b[145][a].charCodeAt(0)!==65533){d[b[145][a]]=37120+a;c[37120+a]=b[145][a]}}b[146]=''.split('');for(a=0;a!=b[146].length;++a){if(b[146][a].charCodeAt(0)!==65533){d[b[146][a]]=37376+a;c[37376+a]=b[146][a]}}b[147]=''.split('');for(a=0;a!=b[147].length;++a){if(b[147][a].charCodeAt(0)!==65533){d[b[147][a]]=37632+a;c[37632+a]=b[147][a]}}b[148]=''.split('');for(a=0;a!=b[148].length;++a){if(b[148][a].charCodeAt(0)!==65533){d[b[148][a]]=37888+a;c[37888+a]=b[148][a]}}b[149]=''.split('');for(a=0;a!=b[149].length;++a){if(b[149][a].charCodeAt(0)!==65533){d[b[149][a]]=38144+a;c[38144+a]=b[149][a]}}b[150]=''.split('');for(a=0;a!=b[150].length;++a){if(b[150][a].charCodeAt(0)!==65533){d[b[150][a]]=38400+a;c[38400+a]=b[150][a]}}b[151]=''.split('');for(a=0;a!=b[151].length;++a){if(b[151][a].charCodeAt(0)!==65533){d[b[151][a]]=38656+a;c[38656+a]=b[151][a]}}b[152]=''.split('');for(a=0;a!=b[152].length;++a){if(b[152][a].charCodeAt(0)!==65533){d[b[152][a]]=38912+a;c[38912+a]=b[152][a]}}b[153]=''.split('');for(a=0;a!=b[153].length;++a){if(b[153][a].charCodeAt(0)!==65533){d[b[153][a]]=39168+a;c[39168+a]=b[153][a]}}b[154]=''.split('');for(a=0;a!=b[154].length;++a){if(b[154][a].charCodeAt(0)!==65533){d[b[154][a]]=39424+a;c[39424+a]=b[154][a]}}b[155]=''.split('');for(a=0;a!=b[155].length;++a){if(b[155][a].charCodeAt(0)!==65533){d[b[155][a]]=39680+a;c[39680+a]=b[155][a]}}b[156]=''.split('');for(a=0;a!=b[156].length;++a){if(b[156][a].charCodeAt(0)!==65533){d[b[156][a]]=39936+a;c[39936+a]=b[156][a]}}b[157]=''.split('');for(a=0;a!=b[157].length;++a){if(b[157][a].charCodeAt(0)!==65533){d[b[157][a]]=40192+a;c[40192+a]=b[157][a]}}b[158]=''.split('');for(a=0;a!=b[158].length;++a){if(b[158][a].charCodeAt(0)!==65533){d[b[158][a]]=40448+a;c[40448+a]=b[158][a]}}b[159]=''.split('');for(a=0;a!=b[159].length;++a){if(b[159][a].charCodeAt(0)!==65533){d[b[159][a]]=40704+a;c[40704+a]=b[159][a]}}b[224]=''.split('');for(a=0;a!=b[224].length;++a){if(b[224][a].charCodeAt(0)!==65533){d[b[224][a]]=57344+a;c[57344+a]=b[224][a]}}b[225]=''.split('');for(a=0;a!=b[225].length;++a){if(b[225][a].charCodeAt(0)!==65533){d[b[225][a]]=57600+a;c[57600+a]=b[225][a]}}b[226]=''.split('');for(a=0;a!=b[226].length;++a){if(b[226][a].charCodeAt(0)!==65533){d[b[226][a]]=57856+a;c[57856+a]=b[226][a]}}b[227]=''.split('');for(a=0;a!=b[227].length;++a){if(b[227][a].charCodeAt(0)!==65533){d[b[227][a]]=58112+a;c[58112+a]=b[227][a]}}b[228]=''.split('');for(a=0;a!=b[228].length;++a){if(b[228][a].charCodeAt(0)!==65533){d[b[228][a]]=58368+a;c[58368+a]=b[228][a]}}b[229]=''.split('');for(a=0;a!=b[229].length;++a){if(b[229][a].charCodeAt(0)!==65533){d[b[229][a]]=58624+a;c[58624+a]=b[229][a]}}b[230]=''.split('');for(a=0;a!=b[230].length;++a){if(b[230][a].charCodeAt(0)!==65533){d[b[230][a]]=58880+a;c[58880+a]=b[230][a]}}b[231]=''.split('');for(a=0;a!=b[231].length;++a){if(b[231][a].charCodeAt(0)!==65533){d[b[231][a]]=59136+a;c[59136+a]=b[231][a]}}b[232]=''.split('');for(a=0;a!=b[232].length;++a){if(b[232][a].charCodeAt(0)!==65533){d[b[232][a]]=59392+a;c[59392+a]=b[232][a]}}b[233]=''.split('');for(a=0;a!=b[233].length;++a){if(b[233][a].charCodeAt(0)!==65533){d[b[233][a]]=59648+a;c[59648+a]=b[233][a]}}b[234]=''.split('');for(a=0;a!=b[234].length;++a){if(b[234][a].charCodeAt(0)!==65533){d[b[234][a]]=59904+a;c[59904+a]=b[234][a]}}b[237]=''.split('');for(a=0;a!=b[237].length;++a){if(b[237][a].charCodeAt(0)!==65533){d[b[237][a]]=60672+a;c[60672+a]=b[237][a]}}b[238]=''.split('');for(a=0;a!=b[238].length;++a){if(b[238][a].charCodeAt(0)!==65533){d[b[238][a]]=60928+a;c[60928+a]=b[238][a]}}b[250]=''.split('');for(a=0;a!=b[250].length;++a){if(b[250][a].charCodeAt(0)!==65533){d[b[250][a]]=64000+a;c[64000+a]=b[250][a]}}b[251]=''.split('');for(a=0;a!=b[251].length;++a){if(b[251][a].charCodeAt(0)!==65533){d[b[251][a]]=64256+a;c[64256+a]=b[251][a]}}b[252]=''.split('');for(a=0;a!=b[252].length;++a){if(b[252][a].charCodeAt(0)!==65533){d[b[252][a]]=64512+a;c[64512+a]=b[252][a]}}return {'enc':d,'dec':c}}();cptable[936]=function(){var c=[],d={},b=[],a;b[0]='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~'.split('');for(a=0;a!=b[0].length;++a){if(b[0][a].charCodeAt(0)!==65533){d[b[0][a]]=0+a;c[0+a]=b[0][a]}}b[129]=''.split('');for(a=0;a!=b[129].length;++a){if(b[129][a].charCodeAt(0)!==65533){d[b[129][a]]=33024+a;c[33024+a]=b[129][a]}}b[130]=''.split('');for(a=0;a!=b[130].length;++a){if(b[130][a].charCodeAt(0)!==65533){d[b[130][a]]=33280+a;c[33280+a]=b[130][a]}}b[131]=''.split('');for(a=0;a!=b[131].length;++a){if(b[131][a].charCodeAt(0)!==65533){d[b[131][a]]=33536+a;c[33536+a]=b[131][a]}}b[132]=''.split('');for(a=0;a!=b[132].length;++a){if(b[132][a].charCodeAt(0)!==65533){d[b[132][a]]=33792+a;c[33792+a]=b[132][a]}}b[133]=''.split('');for(a=0;a!=b[133].length;++a){if(b[133][a].charCodeAt(0)!==65533){d[b[133][a]]=34048+a;c[34048+a]=b[133][a]}}b[134]=''.split('');for(a=0;a!=b[134].length;++a){if(b[134][a].charCodeAt(0)!==65533){d[b[134][a]]=34304+a;c[34304+a]=b[134][a]}}b[135]=''.split('');for(a=0;a!=b[135].length;++a){if(b[135][a].charCodeAt(0)!==65533){d[b[135][a]]=34560+a;c[34560+a]=b[135][a]}}b[136]=''.split('');for(a=0;a!=b[136].length;++a){if(b[136][a].charCodeAt(0)!==65533){d[b[136][a]]=34816+a;c[34816+a]=b[136][a]}}b[137]=''.split('');for(a=0;a!=b[137].length;++a){if(b[137][a].charCodeAt(0)!==65533){d[b[137][a]]=35072+a;c[35072+a]=b[137][a]}}b[138]=''.split('');for(a=0;a!=b[138].length;++a){if(b[138][a].charCodeAt(0)!==65533){d[b[138][a]]=35328+a;c[35328+a]=b[138][a]}}b[139]=''.split('');for(a=0;a!=b[139].length;++a){if(b[139][a].charCodeAt(0)!==65533){d[b[139][a]]=35584+a;c[35584+a]=b[139][a]}}b[140]=''.split('');for(a=0;a!=b[140].length;++a){if(b[140][a].charCodeAt(0)!==65533){d[b[140][a]]=35840+a;c[35840+a]=b[140][a]}}b[141]=''.split('');for(a=0;a!=b[141].length;++a){if(b[141][a].charCodeAt(0)!==65533){d[b[141][a]]=36096+a;c[36096+a]=b[141][a]}}b[142]=''.split('');for(a=0;a!=b[142].length;++a){if(b[142][a].charCodeAt(0)!==65533){d[b[142][a]]=36352+a;c[36352+a]=b[142][a]}}b[143]=''.split('');for(a=0;a!=b[143].length;++a){if(b[143][a].charCodeAt(0)!==65533){d[b[143][a]]=36608+a;c[36608+a]=b[143][a]}}b[144]=''.split('');for(a=0;a!=b[144].length;++a){if(b[144][a].charCodeAt(0)!==65533){d[b[144][a]]=36864+a;c[36864+a]=b[144][a]}}b[145]=''.split('');for(a=0;a!=b[145].length;++a){if(b[145][a].charCodeAt(0)!==65533){d[b[145][a]]=37120+a;c[37120+a]=b[145][a]}}b[146]=''.split('');for(a=0;a!=b[146].length;++a){if(b[146][a].charCodeAt(0)!==65533){d[b[146][a]]=37376+a;c[37376+a]=b[146][a]}}b[147]=''.split('');for(a=0;a!=b[147].length;++a){if(b[147][a].charCodeAt(0)!==65533){d[b[147][a]]=37632+a;c[37632+a]=b[147][a]}}b[148]=''.split('');for(a=0;a!=b[148].length;++a){if(b[148][a].charCodeAt(0)!==65533){d[b[148][a]]=37888+a;c[37888+a]=b[148][a]}}b[149]=''.split('');for(a=0;a!=b[149].length;++a){if(b[149][a].charCodeAt(0)!==65533){d[b[149][a]]=38144+a;c[38144+a]=b[149][a]}}b[150]=''.split('');for(a=0;a!=b[150].length;++a){if(b[150][a].charCodeAt(0)!==65533){d[b[150][a]]=38400+a;c[38400+a]=b[150][a]}}b[151]=''.split('');for(a=0;a!=b[151].length;++a){if(b[151][a].charCodeAt(0)!==65533){d[b[151][a]]=38656+a;c[38656+a]=b[151][a]}}b[152]=''.split('');for(a=0;a!=b[152].length;++a){if(b[152][a].charCodeAt(0)!==65533){d[b[152][a]]=38912+a;c[38912+a]=b[152][a]}}b[153]=''.split('');for(a=0;a!=b[153].length;++a){if(b[153][a].charCodeAt(0)!==65533){d[b[153][a]]=39168+a;c[39168+a]=b[153][a]}}b[154]=''.split('');for(a=0;a!=b[154].length;++a){if(b[154][a].charCodeAt(0)!==65533){d[b[154][a]]=39424+a;c[39424+a]=b[154][a]}}b[155]=''.split('');for(a=0;a!=b[155].length;++a){if(b[155][a].charCodeAt(0)!==65533){d[b[155][a]]=39680+a;c[39680+a]=b[155][a]}}b[156]=''.split('');for(a=0;a!=b[156].length;++a){if(b[156][a].charCodeAt(0)!==65533){d[b[156][a]]=39936+a;c[39936+a]=b[156][a]}}b[157]=''.split('');for(a=0;a!=b[157].length;++a){if(b[157][a].charCodeAt(0)!==65533){d[b[157][a]]=40192+a;c[40192+a]=b[157][a]}}b[158]=''.split('');for(a=0;a!=b[158].length;++a){if(b[158][a].charCodeAt(0)!==65533){d[b[158][a]]=40448+a;c[40448+a]=b[158][a]}}b[159]=''.split('');for(a=0;a!=b[159].length;++a){if(b[159][a].charCodeAt(0)!==65533){d[b[159][a]]=40704+a;c[40704+a]=b[159][a]}}b[160]=''.split('');for(a=0;a!=b[160].length;++a){if(b[160][a].charCodeAt(0)!==65533){d[b[160][a]]=40960+a;c[40960+a]=b[160][a]}}b[161]='\u3000\u2014\u2016\u2026\u2018\u2019\u201c\u201d\u2032\u2033\u2030\u203b'.split('');for(a=0;a!=b[161].length;++a){if(b[161][a].charCodeAt(0)!==65533){d[b[161][a]]=41216+a;c[41216+a]=b[161][a]}}b[162]=''.split('');for(a=0;a!=b[162].length;++a){if(b[162][a].charCodeAt(0)!==65533){d[b[162][a]]=41472+a;c[41472+a]=b[162][a]}}b[163]=''.split('');for(a=0;a!=b[163].length;++a){if(b[163][a].charCodeAt(0)!==65533){d[b[163][a]]=41728+a;c[41728+a]=b[163][a]}}b[164]=''.split('');for(a=0;a!=b[164].length;++a){if(b[164][a].charCodeAt(0)!==65533){d[b[164][a]]=41984+a;c[41984+a]=b[164][a]}}b[165]=''.split('');for(a=0;a!=b[165].length;++a){if(b[165][a].charCodeAt(0)!==65533){d[b[165][a]]=42240+a;c[42240+a]=b[165][a]}}b[166]=''.split('');for(a=0;a!=b[166].length;++a){if(b[166][a].charCodeAt(0)!==65533){d[b[166][a]]=42496+a;c[42496+a]=b[166][a]}}b[167]=''.split('');for(a=0;a!=b[167].length;++a){if(b[167][a].charCodeAt(0)!==65533){d[b[167][a]]=42752+a;c[42752+a]=b[167][a]}}b[168]='\u2013\u2015\u2025\u2035'.split('');for(a=0;a!=b[168].length;++a){if(b[168][a].charCodeAt(0)!==65533){d[b[168][a]]=43008+a;c[43008+a]=b[168][a]}}b[169]='\u2010'.split('');for(a=0;a!=b[169].length;++a){if(b[169][a].charCodeAt(0)!==65533){d[b[169][a]]=43264+a;c[43264+a]=b[169][a]}}b[170]=''.split('');for(a=0;a!=b[170].length;++a){if(b[170][a].charCodeAt(0)!==65533){d[b[170][a]]=43520+a;c[43520+a]=b[170][a]}}b[171]=''.split('');for(a=0;a!=b[171].length;++a){if(b[171][a].charCodeAt(0)!==65533){d[b[171][a]]=43776+a;c[43776+a]=b[171][a]}}b[172]=''.split('');for(a=0;a!=b[172].length;++a){if(b[172][a].charCodeAt(0)!==65533){d[b[172][a]]=44032+a;c[44032+a]=b[172][a]}}b[173]=''.split('');for(a=0;a!=b[173].length;++a){if(b[173][a].charCodeAt(0)!==65533){d[b[173][a]]=44288+a;c[44288+a]=b[173][a]}}b[174]=''.split('');for(a=0;a!=b[174].length;++a){if(b[174][a].charCodeAt(0)!==65533){d[b[174][a]]=44544+a;c[44544+a]=b[174][a]}}b[175]=''.split('');for(a=0;a!=b[175].length;++a){if(b[175][a].charCodeAt(0)!==65533){d[b[175][a]]=44800+a;c[44800+a]=b[175][a]}}b[176]=''.split('');for(a=0;a!=b[176].length;++a){if(b[176][a].charCodeAt(0)!==65533){d[b[176][a]]=45056+a;c[45056+a]=b[176][a]}}b[177]=''.split('');for(a=0;a!=b[177].length;++a){if(b[177][a].charCodeAt(0)!==65533){d[b[177][a]]=45312+a;c[45312+a]=b[177][a]}}b[178]=''.split('');for(a=0;a!=b[178].length;++a){if(b[178][a].charCodeAt(0)!==65533){d[b[178][a]]=45568+a;c[45568+a]=b[178][a]}}b[179]=''.split('');for(a=0;a!=b[179].length;++a){if(b[179][a].charCodeAt(0)!==65533){d[b[179][a]]=45824+a;c[45824+a]=b[179][a]}}b[180]=''.split('');for(a=0;a!=b[180].length;++a){if(b[180][a].charCodeAt(0)!==65533){d[b[180][a]]=46080+a;c[46080+a]=b[180][a]}}b[181]=''.split('');for(a=0;a!=b[181].length;++a){if(b[181][a].charCodeAt(0)!==65533){d[b[181][a]]=46336+a;c[46336+a]=b[181][a]}}b[182]=''.split('');for(a=0;a!=b[182].length;++a){if(b[182][a].charCodeAt(0)!==65533){d[b[182][a]]=46592+a;c[46592+a]=b[182][a]}}b[183]=''.split('');for(a=0;a!=b[183].length;++a){if(b[183][a].charCodeAt(0)!==65533){d[b[183][a]]=46848+a;c[46848+a]=b[183][a]}}b[184]=''.split('');for(a=0;a!=b[184].length;++a){if(b[184][a].charCodeAt(0)!==65533){d[b[184][a]]=47104+a;c[47104+a]=b[184][a]}}b[185]=''.split('');for(a=0;a!=b[185].length;++a){if(b[185][a].charCodeAt(0)!==65533){d[b[185][a]]=47360+a;c[47360+a]=b[185][a]}}b[186]=''.split('');for(a=0;a!=b[186].length;++a){if(b[186][a].charCodeAt(0)!==65533){d[b[186][a]]=47616+a;c[47616+a]=b[186][a]}}b[187]=''.split('');for(a=0;a!=b[187].length;++a){if(b[187][a].charCodeAt(0)!==65533){d[b[187][a]]=47872+a;c[47872+a]=b[187][a]}}b[188]=''.split('');for(a=0;a!=b[188].length;++a){if(b[188][a].charCodeAt(0)!==65533){d[b[188][a]]=48128+a;c[48128+a]=b[188][a]}}b[189]=''.split('');for(a=0;a!=b[189].length;++a){if(b[189][a].charCodeAt(0)!==65533){d[b[189][a]]=48384+a;c[48384+a]=b[189][a]}}b[190]=''.split('');for(a=0;a!=b[190].length;++a){if(b[190][a].charCodeAt(0)!==65533){d[b[190][a]]=48640+a;c[48640+a]=b[190][a]}}b[191]=''.split('');for(a=0;a!=b[191].length;++a){if(b[191][a].charCodeAt(0)!==65533){d[b[191][a]]=48896+a;c[48896+a]=b[191][a]}}b[192]=''.split('');for(a=0;a!=b[192].length;++a){if(b[192][a].charCodeAt(0)!==65533){d[b[192][a]]=49152+a;c[49152+a]=b[192][a]}}b[193]=''.split('');for(a=0;a!=b[193].length;++a){if(b[193][a].charCodeAt(0)!==65533){d[b[193][a]]=49408+a;c[49408+a]=b[193][a]}}b[194]=''.split('');for(a=0;a!=b[194].length;++a){if(b[194][a].charCodeAt(0)!==65533){d[b[194][a]]=49664+a;c[49664+a]=b[194][a]}}b[195]=''.split('');for(a=0;a!=b[195].length;++a){if(b[195][a].charCodeAt(0)!==65533){d[b[195][a]]=49920+a;c[49920+a]=b[195][a]}}b[196]=''.split('');for(a=0;a!=b[196].length;++a){if(b[196][a].charCodeAt(0)!==65533){d[b[196][a]]=50176+a;c[50176+a]=b[196][a]}}b[197]=''.split('');for(a=0;a!=b[197].length;++a){if(b[197][a].charCodeAt(0)!==65533){d[b[197][a]]=50432+a;c[50432+a]=b[197][a]}}b[198]=''.split('');for(a=0;a!=b[198].length;++a){if(b[198][a].charCodeAt(0)!==65533){d[b[198][a]]=50688+a;c[50688+a]=b[198][a]}}b[199]=''.split('');for(a=0;a!=b[199].length;++a){if(b[199][a].charCodeAt(0)!==65533){d[b[199][a]]=50944+a;c[50944+a]=b[199][a]}}b[200]=''.split('');for(a=0;a!=b[200].length;++a){if(b[200][a].charCodeAt(0)!==65533){d[b[200][a]]=51200+a;c[51200+a]=b[200][a]}}b[201]=''.split('');for(a=0;a!=b[201].length;++a){if(b[201][a].charCodeAt(0)!==65533){d[b[201][a]]=51456+a;c[51456+a]=b[201][a]}}b[202]=''.split('');for(a=0;a!=b[202].length;++a){if(b[202][a].charCodeAt(0)!==65533){d[b[202][a]]=51712+a;c[51712+a]=b[202][a]}}b[203]=''.split('');for(a=0;a!=b[203].length;++a){if(b[203][a].charCodeAt(0)!==65533){d[b[203][a]]=51968+a;c[51968+a]=b[203][a]}}b[204]=''.split('');for(a=0;a!=b[204].length;++a){if(b[204][a].charCodeAt(0)!==65533){d[b[204][a]]=52224+a;c[52224+a]=b[204][a]}}b[205]=''.split('');for(a=0;a!=b[205].length;++a){if(b[205][a].charCodeAt(0)!==65533){d[b[205][a]]=52480+a;c[52480+a]=b[205][a]}}b[206]=''.split('');for(a=0;a!=b[206].length;++a){if(b[206][a].charCodeAt(0)!==65533){d[b[206][a]]=52736+a;c[52736+a]=b[206][a]}}b[207]=''.split('');for(a=0;a!=b[207].length;++a){if(b[207][a].charCodeAt(0)!==65533){d[b[207][a]]=52992+a;c[52992+a]=b[207][a]}}b[208]=''.split('');for(a=0;a!=b[208].length;++a){if(b[208][a].charCodeAt(0)!==65533){d[b[208][a]]=53248+a;c[53248+a]=b[208][a]}}b[209]=''.split('');for(a=0;a!=b[209].length;++a){if(b[209][a].charCodeAt(0)!==65533){d[b[209][a]]=53504+a;c[53504+a]=b[209][a]}}b[210]=''.split('');for(a=0;a!=b[210].length;++a){if(b[210][a].charCodeAt(0)!==65533){d[b[210][a]]=53760+a;c[53760+a]=b[210][a]}}b[211]=''.split('');for(a=0;a!=b[211].length;++a){if(b[211][a].charCodeAt(0)!==65533){d[b[211][a]]=54016+a;c[54016+a]=b[211][a]}}b[212]=''.split('');for(a=0;a!=b[212].length;++a){if(b[212][a].charCodeAt(0)!==65533){d[b[212][a]]=54272+a;c[54272+a]=b[212][a]}}b[213]=''.split('');for(a=0;a!=b[213].length;++a){if(b[213][a].charCodeAt(0)!==65533){d[b[213][a]]=54528+a;c[54528+a]=b[213][a]}}b[214]=''.split('');for(a=0;a!=b[214].length;++a){if(b[214][a].charCodeAt(0)!==65533){d[b[214][a]]=54784+a;c[54784+a]=b[214][a]}}b[215]=''.split('');for(a=0;a!=b[215].length;++a){if(b[215][a].charCodeAt(0)!==65533){d[b[215][a]]=55040+a;c[55040+a]=b[215][a]}}b[216]=''.split('');for(a=0;a!=b[216].length;++a){if(b[216][a].charCodeAt(0)!==65533){d[b[216][a]]=55296+a;c[55296+a]=b[216][a]}}b[217]=''.split('');for(a=0;a!=b[217].length;++a){if(b[217][a].charCodeAt(0)!==65533){d[b[217][a]]=55552+a;c[55552+a]=b[217][a]}}b[218]=''.split('');for(a=0;a!=b[218].length;++a){if(b[218][a].charCodeAt(0)!==65533){d[b[218][a]]=55808+a;c[55808+a]=b[218][a]}}b[219]=''.split('');for(a=0;a!=b[219].length;++a){if(b[219][a].charCodeAt(0)!==65533){d[b[219][a]]=56064+a;c[56064+a]=b[219][a]}}b[220]=''.split('');for(a=0;a!=b[220].length;++a){if(b[220][a].charCodeAt(0)!==65533){d[b[220][a]]=56320+a;c[56320+a]=b[220][a]}}b[221]=''.split('');for(a=0;a!=b[221].length;++a){if(b[221][a].charCodeAt(0)!==65533){d[b[221][a]]=56576+a;c[56576+a]=b[221][a]}}b[222]=''.split('');for(a=0;a!=b[222].length;++a){if(b[222][a].charCodeAt(0)!==65533){d[b[222][a]]=56832+a;c[56832+a]=b[222][a]}}b[223]=''.split('');for(a=0;a!=b[223].length;++a){if(b[223][a].charCodeAt(0)!==65533){d[b[223][a]]=57088+a;c[57088+a]=b[223][a]}}b[224]=''.split('');for(a=0;a!=b[224].length;++a){if(b[224][a].charCodeAt(0)!==65533){d[b[224][a]]=57344+a;c[57344+a]=b[224][a]}}b[225]=''.split('');for(a=0;a!=b[225].length;++a){if(b[225][a].charCodeAt(0)!==65533){d[b[225][a]]=57600+a;c[57600+a]=b[225][a]}}b[226]=''.split('');for(a=0;a!=b[226].length;++a){if(b[226][a].charCodeAt(0)!==65533){d[b[226][a]]=57856+a;c[57856+a]=b[226][a]}}b[227]=''.split('');for(a=0;a!=b[227].length;++a){if(b[227][a].charCodeAt(0)!==65533){d[b[227][a]]=58112+a;c[58112+a]=b[227][a]}}b[228]=''.split('');for(a=0;a!=b[228].length;++a){if(b[228][a].charCodeAt(0)!==65533){d[b[228][a]]=58368+a;c[58368+a]=b[228][a]}}b[229]=''.split('');for(a=0;a!=b[229].length;++a){if(b[229][a].charCodeAt(0)!==65533){d[b[229][a]]=58624+a;c[58624+a]=b[229][a]}}b[230]=''.split('');for(a=0;a!=b[230].length;++a){if(b[230][a].charCodeAt(0)!==65533){d[b[230][a]]=58880+a;c[58880+a]=b[230][a]}}b[231]=''.split('');for(a=0;a!=b[231].length;++a){if(b[231][a].charCodeAt(0)!==65533){d[b[231][a]]=59136+a;c[59136+a]=b[231][a]}}b[232]=''.split('');for(a=0;a!=b[232].length;++a){if(b[232][a].charCodeAt(0)!==65533){d[b[232][a]]=59392+a;c[59392+a]=b[232][a]}}b[233]=''.split('');for(a=0;a!=b[233].length;++a){if(b[233][a].charCodeAt(0)!==65533){d[b[233][a]]=59648+a;c[59648+a]=b[233][a]}}b[234]=''.split('');for(a=0;a!=b[234].length;++a){if(b[234][a].charCodeAt(0)!==65533){d[b[234][a]]=59904+a;c[59904+a]=b[234][a]}}b[235]=''.split('');for(a=0;a!=b[235].length;++a){if(b[235][a].charCodeAt(0)!==65533){d[b[235][a]]=60160+a;c[60160+a]=b[235][a]}}b[236]=''.split('');for(a=0;a!=b[236].length;++a){if(b[236][a].charCodeAt(0)!==65533){d[b[236][a]]=60416+a;c[60416+a]=b[236][a]}}b[237]=''.split('');for(a=0;a!=b[237].length;++a){if(b[237][a].charCodeAt(0)!==65533){d[b[237][a]]=60672+a;c[60672+a]=b[237][a]}}b[238]=''.split('');for(a=0;a!=b[238].length;++a){if(b[238][a].charCodeAt(0)!==65533){d[b[238][a]]=60928+a;c[60928+a]=b[238][a]}}b[239]=''.split('');for(a=0;a!=b[239].length;++a){if(b[239][a].charCodeAt(0)!==65533){d[b[239][a]]=61184+a;c[61184+a]=b[239][a]}}b[240]=''.split('');for(a=0;a!=b[240].length;++a){if(b[240][a].charCodeAt(0)!==65533){d[b[240][a]]=61440+a;c[61440+a]=b[240][a]}}b[241]=''.split('');for(a=0;a!=b[241].length;++a){if(b[241][a].charCodeAt(0)!==65533){d[b[241][a]]=61696+a;c[61696+a]=b[241][a]}}b[242]=''.split('');for(a=0;a!=b[242].length;++a){if(b[242][a].charCodeAt(0)!==65533){d[b[242][a]]=61952+a;c[61952+a]=b[242][a]}}b[243]=''.split('');for(a=0;a!=b[243].length;++a){if(b[243][a].charCodeAt(0)!==65533){d[b[243][a]]=62208+a;c[62208+a]=b[243][a]}}b[244]=''.split('');for(a=0;a!=b[244].length;++a){if(b[244][a].charCodeAt(0)!==65533){d[b[244][a]]=62464+a;c[62464+a]=b[244][a]}}b[245]=''.split('');for(a=0;a!=b[245].length;++a){if(b[245][a].charCodeAt(0)!==65533){d[b[245][a]]=62720+a;c[62720+a]=b[245][a]}}b[246]=''.split('');for(a=0;a!=b[246].length;++a){if(b[246][a].charCodeAt(0)!==65533){d[b[246][a]]=62976+a;c[62976+a]=b[246][a]}}b[247]=''.split('');for(a=0;a!=b[247].length;++a){if(b[247][a].charCodeAt(0)!==65533){d[b[247][a]]=63232+a;c[63232+a]=b[247][a]}}b[248]=''.split('');for(a=0;a!=b[248].length;++a){if(b[248][a].charCodeAt(0)!==65533){d[b[248][a]]=63488+a;c[63488+a]=b[248][a]}}b[249]=''.split('');for(a=0;a!=b[249].length;++a){if(b[249][a].charCodeAt(0)!==65533){d[b[249][a]]=63744+a;c[63744+a]=b[249][a]}}b[250]=''.split('');for(a=0;a!=b[250].length;++a){if(b[250][a].charCodeAt(0)!==65533){d[b[250][a]]=64000+a;c[64000+a]=b[250][a]}}b[251]=''.split('');for(a=0;a!=b[251].length;++a){if(b[251][a].charCodeAt(0)!==65533){d[b[251][a]]=64256+a;c[64256+a]=b[251][a]}}b[252]=''.split('');for(a=0;a!=b[252].length;++a){if(b[252][a].charCodeAt(0)!==65533){d[b[252][a]]=64512+a;c[64512+a]=b[252][a]}}b[253]=''.split('');for(a=0;a!=b[253].length;++a){if(b[253][a].charCodeAt(0)!==65533){d[b[253][a]]=64768+a;c[64768+a]=b[253][a]}}b[254]=''.split('');for(a=0;a!=b[254].length;++a){if(b[254][a].charCodeAt(0)!==65533){d[b[254][a]]=65024+a;c[65024+a]=b[254][a]}}return {'enc':d,'dec':c}}();cptable[949]=function(){var c=[],d={},b=[],a;b[0]='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~'.split('');for(a=0;a!=b[0].length;++a){if(b[0][a].charCodeAt(0)!==65533){d[b[0][a]]=0+a;c[0+a]=b[0][a]}}b[129]=''.split('');for(a=0;a!=b[129].length;++a){if(b[129][a].charCodeAt(0)!==65533){d[b[129][a]]=33024+a;c[33024+a]=b[129][a]}}b[130]=''.split('');for(a=0;a!=b[130].length;++a){if(b[130][a].charCodeAt(0)!==65533){d[b[130][a]]=33280+a;c[33280+a]=b[130][a]}}b[131]=''.split('');for(a=0;a!=b[131].length;++a){if(b[131][a].charCodeAt(0)!==65533){d[b[131][a]]=33536+a;c[33536+a]=b[131][a]}}b[132]=''.split('');for(a=0;a!=b[132].length;++a){if(b[132][a].charCodeAt(0)!==65533){d[b[132][a]]=33792+a;c[33792+a]=b[132][a]}}b[133]=''.split('');for(a=0;a!=b[133].length;++a){if(b[133][a].charCodeAt(0)!==65533){d[b[133][a]]=34048+a;c[34048+a]=b[133][a]}}b[134]=''.split('');for(a=0;a!=b[134].length;++a){if(b[134][a].charCodeAt(0)!==65533){d[b[134][a]]=34304+a;c[34304+a]=b[134][a]}}b[135]=''.split('');for(a=0;a!=b[135].length;++a){if(b[135][a].charCodeAt(0)!==65533){d[b[135][a]]=34560+a;c[34560+a]=b[135][a]}}b[136]=''.split('');for(a=0;a!=b[136].length;++a){if(b[136][a].charCodeAt(0)!==65533){d[b[136][a]]=34816+a;c[34816+a]=b[136][a]}}b[137]=''.split('');for(a=0;a!=b[137].length;++a){if(b[137][a].charCodeAt(0)!==65533){d[b[137][a]]=35072+a;c[35072+a]=b[137][a]}}b[138]=''.split('');for(a=0;a!=b[138].length;++a){if(b[138][a].charCodeAt(0)!==65533){d[b[138][a]]=35328+a;c[35328+a]=b[138][a]}}b[139]=''.split('');for(a=0;a!=b[139].length;++a){if(b[139][a].charCodeAt(0)!==65533){d[b[139][a]]=35584+a;c[35584+a]=b[139][a]}}b[140]=''.split('');for(a=0;a!=b[140].length;++a){if(b[140][a].charCodeAt(0)!==65533){d[b[140][a]]=35840+a;c[35840+a]=b[140][a]}}b[141]=''.split('');for(a=0;a!=b[141].length;++a){if(b[141][a].charCodeAt(0)!==65533){d[b[141][a]]=36096+a;c[36096+a]=b[141][a]}}b[142]=''.split('');for(a=0;a!=b[142].length;++a){if(b[142][a].charCodeAt(0)!==65533){d[b[142][a]]=36352+a;c[36352+a]=b[142][a]}}b[143]=''.split('');for(a=0;a!=b[143].length;++a){if(b[143][a].charCodeAt(0)!==65533){d[b[143][a]]=36608+a;c[36608+a]=b[143][a]}}b[144]=''.split('');for(a=0;a!=b[144].length;++a){if(b[144][a].charCodeAt(0)!==65533){d[b[144][a]]=36864+a;c[36864+a]=b[144][a]}}b[145]=''.split('');for(a=0;a!=b[145].length;++a){if(b[145][a].charCodeAt(0)!==65533){d[b[145][a]]=37120+a;c[37120+a]=b[145][a]}}b[146]=''.split('');for(a=0;a!=b[146].length;++a){if(b[146][a].charCodeAt(0)!==65533){d[b[146][a]]=37376+a;c[37376+a]=b[146][a]}}b[147]=''.split('');for(a=0;a!=b[147].length;++a){if(b[147][a].charCodeAt(0)!==65533){d[b[147][a]]=37632+a;c[37632+a]=b[147][a]}}b[148]=''.split('');for(a=0;a!=b[148].length;++a){if(b[148][a].charCodeAt(0)!==65533){d[b[148][a]]=37888+a;c[37888+a]=b[148][a]}}b[149]=''.split('');for(a=0;a!=b[149].length;++a){if(b[149][a].charCodeAt(0)!==65533){d[b[149][a]]=38144+a;c[38144+a]=b[149][a]}}b[150]=''.split('');for(a=0;a!=b[150].length;++a){if(b[150][a].charCodeAt(0)!==65533){d[b[150][a]]=38400+a;c[38400+a]=b[150][a]}}b[151]=''.split('');for(a=0;a!=b[151].length;++a){if(b[151][a].charCodeAt(0)!==65533){d[b[151][a]]=38656+a;c[38656+a]=b[151][a]}}b[152]=''.split('');for(a=0;a!=b[152].length;++a){if(b[152][a].charCodeAt(0)!==65533){d[b[152][a]]=38912+a;c[38912+a]=b[152][a]}}b[153]=''.split('');for(a=0;a!=b[153].length;++a){if(b[153][a].charCodeAt(0)!==65533){d[b[153][a]]=39168+a;c[39168+a]=b[153][a]}}b[154]=''.split('');for(a=0;a!=b[154].length;++a){if(b[154][a].charCodeAt(0)!==65533){d[b[154][a]]=39424+a;c[39424+a]=b[154][a]}}b[155]=''.split('');for(a=0;a!=b[155].length;++a){if(b[155][a].charCodeAt(0)!==65533){d[b[155][a]]=39680+a;c[39680+a]=b[155][a]}}b[156]=''.split('');for(a=0;a!=b[156].length;++a){if(b[156][a].charCodeAt(0)!==65533){d[b[156][a]]=39936+a;c[39936+a]=b[156][a]}}b[157]=''.split('');for(a=0;a!=b[157].length;++a){if(b[157][a].charCodeAt(0)!==65533){d[b[157][a]]=40192+a;c[40192+a]=b[157][a]}}b[158]=''.split('');for(a=0;a!=b[158].length;++a){if(b[158][a].charCodeAt(0)!==65533){d[b[158][a]]=40448+a;c[40448+a]=b[158][a]}}b[159]=''.split('');for(a=0;a!=b[159].length;++a){if(b[159][a].charCodeAt(0)!==65533){d[b[159][a]]=40704+a;c[40704+a]=b[159][a]}}b[160]=''.split('');for(a=0;a!=b[160].length;++a){if(b[160][a].charCodeAt(0)!==65533){d[b[160][a]]=40960+a;c[40960+a]=b[160][a]}}b[161]='\u3000\u2025\u2026\u2015\u2018\u2019\u201c\u201d\u2032\u2033\u203b'.split('');for(a=0;a!=b[161].length;++a){if(b[161][a].charCodeAt(0)!==65533){d[b[161][a]]=41216+a;c[41216+a]=b[161][a]}}b[162]='\u2030\u2020\u2021'.split('');for(a=0;a!=b[162].length;++a){if(b[162][a].charCodeAt(0)!==65533){d[b[162][a]]=41472+a;c[41472+a]=b[162][a]}}b[163]=''.split('');for(a=0;a!=b[163].length;++a){if(b[163][a].charCodeAt(0)!==65533){d[b[163][a]]=41728+a;c[41728+a]=b[163][a]}}b[164]=''.split('');for(a=0;a!=b[164].length;++a){if(b[164][a].charCodeAt(0)!==65533){d[b[164][a]]=41984+a;c[41984+a]=b[164][a]}}b[165]=''.split('');for(a=0;a!=b[165].length;++a){if(b[165][a].charCodeAt(0)!==65533){d[b[165][a]]=42240+a;c[42240+a]=b[165][a]}}b[166]=''.split('');for(a=0;a!=b[166].length;++a){if(b[166][a].charCodeAt(0)!==65533){d[b[166][a]]=42496+a;c[42496+a]=b[166][a]}}b[167]=''.split('');for(a=0;a!=b[167].length;++a){if(b[167][a].charCodeAt(0)!==65533){d[b[167][a]]=42752+a;c[42752+a]=b[167][a]}}b[168]=''.split('');for(a=0;a!=b[168].length;++a){if(b[168][a].charCodeAt(0)!==65533){d[b[168][a]]=43008+a;c[43008+a]=b[168][a]}}b[169]=''.split('');for(a=0;a!=b[169].length;++a){if(b[169][a].charCodeAt(0)!==65533){d[b[169][a]]=43264+a;c[43264+a]=b[169][a]}}b[170]=''.split('');for(a=0;a!=b[170].length;++a){if(b[170][a].charCodeAt(0)!==65533){d[b[170][a]]=43520+a;c[43520+a]=b[170][a]}}b[171]=''.split('');for(a=0;a!=b[171].length;++a){if(b[171][a].charCodeAt(0)!==65533){d[b[171][a]]=43776+a;c[43776+a]=b[171][a]}}b[172]=''.split('');for(a=0;a!=b[172].length;++a){if(b[172][a].charCodeAt(0)!==65533){d[b[172][a]]=44032+a;c[44032+a]=b[172][a]}}b[173]=''.split('');for(a=0;a!=b[173].length;++a){if(b[173][a].charCodeAt(0)!==65533){d[b[173][a]]=44288+a;c[44288+a]=b[173][a]}}b[174]=''.split('');for(a=0;a!=b[174].length;++a){if(b[174][a].charCodeAt(0)!==65533){d[b[174][a]]=44544+a;c[44544+a]=b[174][a]}}b[175]=''.split('');for(a=0;a!=b[175].length;++a){if(b[175][a].charCodeAt(0)!==65533){d[b[175][a]]=44800+a;c[44800+a]=b[175][a]}}b[176]=''.split('');for(a=0;a!=b[176].length;++a){if(b[176][a].charCodeAt(0)!==65533){d[b[176][a]]=45056+a;c[45056+a]=b[176][a]}}b[177]=''.split('');for(a=0;a!=b[177].length;++a){if(b[177][a].charCodeAt(0)!==65533){d[b[177][a]]=45312+a;c[45312+a]=b[177][a]}}b[178]=''.split('');for(a=0;a!=b[178].length;++a){if(b[178][a].charCodeAt(0)!==65533){d[b[178][a]]=45568+a;c[45568+a]=b[178][a]}}b[179]=''.split('');for(a=0;a!=b[179].length;++a){if(b[179][a].charCodeAt(0)!==65533){d[b[179][a]]=45824+a;c[45824+a]=b[179][a]}}b[180]=''.split('');for(a=0;a!=b[180].length;++a){if(b[180][a].charCodeAt(0)!==65533){d[b[180][a]]=46080+a;c[46080+a]=b[180][a]}}b[181]=''.split('');for(a=0;a!=b[181].length;++a){if(b[181][a].charCodeAt(0)!==65533){d[b[181][a]]=46336+a;c[46336+a]=b[181][a]}}b[182]=''.split('');for(a=0;a!=b[182].length;++a){if(b[182][a].charCodeAt(0)!==65533){d[b[182][a]]=46592+a;c[46592+a]=b[182][a]}}b[183]=''.split('');for(a=0;a!=b[183].length;++a){if(b[183][a].charCodeAt(0)!==65533){d[b[183][a]]=46848+a;c[46848+a]=b[183][a]}}b[184]=''.split('');for(a=0;a!=b[184].length;++a){if(b[184][a].charCodeAt(0)!==65533){d[b[184][a]]=47104+a;c[47104+a]=b[184][a]}}b[185]=''.split('');for(a=0;a!=b[185].length;++a){if(b[185][a].charCodeAt(0)!==65533){d[b[185][a]]=47360+a;c[47360+a]=b[185][a]}}b[186]=''.split('');for(a=0;a!=b[186].length;++a){if(b[186][a].charCodeAt(0)!==65533){d[b[186][a]]=47616+a;c[47616+a]=b[186][a]}}b[187]=''.split('');for(a=0;a!=b[187].length;++a){if(b[187][a].charCodeAt(0)!==65533){d[b[187][a]]=47872+a;c[47872+a]=b[187][a]}}b[188]=''.split('');for(a=0;a!=b[188].length;++a){if(b[188][a].charCodeAt(0)!==65533){d[b[188][a]]=48128+a;c[48128+a]=b[188][a]}}b[189]=''.split('');for(a=0;a!=b[189].length;++a){if(b[189][a].charCodeAt(0)!==65533){d[b[189][a]]=48384+a;c[48384+a]=b[189][a]}}b[190]=''.split('');for(a=0;a!=b[190].length;++a){if(b[190][a].charCodeAt(0)!==65533){d[b[190][a]]=48640+a;c[48640+a]=b[190][a]}}b[191]=''.split('');for(a=0;a!=b[191].length;++a){if(b[191][a].charCodeAt(0)!==65533){d[b[191][a]]=48896+a;c[48896+a]=b[191][a]}}b[192]=''.split('');for(a=0;a!=b[192].length;++a){if(b[192][a].charCodeAt(0)!==65533){d[b[192][a]]=49152+a;c[49152+a]=b[192][a]}}b[193]=''.split('');for(a=0;a!=b[193].length;++a){if(b[193][a].charCodeAt(0)!==65533){d[b[193][a]]=49408+a;c[49408+a]=b[193][a]}}b[194]=''.split('');for(a=0;a!=b[194].length;++a){if(b[194][a].charCodeAt(0)!==65533){d[b[194][a]]=49664+a;c[49664+a]=b[194][a]}}b[195]=''.split('');for(a=0;a!=b[195].length;++a){if(b[195][a].charCodeAt(0)!==65533){d[b[195][a]]=49920+a;c[49920+a]=b[195][a]}}b[196]=''.split('');for(a=0;a!=b[196].length;++a){if(b[196][a].charCodeAt(0)!==65533){d[b[196][a]]=50176+a;c[50176+a]=b[196][a]}}b[197]=''.split('');for(a=0;a!=b[197].length;++a){if(b[197][a].charCodeAt(0)!==65533){d[b[197][a]]=50432+a;c[50432+a]=b[197][a]}}b[198]=''.split('');for(a=0;a!=b[198].length;++a){if(b[198][a].charCodeAt(0)!==65533){d[b[198][a]]=50688+a;c[50688+a]=b[198][a]}}b[199]=''.split('');for(a=0;a!=b[199].length;++a){if(b[199][a].charCodeAt(0)!==65533){d[b[199][a]]=50944+a;c[50944+a]=b[199][a]}}b[200]=''.split('');for(a=0;a!=b[200].length;++a){if(b[200][a].charCodeAt(0)!==65533){d[b[200][a]]=51200+a;c[51200+a]=b[200][a]}}b[202]=''.split('');for(a=0;a!=b[202].length;++a){if(b[202][a].charCodeAt(0)!==65533){d[b[202][a]]=51712+a;c[51712+a]=b[202][a]}}b[203]=''.split('');for(a=0;a!=b[203].length;++a){if(b[203][a].charCodeAt(0)!==65533){d[b[203][a]]=51968+a;c[51968+a]=b[203][a]}}b[204]=''.split('');for(a=0;a!=b[204].length;++a){if(b[204][a].charCodeAt(0)!==65533){d[b[204][a]]=52224+a;c[52224+a]=b[204][a]}}b[205]=''.split('');for(a=0;a!=b[205].length;++a){if(b[205][a].charCodeAt(0)!==65533){d[b[205][a]]=52480+a;c[52480+a]=b[205][a]}}b[206]=''.split('');for(a=0;a!=b[206].length;++a){if(b[206][a].charCodeAt(0)!==65533){d[b[206][a]]=52736+a;c[52736+a]=b[206][a]}}b[207]=''.split('');for(a=0;a!=b[207].length;++a){if(b[207][a].charCodeAt(0)!==65533){d[b[207][a]]=52992+a;c[52992+a]=b[207][a]}}b[208]=''.split('');for(a=0;a!=b[208].length;++a){if(b[208][a].charCodeAt(0)!==65533){d[b[208][a]]=53248+a;c[53248+a]=b[208][a]}}b[209]=''.split('');for(a=0;a!=b[209].length;++a){if(b[209][a].charCodeAt(0)!==65533){d[b[209][a]]=53504+a;c[53504+a]=b[209][a]}}b[210]=''.split('');for(a=0;a!=b[210].length;++a){if(b[210][a].charCodeAt(0)!==65533){d[b[210][a]]=53760+a;c[53760+a]=b[210][a]}}b[211]=''.split('');for(a=0;a!=b[211].length;++a){if(b[211][a].charCodeAt(0)!==65533){d[b[211][a]]=54016+a;c[54016+a]=b[211][a]}}b[212]=''.split('');for(a=0;a!=b[212].length;++a){if(b[212][a].charCodeAt(0)!==65533){d[b[212][a]]=54272+a;c[54272+a]=b[212][a]}}b[213]=''.split('');for(a=0;a!=b[213].length;++a){if(b[213][a].charCodeAt(0)!==65533){d[b[213][a]]=54528+a;c[54528+a]=b[213][a]}}b[214]=''.split('');for(a=0;a!=b[214].length;++a){if(b[214][a].charCodeAt(0)!==65533){d[b[214][a]]=54784+a;c[54784+a]=b[214][a]}}b[215]=''.split('');for(a=0;a!=b[215].length;++a){if(b[215][a].charCodeAt(0)!==65533){d[b[215][a]]=55040+a;c[55040+a]=b[215][a]}}b[216]=''.split('');for(a=0;a!=b[216].length;++a){if(b[216][a].charCodeAt(0)!==65533){d[b[216][a]]=55296+a;c[55296+a]=b[216][a]}}b[217]=''.split('');for(a=0;a!=b[217].length;++a){if(b[217][a].charCodeAt(0)!==65533){d[b[217][a]]=55552+a;c[55552+a]=b[217][a]}}b[218]=''.split('');for(a=0;a!=b[218].length;++a){if(b[218][a].charCodeAt(0)!==65533){d[b[218][a]]=55808+a;c[55808+a]=b[218][a]}}b[219]=''.split('');for(a=0;a!=b[219].length;++a){if(b[219][a].charCodeAt(0)!==65533){d[b[219][a]]=56064+a;c[56064+a]=b[219][a]}}b[220]=''.split('');for(a=0;a!=b[220].length;++a){if(b[220][a].charCodeAt(0)!==65533){d[b[220][a]]=56320+a;c[56320+a]=b[220][a]}}b[221]=''.split('');for(a=0;a!=b[221].length;++a){if(b[221][a].charCodeAt(0)!==65533){d[b[221][a]]=56576+a;c[56576+a]=b[221][a]}}b[222]=''.split('');for(a=0;a!=b[222].length;++a){if(b[222][a].charCodeAt(0)!==65533){d[b[222][a]]=56832+a;c[56832+a]=b[222][a]}}b[223]=''.split('');for(a=0;a!=b[223].length;++a){if(b[223][a].charCodeAt(0)!==65533){d[b[223][a]]=57088+a;c[57088+a]=b[223][a]}}b[224]=''.split('');for(a=0;a!=b[224].length;++a){if(b[224][a].charCodeAt(0)!==65533){d[b[224][a]]=57344+a;c[57344+a]=b[224][a]}}b[225]=''.split('');for(a=0;a!=b[225].length;++a){if(b[225][a].charCodeAt(0)!==65533){d[b[225][a]]=57600+a;c[57600+a]=b[225][a]}}b[226]=''.split('');for(a=0;a!=b[226].length;++a){if(b[226][a].charCodeAt(0)!==65533){d[b[226][a]]=57856+a;c[57856+a]=b[226][a]}}b[227]=''.split('');for(a=0;a!=b[227].length;++a){if(b[227][a].charCodeAt(0)!==65533){d[b[227][a]]=58112+a;c[58112+a]=b[227][a]}}b[228]=''.split('');for(a=0;a!=b[228].length;++a){if(b[228][a].charCodeAt(0)!==65533){d[b[228][a]]=58368+a;c[58368+a]=b[228][a]}}b[229]=''.split('');for(a=0;a!=b[229].length;++a){if(b[229][a].charCodeAt(0)!==65533){d[b[229][a]]=58624+a;c[58624+a]=b[229][a]}}b[230]=''.split('');for(a=0;a!=b[230].length;++a){if(b[230][a].charCodeAt(0)!==65533){d[b[230][a]]=58880+a;c[58880+a]=b[230][a]}}b[231]=''.split('');for(a=0;a!=b[231].length;++a){if(b[231][a].charCodeAt(0)!==65533){d[b[231][a]]=59136+a;c[59136+a]=b[231][a]}}b[232]=''.split('');for(a=0;a!=b[232].length;++a){if(b[232][a].charCodeAt(0)!==65533){d[b[232][a]]=59392+a;c[59392+a]=b[232][a]}}b[233]=''.split('');for(a=0;a!=b[233].length;++a){if(b[233][a].charCodeAt(0)!==65533){d[b[233][a]]=59648+a;c[59648+a]=b[233][a]}}b[234]=''.split('');for(a=0;a!=b[234].length;++a){if(b[234][a].charCodeAt(0)!==65533){d[b[234][a]]=59904+a;c[59904+a]=b[234][a]}}b[235]=''.split('');for(a=0;a!=b[235].length;++a){if(b[235][a].charCodeAt(0)!==65533){d[b[235][a]]=60160+a;c[60160+a]=b[235][a]}}b[236]=''.split('');for(a=0;a!=b[236].length;++a){if(b[236][a].charCodeAt(0)!==65533){d[b[236][a]]=60416+a;c[60416+a]=b[236][a]}}b[237]=''.split('');for(a=0;a!=b[237].length;++a){if(b[237][a].charCodeAt(0)!==65533){d[b[237][a]]=60672+a;c[60672+a]=b[237][a]}}b[238]=''.split('');for(a=0;a!=b[238].length;++a){if(b[238][a].charCodeAt(0)!==65533){d[b[238][a]]=60928+a;c[60928+a]=b[238][a]}}b[239]=''.split('');for(a=0;a!=b[239].length;++a){if(b[239][a].charCodeAt(0)!==65533){d[b[239][a]]=61184+a;c[61184+a]=b[239][a]}}b[240]=''.split('');for(a=0;a!=b[240].length;++a){if(b[240][a].charCodeAt(0)!==65533){d[b[240][a]]=61440+a;c[61440+a]=b[240][a]}}b[241]=''.split('');for(a=0;a!=b[241].length;++a){if(b[241][a].charCodeAt(0)!==65533){d[b[241][a]]=61696+a;c[61696+a]=b[241][a]}}b[242]=''.split('');for(a=0;a!=b[242].length;++a){if(b[242][a].charCodeAt(0)!==65533){d[b[242][a]]=61952+a;c[61952+a]=b[242][a]}}b[243]=''.split('');for(a=0;a!=b[243].length;++a){if(b[243][a].charCodeAt(0)!==65533){d[b[243][a]]=62208+a;c[62208+a]=b[243][a]}}b[244]=''.split('');for(a=0;a!=b[244].length;++a){if(b[244][a].charCodeAt(0)!==65533){d[b[244][a]]=62464+a;c[62464+a]=b[244][a]}}b[245]=''.split('');for(a=0;a!=b[245].length;++a){if(b[245][a].charCodeAt(0)!==65533){d[b[245][a]]=62720+a;c[62720+a]=b[245][a]}}b[246]=''.split('');for(a=0;a!=b[246].length;++a){if(b[246][a].charCodeAt(0)!==65533){d[b[246][a]]=62976+a;c[62976+a]=b[246][a]}}b[247]=''.split('');for(a=0;a!=b[247].length;++a){if(b[247][a].charCodeAt(0)!==65533){d[b[247][a]]=63232+a;c[63232+a]=b[247][a]}}b[248]=''.split('');for(a=0;a!=b[248].length;++a){if(b[248][a].charCodeAt(0)!==65533){d[b[248][a]]=63488+a;c[63488+a]=b[248][a]}}b[249]=''.split('');for(a=0;a!=b[249].length;++a){if(b[249][a].charCodeAt(0)!==65533){d[b[249][a]]=63744+a;c[63744+a]=b[249][a]}}b[250]=''.split('');for(a=0;a!=b[250].length;++a){if(b[250][a].charCodeAt(0)!==65533){d[b[250][a]]=64000+a;c[64000+a]=b[250][a]}}b[251]=''.split('');for(a=0;a!=b[251].length;++a){if(b[251][a].charCodeAt(0)!==65533){d[b[251][a]]=64256+a;c[64256+a]=b[251][a]}}b[252]=''.split('');for(a=0;a!=b[252].length;++a){if(b[252][a].charCodeAt(0)!==65533){d[b[252][a]]=64512+a;c[64512+a]=b[252][a]}}b[253]=''.split('');for(a=0;a!=b[253].length;++a){if(b[253][a].charCodeAt(0)!==65533){d[b[253][a]]=64768+a;c[64768+a]=b[253][a]}}return {'enc':d,'dec':c}}();cptable[950]=function(){var c=[],d={},b=[],a;b[0]='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~'.split('');for(a=0;a!=b[0].length;++a){if(b[0][a].charCodeAt(0)!==65533){d[b[0][a]]=0+a;c[0+a]=b[0][a]}}b[161]='\u3000\u2027\u2026\u2025\u2013\u2014\u2018\u2019\u201c\u201d\u2035\u2032\u203b'.split('');for(a=0;a!=b[161].length;++a){if(b[161][a].charCodeAt(0)!==65533){d[b[161][a]]=41216+a;c[41216+a]=b[161][a]}}b[162]=''.split('');for(a=0;a!=b[162].length;++a){if(b[162][a].charCodeAt(0)!==65533){d[b[162][a]]=41472+a;c[41472+a]=b[162][a]}}b[163]=''.split('');for(a=0;a!=b[163].length;++a){if(b[163][a].charCodeAt(0)!==65533){d[b[163][a]]=41728+a;c[41728+a]=b[163][a]}}b[164]=''.split('');for(a=0;a!=b[164].length;++a){if(b[164][a].charCodeAt(0)!==65533){d[b[164][a]]=41984+a;c[41984+a]=b[164][a]}}b[165]=''.split('');for(a=0;a!=b[165].length;++a){if(b[165][a].charCodeAt(0)!==65533){d[b[165][a]]=42240+a;c[42240+a]=b[165][a]}}b[166]=''.split('');for(a=0;a!=b[166].length;++a){if(b[166][a].charCodeAt(0)!==65533){d[b[166][a]]=42496+a;c[42496+a]=b[166][a]}}b[167]=''.split('');for(a=0;a!=b[167].length;++a){if(b[167][a].charCodeAt(0)!==65533){d[b[167][a]]=42752+a;c[42752+a]=b[167][a]}}b[168]=''.split('');for(a=0;a!=b[168].length;++a){if(b[168][a].charCodeAt(0)!==65533){d[b[168][a]]=43008+a;c[43008+a]=b[168][a]}}b[169]=''.split('');for(a=0;a!=b[169].length;++a){if(b[169][a].charCodeAt(0)!==65533){d[b[169][a]]=43264+a;c[43264+a]=b[169][a]}}b[170]=''.split('');for(a=0;a!=b[170].length;++a){if(b[170][a].charCodeAt(0)!==65533){d[b[170][a]]=43520+a;c[43520+a]=b[170][a]}}b[171]=''.split('');for(a=0;a!=b[171].length;++a){if(b[171][a].charCodeAt(0)!==65533){d[b[171][a]]=43776+a;c[43776+a]=b[171][a]}}b[172]=''.split('');for(a=0;a!=b[172].length;++a){if(b[172][a].charCodeAt(0)!==65533){d[b[172][a]]=44032+a;c[44032+a]=b[172][a]}}b[173]=''.split('');for(a=0;a!=b[173].length;++a){if(b[173][a].charCodeAt(0)!==65533){d[b[173][a]]=44288+a;c[44288+a]=b[173][a]}}b[174]=''.split('');for(a=0;a!=b[174].length;++a){if(b[174][a].charCodeAt(0)!==65533){d[b[174][a]]=44544+a;c[44544+a]=b[174][a]}}b[175]=''.split('');for(a=0;a!=b[175].length;++a){if(b[175][a].charCodeAt(0)!==65533){d[b[175][a]]=44800+a;c[44800+a]=b[175][a]}}b[176]=''.split('');for(a=0;a!=b[176].length;++a){if(b[176][a].charCodeAt(0)!==65533){d[b[176][a]]=45056+a;c[45056+a]=b[176][a]}}b[177]=''.split('');for(a=0;a!=b[177].length;++a){if(b[177][a].charCodeAt(0)!==65533){d[b[177][a]]=45312+a;c[45312+a]=b[177][a]}}b[178]=''.split('');for(a=0;a!=b[178].length;++a){if(b[178][a].charCodeAt(0)!==65533){d[b[178][a]]=45568+a;c[45568+a]=b[178][a]}}b[179]=''.split('');for(a=0;a!=b[179].length;++a){if(b[179][a].charCodeAt(0)!==65533){d[b[179][a]]=45824+a;c[45824+a]=b[179][a]}}b[180]=''.split('');for(a=0;a!=b[180].length;++a){if(b[180][a].charCodeAt(0)!==65533){d[b[180][a]]=46080+a;c[46080+a]=b[180][a]}}b[181]=''.split('');for(a=0;a!=b[181].length;++a){if(b[181][a].charCodeAt(0)!==65533){d[b[181][a]]=46336+a;c[46336+a]=b[181][a]}}b[182]=''.split('');for(a=0;a!=b[182].length;++a){if(b[182][a].charCodeAt(0)!==65533){d[b[182][a]]=46592+a;c[46592+a]=b[182][a]}}b[183]=''.split('');for(a=0;a!=b[183].length;++a){if(b[183][a].charCodeAt(0)!==65533){d[b[183][a]]=46848+a;c[46848+a]=b[183][a]}}b[184]=''.split('');for(a=0;a!=b[184].length;++a){if(b[184][a].charCodeAt(0)!==65533){d[b[184][a]]=47104+a;c[47104+a]=b[184][a]}}b[185]=''.split('');for(a=0;a!=b[185].length;++a){if(b[185][a].charCodeAt(0)!==65533){d[b[185][a]]=47360+a;c[47360+a]=b[185][a]}}b[186]=''.split('');for(a=0;a!=b[186].length;++a){if(b[186][a].charCodeAt(0)!==65533){d[b[186][a]]=47616+a;c[47616+a]=b[186][a]}}b[187]=''.split('');for(a=0;a!=b[187].length;++a){if(b[187][a].charCodeAt(0)!==65533){d[b[187][a]]=47872+a;c[47872+a]=b[187][a]}}b[188]=''.split('');for(a=0;a!=b[188].length;++a){if(b[188][a].charCodeAt(0)!==65533){d[b[188][a]]=48128+a;c[48128+a]=b[188][a]}}b[189]=''.split('');for(a=0;a!=b[189].length;++a){if(b[189][a].charCodeAt(0)!==65533){d[b[189][a]]=48384+a;c[48384+a]=b[189][a]}}b[190]=''.split('');for(a=0;a!=b[190].length;++a){if(b[190][a].charCodeAt(0)!==65533){d[b[190][a]]=48640+a;c[48640+a]=b[190][a]}}b[191]=''.split('');for(a=0;a!=b[191].length;++a){if(b[191][a].charCodeAt(0)!==65533){d[b[191][a]]=48896+a;c[48896+a]=b[191][a]}}b[192]=''.split('');for(a=0;a!=b[192].length;++a){if(b[192][a].charCodeAt(0)!==65533){d[b[192][a]]=49152+a;c[49152+a]=b[192][a]}}b[193]=''.split('');for(a=0;a!=b[193].length;++a){if(b[193][a].charCodeAt(0)!==65533){d[b[193][a]]=49408+a;c[49408+a]=b[193][a]}}b[194]=''.split('');for(a=0;a!=b[194].length;++a){if(b[194][a].charCodeAt(0)!==65533){d[b[194][a]]=49664+a;c[49664+a]=b[194][a]}}b[195]=''.split('');for(a=0;a!=b[195].length;++a){if(b[195][a].charCodeAt(0)!==65533){d[b[195][a]]=49920+a;c[49920+a]=b[195][a]}}b[196]=''.split('');for(a=0;a!=b[196].length;++a){if(b[196][a].charCodeAt(0)!==65533){d[b[196][a]]=50176+a;c[50176+a]=b[196][a]}}b[197]=''.split('');for(a=0;a!=b[197].length;++a){if(b[197][a].charCodeAt(0)!==65533){d[b[197][a]]=50432+a;c[50432+a]=b[197][a]}}b[198]=''.split('');for(a=0;a!=b[198].length;++a){if(b[198][a].charCodeAt(0)!==65533){d[b[198][a]]=50688+a;c[50688+a]=b[198][a]}}b[201]=''.split('');for(a=0;a!=b[201].length;++a){if(b[201][a].charCodeAt(0)!==65533){d[b[201][a]]=51456+a;c[51456+a]=b[201][a]}}b[202]=''.split('');for(a=0;a!=b[202].length;++a){if(b[202][a].charCodeAt(0)!==65533){d[b[202][a]]=51712+a;c[51712+a]=b[202][a]}}b[203]=''.split('');for(a=0;a!=b[203].length;++a){if(b[203][a].charCodeAt(0)!==65533){d[b[203][a]]=51968+a;c[51968+a]=b[203][a]}}b[204]=''.split('');for(a=0;a!=b[204].length;++a){if(b[204][a].charCodeAt(0)!==65533){d[b[204][a]]=52224+a;c[52224+a]=b[204][a]}}b[205]=''.split('');for(a=0;a!=b[205].length;++a){if(b[205][a].charCodeAt(0)!==65533){d[b[205][a]]=52480+a;c[52480+a]=b[205][a]}}b[206]=''.split('');for(a=0;a!=b[206].length;++a){if(b[206][a].charCodeAt(0)!==65533){d[b[206][a]]=52736+a;c[52736+a]=b[206][a]}}b[207]=''.split('');for(a=0;a!=b[207].length;++a){if(b[207][a].charCodeAt(0)!==65533){d[b[207][a]]=52992+a;c[52992+a]=b[207][a]}}b[208]=''.split('');for(a=0;a!=b[208].length;++a){if(b[208][a].charCodeAt(0)!==65533){d[b[208][a]]=53248+a;c[53248+a]=b[208][a]}}b[209]=''.split('');for(a=0;a!=b[209].length;++a){if(b[209][a].charCodeAt(0)!==65533){d[b[209][a]]=53504+a;c[53504+a]=b[209][a]}}b[210]=''.split('');for(a=0;a!=b[210].length;++a){if(b[210][a].charCodeAt(0)!==65533){d[b[210][a]]=53760+a;c[53760+a]=b[210][a]}}b[211]=''.split('');for(a=0;a!=b[211].length;++a){if(b[211][a].charCodeAt(0)!==65533){d[b[211][a]]=54016+a;c[54016+a]=b[211][a]}}b[212]=''.split('');for(a=0;a!=b[212].length;++a){if(b[212][a].charCodeAt(0)!==65533){d[b[212][a]]=54272+a;c[54272+a]=b[212][a]}}b[213]=''.split('');for(a=0;a!=b[213].length;++a){if(b[213][a].charCodeAt(0)!==65533){d[b[213][a]]=54528+a;c[54528+a]=b[213][a]}}b[214]=''.split('');for(a=0;a!=b[214].length;++a){if(b[214][a].charCodeAt(0)!==65533){d[b[214][a]]=54784+a;c[54784+a]=b[214][a]}}b[215]=''.split('');for(a=0;a!=b[215].length;++a){if(b[215][a].charCodeAt(0)!==65533){d[b[215][a]]=55040+a;c[55040+a]=b[215][a]}}b[216]=''.split('');for(a=0;a!=b[216].length;++a){if(b[216][a].charCodeAt(0)!==65533){d[b[216][a]]=55296+a;c[55296+a]=b[216][a]}}b[217]=''.split('');for(a=0;a!=b[217].length;++a){if(b[217][a].charCodeAt(0)!==65533){d[b[217][a]]=55552+a;c[55552+a]=b[217][a]}}b[218]=''.split('');for(a=0;a!=b[218].length;++a){if(b[218][a].charCodeAt(0)!==65533){d[b[218][a]]=55808+a;c[55808+a]=b[218][a]}}b[219]=''.split('');for(a=0;a!=b[219].length;++a){if(b[219][a].charCodeAt(0)!==65533){d[b[219][a]]=56064+a;c[56064+a]=b[219][a]}}b[220]=''.split('');for(a=0;a!=b[220].length;++a){if(b[220][a].charCodeAt(0)!==65533){d[b[220][a]]=56320+a;c[56320+a]=b[220][a]}}b[221]=''.split('');for(a=0;a!=b[221].length;++a){if(b[221][a].charCodeAt(0)!==65533){d[b[221][a]]=56576+a;c[56576+a]=b[221][a]}}b[222]=''.split('');for(a=0;a!=b[222].length;++a){if(b[222][a].charCodeAt(0)!==65533){d[b[222][a]]=56832+a;c[56832+a]=b[222][a]}}b[223]=''.split('');for(a=0;a!=b[223].length;++a){if(b[223][a].charCodeAt(0)!==65533){d[b[223][a]]=57088+a;c[57088+a]=b[223][a]}}b[224]=''.split('');for(a=0;a!=b[224].length;++a){if(b[224][a].charCodeAt(0)!==65533){d[b[224][a]]=57344+a;c[57344+a]=b[224][a]}}b[225]=''.split('');for(a=0;a!=b[225].length;++a){if(b[225][a].charCodeAt(0)!==65533){d[b[225][a]]=57600+a;c[57600+a]=b[225][a]}}b[226]=''.split('');for(a=0;a!=b[226].length;++a){if(b[226][a].charCodeAt(0)!==65533){d[b[226][a]]=57856+a;c[57856+a]=b[226][a]}}b[227]=''.split('');for(a=0;a!=b[227].length;++a){if(b[227][a].charCodeAt(0)!==65533){d[b[227][a]]=58112+a;c[58112+a]=b[227][a]}}b[228]=''.split('');for(a=0;a!=b[228].length;++a){if(b[228][a].charCodeAt(0)!==65533){d[b[228][a]]=58368+a;c[58368+a]=b[228][a]}}b[229]=''.split('');for(a=0;a!=b[229].length;++a){if(b[229][a].charCodeAt(0)!==65533){d[b[229][a]]=58624+a;c[58624+a]=b[229][a]}}b[230]=''.split('');for(a=0;a!=b[230].length;++a){if(b[230][a].charCodeAt(0)!==65533){d[b[230][a]]=58880+a;c[58880+a]=b[230][a]}}b[231]=''.split('');for(a=0;a!=b[231].length;++a){if(b[231][a].charCodeAt(0)!==65533){d[b[231][a]]=59136+a;c[59136+a]=b[231][a]}}b[232]=''.split('');for(a=0;a!=b[232].length;++a){if(b[232][a].charCodeAt(0)!==65533){d[b[232][a]]=59392+a;c[59392+a]=b[232][a]}}b[233]=''.split('');for(a=0;a!=b[233].length;++a){if(b[233][a].charCodeAt(0)!==65533){d[b[233][a]]=59648+a;c[59648+a]=b[233][a]}}b[234]=''.split('');for(a=0;a!=b[234].length;++a){if(b[234][a].charCodeAt(0)!==65533){d[b[234][a]]=59904+a;c[59904+a]=b[234][a]}}b[235]=''.split('');for(a=0;a!=b[235].length;++a){if(b[235][a].charCodeAt(0)!==65533){d[b[235][a]]=60160+a;c[60160+a]=b[235][a]}}b[236]=''.split('');for(a=0;a!=b[236].length;++a){if(b[236][a].charCodeAt(0)!==65533){d[b[236][a]]=60416+a;c[60416+a]=b[236][a]}}b[237]=''.split('');for(a=0;a!=b[237].length;++a){if(b[237][a].charCodeAt(0)!==65533){d[b[237][a]]=60672+a;c[60672+a]=b[237][a]}}b[238]=''.split('');for(a=0;a!=b[238].length;++a){if(b[238][a].charCodeAt(0)!==65533){d[b[238][a]]=60928+a;c[60928+a]=b[238][a]}}b[239]=''.split('');for(a=0;a!=b[239].length;++a){if(b[239][a].charCodeAt(0)!==65533){d[b[239][a]]=61184+a;c[61184+a]=b[239][a]}}b[240]=''.split('');for(a=0;a!=b[240].length;++a){if(b[240][a].charCodeAt(0)!==65533){d[b[240][a]]=61440+a;c[61440+a]=b[240][a]}}b[241]=''.split('');for(a=0;a!=b[241].length;++a){if(b[241][a].charCodeAt(0)!==65533){d[b[241][a]]=61696+a;c[61696+a]=b[241][a]}}b[242]=''.split('');for(a=0;a!=b[242].length;++a){if(b[242][a].charCodeAt(0)!==65533){d[b[242][a]]=61952+a;c[61952+a]=b[242][a]}}b[243]=''.split('');for(a=0;a!=b[243].length;++a){if(b[243][a].charCodeAt(0)!==65533){d[b[243][a]]=62208+a;c[62208+a]=b[243][a]}}b[244]=''.split('');for(a=0;a!=b[244].length;++a){if(b[244][a].charCodeAt(0)!==65533){d[b[244][a]]=62464+a;c[62464+a]=b[244][a]}}b[245]=''.split('');for(a=0;a!=b[245].length;++a){if(b[245][a].charCodeAt(0)!==65533){d[b[245][a]]=62720+a;c[62720+a]=b[245][a]}}b[246]=''.split('');for(a=0;a!=b[246].length;++a){if(b[246][a].charCodeAt(0)!==65533){d[b[246][a]]=62976+a;c[62976+a]=b[246][a]}}b[247]=''.split('');for(a=0;a!=b[247].length;++a){if(b[247][a].charCodeAt(0)!==65533){d[b[247][a]]=63232+a;c[63232+a]=b[247][a]}}b[248]=''.split('');for(a=0;a!=b[248].length;++a){if(b[248][a].charCodeAt(0)!==65533){d[b[248][a]]=63488+a;c[63488+a]=b[248][a]}}b[249]=''.split('');for(a=0;a!=b[249].length;++a){if(b[249][a].charCodeAt(0)!==65533){d[b[249][a]]=63744+a;c[63744+a]=b[249][a]}}return {'enc':d,'dec':c}}();cptable[1250]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u201a\u201e\u2026\u2020\u2021\u2030\u2039\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u203a\xa0',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[1251]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u201a\u201e\u2026\u2020\u2021\u2030\u2039\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u203a\xa0',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[1252]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u201a\u201e\u2026\u2020\u2021\u2030\u2039\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u203a\xa0',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[1253]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u201a\u201e\u2026\u2020\u2021\u2030\u2039\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u203a\xa0\u2015',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[1254]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u201a\u201e\u2026\u2020\u2021\u2030\u2039\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u203a\xa0',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[1255]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u201a\u201e\u2026\u2020\u2021\u2030\u2039\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u203a\xa0\u200e\u200f',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[1256]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u201a\u201e\u2026\u2020\u2021\u2030\u2039\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u203a\u200c\u200d\xa0\u200e\u200f',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[1257]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u201a\u201e\u2026\u2020\u2021\u2030\u2039\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u203a\xa0',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[1258]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u201a\u201e\u2026\u2020\u2021\u2030\u2039\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u203a\xa0',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[10000]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2020\u2022\u2026\xa0\u2013\u2014\u201c\u201d\u2018\u2019\u2044\u2039\u203a\u2021\u201a\u201e\u2030',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[10006]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2022\u2030\u2020\u2026\xa0\u2013\u2015\u201c\u201d\u2018\u2019',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[10007]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2020\u2022\u2026\xa0\u2013\u2014\u201c\u201d\u2018\u2019\u201e',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[10029]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2020\u2022\u2026\xa0\u2013\u2014\u201c\u201d\u2018\u2019\u2039\u203a\u201a\u201e',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[10079]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2022\u2026\xa0\u2013\u2014\u201c\u201d\u2018\u2019\u2044\u201a\u201e\u2030',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();cptable[10081]=function(){var b='\x00\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2020\u2022\u2026\xa0\u2013\u2014\u201c\u201d\u2018\u2019\u2021\u201a\u201e\u2030',c=[],d={};for(var a=0;a!=b.length;++a){if(b.charCodeAt(a)!==65533){d[b[a]]=a}c[a]=b.charAt(a)}return {'enc':d,'dec':c}}();if(typeof module!=='undefined'&&module.exports){module.exports=cptable}(function(c,a){if(typeof cptable==='undefined'){if(typeof require!=='undefined'){var b=require('./cpt'+'able');if(typeof module!=='undefined'&&module.exports){module.exports=a(b)}else {c.cptable=a(b)}}else {throw new Error('cptable not found')}}else {cptable=a(cptable)}})(this,function(b){var i={1200:'utf16le',1201:'utf16be',12000:'utf32le',12001:'utf32be',16969:'utf64le',20127:'ascii',65000:'utf7',65001:'utf8'};var g=[874,1250,1251,1252,1253,1254,1255,1256,10000];var k=[932,936,949,950];var o=[65001];var m={};var n={};var h={};var e={};var w=function w(a){return String.fromCharCode(a)};var x=function x(a){return a.charCodeAt(0)};var c=typeof Buffer!=='undefined';if(c){var d=1024,a=new Buffer(d);var u=function u(g){var d=new Buffer(65536);for(var f=0;f<65536;++f){d[f]=0}var c=Object.keys(g),h=c.length;for(var a=0,e=c[a];a<h;++a){if(!(e=c[a])){continue}d[e.charCodeAt(0)]=g[e]}return d};var B=function make_sbcs_encode(c){var a=u(b[c].enc);return function sbcs_e(f,k){var i=f.length;var e,d,g,h,j;if(typeof f==='string'){e=Buffer(i);for(d=0;d<i;++d){e[d]=a[f.charCodeAt(d)]}}else {if(Buffer.isBuffer(f)){e=Buffer(2*i);g=0;for(d=0;d<i;++d){h=f[d];if(h<128){e[g++]=a[h]}else {if(h<224){e[g++]=a[((h&31)<<6)+(f[d+1]&63)];++d}else {if(h<240){e[g++]=a[((h&15)<<12)+((f[d+1]&63)<<6)+(f[d+2]&63)];d+=2}else {j=((h&7)<<18)+((f[d+1]&63)<<12)+((f[d+2]&63)<<6)+(f[d+3]&63);d+=3;if(j<65536){e[g++]=a[j]}else {j-=65536;e[g++]=a[55296+(j>>10&1023)];e[g++]=a[56320+(j&1023)]}}}}}e.length=g;e=e.slice(0,g)}else {e=Buffer(i);for(d=0;d<i;++d){e[d]=a[f[d].charCodeAt(0)]}}}if(k===undefined||k==='buf'){return e}if(k!=='arr'){return e.toString('binary')}return [].slice.call(e)}};var A=function make_sbcs_decode(i){var f=b[i].dec;var c=new Buffer(131072),e=0,g;for(e=0;e<f.length;++e){if(!(g=f[e])){continue}var h=g.charCodeAt(0);c[2*e]=h&255;c[2*e+1]=h>>8}return function sbcs_d(g){var h=g.length,e=0,f;if(2*h>d){d=2*h;a=new Buffer(d)}if(Buffer.isBuffer(g)){for(e=0;e<h;e++){f=2*g[e];a[2*e]=c[f];a[2*e+1]=c[f+1]}}else {if(typeof g==='string'){for(e=0;e<h;e++){f=2*g.charCodeAt(e);a[2*e]=c[f];a[2*e+1]=c[f+1]}}else {for(e=0;e<h;e++){f=2*g[e];a[2*e]=c[f];a[2*e+1]=c[f+1]}}}a.length=2*h;return a.toString('ucs2')}};var z=function make_dbcs_encode(i){var f=b[i].enc;var a=new Buffer(131072);for(var g=0;g<131072;++g){a[g]=0}var e=Object.keys(f);for(var c=0,d=e[c];c<e.length;++c){if(!(d=e[c])){continue}var h=d.charCodeAt(0);a[2*h]=f[d]&255;a[2*h+1]=f[d]>>8}return function dbcs_e(g,k){var j=g.length,e=new Buffer(2*j),d,c,l,f,h;if(typeof g==='string'){for(d=f=0;d<j;++d){c=g.charCodeAt(d)*2;e[f++]=a[c+1]||a[c];if(a[c+1]>0){e[f++]=a[c]}}e.length=f;e=e.slice(0,f)}else {if(Buffer.isBuffer(g)){for(d=f=0;d<j;++d){h=g[d];if(h<128){c=h}else {if(h<224){c=((h&31)<<6)+(g[d+1]&63);++d}else {if(h<240){c=((h&15)<<12)+((g[d+1]&63)<<6)+(g[d+2]&63);d+=2}else {c=((h&7)<<18)+((g[d+1]&63)<<12)+((g[d+2]&63)<<6)+(g[d+3]&63);d+=3}}}if(c<65536){c*=2;e[f++]=a[c+1]||a[c];if(a[c+1]>0){e[f++]=a[c]}}else {l=c-65536;c=2*(55296+(l>>10&1023));e[f++]=a[c+1]||a[c];if(a[c+1]>0){e[f++]=a[c]}c=2*(56320+(l&1023));e[f++]=a[c+1]||a[c];if(a[c+1]>0){e[f++]=a[c]}}}e.length=f;e=e.slice(0,f)}else {for(d=f=0;d<j;d++){c=g[d].charCodeAt(0)*2;e[f++]=a[c+1]||a[c];if(a[c+1]>0){e[f++]=a[c]}}}}if(k===undefined||k==='buf'){return e}if(k!=='arr'){return e.toString('binary')}return [].slice.call(e)}};var y=function make_dbcs_decode(i){var g=b[i].dec;var a=new Buffer(131072),c=0,h,f=0,e=0,d=0;for(d=0;d<65536;++d){a[2*d]=255;a[2*d+1]=253}for(c=0;c<g.length;++c){if(!(h=g[c])){continue}f=h.charCodeAt(0);e=2*c;a[e]=f&255;a[e+1]=f>>8}return function dbcs_d(e){var h=e.length,f=new Buffer(2*h),c,d,g=0;if(Buffer.isBuffer(e)){for(c=0;c<h;c++){d=2*e[c];if(a[d]===255&&a[d+1]===253){d=2*((e[c]<<8)+e[c+1]);++c}f[g++]=a[d];f[g++]=a[d+1]}}else {if(typeof e==='string'){for(c=0;c<h;c++){d=2*e.charCodeAt(c);if(a[d]===255&&a[d+1]===253){d=2*((e.charCodeAt(c)<<8)+e.charCodeAt(c+1));++c}f[g++]=a[d];f[g++]=a[d+1]}}else {for(c=0;c<h;c++){d=2*e[c];if(a[d]===255&&a[d+1]===253){d=2*((e[c]<<8)+e[c+1]);++c}f[g++]=a[d];f[g++]=a[d+1]}}}f.length=g;return f.toString('ucs2')}};m[65001]=function utf8_d(e){var j=e.length,c=0,k=0;if(4*j>d){d=4*j;a=new Buffer(d)}a.length=0;var f=0;if(j>=3&&e[0]==239){if(e[1]==187&&e[2]==191){f=3}}for(var i=1,h=0,g=0;f<j;f+=i){i=1;g=e[f];if(g<128){c=g}else {if(g<224){c=(g&31)*64+(e[f+1]&63);i=2}else {if(g<240){c=((g&15)<<12)+(e[f+1]&63)*64+(e[f+2]&63);i=3}else {c=(g&7)*262144+((e[f+1]&63)<<12)+(e[f+2]&63)*64+(e[f+3]&63);i=4}}}if(c<65536){a[h++]=c&255;a[h++]=c>>8}else {c-=65536;k=55296+(c>>10&1023);c=56320+(c&1023);a[h++]=k&255;a[h++]=k>>>8;a[h++]=c&255;a[h++]=c>>>8&255}}a.length=h;return a.toString('ucs2')};n[65001]=function utf8_e(g,i){var j=g.length,c=0,h=0,e=0;var k=typeof g==='string';if(4*j>d){d=4*j;a=new Buffer(d)}for(var f=0;f<j;++f){c=k?g.charCodeAt(f):g[f].charCodeAt(0);if(c<=127){a[e++]=c}else {if(c<=2047){a[e++]=192+(c>>6);a[e++]=128+(c&63)}else {if(c>=55296&&c<=57343){c-=55296;++f;h=(k?g.charCodeAt(f):g[f].charCodeAt(0))-56320+(c<<10);a[e++]=240+(h>>>18&7);a[e++]=144+(h>>>12&63);a[e++]=128+(h>>>6&63);a[e++]=128+(h&63)}else {a[e++]=224+(c>>12);a[e++]=128+(c>>6&63);a[e++]=128+(c&63)}}}}a.length=e;if(i===undefined||i==='buf'){return a}if(i!=='arr'){return a.toString('binary')}return [].slice.call(a)}}var p=function p(){if(c){if(e[g[0]]){return}var d,a;for(d=0;d<g.length;++d){a=g[d];if(b[a]){e[a]=A(a);h[a]=B(a)}}for(d=0;d<k.length;++d){a=k[d];if(b[a]){e[a]=y(a);h[a]=z(a)}}for(d=0;d<o.length;++d){a=o[d];if(m[a]){e[a]=m[a]}if(n[a]){h[a]=n[a]}}}};var j=function j(a){e[a]=h[a]=undefined};var t=function t(){if(c){if(!e[g[0]]){return}g.forEach(j);k.forEach(j);o.forEach(j)}l=q=undefined};var C={encache:p,decache:t,sbcs:g,dbcs:k};p();var f='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'(),-./:?";var l,q;var s=function s(m,j,n){if(m===q){return l(j,n)}if(h[m]!==undefined){l=h[q=m];return l(j,n)}if(c&&Buffer.isBuffer(j)){j=j.toString('utf8')}var k=j.length;var d=c?new Buffer(4*k):[],a,g,e=0,t,o,p;var u=b[m],v,r;if(u&&(v=u.enc)){for(g=0;g<k;++g,++e){a=v[j[g]];d[e]=a&255;if(a>255){d[e]=a>>8;d[++e]=a&255}}}else {if(r=i[m]){switch(r){case 'utf8':if(c&&typeof j==='string'){d=new Buffer(j,r);e=d.length;break};for(g=0;g<k;++g,++e){a=j[g].charCodeAt(0);if(a<=127){d[e]=a}else {if(a<=2047){d[e]=192+(a>>6);d[++e]=128+(a&63)}else {if(a>=55296&&a<=57343){a-=55296;p=j[++g].charCodeAt(0)-56320+(a<<10);d[e]=240+(p>>>18&7);d[++e]=144+(p>>>12&63);d[++e]=128+(p>>>6&63);d[++e]=128+(p&63)}else {d[e]=224+(a>>12);d[++e]=128+(a>>6&63);d[++e]=128+(a&63)}}}};break;case 'ascii':if(c&&typeof j==='string'){d=new Buffer(j,r);e=d.length;break};for(g=0;g<k;++g,++e){a=j[g].charCodeAt(0);if(a<=127){d[e]=a}else {throw new Error('bad ascii '+a)}};break;case 'utf16le':if(c&&typeof j==='string'){d=new Buffer(j,r);e=d.length;break};for(g=0;g<k;++g){a=j[g].charCodeAt(0);d[e++]=a&255;d[e++]=a>>8};break;case 'utf16be':for(g=0;g<k;++g){a=j[g].charCodeAt(0);d[e++]=a>>8;d[e++]=a&255};break;case 'utf32le':for(g=0;g<k;++g){a=j[g].charCodeAt(0);if(a>=55296&&a<=57343){a=65536+(a-55296<<10)+(j[++g].charCodeAt(0)-56320)}d[e++]=a&255;a>>=8;d[e++]=a&255;a>>=8;d[e++]=a&255;a>>=8;d[e++]=a&255};break;case 'utf32be':for(g=0;g<k;++g){a=j[g].charCodeAt(0);if(a>=55296&&a<=57343){a=65536+(a-55296<<10)+(j[++g].charCodeAt(0)-56320)}d[e+3]=a&255;a>>=8;d[e+2]=a&255;a>>=8;d[e+1]=a&255;a>>=8;d[e]=a&255;a>>=8;e+=4};break;case 'utf7':for(g=0;g<k;g++){t=j[g];if(t==='+'){d[e++]=43;d[e++]=45;continue}if(D.indexOf(t)>-1){d[e++]=t.charCodeAt(0);continue}o=s(1201,t);d[e++]=43;d[e++]=f.charCodeAt(o[0]>>2);d[e++]=f.charCodeAt(((o[0]&3)<<4)+((o[1]||0)>>4));d[e++]=f.charCodeAt(((o[1]&15)<<2)+((o[2]||0)>>6));d[e++]=45};break;default:throw new Error('Unsupported magic: '+m+' '+i[m]);}}else {throw new Error('Unrecognized CP: '+m)}}d.length=e;d=d.slice(0,e);if(typeof Buffer==='undefined'){return n=='str'?d.map(w).join(''):d}if(n===undefined||n==='buf'){return d}if(n!=='arr'){return d.toString('binary')}return [].slice.call(d)};var r=function r(n,a){var E;if(E=e[n]){return E(a)}var k=a.length,j=new Array(k),g,d,h=1,l=0,C;var D=b[n],s,t;if(D&&(s=D.dec)){if(typeof a==='string'){a=a.split('').map(x)}for(d=0;d<k;d+=h){h=2;g=s[(a[d]<<8)+a[d+1]];if(!g){h=1;g=s[a[d]]}if(!g){throw new Error('Unrecognized code: '+a[d]+' '+a[d+h-1]+' '+d+' '+h+' '+s[a[d]])}j[l++]=g}}else {if(t=i[n]){switch(t){case 'utf8':d=0;if(k>=3&&a[0]==239){if(a[1]==187&&a[2]==191){d=3}};for(;d<k;d+=h){h=1;if(a[d]<128){g=a[d]}else {if(a[d]<224){g=(a[d]&31)*64+(a[d+1]&63);h=2}else {if(a[d]<240){g=((a[d]&15)<<12)+(a[d+1]&63)*64+(a[d+2]&63);h=3}else {g=(a[d]&7)*262144+((a[d+1]&63)<<12)+(a[d+2]&63)*64+(a[d+3]&63);h=4}}}if(g<65536){j[l++]=String.fromCharCode(g)}else {g-=65536;C=55296+(g>>10&1023);g=56320+(g&1023);j[l++]=String.fromCharCode(C);j[l++]=String.fromCharCode(g)}};break;case 'ascii':if(c&&Buffer.isBuffer(a)){return a.toString(t)};for(d=0;d<k;d++){j[d]=String.fromCharCode(a[d])};l=k;break;case 'utf16le':d=0;if(k>=2&&a[0]==255){if(a[1]==254){d=2}};if(c&&Buffer.isBuffer(a)){return a.toString(t)};h=2;for(;d<k;d+=h){j[l++]=String.fromCharCode((a[d+1]<<8)+a[d])};break;case 'utf16be':d=0;if(k>=2&&a[0]==254){if(a[1]==255){d=2}};h=2;for(;d<k;d+=h){j[l++]=String.fromCharCode((a[d]<<8)+a[d+1])};break;case 'utf32le':d=0;if(k>=4&&a[0]==255){if(a[1]==254&&a[2]==0&&a[3]==0){d=4}};h=4;for(;d<k;d+=h){g=(a[d+3]<<24)+(a[d+2]<<16)+(a[d+1]<<8)+a[d];if(g>65535){g-=65536;j[l++]=String.fromCharCode(55296+(g>>10&1023));j[l++]=String.fromCharCode(56320+(g&1023))}else {j[l++]=String.fromCharCode(g)}};break;case 'utf32be':d=0;if(k>=4&&a[3]==255){if(a[2]==254&&a[1]==0&&a[0]==0){d=4}};h=4;for(;d<k;d+=h){g=(a[d]<<24)+(a[d+1]<<16)+(a[d+2]<<8)+a[d+3];if(g>65535){g-=65536;j[l++]=String.fromCharCode(55296+(g>>10&1023));j[l++]=String.fromCharCode(56320+(g&1023))}else {j[l++]=String.fromCharCode(g)}};break;case 'utf7':d=0;if(k>=4&&a[0]==43&&a[1]==47&&a[2]==118){if(k>=5&&a[3]==56&&a[4]==45){d=5}else {if(a[3]==56||a[3]==57||a[3]==43||a[3]==47){d=4}}};for(;d<k;d+=h){if(a[d]!==43){h=1;j[l++]=String.fromCharCode(a[d]);continue}h=1;if(a[d+1]===45){h=2;j[l++]='+';continue}while(String.fromCharCode(a[d+h]).match(/[A-Za-z0-9+\/]/)){h++}var w=0;if(a[d+h]===45){++h;w=1}var o=[];var u;var y,z,A;var B,v,p,q;for(var m=1;m<h-w;){B=f.indexOf(String.fromCharCode(a[d+m++]));v=f.indexOf(String.fromCharCode(a[d+m++]));y=B<<2|v>>4;o.push(y);p=f.indexOf(String.fromCharCode(a[d+m++]));if(p===-1){break}z=(v&15)<<4|p>>2;o.push(z);q=f.indexOf(String.fromCharCode(a[d+m++]));if(q===-1){break}A=(p&3)<<6|q;if(q<64){o.push(A)}}if((o.length&1)===1){o.length--}u=r(1201,o);for(m=0;m<u.length;++m){j[l++]=u[m]}};break;default:throw new Error('Unsupported magic: '+n+' '+i[n]);}}else {throw new Error('Unrecognized CP: '+n)}}j.length=l;return j.join('')};var v=function v(a){return b[a]||i[a]};b.utils={decode:r,encode:s,hascp:v,magic:i,cache:C};return b});var saveAs=saveAs||typeof navigator!=='undefined'&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){if(typeof navigator!=='undefined'&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var c=a.document,p=function(){return a.URL||a.webkitURL||a},q=a.URL||a.webkitURL||a,e=c.createElementNS('http://www.w3.org/1999/xhtml','a'),n=!a.externalHost&&'download' in e,r=function(d){var b=c.createEvent('MouseEvents');b.initMouseEvent('click',!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null);d.dispatchEvent(b)},h=a.webkitRequestFileSystem,l=a.requestFileSystem||h||a.mozRequestFileSystem,o=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},g='application/octet-stream',j=0,d=[],f=function(){var c=d.length;while(c--){var b=d[c];if(typeof b==='string'){q.revokeObjectURL(b)}else {b.remove()}}d.length=0},i=function(c,b,f){b=[].concat(b);var e=b.length;while(e--){var d=c['on'+b[e]];if(typeof d==='function'){try{d.call(c,f||c)}catch(s){o(s)}}}},k=function(f,m){var b=this,t=f.type,w=!1,o,r,v=function(){var b=p().createObjectURL(f);d.push(b);return b},s=function(){i(b,'writestart progress write writeend'.split(' '))},k=function(){if(w||!o){o=v(f)}if(r){r.location.href=o}else {if(navigator.userAgent.match(/7\.[\d\s\.]+Safari/)&&typeof window.FileReader!=='undefined'&&f.size<=1024*1024*150){var d=new window.FileReader();d.readAsDataURL(f);d.onloadend=function(){var b=c.createElement('iframe');b.src=d.result;b.style.display='none';c.body.appendChild(b);s();return};b.readyState=b.DONE;b.savedAs=b.SAVEDASUNKNOWN;return}else {window.open(o,'_blank');b.readyState=b.DONE;b.savedAs=b.SAVEDASBLOB;s();return}}},q=function(c){return function(){if(b.readyState!==b.DONE){return c.apply(this,arguments)}}},u={create:!0,exclusive:!1},y;b.readyState=b.INIT;if(!m){m='download'}if(n){o=v(f);c=a.document;e=c.createElementNS('http://www.w3.org/1999/xhtml','a');e.href=o;e.download=m;var x=c.createEvent('MouseEvents');x.initMouseEvent('click',!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null);e.dispatchEvent(x);b.readyState=b.DONE;b.savedAs=b.SAVEDASBLOB;s();return}if(a.chrome&&t&&t!==g){y=f.slice||f.webkitSlice;f=y.call(f,0,f.size,g);w=!0}if(h&&m!=='download'){m+='.download'}if(t===g||h){r=a}if(!l){k();return}j+=f.size;l(a.TEMPORARY,j,q(function(c){c.root.getDirectory('saved',u,q(function(g){var e=function(){g.getFile(m,u,q(function(e){e.createWriter(q(function(h){h.onwriteend=function(j){r.location.href=e.toURL();d.push(e);b.readyState=b.DONE;b.savedAs=b.SAVEDASBLOB;i(b,'writeend',j)};h.onerror=function(){var b=h.error;if(b.code!==b.ABORT_ERR){k()}};'writestart progress write abort'.split(' ').forEach(function(d){h['on'+d]=b['on'+d]});h.write(f);b.abort=function(){h.abort();b.readyState=b.DONE;b.savedAs=b.FAILED};b.readyState=b.WRITING}),k)}),k)};g.getFile(m,{create:!1},q(function(b){b.remove();e()}),q(function(b){if(b.code===b.NOT_FOUND_ERR){e()}else {k()}}))}),k)}),k)},b=k.prototype,m=function(b,c){return new k(b,c)};b.abort=function(){var b=this;b.readyState=b.DONE;b.savedAs=b.FAILED;i(b,'abort')};b.readyState=b.INIT=0;b.WRITING=1;b.DONE=2;b.FAILED=-1;b.SAVEDASBLOB=1;b.SAVEDASURI=2;b.SAVEDASUNKNOWN=3;b.error=b.onwritestart=b.onprogress=b.onwrite=b.onabort=b.onerror=b.onwriteend=null;a.addEventListener('unload',f,!1);m.unload=function(){f();a.removeEventListener('unload',f,!1)};return m}(typeof self!=='undefined'&&self||typeof window!=='undefined'&&window||this.content);if(typeof module!=='undefined'&&module!==null){module.exports=saveAs}else {if(typeof define!=='undefined'&&define!==null&&define.amd!=null){define([],function(){return saveAs})}else {if(typeof Meteor!=='undefined'){Meteor.saveAs=saveAs}}}(function(b,a){if(typeof exports==='object'){module.exports=exports=a()}else {if(typeof define==='function'&&define.amd){define([],a)}else {b.CryptoJS=a()}}})(this,function(){var a=a||function(a,i){var k=Object.create||function(){function F(){}return function(c){var b;F.prototype=c;b=new F();F.prototype=null;return b}}();var e={};var d=e.lib={};var c=d.Base=function(){return {extend:function(c){var b=k(this);if(c){b.mixIn(c)}if(!b.hasOwnProperty('init')||this.init===b.init){b.init=function(){b.$super.init.apply(this,arguments)}}b.init.prototype=b;b.$super=this;return b},create:function(){var b=this.extend();b.init.apply(b,arguments);return b},init:function(){},mixIn:function(b){for(var c in b){if(b.hasOwnProperty(c)){this[c]=b[c]}}if(b.hasOwnProperty('toString')){this.toString=b.toString}},clone:function(){return this.init.prototype.extend(this)}}}();var b=d.WordArray=c.extend({init:function(b,c){b=this.words=b||[];if(c!=i){this.sigBytes=c}else {this.sigBytes=b.length*4}},toString:function(b){return (b||m).stringify(this)},concat:function(g){var f=this.words;var e=g.words;var c=this.sigBytes;var d=g.sigBytes;this.clamp();if(c%4){for(var b=0;b<d;b++){var h=e[b>>>2]>>>24-b%4*8&255;f[c+b>>>2]|=h<<24-(c+b)%4*8}}else {for(var b=0;b<d;b+=4){f[c+b>>>2]=e[b>>>2]}}this.sigBytes+=d;return this},clamp:function(){var c=this.words;var b=this.sigBytes;c[b>>>2]&=4.294967295E9<<32-b%4*8;c.length=a.ceil(b/4)},clone:function(){var b=c.clone.call(this);b.words=this.words.slice(0);return b},random:function(c){var e=[];var h=function(b){var b=b;var d=987654321;var e=4.294967295E9;return function(){d=36969*(d&65535)+(d>>16)&e;b=18000*(b&65535)+(b>>16)&e;var f=(d<<16)+b&e;f/=4.294967296E9;f+=0.5;return f*(a.random()>0.5?1:-1)}};for(var g=0,d;g<c;g+=4){var f=h((d||a.random())*4.294967296E9);d=f()*987654071;e.push(f()*4.294967296E9|0)}return new b.init(e,c)}});var f=e.enc={};var m=f.Hex={stringify:function(d){var g=d.words;var f=d.sigBytes;var c=[];for(var b=0;b<f;b++){var e=g[b>>>2]>>>24-b%4*8&255;c.push((e>>>4).toString(16));c.push((e&15).toString(16))}return c.join('')},parse:function(e){var d=e.length;var f=[];for(var c=0;c<d;c+=2){f[c>>>3]|=parseInt(e.substr(c,2),16)<<24-c%8*4}return new b.init(f,d/2)}};var h=f.Latin1={stringify:function(d){var f=d.words;var e=d.sigBytes;var c=[];for(var b=0;b<e;b++){var g=f[b>>>2]>>>24-b%4*8&255;c.push(String.fromCharCode(g))}return c.join('')},parse:function(e){var d=e.length;var f=[];for(var c=0;c<d;c++){f[c>>>2]|=(e.charCodeAt(c)&255)<<24-c%4*8}return new b.init(f,d)}};var l=f.Utf8={stringify:function(b){try{return decodeURIComponent(escape(h.stringify(b)))}catch(o){throw new Error('Malformed UTF-8 data')}},parse:function(b){return h.parse(unescape(encodeURIComponent(b)))}};var g=d.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new b.init();this._nDataBytes=0},_append:function(b){if(typeof b=='string'){b=l.parse(b)}this._data.concat(b);this._nDataBytes+=b.sigBytes},_process:function(n){var g=this._data;var k=g.words;var h=g.sigBytes;var e=this.blockSize;var l=e*4;var c=h/l;if(n){c=a.ceil(c)}else {c=a.max((c|0)-this._minBufferSize,0)}var d=c*e;var j=a.min(d*4,h);if(d){for(var f=0;f<d;f+=e){this._doProcessBlock(k,f)}var m=k.splice(0,d);g.sigBytes-=j}return new b.init(m,j)},clone:function(){var b=c.clone.call(this);b._data=this._data.clone();return b},_minBufferSize:0});var n=d.Hasher=g.extend({cfg:c.extend(),init:function(b){this.cfg=this.cfg.extend(b);this.reset()},reset:function(){g.reset.call(this);this._doReset()},update:function(b){this._append(b);this._process();return this},finalize:function(b){if(b){this._append(b)}var c=this._doFinalize();return c},blockSize:512/32,_createHelper:function(b){return function(c,d){return (new b.init(d)).finalize(c)}},_createHmacHelper:function(b){return function(c,d){return (new j.HMAC.init(b,d)).finalize(c)}}});var j=e.algo={};return e}(Math);(function(){var b=a;var e=b.lib;var c=e.WordArray;var d=b.enc;var f=d.Base64={stringify:function(d){var e=d.words;var g=d.sigBytes;var h=this._map;d.clamp();var b=[];for(var a=0;a<g;a+=3){var j=e[a>>>2]>>>24-a%4*8&255;var k=e[a+1>>>2]>>>24-(a+1)%4*8&255;var l=e[a+2>>>2]>>>24-(a+2)%4*8&255;var i=j<<16|k<<8|l;for(var c=0;c<4&&a+c*0.75<g;c++){b.push(h.charAt(i>>>6*(3-c)&63))}}var f=h.charAt(64);if(f){while(b.length%4){b.push(f)}}return b.join('')},parse:function(c){var e=c.length;var d=this._map;var a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var b=0;b<d.length;b++){a[d.charCodeAt(b)]=b}}var g=d.charAt(64);if(g){var f=c.indexOf(g);if(f!==-1){e=f}}return parseLoop(c,e,a)},_map:'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='};function parseLoop(e,g,d){var f=[];var b=0;for(var a=0;a<g;a++){if(a%4){var h=d[e.charCodeAt(a-1)]<<a%4*2;var i=d[e.charCodeAt(a)]>>>6-a%4*2;f[b>>>2]|=(h|i)<<24-b%4*8;b++}}return c.create(f,b)}})();(function(e){var d=a;var f=d.lib;var h=f.WordArray;var c=f.Hasher;var i=d.algo;var b=[];(function(){for(var a=0;a<64;a++){b[a]=e.abs(e.sin(a+1))*4.294967296E9|0}})();var g=i.MD5=c.extend({_doReset:function(){this._hash=new h.init([1732584193,4.023233417E9,2.562383102E9,271733878])},_doProcessBlock:function(g,h){for(var A=0;A<16;A++){var B=h+A;var z=g[B];g[B]=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4.27825536E9}var i=this._hash.words;var p=g[h+0];var q=g[h+1];var r=g[h+2];var s=g[h+3];var t=g[h+4];var u=g[h+5];var v=g[h+6];var w=g[h+7];var x=g[h+8];var y=g[h+9];var j=g[h+10];var k=g[h+11];var l=g[h+12];var m=g[h+13];var n=g[h+14];var o=g[h+15];var a=i[0];var c=i[1];var d=i[2];var f=i[3];a=FF(a,c,d,f,p,7,b[0]);f=FF(f,a,c,d,q,12,b[1]);d=FF(d,f,a,c,r,17,b[2]);c=FF(c,d,f,a,s,22,b[3]);a=FF(a,c,d,f,t,7,b[4]);f=FF(f,a,c,d,u,12,b[5]);d=FF(d,f,a,c,v,17,b[6]);c=FF(c,d,f,a,w,22,b[7]);a=FF(a,c,d,f,x,7,b[8]);f=FF(f,a,c,d,y,12,b[9]);d=FF(d,f,a,c,j,17,b[10]);c=FF(c,d,f,a,k,22,b[11]);a=FF(a,c,d,f,l,7,b[12]);f=FF(f,a,c,d,m,12,b[13]);d=FF(d,f,a,c,n,17,b[14]);c=FF(c,d,f,a,o,22,b[15]);a=GG(a,c,d,f,q,5,b[16]);f=GG(f,a,c,d,v,9,b[17]);d=GG(d,f,a,c,k,14,b[18]);c=GG(c,d,f,a,p,20,b[19]);a=GG(a,c,d,f,u,5,b[20]);f=GG(f,a,c,d,j,9,b[21]);d=GG(d,f,a,c,o,14,b[22]);c=GG(c,d,f,a,t,20,b[23]);a=GG(a,c,d,f,y,5,b[24]);f=GG(f,a,c,d,n,9,b[25]);d=GG(d,f,a,c,s,14,b[26]);c=GG(c,d,f,a,x,20,b[27]);a=GG(a,c,d,f,m,5,b[28]);f=GG(f,a,c,d,r,9,b[29]);d=GG(d,f,a,c,w,14,b[30]);c=GG(c,d,f,a,l,20,b[31]);a=HH(a,c,d,f,u,4,b[32]);f=HH(f,a,c,d,x,11,b[33]);d=HH(d,f,a,c,k,16,b[34]);c=HH(c,d,f,a,n,23,b[35]);a=HH(a,c,d,f,q,4,b[36]);f=HH(f,a,c,d,t,11,b[37]);d=HH(d,f,a,c,w,16,b[38]);c=HH(c,d,f,a,j,23,b[39]);a=HH(a,c,d,f,m,4,b[40]);f=HH(f,a,c,d,p,11,b[41]);d=HH(d,f,a,c,s,16,b[42]);c=HH(c,d,f,a,v,23,b[43]);a=HH(a,c,d,f,y,4,b[44]);f=HH(f,a,c,d,l,11,b[45]);d=HH(d,f,a,c,o,16,b[46]);c=HH(c,d,f,a,r,23,b[47]);a=II(a,c,d,f,p,6,b[48]);f=II(f,a,c,d,w,10,b[49]);d=II(d,f,a,c,n,15,b[50]);c=II(c,d,f,a,u,21,b[51]);a=II(a,c,d,f,l,6,b[52]);f=II(f,a,c,d,s,10,b[53]);d=II(d,f,a,c,j,15,b[54]);c=II(c,d,f,a,q,21,b[55]);a=II(a,c,d,f,x,6,b[56]);f=II(f,a,c,d,o,10,b[57]);d=II(d,f,a,c,v,15,b[58]);c=II(c,d,f,a,m,21,b[59]);a=II(a,c,d,f,t,6,b[60]);f=II(f,a,c,d,k,10,b[61]);d=II(d,f,a,c,r,15,b[62]);c=II(c,d,f,a,y,21,b[63]);i[0]=i[0]+a|0;i[1]=i[1]+c|0;i[2]=i[2]+d|0;i[3]=i[3]+f|0},_doFinalize:function(){var h=this._data;var c=h.words;var i=this._nDataBytes*8;var d=h.sigBytes*8;c[d>>>5]|=128<<24-d%32;var a=e.floor(i/4.294967296E9);var b=i;c[(d+64>>>9<<4)+15]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4.27825536E9;c[(d+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4.27825536E9;h.sigBytes=(c.length+1)*4;this._process();var j=this._hash;var k=j.words;for(var g=0;g<4;g++){var f=k[g];k[g]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4.27825536E9}return j},clone:function(){var a=c.clone.call(this);a._hash=this._hash.clone();return a}});function FF(d,a,f,g,i,c,h){var b=d+(a&f|~a&g)+i+h;return (b<<c|b>>>32-c)+a}function GG(f,a,g,b,i,d,h){var c=f+(a&b|g&~b)+i+h;return (c<<d|c>>>32-d)+a}function HH(d,a,f,g,i,c,h){var b=d+(a^f^g)+i+h;return (b<<c|b>>>32-c)+a}function II(d,a,f,g,i,c,h){var b=d+(f^(a|~g))+i+h;return (b<<c|b>>>32-c)+a}d.MD5=c._createHelper(g);d.HmacMD5=c._createHmacHelper(g)})(Math);(function(){var d=a;var e=d.lib;var g=e.WordArray;var c=e.Hasher;var h=d.algo;var b=[];var f=h.SHA1=c.extend({_doReset:function(){this._hash=new g.init([1732584193,4.023233417E9,2.562383102E9,271733878,3.28537752E9])},_doProcessBlock:function(l,k){var a=this._hash.words;var g=a[0];var d=a[1];var e=a[2];var f=a[3];var i=a[4];for(var c=0;c<80;c++){if(c<16){b[c]=l[k+c]|0}else {var j=b[c-3]^b[c-8]^b[c-14]^b[c-16];b[c]=j<<1|j>>>31}var h=(g<<5|g>>>27)+i+b[c];if(c<20){h+=(d&e|~d&f)+1518500249}else {if(c<40){h+=(d^e^f)+1859775393}else {if(c<60){h+=(d&e|d&f|e&f)-1894007588}else {h+=(d^e^f)-899497514}}}i=f;f=e;e=d<<30|d>>>2;d=g;g=h}a[0]=a[0]+g|0;a[1]=a[1]+d|0;a[2]=a[2]+e|0;a[3]=a[3]+f|0;a[4]=a[4]+i|0},_doFinalize:function(){var c=this._data;var a=c.words;var d=this._nDataBytes*8;var b=c.sigBytes*8;a[b>>>5]|=128<<24-b%32;a[(b+64>>>9<<4)+14]=Math.floor(d/4.294967296E9);a[(b+64>>>9<<4)+15]=d;c.sigBytes=a.length*4;this._process();return this._hash},clone:function(){var a=c.clone.call(this);a._hash=this._hash.clone();return a}});d.SHA1=c._createHelper(f);d.HmacSHA1=c._createHmacHelper(f)})();(function(d){var e=a;var g=e.lib;var j=g.WordArray;var c=g.Hasher;var k=e.algo;var h=[];var i=[];(function(){function isPrime(b){var c=d.sqrt(b);for(var a=2;a<=c;a++){if(!(b%a)){return !1}}return !0}function getFractionalBits(a){return (a-(a|0))*4.294967296E9|0}var b=2;var a=0;while(a<64){if(isPrime(b)){if(a<8){h[a]=getFractionalBits(d.pow(b,1/2))}i[a]=getFractionalBits(d.pow(b,1/3));a++}b++}})();var b=[];var f=k.SHA256=c.extend({_doReset:function(){this._hash=new j.init(h.slice(0))},_doProcessBlock:function(y,s){var a=this._hash.words;var e=a[0];var j=a[1];var k=a[2];var n=a[3];var f=a[4];var l=a[5];var m=a[6];var o=a[7];for(var c=0;c<64;c++){if(c<16){b[c]=y[s+c]|0}else {var g=b[c-15];var q=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3;var h=b[c-2];var r=(h<<15|h>>>17)^(h<<13|h>>>19)^h>>>10;b[c]=q+b[c-7]+r+b[c-16]}var w=f&l^~f&m;var v=e&j^e&k^j&k;var t=(e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22);var u=(f<<26|f>>>6)^(f<<21|f>>>11)^(f<<7|f>>>25);var p=o+u+w+i[c]+b[c];var x=t+v;o=m;m=l;l=f;f=n+p|0;n=k;k=j;j=e;e=p+x|0}a[0]=a[0]+e|0;a[1]=a[1]+j|0;a[2]=a[2]+k|0;a[3]=a[3]+n|0;a[4]=a[4]+f|0;a[5]=a[5]+l|0;a[6]=a[6]+m|0;a[7]=a[7]+o|0},_doFinalize:function(){var c=this._data;var a=c.words;var e=this._nDataBytes*8;var b=c.sigBytes*8;a[b>>>5]|=128<<24-b%32;a[(b+64>>>9<<4)+14]=d.floor(e/4.294967296E9);a[(b+64>>>9<<4)+15]=e;c.sigBytes=a.length*4;this._process();return this._hash},clone:function(){var a=c.clone.call(this);a._hash=this._hash.clone();return a}});e.SHA256=c._createHelper(f);e.HmacSHA256=c._createHmacHelper(f)})(Math);(function(){var d=a;var e=d.lib;var c=e.WordArray;var b=d.enc;var f=b.Utf16=b.Utf16BE={stringify:function(c){var f=c.words;var e=c.sigBytes;var b=[];for(var a=0;a<e;a+=2){var d=f[a>>>2]>>>16-a%4*8&65535;b.push(String.fromCharCode(d))}return b.join('')},parse:function(d){var b=d.length;var e=[];for(var a=0;a<b;a++){e[a>>>1]|=d.charCodeAt(a)<<16-a%2*16}return c.create(e,b*2)}};b.Utf16LE={stringify:function(c){var f=c.words;var e=c.sigBytes;var b=[];for(var a=0;a<e;a+=2){var d=swapEndian(f[a>>>2]>>>16-a%4*8&65535);b.push(String.fromCharCode(d))}return b.join('')},parse:function(d){var b=d.length;var e=[];for(var a=0;a<b;a++){e[a>>>1]|=swapEndian(d.charCodeAt(a)<<16-a%2*16)}return c.create(e,b*2)}};function swapEndian(a){return a<<8&4.27825536E9|a>>>8&16711935}})();(function(){if(typeof ArrayBuffer!='function'){return}var f=a;var e=f.lib;var b=e.WordArray;var c=b.init;var d=b.init=function(a){if(a instanceof ArrayBuffer){a=new Uint8Array(a)}if(a instanceof Int8Array||typeof Uint8ClampedArray!=='undefined'&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array){a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}if(a instanceof Uint8Array){var d=a.byteLength;var e=[];for(var b=0;b<d;b++){e[b>>>2]|=a[b]<<24-b%4*8}c.call(this,e,d)}else {c.apply(this,arguments)}};d.prototype=b})();(function(n){var d=a;var f=d.lib;var b=f.WordArray;var c=f.Hasher;var g=d.algo;var l=b.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]);var m=b.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]);var j=b.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]);var k=b.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]);var h=b.create([0,1518500249,1859775393,2.400959708E9,2.840853838E9]);var i=b.create([1352829926,1548603684,1836072691,2053994217,0]);var e=g.RIPEMD160=c.extend({_doReset:function(){this._hash=b.create([1732584193,4.023233417E9,2.562383102E9,271733878,3.28537752E9])},_doProcessBlock:function(x,y){for(var b=0;b<16;b++){var z=y+b;var u=x[z];x[z]=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4.27825536E9}var c=this._hash.words;var s=h.words;var t=i.words;var C=l.words;var D=m.words;var A=j.words;var B=k.words;var v,d,f,o,q;var w,e,g,p,r;w=v=c[0];e=d=c[1];g=f=c[2];p=o=c[3];r=q=c[4];var a;for(var b=0;b<80;b+=1){a=v+x[y+C[b]]|0;if(b<16){a+=f1(d,f,o)+s[0]}else {if(b<32){a+=f2(d,f,o)+s[1]}else {if(b<48){a+=f3(d,f,o)+s[2]}else {if(b<64){a+=f4(d,f,o)+s[3]}else {a+=f5(d,f,o)+s[4]}}}}a=a|0;a=rotl(a,A[b]);a=a+q|0;v=q;q=o;o=rotl(f,10);f=d;d=a;a=w+x[y+D[b]]|0;if(b<16){a+=f5(e,g,p)+t[0]}else {if(b<32){a+=f4(e,g,p)+t[1]}else {if(b<48){a+=f3(e,g,p)+t[2]}else {if(b<64){a+=f2(e,g,p)+t[3]}else {a+=f1(e,g,p)+t[4]}}}}a=a|0;a=rotl(a,B[b]);a=a+r|0;w=r;r=p;p=rotl(g,10);g=e;e=a}a=c[1]+f+p|0;c[1]=c[2]+o+r|0;c[2]=c[3]+q+w|0;c[3]=c[4]+v+e|0;c[4]=c[0]+d+g|0;c[0]=a},_doFinalize:function(){var f=this._data;var d=f.words;var a=this._nDataBytes*8;var e=f.sigBytes*8;d[e>>>5]|=128<<24-e%32;d[(e+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4.27825536E9;f.sigBytes=(d.length+1)*4;this._process();var g=this._hash;var h=g.words;for(var c=0;c<5;c++){var b=h[c];h[c]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4.27825536E9}return g},clone:function(){var a=c.clone.call(this);a._hash=this._hash.clone();return a}});function f1(a,b,c){return a^b^c}function f2(a,b,c){return a&b|~a&c}function f3(a,b,c){return (a|~b)^c}function f4(b,c,a){return b&a|c&~a}function f5(a,b,c){return a^(b|~c)}function rotl(b,a){return b<<a|b>>>32-a}d.RIPEMD160=c._createHelper(e);d.HmacRIPEMD160=c._createHmacHelper(e)})(Math);(function(){var b=a;var e=b.lib;var f=e.Base;var d=b.enc;var g=d.Utf8;var c=b.algo;var h=c.HMAC=f.extend({init:function(b,a){b=this._hasher=new b.init();if(typeof a=='string'){a=g.parse(a)}var e=b.blockSize;var d=e*4;if(a.sigBytes>d){a=b.finalize(a)}a.clamp();var h=this._oKey=a.clone();var f=this._iKey=a.clone();var j=h.words;var i=f.words;for(var c=0;c<e;c++){j[c]^=1549556828;i[c]^=909522486}h.sigBytes=f.sigBytes=d;this.reset()},reset:function(){var a=this._hasher;a.reset();a.update(this._iKey)},update:function(a){this._hasher.update(a);return this},finalize:function(b){var a=this._hasher;var c=a.finalize(b);a.reset();var d=a.finalize(this._oKey.clone().concat(c));return d}})})();(function(){var c=a;var e=c.lib;var f=e.Base;var d=e.WordArray;var b=c.algo;var i=b.SHA1;var h=b.HMAC;var g=b.PBKDF2=f.extend({cfg:f.extend({keySize:128/32,hasher:i,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(r,s){var g=this.cfg;var b=h.create(g.hasher,r);var a=d.create();var i=d.create([1]);var p=a.words;var o=i.words;var k=g.keySize;var q=g.iterations;while(p.length<k){var f=b.update(s).finalize(i);b.reset();var j=f.words;var n=j.length;var e=f;for(var l=1;l<q;l++){e=b.finalize(e);b.reset();var m=e.words;for(var c=0;c<n;c++){j[c]^=m[c]}}a.concat(f);o[0]++}a.sigBytes=k*4;return a}});c.PBKDF2=function(a,b,c){return g.create(c).compute(a,b)}})();(function(){var b=a;var d=b.lib;var e=d.Base;var f=d.WordArray;var c=b.algo;var h=c.MD5;var g=c.EvpKDF=e.extend({cfg:e.extend({keySize:128/32,hasher:h,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(j,k){var d=this.cfg;var a=d.hasher.create();var c=f.create();var h=c.words;var e=d.keySize;var i=d.iterations;while(h.length<e){if(b){a.update(b)}var b=a.update(j).finalize(k);a.reset();for(var g=1;g<i;g++){b=a.finalize(b);a.reset()}c.concat(b)}c.sigBytes=e*4;return c}});b.EvpKDF=function(a,b,c){return g.create(c).compute(a,b)}})();(function(){var c=a;var g=c.lib;var f=g.WordArray;var d=c.algo;var b=d.SHA256;var e=d.SHA224=b.extend({_doReset:function(){this._hash=new f.init([3.238371032E9,914150663,812702999,4.144912697E9,4.290775857E9,1750603025,1694076839,3.204075428E9])},_doFinalize:function(){var a=b._doFinalize.call(this);a.sigBytes-=4;return a}});c.SHA224=b._createHelper(e);c.HmacSHA224=b._createHmacHelper(e)})();(function(g){var e=a;var c=e.lib;var b=c.Base;var f=c.WordArray;var d=e.x64={};var i=d.Word=b.extend({init:function(a,b){this.high=a;this.low=b}});var h=d.WordArray=b.extend({init:function(a,b){a=this.words=a||[];if(b!=g){this.sigBytes=b}else {this.sigBytes=a.length*8}},toX32:function(){var c=this.words;var e=c.length;var a=[];for(var b=0;b<e;b++){var d=c[b];a.push(d.high);a.push(d.low)}return f.create(a,this.sigBytes)},clone:function(){var d=b.clone.call(this);var c=d.words=this.words.slice(0);var e=c.length;for(var a=0;a<e;a++){c[a]=c[a].clone()}return d}})})();(function(n){var d=a;var i=d.lib;var k=i.WordArray;var c=i.Hasher;var m=d.x64;var e=m.Word;var l=d.algo;var g=[];var h=[];var f=[];(function(){var b=1,a=0;for(var d=0;d<24;d++){g[b+5*a]=(d+1)*(d+2)/2%64;var o=a%5;var p=(2*b+3*a)%5;b=o;a=p}for(var b=0;b<5;b++){for(var a=0;a<5;a++){h[b+5*a]=a+(2*b+3*a)%5*5}}var c=1;for(var j=0;j<24;j++){var m=0;var l=0;for(var k=0;k<7;k++){if(c&1){var i=(1<<k)-1;if(i<32){l^=1<<i}else {m^=1<<i-32}}if(c&128){c=c<<1^113}else {c<<=1}}f[j]=e.create(m,l)}})();var b=[];(function(){for(var a=0;a<25;a++){b[a]=e.create()}})();var j=l.SHA3=c.extend({cfg:c.cfg.extend({outputLength:512}),_doReset:function(){var b=this._state=[];for(var a=0;a<25;a++){b[a]=new e.init()}this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(G,z){var j=this._state;var H=this.blockSize/2;for(var p=0;p<H;p++){var o=G[z+2*p];var m=G[z+2*p+1];o=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4.27825536E9;m=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4.27825536E9;var a=j[p];a.high^=m;a.low^=o}for(var s=0;s<24;s++){for(var c=0;c<5;c++){var l=0,k=0;for(var d=0;d<5;d++){var a=j[c+5*d];l^=a.high;k^=a.low}var F=b[c];F.high=l;F.low=k}for(var c=0;c<5;c++){var D=b[(c+4)%5];var C=b[(c+1)%5];var y=C.high;var x=C.low;var l=D.high^(y<<1|x>>>31);var k=D.low^(x<<1|y>>>31);for(var d=0;d<5;d++){var a=j[c+5*d];a.high^=l;a.low^=k}}for(var i=1;i<25;i++){var a=j[i];var r=a.high;var q=a.low;var e=g[i];if(e<32){var l=r<<e|q>>>32-e;var k=q<<e|r>>>32-e}else {var l=q<<e-32|r>>>64-e;var k=r<<e-32|q>>>64-e}var u=b[h[i]];u.high=l;u.low=k}var E=b[0];var A=j[0];E.high=A.high;E.low=A.low;for(var c=0;c<5;c++){for(var d=0;d<5;d++){var i=c+5*d;var a=j[i];var B=b[i];var v=b[(c+1)%5+5*d];var w=b[(c+2)%5+5*d];a.high=B.high^~v.high&w.high;a.low=B.low^~v.low&w.low}}var a=j[0];var t=f[s];a.high^=t.high;a.low^=t.low}},_doFinalize:function(){var f=this._data;var c=f.words;var o=this._nDataBytes*8;var e=f.sigBytes*8;var i=this.blockSize*32;c[e>>>5]|=1<<24-e%32;c[(n.ceil((e+1)/i)*i>>>5)-1]|=128;f.sigBytes=c.length*4;this._process();var m=this._state;var h=this.cfg.outputLength/8;var l=h/8;var d=[];for(var g=0;g<l;g++){var j=m[g];var b=j.high;var a=j.low;b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4.27825536E9;a=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4.27825536E9;d.push(a);d.push(b)}return new k.init(d,h)},clone:function(){var b=c.clone.call(this);var d=b._state=this._state.slice(0);for(var a=0;a<25;a++){d[a]=d[a].clone()}return b}});d.SHA3=c._createHelper(j);d.HmacSHA3=c._createHmacHelper(j)})(Math);(function(){var d=a;var j=d.lib;var e=j.Hasher;var g=d.x64;var b=g.Word;var h=g.WordArray;var i=d.algo;function X64Word_create(){return b.create.apply(b,arguments)}var k=[X64Word_create(1116352408,3.609767458E9),X64Word_create(1899447441,602891725),X64Word_create(3.049323471E9,3.964484399E9),X64Word_create(3.921009573E9,2.173295548E9),X64Word_create(961987163,4.081628472E9),X64Word_create(1508970993,3.053834265E9),X64Word_create(2.453635748E9,2.937671579E9),X64Word_create(2.870763221E9,3.66460956E9),X64Word_create(3.62438108E9,2.734883394E9),X64Word_create(310598401,1164996542),X64Word_create(607225278,1323610764),X64Word_create(1426881987,3.590304994E9),X64Word_create(1925078388,4.068182383E9),X64Word_create(2.162078206E9,991336113),X64Word_create(2.614888103E9,633803317),X64Word_create(3.24822258E9,3.479774868E9),X64Word_create(3.835390401E9,2.666613458E9),X64Word_create(4.022224774E9,944711139),X64Word_create(264347078,2.341262773E9),X64Word_create(604807628,2007800933),X64Word_create(770255983,1495990901),X64Word_create(1249150122,1856431235),X64Word_create(1555081692,3.175218132E9),X64Word_create(1996064986,2.198950837E9),X64Word_create(2.554220882E9,3.999719339E9),X64Word_create(2.821834349E9,766784016),X64Word_create(2.952996808E9,2.566594879E9),X64Word_create(3.210313671E9,3.203337956E9),X64Word_create(3.336571891E9,1034457026),X64Word_create(3.584528711E9,2.466948901E9),X64Word_create(113926993,3.758326383E9),X64Word_create(338241895,168717936),X64Word_create(666307205,1188179964),X64Word_create(773529912,1546045734),X64Word_create(1294757372,1522805485),X64Word_create(1396182291,2.643833823E9),X64Word_create(1695183700,2.34352739E9),X64Word_create(1986661051,1014477480),X64Word_create(2.17702635E9,1206759142),X64Word_create(2.456956037E9,344077627),X64Word_create(2.730485921E9,1290863460),X64Word_create(2.820302411E9,3.158454273E9),X64Word_create(3.2597308E9,3.505952657E9),X64Word_create(3.345764771E9,106217008),X64Word_create(3.516065817E9,3.606008344E9),X64Word_create(3.600352804E9,1432725776),X64Word_create(4.094571909E9,1467031594),X64Word_create(275423344,851169720),X64Word_create(430227734,3.100823752E9),X64Word_create(506948616,1363258195),X64Word_create(659060556,3.750685593E9),X64Word_create(883997877,3.78505028E9),X64Word_create(958139571,3.318307427E9),X64Word_create(1322822218,3.812723403E9),X64Word_create(1537002063,2003034995),X64Word_create(1747873779,3.602036899E9),X64Word_create(1955562222,1575990012),X64Word_create(2024104815,1125592928),X64Word_create(2.227730452E9,2.716904306E9),X64Word_create(2.361852424E9,442776044),X64Word_create(2.428436474E9,593698344),X64Word_create(2.756734187E9,3.733110249E9),X64Word_create(3.204031479E9,2.999351573E9),X64Word_create(3.329325298E9,3.815920427E9),X64Word_create(3.391569614E9,3.9283839E9),X64Word_create(3.515267271E9,566280711),X64Word_create(3.940187606E9,3.454069534E9),X64Word_create(4.118630271E9,4.000239992E9),X64Word_create(116418474,1914138554),X64Word_create(174292421,2.73105527E9),X64Word_create(289380356,3.203993006E9),X64Word_create(460393269,320620315),X64Word_create(685471733,587496836),X64Word_create(852142971,1086792851),X64Word_create(1017036298,365543100),X64Word_create(1126000580,2.618297676E9),X64Word_create(1288033470,3.409855158E9),X64Word_create(1501505948,4.234509866E9),X64Word_create(1607167915,987167468),X64Word_create(1816402316,1246189591)];var c=[];(function(){for(var a=0;a<80;a++){c[a]=X64Word_create()}})();var f=i.SHA512=e.extend({_doReset:function(){this._hash=new h.init([new b.init(1779033703,4.08923572E9),new b.init(3.144134277E9,2.227873595E9),new b.init(1013904242,4.271175723E9),new b.init(2.773480762E9,1595750129),new b.init(1359893119,2.917565137E9),new b.init(2.600822924E9,725511199),new b.init(528734635,4.215389547E9),new b.init(1541459225,327033209)])},_doProcessBlock:function(am,Y){var j=this._hash.words;var G=j[0];var H=j[1];var I=j[2];var J=j[3];var K=j[4];var L=j[5];var M=j[6];var N=j[7];var _=G.high;var y=G.low;var aa=H.high;var z=H.low;var ab=I.high;var A=I.low;var ac=J.high;var B=J.low;var ad=K.high;var C=K.low;var ae=L.high;var D=L.low;var af=M.high;var E=M.low;var ag=N.high;var F=N.low;var f=_;var b=y;var s=aa;var o=z;var t=ab;var p=A;var R=ac;var u=B;var g=ad;var d=C;var P=ae;var v=D;var Q=af;var w=E;var S=ag;var x=F;for(var h=0;h<80;h++){var O=c[h];if(h<16){var l=O.high=am[Y+h*2]|0;var e=O.low=am[Y+h*2+1]|0}else {var U=c[h-15];var m=U.high;var q=U.low;var an=(m>>>1|q<<31)^(m>>>8|q<<24)^m>>>7;var T=(q>>>1|m<<31)^(q>>>8|m<<24)^(q>>>7|m<<25);var W=c[h-2];var n=W.high;var r=W.low;var ao=(n>>>19|r<<13)^(n<<3|r>>>29)^n>>>6;var V=(r>>>19|n<<13)^(r<<3|n>>>29)^(r>>>6|n<<26);var ai=c[h-7];var at=ai.high;var au=ai.low;var $=c[h-16];var as=$.high;var Z=$.low;var e=T+au;var l=an+at+(e>>>0<T>>>0?1:0);var e=e+V;var l=l+ao+(e>>>0<V>>>0?1:0);var e=e+Z;var l=l+as+(e>>>0<Z>>>0?1:0);O.high=l;O.low=e}var ay=g&P^~g&Q;var aj=d&v^~d&w;var av=f&s^f&t^s&t;var aw=b&o^b&p^o&p;var ap=(f>>>28|b<<4)^(f<<30|b>>>2)^(f<<25|b>>>7);var X=(b>>>28|f<<4)^(b<<30|f>>>2)^(b<<25|f>>>7);var aq=(g>>>14|d<<18)^(g>>>18|d<<14)^(g<<23|d>>>9);var ar=(d>>>14|g<<18)^(d>>>18|g<<14)^(d<<23|g>>>9);var al=k[h];var ax=al.high;var ah=al.low;var a=x+ar;var i=S+aq+(a>>>0<x>>>0?1:0);var a=a+aj;var i=i+ay+(a>>>0<aj>>>0?1:0);var a=a+ah;var i=i+ax+(a>>>0<ah>>>0?1:0);var a=a+e;var i=i+l+(a>>>0<e>>>0?1:0);var ak=X+aw;var az=ap+av+(ak>>>0<X>>>0?1:0);S=Q;x=w;Q=P;w=v;P=g;v=d;d=u+a|0;g=R+i+(d>>>0<u>>>0?1:0)|0;R=t;u=p;t=s;p=o;s=f;o=b;b=a+ak|0;f=i+az+(b>>>0<a>>>0?1:0)|0}y=G.low=y+b;G.high=_+f+(y>>>0<b>>>0?1:0);z=H.low=z+o;H.high=aa+s+(z>>>0<o>>>0?1:0);A=I.low=A+p;I.high=ab+t+(A>>>0<p>>>0?1:0);B=J.low=B+u;J.high=ac+R+(B>>>0<u>>>0?1:0);C=K.low=C+d;K.high=ad+g+(C>>>0<d>>>0?1:0);D=L.low=D+v;L.high=ae+P+(D>>>0<v>>>0?1:0);E=M.low=E+w;M.high=af+Q+(E>>>0<w>>>0?1:0);F=N.low=F+x;N.high=ag+S+(F>>>0<x>>>0?1:0)},_doFinalize:function(){var c=this._data;var a=c.words;var d=this._nDataBytes*8;var b=c.sigBytes*8;a[b>>>5]|=128<<24-b%32;a[(b+128>>>10<<5)+30]=Math.floor(d/4.294967296E9);a[(b+128>>>10<<5)+31]=d;c.sigBytes=a.length*4;this._process();var e=this._hash.toX32();return e},clone:function(){var a=e.clone.call(this);a._hash=this._hash.clone();return a},blockSize:1024/32});d.SHA512=e._createHelper(f);d.HmacSHA512=e._createHmacHelper(f)})();(function(){var d=a;var g=d.x64;var b=g.Word;var h=g.WordArray;var e=d.algo;var c=e.SHA512;var f=e.SHA384=c.extend({_doReset:function(){this._hash=new h.init([new b.init(3.418070365E9,3.238371032E9),new b.init(1654270250,914150663),new b.init(2.43852937E9,812702999),new b.init(355462360,4.144912697E9),new b.init(1731405415,4.290775857E9),new b.init(2.394180231E9,1750603025),new b.init(3.675008525E9,1694076839),new b.init(1203062813,3.204075428E9)])},_doFinalize:function(){var a=c._doFinalize.call(this);a.sigBytes-=16;return a}});d.SHA384=c._createHelper(f);d.HmacSHA384=c._createHmacHelper(f)})();a.lib.Cipher||function(p){var c=a;var b=c.lib;var f=b.Base;var e=b.WordArray;var i=b.BufferedBlockAlgorithm;var k=c.enc;var A=k.Utf8;var j=k.Base64;var r=c.algo;var t=r.EvpKDF;var g=b.Cipher=i.extend({cfg:f.extend(),createEncryptor:function(b,a){return this.create(this._ENC_XFORM_MODE,b,a)},createDecryptor:function(b,a){return this.create(this._DEC_XFORM_MODE,b,a)},init:function(a,c,b){this.cfg=this.cfg.extend(b);this._xformMode=a;this._key=c;this.reset()},reset:function(){i.reset.call(this);this._doReset()},process:function(a){this._append(a);return this._process()},finalize:function(a){if(a){this._append(a)}var b=this._doFinalize();return b},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function selectCipherStrategy(a){if(typeof a=='string'){return l}else {return d}}return function(a){return {encrypt:function(c,b,d){return selectCipherStrategy(b).encrypt(a,c,b,d)},decrypt:function(c,b,d){return selectCipherStrategy(b).decrypt(a,c,b,d)}}}}()});var y=b.StreamCipher=g.extend({_doFinalize:function(){var a=this._process(!!'flush');return a},blockSize:1});var s=c.mode={};var n=b.BlockCipherMode=f.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a;this._iv=b}});var x=s.CBC=function(){var a=n.extend();a.Encryptor=a.extend({processBlock:function(b,a){var d=this._cipher;var c=d.blockSize;xorBlock.call(this,b,a,c);d.encryptBlock(b,a);this._prevBlock=b.slice(a,a+c)}});a.Decryptor=a.extend({processBlock:function(b,a){var d=this._cipher;var c=d.blockSize;var e=b.slice(a,a+c);d.decryptBlock(b,a);xorBlock.call(this,b,a,c);this._prevBlock=e}});function xorBlock(f,e,d){var c=this._iv;if(c){var b=c;this._iv=p}else {var b=this._prevBlock}for(var a=0;a<d;a++){f[e+a]^=b[a]}}return a}();var v=c.pad={};var w=v.Pkcs7={pad:function(d,h){var b=h*4;var a=b-d.sigBytes%b;var g=a<<24|a<<16|a<<8|a;var c=[];for(var f=0;f<a;f+=4){c.push(g)}var i=e.create(c,a);d.concat(i)},unpad:function(a){var b=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=b}};var z=b.BlockCipher=g.extend({cfg:g.cfg.extend({mode:x,padding:w}),reset:function(){g.reset.call(this);var d=this.cfg;var b=d.iv;var c=d.mode;if(this._xformMode==this._ENC_XFORM_MODE){var a=c.createEncryptor}else {var a=c.createDecryptor;this._minBufferSize=1}if(this._mode&&this._mode.__creator==a){this._mode.init(this,b&&b.words)}else {this._mode=a.call(c,this,b&&b.words);this._mode.__creator=a}},_doProcessBlock:function(b,a){this._mode.processBlock(b,a)},_doFinalize:function(){var b=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){b.pad(this._data,this.blockSize);var a=this._process(!!'flush')}else {var a=this._process(!!'flush');b.unpad(a)}return a},blockSize:128/32});var h=b.CipherParams=f.extend({init:function(a){this.mixIn(a)},toString:function(a){return (a||this.formatter).stringify(this)}});var q=c.format={};var m=q.OpenSSL={stringify:function(a){var b=a.ciphertext;var d=a.salt;if(d){var c=e.create([1398893684,1701076831]).concat(d).concat(b)}else {var c=b}return c.toString(j)},parse:function(c){var b=j.parse(c);var a=b.words;if(a[0]==1398893684&&a[1]==1701076831){var d=e.create(a.slice(2,4));a.splice(0,4);b.sigBytes-=16}return h.create({ciphertext:b,salt:d})}};var d=b.SerializableCipher=f.extend({cfg:f.extend({format:m}),encrypt:function(c,g,e,a){a=this.cfg.extend(a);var d=c.createEncryptor(e,a);var f=d.finalize(g);var b=d.cfg;return h.create({ciphertext:f,key:e,iv:b.iv,algorithm:c,mode:b.mode,padding:b.padding,blockSize:c.blockSize,formatter:a.format})},decrypt:function(d,b,e,a){a=this.cfg.extend(a);b=this._parse(b,a.format);var c=d.createDecryptor(e,a).finalize(b.ciphertext);return c},_parse:function(a,b){if(typeof a=='string'){return b.parse(a,this)}else {return a}}});var u=c.kdf={};var o=u.OpenSSL={execute:function(f,b,d,a){if(!a){a=e.random(64/8)}var c=t.create({keySize:b+d}).compute(f,a);var g=e.create(c.words.slice(b),d*4);c.sigBytes=b*4;return h.create({key:c,iv:g,salt:a})}};var l=b.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:o}),encrypt:function(c,g,f,a){a=this.cfg.extend(a);var b=a.kdf.execute(f,c.keySize,c.ivSize);a.iv=b.iv;var e=d.encrypt.call(this,c,g,b.key,a);e.mixIn(b);return e},decrypt:function(c,b,g,a){a=this.cfg.extend(a);b=this._parse(b,a.format);var e=a.kdf.execute(g,c.keySize,c.ivSize,b.salt);a.iv=e.iv;var f=d.decrypt.call(this,c,b,e.key,a);return f}})}();a.mode.CFB=function(){var b=a.lib.BlockCipherMode.extend();b.Encryptor=b.extend({processBlock:function(d,a){var c=this._cipher;var b=c.blockSize;generateKeystreamAndEncrypt.call(this,d,a,b,c);this._prevBlock=d.slice(a,a+b)}});b.Decryptor=b.extend({processBlock:function(d,a){var c=this._cipher;var b=c.blockSize;var e=d.slice(a,a+b);generateKeystreamAndEncrypt.call(this,d,a,b,c);this._prevBlock=e}});function generateKeystreamAndEncrypt(g,f,d,e){var c=this._iv;if(c){var b=c.slice(0);this._iv=undefined}else {var b=this._prevBlock}e.encryptBlock(b,0);for(var a=0;a<d;a++){g[f+a]^=b[a]}}return b}();a.mode.ECB=function(){var b=a.lib.BlockCipherMode.extend();b.Encryptor=b.extend({processBlock:function(b,a){this._cipher.encryptBlock(b,a)}});b.Decryptor=b.extend({processBlock:function(b,a){this._cipher.decryptBlock(b,a)}});return b}();a.pad.AnsiX923={pad:function(a,f){var d=a.sigBytes;var c=f*4;var b=c-d%c;var e=d+b-1;a.clamp();a.words[e>>>2]|=b<<24-e%4*8;a.sigBytes+=b},unpad:function(a){var b=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=b}};a.pad.Iso10126={pad:function(d,e){var b=e*4;var c=b-d.sigBytes%b;d.concat(a.lib.WordArray.random(c-1)).concat(a.lib.WordArray.create([c<<24],1))},unpad:function(a){var b=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=b}};a.pad.Iso97971={pad:function(b,c){b.concat(a.lib.WordArray.create([2.147483648E9],1));a.pad.ZeroPadding.pad(b,c)},unpad:function(b){a.pad.ZeroPadding.unpad(b);b.sigBytes--}};a.mode.OFB=function(){var b=a.lib.BlockCipherMode.extend();var c=b.Encryptor=b.extend({processBlock:function(g,f){var c=this._cipher;var e=c.blockSize;var d=this._iv;var b=this._keystream;if(d){b=this._keystream=d.slice(0);this._iv=undefined}c.encryptBlock(b,0);for(var a=0;a<e;a++){g[f+a]^=b[a]}}});b.Decryptor=c;return b}();a.pad.NoPadding={pad:function(){},unpad:function(){}};(function(i){var b=a;var g=b.lib;var d=g.CipherParams;var f=b.enc;var c=f.Hex;var e=b.format;var h=e.Hex={stringify:function(a){return a.ciphertext.toString(c)},parse:function(b){var a=c.parse(b);return d.create({ciphertext:a})}}})();(function(){var g=a;var o=g.lib;var h=o.BlockCipher;var n=g.algo;var b=[];var m=[];var i=[];var j=[];var k=[];var l=[];var c=[];var d=[];var e=[];var f=[];(function(){var h=[];for(var o=0;o<256;o++){if(o<128){h[o]=o<<1}else {h[o]=o<<1^283}}var n=0;var p=0;for(var o=0;o<256;o++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^g&255^99;b[n]=g;m[g]=n;var q=h[n];var r=h[q];var s=h[r];var a=h[g]*257^g*16843008;i[n]=a<<24|a>>>8;j[n]=a<<16|a>>>16;k[n]=a<<8|a>>>24;l[n]=a;var a=s*16843009^r*65537^q*257^n*16843008;c[g]=a<<24|a>>>8;d[g]=a<<16|a>>>16;e[g]=a<<8|a>>>24;f[g]=a;if(!n){n=p=1}else {n=q^h[h[h[s^q]]];p^=h[h[p]]}}})();var p=[0,1,2,4,8,16,32,64,128,27,54];var q=n.AES=h.extend({_doReset:function(){if(this._nRounds&&this._keyPriorReset===this._key){return}var m=this._keyPriorReset=this._key;var n=m.words;var i=m.sigBytes/4;var o=this._nRounds=i+6;var k=(o+1)*4;var j=this._keySchedule=[];for(var g=0;g<k;g++){if(g<i){j[g]=n[g]}else {var a=j[g-1];if(!(g%i)){a=a<<8|a>>>24;a=b[a>>>24]<<24|b[a>>>16&255]<<16|b[a>>>8&255]<<8|b[a&255];a^=p[g/i|0]<<24}else {if(i>6&&g%i==4){a=b[a>>>24]<<24|b[a>>>16&255]<<16|b[a>>>8&255]<<8|b[a&255]}}j[g]=j[g-i]^a}}var l=this._invKeySchedule=[];for(var h=0;h<k;h++){var g=k-h;if(h%4){var a=j[g]}else {var a=j[g-4]}if(h<4||g<=4){l[h]=a}else {l[h]=c[b[a>>>24]]^d[b[a>>>16&255]]^e[b[a>>>8&255]]^f[b[a&255]]}}},encryptBlock:function(c,a){this._doCryptBlock(c,a,this._keySchedule,i,j,k,l,b)},decryptBlock:function(b,a){var g=b[a+1];b[a+1]=b[a+3];b[a+3]=g;this._doCryptBlock(b,a,this._invKeySchedule,c,d,e,f,m);var g=b[a+1];b[a+1]=b[a+3];b[a+3]=g},_doCryptBlock:function(i,g,b,j,k,l,m,a){var s=this._nRounds;var c=i[g]^b[0];var d=i[g+1]^b[1];var e=i[g+2]^b[2];var f=i[g+3]^b[3];var h=4;for(var r=1;r<s;r++){var n=j[c>>>24]^k[d>>>16&255]^l[e>>>8&255]^m[f&255]^b[h++];var o=j[d>>>24]^k[e>>>16&255]^l[f>>>8&255]^m[c&255]^b[h++];var p=j[e>>>24]^k[f>>>16&255]^l[c>>>8&255]^m[d&255]^b[h++];var q=j[f>>>24]^k[c>>>16&255]^l[d>>>8&255]^m[e&255]^b[h++];c=n;d=o;e=p;f=q}var n=(a[c>>>24]<<24|a[d>>>16&255]<<16|a[e>>>8&255]<<8|a[f&255])^b[h++];var o=(a[d>>>24]<<24|a[e>>>16&255]<<16|a[f>>>8&255]<<8|a[c&255])^b[h++];var p=(a[e>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[d&255])^b[h++];var q=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[d>>>8&255]<<8|a[e&255])^b[h++];i[g]=n;i[g+1]=o;i[g+2]=p;i[g+3]=q},keySize:256/32});g.AES=h._createHelper(q)})();(function(){var d=a;var g=d.lib;var e=g.WordArray;var b=g.BlockCipher;var f=d.algo;var m=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4];var h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32];var i=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28];var l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2.147483648E9:514,2.415919104E9:8389120,2.68435456E9:33280,2.952790016E9:8421376,3.221225472E9:32770,3.489660928E9:8388610,3.758096384E9:0,4.02653184E9:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2.281701376E9:8389120,2.550136832E9:33280,2.818572288E9:8421376,3.087007744E9:8389122,3.3554432E9:8388610,3.623878656E9:32770,3.892314112E9:514,4.160749568E9:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2.147483649E9:8421890,2.415919105E9:8421376,2.684354561E9:8388610,2.952790017E9:33282,3.221225473E9:514,3.489660929E9:8389120,3.758096385E9:32770,4.026531841E9:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2.281701377E9:32770,2.550136833E9:8389122,2.818572289E9:514,3.087007745E9:8421888,3.355443201E9:8389120,3.623878657E9:0,3.892314113E9:33280,4.160749569E9:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2.151682048E9,65536:2.147487808E9,131072:4198464,196608:2.151677952E9,262144:0,327680:4198400,393216:2.147483712E9,458752:4194368,524288:2.147483648E9,589824:4194304,655360:64,720896:2.147487744E9,786432:2.151678016E9,851968:4160,917504:4096,983040:2.151682112E9,32768:2.147487808E9,98304:64,163840:2.151678016E9,229376:2.147487744E9,294912:4198400,360448:2.151682112E9,425984:0,491520:2.151677952E9,557056:4096,622592:2.151682048E9,688128:4194304,753664:4160,819200:2.147483648E9,884736:4194368,950272:4198464,1015808:2.147483712E9,1048576:4194368,1114112:4198400,1179648:2.147483712E9,1245184:0,1310720:4160,1376256:2.151678016E9,1441792:2.151682048E9,1507328:2.147487808E9,1572864:2.151682112E9,1638400:2.147483648E9,1703936:2.151677952E9,1769472:4198464,1835008:2.147487744E9,1900544:4194304,1966080:64,2031616:4096,1081344:2.151677952E9,1146880:2.151682112E9,1212416:0,1277952:4198400,1343488:4194368,1409024:2.147483648E9,1474560:2.147487808E9,1540096:64,1605632:2.147483712E9,1671168:4096,1736704:2.147487744E9,1802240:2.151678016E9,1867776:4160,1933312:2.151682048E9,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2.147483648E9:2048,2.147483649E9:134350880,2.14748365E9:134219808,2.147483651E9:134217728,2.147483652E9:134348800,2.147483653E9:133120,2.147483654E9:133152,2.147483655E9:32,2.147483656E9:134217760,2.147483657E9:2080,2.147483658E9:131104,2.147483659E9:134350848,2.14748366E9:0,2.147483661E9:134348832,2.147483662E9:134219776,2.147483663E9:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2.147483664E9:131072,2.147483665E9:2048,2.147483666E9:134348832,2.147483667E9:133152,2.147483668E9:32,2.147483669E9:134348800,2.14748367E9:134217728,2.147483671E9:134219808,2.147483672E9:134350880,2.147483673E9:134217760,2.147483674E9:134219776,2.147483675E9:0,2.147483676E9:133120,2.147483677E9:2080,2.147483678E9:131104,2.147483679E9:134350848}];var j=[4.160749569E9,528482304,33030144,2064384,129024,8064,504,2.147483679E9];var c=f.DES=b.extend({_doReset:function(){var l=this._key;var k=l.words;var d=[];for(var a=0;a<56;a++){var e=m[a]-1;d[a]=k[e>>>5]>>>31-e%32&1}var g=this._subKeys=[];for(var c=0;c<16;c++){var b=g[c]=[];var f=i[c];for(var a=0;a<24;a++){b[a/6|0]|=d[(h[a]-1+f)%28]<<31-a%6;b[4+(a/6|0)]|=d[28+(h[a+24]-1+f)%28]<<31-a%6}b[0]=b[0]<<1|b[0]>>>31;for(var a=1;a<7;a++){b[a]=b[a]>>>(a-1)*4+3}b[7]=b[7]<<5|b[7]>>>27}var j=this._invSubKeys=[];for(var a=0;a<16;a++){j[a]=g[15-a]}},encryptBlock:function(b,a){this._doCryptBlock(b,a,this._subKeys)},decryptBlock:function(b,a){this._doCryptBlock(b,a,this._invSubKeys)},_doCryptBlock:function(c,b,g){this._lBlock=c[b];this._rBlock=c[b+1];exchangeLR.call(this,4,252645135);exchangeLR.call(this,16,65535);exchangeRL.call(this,2,858993459);exchangeRL.call(this,8,16711935);exchangeLR.call(this,1,1431655765);for(var d=0;d<16;d++){var i=g[d];var h=this._lBlock;var e=this._rBlock;var f=0;for(var a=0;a<8;a++){f|=l[a][((e^i[a])&j[a])>>>0]}this._lBlock=e;this._rBlock=h^f}var k=this._lBlock;this._lBlock=this._rBlock;this._rBlock=k;exchangeLR.call(this,1,1431655765);exchangeRL.call(this,8,16711935);exchangeRL.call(this,2,858993459);exchangeLR.call(this,16,65535);exchangeLR.call(this,4,252645135);c[b]=this._lBlock;c[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function exchangeLR(a,c){var b=(this._lBlock>>>a^this._rBlock)&c;this._rBlock^=b;this._lBlock^=b<<a}function exchangeRL(a,c){var b=(this._rBlock>>>a^this._lBlock)&c;this._lBlock^=b;this._rBlock^=b<<a}d.DES=b._createHelper(c);var k=f.TripleDES=b.extend({_doReset:function(){var b=this._key;var a=b.words;this._des1=c.createEncryptor(e.create(a.slice(0,2)));this._des2=c.createEncryptor(e.create(a.slice(2,4)));this._des3=c.createEncryptor(e.create(a.slice(4,6)))},encryptBlock:function(b,a){this._des1.encryptBlock(b,a);this._des2.decryptBlock(b,a);this._des3.encryptBlock(b,a)},decryptBlock:function(b,a){this._des3.decryptBlock(b,a);this._des2.encryptBlock(b,a);this._des1.decryptBlock(b,a)},keySize:192/32,ivSize:64/32,blockSize:64/32});d.TripleDES=b._createHelper(k)})();(function(){var c=a;var g=c.lib;var d=g.StreamCipher;var e=c.algo;var b=e.RC4=d.extend({_doReset:function(){var e=this._key;var g=e.words;var f=e.sigBytes;var b=this._S=[];for(var a=0;a<256;a++){b[a]=a}for(var a=0,c=0;a<256;a++){var d=a%f;var h=g[d>>>2]>>>24-d%4*8&255;c=(c+b[a]+h)%256;var i=b[a];b[a]=b[c];b[c]=i}this._i=this._j=0},_doProcessBlock:function(b,a){b[a]^=generateKeystreamWord.call(this)},keySize:256/32,ivSize:0});function generateKeystreamWord(){var a=this._S;var b=this._i;var c=this._j;var e=0;for(var d=0;d<4;d++){b=(b+1)%256;c=(c+a[b])%256;var f=a[b];a[b]=a[c];a[c]=f;e|=a[(a[b]+a[c])%256]<<24-d*8}this._i=b;this._j=c;return e}c.RC4=d._createHelper(b);var f=e.RC4Drop=b.extend({cfg:b.cfg.extend({drop:192}),_doReset:function(){b._doReset.call(this);for(var a=this.cfg.drop;a>0;a--){generateKeystreamWord.call(this)}}});c.RC4Drop=d._createHelper(f)})();a.mode.CTRGladman=function(){var b=a.lib.BlockCipherMode.extend();function incWord(a){if((a>>24&255)===255){var b=a>>16&255;var c=a>>8&255;var d=a&255;if(b===255){b=0;if(c===255){c=0;if(d===255){d=0}else {++d}}else {++c}}else {++b}a=0;a+=b<<16;a+=c<<8;a+=d}else {a+=1<<24}return a}function incCounter(a){if((a[0]=incWord(a[0]))===0){a[1]=incWord(a[1])}return a}var c=b.Encryptor=b.extend({processBlock:function(h,g){var d=this._cipher;var f=d.blockSize;var e=this._iv;var b=this._counter;if(e){b=this._counter=e.slice(0);this._iv=undefined}incCounter(b);var c=b.slice(0);d.encryptBlock(c,0);for(var a=0;a<f;a++){h[g+a]^=c[a]}}});b.Decryptor=c;return b}();(function(){var e=a;var i=e.lib;var f=i.StreamCipher;var g=e.algo;var c=[];var d=[];var b=[];var h=g.Rabbit=f.extend({_doReset:function(){var a=this._key.words;var k=this.cfg.iv;for(var b=0;b<4;b++){a[b]=(a[b]<<8|a[b]>>>24)&16711935|(a[b]<<24|a[b]>>>8)&4.27825536E9}var l=this._X=[a[0],a[3]<<16|a[2]>>>16,a[1],a[0]<<16|a[3]>>>16,a[2],a[1]<<16|a[0]>>>16,a[3],a[2]<<16|a[1]>>>16];var c=this._C=[a[2]<<16|a[2]>>>16,a[0]&4.29490176E9|a[1]&65535,a[3]<<16|a[3]>>>16,a[1]&4.29490176E9|a[2]&65535,a[0]<<16|a[0]>>>16,a[2]&4.29490176E9|a[3]&65535,a[1]<<16|a[1]>>>16,a[3]&4.29490176E9|a[0]&65535];this._b=0;for(var b=0;b<4;b++){nextState.call(this)}for(var b=0;b<8;b++){c[b]^=l[b+4&7]}if(k){var h=k.words;var d=h[0];var e=h[1];var f=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4.27825536E9;var g=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4.27825536E9;var i=f>>>16|g&4.29490176E9;var j=g<<16|f&65535;c[0]^=f;c[1]^=i;c[2]^=g;c[3]^=j;c[4]^=f;c[5]^=i;c[6]^=g;c[7]^=j;for(var b=0;b<4;b++){nextState.call(this)}}},_doProcessBlock:function(e,d){var a=this._X;nextState.call(this);c[0]=a[0]^a[5]>>>16^a[3]<<16;c[1]=a[2]^a[7]>>>16^a[5]<<16;c[2]=a[4]^a[1]>>>16^a[7]<<16;c[3]=a[6]^a[3]>>>16^a[1]<<16;for(var b=0;b<4;b++){c[b]=(c[b]<<8|c[b]>>>24)&16711935|(c[b]<<24|c[b]>>>8)&4.27825536E9;e[d+b]^=c[b]}},blockSize:128/32,ivSize:64/32});function nextState(){var e=this._X;var a=this._C;for(var c=0;c<8;c++){d[c]=a[c]}a[0]=a[0]+1295307597+this._b|0;a[1]=a[1]+3.545052371E9+(a[0]>>>0<d[0]>>>0?1:0)|0;a[2]=a[2]+886263092+(a[1]>>>0<d[1]>>>0?1:0)|0;a[3]=a[3]+1295307597+(a[2]>>>0<d[2]>>>0?1:0)|0;a[4]=a[4]+3.545052371E9+(a[3]>>>0<d[3]>>>0?1:0)|0;a[5]=a[5]+886263092+(a[4]>>>0<d[4]>>>0?1:0)|0;a[6]=a[6]+1295307597+(a[5]>>>0<d[5]>>>0?1:0)|0;a[7]=a[7]+3.545052371E9+(a[6]>>>0<d[6]>>>0?1:0)|0;this._b=a[7]>>>0<d[7]>>>0?1:0;for(var c=0;c<8;c++){var f=e[c]+a[c];var g=f&65535;var h=f>>>16;var i=((g*g>>>17)+g*h>>>15)+h*h;var j=((f&4.29490176E9)*f|0)+((f&65535)*f|0);b[c]=i^j}e[0]=b[0]+(b[7]<<16|b[7]>>>16)+(b[6]<<16|b[6]>>>16)|0;e[1]=b[1]+(b[0]<<8|b[0]>>>24)+b[7]|0;e[2]=b[2]+(b[1]<<16|b[1]>>>16)+(b[0]<<16|b[0]>>>16)|0;e[3]=b[3]+(b[2]<<8|b[2]>>>24)+b[1]|0;e[4]=b[4]+(b[3]<<16|b[3]>>>16)+(b[2]<<16|b[2]>>>16)|0;e[5]=b[5]+(b[4]<<8|b[4]>>>24)+b[3]|0;e[6]=b[6]+(b[5]<<16|b[5]>>>16)+(b[4]<<16|b[4]>>>16)|0;e[7]=b[7]+(b[6]<<8|b[6]>>>24)+b[5]|0}e.Rabbit=f._createHelper(h)})();a.mode.CTR=function(){var b=a.lib.BlockCipherMode.extend();var c=b.Encryptor=b.extend({processBlock:function(h,g){var e=this._cipher;var c=e.blockSize;var f=this._iv;var a=this._counter;if(f){a=this._counter=f.slice(0);this._iv=undefined}var d=a.slice(0);e.encryptBlock(d,0);a[c-1]=a[c-1]+1|0;for(var b=0;b<c;b++){h[g+b]^=d[b]}}});b.Decryptor=c;return b}();(function(){var e=a;var i=e.lib;var f=i.StreamCipher;var h=e.algo;var c=[];var d=[];var b=[];var g=h.RabbitLegacy=f.extend({_doReset:function(){var a=this._key.words;var k=this.cfg.iv;var l=this._X=[a[0],a[3]<<16|a[2]>>>16,a[1],a[0]<<16|a[3]>>>16,a[2],a[1]<<16|a[0]>>>16,a[3],a[2]<<16|a[1]>>>16];var c=this._C=[a[2]<<16|a[2]>>>16,a[0]&4.29490176E9|a[1]&65535,a[3]<<16|a[3]>>>16,a[1]&4.29490176E9|a[2]&65535,a[0]<<16|a[0]>>>16,a[2]&4.29490176E9|a[3]&65535,a[1]<<16|a[1]>>>16,a[3]&4.29490176E9|a[0]&65535];this._b=0;for(var b=0;b<4;b++){nextState.call(this)}for(var b=0;b<8;b++){c[b]^=l[b+4&7]}if(k){var h=k.words;var d=h[0];var e=h[1];var f=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4.27825536E9;var g=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4.27825536E9;var i=f>>>16|g&4.29490176E9;var j=g<<16|f&65535;c[0]^=f;c[1]^=i;c[2]^=g;c[3]^=j;c[4]^=f;c[5]^=i;c[6]^=g;c[7]^=j;for(var b=0;b<4;b++){nextState.call(this)}}},_doProcessBlock:function(e,d){var a=this._X;nextState.call(this);c[0]=a[0]^a[5]>>>16^a[3]<<16;c[1]=a[2]^a[7]>>>16^a[5]<<16;c[2]=a[4]^a[1]>>>16^a[7]<<16;c[3]=a[6]^a[3]>>>16^a[1]<<16;for(var b=0;b<4;b++){c[b]=(c[b]<<8|c[b]>>>24)&16711935|(c[b]<<24|c[b]>>>8)&4.27825536E9;e[d+b]^=c[b]}},blockSize:128/32,ivSize:64/32});function nextState(){var e=this._X;var a=this._C;for(var c=0;c<8;c++){d[c]=a[c]}a[0]=a[0]+1295307597+this._b|0;a[1]=a[1]+3.545052371E9+(a[0]>>>0<d[0]>>>0?1:0)|0;a[2]=a[2]+886263092+(a[1]>>>0<d[1]>>>0?1:0)|0;a[3]=a[3]+1295307597+(a[2]>>>0<d[2]>>>0?1:0)|0;a[4]=a[4]+3.545052371E9+(a[3]>>>0<d[3]>>>0?1:0)|0;a[5]=a[5]+886263092+(a[4]>>>0<d[4]>>>0?1:0)|0;a[6]=a[6]+1295307597+(a[5]>>>0<d[5]>>>0?1:0)|0;a[7]=a[7]+3.545052371E9+(a[6]>>>0<d[6]>>>0?1:0)|0;this._b=a[7]>>>0<d[7]>>>0?1:0;for(var c=0;c<8;c++){var f=e[c]+a[c];var g=f&65535;var h=f>>>16;var i=((g*g>>>17)+g*h>>>15)+h*h;var j=((f&4.29490176E9)*f|0)+((f&65535)*f|0);b[c]=i^j}e[0]=b[0]+(b[7]<<16|b[7]>>>16)+(b[6]<<16|b[6]>>>16)|0;e[1]=b[1]+(b[0]<<8|b[0]>>>24)+b[7]|0;e[2]=b[2]+(b[1]<<16|b[1]>>>16)+(b[0]<<16|b[0]>>>16)|0;e[3]=b[3]+(b[2]<<8|b[2]>>>24)+b[1]|0;e[4]=b[4]+(b[3]<<16|b[3]>>>16)+(b[2]<<16|b[2]>>>16)|0;e[5]=b[5]+(b[4]<<8|b[4]>>>24)+b[3]|0;e[6]=b[6]+(b[5]<<16|b[5]>>>16)+(b[4]<<16|b[4]>>>16)|0;e[7]=b[7]+(b[6]<<8|b[6]>>>24)+b[5]|0}e.RabbitLegacy=f._createHelper(g)})();a.pad.ZeroPadding={pad:function(b,c){var a=c*4;b.clamp();b.sigBytes+=a-(b.sigBytes%a||a)},unpad:function(b){var c=b.words;var a=b.sigBytes-1;while(!(c[a>>>2]>>>24-a%4*8&255)){a--}b.sigBytes=a+1}};return a});(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?b(exports):'function'==typeof define&&define.amd?define(['exports'],b):(a=a||self,b(a.canvg={}))})(this,function(e){var fp=Math.tan,f8=Math.atan2,ax=Math.PI,fl=Math.round,aX=Math.max,a_=Math.min,fB=Math.ceil,aw=Math.sin,ay=Math.cos,az=Math.floor,ar=Math.sqrt,ah=Math.pow;function t(b,a){return a={exports:{}},b(a,a.exports),a.exports}function n(a){return a.replace(/(?!\u3000)\s+/gm,' ')}function a(a){return a.replace(/^[\n \t]+/,'')}function r(a){return a.replace(/[\n \t]+$/,'')}function o(a){var b=(a||'').match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return b.map(parseFloat)}function l(a){return hj.test(a)?a.toLowerCase():a}function s(b){var a=b.match(/url\(('([^']+)'|"([^"]+)"|([^'"\)]+))\)/)||[];return a[2]||a[3]||a[4]}function d(b,i){if(Symbol.iterator in Object(b)||'[object Arguments]'===Object.prototype.toString.call(b)){var c=[],a=!0,h=!1,f=void 0;try{for(var d=b[Symbol.iterator](),g;!(a=(g=d.next()).done)&&(c.push(g.value),!(i&&c.length===i));a=!0){}}catch(i9){h=!0,f=i9}finally{try{a||null==d['return']||d['return']()}finally{if(h){throw f}}}return c}}function u(a,b){return iK(a)||iq(a,b)||hU()}function g(a,c){var b=a.match(c);return b?[a.replace(c,' '),b.length]:[a,0]}function p(m){var c=[0,0,0],a=m.replace(/:not\(([^\)]*)\)/g,'     $1 ').replace(/{[\s\S]*/gm,' '),b=0,r=g(a,ib),i=ao(r,2);a=i[0],b=i[1],c[1]+=b;var p=g(a,it),j=ao(p,2);a=j[0],b=j[1],c[0]+=b;var s=g(a,ik),f=ao(s,2);a=f[0],b=f[1],c[1]+=b;var t=g(a,iI),d=ao(t,2);a=d[0],b=d[1],c[2]+=b;var q=g(a,h0),l=ao(q,2);a=l[0],b=l[1],c[1]+=b;var n=g(a,iP),h=ao(n,2);a=h[0],b=h[1],c[1]+=b,a=a.replace(/[\*\s\+>~]/g,' ').replace(/[#\.]/g,' ');var o=g(a,h6),k=ao(o,2);return a=k[0],b=k[1],c[2]+=b,c.join('')}function y(a){return ar(ah(a[0],2)+ah(a[1],2))}function h(a,b){return (a[0]*b[0]+a[1]*b[1])/(y(a)*y(b))}function x(a,b){return (a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(h(a,b))}function b(a){return a*a*a}function v(a){return 3*a*a*(1-a)}function k(a){return 3*a*(1-a)*(1-a)}function S(a){return (1-a)*(1-a)*(1-a)}function P(a){return a*a}function A(a){return 2*a*(1-a)}function E(a){return (1-a)*(1-a)}function T(d,j,g,c,i,f,h){try{var a=d[f](h),b=a.value}catch(i9){return void g(i9)}a.done?j(b):Promise.resolve(b).then(c,i)}function C(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function w(d,c){for(var b=0,a;b<c.length;b++){a=c[b],a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function O(){throw new Error('setTimeout has not been defined')}function V(){throw new Error('clearTimeout has not been defined')}function L(a){if(a1===setTimeout){return setTimeout(a,0)}if((a1===O||!a1)&&setTimeout){return a1=setTimeout,setTimeout(a,0)}try{return a1(a,0)}catch(i9){try{return a1.call(null,a,0)}catch(ja){return a1.call(this,a,0)}}}function R(a){if(a2===clearTimeout){return clearTimeout(a)}if((a2===V||!a2)&&clearTimeout){return a2=clearTimeout,clearTimeout(a)}try{return a2(a)}catch(i9){try{return a2.call(null,a)}catch(ja){return a2.call(this,a)}}}function I(){bn&&a8&&(bn=!1,a8.length?aS=a8.concat(aS):b5=-1,aS.length&&D())}function D(){if(!bn){var b=L(I);bn=!0;for(var a=aS.length;a;){for(a8=aS,aS=[];++b5<a;){a8&&a8[b5].run()}b5=-1,a=aS.length}a8=null,bn=!1,R(b)}}function N(c){var b=Array(arguments.length-1);if(1<arguments.length){for(var a=1;a<arguments.length;a++){b[a-1]=arguments[a]}}aS.push(new M(c,b)),1!==aS.length||bn||L(D)}function M(a,b){this.fun=a,this.array=b}function B(){}function z(){throw new Error('process.binding is not supported')}function _(){return '/'}function F(){throw new Error('process.chdir is not supported')}function G(){return 0}function H(b){var d=0.001*h4.call(bk),c=az(d),a=az(1000000000*(d%1));return b&&(c-=b[0],a-=b[1],0>a&&(c--,a+=1000000000)),[c,a]}function Y(){var a=new Date();return (a-iM)/1000}function U(b){var a=b.trim();return /^('|")/.test(a)?a:'"'.concat(a,'"')}function $(a){return 'undefined'==typeof process?a:a.trim().split(',').map(U).join(',')}function W(a){return n(a).trim().replace(/\)([a-zA-Z])/g,') $1').replace(/\)(\s?,\s?)/g,') ').split(/\s(?=[a-z])/)}function q(c){var f=c.split('('),a=ao(f,2),b=a[0],d=a[1];return [b.trim(),d.trim().replace(')','')]}function X(a){var b=a.replace(/,/gm,' ').replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,'$1 $2').replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,'$1 $2').replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,'$1 $2').replace(/([0-9])([+\-])/gm,'$1 $2').replace(/(\.[0-9]*)(\.)/gm,'$1 $2').replace(/(\.[0-9]*)(\.)/gm,'$1 $2').replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,'$1 $3 $4 ');return n(b).trim()}function Q(b,f,d,a,g,c){return b[4*(d*a)+4*f+c]}function K(b,g,d,a,h,c,f){b[4*(d*a)+4*g+c]=f}function Z(c,d,b){var a=c[d];return a*(0>a?b-255:b)}function m(a,d,c,b){return d+ay(a)*c+aw(a)*b}function c(a){return c='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&'function'==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?'symbol':typeof b},c(a)}function J(a,b){if(!(a instanceof b)){throw new TypeError('Cannot call a class as a function')}}function ee(a,h,f,b,g){if('string'==typeof a&&(a=document.getElementById(a)),!a||'object'!==c(a)||!('getContext' in a)){throw new TypeError('Expecting canvas with `getContext` method in processCanvasRGB(A) calls!')}var d=a.getContext('2d');try{return d.getImageData(h,f,b,g)}catch(i9){throw new Error('unable to access image data: '+i9)}}function te(g,d,b,f,h,a){if(!(isNaN(a)||1>a)){a|=0;var c=ee(g,d,b,f,h);c=ne(c,d,b,f,h,a),g.getContext('2d').putImageData(c,d,b)}}function ne(O,Q,P,C,N,H){var a=O.data,I=C-1,K=N-1,i=H+1,D=i*(i+1)/2,G=new eC(),b=G,r,F,h,f,M,d,J,n,p,q,o,E,y,A,x,v,t,s,u,l,j,m,c,w,L;for(h=1;h<2*H+1;h++){b=b.next=new eC(),h===i&&(L=b)}b.next=G;var g=null,k=null;J=d=0;var B=gJ[H],z=ha[H];for(F=0;F<N;F++){for(v=t=s=u=n=p=q=o=0,E=i*(l=a[d]),y=i*(j=a[d+1]),A=i*(m=a[d+2]),x=i*(c=a[d+3]),n+=D*l,p+=D*j,q+=D*m,o+=D*c,b=G,h=0;h<i;h++){b.r=l,b.g=j,b.b=m,b.a=c,b=b.next}for(h=1;h<i;h++){f=d+((I<h?I:h)<<2),n+=(b.r=l=a[f])*(w=i-h),p+=(b.g=j=a[f+1])*w,q+=(b.b=m=a[f+2])*w,o+=(b.a=c=a[f+3])*w,v+=l,t+=j,s+=m,u+=c,b=b.next}for(g=G,k=L,r=0;r<C;r++){a[d+3]=c=o*B>>z,0===c?a[d]=a[d+1]=a[d+2]=0:(c=255/c,a[d]=(n*B>>z)*c,a[d+1]=(p*B>>z)*c,a[d+2]=(q*B>>z)*c),n-=E,p-=y,q-=A,o-=x,E-=g.r,y-=g.g,A-=g.b,x-=g.a,f=J+((f=r+H+1)<I?f:I)<<2,v+=g.r=a[f],t+=g.g=a[f+1],s+=g.b=a[f+2],u+=g.a=a[f+3],n+=v,p+=t,q+=s,o+=u,g=g.next,E+=l=k.r,y+=j=k.g,A+=m=k.b,x+=c=k.a,v-=l,t-=j,s-=m,u-=c,k=k.next,d+=4}J+=C}for(r=0;r<C;r++){for(t=s=u=v=p=q=o=n=0,d=r<<2,E=i*(l=a[d]),y=i*(j=a[d+1]),A=i*(m=a[d+2]),x=i*(c=a[d+3]),n+=D*l,p+=D*j,q+=D*m,o+=D*c,b=G,h=0;h<i;h++){b.r=l,b.g=j,b.b=m,b.a=c,b=b.next}for(M=C,h=1;h<=H;h++){d=M+r<<2,n+=(b.r=l=a[d])*(w=i-h),p+=(b.g=j=a[d+1])*w,q+=(b.b=m=a[d+2])*w,o+=(b.a=c=a[d+3])*w,v+=l,t+=j,s+=m,u+=c,b=b.next,h<K&&(M+=C)}for(d=r,g=G,k=L,F=0;F<N;F++){f=d<<2,a[f+3]=c=o*B>>z,0<c?(c=255/c,a[f]=(n*B>>z)*c,a[f+1]=(p*B>>z)*c,a[f+2]=(q*B>>z)*c):a[f]=a[f+1]=a[f+2]=0,n-=E,p-=y,q-=A,o-=x,E-=g.r,y-=g.g,A-=g.b,x-=g.a,f=r+((f=F+i)<K?f:K)*C<<2,n+=v+=g.r=a[f],p+=t+=g.g=a[f+1],q+=s+=g.b=a[f+2],o+=u+=g.a=a[f+3],g=g.next,E+=l=k.r,y+=j=k.g,A+=m=k.b,x+=c=k.a,v-=l,t-=j,s-=m,u-=c,k=k.next,d+=C}}return O}function ae(b,d){var c=Object.keys(b);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(b);d&&(a=a.filter(function(a){return Object.getOwnPropertyDescriptor(b,a).enumerable})),c.push.apply(c,a)}return c}function re(c){for(var b=1,a;b<arguments.length;b++){a=null==arguments[b]?{}:arguments[b],b%2?ae(a,!0).forEach(function(b){eK(c,b,a[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(a)):ae(a).forEach(function(b){Object.defineProperty(c,b,Object.getOwnPropertyDescriptor(a,b))})}return c}function ie(){return oe.apply(this,arguments)}function oe(){return oe=aO(aq.mark(function e(b){var a;return aq.wrap(function(c){for(;;){switch(c.prev=c.next){case 0:return a=document.createElement('img'),c.abrupt('return',new Promise(function(f,d){a.onload=function(){f(a)},a.onerror=function(){d()},a.src=b}));case 2:case 'end':return c.stop();}}},e)})),oe.apply(this,arguments)}function le(b,d){var c=Object.keys(b);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(b);d&&(a=a.filter(function(a){return Object.getOwnPropertyDescriptor(b,a).enumerable})),c.push.apply(c,a)}return c}function se(c){for(var b=1,a;b<arguments.length;b++){a=null==arguments[b]?{}:arguments[b],b%2?le(a,!0).forEach(function(b){eK(c,b,a[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(a)):le(a).forEach(function(b){Object.defineProperty(c,b,Object.getOwnPropertyDescriptor(a,b))})}return c}var cw='undefined'==typeof globalThis?'undefined'==typeof window?'undefined'==typeof global?'undefined'==typeof self?{}:self:global:window:globalThis,ci=function(a){return a&&a.Math==Math&&a},aa=ci('object'==typeof globalThis&&globalThis)||ci('object'==typeof window&&window)||ci('object'==typeof self&&self)||ci('object'==typeof cw&&cw)||Function('return this')(),ai=function(a){try{return !!a()}catch(i9){return !0}},aj=!ai(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a}),eS={}.propertyIsEnumerable,d2=Object.getOwnPropertyDescriptor,iV=d2&&!eS.call({1:2},1),hd=iV?function(b){var a=d2(this,b);return !!a&&a.enumerable}:eS,dU={f:hd},a7=function(a,b){return {enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}},g3={}.toString,aD=function(a){return g3.call(a).slice(8,-1)},gV=''.split,b7=ai(function(){return !Object('z').propertyIsEnumerable(0)})?function(a){return 'String'==aD(a)?gV.call(a,''):Object(a)}:Object,aN=function(a){if(a==null){throw TypeError("Can't call method on "+a)}return a},aC=function(a){return b7(aN(a))},ap=function(a){return 'object'==typeof a?null!==a:'function'==typeof a},bf=function(a,d){if(!ap(a)){return a}var c,b;if(d&&'function'==typeof (c=a.toString)&&!ap(b=c.call(a))){return b}if('function'==typeof (c=a.valueOf)&&!ap(b=c.call(a))){return b}if(!d&&'function'==typeof (c=a.toString)&&!ap(b=c.call(a))){return b}throw TypeError("Can't convert object to primitive value")},hP={}.hasOwnProperty,ag=function(a,b){return hP.call(a,b)},dy=aa.document,gO=ap(dy)&&ap(dy.createElement),cb=function(a){return gO?dy.createElement(a):{}},e7=!aj&&!ai(function(){return 7!=Object.defineProperty(cb('div'),'a',{get:function(){return 7}}).a}),eZ=Object.getOwnPropertyDescriptor,gx=aj?eZ:function(a,b){if(a=aC(a),b=bf(b,!0),e7){try{return eZ(a,b)}catch(i9){}}return ag(a,b)?a7(!dU.f.call(a,b),a[b]):void 0},aR={f:gx},am=function(a){if(!ap(a)){throw TypeError(a+' is not an object')}return a},e5=Object.defineProperty,hi=aj?e5:function(b,c,a){if(am(b),c=bf(c,!0),am(a),e7){try{return e5(b,c,a)}catch(i9){}}if('get' in a||'set' in a){throw TypeError('Accessors not supported')}return 'value' in a&&(b[c]=a.value),b},as={f:hi},at=aj?function(a,c,b){return as.f(a,c,a7(1,b))}:function(a,c,b){return a[c]=b,a},cV=function(b,a){try{at(aa,b,a)}catch(i9){aa[b]=a}return a},fs='__core-js_shared__',iO=aa[fs]||cV(fs,{}),fS=iO,aU=t(function(a){(a.exports=function(b,c){return fS[b]||(fS[b]=c===void 0?{}:c)})('versions',[]).push({version:'3.3.6',mode:'global',copyright:' 2019 Denis Pushkarev (zloirock.ru)'})}),cB=aU('native-function-to-string',Function.toString),fF=aa.WeakMap,iu='function'==typeof fF&&/native code/.test(cB.call(fF)),im=0,iJ=Math.random(),cq=function(a){return 'Symbol('+((a===void 0?'':a)+'')+')_'+(++im+iJ).toString(36)},ga=aU('keys'),cs=function(a){return ga[a]||(ga[a]=cq(a))},br={},iA=aa.WeakMap,i0=function(a){return cz(a)?bT(a):ct(a,{})},ct,bT,cz;if(iu){var bz=new iA(),h$=bz.get,iT=bz.has,ij=bz.set;ct=function(b,a){return ij.call(bz,b,a),a},bT=function(a){return h$.call(bz,a)||{}},cz=function(a){return iT.call(bz,a)}}else {var bK=cs('state');br[bK]=!0,ct=function(b,a){return at(b,bK,a),a},bT=function(a){return ag(a,bK)?a[bK]:{}},cz=function(a){return ag(a,bK)}}var aB={set:ct,get:bT,has:cz,enforce:i0,getterFor:function(a){return function(c){var b;if(!ap(c)||(b=bT(c)).type!==a){throw TypeError('Incompatible receiver, '+a+' required')}return b}}},aA=t(function(b){var d=aB.get,c=aB.enforce,a=(cB+'').split('toString');aU('inspectSource',function(a){return cB.call(a)}),(b.exports=function(g,d,f,h){var j=!!h&&!!h.unsafe,i=!!h&&!!h.enumerable,k=!!h&&!!h.noTargetGet;return ('function'==typeof f&&('string'==typeof d&&!ag(f,'name')&&at(f,'name',d),c(f).source=a.join('string'==typeof d?d:'')),g===aa)?void (i?g[d]=f:cV(d,f)):void (j?!k&&g[d]&&(i=!0):delete g[d],i?g[d]=f:at(g,d,f))})(Function.prototype,'toString',function(){return 'function'==typeof this&&d(this).source||cB.call(this)})}),bC=aa,eW=function(a){return 'function'==typeof a?a:void 0},a5=function(a,b){return 2>arguments.length?eW(bC[a])||eW(aa[a]):bC[a]&&bC[a][b]||aa[a]&&aa[a][b]},cE=function(a){return isNaN(a=+a)?0:(0<a?az:fB)(a)},aH=function(a){return 0<a?a_(cE(a),9.007199254740991E15):0},df=function(c,b){var a=cE(c);return 0>a?aX(a+b,0):a_(a,b)},ez=function(a){return function(i,g,h){var c=aC(i),d=aH(c.length),b=df(h,d),f;if(a&&g!=g){for(;d>b;){if(f=c[b++],f!=f){return !0}}}else {for(;d>b;b++){if((a||b in c)&&c[b]===g){return a||b||0}}}return !a&&-1}},db={includes:ez(!0),indexOf:ez(!1)},gZ=db.indexOf,eb=function(g,f){var c=aC(g),d=0,b=[],a;for(a in c){!ag(br,a)&&ag(c,a)&&b.push(a)}for(;f.length>d;){ag(c,a=f[d++])&&(~gZ(b,a)||b.push(a))}return b},cd=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf'],g7=cd.concat('length','prototype'),gD=Object.getOwnPropertyNames||function(a){return eb(a,g7)},cI={f:gD},hT=Object.getOwnPropertySymbols,b9={f:hT},fH=a5('Reflect','ownKeys')||function(a){var c=cI.f(am(a)),b=b9.f;return b?c.concat(b(a)):c},ek=function(c,f){for(var d=fH(f),g=as.f,h=aR.f,b=0,a;b<d.length;b++){a=d[b],ag(c,a)||g(c,a,h(f,a))}},gU=/#|\.prototype\./,bP=function(c,a){var b=gz[hz(c)];return !(b!=iE)||b!=hD&&('function'==typeof a?ai(a):!!a)},hz=bP.normalize=function(a){return (a+'').replace(gU,'.').toLowerCase()},gz=bP.data={},hD=bP.NATIVE='N',iE=bP.POLYFILL='P',bO=bP,hm=aR.f,af=function(a,l){var g=a.target,i=a.global,k=a.stat,j,f,b,c,d,h;if(f=i?aa:k?aa[g]||cV(g,{}):(aa[g]||{}).prototype,f){for(b in l){if(d=l[b],a.noTargetGet?(h=hm(f,b),c=h&&h.value):c=f[b],j=bO(i?b:g+(k?'.':'#')+b,a.forced),!j&&void 0!==c){if(typeof d==typeof c){continue}ek(d,c)}(a.sham||c&&c.sham)&&at(d,'sham',!0),aA(f,b,d,a)}}},aT=function(a){if('function'!=typeof a){throw TypeError(a+' is not a function')}return a},bG=function(a,b,c){return (aT(a),void 0===b)?a:0===c?function(){return a.call(b)}:1===c?function(d){return a.call(b,d)}:2===c?function(f,d){return a.call(b,f,d)}:3===c?function(f,d,g){return a.call(b,f,d,g)}:function(){return a.apply(b,arguments)}},aV=function(a){return Object(aN(a))},b1=Array.isArray||function(a){return 'Array'==aD(a)},aJ=!!Object.getOwnPropertySymbols&&!ai(function(){return !(Symbol()+'')}),ff=aa.Symbol,f1=aU('wks'),ak=function(a){return f1[a]||(f1[a]=aJ&&ff[a]||(aJ?ff:cq)('Symbol.'+a))},il=ak('species'),f5=function(b,c){var a;return b1(b)&&(a=b.constructor,'function'==typeof a&&(a===Array||b1(a.prototype))?a=void 0:ap(a)&&(a=a[il],null===a&&(a=void 0))),new (void 0===a?Array:a)(0===c?0:c)},h1=[].push,bd=function(a){var d=1==a,b=4==a,c=6==a;return function(j,o,q,p){for(var n=aV(j),h=b7(n),r=bG(o,q,3),l=aH(h.length),f=0,m=p||f5,k=d?m(j,l):2==a?m(j,0):void 0,g,i;l>f;f++){if((5==a||c||f in h)&&(g=h[f],i=r(g,f,n),a)){if(d){k[f]=i}else {if(i){switch(a){case 3:return !0;case 5:return g;case 6:return f;case 2:h1.call(k,g);}}else {if(b){return !1}}}}}return c?-1:3==a||b?b:k}},bu={forEach:bd(0),map:bd(1),filter:bd(2),some:bd(3),every:bd(4),find:bd(5),findIndex:bd(6)},bQ=a5('navigator','userAgent')||'',fX=aa.process,gp=fX&&fX.versions,fD=gp&&gp.v8,aW,cy;fD?(aW=fD.split('.'),cy=aW[0]+aW[1]):bQ&&(aW=bQ.match(/Edge\/(\d+)/),(!aW||74<=aW[1])&&(aW=bQ.match(/Chrome\/(\d+)/),aW&&(cy=aW[1])));var cF=cy&&+cy,hY=ak('species'),dQ=function(a){return 51<=cF||!ai(function(){var b=[],c=b.constructor={};return c[hY]=function(){return {foo:1}},1!==b[a](Boolean).foo})},ii=bu.map;af({target:'Array',proto:!0,forced:!dQ('map')},{map:function(a){return ii(this,a,1<arguments.length?arguments[1]:void 0)}});var cj='[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]',hh=RegExp('^'+cj+cj+'*'),gB=RegExp(cj+cj+'*$'),cP=function(a){return function(c){var b=aN(c)+'';return 1&a&&(b=b.replace(hh,'')),2&a&&(b=b.replace(gB,'')),b}},ck={start:cP(1),end:cP(2),trim:cP(3)},gF=ck.trim,dR=aa.parseFloat,hf=1/dR('\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff-0')!=-Infinity,e_=hf?function(c){var b=gF(c+''),a=dR(b);return 0===a&&'-'==b.charAt(0)?-0:a}:dR;af({global:!0,forced:parseFloat!=e_},{parseFloat:e_});var ex=function(){var b=am(this),a='';return b.global&&(a+='g'),b.ignoreCase&&(a+='i'),b.multiline&&(a+='m'),b.dotAll&&(a+='s'),b.unicode&&(a+='u'),b.sticky&&(a+='y'),a},cf=RegExp.prototype.exec,gX=String.prototype.replace,d9=cf,c3=function(){var a=/a/,b=/b*/g;return cf.call(a,'a'),cf.call(b,'a'),0!==a.lastIndex||0!==b.lastIndex}(),c0=/()??/.exec('')[1]!==void 0;(c3||c0)&&(d9=function(g){var b=this,f,d,a,c;return c0&&(d=new RegExp('^'+b.source+'$(?!\\s)',ex.call(b))),c3&&(f=b.lastIndex),a=cf.call(b,g),c3&&a&&(b.lastIndex=b.global?a.index+a[0].length:f),c0&&a&&1<a.length&&gX.call(a[0],d,function(){for(c=1;c<arguments.length-2;c++){void 0===arguments[c]&&(a[c]=void 0)}}),a});var bB=d9;af({target:'RegExp',proto:!0,forced:/./.exec!==bB},{exec:bB});var i2=ak('species'),hQ=!ai(function(){var a=/./;return a.exec=function(){var a=[];return a.groups={a:'7'},a},'7'!==''.replace(a,'$<a>')}),gL=!ai(function(){var a=/(?:)/,c=a.exec;a.exec=function(){return c.apply(this,arguments)};var b='ab'.split(a);return 2!==b.length||'a'!==b[0]||'b'!==b[1]}),dz=function(b,l,j,g){var a=ak(b),c=!ai(function(){var c={};return c[a]=function(){return 7},7!=''[b](c)}),k=c&&!ai(function(){var d=!1,c=/a/;return 'split'===b&&(c={},c.constructor={},c.constructor[i2]=function(){return c},c.flags='',c[a]=/./[a]),c.exec=function(){return d=!0,null},c[a](''),!d});if(!c||!k||'replace'===b&&!hQ||'split'===b&&!gL){var i=/./[a],d=j(a,''[b],function(h,a,f,d,k){return a.exec===bB?c&&!k?{done:!0,value:i.call(a,f,d)}:{done:!0,value:h.call(f,a,d)}:{done:!1}}),h=d[0],f=d[1];aA(String.prototype,b,h),aA(RegExp.prototype,a,2==l?function(a,c){return f.call(a,this,c)}:function(a){return f.call(a,this)}),g&&at(RegExp.prototype[a],'sham',!0)}},ei=function(a){return function(i,h){var c=aN(i)+'',b=cE(h),g=c.length,d,f;return 0>b||b>=g?a?'':void 0:(d=c.charCodeAt(b),55296>d||56319<d||b+1===g||56320>(f=c.charCodeAt(b+1))||57343<f?a?c.charAt(b):d:a?c.slice(b,b+2):(d-55296<<10)+(f-56320)+65536)}},en={codeAt:ei(!1),charAt:ei(!0)},hJ=en.charAt,dd=function(b,a,c){return a+(c?hJ(b,a).length:1)},bA=function(a,d){var c=a.exec;if('function'==typeof c){var b=c.call(a,d);if('object'!=typeof b){throw TypeError('RegExp exec method returned something other than an Object or null')}return b}if('RegExp'!==aD(a)){throw TypeError('RegExp#exec called on incompatible receiver')}return bB.call(a,d)};dz('match',1,function(a,c,b){return [function(d){var g=aN(this),f=d==null?void 0:d[a];return f===void 0?(new RegExp(d))[a](g+''):f.call(d,g)},function(h){var j=b(c,h,this);if(j.done){return j.value}var d=am(h),g=this+'';if(!d.global){return bA(d,g)}var m=d.unicode;d.lastIndex=0;for(var k=[],f=0,l;null!==(l=bA(d,g));){var i=l[0]+'';k[f]=i,''==i&&(d.lastIndex=dd(g,aH(d.lastIndex),m)),f++}return 0===f?null:k}]});var hC=/\$([$&'`]|\d\d?|<[^>]*>)/g,iC=/\$([$&'`]|\d\d?)/g,hF=function(a){return a===void 0?a:a+''};dz('replace',2,function(c,b,d){function a(i,g,k,a,f,l){var m=k+i.length,h=a.length,j=iC;return void 0!==f&&(f=aV(f),j=hC),b.call(l,j,function(q,j){var p;switch(j.charAt(0)){case '$':return '$';case '&':return i;case '`':return g.slice(0,k);case "'":return g.slice(m);case '<':p=f[j.slice(1,-1)];break;default:var n=+j;if(0==n){return q};if(n>h){var o=az(n/10);return 0===o?q:o<=h?void 0===a[o-1]?j.charAt(1):a[o-1]+j.charAt(1):q};p=a[n-1];}return void 0===p?'':p})}return [function(a,f){var h=aN(this),g=a==null?void 0:a[c];return g===void 0?b.call(h+'',a,f):g.call(a,h,f)},function(u,i){var w=d(b,u,this,i);if(w.done){return w.value}var h=am(u),g=this+'',t='function'==typeof i;t||(i=i+'');var x=h.global;if(x){var y=h.unicode;h.lastIndex=0}for(var m=[],f;(f=bA(h,g),null!==f)&&!(m.push(f),!x);){var z=f[0]+'';''==z&&(h.lastIndex=dd(g,aH(h.lastIndex),y))}for(var v='',k=0,o=0;o<m.length;o++){f=m[o];for(var q=f[0]+'',j=aX(a_(cE(f.index),g.length),0),p=[],n=1;n<f.length;n++){p.push(hF(f[n]))}var l=f.groups;if(t){var s=[q].concat(p,j,g);l!==void 0&&s.push(l);var r=i.apply(void 0,s)+''}else {r=a(q,g,j,p,l,i)}j>=k&&(v+=g.slice(k,j)+r,k=j+q.length)}return v+g.slice(k)}]});var hj=/^[A-Z-]+$/,bl=function(b,c){var a=[][b];return !a||!ai(function(){a.call(null,c||function(){throw 1},1)})},hM=[].join,g_=b7!=Object,h3=bl('join',',');af({target:'Array',proto:!0,forced:g_||h3},{join:function(a){return hM.call(aC(this),a===void 0?',':a)}});var iK=function(a){if(Array.isArray(a)){return a}},iq=d,hU=function(){throw new TypeError('Invalid attempt to destructure non-iterable instance')},ao=u,ib=/(\[[^\]]+\])/g,it=/(#[^\s\+>~\.\[:]+)/g,ik=/(\.[^\s\+>~\.\[:]+)/g,iI=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,h0=/(:[\w-]+\([^\)]*\))/gi,iP=/(:[^\s\+>~\.\[:]+)/g,h6=/([^\s\+>~\.\[:]+)/g,a9=1.0E-8,bY=Object.keys||function(a){return eb(a,cd)},gm=aj?Object.defineProperties:function(a,f){am(a);for(var c=bY(f),g=c.length,d=0,b;g>d;){as.f(a,b=c[d++],f[b])}return a},dv=a5('document','documentElement'),fu=cs('IE_PROTO'),dF='prototype',dS=function(){},co=function(){var b=cb('iframe'),g=cd.length,d='<',c='script',f='>',a;for(b.style.display='none',dv.appendChild(b),b.src='java'+c+':'+'',a=b.contentWindow.document,a.open(),a.write(d+c+f+'document.F=Object'+d+'/'+c+f),a.close(),co=a.F;g--;){delete co[dF][cd[g]]}return co()},a$=Object.create||function(b,c){var a;return null===b?a=co():(dS[dF]=am(b),a=new dS(),dS[dF]=null,a[fu]=b),void 0===c?a:gm(a,c)};br[fu]=!0;var fJ=cI.f,hr={}.toString,eG='object'==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],gA=function(a){try{return fJ(a)}catch(i9){return eG.slice()}},ec={f:function(a){return eG&&'[object Window]'==hr.call(a)?gA(a):fJ(aC(a))}},eQ={f:ak},gE=as.f,gf=function(a){var b=bC.Symbol||(bC.Symbol={});ag(b,a)||gE(b,a,{value:eQ.f(a)})},hb=as.f,e$=ak('toStringTag'),bH=function(a,c,b){a&&!ag(a=b?a:a.prototype,e$)&&hb(a,e$,{configurable:!0,value:c})},ce=bu.forEach,av=cs('hidden'),b6='Symbol',aM='prototype',eB=ak('toPrimitive'),gC=aB.set,gr=aB.getterFor(b6),aF=Object[aM],au=aa.Symbol,cv=aa.JSON,ca=cv&&cv.stringify,el=aR.f,a3=as.f,eX=ec.f,gv=dU.f,aP=aU('symbols'),b$=aU('op-symbols'),dg=aU('string-to-symbol-registry'),c7=aU('symbol-to-string-registry'),g0=aU('wks'),di=aa.QObject,cU=!di||!di[aM]||!di[aM].findChild,dq=aj&&ai(function(){return 7!=a$(a3({},'a',{get:function(){return a3(this,'a',{value:7}).a}})).a})?function(c,a,d){var b=el(aF,a);b&&delete aF[a],a3(c,a,d),b&&c!==aF&&a3(aF,a,b)}:a3,f6=function(b,c){var a=aP[b]=a$(au[aM]);return gC(a,{type:b6,tag:b,description:c}),aj||(a.description=c),a},dI=aJ&&'symbol'==typeof au.iterator?function(a){return 'symbol'==typeof a}:function(a){return Object(a) instanceof au},cn=function(a,d,b){a===aF&&cn(b$,d,b),am(a);var c=bf(d,!0);return am(b),ag(aP,c)?(b.enumerable?(ag(a,av)&&a[av][c]&&(a[av][c]=!1),b=a$(b,{enumerable:a7(0,!1)})):(!ag(a,av)&&a3(a,av,a7(1,{})),a[av][c]=!0),dq(a,c,b)):a3(a,c,b)},f2=function(b,d){am(b);var a=aC(d),c=bY(a).concat(dL(a));return ce(c,function(c){(!aj||dx.call(a,c))&&cn(b,c,a[c])}),b},dx=function(c){var a=bf(c,!0),b=gv.call(this,a);return (this!==aF||!ag(aP,a)||ag(b$,a))&&(!(b||!ag(this,a)||!ag(aP,a)||ag(this,av)&&this[av][a])||b)},fV=function(d,f){var b=aC(d),a=bf(f,!0);if(b!==aF||!ag(aP,a)||ag(b$,a)){var c=el(b,a);return c&&ag(aP,a)&&!(ag(b,av)&&b[av][a])&&(c.enumerable=!0),c}},fN=function(b){var c=eX(aC(b)),a=[];return ce(c,function(c){ag(aP,c)||ag(br,c)||a.push(c)}),a},dL=function(b){var c=b===aF,d=eX(c?b$:aC(b)),a=[];return ce(d,function(d){ag(aP,d)&&(!c||ag(aF,d))&&a.push(aP[d])}),a};aJ||(au=function(){if(this instanceof au){throw TypeError('Symbol is not a constructor')}var b=arguments.length&&void 0!==arguments[0]?arguments[0]+'':void 0,a=cq(b),c=function(b){this===aF&&c.call(b$,b),ag(this,av)&&ag(this[av],a)&&(this[av][a]=!1),dq(this,a,a7(1,b))};return aj&&cU&&dq(aF,a,{configurable:!0,set:c}),f6(a,b)},aA(au[aM],'toString',function(){return gr(this).tag}),dU.f=dx,as.f=cn,aR.f=fV,cI.f=ec.f=fN,b9.f=dL,aj&&(a3(au[aM],'description',{configurable:!0,get:function(){return gr(this).description}}),aA(aF,'propertyIsEnumerable',dx,{unsafe:!0})),eQ.f=function(a){return f6(ak(a),a)}),af({global:!0,wrap:!0,forced:!aJ,sham:!aJ},{Symbol:au}),ce(bY(g0),function(a){gf(a)}),af({target:b6,stat:!0,forced:!aJ},{'for':function(c){var a=c+'';if(ag(dg,a)){return dg[a]}var b=au(a);return dg[a]=b,c7[b]=a,b},keyFor:function(a){if(!dI(a)){throw TypeError(a+' is not a symbol')}return ag(c7,a)?c7[a]:void 0},useSetter:function(){cU=!0},useSimple:function(){cU=!1}}),af({target:'Object',stat:!0,forced:!aJ,sham:!aj},{create:function(a,b){return b===void 0?a$(a):f2(a$(a),b)},defineProperty:cn,defineProperties:f2,getOwnPropertyDescriptor:fV}),af({target:'Object',stat:!0,forced:!aJ},{getOwnPropertyNames:fN,getOwnPropertySymbols:dL}),af({target:'Object',stat:!0,forced:ai(function(){b9.f(1)})},{getOwnPropertySymbols:function(a){return b9.f(aV(a))}}),cv&&af({target:'JSON',stat:!0,forced:!aJ||ai(function(){var a=au();return '[null]'!=ca([a])||'{}'!=ca({a:a})||'{}'!=ca(Object(a))})},{stringify:function(c){for(var b=[c],f=1,a,d;arguments.length>f;){b.push(arguments[f++])}if(d=a=b[1],(ap(a)||void 0!==c)&&!dI(c)){return b1(a)||(a=function(b,a){if('function'==typeof d&&(a=d.call(this,b,a)),!dI(a)){return a}}),b[1]=a,ca.apply(cv,b)}}}),au[aM][eB]||at(au[aM],eB,au[aM].valueOf),bH(au,b6),br[av]=!0;var h2=bu.filter;af({target:'Array',proto:!0,forced:!dQ('filter')},{filter:function(a){return h2(this,a,1<arguments.length?arguments[1]:void 0)}});var iR=bu.forEach,bU=bl('forEach')?function(a){return iR(this,a,1<arguments.length?arguments[1]:void 0)}:[].forEach;af({target:'Array',proto:!0,forced:[].forEach!=bU},{forEach:bU}),af({target:'Object',stat:!0,forced:!aj,sham:!aj},{defineProperties:gm}),af({target:'Object',stat:!0,forced:!aj,sham:!aj},{defineProperty:as.f});var fm=aR.f,iy=ai(function(){fm(1)});af({target:'Object',stat:!0,forced:!aj||iy,sham:!aj},{getOwnPropertyDescriptor:function(a,b){return fm(aC(a),b)}});var b4=function(b,d,c){var a=bf(d);a in b?as.f(b,a,a7(0,c)):b[a]=c};af({target:'Object',stat:!0,sham:!aj},{getOwnPropertyDescriptors:function(h){for(var g=aC(h),i=aR.f,b=fH(g),f={},c=0,d,a;b.length>c;){a=i(g,d=b[c++]),void 0!==a&&b4(f,d,a)}return f}});var h9=ai(function(){bY(1)});af({target:'Object',stat:!0,forced:h9},{keys:function(a){return bY(aV(a))}});var du={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var io in du){var gk=aa[io],cp=gk&&gk.prototype;if(cp&&cp.forEach!==bU){try{at(cp,'forEach',bU)}catch(i9){cp.forEach=bU}}}var iS=t(function(b){var a=function(h){function t(g,d,k,l){var i=d&&d.prototype instanceof a?d:a,f=Object.create(i.prototype),j=new c(l||[]);return f._invoke=s(g,k,j),f}function n(a,d,c){try{return {type:'normal',arg:a.call(d,c)}}catch(ja){return {type:'throw',arg:ja}}}function a(){}function r(){}function i(){}function o(a){['next','throw','return'].forEach(function(c){a[c]=function(d){return this._invoke(c,d)}})}function l(d){function t(j,l,c,f){var g=n(d[j],d,l);if('throw'===g.type){f(g.arg)}else {var i=g.arg,a=i.value;return a&&'object'==typeof a&&k.call(a,'__await')?Promise.resolve(a.__await).then(function(a){t('next',a,c,f)},function(a){t('throw',a,c,f)}):Promise.resolve(a).then(function(a){i.value=a,c(i)},function(a){return t('throw',a,c,f)})}}function a(f,g){function a(){return new Promise(function(a,c){t(f,g,a,c)})}return c=c?c.then(a,a):a()}var c;this._invoke=a}function s(g,i,a){var c='suspendedStart';return function(l,o){if('executing'===c){throw new Error('Generator is already running')}if('completed'===c){if('throw'===l){throw o}return y()}for(a.method=l,a.arg=o;;){var m=a.delegate;if(m){var k=d(m,a);if(k){if(k===f){continue}return k}}if('next'===a.method){a.sent=a._sent=a.arg}else {if('throw'===a.method){if('suspendedStart'===c){throw c='completed',a.arg}a.dispatchException(a.arg)}else {'return'===a.method&&a.abrupt('return',a.arg)}}c='executing';var j=n(g,i,a);if('normal'===j.type){if(c=a.done?'completed':'suspendedYield',j.arg===f){continue}return {value:j.arg,done:a.done}}'throw'===j.type&&(c='completed',a.method='throw',a.arg=j.arg)}}}function d(c,a){var k=c.iterator[a.method];if(k===j){if(a.delegate=null,'throw'===a.method){if(c.iterator['return']&&(a.method='return',a.arg=j,d(c,a),'throw'===a.method)){return f}a.method='throw',a.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var i=n(k,c.iterator,a.arg);if('throw'===i.type){return a.method='throw',a.arg=i.arg,a.delegate=null,f}var g=i.arg;if(!g){return a.method='throw',a.arg=new TypeError('iterator result is not an object'),a.delegate=null,f}if(g.done){a[c.resultName]=g.value,a.next=c.nextLoc,'return'!==a.method&&(a.method='next',a.arg=j)}else {return g}return a.delegate=null,f}function u(a){var c={tryLoc:a[0]};1 in a&&(c.catchLoc=a[1]),2 in a&&(c.finallyLoc=a[2],c.afterLoc=a[3]),this.tryEntries.push(c)}function g(c){var a=c.completion||{};a.type='normal',delete a.arg,c.completion=a}function c(a){this.tryEntries=[{tryLoc:'root'}],a.forEach(u,this),this.reset(!0)}function p(a){if(a){var c=a[w];if(c){return c.call(a)}if('function'==typeof a.next){return a}if(!isNaN(a.length)){var d=-1,f=function c(){for(;++d<a.length;){if(k.call(a,d)){return c.value=a[d],c.done=!1,c}}return c.value=j,c.done=!0,c};return f.next=f}}return {next:y}}function y(){return {value:j,done:!0}}var B=Object.prototype,k=B.hasOwnProperty,A='function'==typeof Symbol?Symbol:{},w=A.iterator||'@@iterator',C=A.asyncIterator||'@@asyncIterator',v=A.toStringTag||'@@toStringTag',j;h.wrap=t;var f={},z={};z[w]=function(){return this};var x=Object.getPrototypeOf,q=x&&x(x(p([])));q&&q!==B&&k.call(q,w)&&(z=q);var m=i.prototype=a.prototype=Object.create(z);return r.prototype=m.constructor=i,i.constructor=r,i[v]=r.displayName='GeneratorFunction',h.isGeneratorFunction=function(c){var a='function'==typeof c&&c.constructor;return !!a&&(a===r||'GeneratorFunction'===(a.displayName||a.name))},h.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,i):(a.__proto__=i,!(v in a)&&(a[v]='GeneratorFunction')),a.prototype=Object.create(m),a},h.awrap=function(a){return {__await:a}},o(l.prototype),l.prototype[C]=function(){return this},h.AsyncIterator=l,h.async=function(f,c,g,d){var a=new l(t(f,c,g,d));return h.isGeneratorFunction(c)?a:a.next().then(function(i){return i.done?i.value:a.next()})},o(m),m[v]='Generator',m[w]=function(){return this},m.toString=function(){return '[object Generator]'},h.keys=function(d){var c=[];for(var a in d){c.push(a)}return c.reverse(),function a(){for(;c.length;){var f=c.pop();if(f in d){return a.value=f,a.done=!1,a}}return a.done=!0,a}},h.values=p,c.prototype={constructor:c,reset:function(c){if(this.prev=0,this.next=0,this.sent=this._sent=j,this.done=!1,this.delegate=null,this.method='next',this.arg=j,this.tryEntries.forEach(g),!c){for(var a in this){'t'===a.charAt(0)&&k.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=j)}}},stop:function(){this.done=!0;var c=this.tryEntries[0],a=c.completion;if('throw'===a.type){throw a.arg}return this.rval},dispatchException:function(f){function t(c,a){return i.type='throw',i.arg=f,d.next=c,a&&(d.method='next',d.arg=j),!!a}if(this.done){throw f}for(var d=this,c=this.tryEntries.length-1;0<=c;--c){var a=this.tryEntries[c],i=a.completion;if('root'===a.tryLoc){return t('end')}if(a.tryLoc<=this.prev){var g=k.call(a,'catchLoc'),l=k.call(a,'finallyLoc');if(g&&l){if(this.prev<a.catchLoc){return t(a.catchLoc,!0)}if(this.prev<a.finallyLoc){return t(a.finallyLoc)}}else {if(g){if(this.prev<a.catchLoc){return t(a.catchLoc,!0)}}else {if(!l){throw new Error('try statement without catch or finally')}else {if(this.prev<a.finallyLoc){return t(a.finallyLoc)}}}}}}},abrupt:function(d,j){for(var g=this.tryEntries.length-1,c;0<=g;--g){if(c=this.tryEntries[g],c.tryLoc<=this.prev&&k.call(c,'finallyLoc')&&this.prev<c.finallyLoc){var a=c;break}}a&&('break'===d||'continue'===d)&&a.tryLoc<=j&&j<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=d,i.arg=j,a?(this.method='next',this.next=a.finallyLoc,f):this.complete(i)},complete:function(a,c){if('throw'===a.type){throw a.arg}return 'break'===a.type||'continue'===a.type?this.next=a.arg:'return'===a.type?(this.rval=this.arg=a.arg,this.method='return',this.next='end'):'normal'===a.type&&c&&(this.next=c),f},finish:function(d){for(var c=this.tryEntries.length-1,a;0<=c;--c){if(a=this.tryEntries[c],a.finallyLoc===d){return this.complete(a.completion,a.afterLoc),g(a),f}}},'catch':function(f){for(var c=this.tryEntries.length-1,a;0<=c;--c){if(a=this.tryEntries[c],a.tryLoc===f){var d=a.completion;if('throw'===d.type){var i=d.arg;g(a)}return i}}throw new Error('illegal catch attempt')},delegateYield:function(a,d,c){return this.delegate={iterator:p(a),resultName:d,nextLoc:c},'next'===this.method&&(this.arg=j),f}},h}(b.exports);try{regeneratorRuntime=a}catch(ja){Function('r','regeneratorRuntime = r')(a)}}),aq=iS,aO=function(a){return function(){var c=this,b=arguments;return new Promise(function(d,g){function i(b){T(f,d,g,i,o,'next',b)}function o(b){T(f,d,g,i,o,'throw',b)}var f=a.apply(c,b);i(void 0)})}},eK=C,f=function(a,b){if(!(a instanceof b)){throw new TypeError('Cannot call a class as a function')}},j=function(a,c,b){return c&&w(a.prototype,c),b&&w(a,b),a},eV=ak('isConcatSpreadable'),d6=9.007199254740991E15,gg='Maximum allowed index exceeded',hg=51<=cF||!ai(function(){var a=[];return a[eV]=!1,a.concat()[0]!==a}),hB=dQ('concat'),g4=function(a){if(!ap(a)){return !1}var b=a[eV];return b===void 0?b1(a):!!b};af({target:'Array',proto:!0,forced:!hg||!hB},{concat:function(){var h=aV(this),f=f5(h,0),a=0,d,c,i,g,b;for(d=-1,i=arguments.length;d<i;d++){if(b=-1===d?h:arguments[d],g4(b)){if(g=aH(b.length),a+g>d6){throw TypeError(gg)}for(c=0;c<g;c++,a++){c in b&&b4(f,a,b[c])}}else {if(a>=d6){throw TypeError(gg)}b4(f,a++,b)}}return f.length=a,f}});var hp=bu.every;af({target:'Array',proto:!0,forced:bl('every')},{every:function(a){return hp(this,a,1<arguments.length?arguments[1]:void 0)}});var ep=function(a){return function(k,i,j,d){aT(i);var f=aV(k),c=b7(f),g=aH(f.length),b=a?g-1:0,h=a?-1:1;if(2>j){for(;;){if(b in c){d=c[b],b+=h;break}if(b+=h,a?0>b:g<=b){throw TypeError('Reduce of empty array with no initial value')}}}for(;a?0<=b:g>b;b+=h){b in c&&(d=i(d,c[b],b,f))}return d}},gH={left:ep(!1),right:ep(!0)},g8=gH.left;af({target:'Array',proto:!0,forced:bl('reduce')},{reduce:function(a){return g8(this,a,arguments.length,1<arguments.length?arguments[1]:void 0)}});var c1=Date.prototype,d_='Invalid Date',gt='toString',hR=c1[gt],gM=c1.getTime;new Date(NaN)+''!=d_&&aA(c1,gt,function(){var a=gM.call(this);return a===a?hR.call(this):d_});var ih=ak('toStringTag'),gQ='Arguments'==aD(function(){return arguments}()),gT=function(a,b){try{return a[b]}catch(ja){}},e8=function(b){var a,d,c;return b===void 0?'Undefined':null===b?'Null':'string'==typeof (d=gT(a=Object(b),ih))?d:gQ?aD(a):'Object'==(c=aD(a))&&'function'==typeof a.callee?'Arguments':c},hy=ak('toStringTag'),gy={};gy[hy]='z';var e3=function(){return '[object '+e8(this)+']'},f_=Object.prototype;e3!==f_.toString&&aA(f_,'toString',e3,{unsafe:!0});var cl=aa.Promise,da=function(b,c,d){for(var a in c){aA(b,a,c[a],d)}return b},eu=ak('species'),e9=function(b){var a=a5(b),c=as.f;aj&&a&&!a[eu]&&c(a,eu,{configurable:!0,get:function(){return this}})},cY=function(a,c,b){if(!(a instanceof c)){throw TypeError('Incorrect '+(b?b+' ':'')+'invocation')}return a},bs={},iL=ak('iterator'),ir=Array.prototype,fe=function(a){return a!==void 0&&(bs.Array===a||ir[iL]===a)},iF=ak('iterator'),fE=function(a){if(a!=null){return a[iF]||a['@@iterator']||bs[e8(a)]}},fU=function(b,d,a,f){try{return f?d(am(a)[0],a[1]):d(a)}catch(ja){var c=b['return'];throw void 0!==c&&am(c.call(b)),ja}},cx=t(function(b){var a=function(a,c){this.stopped=a,this.result=c},c=b.exports=function(d,p,n,k,o){var j=bG(p,n,k?2:1),g,i,f,m,c,l,h;if(o){g=d}else {if(i=fE(d),'function'!=typeof i){throw TypeError('Target is not iterable')}if(fe(i)){for(f=0,m=aH(d.length);m>f;f++){if(c=k?j(am(h=d[f])[0],h[1]):j(d[f]),c&&c instanceof a){return c}}return new a(!1)}g=i.call(d)}for(l=g.next;!(h=l.call(g)).done;){if(c=fU(g,j,h.value,k),'object'==typeof c&&c&&c instanceof a){return c}}return new a(!1)};c.stop=function(c){return new a(!0,c)}}),f4=ak('iterator'),fq=!1;try{var iQ=0,fx={next:function(){return {done:!!iQ++}},'return':function(){fq=!0}};fx[f4]=function(){return this},Array.from(fx,function(){throw 2})}catch(ja){}var dn=function(c,d){if(!d&&!fq){return !1}var b=!1;try{var a={};a[f4]=function(){return {next:function(){return {done:b=!0}}}},c(a)}catch(jb){}return b},iw=ak('species'),go=function(c,d){var b=am(c).constructor,a;return b===void 0||(a=am(b)[iw])==null?d:aT(a)},fC=aa.location,dt=aa.setImmediate,dG=aa.clearImmediate,gi=aa.process,fj=aa.MessageChannel,dP=aa.Dispatch,dB=0,bJ={},eH='onreadystatechange',cL=function(a){if(bJ.hasOwnProperty(a)){var b=bJ[a];delete bJ[a],b()}},cO=function(a){return function(){cL(a)}},eT=function(a){cL(a.data)},d3=function(a){aa.postMessage(a+'',fC.protocol+'//'+fC.host)},be,c4,de;dt&&dG||(dt=function(a){for(var c=[],b=1;arguments.length>b;){c.push(arguments[b++])}return bJ[++dB]=function(){('function'==typeof a?a:Function(a)).apply(void 0,c)},be(dB),dB},dG=function(a){delete bJ[a]},'process'==aD(gi)?be=function(a){gi.nextTick(cO(a))}:dP&&dP.now?be=function(a){dP.now(cO(a))}:fj&&!/(iphone|ipod|ipad).*applewebkit/i.test(bQ)?(c4=new fj(),de=c4.port2,c4.port1.onmessage=eT,be=bG(de.postMessage,de,1)):!aa.addEventListener||'function'!=typeof postMessage||aa.importScripts||ai(d3)?eH in cb('script')?be=function(a){dv.appendChild(cb('script'))[eH]=function(){dv.removeChild(this),cL(a)}}:be=function(a){setTimeout(cO(a),0)}:(be=d3,aa.addEventListener('message',eT,!1)));var ew={set:dt,clear:dG},hn=aR.f,gW=ew.set,d8=aa.MutationObserver||aa.WebKitMutationObserver,c2=aa.process,c_=aa.Promise,dZ='process'==aD(c2),gs=hn(aa,'queueMicrotask'),fb=gs&&gs.value,bD,bb,bF,bi,dh,dc,cJ,e1;fb||(bD=function(){var a,b;for(dZ&&(a=c2.domain)&&a.exit();bb;){b=bb.fn,bb=bb.next;try{b()}catch(jb){throw bb?bi():bF=void 0,jb}}bF=void 0,a&&a.enter()},dZ?bi=function(){c2.nextTick(bD)}:d8&&!/(iphone|ipod|ipad).*applewebkit/i.test(bQ)?(dh=!0,dc=document.createTextNode(''),(new d8(bD)).observe(dc,{characterData:!0}),bi=function(){dc.data=dh=!dh}):c_&&c_.resolve?(cJ=c_.resolve(void 0),e1=cJ.then,bi=function(){e1.call(cJ,bD)}):bi=function(){gW.call(aa,bD)});var f$=fb||function(b){var a={fn:b,next:void 0};bF&&(bF.next=a),bb||(bb=a,bi()),bF=a},hE=function(c){var b,a;this.promise=new c(function(f,d){if(b!==void 0||a!==void 0){throw TypeError('Bad Promise constructor')}b=f,a=d}),this.resolve=aT(b),this.reject=aT(a)},c9={f:function(a){return new hE(a)}},es=function(b,a){if(am(b),ap(a)&&a.constructor===b){return a}var c=c9.f(b),d=c.resolve;return d(a),c.promise},hL=function(b,c){var a=aa.console;a&&a.error&&(1===arguments.length?a.error(b):a.error(b,c))},cW=function(a){try{return {error:!1,value:a()}}catch(jb){return {error:!0,value:jb}}},fr=ew.set,iN=ak('species'),aK='Promise',fg=aB.get,iG=aB.set,ic=aB.getterFor(aK),aG=cl,fM=aa.TypeError,dK=aa.document,cD=aa.process,fz=a5('fetch'),bq=c9.f,ix=bq,b3='process'==aD(cD),h8=!!(dK&&dK.createEvent&&aa.dispatchEvent),fv='unhandledrejection',fP=0,gj=1,dl=1,gd=2,bW=bO(aK,function(){if(66===cF){return !0}if(!b3&&'function'!=typeof PromiseRejectionEvent){return !0}if(51<=cF&&/native code/.test(aG)){return !1}var a=aG.resolve(1),b=function(a){a(function(){},function(){})},c=a.constructor={};return c[iN]=b,!(a.then(function(){}) instanceof b)}),hs=bW||!dn(function(a){aG.all(a)['catch'](function(){})}),eJ=function(a){var b;return !!(ap(a)&&'function'==typeof (b=a.then))&&b},cM=function(c,a,d){if(!a.notified){a.notified=!0;var b=a.reactions;f$(function(){for(var j=a.value,m=a.state==gj,n=0;b.length>n;){var h=b[n++],k=m?h.ok:h.fail,l=h.resolve,i=h.reject,g=h.domain,f,o,p;try{k?(!m&&(a.rejection===gd&&iW(c,a),a.rejection=dl),!0===k?f=j:(g&&g.enter(),f=k(j),g&&(g.exit(),p=!0)),f===h.promise?i(fM('Promise-chain cycle')):(o=eJ(f))?o.call(f,l,i):l(f)):i(j)}catch(jb){g&&!p&&g.exit(),i(jb)}}a.reactions=[],a.notified=!1,d&&!a.rejection&&hu(c,a)})}},eg=function(b,f,c){var a,d;h8?(a=dK.createEvent('Event'),a.promise=f,a.reason=c,a.initEvent(b,!1,!0),aa.dispatchEvent(a)):a={promise:f,reason:c},(d=aa['on'+b])?d(a):b===fv&&hL('Unhandled promise rejection',c)},hu=function(b,a){fr.call(aa,function(){var d=a.value,f=d5(a),c;if(f&&(c=cW(function(){b3?cD.emit('unhandledRejection',d,b):eg(fv,b,d)}),a.rejection=b3||d5(a)?gd:dl,c.error)){throw c.value}})},d5=function(a){return a.rejection!==dl&&!a.parent},iW=function(a,b){fr.call(aa,function(){b3?cD.emit('rejectionHandled',a):eg('rejectionhandled',a,b.value)})},bm=function(b,d,c,a){return function(f){b(d,c,f,a)}},bo=function(c,a,d,b){a.done||(a.done=!0,b&&(a=b),a.value=d,a.state=2,cM(c,a,!0))},c$=function(b,a,c,d){if(!a.done){a.done=!0,d&&(a=d);try{if(b===c){throw fM("Promise can't be resolved itself")}var f=eJ(c);f?f$(function(){var g={done:!1};try{f.call(c,bm(c$,b,g,a),bm(bo,b,g,a))}catch(jb){bo(b,g,jb,a)}}):(a.value=c,a.state=gj,cM(b,a,!1))}catch(jb){bo(b,{done:!1},jb,a)}}},cg,eo,ea,eE;bW&&(aG=function(b){cY(this,aG,aK),aT(b),cg.call(this);var a=fg(this);try{b(bm(c$,this,a),bm(bo,this,a))}catch(jb){bo(this,a,jb)}},cg=function(){iG(this,{type:aK,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:fP,value:void 0})},cg.prototype=da(aG.prototype,{then:function(c,d){var b=ic(this),a=bq(go(this,aG));return a.ok='function'!=typeof c||c,a.fail='function'==typeof d&&d,a.domain=b3?cD.domain:void 0,b.parent=!0,b.reactions.push(a),b.state!=fP&&cM(this,b,!1),a.promise},'catch':function(a){return this.then(void 0,a)}}),eo=function(){var a=new cg(),b=fg(a);this.promise=a,this.resolve=bm(c$,a,b),this.reject=bm(bo,a,b)},c9.f=bq=function(a){return a===aG||a===ea?new eo(a):ix(a)},'function'==typeof cl&&(eE=cl.prototype.then,aA(cl.prototype,'then',function(a,c){var b=this;return (new aG(function(d,f){eE.call(b,d,f)})).then(a,c)},{unsafe:!0}),'function'==typeof fz&&af({global:!0,enumerable:!0,forced:!0},{fetch:function(){return es(aG,fz.apply(aa,arguments))}}))),af({global:!0,wrap:!0,forced:bW},{Promise:aG}),bH(aG,aK,!1),e9(aK),ea=a5(aK),af({target:aK,stat:!0,forced:bW},{reject:function(b){var a=bq(this);return a.reject.call(void 0,b),a.promise}}),af({target:aK,stat:!0,forced:bW},{resolve:function(a){return es(this,a)}}),af({target:aK,stat:!0,forced:hs},{all:function(g){var b=this,a=bq(b),c=a.resolve,f=a.reject,d=cW(function(){var h=aT(b.resolve),a=[],i=0,d=1;cx(g,function(k){var l=i++,j=!1;a.push(void 0),d++,h.call(b,k).then(function(b){j||(j=!0,a[l]=b,--d||c(a))},f)}),--d||c(a)});return d.error&&f(d.value),a.promise},race:function(f){var b=this,a=bq(b),c=a.reject,d=cW(function(){var d=aT(b.resolve);cx(f,function(g){d.call(b,g).then(a.resolve,c)})});return d.error&&c(d.value),a.promise}});var g6=ak('match'),d$=function(a){var b;return ap(a)&&((b=a[g6])===void 0?'RegExp'==aD(a):!!b)},i3=[].push,dk=4.294967295E9,bh=!ai(function(){return !RegExp(dk,'y')});dz('split',2,function(c,b,d){var a;return a='c'=='abbc'.split(/(b)*/)[1]||4!='test'.split(/(?:)/,-1).length||2!='ab'.split(/(?:ab)*/).length||4!='.'.split(/(.?)(.?)/).length||1<'.'.split(/()()/).length||''.split(/.?/).length?function(a,n){var g=aN(this)+'',j=void 0===n?dk:n>>>0;if(0===j){return []}if(void 0===a){return [g]}if(!d$(a)){return b.call(g,a,j)}for(var f=[],o=(a.ignoreCase?'i':'')+(a.multiline?'m':'')+(a.unicode?'u':'')+(a.sticky?'y':''),i=0,k=new RegExp(a.source,o+'g'),h,l,m;(h=bB.call(k,g))&&(l=k.lastIndex,!(l>i&&(f.push(g.slice(i,h.index)),1<h.length&&h.index<g.length&&i3.apply(f,h.slice(1)),m=h[0].length,i=l,f.length>=j)));){k.lastIndex===h.index&&k.lastIndex++}return i===g.length?(m||!k.test(''))&&f.push(''):f.push(g.slice(i)),f.length>j?f.slice(0,j):f}:function(a,f){return void 0===a&&0===f?[]:b.call(this,a,f)},[function(f,h){var i=aN(this),g=null==f?void 0:f[c];return void 0===g?a.call(i+'',f,h):g.call(f,i,h)},function(q,o){var p=d(a,q,this,o,a!==b);if(p.done){return p.value}var i=am(q),f=this+'',u=go(i,RegExp),t=i.unicode,s=(i.ignoreCase?'i':'')+(i.multiline?'m':'')+(i.unicode?'u':'')+(bh?'y':'g'),k=new u(bh?i:'^(?:'+i.source+')',s),m=void 0===o?dk:o>>>0;if(0===m){return []}if(0===f.length){return null===bA(k,f)?[f]:[]}for(var j=0,g=0,h=[];g<f.length;){k.lastIndex=bh?g:0;var l=bA(k,bh?f:f.slice(g)),r;if(null===l||(r=a_(aH(k.lastIndex+(bh?0:g)),f.length))===j){g=dd(f,g,t)}else {if(h.push(f.slice(j,g)),h.length===m){return h}for(var n=1;n<=l.length-1;n++){if(h.push(l[n]),h.length===m){return h}}g=j=r}}return h.push(f.slice(j)),h}]},!bh);var dA='undefined'==typeof global?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:global,a1=O,a2=V;'function'==typeof dA.setTimeout&&(a1=setTimeout),'function'==typeof dA.clearTimeout&&(a2=clearTimeout);var aS=[],bn=!1,b5=-1,a8;M.prototype.run=function(){this.fun.apply(null,this.array)};for(var iD={},hG=[],hk={},g2={},hN={},bk=dA.performance||{},h4=bk.now||bk.mozNow||bk.msNow||bk.oNow||bk.webkitNow||function(){return (new Date()).getTime()},iM=new Date(),bX={nextTick:N,title:'browser',browser:!0,env:iD,argv:hG,version:'',versions:hk,on:B,addListener:B,once:B,off:B,removeListener:B,removeAllListeners:B,emit:B,binding:z,cwd:_,chdir:F,umask:G,hrtime:H,platform:'browser',release:g2,config:hN,uptime:Y},hV=t(function(a){(function(){var c,f,b,h,d,g;'undefined'!=typeof performance&&null!==performance&&performance.now?a.exports=function(){return performance.now()}:'undefined'!=typeof bX&&null!==bX&&bX.hrtime?(a.exports=function(){return (c()-d)/1000000},f=bX.hrtime,c=function(){var b;return b=f(),1000000000*b[0]+b[1]},h=c(),g=1000000000*bX.uptime(),d=h-g):Date.now?(a.exports=function(){return Date.now()-b},b=Date.now()):(a.exports=function(){return (new Date()).getTime()-b},b=(new Date()).getTime())}).call(cw)}),aY='undefined'==typeof window?cw:window,cu=['moz','webkit'],by='AnimationFrame',bw=aY['request'+by],b0=aY['cancel'+by]||aY['cancelRequest'+by],bR=0;!bw&&bR<cu.length;bR++){bw=aY[cu[bR]+'Request'+by],b0=aY[cu[bR]+'Cancel'+by]||aY[cu[bR]+'CancelRequest'+by]}if(!bw||!b0){var dO=0,fy=0,ba=[];bw=function(c){if(0===ba.length){var b=hV(),a=aX(0,1000/60-(b-dO));dO=a+b,setTimeout(function(){var b=ba.slice(0);ba.length=0;for(var a=0;a<b.length;a++){if(!b[a].cancelled){try{b[a].callback(dO)}catch(jb){setTimeout(function(){throw jb},0)}}}},fl(a))}return ba.push({handle:++fy,callback:c,cancelled:!1}),fy},b0=function(b){for(var a=0;a<ba.length;a++){ba[a].handle===b&&(ba[a].cancelled=!0)}}}var bZ=function(a){return bw.call(aY,a)},i_=function(){b0.apply(aY,arguments)},h7=function(a){a||(a=aY),a.requestAnimationFrame=bw,a.cancelAnimationFrame=b0};bZ.cancel=i_,bZ.polyfill=h7;var h5=as.f,dH=Function.prototype,iZ=dH.toString,hX=/^\s*function ([^ (]*)/,gc='name';aj&&!(gc in dH)&&h5(dH,gc,{configurable:!0,get:function(){try{return iZ.call(this).match(hX)[1]}catch(jb){return ''}}});var dC=function(a){this.ok=!1,this.alpha=1,'#'==a.charAt(0)&&(a=a.substr(1,6)),a=a.replace(/ /g,''),a=a.toLowerCase();var g={aliceblue:'f0f8ff',antiquewhite:'faebd7',aqua:'00ffff',aquamarine:'7fffd4',azure:'f0ffff',beige:'f5f5dc',bisque:'ffe4c4',black:'000000',blanchedalmond:'ffebcd',blue:'0000ff',blueviolet:'8a2be2',brown:'a52a2a',burlywood:'deb887',cadetblue:'5f9ea0',chartreuse:'7fff00',chocolate:'d2691e',coral:'ff7f50',cornflowerblue:'6495ed',cornsilk:'fff8dc',crimson:'dc143c',cyan:'00ffff',darkblue:'00008b',darkcyan:'008b8b',darkgoldenrod:'b8860b',darkgray:'a9a9a9',darkgreen:'006400',darkkhaki:'bdb76b',darkmagenta:'8b008b',darkolivegreen:'556b2f',darkorange:'ff8c00',darkorchid:'9932cc',darkred:'8b0000',darksalmon:'e9967a',darkseagreen:'8fbc8f',darkslateblue:'483d8b',darkslategray:'2f4f4f',darkturquoise:'00ced1',darkviolet:'9400d3',deeppink:'ff1493',deepskyblue:'00bfff',dimgray:'696969',dodgerblue:'1e90ff',feldspar:'d19275',firebrick:'b22222',floralwhite:'fffaf0',forestgreen:'228b22',fuchsia:'ff00ff',gainsboro:'dcdcdc',ghostwhite:'f8f8ff',gold:'ffd700',goldenrod:'daa520',gray:'808080',green:'008000',greenyellow:'adff2f',honeydew:'f0fff0',hotpink:'ff69b4',indianred:'cd5c5c',indigo:'4b0082',ivory:'fffff0',khaki:'f0e68c',lavender:'e6e6fa',lavenderblush:'fff0f5',lawngreen:'7cfc00',lemonchiffon:'fffacd',lightblue:'add8e6',lightcoral:'f08080',lightcyan:'e0ffff',lightgoldenrodyellow:'fafad2',lightgrey:'d3d3d3',lightgreen:'90ee90',lightpink:'ffb6c1',lightsalmon:'ffa07a',lightseagreen:'20b2aa',lightskyblue:'87cefa',lightslateblue:'8470ff',lightslategray:'778899',lightsteelblue:'b0c4de',lightyellow:'ffffe0',lime:'00ff00',limegreen:'32cd32',linen:'faf0e6',magenta:'ff00ff',maroon:'800000',mediumaquamarine:'66cdaa',mediumblue:'0000cd',mediumorchid:'ba55d3',mediumpurple:'9370d8',mediumseagreen:'3cb371',mediumslateblue:'7b68ee',mediumspringgreen:'00fa9a',mediumturquoise:'48d1cc',mediumvioletred:'c71585',midnightblue:'191970',mintcream:'f5fffa',mistyrose:'ffe4e1',moccasin:'ffe4b5',navajowhite:'ffdead',navy:'000080',oldlace:'fdf5e6',olive:'808000',olivedrab:'6b8e23',orange:'ffa500',orangered:'ff4500',orchid:'da70d6',palegoldenrod:'eee8aa',palegreen:'98fb98',paleturquoise:'afeeee',palevioletred:'d87093',papayawhip:'ffefd5',peachpuff:'ffdab9',peru:'cd853f',pink:'ffc0cb',plum:'dda0dd',powderblue:'b0e0e6',purple:'800080',rebeccapurple:'663399',red:'ff0000',rosybrown:'bc8f8f',royalblue:'4169e1',saddlebrown:'8b4513',salmon:'fa8072',sandybrown:'f4a460',seagreen:'2e8b57',seashell:'fff5ee',sienna:'a0522d',silver:'c0c0c0',skyblue:'87ceeb',slateblue:'6a5acd',slategray:'708090',snow:'fffafa',springgreen:'00ff7f',steelblue:'4682b4',tan:'d2b48c',teal:'008080',thistle:'d8bfd8',tomato:'ff6347',turquoise:'40e0d0',violet:'ee82ee',violetred:'d02090',wheat:'f5deb3',white:'ffffff',whitesmoke:'f5f5f5',yellow:'ffff00',yellowgreen:'9acd32'};a=g[a]||a;for(var b=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:['rgba(123, 234, 45, 0.8)','rgba(255,234,245,1.0)'],process:function(b){return [parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseFloat(b[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:['rgb(123, 234, 45)','rgb(255,234,245)'],process:function(b){return [parseInt(b[1]),parseInt(b[2]),parseInt(b[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:['#00ff00','336699'],process:function(b){return [parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:['#fb0','f0f'],process:function(b){return [parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]}}],d=0;d<b.length;d++){var i=b[d].re,h=b[d].process,f=i.exec(a);if(f){var c=h(f);this.r=c[0],this.g=c[1],this.b=c[2],3<c.length&&(this.alpha=c[3]),this.ok=!0}}this.r=0>this.r||isNaN(this.r)?0:255<this.r?255:this.r,this.g=0>this.g||isNaN(this.g)?0:255<this.g?255:this.g,this.b=0>this.b||isNaN(this.b)?0:255<this.b?255:this.b,this.alpha=0>this.alpha?0:1<this.alpha||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return 'rgb('+this.r+', '+this.g+', '+this.b+')'},this.toRGBA=function(){return 'rgba('+this.r+', '+this.g+', '+this.b+', '+this.alpha+')'},this.toHex=function(){var b=this.r.toString(16),d=this.g.toString(16),c=this.b.toString(16);return 1==b.length&&(b='0'+b),1==d.length&&(d='0'+d),1==c.length&&(c='0'+c),'#'+b+d+c},this.getHelpXML=function(){for(var d=[],c=0,k;c<b.length;c++){k=b[c].example;for(var j=0;j<k.length;j++){d[d.length]=k[j]}}for(var n in g){d[d.length]=n}var l=document.createElement('ul');l.setAttribute('id','rgbcolor-examples');for(var c=0;c<d.length;c++){try{var h=document.createElement('li'),f=new RGBColor(d[c]),i=document.createElement('div');i.style.cssText='margin: 3px; border: 1px solid black; background:'+f.toHex()+'; color:'+f.toHex(),i.appendChild(document.createTextNode('test'));var m=document.createTextNode(' '+d[c]+' -> '+f.toRGB()+' -> '+f.toHex());h.appendChild(i),h.appendChild(m),l.appendChild(h)}catch(jb){}}return l}},ab=function(){function e(c,b,a){f(this,e),this.document=c,this.name=b,this.value=a}return j(e,[{key:'hasValue',value:function(){var a=this.value;return null!==a&&''!==a&&0!==a&&'undefined'!=typeof a}},{key:'isString',value:function(a){var c=this.value,b='string'==typeof c;return b&&a?a.test(c):b}},{key:'isUrlDefinition',value:function(){return this.isString(/^url\(/)}},{key:'isPixels',value:function(){if(!this.hasValue()){return !1}var a=this.getString();switch(!0){case /px$/.test(a):case /^[0-9]+$/.test(a):return !0;default:return !1;}}},{key:'setValue',value:function(a){return this.value=a,this}},{key:'getValue',value:function(a){return 'undefined'==typeof a||this.hasValue()?this.value:a}},{key:'getNumber',value:function(b){if(!this.hasValue()){return 'undefined'==typeof b?0:parseFloat(b)}var c=this.value,a=parseFloat(c);return this.isString(/%$/)&&(a/=100),a}},{key:'getString',value:function(a){return 'undefined'==typeof a||this.hasValue()?'undefined'==typeof this.value?'':this.value+'':a+''}},{key:'getDpi',value:function(){return 96}},{key:'getRem',value:function(){return this.document.rootEmSize}},{key:'getEm',value:function(){return this.document.emSize}},{key:'getUnits',value:function(){return this.getString().replace(/[0-9\.\-]/g,'')}},{key:'getPixels',value:function(b){var i=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],g='boolean'==typeof b?[void 0,b]:[b],f=ao(g,2),d=f[0],h=f[1];if(!this.hasValue()){return 0}var a=this.document.screen.viewPort;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*a_(a.computeSize('x'),a.computeSize('y'));case this.isString(/vmax$/):return this.getNumber()/100*aX(a.computeSize('x'),a.computeSize('y'));case this.isString(/vw$/):return this.getNumber()/100*a.computeSize('x');case this.isString(/vh$/):return this.getNumber()/100*a.computeSize('y');case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&h:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*a.computeSize(d);default:{var c=this.getNumber();return i&&1>c?c*a.computeSize(d):c};}}},{key:'getMilliseconds',value:function(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1000*this.getNumber():0}},{key:'getRadians',value:function(){if(!this.hasValue()){return 0}switch(!0){case this.isString(/deg$/):return this.getNumber()*(ax/180);case this.isString(/grad$/):return this.getNumber()*(ax/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(ax/180);}}},{key:'getDefinition',value:function(){var b=this.getString(),a=b.match(/#([^\)'"]+)/);return a&&(a=a[1]),a||(a=b),this.document.definitions[a]}},{key:'getFillStyleDefinition',value:function(c,d){var a=this.getDefinition();if(!a){return null}if('function'==typeof a.createGradient){return a.createGradient(this.document.ctx,c,d)}if('function'==typeof a.createPattern){if(a.getHrefAttribute().hasValue()){var b=a.getAttribute('patternTransform');a=a.getHrefAttribute().getDefinition(),b.hasValue()&&a.getAttribute('patternTransform',!0).setValue(b.value)}return a.createPattern(this.document.ctx,c,d)}return null}},{key:'getTextBaseline',value:function(){return this.hasValue()?e.textBaselineMapping[this.getString()]:null}},{key:'addOpacity',value:function(f){for(var a=this.value,g=a.length,d=0,c=0;c<g&&(','===a[c]&&d++,3!==d);c++){}if(f.hasValue()&&this.isString()&&3!==d){var b=new dC(a);b.ok&&(a='rgba('.concat(b.r,', ').concat(b.g,', ').concat(b.b,', ').concat(f.getNumber(),')'))}return new e(this.document,this.name,a)}}],[{key:'empty',value:function(a){return new e(a,'EMPTY','')}}]),e}();ab.textBaselineMapping={baseline:'alphabetic','before-edge':'top','text-before-edge':'top',middle:'middle',central:'middle','after-edge':'bottom','text-after-edge':'bottom',ideographic:'ideographic',alphabetic:'alphabetic',hanging:'hanging',mathematical:'alphabetic'};var eI=function(){function e(){f(this,e),this.viewPorts=[]}return j(e,[{key:'clear',value:function(){this.viewPorts=[]}},{key:'setCurrent',value:function(a,b){this.viewPorts.push({width:a,height:b})}},{key:'removeCurrent',value:function(){this.viewPorts.pop()}},{key:'getCurrent',value:function(){var a=this.viewPorts;return a[a.length-1]}},{key:'computeSize',value:function(a){return 'number'==typeof a?a:'x'===a?this.width:'y'===a?this.height:ar(ah(this.width,2)+ah(this.height,2))/ar(2)}},{key:'width',get:function(){return this.getCurrent().width}},{key:'height',get:function(){return this.getCurrent().height}}]),e}(),al=function(){function e(b,a){f(this,e),this.x=b,this.y=a}return j(e,[{key:'angleTo',value:function(a){return f8(a.y-this.y,a.x-this.x)}},{key:'applyTransform',value:function(a){var c=this.x,b=this.y,d=c*a[0]+b*a[2]+a[4],f=c*a[1]+b*a[3]+a[5];this.x=d,this.y=f}}],[{key:'parse',value:function(i){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=o(i),c=ao(f,2),a=c[0],b=void 0===a?h:a,d=c[1],g=void 0===d?b:d;return new e(b,g)}},{key:'parsePath',value:function(f){for(var b=o(f),d=b.length,c=[],a=0;a<d;a+=2){c.push(new e(b[a],b[a+1]))}return c}}]),e}(),ef=function(){function e(a){f(this,e),this.screen=a,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}return j(e,[{key:'isWorking',value:function(){return this.working}},{key:'start',value:function(){if(!this.working){var b=this.screen,d=this.onClick,c=this.onMouseMove,a=b.ctx.canvas;a.onclick=d,a.onmousemove=c,this.working=!0}}},{key:'stop',value:function(){if(this.working){var a=this.screen.ctx.canvas;this.working=!1,a.onclick=null,a.onmousemove=null}}},{key:'hasEvents',value:function(){return this.working&&0<this.events.length}},{key:'runEvents',value:function(){if(this.working){var b=this.screen,d=this.events,c=this.eventElements,a=b.ctx.canvas.style;a&&(a.cursor=''),d.forEach(function(d,f){for(var b=d.run,a=c[f];a;){b(a),a=a.parent}}),this.events=[],this.eventElements=[]}}},{key:'checkPath',value:function(c,a){if(this.working&&a){var d=this.events,b=this.eventElements;d.forEach(function(d,f){var g=d.x,h=d.y;!b[f]&&a.isPointInPath&&a.isPointInPath(g,h)&&(b[f]=c)})}}},{key:'checkBoundingBox',value:function(c,b){if(this.working&&b){var d=this.events,a=this.eventElements;d.forEach(function(d,f){var g=d.x,h=d.y;!a[f]&&b.isPointInBox(g,h)&&(a[f]=c)})}}},{key:'mapXY',value:function(f,h){for(var d=this.screen,c=d.window,g=d.ctx,a=new al(f,h),b=g.canvas;b;){a.x-=b.offsetLeft,a.y-=b.offsetTop,b=b.offsetParent}return c.scrollX&&(a.x+=c.scrollX),c.scrollY&&(a.y+=c.scrollY),a}},{key:'onClick',value:function(a){var b=this.mapXY((a||event).clientX,(a||event).clientY),d=b.x,c=b.y;this.events.push({type:'onclick',x:d,y:c,run:function(b){b.onClick&&b.onClick()}})}},{key:'onMouseMove',value:function(a){var b=this.mapXY((a||event).clientX,(a||event).clientY),d=b.x,c=b.y;this.events.push({type:'onmousemove',x:d,y:c,run:function(b){b.onMouseMove&&b.onMouseMove()}})}}]),e}(),eU='undefined'==typeof window?null:window,d4='undefined'==typeof fetch?null:fetch.bind(window),b2=function(){function e(h){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=c.fetch,g=void 0===a?d4:a,b=c.window,d=void 0===b?eU:b;f(this,e),this.ctx=h,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=30000,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new eI(),this.mouse=new ef(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=d,this.fetch=g}return j(e,[{key:'wait',value:function(a){this.waits.push(a)}},{key:'ready',value:function(){return this.readyPromise?this.readyPromise:Promise.resolve()}},{key:'isReady',value:function(){if(this.isReadyLock){return !0}var a=this.waits.every(function(a){return a()});return a&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=a,a}},{key:'setDefaults',value:function(a){a.strokeStyle='rgba(0,0,0,0)',a.lineCap='butt',a.lineJoin='miter',a.miterLimit=4}},{key:'setViewBox',value:function(b){var D=b.document,a=b.ctx,N=b.aspectRatio,i=b.width,B=b.desiredWidth,j=b.height,C=b.desiredHeight,w=b.minX,O=void 0===w?0:w,y=b.minY,J=void 0===y?0:y,M=b.refX,Q=b.refY,z=b.clip,x=b.clipX,L=void 0===x?0:x,E=b.clipY,I=void 0===E?0:E,P=n(N).replace(/^defer\s/,''),K=P.split(' '),u=ao(K,2),H=u[0],G=u[1],h=H||'xMidYMid',d=G||'meet',g=i/B,k=j/C,c=a_(g,k),f=aX(g,k),l=B,m=C;'meet'===d&&(l*=c,m*=c),'slice'===d&&(l*=f,m*=f);var r=new ab(D,'refX',M),p=new ab(D,'refY',Q),t=r.hasValue()&&p.hasValue();if(t&&a.translate(-c*r.getPixels('x'),-c*p.getPixels('y')),void 0!==z&&z){var s=c*L,o=c*I;a.beginPath(),a.moveTo(s,o),a.lineTo(i,o),a.lineTo(i,j),a.lineTo(s,j),a.closePath(),a.clip()}if(!t){var F='meet'===d&&c===k,v='slice'===d&&f===k,q='meet'===d&&c===g,A='slice'===d&&f===g;/^xMid/.test(h)&&(F||v)&&a.translate(i/2-l/2,0),/YMid$/.test(h)&&(q||A)&&a.translate(0,j/2-m/2),/^xMax/.test(h)&&(F||v)&&a.translate(i-l,0),/YMax$/.test(h)&&(q||A)&&a.translate(0,j-m)}switch(!0){case 'none'===h:a.scale(g,k);break;case 'meet'===d:a.scale(c,c);break;case 'slice'===d:a.scale(f,f);break;default:}a.translate(-O,-J)}},{key:'start',value:function(k){var b=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},g=a.enableRedraw,r=a.ignoreMouse,n=a.ignoreAnimation,p=a.ignoreDimensions,o=void 0!==p&&p,s=a.ignoreClear,j=void 0!==s&&s,w=a.forceRedraw,m=a.scaleWidth,i=a.scaleHeight,q=a.offsetX,t=a.offsetY,u=this.FRAMERATE,l=this.mouse,d=1000/u;if(this.frameDuration=d,this.readyPromise=new Promise(function(a){b.resolveReady=a}),this.isReady()&&this.render(k,o,j,m,i,q,t),!!(void 0!==g&&g)){var c=Date.now(),h=c,f=0,v=function a(){c=Date.now(),f=c-h,f>=d&&(h=c-f%d,b.shouldUpdate(void 0!==n&&n,w)&&(b.render(k,o,j,m,i,q,t),l.runEvents())),b.intervalId=bZ(a)};void 0!==r&&r||l.start(),this.intervalId=bZ(v)}}},{key:'stop',value:function(){this.intervalId&&(bZ.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}},{key:'shouldUpdate',value:function e(d,a){if(!d){var b=this.frameDuration,c=this.animations.reduce(function(c,f){return f.update(b)||c},!1);if(c){return !0}}return !!('function'==typeof a&&a())||!this.isReadyLock&&this.isReady()||!!this.mouse.hasEvents()}},{key:'render',value:function(b,v,x,c,f,s,u){var y=this.CLIENT_WIDTH,w=this.CLIENT_HEIGHT,i=this.viewPort,m=this.ctx,r=this.isFirstRender,a=m.canvas;i.clear(),a.width&&a.height?i.setCurrent(a.width,a.height):i.setCurrent(y,w);var k=b.getStyle('width'),h=b.getStyle('height');!v&&(r||'number'!=typeof c&&'number'!=typeof f)&&(k.hasValue()&&(a.width=k.getPixels('x'),a.style&&(a.style.width=''.concat(a.width,'px'))),h.hasValue()&&(a.height=h.getPixels('y'),a.style&&(a.style.height=''.concat(a.height,'px'))));var l=a.clientWidth||a.width,n=a.clientHeight||a.height;if(v&&k.hasValue()&&h.hasValue()&&(l=k.getPixels('x'),n=h.getPixels('y')),i.setCurrent(l,n),'number'==typeof s&&b.getAttribute('x',!0).setValue(s),'number'==typeof u&&b.getAttribute('y',!0).setValue(u),'number'==typeof c||'number'==typeof f){var j=o(b.getAttribute('viewBox').getString()),d=0,g=0;if('number'==typeof c){var t=b.getAttribute('width');t.hasValue()?d=t.getPixels('x')/c:!isNaN(j[2])&&(d=j[2]/c)}if('number'==typeof f){var q=b.getAttribute('height');q.hasValue()?g=q.getPixels('y')/f:!isNaN(j[3])&&(g=j[3]/f)}d||(d=g),g||(g=d),b.getAttribute('width',!0).setValue(c),b.getAttribute('height',!0).setValue(f);var p=b.getStyle('transform',!0,!0);p.setValue(''.concat(p.getString(),' scale(').concat(1/d,', ').concat(1/g,')'))}x||m.clearRect(0,0,l,n),b.render(m),r&&(this.isFirstRender=!1)}}]),e}();b2.defaultWindow=eU,b2.defaultFetch=d4;var he=b2.defaultFetch,hA='undefined'==typeof DOMParser?null:DOMParser,cc=function(){function e(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=c.fetch,d=void 0===a?he:a,b=c.DOMParser,g=void 0===b?hA:b;f(this,e),this.fetch=d,this.DOMParser=g}return j(e,[{key:'parse',value:function(){var a=aO(aq.mark(function a(b){return aq.wrap(function(a){for(;;){switch(a.prev=a.next){case 0:if(!/^</.test(b)){a.next=2;break};return a.abrupt('return',this.parseFromString(b));case 2:return a.abrupt('return',this.load(b));case 3:case 'end':return a.stop();}}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:'parseFromString',value:function(a){try{var c=new this.DOMParser();return c.parseFromString(a,'image/svg+xml')}catch(jb){var b=new this.DOMParser();return b.parseFromString(a,'text/xml')}}},{key:'load',value:function(){var a=aO(aq.mark(function a(d){var c,b;return aq.wrap(function(a){for(;;){switch(a.prev=a.next){case 0:return a.next=2,this.fetch(d);case 2:return c=a.sent,a.next=5,c.text();case 5:return b=a.sent,a.abrupt('return',this.parseFromString(b));case 7:case 'end':return a.stop();}}},a,this)}));return function(){return a.apply(this,arguments)}}()}]),e}(),ho=t(function(a){function t(b){return t='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&'function'==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?'symbol':typeof c},t(b)}function n(b){return a.exports='function'==typeof Symbol&&'symbol'===t(Symbol.iterator)?n=function(c){return t(c)}:n=function(c){return c&&'function'==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?'symbol':t(c)},n(b)}a.exports=n}),bj=function(a){if(void 0===a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a},ac=function(b,a){return a&&('object'===ho(a)||'function'==typeof a)?a:bj(b)},i=t(function(a){function t(b){return a.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},t(b)}a.exports=t}),g5=t(function(a){function t(c,b){return a.exports=t=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d},t(c,b)}a.exports=t}),ad=function(b,a){if('function'!=typeof a&&null!==a){throw new TypeError('Super expression must either be null or a function')}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&g5(b,a)},i1=!dn(function(a){Array.from(a)});af({target:'Array',stat:!0,forced:i1},{from:function(n){var d=aV(n),i='function'==typeof this?this:Array,l=arguments.length,c=1<l?arguments[1]:void 0,g=void 0!==c,a=0,h=fE(d),j,b,k,f,m;if(g&&(c=bG(c,2<l?arguments[2]:void 0,2)),null!=h&&!(i==Array&&fe(h))){for(f=h.call(d),m=f.next,b=new i();!(k=m.call(f)).done;a++){b4(b,a,g?fU(f,c,[k.value,a],!0):k.value)}}else {for(j=aH(d.length),b=new i(j);j>a;a++){b4(b,a,g?c(d[a],a):d[a])}}return b.length=a,b}});var dj=ak('unscopables'),cR=Array.prototype;cR[dj]==null&&at(cR,dj,a$(null));var bV=function(a){cR[dj][a]=!0},gP=db.includes;af({target:'Array',proto:!0},{includes:function(a){return gP(this,a,1<arguments.length?arguments[1]:void 0)}}),bV('includes');var gS=bu.some;af({target:'Array',proto:!0,forced:bl('some')},{some:function(a){return gS(this,a,1<arguments.length?arguments[1]:void 0)}});var hI=function(a){if(d$(a)){throw TypeError("The method doesn't accept regular expressions")}return a},hx=ak('match');af({target:'String',proto:!0,forced:!function(b){var a=/./;try{'/./'[b](a)}catch(jb){try{return a[hx]=!1,'/./'[b](a)}catch(jc){}}return !1}('includes')},{includes:function(a){return !!~(aN(this)+'').indexOf(hI(a),1<arguments.length?arguments[1]:void 0)}});var dV=!ai(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e())!==e.prototype}),e2=cs('IE_PROTO'),iB=Object.prototype,bN=dV?Object.getPrototypeOf:function(a){return a=aV(a),ag(a,e2)?a[e2]:'function'==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?iB:null},eM=ak('iterator'),et=!1,bp,cX,dr;[].keys&&(dr=[].keys(),'next' in dr?(cX=bN(bN(dr)),cX!==Object.prototype&&(bp=cX)):et=!0),bp==null&&(bp={}),ag(bp,eM)||at(bp,eM,function(){return this});var dN={IteratorPrototype:bp,BUGGY_SAFARI_ITERATORS:et},is=dN.IteratorPrototype,hW=function(){return this},iH=function(a,d,c){var b=d+' Iterator';return a.prototype=a$(is,{next:a7(1,c)}),bH(a,b,!1),bs[b]=hW,a},id=function(a){if(!ap(a)&&null!==a){throw TypeError("Can't set "+(a+' as a prototype'))}return a},cA=Object.setPrototypeOf||('__proto__' in {}?function(){var b=!1,c={},a;try{a=Object.getOwnPropertyDescriptor(Object.prototype,'__proto__').set,a.call(c,[]),b=c instanceof Array}catch(jb){}return function(c,d){return am(c),id(d),b?a.call(c,d):c.__proto__=d,c}}():void 0),dE=dN.IteratorPrototype,cC=dN.BUGGY_SAFARI_ITERATORS,bS=ak('iterator'),f9='keys',cr='values',fn='entries',iz=function(){return this},dT=function(n,h,g,o,d,p,q){iH(g,h,o);var k=function(c){return c===d&&b?b:!cC&&c in a?a[c]:c===f9?function(){return new g(this,c)}:c===cr?function(){return new g(this,c)}:c===fn?function(){return new g(this,c)}:function(){return new g(this)}},l=!1,a=n.prototype,f=a[bS]||a['@@iterator']||d&&a[d],b=!cC&&f||k(d),m='Array'==h?a.entries||f:f,c,i,j;if(m&&(c=bN(m.call(new n())),dE!==Object.prototype&&c.next&&(bN(c)!==dE&&(cA?cA(c,dE):'function'!=typeof c[bS]&&at(c,bS,iz)),bH(c,h+' Iterator',!0))),d==cr&&f&&f.name!==cr&&(l=!0,b=function(){return f.call(this)}),a[bS]!==b&&at(a,bS,b),bs[h]=b,d){if(i={values:k(cr),keys:p?b:k(f9),entries:k(fn)},q){for(j in i){(cC||l||!(j in a))&&aA(a,j,i[j])}}else {af({target:h,proto:!0,forced:cC||l},i)}}return i},ia=en.charAt,fw='String Iterator',ip=aB.set,i$=aB.getterFor(fw);dT(String,'String',function(a){ip(this,{type:fw,string:a+'',index:0})},function(){var b=i$(this),d=b.string,c=b.index,a;return c>=d.length?{value:void 0,done:!0}:(a=ia(d,c),b.index+=a.length,{value:a,done:!1})});var hZ=ck.trim;af({target:'String',proto:!0,forced:function(a){return ai(function(){return !!'\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff'[a]()||'\u200b\u180e'[a]()!='\u200b\u180e'||'\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff'[a].name!==a})}('trim')},{trim:function(){return hZ(this)}});var an=function(){function e(b,a){var c=this,h=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(f(this,e),this.document=b,this.node=a,this.captureTextNodes=h,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue='',this.parent=null,this.children=[],a&&1===a.nodeType){if(Array.from(a.attributes).forEach(function(d){var f=l(d.nodeName);c.attributes[f]=new ab(b,f,d.value)}),this.addStylesFromStyleDefinition(),this.getAttribute('style').hasValue()){var i=this.getAttribute('style').getString().split(';').map(function(c){return c.trim()});i.forEach(function(d){if(d){var h=d.split(':'),g=ao(h,2),f=g[0],i=g[1];c.styles[f]=new ab(b,f.trim(),i.trim())}})}var g=b.definitions,d=this.getAttribute('id');d.hasValue()&&!g[d.getValue()]&&(g[d.getValue()]=this),Array.from(a.childNodes).forEach(function(d){if(1===d.nodeType){c.addChild(d)}else {if(h&&(3===d.nodeType||4===d.nodeType)){var f=b.createTextNode(d);0<f.getText().length&&c.addChild(f)}}})}}return j(e,[{key:'getAttribute',value:function(a){var d=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],c=this.attributes[a];if(!c&&d){var b=new ab(this.document,a,'');return this.attributes[a]=b,b}return c||ab.empty(this.document)}},{key:'getHrefAttribute',value:function(){for(var a in this.attributes){if('href'==a||/:href$/.test(a)){return this.attributes[a]}}return ab.empty(this.document)}},{key:'getStyle',value:function(a){var i=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],h=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],c=this.styles[a];if(c){return c}var b=this.getAttribute(a);if(b&&b.hasValue()){return this.styles[a]=b,b}if(!h){var f=this.parent;if(f){var d=f.getStyle(a);if(d&&d.hasValue()){return d}}}if(i){var g=new ab(this.document,a,'');return this.styles[a]=g,g}return c||ab.empty(this.document)}},{key:'render',value:function(a){if('none'!==this.getStyle('display').getString()&&'hidden'!==this.getStyle('visibility').getString()){if(a.save(),this.getStyle('mask').hasValue()){var c=this.getStyle('mask').getDefinition();c&&c.apply(a,this)}else {if('none'!==this.getStyle('filter').getValue('none')){var b=this.getStyle('filter').getDefinition();b&&b.apply(a,this)}else {this.setContext(a),this.renderChildren(a),this.clearContext(a)}}a.restore()}}},{key:'setContext',value:function(){}},{key:'clearContext',value:function(){}},{key:'renderChildren',value:function(a){this.children.forEach(function(b){b.render(a)})}},{key:'addChild',value:function(b){var a=b instanceof e?b:this.document.createElement(b);a.parent=this,e.ignoreChildTypes.includes(a.type)||this.children.push(a)}},{key:'matchesSelector',value:function(c){var b=this.node;if('function'==typeof b.matches){return b.matches(c)}var a=b.getAttribute('class');return !!(a&&''!==a)&&a.split(' ').some(function(a){if('.'.concat(a)===c){return !0}})}},{key:'addStylesFromStyleDefinition',value:function(){var f=this.document,h=f.styles,i=f.stylesSpecificity;for(var a in h){if('@'!==a[0]&&this.matchesSelector(a)){var d=h[a],g=i[a];if(d){for(var b in d){var c=this.stylesSpecificity[b];'undefined'==typeof c&&(c='000'),g>=c&&(this.styles[b]=d[b],this.stylesSpecificity[b]=g)}}}}}}]),e}();an.ignoreChildTypes=['title'];var fL=function(a){function t(g,b,d){var c;return f(this,t),c=ac(this,i(t).call(this,g,b,d)),console.warn('Element '.concat(b.nodeName,' not yet implemented.')),c}return ad(t,a),t}(an),ht=db.indexOf,eL=[].indexOf,dX=!!eL&&0>1/[1].indexOf(1,-0),gK=bl('indexOf');af({target:'Array',proto:!0,forced:dX||gK},{indexOf:function(a){return dX?eL.apply(this,arguments)||0:ht(this,a,1<arguments.length?arguments[1]:void 0)}});var hv=[].reverse,d7=[1,2];af({target:'Array',proto:!0,forced:d7+''===d7.reverse()+''},{reverse:function(){return b1(this)&&(this.length=this.length),hv.call(this)}});var iX=function(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=i(a),null!==a);){}return a},a6=t(function(a){function t(b,c,d){return a.exports='undefined'!=typeof Reflect&&Reflect.get?t=Reflect.get:t=function(i,h,j){var g=iX(i,h);if(g){var f=Object.getOwnPropertyDescriptor(g,h);return f.get?f.get.call(j):f.value}},t(b,c,d||b)}a.exports=t}),aI=function(){function e(i,g,c,h,d,b){f(this,e);var a=b?'string'==typeof b?e.parse(b):b:{};this.fontFamily=d||a.fontFamily,this.fontSize=h||a.fontSize,this.fontStyle=i||a.fontStyle,this.fontWeight=c||a.fontWeight,this.fontVariant=g||a.fontVariant}return j(e,[{key:'toString',value:function(){return [this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,$(this.fontFamily)].join(' ')}}],[{key:'parse',value:function(){var j=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',h=1<arguments.length?arguments[1]:void 0,f='',b='',d='',c='',g='',i=n(j).trim().split(' '),a={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return i.forEach(function(h){switch(!0){case !a.fontStyle&&e.styles.includes(h):'inherit'!==h&&(f=h),a.fontStyle=!0;break;case !a.fontVariant&&e.variants.includes(h):'inherit'!==h&&(b=h),a.fontStyle=!0,a.fontVariant=!0;break;case !a.fontWeight&&e.weights.includes(h):'inherit'!==h&&(d=h),a.fontStyle=!0,a.fontVariant=!0,a.fontWeight=!0;break;case !a.fontSize:if('inherit'!==h){var j=h.split('/'),i=ao(j,1);c=i[0]};a.fontStyle=!0,a.fontVariant=!0,a.fontWeight=!0,a.fontSize=!0;break;default:'inherit'!==h&&(g+=h);}}),new e(f,b,d,c,g,h)}}]),e}();aI.styles='normal|italic|oblique|inherit',aI.variants='normal|small-caps|inherit',aI.weights='normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit';var ey=function(c,f,d){var a,b;return cA&&'function'==typeof (a=f.constructor)&&a!==d&&ap(b=a.prototype)&&b!==d.prototype&&cA(c,b),c},hq=cI.f,gY=aR.f,gI=as.f,g9=ck.trim,bI='Number',a0=aa[bI],cH=a0.prototype,hS=aD(a$(cH))==bI,eh=function(k){var a=bf(k,!1),b,f,i,h,c,j,d,g;if('string'==typeof a&&2<a.length){if(a=g9(a),b=a.charCodeAt(0),43===b||45===b){if(f=a.charCodeAt(2),88===f||120===f){return NaN}}else {if(48===b){switch(a.charCodeAt(1)){case 66:case 98:i=2,h=49;break;case 79:case 111:i=8,h=55;break;default:return +a;}for(c=a.slice(2),j=c.length,d=0;d<j;d++){if(g=c.charCodeAt(d),48>g||g>h){return NaN}}return parseInt(c,i)}}}return +a};if(bO(bI,!a0(' 0o1')||!a0('0b1')||a0('+0x1'))){for(var bc=function(c){var b=1>arguments.length?0:c,a=this;return a instanceof bc&&(hS?ai(function(){cH.valueOf.call(a)}):aD(a)!=bI)?ey(new a0(eh(b)),a,bc):eh(b)},ej=aj?hq(a0):'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'.split(','),cS=0,cm;ej.length>cS;cS++){ag(a0,cm=ej[cS])&&!ag(bc,cm)&&gI(bc,cm,gY(a0,cm))}bc.prototype=cH,cH.constructor=bc,aA(aa,bI,bc)}var aE=function(){function e(){var a=Number.NaN,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a,g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:a;f(this,e),this.x1=d,this.y1=b,this.x2=g,this.y2=c,this.addPoint(d,b),this.addPoint(g,c)}return j(e,[{key:'addPoint',value:function(a,b){'undefined'!=typeof a&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=a,this.x2=a),a<this.x1&&(this.x1=a),a>this.x2&&(this.x2=a)),'undefined'!=typeof b&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=b,this.y2=b),b<this.y1&&(this.y1=b),b>this.y2&&(this.y2=b))}},{key:'addX',value:function(a){this.addPoint(a,null)}},{key:'addY',value:function(a){this.addPoint(null,a)}},{key:'addBoundingBox',value:function(a){var f=a.x1,c=a.y1,b=a.x2,d=a.y2;this.addPoint(f,c),this.addPoint(b,d)}},{key:'sumCubic',value:function(a,f,c,b,d){return ah(1-a,3)*f+3*ah(1-a,2)*a*c+3*(1-a)*ah(a,2)*b+ah(a,3)*d}},{key:'bezierCurveAdd',value:function(k,a,b,c,d){var f=6*a-12*b+6*c,i=-3*a+9*b-9*c+3*d,m=3*b-3*a;if(0===i){if(0===f){return}var g=-m/f;return void (0<g&&1>g&&(k?this.addX(this.sumCubic(g,a,b,c,d)):this.addY(this.sumCubic(g,a,b,c,d))))}var l=ah(f,2)-4*m*i;if(!(0>l)){var j=(-f+ar(l))/(2*i);0<j&&1>j&&(k?this.addX(this.sumCubic(j,a,b,c,d)):this.addY(this.sumCubic(j,a,b,c,d)));var h=(-f-ar(l))/(2*i);0<h&&1>h&&(k?this.addX(this.sumCubic(h,a,b,c,d)):this.addY(this.sumCubic(h,a,b,c,d)))}}},{key:'addBezierCurve',value:function(a,d,h,f,i,g,c,b){this.addPoint(a,d),this.addPoint(c,b),this.bezierCurveAdd(!0,a,h,i,c),this.bezierCurveAdd(!1,d,f,g,b)}},{key:'addQuadraticCurve',value:function(a,b,i,h,g,c){var f=a+2/3*(i-a),d=b+2/3*(h-b);this.addBezierCurve(a,b,f,f+1/3*(g-a),d,d+1/3*(c-b),g,c)}},{key:'isPointInBox',value:function(a,b){var f=this.x1,c=this.y1,g=this.x2,d=this.y2;return f<=a&&a<=g&&c<=b&&b<=d}},{key:'x',get:function(){return this.x1}},{key:'y',get:function(){return this.y1}},{key:'width',get:function(){return this.x2-this.x1}},{key:'height',get:function(){return this.y2-this.y1}}]),e}(),cK='toString',e4=RegExp.prototype,f0=e4[cK],hH=ai(function(){return '/a/b'!=f0.call({source:'a',flags:'b'})}),hl=f0.name!=cK;(hH||hl)&&aA(RegExp.prototype,cK,function(){var a=am(this),d=a.source+'',b=a.flags,c=(b===void 0&&a instanceof RegExp&&!('flags' in e4)?ex.call(a):b)+'';return '/'+d+'/'+c},{unsafe:!0});var ev=function(){function e(b,a){f(this,e),this.type='translate',this.point=null,this.point=al.parse(a)}return j(e,[{key:'apply',value:function(c){var a=this.point,d=a.x,b=a.y;c.translate(d||0,b||0)}},{key:'unapply',value:function(c){var a=this.point,d=a.x,b=a.y;c.translate(-1*d||0,-1*b||0)}},{key:'applyToPoint',value:function(c){var a=this.point,d=a.x,b=a.y;c.applyTransform([1,0,0,1,d||0,b||0])}}]),e}(),fa=function(){function e(d,c){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];f(this,e),this.type='rotate',this.angle=null,this.cx=0,this.cy=0;var a=o(c);this.angle=new ab(d,'angle',a[0]),this.cx=(a[1]||0)+(b[0]||0),this.cy=(a[2]||0)+(b[1]||0)}return j(e,[{key:'apply',value:function(a){var c=this.cx,b=this.cy,d=this.angle;a.translate(c,b),a.rotate(d.getRadians()),a.translate(-c,-b)}},{key:'unapply',value:function(a){var c=this.cx,b=this.cy,d=this.angle;a.translate(c,b),a.rotate(-1*d.getRadians()),a.translate(-c,-b)}},{key:'applyToPoint',value:function(b){var d=this.cx,c=this.cy,f=this.angle,a=f.getRadians();b.applyTransform([1,0,0,1,d||0,c||0]),b.applyTransform([ay(a),aw(a),-aw(a),ay(a),0,0]),b.applyTransform([1,0,0,1,-d||0,-c||0])}}]),e}(),er=function(){function e(c,b){f(this,e),this.type='scale',this.scale=null;var a=al.parse(b,1);(0===a.x||0===a.y)&&(a.x=a9,a.y=a9),this.scale=a}return j(e,[{key:'apply',value:function(d){var b=this.scale,a=b.x,c=b.y;d.scale(a,c||a)}},{key:'unapply',value:function(d){var b=this.scale,a=b.x,c=b.y;d.scale(1/a,1/c||a)}},{key:'applyToPoint',value:function(c){var a=this.scale,d=a.x,b=a.y;c.applyTransform([d||0,0,0,b||0,0,0])}}]),e}(),dp=function(){function e(b,a){f(this,e),this.type='matrix',this.matrix=[],this.matrix=o(a)}return j(e,[{key:'apply',value:function(b){var a=this.matrix;b.transform(a[0],a[1],a[2],a[3],a[4],a[5])}},{key:'unapply',value:function(m){var d=this.matrix,l=d[0],k=d[2],f=d[4],h=d[1],i=d[3],a=d[5],g=0,j=0,b=1,c=1/(l*(i*b-a*j)-k*(h*b-a*g)+f*(h*j-i*g));m.transform(c*(i*b-a*j),c*(a*g-h*b),c*(f*j-k*b),c*(l*b-f*g),c*(k*a-f*i),c*(f*h-l*a))}},{key:'applyToPoint',value:function(a){a.applyTransform(this.matrix)}}]),e}(),dM=function(a){function t(c,d){var b;return f(this,t),b=ac(this,i(t).call(this,c,d)),b.type='skew',b.angle=null,b.angle=new ab(c,'angle',d),b}return ad(t,a),t}(dp),fR=function(a){function t(c,d){var b;return f(this,t),b=ac(this,i(t).call(this,c,d)),b.type='skewX',b.matrix=[1,0,fp(b.angle.getRadians()),1,0,0],b}return ad(t,a),t}(dM),fd=function(a){function t(c,d){var b;return f(this,t),b=ac(this,i(t).call(this,c,d)),b.type='skewY',b.matrix=[1,fp(b.angle.getRadians()),0,1,0,0],b}return ad(t,a),t}(dM),b_=function(){function e(h,g,a){var b=this;f(this,e),this.document=h,this.transforms=[];var c=W(g),d=a?o(a):[];c.forEach(function(i){if('none'!==i){var k=q(i),c=ao(k,2),j=c[0],l=c[1],f=e.transformTypes[j];'undefined'!=typeof f&&b.transforms.push(new f(b.document,l,d))}})}return j(e,[{key:'apply',value:function(c){for(var b=this.transforms,d=b.length,a=0;a<d;a++){b[a].apply(c)}}},{key:'unapply',value:function(c){for(var b=this.transforms,d=b.length,a=d-1;0<=a;a--){b[a].unapply(c)}}},{key:'applyToPoint',value:function(c){for(var b=this.transforms,d=b.length,a=0;a<d;a++){b[a].applyToPoint(c)}}}],[{key:'fromElement',value:function(d,b){var a=b.getStyle('transform',!1,!0),c=b.getStyle('transform-origin',!1,!0);return a.hasValue()?new e(d,a.getString(),c.getString()):null}}]),e}();b_.transformTypes={translate:ev,rotate:fa,scale:er,matrix:dp,skewX:fR,skewY:fd};var a4=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.modifiedEmSizeStack=!1,b}return ad(t,a),j(t,[{key:'calculateOpacity',value:function(){for(var d=1,b=this,c;b;){c=b.getStyle('opacity',!1,!0),c.hasValue()&&(d*=c.getNumber()),b=b.parent}return d}},{key:'setContext',value:function(b){var H=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!H){var d=this.getStyle('fill'),j=this.getStyle('fill-opacity'),f=this.getStyle('stroke'),m=this.getStyle('stroke-opacity');if(d.isUrlDefinition()){var x=d.getFillStyleDefinition(this,j);x&&(b.fillStyle=x)}else {if(d.hasValue()){'currentColor'===d.getString()&&d.setValue(this.getStyle('color').getValue());var n=d.getString();'inherit'!==n&&(b.fillStyle='none'===n?'rgba(0,0,0,0)':n)}}if(j.hasValue()){var G=(new ab(this.document,'fill',b.fillStyle)).addOpacity(j).getString();b.fillStyle=G}if(f.isUrlDefinition()){var A=f.getFillStyleDefinition(this,m);A&&(b.strokeStyle=A)}else {if(f.hasValue()){'currentColor'===f.getString()&&f.setValue(this.getStyle('color').getValue());var l=f.getString();'inherit'!==l&&(b.strokeStyle='none'===l?'rgba(0,0,0,0)':l)}}if(m.hasValue()){var F=(new ab(this.document,'stroke',b.strokeStyle)).addOpacity(m).getString();b.strokeStyle=F}var z=this.getStyle('stroke-width');if(z.hasValue()){var D=z.getPixels();b.lineWidth=D?D:a9}var w=this.getStyle('stroke-linecap'),v=this.getStyle('stroke-linejoin'),y=this.getStyle('stroke-miterlimit'),C=this.getStyle('paint-order'),k=this.getStyle('stroke-dasharray'),I=this.getStyle('stroke-dashoffset');if(w.hasValue()&&(b.lineCap=w.getString()),v.hasValue()&&(b.lineJoin=v.getString()),y.hasValue()&&(b.miterLimit=y.getNumber()),C.hasValue()&&(b.paintOrder=C.getValue()),k.hasValue()&&'none'!==k.getString()){var h=o(k.getString());'undefined'==typeof b.setLineDash?'undefined'==typeof b.webkitLineDash?'undefined'!=typeof b.mozDash&&(1!==h.length||0!==h[0])&&(b.mozDash=h):b.webkitLineDash=h:b.setLineDash(h);var i=I.getPixels();'undefined'==typeof b.lineDashOffset?'undefined'==typeof b.webkitLineDashOffset?'undefined'!=typeof b.mozDashOffset&&(b.mozDashOffset=i):b.webkitLineDashOffset=i:b.lineDashOffset=i}}if(this.modifiedEmSizeStack=!1,'undefined'!=typeof b.font){var E=this.getStyle('font'),p=this.getStyle('font-style'),q=this.getStyle('font-variant'),t=this.getStyle('font-weight'),g=this.getStyle('font-size'),B=this.getStyle('font-family'),c=new aI(p.getString(),q.getString(),t.getString(),g.hasValue()?''.concat(g.getPixels(!0),'px'):'',B.getString(),aI.parse(E.getString(),b.font));p.setValue(c.fontStyle),q.setValue(c.fontVariant),t.setValue(c.fontWeight),g.setValue(c.fontSize),B.setValue(c.fontFamily),b.font=c.toString(),g.isPixels()&&(this.document.emSize=g.getPixels(),this.modifiedEmSizeStack=!0)}var u=b_.fromElement(this.document,this);u&&u.apply(b);var r=this.getStyle('clip-path',!1,!0);if(r.hasValue()){var s=r.getDefinition();s&&s.apply(b)}b.globalAlpha=this.calculateOpacity()}},{key:'clearContext',value:function(b){a6(i(t.prototype),'clearContext',this).call(this,b),this.modifiedEmSizeStack&&this.document.popEmSize()}}]),t}(an),bv=function(b){function t(d,g,c){var a;return f(this,t),a=ac(this,i(t).call(this,d,g,(this instanceof t?this.constructor:void 0)===t||c)),a.type='text',a.x=0,a.y=0,a.measureCache=-1,a}return ad(t,b),j(t,[{key:'setContext',value:function(c){var d=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];a6(i(t.prototype),'setContext',this).call(this,c,d);var a=this.getStyle('dominant-baseline').getTextBaseline()||this.getStyle('alignment-baseline').getTextBaseline();a&&(c.textBaseline=a)}},{key:'initializeCoordinates',value:function(d){this.x=this.getAttribute('x').getPixels('x'),this.y=this.getAttribute('y').getPixels('y');var c=this.getAttribute('dx'),a=this.getAttribute('dy');c.hasValue()&&(this.x+=c.getPixels('x')),a.hasValue()&&(this.y+=a.getPixels('y')),this.x+=this.getAnchorDelta(d,this,0)}},{key:'getBoundingBox',value:function(c){var d=this;if('text'!==this.type){return this.getTElementBoundingBox(c)}this.initializeCoordinates(c);var a=null;return this.children.forEach(function(h,g){var f=d.getChildBoundingBox(c,d,d,g);a?a.addBoundingBox(f):a=f}),a}},{key:'getFontSize',value:function(){var c=this.document,f=this.parent,d=aI.parse(c.ctx.font).fontSize,a=f.getStyle('font-size').getNumber(d);return a}},{key:'getTElementBoundingBox',value:function(a){var c=this.getFontSize();return new aE(this.x,this.y-c,this.x+this.measureText(a),this.y)}},{key:'getGlyph',value:function(c,h,a){var f=h[a],d=null;if(c.isArabic){var i=h.length,k=h[a-1],j=h[a+1],g='isolated';(0===a||' '===k)&&a<i-2&&' '!==j&&(g='terminal'),0<a&&' '!==k&&a<i-2&&' '!==j&&(g='medial'),0<a&&' '!==k&&(a===i-1||' '===j)&&(g='initial'),'undefined'!=typeof c.glyphs[f]&&(d=c.glyphs[f][g],!d&&'glyph'===c.glyphs[f].type&&(d=c.glyphs[f]))}else {d=c.glyphs[f]}return d||(d=c.missingGlyph),d}},{key:'getText',value:function(){return ''}},{key:'getTextFromNode',value:function(h){var d=h||this.node,f=Array.from(d.parentNode.childNodes),g=f.indexOf(d),i=f.length-1,c=n(d.value||d.text||d.textContent||'');return 0===g?c=a(c):g===i&&(c=r(c)),c}},{key:'renderChildren',value:function(a){var c=this;if('text'!==this.type){return void this.renderTElementChildren(a)}this.initializeCoordinates(a),this.children.forEach(function(f,d){c.renderChild(a,c,c,d)});var d=this.document.screen.mouse;d.isWorking()&&d.checkBoundingBox(this,this.getBoundingBox(a))}},{key:'renderTElementChildren',value:function(a){var u=this.document,h=this.parent,c=this.getText(),f=h.getStyle('font-family').getDefinition();if(f){for(var l=f.fontFace.unitsPerEm,q=aI.parse(u.ctx.font),k=h.getStyle('font-size').getNumber(q.fontSize),r=h.getStyle('font-style').getString(q.fontStyle),g=k/l,p=f.isRTL?c.split('').reverse().join(''):c,n=o(h.getAttribute('dx').getString()),t=p.length,d=0,m;d<t;d++){m=this.getGlyph(f,p,d),a.translate(this.x,this.y),a.scale(g,-g);var s=a.lineWidth;a.lineWidth=a.lineWidth*l/k,'italic'===r&&a.transform(1,0,0.4,1,0,0),m.render(a),'italic'===r&&a.transform(1,0,-0.4,1,0,0),a.lineWidth=s,a.scale(1/g,-1/g),a.translate(-this.x,-this.y),this.x+=k*(m.horizAdvX||f.horizAdvX)/l,'undefined'==typeof n[d]||isNaN(n[d])||(this.x+=n[d])}return}var i=this.x,j=this.y;'stroke'===a.paintOrder?(a.strokeStyle&&a.strokeText(c,i,j),a.fillStyle&&a.fillText(c,i,j)):(a.fillStyle&&a.fillText(c,i,j),a.strokeStyle&&a.strokeText(c,i,j))}},{key:'getAnchorDelta',value:function(i,h,g){var f=this.getStyle('text-anchor').getString('start');if('start'!==f){for(var j=h.children.length,c=0,a=g,d;a<j&&(d=h.children[a],!(a>g&&d.getAttribute('x').hasValue()));a++){c+=d.measureTextRecursive(i)}return -1*('end'===f?c:c/2)}return 0}},{key:'adjustChildCoordinates',value:function(d,c,l,f){var a=l.children[f];if('function'!=typeof a.measureText){return a}var j=a.getAttribute('x');if(j.hasValue()){a.x=j.getPixels('x')+c.getAnchorDelta(d,l,f);var m=a.getAttribute('text-anchor').getString('start');if('start'!==m){var k=a.measureTextRecursive(d);a.x+=-1*('end'===m?k:k/2)}var n=a.getAttribute('dx');n.hasValue()&&(a.x+=n.getPixels('x'))}else {var h=a.getAttribute('dx');h.hasValue()&&(c.x+=h.getPixels('x')),a.x=c.x}c.x=a.x+a.measureText(d);var o=a.getAttribute('y');if(o.hasValue()){a.y=o.getPixels('y');var i=a.getAttribute('dy');i.hasValue()&&(a.y+=i.getPixels('y'))}else {var g=a.getAttribute('dy');g.hasValue()&&(c.y+=g.getPixels('y')),a.y=c.y}return c.y=a.y,a}},{key:'getChildBoundingBox',value:function(a,d,h,g){var c=this.adjustChildCoordinates(a,d,h,g),f=c.getBoundingBox(a);return c.children.forEach(function(k,i){var j=d.getChildBoundingBox(a,d,c,i);f.addBoundingBox(j)}),f}},{key:'renderChild',value:function(a,d,g,f){var c=this.adjustChildCoordinates(a,d,g,f);c.render(a),c.children.forEach(function(i,h){d.renderChild(a,d,c,h)})}},{key:'measureTextRecursive',value:function(a){var c=this.children.reduce(function(d,c){return d+c.measureTextRecursive(a)},this.measureText(a));return c}},{key:'measureText',value:function(d){var c=this.measureCache;if(~c){return c}var f=this.getText(),a=this.measureTargetText(d,f);return this.measureCache=a,a}},{key:'measureTargetText',value:function(d,f){if(!f.length){return 0}var k=this.parent,c=k.getStyle('font-family').getDefinition();if(c){for(var n=this.getFontSize(),j=c.isRTL?f.split('').reverse().join(''):f,g=o(k.getAttribute('dx').getString()),l=j.length,h=0,a=0,i;a<l;a++){i=this.getGlyph(c,j,a),h+=(i.horizAdvX||c.horizAdvX)*n/c.fontFace.unitsPerEm,'undefined'==typeof g[a]||isNaN(g[a])||(h+=g[a])}return h}if(!d.measureText){return 10*f.length}d.save(),this.setContext(d,!0);var m=d.measureText(f),p=m.width;return d.restore(),p}}]),t}(a4),dJ=function(a){function t(d,g,c){var b;return f(this,t),b=ac(this,i(t).call(this,d,g,(this instanceof t?this.constructor:void 0)===t||c)),b.type='tspan',b.text=0<b.children.length?'':b.getTextFromNode(),b}return ad(t,a),j(t,[{key:'getText',value:function(){return this.text}}]),t}(bv);af({target:'Array',proto:!0},{fill:function(g){for(var b=aV(this),a=aH(b.length),c=arguments.length,f=df(1<c?arguments[1]:void 0,a),d=2<c?arguments[2]:void 0,h=void 0===d?a:df(d,a);h>f;){b[f++]=g}return b}}),bV('fill');var fo=function(){function e(a){f(this,e),this.control=null,this.start=null,this.current=null,this.command='',this.tokens=[],this.i=-1,this.previousCommand='',this.points=[],this.angles=[],this.tokens=X(a).split(' ')}return j(e,[{key:'reset',value:function(){this.i=-1,this.command='',this.previousCommand='',this.start=new al(0,0),this.control=new al(0,0),this.current=new al(0,0),this.points=[],this.angles=[]}},{key:'isEnd',value:function(){var a=this.i,b=this.tokens;return a>=b.length-1}},{key:'isCommandOrEnd',value:function(){if(this.isEnd()){return !0}var a=this.i,b=this.tokens;return /^[A-Za-z]$/.test(b[a+1])}},{key:'isRelativeCommand',value:function(){switch(this.command){case 'm':case 'l':case 'h':case 'v':case 'c':case 's':case 'q':case 't':case 'a':case 'z':return !0;default:return !1;}}},{key:'getToken',value:function(){return this.i++,this.tokens[this.i]}},{key:'getScalar',value:function(){return parseFloat(this.getToken())}},{key:'nextCommand',value:function(){this.previousCommand=this.command,this.command=this.getToken()}},{key:'getPoint',value:function(){var a=new al(this.getScalar(),this.getScalar());return this.makeAbsolute(a)}},{key:'getAsControlPoint',value:function(){var a=this.getPoint();return this.control=a,a}},{key:'getAsCurrentPoint',value:function(){var a=this.getPoint();return this.current=a,a}},{key:'getReflectedControlPoint',value:function(){var a=this.previousCommand.toLowerCase();if('c'!==a&&'s'!==a&&'q'!==a&&'t'!==a){return this.current}var c=this.current,h=c.x,d=c.y,b=this.control,f=b.x,i=b.y,g=new al(2*h-f,2*d-i);return g}},{key:'makeAbsolute',value:function(a){if(this.isRelativeCommand()){var b=this.current,d=b.x,c=b.y;a.x+=d,a.y+=c}return a}},{key:'addMarker',value:function(c,f,d){var b=this.points,a=this.angles;d&&0<a.length&&!a[a.length-1]&&(a[a.length-1]=b[b.length-1].angleTo(d)),this.addMarkerAngle(c,f?f.angleTo(c):null)}},{key:'addMarkerAngle',value:function(a,b){this.points.push(a),this.angles.push(b)}},{key:'getMarkerPoints',value:function(){return this.points}},{key:'getMarkerAngles',value:function(){for(var a=this.angles,d=a.length,b=0;b<d;b++){if(!a[b]){for(var c=b+1;c<d;c++){if(a[c]){a[b]=a[c];break}}}}return a}}]),e}(),aZ=function(a){function t(d,g,c){var b;return f(this,t),b=ac(this,i(t).call(this,d,g,c)),b.type='path',b.pathParser=null,b.pathParser=new fo(b.getAttribute('d').getString()),b}return ad(t,a),j(t,[{key:'path',value:function(b){var d=this.pathParser,c=new aE();for(d.reset(),b&&b.beginPath();!d.isEnd();){switch(d.nextCommand(),d.command){case 'M':case 'm':this.pathM(b,c);break;case 'L':case 'l':this.pathL(b,c);break;case 'H':case 'h':this.pathH(b,c);break;case 'V':case 'v':this.pathV(b,c);break;case 'C':case 'c':this.pathC(b,c);break;case 'S':case 's':this.pathS(b,c);break;case 'Q':case 'q':this.pathQ(b,c);break;case 'T':case 't':this.pathT(b,c);break;case 'A':case 'a':this.pathA(b,c);break;case 'Z':case 'z':this.pathZ(b,c);break;default:}}return c}},{key:'getBoundingBox',value:function(){return this.path()}},{key:'getMarkers',value:function(){var b=this.pathParser,f=b.getMarkerPoints(),d=b.getMarkerAngles(),c=f.map(function(b,c){return [b,d[c]]});return c}},{key:'renderChildren',value:function(b){this.path(b),this.document.screen.mouse.checkPath(this,b);var k=this.getStyle('fill-rule');''!==b.fillStyle&&('inherit'===k.getString('inherit')?b.fill():b.fill(k.getString())),''!==b.strokeStyle&&b.stroke();var c=this.getMarkers();if(c){var f=c.length-1,j=this.getStyle('marker-start'),i=this.getStyle('marker-mid'),h=this.getStyle('marker-end');if(j.isUrlDefinition()){var t=j.getDefinition(),g=ao(c[0],2),u=g[0],q=g[1];t.render(b,u,q)}if(i.isUrlDefinition()){for(var o=i.getDefinition(),d=1;d<f;d++){var m=ao(c[d],2),r=m[0],p=m[1];o.render(b,r,p)}}if(h.isUrlDefinition()){var s=h.getDefinition(),l=ao(c[f],2),n=l[0],v=l[1];s.render(b,n,v)}}}},{key:'pathM',value:function(c,k){var b=this.pathParser,d=b.getAsCurrentPoint(),i=d.x,g=d.y;for(b.addMarker(d),k.addPoint(i,g),c&&c.moveTo(i,g),b.start=b.current;!b.isCommandOrEnd();){var f=b.getAsCurrentPoint(),h=f.x,j=f.y;b.addMarker(f,b.start),k.addPoint(h,j),c&&c.lineTo(h,j)}}},{key:'pathL',value:function(d,i){for(var b=this.pathParser;!b.isCommandOrEnd();){var h=b.current,c=b.getAsCurrentPoint(),f=c.x,g=c.y;b.addMarker(c,h),i.addPoint(f,g),d&&d.lineTo(f,g)}}},{key:'pathH',value:function(f,g){for(var b=this.pathParser;!b.isCommandOrEnd();){var d=b.current,c=new al((b.isRelativeCommand()?d.x:0)+b.getScalar(),d.y);b.addMarker(c,d),b.current=c,g.addPoint(c.x,c.y),f&&f.lineTo(c.x,c.y)}}},{key:'pathV',value:function(f,g){for(var b=this.pathParser;!b.isCommandOrEnd();){var d=b.current,c=new al(d.x,(b.isRelativeCommand()?d.y:0)+b.getScalar());b.addMarker(c,d),b.current=c,g.addPoint(c.x,c.y),f&&f.lineTo(c.x,c.y)}}},{key:'pathC',value:function(h,i){for(var b=this.pathParser;!b.isCommandOrEnd();){var g=b.current,f=b.getPoint(),c=b.getAsControlPoint(),d=b.getAsCurrentPoint();b.addMarker(d,c,f),i.addBezierCurve(g.x,g.y,f.x,f.y,c.x,c.y,d.x,d.y),h&&h.bezierCurveTo(f.x,f.y,c.x,c.y,d.x,d.y)}}},{key:'pathS',value:function(h,i){for(var b=this.pathParser;!b.isCommandOrEnd();){var g=b.current,f=b.getReflectedControlPoint(),c=b.getAsControlPoint(),d=b.getAsCurrentPoint();b.addMarker(d,c,f),i.addBezierCurve(g.x,g.y,f.x,f.y,c.x,c.y,d.x,d.y),h&&h.bezierCurveTo(f.x,f.y,c.x,c.y,d.x,d.y)}}},{key:'pathQ',value:function(g,h){for(var d=this.pathParser;!d.isCommandOrEnd();){var f=d.current,b=d.getAsControlPoint(),c=d.getAsCurrentPoint();d.addMarker(c,b,b),h.addQuadraticCurve(f.x,f.y,b.x,b.y,c.x,c.y),g&&g.quadraticCurveTo(b.x,b.y,c.x,c.y)}}},{key:'pathT',value:function(g,h){for(var c=this.pathParser;!c.isCommandOrEnd();){var f=c.current,b=c.getReflectedControlPoint();c.control=b;var d=c.getAsCurrentPoint();c.addMarker(d,b,b),h.addQuadraticCurve(f.x,f.y,b.x,b.y,d.x,d.y),g&&g.quadraticCurveTo(b.x,b.y,d.x,d.y)}}},{key:'pathA',value:function(k,C){for(var i=this.pathParser;!i.isCommandOrEnd();){var l=i.current,b=i.getScalar(),c=i.getScalar(),f=i.getScalar()*(ax/180),B=i.getScalar(),t=i.getScalar(),j=i.getAsCurrentPoint(),d=new al(ay(f)*(l.x-j.x)/2+aw(f)*(l.y-j.y)/2,-aw(f)*(l.x-j.x)/2+ay(f)*(l.y-j.y)/2),u=ah(d.x,2)/ah(b,2)+ah(d.y,2)/ah(c,2);1<u&&(b*=ar(u),c*=ar(u));var q=(B===t?-1:1)*ar((ah(b,2)*ah(c,2)-ah(b,2)*ah(d.y,2)-ah(c,2)*ah(d.x,2))/(ah(b,2)*ah(d.y,2)+ah(c,2)*ah(d.x,2)));isNaN(q)&&(q=0);var g=new al(q*b*d.y/c,q*-c*d.x/b),m=new al((l.x+j.x)/2+ay(f)*g.x-aw(f)*g.y,(l.y+j.y)/2+aw(f)*g.x+ay(f)*g.y),p=x([1,0],[(d.x-g.x)/b,(d.y-g.y)/c]),s=[(d.x-g.x)/b,(d.y-g.y)/c],v=[(-d.x-g.x)/b,(-d.y-g.y)/c],n=x(s,v);-1>=h(s,v)&&(n=ax),1<=h(s,v)&&(n=0);var r=1-t?1:-1,o=p+r*(n/2),z=new al(m.x+b*ay(o),m.y+c*aw(o));if(i.addMarkerAngle(z,o-r*ax/2),i.addMarkerAngle(j,o-r*ax),C.addPoint(j.x,j.y),k&&!isNaN(p)&&!isNaN(n)){var A=b>c?b:c,y=b>c?1:b/c,w=b>c?c/b:1;k.translate(m.x,m.y),k.rotate(f),k.scale(y,w),k.arc(0,0,A,p,p+n,!!(1-t)),k.scale(1/y,1/w),k.rotate(-f),k.translate(-m.x,-m.y)}}}},{key:'pathZ',value:function(c,b){var d=this.pathParser;c&&b.x1!==b.x2&&b.y1!==b.y2&&c.closePath(),d.current=d.start}}]),t}(a4),bt=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='svg',b.root=!1,b}return ad(t,a),j(t,[{key:'clearContext',value:function(b){a6(i(t.prototype),'clearContext',this).call(this,b),this.document.screen.viewPort.removeCurrent()}},{key:'setContext',value:function(b){var d=this.document,c=d.screen,l=d.window,n=b.canvas;if(c.setDefaults(b),n.style&&'undefined'!=typeof b.font&&l&&'undefined'!=typeof l.getComputedStyle){b.font=l.getComputedStyle(n).getPropertyValue('font');var p=new ab(d,'fontSize',aI.parse(b.font).fontSize);p.hasValue()&&(d.rootEmSize=p.getPixels('y'),d.emSize=d.rootEmSize)}a6(i(t.prototype),'setContext',this).call(this,b),this.getAttribute('x').hasValue()||this.getAttribute('x',!0).setValue(0),this.getAttribute('y').hasValue()||this.getAttribute('y',!0).setValue(0),b.translate(this.getAttribute('x').getPixels('x'),this.getAttribute('y').getPixels('y'));var r=c.viewPort,g=r.width,h=r.height;this.getAttribute('width').hasValue()||this.getAttribute('width',!0).setValue('100%'),this.getAttribute('height').hasValue()||this.getAttribute('height',!0).setValue('100%');var v=this.getAttribute('refX'),u=this.getAttribute('refY'),q=this.getAttribute('viewBox'),f=q.hasValue()?o(q.getString()):null,w=!this.root&&'visible'!==this.getAttribute('overflow').getValue('hidden'),j=0,k=0,s=0,m=0;f&&(j=f[0],k=f[1]),this.root||(g=this.getAttribute('width').getPixels('x'),h=this.getAttribute('height').getPixels('y'),'marker'===this.type&&(s=j,m=k,j=0,k=0)),c.viewPort.setCurrent(g,h),f&&(g=f[2],h=f[3]),d.setViewBox({ctx:b,aspectRatio:this.getAttribute('preserveAspectRatio').getString(),width:c.viewPort.width,desiredWidth:g,height:c.viewPort.height,desiredHeight:h,minX:j,minY:k,refX:v.getValue(),refY:u.getValue(),clip:w,clipX:s,clipY:m}),f&&(c.viewPort.removeCurrent(),c.viewPort.setCurrent(g,h))}},{key:'resize',value:function(b){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:b,d=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],g=this.getAttribute('width',!0),j=this.getAttribute('height',!0),i=this.getAttribute('viewBox'),m=this.getAttribute('style'),l=g.getNumber(0),n=j.getNumber(0);if(d){if('string'==typeof d){this.getAttribute('preserveAspectRatio',!0).setValue(d)}else {var c=this.getAttribute('preserveAspectRatio');c.hasValue()&&c.setValue(c.getString().replace(/^\s*(\S.*\S)\s*$/,'$1'))}}if(g.setValue(b),j.setValue(f),i.hasValue()||i.setValue('0 0 '.concat(l||b,' ').concat(n||f)),m.hasValue()){var k=this.getStyle('width'),h=this.getStyle('height');k.hasValue()&&k.setValue(''.concat(b,'px')),h.hasValue()&&h.setValue(''.concat(f,'px'))}}}]),t}(a4),dm=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='rect',b}return ad(t,a),j(t,[{key:'path',value:function(g){var c=this.getAttribute('x').getPixels('x'),b=this.getAttribute('y').getPixels('y'),h=this.getAttribute('width').getPixels('x'),i=this.getAttribute('height').getPixels('y'),k=this.getAttribute('rx'),l=this.getAttribute('ry'),d=k.getPixels('x'),f=l.getPixels('y');if(k.hasValue()&&!l.hasValue()&&(f=d),l.hasValue()&&!k.hasValue()&&(d=f),d=a_(d,h/2),f=a_(f,i/2),g){var j=4*((ar(2)-1)/3);g.beginPath(),0<i&&0<h&&(g.moveTo(c+d,b),g.lineTo(c+h-d,b),g.bezierCurveTo(c+h-d+j*d,b,c+h,b+f-j*f,c+h,b+f),g.lineTo(c+h,b+i-f),g.bezierCurveTo(c+h,b+i-f+j*f,c+h-d+j*d,b+i,c+h-d,b+i),g.lineTo(c+d,b+i),g.bezierCurveTo(c+d-j*d,b+i,c,b+i-f+j*f,c,b+i-f),g.lineTo(c,b+f),g.bezierCurveTo(c,b+f-j*f,c+d-j*d,b,c+d,b),g.closePath())}return new aE(c,b,c+h,b+i)}},{key:'getMarkers',value:function(){return null}}]),t}(aZ),fW=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='circle',b}return ad(t,a),j(t,[{key:'path',value:function(c){var f=this.getAttribute('cx').getPixels('x'),d=this.getAttribute('cy').getPixels('y'),b=this.getAttribute('r').getPixels();return c&&0<b&&(c.beginPath(),c.arc(f,d,b,0,2*ax,!1),c.closePath()),new aE(f-b,d-b,f+b,d+b)}},{key:'getMarkers',value:function(){return null}}]),t}(aZ),gn=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='ellipse',b}return ad(t,a),j(t,[{key:'path',value:function(g){var h=4*((ar(2)-1)/3),d=this.getAttribute('rx').getPixels('x'),f=this.getAttribute('ry').getPixels('y'),c=this.getAttribute('cx').getPixels('x'),b=this.getAttribute('cy').getPixels('y');return g&&(g.beginPath(),g.moveTo(c+d,b),g.bezierCurveTo(c+d,b+h*f,c+h*d,b+f,c,b+f),g.bezierCurveTo(c-h*d,b+f,c-d,b+h*f,c-d,b),g.bezierCurveTo(c-d,b-h*f,c-h*d,b-f,c,b-f),g.bezierCurveTo(c+h*d,b-f,c+d,b-h*f,c+d,b),g.closePath()),new aE(c-d,b-f,c+d,b+f)}},{key:'getMarkers',value:function(){return null}}]),t}(aZ),fA=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='line',b}return ad(t,a),j(t,[{key:'getPoints',value:function(){return [new al(this.getAttribute('x1').getPixels('x'),this.getAttribute('y1').getPixels('y')),new al(this.getAttribute('x2').getPixels('x'),this.getAttribute('y2').getPixels('y'))]}},{key:'path',value:function(b){var k=this.getPoints(),g=ao(k,2),c=g[0],i=c.x,d=c.y,h=g[1],f=h.x,j=h.y;return b&&(b.beginPath(),b.moveTo(i,d),b.lineTo(f,j)),new aE(i,d,f,j)}},{key:'getMarkers',value:function(){var g=this.getPoints(),f=ao(g,2),c=f[0],d=f[1],b=c.angleTo(d);return [[c,b],[d,b]]}}]),t}(aZ),ds=function(a){function t(d,g,c){var b;return f(this,t),b=ac(this,i(t).call(this,d,g,c)),b.type='polyline',b.points=[],b.points=al.parsePath(b.getAttribute('points').getString()),b}return ad(t,a),j(t,[{key:'path',value:function(b){var h=this.points,i=ao(h,1),c=i[0],g=c.x,d=c.y,f=new aE(g,d);return b&&(b.beginPath(),b.moveTo(g,d)),h.forEach(function(g){var d=g.x,c=g.y;f.addPoint(d,c),b&&b.lineTo(d,c)}),f}},{key:'getMarkers',value:function(){var c=this.points,d=c.length-1,b=[];return c.forEach(function(f,g){g===d||b.push([f,f.angleTo(c[g+1])])}),0<b.length&&b.push([c[c.length-1],b[b.length-1][1]]),b}}]),t}(aZ),fO=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='polygon',b}return ad(t,a),j(t,[{key:'path',value:function(b){var g=a6(i(t.prototype),'path',this).call(this,b),d=ao(this.points,1),c=d[0],f=c.x,h=c.y;return b&&(b.lineTo(f,h),b.closePath()),g}}]),t}(ds),iY=aR.f;af({target:'Reflect',stat:!0},{deleteProperty:function(a,c){var b=iY(am(a),c);return (!b||b.configurable)&&delete a[c]}});var fi=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='pattern',b}return ad(t,a),j(t,[{key:'createPattern',value:function(n,o,j){var h=this.getAttribute('width').getPixels('x',!0),k=this.getAttribute('height').getPixels('y',!0),b=new bt(this.document,null);b.attributes.viewBox=new ab(this.document,'viewBox',this.getAttribute('viewBox').getValue()),b.attributes.width=new ab(this.document,'width',''.concat(h,'px')),b.attributes.height=new ab(this.document,'height',''.concat(k,'px')),b.attributes.transform=new ab(this.document,'transform',this.getAttribute('patternTransform').getValue()),b.children=this.children;var d=this.document.createCanvas(h,k),c=d.getContext('2d'),l=this.getAttribute('x'),i=this.getAttribute('y');l.hasValue()&&i.hasValue()&&c.translate(l.getPixels('x',!0),i.getPixels('y',!0)),j.hasValue()?this.styles['fill-opacity']=j:Reflect.deleteProperty(this.styles,'fill-opacity');for(var g=-1;1>=g;g++){for(var f=-1;1>=f;f++){c.save(),b.attributes.x=new ab(this.document,'x',g*d.width),b.attributes.y=new ab(this.document,'y',f*d.height),b.render(c),c.restore()}}var m=n.createPattern(d,'repeat');return m}}]),t}(an),gb=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='marker',b}return ad(t,a),j(t,[{key:'render',value:function(b,d,h){if(d){var f=d.x,j=d.y,g=this.getAttribute('orient').getValue('auto'),i=this.getAttribute('markerUnits').getValue('strokeWidth');b.translate(f,j),'auto'===g&&b.rotate(h),'strokeWidth'===i&&b.scale(b.lineWidth,b.lineWidth),b.save();var c=new bt(this.document,null);c.type=this.type,c.attributes.viewBox=new ab(this.document,'viewBox',this.getAttribute('viewBox').getValue()),c.attributes.refX=new ab(this.document,'refX',this.getAttribute('refX').getValue()),c.attributes.refY=new ab(this.document,'refY',this.getAttribute('refY').getValue()),c.attributes.width=new ab(this.document,'width',this.getAttribute('markerWidth').getValue()),c.attributes.height=new ab(this.document,'height',this.getAttribute('markerHeight').getValue()),c.attributes.overflow=new ab(this.document,'overflow',this.getAttribute('overflow').getValue()),c.attributes.fill=new ab(this.document,'fill',this.getAttribute('fill').getValue('black')),c.attributes.stroke=new ab(this.document,'stroke',this.getAttribute('stroke').getValue('none')),c.children=this.children,c.render(b),b.restore(),'strokeWidth'===i&&b.scale(1/b.lineWidth,1/b.lineWidth),'auto'===g&&b.rotate(-h),b.translate(-f,-j)}}}]),t}(an),fK=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='defs',b}return ad(t,a),j(t,[{key:'render',value:function(){}}]),t}(an),ch=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='g',b}return ad(t,a),j(t,[{key:'getBoundingBox',value:function(c){var b=new aE();return this.children.forEach(function(d){b.addBoundingBox(d.getBoundingBox(c))}),b}}]),t}(a4),c5=function(a){function t(g,j,d){var b;f(this,t),b=ac(this,i(t).call(this,g,j,d)),b.attributesToInherit=['gradientUnits'],b.stops=[];var c=bj(b),k=c.stops,h=c.children;return h.forEach(function(b){'stop'===b.type&&k.push(b)}),b}return ad(t,a),j(t,[{key:'getGradientUnits',value:function(){return this.getAttribute('gradientUnits').getString('objectBoundingBox')}},{key:'createGradient',value:function(r,u,o){var p=this,k=this;this.getHrefAttribute().hasValue()&&(k=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(k));var t=k,j=t.stops,f=this.getGradient(r,u);if(!f){return this.addParentOpacity(o,j[j.length-1].color)}if(j.forEach(function(b){f.addColorStop(b.offset,p.addParentOpacity(o,b.color))}),this.getAttribute('gradientTransform').hasValue()){var b=this.document,m=b.screen,h=m.MAX_VIRTUAL_PIXELS,s=m.viewPort,q=ao(s.viewPorts,1),g=q[0],d=new dm(b,null);d.attributes.x=new ab(b,'x',-h/3),d.attributes.y=new ab(b,'y',-h/3),d.attributes.width=new ab(b,'width',h),d.attributes.height=new ab(b,'height',h);var i=new ch(b,null);i.attributes.transform=new ab(b,'transform',this.getAttribute('gradientTransform').getValue()),i.children=[d];var c=new bt(b,null);c.attributes.x=new ab(b,'x',0),c.attributes.y=new ab(b,'y',0),c.attributes.width=new ab(b,'width',g.width),c.attributes.height=new ab(b,'height',g.height),c.children=[i];var n=b.createCanvas(g.width,g.height),l=n.getContext('2d');return l.fillStyle=f,c.render(l),l.createPattern(n,'no-repeat')}return f}},{key:'inheritStopContainer',value:function(b){var c=this;this.attributesToInherit.forEach(function(d){!c.getAttribute(d).hasValue()&&b.getAttribute(d).hasValue()&&c.getAttribute(d,!0).setValue(b.getAttribute(d).getValue())})}},{key:'addParentOpacity',value:function(b,c){if(b.hasValue()){var d=new ab(this.document,'color',c);return d.addOpacity(b).getString()}return c}}]),t}(an),dW=function(a){function t(d,g,c){var b;return f(this,t),b=ac(this,i(t).call(this,d,g,c)),b.type='linearGradient',b.attributesToInherit.push('x1','y1','x2','y2'),b}return ad(t,a),j(t,[{key:'getGradient',value:function(d,i){var b='objectBoundingBox'===this.getGradientUnits()?i.getBoundingBox(d):null;this.getAttribute('x1').hasValue()||this.getAttribute('y1').hasValue()||this.getAttribute('x2').hasValue()||this.getAttribute('y2').hasValue()||(this.getAttribute('x1',!0).setValue(0),this.getAttribute('y1',!0).setValue(0),this.getAttribute('x2',!0).setValue(1),this.getAttribute('y2',!0).setValue(0));var c='objectBoundingBox'===this.getGradientUnits()?b.x+b.width*this.getAttribute('x1').getNumber():this.getAttribute('x1').getPixels('x'),h='objectBoundingBox'===this.getGradientUnits()?b.y+b.height*this.getAttribute('y1').getNumber():this.getAttribute('y1').getPixels('y'),f='objectBoundingBox'===this.getGradientUnits()?b.x+b.width*this.getAttribute('x2').getNumber():this.getAttribute('x2').getPixels('x'),g='objectBoundingBox'===this.getGradientUnits()?b.y+b.height*this.getAttribute('y2').getNumber():this.getAttribute('y2').getPixels('y');return c===f&&h===g?null:d.createLinearGradient(c,h,f,g)}}]),t}(c5),ed=function(a){function t(d,g,c){var b;return f(this,t),b=ac(this,i(t).call(this,d,g,c)),b.type='radialGradient',b.attributesToInherit.push('cx','cy','r','fx','fy','fr'),b}return ad(t,a),j(t,[{key:'getGradient',value:function(d,k){var b=k.getBoundingBox(d);this.getAttribute('cx').hasValue()||this.getAttribute('cx',!0).setValue('50%'),this.getAttribute('cy').hasValue()||this.getAttribute('cy',!0).setValue('50%'),this.getAttribute('r').hasValue()||this.getAttribute('r',!0).setValue('50%');var c='objectBoundingBox'===this.getGradientUnits()?b.x+b.width*this.getAttribute('cx').getNumber():this.getAttribute('cx').getPixels('x'),f='objectBoundingBox'===this.getGradientUnits()?b.y+b.height*this.getAttribute('cy').getNumber():this.getAttribute('cy').getPixels('y'),h=c,g=f;this.getAttribute('fx').hasValue()&&(h='objectBoundingBox'===this.getGradientUnits()?b.x+b.width*this.getAttribute('fx').getNumber():this.getAttribute('fx').getPixels('x')),this.getAttribute('fy').hasValue()&&(g='objectBoundingBox'===this.getGradientUnits()?b.y+b.height*this.getAttribute('fy').getNumber():this.getAttribute('fy').getPixels('y'));var j='objectBoundingBox'===this.getGradientUnits()?(b.width+b.height)/2*this.getAttribute('r').getNumber():this.getAttribute('r').getPixels(),i=this.getAttribute('fr').getPixels();return d.createRadialGradient(h,g,i,c,f,j)}}]),t}(c5),eR=function(a){function t(h,k,g){var b;f(this,t),b=ac(this,i(t).call(this,h,k,g)),b.type='stop';var j=aX(0,a_(1,b.getAttribute('offset').getNumber())),d=b.getStyle('stop-opacity'),c=b.getStyle('stop-color',!0);return ''===c.getString()&&c.setValue('#000'),d.hasValue()&&(c=c.addOpacity(d)),b.offset=j,b.color=c.getString(),b}return ad(t,a),t}(an),d1='Array Iterator',iU=aB.set,hc=aB.getterFor(d1),bL=dT(Array,'Array',function(a,b){iU(this,{type:d1,target:aC(a),index:0,kind:b})},function(){var b=hc(this),c=b.target,d=b.kind,a=b.index++;return !c||a>=c.length?(b.target=void 0,{value:void 0,done:!0}):'keys'==d?{value:a,done:!1}:'values'==d?{value:c[a],done:!1}:{value:[a,c[a]],done:!1}},'values');bs.Arguments=bs.Array,bV('keys'),bV('values'),bV('entries');var cZ=ak('iterator'),eN=ak('toStringTag'),cT=bL.values;for(var cN in du){var eD=aa[cN],aL=eD&&eD.prototype;if(aL){if(aL[cZ]!==cT){try{at(aL,cZ,cT)}catch(jb){aL[cZ]=cT}}if(aL[eN]||at(aL,eN,cN),du[cN]){for(var bg in bL){if(aL[bg]!==bL[bg]){try{at(aL,bg,bL[bg])}catch(jc){aL[bg]=bL[bg]}}}}}}var cG=function(a){function t(c,g,d){var b;return f(this,t),b=ac(this,i(t).call(this,c,g,d)),b.type='animate',b.duration=0,b.initialValue=null,b.initialUnits='',b.removed=!1,b.frozen=!1,c.screen.animations.push(bj(b)),b.begin=b.getAttribute('begin').getMilliseconds(),b.maxDuration=b.begin+b.getAttribute('dur').getMilliseconds(),b.from=b.getAttribute('from'),b.to=b.getAttribute('to'),b.values=b.getAttribute('values'),b.values.hasValue()&&b.values.setValue(b.values.getString().split(';')),b}return ad(t,a),j(t,[{key:'getProperty',value:function(){var c=this.getAttribute('attributeType').getString(),b=this.getAttribute('attributeName').getString();return 'CSS'===c?this.parent.getStyle(b,!0):this.parent.getAttribute(b,!0)}},{key:'calcValue',value:function(){var d=this.initialUnits,b=this.getProgress(),g=b.progress,c=b.from,h=b.to,f=c.getNumber()+(h.getNumber()-c.getNumber())*g;return '%'===d&&(f*=100),''.concat(f).concat(d)}},{key:'update',value:function(i){var c=this.parent,b=this.getProperty();if(this.initialValue||(this.initialValue=b.getString(),this.initialUnits=b.getUnits()),this.duration>this.maxDuration){var f=this.getAttribute('fill').getString('remove');if('indefinite'===this.getAttribute('repeatCount').getString()||'indefinite'===this.getAttribute('repeatDur').getString()){this.duration=0}else {if('freeze'===f&&!this.frozen){this.frozen=!0,c.animationFrozen=!0,c.animationFrozenValue=b.getString()}else {if('remove'===f&&!this.removed){return this.removed=!0,b.setValue(c.animationFrozen?c.animationFrozenValue:this.initialValue),!0}}}return !1}this.duration+=i;var h=!1;if(this.begin<this.duration){var d=this.calcValue(),g=this.getAttribute('type');if(g.hasValue()){var j=g.getString();d=''.concat(j,'(').concat(d,')')}b.setValue(d),h=!0}return h}},{key:'getProgress',value:function(){var g=this.document,c=this.values,b={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(c.hasValue()){var d=b.progress*(c.getValue().length-1),f=az(d),h=fB(d);b.from=new ab(g,'from',parseFloat(c.getValue()[f])),b.to=new ab(g,'to',parseFloat(c.getValue()[h])),b.progress=(d-f)/(h-f)}else {b.from=this.from,b.to=this.to}return b}}]),t}(an),hO=ck.trim,b8=aa.parseInt,ig=/^[+-]?0[Xx]/,gN=8!==b8('\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff08')||22!==b8('\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff0x16'),em=gN?function(b,c){var a=hO(b+'');return b8(a,c>>>0||(ig.test(a)?16:10))}:b8;af({global:!0,forced:parseInt!=em},{parseInt:em});var e6=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='animateColor',b}return ad(t,a),j(t,[{key:'calcValue',value:function(){var d=this.getProgress(),f=d.progress,i=d.from,g=d.to,b=new dC(i.getString()),c=new dC(g.getString());if(b.ok&&c.ok){var h=b.r+(c.r-b.r)*f,j=b.g+(c.g-b.g)*f,k=b.b+(c.b-b.b)*f;return 'rgb('.concat(parseInt(h,10),', ').concat(parseInt(j,10),', ').concat(parseInt(k,10),')')}return this.getAttribute('from').getString()}}]),t}(cG),eY=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='animateTransform',b}return ad(t,a),j(t,[{key:'calcValue',value:function(){var b=this.getProgress(),i=b.progress,f=b.from,c=b.to,g=o(f.getString()),d=o(c.getString()),h=g.map(function(b,f){var c=d[f];return b+(c-b)*i}).join(' ');return h}}]),t}(cG),gw=as.f,aQ=aa.Symbol;if(aj&&'function'==typeof aQ&&(!('description' in aQ.prototype)||aQ().description!==void 0)){var fZ={},bM=function(){var a=1>arguments.length||void 0===arguments[0]?void 0:arguments[0]+'',b=this instanceof bM?new aQ(a):void 0===a?aQ():aQ(a);return ''===a&&(fZ[b]=!0),b};ek(bM,aQ);var c8=bM.prototype=aQ.prototype;c8.constructor=bM;var g1=c8.toString,hK='Symbol(test)'==aQ('test')+'',g$=/^Symbol\((.*)\)[^)]+$/;gw(c8,'description',{configurable:!0,get:function(){var a=ap(this)?this.valueOf():this,c=g1.call(a);if(ag(fZ,a)){return ''}var b=hK?c.slice(7,-1):c.replace(g$,'$1');return ''===b?void 0:b}}),af({global:!0,forced:!0},{Symbol:bM})}gf('iterator');var ft=function(a){function t(l,r,o){var b;f(this,t),b=ac(this,i(t).call(this,l,r,o)),b.type='font',b.glyphs={},b.horizAdvX=b.getAttribute('horiz-adv-x').getNumber();var p=l.definitions,s=bj(b),q=s.children,h=!0,k=!1,m=void 0;try{for(var g=q[Symbol.iterator](),j,d;!(h=(j=g.next()).done);h=!0){switch(d=j.value,d.type){case 'font-face':{b.fontFace=d;var n=d.getStyle('font-family');n.hasValue()&&(p[n.getString()]=bj(b));break};case 'missing-glyph':b.missingGlyph=d;break;case 'glyph':{var c=d;c.arabicForm?(b.isRTL=!0,b.isArabic=!0,'undefined'==typeof b.glyphs[c.unicode]&&(b.glyphs[c.unicode]={}),b.glyphs[c.unicode][c.arabicForm]=c):b.glyphs[c.unicode]=c;break};default:}}}catch(jd){k=!0,m=jd}finally{try{h||null==g['return']||g['return']()}finally{if(k){throw m}}}return b}return ad(t,a),j(t,[{key:'render',value:function(){}}]),t}(an),f7=function(a){function t(d,g,c){var b;return f(this,t),b=ac(this,i(t).call(this,d,g,c)),b.type='font-face',b.ascent=b.getAttribute('ascent').getNumber(),b.descent=b.getAttribute('descent').getNumber(),b.unitsPerEm=b.getAttribute('units-per-em').getNumber(),b}return ad(t,a),t}(an),fT=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='missing-glyph',b.horizAdvX=0,b}return ad(t,a),t}(aZ),fh=function(a){function t(d,g,c){var b;return f(this,t),b=ac(this,i(t).call(this,d,g,c)),b.type='glyph',b.horizAdvX=b.getAttribute('horiz-adv-x').getNumber(),b.unicode=b.getAttribute('unicode').getString(),b.arabicForm=b.getAttribute('arabic-form').getString(),b}return ad(t,a),t}(aZ),f3=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='tref',b}return ad(t,a),j(t,[{key:'getText',value:function(){var b=this.getHrefAttribute().getDefinition();if(b){var c=b.children[0];if(c){return c.getText()}}return ''}}]),t}(bv),fG=function(a){function t(j,g,h){var b;f(this,t),b=ac(this,i(t).call(this,j,g,h)),b.type='a';var c=g.childNodes,k=c[0],d=0<c.length&&Array.from(c).every(function(b){return 3===b.nodeType});return b.hasText=d,b.text=d?b.getTextFromNode(k):'',b}return ad(t,a),j(t,[{key:'getText',value:function(){return this.text}},{key:'renderChildren',value:function(b){if(this.hasText){a6(i(t.prototype),'renderChildren',this).call(this,b);var d=this.document,f=this.x,h=this.y,g=d.screen.mouse,j=new ab(d,'fontSize',aI.parse(d.ctx.font).fontSize);g.isWorking()&&g.checkBoundingBox(this,new aE(f,h-j.getPixels('y'),f+this.measureText(b),h))}else {if(0<this.children.length){var c=new ch(this.document,null);c.children=this.children,c.parent=this,c.render(b)}}}},{key:'onClick',value:function(){var b=this.document.window;b&&b.open(this.getHrefAttribute().getString())}},{key:'onMouseMove',value:function(){var b=this.document.ctx;b.canvas.style.cursor='pointer'}}]),t}(bv),iv=!ai(function(){return Object.isExtensible(Object.preventExtensions({}))}),bx=t(function(f){var h=as.f,a=cq('meta'),d=0,c=Object.isExtensible||function(){return !0},b=function(b){h(b,a,{value:{objectID:'O'+ ++d,weakData:{}}})},g=f.exports={REQUIRED:!1,fastKey:function(d,g){if(!ap(d)){return 'symbol'==typeof d?d:('string'==typeof d?'S':'P')+d}if(!ag(d,a)){if(!c(d)){return 'F'}if(!g){return 'E'}b(d)}return d[a].objectID},getWeakData:function(d,g){if(!ag(d,a)){if(!c(d)){return !0}if(!g){return !1}b(d)}return d[a].weakData},onFreeze:function(d){return iv&&g.REQUIRED&&c(d)&&!ag(d,a)&&b(d),d}};br[a]=!0}),i7=bx.REQUIRED,i4=bx.fastKey,i8=bx.getWeakData,i6=bx.onFreeze,h_=as.f,fY=bx.fastKey,gq=aB.set,dw=aB.getterFor,i5=function(c,n,m,g,d){var b=aa[c],f=b&&b.prototype,a=b,h=g?'set':'add',k={},i=function(a){var b=f[a];aA(f,a,'add'==a?function(f){return b.call(this,0===f?0:f),this}:'delete'==a?function(f){return (!d||ap(f))&&b.call(this,0===f?0:f)}:'get'==a?function(f){return d&&!ap(f)?void 0:b.call(this,0===f?0:f)}:'has'==a?function(f){return (!d||ap(f))&&b.call(this,0===f?0:f)}:function(f,h){return b.call(this,0===f?0:f,h),this})};if(bO(c,'function'!=typeof b||!(d||f.forEach&&!ai(function(){(new b()).entries().next()})))){a=m.getConstructor(n,c,g,h),bx.REQUIRED=!0}else {if(bO(c,!0)){var j=new a(),o=j[h](d?{}:-0,1)!=j,p=ai(function(){j.has(1)}),q=dn(function(a){new b(a)}),l=!d&&ai(function(){for(var f=new b(),a=5;a--;){f[h](a,a)}return !f.has(-0)});q||(a=n(function(j,i){cY(j,a,c);var f=ey(new b(),j,a);return null!=i&&cx(i,f[h],f,g),f}),a.prototype=f,f.constructor=a),(p||l)&&(i('delete'),i('has'),g&&i('get')),(l||o)&&i(h),d&&f.clear&&delete f.clear}}return k[c]=a,af({global:!0,forced:a!=b},k),bH(a,c),d||m.setStrong(a,c,g),a}('Map',function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},{getConstructor:function(i,d,f,h){var b=i(function(a,c){cY(a,b,d),gq(a,{type:d,index:a$(null),first:void 0,last:void 0,size:0}),aj||(a.size=0),null!=c&&cx(c,a[h],a,f)}),a=dw(d),g=function(j,m,n){var b=a(j),g=c(j,m),k,l;return g?g.value=n:(b.last=g={index:l=fY(m,!0),key:m,value:n,previous:k=b.last,next:void 0,removed:!1},!b.first&&(b.first=g),k&&(k.next=g),aj?b.size++:j.size++,'F'!==l&&(b.index[l]=g)),j},c=function(k,j){var g=a(k),c=fY(j),b;if('F'!==c){return g.index[c]}for(b=g.first;b;b=b.next){if(b.key==j){return b}}};return da(b.prototype,{clear:function(){for(var g=this,c=a(g),j=c.index,b=c.first;b;){b.removed=!0,b.previous&&(b.previous=b.previous.next=void 0),delete j[b.index],b=b.next}c.first=c.last=void 0,aj?c.size=0:g.size=0},'delete':function(m){var l=this,g=a(l),b=c(l,m);if(b){var k=b.next,j=b.previous;delete g.index[b.index],b.removed=!0,j&&(j.next=k),k&&(k.previous=j),g.first==b&&(g.first=k),g.last==b&&(g.last=j),aj?g.size--:l.size--}return !!b},forEach:function(c){for(var j=a(this),g=bG(c,1<arguments.length?arguments[1]:void 0,3),b;b=b?b.next:j.first;){for(g(b.value,b.key,this);b&&b.removed;){b=b.previous}}},has:function(a){return !!c(this,a)}}),da(b.prototype,f?{get:function(b){var a=c(this,b);return a&&a.value},set:function(a,b){return g(this,0===a?0:a,b)}}:{add:function(a){return g(this,a=0===a?0:a,a)}}),aj&&h_(b.prototype,'size',{get:function(){return a(this).size}}),b},setStrong:function(d,a,c){var b=a+' Iterator',g=dw(a),f=dw(b);dT(d,a,function(f,h){gq(this,{type:b,target:f,state:g(f),kind:h,last:void 0})},function(){for(var g=f(this),h=g.kind,b=g.last;b&&b.removed;){b=b.previous}return g.target&&(g.last=b=b?b.next:g.state.first)?'keys'==h?{value:b.key,done:!1}:'values'==h?{value:b.value,done:!1}:{value:[b.key,b.value],done:!1}:(g.target=void 0,{value:void 0,done:!0})},c?'entries':'values',!c,!0),e9(a)}},!0),fQ=function(a){function t(d,h,c){var b;f(this,t),b=ac(this,i(t).call(this,d,h,c)),b.type='textPath',b.textWidth=0,b.textHeight=0,b.pathLength=-1,b.glyphInfo=null,b.letterSpacingCache=[],b.measuresCache=new Map([['',0]]);var g=b.getHrefAttribute().getDefinition();return b.text=b.getTextFromNode(),b.dataArray=b.parsePathData(g),b}return ad(t,a),j(t,[{key:'getText',value:function(){return this.text}},{key:'path',value:function(b){var c=this.dataArray;b&&b.beginPath(),c.forEach(function(l){var o=l.command,c=l.points;switch(o){case 'L':b&&b.lineTo(c[0],c[1]);break;case 'M':b&&b.moveTo(c[0],c[1]);break;case 'C':b&&b.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case 'Q':b&&b.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case 'A':{var i=c[0],j=c[1],d=c[2],f=c[3],g=c[4],q=c[5],h=c[6],n=c[7],p=d>f?d:f,k=d>f?1:d/f,m=d>f?f/d:1;b&&(b.translate(i,j),b.rotate(h),b.scale(k,m),b.arc(0,0,p,g,g+q,!!(1-n)),b.scale(1/k,1/m),b.rotate(-h),b.translate(-i,-j));break};case 'z':b&&b.closePath();break;default:}})}},{key:'renderChildren',value:function(b){this.setTextData(b),b.save();var d=this.parent.getStyle('text-decoration').getString(),c=this.getFontSize(),f=this.glyphInfo,g=b.fillStyle;'underline'===d&&b.beginPath(),f.forEach(function(h,j){var g=h.p0,i=h.p1,k=h.text;b.save(),b.translate(g.x,g.y),b.rotate(f[j].rotation),b.fillStyle&&b.fillText(k,0,0),b.strokeStyle&&b.strokeText(k,0,0),b.restore(),'underline'===d&&(0===j&&b.moveTo(g.x,g.y+c/8),b.lineTo(i.x,i.y+c/5))}),'underline'===d&&(b.lineWidth=c/20,b.strokeStyle=g,b.stroke(),b.closePath()),b.restore()}},{key:'getLetterSpacingAt',value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[b]||0}},{key:'findSegmentToFitChar',value:function(j,n,g,d,m,l,h,f){var b=l,c=this.measureText(j,h);' '===h&&'justify'===n&&g<d&&(c+=(d-g)/m),-1<f&&(b+=this.getLetterSpacingAt(f));var i=this.textHeight/20,k={p0:this.getEquidistantPointOnPath(b,i),p1:this.getEquidistantPointOnPath(b+c,i)};return b+=c,{offset:b,segment:k}}},{key:'measureText',value:function(f,g){var c=this.measuresCache,b=g||this.getText();if(c.has(b)){return c.get(b)}var d=this.measureTargetText(f,b);return c.set(b,d),d}},{key:'setTextData',value:function(m){var f=this;if(!this.glyphInfo){var k=this.getText(),l=k.split(''),s=k.split(' ').length-1,n=o(this.parent.getAttribute('dx').getString('0')),d=this.parent.getStyle('text-anchor').getString('start'),b=this.getStyle('letter-spacing'),t=this.parent.getStyle('letter-spacing'),j=0;b.hasValue()&&'inherit'!==b.getValue()?b.hasValue()&&'initial'!==b.getValue()&&'unset'!==b.getValue()&&(j=b.getPixels()):j=t.getPixels();var h=[],r=k.length;this.letterSpacingCache=h;for(var g=0;g<r;g++){h.push('undefined'==typeof n[g]?j:n[g])}var q=h.reduce(function(b,c){return b+c||0},0);this.textWidth=this.measureText(m),this.textHeight=this.getFontSize();var i=aX(this.textWidth+q,0);this.glyphInfo=[];var p=this.getPathLength(),u=this.getStyle('startOffset').getNumber(0)*p,c=0;('middle'===d||'center'===d)&&(c=-i/2),('end'===d||'right'===d)&&(c=-i),c+=u,l.forEach(function(o,j){var h=f.findSegmentToFitChar(m,d,i,p,s,c,o,j),n=h.offset,b=h.segment;if(c=n,b.p0&&b.p1){var q=f.getLineLength(b.p0.x,b.p0.y,b.p1.x,b.p1.y),g=f.getPointOnLine(0+q/2,b.p0.x,b.p0.y,b.p1.x,b.p1.y),k=f8(b.p1.y-b.p0.y,b.p1.x-b.p0.x);f.glyphInfo.push({transposeX:g.x,transposeY:g.y,text:l[j],p0:b.p0,p1:b.p1,rotation:k})}})}}},{key:'parsePathData',value:function(i){if(this.pathLength=-1,!i){return []}var h=[],b=i.pathParser;for(b.reset();!b.isEnd();){var f=b.current,k=f?f.x:0,j=f?f.y:0,d='',c=[];b.nextCommand();var g=b.command.toUpperCase();switch(b.command){case 'M':case 'm':d=this.pathM(b,c);break;case 'L':case 'l':d=this.pathL(b,c);break;case 'H':case 'h':d=this.pathH(b,c);break;case 'V':case 'v':d=this.pathV(b,c);break;case 'C':case 'c':this.pathC(b,c);break;case 'S':case 's':d=this.pathS(b,c);break;case 'Q':case 'q':this.pathQ(b,c);break;case 'T':case 't':d=this.pathT(b,c);break;case 'A':case 'a':c=this.pathA(b);break;case 'Z':case 'z':b.current=b.start;break;default:}'Z'===g?h.push({command:'z',points:[],pathLength:0}):h.push({command:d||g,points:c,start:{x:k,y:j},pathLength:this.calcLength(k,j,d||g,c)})}return h}},{key:'pathM',value:function(b,f){var d=b.getAsCurrentPoint();for(f.push(d.x,d.y),b.start=b.current;!b.isCommandOrEnd();){var c=b.getAsCurrentPoint();return f.push(c.x,c.y),'L'}}},{key:'pathL',value:function(b,d){for(;!b.isCommandOrEnd();){var c=b.getAsCurrentPoint();d.push(c.x,c.y)}return 'L'}},{key:'pathH',value:function(b,f){for(;!b.isCommandOrEnd();){var d=b.current,c=new al((b.isRelativeCommand()?d.x:0)+b.getScalar(),d.y);f.push(c.x,c.y),b.current=c}return 'L'}},{key:'pathV',value:function(b,f){for(;!b.isCommandOrEnd();){var d=b.current,c=new al(d.x,(b.isRelativeCommand()?d.y:0)+b.getScalar());f.push(c.x,c.y),b.current=c}return 'L'}},{key:'pathC',value:function(b,g){for(;!b.isCommandOrEnd();){var d=b.getPoint(),c=b.getAsControlPoint(),f=b.getAsCurrentPoint();g.push(d.x,d.y,c.x,c.y,f.x,f.y)}}},{key:'pathS',value:function(b,g){for(;!b.isCommandOrEnd();){var d=b.getReflectedControlPoint(),c=b.getAsControlPoint(),f=b.getAsCurrentPoint();g.push(d.x,d.y,c.x,c.y,f.x,f.y)}return 'C'}},{key:'pathQ',value:function(b,f){for(;!b.isCommandOrEnd();){var d=b.getAsControlPoint(),c=b.getAsCurrentPoint();f.push(d.x,d.y,c.x,c.y)}}},{key:'pathT',value:function(b,f){for(;!b.isCommandOrEnd();){var c=b.getReflectedControlPoint();b.control=c;var d=b.getAsCurrentPoint();f.push(c.x,c.y,d.x,d.y)}return 'Q'}},{key:'pathA',value:function(i){for(;!i.isCommandOrEnd();){var l=i.current,d=i.getScalar(),c=i.getScalar(),g=i.getScalar()*(ax/180),t=i.getScalar(),n=i.getScalar(),k=i.getAsCurrentPoint(),b=new al(ay(g)*(l.x-k.x)/2+aw(g)*(l.y-k.y)/2,-aw(g)*(l.x-k.x)/2+ay(g)*(l.y-k.y)/2),o=ah(b.x,2)/ah(d,2)+ah(b.y,2)/ah(c,2);1<o&&(d*=ar(o),c*=ar(o));var m=(t===n?-1:1)*ar((ah(d,2)*ah(c,2)-ah(d,2)*ah(b.y,2)-ah(c,2)*ah(b.x,2))/(ah(d,2)*ah(b.y,2)+ah(c,2)*ah(b.x,2)));isNaN(m)&&(m=0);var f=new al(m*d*b.y/c,m*-c*b.x/d),r=new al((l.x+k.x)/2+ay(g)*f.x-aw(g)*f.y,(l.y+k.y)/2+aw(g)*f.x+ay(g)*f.y),s=x([1,0],[(b.x-f.x)/d,(b.y-f.y)/c]),p=[(b.x-f.x)/d,(b.y-f.y)/c],q=[(-b.x-f.x)/d,(-b.y-f.y)/c],j=x(p,q);return -1>=h(p,q)&&(j=ax),1<=h(p,q)&&(j=0),0===n&&0<j&&(j-=2*ax),1===n&&0>j&&(j+=2*ax),[r.x,r.y,d,c,s,j,g,n]}}},{key:'calcLength',value:function(j,k,o,b){var n=Math.abs,g=0,d=null,c=null,f=0;switch(o){case 'L':return this.getLineLength(j,k,b[0],b[1]);case 'C':for(g=0,d=this.getPointOnCubicBezier(0,j,k,b[0],b[1],b[2],b[3],b[4],b[5]),f=0.01;1>=f;f+=0.01){c=this.getPointOnCubicBezier(f,j,k,b[0],b[1],b[2],b[3],b[4],b[5]),g+=this.getLineLength(d.x,d.y,c.x,c.y),d=c};return g;case 'Q':for(g=0,d=this.getPointOnQuadraticBezier(0,j,k,b[0],b[1],b[2],b[3]),f=0.01;1>=f;f+=0.01){c=this.getPointOnQuadraticBezier(f,j,k,b[0],b[1],b[2],b[3]),g+=this.getLineLength(d.x,d.y,c.x,c.y),d=c};return g;case 'A':g=0;var l=b[4],m=b[5],i=b[4]+m,h=ax/180;if(n(l-i)<h&&(h=n(l-i)),d=this.getPointOnEllipticalArc(b[0],b[1],b[2],b[3],l,0),0>m){for(f=l-h;f>i;f-=h){c=this.getPointOnEllipticalArc(b[0],b[1],b[2],b[3],f,0),g+=this.getLineLength(d.x,d.y,c.x,c.y),d=c}}else {for(f=l+h;f<i;f+=h){c=this.getPointOnEllipticalArc(b[0],b[1],b[2],b[3],f,0),g+=this.getLineLength(d.x,d.y,c.x,c.y),d=c}};return c=this.getPointOnEllipticalArc(b[0],b[1],b[2],b[3],i,0),g+=this.getLineLength(d.x,d.y,c.x,c.y),g;default:}return 0}},{key:'getPointOnLine',value:function(k,b,c,d,m){var h=5<arguments.length&&void 0!==arguments[5]?arguments[5]:b,i=6<arguments.length&&void 0!==arguments[6]?arguments[6]:c,f=(m-c)/(d-b+a9),g=ar(k*k/(1+f*f));d<b&&(g*=-1);var j=f*g,l=null;if(d===b){l={x:h,y:i+j}}else {if((i-c)/(h-b+a9)===f){l={x:h+g,y:i+j}}else {var n=0,p=0,q=this.getLineLength(b,c,d,m);if(q<a9){return null}var o=(h-b)*(d-b)+(i-c)*(m-c);o/=q*q,n=b+o*(d-b),p=c+o*(m-c);var r=this.getLineLength(h,i,n,p),s=ar(k*k-r*r);g=ar(s*s/(1+f*f)),d<b&&(g*=-1),j=f*g,l={x:n+g,y:p+j}}}return l}},{key:'getPointOnPath',value:function(f){var q=this.getPathLength(),j=0,d=null;if(-5.0E-5>f||f-5.0E-5>q){return null}var p=this.dataArray,i=!0,o=!1,n=void 0;try{for(var k=p[Symbol.iterator](),l,b;!(i=(l=k.next()).done);i=!0){if(b=l.value,b&&(5.0E-5>b.pathLength||j+b.pathLength+5.0E-5<f)){j+=b.pathLength;continue}var g=f-j,c=0;switch(b.command){case 'L':d=this.getPointOnLine(g,b.start.x,b.start.y,b.points[0],b.points[1],b.start.x,b.start.y);break;case 'A':var r=b.points[4],h=b.points[5],m=b.points[4]+h;if(c=r+g/b.pathLength*h,0>h&&c<m||0<=h&&c>m){break};d=this.getPointOnEllipticalArc(b.points[0],b.points[1],b.points[2],b.points[3],c,b.points[6]);break;case 'C':c=g/b.pathLength,1<c&&(c=1),d=this.getPointOnCubicBezier(c,b.start.x,b.start.y,b.points[0],b.points[1],b.points[2],b.points[3],b.points[4],b.points[5]);break;case 'Q':c=g/b.pathLength,1<c&&(c=1),d=this.getPointOnQuadraticBezier(c,b.start.x,b.start.y,b.points[0],b.points[1],b.points[2],b.points[3]);break;default:}if(d){return d}break}}catch(jd){o=!0,n=jd}finally{try{i||null==k['return']||k['return']()}finally{if(o){throw n}}}return null}},{key:'getLineLength',value:function(c,f,d,b){return ar((d-c)*(d-c)+(b-f)*(b-f))}},{key:'getPathLength',value:function(){return -1===this.pathLength&&(this.pathLength=this.dataArray.reduce(function(b,c){return 0<c.pathLength?b+c.pathLength:b},0)),this.pathLength}},{key:'getPointOnCubicBezier',value:function(c,n,i,d,l,g,j,h,m){var f=h*b(c)+g*v(c)+d*k(c)+n*S(c),o=m*b(c)+j*v(c)+l*k(c)+i*S(c);return {x:f,y:o}}},{key:'getPointOnQuadraticBezier',value:function(b,k,g,c,i,d,h){var f=d*P(b)+c*A(b)+k*E(b),j=h*P(b)+i*A(b)+g*E(b);return {x:f,y:j}}},{key:'getPointOnEllipticalArc',value:function(i,k,j,h,g,c){var f=ay(c),d=aw(c),b={x:j*ay(g),y:h*aw(g)};return {x:i+(b.x*f-b.y*d),y:k+(b.x*d+b.y*f)}}},{key:'buildEquidistantCache',value:function(j,k){var i=this.getPathLength(),d=k||0.25,f=j||i/100;if(!this.equidistantCache||this.equidistantCache.step!==f||this.equidistantCache.precision!==d){this.equidistantCache={step:f,precision:d,points:[]};for(var g=0,c=0;c<=i;c+=d){var b=this.getPointOnPath(c),h=this.getPointOnPath(c+d);b&&h&&(g+=this.getLineLength(b.x,b.y,h.x,h.y),g>=f&&(this.equidistantCache.points.push({x:b.x,y:b.y,distance:c}),g-=f))}}}},{key:'getEquidistantPointOnPath',value:function(b,f,d){if(this.buildEquidistantCache(f,d),0>b||5.0E-5<b-this.getPathLength()){return null}var c=fl(b/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[c]||null}}]),t}(bv),gl=function(a){function t(d,j,h){var b;f(this,t),b=ac(this,i(t).call(this,d,j,h)),b.type='image',b.loaded=!1;var c=b.getHrefAttribute().getString();if(!c){return ac(b)}var g=/\.svg$/.test(c);return d.images.push(bj(b)),g?b.loadSvg(c):b.loadImage(c),b.isSvg=g,b}return ad(t,a),j(t,[{key:'loadImage',value:function(){var b=aO(aq.mark(function b(d){var c;return aq.wrap(function(b){for(;;){switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,this.document.createImage(d);case 3:c=b.sent,this.image=c,b.next=10;break;case 7:b.prev=7,b.t0=b['catch'](0),console.error('ERROR: image "'.concat(d,'" not found'),b.t0);case 10:this.loaded=!0;case 11:case 'end':return b.stop();}}},b,this,[[0,7]])}));return function(){return b.apply(this,arguments)}}()},{key:'loadSvg',value:function(){var b=aO(aq.mark(function b(f){var d,c;return aq.wrap(function(b){for(;;){switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,this.document.fetch(f);case 3:return d=b.sent,b.next=6,d.text();case 6:c=b.sent,this.image=c,b.next=13;break;case 10:b.prev=10,b.t0=b['catch'](0),console.error('ERROR: image "'.concat(f,'" not found'),b.t0);case 13:this.loaded=!0;case 14:case 'end':return b.stop();}}},b,this,[[0,10]])}));return function(){return b.apply(this,arguments)}}()},{key:'renderChildren',value:function(b){var i=this.document,h=this.getAttribute('x').getPixels('x'),g=this.getAttribute('y').getPixels('y'),f=this.getAttribute('width').getPixels('x'),d=this.getAttribute('height').getPixels('y');if(f&&d){if(b.save(),this.isSvg){i.canvg.forkString(b,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:h,offsetY:g,scaleWidth:f,scaleHeight:d}).render()}else {var c=this.image;b.translate(h,g),i.setViewBox({ctx:b,aspectRatio:this.getAttribute('preserveAspectRatio').getString(),width:f,desiredWidth:c.width,height:d,desiredHeight:c.height}),this.loaded&&('undefined'==typeof c.complete||c.complete)&&b.drawImage(c,0,0)}b.restore()}}},{key:'getBoundingBox',value:function(){var b=this.getAttribute('x').getPixels('x'),c=this.getAttribute('y').getPixels('y'),f=this.getAttribute('width').getPixels('x'),d=this.getAttribute('height').getPixels('y');return new aE(b,c,b+f,c+d)}}]),t}(a4),fk=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='symbol',b}return ad(t,a),j(t,[{key:'render',value:function(){}}]),t}(a4),ge=function(){function e(a){f(this,e),this.document=a,this.loaded=!1,a.fonts.push(this)}return j(e,[{key:'load',value:function(){var a=aO(aq.mark(function a(g,d){var b,f,c;return aq.wrap(function(a){for(;;){switch(a.prev=a.next){case 0:return a.prev=0,b=this.document,a.next=4,b.canvg.parser.load(d);case 4:f=a.sent,c=f.getElementsByTagName('font'),Array.from(c).forEach(function(c){var f=b.createElement(c);b.definitions[g]=f}),a.next=12;break;case 9:a.prev=9,a.t0=a['catch'](0),console.error('ERROR: font "'.concat(d,'" not found'),a.t0);case 12:this.loaded=!0;case 13:case 'end':return a.stop();}}},a,this,[[0,9]])}));return function(){return a.apply(this,arguments)}}()}]),e}(),dD=function(a){function t(b,d,j){var c;f(this,t),c=ac(this,i(t).call(this,b,d,j)),c.type='style';var h=n(Array.from(d.childNodes).map(function(c){return c.data}).join('').replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,'')),g=h.split('}');return g.forEach(function(i){var f=i.trim();if(f){var c=f.split('{'),h=c[0].split(','),g=c[1].split(';');h.forEach(function(l){var c=l.trim();if(c){var f=b.styles[c]||{};if(g.forEach(function(c){var g=c.indexOf(':'),h=c.substr(0,g).trim(),k=c.substr(g+1,c.length-g).trim();h&&k&&(f[h]=new ab(b,h,k))}),b.styles[c]=f,b.stylesSpecificity[c]=p(c),'@font-face'===c){var k=f['font-family'].getString().replace(/"|'/g,''),h=f.src.getString().split(',');h.forEach(function(f){if(0<f.indexOf('format("svg")')){var c=s(f);c&&(new ge(b)).load(k,c)}})}}})}}),c}return ad(t,a),t}(an);dD.parseExternalUrl=s;var eP=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='use',b}return ad(t,a),j(t,[{key:'setContext',value:function(b){a6(i(t.prototype),'setContext',this).call(this,b);var d=this.getAttribute('x'),c=this.getAttribute('y');d.hasValue()&&b.translate(d.getPixels('x'),0),c.hasValue()&&b.translate(0,c.getPixels('y'))}},{key:'path',value:function(c){var b=this.element;b&&b.path(c)}},{key:'renderChildren',value:function(g){var d=this.document,c=this.element;if(c){var b=c;if('symbol'===c.type&&(b=new bt(d,null),b.attributes.viewBox=new ab(d,'viewBox',c.getAttribute('viewBox').getString()),b.attributes.preserveAspectRatio=new ab(d,'preserveAspectRatio',c.getAttribute('preserveAspectRatio').getString()),b.attributes.overflow=new ab(d,'overflow',c.getAttribute('overflow').getString()),b.children=c.children),'svg'===b.type){var i=this.getAttribute('width'),f=this.getAttribute('height');i.hasValue()&&(b.attributes.width=new ab(d,'width',this.getAttribute('width').getString())),f.hasValue()&&(b.attributes.height=new ab(d,'height',f.getString()))}var h=b.parent;b.parent=null,b.render(g),b.parent=h}}},{key:'getBoundingBox',value:function(c){var b=this.element;return b?b.getBoundingBox(c):null}},{key:'elementTransform',value:function(){var b=this.document,c=this.element;return b_.fromElement(b,c)}},{key:'element',get:function(){return this._element||(this._element=this.getHrefAttribute().getDefinition()),this._element}}]),t}(a4),c6=function(a){function t(h,j,k){var d;f(this,t),d=ac(this,i(t).call(this,h,j,k)),d.type='feColorMatrix';var g=o(d.getAttribute('values').getString());switch(d.getAttribute('type').getString('matrix')){case 'saturate':{var b=g[0];g=[0.213+0.787*b,0.715-0.715*b,0.072-0.072*b,0,0,0.213-0.213*b,0.715+0.285*b,0.072-0.072*b,0,0,0.213-0.213*b,0.715-0.715*b,0.072+0.928*b,0,0,0,0,0,1,0,0,0,0,0,1];break};case 'hueRotate':{var c=g[0]*ax/180;g=[m(c,0.213,0.787,-0.213),m(c,0.715,-0.715,-0.715),m(c,0.072,-0.072,0.928),0,0,m(c,0.213,-0.213,0.143),m(c,0.715,0.285,0.14),m(c,0.072,-0.072,-0.283),0,0,m(c,0.213,-0.213,-0.787),m(c,0.715,-0.715,0.715),m(c,0.072,0.928,0.072),0,0,0,0,0,1,0,0,0,0,0,1];break};case 'luminanceToAlpha':g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0,1];break;default:}return d.matrix=g,d.includeOpacity=d.getAttribute('includeOpacity').hasValue(),d}return ad(t,a),j(t,[{key:'apply',value:function(m,t,s,c,d){for(var r=this.includeOpacity,b=this.matrix,h=m.getImageData(0,0,c,d),g=0;g<d;g++){for(var f=0;f<c;f++){var k=Q(h.data,f,g,c,d,0),l=Q(h.data,f,g,c,d,1),j=Q(h.data,f,g,c,d,2),i=Q(h.data,f,g,c,d,3),n=Z(b,0,k)+Z(b,1,l)+Z(b,2,j)+Z(b,3,i)+Z(b,4,1),p=Z(b,5,k)+Z(b,6,l)+Z(b,7,j)+Z(b,8,i)+Z(b,9,1),q=Z(b,10,k)+Z(b,11,l)+Z(b,12,j)+Z(b,13,i)+Z(b,14,1),o=Z(b,15,k)+Z(b,16,l)+Z(b,17,j)+Z(b,18,i)+Z(b,19,1);r&&(n=p=q=0,o*=i/255),K(h.data,f,g,c,d,0,n),K(h.data,f,g,c,d,1,p),K(h.data,f,g,c,d,2,q),K(h.data,f,g,c,d,3,o)}}m.clearRect(0,0,c,d),m.putImageData(h,0,0)}}]),t}(an),dY=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='mask',b}return ad(t,a),j(t,[{key:'apply',value:function(l,j){var i=this.document,d=this.getAttribute('x').getPixels('x'),g=this.getAttribute('y').getPixels('y'),b=this.getAttribute('width').getPixels('x'),c=this.getAttribute('height').getPixels('y');if(!b&&!c){var h=new aE();this.children.forEach(function(b){h.addBoundingBox(b.getBoundingBox(l))}),d=az(h.x1),g=az(h.y1),b=az(h.width),c=az(h.height)}var p=j.getStyle('mask').getString();j.getStyle('mask').setValue('');var m=i.createCanvas(d+b,g+c),k=m.getContext('2d');i.screen.setDefaults(k),this.renderChildren(k);var o=new c6(i,{nodeType:1,childNodes:[],attributes:[{nodeName:'type',value:'luminanceToAlpha'},{nodeName:'includeOpacity',value:'true'}]});o.apply(k,0,0,d+b,g+c);var n=i.createCanvas(d+b,g+c),f=n.getContext('2d');i.screen.setDefaults(f),j.render(f),f.globalCompositeOperation='destination-in',f.fillStyle=k.createPattern(m,'no-repeat'),f.fillRect(0,0,d+b,g+c),l.fillStyle=f.createPattern(n,'no-repeat'),l.fillRect(0,0,d+b,g+c),j.getStyle('mask').setValue(p)}},{key:'render',value:function(){}}]),t}(an),cQ=a5('Reflect','apply'),hw=Function.apply,gG=!ai(function(){cQ(function(){})});af({target:'Reflect',stat:!0,forced:gG},{apply:function(a,c,b){return aT(a),am(b),cQ?cQ(a,c,b):hw.call(a,c,b)}}),af({target:'Reflect',stat:!0,sham:!dV},{getPrototypeOf:function(a){return bN(am(a))}});var gh=function(){},eF=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='clipPath',b}return ad(t,a),j(t,[{key:'apply',value:function(b){var g=this.document,c=Reflect.getPrototypeOf(b),f=b.beginPath,d=b.closePath;c&&(c.beginPath=gh,c.closePath=gh),Reflect.apply(f,b,[]),this.children.forEach(function(h){if('undefined'!=typeof h.path){var f='undefined'==typeof h.elementTransform?null:h.elementTransform();f||(f=b_.fromElement(g,h)),f&&f.apply(b),h.path(b),c&&(c.closePath=d),f&&f.unapply(b)}}),Reflect.apply(d,b,[]),b.clip(),c&&(c.beginPath=f,c.closePath=d)}},{key:'render',value:function(){}}]),t}(an),e0=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='filter',b}return ad(t,a),j(t,[{key:'apply',value:function(j,d){var m=this.document,f=d.getBoundingBox(j),n=az(f.x1),l=az(f.y1),i=az(f.width),h=az(f.height),o=d.getStyle('filter').getString();d.getStyle('filter').setValue('');var b=0,c=0;this.children.forEach(function(g){var f=g.extraFilterDistance||0;b=aX(b,f),c=aX(c,f)});var k=m.createCanvas(i+2*b,h+2*c),g=k.getContext('2d');m.screen.setDefaults(g),g.translate(-n+b,-l+c),d.render(g),this.children.forEach(function(f){'function'==typeof f.apply&&f.apply(g,0,0,i+2*b,h+2*c)}),j.drawImage(k,0,0,i+2*b,h+2*c,n-b,l-c,i+2*b,h+2*c),d.getStyle('filter',!0).setValue(o)}},{key:'render',value:function(){}}]),t}(an),eA=function(a){function t(d,g,c){var b;return f(this,t),b=ac(this,i(t).call(this,d,g,c)),b.type='feDropShadow',b.addStylesFromStyleDefinition(),b}return ad(t,a),j(t,[{key:'apply',value:function(){}}]),t}(an),eO=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='feMorphology',b}return ad(t,a),j(t,[{key:'apply',value:function(){}}]),t}(an),eq=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='feComposite',b}return ad(t,a),j(t,[{key:'apply',value:function(){}}]),t}(an),gJ=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ha=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],eC=function e(){J(this,e),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},d0=function(a){function t(d,g,c){var b;return f(this,t),b=ac(this,i(t).call(this,d,g,c)),b.type='feGaussianBlur',b.blurRadius=az(b.getAttribute('stdDeviation').getNumber()),b.extraFilterDistance=b.blurRadius,b}return ad(t,a),j(t,[{key:'apply',value:function(g,k,h,f,j){var d=this.document,i=this.blurRadius,c=d.window?d.window.document.body:null,b=g.canvas;b.id=d.getUniqueId(),c&&(b.style.display='none',c.appendChild(b)),te(b,k,h,f,j,i),c&&c.removeChild(b)}}]),t}(an),gu=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='title',b}return ad(t,a),t}(an),fc=function(a){function t(){var b;return f(this,t),b=ac(this,i(t).apply(this,arguments)),b.type='desc',b}return ad(t,a),t}(an),bE=function(){function e(h){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},b=a.rootEmSize,j=void 0===b?12:b,d=a.emSize,i=void 0===d?12:d,g=a.createCanvas,k=void 0===g?e.createCanvas:g,c=a.createImage,l=void 0===c?e.createImage:c;f(this,e),this.canvg=h,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=h.screen,this.rootEmSize=j,this.emSize=i,this.createCanvas=k,this.createImage=l,this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}return j(e,[{key:'popEmSize',value:function(){var a=this.emSizeStack;a.pop()}},{key:'getUniqueId',value:function(){return 'canvg'.concat(++this.uniqueId)}},{key:'isImagesLoaded',value:function(){return this.images.every(function(a){return a.loaded})}},{key:'isFontsLoaded',value:function(){return this.fonts.every(function(a){return a.loaded})}},{key:'createDocumentElement',value:function(b){var a=this.createElement(b.documentElement);return a.root=!0,a.addStylesFromStyleDefinition(),this.documentElement=a,a}},{key:'createElement',value:function(a){var c=a.nodeName.replace(/^[^:]+:/,''),b=e.elementTypes[c];return 'undefined'==typeof b?new fL(this,a):new b(this,a)}},{key:'createTextNode',value:function(a){return new dJ(this,a)}},{key:'setViewBox',value:function(a){this.screen.setViewBox(re({document:this},a))}},{key:'window',get:function(){return this.screen.window}},{key:'fetch',get:function(){return this.screen.fetch}},{key:'ctx',get:function(){return this.screen.ctx}},{key:'emSize',get:function(){var a=this.emSizeStack;return a[a.length-1]},set:function(a){var b=this.emSizeStack;b.push(a)}}]),e}();bE.createCanvas=function(b,c){var a=document.createElement('canvas');return a.width=b,a.height=c,a},bE.createImage=ie,bE.elementTypes={svg:bt,rect:dm,circle:fW,ellipse:gn,line:fA,polyline:ds,polygon:fO,path:aZ,pattern:fi,marker:gb,defs:fK,linearGradient:dW,radialGradient:ed,stop:eR,animate:cG,animateColor:e6,animateTransform:eY,font:ft,'font-face':f7,'missing-glyph':fT,glyph:fh,text:bv,tspan:dJ,tref:f3,a:fG,textPath:fQ,image:gl,g:ch,symbol:fk,style:dD,use:eP,mask:dY,clipPath:eF,filter:e0,feDropShadow:eA,feMorphology:eO,feComposite:eq,feColorMatrix:c6,feGaussianBlur:d0,title:gu,desc:fc};var fI=function(){function e(g,d){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};f(this,e),this.parser=new cc(a),this.screen=new b2(g,a),this.options=a;var b=new bE(this,a),c=b.createDocumentElement(d);this.document=b,this.documentElement=c}return j(e,[{key:'fork',value:function(c,b){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return e.from(c,b,se({},this.options,{},a))}},{key:'forkString',value:function(c,b){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return e.fromString(c,b,se({},this.options,{},a))}},{key:'ready',value:function(){return this.screen.ready()}},{key:'isReady',value:function(){return this.screen.isReady()}},{key:'render',value:function(){var a=aO(aq.mark(function a(){var b=arguments,c;return aq.wrap(function(a){for(;;){switch(a.prev=a.next){case 0:return c=0<b.length&&void 0!==b[0]?b[0]:{},this.start(se({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},c)),a.next=4,this.ready();case 4:this.stop();case 5:case 'end':return a.stop();}}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:'start',value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=this.documentElement,c=this.screen,a=this.options;c.start(d,se({enableRedraw:!0},a,{},b))}},{key:'stop',value:function(){this.screen.stop()}},{key:'resize',value:function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a,b=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];this.documentElement.resize(a,c,b)}}],[{key:'from',value:function(){var a=aO(aq.mark(function a(h,g){var c=arguments,b,f,d;return aq.wrap(function(a){for(;;){switch(a.prev=a.next){case 0:return b=2<c.length&&void 0!==c[2]?c[2]:{},f=new cc(b),a.next=4,f.parse(g);case 4:return d=a.sent,a.abrupt('return',new e(h,d,b));case 6:case 'end':return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}()},{key:'fromString',value:function(f,c){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=new cc(a),b=d.parseFromString(c);return new e(f,b,a)}}]),e}(),gR=Object.freeze({__proto__:null,offscreen:function(){return {window:null,ignoreAnimation:!0,ignoreMouse:!0,createCanvas:function(a,b){return new OffscreenCanvas(a,b)},createImage:function(){var a=aO(aq.mark(function a(f){var c,b,d;return aq.wrap(function(a){for(;;){switch(a.prev=a.next){case 0:return a.next=2,fetch(f);case 2:return c=a.sent,a.next=5,c.blob();case 5:return b=a.sent,a.next=8,createImageBitmap(b);case 8:return d=a.sent,a.abrupt('return',d);case 10:case 'end':return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}()}},node:function(a){var d=a.DOMParser,b=a.canvas,c=a.fetch;return {window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:d,fetch:c,createCanvas:b.createCanvas,createImage:b.loadImage}}});e.AElement=fG,e.AnimateColorElement=e6,e.AnimateElement=cG,e.AnimateTransformElement=eY,e.BoundingBox=aE,e.CB1=b,e.CB2=v,e.CB3=k,e.CB4=S,e.Canvg=fI,e.CircleElement=fW,e.ClipPathElement=eF,e.DefsElement=fK,e.DescElement=fc,e.Document=bE,e.Element=an,e.EllipseElement=gn,e.FeColorMatrixElement=c6,e.FeCompositeElement=eq,e.FeDropShadowElement=eA,e.FeGaussianBlurElement=d0,e.FeMorphologyElement=eO,e.FilterElement=e0,e.Font=aI,e.FontElement=ft,e.FontFaceElement=f7,e.GElement=ch,e.GlyphElement=fh,e.GradientElement=c5,e.ImageElement=gl,e.LineElement=fA,e.LinearGradientElement=dW,e.MarkerElement=gb,e.MaskElement=dY,e.Matrix=dp,e.MissingGlyphElement=fT,e.Mouse=ef,e.PSEUDO_ZERO=a9,e.Parser=cc,e.PathElement=aZ,e.PathParser=fo,e.PatternElement=fi,e.Point=al,e.PolygonElement=fO,e.PolylineElement=ds,e.Property=ab,e.QB1=P,e.QB2=A,e.QB3=E,e.RadialGradientElement=ed,e.RectElement=dm,e.RenderedElement=a4,e.Rotate=fa,e.SVGElement=bt,e.SVGFontLoader=ge,e.Scale=er,e.Screen=b2,e.Skew=dM,e.SkewX=fR,e.SkewY=fd,e.StopElement=eR,e.StyleElement=dD,e.SymbolElement=fk,e.TRefElement=f3,e.TSpanElement=dJ,e.TextElement=bv,e.TextPathElement=fQ,e.TitleElement=gu,e.Transform=b_,e.Translate=ev,e.UnknownElement=fL,e.UseElement=eP,e.ViewPort=eI,e.compressSpaces=n,e['default']=fI,e.getSelectorSpecificity=p,e.normalizeAttributeName=l,e.parseExternalUrl=s,e.presets=gR,e.toNumbers=o,e.trimLeft=a,e.trimRight=r,e.vectorMagnitude=y,e.vectorsAngle=x,e.vectorsRatio=h,Object.defineProperty(e,'__esModule',{value:!0})});Ext.application({name:'Bigmedia',extend:Bigmedia.Application});"use strict";var _get=function get(a,c,d){if(a===null){a=Function.prototype;}var b=Object.getOwnPropertyDescriptor(a,c);if(b===undefined){var f=Object.getPrototypeOf(a);if(f===null){return undefined}else {return get(f,c,d)}}else if("value" in b){return b.value}else {var e=b.get;if(e===undefined){return undefined}return e.call(d)}};var _createClass=function(){function defineProperties(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1;a.configurable=!0;if("value" in a){a.writable=!0;}Object.defineProperty(d,a.key,a)}}return function(a,c,b){if(c){defineProperties(a.prototype,c);}if(b){defineProperties(a,b);}return a}}();var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _possibleConstructorReturn(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a&&(typeof a==="object"||typeof a==="function")?a:b}function _inherits(b,a){if(typeof a!=="function"&&a!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});if(a){Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a;}}function _classCallCheck(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else {a[b]=c}return a}(function(b){if((typeof exports==="undefined"?"undefined":_typeof(exports))==="object"&&typeof module!=="undefined"){module.exports=b()}else if(typeof define==="function"&&define.amd){define([],b)}else {var a;if(typeof window!=="undefined"){a=window}else if(typeof global!=="undefined"){a=global}else if(typeof self!=="undefined"){a=self}else {a=this}a.Fashion=b()}})(function(){var b,c,a;return function(){function r(a,b,d){function o(c,i){if(!b[c]){if(!a[c]){var h="function"==typeof require&&require;if(!i&&h){return h(c,!0);}if(e){return e(c,!0);}var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var f=b[c]={exports:{}};a[c][0].call(f.exports,function(e){var f=a[c][1][e];return o(f||e)},f,f.exports,r,a,b,d)}return b[c].exports}for(var e="function"==typeof require&&require,c=0;c<d.length;c++){o(d[c])}return o}return r}()({1:[function(a,e,g){var b;var c=a('./src/export/Base.js');var d=a('./src/export/css/CssVariableManager.js'),f=new d();c.apply(c,(b={css:f,CssExport:d,Types:a('./src/export/type/Types.js'),ValueParser:a('./src/export/parse/ValueParser.js'),Type:a('./src/export/type/Type.js'),Bool:a('./src/export/type/Bool.js'),Literal:a('./src/export/type/Literal.js'),ParentheticalExpression:a('./src/export/type/ParentheticalExpression.js'),Text:a('./src/export/type/Text.js'),Numeric:a('./src/export/type/Numeric.js'),List:a('./src/export/type/List.js'),Map:a('./src/export/type/Map.js'),Color:a('./src/export/type/Color.js'),ColorRGBA:a('./src/export/type/ColorRGBA.js'),ColorHSLA:a('./src/export/type/ColorHSLA.js'),ColorStop:a('./src/export/type/ColorStop.js'),FunctionCall:a('./src/export/type/FunctionCall.js'),LinearGradient:a('./src/export/type/LinearGradient.js'),RadialGradient:a('./src/export/type/RadialGradient.js'),Statics:a('./src/export/type/Statics.js'),SourceBuilder:a('./src/export/type/SourceBuilder.js')},_defineProperty(b,"Types",a('./src/export/type/Types.js')),_defineProperty(b,"TypeVisitor",a('./src/export/type/TypeVisitor.js')),_defineProperty(b,"Output",a('./src/export/Output.js')),_defineProperty(b,"Runtime",a('./src/export/Runtime.js')),b));e.exports=c},{"./src/export/Base.js":3,"./src/export/Output.js":4,"./src/export/Runtime.js":5,"./src/export/css/CssVariableManager.js":6,"./src/export/parse/ValueParser.js":7,"./src/export/type/Bool.js":8,"./src/export/type/Color.js":9,"./src/export/type/ColorHSLA.js":10,"./src/export/type/ColorRGBA.js":11,"./src/export/type/ColorStop.js":12,"./src/export/type/FunctionCall.js":13,"./src/export/type/LinearGradient.js":14,"./src/export/type/List.js":15,"./src/export/type/Literal.js":16,"./src/export/type/Map.js":17,"./src/export/type/Numeric.js":18,"./src/export/type/ParentheticalExpression.js":19,"./src/export/type/RadialGradient.js":20,"./src/export/type/SourceBuilder.js":21,"./src/export/type/Statics.js":22,"./src/export/type/Text.js":23,"./src/export/type/Type.js":24,"./src/export/type/TypeVisitor.js":25,"./src/export/type/Types.js":26}],2:[function(e,c,d){"use strict";function getJsName(a){return a.replace(/\-/g,'_').replace(/\//g,'_fs_').replace(/\\/g,'_bs_')}var a=function(){function NameConverter(){_classCallCheck(this,NameConverter);this.variableNameMap={}}_createClass(NameConverter,[{key:"convertName",value:function convertName(b){var f=this.variableNameMap,a=f[b];if(a===undefined){a=f[b]=getJsName(b)}return a}}]);return NameConverter}();var b=new a();c.exports={NameConverter:a,getJsName:function getJsName(a){return b.convertName(a)}}},{}],3:[function(e,f,h){"use strict";var d=e('./../NameConverter.js');var b={trace:!1};var a=function a(b){_classCallCheck(this,a);if(b){merge(this,b)}};var c=function(){function BaseSet(){_classCallCheck(this,BaseSet)}_createClass(BaseSet,[{key:"first",value:function first(){return _first(this.items)}},{key:"last",value:function last(){return _last(this.items)}},{key:"tail",value:function tail(){return _tail(this.items)}}]);return BaseSet}();c.prototype.items=null;function _chainFunc(){}function apply(a,b){a=a||{};if(b){for(var c in b){a[c]=b[c]}}return a}function merge(a,g){a=a||{};var c,b,d;if(g){for(c in g){b=g[c];if(b&&b.constructor===Object){d=a[c];if(d&&d.constructor===Object){merge(d,b)}else {a[c]=b}}else {a[c]=b}}}return a}var g=Object.create||function(a){_chainFunc.prototype=a;return new _chainFunc()};function createMessage(b,a){if(a&&a.isFashionScanner){b+=': '+a.currentFile+':'+a.lineNumber}else if(a){b+=': '+a.file+':'+a.lineNumber}return b}function isFunction(a){return a&&typeof a==='function'}function trace(a,c){if(b.trace){console.log(createMessage('[DBG] '+a,c))}}function debug(a,b){console.log(createMessage('[DBG] '+a,b))}function log(a,b){console.log(createMessage('[LOG] '+a,b))}function info(a,b){console.log(createMessage('[INF] '+a,b))}function warn(a,b){console.log(createMessage('[WRN] '+a,b))}function error(a,b){console.log(createMessage('[ERR] '+a,b))}function raise(a,b){if(Fashion.inspect){debugger}if(typeof a!=='string'){b=a;a=b.message;delete b.message}var c=new Error(a);c.$isFashionError=!0;throw apply(c,b)}function raiseAt(c,a,d){var b;if(a){c=createMessage(c,a);if(a.isFashionScanner){b={file:a.currentFile,lineNumber:a.lineNumber}}else {b={node:a,lineNumber:a.lineNumber,file:a.file}}}if(d){if(!b){b={}}b.fashionStack=d}raise(c,b)}function filter(c,g){var b=[];for(var a=0;a<c.length;a++){var d=c[a];if(g(d,a)){b.push(d)}}return b}function convert(c,d){var b=[];for(var a=0;a<c.length;a++){b.push(d(c[a]))}return b}function _first(a){return a.length&&a[0]}function _last(a){return a.length&&a[a.length-1]}function _tail(a){if(a.length>2){return a.slice(1)}return []}function getAllKeys(a,k){var g=[],i={},c,b,j,d;for(;a&&a!==k;a=Object.getPrototypeOf(a)){d=Object.getOwnPropertyNames(a);for(c=0,j=d.length;c<j;++c){b=d[c];if(!i[b]){i[b]=!0;g.push(b)}}}return g}function mixin(i,b){if(!Array.isArray(b)){b=Array.prototype.slice.call(arguments,1)}var g=i.prototype;for(var d=0;d<b.length;d++){var j=b[d],c=j.prototype;getAllKeys(c,a.prototype).forEach(function(a){if(a in c){if(!(a in g)){g[a]=c[a]}}})}}function flatten(g,b,a){a=a||[];b=typeof b==='undefined'?1000:b;for(var d=0;d<g.length;d++){var c=g[d];if(Array.isArray(c)&&b){flatten(c,b-1,a)}else {a.push(c)}}return a}f.exports={EmptyArray:[],getJsName:d.getJsName,chain:g,Base:a,BaseSet:c,apply:apply,merge:merge,createMessage:createMessage,isFunction:isFunction,debugging:b,trace:trace,debug:debug,log:log,info:info,warn:warn,error:error,raise:raise,raiseAt:raiseAt,filter:filter,convert:convert,first:_first,last:_last,tail:_tail,mixin:mixin,flatten:flatten}},{"./../NameConverter.js":2}],4:[function(c,d,f){"use strict";var a=c('./Base.js'),e=a.Base;var b=function(a){_inherits(Output,a);function Output(){_classCallCheck(this,Output);var b=_possibleConstructorReturn(this,(Output.__proto__||Object.getPrototypeOf(Output)).call(this));b.output='';return b}_createClass(Output,[{key:"space",value:function space(){this.add(' ')}},{key:"add",value:function add(b){this.output+=b}},{key:"addComment",value:function addComment(b){this.output+=b}},{key:"indent",value:function indent(){this.indentation+=this.indentstr}},{key:"unindent",value:function unindent(){this.indentation=this.indentation.substr(this.indentstr.length)}},{key:"addln",value:function addln(b){this.output+='\n'+this.indentation+(b||'')}},{key:"addCommentLn",value:function addCommentLn(b){if(b&&b.indexOf('//')===0){return}this.addln(b)}},{key:"get",value:function get(){return this.output}},{key:"indentln",value:function indentln(b){this.addln(b);this.indent()}},{key:"unindentln",value:function unindentln(b){this.unindent();this.addln(b)}},{key:"reset",value:function reset(){this.indentation='';this.output=''}}]);return Output}(e);a.apply(b.prototype,{indentation:'',output:'',isCompressed:!1,indentstr:'    ',splitThreshold:1000000,selectorCount:0});d.exports=b},{"./Base.js":3}],5:[function(b,k,q){"use strict";var a=b('./Base.js'),n=a.Base;var h=b('./type/Type.js');var g=b('./type/List.js');var o=b('./type/Bool.js');var l=b('./type/Color.js');var j=b('./type/ColorRGBA.js');var p=b('./type/Text.js');var d=b('./type/Literal.js');var f=b('./type/Statics.js');var i=b('./type/TypeVisitor.js');var m=b('./type/Types.js');var c=function(){function Scope(a){_classCallCheck(this,Scope);this.prev=a;this.map={};this.sourceInfo=null}_createClass(Scope,[{key:"get",value:function get(e){var d=this.map,c=this,a;while(d){a=d[e];if(a){return a}c=c.prev;d=c&&c.map}return a}},{key:"has",value:function has(d){var c=this.map,a=this;while(c){if(d in c){return !0}a=a.prev;c=a&&a.map}return !1}},{key:"put",value:function put(c,a){this.map[c]=a;return a}},{key:"addEntries",value:function addEntries(a){if(this.prev){this.prev.addEntries(a)}for(var c in this.map){a[c]=this.map[c]}}},{key:"getEntries",value:function getEntries(a){a=a||{};this.addEntries(a);return a}},{key:"getSourceInfo",value:function getSourceInfo(){return this.sourceInfo}},{key:"getCallStack",value:function getCallStack(a){a=a||[];if(this.sourceInfo){a.push(this.sourceInfo)}if(this.prev){this.prev.getCallStack(a)}return a}}]);return Scope}();a.apply(c.prototype,{$isScope:!0,map:undefined,prev:undefined,resetScope:undefined});var e=function(e){_inherits(Runtime,e);function Runtime(d){_classCallCheck(this,Runtime);var c=_possibleConstructorReturn(this,(Runtime.__proto__||Object.getPrototypeOf(Runtime)).call(this,d));var a=c;a.mixins={};a.functions={};a.processors=[];a.registered={runtime:a,box:f.boxType,unbox:f.unboxType,isArray:function isArray(a){return Array.isArray(a)},getRuntime:function getRuntime(){return this.runtime},handleArgs:function handleArgs(j,l){var f={},h=0,a;for(var i=0;i<j.length;i++){var c=j[i];if(c===undefined){continue}if(c===!0||c===!1){f[l[h]]=c;h++}else if(c.type===undefined){for(a in c){f[a.replace(/^\$/,'')]=c[a]}}else {a=l[h];if(a instanceof Array){a=a[0];f[a]=f[a]||new g();f[a].add(c)}else {f[a]=c;h++}}}return f},sliceArgs:function sliceArgs(c,a,f){return this.getRuntime().sliceArgs(c,a,f).items},tailArgs:function tailArgs(c,f){var a=Array.prototype.slice.call(f,c);if(a.length==1&&this.isArray(a)){a=a[0]}return a}};return c}_createClass(Runtime,[{key:"bool",value:function bool(a){return new o(a)}},{key:"color",value:function color(d){var a=l.map[d],c=new j(a[0],a[1],a[2],a[3]);c.stringified=d;return c}},{key:"quote",value:function quote(a){if(a.type==='string'){return a}return new p(a.toString())}},{key:"unquote",value:function unquote(a){if(a.$isFashionType){return a.unquote()}return new d(a.toString())}},{key:"not",value:function not(a){return this.box(this.unbox(a)==!1)}},{key:"operate",value:function operate(a,f,c){if(f==null||f.$isFashionNull){if(a!='=='&&a!='!='){return d.Null}}if(c==null||c.$isFashionNull){if(a!='=='&&a!='!='){return d.Null}}return f.operate(a,c)}},{key:"reset",value:function reset(){this._currentScope=null;this._currentCallStackScope=this.createCallStackScope();this._globalScope=this.createScope();this._dynamics={}}},{key:"run",value:function run(a,c){this.load(a);this.compile(a);return this.execute(c)}},{key:"createTypesBlock",value:function createTypesBlock(d){d=d||this.types;var g=Object.getOwnPropertyNames(d),c=[],a;for(var f=0;f<g.length;f++){a=g[f];c.push(a+' = Types.'+a);c.push("__"+a+' = '+a)}if(c.length===0){return ''}return 'var '+c.join(',\n    ')+';\n'}},{key:"createMethodBlock",value:function createMethodBlock(a){a=a||this.constructor.prototype;var d=[],f,c;while(a){f=Object.getOwnPropertyNames(a);for(var g=0;g<f.length;g++){c=f[g];if(typeof a[c]==='function'){d.push("__rt_"+c+' = __rt.'+c+'.bind(__rt)')}}a=Object.getPrototypeOf(a)}if(d.length===0){return ''}return 'var '+d.join(',\n    ')+';\n'}},{key:"createPropertyBlock",value:function createPropertyBlock(){var f=Object.getOwnPropertyNames(this),a=[],c;for(var d=0;d<f.length;d++){c=f[d];a.push("__rt_"+c+' = __rt.'+c)}if(a.length===0){return ''}return 'var '+a.join(',\n    ')+';\n'}},{key:"createPrefixedFunctionBody",value:function createPrefixedFunctionBody(a){a=this.createTypesBlock()+this.createMethodBlock()+this.createPropertyBlock()+a;return a}},{key:"createWrappedFn",value:function createWrappedFn(a){return new Function('Types','__rt','__gs','__udf','__dyn',this.createPrefixedFunctionBody(a))}},{key:"callWrappedFn",value:function callWrappedFn(d,c){return d(a,this,this._globalScope,undefined,c||{})}},{key:"compile",value:function compile(d){var f=this,c;this.code=d;new Function();c=this.createWrappedFn(d);this.fn=function(l,h,i){var g=l||f,j=i||{};g.reset();if(h){if(h.$isScope){g._globalScope=h}else {g._globalScope.map=h}}if(i){g._dynamics=i}g._currentScope=g._globalScope;g._scopeStack=[g._currentScope];try{c(f.types,g,g._globalScope,undefined,j)}catch(r){a.raiseAt(r.message||r,null,g.getCallStack())}return g._globalScope};return this.fn}},{key:"execute",value:function execute(a){return this.fn(this,a)}},{key:"load",value:function load(a){this.code=a;return this}},{key:"registerProcessor",value:function registerProcessor(a){this.processors.push(new i(a))}},{key:"register",value:function register(c){if(c['dynamic']){a.error('Cannot register javascript function named "dynamic"');delete c['dynamic']}if(c['require']){a.error('Cannot register javascript function named "require"');delete c['require']}a.apply(this.registered,c)}},{key:"isRegistered",value:function isRegistered(a){a=this.reserved[a]?'__'+a:a;return !!this.registered[a]}},{key:"getGlobalScope",value:function getGlobalScope(){return this._globalScope}},{key:"getCurrentScope",value:function getCurrentScope(){return this._currentScope}},{key:"getRegisteredFunctions",value:function getRegisteredFunctions(){return this.registered}},{key:"getFunctions",value:function getFunctions(){return this.functions}},{key:"getMixins",value:function getMixins(){return this.mixins}},{key:"createScope",value:function createScope(f){var a=f||this._currentScope,d=new c(a);return this.pushScope(d)}},{key:"pushScope",value:function pushScope(a){a.resetScope=this._currentScope;this._currentScope=a;return a}},{key:"popScope",value:function popScope(){this._currentScope=this._currentScope.resetScope;return this._currentScope}},{key:"createCallStackScope",value:function createCallStackScope(f){var a=f||this._currentCallStackScope,d=new c(a);return this.pushCallStackScope(d)}},{key:"pushCallStackScope",value:function pushCallStackScope(a){a.resetScope=this._currentCallStackScope;this._currentCallStackScope=a;return a}},{key:"popCallStackScope",value:function popCallStackScope(){this._currentCallStackScope=this._currentCallStackScope.resetScope;return this._currentCallStackScope}},{key:"getCallStack",value:function getCallStack(){if(this._currentCallStackScope){return this._currentCallStackScope.getCallStack()}return null}},{key:"pushSourceInfo",value:function pushSourceInfo(a){if(this._currentCallStackScope){this._currentCallStackScope.sourceInfo=a}return !0}},{key:"getSourceInfo",value:function getSourceInfo(){var c=this._currentCallStackScope,a=c&&c.sourceInfo;if(a&&a.length){return {lineNumber:a[0],file:a[1]}}return null}},{key:"get",value:function get(c){var d=this.getScopeForName(c),f=d.map[c];if(typeof f==='undefined'){if(!(c in d.map)){a.raiseAt('Reference to undeclared variable : '+c,null,this.getCallStack())}}return this.box(f)}},{key:"getScopeForName",value:function getScopeForName(c){var a=this._currentScope;while(a){if(c in a.map){return a}a=a.prev}return this._currentScope}},{key:"getDefault",value:function getDefault(a){if(a==null||typeof a==='undefined'){return undefined}if(a.$isFashionNull){if(this.constructor.allowNullDefaults){return a}return undefined}return this.box(a)}},{key:"getGlobalDefault",value:function getGlobalDefault(a){var c=this._globalScope.get(a);return this.getDefault(c)}},{key:"getLocalDefault",value:function getLocalDefault(a){var c=this._currentScope.get(a);return this.getDefault(c)}},{key:"setGlobal",value:function setGlobal(f,a,c){var d=this._globalScope;if(!a||!a.$isFashionLiteral){a=this.box(a)}a.ast=a.ast||this.getAstNode(c);d.map[f]=a;return a}},{key:"setDynamic",value:function setDynamic(g,c,f){var i=a.getJsName(g),h=this._globalScope,d;if(!c||!c.$isFashionLiteral){c=this.box(c)}c.ast=c.ast||this.getAstNode(f);if(c.$referenceName||c.$constant){d=c.clone();d.$previousReference=c;c=d;c.ast=this.getAstNode(f)}else {c.$referenceName=g}h.map[i]=c;return c}},{key:"setScoped",value:function setScoped(c,a){var d=this.getScopeForName(c);if(!a||!a.$isFashionLiteral){a=this.box(a)}d.map[c]=a;return a}},{key:"set",value:function set(d,a){var c=this._currentScope;if(!a||!a.$isFashionLiteral){a=this.box(a)}c.map[d]=a;return a}},{key:"getDocs",value:function getDocs(a){if(this.docCache){return this.docCache.get(a)}}},{key:"getString",value:function getString(a){if(this.stringCache){return this.stringCache.get(a)}}},{key:"getAstNode",value:function getAstNode(a){if(this.nodeCache){return this.nodeCache.get(a)}}},{key:"applySpread",value:function applySpread(a){a.spread=!0;return a}},{key:"sliceArgs",value:function sliceArgs(m,j,l){j=j||0;l=l||m.length;var f=[],i=[],h=', ',d,c,a;for(c=j;c<l;c++){a=m[c];if(!a){if(!d){f.push(a)}continue}if(a.spread&&a.$isFashionList){if(d){f.push(d)}d=a;h=d.separator||h}else {f.push(a)}}for(c=0;c<f.length;c++){a=f[c];h=a&&a.splatSeparator||h;i.push(f[c])}if(d){i.push.apply(i,d.items)}return new g(i,h)}},{key:"applySpreadArgs",value:function applySpreadArgs(w,x){var f=[],r=!1,v=0,c,o,i,p,h,l,g,d,n,s,m;n=this.context&&this.context.preprocessor;if(n){d=n.mixinDeclarations[x];if(d){v=1}else {d=n.functionDeclarations[x]}d=d&&d.parameters}for(o=0;o<w.length;o++){c=w[o];if(c&&c.spread&&c.$isFashionMap&&d){h=c.items;g={};for(l in c.map){g['$'+a.getJsName(l)]=c.map[l]}for(var t=0;t<d.length;t++){s=d[t];m=a.getJsName(s.name);if(m in g){f.push(h[g[m]]);delete g[m]}else if(!s.varArgs){f.push(undefined)}}for(l in g){i=h[g[l]];f.push(i)}r=!0}else if(c&&c.spread&&c.$isFashionList){h=c.getItems();for(p=0;p<h.length;p++){i=h[p];i&&(i.splatSeparator=c.separator);f.push(i)}r=!0}else if(c||!r){f.push(c)}c&&(c.spread=undefined)}var u=this.context&&this.context.missingParameters;if(u&&u=='error'){if(d){for(var j=0;j<d.length;j++){if(!d[j].hasOwnProperty('default')&&!d[j].varArgs){if(f[j+v]===undefined){a.raiseAt("No value supplied for argument : "+d[j].name,null,this.getCallStack())}}}}}return f}},{key:"warn",value:function warn(c){a.warn(c,this.getSourceInfo())}},{key:"error",value:function error(c){a.raiseAt(c,null,this.getCallStack())}},{key:"debug",value:function debug(){a.debug.apply(a,arguments)}},{key:"setCaches",value:function setCaches(a){this.docCache=a.docCache;this.stringCache=a.stringCache;this.nodeCache=a.nodeCache}},{key:"copyRuntimeState",value:function copyRuntimeState(a){this._dynamics=a._dynamics;this.registered=a.registered;this.functions=a.functions;this.mixins=a.mixins}},{key:"test",value:function test(a){a=this.unbox(a);if(a==null||a===!1){return !1}return !0}},{key:"and",value:function and(a,c){if(this.test(a)){return c}return a}},{key:"or",value:function or(a,c){if(this.test(a)){return a}return c}}]);return Runtime}(n);a.apply(e.prototype,{box:h.box,unbox:h.unbox,Scope:c,isFashionRuntime:!0,functions:null,code:null,fn:null,stringCache:null,docCache:null,types:m,_globalScope:null,_currentScope:null,_dynamics:null,context:null,reserved:{'if':!0,'else':!0}});k.exports=e},{"./Base.js":3,"./type/Bool.js":8,"./type/Color.js":9,"./type/ColorRGBA.js":11,"./type/List.js":15,"./type/Literal.js":16,"./type/Statics.js":22,"./type/Text.js":23,"./type/Type.js":24,"./type/TypeVisitor.js":25,"./type/Types.js":26}],6:[function(b,g,h){"use strict";var a=b('../Base.js');var f=b('../Runtime.js');var e=b('../parse/ValueParser.js');var d=b('../type/SourceBuilder.js');var c=function(){function CssVariableManager(){_classCallCheck(this,CssVariableManager);this.reset()}_createClass(CssVariableManager,[{key:"reset",value:function reset(){this.initFns=[];this.calcFns=[];this.variableMap={};this.runtime=null}},{key:"createRuntime",value:function createRuntime(){return new f()}},{key:"getRuntime",value:function getRuntime(){var a=this,c=a.runtime;if(!c){c=a.createRuntime();for(var d=0;d<a.initFns.length;d++){a.initFns[d](c)}a.runtime=c}return c}},{key:"calculate",value:function calculate(l){var m=this,n=m.getRuntime(),t={},s=new e(),q=m.variableMap,c,j,r,k,o,p,i,u;j=new n.Scope();for(k in l){c=a.getJsName(k.replace(m.nameRe,''));if(c.indexOf('$')!==0){c='$'+c}j.put(c,s.parse(l[k]))}n._globalScope=j;n._currentScope=j;for(var f=0;f<m.calcFns.length;f++){m.calcFns[f](n)}r=new d();l={};for(k in q){o=q[k];for(var f=0;f<o.length;f++){c=o[f];p='$'+a.getJsName(c);i=j.get(p);if(i){if(i.$isWrapper){i=i.value}l[c]=r.toSource(i)}}}return l}},{key:"applyVariables",value:function applyVariables(k){var l=this,j=l.variableMap;for(var f in j){var e=j[f];var a=document.querySelectorAll(f);if(a){for(var c=0;c<a.length;c++){for(var d=0;d<e.length;d++){var i=e[d];a[c].style.setProperty('--'+i,k[i])}}}}}},{key:"setVariables",value:function setVariables(a){this.applyVariables(this.calculate(a))}},{key:"register",value:function register(f,e,c){if(f){this.initFns.push(f)}if(e){this.calcFns.push(e)}if(c){var i=this.variableMap;for(var a in c){var d=i[a];if(!d){i[a]=c[a]}else {d.push.apply(d,c[a])}}}}},{key:"buildName",value:function buildName(a){return a.replace(/^--/,'').replace(/^\$/,'')}},{key:"buildJsName",value:function buildJsName(c){return a.getJsName(c)}},{key:"buildNames",value:function buildNames(c){var d={},a;for(a in c){d[a]=this.buildName(c[a])}return d}},{key:"buildJsNames",value:function buildJsNames(c){var d={},a;for(a in c){d[a]=this.buildJsName(c[a])}return d}},{key:"getVariables",value:function getVariables(){var l=this,j=l.variableMap,k={};for(var f in j){var e=j[f];var a=document.querySelectorAll(f);if(a){for(var c=0;c<a.length;c++){for(var d=0;d<e.length;d++){var i=e[d];k[i]=a[c].style.getPropertyValue('--'+i)}}}}return k}}]);return CssVariableManager}();a.apply(c.prototype,{$isExport:!0,nameRe:/^--/});g.exports=c},{"../Base.js":3,"../Runtime.js":5,"../parse/ValueParser.js":7,"../type/SourceBuilder.js":21}],7:[function(d,m,q){"use strict";var f=d('../Base.js');var b=d('../type/Type.js');var p=d('../type/Statics.js');var a=d('../type/Types.js'),n=a.Color,o=a.Text,k=a.Numeric,i=a.List,h=a.Bool,g=a.Literal,c=a.ColorRGBA,j=a.ColorHSLA,e=a.FunctionCall;var l=function(){function Parser(){_classCallCheck(this,Parser);this.index=0}_createClass(Parser,[{key:"_advance",value:function _advance(){var c=this,g='',h=c.str,i=h.length,b=!1,f=!1,e=0,a;while(c.index<i){a=h[c.index];c.index++;if(a<=' '){if(!b&&!e){if(g.length){break}continue}}if(a===';'&&!b&&!f){break}if(a==='('){e++}if(a===')'){e&&e--}if(a===','&&!b&&!f&&!e){if(g.length){c.index--;break}else {return a}}if(a==='\\'){if(b){f=1;c.index++;continue}}if(a==='"'||a==="'"){if(!b){b=a}else if(b===a){b=!1}}f=!1;g+=a}return g}},{key:"parseValue",value:function parseValue(a){var r={number:/^(\d+)(px|pt|pc|cm|mm|in|em|rem|ex)?$/g,shortHexColor:/^#([A-Fa-f0-9]{3})$/,longHexColor:/^#([A-Fa-f0-9]{6})$/,functionCall:/^([A-Za-z0-9_]+)\((.*)\)$/,parenList:/^\((.*?)\)$/},i,u;if(a[0]==='"'||a[0]==="'"){u=a=a.substring(1,a.length-1);return new o(u,a[0])}if(a==='true'){return new h(!0)}if(a==='false'){return new h(!1)}if(a==='null'){return g.Null}if(a==='none'){return g.None}if(f.Color.map[a]){var s=n.map[a],t=new c(s[0],s[1],s[2],s[3]);t.stringified=a;return t}if(i=r.number.exec(a)){return new k(parseFloat(i[1]),i[2])}if(i=r.shortHexColor.exec(a)){return c.fromHex(i[1])}if(i=r.longHexColor.exec(a)){return c.fromHex(i[1])}if(i=r.functionCall.exec(a)){var p=i[1],l=this.parse(i[2]).items;if(p==='hsla'||p==='hsl'){return new j(b.unbox(l[0]),b.unbox(l[1]),b.unbox(l[2]),b.unbox(l[3])||1)}else if(p==='rgba'||p==='rgb'){return new c(b.unbox(l[0]),b.unbox(l[1]),b.unbox(l[2]),b.unbox(l[3])||1)}return new e(p,l)}if(i=r.parenList.exec(a)){return new e(this.parse(i[1]))}return new f.Literal(a)}},{key:"parse",value:function parse(h){var c=this,g=[],e=[],a=null,b;c.str=h;c.index=0;while(b=c._advance()){g.push(b)}for(var f=0;f<g.length;f++){b=g[f].trim();if(g[f+1]===','){a=a||[];a.push(c.parseValue(b));f++}else if(a){a.push(c.parseValue(b));e.push(new i(a,', '));a=null}else {e.push(c.parseValue(b))}}if(e.length===1){return e[0]}return new i(e,' ')}}]);return Parser}();m.exports=l},{"../Base.js":3,"../type/Statics.js":22,"../type/Type.js":24,"../type/Types.js":26}],8:[function(b,d,f){"use strict";var c=b('../Base.js');var e=b('./Type.js');var a=function(a){_inherits(Bool,a);function Bool(e){_classCallCheck(this,Bool);var c=_possibleConstructorReturn(this,(Bool.__proto__||Object.getPrototypeOf(Bool)).call(this));c.value=!!e;return c}_createClass(Bool,[{key:"doVisit",value:function doVisit(c){c.bool(this)}},{key:"toString",value:function toString(){return this.value?'true':'false'}},{key:"copy",value:function copy(){return new Bool(this.value)}}]);return Bool}(e);c.apply(a.prototype,{type:'bool',$isFashionBool:!0,value:null});a.True=new a(!0);a.True.$constant=!0;a.False=new a(!1);a.False.$constant=!0;d.exports=a},{"../Base.js":3,"./Type.js":24}],9:[function(a,e,h){"use strict";var c=a('../Base.js');var g=a('./Type.js');var f=a('./Bool.js');var d=a('./Numeric.js');var b=function(b){_inherits(Color,b);function Color(){_classCallCheck(this,Color);return _possibleConstructorReturn(this,(Color.__proto__||Object.getPrototypeOf(Color)).call(this))}_createClass(Color,[{key:"toBoolean",value:function toBoolean(){return f.True}},{key:"getRGBA",value:function getRGBA(){return this}},{key:"getHSLA",value:function getHSLA(){return this}}],[{key:"component",value:function component(g,f){var k=Color.units[f],j=Color.types[f],i=Color.comps[f],c;if(j=='hsla'){c=g.getHSLA()}else {c=g.getRGBA()}return new d(c[i],k)}},{key:"adjust",value:function adjust(g,d,f){var c=g.getHSLA().copy(),j=Color.comps[d],i=f.value;c[j]+=i;c.h=Color.constrainDegrees(c.h);c.s=Color.constrainPercentage(c.s);c.l=Color.constrainPercentage(c.l);return c.getRGBA()}},{key:"constrainChannel",value:function constrainChannel(c){return Math.max(0,Math.min(c,255))}},{key:"constrainPercentage",value:function constrainPercentage(c){return Math.max(0,Math.min(c,100))}},{key:"constrainDegrees",value:function constrainDegrees(c){c=c%360;return c<0?360+c:c}},{key:"constrainAlpha",value:function constrainAlpha(c){if(c===undefined){return 1}return Math.max(0,Math.min(c,1))}}]);return Color}(g);c.apply(b,{units:{lightness:'%',saturation:'%',hue:'deg'},types:{red:'rgba',blue:'rgba',green:'rgba',alpha:'rgba',hue:'hsla',saturation:'hsla',lightness:'hsla'},comps:{red:'r',green:'g',blue:'b',alpha:'a',hue:'h',saturation:'s',lightness:'l'},map:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5],transparent:[0,0,0,0]}});c.apply(b.prototype,{type:'color',$isFashionColor:!0,$isFashionRGBA:!1,$isFashionHSLA:!1,$canUnbox:!1});e.exports=b},{"../Base.js":3,"./Bool.js":8,"./Numeric.js":18,"./Type.js":24}],10:[function(c,f,g){"use strict";var e=c('../Base.js');var a=c('./Color.js');var d=c('./ColorRGBA.js');var b=function(b){_inherits(ColorHSLA,b);function ColorHSLA(h,j,i,e){_classCallCheck(this,ColorHSLA);var d=_possibleConstructorReturn(this,(ColorHSLA.__proto__||Object.getPrototypeOf(ColorHSLA)).call(this));d.h=a.constrainDegrees(h);d.s=j;d.l=i;if(e!==undefined){d.a=e}return d}_createClass(ColorHSLA,[{key:"doVisit",value:function doVisit(a){a.hsla(this)}},{key:"operate",value:function operate(a,d){return this.getRGBA().operate(a,d)}},{key:"copy",value:function copy(){return new ColorHSLA(this.h,this.s,this.l,this.a)}},{key:"getRGBA",value:function getRGBA(){return d.fromHSLA(this)}},{key:"toString",value:function toString(){return this.getRGBA().toString()}},{key:"add",value:function add(e,i,h,d){return new ColorHSLA(a.constrainDegrees(this.h+e),a.constrainPercentage(this.s+i),a.constrainPercentage(this.l+h),a.constrainAlpha(this.a*d))}},{key:"subtract",value:function subtract(a,e,d){return this.add(-a,-e,-d)}},{key:"adjustLightness",value:function adjustLightness(d){this.l=a.constrainPercentage(this.l+d);return this}},{key:"adjustHue",value:function adjustHue(d){this.h=a.constrainDegrees(this.h+d);return this}}],[{key:"fromRGBA",value:function fromRGBA(h){if(h.$isFashionHSLA){return h.clone()}var l=h.r/255,k=h.g/255,m=h.b/255,p=h.a,e=Math.max(l,k,m),j=Math.min(l,k,m),i=e-j,d=0,o=0,n=0.5*(e+j);if(j!=e){o=n<0.5?i/(e+j):i/(2-e-j);if(l==e){d=60*(k-m)/i}else if(k==e){d=120+60*(m-l)/i}else {d=240+60*(l-k)/i}if(d<0){d+=360}if(d>=360){d-=360}}return new ColorHSLA(a.constrainDegrees(d),a.constrainPercentage(o*100),a.constrainPercentage(n*100),p)}}]);return ColorHSLA}(a);d.prototype.getHSLA=function(){return b.fromRGBA(this)};e.apply(b.prototype,{type:'hsla',$isFashionHSLA:!0,h:null,s:null,l:null,a:1});f.exports=b},{"../Base.js":3,"./Color.js":9,"./ColorRGBA.js":11}],11:[function(d,e,f){"use strict";var c=d('../Base.js');var b=d('./Color.js');function hex2(b){var a=b.toString(16);if(a.length<2){a='0'+a}return a}var a=function(a){_inherits(ColorRGBA,a);function ColorRGBA(i,h,g,c){_classCallCheck(this,ColorRGBA);var b=_possibleConstructorReturn(this,(ColorRGBA.__proto__||Object.getPrototypeOf(ColorRGBA)).call(this));b.r=Math.min(255,Math.max(0,i));b.g=Math.min(255,Math.max(0,h));b.b=Math.min(255,Math.max(0,g));if(c!==undefined){b.a=Math.min(1,Math.max(0,c))}return b}_createClass(ColorRGBA,[{key:"doVisit",value:function doVisit(b){b.rgba(this)}},{key:"copy",value:function copy(){return new ColorRGBA(this.r,this.g,this.b,this.a)}},{key:"getHSLA",value:function getHSLA(){return null}},{key:"stringify",value:function stringify(){var c=this,g=Math.round,k=g(c.r),j=g(c.g),i=g(c.b),h=c.a,b='';if(h===1){b='#'+hex2(k)+hex2(j)+hex2(i)}else {b='rgba('+k+', '+j+', '+i+', '+h+')'}b=b.toLowerCase();return b}},{key:"getCompressedValue",value:function getCompressedValue(b){var g=ColorRGBA.stringifiedMap[b],c=ColorRGBA.shortFormMap[b];if(g){b=b.length>g.length?g:b}if(ColorRGBA.useShortValues&&c){b=b.length>c.length?c:b}return b}},{key:"toString",value:function toString(){if(!this.stringified){this.stringified=this.getCompressedValue(this.stringify())}return this.stringified}},{key:"toIeHexStr",value:function toIeHexStr(){var c=this,b=Math.round,j=b(c.r),i=b(c.g),h=b(c.b),g=b(255*c.a);return '#'+hex2(g)+hex2(j)+hex2(i)+hex2(h)}},{key:"add",value:function add(h,g,c,b){return new ColorRGBA(this.r+h,this.g+g,this.b+c,this.a*b)}},{key:"subtract",value:function subtract(g,c,b){return new ColorRGBA(this.r-g,this.g-c,this.b-b,this.a)}},{key:"multiply",value:function multiply(b){return new ColorRGBA(this.r*b,this.g*b,this.b*b,this.a)}},{key:"divide",value:function divide(b){return new ColorRGBA(this.r/b,this.g/b,this.b/b,this.a)}}],[{key:"fromHex",value:function fromHex(b){if(b.charAt(0)=='#'){b=b.substr(1)}var h,g,c;if(b.length===3){h=parseInt(b.charAt(0),16);g=parseInt(b.charAt(1),16);c=parseInt(b.charAt(2),16);h=(h<<4)+h;g=(g<<4)+g;c=(c<<4)+c}else {h=parseInt(b.substring(0,2),16);g=parseInt(b.substring(2,4),16);c=parseInt(b.substring(4,6),16)}var i=new ColorRGBA(h,g,c);if(ColorRGBA.preserveInputStrings){i.stringified="#"+b}return i}},{key:"fromHSLA",value:function fromHSLA(j){if(j.$isFashionRGBA){return j.clone()}var h=j,k=h.h/360,l=h.s/100,g=h.l/100,m=h.a;var i=g<=0.5?g*(l+1):g+l-g*l,c=g*2-i;function hue(b){if(b<0){++b;}if(b>1){--b;}if(b*6<1){return c+(i-c)*b*6;}if(b*2<1){return i;}if(b*3<2){return c+(i-c)*(2/3-b)*6;}return c}var p=b.constrainChannel(hue(k+1/3)*255),o=b.constrainChannel(hue(k)*255),n=b.constrainChannel(hue(k-1/3)*255);return new ColorRGBA(p,o,n,m)}}]);return ColorRGBA}(b);c.apply(a,{stringifiedMap:{'rgba(0, 0, 0, 0)':'transparent'},shortFormMap:{},useShortValues:!0,preserveInputStrings:!1});c.apply(a.prototype,{type:'rgba',$isFashionRGBA:!0,r:null,g:null,b:null,a:1,stringified:null,"+.number":function number(b){var a=b.value,c=b.unit;switch(c){case '%':return this.getHSLA().adjustLightness(a).getRGBA();case 'deg':return this.getHSLA().adjustHue(a).getRGBA();default:return this.add(a,a,a,1);}},"+.rgba":function rgba(a){return this.add(a.r,a.g,a.b,a.a)},"+.hsla":function hsla(a){return this.getHSLA().add(a.h,a.s,a.l)},"-.number":function number(b){var a=b.value,c=b.unit;switch(c){case '%':return this.getHSLA().adjustLightness(-a).getRGBA();case 'deg':return this.getHSLA().adjustHue(-a).getRGBA();default:return this.subtract(a,a,a);}},"-.rgba":function rgba(a){return this.subtract(a.r,a.g,a.b)},"-.hsla":function hsla(a){return this.getHSLA().subtract(a.h,a.s,a.l)},"*.number":function number(a){return this.multiply(a.value)},"/.number":function number(a){return this.divide(a.value)},"*.rgba":function rgba(b){return new a(this.r*b.r,this.g*b.g,this.b*b.b,this.a*b.a)},"/.rgba":function rgba(b){return new a(Math.floor(this.r/b.r),Math.floor(this.g/b.g),Math.floor(this.b/b.b),Math.floor(this.a/b.a))}});e.exports=a;(function(l,k,i,g){var c=['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'],h=Object.keys(i),b;h.sort();for(b=0;b<h.length;b++){var j=h[b],a=i[j],m=new l(a[0],a[1],a[2],a[3]),n=m.stringify();k[n]=j}c.forEach(function(a){var b=a+a;c.forEach(function(h){var j=h+h;c.forEach(function(n){var p=n+n,c='#'+a+h+n,m='#'+b+j+p;if(g[m]){var o=g[m];c=o.length>c.length?c:o}g[m]=c})})})})(a,a.stringifiedMap,b.map,a.shortFormMap)},{"../Base.js":3,"./Color.js":9}],12:[function(a,e,g){"use strict";var c=a('../Base.js');var f=a('./Type.js');var d=a('./Numeric.js');var b=function(b){_inherits(ColorStop,b);function ColorStop(d,f){_classCallCheck(this,ColorStop);var c=_possibleConstructorReturn(this,(ColorStop.__proto__||Object.getPrototypeOf(ColorStop)).call(this));c.color=d;c.stop=f;return c}_createClass(ColorStop,[{key:"doVisit",value:function doVisit(c){c.colorstop(this)}},{key:"descend",value:function descend(c){c.visit(this.color);c.visit(this.stop)}},{key:"toString",value:function toString(){var d=this.color.toString(),c=this.stop;if(c){c=c.copy();d+=' ';if(!c.unit){c.value*=100;c.unit='%'}d+=c.toString()}return d}},{key:"toOriginalWebkitString",value:function toOriginalWebkitString(){var c=this.stop;if(!c){c=new d(0,'%')}c=c.copy();if(!c.unit){c.value*=100;c.unit='%'}return 'color-stop('+c.toString()+', '+this.color.toString()+')'}},{key:"copy",value:function copy(){return new ColorStop(this.color&&this.color.clone(),this.stop&&this.stop.clone())}}]);return ColorStop}(f);c.apply(b.prototype,{type:'colorstop',$isFashionColorStop:!0,$canUnbox:!1,color:null,stop:null});e.exports=b},{"../Base.js":3,"./Numeric.js":18,"./Type.js":24}],13:[function(a,d,g){"use strict";var c=a('../Base.js');var f=a('./Type.js');var e=a('./List.js');var b=function(b){_inherits(FunctionCall,b);function FunctionCall(h,c){_classCallCheck(this,FunctionCall);var f=_possibleConstructorReturn(this,(FunctionCall.__proto__||Object.getPrototypeOf(FunctionCall)).call(this));f.name=h;if(Array.isArray(c)){c=new e(c)}f.args=c;return f}_createClass(FunctionCall,[{key:"toString",value:function toString(){var e=this.args,c;if(Array.isArray(e)){c=e.join(', ')}else {c=e.toString()}return this.name+"("+c+')'}},{key:"doVisit",value:function doVisit(c){c.functioncall(this)}},{key:"descend",value:function descend(c){this.args&&c.visit(this.args)}},{key:"copy",value:function copy(){return new FunctionCall(this.name,this.args&&this.args.copy())}}]);return FunctionCall}(f);c.apply(b.prototype,{type:'functioncall',$isFashionFunctionCall:!0,$canUnbox:!1,name:null,args:null});d.exports=b},{"../Base.js":3,"./List.js":15,"./Type.js":24}],14:[function(b,d,f){"use strict";var c=b('../Base.js');var e=b('./Type.js');var a=function(a){_inherits(LinearGradient,a);function LinearGradient(e,g){_classCallCheck(this,LinearGradient);var c=_possibleConstructorReturn(this,(LinearGradient.__proto__||Object.getPrototypeOf(LinearGradient)).call(this));c.position=e;c.stops=g;return c}_createClass(LinearGradient,[{key:"doVisit",value:function doVisit(c){c.lineargradient(this)}},{key:"descend",value:function descend(c){c.visit(this.position);c.visit(this.stops)}},{key:"copy",value:function copy(){return new LinearGradient(this.position&&this.position.clone(),this.stops&&this.stops.clone())}},{key:"gradientPoints",value:function gradientPoints(c){}},{key:"operate",value:function operate(e,c){switch(e){case "!=":if(c.type=='literal'&&(c.value=='null'||c.value=='none')){return !0};case "==":if(c.type=='literal'&&(c.value=='null'||c.value=='none')){return !1};}return _get(LinearGradient.prototype.__proto__||Object.getPrototypeOf(LinearGradient.prototype),"operate",this).call(this,e,c)}},{key:"supports",value:function supports(c){return !!this.vendorPrefixes[c.toLowerCase()]}},{key:"toString",value:function toString(){var c='linear-gradient(';if(this.position){c+=this.position+', '}return c+this.stops+')'}},{key:"toOriginalWebkitString",value:function toOriginalWebkitString(){var c=[],g=this.stops.items,h=g.length,e;c.push('top');c.push('bottom');for(e=0;e<h;e++){c.push(g[e].toOriginalWebkitString())}return '-webkit-gradient(linear, '+c.join(', ')+')'}},{key:"toPrefixedString",value:function toPrefixedString(c){if(c==='owg'){return this.toOriginalWebkitString()}return c+this.toString()}}]);return LinearGradient}(e);c.apply(a.prototype,{type:'lineargradient',$isFashionLinearGradient:!0,$canUnbox:!1,position:null,stops:null,vendorPrefixes:{webkit:!0,moz:!0,svg:!0,pie:!0,css2:!0,o:!0,owg:!0}});d.exports=a},{"../Base.js":3,"./Type.js":24}],15:[function(a,d,f){"use strict";var c=a('../Base.js');var e=a('./Type.js');var b=function(b){_inherits(List,b);function List(g,e){_classCallCheck(this,List);var c=_possibleConstructorReturn(this,(List.__proto__||Object.getPrototypeOf(List)).call(this));c.items=g||[];c.separator=typeof e==='undefined'?' ':e;return c}_createClass(List,[{key:"doVisit",value:function doVisit(c){c.list(this)}},{key:"descend",value:function descend(e){for(var c=0;c<this.items.length;c++){e.visit(this.items[c])}}},{key:"copy",value:function copy(){var g=this.items,h=g.length,e=[];for(var c=0;c<h;c++){e.push(g[c].clone())}return new List(e,this.separator)}},{key:"clone",value:function clone(k,g){if(g&&this.matches(k)){return g.clone()}var j=this.items,l=j.length,e=[];for(var i=0;i<l;i++){var h=j[i];if(h){e.push(h.clone(k,g))}else {e.push(h)}}var c=new List(e,this.separator);c.$referenceName=this.$referenceName;c.$referenceBase=this.$referenceBase;c.$previousReference=this.$previousReference;return c}},{key:"add",value:function add(c){return this.items.push(c)}},{key:"get",value:function get(c){return this.items[c-1]||null}},{key:"operate",value:function operate(e,c){switch(e){case '!=':if(c.$isFashionLiteral){if(c.value==='null'||c.value==='none'){return !0}};break;case '==':if(c.$isFashionLiteral){if(c.value==='null'||c.value==='none'){return !1}};break;}return _get(List.prototype.__proto__||Object.getPrototypeOf(List.prototype),"operate",this).call(this,e,c)}},{key:"supports",value:function supports(e){for(var c=0;c<this.items.length;c++){var g=this.items[c];if(g.supports(e)){return !0}}return !1}},{key:"toBoolean",value:function toBoolean(){return !!this.items.length}},{key:"getItems",value:function getItems(){return this.items}},{key:"toString",value:function toString(){return this.items.join(this.separator)}},{key:"unquote",value:function unquote(){var e=[],c;for(var g=0;g<this.items.length;g++){c=this.items[g];if(c){e.push(c.unquote())}else {e.push(c)}}return new List(e,this.separator)}},{key:"toPrefixedString",value:function toPrefixedString(h){var e=[];for(var c=0;c<this.items.length;c++){var g=this.items[c];if(g){e.push(g.toPrefixedString(h))}}return e.join(this.separator)}},{key:'==.list',value:function list(g){var e=this.separator==g.separator&&this.items.length==g.items.length;for(var c=0;e&&c<this.items.length;++c){e=this.items[c].operate("==",g.items[c])}return e}}]);return List}(e);c.apply(b.prototype,{type:'list',$isFashionList:!0,items:null,separator:null});d.exports=b},{"../Base.js":3,"./Type.js":24}],16:[function(d,g,h){"use strict";var e=d('../Base.js');var b=d('./Type.js');var f=d('./Numeric.js');var a=function(a){_inherits(Literal,a);function Literal(c){_classCallCheck(this,Literal);var b=_possibleConstructorReturn(this,(Literal.__proto__||Object.getPrototypeOf(Literal)).call(this));b.value=c;return b}_createClass(Literal,[{key:"doVisit",value:function doVisit(b){b.literal(this)}},{key:"_getHash",value:function _getHash(){return this.value}},{key:"toString",value:function toString(){return this.value||''}},{key:"toBoolean",value:function toBoolean(){return this.value.length}},{key:"copy",value:function copy(){return new Literal(this.value)}},{key:'+',value:function _(b){return new Literal(this.value+b.getHash())}},{key:'+.number',value:function number(b){if(this.value===null){return b}return new Literal(this.value+b.toString())}},{key:'/',value:function _(b){return new Literal(this.value+'/'+b.getHash())}},{key:'-',value:function _(b){return new Literal(this.value+'-'+b.getHash())}},{key:'%',value:function _(b){return new Literal(this.value+'%'+b.getHash())}},{key:"normalizeStart",value:function normalizeStart(e){var c=b.unbox(e)||0;if(c>0){c=c-1}if(c<0){c=this.value.length+c}if(c<0){c=0}return c}},{key:"normalizeEnd",value:function normalizeEnd(e){var c=b.unbox(e)||-1;if(c>0){c=c-1}if(c<0){c=this.value.length+c}if(c<0){c=0}if(c>0){c=c+1}return c}},{key:"slice",value:function slice(b,c){b=this.normalizeStart(b);c=this.normalizeEnd(c);return new Literal(this.value.slice(b,c))}},{key:"toUpperCase",value:function toUpperCase(){return new Literal(this.value.toUpperCase())}},{key:"toLowerCase",value:function toLowerCase(){return new Literal(this.value.toLowerCase())}},{key:"indexOf",value:function indexOf(c){var b=this.value.indexOf(c.value);if(b===-1){return undefined}return new f(b+1)}},{key:"insert",value:function insert(i,f){var c=b.unbox(f)||0,e=this.value;if(c>0){c=Math.min(c-1,e.length)}if(c<0){c=e.length+c+1;c=Math.max(c,0)}e=e.substring(0,c)+i.value+e.substring(c);return new Literal(Literal.deEscape(e))}},{key:"toDisplayString",value:function toDisplayString(){var b=this.value;if(b===null){return "null"}return this.toString()}}],[{key:"tryCoerce",value:function tryCoerce(b){if(b.$isFashionNumber){return undefined}if(b.$isFashionString){return new Literal(b.value)}if(b.$isFashionLiteral){return b}return new Literal(b.getHash())}},{key:"deEscape",value:function deEscape(e){var f='',b,c;for(b=0;b<e.length;b++){c=e.charAt(b);if(c==='\\'){b++;c=e.charAt(b)}f+=c}return f}}]);return Literal}(b);e.apply(a.prototype,{type:'literal',$isFashionLiteral:!0,value:null});var c=function(a){_inherits(FashionNull,a);function FashionNull(b){_classCallCheck(this,FashionNull);return _possibleConstructorReturn(this,(FashionNull.__proto__||Object.getPrototypeOf(FashionNull)).call(this,b||null))}_createClass(FashionNull,[{key:"copy",value:function copy(){return new FashionNull(this.value)}}]);return FashionNull}(a);e.apply(c.prototype,{$isFashionNull:!0,$constant:!0});c.prototype.$isFashionNull=!0;a.Null=new c(null);a.None=new a('none');g.exports=a},{"../Base.js":3,"./Numeric.js":18,"./Type.js":24}],17:[function(a,g,j){"use strict";var d=a('../Base.js');var b=a('./List.js');var i=a('./Type.js');var e=a('./Literal.js'),h=e.Null;var f=a('./Numeric.js');var c=function(c){_inherits(Map,c);function Map(b){_classCallCheck(this,Map);var e=_possibleConstructorReturn(this,(Map.__proto__||Object.getPrototypeOf(Map)).call(this,b));e.map={};if(b){for(var d=0;d<b.length-1;d+=2){var f=e.toKey(b[d]),h=b[d+1];e.map[f]=d+1}}return e}_createClass(Map,[{key:"doVisit",value:function doVisit(b){b.map(this)}},{key:"descend",value:function descend(d){for(var b=0;b<this.items.length;b++){d.visit(this.items[b])}}},{key:"get",value:function get(d){if(d instanceof f){d=i.unbox(d)}if(typeof d==='number'){return new b([this.items[2*d-2],this.items[2*d-1]],' ')}d=this.toKey(d);return this.items[this.map[d]]||h}},{key:"getItems",value:function getItems(){var d=[];for(var b=0;b<this.items.length-1;b+=2){var e=this.toKey(this.items[b]);d.push(this.map[e])}return d}},{key:"put",value:function put(e,d){var b=this.toKey(e);if(!this.map.hasOwnProperty(b)){this.items.push(e,d);this.map[b]=this.items.length-1}else {this.items[this.map[b]]=d}}},{key:"toString",value:function toString(){var b='',e=0;for(var d=0;d<this.items.length-1;d+=2){var h=this.toKey(this.items[d]),f=this.map[h];if(f){if(e>0){b+=', '}b+=h+": "+f.toString();e++}}return b}},{key:"toKey",value:function toKey(b){return this.unquoteKey(b).toString()}},{key:"unquoteKey",value:function unquoteKey(b){if(b.$isFashionType){return b.unquote()}return b}},{key:"remove",value:function remove(b){b=this.toKey(b);if(this.map[b]){var d=this.map[b];delete this.items[d-1];delete this.items[d];delete this.map[b]}}},{key:"getKeys",value:function getKeys(){var d=[];for(var b=0;b<this.items.length;b+=2){var e=this.items[b];if(e){d.push(e)}}return d}},{key:"getValues",value:function getValues(){var d=[];for(var b=1;b<this.items.length;b+=2){var e=this.items[b];if(e){d.push(e)}}return d}},{key:"hasKey",value:function hasKey(b){b=this.toKey(b);if(this.map.hasOwnProperty(b)){return !0}return !1}}]);return Map}(b);d.apply(c.prototype,{type:"map",$isFashionMap:!0,$canUnbox:!1,map:null});g.exports=c},{"../Base.js":3,"./List.js":15,"./Literal.js":16,"./Numeric.js":18,"./Type.js":24}],18:[function(c,f,h){"use strict";var b=c('../Base.js');var g=c('./Type.js');var e=c('./Bool.js');var a=c('./Literal.js');var d=function(d){_inherits(Numeric,d);function Numeric(i,b,e,g){_classCallCheck(this,Numeric);var a=_possibleConstructorReturn(this,(Numeric.__proto__||Object.getPrototypeOf(Numeric)).call(this));a.value=i;a.unit=b;if(b&&!e){a.numeratorUnits=[b]}else {a.numeratorUnits=e||[]}a.denominatorUnits=g||[];return a}_createClass(Numeric,[{key:"doVisit",value:function doVisit(a){a.number(this)}},{key:"unitless",value:function unitless(){if(this.numeratorUnits&&this.numeratorUnits.length){return !1}if(this.denominatorUnits&&this.denominatorUnits.length){return !1}return !0}},{key:"getUnitStr",value:function getUnitStr(){this.normalizeUnits();var a=this.numeratorUnits.join('*');if(this.denominatorUnits.length){a+='/'+this.denominatorUnits.join('*')}return a}},{key:"_getHash",value:function _getHash(){return this.value}},{key:"stringify",value:function stringify(){this.normalizeUnits();var b=this.value,a;a=Math.round(b*100000)/100000+'';return a+this.getUnitStr()}},{key:"toString",value:function toString(){return this.stringify()}},{key:"toBoolean",value:function toBoolean(){return this.unit?!0:!!this.value}},{key:"copy",value:function copy(){return new Numeric(this.value,this.unit)}},{key:'-.literal',value:function literal(b){if(this.value===0&&this.unitless()){return new a(['-',b.toString()].join(''))}return new a([this.toString(),'-',b.toString()].join(''))}},{key:'-.string',value:function string(b){if(this.value===0&&this.unitless()){return new a(['-',b.toString()].join(''))}return new a([this.toString(),'-',b.toString()].join(''))}},{key:'-.number',value:function number(a){var b=a.value;if(a.unit=='%'&&a.unit!==this.unit){b=this.value*(a.value/100)}return new Numeric(this.value-b,this.unit||a.unit)}},{key:'+.literal',value:function literal(b){if(b.$isFashionString){return new a([this.toString(),b.value].join(''))}return new a([this.toString(),b.toString()].join(''))}},{key:'+.number',value:function number(a){var b=a.value;if(a.unit=='%'&&a.unit!==this.unit){b=this.value*(a.value/100)}return new Numeric(this.value+b,this.unit||a.unit)}},{key:'/',value:function _(a){return new Numeric(this.value/a.value,this.unit==a.unit?null:this.unit||a.unit)}},{key:'*',value:function _(a){return new Numeric(this.value*a.value,this.unit||a.unit)}},{key:'%',value:function _(a){return new Numeric(this.value%a.value,this.unit||a.unit)}},{key:'**',value:function _(a){return new Numeric(Math.pow(this.value,a.value),this.unit||a.unit)}},{key:"operate",value:function operate(e,b){var i=this.unit||b.unit,g;if(b.$isFashionRGBA||b.$isFashionHSLA){return new a(this+e+b)}if(b.$isFashionNumber){return this.numericOperate(e,b)}else if(b.$isFashionLiteral){g=this.tryCoerce(b);if(g){return this.performOperation(e,g)}}return _get(Numeric.prototype.__proto__||Object.getPrototypeOf(Numeric.prototype),"operate",this).call(this,e,b)}},{key:"tryNormalize",value:function tryNormalize(e){var a=e.value,b=e.unit;if(e.$isFashionNumber){switch(this.unit){case 'mm':switch(b){case 'in':return new Numeric(a*25.4,'mm');case 'cm':return new Numeric(a*2.54,'mm');};break;case 'cm':switch(b){case 'in':return new Numeric(a*2.54,'cm');case 'mm':return new Numeric(a/10,'cm');};break;case 'in':switch(b){case 'mm':return new Numeric(a/25.4,'in');case 'cm':return new Numeric(a/2.54,'in');};break;case 'ms':switch(b){case 's':return new Numeric(a*1000,'ms');};break;case 's':switch(b){case 'ms':return new Numeric(a/1000,'s');};break;case 'Hz':switch(b){case 'kHz':return new Numeric(a*1000,'Hz');};break;case 'kHz':switch(b){case 'Hz':return new Numeric(a/1000,'kHz');};break;case '%':switch(b){default:return new Numeric(a);};default:break;}}return undefined}},{key:"normalize",value:function normalize(a){var b=this.tryNormalize(a);if(b===undefined){raise('Could not normalize '+this+' with '+a)}return b}},{key:"comparable",value:function comparable(e){var b=this.unit,a=e.unit;if(!e.$isFashionNumber){return !1}return b===a||b==='mm'&&(a==='in'||a==='cm')||b==='cm'&&(a==='in'||a==='mm')||b==='in'&&(a==='mm'||a==='cm')||b==='ms'&&a==='s'||b==='s'&&a==='ms'||b==='Hz'&&a==='kHz'||b==='kHz'&&a==='Hz'}},{key:"normalizeUnits",value:function normalizeUnits(){if(this.normalized){return}this.normalized=!0;if(!this.unitless()){var a=this.removeCommonUnits(this.numeratorUnits,this.denominatorUnits),e;a.num=b.filter(a.num,function(a){return !!a});a.den=b.filter(a.den,function(a){return !!a});this.numeratorUnits=a.num;this.denominatorUnits=a.den}}},{key:"numericOperate",value:function numericOperate(g,l){this.normalizeUnits();l.normalizeUnits();var a=this,b=l,n=Numeric.OPERATIONS,m=Numeric.NON_COERCE_OPERATIONS,k=n[g],i;if(k){try{if(a.unitless()){a=a.coerceUnits(b.numeratorUnits,b.denominatorUnits)}else {b=b.coerceUnits(a.numeratorUnits,a.denominatorUnits)}}catch(o){if(g=='=='){return e.False}if(g=='!='){return e.True}throw o}}else {k=m[g]}if(k){i=k(a.value,b.value)}if(typeof i==='number'){var j=this.computeUnits(a,b,g);return new Numeric(i,j.num.length?j.num[0]:null,j.num,j.den)}return new e(i)}},{key:"computeUnits",value:function computeUnits(a,b,e){switch(e){case '*':return {num:a.numeratorUnits.slice().concat(b.numeratorUnits),den:a.denominatorUnits.slice().concat(b.denominatorUnits)};case '/':return {num:a.numeratorUnits.slice().concat(b.denominatorUnits),den:a.denominatorUnits.slice().concat(b.numeratorUnits)};default:return {num:a.numeratorUnits,den:a.denominatorUnits};}}},{key:"coerceUnits",value:function coerceUnits(a,e){var b=this.value;if(!this.unitless()){b=b*this.coercionFactor(this.numeratorUnits,a)/this.coercionFactor(this.denominatorUnits,e)}return new Numeric(b,a&&a[0],a,e)}},{key:"coercionFactor",value:function coercionFactor(o,l){var k=this.removeCommonUnits(o,l),a=k.num,e=k.den;if(a.length!==e.length||!this.convertable(a||e)){b.raise('Incompatible units: '+a.join('*')+' and '+e.join('*'))}for(var g=0;g<a.length;g++){var m=a[g];for(var i=0;i<e.length;i++){var n=e[i],j=this.conversionFactor(m,n);if(j!==null){return j}}}return 1}},{key:"conversionFactor",value:function conversionFactor(b,g){var a=Numeric.CONVERTABLE_UNITS,i=Numeric.CONVERSION_TABLE,e=null;if(a[b]){if(a[g]){e=i[a[b]][a[g]]}}if(e===null&&a[g]){if(a[b]){e=1/i[a[g]][a[b]]}}return e}},{key:"convertable",value:function convertable(a){if(a&&!Array.isArray(a)){a=[a]}if(a&&a.length){var e=Numeric.CONVERTABLE_UNITS;for(var b=0;b<a.length;b++){if(e[a[b]]===undefined){return !1}}}return !0}},{key:"removeCommonUnits",value:function removeCommonUnits(i,g){var e={},k=[],j=[],a,b,b;for(a=0;a<i.length;a++){b=i[a];e[b]=(e[b]||0)+1}for(a=0;a<g.length;a++){b=g[a];e[b]=(e[b]||0)-1}for(a=0;a<i.length;a++){b=i[a];if(e[b]>0){k.push(b);e[b]--}}for(a=0;a<g.length;a++){b=g[a];if(e[b]<0){j.push(b);e[b]++}}return {num:k,den:j}}}],[{key:"tryGetNumber",value:function tryGetNumber(a){if(/^\d*$/.test(a)){a=parseFloat(a)}if(!isNaN(a)){return new Numeric(a)}return undefined}},{key:"tryCoerce",value:function tryCoerce(a){if(a.$isFashionNumber){return a}if(a.$isFashionLiteral){return this.tryGetNumber(a.value)}return undefined}}]);return Numeric}(g);b.apply(d,{OPERATIONS:{'!=':function _(a,b){return a!=b},'+':function _(a,b){return a+b},'-':function _(a,b){return a-b},'<=':function _(a,b){return a<=b},'<':function _(a,b){return a<b},'>':function _(a,b){return a>b},'>=':function _(a,b){return a>=b},'==':function _(a,b){return a==b},'%':function _(a,b){return Math.abs(a%b)}},NON_COERCE_OPERATIONS:{'*':function _(a,b){return a*b},'**':function _(a,b){return Math.pow(a,b)},'/':function _(a,b){return a/b}},CONVERTABLE_UNITS:{'in':0,'cm':1,'pc':2,'mm':3,'pt':4,'px':5},CONVERSION_TABLE:[[1,2.54,6,25.4,72,96],[null,1,2.36220473,10,28.3464567,37.795276],[null,null,1,4.23333333,12,16],[null,null,null,1,2.83464567,3.7795276],[null,null,null,null,1,1.3333333],[null,null,null,null,null,1]]});b.apply(d.prototype,{type:'number',$isFashionNumber:!0,value:undefined,unit:undefined,numeratorUnits:undefined,denominatorUnits:undefined,normalized:!1});f.exports=d},{"../Base.js":3,"./Bool.js":8,"./Literal.js":16,"./Type.js":24}],19:[function(b,d,f){"use strict";var c=b('../Base.js');var e=b('./Type.js');var a=function(a){_inherits(ParentheticalExpression,a);function ParentheticalExpression(e){_classCallCheck(this,ParentheticalExpression);var c=_possibleConstructorReturn(this,(ParentheticalExpression.__proto__||Object.getPrototypeOf(ParentheticalExpression)).call(this));c.value=e;return c}_createClass(ParentheticalExpression,[{key:"toString",value:function toString(){return '('+(this.value&&this.value.toString())+')'}},{key:"doVisit",value:function doVisit(c){c.parenthetical(this)}}]);return ParentheticalExpression}(e);c.apply(a.prototype,{value:null,type:'parenthetical'});d.exports=a},{"../Base.js":3,"./Type.js":24}],20:[function(b,d,f){"use strict";var c=b('../Base.js');var e=b('./Type.js');var a=function(a){_inherits(RadialGradient,a);function RadialGradient(e,g,h){_classCallCheck(this,RadialGradient);var c=_possibleConstructorReturn(this,(RadialGradient.__proto__||Object.getPrototypeOf(RadialGradient)).call(this));c.position=e;c.stops=h;c.shape=g;return c}_createClass(RadialGradient,[{key:"doVisit",value:function doVisit(c){c.radialgradient(this)}},{key:"descend",value:function descend(c){c.visit(this.position);c.visit(this.stops);c.visit(this.shape)}},{key:"copy",value:function copy(){return new RadialGradient(this.position,this.shape,this.stops)}},{key:"toString",value:function toString(){var c='radial-gradient(';if(this.position){c+=this.position+', '}if(this.shape){c+=this.shape+', '}return c+this.stops+')'}},{key:"toOriginalWebkitString",value:function toOriginalWebkitString(){var c=[],g=this.stops.items,h=g.length,e;c.push('center 0%');c.push('center 100%');for(e=0;e<h;e++){c.push(g[e].toOriginalWebkitString())}return '-webkit-gradient(radial, '+c.join(', ')+')'}},{key:"supports",value:function supports(c){return ['owg','webkit'].indexOf(c.toLowerCase())!==-1}},{key:"toPrefixedString",value:function toPrefixedString(c){if(c==='owg'){return this.toOriginalWebkitString()}return c+this.toString()}},{key:"gradientPoints",value:function gradientPoints(c){}}]);return RadialGradient}(e);c.apply(a.prototype,{type:'radialgradient',$isFashionRadialGradient:!0,$canUnbox:!1,position:null,stops:null,shape:null});d.exports=a},{"../Base.js":3,"./Type.js":24}],21:[function(a,f,g){"use strict";var c=a('../Base.js');var d=a('./TypeVisitor.js');var e=a('../Output.js');var b=function(b){_inherits(SourceBuilder,b);function SourceBuilder(d){_classCallCheck(this,SourceBuilder);var c=_possibleConstructorReturn(this,(SourceBuilder.__proto__||Object.getPrototypeOf(SourceBuilder)).call(this,d));c.nullFound=!1;return c}_createClass(SourceBuilder,[{key:"list",value:function list(m){var c=this.output,e=m.items,l=c.output.length,h=m.separator,i=h&&h.length,n=h&&h.indexOf(' ')>-1,k=c.output,j;for(var d=0;d<e.length;d++){if(e[d]&&!e[d].$isFashionNull){this.visit(e[d]);j=c.output.length-l;if(!j&&i&&d>0){c.output=k}k=c.output;if(d<e.length-1){if(i){c.add(h);if(!n){c.space()}}}l=c.output.length}else {this.nullFound=!0}}}},{key:"map",value:function map(k){var e=this.output,h=k.items,j,i;if(this.currDeclaration){c.raise('('+k.toString()+") isn't a valid CSS value.")}for(var d=0;d<h.length-1;d+=2){j=h[d];i=h[d+1];if(j&&i){if(d>0){e.add(',');e.space()}this.visit(j);e.add(': ');this.visit(i)}}}},{key:"literal",value:function literal(c){c.value&&this.output.add(c.value)}},{key:"string",value:function string(d){var c=this.output;c.add(d.quoteChar);c.add(d.value);c.add(d.quoteChar)}},{key:"functioncall",value:function functioncall(d){var c=this.output;c.add(d.name);c.add('(');this.visit(d.args);c.add(')')}},{key:"parenthetical",value:function parenthetical(c){this.output.add('(');this.visit(c.value);this.output.add(')')}},{key:"number",value:function number(d){var c=d.stringify();if(c.indexOf('.')==='.'&&!this.output.isCompressed){c="0"+c}this.output.add(c)}},{key:"bool",value:function bool(c){this.output.add(c.value?'true':'false')}},{key:"hsla",value:function hsla(c){this.output.add(c.toString())}},{key:"rgba",value:function rgba(c){this.output.add(c.toString())}},{key:"colorstop",value:function colorstop(d){var e=this.output,c=d.stop;this.visit(d.color);if(c){c=c.clone();e.add(' ');if(!c.unit){c.value*=100;c.unit='%'}this.visit(c)}}},{key:"lineargradient",value:function lineargradient(d){var c=this.output;c.add("linear-gradient(");if(d.position){this.visit(d.position);c.add(',');c.space()}this.visit(d.stops);c.add(')')}},{key:"radialgradient",value:function radialgradient(d){var c=this.output;c.add("radial-gradient(");if(d.position){this.visit(d.position);c.add(',');c.space()}if(d.shape){this.visit(d.shape);c.add(',');c.space()}this.visit(d.stops);c.add(')')}},{key:"toSource",value:function toSource(d,c){this.output=c||new e();this.visit(d);return this.output.get()}}],[{key:"toSource",value:function toSource(d,c){var e=new SourceBuilder();return e.toSource(d,c)}}]);return SourceBuilder}(d);c.apply(b.prototype,{output:null});f.exports=b},{"../Base.js":3,"../Output.js":4,"./TypeVisitor.js":25}],22:[function(a,b,l){"use strict";var d=a('../Base.js');var k=a('./Type.js');var i=a('./Text.js');var f=a('./Numeric.js');var c=a('./Bool.js'),j=c.True,g=c.False;var e=a('./Literal.js'),h=e.Null;b.exports={unboxType:function unboxType(d){var c=d;if(c&&c.$isFashionType&&c.$canUnbox){c=c.value;if(d.$isFashionString||d.$isFashionLiteral){if(c==='none'||c==='null'){c=null}}else if(d.$isFashionList){c=d.items}}return c},boxType:function boxType(c){if(c&&c.$isFashionType){return c}if(c==null){return h}if(c===!0){return j}if(c===!1){return g}var d=typeof c==="undefined"?"undefined":_typeof(c);switch(d){case 'string':return new i(c);case 'number':return new f(c);default:break;}return c}};d.apply(k,{box:b.exports.boxType,unbox:b.exports.unboxType})},{"../Base.js":3,"./Bool.js":8,"./Literal.js":16,"./Numeric.js":18,"./Text.js":23,"./Type.js":24}],23:[function(c,e,f){"use strict";var d=c('../Base.js');var b=c('./Literal.js');var a=function(a){_inherits(Text,a);function Text(g,b){_classCallCheck(this,Text);var d=_possibleConstructorReturn(this,(Text.__proto__||Object.getPrototypeOf(Text)).call(this,g));if(b!==undefined){if(Text.preferDoubleQuotes&&b===''){d.quoteChar=''}else {d.quoteChar=b}}return d}_createClass(Text,[{key:"doVisit",value:function doVisit(b){b.string(this)}},{key:"toString",value:function toString(){return this.quoteChar+this.value+this.quoteChar}},{key:"unquote",value:function unquote(){return new b(this.value)}},{key:"copy",value:function copy(){return new Text(this.value,this.quoteChar)}},{key:"slice",value:function slice(b,d){return new Text(_get(Text.prototype.__proto__||Object.getPrototypeOf(Text.prototype),"slice",this).call(this,b,d).value,this.quoteChar)}},{key:"toUpperCase",value:function toUpperCase(){return new Text(this.value.toUpperCase(),this.quoteChar)}},{key:"toLowerCase",value:function toLowerCase(){return new Text(this.value.toLowerCase(),this.quoteChar)}},{key:"insert",value:function insert(d,b){return new Text(_get(Text.prototype.__proto__||Object.getPrototypeOf(Text.prototype),"insert",this).call(this,d,b).value,this.quoteChar)}}],[{key:"tryCoerce",value:function tryCoerce(b){if(b.$isFashionNumber){return undefined}if(b.$isFashionLiteral){return new Text(b.value)}return new Text(b.getHash())}}]);return Text}(b);a.preferDoubleQuotes=!1;d.apply(a.prototype,{type:'string',$isFashionString:!0,value:null,quoteChar:'"','+':function _(b){return new a(this.value+b.getHash())},'+.number':function number(b){return new a(this.value+b.toString())},'/':function _(b){return new a(this.value+'/'+b.getHash())}});e.exports=a},{"../Base.js":3,"./Literal.js":16}],24:[function(c,d,e){"use strict";var a=c('../Base.js');var b=function(){function Type(){_classCallCheck(this,Type)}_createClass(Type,[{key:"coerce",value:function coerce(a){var b=this.tryCoerce(a);return b||a}},{key:"_getHash",value:function _getHash(){if(this.visitTarget){return this.visitTarget.toString()}return this.toString()}},{key:"getHash",value:function getHash(){if(this._hash==null){this._hash=this._getHash()}return this._hash}},{key:"tryCoerce",value:function tryCoerce(a){var b=this;if(b.constructor===a.constructor){return a}if(b.constructor.tryCoerce){return b.constructor.tryCoerce(a)}return undefined}},{key:"supports",value:function supports(a){return !1}},{key:"operate",value:function operate(a,b){return this.performOperation(a,this.coerce(b))}},{key:"performOperation",value:function performOperation(g,f){var h=this[g+"."+f.type]||this[g];if(!h){a.raise("Failed to find method for operation "+g+" on type "+f.type+" with value "+f+".")}var b=h.call(this,f);if(!b||!b.$isFashionType){b=Type.box(b)}return b}},{key:'==',value:function _(a){return this.getHash()===a.getHash()}},{key:'!=',value:function _(a){return this.getHash()!==a.getHash()}},{key:'>=',value:function _(a){return this.getHash()>=a.getHash()}},{key:'<=',value:function _(a){return this.getHash()<=a.getHash()}},{key:'>',value:function _(a){return this.getHash()>a.getHash()}},{key:'<',value:function _(a){return this.getHash()<a.getHash()}},{key:'+',value:function _(a){return this.getHash()+a.getHash()}},{key:"copy",value:function copy(){return this}},{key:"matches",value:function matches(a){if(a&&a==this.toString()){return !0}return !1}},{key:"clone",value:function clone(f,b){if(b&&this.matches(f)){return b.copy()}var a=this.copy();a.ast=this.ast;a.$referenceName=this.$referenceName;a.$referenceBase=this.$referenceBase;a.$previousReference=this.$previousReference;return a}},{key:"unquote",value:function unquote(){return this}},{key:"toPrefixedString",value:function toPrefixedString(a){return this.toString()}},{key:"doVisit",value:function doVisit(a){}},{key:"descend",value:function descend(a){}},{key:"hasTag",value:function hasTag(h,a,f,b){a=a||"fashion";f=f||new RegExp('^\\s*//#\\s*'+a+'\\s*\\+?'+h+"\\s*$");b=b||new RegExp('^\\s*//#\\s*'+a+'\\s*\\-'+h+'\\s*$');var g=this.docs;if(g&&g.length){for(var i=0;i<this.docs.length;i++){var j=g[i];if(f.test(j)){return !0}if(b.test(j)){return !1}}}if(this.parentNode){return this.parentNode.hasTag(h,a,f,b)}return null}},{key:"toDisplayString",value:function toDisplayString(){return '['+this.constructor.name+' : '+this.toString()+']'}}]);return Type}();a.apply(b.prototype,{visitTarget:undefined,$isFashionType:!0,$canUnbox:!0,$isFashionLiteral:!1,$isFashionNumber:!1,$isFashionString:!1,$isFashionBool:!1,$constant:!1,$referenceName:undefined,$referenceBase:undefined,$previousReference:undefined,value:undefined,unit:undefined,parentNode:undefined,docs:undefined,ast:undefined});d.exports=b},{"../Base.js":3}],25:[function(c,d,e){"use strict";var b=c('../Base.js');var a=function(){function TypeVisitor(a){_classCallCheck(this,TypeVisitor);if(a){b.apply(this,a)}}_createClass(TypeVisitor,[{key:"literal",value:function literal(a){a.descend(this)}},{key:"bool",value:function bool(a){a.descend(this)}},{key:"string",value:function string(a){a.descend(this)}},{key:"number",value:function number(a){a.descend(this)}},{key:"map",value:function map(a){a.descend(this)}},{key:"functioncall",value:function functioncall(a){a.descend(this)}},{key:"parenthetical",value:function parenthetical(a){a.descend(this)}},{key:"list",value:function list(a){a.descend(this)}},{key:"hsla",value:function hsla(a){a.descend(this)}},{key:"rgba",value:function rgba(a){a.descend(this)}},{key:"colorstop",value:function colorstop(a){a.descend(this)}},{key:"lineargradient",value:function lineargradient(a){a.descend(this)}},{key:"radialgradient",value:function radialgradient(a){a.descend(this)}},{key:"visitItem",value:function visitItem(a){a.doVisit(this)}},{key:"visit",value:function visit(a){while(a&&a.visitTarget!==undefined){a=a.visitTarget}if(a){if(Array.isArray(a)){for(var b=0;b<a.length;b++){this.visit(a[b])}}else {this.visitItem(a)}}}},{key:"execute",value:function execute(a,b){this.visit(a)}}]);return TypeVisitor}();a.prototype.context=null;d.exports=a},{"../Base.js":3}],26:[function(a,d,f){"use strict";var c=a('./Bool.js');var b=a('./Literal.js');var e={Bool:c,Literal:b,Text:a('./Text.js'),Numeric:a('./Numeric.js'),Color:a('./Color.js'),ColorRGBA:a('./ColorRGBA.js'),ColorHSLA:a('./ColorHSLA.js'),ColorStop:a('./ColorStop.js'),LinearGradient:a('./LinearGradient.js'),RadialGradient:a('./RadialGradient.js'),List:a('./List.js'),Map:a('./Map.js'),ParentheticalExpression:a('./ParentheticalExpression.js'),FunctionCall:a('./FunctionCall.js'),Null:b.Null,None:b.None,True:c.True,False:c.False};d.exports=e},{"./Bool.js":8,"./Color.js":9,"./ColorHSLA.js":10,"./ColorRGBA.js":11,"./ColorStop.js":12,"./FunctionCall.js":13,"./LinearGradient.js":14,"./List.js":15,"./Literal.js":16,"./Map.js":17,"./Numeric.js":18,"./ParentheticalExpression.js":19,"./RadialGradient.js":20,"./Text.js":23}]},{},[1])(1)});(function(d){var g=undefined,e=d.Types,c={_:"$color",$:"$color_name",A:"$colorLookup",a:"$color_variant"},B=d.css.buildNames(c),Y=d.css.buildJsNames(c);var D=e.Bool,$=D,j=e.Literal,W=j,H=e.Text,a=H,k=e.Numeric,h=k,i=e.Color,Z=i,l=e.ColorRGBA,b=l,x=e.ColorHSLA,U=x,y=e.ColorStop,V=y,r=e.LinearGradient,O=r,s=e.RadialGradient,P=s,E=e.List,_=E,J=e.Map,f=J,n=e.ParentheticalExpression,K=n,t=e.FunctionCall,Q=t,G=e.Null,m=G,F=e.None,aa=F,I=e.True,ab=I,C=e.False,A=C,z=e.Ruleset,X=z,w=e.Declaration,T=w,v=e.SelectorPart,S=v,p=e.CompoundSelector,M=p,o=e.MultiPartSelector,L=o,u=e.SelectorList,R=u,q=e.SelectorProperty,N=q;d.css.register(function(e){e.register({map_get:function(b,a){return b.get(a)},lighten:function(b,a){if(b==null||b.$isFashionNull){return j.Null}if(b.type!=='hsla'&&b.type!=='rgba'){d.raise(b+' is not a color for \'lighten\'')}if(a.type!=='number'){d.raise(a+' is not a number for \'lighten\'')}if(a.value!==i.constrainPercentage(a.value)){d.raise('Amount '+a+' must be between 0% and 100% for \'lighten\'')}return i.adjust(b,'lightness',a)},darken:function(b,a){if(b==null||b.$isFashionNull){return j.Null}if(b.type!=='hsla'&&b.type!=='rgba'){d.raise(b+' is not a color for \'darken\'')}if(a.type!=='number'){d.raise(a+' is not a number for \'darken\'')}if(a.value!==i.constrainPercentage(a.value)){d.raise('Amount '+a+' must be between 0% and 100% for \'darken\'')}a=a.clone();a.value*=-1;return i.adjust(b,'lightness',a)},rgba:function(a,c,f,b,h){var g;if(!!a&&!!h){d.raise("Unsupported arguments to RGBA")}if(h&&!a){if(h.$isFashionColor){g=h}else {d.raise("Unsupported arguments to RGBA")}}else if(a&&a.$isFashionColor){g=a}if(g){b=c||b;g=g.getRGBA();a=new k(g.r);c=new k(g.g);f=new k(g.b)}if(!a||!a.$isFashionNumber){if(a==null||a.$isFashionNull){return j.Null}d.raise(a+' is not a number for \'rgba\' red')}if(!c||!c.$isFashionNumber){if(c==null||c.$isFashionNull){return j.Null}d.raise(c+' is not a number for \'rgba\' green')}if(!f||!f.$isFashionNumber){if(f==null||f.$isFashionNull){return j.Null}d.raise(f+' is not a number for \'rgba\' blue')}if(!b||!b.$isFashionNumber){if(b==null||b.$isFashionNull){return j.Null}d.raise(b+' is not a number for \'rgba\' alpha')}if(a.unit=='%'){a=new k(i.constrainPercentage(a.value)/100*255)}else if(a.value!==i.constrainChannel(a.value)){d.raise('Color value '+a+' must be between 0 and 255 inclusive for \'rgba\'')}if(c.unit=='%'){c=new k(i.constrainPercentage(c.value)/100*255)}else if(c.value!==i.constrainChannel(c.value)){d.raise('Color value '+c+' must be between 0 and 255 inclusive for \'rgba\'')}if(f.unit=='%'){f=new k(i.constrainPercentage(f.value)/100*255)}else if(f.value!==i.constrainChannel(f.value)){d.raise('Color value '+f+' must be between 0 and 255 inclusive for \'rgba\'')}if(b.unit=='%'){b=new k(i.constrainPercentage(b.value)/100)}else if(b.value!==i.constrainAlpha(b.value)){d.raise('Alpha channel '+b+' must be between 0 and 1 inclusive for \'rgba\'')}return new l(a.value,c.value,f.value,b.value)},mix:function(b,c,a){if(b==null||b.$isFashionNull){return j.Null}if(c==null||c.$isFashionNull){return j.Null}a=(a!==undefined)?a:new k(50,'%');if(b.type!=='hsla'&&b.type!=='rgba'){d.raise('arg 1 '+b+' is not a color for \'mix\'')}if(c.type!=='hsla'&&c.type!=='rgba'){d.raise('arg 2 '+c+' is not a color for \'mix\'')}if(a.type!=='number'){d.raise('arg 3 '+a+' is not a number for \'mix\'')}if(a.value!==i.constrainPercentage(a.value)){d.raise('Weight '+a+' must be between 0% and 100% for \'mix\'')}b=b.getRGBA();c=c.getRGBA();a=a.value/100;var g=(a*2)-1,m=b.a-c.a,f=(((g*m==-1)?g:(g+m)/(1+g*m))+1)/2,h=1-f;return new l((f*b.r)+(h*c.r),(f*b.g)+(h*c.g),(f*b.b)+(h*c.b),(a*b.a)+((1-a)*c.a))}});var s=e.constructor.bind(e),aO=e.bool.bind(e),aJ=e.color.bind(e),aM=e.quote.bind(e),aF=e.unquote.bind(e),aU=e.not.bind(e),aE=e.operate.bind(e),aN=e.reset.bind(e),aV=e.run.bind(e),O=e.createTypesBlock.bind(e),G=e.createMethodBlock.bind(e),C=e.createPropertyBlock.bind(e),v=e.createPrefixedFunctionBody.bind(e),Q=e.createWrappedFn.bind(e),$=e.callWrappedFn.bind(e),aA=e.compile.bind(e),aC=e.execute.bind(e),aQ=e.load.bind(e),I=e.registerProcessor.bind(e),ax=e.register.bind(e),ae=e.isRegistered.bind(e),V=e.getGlobalScope.bind(e),S=e.getCurrentScope.bind(e),y=e.getRegisteredFunctions.bind(e),ad=e.getFunctions.bind(e),ao=e.getMixins.bind(e),t=e.createScope.bind(e),ar=e.pushScope.bind(e),o=e.popScope.bind(e),A=e.createCallStackScope.bind(e),D=e.pushCallStackScope.bind(e),H=e.popCallStackScope.bind(e),ac=e.getCallStack.bind(e),X=e.pushSourceInfo.bind(e),_=e.getSourceInfo.bind(e),f=e.get.bind(e),U=e.getScopeForName.bind(e),aj=e.getDefault.bind(e),P=e.getGlobalDefault.bind(e),T=e.getLocalDefault.bind(e),at=e.setGlobal.bind(e),al=e.setDynamic.bind(e),au=e.setScoped.bind(e),h=e.set.bind(e),aD=e.getDocs.bind(e),ap=e.getString.bind(e),ai=e.getAstNode.bind(e),ag=e.applySpread.bind(e),av=e.sliceArgs.bind(e),p=e.applySpreadArgs.bind(e),q=e.warn.bind(e),aL=e.error.bind(e),aK=e.debug.bind(e),as=e.setCaches.bind(e),N=e.copyRuntimeState.bind(e),aR=e.test.bind(e),aS=e.and.bind(e),aX=e.or.bind(e),r=e.box.bind(e),g=e.unbox.bind(e),aI=e.Scope.bind(e),s=e.constructor.bind(e),J=e.__defineGetter__.bind(e),K=e.__defineSetter__.bind(e),W=e.hasOwnProperty.bind(e),L=e.__lookupGetter__.bind(e),M=e.__lookupSetter__.bind(e),B=e.propertyIsEnumerable.bind(e),s=e.constructor.bind(e),az=e.toString.bind(e),Y=e.toLocaleString.bind(e),aG=e.valueOf.bind(e),aa=e.isPrototypeOf.bind(e);var aB=e.context,aH=e.mixins,n=e.functions,ak=e.processors,u=e.registered,R=e.deferredContent,z=e.registerSelectorHooks,E=e.registerAtRuleHook,F=e.registerStyleHooks,w=e.registerFunctionCallHooks,aw=e.docCache,ah=e.stringCache,aq=e.nodeCache,aP=e.code,aW=e.fn,Z=e._currentScope,x=e._currentCallStackScope,ab=e._globalScope,am=e._dynamics,aT=e.css,ay=e.rulesets,an=e.extenders,af=e._scopeStack;d.apply(e.functions,{material_color:function(j,i){t(n.material_color&&n.material_color.createdScope);var j=j||m;h(c.$,j,!0);var i=i||new a("500","'");h(c.a,i,!0);h(c.A,r(u.map_get.apply(e.registered,p([f("$material_colors"),f(c.$)]))));if(g(f(c.A))){h(c._,r(e.registered.map_get.apply(e.registered,p([f(c.A),f(c.a)]))));if(g(f(c._))){var k=f(c._);o();return k}else {q(g(e.operate("+",e.operate("+",e.operate("+",e.operate("+",new a("=> ERROR: COLOR NOT FOUND! <= | ","\""),f(c.$)),new a(",","\"")),f(c.a)),new a(" combination did not match any of the material design colors.","\""))))}}else {q(g(e.operate("+",e.operate("+",new a("=> ERROR: COLOR NOT FOUND! <= | ","\""),f(c.$)),new a(" did not match any of the material design colors.","\""))))}var k=b.fromHex("#ff0000");o();return k},material_foreground_color:function(i){t(n.material_foreground_color&&n.material_foreground_color.createdScope);var i=i||m;h(c.$,i,!0);h(c._,r(e.registered.map_get.apply(e.registered,p([f("$material_foreground_colors"),f(c.$)]))));if(g(f(c._))){var j=f(c._);o();return j}else {q(g(e.operate("+",e.operate("+",new a("=> ERROR: COLOR NOT FOUND! <= | ","\""),f(c.$)),new a(" did not match any of the material design colors.","\""))))}var j=b.fromHex("#ff0000");o();return j}})},function(e){var o=e.constructor.bind(e),aM=e.bool.bind(e),aG=e.color.bind(e),aJ=e.quote.bind(e),aC=e.unquote.bind(e),aS=e.not.bind(e),aB=e.operate.bind(e),aK=e.reset.bind(e),aT=e.run.bind(e),L=e.createTypesBlock.bind(e),D=e.createMethodBlock.bind(e),y=e.createPropertyBlock.bind(e),r=e.createPrefixedFunctionBody.bind(e),M=e.createWrappedFn.bind(e),W=e.callWrappedFn.bind(e),ax=e.compile.bind(e),az=e.execute.bind(e),aO=e.load.bind(e),F=e.registerProcessor.bind(e),au=e.register.bind(e),aa=e.isRegistered.bind(e),R=e.getGlobalScope.bind(e),O=e.getCurrentScope.bind(e),u=e.getRegisteredFunctions.bind(e),_=e.getFunctions.bind(e),ak=e.getMixins.bind(e),ad=e.createScope.bind(e),an=e.pushScope.bind(e),at=e.popScope.bind(e),w=e.createCallStackScope.bind(e),z=e.pushCallStackScope.bind(e),E=e.popCallStackScope.bind(e),$=e.getCallStack.bind(e),T=e.pushSourceInfo.bind(e),X=e.getSourceInfo.bind(e),k=e.get.bind(e),Q=e.getScopeForName.bind(e),ag=e.getDefault.bind(e),i=e.getGlobalDefault.bind(e),P=e.getLocalDefault.bind(e),ap=e.setGlobal.bind(e),j=e.setDynamic.bind(e),aq=e.setScoped.bind(e),aU=e.set.bind(e),aA=e.getDocs.bind(e),al=e.getString.bind(e),af=e.getAstNode.bind(e),ac=e.applySpread.bind(e),ar=e.sliceArgs.bind(e),l=e.applySpreadArgs.bind(e),aP=e.warn.bind(e),aI=e.error.bind(e),aH=e.debug.bind(e),ao=e.setCaches.bind(e),K=e.copyRuntimeState.bind(e),n=e.test.bind(e),aQ=e.and.bind(e),aW=e.or.bind(e),m=e.box.bind(e),aL=e.unbox.bind(e),aF=e.Scope.bind(e),o=e.constructor.bind(e),G=e.__defineGetter__.bind(e),H=e.__defineSetter__.bind(e),S=e.hasOwnProperty.bind(e),I=e.__lookupGetter__.bind(e),J=e.__lookupSetter__.bind(e),x=e.propertyIsEnumerable.bind(e),o=e.constructor.bind(e),aw=e.toString.bind(e),U=e.toLocaleString.bind(e),aD=e.valueOf.bind(e),Y=e.isPrototypeOf.bind(e);var ay=e.context,aE=e.mixins,q=e.functions,ah=e.processors,p=e.registered,N=e.deferredContent,v=e.registerSelectorHooks,B=e.registerAtRuleHook,C=e.registerStyleHooks,s=e.registerFunctionCallHooks,as=e.docCache,ae=e.stringCache,am=e.nodeCache,aN=e.code,aV=e.fn,V=e._currentScope,t=e._currentCallStackScope,Z=e._globalScope,ai=e._dynamics,aR=e.css,av=e.rulesets,aj=e.extenders,ab=e._scopeStack;j("$dark-mode",i("$dark_mode")||A,0);j("$base-color",i("$base_color")||b.fromHex("#0288d1"),1);j("$base_color_name",i("$base_color_name")||new a("blue","'"),2);j("$material-colors",i("$material_colors")||new f([new a("red","'"),new f([new a("50","'"),b.fromHex("#ffebee"),new a("100","'"),b.fromHex("#ffcdd2"),new a("200","'"),b.fromHex("#ef9a9a"),new a("300","'"),b.fromHex("#e57373"),new a("400","'"),b.fromHex("#ef5350"),new a("500","'"),b.fromHex("#f44336"),new a("600","'"),b.fromHex("#e53935"),new a("700","'"),b.fromHex("#d32f2f"),new a("800","'"),b.fromHex("#c62828"),new a("900","'"),b.fromHex("#b71c1c"),new a("a100","'"),b.fromHex("#ff8a80"),new a("a200","'"),b.fromHex("#ff5252"),new a("a400","'"),b.fromHex("#ff1744"),new a("a700","'"),b.fromHex("#d50000")]),new a("pink","'"),new f([new a("50","'"),b.fromHex("#fce4ec"),new a("100","'"),b.fromHex("#f8bbd0"),new a("200","'"),b.fromHex("#f48fb1"),new a("300","'"),b.fromHex("#f06292"),new a("400","'"),b.fromHex("#ec407a"),new a("500","'"),b.fromHex("#e91e63"),new a("600","'"),b.fromHex("#d81b60"),new a("700","'"),b.fromHex("#c2185b"),new a("800","'"),b.fromHex("#ad1457"),new a("900","'"),b.fromHex("#880e4f"),new a("a100","'"),b.fromHex("#ff80ab"),new a("a200","'"),b.fromHex("#ff4081"),new a("a400","'"),b.fromHex("#f50057"),new a("a700","'"),b.fromHex("#c51162")]),new a("purple","'"),new f([new a("50","'"),b.fromHex("#f3e5f5"),new a("100","'"),b.fromHex("#e1bee7"),new a("200","'"),b.fromHex("#ce93d8"),new a("300","'"),b.fromHex("#ba68c8"),new a("400","'"),b.fromHex("#ab47bc"),new a("500","'"),b.fromHex("#9c27b0"),new a("600","'"),b.fromHex("#8e24aa"),new a("700","'"),b.fromHex("#7b1fa2"),new a("800","'"),b.fromHex("#6a1b9a"),new a("900","'"),b.fromHex("#4a148c"),new a("a100","'"),b.fromHex("#ea80fc"),new a("a200","'"),b.fromHex("#e040fb"),new a("a400","'"),b.fromHex("#d500f9"),new a("a700","'"),b.fromHex("#aa00ff")]),new a("deep-purple","'"),new f([new a("50","'"),b.fromHex("#ede7f6"),new a("100","'"),b.fromHex("#d1c4e9"),new a("200","'"),b.fromHex("#b39ddb"),new a("300","'"),b.fromHex("#9575cd"),new a("400","'"),b.fromHex("#7e57c2"),new a("500","'"),b.fromHex("#673ab7"),new a("600","'"),b.fromHex("#5e35b1"),new a("700","'"),b.fromHex("#512da8"),new a("800","'"),b.fromHex("#4527a0"),new a("900","'"),b.fromHex("#311b92"),new a("a100","'"),b.fromHex("#b388ff"),new a("a200","'"),b.fromHex("#7c4dff"),new a("a400","'"),b.fromHex("#651fff"),new a("a700","'"),b.fromHex("#6200ea")]),new a("indigo","'"),new f([new a("50","'"),b.fromHex("#e8eaf6"),new a("100","'"),b.fromHex("#c5cae9"),new a("200","'"),b.fromHex("#9fa8da"),new a("300","'"),b.fromHex("#7986cb"),new a("400","'"),b.fromHex("#5c6bc0"),new a("500","'"),b.fromHex("#3f51b5"),new a("600","'"),b.fromHex("#3949ab"),new a("700","'"),b.fromHex("#303f9f"),new a("800","'"),b.fromHex("#283593"),new a("900","'"),b.fromHex("#1a237e"),new a("a100","'"),b.fromHex("#8c9eff"),new a("a200","'"),b.fromHex("#536dfe"),new a("a400","'"),b.fromHex("#3d5afe"),new a("a700","'"),b.fromHex("#304ffe")]),new a("blue","'"),new f([new a("50","'"),b.fromHex("#e3f2fd"),new a("100","'"),b.fromHex("#bbdefb"),new a("200","'"),b.fromHex("#90caf9"),new a("300","'"),b.fromHex("#64b5f6"),new a("400","'"),b.fromHex("#42a5f5"),new a("500","'"),b.fromHex("#2196f3"),new a("600","'"),b.fromHex("#1e88e5"),new a("700","'"),b.fromHex("#1976d2"),new a("800","'"),b.fromHex("#1565c0"),new a("900","'"),b.fromHex("#0d47a1"),new a("a100","'"),b.fromHex("#82b1ff"),new a("a200","'"),b.fromHex("#448aff"),new a("a400","'"),b.fromHex("#2979ff"),new a("a700","'"),b.fromHex("#2962ff")]),new a("light-blue","'"),new f([new a("50","'"),b.fromHex("#e1f5fe"),new a("100","'"),b.fromHex("#b3e5fc"),new a("200","'"),b.fromHex("#81d4fa"),new a("300","'"),b.fromHex("#4fc3f7"),new a("400","'"),b.fromHex("#29b6f6"),new a("500","'"),b.fromHex("#03a9f4"),new a("600","'"),b.fromHex("#039be5"),new a("700","'"),b.fromHex("#0288d1"),new a("800","'"),b.fromHex("#0277bd"),new a("900","'"),b.fromHex("#01579b"),new a("a100","'"),b.fromHex("#80d8ff"),new a("a200","'"),b.fromHex("#40c4ff"),new a("a400","'"),b.fromHex("#00b0ff"),new a("a700","'"),b.fromHex("#0091ea")]),new a("cyan","'"),new f([new a("50","'"),b.fromHex("#e0f7fa"),new a("100","'"),b.fromHex("#b2ebf2"),new a("200","'"),b.fromHex("#80deea"),new a("300","'"),b.fromHex("#4dd0e1"),new a("400","'"),b.fromHex("#26c6da"),new a("500","'"),b.fromHex("#00bcd4"),new a("600","'"),b.fromHex("#00acc1"),new a("700","'"),b.fromHex("#0097a7"),new a("800","'"),b.fromHex("#00838f"),new a("900","'"),b.fromHex("#006064"),new a("a100","'"),b.fromHex("#84ffff"),new a("a200","'"),b.fromHex("#18ffff"),new a("a400","'"),b.fromHex("#00e5ff"),new a("a700","'"),b.fromHex("#00b8d4")]),new a("teal","'"),new f([new a("50","'"),b.fromHex("#e0f2f1"),new a("100","'"),b.fromHex("#b2dfdb"),new a("200","'"),b.fromHex("#80cbc4"),new a("300","'"),b.fromHex("#4db6ac"),new a("400","'"),b.fromHex("#26a69a"),new a("500","'"),b.fromHex("#009688"),new a("600","'"),b.fromHex("#00897b"),new a("700","'"),b.fromHex("#00796b"),new a("800","'"),b.fromHex("#00695c"),new a("900","'"),b.fromHex("#004d40"),new a("a100","'"),b.fromHex("#a7ffeb"),new a("a200","'"),b.fromHex("#64ffda"),new a("a400","'"),b.fromHex("#1de9b6"),new a("a700","'"),b.fromHex("#00bfa5")]),new a("green","'"),new f([new a("50","'"),b.fromHex("#e8f5e9"),new a("100","'"),b.fromHex("#c8e6c9"),new a("200","'"),b.fromHex("#a5d6a7"),new a("300","'"),b.fromHex("#81c784"),new a("400","'"),b.fromHex("#66bb6a"),new a("500","'"),b.fromHex("#4caf50"),new a("600","'"),b.fromHex("#43a047"),new a("700","'"),b.fromHex("#388e3c"),new a("800","'"),b.fromHex("#2e7d32"),new a("900","'"),b.fromHex("#1b5e20"),new a("a100","'"),b.fromHex("#b9f6ca"),new a("a200","'"),b.fromHex("#69f0ae"),new a("a400","'"),b.fromHex("#00e676"),new a("a700","'"),b.fromHex("#00c853")]),new a("light-green","'"),new f([new a("50","'"),b.fromHex("#f1f8e9"),new a("100","'"),b.fromHex("#dcedc8"),new a("200","'"),b.fromHex("#c5e1a5"),new a("300","'"),b.fromHex("#aed581"),new a("400","'"),b.fromHex("#9ccc65"),new a("500","'"),b.fromHex("#8bc34a"),new a("600","'"),b.fromHex("#7cb342"),new a("700","'"),b.fromHex("#689f38"),new a("800","'"),b.fromHex("#558b2f"),new a("900","'"),b.fromHex("#33691e"),new a("a100","'"),b.fromHex("#ccff90"),new a("a200","'"),b.fromHex("#b2ff59"),new a("a400","'"),b.fromHex("#76ff03"),new a("a700","'"),b.fromHex("#64dd17")]),new a("lime","'"),new f([new a("50","'"),b.fromHex("#f9fbe7"),new a("100","'"),b.fromHex("#f0f4c3"),new a("200","'"),b.fromHex("#e6ee9c"),new a("300","'"),b.fromHex("#dce775"),new a("400","'"),b.fromHex("#d4e157"),new a("500","'"),b.fromHex("#cddc39"),new a("600","'"),b.fromHex("#c0ca33"),new a("700","'"),b.fromHex("#afb42b"),new a("800","'"),b.fromHex("#9e9d24"),new a("900","'"),b.fromHex("#827717"),new a("a100","'"),b.fromHex("#f4ff81"),new a("a200","'"),b.fromHex("#eeff41"),new a("a400","'"),b.fromHex("#c6ff00"),new a("a700","'"),b.fromHex("#aeea00")]),new a("yellow","'"),new f([new a("50","'"),b.fromHex("#fffde7"),new a("100","'"),b.fromHex("#fff9c4"),new a("200","'"),b.fromHex("#fff59d"),new a("300","'"),b.fromHex("#fff176"),new a("400","'"),b.fromHex("#ffee58"),new a("500","'"),b.fromHex("#ffeb3b"),new a("600","'"),b.fromHex("#fdd835"),new a("700","'"),b.fromHex("#fbc02d"),new a("800","'"),b.fromHex("#f9a825"),new a("900","'"),b.fromHex("#f57f17"),new a("a100","'"),b.fromHex("#ffff8d"),new a("a200","'"),b.fromHex("#ffff00"),new a("a400","'"),b.fromHex("#ffea00"),new a("a700","'"),b.fromHex("#ffd600")]),new a("amber","'"),new f([new a("50","'"),b.fromHex("#fff8e1"),new a("100","'"),b.fromHex("#ffecb3"),new a("200","'"),b.fromHex("#ffe082"),new a("300","'"),b.fromHex("#ffd54f"),new a("400","'"),b.fromHex("#ffca28"),new a("500","'"),b.fromHex("#ffc107"),new a("600","'"),b.fromHex("#ffb300"),new a("700","'"),b.fromHex("#ffa000"),new a("800","'"),b.fromHex("#ff8f00"),new a("900","'"),b.fromHex("#ff6f00"),new a("a100","'"),b.fromHex("#ffe57f"),new a("a200","'"),b.fromHex("#ffd740"),new a("a400","'"),b.fromHex("#ffc400"),new a("a700","'"),b.fromHex("#ffab00")]),new a("orange","'"),new f([new a("50","'"),b.fromHex("#fff3e0"),new a("100","'"),b.fromHex("#ffe0b2"),new a("200","'"),b.fromHex("#ffcc80"),new a("300","'"),b.fromHex("#ffb74d"),new a("400","'"),b.fromHex("#ffa726"),new a("500","'"),b.fromHex("#ff9800"),new a("600","'"),b.fromHex("#fb8c00"),new a("700","'"),b.fromHex("#f57c00"),new a("800","'"),b.fromHex("#ef6c00"),new a("900","'"),b.fromHex("#e65100"),new a("a100","'"),b.fromHex("#ffd180"),new a("a200","'"),b.fromHex("#ffab40"),new a("a400","'"),b.fromHex("#ff9100"),new a("a700","'"),b.fromHex("#ff6d00")]),new a("deep-orange","'"),new f([new a("50","'"),b.fromHex("#fbe9e7"),new a("100","'"),b.fromHex("#ffccbc"),new a("200","'"),b.fromHex("#ffab91"),new a("300","'"),b.fromHex("#ff8a65"),new a("400","'"),b.fromHex("#ff7043"),new a("500","'"),b.fromHex("#ff5722"),new a("600","'"),b.fromHex("#f4511e"),new a("700","'"),b.fromHex("#e64a19"),new a("800","'"),b.fromHex("#d84315"),new a("900","'"),b.fromHex("#bf360c"),new a("a100","'"),b.fromHex("#ff9e80"),new a("a200","'"),b.fromHex("#ff6e40"),new a("a400","'"),b.fromHex("#ff3d00"),new a("a700","'"),b.fromHex("#dd2c00")]),new a("brown","'"),new f([new a("50","'"),b.fromHex("#efebe9"),new a("100","'"),b.fromHex("#d7ccc8"),new a("200","'"),b.fromHex("#bcaaa4"),new a("300","'"),b.fromHex("#a1887f"),new a("400","'"),b.fromHex("#8d6e63"),new a("500","'"),b.fromHex("#795548"),new a("600","'"),b.fromHex("#6d4c41"),new a("700","'"),b.fromHex("#5d4037"),new a("800","'"),b.fromHex("#4e342e"),new a("900","'"),b.fromHex("#3e2723")]),new a("grey","'"),new f([new a("50","'"),b.fromHex("#fafafa"),new a("100","'"),b.fromHex("#f5f5f5"),new a("200","'"),b.fromHex("#eeeeee"),new a("300","'"),b.fromHex("#e0e0e0"),new a("400","'"),b.fromHex("#bdbdbd"),new a("500","'"),b.fromHex("#9e9e9e"),new a("600","'"),b.fromHex("#757575"),new a("700","'"),b.fromHex("#616161"),new a("800","'"),b.fromHex("#424242"),new a("900","'"),b.fromHex("#212121")]),new a("blue-grey","'"),new f([new a("50","'"),b.fromHex("#eceff1"),new a("100","'"),b.fromHex("#cfd8dc"),new a("200","'"),b.fromHex("#b0bec5"),new a("300","'"),b.fromHex("#90a4ae"),new a("400","'"),b.fromHex("#78909c"),new a("500","'"),b.fromHex("#607d8b"),new a("600","'"),b.fromHex("#546e7a"),new a("700","'"),b.fromHex("#455a64"),new a("800","'"),b.fromHex("#37474f"),new a("900","'"),b.fromHex("#263238"),new a("1000","'"),b.fromHex("#11171a")])]),3);j("$base-highlight-color",i("$base_highlight_color")||m((q.material_color||material_color__fn).apply(e.functions,l([k("$base_color_name"),new a("300","'")]))),4);j("$base-light-color",i("$base_light_color")||m((e.functions.material_color||material_color__fn).apply(e.functions,l([k("$base_color_name"),new a("100","'")]))),5);j("$base-dark-color",i("$base_dark_color")||m((e.functions.material_color||material_color__fn).apply(e.functions,l([k("$base_color_name"),new a("700","'")]))),6);j("$base-pressed-color",i("$base_pressed_color")||m(p.darken.apply(e.registered,l([(n(k("$dark_mode"))?m(e.registered.darken.apply(e.registered,l([k("$base_color"),new h(15,"%")]))):m(e.registered.lighten.apply(e.registered,l([k("$base_color"),new h(15,"%")])))),new h(0,"%")]))),7);j("$base-focused-color",i("$base_focused_color")||m((e.functions.material_color||material_color__fn).apply(e.functions,l([k("$base_color_name"),new a("400","'")]))),8);j("$base-invisible-color",i("$base_invisible_color")||m(e.registered.rgba.apply(e.registered,l([k("$base_color"),new h(0),g,g,g]))),9);j("$material-foreground-colors",i("$material_foreground_colors")||new f([new a("red","'"),b.fromHex("#fff"),new a("pink","'"),b.fromHex("#fff"),new a("purple","'"),b.fromHex("#fff"),new a("deep-purple","'"),b.fromHex("#fff"),new a("indigo","'"),b.fromHex("#fff"),new a("blue","'"),b.fromHex("#fff"),new a("light-blue","'"),b.fromHex("#fff"),new a("cyan","'"),b.fromHex("#fff"),new a("teal","'"),b.fromHex("#fff"),new a("green","'"),b.fromHex("#fff"),new a("light-green","'"),b.fromHex("#222"),new a("lime","'"),b.fromHex("#222"),new a("yellow","'"),b.fromHex("#222"),new a("amber","'"),b.fromHex("#222"),new a("orange","'"),b.fromHex("#222"),new a("deep-orange","'"),b.fromHex("#fff"),new a("brown","'"),b.fromHex("#fff"),new a("grey","'"),b.fromHex("#222"),new a("blue-grey","'"),b.fromHex("#fff")]),10);j("$base-foreground-color",i("$base_foreground_color")||m((e.functions.material_foreground_color||material_foreground_color__fn).apply(e.functions,l([k("$base_color_name")]))),11);j("$accent_color_name",i("$accent_color_name")||new a("grey","'"),12);j("$accent-color",i("$accent_color")||m((e.functions.material_color||material_color__fn).apply(e.functions,l([k("$accent_color_name"),new a("500","'")]))),13);j("$accent-light-color",i("$accent_light_color")||m((e.functions.material_color||material_color__fn).apply(e.functions,l([k("$accent_color_name"),new a("100","'")]))),14);j("$accent-dark-color",i("$accent_dark_color")||m((e.functions.material_color||material_color__fn).apply(e.functions,l([k("$accent_color_name"),new a("700","'")]))),15);j("$accent-pressed-color",i("$accent_pressed_color")||(n(k("$dark_mode"))?m(e.registered.darken.apply(e.registered,l([k("$accent_color"),new h(15,"%")]))):m(e.registered.lighten.apply(e.registered,l([k("$accent_color"),new h(15,"%")])))),16);j("$accent-invisible-color",i("$accent_invisible_color")||m(e.registered.rgba.apply(e.registered,l([k("$accent_color"),new h(0),g,g,g]))),17);j("$accent-foreground-color",i("$accent_foreground_color")||m((e.functions.material_foreground_color||material_foreground_color__fn).apply(e.functions,l([k("$accent_color_name")]))),18);j("$confirm-color",i("$confirm_color")||m((e.functions.material_color||material_color__fn).apply(e.functions,l([new a("light-green","'"),new a("600","'")]))),19);j("$confirm-pressed-color",i("$confirm_pressed_color")||(n(k("$dark_mode"))?m(e.registered.darken.apply(e.registered,l([k("$confirm_color"),new h(15,"%")]))):m(e.registered.lighten.apply(e.registered,l([k("$confirm_color"),new h(15,"%")])))),20);j("$alert-color",i("$alert_color")||m((e.functions.material_color||material_color__fn).apply(e.functions,l([new a("red","'"),new a("800","'")]))),21);j("$alert-pressed-color",i("$alert_pressed_color")||(n(k("$dark_mode"))?m(e.registered.darken.apply(e.registered,l([k("$alert_color"),new h(15,"%")]))):m(e.registered.lighten.apply(e.registered,l([k("$alert_color"),new h(15,"%")])))),22);j(c._,i(c._)||b.fromHex("#212121"),23);j("$reverse-color",i("$reverse_color")||(n(k("$dark_mode"))?b.fromHex("#222"):b.fromHex("#fff")),24);j("$highlight-color",i("$highlight_color")||m(e.registered.rgba.apply(e.registered,l([k(c._),new h(0.54),g,g,g]))),25);j("$disabled-color",i("$disabled_color")||m(e.registered.rgba.apply(e.registered,l([k(c._),new h(0.38),g,g,g]))),26);j("$reverse-disabled-color",i("$reverse_disabled_color")||m(e.registered.rgba.apply(e.registered,l([k("$reverse_color"),new h(0.38),g,g,g]))),27);j("$divider-color",i("$divider_color")||m(e.registered.mix.apply(e.registered,l([k(c._),k("$reverse_color"),new h(12,"%")]))),28);j("$selected-background-color",i("$selected_background_color")||(n(k("$dark_mode"))?k("$base_dark_color"):m((e.functions.material_color||material_color__fn).apply(e.functions,l([new a("grey","'"),new a("300","'")])))),29);j("$hovered-background-color",i("$hovered_background_color")||(n(k("$dark_mode"))?b.fromHex("#4d4d4d"):m((e.functions.material_color||material_color__fn).apply(e.functions,l([new a("grey","'"),new a("200","'")])))),30);j("$header-background-color",i("$header_background_color")||(n(k("$dark_mode"))?m((e.functions.material_color||material_color__fn).apply(e.functions,l([new a("grey","'"),new a("800","'")]))):m((e.functions.material_color||material_color__fn).apply(e.functions,l([new a("grey","'"),new a("100","'")])))),31);j("$faded-color",i("$faded_color")||(n(k("$dark_mode"))?b.fromHex("#4d4d4d"):b.fromHex("#e1e1e1")),32);j("$background-color",i("$background_color")||(n(k("$dark_mode"))?b.fromHex("#303030"):b.fromHex("#fafafa")),33);j("$alt-background-color",i("$alt_background_color")||(n(k("$dark_mode"))?b.fromHex("#3a3a3a"):b.fromHex("#f5f5f5")),34);j("$reverse-background-color",i("$reverse_background_color")||(n(k("$dark_mode"))?b.fromHex("#fafafa"):b.fromHex("#303030")),35);j("$reverse-alt-background-color",i("$reverse_alt_background_color")||(n(k("$dark_mode"))?b.fromHex("#f5f5f5"):b.fromHex("#3a3a3a")),36);j("$overlay-color",i("$overlay_color")||(n(k("$dark_mode"))?m(e.registered.rgba.apply(e.registered,l([b.fromHex("#fff"),new h(0.03),g,g,g]))):m(e.registered.rgba.apply(e.registered,l([b.fromHex("#000"),new h(0.03),g,g,g])))),37);j("$content-padding",i("$content_padding")||new h(16,"px"),38)},{":root":["dark-mode","base-color","base-highlight-color","base-light-color","base-dark-color","base-pressed-color","base-focused-color","base-invisible-color","base-foreground-color","accent-color","accent-light-color","accent-dark-color","accent-pressed-color","accent-invisible-color","accent-foreground-color","confirm-color","confirm-pressed-color","alert-color","alert-pressed-color",B._,"reverse-color","highlight-color","disabled-color","reverse-disabled-color","divider-color","selected-background-color","hovered-background-color","header-background-color","faded-color","background-color","alt-background-color","reverse-background-color","reverse-alt-background-color","overlay-color","content-padding"],"html":["base_color_name","accent_color_name"]})})(Fashion);